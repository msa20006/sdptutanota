import { mithril_default } from "./mithril-chunk.js";
import { defer } from "./dist2-chunk.js";
import { lang } from "./LanguageViewModel-chunk.js";
import { Keys } from "./TutanotaConstants-chunk.js";
import { CredentialAuthenticationError } from "./ErrorUtils-chunk.js";
import { CancelledError } from "./CancelledError-chunk.js";
import { BaseButton } from "./Button-chunk.js";
import { Dialog, DialogType } from "./Dialog-chunk.js";
import { liveDataAttrs } from "./AriaUtils-chunk.js";
import { AppLockMethod } from "./AppLockMethod-chunk.js";
import { RadioSelector } from "./RadioSelector-chunk.js";

//#region src/common/native/main/SelectAppLockMethodDialog.ts
async function showAppLockMethodDialog(mobileSystemFacade) {
	await AppLockMethodDialog.showAndWaitForSelection(mobileSystemFacade);
}
var AppLockMethodDialog = class AppLockMethodDialog {
	error;
	finished;
	dialog;
	/** @private */
	constructor(mobileSystemFacade, supportedModes, previousSelection) {
		this.mobileSystemFacade = mobileSystemFacade;
		this.supportedModes = supportedModes;
		this.previousSelection = previousSelection;
		this.error = null;
		this.finished = defer();
		this.dialog = new Dialog(DialogType.EditMedium, { view: () => {
			return mithril_default("", [null, mithril_default(SelectAppLockMethodView, {
				class: "scroll pt plr-l height-100p",
				error: this.error,
				onConfirm: (mode) => this.onMethodSelected(mode),
				supportedModes: this.supportedModes,
				previousSelection: this.previousSelection
			})]);
		} }).addShortcut({
			help: "close_alt",
			key: Keys.ESC,
			exec: () => this.dialog.close()
		});
		this.dialog.setCloseHandler(() => {
			this.finished.resolve();
			this.dialog.close();
		});
	}
	static async showAndWaitForSelection(mobileSystemFacade) {
		const supportedModes = await mobileSystemFacade.getSupportedAppLockMethods();
		const previousSelection = await mobileSystemFacade.getAppLockMethod();
		const credentialsDialog = new AppLockMethodDialog(mobileSystemFacade, supportedModes, previousSelection);
		credentialsDialog.dialog.show();
		await credentialsDialog.finished.promise;
	}
	async onMethodSelected(mode) {
		try {
			await this.mobileSystemFacade.enforceAppLock(mode);
			await this.mobileSystemFacade.setAppLockMethod(mode);
			this.dialog.close();
			this.finished.resolve();
		} catch (e) {
			if (e instanceof CredentialAuthenticationError) {
				this.error = e.message;
				mithril_default.redraw();
			} else if (e instanceof CancelledError) {} else throw e;
		}
	}
};
var SelectAppLockMethodView = class {
	currentMethod;
	constructor({ attrs }) {
		this.currentMethod = attrs.previousSelection;
	}
	view({ attrs }) {
		const options = this.getSupportedOptions(attrs);
		const { onConfirm } = attrs;
		return [mithril_default(".flex.col", { class: attrs.class }, [
			attrs.error ? mithril_default(".small.center.statusTextColor.pb-s", liveDataAttrs(), attrs.error) : null,
			mithril_default("", lang.get("credentialsEncryptionModeSelection_msg")),
			mithril_default(".mt", mithril_default(RadioSelector, {
				name: "credentialsEncryptionMode_label",
				options,
				selectedOption: this.currentMethod,
				onOptionSelected: (mode) => {
					this.currentMethod = mode;
					attrs.onModeSelected?.(mode);
				}
			}))
		]), onConfirm ? this.renderSelectButton(() => onConfirm(this.currentMethod)) : null];
	}
	getSupportedOptions(attrs) {
		const generateOption = (name, value) => ({
			name,
			value
		});
		const options = [
			generateOption("credentialsEncryptionModeDeviceLock_label", AppLockMethod.None),
			generateOption("credentialsEncryptionModeDeviceCredentials_label", AppLockMethod.SystemPassOrBiometrics),
			generateOption("credentialsEncryptionModeBiometrics_label", AppLockMethod.Biometrics)
		];
		return options.filter((option) => attrs.supportedModes.includes(option.value));
	}
	renderSelectButton(onclick) {
		return mithril_default(BaseButton, {
			label: "ok_action",
			text: lang.get("ok_action"),
			class: "uppercase accent-bg full-width center b content-fg flash",
			style: { height: "60px" },
			onclick
		});
	}
};

//#endregion
export { SelectAppLockMethodView, showAppLockMethodDialog };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU2VsZWN0QXBwTG9ja01ldGhvZERpYWxvZy1jaHVuay5qcyIsIm5hbWVzIjpbIm1vYmlsZVN5c3RlbUZhY2FkZTogTW9iaWxlU3lzdGVtRmFjYWRlIiwic3VwcG9ydGVkTW9kZXM6IFJlYWRvbmx5QXJyYXk8QXBwTG9ja01ldGhvZD4iLCJwcmV2aW91c1NlbGVjdGlvbjogQXBwTG9ja01ldGhvZCIsIm1vZGU6IEFwcExvY2tNZXRob2QiLCJhdHRyczogU2VsZWN0QXBwTG9ja01ldGhvZERpYWxvZ0F0dHJzIiwibmFtZTogVHJhbnNsYXRpb25LZXkiLCJ2YWx1ZTogQXBwTG9ja01ldGhvZCIsIm9uY2xpY2s6ICgpID0+IHVua25vd24iXSwic291cmNlcyI6WyIuLi9zcmMvY29tbW9uL25hdGl2ZS9tYWluL1NlbGVjdEFwcExvY2tNZXRob2REaWFsb2cudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRGlhbG9nLCBEaWFsb2dUeXBlIH0gZnJvbSBcIi4uLy4uL2d1aS9iYXNlL0RpYWxvZy5qc1wiXG5pbXBvcnQgbSwgeyBDaGlsZHJlbiwgQ29tcG9uZW50LCBWbm9kZSB9IGZyb20gXCJtaXRocmlsXCJcbmltcG9ydCB7IGxhbmcsIFRyYW5zbGF0aW9uS2V5IH0gZnJvbSBcIi4uLy4uL21pc2MvTGFuZ3VhZ2VWaWV3TW9kZWwuanNcIlxuaW1wb3J0IHR5cGUgeyBSYWRpb1NlbGVjdG9yQXR0cnMsIFJhZGlvU2VsZWN0b3JPcHRpb24gfSBmcm9tIFwiLi4vLi4vZ3VpL2Jhc2UvUmFkaW9TZWxlY3Rvci5qc1wiXG5pbXBvcnQgeyBSYWRpb1NlbGVjdG9yIH0gZnJvbSBcIi4uLy4uL2d1aS9iYXNlL1JhZGlvU2VsZWN0b3IuanNcIlxuaW1wb3J0IHsgQ3JlZGVudGlhbEF1dGhlbnRpY2F0aW9uRXJyb3IgfSBmcm9tIFwiLi4vLi4vYXBpL2NvbW1vbi9lcnJvci9DcmVkZW50aWFsQXV0aGVudGljYXRpb25FcnJvci5qc1wiXG5pbXBvcnQgeyBsaXZlRGF0YUF0dHJzIH0gZnJvbSBcIi4uLy4uL2d1aS9BcmlhVXRpbHMuanNcIlxuaW1wb3J0IHR5cGUgeyBEZWZlcnJlZE9iamVjdCB9IGZyb20gXCJAdHV0YW8vdHV0YW5vdGEtdXRpbHNcIlxuaW1wb3J0IHsgZGVmZXIgfSBmcm9tIFwiQHR1dGFvL3R1dGFub3RhLXV0aWxzXCJcbmltcG9ydCB7IENhbmNlbGxlZEVycm9yIH0gZnJvbSBcIi4uLy4uL2FwaS9jb21tb24vZXJyb3IvQ2FuY2VsbGVkRXJyb3IuanNcIlxuaW1wb3J0IHsgS2V5cyB9IGZyb20gXCIuLi8uLi9hcGkvY29tbW9uL1R1dGFub3RhQ29uc3RhbnRzLmpzXCJcbmltcG9ydCB7IEJhc2VCdXR0b24gfSBmcm9tIFwiLi4vLi4vZ3VpL2Jhc2UvYnV0dG9ucy9CYXNlQnV0dG9uLmpzXCJcbmltcG9ydCB7IE1vYmlsZVN5c3RlbUZhY2FkZSB9IGZyb20gXCIuLi9jb21tb24vZ2VuZXJhdGVkaXBjL01vYmlsZVN5c3RlbUZhY2FkZS5qc1wiXG5pbXBvcnQgeyBBcHBMb2NrTWV0aG9kIH0gZnJvbSBcIi4uL2NvbW1vbi9nZW5lcmF0ZWRpcGMvQXBwTG9ja01ldGhvZC5qc1wiXG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzaG93QXBwTG9ja01ldGhvZERpYWxvZyhtb2JpbGVTeXN0ZW1GYWNhZGU6IE1vYmlsZVN5c3RlbUZhY2FkZSk6IFByb21pc2U8dm9pZD4ge1xuXHRhd2FpdCBBcHBMb2NrTWV0aG9kRGlhbG9nLnNob3dBbmRXYWl0Rm9yU2VsZWN0aW9uKG1vYmlsZVN5c3RlbUZhY2FkZSlcbn1cblxuY2xhc3MgQXBwTG9ja01ldGhvZERpYWxvZyB7XG5cdHByaXZhdGUgZXJyb3I6IHN0cmluZyB8IG51bGxcblx0cHJpdmF0ZSByZWFkb25seSBmaW5pc2hlZDogRGVmZXJyZWRPYmplY3Q8dm9pZD5cblx0cHJpdmF0ZSByZWFkb25seSBkaWFsb2c6IERpYWxvZ1xuXG5cdC8qKiBAcHJpdmF0ZSAqL1xuXHRjb25zdHJ1Y3Rvcihcblx0XHRwcml2YXRlIHJlYWRvbmx5IG1vYmlsZVN5c3RlbUZhY2FkZTogTW9iaWxlU3lzdGVtRmFjYWRlLFxuXHRcdHByaXZhdGUgcmVhZG9ubHkgc3VwcG9ydGVkTW9kZXM6IFJlYWRvbmx5QXJyYXk8QXBwTG9ja01ldGhvZD4sXG5cdFx0cHJpdmF0ZSByZWFkb25seSBwcmV2aW91c1NlbGVjdGlvbjogQXBwTG9ja01ldGhvZCxcblx0KSB7XG5cdFx0dGhpcy5lcnJvciA9IG51bGxcblx0XHR0aGlzLmZpbmlzaGVkID0gZGVmZXIoKVxuXHRcdHRoaXMuZGlhbG9nID0gbmV3IERpYWxvZyhEaWFsb2dUeXBlLkVkaXRNZWRpdW0sIHtcblx0XHRcdHZpZXc6ICgpID0+IHtcblx0XHRcdFx0Ly8gV2UgbmVlZCBjdXN0b20gZGlhbG9nIGJlY2F1c2U6XG5cdFx0XHRcdC8vIC0gV2UgZG9uJ3QgbmVlZCBsYXJnZSBkaWFsb2dcblx0XHRcdFx0Ly8gLSBXZSB3YW50IG91ciBzZWxlY3RvciBidXR0b24gaW4gdGhlIGJvZHkgYW5kIG5vdCBpbiB0aGUgaGVhZGVyIGFuZCBpdCBtdXN0IHN0aWNrIHRvIHRoZSBib3R0b20gb2YgdGhlIGRpYWxvZ1xuXHRcdFx0XHQvLyAgIChsYXJnZSBkaWFsb2cgc2Nyb2xscyBpdHMgY29udGVudHMgYW5kIHRoYXQncyAqbm90KiB3aGF0IHdlIHdhbnQgZm9yIHRoYXQgYnV0dG9uKS5cblx0XHRcdFx0cmV0dXJuIG0oXCJcIiwgW1xuXHRcdFx0XHRcdG51bGwsXG5cdFx0XHRcdFx0bShTZWxlY3RBcHBMb2NrTWV0aG9kVmlldywge1xuXHRcdFx0XHRcdFx0Y2xhc3M6IFwic2Nyb2xsIHB0IHBsci1sIGhlaWdodC0xMDBwXCIsXG5cdFx0XHRcdFx0XHRlcnJvcjogdGhpcy5lcnJvcixcblx0XHRcdFx0XHRcdG9uQ29uZmlybTogKG1vZGUpID0+IHRoaXMub25NZXRob2RTZWxlY3RlZChtb2RlKSxcblx0XHRcdFx0XHRcdHN1cHBvcnRlZE1vZGVzOiB0aGlzLnN1cHBvcnRlZE1vZGVzLFxuXHRcdFx0XHRcdFx0cHJldmlvdXNTZWxlY3Rpb246IHRoaXMucHJldmlvdXNTZWxlY3Rpb24sXG5cdFx0XHRcdFx0fSksXG5cdFx0XHRcdF0pXG5cdFx0XHR9LFxuXHRcdH0pLmFkZFNob3J0Y3V0KHtcblx0XHRcdGhlbHA6IFwiY2xvc2VfYWx0XCIsXG5cdFx0XHRrZXk6IEtleXMuRVNDLFxuXHRcdFx0ZXhlYzogKCkgPT4gdGhpcy5kaWFsb2cuY2xvc2UoKSxcblx0XHR9KVxuXHRcdHRoaXMuZGlhbG9nLnNldENsb3NlSGFuZGxlcigoKSA9PiB7XG5cdFx0XHR0aGlzLmZpbmlzaGVkLnJlc29sdmUoKVxuXHRcdFx0dGhpcy5kaWFsb2cuY2xvc2UoKVxuXHRcdH0pXG5cdH1cblxuXHRzdGF0aWMgYXN5bmMgc2hvd0FuZFdhaXRGb3JTZWxlY3Rpb24obW9iaWxlU3lzdGVtRmFjYWRlOiBNb2JpbGVTeXN0ZW1GYWNhZGUpIHtcblx0XHRjb25zdCBzdXBwb3J0ZWRNb2RlcyA9IGF3YWl0IG1vYmlsZVN5c3RlbUZhY2FkZS5nZXRTdXBwb3J0ZWRBcHBMb2NrTWV0aG9kcygpXG5cdFx0Y29uc3QgcHJldmlvdXNTZWxlY3Rpb24gPSBhd2FpdCBtb2JpbGVTeXN0ZW1GYWNhZGUuZ2V0QXBwTG9ja01ldGhvZCgpXG5cdFx0Y29uc3QgY3JlZGVudGlhbHNEaWFsb2cgPSBuZXcgQXBwTG9ja01ldGhvZERpYWxvZyhtb2JpbGVTeXN0ZW1GYWNhZGUsIHN1cHBvcnRlZE1vZGVzLCBwcmV2aW91c1NlbGVjdGlvbilcblxuXHRcdGNyZWRlbnRpYWxzRGlhbG9nLmRpYWxvZy5zaG93KClcblxuXHRcdGF3YWl0IGNyZWRlbnRpYWxzRGlhbG9nLmZpbmlzaGVkLnByb21pc2Vcblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgb25NZXRob2RTZWxlY3RlZChtb2RlOiBBcHBMb2NrTWV0aG9kKSB7XG5cdFx0dHJ5IHtcblx0XHRcdC8vIE1ha2Ugc3VyZSB0aGF0IHRoZSB1c2VyIGNhbiBhY3R1YWxseSB1c2UgdGhlIG1ldGhvZCBiZWZvcmUgd2Ugc2F2ZSBpdC5cblx0XHRcdC8vIEV4YW1wbGU6IG9uIGlPUyBCaW9tZXRyaWNzIHdpbGwgYmUgc3VwcG9ydGVkIGJ1dCBiZWZvcmUgdGhlIGZpcnN0IHVzZSB0aGUgdXNlciBtdXN0IGdpdmUgdGhlIHBlcm1pc3Npb24gYW55d2F5LlxuXHRcdFx0YXdhaXQgdGhpcy5tb2JpbGVTeXN0ZW1GYWNhZGUuZW5mb3JjZUFwcExvY2sobW9kZSlcblx0XHRcdGF3YWl0IHRoaXMubW9iaWxlU3lzdGVtRmFjYWRlLnNldEFwcExvY2tNZXRob2QobW9kZSlcblxuXHRcdFx0dGhpcy5kaWFsb2cuY2xvc2UoKVxuXG5cdFx0XHR0aGlzLmZpbmlzaGVkLnJlc29sdmUoKVxuXHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdGlmIChlIGluc3RhbmNlb2YgQ3JlZGVudGlhbEF1dGhlbnRpY2F0aW9uRXJyb3IpIHtcblx0XHRcdFx0dGhpcy5lcnJvciA9IGUubWVzc2FnZVxuXHRcdFx0XHRtLnJlZHJhdygpXG5cdFx0XHR9IGVsc2UgaWYgKGUgaW5zdGFuY2VvZiBDYW5jZWxsZWRFcnJvcikge1xuXHRcdFx0XHQvLyBpZ25vcmUuIHRoaXMgY2FuIGhhcHBlbiBpZiB3ZSBzd2l0Y2ggYXBwIHBpbiAtPiBkZXZpY2UgbG9jayBhbmQgdGhlIHVzZXIgY2FuY2VscyB0aGUgcGluIHByb21wdC5cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRocm93IGVcblx0XHRcdH1cblx0XHR9XG5cdH1cbn1cblxuaW50ZXJmYWNlIFNlbGVjdEFwcExvY2tNZXRob2REaWFsb2dBdHRycyB7XG5cdGNsYXNzPzogc3RyaW5nXG5cdHByZXZpb3VzU2VsZWN0aW9uOiBBcHBMb2NrTWV0aG9kXG5cdG9uQ29uZmlybTogKChhcHBMb2NrTWV0aG9kOiBBcHBMb2NrTWV0aG9kKSA9PiB1bmtub3duKSB8IG51bGxcblx0c3VwcG9ydGVkTW9kZXM6IFJlYWRvbmx5QXJyYXk8QXBwTG9ja01ldGhvZD5cblx0ZXJyb3I6IHN0cmluZyB8IG51bGxcblx0b25Nb2RlU2VsZWN0ZWQ/OiAobW9kZTogQXBwTG9ja01ldGhvZCkgPT4gdW5rbm93blxufVxuXG5leHBvcnQgY2xhc3MgU2VsZWN0QXBwTG9ja01ldGhvZFZpZXcgaW1wbGVtZW50cyBDb21wb25lbnQ8U2VsZWN0QXBwTG9ja01ldGhvZERpYWxvZ0F0dHJzPiB7XG5cdHByaXZhdGUgY3VycmVudE1ldGhvZDogQXBwTG9ja01ldGhvZFxuXG5cdGNvbnN0cnVjdG9yKHsgYXR0cnMgfTogVm5vZGU8U2VsZWN0QXBwTG9ja01ldGhvZERpYWxvZ0F0dHJzPikge1xuXHRcdHRoaXMuY3VycmVudE1ldGhvZCA9IGF0dHJzLnByZXZpb3VzU2VsZWN0aW9uXG5cdH1cblxuXHR2aWV3KHsgYXR0cnMgfTogVm5vZGU8U2VsZWN0QXBwTG9ja01ldGhvZERpYWxvZ0F0dHJzPik6IENoaWxkcmVuIHtcblx0XHRjb25zdCBvcHRpb25zID0gdGhpcy5nZXRTdXBwb3J0ZWRPcHRpb25zKGF0dHJzKVxuXG5cdFx0Y29uc3QgeyBvbkNvbmZpcm0gfSA9IGF0dHJzXG5cdFx0cmV0dXJuIFtcblx0XHRcdG0oXG5cdFx0XHRcdFwiLmZsZXguY29sXCIsXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjbGFzczogYXR0cnMuY2xhc3MsXG5cdFx0XHRcdH0sXG5cdFx0XHRcdFtcblx0XHRcdFx0XHRhdHRycy5lcnJvciA/IG0oXCIuc21hbGwuY2VudGVyLnN0YXR1c1RleHRDb2xvci5wYi1zXCIsIGxpdmVEYXRhQXR0cnMoKSwgYXR0cnMuZXJyb3IpIDogbnVsbCxcblx0XHRcdFx0XHRtKFwiXCIsIGxhbmcuZ2V0KFwiY3JlZGVudGlhbHNFbmNyeXB0aW9uTW9kZVNlbGVjdGlvbl9tc2dcIikpLFxuXHRcdFx0XHRcdG0oXG5cdFx0XHRcdFx0XHRcIi5tdFwiLFxuXHRcdFx0XHRcdFx0bShSYWRpb1NlbGVjdG9yLCB7XG5cdFx0XHRcdFx0XHRcdG5hbWU6IFwiY3JlZGVudGlhbHNFbmNyeXB0aW9uTW9kZV9sYWJlbFwiLFxuXHRcdFx0XHRcdFx0XHRvcHRpb25zLFxuXHRcdFx0XHRcdFx0XHRzZWxlY3RlZE9wdGlvbjogdGhpcy5jdXJyZW50TWV0aG9kLFxuXHRcdFx0XHRcdFx0XHRvbk9wdGlvblNlbGVjdGVkOiAobW9kZTogQXBwTG9ja01ldGhvZCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdHRoaXMuY3VycmVudE1ldGhvZCA9IG1vZGVcblx0XHRcdFx0XHRcdFx0XHRhdHRycy5vbk1vZGVTZWxlY3RlZD8uKG1vZGUpXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHR9IHNhdGlzZmllcyBSYWRpb1NlbGVjdG9yQXR0cnM8QXBwTG9ja01ldGhvZD4pLFxuXHRcdFx0XHRcdCksXG5cdFx0XHRcdF0sXG5cdFx0XHQpLFxuXHRcdFx0b25Db25maXJtID8gdGhpcy5yZW5kZXJTZWxlY3RCdXR0b24oKCkgPT4gb25Db25maXJtKHRoaXMuY3VycmVudE1ldGhvZCkpIDogbnVsbCxcblx0XHRdXG5cdH1cblxuXHRwcml2YXRlIGdldFN1cHBvcnRlZE9wdGlvbnMoYXR0cnM6IFNlbGVjdEFwcExvY2tNZXRob2REaWFsb2dBdHRycyk6IEFycmF5PFJhZGlvU2VsZWN0b3JPcHRpb248QXBwTG9ja01ldGhvZD4+IHtcblx0XHRjb25zdCBnZW5lcmF0ZU9wdGlvbiA9IChuYW1lOiBUcmFuc2xhdGlvbktleSwgdmFsdWU6IEFwcExvY2tNZXRob2QpOiBSYWRpb1NlbGVjdG9yT3B0aW9uPEFwcExvY2tNZXRob2Q+ID0+ICh7XG5cdFx0XHRuYW1lLFxuXHRcdFx0dmFsdWUsXG5cdFx0fSlcblxuXHRcdGNvbnN0IG9wdGlvbnMgPSBbXG5cdFx0XHRnZW5lcmF0ZU9wdGlvbihcImNyZWRlbnRpYWxzRW5jcnlwdGlvbk1vZGVEZXZpY2VMb2NrX2xhYmVsXCIsIEFwcExvY2tNZXRob2QuTm9uZSksXG5cdFx0XHRnZW5lcmF0ZU9wdGlvbihcImNyZWRlbnRpYWxzRW5jcnlwdGlvbk1vZGVEZXZpY2VDcmVkZW50aWFsc19sYWJlbFwiLCBBcHBMb2NrTWV0aG9kLlN5c3RlbVBhc3NPckJpb21ldHJpY3MpLFxuXHRcdFx0Z2VuZXJhdGVPcHRpb24oXCJjcmVkZW50aWFsc0VuY3J5cHRpb25Nb2RlQmlvbWV0cmljc19sYWJlbFwiLCBBcHBMb2NrTWV0aG9kLkJpb21ldHJpY3MpLFxuXHRcdF0gYXMgY29uc3Rcblx0XHRyZXR1cm4gb3B0aW9ucy5maWx0ZXIoKG9wdGlvbikgPT4gYXR0cnMuc3VwcG9ydGVkTW9kZXMuaW5jbHVkZXMob3B0aW9uLnZhbHVlKSlcblx0fVxuXG5cdHByaXZhdGUgcmVuZGVyU2VsZWN0QnV0dG9uKG9uY2xpY2s6ICgpID0+IHVua25vd24pIHtcblx0XHRyZXR1cm4gbShCYXNlQnV0dG9uLCB7XG5cdFx0XHRsYWJlbDogXCJva19hY3Rpb25cIixcblx0XHRcdHRleHQ6IGxhbmcuZ2V0KFwib2tfYWN0aW9uXCIpLFxuXHRcdFx0Y2xhc3M6IFwidXBwZXJjYXNlIGFjY2VudC1iZyBmdWxsLXdpZHRoIGNlbnRlciBiIGNvbnRlbnQtZmcgZmxhc2hcIixcblx0XHRcdHN0eWxlOiB7XG5cdFx0XHRcdGhlaWdodDogXCI2MHB4XCIsXG5cdFx0XHR9LFxuXHRcdFx0b25jbGljayxcblx0XHR9KVxuXHR9XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFlTyxlQUFlLHdCQUF3QkEsb0JBQXVEO0FBQ3BHLE9BQU0sb0JBQW9CLHdCQUF3QixtQkFBbUI7QUFDckU7SUFFSyxzQkFBTixNQUFNLG9CQUFvQjtDQUN6QixBQUFRO0NBQ1IsQUFBaUI7Q0FDakIsQUFBaUI7O0NBR2pCLFlBQ2tCQSxvQkFDQUMsZ0JBQ0FDLG1CQUNoQjtFQXlJRixLQTVJa0I7RUE0SWpCLEtBM0lpQjtFQTJJaEIsS0ExSWdCO0FBRWpCLE9BQUssUUFBUTtBQUNiLE9BQUssV0FBVyxPQUFPO0FBQ3ZCLE9BQUssU0FBUyxJQUFJLE9BQU8sV0FBVyxZQUFZLEVBQy9DLE1BQU0sTUFBTTtBQUtYLFVBQU8sZ0JBQUUsSUFBSSxDQUNaLE1BQ0EsZ0JBQUUseUJBQXlCO0lBQzFC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