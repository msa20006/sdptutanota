import { downcast, ofClass, pMap } from "./dist2-chunk.js";
import { lang } from "./LanguageViewModel-chunk.js";
import { GroupType, GroupTypeNameByCode, ShareCapability } from "./TutanotaConstants-chunk.js";
import { getEtId, isSameId } from "./EntityUtils-chunk.js";
import { GroupInfoTypeRef, GroupMemberTypeRef, ReceivedGroupInvitationTypeRef, UserGroupRootTypeRef } from "./TypeRefs2-chunk.js";
import { NotFoundError } from "./RestError-chunk.js";

//#region src/common/sharing/GroupUtils.ts
function hasCapabilityOnGroup(user, group, requiredCapability) {
	if (!isShareableGroupType(downcast(group.type))) return false;
	if (isSharedGroupOwner(group, user._id)) return true;
	const membership = user.memberships.find((gm) => isSameId(gm.group, group._id));
	if (membership) return membership.capability != null && Number(requiredCapability) <= Number(membership.capability);
	return false;
}
function isSharedGroupOwner(sharedGroup, user) {
	return !!(sharedGroup.user && isSameId(sharedGroup.user, typeof user === "string" ? user : getEtId(user)));
}
function getCapabilityText(capability) {
	switch (capability) {
		case ShareCapability.Invite: return lang.get("groupCapabilityInvite_label");
		case ShareCapability.Write: return lang.get("groupCapabilityWrite_label");
		case ShareCapability.Read: return lang.get("groupCapabilityRead_label");
		default: return lang.get("comboBoxSelectionNone_msg");
	}
}
function getMemberCapability(memberInfo, group) {
	if (isSharedGroupOwner(group, memberInfo.member.user)) return ShareCapability.Invite;
	return downcast(memberInfo.member.capability);
}
function loadGroupMembers(group, entityClient) {
	return entityClient.loadAll(GroupMemberTypeRef, group.members).then((members) => pMap(members, (member) => loadGroupInfoForMember(member, entityClient)));
}
function loadGroupInfoForMember(groupMember, entityClient) {
	return entityClient.load(GroupInfoTypeRef, groupMember.userGroupInfo).then((userGroupInfo) => {
		return {
			member: groupMember,
			info: userGroupInfo
		};
	});
}
function getDefaultGroupName(groupType) {
	switch (groupType) {
		case GroupType.Calendar: return lang.get("privateCalendar_label");
		case GroupType.Template: return lang.get("templateGroupDefaultName_label");
		default: return GroupTypeNameByCode[groupType];
	}
}
function loadReceivedGroupInvitations(userController, entityClient, type) {
	return entityClient.load(UserGroupRootTypeRef, userController.userGroupInfo.group).then((userGroupRoot) => entityClient.loadAll(ReceivedGroupInvitationTypeRef, userGroupRoot.invitations)).then((invitations) => invitations.filter((invitation) => getInvitationGroupType(invitation) === type)).catch(ofClass(NotFoundError, () => []));
}
const DEFAULT_GROUP_TYPE = GroupType.Calendar;
function getInvitationGroupType(invitation) {
	return invitation.groupType === null ? DEFAULT_GROUP_TYPE : invitation.groupType;
}
function isTemplateGroup(groupType) {
	return groupType === GroupType.Template;
}
function isShareableGroupType(groupType) {
	return groupType === GroupType.Calendar || groupType === GroupType.Template || groupType === GroupType.ContactList;
}
const TemplateGroupPreconditionFailedReason = Object.freeze({
	BUSINESS_FEATURE_REQUIRED: "templategroup.business_feature_required",
	UNLIMITED_REQUIRED: "templategroup.unlimited_required"
});
function getSharedGroupName(groupInfo, { userSettingsGroupRoot }, allowGroupNameOverride) {
	return getNullableSharedGroupName(groupInfo, userSettingsGroupRoot, allowGroupNameOverride) ?? getDefaultGroupName(downcast(groupInfo.groupType));
}
function getNullableSharedGroupName(groupInfo, userSettingsGroupRoot, allowGroupNameOverride) {
	const groupSettings = userSettingsGroupRoot.groupSettings.find((gc) => gc.group === groupInfo.group);
	return allowGroupNameOverride && groupSettings && groupSettings.name || groupInfo.name || null;
}

//#endregion
export { TemplateGroupPreconditionFailedReason, getCapabilityText, getDefaultGroupName, getInvitationGroupType, getMemberCapability, getNullableSharedGroupName, getSharedGroupName, hasCapabilityOnGroup, isShareableGroupType, isSharedGroupOwner, isTemplateGroup, loadGroupInfoForMember, loadGroupMembers, loadReceivedGroupInvitations };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiR3JvdXBVdGlsczItY2h1bmsuanMiLCJuYW1lcyI6WyJ1c2VyOiBVc2VyIiwiZ3JvdXA6IEdyb3VwIiwicmVxdWlyZWRDYXBhYmlsaXR5OiBTaGFyZUNhcGFiaWxpdHkiLCJnbTogR3JvdXBNZW1iZXJzaGlwIiwic2hhcmVkR3JvdXA6IEdyb3VwIiwidXNlcjogSWQgfCBVc2VyIiwiY2FwYWJpbGl0eTogU2hhcmVDYXBhYmlsaXR5IiwibWVtYmVySW5mbzogR3JvdXBNZW1iZXJJbmZvIiwiZW50aXR5Q2xpZW50OiBFbnRpdHlDbGllbnQiLCJncm91cE1lbWJlcjogR3JvdXBNZW1iZXIiLCJncm91cFR5cGU6IEdyb3VwVHlwZSIsInVzZXJDb250cm9sbGVyOiBVc2VyQ29udHJvbGxlciIsInR5cGU6IEdyb3VwVHlwZSIsImludml0YXRpb246IFJlY2VpdmVkR3JvdXBJbnZpdGF0aW9uIiwiZ3JvdXBJbmZvOiBHcm91cEluZm8iLCJhbGxvd0dyb3VwTmFtZU92ZXJyaWRlOiBib29sZWFuIiwidXNlclNldHRpbmdzR3JvdXBSb290OiBVc2VyU2V0dGluZ3NHcm91cFJvb3QiXSwic291cmNlcyI6WyIuLi9zcmMvY29tbW9uL3NoYXJpbmcvR3JvdXBVdGlscy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuXHRHcm91cCxcblx0R3JvdXBJbmZvLFxuXHRHcm91cEluZm9UeXBlUmVmLFxuXHRHcm91cE1lbWJlcixcblx0R3JvdXBNZW1iZXJzaGlwLFxuXHRHcm91cE1lbWJlclR5cGVSZWYsXG5cdFJlY2VpdmVkR3JvdXBJbnZpdGF0aW9uLFxuXHRSZWNlaXZlZEdyb3VwSW52aXRhdGlvblR5cGVSZWYsXG5cdFVzZXIsXG5cdFVzZXJHcm91cFJvb3RUeXBlUmVmLFxufSBmcm9tIFwiLi4vYXBpL2VudGl0aWVzL3N5cy9UeXBlUmVmcy5qc1wiXG5pbXBvcnQgeyBHcm91cFR5cGUsIEdyb3VwVHlwZU5hbWVCeUNvZGUsIFNoYXJlQ2FwYWJpbGl0eSB9IGZyb20gXCIuLi9hcGkvY29tbW9uL1R1dGFub3RhQ29uc3RhbnRzXCJcbmltcG9ydCB7IGdldEV0SWQsIGlzU2FtZUlkIH0gZnJvbSBcIi4uL2FwaS9jb21tb24vdXRpbHMvRW50aXR5VXRpbHNcIlxuaW1wb3J0IHsgbGFuZyB9IGZyb20gXCIuLi9taXNjL0xhbmd1YWdlVmlld01vZGVsXCJcbmltcG9ydCB7IGRvd25jYXN0LCBvZkNsYXNzLCBwcm9taXNlTWFwIH0gZnJvbSBcIkB0dXRhby90dXRhbm90YS11dGlsc1wiXG5pbXBvcnQgdHlwZSB7IEVudGl0eUNsaWVudCB9IGZyb20gXCIuLi9hcGkvY29tbW9uL0VudGl0eUNsaWVudFwiXG5pbXBvcnQgeyBOb3RGb3VuZEVycm9yIH0gZnJvbSBcIi4uL2FwaS9jb21tb24vZXJyb3IvUmVzdEVycm9yXCJcbmltcG9ydCB7IFVzZXJDb250cm9sbGVyIH0gZnJvbSBcIi4uL2FwaS9tYWluL1VzZXJDb250cm9sbGVyXCJcbmltcG9ydCB7IFVzZXJTZXR0aW5nc0dyb3VwUm9vdCB9IGZyb20gXCIuLi9hcGkvZW50aXRpZXMvdHV0YW5vdGEvVHlwZVJlZnMuanNcIlxuXG4vKipcbiAqIFdoZXRoZXIgb3Igbm90IGEgdXNlciBoYXMgYSBnaXZlbiBjYXBhYmlsaXR5IGZvciBhIHNoYXJlZCBncm91cC4gSWYgdGhlIGdyb3VwIHR5cGUgaXMgbm90IHNoYXJlYWJsZSwgdGhpcyB3aWxsIGFsd2F5cyByZXR1cm4gZmFsc2VcbiAqIEBwYXJhbSB1c2VyXG4gKiBAcGFyYW0gZ3JvdXBcbiAqIEBwYXJhbSByZXF1aXJlZENhcGFiaWxpdHlcbiAqIEByZXR1cm5zIHtib29sZWFufVxuICovXG5leHBvcnQgZnVuY3Rpb24gaGFzQ2FwYWJpbGl0eU9uR3JvdXAodXNlcjogVXNlciwgZ3JvdXA6IEdyb3VwLCByZXF1aXJlZENhcGFiaWxpdHk6IFNoYXJlQ2FwYWJpbGl0eSk6IGJvb2xlYW4ge1xuXHRpZiAoIWlzU2hhcmVhYmxlR3JvdXBUeXBlKGRvd25jYXN0KGdyb3VwLnR5cGUpKSkge1xuXHRcdHJldHVybiBmYWxzZVxuXHR9XG5cblx0aWYgKGlzU2hhcmVkR3JvdXBPd25lcihncm91cCwgdXNlci5faWQpKSB7XG5cdFx0cmV0dXJuIHRydWVcblx0fVxuXG5cdGNvbnN0IG1lbWJlcnNoaXAgPSB1c2VyLm1lbWJlcnNoaXBzLmZpbmQoKGdtOiBHcm91cE1lbWJlcnNoaXApID0+IGlzU2FtZUlkKGdtLmdyb3VwLCBncm91cC5faWQpKVxuXG5cdGlmIChtZW1iZXJzaGlwKSB7XG5cdFx0cmV0dXJuIG1lbWJlcnNoaXAuY2FwYWJpbGl0eSAhPSBudWxsICYmIE51bWJlcihyZXF1aXJlZENhcGFiaWxpdHkpIDw9IE51bWJlcihtZW1iZXJzaGlwLmNhcGFiaWxpdHkpXG5cdH1cblxuXHRyZXR1cm4gZmFsc2Vcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzU2hhcmVkR3JvdXBPd25lcihzaGFyZWRHcm91cDogR3JvdXAsIHVzZXI6IElkIHwgVXNlcik6IGJvb2xlYW4ge1xuXHRyZXR1cm4gISEoc2hhcmVkR3JvdXAudXNlciAmJiBpc1NhbWVJZChzaGFyZWRHcm91cC51c2VyLCB0eXBlb2YgdXNlciA9PT0gXCJzdHJpbmdcIiA/IHVzZXIgOiBnZXRFdElkKHVzZXIpKSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldENhcGFiaWxpdHlUZXh0KGNhcGFiaWxpdHk6IFNoYXJlQ2FwYWJpbGl0eSk6IHN0cmluZyB7XG5cdHN3aXRjaCAoY2FwYWJpbGl0eSkge1xuXHRcdGNhc2UgU2hhcmVDYXBhYmlsaXR5Lkludml0ZTpcblx0XHRcdHJldHVybiBsYW5nLmdldChcImdyb3VwQ2FwYWJpbGl0eUludml0ZV9sYWJlbFwiKVxuXG5cdFx0Y2FzZSBTaGFyZUNhcGFiaWxpdHkuV3JpdGU6XG5cdFx0XHRyZXR1cm4gbGFuZy5nZXQoXCJncm91cENhcGFiaWxpdHlXcml0ZV9sYWJlbFwiKVxuXG5cdFx0Y2FzZSBTaGFyZUNhcGFiaWxpdHkuUmVhZDpcblx0XHRcdHJldHVybiBsYW5nLmdldChcImdyb3VwQ2FwYWJpbGl0eVJlYWRfbGFiZWxcIilcblxuXHRcdGRlZmF1bHQ6XG5cdFx0XHRyZXR1cm4gbGFuZy5nZXQoXCJjb21ib0JveFNlbGVjdGlvbk5vbmVfbXNnXCIpXG5cdH1cbn1cblxuZXhwb3J0IHR5cGUgR3JvdXBNZW1iZXJJbmZvID0ge1xuXHRtZW1iZXI6IEdyb3VwTWVtYmVyXG5cdGluZm86IEdyb3VwSW5mb1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0TWVtYmVyQ2FwYWJpbGl0eShtZW1iZXJJbmZvOiBHcm91cE1lbWJlckluZm8sIGdyb3VwOiBHcm91cCk6IFNoYXJlQ2FwYWJpbGl0eSB7XG5cdGlmIChpc1NoYXJlZEdyb3VwT3duZXIoZ3JvdXAsIG1lbWJlckluZm8ubWVtYmVyLnVzZXIpKSB7XG5cdFx0cmV0dXJuIFNoYXJlQ2FwYWJpbGl0eS5JbnZpdGVcblx0fVxuXG5cdHJldHVybiBkb3duY2FzdChtZW1iZXJJbmZvLm1lbWJlci5jYXBhYmlsaXR5KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gbG9hZEdyb3VwTWVtYmVycyhncm91cDogR3JvdXAsIGVudGl0eUNsaWVudDogRW50aXR5Q2xpZW50KTogUHJvbWlzZTxBcnJheTxHcm91cE1lbWJlckluZm8+PiB7XG5cdHJldHVybiBlbnRpdHlDbGllbnRcblx0XHQubG9hZEFsbChHcm91cE1lbWJlclR5cGVSZWYsIGdyb3VwLm1lbWJlcnMpXG5cdFx0LnRoZW4oKG1lbWJlcnMpID0+IHByb21pc2VNYXAobWVtYmVycywgKG1lbWJlcikgPT4gbG9hZEdyb3VwSW5mb0Zvck1lbWJlcihtZW1iZXIsIGVudGl0eUNsaWVudCkpKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gbG9hZEdyb3VwSW5mb0Zvck1lbWJlcihncm91cE1lbWJlcjogR3JvdXBNZW1iZXIsIGVudGl0eUNsaWVudDogRW50aXR5Q2xpZW50KTogUHJvbWlzZTxHcm91cE1lbWJlckluZm8+IHtcblx0cmV0dXJuIGVudGl0eUNsaWVudC5sb2FkKEdyb3VwSW5mb1R5cGVSZWYsIGdyb3VwTWVtYmVyLnVzZXJHcm91cEluZm8pLnRoZW4oKHVzZXJHcm91cEluZm8pID0+IHtcblx0XHRyZXR1cm4ge1xuXHRcdFx0bWVtYmVyOiBncm91cE1lbWJlcixcblx0XHRcdGluZm86IHVzZXJHcm91cEluZm8sXG5cdFx0fVxuXHR9KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGVmYXVsdEdyb3VwTmFtZShncm91cFR5cGU6IEdyb3VwVHlwZSk6IHN0cmluZyB7XG5cdHN3aXRjaCAoZ3JvdXBUeXBlKSB7XG5cdFx0Y2FzZSBHcm91cFR5cGUuQ2FsZW5kYXI6XG5cdFx0XHRyZXR1cm4gbGFuZy5nZXQoXCJwcml2YXRlQ2FsZW5kYXJfbGFiZWxcIilcblx0XHRjYXNlIEdyb3VwVHlwZS5UZW1wbGF0ZTpcblx0XHRcdHJldHVybiBsYW5nLmdldChcInRlbXBsYXRlR3JvdXBEZWZhdWx0TmFtZV9sYWJlbFwiKVxuXHRcdGRlZmF1bHQ6XG5cdFx0XHRyZXR1cm4gR3JvdXBUeXBlTmFtZUJ5Q29kZVtncm91cFR5cGVdXG5cdH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGxvYWRSZWNlaXZlZEdyb3VwSW52aXRhdGlvbnMoXG5cdHVzZXJDb250cm9sbGVyOiBVc2VyQ29udHJvbGxlcixcblx0ZW50aXR5Q2xpZW50OiBFbnRpdHlDbGllbnQsXG5cdHR5cGU6IEdyb3VwVHlwZSxcbik6IFByb21pc2U8QXJyYXk8UmVjZWl2ZWRHcm91cEludml0YXRpb24+PiB7XG5cdHJldHVybiBlbnRpdHlDbGllbnRcblx0XHQubG9hZChVc2VyR3JvdXBSb290VHlwZVJlZiwgdXNlckNvbnRyb2xsZXIudXNlckdyb3VwSW5mby5ncm91cClcblx0XHQudGhlbigodXNlckdyb3VwUm9vdCkgPT4gZW50aXR5Q2xpZW50LmxvYWRBbGwoUmVjZWl2ZWRHcm91cEludml0YXRpb25UeXBlUmVmLCB1c2VyR3JvdXBSb290Lmludml0YXRpb25zKSlcblx0XHQudGhlbigoaW52aXRhdGlvbnMpID0+IGludml0YXRpb25zLmZpbHRlcigoaW52aXRhdGlvbikgPT4gZ2V0SW52aXRhdGlvbkdyb3VwVHlwZShpbnZpdGF0aW9uKSA9PT0gdHlwZSkpXG5cdFx0LmNhdGNoKG9mQ2xhc3MoTm90Rm91bmRFcnJvciwgKCkgPT4gW10pKVxufVxuXG4vLyBHcm91cCBpbnZpdGF0aW9ucyB3aXRob3V0IGEgdHlwZSBzZXQgd2VyZSBzZW50IHdoZW4gQ2FsZW5kYXJzIHdlcmUgdGhlIG9ubHkgc2hhcmVhYmxlIGtpbmQgb2YgdXNlciBncm91cFxuY29uc3QgREVGQVVMVF9HUk9VUF9UWVBFID0gR3JvdXBUeXBlLkNhbGVuZGFyXG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRJbnZpdGF0aW9uR3JvdXBUeXBlKGludml0YXRpb246IFJlY2VpdmVkR3JvdXBJbnZpdGF0aW9uKTogU2hhcmVhYmxlR3JvdXBUeXBlIHtcblx0cmV0dXJuIGludml0YXRpb24uZ3JvdXBUeXBlID09PSBudWxsID8gREVGQVVMVF9HUk9VUF9UWVBFIDogKGludml0YXRpb24uZ3JvdXBUeXBlIGFzIFNoYXJlYWJsZUdyb3VwVHlwZSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzVGVtcGxhdGVHcm91cChncm91cFR5cGU6IEdyb3VwVHlwZSk6IGJvb2xlYW4ge1xuXHRyZXR1cm4gZ3JvdXBUeXBlID09PSBHcm91cFR5cGUuVGVtcGxhdGVcbn1cblxuZXhwb3J0IHR5cGUgU2hhcmVhYmxlR3JvdXBUeXBlID0gR3JvdXBUeXBlLkNhbGVuZGFyIHwgR3JvdXBUeXBlLlRlbXBsYXRlIHwgR3JvdXBUeXBlLkNvbnRhY3RMaXN0XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1NoYXJlYWJsZUdyb3VwVHlwZShncm91cFR5cGU6IEdyb3VwVHlwZSk6IGdyb3VwVHlwZSBpcyBTaGFyZWFibGVHcm91cFR5cGUge1xuXHQvLyBTaG91bGQgYmUgc3luY2hyb25pc2VkIHdpdGggR3JvdXBUeXBlOjppc1NoYXJlYWJsZUdyb3VwIGluIHR1dGFkYlxuXHRyZXR1cm4gZ3JvdXBUeXBlID09PSBHcm91cFR5cGUuQ2FsZW5kYXIgfHwgZ3JvdXBUeXBlID09PSBHcm91cFR5cGUuVGVtcGxhdGUgfHwgZ3JvdXBUeXBlID09PSBHcm91cFR5cGUuQ29udGFjdExpc3Rcbn1cblxuZXhwb3J0IGNvbnN0IFRlbXBsYXRlR3JvdXBQcmVjb25kaXRpb25GYWlsZWRSZWFzb24gPSBPYmplY3QuZnJlZXplKHtcblx0QlVTSU5FU1NfRkVBVFVSRV9SRVFVSVJFRDogXCJ0ZW1wbGF0ZWdyb3VwLmJ1c2luZXNzX2ZlYXR1cmVfcmVxdWlyZWRcIixcblx0VU5MSU1JVEVEX1JFUVVJUkVEOiBcInRlbXBsYXRlZ3JvdXAudW5saW1pdGVkX3JlcXVpcmVkXCIsXG59KVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2hhcmVkR3JvdXBOYW1lKGdyb3VwSW5mbzogR3JvdXBJbmZvLCB7IHVzZXJTZXR0aW5nc0dyb3VwUm9vdCB9OiBVc2VyQ29udHJvbGxlciwgYWxsb3dHcm91cE5hbWVPdmVycmlkZTogYm9vbGVhbik6IHN0cmluZyB7XG5cdHJldHVybiBnZXROdWxsYWJsZVNoYXJlZEdyb3VwTmFtZShncm91cEluZm8sIHVzZXJTZXR0aW5nc0dyb3VwUm9vdCwgYWxsb3dHcm91cE5hbWVPdmVycmlkZSkgPz8gZ2V0RGVmYXVsdEdyb3VwTmFtZShkb3duY2FzdChncm91cEluZm8uZ3JvdXBUeXBlKSlcbn1cblxuLyoqXG4gKiBHZXQgc2hhcmVkIGdyb3VwIG5hbWUgb3IgZGVmYXVsdCB0byBudWxsLlxuICogTmVlZGVkIGluIG9yZGVyIHRvIG1ha2UgdHJhbnNsYXRpb25zIG9mIGRlZmF1bHQgdGVtcGxhdGUgZ3JvdXAgbmFtZXMgd29yayBpbiBTZXR0aW5nc1ZpZXdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldE51bGxhYmxlU2hhcmVkR3JvdXBOYW1lKGdyb3VwSW5mbzogR3JvdXBJbmZvLCB1c2VyU2V0dGluZ3NHcm91cFJvb3Q6IFVzZXJTZXR0aW5nc0dyb3VwUm9vdCwgYWxsb3dHcm91cE5hbWVPdmVycmlkZTogYm9vbGVhbik6IHN0cmluZyB8IG51bGwge1xuXHRjb25zdCBncm91cFNldHRpbmdzID0gdXNlclNldHRpbmdzR3JvdXBSb290Lmdyb3VwU2V0dGluZ3MuZmluZCgoZ2MpID0+IGdjLmdyb3VwID09PSBncm91cEluZm8uZ3JvdXApXG5cdC8vIHJldHVybiAoYWxsb3dHcm91cE5hbWVPdmVycmlkZSAmJiBncm91cFNldHRpbmdzICYmIGdyb3VwU2V0dGluZ3MubmFtZSkgfHwgZ3JvdXBJbmZvLm5hbWUgfHwgZ2V0RGVmYXVsdEdyb3VwTmFtZShkb3duY2FzdChncm91cEluZm8uZ3JvdXBUeXBlKSlcblx0cmV0dXJuIChhbGxvd0dyb3VwTmFtZU92ZXJyaWRlICYmIGdyb3VwU2V0dGluZ3MgJiYgZ3JvdXBTZXR0aW5ncy5uYW1lKSB8fCBncm91cEluZm8ubmFtZSB8fCBudWxsXG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBNEJPLFNBQVMscUJBQXFCQSxNQUFZQyxPQUFjQyxvQkFBOEM7QUFDNUcsTUFBSyxxQkFBcUIsU0FBUyxNQUFNLEtBQUssQ0FBQyxDQUM5QyxRQUFPO0FBR1IsS0FBSSxtQkFBbUIsT0FBTyxLQUFLLElBQUksQ0FDdEMsUUFBTztDQUdSLE1BQU0sYUFBYSxLQUFLLFlBQVksS0FBSyxDQUFDQyxPQUF3QixTQUFTLEdBQUcsT0FBTyxNQUFNLElBQUksQ0FBQztBQUVoRyxLQUFJLFdBQ0gsUUFBTyxXQUFXLGNBQWMsUUFBUSxPQUFPLG1CQUFtQixJQUFJLE9BQU8sV0FBVyxXQUFXO0FBR3BHLFFBQU87QUFDUDtBQUVNLFNBQVMsbUJBQW1CQyxhQUFvQkMsTUFBMEI7QUFDaEYsV0FBVSxZQUFZLFFBQVEsU0FBUyxZQUFZLGFBQWEsU0FBUyxXQUFXLE9BQU8sUUFBUSxLQUFLLENBQUM7QUFDekc7QUFFTSxTQUFTLGtCQUFrQkMsWUFBcUM7QUFDdEUsU0FBUSxZQUFSO0FBQ0MsT0FBSyxnQkFBZ0IsT0FDcEIsUUFBTyxLQUFLLElBQUksOEJBQThCO0FBRS9DLE9BQUssZ0JBQWdCLE1BQ3BCLFFBQU8sS0FBSyxJQUFJLDZCQUE2QjtBQUU5QyxPQUFLLGdCQUFnQixLQUNwQixRQUFPLEtBQUssSUFBSSw0QkFBNEI7QUFFN0MsVUFDQyxRQUFPLEtBQUssSUFBSSw0QkFBNEI7Q0FDN0M7QUFDRDtBQU9NLFNBQVMsb0JBQW9CQyxZQUE2Qk4sT0FBK0I7QUFDL0YsS0FBSSxtQkFBbUIsT0FBTyxXQUFXLE9BQU8sS0FBSyxDQUNwRCxRQUFPLGdCQUFnQjtBQUd4QixRQUFPLFNBQVMsV0FBVyxPQUFPLFdBQVc7QUFDN0M7QUFFTSxTQUFTLGlCQUFpQkEsT0FBY08sY0FBNkQ7QUFDM0csUUFBTyxhQUNMLFFBQVEsb0JBQW9CLE1BQU0sUUFBUSxDQUMxQyxLQUFLLENBQUMsWUFBWSxLQUFXLFNBQVMsQ0FBQyxXQUFXLHVCQUF1QixRQUFRLGFBQWEsQ0FBQyxDQUFDO0FBQ2xHO0FBRU0sU0FBUyx1QkFBdUJDLGFBQTBCRCxjQUFzRDtBQUN0SCxRQUFPLGFBQWEsS0FBSyxrQkFBa0IsWUFBWSxjQUFjLENBQUMsS0FBSyxDQUFDLGtCQUFrQjtBQUM3RixTQUFPO0dBQ04sUUFBUTtHQUNSLE1BQU07RUFDTjtDQUNELEVBQUM7QUFDRjtBQUVNLFNBQVMsb0JBQW9CRSxXQUE4QjtBQUNqRSxTQUFRLFdBQVI7QUFDQyxPQUFLLFVBQVUsU0FDZCxRQUFPLEtBQUssSUFBSSx3QkFBd0I7QUFDekMsT0FBSyxVQUFVLFNBQ2QsUUFBTyxLQUFLLElBQUksaUNBQWlDO0FBQ2xELFVBQ0MsUUFBTyxvQkFBb0I7Q0FDNUI7QUFDRDtBQUVNLFNBQVMsNkJBQ2ZDLGdCQUNBSCxjQUNBSSxNQUMwQztBQUMxQyxRQUFPLGFBQ0wsS0FBSyxzQkFBc0IsZUFBZSxjQUFjLE1BQU0sQ0FDOUQsS0FBSyxDQUFDLGtCQUFrQixhQUFhLFFBQVEsZ0NBQWdDLGNBQWMsWUFBWSxDQUFDLENBQ3hHLEtBQUssQ0FBQyxnQkFBZ0IsWUFBWSxPQUFPLENBQUMsZUFBZSx1QkFBdUIsV0FBVyxLQUFLLEtBQUssQ0FBQyxDQUN0RyxNQUFNLFFBQVEsZUFBZSxNQUFNLENBQUUsRUFBQyxDQUFDO0FBQ3pDO0FBR0QsTUFBTSxxQkFBcUIsVUFBVTtBQUU5QixTQUFTLHVCQUF1QkMsWUFBeUQ7QUFDL0YsUUFBTyxXQUFXLGNBQWMsT0FBTyxxQkFBc0IsV0FBVztBQUN4RTtBQUVNLFNBQVMsZ0JBQWdCSCxXQUErQjtBQUM5RCxRQUFPLGNBQWMsVUFBVTtBQUMvQjtBQUlNLFNBQVMscUJBQXFCQSxXQUF1RDtBQUUzRixRQUFPLGNBQWMsVUFBVSxZQUFZLGNBQWMsVUFBVSxZQUFZLGNBQWMsVUFBVTtBQUN2RztNQUVZLHdDQUF3QyxPQUFPLE9BQU87Q0FDbEUsMkJBQTJCO0NBQzNCLG9CQUFvQjtBQUNwQixFQUFDO0FBRUssU0FBUyxtQkFBbUJJLFdBQXNCLEVBQUUsdUJBQXVDLEVBQUVDLHdCQUF5QztBQUM1SSxRQUFPLDJCQUEyQixXQUFXLHVCQUF1Qix1QkFBdUIsSUFBSSxvQkFBb0IsU0FBUyxVQUFVLFVBQVUsQ0FBQztBQUNqSjtBQU1NLFNBQVMsMkJBQTJCRCxXQUFzQkUsdUJBQThDRCx3QkFBZ0Q7Q0FDOUosTUFBTSxnQkFBZ0Isc0JBQXNCLGNBQWMsS0FBSyxDQUFDLE9BQU8sR0FBRyxVQUFVLFVBQVUsTUFBTTtBQUVwRyxRQUFRLDBCQUEwQixpQkFBaUIsY0FBYyxRQUFTLFVBQVUsUUFBUTtBQUM1RiJ9