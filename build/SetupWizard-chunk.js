import "./dist-chunk.js";
import "./ProgrammingError-chunk.js";
import { isAndroidApp } from "./Env-chunk.js";
import { client } from "./ClientDetector-chunk.js";
import { mithril_default } from "./mithril-chunk.js";
import { defer } from "./dist2-chunk.js";
import "./WhitelabelCustomizations-chunk.js";
import { lang } from "./LanguageViewModel-chunk.js";
import "./styles-chunk.js";
import { themeOptions } from "./theme-chunk.js";
import "./TutanotaConstants-chunk.js";
import "./KeyManager-chunk.js";
import "./WindowFacade-chunk.js";
import "./RootView-chunk.js";
import "./size-chunk.js";
import "./HtmlUtils-chunk.js";
import "./ParserCombinator-chunk.js";
import "./stream-chunk.js";
import { CredentialAuthenticationError } from "./ErrorUtils-chunk.js";
import "./RestError-chunk.js";
import "./OutOfSyncError-chunk.js";
import { CancelledError } from "./CancelledError-chunk.js";
import "./SuspensionError-chunk.js";
import "./LoginIncompleteError-chunk.js";
import "./CryptoError-chunk.js";
import "./RecipientsNotFoundError-chunk.js";
import "./DbError-chunk.js";
import "./QuotaExceededError-chunk.js";
import "./DeviceStorageUnavailableError-chunk.js";
import "./MailBodyTooLargeError-chunk.js";
import "./ImportError-chunk.js";
import "./WebauthnError-chunk.js";
import "./PermissionError-chunk.js";
import "./Button-chunk.js";
import "./Icons-chunk.js";
import "./DialogHeaderBar-chunk.js";
import "./CountryList-chunk.js";
import { Dialog, DialogType } from "./Dialog-chunk.js";
import "./Icon-chunk.js";
import "./AriaUtils-chunk.js";
import "./IconButton-chunk.js";
import { locator } from "./CommonLocator-chunk.js";
import "./BannerButton-chunk.js";
import { LoginButton } from "./LoginButton-chunk.js";
import { PermissionType$1 as PermissionType } from "./PermissionType-chunk.js";
import { AppLockMethod } from "./AppLockMethod-chunk.js";
import { RadioSelector } from "./RadioSelector-chunk.js";
import { NotificationPermissionsBody, renderSettingsBannerButton } from "./NotificationPermissionsDialog-chunk.js";
import { SelectAppLockMethodView } from "./SelectAppLockMethodDialog-chunk.js";
import { WizardEventType, createWizardDialog, emitWizardEvent, wizardPageWrapper } from "./WizardDialog-chunk.js";

//#region src/common/native/main/wizard/setupwizardpages/SetupPageLayout.ts
var SetupPageLayout = class {
	view({ attrs, children }) {
		return mithril_default("section.center.flex.flex-column.dialog-height-small.mt", [
			mithril_default("img.onboarding-logo.center-h", {
				src: `${window.tutao.appState.prefixWithoutFile}/images/onboarding-wizard/${attrs.image}.svg`,
				alt: "",
				rel: "noreferrer",
				loading: "lazy",
				decoding: "async",
				class: attrs.class
			}),
			children,
			mithril_default(LoginButton, {
				label: attrs.buttonLabel ?? "next_action",
				class: "wizard-next-button",
				onclick: (_, dom) => {
					emitWizardEvent(dom, WizardEventType.SHOW_NEXT_PAGE);
				}
			})
		]);
	}
};

//#endregion
//#region src/common/native/main/wizard/setupwizardpages/SetupCongraulationsPage.ts
var SetupCongratulationsPage = class {
	view() {
		return mithril_default(SetupPageLayout, {
			image: "congratulations",
			class: "onboarding-logo-large"
		}, [mithril_default("h2.mt-l.b", lang.get("welcome_text")), mithril_default("p.mt-s.full-width", lang.get("onboarding_text"))]);
	}
};
var SetupCongratulationsPageAttrs = class {
	preventGoBack = true;
	hidePagingButtonForPage = false;
	data = null;
	headerTitle() {
		return "welcome_label";
	}
	nextAction(showDialogs) {
		return Promise.resolve(true);
	}
	isSkipAvailable() {
		return false;
	}
	isEnabled() {
		return true;
	}
};

//#endregion
//#region src/common/native/main/wizard/setupwizardpages/SetupNotificationsPage.ts
var SetupNotificationsPage = class {
	view({ attrs }) {
		return mithril_default(SetupPageLayout, { image: "notifications" }, mithril_default(NotificationPermissionsBody, {
			isNotificationPermissionGranted: attrs.data.isNotificationPermissionGranted,
			isBatteryPermissionGranted: attrs.data.isBatteryPermissionGranted,
			askForNotificationPermission: (isGranted) => attrs.setIsNotificationPermissionGranted(isGranted),
			askForBatteryNotificationPermission: (isGranted) => attrs.setIsBatteryNotificationPermissionGranted(isGranted)
		}));
	}
};
var SetupNotificationsPageAttrs = class {
	hidePagingButtonForPage = false;
	data;
	isPageVisible;
	constructor(permissionData, visiblityStream, systemPermissionHandler) {
		this.systemPermissionHandler = systemPermissionHandler;
		this.isPageVisible = this.isPageNeeded(permissionData);
		this.data = permissionData;
		visiblityStream.map((isVisible) => {
			if (isVisible) this.systemPermissionHandler.queryPermissionsState([PermissionType.Notification, PermissionType.IgnoreBatteryOptimization]).then((permissionState) => {
				this.data = {
					isNotificationPermissionGranted: permissionState.get(PermissionType.Notification) ?? false,
					isBatteryPermissionGranted: permissionState.get(PermissionType.IgnoreBatteryOptimization) ?? false
				};
				mithril_default.redraw();
			});
		});
	}
	setIsNotificationPermissionGranted(isGranted) {
		this.data = {
			...this.data,
			isNotificationPermissionGranted: isGranted
		};
		mithril_default.redraw();
	}
	setIsBatteryNotificationPermissionGranted(isGranted) {
		this.data = {
			...this.data,
			isBatteryPermissionGranted: isGranted
		};
		mithril_default.redraw();
	}
	isPageNeeded(data) {
		if (isAndroidApp()) return !data.isNotificationPermissionGranted || !data.isBatteryPermissionGranted;
		return !data.isNotificationPermissionGranted;
	}
	headerTitle() {
		return "notificationSettings_action";
	}
	nextAction(showDialogs) {
		return Promise.resolve(true);
	}
	isSkipAvailable() {
		return false;
	}
	isEnabled() {
		return this.isPageVisible;
	}
};

//#endregion
//#region src/common/native/main/wizard/setupwizardpages/SetupThemePage.ts
var SetupThemePage = class {
	customThemes = null;
	oninit() {
		locator.themeController.getCustomThemes().then((customThemes) => {
			this.customThemes = customThemes.map((themeId) => {
				return {
					name: lang.makeTranslation(themeId, themeId),
					value: themeId
				};
			});
			mithril_default.redraw();
		});
	}
	view() {
		return mithril_default(
			SetupPageLayout,
			{ image: "theme" },
			mithril_default("p.full-width", lang.get("theme_title")),
			// We need to await the promise from `themeController.getCustomThemes()`, so we delay rendering the `RadioSelector` until it does.
			this.customThemes == null ? null : mithril_default(RadioSelector, {
				name: "theme_label",
				options: [...themeOptions(client.isCalendarApp()), ...this.customThemes],
				class: "mb-s",
				selectedOption: locator.themeController.themePreference,
				onOptionSelected: (option) => {
					locator.themeController.setThemePreference(option, true);
				}
			})
);
	}
};
var SetupThemePageAttrs = class {
	hidePagingButtonForPage = false;
	data = null;
	headerTitle() {
		return "appearanceSettings_label";
	}
	nextAction(showDialogs) {
		return Promise.resolve(true);
	}
	isSkipAvailable() {
		return false;
	}
	isEnabled() {
		return true;
	}
};

//#endregion
//#region src/common/native/main/wizard/setupwizardpages/SetupContactsPage.ts
var SetupContactsPage = class {
	view({ attrs }) {
		return mithril_default(SetupPageLayout, { image: "contacts" }, this.renderImportAndSyncButtons(attrs));
	}
	renderImportAndSyncButtons(attrs) {
		const isContactSyncEnabled = attrs.syncManager.isEnabled();
		return [
			mithril_default("p.mb-s", lang.get("importContacts_msg")),
			renderSettingsBannerButton("import_action", () => {
				attrs.contactImporter.importContactsFromDeviceSafely();
			}),
			mithril_default("p.mb-s", lang.get("allowContactSynchronization")),
			renderSettingsBannerButton(isContactSyncEnabled ? "activated_label" : "activate_action", () => {
				this.enableSync(attrs);
			}, isContactSyncEnabled, "mb-l")
		];
	}
	async enableSync(attrs) {
		const success = await attrs.syncManager.enableSync();
		if (!success) {
			await attrs.syncManager.disableSync();
			await Dialog.message("allowContactReadWrite_msg");
			await attrs.mobileSystemFacade.goToSettings();
		}
	}
};
var SetupContactsPageAttrs = class {
	hidePagingButtonForPage = false;
	data = null;
	constructor(syncManager, contactImporter, mobileSystemFacade, allowContactSyncAndImport) {
		this.syncManager = syncManager;
		this.contactImporter = contactImporter;
		this.mobileSystemFacade = mobileSystemFacade;
		this.allowContactSyncAndImport = allowContactSyncAndImport;
	}
	headerTitle() {
		return "contacts_label";
	}
	nextAction(showDialogs) {
		return Promise.resolve(true);
	}
	isSkipAvailable() {
		return false;
	}
	isEnabled() {
		return this.allowContactSyncAndImport;
	}
};

//#endregion
//#region src/common/native/main/wizard/setupwizardpages/SetupLockPage.ts
var SetupLockPage = class {
	view({ attrs }) {
		return mithril_default(SetupPageLayout, {
			image: "lock",
			buttonLabel: "finish_action"
		}, [mithril_default(SelectAppLockMethodView, {
			class: "mt",
			error: attrs.error,
			supportedModes: attrs.supportedModes,
			previousSelection: attrs.currentMode,
			onConfirm: null,
			onModeSelected: (mode) => attrs.currentMode = mode
		})]);
	}
};
var SetupLockPageAttrs = class {
	hidePagingButtonForPage = false;
	data = null;
	error = null;
	supportedModes = [];
	currentMode = AppLockMethod.None;
	constructor(mobileSystemFacade) {
		this.mobileSystemFacade = mobileSystemFacade;
		mobileSystemFacade.getSupportedAppLockMethods().then((supportedMethods) => {
			this.supportedModes = supportedMethods;
			mithril_default.redraw();
		});
		this.mobileSystemFacade.getAppLockMethod().then((appLockMethod) => {
			this.currentMode = appLockMethod;
			mithril_default.redraw();
		});
	}
	headerTitle() {
		return "credentialsEncryptionMode_label";
	}
	async nextAction(showDialogs) {
		try {
			await this.mobileSystemFacade.enforceAppLock(this.currentMode);
			await this.mobileSystemFacade.setAppLockMethod(this.currentMode);
		} catch (e) {
			if (e instanceof CredentialAuthenticationError) {
				this.error = e.message;
				mithril_default.redraw();
				return false;
			} else if (e instanceof CancelledError) return false;
else throw e;
		}
		return true;
	}
	isSkipAvailable() {
		return false;
	}
	isEnabled() {
		return this.supportedModes.length > 1;
	}
};

//#endregion
//#region src/common/native/main/wizard/SetupWizard.ts
async function showSetupWizard(systemPermissionHandler, webMobileFacade, contactImporter, systemFacade, credentialsProvider, contactSyncManager, deviceConfig, allowContactSyncAndImport) {
	const permissionStatus = await systemPermissionHandler.queryPermissionsState([
		PermissionType.Contacts,
		PermissionType.Notification,
		PermissionType.IgnoreBatteryOptimization
	]);
	let wizardPages = [];
	wizardPages.push(wizardPageWrapper(SetupCongratulationsPage, new SetupCongratulationsPageAttrs()));
	wizardPages.push(wizardPageWrapper(SetupNotificationsPage, new SetupNotificationsPageAttrs({
		isNotificationPermissionGranted: permissionStatus.get(PermissionType.Notification) ?? false,
		isBatteryPermissionGranted: permissionStatus.get(PermissionType.IgnoreBatteryOptimization) ?? false
	}, webMobileFacade.getIsAppVisible(), systemPermissionHandler)));
	wizardPages.push(wizardPageWrapper(SetupThemePage, new SetupThemePageAttrs()));
	if (allowContactSyncAndImport && contactSyncManager && contactImporter) wizardPages.push(wizardPageWrapper(SetupContactsPage, new SetupContactsPageAttrs(contactSyncManager, contactImporter, systemFacade, allowContactSyncAndImport)));
	wizardPages.push(wizardPageWrapper(SetupLockPage, new SetupLockPageAttrs(locator.systemFacade)));
	const deferred = defer();
	const wizardBuilder = createWizardDialog(null, wizardPages, async () => {
		deviceConfig.setIsSetupComplete(true);
		deferred.resolve();
	}, DialogType.EditSmall);
	wizardBuilder.dialog.show();
	return deferred.promise;
}

//#endregion
export { showSetupWizard };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU2V0dXBXaXphcmQtY2h1bmsuanMiLCJuYW1lcyI6WyJzaG93RGlhbG9nczogYm9vbGVhbiIsImlzR3JhbnRlZDogYm9vbGVhbiIsInBlcm1pc3Npb25EYXRhOiBOb3RpZmljYXRpb25QZXJtaXNzaW9uc0RhdGEiLCJ2aXNpYmxpdHlTdHJlYW06IFN0cmVhbTxib29sZWFuPiIsInN5c3RlbVBlcm1pc3Npb25IYW5kbGVyOiBTeXN0ZW1QZXJtaXNzaW9uSGFuZGxlciIsImRhdGE6IE5vdGlmaWNhdGlvblBlcm1pc3Npb25zRGF0YSIsInNob3dEaWFsb2dzOiBib29sZWFuIiwic2hvd0RpYWxvZ3M6IGJvb2xlYW4iLCJhdHRyczogU2V0dXBDb250YWN0c1BhZ2VBdHRycyIsInN5bmNNYW5hZ2VyOiBOYXRpdmVDb250YWN0c1N5bmNNYW5hZ2VyIiwiY29udGFjdEltcG9ydGVyOiBDb250YWN0SW1wb3J0ZXIiLCJtb2JpbGVTeXN0ZW1GYWNhZGU6IE1vYmlsZVN5c3RlbUZhY2FkZSIsImFsbG93Q29udGFjdFN5bmNBbmRJbXBvcnQ6IGJvb2xlYW4iLCJzaG93RGlhbG9nczogYm9vbGVhbiIsIm1vYmlsZVN5c3RlbUZhY2FkZTogTW9iaWxlU3lzdGVtRmFjYWRlIiwic2hvd0RpYWxvZ3M6IGJvb2xlYW4iLCJzeXN0ZW1QZXJtaXNzaW9uSGFuZGxlcjogU3lzdGVtUGVybWlzc2lvbkhhbmRsZXIiLCJ3ZWJNb2JpbGVGYWNhZGU6IFdlYk1vYmlsZUZhY2FkZSIsImNvbnRhY3RJbXBvcnRlcjogQ29udGFjdEltcG9ydGVyIHwgbnVsbCIsInN5c3RlbUZhY2FkZTogTW9iaWxlU3lzdGVtRmFjYWRlIiwiY3JlZGVudGlhbHNQcm92aWRlcjogQ3JlZGVudGlhbHNQcm92aWRlciIsImNvbnRhY3RTeW5jTWFuYWdlcjogTmF0aXZlQ29udGFjdHNTeW5jTWFuYWdlciB8IG51bGwiLCJkZXZpY2VDb25maWc6IERldmljZUNvbmZpZyIsImFsbG93Q29udGFjdFN5bmNBbmRJbXBvcnQ6IGJvb2xlYW4iLCJ3aXphcmRQYWdlczogV2l6YXJkUGFnZVdyYXBwZXI8YW55PltdIl0sInNvdXJjZXMiOlsiLi4vc3JjL2NvbW1vbi9uYXRpdmUvbWFpbi93aXphcmQvc2V0dXB3aXphcmRwYWdlcy9TZXR1cFBhZ2VMYXlvdXQudHMiLCIuLi9zcmMvY29tbW9uL25hdGl2ZS9tYWluL3dpemFyZC9zZXR1cHdpemFyZHBhZ2VzL1NldHVwQ29uZ3JhdWxhdGlvbnNQYWdlLnRzIiwiLi4vc3JjL2NvbW1vbi9uYXRpdmUvbWFpbi93aXphcmQvc2V0dXB3aXphcmRwYWdlcy9TZXR1cE5vdGlmaWNhdGlvbnNQYWdlLnRzIiwiLi4vc3JjL2NvbW1vbi9uYXRpdmUvbWFpbi93aXphcmQvc2V0dXB3aXphcmRwYWdlcy9TZXR1cFRoZW1lUGFnZS50cyIsIi4uL3NyYy9jb21tb24vbmF0aXZlL21haW4vd2l6YXJkL3NldHVwd2l6YXJkcGFnZXMvU2V0dXBDb250YWN0c1BhZ2UudHMiLCIuLi9zcmMvY29tbW9uL25hdGl2ZS9tYWluL3dpemFyZC9zZXR1cHdpemFyZHBhZ2VzL1NldHVwTG9ja1BhZ2UudHMiLCIuLi9zcmMvY29tbW9uL25hdGl2ZS9tYWluL3dpemFyZC9TZXR1cFdpemFyZC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBlbWl0V2l6YXJkRXZlbnQsIFdpemFyZEV2ZW50VHlwZSB9IGZyb20gXCIuLi8uLi8uLi8uLi9ndWkvYmFzZS9XaXphcmREaWFsb2cuanNcIlxuaW1wb3J0IG0sIHsgQ2hpbGRyZW4sIENvbXBvbmVudCwgVm5vZGUgfSBmcm9tIFwibWl0aHJpbFwiXG5pbXBvcnQgeyBMb2dpbkJ1dHRvbiB9IGZyb20gXCIuLi8uLi8uLi8uLi9ndWkvYmFzZS9idXR0b25zL0xvZ2luQnV0dG9uLmpzXCJcbmltcG9ydCB7IFRyYW5zbGF0aW9uS2V5IH0gZnJvbSBcIi4uLy4uLy4uLy4uL21pc2MvTGFuZ3VhZ2VWaWV3TW9kZWwuanNcIlxuXG5pbnRlcmZhY2UgU2V0dXBQYWdlTGF5b3V0QXR0cnMge1xuXHRpbWFnZTogc3RyaW5nXG5cdGNsYXNzPzogc3RyaW5nXG5cdGJ1dHRvbkxhYmVsPzogVHJhbnNsYXRpb25LZXlcbn1cblxuZXhwb3J0IGNsYXNzIFNldHVwUGFnZUxheW91dCBpbXBsZW1lbnRzIENvbXBvbmVudDxTZXR1cFBhZ2VMYXlvdXRBdHRycz4ge1xuXHR2aWV3KHsgYXR0cnMsIGNoaWxkcmVuIH06IFZub2RlPFNldHVwUGFnZUxheW91dEF0dHJzPik6IENoaWxkcmVuIHtcblx0XHRyZXR1cm4gbShcInNlY3Rpb24uY2VudGVyLmZsZXguZmxleC1jb2x1bW4uZGlhbG9nLWhlaWdodC1zbWFsbC5tdFwiLCBbXG5cdFx0XHRtKFwiaW1nLm9uYm9hcmRpbmctbG9nby5jZW50ZXItaFwiLCB7XG5cdFx0XHRcdHNyYzogYCR7d2luZG93LnR1dGFvLmFwcFN0YXRlLnByZWZpeFdpdGhvdXRGaWxlfS9pbWFnZXMvb25ib2FyZGluZy13aXphcmQvJHthdHRycy5pbWFnZX0uc3ZnYCxcblx0XHRcdFx0YWx0OiBcIlwiLFxuXHRcdFx0XHRyZWw6IFwibm9yZWZlcnJlclwiLFxuXHRcdFx0XHRsb2FkaW5nOiBcImxhenlcIixcblx0XHRcdFx0ZGVjb2Rpbmc6IFwiYXN5bmNcIixcblx0XHRcdFx0Y2xhc3M6IGF0dHJzLmNsYXNzLFxuXHRcdFx0fSksXG5cdFx0XHRjaGlsZHJlbixcblx0XHRcdG0oTG9naW5CdXR0b24sIHtcblx0XHRcdFx0bGFiZWw6IGF0dHJzLmJ1dHRvbkxhYmVsID8/IFwibmV4dF9hY3Rpb25cIixcblx0XHRcdFx0Y2xhc3M6IFwid2l6YXJkLW5leHQtYnV0dG9uXCIsXG5cdFx0XHRcdG9uY2xpY2s6IChfLCBkb20pID0+IHtcblx0XHRcdFx0XHRlbWl0V2l6YXJkRXZlbnQoZG9tLCBXaXphcmRFdmVudFR5cGUuU0hPV19ORVhUX1BBR0UpXG5cdFx0XHRcdH0sXG5cdFx0XHR9KSxcblx0XHRdKVxuXHR9XG59XG4iLCJpbXBvcnQgbSwgeyBDaGlsZHJlbiB9IGZyb20gXCJtaXRocmlsXCJcbmltcG9ydCB7IFdpemFyZFBhZ2VBdHRycywgV2l6YXJkUGFnZU4gfSBmcm9tIFwiLi4vLi4vLi4vLi4vZ3VpL2Jhc2UvV2l6YXJkRGlhbG9nLmpzXCJcbmltcG9ydCB7IGxhbmcsIHR5cGUgVHJhbnNsYXRpb25LZXkgfSBmcm9tIFwiLi4vLi4vLi4vLi4vbWlzYy9MYW5ndWFnZVZpZXdNb2RlbC5qc1wiXG5pbXBvcnQgeyBTZXR1cFBhZ2VMYXlvdXQgfSBmcm9tIFwiLi9TZXR1cFBhZ2VMYXlvdXQuanNcIlxuXG5leHBvcnQgY2xhc3MgU2V0dXBDb25ncmF0dWxhdGlvbnNQYWdlIGltcGxlbWVudHMgV2l6YXJkUGFnZU48bnVsbD4ge1xuXHR2aWV3KCk6IENoaWxkcmVuIHtcblx0XHRyZXR1cm4gbShTZXR1cFBhZ2VMYXlvdXQsIHsgaW1hZ2U6IFwiY29uZ3JhdHVsYXRpb25zXCIsIGNsYXNzOiBcIm9uYm9hcmRpbmctbG9nby1sYXJnZVwiIH0sIFtcblx0XHRcdG0oXCJoMi5tdC1sLmJcIiwgbGFuZy5nZXQoXCJ3ZWxjb21lX3RleHRcIikpLFxuXHRcdFx0bShcInAubXQtcy5mdWxsLXdpZHRoXCIsIGxhbmcuZ2V0KFwib25ib2FyZGluZ190ZXh0XCIpKSxcblx0XHRdKVxuXHR9XG59XG5cbmV4cG9ydCBjbGFzcyBTZXR1cENvbmdyYXR1bGF0aW9uc1BhZ2VBdHRycyBpbXBsZW1lbnRzIFdpemFyZFBhZ2VBdHRyczxudWxsPiB7XG5cdHByZXZlbnRHb0JhY2sgPSB0cnVlXG5cdGhpZGVQYWdpbmdCdXR0b25Gb3JQYWdlID0gZmFsc2Vcblx0ZGF0YTogbnVsbCA9IG51bGxcblxuXHRoZWFkZXJUaXRsZSgpOiBUcmFuc2xhdGlvbktleSB7XG5cdFx0cmV0dXJuIFwid2VsY29tZV9sYWJlbFwiXG5cdH1cblxuXHRuZXh0QWN0aW9uKHNob3dEaWFsb2dzOiBib29sZWFuKTogUHJvbWlzZTxib29sZWFuPiB7XG5cdFx0Ly8gbmV4dCBhY3Rpb24gbm90IGF2YWlsYWJsZSBmb3IgdGhpcyBwYWdlXG5cdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZSh0cnVlKVxuXHR9XG5cblx0aXNTa2lwQXZhaWxhYmxlKCk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiBmYWxzZVxuXHR9XG5cblx0aXNFbmFibGVkKCk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiB0cnVlXG5cdH1cbn1cbiIsImltcG9ydCBtLCB7IENoaWxkcmVuLCBDb21wb25lbnQsIFZub2RlIH0gZnJvbSBcIm1pdGhyaWxcIlxuaW1wb3J0IHsgV2l6YXJkUGFnZUF0dHJzIH0gZnJvbSBcIi4uLy4uLy4uLy4uL2d1aS9iYXNlL1dpemFyZERpYWxvZy5qc1wiXG5pbXBvcnQgeyBQZXJtaXNzaW9uVHlwZSB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZ2VuZXJhdGVkaXBjL1Blcm1pc3Npb25UeXBlLmpzXCJcbmltcG9ydCB7IGlzQW5kcm9pZEFwcCB9IGZyb20gXCIuLi8uLi8uLi8uLi9hcGkvY29tbW9uL0Vudi5qc1wiXG5pbXBvcnQgeyBsYW5nLCB0eXBlIFRyYW5zbGF0aW9uS2V5IH0gZnJvbSBcIi4uLy4uLy4uLy4uL21pc2MvTGFuZ3VhZ2VWaWV3TW9kZWwuanNcIlxuaW1wb3J0IFN0cmVhbSBmcm9tIFwibWl0aHJpbC9zdHJlYW1cIlxuaW1wb3J0IHsgU2V0dXBQYWdlTGF5b3V0IH0gZnJvbSBcIi4vU2V0dXBQYWdlTGF5b3V0LmpzXCJcbmltcG9ydCB7IFN5c3RlbVBlcm1pc3Npb25IYW5kbGVyIH0gZnJvbSBcIi4uLy4uL1N5c3RlbVBlcm1pc3Npb25IYW5kbGVyLmpzXCJcbmltcG9ydCB7IE5vdGlmaWNhdGlvblBlcm1pc3Npb25zQm9keSB9IGZyb20gXCIuLi8uLi8uLi8uLi9zZXR0aW5ncy9Ob3RpZmljYXRpb25QZXJtaXNzaW9uc0RpYWxvZy5qc1wiXG5cbmV4cG9ydCBpbnRlcmZhY2UgTm90aWZpY2F0aW9uUGVybWlzc2lvbnNEYXRhIHtcblx0aXNOb3RpZmljYXRpb25QZXJtaXNzaW9uR3JhbnRlZDogYm9vbGVhblxuXHRpc0JhdHRlcnlQZXJtaXNzaW9uR3JhbnRlZDogYm9vbGVhblxufVxuXG5leHBvcnQgY2xhc3MgU2V0dXBOb3RpZmljYXRpb25zUGFnZSBpbXBsZW1lbnRzIENvbXBvbmVudDxTZXR1cE5vdGlmaWNhdGlvbnNQYWdlQXR0cnM+IHtcblx0dmlldyh7IGF0dHJzIH06IFZub2RlPFNldHVwTm90aWZpY2F0aW9uc1BhZ2VBdHRycz4pOiBDaGlsZHJlbiB7XG5cdFx0cmV0dXJuIG0oXG5cdFx0XHRTZXR1cFBhZ2VMYXlvdXQsXG5cdFx0XHR7IGltYWdlOiBcIm5vdGlmaWNhdGlvbnNcIiB9LFxuXHRcdFx0bShOb3RpZmljYXRpb25QZXJtaXNzaW9uc0JvZHksIHtcblx0XHRcdFx0aXNOb3RpZmljYXRpb25QZXJtaXNzaW9uR3JhbnRlZDogYXR0cnMuZGF0YS5pc05vdGlmaWNhdGlvblBlcm1pc3Npb25HcmFudGVkLFxuXHRcdFx0XHRpc0JhdHRlcnlQZXJtaXNzaW9uR3JhbnRlZDogYXR0cnMuZGF0YS5pc0JhdHRlcnlQZXJtaXNzaW9uR3JhbnRlZCxcblx0XHRcdFx0YXNrRm9yTm90aWZpY2F0aW9uUGVybWlzc2lvbjogKGlzR3JhbnRlZDogYm9vbGVhbikgPT4gYXR0cnMuc2V0SXNOb3RpZmljYXRpb25QZXJtaXNzaW9uR3JhbnRlZChpc0dyYW50ZWQpLFxuXHRcdFx0XHRhc2tGb3JCYXR0ZXJ5Tm90aWZpY2F0aW9uUGVybWlzc2lvbjogKGlzR3JhbnRlZCkgPT4gYXR0cnMuc2V0SXNCYXR0ZXJ5Tm90aWZpY2F0aW9uUGVybWlzc2lvbkdyYW50ZWQoaXNHcmFudGVkKSxcblx0XHRcdH0pLFxuXHRcdClcblx0fVxufVxuXG5leHBvcnQgY2xhc3MgU2V0dXBOb3RpZmljYXRpb25zUGFnZUF0dHJzIGltcGxlbWVudHMgV2l6YXJkUGFnZUF0dHJzPE5vdGlmaWNhdGlvblBlcm1pc3Npb25zRGF0YT4ge1xuXHRoaWRlUGFnaW5nQnV0dG9uRm9yUGFnZSA9IGZhbHNlXG5cdGRhdGE6IE5vdGlmaWNhdGlvblBlcm1pc3Npb25zRGF0YVxuXHQvLyBDYWNoZSB0aGUgcGVybWlzc2lvbiB2YWx1ZXMgdG8gYXZvaWQgdGhlIHBhZ2UgYmVjb21pbmcgZGlzYWJsZWQgd2hpbGUgb24gaXQuXG5cdHByaXZhdGUgcmVhZG9ubHkgaXNQYWdlVmlzaWJsZTogYm9vbGVhblxuXG5cdGNvbnN0cnVjdG9yKFxuXHRcdHBlcm1pc3Npb25EYXRhOiBOb3RpZmljYXRpb25QZXJtaXNzaW9uc0RhdGEsXG5cdFx0dmlzaWJsaXR5U3RyZWFtOiBTdHJlYW08Ym9vbGVhbj4sXG5cdFx0cHJpdmF0ZSByZWFkb25seSBzeXN0ZW1QZXJtaXNzaW9uSGFuZGxlcjogU3lzdGVtUGVybWlzc2lvbkhhbmRsZXIsXG5cdCkge1xuXHRcdHRoaXMuaXNQYWdlVmlzaWJsZSA9IHRoaXMuaXNQYWdlTmVlZGVkKHBlcm1pc3Npb25EYXRhKVxuXHRcdHRoaXMuZGF0YSA9IHBlcm1pc3Npb25EYXRhXG5cblx0XHR2aXNpYmxpdHlTdHJlYW0ubWFwKChpc1Zpc2libGUpID0+IHtcblx0XHRcdC8vIFJlZHJhdyB0aGUgcGFnZSB3aGVuIHRoZSB1c2VyIHJlc3VtZXMgdGhlIGFwcCB0byBjaGVjayBmb3IgY2hhbmdlcyBpbiBwZXJtaXNzaW9uc1xuXHRcdFx0aWYgKGlzVmlzaWJsZSkge1xuXHRcdFx0XHR0aGlzLnN5c3RlbVBlcm1pc3Npb25IYW5kbGVyXG5cdFx0XHRcdFx0LnF1ZXJ5UGVybWlzc2lvbnNTdGF0ZShbUGVybWlzc2lvblR5cGUuTm90aWZpY2F0aW9uLCBQZXJtaXNzaW9uVHlwZS5JZ25vcmVCYXR0ZXJ5T3B0aW1pemF0aW9uXSlcblx0XHRcdFx0XHQudGhlbigocGVybWlzc2lvblN0YXRlKSA9PiB7XG5cdFx0XHRcdFx0XHR0aGlzLmRhdGEgPSB7XG5cdFx0XHRcdFx0XHRcdGlzTm90aWZpY2F0aW9uUGVybWlzc2lvbkdyYW50ZWQ6IHBlcm1pc3Npb25TdGF0ZS5nZXQoUGVybWlzc2lvblR5cGUuTm90aWZpY2F0aW9uKSA/PyBmYWxzZSxcblx0XHRcdFx0XHRcdFx0aXNCYXR0ZXJ5UGVybWlzc2lvbkdyYW50ZWQ6IHBlcm1pc3Npb25TdGF0ZS5nZXQoUGVybWlzc2lvblR5cGUuSWdub3JlQmF0dGVyeU9wdGltaXphdGlvbikgPz8gZmFsc2UsXG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRtLnJlZHJhdygpXG5cdFx0XHRcdFx0fSlcblx0XHRcdH1cblx0XHR9KVxuXHR9XG5cblx0c2V0SXNOb3RpZmljYXRpb25QZXJtaXNzaW9uR3JhbnRlZChpc0dyYW50ZWQ6IGJvb2xlYW4pIHtcblx0XHR0aGlzLmRhdGEgPSB7XG5cdFx0XHQuLi50aGlzLmRhdGEsXG5cdFx0XHRpc05vdGlmaWNhdGlvblBlcm1pc3Npb25HcmFudGVkOiBpc0dyYW50ZWQsXG5cdFx0fVxuXHRcdG0ucmVkcmF3KClcblx0fVxuXG5cdHNldElzQmF0dGVyeU5vdGlmaWNhdGlvblBlcm1pc3Npb25HcmFudGVkKGlzR3JhbnRlZDogYm9vbGVhbikge1xuXHRcdHRoaXMuZGF0YSA9IHtcblx0XHRcdC4uLnRoaXMuZGF0YSxcblx0XHRcdGlzQmF0dGVyeVBlcm1pc3Npb25HcmFudGVkOiBpc0dyYW50ZWQsXG5cdFx0fVxuXHRcdG0ucmVkcmF3KClcblx0fVxuXG5cdHByaXZhdGUgaXNQYWdlTmVlZGVkKGRhdGE6IE5vdGlmaWNhdGlvblBlcm1pc3Npb25zRGF0YSk6IGJvb2xlYW4ge1xuXHRcdC8vIFNraXAgdGhpcyBwYWdlIGlmIHRoZSBuZWVkZWQgcGVybWlzc2lvbnMgYXJlIGFscmVhZHkgZ3JhbnRlZFxuXHRcdGlmIChpc0FuZHJvaWRBcHAoKSkge1xuXHRcdFx0cmV0dXJuICFkYXRhLmlzTm90aWZpY2F0aW9uUGVybWlzc2lvbkdyYW50ZWQgfHwgIWRhdGEuaXNCYXR0ZXJ5UGVybWlzc2lvbkdyYW50ZWRcblx0XHR9XG5cdFx0cmV0dXJuICFkYXRhLmlzTm90aWZpY2F0aW9uUGVybWlzc2lvbkdyYW50ZWRcblx0fVxuXG5cdGhlYWRlclRpdGxlKCk6IFRyYW5zbGF0aW9uS2V5IHtcblx0XHRyZXR1cm4gXCJub3RpZmljYXRpb25TZXR0aW5nc19hY3Rpb25cIlxuXHR9XG5cblx0bmV4dEFjdGlvbihzaG93RGlhbG9nczogYm9vbGVhbik6IFByb21pc2U8Ym9vbGVhbj4ge1xuXHRcdC8vIG5leHQgYWN0aW9uIG5vdCBhdmFpbGFibGUgZm9yIHRoaXMgcGFnZVxuXHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUodHJ1ZSlcblx0fVxuXG5cdGlzU2tpcEF2YWlsYWJsZSgpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gZmFsc2Vcblx0fVxuXG5cdGlzRW5hYmxlZCgpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gdGhpcy5pc1BhZ2VWaXNpYmxlXG5cdH1cbn1cbiIsImltcG9ydCBtLCB7IENoaWxkcmVuIH0gZnJvbSBcIm1pdGhyaWxcIlxuaW1wb3J0IHsgV2l6YXJkUGFnZUF0dHJzLCBXaXphcmRQYWdlTiB9IGZyb20gXCIuLi8uLi8uLi8uLi9ndWkvYmFzZS9XaXphcmREaWFsb2cuanNcIlxuaW1wb3J0IHsgbGFuZywgVHJhbnNsYXRpb25LZXkgfSBmcm9tIFwiLi4vLi4vLi4vLi4vbWlzYy9MYW5ndWFnZVZpZXdNb2RlbC5qc1wiXG5pbXBvcnQgeyBSYWRpb1NlbGVjdG9yLCBSYWRpb1NlbGVjdG9yQXR0cnMsIFJhZGlvU2VsZWN0b3JPcHRpb24gfSBmcm9tIFwiLi4vLi4vLi4vLi4vZ3VpL2Jhc2UvUmFkaW9TZWxlY3Rvci5qc1wiXG5pbXBvcnQgeyB0aGVtZU9wdGlvbnMsIFRoZW1lUHJlZmVyZW5jZSB9IGZyb20gXCIuLi8uLi8uLi8uLi9ndWkvdGhlbWUuanNcIlxuaW1wb3J0IHsgU2V0dXBQYWdlTGF5b3V0IH0gZnJvbSBcIi4vU2V0dXBQYWdlTGF5b3V0LmpzXCJcbmltcG9ydCB7IGxvY2F0b3IgfSBmcm9tIFwiLi4vLi4vLi4vLi4vYXBpL21haW4vQ29tbW9uTG9jYXRvci5qc1wiXG5pbXBvcnQgeyBjbGllbnQgfSBmcm9tIFwiLi4vLi4vLi4vLi4vbWlzYy9DbGllbnREZXRlY3Rvci5qc1wiXG5cbmV4cG9ydCBjbGFzcyBTZXR1cFRoZW1lUGFnZSBpbXBsZW1lbnRzIFdpemFyZFBhZ2VOPFNldHVwVGhlbWVQYWdlQXR0cnM+IHtcblx0Ly8gVGhlIHdoaXRlbGFiZWwgdGhlbWVzIGZvcm1hdHRlZCBhcyBgUmFkaW9TZWxlY3Rvck9wdGlvbmBzLlxuXHRwcml2YXRlIGN1c3RvbVRoZW1lczogQXJyYXk8UmFkaW9TZWxlY3Rvck9wdGlvbjxzdHJpbmc+PiB8IG51bGwgPSBudWxsXG5cblx0b25pbml0KCkge1xuXHRcdC8vIEdldCB0aGUgd2hpdGVsYWJlbCB0aGVtZXMgZnJvbSB0aGUgdGhlbWUgY29udHJvbGxlciBhbmQgbWFwIHRoZW0gdG8gYFJhZGlvU2VsZWN0b3JgIG9wdGlvbnMuXG5cdFx0bG9jYXRvci50aGVtZUNvbnRyb2xsZXIuZ2V0Q3VzdG9tVGhlbWVzKCkudGhlbigoY3VzdG9tVGhlbWVzKSA9PiB7XG5cdFx0XHR0aGlzLmN1c3RvbVRoZW1lcyA9IGN1c3RvbVRoZW1lcy5tYXAoKHRoZW1lSWQpID0+IHtcblx0XHRcdFx0cmV0dXJuIHsgbmFtZTogbGFuZy5tYWtlVHJhbnNsYXRpb24odGhlbWVJZCwgdGhlbWVJZCksIHZhbHVlOiB0aGVtZUlkIH1cblx0XHRcdH0pXG5cdFx0XHRtLnJlZHJhdygpXG5cdFx0fSlcblx0fVxuXG5cdHZpZXcoKTogQ2hpbGRyZW4ge1xuXHRcdHJldHVybiBtKFxuXHRcdFx0U2V0dXBQYWdlTGF5b3V0LFxuXHRcdFx0e1xuXHRcdFx0XHRpbWFnZTogXCJ0aGVtZVwiLFxuXHRcdFx0fSxcblx0XHRcdG0oXCJwLmZ1bGwtd2lkdGhcIiwgbGFuZy5nZXQoXCJ0aGVtZV90aXRsZVwiKSksXG5cdFx0XHQvLyBXZSBuZWVkIHRvIGF3YWl0IHRoZSBwcm9taXNlIGZyb20gYHRoZW1lQ29udHJvbGxlci5nZXRDdXN0b21UaGVtZXMoKWAsIHNvIHdlIGRlbGF5IHJlbmRlcmluZyB0aGUgYFJhZGlvU2VsZWN0b3JgIHVudGlsIGl0IGRvZXMuXG5cdFx0XHR0aGlzLmN1c3RvbVRoZW1lcyA9PSBudWxsXG5cdFx0XHRcdD8gbnVsbFxuXHRcdFx0XHQ6IG0oUmFkaW9TZWxlY3Rvciwge1xuXHRcdFx0XHRcdFx0bmFtZTogXCJ0aGVtZV9sYWJlbFwiLFxuXHRcdFx0XHRcdFx0b3B0aW9uczogWy4uLnRoZW1lT3B0aW9ucyhjbGllbnQuaXNDYWxlbmRhckFwcCgpKSwgLi4udGhpcy5jdXN0b21UaGVtZXNdLFxuXHRcdFx0XHRcdFx0Y2xhc3M6IFwibWItc1wiLFxuXHRcdFx0XHRcdFx0c2VsZWN0ZWRPcHRpb246IGxvY2F0b3IudGhlbWVDb250cm9sbGVyLnRoZW1lUHJlZmVyZW5jZSxcblx0XHRcdFx0XHRcdG9uT3B0aW9uU2VsZWN0ZWQ6IChvcHRpb24pID0+IHtcblx0XHRcdFx0XHRcdFx0bG9jYXRvci50aGVtZUNvbnRyb2xsZXIuc2V0VGhlbWVQcmVmZXJlbmNlKG9wdGlvbiwgdHJ1ZSlcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdCAgfSBzYXRpc2ZpZXMgUmFkaW9TZWxlY3RvckF0dHJzPFRoZW1lUHJlZmVyZW5jZT4pLFxuXHRcdClcblx0fVxufVxuXG5leHBvcnQgY2xhc3MgU2V0dXBUaGVtZVBhZ2VBdHRycyBpbXBsZW1lbnRzIFdpemFyZFBhZ2VBdHRyczxudWxsPiB7XG5cdGhpZGVQYWdpbmdCdXR0b25Gb3JQYWdlID0gZmFsc2Vcblx0ZGF0YTogbnVsbCA9IG51bGxcblxuXHRoZWFkZXJUaXRsZSgpOiBUcmFuc2xhdGlvbktleSB7XG5cdFx0cmV0dXJuIFwiYXBwZWFyYW5jZVNldHRpbmdzX2xhYmVsXCJcblx0fVxuXG5cdG5leHRBY3Rpb24oc2hvd0RpYWxvZ3M6IGJvb2xlYW4pOiBQcm9taXNlPGJvb2xlYW4+IHtcblx0XHQvLyBuZXh0IGFjdGlvbiBub3QgYXZhaWxhYmxlIGZvciB0aGlzIHBhZ2Vcblx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRydWUpXG5cdH1cblxuXHRpc1NraXBBdmFpbGFibGUoKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIGZhbHNlXG5cdH1cblxuXHRpc0VuYWJsZWQoKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIHRydWVcblx0fVxufVxuIiwiaW1wb3J0IG0sIHsgQ2hpbGRyZW4sIENvbXBvbmVudCwgVm5vZGUgfSBmcm9tIFwibWl0aHJpbFwiXG5pbXBvcnQgeyBXaXphcmRQYWdlQXR0cnMgfSBmcm9tIFwiLi4vLi4vLi4vLi4vZ3VpL2Jhc2UvV2l6YXJkRGlhbG9nLmpzXCJcbmltcG9ydCB7IGxhbmcsIHR5cGUgVHJhbnNsYXRpb25LZXkgfSBmcm9tIFwiLi4vLi4vLi4vLi4vbWlzYy9MYW5ndWFnZVZpZXdNb2RlbC5qc1wiXG5pbXBvcnQgeyBTZXR1cFBhZ2VMYXlvdXQgfSBmcm9tIFwiLi9TZXR1cFBhZ2VMYXlvdXQuanNcIlxuaW1wb3J0IHsgTmF0aXZlQ29udGFjdHNTeW5jTWFuYWdlciB9IGZyb20gXCIuLi8uLi8uLi8uLi8uLi9tYWlsLWFwcC9jb250YWN0cy9tb2RlbC9OYXRpdmVDb250YWN0c1N5bmNNYW5hZ2VyLmpzXCJcbmltcG9ydCB7IENvbnRhY3RJbXBvcnRlciB9IGZyb20gXCIuLi8uLi8uLi8uLi8uLi9tYWlsLWFwcC9jb250YWN0cy9Db250YWN0SW1wb3J0ZXIuanNcIlxuaW1wb3J0IHsgRGlhbG9nIH0gZnJvbSBcIi4uLy4uLy4uLy4uL2d1aS9iYXNlL0RpYWxvZy5qc1wiXG5pbXBvcnQgeyBNb2JpbGVTeXN0ZW1GYWNhZGUgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2dlbmVyYXRlZGlwYy9Nb2JpbGVTeXN0ZW1GYWNhZGUuanNcIlxuaW1wb3J0IHsgcmVuZGVyU2V0dGluZ3NCYW5uZXJCdXR0b24gfSBmcm9tIFwiLi4vLi4vLi4vLi4vc2V0dGluZ3MvU2V0dGluZ3NCYW5uZXJCdXR0b24uanNcIlxuXG5leHBvcnQgY2xhc3MgU2V0dXBDb250YWN0c1BhZ2UgaW1wbGVtZW50cyBDb21wb25lbnQ8U2V0dXBDb250YWN0c1BhZ2VBdHRycz4ge1xuXHR2aWV3KHsgYXR0cnMgfTogVm5vZGU8U2V0dXBDb250YWN0c1BhZ2VBdHRycz4pOiBDaGlsZHJlbiB7XG5cdFx0cmV0dXJuIG0oU2V0dXBQYWdlTGF5b3V0LCB7IGltYWdlOiBcImNvbnRhY3RzXCIgfSwgdGhpcy5yZW5kZXJJbXBvcnRBbmRTeW5jQnV0dG9ucyhhdHRycykpXG5cdH1cblxuXHRwcml2YXRlIHJlbmRlckltcG9ydEFuZFN5bmNCdXR0b25zKGF0dHJzOiBTZXR1cENvbnRhY3RzUGFnZUF0dHJzKTogQ2hpbGRyZW4ge1xuXHRcdGNvbnN0IGlzQ29udGFjdFN5bmNFbmFibGVkID0gYXR0cnMuc3luY01hbmFnZXIuaXNFbmFibGVkKClcblxuXHRcdHJldHVybiBbXG5cdFx0XHRtKFwicC5tYi1zXCIsIGxhbmcuZ2V0KFwiaW1wb3J0Q29udGFjdHNfbXNnXCIpKSxcblx0XHRcdHJlbmRlclNldHRpbmdzQmFubmVyQnV0dG9uKFwiaW1wb3J0X2FjdGlvblwiLCAoKSA9PiB7XG5cdFx0XHRcdGF0dHJzLmNvbnRhY3RJbXBvcnRlci5pbXBvcnRDb250YWN0c0Zyb21EZXZpY2VTYWZlbHkoKVxuXHRcdFx0fSksXG5cdFx0XHRtKFwicC5tYi1zXCIsIGxhbmcuZ2V0KFwiYWxsb3dDb250YWN0U3luY2hyb25pemF0aW9uXCIpKSxcblx0XHRcdHJlbmRlclNldHRpbmdzQmFubmVyQnV0dG9uKFxuXHRcdFx0XHRpc0NvbnRhY3RTeW5jRW5hYmxlZCA/IFwiYWN0aXZhdGVkX2xhYmVsXCIgOiBcImFjdGl2YXRlX2FjdGlvblwiLFxuXHRcdFx0XHQoKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5lbmFibGVTeW5jKGF0dHJzKVxuXHRcdFx0XHR9LFxuXHRcdFx0XHRpc0NvbnRhY3RTeW5jRW5hYmxlZCxcblx0XHRcdFx0XCJtYi1sXCIsXG5cdFx0XHQpLFxuXHRcdF1cblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgZW5hYmxlU3luYyhhdHRyczogU2V0dXBDb250YWN0c1BhZ2VBdHRycyk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGNvbnN0IHN1Y2Nlc3MgPSBhd2FpdCBhdHRycy5zeW5jTWFuYWdlci5lbmFibGVTeW5jKClcblx0XHRpZiAoIXN1Y2Nlc3MpIHtcblx0XHRcdGF3YWl0IGF0dHJzLnN5bmNNYW5hZ2VyLmRpc2FibGVTeW5jKClcblx0XHRcdGF3YWl0IERpYWxvZy5tZXNzYWdlKFwiYWxsb3dDb250YWN0UmVhZFdyaXRlX21zZ1wiKVxuXHRcdFx0YXdhaXQgYXR0cnMubW9iaWxlU3lzdGVtRmFjYWRlLmdvVG9TZXR0aW5ncygpXG5cdFx0fVxuXHR9XG59XG5cbmV4cG9ydCBjbGFzcyBTZXR1cENvbnRhY3RzUGFnZUF0dHJzIGltcGxlbWVudHMgV2l6YXJkUGFnZUF0dHJzPG51bGw+IHtcblx0aGlkZVBhZ2luZ0J1dHRvbkZvclBhZ2UgPSBmYWxzZVxuXHRkYXRhOiBudWxsID0gbnVsbFxuXG5cdGNvbnN0cnVjdG9yKFxuXHRcdHB1YmxpYyByZWFkb25seSBzeW5jTWFuYWdlcjogTmF0aXZlQ29udGFjdHNTeW5jTWFuYWdlcixcblx0XHRwdWJsaWMgcmVhZG9ubHkgY29udGFjdEltcG9ydGVyOiBDb250YWN0SW1wb3J0ZXIsXG5cdFx0cHVibGljIHJlYWRvbmx5IG1vYmlsZVN5c3RlbUZhY2FkZTogTW9iaWxlU3lzdGVtRmFjYWRlLFxuXHRcdHB1YmxpYyByZWFkb25seSBhbGxvd0NvbnRhY3RTeW5jQW5kSW1wb3J0OiBib29sZWFuLFxuXHQpIHt9XG5cblx0aGVhZGVyVGl0bGUoKTogVHJhbnNsYXRpb25LZXkge1xuXHRcdHJldHVybiBcImNvbnRhY3RzX2xhYmVsXCJcblx0fVxuXG5cdG5leHRBY3Rpb24oc2hvd0RpYWxvZ3M6IGJvb2xlYW4pOiBQcm9taXNlPGJvb2xlYW4+IHtcblx0XHQvLyBuZXh0IGFjdGlvbiBub3QgYXZhaWxhYmxlIGZvciB0aGlzIHBhZ2Vcblx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRydWUpXG5cdH1cblxuXHRpc1NraXBBdmFpbGFibGUoKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIGZhbHNlXG5cdH1cblxuXHRpc0VuYWJsZWQoKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIHRoaXMuYWxsb3dDb250YWN0U3luY0FuZEltcG9ydFxuXHR9XG59XG4iLCJpbXBvcnQgbSwgeyBDaGlsZHJlbiwgQ29tcG9uZW50LCBWbm9kZSB9IGZyb20gXCJtaXRocmlsXCJcbmltcG9ydCB7IFdpemFyZFBhZ2VBdHRycyB9IGZyb20gXCIuLi8uLi8uLi8uLi9ndWkvYmFzZS9XaXphcmREaWFsb2cuanNcIlxuaW1wb3J0IHsgbGFuZywgdHlwZSBUcmFuc2xhdGlvbktleSB9IGZyb20gXCIuLi8uLi8uLi8uLi9taXNjL0xhbmd1YWdlVmlld01vZGVsLmpzXCJcbmltcG9ydCB7IFNldHVwUGFnZUxheW91dCB9IGZyb20gXCIuL1NldHVwUGFnZUxheW91dC5qc1wiXG5pbXBvcnQgeyBTZWxlY3RBcHBMb2NrTWV0aG9kVmlldyB9IGZyb20gXCIuLi8uLi9TZWxlY3RBcHBMb2NrTWV0aG9kRGlhbG9nLmpzXCJcbmltcG9ydCB7IEFwcExvY2tNZXRob2QgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2dlbmVyYXRlZGlwYy9BcHBMb2NrTWV0aG9kLmpzXCJcbmltcG9ydCB7IE1vYmlsZVN5c3RlbUZhY2FkZSB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZ2VuZXJhdGVkaXBjL01vYmlsZVN5c3RlbUZhY2FkZS5qc1wiXG5pbXBvcnQgeyBDcmVkZW50aWFsQXV0aGVudGljYXRpb25FcnJvciB9IGZyb20gXCIuLi8uLi8uLi8uLi9hcGkvY29tbW9uL2Vycm9yL0NyZWRlbnRpYWxBdXRoZW50aWNhdGlvbkVycm9yLmpzXCJcbmltcG9ydCB7IENhbmNlbGxlZEVycm9yIH0gZnJvbSBcIi4uLy4uLy4uLy4uL2FwaS9jb21tb24vZXJyb3IvQ2FuY2VsbGVkRXJyb3IuanNcIlxuXG5leHBvcnQgY2xhc3MgU2V0dXBMb2NrUGFnZSBpbXBsZW1lbnRzIENvbXBvbmVudDxTZXR1cExvY2tQYWdlQXR0cnM+IHtcblx0dmlldyh7IGF0dHJzIH06IFZub2RlPFNldHVwTG9ja1BhZ2VBdHRycz4pOiBDaGlsZHJlbiB7XG5cdFx0cmV0dXJuIG0oU2V0dXBQYWdlTGF5b3V0LCB7IGltYWdlOiBcImxvY2tcIiwgYnV0dG9uTGFiZWw6IFwiZmluaXNoX2FjdGlvblwiIH0sIFtcblx0XHRcdG0oU2VsZWN0QXBwTG9ja01ldGhvZFZpZXcsIHtcblx0XHRcdFx0Y2xhc3M6IFwibXRcIixcblx0XHRcdFx0ZXJyb3I6IGF0dHJzLmVycm9yLFxuXHRcdFx0XHRzdXBwb3J0ZWRNb2RlczogYXR0cnMuc3VwcG9ydGVkTW9kZXMsXG5cdFx0XHRcdHByZXZpb3VzU2VsZWN0aW9uOiBhdHRycy5jdXJyZW50TW9kZSxcblx0XHRcdFx0b25Db25maXJtOiBudWxsLFxuXHRcdFx0XHRvbk1vZGVTZWxlY3RlZDogKG1vZGUpID0+IChhdHRycy5jdXJyZW50TW9kZSA9IG1vZGUpLFxuXHRcdFx0fSksXG5cdFx0XSlcblx0fVxufVxuXG5leHBvcnQgY2xhc3MgU2V0dXBMb2NrUGFnZUF0dHJzIGltcGxlbWVudHMgV2l6YXJkUGFnZUF0dHJzPG51bGw+IHtcblx0aGlkZVBhZ2luZ0J1dHRvbkZvclBhZ2UgPSBmYWxzZVxuXHRkYXRhOiBudWxsID0gbnVsbFxuXG5cdGVycm9yOiBzdHJpbmcgfCBudWxsID0gbnVsbFxuXHRzdXBwb3J0ZWRNb2RlczogUmVhZG9ubHlBcnJheTxBcHBMb2NrTWV0aG9kPiA9IFtdXG5cdGN1cnJlbnRNb2RlOiBBcHBMb2NrTWV0aG9kID0gQXBwTG9ja01ldGhvZC5Ob25lXG5cblx0Y29uc3RydWN0b3IocHVibGljIHJlYWRvbmx5IG1vYmlsZVN5c3RlbUZhY2FkZTogTW9iaWxlU3lzdGVtRmFjYWRlKSB7XG5cdFx0bW9iaWxlU3lzdGVtRmFjYWRlLmdldFN1cHBvcnRlZEFwcExvY2tNZXRob2RzKCkudGhlbigoc3VwcG9ydGVkTWV0aG9kcykgPT4ge1xuXHRcdFx0dGhpcy5zdXBwb3J0ZWRNb2RlcyA9IHN1cHBvcnRlZE1ldGhvZHNcblx0XHRcdG0ucmVkcmF3KClcblx0XHR9KVxuXHRcdHRoaXMubW9iaWxlU3lzdGVtRmFjYWRlLmdldEFwcExvY2tNZXRob2QoKS50aGVuKChhcHBMb2NrTWV0aG9kKSA9PiB7XG5cdFx0XHR0aGlzLmN1cnJlbnRNb2RlID0gYXBwTG9ja01ldGhvZFxuXHRcdFx0bS5yZWRyYXcoKVxuXHRcdH0pXG5cdH1cblxuXHRoZWFkZXJUaXRsZSgpOiBUcmFuc2xhdGlvbktleSB7XG5cdFx0cmV0dXJuIFwiY3JlZGVudGlhbHNFbmNyeXB0aW9uTW9kZV9sYWJlbFwiXG5cdH1cblxuXHRhc3luYyBuZXh0QWN0aW9uKHNob3dEaWFsb2dzOiBib29sZWFuKTogUHJvbWlzZTxib29sZWFuPiB7XG5cdFx0dHJ5IHtcblx0XHRcdGF3YWl0IHRoaXMubW9iaWxlU3lzdGVtRmFjYWRlLmVuZm9yY2VBcHBMb2NrKHRoaXMuY3VycmVudE1vZGUpXG5cdFx0XHRhd2FpdCB0aGlzLm1vYmlsZVN5c3RlbUZhY2FkZS5zZXRBcHBMb2NrTWV0aG9kKHRoaXMuY3VycmVudE1vZGUpXG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0aWYgKGUgaW5zdGFuY2VvZiBDcmVkZW50aWFsQXV0aGVudGljYXRpb25FcnJvcikge1xuXHRcdFx0XHR0aGlzLmVycm9yID0gZS5tZXNzYWdlXG5cdFx0XHRcdG0ucmVkcmF3KClcblx0XHRcdFx0cmV0dXJuIGZhbHNlXG5cdFx0XHR9IGVsc2UgaWYgKGUgaW5zdGFuY2VvZiBDYW5jZWxsZWRFcnJvcikge1xuXHRcdFx0XHQvLyBpZiB0aGUgdXNlciBjYW5jZWxzLCBpcyB1bnJlY29nbml6ZWQgYnkgRmFjZSBJRCwgZW50ZXJzIGFuIGluY29ycmVjdCBkZXZpY2UgcGFzc3dvcmQsIGV0Yy4sIHdlIHNob3VsZCBub3QgY2xvc2UgdGhlIGRpYWxvZ1xuXHRcdFx0XHQvLyBhbmQgaW5zdGVhZCBsZXQgdGhlbSB0cnkgYWdhaW4gb3IgY2hvb3NlIGEgZGlmZmVyZW50IGVuY3J5cHRpb24gbW9kZVxuXHRcdFx0XHRyZXR1cm4gZmFsc2Vcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRocm93IGVcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBuZXh0IGFjdGlvbiBub3QgYXZhaWxhYmxlIGZvciB0aGlzIHBhZ2Vcblx0XHRyZXR1cm4gdHJ1ZVxuXHR9XG5cblx0aXNTa2lwQXZhaWxhYmxlKCk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiBmYWxzZVxuXHR9XG5cblx0aXNFbmFibGVkKCk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiB0aGlzLnN1cHBvcnRlZE1vZGVzLmxlbmd0aCA+IDFcblx0fVxufVxuIiwiaW1wb3J0IHsgY3JlYXRlV2l6YXJkRGlhbG9nLCBXaXphcmRQYWdlV3JhcHBlciwgd2l6YXJkUGFnZVdyYXBwZXIgfSBmcm9tIFwiLi4vLi4vLi4vZ3VpL2Jhc2UvV2l6YXJkRGlhbG9nLmpzXCJcbmltcG9ydCB7IGRlZmVyIH0gZnJvbSBcIkB0dXRhby90dXRhbm90YS11dGlsc1wiXG5pbXBvcnQgeyBTZXR1cENvbmdyYXR1bGF0aW9uc1BhZ2UsIFNldHVwQ29uZ3JhdHVsYXRpb25zUGFnZUF0dHJzIH0gZnJvbSBcIi4vc2V0dXB3aXphcmRwYWdlcy9TZXR1cENvbmdyYXVsYXRpb25zUGFnZS5qc1wiXG5pbXBvcnQgeyBEZXZpY2VDb25maWcgfSBmcm9tIFwiLi4vLi4vLi4vbWlzYy9EZXZpY2VDb25maWcuanNcIlxuaW1wb3J0IHsgU2V0dXBOb3RpZmljYXRpb25zUGFnZSwgU2V0dXBOb3RpZmljYXRpb25zUGFnZUF0dHJzIH0gZnJvbSBcIi4vc2V0dXB3aXphcmRwYWdlcy9TZXR1cE5vdGlmaWNhdGlvbnNQYWdlLmpzXCJcbmltcG9ydCB7IERpYWxvZ1R5cGUgfSBmcm9tIFwiLi4vLi4vLi4vZ3VpL2Jhc2UvRGlhbG9nLmpzXCJcbmltcG9ydCB7IFNldHVwVGhlbWVQYWdlLCBTZXR1cFRoZW1lUGFnZUF0dHJzIH0gZnJvbSBcIi4vc2V0dXB3aXphcmRwYWdlcy9TZXR1cFRoZW1lUGFnZS5qc1wiXG5pbXBvcnQgeyBTZXR1cENvbnRhY3RzUGFnZSwgU2V0dXBDb250YWN0c1BhZ2VBdHRycyB9IGZyb20gXCIuL3NldHVwd2l6YXJkcGFnZXMvU2V0dXBDb250YWN0c1BhZ2UuanNcIlxuaW1wb3J0IHsgU2V0dXBMb2NrUGFnZSwgU2V0dXBMb2NrUGFnZUF0dHJzIH0gZnJvbSBcIi4vc2V0dXB3aXphcmRwYWdlcy9TZXR1cExvY2tQYWdlLmpzXCJcbmltcG9ydCB7IFN5c3RlbVBlcm1pc3Npb25IYW5kbGVyIH0gZnJvbSBcIi4uL1N5c3RlbVBlcm1pc3Npb25IYW5kbGVyLmpzXCJcbmltcG9ydCB7IFdlYk1vYmlsZUZhY2FkZSB9IGZyb20gXCIuLi9XZWJNb2JpbGVGYWNhZGUuanNcIlxuaW1wb3J0IHsgQ29udGFjdEltcG9ydGVyIH0gZnJvbSBcIi4uLy4uLy4uLy4uL21haWwtYXBwL2NvbnRhY3RzL0NvbnRhY3RJbXBvcnRlci5qc1wiXG5pbXBvcnQgeyBNb2JpbGVTeXN0ZW1GYWNhZGUgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2dlbmVyYXRlZGlwYy9Nb2JpbGVTeXN0ZW1GYWNhZGUuanNcIlxuaW1wb3J0IHsgTmF0aXZlQ29udGFjdHNTeW5jTWFuYWdlciB9IGZyb20gXCIuLi8uLi8uLi8uLi9tYWlsLWFwcC9jb250YWN0cy9tb2RlbC9OYXRpdmVDb250YWN0c1N5bmNNYW5hZ2VyLmpzXCJcbmltcG9ydCB7IGxvY2F0b3IgfSBmcm9tIFwiLi4vLi4vLi4vYXBpL21haW4vQ29tbW9uTG9jYXRvci5qc1wiXG5pbXBvcnQgeyBQZXJtaXNzaW9uVHlwZSB9IGZyb20gXCIuLi8uLi9jb21tb24vZ2VuZXJhdGVkaXBjL1Blcm1pc3Npb25UeXBlLmpzXCJcbmltcG9ydCB7IENyZWRlbnRpYWxzUHJvdmlkZXIgfSBmcm9tIFwiLi4vLi4vLi4vbWlzYy9jcmVkZW50aWFscy9DcmVkZW50aWFsc1Byb3ZpZGVyLmpzXCJcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNob3dTZXR1cFdpemFyZChcblx0c3lzdGVtUGVybWlzc2lvbkhhbmRsZXI6IFN5c3RlbVBlcm1pc3Npb25IYW5kbGVyLFxuXHR3ZWJNb2JpbGVGYWNhZGU6IFdlYk1vYmlsZUZhY2FkZSxcblx0Y29udGFjdEltcG9ydGVyOiBDb250YWN0SW1wb3J0ZXIgfCBudWxsLFxuXHRzeXN0ZW1GYWNhZGU6IE1vYmlsZVN5c3RlbUZhY2FkZSxcblx0Y3JlZGVudGlhbHNQcm92aWRlcjogQ3JlZGVudGlhbHNQcm92aWRlcixcblx0Y29udGFjdFN5bmNNYW5hZ2VyOiBOYXRpdmVDb250YWN0c1N5bmNNYW5hZ2VyIHwgbnVsbCxcblx0ZGV2aWNlQ29uZmlnOiBEZXZpY2VDb25maWcsXG5cdGFsbG93Q29udGFjdFN5bmNBbmRJbXBvcnQ6IGJvb2xlYW4sXG4pOiBQcm9taXNlPHZvaWQ+IHtcblx0Y29uc3QgcGVybWlzc2lvblN0YXR1cyA9IGF3YWl0IHN5c3RlbVBlcm1pc3Npb25IYW5kbGVyLnF1ZXJ5UGVybWlzc2lvbnNTdGF0ZShbXG5cdFx0UGVybWlzc2lvblR5cGUuQ29udGFjdHMsXG5cdFx0UGVybWlzc2lvblR5cGUuTm90aWZpY2F0aW9uLFxuXHRcdFBlcm1pc3Npb25UeXBlLklnbm9yZUJhdHRlcnlPcHRpbWl6YXRpb24sXG5cdF0pXG5cblx0bGV0IHdpemFyZFBhZ2VzOiBXaXphcmRQYWdlV3JhcHBlcjxhbnk+W10gPSBbXVxuXHR3aXphcmRQYWdlcy5wdXNoKHdpemFyZFBhZ2VXcmFwcGVyKFNldHVwQ29uZ3JhdHVsYXRpb25zUGFnZSwgbmV3IFNldHVwQ29uZ3JhdHVsYXRpb25zUGFnZUF0dHJzKCkpKVxuXHR3aXphcmRQYWdlcy5wdXNoKFxuXHRcdHdpemFyZFBhZ2VXcmFwcGVyKFxuXHRcdFx0U2V0dXBOb3RpZmljYXRpb25zUGFnZSxcblx0XHRcdG5ldyBTZXR1cE5vdGlmaWNhdGlvbnNQYWdlQXR0cnMoXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRpc05vdGlmaWNhdGlvblBlcm1pc3Npb25HcmFudGVkOiBwZXJtaXNzaW9uU3RhdHVzLmdldChQZXJtaXNzaW9uVHlwZS5Ob3RpZmljYXRpb24pID8/IGZhbHNlLFxuXHRcdFx0XHRcdGlzQmF0dGVyeVBlcm1pc3Npb25HcmFudGVkOiBwZXJtaXNzaW9uU3RhdHVzLmdldChQZXJtaXNzaW9uVHlwZS5JZ25vcmVCYXR0ZXJ5T3B0aW1pemF0aW9uKSA/PyBmYWxzZSxcblx0XHRcdFx0fSxcblx0XHRcdFx0d2ViTW9iaWxlRmFjYWRlLmdldElzQXBwVmlzaWJsZSgpLFxuXHRcdFx0XHRzeXN0ZW1QZXJtaXNzaW9uSGFuZGxlcixcblx0XHRcdCksXG5cdFx0KSxcblx0KVxuXHR3aXphcmRQYWdlcy5wdXNoKHdpemFyZFBhZ2VXcmFwcGVyKFNldHVwVGhlbWVQYWdlLCBuZXcgU2V0dXBUaGVtZVBhZ2VBdHRycygpKSlcblx0aWYgKGFsbG93Q29udGFjdFN5bmNBbmRJbXBvcnQgJiYgY29udGFjdFN5bmNNYW5hZ2VyICYmIGNvbnRhY3RJbXBvcnRlcikge1xuXHRcdHdpemFyZFBhZ2VzLnB1c2goXG5cdFx0XHR3aXphcmRQYWdlV3JhcHBlcihTZXR1cENvbnRhY3RzUGFnZSwgbmV3IFNldHVwQ29udGFjdHNQYWdlQXR0cnMoY29udGFjdFN5bmNNYW5hZ2VyLCBjb250YWN0SW1wb3J0ZXIsIHN5c3RlbUZhY2FkZSwgYWxsb3dDb250YWN0U3luY0FuZEltcG9ydCkpLFxuXHRcdClcblx0fVxuXHR3aXphcmRQYWdlcy5wdXNoKHdpemFyZFBhZ2VXcmFwcGVyKFNldHVwTG9ja1BhZ2UsIG5ldyBTZXR1cExvY2tQYWdlQXR0cnMobG9jYXRvci5zeXN0ZW1GYWNhZGUpKSlcblxuXHRjb25zdCBkZWZlcnJlZCA9IGRlZmVyPHZvaWQ+KClcblxuXHRjb25zdCB3aXphcmRCdWlsZGVyID0gY3JlYXRlV2l6YXJkRGlhbG9nKFxuXHRcdG51bGwsXG5cdFx0d2l6YXJkUGFnZXMsXG5cdFx0YXN5bmMgKCkgPT4ge1xuXHRcdFx0ZGV2aWNlQ29uZmlnLnNldElzU2V0dXBDb21wbGV0ZSh0cnVlKVxuXHRcdFx0ZGVmZXJyZWQucmVzb2x2ZSgpXG5cdFx0fSxcblx0XHREaWFsb2dUeXBlLkVkaXRTbWFsbCxcblx0KVxuXG5cdHdpemFyZEJ1aWxkZXIuZGlhbG9nLnNob3coKVxuXHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZVxufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0lBV2Esa0JBQU4sTUFBaUU7Q0FDdkUsS0FBSyxFQUFFLE9BQU8sVUFBdUMsRUFBWTtBQUNoRSxTQUFPLGdCQUFFLDBEQUEwRDtHQUNsRSxnQkFBRSxnQ0FBZ0M7SUFDakMsTUFBTSxFQUFFLE9BQU8sTUFBTSxTQUFTLGtCQUFrQiw0QkFBNEIsTUFBTSxNQUFNO0lBQ3hGLEtBQUs7SUFDTCxLQUFLO0lBQ0wsU0FBUztJQUNULFVBQVU7SUFDVixPQUFPLE1BQU07R0FDYixFQUFDO0dBQ0Y7R0FDQSxnQkFBRSxhQUFhO0lBQ2QsT0FBTyxNQUFNLGVBQWU7SUFDNUIsT0FBTztJQUNQLFNBQVMsQ0FBQyxHQUFHLFFBQVE7QUFDcEIscUJBQWdCLEtBQUssZ0JBQWdCLGVBQWU7SUFDcEQ7R0FDRCxFQUFDO0VBQ0YsRUFBQztDQUNGO0FBQ0Q7Ozs7SUMzQlksMkJBQU4sTUFBNEQ7Q0FDbEUsT0FBaUI7QUFDaEIsU0FBTyxnQkFBRSxpQkFBaUI7R0FBRSxPQUFPO0dBQW1CLE9BQU87RUFBeUIsR0FBRSxDQUN2RixnQkFBRSxhQUFhLEtBQUssSUFBSSxlQUFlLENBQUMsRUFDeEMsZ0JBQUUscUJBQXFCLEtBQUssSUFBSSxrQkFBa0IsQ0FBQyxBQUNuRCxFQUFDO0NBQ0Y7QUFDRDtJQUVZLGdDQUFOLE1BQXFFO0NBQzNFLGdCQUFnQjtDQUNoQiwwQkFBMEI7Q0FDMUIsT0FBYTtDQUViLGNBQThCO0FBQzdCLFNBQU87Q0FDUDtDQUVELFdBQVdBLGFBQXdDO0FBRWxELFNBQU8sUUFBUSxRQUFRLEtBQUs7Q0FDNUI7Q0FFRCxrQkFBMkI7QUFDMUIsU0FBTztDQUNQO0NBRUQsWUFBcUI7QUFDcEIsU0FBTztDQUNQO0FBQ0Q7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