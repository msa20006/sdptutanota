import { __toESM } from "./chunk-chunk.js";
import "./dist-chunk.js";
import { ProgrammingError } from "./ProgrammingError-chunk.js";
import { assertMainOrNode, isApp, isBrowser, isDesktop, isIOSApp, isOfflineStorageAvailable, isWebClient } from "./Env-chunk.js";
import { AppType, client } from "./ClientDetector-chunk.js";
import { mithril_default } from "./mithril-chunk.js";
import { DAY_IN_MILLIS, LazyLoaded, NBSP, assert, assertNotNull, asyncFind, capitalizeFirstLetter, clear, clone, contains, debounceStart, defer, delay, downcast, filterInt, first, getDayShifted, getFirstOrThrow, getStartOfDay, getStartOfNextDay, incrementDate, isEmpty, mapNullable, memoized, neverNull, noOp, ofClass, pMap, pad, partition, renderCsv, stringToUtf8Uint8Array, uint8ArrayToBase64, utf8Uint8ArrayToString } from "./dist2-chunk.js";
import { getThemeCustomizations } from "./WhitelabelCustomizations-chunk.js";
import { InfoLink, getLanguage, lang, languageByCode, languageCodeToTag, languageNative } from "./LanguageViewModel-chunk.js";
import { styles } from "./styles-chunk.js";
import { expandHexTriplet, getLightOrDarkTutaLogo, isValidColorCode, theme, themeOptions } from "./theme-chunk.js";
import { ALLOWED_IMAGE_FORMATS, BookingItemFeatureType, CertificateState, CertificateType, CloseEventBusOption, Const, CounterType, CustomDomainCheckResult, CustomDomainTypeCount, CustomDomainValidationResult, DEFAULT_FREE_MAIL_ADDRESS_SIGNUP_DOMAIN, DnsRecordType, DnsRecordValidation, EmailSignatureType, FeatureType, GroupType, HighestTierPlans, ImportStatus, InboxRuleType, Keys, LegacyPlans, MAX_LOGO_SIZE, MailSetKind, NewPaidPlans, OFFLINE_STORAGE_DEFAULT_TIME_RANGE_DAYS, OUT_OF_OFFICE_SUBJECT_PREFIX, OperationType, OutOfOfficeNotificationMessageType, PlanType, PushServiceType, ReportMovedMailsType, SecondFactorType, SessionState, ShareCapability, SpamRuleFieldType, SpamRuleType, TUTA_MAIL_ADDRESS_DOMAINS, TimeFormat, WeekStart, assertEnumValue, getSpamRuleField } from "./TutanotaConstants-chunk.js";
import { keyManager } from "./KeyManager-chunk.js";
import "./WindowFacade-chunk.js";
import "./RootView-chunk.js";
import { px, size } from "./size-chunk.js";
import "./HtmlUtils-chunk.js";
import { DateTime } from "./luxon-chunk.js";
import { GENERATED_MAX_ID, GENERATED_MIN_ID, elementIdPart, generatedIdToTimestamp, getElementId, getEtId, isSameId, listIdPart, sortCompareByReverseId, timestampToGeneratedId } from "./EntityUtils-chunk.js";
import "./TypeModels-chunk.js";
import { EmailTemplateTypeRef, KnowledgeBaseEntryTypeRef, MailFolderTypeRef, MailboxPropertiesTypeRef, OutOfOfficeNotificationTypeRef, TemplateGroupRootTypeRef, TutanotaPropertiesTypeRef, UserSettingsGroupRootTypeRef, createGroupSettings, createMail, createMailAddress, createOutOfOfficeNotification, createOutOfOfficeNotificationMessage, createUserAreaGroupDeleteData } from "./TypeRefs-chunk.js";
import "./CommonCalendarUtils-chunk.js";
import "./TypeModels2-chunk.js";
import { AccountingInfoTypeRef, AuditLogEntryTypeRef, BookingTypeRef, CustomerInfoTypeRef, CustomerPropertiesTypeRef, CustomerServerPropertiesTypeRef, CustomerTypeRef, GroupInfoTypeRef, GroupMemberTypeRef, GroupTypeRef, PushIdentifierTypeRef, RejectedSenderTypeRef, SecondFactorTypeRef, SessionTypeRef, UserTypeRef, WhitelabelConfigTypeRef, createCustomDomainCheckGetIn, createDnsRecord, createEmailSenderListElement, createGroupInfo, createSecondFactor, createStringWrapper, createSurveyData } from "./TypeRefs2-chunk.js";
import "./ParserCombinator-chunk.js";
import { getStartOfTheWeekOffsetForUser } from "./CalendarUtils-chunk.js";
import "./ImportExportUtils-chunk.js";
import { isDomainName, isMailAddress } from "./FormatValidator-chunk.js";
import { require_stream } from "./stream-chunk.js";
import { ListAutoSelectBehavior, deviceConfig } from "./DeviceConfig-chunk.js";
import "./Logger-chunk.js";
import "./ErrorHandler-chunk.js";
import "./EntityFunctions-chunk.js";
import "./TypeModels3-chunk.js";
import "./ModelInfo-chunk.js";
import "./ErrorUtils-chunk.js";
import { BadRequestError, InvalidDataError, LimitReachedError, LockedError, NotAuthorizedError, NotFoundError, PayloadTooLargeError, PreconditionFailedError } from "./RestError-chunk.js";
import "./SetupMultipleError-chunk.js";
import "./OutOfSyncError-chunk.js";
import "./CancelledError-chunk.js";
import "./EventQueue-chunk.js";
import "./EntityRestClient-chunk.js";
import "./SuspensionError-chunk.js";
import "./LoginIncompleteError-chunk.js";
import "./CryptoError-chunk.js";
import "./error-chunk.js";
import "./RecipientsNotFoundError-chunk.js";
import "./DbError-chunk.js";
import { IndexingNotSupportedError } from "./QuotaExceededError-chunk.js";
import "./DeviceStorageUnavailableError-chunk.js";
import "./MailBodyTooLargeError-chunk.js";
import "./ImportError-chunk.js";
import "./WebauthnError-chunk.js";
import "./PermissionError-chunk.js";
import "./MessageDispatcher-chunk.js";
import "./WorkerProxy-chunk.js";
import { isUpdateFor, isUpdateForTypeRef } from "./EntityUpdateUtils-chunk.js";
import "./dist3-chunk.js";
import "./KeyLoaderFacade-chunk.js";
import "./SessionType-chunk.js";
import { BrandingDomainService, CustomDomainCheckService } from "./Services-chunk.js";
import "./EntityClient-chunk.js";
import "./PageContextLoginListener-chunk.js";
import "./RestClient-chunk.js";
import "./BirthdayUtils-chunk.js";
import { TemplateGroupService } from "./Services2-chunk.js";
import "./FolderSystem-chunk.js";
import { compareGroupInfos, getEnabledMailAddressesForGroupInfo, getGroupInfoDisplayName, getUserGroupMemberships } from "./GroupUtils-chunk.js";
import "./MailChecks-chunk.js";
import { BaseButton, Button, ButtonType } from "./Button-chunk.js";
import { Icons } from "./Icons-chunk.js";
import "./DialogHeaderBar-chunk.js";
import "./CountryList-chunk.js";
import { Autocapitalize, Autocomplete, Dialog, DialogType, DropDownSelector, TextField, TextFieldType, attachDropdown, createDropdown, createMoreActionButtonAttrs, getConfirmation, ifAllowedTutaLinks } from "./Dialog-chunk.js";
import { BootIcons, Icon, IconSize, progressIcon } from "./Icon-chunk.js";
import "./AriaUtils-chunk.js";
import { ButtonSize, IconButton } from "./IconButton-chunk.js";
import "./CalendarEventWhenModel-chunk.js";
import { formatDate, formatDateTime, formatDateTimeFromYesterdayOn, formatDateWithMonth, formatShortMonthYear2Digit, formatStorageSize, getHourCycle } from "./Formatter-chunk.js";
import "./ProgressMonitor-chunk.js";
import "./Notifications-chunk.js";
import "./CalendarFacade-chunk.js";
import "./CalendarModel-chunk.js";
import { TemplateGroupPreconditionFailedReason, getNullableSharedGroupName, getSharedGroupName, hasCapabilityOnGroup, isSharedGroupOwner } from "./GroupUtils2-chunk.js";
import { locator } from "./CommonLocator-chunk.js";
import { UserError } from "./UserError-chunk.js";
import { getCleanedMailAddress, getDomainPart } from "./MailAddressParser-chunk.js";
import { createDataFile } from "./BlobUtils-chunk.js";
import "./FileUtils-chunk.js";
import { showProgressDialog } from "./ProgressDialog-chunk.js";
import { getMailAddressDisplayText, getMailboxName, insertInlineImageB64ClickHandler, showFileChooser } from "./SharedMailUtils-chunk.js";
import "./PasswordUtils-chunk.js";
import "./Recipient-chunk.js";
import "./ContactUtils-chunk.js";
import "./RecipientsModel-chunk.js";
import "./CalendarGuiUtils-chunk.js";
import { UpgradeRequiredError } from "./UpgradeRequiredError-chunk.js";
import "./ColorPickerModel-chunk.js";
import "./BannerButton-chunk.js";
import { showNotAvailableForFreeDialog, showPlanUpgradeRequiredDialog } from "./SubscriptionDialogs-chunk.js";
import { ExternalLink } from "./ExternalLink-chunk.js";
import { ToggleButton } from "./ToggleButton-chunk.js";
import "./SectionButton-chunk.js";
import { DatePicker } from "./DatePicker-chunk.js";
import "./MailRecipientsTextField-chunk.js";
import { ColumnEmptyMessageBox } from "./ColumnEmptyMessageBox-chunk.js";
import "./DateParser-chunk.js";
import { NavButton, NavButtonColor, isNavButtonSelected, isSelectedPrefix } from "./NavButton-chunk.js";
import "./InfoBanner-chunk.js";
import { showSnackBar } from "./SnackBar-chunk.js";
import "./Credentials-chunk.js";
import "./NotificationOverlay-chunk.js";
import { Checkbox } from "./Checkbox-chunk.js";
import { ExpanderButton, ExpanderPanel } from "./Expander-chunk.js";
import { copyToClipboard } from "./ClipboardUtils-chunk.js";
import "./Services4-chunk.js";
import "./BubbleButton-chunk.js";
import { clientInfoString, getLogAttachments } from "./ErrorReporter-chunk.js";
import { PasswordField } from "./PasswordField-chunk.js";
import { showRequestPasswordDialog } from "./PasswordRequestDialog-chunk.js";
import { showUserError } from "./ErrorHandlerImpl-chunk.js";
import "./InAppRatingDialog-chunk.js";
import { List, MultiselectMode, listSelectionKeyboardShortcuts, onlySingleSelection } from "./List-chunk.js";
import { SelectableRowContainer, setVisibility } from "./SelectableRowContainer-chunk.js";
import { SETTINGS_PREFIX } from "./RouteChange-chunk.js";
import "./ListModel-chunk.js";
import { ListElementListModel } from "./ListElementListModel-chunk.js";
import { getCustomMailDomains, getWhitelabelDomainInfo, isCustomizationEnabledForCustomer } from "./CustomerUtils-chunk.js";
import { BackgroundColumnLayout, ColumnType, FolderColumnView, Header, MobileHeader, SidebarSection, ViewColumn, ViewSlider } from "./MobileHeader-chunk.js";
import { ProgressBar, ProgressBarType, UiImportStatus, appIdToLoginUrl, getInboxRuleTypeName, mailLocator, validateWebauthnDisplayName } from "./mailLocator-chunk.js";
import { BaseTopLevelView } from "./LoginScreenHeader-chunk.js";
import { LoginButton, LoginButtonType } from "./LoginButton-chunk.js";
import "./ColorPickerView-chunk.js";
import "./NavFunctions-chunk.js";
import "./CounterBadge-chunk.js";
import "./InfoIcon-chunk.js";
import { ColumnWidth, Table, createRowActions } from "./Table-chunk.js";
import "./GroupGuiUtils-chunk.js";
import { showGroupSharingDialog } from "./GroupSharingDialog-chunk.js";
import { GroupInvitationFolderRow } from "./GroupInvitationFolderRow-chunk.js";
import { ListColumnWrapper } from "./ListColumnWrapper-chunk.js";
import { HtmlEditor, HtmlEditorMode } from "./HtmlEditor-chunk.js";
import { htmlSanitizer } from "./HtmlSanitizer-chunk.js";
import { appendEmailSignature } from "./Signature-chunk.js";
import "./LoginUtils-chunk.js";
import "./AttachmentBubble-chunk.js";
import "./MailEditorViewModel-chunk.js";
import "./MailGuiUtils-chunk.js";
import "./UsageTestModel-chunk.js";
import { getDefaultSenderFromUser, getFolderName, getIndentedFolderNameForDropdown, getPathToFolderString } from "./MailUtils-chunk.js";
import "./BrowserWebauthn-chunk.js";
import { PermissionType$1 as PermissionType } from "./PermissionType-chunk.js";
import "./CommonMailUtils-chunk.js";
import "./SearchUtils-chunk.js";
import "./FontIcons-chunk.js";
import { TEMPLATE_SHORTCUT_PREFIX, loadTemplateGroupInstances, searchInTemplates } from "./TemplatePopupModel-chunk.js";
import { KnowledgeBaseEntryView, createInitialTemplateListIfAllowed, knowledgeBaseSearch, newMailEditorFromTemplate } from "./MailEditor-chunk.js";
import "./MailViewerViewModel-chunk.js";
import "./LoadingState-chunk.js";
import "./inlineImagesUtils-chunk.js";
import { BottomNav } from "./BottomNav-chunk.js";
import "./CommonFormatter-chunk.js";
import { DesktopConfigKey } from "./ConfigKeys-chunk.js";
import { CredentialEncryptionMode } from "./CredentialEncryptionMode-chunk.js";
import { formatActivateState, getDefaultNotificationLabel, loadOutOfOfficeNotification } from "./OutOfOfficeNotificationUtils-chunk.js";
import { PasswordForm, PasswordModel } from "./PasswordForm-chunk.js";
import { MoreInfoLink } from "./MoreInfoLink-chunk.js";
import { getReportMovedMailsType } from "./MailboxPropertiesUtils-chunk.js";
import { AppLockMethod } from "./AppLockMethod-chunk.js";
import "./RadioSelector-chunk.js";
import { showCredentialsEncryptionModeDialog } from "./SelectCredentialsEncryptionModeDialog-chunk.js";
import { ReferralLinkViewer, getReferralLink } from "./ReferralLinkViewer-chunk.js";
import { NotificationContentSelector } from "./NotificationContentSelector-chunk.js";
import "./NotificationPermissionsDialog-chunk.js";
import { getCurrentSpellcheckLanguageLabel, showSpellcheckLanguageDialog } from "./SpellcheckLanguageDialog-chunk.js";
import { WizardEventType, createWizardDialog, emitWizardEvent, wizardPageWrapper } from "./WizardDialog-chunk.js";
import "./SegmentControl-chunk.js";
import { getAvailableMatchingPlans, getAvailablePlansWithAutoResponder, getAvailablePlansWithTemplates, getAvailablePlansWithWhitelabel, isWhitelabelActive, toFeatureType } from "./SubscriptionUtils-chunk.js";
import { show$2 as show, showBuyOrSetNotificationEmailDialog } from "./EditNotificationEmailDialog-chunk.js";
import { showChangeOwnPasswordDialog, showChangeUserPasswordAsAdminDialog } from "./ChangePasswordDialogs-chunk.js";
import { showRecoverCodeDialogAfterPasswordVerification, showRecoverCodeDialogAfterPasswordVerificationAndInfoDialog } from "./RecoverCodeDialog-chunk.js";
import { getAvailableDomains } from "./MailAddressesUtils-chunk.js";
import { AddressStatus } from "./MailAddressTableModel-chunk.js";
import { ReceivedGroupInvitationsModel } from "./ReceivedGroupInvitationsModel-chunk.js";
import { PaymentInterval, asPaymentInterval, formatPrice, getPriceItem } from "./PriceUtils-chunk.js";
import { require_qrcode } from "./PurchaseGiftCardDialog-chunk.js";
import { PaymentViewer, SelectMailAddressForm, SettingsExpander, SubscriptionViewer, showUpgradeWizard } from "./SwitchSubscriptionDialog-chunk.js";
import "./MessageBox-chunk.js";
import { SURVEY_VERSION_NUMBER, showLeavingUserSurveyWizard } from "./LeavingUserSurveyWizard-chunk.js";
import { showSupportDialog } from "./SupportDialog-chunk.js";
import "./Badge-chunk.js";
import { MailRow } from "./MailRow-chunk.js";
import { BaseSearchBar } from "./BaseSearchBar-chunk.js";
import { createInboxRuleTemplate, show$1 } from "./AddInboxRuleDialog-chunk.js";
import { getSpamRuleFieldToName, getSpamRuleTypeNameMapping, showAddSpamRuleDialog } from "./AddSpamRuleDialog-chunk.js";
import { showKnowledgeBaseEditor } from "./KnowledgeBaseEditor-chunk.js";
import { getLanguageCode, showTemplateEditor } from "./TemplateEditor-chunk.js";

//#region src/common/settings/SettingsFolder.ts
assertMainOrNode();
var SettingsFolder = class {
	url;
	_isVisibleHandler;
	constructor(name, icon, path, viewerCreator, data) {
		this.name = name;
		this.icon = icon;
		this.path = path;
		this.viewerCreator = viewerCreator;
		this.data = data;
		this.url = typeof path === "string" ? `/settings/${encodeURIComponent(path)}` : `/settings/${encodeURIComponent(path.folder)}/${encodeURIComponent(path.id)}`;
		this._isVisibleHandler = () => true;
	}
	isActive() {
		return isSelectedPrefix(this.url);
	}
	isVisible() {
		return this._isVisibleHandler();
	}
	setIsVisibleHandler(isVisibleHandler) {
		this._isVisibleHandler = isVisibleHandler;
		return this;
	}
	get folder() {
		return typeof this.path === "string" ? null : this.path.folder;
	}
	get id() {
		return typeof this.path === "string" ? null : this.path.id;
	}
};

//#endregion
//#region src/common/settings/login/secondfactor/SecondFactorEditModel.ts
var import_qrcode = __toESM(require_qrcode(), 1);
let VerificationStatus = function(VerificationStatus$1) {
	VerificationStatus$1["Initial"] = "Initial";
	VerificationStatus$1["Progress"] = "Progress";
	VerificationStatus$1["Failed"] = "Failed";
	VerificationStatus$1["Success"] = "Success";
	return VerificationStatus$1;
}({});
const DEFAULT_U2F_NAME = "U2F";
const DEFAULT_TOTP_NAME = "TOTP";
let NameValidationStatus = function(NameValidationStatus$1) {
	NameValidationStatus$1[NameValidationStatus$1["Valid"] = 0] = "Valid";
	NameValidationStatus$1[NameValidationStatus$1["Invalid"] = 1] = "Invalid";
	return NameValidationStatus$1;
}({});
const SecondFactorTypeToNameTextId = Object.freeze({
	[SecondFactorType.totp]: "totpAuthenticator_label",
	[SecondFactorType.u2f]: "u2fSecurityKey_label",
	[SecondFactorType.webauthn]: "u2fSecurityKey_label"
});
var SecondFactorEditModel = class {
	totpCode = "";
	selectedType;
	name = "";
	nameValidationStatus = NameValidationStatus.Valid;
	verificationStatus = VerificationStatus.Initial;
	otpInfo;
	u2fRegistrationData = null;
	constructor(entityClient, user, webauthnClient, totpKeys, webauthnSupported, loginFacade, hostname, domainConfig, updateViewCallback, token) {
		this.entityClient = entityClient;
		this.user = user;
		this.webauthnClient = webauthnClient;
		this.totpKeys = totpKeys;
		this.webauthnSupported = webauthnSupported;
		this.loginFacade = loginFacade;
		this.hostname = hostname;
		this.domainConfig = domainConfig;
		this.updateViewCallback = updateViewCallback;
		this.token = token;
		this.selectedType = webauthnSupported ? SecondFactorType.webauthn : SecondFactorType.totp;
		this.setDefaultNameIfNeeded();
		this.otpInfo = new LazyLoaded(async () => {
			const url = await this.getOtpAuthUrl(this.totpKeys.readableKey);
			const totpQRCodeSvg = isApp() ? null : htmlSanitizer.sanitizeSVG(new import_qrcode.default({
				height: 150,
				width: 150,
				content: url,
				padding: 2,
				xmlDeclaration: false
			}).svg()).html;
			return {
				qrCodeSvg: totpQRCodeSvg,
				url
			};
		});
		this.otpInfo.getAsync().then(() => this.updateViewCallback());
	}
	/**
	* if the user cancels the second factor creation while it's already talking to webAuthn, we want to cancel that
	* process before closing the dialog.
	*/
	abort() {
		this.webauthnClient.abortCurrentOperation();
	}
	/**
	* validation message for use in dialog validators
	*/
	validationMessage() {
		return this.nameValidationStatus === NameValidationStatus.Valid ? null : "textTooLong_msg";
	}
	/**
	* get a list of supported second factor types
	*/
	getFactorTypesOptions() {
		const options = [];
		options.push(SecondFactorType.totp);
		if (this.webauthnSupported) options.push(SecondFactorType.webauthn);
		return options;
	}
	/**
	* call when the selected second factor type changes
	*/
	onTypeSelected(newValue) {
		this.selectedType = newValue;
		this.verificationStatus = newValue === SecondFactorType.webauthn ? VerificationStatus.Initial : VerificationStatus.Progress;
		this.setDefaultNameIfNeeded();
		this.updateNameValidation();
		if (newValue !== SecondFactorType.webauthn) this.webauthnClient.abortCurrentOperation();
	}
	/**
	* call when the display name of the second factor instance changes
	*/
	onNameChange(newValue) {
		this.name = newValue;
		this.updateNameValidation();
	}
	/**
	* call when the validation code for setting up TOTP changes
	*/
	async onTotpValueChange(newValue) {
		this.totpCode = newValue;
		let cleanedValue = newValue.replace(/ /g, "");
		if (cleanedValue.length === 6) {
			const expectedCode = Number(cleanedValue);
			this.verificationStatus = await this.tryCodes(expectedCode, this.totpKeys.key);
		} else this.verificationStatus = VerificationStatus.Progress;
		this.updateViewCallback();
	}
	/**
	* re-validates the input and makes the server calls to actually create a second factor
	* returns the user that the second factor was created in case any follow-up operations
	* are needed
	*/
	async save() {
		this.setDefaultNameIfNeeded();
		if (this.selectedType === SecondFactorType.webauthn) {
			if (this.verificationStatus === VerificationStatus.Progress) return null;
			try {
				this.u2fRegistrationData = await this.webauthnClient.register(this.user._id, this.name);
				this.verificationStatus = VerificationStatus.Success;
			} catch (e) {
				console.log("Webauthn registration failed: ", e);
				this.u2fRegistrationData = null;
				this.verificationStatus = VerificationStatus.Failed;
				return null;
			}
		}
		this.updateViewCallback();
		if (this.selectedType === SecondFactorType.u2f) throw new ProgrammingError(`invalid factor type: ${this.selectedType}`);
		const sf = createSecondFactor({
			_ownerGroup: this.user._ownerGroup,
			name: this.name,
			type: this.selectedType,
			otpSecret: null,
			u2f: null
		});
		if (this.selectedType === SecondFactorType.webauthn) if (this.verificationStatus !== VerificationStatus.Success) throw new UserError("unrecognizedU2fDevice_msg");
else sf.u2f = this.u2fRegistrationData;
else if (this.selectedType === SecondFactorType.totp) if (this.verificationStatus === VerificationStatus.Failed) throw new UserError("totpCodeWrong_msg");
else if (this.verificationStatus === VerificationStatus.Initial || this.verificationStatus === VerificationStatus.Progress) throw new UserError("totpCodeEnter_msg");
else sf.otpSecret = this.totpKeys.key;
		await this.entityClient.setup(assertNotNull(this.user.auth).secondFactors, sf, this.token ? { token: this.token } : undefined);
		return this.user;
	}
	/** see https://github.com/google/google-authenticator/wiki/Key-Uri-Format */
	async getOtpAuthUrl(secret) {
		const userGroupInfo = await this.entityClient.load(GroupInfoTypeRef, this.user.userGroup.groupInfo);
		const issuer = this.domainConfig.firstPartyDomain ? "Tutanota" : this.hostname;
		const account = encodeURI(issuer + ":" + neverNull(userGroupInfo.mailAddress));
		const url = new URL("otpauth://totp/" + account);
		url.searchParams.set("issuer", issuer);
		url.searchParams.set("secret", secret.replace(/ /g, ""));
		url.searchParams.set("algorithm", "SHA1");
		url.searchParams.set("digits", "6");
		url.searchParams.set("period", "30");
		return url.toString();
	}
	/**
	* re-check if the given display name is valid for the current second factor type
	*/
	updateNameValidation() {
		this.nameValidationStatus = this.selectedType !== SecondFactorType.webauthn || validateWebauthnDisplayName(this.name) ? NameValidationStatus.Valid : NameValidationStatus.Invalid;
	}
	/**
	* empty names sometimes lead to errors, so we make sure we have something semi-sensible set in the field.
	*/
	setDefaultNameIfNeeded() {
		const trimmed = this.name.trim();
		if (this.selectedType === SecondFactorType.webauthn && (trimmed === DEFAULT_TOTP_NAME || trimmed.length === 0)) this.name = DEFAULT_U2F_NAME;
else if (this.selectedType === SecondFactorType.totp && (trimmed === DEFAULT_U2F_NAME || trimmed.length === 0)) this.name = DEFAULT_TOTP_NAME;
	}
	/**
	* check if the given validation code is the current, next or last code for the TOTP
	*/
	async tryCodes(expectedCode, key) {
		const time = Math.floor(new Date().getTime() / 1e3 / 30);
		const number = await this.loginFacade.generateTotpCode(time, key);
		if (number === expectedCode) return VerificationStatus.Success;
		const number2 = await this.loginFacade.generateTotpCode(time - 1, key);
		if (number2 === expectedCode) return VerificationStatus.Success;
		const number3 = await this.loginFacade.generateTotpCode(time + 1, key);
		if (number3 === expectedCode) return VerificationStatus.Success;
		return VerificationStatus.Failed;
	}
};

//#endregion
//#region src/common/settings/login/secondfactor/SecondFactorEditDialog.ts
var SecondFactorEditDialog = class SecondFactorEditDialog {
	dialog;
	constructor(model) {
		this.model = model;
		this.dialog = Dialog.createActionDialog({
			title: "add_action",
			allowOkWithReturn: true,
			child: { view: () => this.render() },
			okAction: () => showProgressDialog("pleaseWait_msg", this.okAction()),
			allowCancel: true,
			okActionTextId: "save_action",
			cancelAction: () => this.model.abort(),
			validator: () => this.model.validationMessage()
		});
	}
	async okAction() {
		try {
			const user = await this.model.save();
			if (user != null) this.finalize(user);
		} catch (e) {
			if (e instanceof UserError) Dialog.message(lang.makeTranslation("error_msg", e.message));
else if (e instanceof NotAuthorizedError) {
				this.dialog.close();
				Dialog.message("contactFormSubmitError_msg");
				return;
			} else throw e;
		}
	}
	finalize(user) {
		this.dialog.close();
		showRecoverCodeDialogAfterPasswordVerificationAndInfoDialog(user);
	}
	static async loadAndShow(entityClient, lazyUser, token) {
		const dialog = await showProgressDialog("pleaseWait_msg", this.loadWebauthnClient(entityClient, lazyUser, token));
		dialog.dialog.show();
	}
	render() {
		const optionsItems = this.model.getFactorTypesOptions().map((o) => ({
			name: lang.get(SecondFactorTypeToNameTextId[o]),
			value: o
		}));
		const typeDropdownAttrs = {
			label: "type_label",
			selectedValue: this.model.selectedType,
			selectionChangedHandler: (newValue) => this.model.onTypeSelected(newValue),
			items: optionsItems,
			dropdownWidth: 300
		};
		const nameFieldAttrs = {
			label: "name_label",
			helpLabel: () => this.renderHelpLabel(),
			value: this.model.name,
			oninput: (value) => this.model.onNameChange(value)
		};
		return [
			mithril_default(DropDownSelector, typeDropdownAttrs),
			mithril_default(TextField, nameFieldAttrs),
			this.renderTypeSpecificFields()
		];
	}
	renderHelpLabel() {
		return this.model.nameValidationStatus === NameValidationStatus.Valid ? mithril_default("", lang.get("secondFactorNameInfo_msg")) : mithril_default(".b.content-accent-fg", lang.get("textTooLong_msg"));
	}
	renderTypeSpecificFields() {
		switch (this.model.selectedType) {
			case SecondFactorType.totp: return this.renderOtpFields();
			case SecondFactorType.webauthn: return this.renderU2FFields();
			default: throw new ProgrammingError(`Invalid 2fa type: ${this.model.selectedType}`);
		}
	}
	renderU2FFields() {
		return this.model.verificationStatus === VerificationStatus.Initial ? null : mithril_default("p.flex.items-center", [mithril_default(".mr-s", this.statusIcon()), mithril_default("", this.statusMessage())]);
	}
	renderOtpFields() {
		const copyButtonAttrs = {
			title: "copy_action",
			click: () => copyToClipboard(this.model.totpKeys.readableKey),
			icon: Icons.Clipboard,
			size: ButtonSize.Compact
		};
		return mithril_default(".mb", [
			mithril_default(TextField, {
				label: "totpSecret_label",
				helpLabel: () => lang.get(isApp() ? "totpTransferSecretApp_msg" : "totpTransferSecret_msg"),
				value: this.model.totpKeys.readableKey,
				injectionsRight: () => mithril_default(IconButton, copyButtonAttrs),
				isReadOnly: true
			}),
			isApp() ? mithril_default(".pt", mithril_default(LoginButton, {
				label: "addOpenOTPApp_action",
				onclick: () => this.openOtpLink()
			})) : this.renderOtpQrCode(),
			mithril_default(TextField, {
				label: "totpCode_label",
				value: this.model.totpCode,
				helpLabel: () => this.statusMessage(),
				autocompleteAs: Autocomplete.oneTimeCode,
				oninput: (newValue) => this.model.onTotpValueChange(newValue)
			})
		]);
	}
	renderOtpQrCode() {
		const otpInfo = this.model.otpInfo.getSync();
		if (otpInfo) {
			const qrCodeSvg = assertNotNull(otpInfo.qrCodeSvg);
			return mithril_default(".flex-center.pt", mithril_default.trust(qrCodeSvg));
		} else return null;
	}
	async openOtpLink() {
		const { url } = await this.model.otpInfo.getAsync();
		const successful = await locator.systemFacade.openLink(url);
		if (!successful) Dialog.message("noAppAvailable_msg");
	}
	static async loadWebauthnClient(entityClient, lazyUser, token) {
		const totpKeys = await locator.loginFacade.generateTotpSecret();
		const user = await lazyUser.getAsync();
		const webauthnSupported = await locator.webAuthn.isSupported();
		const model = new SecondFactorEditModel(entityClient, user, locator.webAuthn, totpKeys, webauthnSupported, locator.loginFacade, location.hostname, locator.domainConfigProvider().getCurrentDomainConfig(), mithril_default.redraw, token);
		return new SecondFactorEditDialog(model);
	}
	statusIcon() {
		switch (this.model.verificationStatus) {
			case VerificationStatus.Progress: return progressIcon();
			case VerificationStatus.Success: return mithril_default(Icon, {
				icon: Icons.Checkmark,
				size: IconSize.Medium,
				style: { fill: theme.content_accent }
			});
			case VerificationStatus.Failed: return mithril_default(Icon, {
				icon: Icons.Cancel,
				size: IconSize.Medium,
				style: { fill: theme.content_accent }
			});
			default: return null;
		}
	}
	statusMessage() {
		if (this.model.selectedType === SecondFactorType.webauthn) return this.model.verificationStatus === VerificationStatus.Success ? lang.get("registeredU2fDevice_msg") : lang.get("unrecognizedU2fDevice_msg");
else if (this.model.verificationStatus === VerificationStatus.Success) return lang.get("totpCodeConfirmed_msg");
else if (this.model.verificationStatus === VerificationStatus.Failed) return lang.get("totpCodeWrong_msg");
else return lang.get("totpCodeEnter_msg");
	}
};

//#endregion
//#region src/common/settings/login/secondfactor/SecondFactorsEditForm.ts
assertMainOrNode();
var SecondFactorsEditForm = class {
	_2FALineAttrs;
	constructor(user, domainConfigProvider, loginFacade, askForPassword, isDeactivated) {
		this.user = user;
		this.domainConfigProvider = domainConfigProvider;
		this.loginFacade = loginFacade;
		this.askForPassword = askForPassword;
		this.isDeactivated = isDeactivated;
		this._2FALineAttrs = [];
		this._updateSecondFactors();
		this.view = this.view.bind(this);
	}
	view() {
		const secondFactorTableAttrs = {
			columnHeading: ["name_label", "type_label"],
			columnWidths: [ColumnWidth.Largest, ColumnWidth.Largest],
			lines: this._2FALineAttrs,
			showActionButtonColumn: true,
			addButtonAttrs: {
				title: "addSecondFactor_action",
				click: () => {
					if (this.isDeactivated) Dialog.message("userAccountDeactivated_msg");
else if (this.askForPassword) this.showAddSecondFactorDialogWithPasswordCheck();
else this.showAddSecondFactorDialog();
				},
				icon: Icons.Add,
				size: ButtonSize.Compact
			}
		};
		return [
			mithril_default(".h4.mt-l", lang.get("secondFactorAuthentication_label")),
			mithril_default(Table, secondFactorTableAttrs),
			this.domainConfigProvider.getCurrentDomainConfig().firstPartyDomain ? [ifAllowedTutaLinks(locator.logins, InfoLink.SecondFactor, (link) => mithril_default(MoreInfoLink, {
				link,
				isSmall: true
			}))] : null
		];
	}
	async _updateSecondFactors() {
		const user = await this.user.getAsync();
		const factors = await locator.entityClient.loadAll(SecondFactorTypeRef, neverNull(user.auth).secondFactors);
		const loginDomains = new Set();
		for (const f of factors) {
			const isU2F = f.type === SecondFactorType.u2f || f.type === SecondFactorType.webauthn;
			if (isU2F) {
				const loginDomain = appIdToLoginUrl(assertNotNull(f.u2f).appId, this.domainConfigProvider);
				loginDomains.add(loginDomain);
			}
		}
		this._2FALineAttrs = factors.map((f) => {
			const removeButtonAttrs = {
				title: "remove_action",
				click: () => {
					if (this.isDeactivated) Dialog.message("userAccountDeactivated_msg");
else if (this.askForPassword) this.removeSecondFactorWithPasswordCheck(f);
else this.removeSecondFactor(f);
				},
				icon: Icons.Cancel,
				size: ButtonSize.Compact
			};
			const factorName = this.formatSecondFactorName(f, loginDomains);
			const type = assertEnumValue(SecondFactorType, f.type);
			return {
				cells: [factorName, lang.get(SecondFactorTypeToNameTextId[type])],
				actionButtonAttrs: locator.logins.getUserController().isGlobalAdmin() ? removeButtonAttrs : null
			};
		});
		mithril_default.redraw();
	}
	formatSecondFactorName(factor, loginDomains) {
		const isU2F = factor.type === SecondFactorType.u2f || factor.type === SecondFactorType.webauthn;
		const requiresDomainDisambiguation = isU2F && loginDomains.size > 1;
		if (requiresDomainDisambiguation) {
			const prefix = factor.name.length > 0 ? " - " : "";
			const loginUrlString = appIdToLoginUrl(neverNull(factor.u2f).appId, this.domainConfigProvider);
			const loginDomain = new URL(loginUrlString).hostname;
			return factor.name + prefix + loginDomain;
		} else return factor.name;
	}
	showAddSecondFactorDialogWithPasswordCheck() {
		const dialog = showRequestPasswordDialog({
			action: async (passphrase) => {
				try {
					const token = await this.loginFacade.getVerifierToken(passphrase);
					this.showAddSecondFactorDialog(token);
				} catch (e) {
					if (e instanceof NotAuthorizedError) return lang.get("invalidPassword_msg");
else throw e;
				}
				dialog.close();
				return "";
			},
			cancel: {
				textId: "cancel_action",
				action: noOp
			}
		});
	}
	showAddSecondFactorDialog(token) {
		SecondFactorEditDialog.loadAndShow(locator.entityClient, this.user, token);
	}
	removeSecondFactorWithPasswordCheck(secondFactorToRemove) {
		const dialog = showRequestPasswordDialog({
			action: async (passphrase) => {
				let token = undefined;
				try {
					token = await this.loginFacade.getVerifierToken(passphrase);
				} catch (e) {
					if (e instanceof NotAuthorizedError) return lang.get("invalidPassword_msg");
else throw e;
				}
				this.removeSecondFactor(secondFactorToRemove, token);
				dialog.close();
				return "";
			},
			messageText: lang.get("confirmDeleteSecondFactor_msg"),
			cancel: {
				textId: "cancel_action",
				action: noOp
			}
		});
	}
	removeSecondFactor(secondFactorToRemove, token) {
		try {
			let options = undefined;
			if (token) options = { extraHeaders: { token } };
			showProgressDialog("pleaseWait_msg", locator.entityClient.erase(secondFactorToRemove, options));
		} catch (e) {
			if (e instanceof NotFoundError) console.log("could not delete second factor (already deleted)");
else throw e;
		}
	}
	entityEventReceived(update) {
		if (isUpdateForTypeRef(SecondFactorTypeRef, update)) return this._updateSecondFactors();
else return Promise.resolve();
	}
};

//#endregion
//#region src/common/settings/login/LoginSettingsViewer.ts
var import_stream$13 = __toESM(require_stream(), 1);
assertMainOrNode();
var LoginSettingsViewer = class {
	_mailAddress = (0, import_stream$13.default)(neverNull(locator.logins.getUserController().userGroupInfo.mailAddress));
	_stars = (0, import_stream$13.default)("***");
	_closedSessionsExpanded = (0, import_stream$13.default)(false);
	_sessions = [];
	_secondFactorsForm = new SecondFactorsEditForm(new LazyLoaded(() => Promise.resolve(locator.logins.getUserController().user)), locator.domainConfigProvider(), locator.loginFacade, true, false);
	_usageTestModel;
	credentialEncryptionMode = null;
	appLockMethod = null;
	constructor(credentialsProvider, mobileSystemFacade) {
		this.credentialsProvider = credentialsProvider;
		this.mobileSystemFacade = mobileSystemFacade;
		this._usageTestModel = locator.usageTestModel;
		this._updateSessions();
		this.updateAppLockData();
	}
	async updateAppLockData() {
		if (isDesktop()) this.credentialEncryptionMode = await this.credentialsProvider.getCredentialEncryptionMode();
else if (this.mobileSystemFacade) this.appLockMethod = await this.mobileSystemFacade.getAppLockMethod();
		mithril_default.redraw();
	}
	view() {
		const mailAddressAttrs = {
			label: "mailAddress_label",
			value: this._mailAddress(),
			oninput: this._mailAddress,
			isReadOnly: true
		};
		const changePasswordButtonAttrs = {
			title: "changePassword_label",
			click: () => showChangeOwnPasswordDialog(),
			icon: Icons.Edit,
			size: ButtonSize.Compact
		};
		const passwordAttrs = {
			label: "password_label",
			value: this._stars(),
			oninput: this._stars,
			isReadOnly: true,
			injectionsRight: () => mithril_default(IconButton, changePasswordButtonAttrs)
		};
		const recoveryCodeDropdownButtonAttrs = attachDropdown({
			mainButtonAttrs: {
				title: "edit_action",
				icon: Icons.Edit,
				size: ButtonSize.Compact
			},
			childAttrs: () => [locator.logins.getUserController().user.auth?.recoverCode ? {
				label: "show_action",
				click: () => showRecoverCodeDialogAfterPasswordVerification("get")
			} : null, {
				label: neverNull(locator.logins.getUserController().user.auth).recoverCode ? "update_action" : "setUp_action",
				click: () => showRecoverCodeDialogAfterPasswordVerification("create")
			}],
			showDropdown: () => true
		});
		const recoveryCodeFieldAttrs = {
			label: "recoveryCode_label",
			helpLabel: () => {
				return ifAllowedTutaLinks(locator.logins, InfoLink.RecoverCode, (link) => [mithril_default(MoreInfoLink, { link })]);
			},
			value: this._stars(),
			oninput: this._stars,
			isReadOnly: true,
			injectionsRight: () => mithril_default(IconButton, recoveryCodeDropdownButtonAttrs)
		};
		const usageDataOptInAttrs = {
			label: "userUsageDataOptIn_label",
			items: [
				{
					name: lang.get("activated_label"),
					value: true
				},
				{
					name: lang.get("deactivated_label"),
					value: false
				},
				{
					name: lang.get("undecided_label"),
					value: null,
					selectable: false
				}
			],
			selectedValue: locator.logins.getUserController().userSettingsGroupRoot.usageDataOptedIn,
			selectionChangedHandler: (v) => {
				this._usageTestModel.setOptInDecision(assertNotNull(v));
			},
			helpLabel: () => {
				return ifAllowedTutaLinks(locator.logins, InfoLink.Usage, (link) => [mithril_default("span", lang.get("userUsageDataOptInInfo_msg") + " "), mithril_default(MoreInfoLink, { link })]);
			},
			dropdownWidth: 250
		};
		if (locator.logins.isUserLoggedIn()) {
			const user = locator.logins.getUserController();
			return mithril_default("", [mithril_default("#user-settings.fill-absolute.scroll.plr-l.pb-xl", [
				mithril_default(".h4.mt-l", lang.get("loginCredentials_label")),
				mithril_default(TextField, mailAddressAttrs),
				mithril_default(TextField, passwordAttrs),
				user.isGlobalAdmin() ? mithril_default(TextField, recoveryCodeFieldAttrs) : null,
				this.renderAppLockField(),
				mithril_default(this._secondFactorsForm),
				mithril_default(".h4.mt-l", lang.get("activeSessions_label")),
				this._renderActiveSessions(),
				mithril_default(".small", lang.get("sessionsInfo_msg")),
				mithril_default(".flex-space-between.items-center.mt-l.mb-s", [mithril_default(".h4", lang.get("closedSessions_label")), mithril_default(ExpanderButton, {
					label: "show_action",
					expanded: this._closedSessionsExpanded(),
					onExpandedChange: this._closedSessionsExpanded,
					showWarning: false
				})]),
				mithril_default(ExpanderPanel, { expanded: this._closedSessionsExpanded() }, this._renderClosedSessions()),
				mithril_default(".small", lang.get("sessionsWillBeDeleted_msg")),
				mithril_default(".small", lang.get("sessionsInfo_msg")),
				this._usageTestModel.isCustomerOptedOut() ? null : mithril_default("", [mithril_default(".h4.mt-l", lang.get("usageData_label")), mithril_default(DropDownSelector, usageDataOptInAttrs)])
			])]);
		} else return null;
	}
	renderAppLockField() {
		const mobileSystemFacade = this.mobileSystemFacade;
		if (mobileSystemFacade) {
			const onEdit = async () => {
				const { showAppLockMethodDialog } = await import("./SelectAppLockMethodDialog2-chunk.js");
				await showAppLockMethodDialog(mobileSystemFacade);
				await this.updateAppLockData();
			};
			return mithril_default(TextField, {
				label: "credentialsEncryptionMode_label",
				value: this.appLockMethodName(this.appLockMethod ?? AppLockMethod.None),
				isReadOnly: true,
				injectionsRight: () => mithril_default(IconButton, {
					title: "edit_action",
					icon: Icons.Edit,
					click: () => onEdit()
				})
			});
		} else if (isDesktop()) {
			const usedMode = this.credentialEncryptionMode ?? CredentialEncryptionMode.DEVICE_LOCK;
			return mithril_default(TextField, {
				label: "credentialsEncryptionMode_label",
				value: this.credentialsEncryptionModeName(usedMode),
				isReadOnly: true,
				injectionsRight: () => mithril_default(IconButton, {
					title: "edit_action",
					icon: Icons.Edit,
					click: () => showCredentialsEncryptionModeDialog(this.credentialsProvider).then(() => this.updateAppLockData())
				})
			});
		}
	}
	async _updateSessions() {
		const sessions = await locator.entityClient.loadAll(SessionTypeRef, neverNull(locator.logins.getUserController().user.auth).sessions);
		sessions.sort((s1, s2) => s2.lastAccessTime.getTime() - s1.lastAccessTime.getTime());
		this._sessions = sessions;
		mithril_default.redraw();
	}
	_renderActiveSessions() {
		return mithril_default(Table, {
			columnHeading: ["client_label"],
			columnWidths: [ColumnWidth.Largest],
			showActionButtonColumn: true,
			lines: this._sessions.filter((session) => session.state === SessionState.SESSION_STATE_ACTIVE).map((session) => {
				const thisSession = elementIdPart(locator.logins.getUserController().sessionId) === getElementId(session);
				return {
					cells: () => [{
						main: thisSession ? lang.get("thisClient_label") : session.clientIdentifier,
						info: [lang.get("lastAccessWithTime_label", { "{time}": formatDateTimeFromYesterdayOn(session.lastAccessTime) }), session.loginIpAddress ? session.loginIpAddress : ""],
						click: () => this.showActiveSessionInfoDialog(session, thisSession)
					}],
					actionButtonAttrs: thisSession ? null : {
						title: "closeSession_action",
						click: () => {
							this._closeSession(session);
						},
						icon: Icons.Cancel,
						size: ButtonSize.Compact
					}
				};
			})
		});
	}
	showActiveSessionInfoDialog(session, isThisSession) {
		const actionDialogProperties = {
			title: "details_label",
			child: { view: () => {
				return [
					mithril_default(TextField, {
						label: "client_label",
						value: isThisSession ? lang.get("thisClient_label") : session.clientIdentifier,
						isReadOnly: true
					}),
					mithril_default(TextField, {
						label: "lastAccess_label",
						value: `${formatDateTimeFromYesterdayOn(session.lastAccessTime)}`,
						isReadOnly: true
					}),
					mithril_default(TextField, {
						label: "IpAddress_label",
						value: session.loginIpAddress ? session.loginIpAddress : "",
						isReadOnly: true
					})
				];
			} },
			okAction: null,
			allowCancel: true,
			allowOkWithReturn: false,
			cancelActionTextId: "close_alt"
		};
		Dialog.showActionDialog(actionDialogProperties);
	}
	_closeSession(session) {
		locator.entityClient.erase(session).catch(ofClass(NotFoundError, () => {
			console.log(`session ${JSON.stringify(session._id)} already deleted`);
		}));
	}
	async entityEventsReceived(updates) {
		for (const update of updates) {
			if (isUpdateForTypeRef(SessionTypeRef, update)) await this._updateSessions();
else if (isUpdateForTypeRef(CustomerPropertiesTypeRef, update) || isUpdateForTypeRef(UserSettingsGroupRootTypeRef, update)) mithril_default.redraw();
			await this._secondFactorsForm.entityEventReceived(update);
		}
	}
	credentialsEncryptionModeName(credentialsEncryptionMode) {
		const mapping = {
			[CredentialEncryptionMode.DEVICE_LOCK]: "credentialsEncryptionModeDeviceLock_label",
			[CredentialEncryptionMode.SYSTEM_PASSWORD]: "credentialsEncryptionModeDeviceCredentials_label",
			[CredentialEncryptionMode.BIOMETRICS]: "credentialsEncryptionModeBiometrics_label",
			[CredentialEncryptionMode.APP_PASSWORD]: "credentialsEncryptionModeAppPassword_label"
		};
		return lang.get(mapping[credentialsEncryptionMode]);
	}
	appLockMethodName(appLockMethod) {
		const mapping = {
			[AppLockMethod.None]: "credentialsEncryptionModeDeviceLock_label",
			[AppLockMethod.SystemPassOrBiometrics]: "credentialsEncryptionModeDeviceCredentials_label",
			[AppLockMethod.Biometrics]: "credentialsEncryptionModeBiometrics_label"
		};
		return lang.get(mapping[appLockMethod]);
	}
	_renderClosedSessions() {
		const lines = this._sessions.filter((session) => session.state !== SessionState.SESSION_STATE_ACTIVE).map((session) => {
			return { cells: [
				session.clientIdentifier,
				formatDateTimeFromYesterdayOn(session.lastAccessTime),
				session.loginIpAddress ? session.loginIpAddress : ""
			] };
		});
		return mithril_default(Table, {
			columnHeading: [
				"client_label",
				"lastAccess_label",
				"IpAddress_label"
			],
			columnWidths: [
				ColumnWidth.Small,
				ColumnWidth.Largest,
				ColumnWidth.Small
			],
			showActionButtonColumn: true,
			lines
		});
	}
};

//#endregion
//#region src/mail-app/settings/LoadingUtils.ts
var GroupData = class {
	groupId;
	displayName;
	constructor(groupId, displayName) {
		this.groupId = groupId;
		this.displayName = displayName;
	}
};
function loadGroupDisplayName(groupId) {
	return locator.entityClient.load(GroupTypeRef, groupId).then((group) => {
		if (group.user && group.type !== GroupType.User) return locator.entityClient.load(UserTypeRef, group.user).then((user) => {
			return locator.entityClient.load(GroupInfoTypeRef, user.userGroup.groupInfo);
		});
else return locator.entityClient.load(GroupInfoTypeRef, group.groupInfo);
	}).then((groupInfo) => {
		return getGroupInfoDisplayName(groupInfo);
	});
}
async function loadEnabledTeamMailGroups(customer) {
	const infos = await locator.entityClient.loadAll(GroupInfoTypeRef, customer.teamGroups);
	return infos.filter((teamGroupInfo) => {
		if (teamGroupInfo.deleted) return false;
else return locator.entityClient.load(GroupTypeRef, teamGroupInfo.group).then((teamGroup) => teamGroup.type === GroupType.Mail);
	}).map((mailTeamGroupInfo) => new GroupData(mailTeamGroupInfo.group, getGroupInfoDisplayName(mailTeamGroupInfo)));
}
async function loadEnabledUserMailGroups(customer) {
	const groupInfos = await locator.entityClient.loadAll(GroupInfoTypeRef, customer.userGroups);
	return pMap(groupInfos.filter((g) => !g.deleted), async (userGroupInfo) => {
		const userGroup = await locator.entityClient.load(GroupTypeRef, userGroupInfo.group);
		const user = await locator.entityClient.load(UserTypeRef, neverNull(userGroup.user));
		return new GroupData(getUserGroupMemberships(user, GroupType.Mail)[0].group, getGroupInfoDisplayName(userGroupInfo));
	});
}

//#endregion
//#region src/mail-app/settings/DomainDnsStatus.ts
assertMainOrNode();
var DomainDnsStatus = class {
	status;
	domain;
	constructor(cleanDomainName, customerId) {
		this.domain = cleanDomainName;
		this.status = new LazyLoaded(() => {
			let data = createCustomDomainCheckGetIn({
				domain: cleanDomainName,
				customer: customerId ?? null
			});
			return locator.serviceExecutor.get(CustomDomainCheckService, data);
		});
	}
	getLoadedCustomDomainCheckGetOut() {
		return this.status.getLoaded();
	}
	/**
	* Only checks for the required records (MX and spf) to be fine.
	* We have this less strict check because one can already use the custom domain (with limitations) even if certain records like dmarc are not yet set properly.
	* We want to allow finishing the dialogs succesfully even if just these basic check pass.
	* @returns {boolean} true if records are fine.
	*/
	areRecordsFine() {
		if (!this.status.isLoaded() || this.status.getLoaded().checkResult !== CustomDomainCheckResult.CUSTOM_DOMAIN_CHECK_RESULT_OK) return false;
		const requiredMissingRecords = this.status.getLoaded().missingRecords.filter((r) => r.type === DnsRecordType.DNS_RECORD_TYPE_MX || r.type === DnsRecordType.DNS_RECORD_TYPE_TXT_SPF);
		return !requiredMissingRecords.length;
	}
	/**
	* Checks that ALL records are fine. Even the ones that are only recommended.
	* We need this check on top of areRecordsFine() because we want to display if some records are not yet set correctly even if the domain can already be used.
	* @returns {boolean} true if all records are fine.
	*/
	areAllRecordsFine() {
		return this.status.isLoaded() && this.status.getLoaded().checkResult === CustomDomainCheckResult.CUSTOM_DOMAIN_CHECK_RESULT_OK && this.status.getLoaded().missingRecords.length === 0 && this.status.getLoaded().invalidRecords.length === 0;
	}
	getDnsStatusInfo() {
		if (this.status.isLoaded()) {
			let result = this.status.getLoaded();
			if (result.checkResult === CustomDomainCheckResult.CUSTOM_DOMAIN_CHECK_RESULT_OK) {
				let mxOk = !result.missingRecords.some((r) => r.type === DnsRecordType.DNS_RECORD_TYPE_MX) && !result.invalidRecords.some((r) => r.type === DnsRecordType.DNS_RECORD_TYPE_MX);
				let spfOk = !result.missingRecords.some((r) => r.type === DnsRecordType.DNS_RECORD_TYPE_TXT_SPF) && !result.invalidRecords.some((r) => r.type === DnsRecordType.DNS_RECORD_TYPE_TXT_SPF);
				let dkimOk = !result.missingRecords.some((r) => r.type === DnsRecordType.DNS_RECORD_TYPE_CNAME_DKIM) && !result.invalidRecords.some((r) => r.type === DnsRecordType.DNS_RECORD_TYPE_CNAME_DKIM);
				let mtaStsOk = !result.missingRecords.some((r) => r.type === DnsRecordType.DNS_RECORD_TYPE_CNAME_MTA_STS) && !result.invalidRecords.some((r) => r.type === DnsRecordType.DNS_RECORD_TYPE_CNAME_MTA_STS);
				let dmarcWarn = result.missingRecords.find((r) => r.type === DnsRecordType.DNS_RECORD_TYPE_TXT_DMARC);
				let dmarcBad = result.invalidRecords.find((r) => r.type === DnsRecordType.DNS_RECORD_TYPE_TXT_DMARC);
				return "MX " + (mxOk ? DnsRecordValidation.OK : DnsRecordValidation.BAD) + ", SPF " + (spfOk ? DnsRecordValidation.OK : DnsRecordValidation.BAD) + ", MTA-STS " + (mtaStsOk ? DnsRecordValidation.OK : DnsRecordValidation.BAD) + ", DKIM " + (dkimOk ? DnsRecordValidation.OK : DnsRecordValidation.BAD) + ", DMARC " + (dmarcBad || dmarcWarn ? DnsRecordValidation.BAD : DnsRecordValidation.OK);
			} else return "DNS " + DnsRecordValidation.BAD;
		} else return lang.get("loading_msg");
	}
	loadCurrentStatus() {
		if (this.status.isLoaded()) return this.status.reload().then(noOp);
else return this.status.getAsync().then(noOp);
	}
};

//#endregion
//#region src/mail-app/settings/emaildomain/DnsRecordTable.ts
var ActualDnsRecordType = function(ActualDnsRecordType$1) {
	ActualDnsRecordType$1["MX"] = "MX";
	ActualDnsRecordType$1["TXT"] = "TXT";
	ActualDnsRecordType$1["CNAME"] = "CNAME";
	return ActualDnsRecordType$1;
}(ActualDnsRecordType || {});
const DnsRecordTable = Object.freeze({
	[DnsRecordType.DNS_RECORD_TYPE_MX]: ActualDnsRecordType.MX,
	[DnsRecordType.DNS_RECORD_TYPE_TXT_SPF]: ActualDnsRecordType.TXT,
	[DnsRecordType.DNS_RECORD_TYPE_CNAME_DKIM]: ActualDnsRecordType.CNAME,
	[DnsRecordType.DNS_RECORD_TYPE_TXT_DMARC]: ActualDnsRecordType.TXT,
	[DnsRecordType.DNS_RECORD_TYPE_CNAME_MTA_STS]: ActualDnsRecordType.CNAME,
	[DnsRecordType.DNS_RECORD_TYPE_TXT_VERIFY]: ActualDnsRecordType.TXT
});
function createDnsRecordTable(records) {
	return mithril_default(Table, {
		columnHeading: ["type_label", "dnsRecordHostOrName_label"],
		columnWidths: [ColumnWidth.Small, ColumnWidth.Largest],
		showActionButtonColumn: false,
		lines: records.map((r) => ({ cells: () => [{ main: DnsRecordTable[r.type] }, {
			main: r.subdomain ? r.subdomain : "@",
			info: [r.value]
		}] }))
	});
}

//#endregion
//#region src/mail-app/settings/emaildomain/VerifyDnsRecordsPage.ts
assertMainOrNode();
var VerifyDnsRecordsPage = class {
	oncreate(vnode) {
		const data = vnode.attrs.data;
		data.domainStatus = new DomainDnsStatus(data.domain());
		_updateDnsStatus(data.domainStatus);
	}
	view(vnode) {
		const a = vnode.attrs;
		return [
			mithril_default("h4.mt-l.text-center", lang.get("verifyDNSRecords_title")),
			mithril_default("p", lang.get("verifyDNSRecords_msg")),
			a.data.domainStatus.status.isLoaded() ? mithril_default("", [renderCheckResult(a.data.domainStatus), mithril_default(".flex-center.full-width.pt-l.mb-l", mithril_default(LoginButton, {
				label: "finish_action",
				class: "small-login-button",
				onclick: () => this._finishDialog(a.data, downcast(vnode)?.dom ?? null)
			}))]) : mithril_default("", [lang.get("loadingDNSRecords_msg"), mithril_default(".flex-center.full-width.pt-l.mb-l", mithril_default(Button, {
				type: ButtonType.Secondary,
				label: "refresh_action",
				click: () => _updateDnsStatus(a.data.domainStatus)
			}))])
		];
	}
	_finishDialog(data, dom) {
		const leaveUnfinishedDialogAttrs = {
			title: "quitSetup_title",
			child: { view: () => {
				return [mithril_default("p", lang.get("quitDNSSetup_msg"))];
			} },
			okAction: (dialog) => {
				dialog.close();
				emitWizardEvent(dom, WizardEventType.CLOSE_DIALOG);
			}
		};
		return _updateDnsStatus(data.domainStatus).then(() => {
			if (data.domainStatus.areRecordsFine()) emitWizardEvent(dom, WizardEventType.SHOW_NEXT_PAGE);
else Dialog.showActionDialog(leaveUnfinishedDialogAttrs);
		});
	}
};
function _updateDnsStatus(domainStatus) {
	return domainStatus.loadCurrentStatus().then(() => {
		mithril_default.redraw();
	});
}
function _getDisplayableRecordValue(record) {
	if (!record.value.endsWith(".") && (record.type === DnsRecordType.DNS_RECORD_TYPE_MX || record.type === DnsRecordType.DNS_RECORD_TYPE_CNAME_DKIM || record.type === DnsRecordType.DNS_RECORD_TYPE_CNAME_MTA_STS)) return record.value + ".";
	return record.value;
}
function createDnsRecordTableN(records, refreshButtonAttrs) {
	return mithril_default(Table, {
		columnHeading: [
			"type_label",
			"dnsRecordHostOrName_label",
			"dnsRecordValueOrPointsTo_label"
		],
		addButtonAttrs: refreshButtonAttrs,
		columnWidths: [
			ColumnWidth.Small,
			ColumnWidth.Small,
			ColumnWidth.Largest
		],
		showActionButtonColumn: true,
		lines: records.map((r) => {
			return { cells: () => [
				{ main: DnsRecordTable[r.record.type] },
				{ main: r.record.subdomain ? r.record.subdomain : "@" },
				{
					main: r.record.value,
					info: r.helpInfo
				}
			] };
		})
	});
}
function renderCheckResult(domainStatus, hideRefreshButton = false) {
	const checkReturn = domainStatus.getLoadedCustomDomainCheckGetOut();
	const { requiredRecords, missingRecords, invalidRecords } = checkReturn;
	const checkResult = assertEnumValue(CustomDomainCheckResult, checkReturn.checkResult);
	if (checkResult === CustomDomainCheckResult.CUSTOM_DOMAIN_CHECK_RESULT_OK) {
		const validatedRecords = requiredRecords.map((record) => {
			const displayableRecordValue = _getDisplayableRecordValue(record);
			const helpInfo = [];
			let validatedRecord = null;
			for (let missingRecord of findDnsRecordInList(record, missingRecords)) {
				validatedRecord = record;
				if (record.type === DnsRecordType.DNS_RECORD_TYPE_TXT_DMARC) helpInfo.push(`${DnsRecordValidation.BAD} ${lang.get("recommendedDNSValue_label")}: ${displayableRecordValue}`);
else helpInfo.push(`${DnsRecordValidation.BAD} ${lang.get("addDNSValue_label")}: ${displayableRecordValue}`);
			}
			for (let invalidRecord of findDnsRecordInList(record, invalidRecords)) {
				validatedRecord = record;
				helpInfo.push(`${DnsRecordValidation.BAD} ${lang.get("removeDNSValue_label")}: ${invalidRecord.value}`);
			}
			if (validatedRecord == null) {
				validatedRecord = record;
				helpInfo.push(`${DnsRecordValidation.OK} ${lang.get("correctDNSValue_label")}`);
			}
			validatedRecord.value = displayableRecordValue;
			return {
				record: validatedRecord,
				helpInfo
			};
		});
		return [
			mithril_default(".mt-m.mb-s", lang.get("setDnsRecords_msg")),
			createDnsRecordTableN(validatedRecords, hideRefreshButton ? null : {
				title: "refresh_action",
				icon: BootIcons.Progress,
				size: ButtonSize.Compact,
				click: () => _updateDnsStatus(domainStatus)
			}),
			mithril_default(MoreInfoLink, {
				link: InfoLink.DomainInfo,
				class: "mt-m",
				isSmall: true
			})
		];
	} else {
		const errorMessageMap = {
			[CustomDomainCheckResult.CUSTOM_DOMAIN_CHECK_RESULT_OK]: "emptyString_msg",
			[CustomDomainCheckResult.CUSTOM_DOMAIN_CHECK_RESULT_DNS_LOOKUP_FAILED]: "customDomainErrorDnsLookupFailure_msg",
			[CustomDomainCheckResult.CUSTOM_DOMAIN_CHECK_RESULT_DOMAIN_NOT_FOUND]: "customDomainErrorDomainNotFound_msg",
			[CustomDomainCheckResult.CUSTOM_DOMAIN_CHECK_RESULT_NAMESERVER_NOT_FOUND]: "customDomainErrorNameserverNotFound_msg"
		};
		return lang.get(errorMessageMap[checkResult]);
	}
}
function findDnsRecordInList(record, recordList) {
	return recordList.filter((r) => r.type === record.type && r.subdomain === record.subdomain);
}
var VerifyDnsRecordsPageAttrs = class {
	data;
	constructor(domainData) {
		this.data = domainData;
	}
	headerTitle() {
		return "domainSetup_title";
	}
	nextAction(showErrorDialog) {
		return Promise.resolve(true);
	}
	isSkipAvailable() {
		return false;
	}
	isEnabled() {
		return true;
	}
};

//#endregion
//#region src/mail-app/settings/CheckDomainDnsStatusDialog.ts
assertMainOrNode();
function showDnsCheckDialog(domainStatus) {
	let dialog = Dialog.showActionDialog({
		type: DialogType.EditLarger,
		title: "checkDnsRecords_action",
		okActionTextId: "checkAgain_action",
		cancelActionTextId: "close_alt",
		child: () => renderCheckResult(domainStatus, true),
		okAction: () => {
			domainStatus.loadCurrentStatus().then(() => {
				if (domainStatus.areRecordsFine()) dialog.close();
else mithril_default.redraw();
			});
		}
	});
}

//#endregion
//#region src/mail-app/settings/RejectedSendersInfoDialog.ts
function showRejectedSendersInfoDialog(rejectedSender) {
	const actionDialogProperties = {
		title: "details_label",
		child: { view: () => {
			return [
				mithril_default(TextField, {
					label: "emailSender_label",
					value: rejectedSender.senderMailAddress,
					isReadOnly: true
				}),
				mithril_default(TextField, {
					label: "mailServer_label",
					value: `${rejectedSender.senderHostname} (${rejectedSender.senderIp})`,
					isReadOnly: true
				}),
				mithril_default(TextField, {
					label: "emailRecipient_label",
					value: rejectedSender.recipientMailAddress,
					isReadOnly: true
				}),
				mithril_default(TextField, {
					label: "rejectReason_label",
					value: rejectedSender.reason,
					isReadOnly: true
				})
			];
		} },
		okAction: null,
		allowCancel: true,
		allowOkWithReturn: false,
		cancelActionTextId: "close_alt"
	};
	Dialog.showActionDialog(actionDialogProperties);
}

//#endregion
//#region src/common/settings/mailaddress/AddAliasDialog.ts
const FAILURE_USER_DISABLED = "mailaddressaliasservice.group_disabled";
function showAddAliasDialog(model, isNewPaidPlan) {
	model.getAvailableDomains().then((domains) => {
		const hasCustomDomains = domains.some((domain) => !TUTA_MAIL_ADDRESS_DOMAINS.includes(domain.domain));
		if (model.aliasCount && filterInt(model.aliasCount.usedAliases) >= filterInt(model.aliasCount.totalAliases)) {
			if (!(isNewPaidPlan && hasCustomDomains)) {
				model.handleTooManyAliases().catch(ofClass(UpgradeRequiredError, (e) => showPlanUpgradeRequiredDialog(e.plans, e.message)));
				return;
			}
		}
		let isVerificationBusy = false;
		let mailAddress;
		let formErrorId = "mailAddressNeutral_msg";
		let formDomain = getFirstOrThrow(domains);
		if (!isNewPaidPlan && !hasCustomDomains) formDomain = domains.find((domain) => domain.domain === DEFAULT_FREE_MAIL_ADDRESS_SIGNUP_DOMAIN) ?? formDomain;
		let senderName = model.defaultSenderName();
		const addEmailAliasOkAction = (dialog) => {
			if (isVerificationBusy) return;
			if (formErrorId) {
				Dialog.message(formErrorId);
				return;
			}
			addAlias(model, mailAddress, senderName);
			dialog.close();
		};
		Dialog.showActionDialog({
			title: "addEmailAlias_label",
			child: { view: () => {
				return [
					mithril_default(SelectMailAddressForm, {
						selectedDomain: formDomain,
						availableDomains: domains,
						onValidationResult: (email, validationResult) => {
							if (validationResult.isValid) {
								mailAddress = email;
								formErrorId = null;
							} else formErrorId = validationResult.errorId;
						},
						onBusyStateChanged: (isBusy) => isVerificationBusy = isBusy,
						onDomainChanged: (domain) => {
							if (!domain.isPaid || isNewPaidPlan) formDomain = domain;
else Dialog.confirm(lang.makeTranslation("confirm_msg", `${lang.get("paidEmailDomainLegacy_msg")}\n${lang.get("changePaidPlan_msg")}`)).then(async (confirmed) => {
								if (confirmed) isNewPaidPlan = await showPlanUpgradeRequiredDialog(NewPaidPlans);
							});
						}
					}),
					mithril_default(ExpanderPanel, { expanded: TUTA_MAIL_ADDRESS_DOMAINS.includes(formDomain.domain) }, mithril_default(".pt", lang.get("permanentAliasWarning_msg"))),
					mithril_default(TextField, {
						label: "mailName_label",
						value: senderName,
						autocompleteAs: Autocomplete.username,
						oninput: (name) => senderName = name
					})
				];
			} },
			allowOkWithReturn: true,
			okAction: addEmailAliasOkAction
		});
	});
}
async function addAlias(model, alias, senderName) {
	try {
		await showProgressDialog("pleaseWait_msg", model.addAlias(alias, senderName));
	} catch (error) {
		if (error instanceof InvalidDataError) Dialog.message("mailAddressNA_msg");
else if (error instanceof PreconditionFailedError) {
			let errorMsg = error.toString();
			if (error.data === FAILURE_USER_DISABLED) errorMsg = lang.get("addAliasUserDisabled_msg");
			return Dialog.message(lang.makeTranslation("confirm_msg", errorMsg));
		} else if (error instanceof UpgradeRequiredError) showPlanUpgradeRequiredDialog(error.plans, error.message);
else throw error;
	}
}

//#endregion
//#region src/common/settings/mailaddress/MailAddressTable.ts
assertMainOrNode();
var MailAddressTable = class {
	view({ attrs }) {
		const { model } = attrs;
		if (attrs.expanded) model.init();
		const addAliasButtonAttrs = model.userCanModifyAliases() ? {
			title: "addEmailAlias_label",
			click: () => this.onAddAlias(attrs),
			icon: Icons.Add,
			size: ButtonSize.Compact
		} : null;
		return [
			mithril_default(".flex-space-between.items-center.mt-l.mb-s", [mithril_default(".h4", lang.get("mailAddresses_label")), mithril_default(ExpanderButton, {
				label: "show_action",
				expanded: attrs.expanded,
				onExpandedChange: (v) => {
					attrs.onExpanded(v);
				}
			})]),
			mithril_default(ExpanderPanel, { expanded: attrs.expanded }, mithril_default(Table, {
				columnHeading: ["mailAddress_label", "state_label"],
				columnWidths: [ColumnWidth.Largest, ColumnWidth.Small],
				showActionButtonColumn: true,
				addButtonAttrs: addAliasButtonAttrs,
				lines: getAliasLineAttrs(attrs)
			})),
			model.aliasCount ? [mithril_default(".mt-s", lang.get("amountUsedAndActivatedOf_label", {
				"{used}": model.aliasCount.usedAliases,
				"{active}": model.aliasCount.enabledAliases,
				"{totalAmount}": model.aliasCount.totalAliases
			})), mithril_default(".small.mt-s", lang.get(model.aliasLimitIncludesCustomDomains() ? "mailAddressInfoLegacy_msg" : "mailAddressInfo_msg"))] : null
		];
	}
	async onAddAlias(attrs) {
		const userController = locator.logins.getUserController();
		if (userController.isFreeAccount()) showNotAvailableForFreeDialog();
else {
			const isNewPaidPlan = await userController.isNewPaidPlan();
			showAddAliasDialog(attrs.model, isNewPaidPlan);
		}
	}
};
function setNameDropdownButton(model, addressInfo) {
	return {
		label: "setSenderName_action",
		click: () => showSenderNameChangeDialog(model, addressInfo)
	};
}
function addressDropdownButtons(attrs, addressInfo) {
	switch (addressInfo.status) {
		case AddressStatus.Primary: return [setNameDropdownButton(attrs.model, addressInfo)];
		case AddressStatus.Alias: {
			const buttons = [setNameDropdownButton(attrs.model, addressInfo)];
			if (attrs.model.userCanModifyAliases()) buttons.push({
				label: "deactivate_action",
				click: () => {
					switchAliasStatus(addressInfo, attrs);
				}
			});
			return buttons;
		}
		case AddressStatus.DisabledAlias: return attrs.model.userCanModifyAliases() ? [{
			label: "activate_action",
			click: () => {
				switchAliasStatus(addressInfo, attrs);
			}
		}] : [];
		case AddressStatus.Custom: {
			const buttons = [setNameDropdownButton(attrs.model, addressInfo)];
			if (attrs.model.userCanModifyAliases()) buttons.push({
				label: "delete_action",
				click: () => {
					switchAliasStatus(addressInfo, attrs);
				}
			});
			return buttons;
		}
	}
}
function statusLabel(addressInfo) {
	switch (addressInfo.status) {
		case AddressStatus.Primary: return lang.get("primaryMailAddress_label");
		case AddressStatus.Alias:
		case AddressStatus.Custom: return lang.get("activated_label");
		case AddressStatus.DisabledAlias: return lang.get("deactivated_label");
	}
}
function getAliasLineAttrs(attrs) {
	return attrs.model.addresses().map((addressInfo) => {
		const dropdownButtons = addressDropdownButtons(attrs, addressInfo);
		const actionButtonAttrs = dropdownButtons.length === 0 ? null : attachDropdown({
			mainButtonAttrs: {
				title: "edit_action",
				icon: Icons.More,
				size: ButtonSize.Compact
			},
			showDropdown: () => true,
			width: 250,
			childAttrs: () => dropdownButtons
		});
		return {
			cells: () => [{
				main: addressInfo.address,
				info: [addressInfo.name]
			}, { main: statusLabel(addressInfo) }],
			actionButtonAttrs
		};
	});
}
async function switchAliasStatus(alias, attrs) {
	const deactivateOrDeleteAlias = alias.status !== AddressStatus.DisabledAlias;
	if (deactivateOrDeleteAlias) {
		const message = alias.status === AddressStatus.Custom ? "deleteAlias_msg" : "deactivateAlias_msg";
		const confirmed = await Dialog.confirm(lang.getTranslation(message, { "{1}": alias.address }));
		if (!confirmed) return;
	}
	const updateModel = attrs.model.setAliasStatus(alias.address, !deactivateOrDeleteAlias).catch(ofClass(LimitReachedError, () => attrs.model.handleTooManyAliases())).catch(ofClass(UpgradeRequiredError, (e) => showPlanUpgradeRequiredDialog(e.plans, e.message)));
	await showProgressDialog("pleaseWait_msg", updateModel);
}
function showSenderNameChangeDialog(model, alias) {
	Dialog.showTextInputDialog({
		title: "edit_action",
		label: "mailName_label",
		infoMsgId: lang.makeTranslation("alias_addr", alias.address),
		defaultValue: alias.name
	}).then((newName) => showProgressDialog("pleaseWait_msg", model.setAliasName(alias.address, newName)));
}

//#endregion
//#region src/mail-app/settings/emaildomain/AddEmailAddressesPage.ts
assertMainOrNode();
var AddEmailAddressesPage = class {
	oncreate({ attrs }) {
		attrs.data.editAliasFormAttrs.model.init();
	}
	onremove({ attrs }) {}
	view(vnode) {
		const a = vnode.attrs;
		const aliasesTableAttrs = {
			columnWidths: [ColumnWidth.Largest],
			showActionButtonColumn: true,
			addButtonAttrs: null,
			lines: getAliasLineAttrs(a.data.editAliasFormAttrs).map((row) => {
				return {
					actionButtonAttrs: row.actionButtonAttrs ?? null,
					cells: row.cells
				};
			})
		};
		let domainInfo = {
			domain: a.data.domain(),
			isPaid: false
		};
		const mailFormAttrs = {
			selectedDomain: domainInfo,
			availableDomains: [domainInfo],
			onValidationResult: (email, validationResult) => {
				if (validationResult.isValid) {
					a.mailAddress = email;
					a.errorMessageId = null;
				} else a.errorMessageId = validationResult.errorId;
			},
			onDomainChanged: (domain) => domainInfo = domain,
			onBusyStateChanged: (isBusy) => a.isMailVerificationBusy = isBusy,
			injectionsRightButtonAttrs: {
				title: "addEmailAlias_label",
				icon: Icons.Add,
				size: ButtonSize.Compact,
				click: () => vnode.attrs.addAliasFromInput().then(() => {
					mithril_default.redraw();
				})
			}
		};
		return mithril_default("", [
			mithril_default("h4.mt-l.text-center", lang.get("addCustomDomainAddresses_title")),
			mithril_default(".mt.mb", lang.get("addCustomDomainAddAdresses_msg")),
			mithril_default(SelectMailAddressForm, mailFormAttrs),
			locator.logins.getUserController().userGroupInfo.mailAddressAliases.length ? mithril_default(Table, aliasesTableAttrs) : null,
			mithril_default(".flex-center.full-width.pt-l.mb-l", mithril_default(LoginButton, {
				label: "next_action",
				class: "small-login-button",
				onclick: () => emitWizardEvent(vnode.dom, WizardEventType.SHOW_NEXT_PAGE)
			}))
		]);
	}
};
var AddEmailAddressesPageAttrs = class {
	data;
	mailAddress;
	errorMessageId;
	isMailVerificationBusy;
	constructor(domainData) {
		this.data = domainData;
		this.mailAddress = "";
		this.errorMessageId = "mailAddressNeutral_msg";
		this.isMailVerificationBusy = false;
	}
	headerTitle() {
		return "domainSetup_title";
	}
	nextAction(showErrorDialog) {
		if (this.isMailVerificationBusy) return Promise.resolve(false);
		if (showErrorDialog && this.errorMessageId) return this.addAliasFromInput();
		const checkMailAddresses = Promise.resolve().then(() => {
			const hasAliases = locator.logins.getUserController().userGroupInfo.mailAddressAliases.some((alias) => alias.mailAddress.endsWith(`@${this.data.domain()}`));
			if (hasAliases) return true;
else return locator.entityClient.load(CustomerTypeRef, neverNull(locator.logins.getUserController().user.customer)).then((customer) => locator.entityClient.loadAll(GroupInfoTypeRef, customer.userGroups)).then((allUserGroupInfos) => {
				return allUserGroupInfos.some((u) => neverNull(u.mailAddress).endsWith("@" + this.data.domain()) || u.mailAddressAliases.some((a) => neverNull(a.mailAddress).endsWith("@" + this.data.domain())));
			});
		});
		return showProgressDialog("pleaseWait_msg", checkMailAddresses).then((nextAllowed) => {
			if (showErrorDialog && !nextAllowed) Dialog.message("enforceAliasSetup_msg");
			return nextAllowed;
		});
	}
	isSkipAvailable() {
		return true;
	}
	isEnabled() {
		return true;
	}
	/**
	* Try to add an alias from input field and return true if it succeeded
	*/
	async addAliasFromInput() {
		const error = this.errorMessageId;
		if (error) {
			await Dialog.message(error);
			return false;
		} else {
			const mailAddressTableModel = this.data.editAliasFormAttrs.model;
			try {
				await showProgressDialog(
					"pleaseWait_msg",
					// Using default sender name for now
					mailAddressTableModel.addAlias(this.mailAddress, mailAddressTableModel.defaultSenderName())
);
				return true;
			} catch (e) {
				if (e instanceof InvalidDataError) await Dialog.message("mailAddressNA_msg");
else if (e instanceof LimitReachedError) {} else if (e instanceof UpgradeRequiredError) await showPlanUpgradeRequiredDialog(e.plans, e.message);
else throw e;
				return false;
			}
		}
	}
};

//#endregion
//#region src/mail-app/settings/emaildomain/VerifyOwnershipPage.ts
assertMainOrNode();
let CustomDomainFailureReasons = function(CustomDomainFailureReasons$1) {
	CustomDomainFailureReasons$1["LIMIT_REACHED"] = "customdomainservice.limit_reached";
	CustomDomainFailureReasons$1["DOMAIN_IN_USE"] = "customdomainservice.domain_in_use";
	return CustomDomainFailureReasons$1;
}({});
var VerifyOwnershipPage = class {
	dom;
	oncreate(vnode) {
		this.dom = vnode.dom;
		const { data } = vnode.attrs;
		locator.customerFacade.getDomainValidationRecord(data.domain()).then((recordValue) => {
			data.expectedVerificationRecord.value = recordValue;
			mithril_default.redraw();
		});
	}
	view(vnode) {
		const a = vnode.attrs;
		return [
			mithril_default("h4.mt-l.text-center", lang.get("verifyDomainOwnership_title")),
			mithril_default("p", lang.get("verifyDomainOwnershipExplanation_msg", { "{domain}": a.data.domain() })),
			mithril_default("p", lang.get("verifyOwnershipTXTrecord_msg")),
			createDnsRecordTable([vnode.attrs.data.expectedVerificationRecord]),
			mithril_default(".flex-center.full-width.pt-l.mb-l", mithril_default(LoginButton, {
				label: "next_action",
				class: "small-login-button",
				onclick: () => emitWizardEvent(this.dom, WizardEventType.SHOW_NEXT_PAGE)
			}))
		];
	}
};
var VerifyOwnershipPageAttrs = class {
	data;
	constructor(domainData) {
		this.data = domainData;
	}
	headerTitle() {
		return "domainSetup_title";
	}
	nextAction(showErrorDialog = true) {
		return showProgressDialog("pleaseWait_msg", locator.customerFacade.addDomain(this.data.domain()).then((result) => {
			const validationResult = assertEnumValue(CustomDomainValidationResult, result.validationResult);
			if (validationResult === CustomDomainValidationResult.CUSTOM_DOMAIN_VALIDATION_RESULT_OK) return null;
else if (validationResult === CustomDomainValidationResult.CUSTOM_DOMAIN_VALIDATION_RESULT_DOMAIN_NOT_AVAILABLE) {
				let customDomainInfos = getCustomMailDomains(this.data.customerInfo);
				if (customDomainInfos.some((domainInfo) => domainInfo.domain === this.data.domain())) return null;
				return () => lang.get("customDomainErrorDomainNotAvailable_msg");
			} else {
				const errorMessageMap = {
					[CustomDomainValidationResult.CUSTOM_DOMAIN_VALIDATION_RESULT_OK]: "emptyString_msg",
					[CustomDomainValidationResult.CUSTOM_DOMAIN_VALIDATION_RESULT_DNS_LOOKUP_FAILED]: "customDomainErrorDnsLookupFailure_msg",
					[CustomDomainValidationResult.CUSTOM_DOMAIN_VALIDATION_RESULT_DOMAIN_NOT_FOUND]: "customDomainErrorDomainNotFound_msg",
					[CustomDomainValidationResult.CUSTOM_DOMAIN_VALIDATION_RESULT_NAMESERVER_NOT_FOUND]: "customDomainErrorNameserverNotFound_msg",
					[CustomDomainValidationResult.CUSTOM_DOMAIN_VALIDATION_RESULT_DOMAIN_NOT_AVAILABLE]: "customDomainErrorDomainNotAvailable_msg",
					[CustomDomainValidationResult.CUSTOM_DOMAIN_VALIDATION_RESULT_VALIDATION_FAILED]: "customDomainErrorValidationFailed_msg"
				};
				return lang.makeTranslation("error_msg", lang.get(errorMessageMap[validationResult]) + (result.invalidDnsRecords.length > 0 ? " " + lang.get("customDomainErrorOtherTxtRecords_msg") + "\n" + result.invalidDnsRecords.map((r) => r.value).join("\n") : ""));
			}
		})).then((message) => {
			if (message) return showErrorDialog ? Dialog.message(downcast(message)).then(() => false) : false;
			return true;
		}).catch(ofClass(PreconditionFailedError, async (e) => {
			if (e.data === CustomDomainFailureReasons.LIMIT_REACHED) {
				const nbrOfCustomDomains = this.data.customerInfo.domainInfos.filter((domainInfo) => domainInfo.whitelabelConfig == null).length;
				const plans = await getAvailableMatchingPlans(locator.serviceExecutor, (config) => {
					if (config.customDomainType in CustomDomainTypeCount) {
						const planDomains = CustomDomainTypeCount[config.customDomainType];
						return planDomains === -1 || planDomains > nbrOfCustomDomains;
					}
					return false;
				});
				if (isEmpty(plans)) Dialog.message("tooManyCustomDomains_msg");
else showPlanUpgradeRequiredDialog(plans, "moreCustomDomainsRequired_msg");
			} else Dialog.message(lang.makeTranslation("error_msg", e.toString()));
			return false;
		}));
	}
	isSkipAvailable() {
		return false;
	}
	isEnabled() {
		return true;
	}
};

//#endregion
//#region src/mail-app/settings/emaildomain/EnterDomainPage.ts
assertMainOrNode();
var EnterDomainPage = class {
	dom = null;
	oncreate(vnode) {
		this.dom = vnode.dom;
	}
	view(vnode) {
		return mithril_default("", [
			mithril_default("h4.mt-l.text-center", lang.get("enterCustomDomain_title")),
			mithril_default(".mt", lang.get("enterDomainIntroduction_msg")),
			mithril_default(".mt", lang.get("enterDomainGetReady_msg")),
			mithril_default(TextField, {
				label: "customDomain_label",
				autocapitalize: Autocapitalize.none,
				value: vnode.attrs.data.domain(),
				oninput: vnode.attrs.data.domain,
				helpLabel: () => {
					const domain = vnode.attrs.data.domain();
					const errorMsg = validateDomain(domain);
					if (errorMsg) return lang.get(errorMsg);
else return lang.get("enterDomainFieldHelp_label", { "{domain}": domain.toLocaleLowerCase().trim() });
				}
			}),
			mithril_default(".flex-center.full-width.pt-l.mb-l", mithril_default(LoginButton, {
				label: "next_action",
				class: "small-login-button",
				onclick: () => emitWizardEvent(this.dom, WizardEventType.SHOW_NEXT_PAGE)
			}))
		]);
	}
};
function validateDomain(domain) {
	let cleanDomainName = domain.toLocaleLowerCase().trim();
	if (!cleanDomainName.length) return "customDomainNeutral_msg";
	if (!isDomainName(cleanDomainName)) return "customDomainInvalid_msg";
else return null;
}
var EnterDomainPageAttrs = class {
	data;
	constructor(domainData) {
		this.data = domainData;
	}
	headerTitle() {
		return "domainSetup_title";
	}
	nextAction(showErrorDialog = true) {
		const errorMsg = validateDomain(this.data.domain());
		if (errorMsg) return showErrorDialog ? Dialog.message(errorMsg).then(() => false) : Promise.resolve(false);
else return Promise.resolve(true);
	}
	isSkipAvailable() {
		return false;
	}
	isEnabled() {
		return true;
	}
};

//#endregion
//#region src/mail-app/settings/emaildomain/AddDomainWizard.ts
var import_stream$12 = __toESM(require_stream(), 1);
assertMainOrNode();
function showAddDomainWizard(domain, customerInfo, mailAddressTableModel) {
	let mailAddressTableExpanded = false;
	const domainData = {
		domain: (0, import_stream$12.default)(domain),
		customerInfo,
		expectedVerificationRecord: createDnsRecord({
			subdomain: null,
			type: DnsRecordType.DNS_RECORD_TYPE_TXT_SPF,
			value: ""
		}),
		editAliasFormAttrs: {
			model: mailAddressTableModel,
			expanded: mailAddressTableExpanded,
			onExpanded: (newExpanded) => mailAddressTableExpanded = newExpanded
		},
		domainStatus: new DomainDnsStatus(domain)
	};
	const wizardPages = [
		wizardPageWrapper(EnterDomainPage, new EnterDomainPageAttrs(domainData)),
		wizardPageWrapper(VerifyOwnershipPage, new VerifyOwnershipPageAttrs(domainData)),
		wizardPageWrapper(AddEmailAddressesPage, new AddEmailAddressesPageAttrs(domainData)),
		wizardPageWrapper(VerifyDnsRecordsPage, new VerifyDnsRecordsPageAttrs(domainData))
	];
	return new Promise((resolve) => {
		const wizardBuilder = createWizardDialog(domainData, wizardPages, () => {
			mailAddressTableModel.dispose();
			resolve();
			return Promise.resolve();
		}, DialogType.EditLarge);
		const wizard = wizardBuilder.dialog;
		const wizardAttrs = wizardBuilder.attrs;
		wizard.show();
		if (domain.length) {
			wizardAttrs.goToNextPageOrCloseWizard();
			wizardAttrs.goToNextPageOrCloseWizard();
			if (wizardAttrs.currentPage) wizardAttrs.currentPage.attrs.nextAction(false).then((ready) => {
				if (ready) wizardAttrs.goToNextPageOrCloseWizard();
			});
		}
	});
}

//#endregion
//#region src/common/settings/ExpandableTable.ts
var import_stream$11 = __toESM(require_stream(), 1);
var ExpandableTable = class {
	expanded;
	constructor() {
		this.expanded = (0, import_stream$11.default)(false);
	}
	view(vnode) {
		const { title, table, infoLinkId, infoMsg, expanded, onExpand } = vnode.attrs;
		return mithril_default(SettingsExpander, {
			title,
			infoLinkId,
			infoMsg,
			onExpand,
			expanded: expanded || this.expanded
		}, mithril_default(Table, table));
	}
};

//#endregion
//#region src/common/subscription/DeleteAccountDialog.ts
function showDeleteAccountDialog(surveyData = null) {
	let takeover = "";
	let password = "";
	const userId = getEtId(locator.logins.getUserController().user);
	Dialog.showActionDialog({
		title: "adminDeleteAccount_action",
		child: { view: () => mithril_default("#delete-account-dialog", [!(isIOSApp() && client.isCalendarApp()) ? mithril_default(TextField, {
			label: "targetAddress_label",
			value: takeover,
			type: TextFieldType.Email,
			oninput: (value) => takeover = value,
			helpLabel: () => lang.get("takeoverMailAddressInfo_msg")
		}) : null, mithril_default(PasswordField, {
			value: password,
			autocompleteAs: Autocomplete.currentPassword,
			oninput: (value) => password = value,
			status: {
				type: "neutral",
				text: "passwordEnterNeutral_msg"
			}
		})]) },
		okAction: async () => {
			const isDeleted = await deleteAccount(takeover, password, surveyData);
			if (isDeleted) {
				await locator.credentialsProvider.deleteByUserId(userId);
				mithril_default.route.set("/login", { noAutoLogin: true });
			}
		},
		allowCancel: true,
		okActionTextId: "delete_action"
	});
}
async function deleteAccount(takeover, password, surveyData = null) {
	const cleanedTakeover = takeover === "" ? "" : getCleanedMailAddress(takeover);
	if (cleanedTakeover === null) {
		await Dialog.message("mailAddressInvalid_msg");
		return false;
	} else {
		const message = lang.makeTranslation("confirm_msg", cleanedTakeover === "" ? lang.get("deleteAccountConfirm_msg") : lang.get("deleteAccountWithTakeoverConfirm_msg", { "{1}": cleanedTakeover }));
		const ok = await Dialog.confirm(message);
		if (!ok) return false;
		await locator.connectivityModel.close(CloseEventBusOption.Terminate);
		try {
			await locator.loginFacade.deleteAccount(password, neverNull(cleanedTakeover), surveyData);
			return true;
		} catch (e) {
			if (e instanceof PreconditionFailedError) await Dialog.message("passwordWrongInvalid_msg");
			if (e instanceof InvalidDataError) await Dialog.message("takeoverAccountInvalid_msg");
			if (e instanceof LockedError) await Dialog.message("operationStillActive_msg");
			return false;
		}
	}
}

//#endregion
//#region src/common/settings/AccountMaintenanceSettings.ts
var import_stream$10 = __toESM(require_stream(), 1);
var AccountMaintenanceSettings = class {
	requirePasswordUpdateAfterReset = false;
	saveIpAddress = false;
	usageDataExpanded = (0, import_stream$10.default)(false);
	deleteAccountExpanded = (0, import_stream$10.default)(false);
	auditLogLines = [];
	auditLogLoaded = false;
	customer = null;
	customerInfo = new LazyLoaded(() => locator.logins.getUserController().loadCustomerInfo());
	customerProperties = new LazyLoaded(() => locator.entityClient.load(CustomerTypeRef, neverNull(locator.logins.getUserController().user.customer)).then((customer) => locator.entityClient.load(CustomerPropertiesTypeRef, neverNull(customer.properties))));
	constructor(vnode) {
		vnode.attrs.customerServerProperties.map((props) => {
			this.requirePasswordUpdateAfterReset = props.requirePasswordUpdateAfterReset;
			this.saveIpAddress = props.saveEncryptedIpAddressInSession;
		});
		this.customerProperties.getAsync().then(mithril_default.redraw);
		vnode.attrs.setOnUpdateHandler((updates) => this.handleEventUpdates(updates));
		this.view = this.view.bind(this);
		this.updateAuditLog();
	}
	view({ attrs }) {
		const auditLogTableAttrs = {
			columnHeading: [
				"action_label",
				"modified_label",
				"time_label"
			],
			columnWidths: [
				ColumnWidth.Largest,
				ColumnWidth.Largest,
				ColumnWidth.Small
			],
			showActionButtonColumn: true,
			lines: this.auditLogLines,
			addButtonAttrs: {
				title: "refresh_action",
				click: () => showProgressDialog("loading_msg", this.updateAuditLog()).then(() => mithril_default.redraw()),
				icon: BootIcons.Progress,
				size: ButtonSize.Compact
			}
		};
		return [
			mithril_default(".mt-l", [
				mithril_default(".h4", lang.get("security_title")),
				mithril_default(DropDownSelector, {
					label: "saveEncryptedIpAddress_title",
					helpLabel: () => lang.get("saveEncryptedIpAddress_label"),
					selectedValue: this.saveIpAddress,
					selectionChangedHandler: (value) => {
						const newProps = Object.assign({}, attrs.customerServerProperties(), { saveEncryptedIpAddressInSession: value });
						locator.entityClient.update(newProps);
					},
					items: [{
						name: lang.get("yes_label"),
						value: true
					}, {
						name: lang.get("no_label"),
						value: false
					}],
					dropdownWidth: 250
				}),
				locator.logins.getUserController().isGlobalAdmin() ? mithril_default("", [locator.logins.getUserController().isPaidAccount() ? mithril_default(DropDownSelector, {
					label: "enforcePasswordUpdate_title",
					helpLabel: () => lang.get("enforcePasswordUpdate_msg"),
					selectedValue: this.requirePasswordUpdateAfterReset,
					selectionChangedHandler: (value) => {
						const newProps = Object.assign({}, attrs.customerServerProperties(), { requirePasswordUpdateAfterReset: value });
						locator.entityClient.update(newProps);
					},
					items: [{
						name: lang.get("yes_label"),
						value: true
					}, {
						name: lang.get("no_label"),
						value: false
					}],
					dropdownWidth: 250
				}) : null, this.customer ? mithril_default(".mt-l", mithril_default(ExpandableTable, {
					title: "auditLog_title",
					table: auditLogTableAttrs,
					infoMsg: "auditLogInfo_msg",
					onExpand: () => {
						if (!this.auditLogLoaded) showProgressDialog("loading_msg", this.updateAuditLog()).then(() => mithril_default.redraw());
					}
				})) : null]) : null
			]),
			locator.logins.getUserController().isPaidAccount() ? mithril_default(SettingsExpander, {
				title: "usageData_label",
				expanded: this.usageDataExpanded
			}, this.customerProperties.isLoaded() ? mithril_default(DropDownSelector, {
				label: "customerUsageDataOptOut_label",
				items: [{
					name: lang.get("customerUsageDataGloballyDeactivated_label"),
					value: true
				}, {
					name: lang.get("customerUsageDataGloballyPossible_label"),
					value: false
				}],
				selectedValue: this.customerProperties.getSync().usageDataOptedOut,
				selectionChangedHandler: (v) => {
					if (this.customerProperties.isLoaded()) {
						const customerProps = this.customerProperties.getSync();
						customerProps.usageDataOptedOut = v;
						locator.entityClient.update(customerProps);
					}
				},
				dropdownWidth: 250
			}) : null) : null,
			mithril_default(".mb-l", mithril_default(SettingsExpander, {
				title: "adminDeleteAccount_action",
				buttonText: "adminDeleteAccount_action",
				expanded: this.deleteAccountExpanded
			}, mithril_default(".flex-center", mithril_default("", { style: { width: "200px" } }, mithril_default(LoginButton, {
				label: "adminDeleteAccount_action",
				onclick: () => {
					const isPremium = locator.logins.getUserController().isPaidAccount();
					showLeavingUserSurveyWizard(isPremium, false).then((reason) => {
						if (reason.submitted && reason.category && reason.reason) {
							const surveyData = createSurveyData({
								category: reason.category,
								details: reason.details,
								reason: reason.reason,
								version: SURVEY_VERSION_NUMBER
							});
							showDeleteAccountDialog(surveyData);
						} else showDeleteAccountDialog();
					});
				}
			})))))
		];
	}
	updateAuditLog() {
		return locator.logins.getUserController().loadCustomer().then((customer) => {
			this.customer = customer;
			return locator.entityClient.loadRange(AuditLogEntryTypeRef, neverNull(customer.auditLog).items, GENERATED_MAX_ID, 200, true).then((auditLog) => {
				this.auditLogLoaded = true;
				this.auditLogLines = auditLog.map((auditLogEntry) => {
					return {
						cells: [
							auditLogEntry.action,
							auditLogEntry.modifiedEntity,
							formatDateTimeFromYesterdayOn(auditLogEntry.date)
						],
						actionButtonAttrs: {
							title: "showMore_action",
							icon: Icons.More,
							click: () => this.showAuditLogDetails(auditLogEntry, customer),
							size: ButtonSize.Compact
						}
					};
				});
			}).finally(mithril_default.redraw);
		});
	}
	showAuditLogDetails(entry, customer) {
		let modifiedGroupInfo = (0, import_stream$10.default)();
		let groupInfo = (0, import_stream$10.default)();
		let groupInfoLoadingPromises = [];
		if (entry.modifiedGroupInfo) groupInfoLoadingPromises.push(locator.entityClient.load(GroupInfoTypeRef, entry.modifiedGroupInfo).then((gi) => {
			modifiedGroupInfo(gi);
		}).catch(ofClass(NotAuthorizedError, () => {})));
		if (entry.groupInfo) groupInfoLoadingPromises.push(locator.entityClient.load(GroupInfoTypeRef, entry.groupInfo).then((gi) => {
			groupInfo(gi);
		}).catch(ofClass(NotAuthorizedError, () => {})));
		Promise.all(groupInfoLoadingPromises).then(() => {
			const groupInfoValue = groupInfo();
			let dialog = Dialog.showActionDialog({
				title: "auditLog_title",
				child: { view: () => mithril_default("table.pt", [
					mithril_default("tr", [mithril_default("td", lang.get("action_label")), mithril_default("td.pl", entry.action)]),
					mithril_default("tr", [mithril_default("td", lang.get("actor_label")), mithril_default("td.pl", entry.actorMailAddress)]),
					mithril_default("tr", [mithril_default("td", lang.get("IpAddress_label")), mithril_default("td.pl", entry.actorIpAddress ? entry.actorIpAddress : "")]),
					mithril_default("tr", [mithril_default("td", lang.get("modified_label")), mithril_default("td.pl", modifiedGroupInfo() && this.getGroupInfoDisplayText(modifiedGroupInfo()) ? this.getGroupInfoDisplayText(modifiedGroupInfo()) : entry.modifiedEntity)]),
					groupInfoValue ? mithril_default("tr", [mithril_default("td", lang.get("group_label")), mithril_default("td.pl", customer.adminGroup === groupInfoValue.group ? lang.get("globalAdmin_label") : this.getGroupInfoDisplayText(groupInfoValue))]) : null,
					mithril_default("tr", [mithril_default("td", lang.get("time_label")), mithril_default("td.pl", formatDateTime(entry.date))])
				]) },
				allowOkWithReturn: true,
				okAction: () => dialog.close(),
				allowCancel: false
			});
		});
	}
	getGroupInfoDisplayText(groupInfo) {
		if (groupInfo.name && groupInfo.mailAddress) return groupInfo.name + " <" + groupInfo.mailAddress + ">";
else if (groupInfo.mailAddress) return groupInfo.mailAddress;
else return groupInfo.name;
	}
	handleEventUpdates(updates) {
		return pMap(updates, (update) => {
			if (isUpdateForTypeRef(AuditLogEntryTypeRef, update)) return this.updateAuditLog();
else if (isUpdateForTypeRef(CustomerPropertiesTypeRef, update)) {
				this.customerProperties.reset();
				this.customerProperties.getAsync().then(mithril_default.redraw);
			}
		}).then(noOp);
	}
};

//#endregion
//#region src/mail-app/settings/GlobalSettingsViewer.ts
var import_stream$9 = __toESM(require_stream(), 1);
assertMainOrNode();
const REJECTED_SENDERS_TO_LOAD_MS = 5 * DAY_IN_MILLIS;
const REJECTED_SENDERS_MAX_NUMBER = 100;
var GlobalSettingsViewer = class {
	props = (0, import_stream$9.default)();
	customer = null;
	customerInfo = new LazyLoaded(() => locator.logins.getUserController().loadCustomerInfo());
	accountMaintenanceUpdateNotifier = null;
	spamRuleLines = [];
	rejectedSenderLines = [];
	customDomainLines = [];
	/**
	* caches the current status for the custom email domains
	* map from domain name to status
	*/
	domainDnsStatus = {};
	customerProperties = new LazyLoaded(() => locator.entityClient.load(CustomerTypeRef, neverNull(locator.logins.getUserController().user.customer)).then((customer) => locator.entityClient.load(CustomerPropertiesTypeRef, neverNull(customer.properties))));
	constructor() {
		this.customerProperties.getAsync().then(mithril_default.redraw);
		this.updateCustomerServerProperties();
		this.view = this.view.bind(this);
		this.updateDomains();
	}
	view() {
		const spamRuleTableAttrs = {
			columnHeading: ["emailSender_label", "emailSenderRule_label"],
			columnWidths: [ColumnWidth.Largest, ColumnWidth.Small],
			showActionButtonColumn: true,
			addButtonAttrs: {
				title: "addSpamRule_action",
				click: () => showAddSpamRuleDialog(null),
				icon: Icons.Add,
				size: ButtonSize.Compact
			},
			lines: this.spamRuleLines
		};
		const rejectedSenderTableAttrs = {
			columnHeading: ["emailSender_label"],
			columnWidths: [ColumnWidth.Largest],
			showActionButtonColumn: true,
			addButtonAttrs: {
				title: "refresh_action",
				click: () => {
					this.updateRejectedSenderTable();
				},
				icon: BootIcons.Progress,
				size: ButtonSize.Compact
			},
			lines: this.rejectedSenderLines
		};
		const customDomainTableAttrs = {
			columnHeading: ["adminCustomDomain_label", "catchAllMailbox_label"],
			columnWidths: [ColumnWidth.Largest, ColumnWidth.Small],
			showActionButtonColumn: true,
			addButtonAttrs: {
				title: "addCustomDomain_action",
				click: async () => {
					const customerInfo = await this.customerInfo.getAsync();
					if (locator.logins.getUserController().isFreeAccount()) showNotAvailableForFreeDialog();
else {
						const mailAddressTableModel = await locator.mailAddressTableModelForOwnMailbox();
						await showAddDomainWizard("", customerInfo, mailAddressTableModel);
						this.updateDomains();
					}
				},
				icon: Icons.Add,
				size: ButtonSize.Compact
			},
			lines: this.customDomainLines
		};
		return [mithril_default("#global-settings.fill-absolute.scroll.plr-l", [
			mithril_default(ExpandableTable, {
				title: "adminSpam_action",
				table: spamRuleTableAttrs,
				infoMsg: "adminSpamRuleInfo_msg",
				infoLinkId: InfoLink.SpamRules
			}),
			mithril_default(ExpandableTable, {
				title: "rejectedEmails_label",
				table: rejectedSenderTableAttrs,
				infoMsg: "rejectedSenderListInfo_msg",
				onExpand: () => this.updateRejectedSenderTable()
			}),
			mithril_default(ExpandableTable, {
				title: "customEmailDomains_label",
				table: customDomainTableAttrs,
				infoMsg: "moreInfo_msg",
				infoLinkId: InfoLink.DomainInfo
			}),
			mithril_default(AccountMaintenanceSettings, {
				customerServerProperties: this.props,
				setOnUpdateHandler: (fn) => {
					this.accountMaintenanceUpdateNotifier = fn;
				}
			})
		])];
	}
	updateCustomerServerProperties() {
		return locator.customerFacade.loadCustomerServerProperties().then((props) => {
			this.props(props);
			const fieldToName = getSpamRuleFieldToName();
			this.spamRuleLines = props.emailSenderList.map((rule, index) => {
				return {
					cells: () => [{
						main: fieldToName[getSpamRuleField(rule)],
						info: [rule.value]
					}, { main: neverNull(getSpamRuleTypeNameMapping().find((t) => t.value === rule.type)).name }],
					actionButtonAttrs: createRowActions({
						getArray: () => props.emailSenderList,
						updateInstance: () => locator.entityClient.update(props).catch(ofClass(LockedError, noOp))
					}, rule, index, [{
						label: "edit_action",
						click: () => showAddSpamRuleDialog(rule)
					}])
				};
			});
			mithril_default.redraw();
		});
	}
	updateRejectedSenderTable() {
		const customer = this.customer;
		if (customer && customer.rejectedSenders) {
			const senderListId = customer.rejectedSenders.items;
			const startId = timestampToGeneratedId(Date.now() - REJECTED_SENDERS_TO_LOAD_MS);
			const loadingPromise = locator.entityClient.loadRange(RejectedSenderTypeRef, senderListId, startId, REJECTED_SENDERS_MAX_NUMBER, false).then((rejectedSenders) => {
				if (REJECTED_SENDERS_MAX_NUMBER === rejectedSenders.length) return locator.entityClient.loadRange(RejectedSenderTypeRef, senderListId, GENERATED_MAX_ID, REJECTED_SENDERS_MAX_NUMBER, true);
else return rejectedSenders.sort(sortCompareByReverseId);
			}).then((rejectedSenders) => {
				this.rejectedSenderLines = rejectedSenders.map((rejectedSender) => {
					const rejectDate = formatDateTime(new Date(generatedIdToTimestamp(getElementId(rejectedSender))));
					return {
						cells: () => {
							return [{
								main: rejectedSender.senderMailAddress,
								info: [`${rejectDate}, ${rejectedSender.senderHostname} (${rejectedSender.senderIp})`],
								click: () => showRejectedSendersInfoDialog(rejectedSender)
							}];
						},
						actionButtonAttrs: attachDropdown({
							mainButtonAttrs: {
								title: "showMore_action",
								icon: Icons.More,
								size: ButtonSize.Compact
							},
							childAttrs: () => [{
								label: "showRejectReason_action",
								click: () => showRejectedSendersInfoDialog(rejectedSender)
							}, {
								label: "addSpamRule_action",
								click: () => {
									const domainPart = getDomainPart(rejectedSender.senderMailAddress);
									showAddSpamRuleDialog(createEmailSenderListElement({
										value: domainPart ? domainPart : "",
										type: SpamRuleType.WHITELIST,
										field: SpamRuleFieldType.FROM,
										hashedValue: ""
									}));
								}
							}]
						})
					};
				});
			});
			showProgressDialog("loading_msg", loadingPromise).then(() => mithril_default.redraw());
		}
	}
	async updateDomains() {
		const customerInfo = await this.customerInfo.getAsync();
		let customDomainInfos = getCustomMailDomains(customerInfo);
		for (const domain of Object.keys(this.domainDnsStatus)) if (!customDomainInfos.some((di) => di.domain === domain)) delete this.domainDnsStatus[domain];
		return pMap(customDomainInfos, (domainInfo) => {
			if (!this.domainDnsStatus[domainInfo.domain]) {
				this.domainDnsStatus[domainInfo.domain] = new DomainDnsStatus(domainInfo.domain);
				this.domainDnsStatus[domainInfo.domain].loadCurrentStatus().then(() => {
					mithril_default.redraw();
				});
			}
			let domainDnsStatus = this.domainDnsStatus[domainInfo.domain];
			let p = Promise.resolve(lang.get("comboBoxSelectionNone_msg"));
			if (domainInfo.catchAllMailGroup) p = loadGroupDisplayName(domainInfo.catchAllMailGroup);
			return p.then((catchAllGroupName) => {
				return {
					cells: () => [{
						main: domainInfo.domain,
						info: [domainDnsStatus.getDnsStatusInfo()],
						click: domainDnsStatus.status.isLoaded() && !domainDnsStatus.areAllRecordsFine() ? () => {
							showDnsCheckDialog(domainDnsStatus);
						} : noOp
					}, { main: catchAllGroupName }],
					actionButtonAttrs: {
						title: "action_label",
						icon: Icons.More,
						size: ButtonSize.Compact,
						click: createDropdown({
							lazyButtons: () => {
								const buttons = [{
									label: "setCatchAllMailbox_action",
									click: () => this.editCatchAllMailbox(domainInfo)
								}, {
									label: "delete_action",
									click: () => this.deleteCustomDomain(domainInfo)
								}];
								if (domainDnsStatus.status.isLoaded() && !domainDnsStatus.areAllRecordsFine()) buttons.unshift({
									label: "resumeSetup_label",
									click: () => this.onResumeSetup(domainDnsStatus, customerInfo)
								});
								return buttons;
							},
							width: 260
						})
					}
				};
			});
		}).then((tableLines) => {
			this.customDomainLines = tableLines;
			mithril_default.redraw();
		});
	}
	async onResumeSetup(domainDnsStatus, customerInfo) {
		const mailAddressTableModel = await locator.mailAddressTableModelForOwnMailbox();
		showAddDomainWizard(domainDnsStatus.domain, customerInfo, mailAddressTableModel).then(() => {
			domainDnsStatus.loadCurrentStatus().then(() => mithril_default.redraw());
		});
	}
	async editCatchAllMailbox(domainInfo) {
		const groupDatas = await showProgressDialog("pleaseWait_msg", this.loadMailboxGroupDataAndCatchAllId(domainInfo));
		const initialValue = groupDatas.selected?.groupId ?? null;
		const selectedMailGroupId = await Dialog.showDropDownSelectionDialog("setCatchAllMailbox_action", "catchAllMailbox_label", null, [{
			name: lang.get("comboBoxSelectionNone_msg"),
			value: null
		}, ...groupDatas.available.map((groupData) => {
			return {
				name: groupData.displayName,
				value: groupData.groupId
			};
		})], initialValue, 250);
		return locator.customerFacade.setCatchAllGroup(domainInfo.domain, selectedMailGroupId);
	}
	async loadMailboxGroupDataAndCatchAllId(domainInfo) {
		const customer = await locator.logins.getUserController().loadCustomer();
		const teamMailGroups = await loadEnabledTeamMailGroups(customer);
		const userMailGroups = await loadEnabledUserMailGroups(customer);
		const allMailGroups = teamMailGroups.concat(userMailGroups);
		let catchAllMailGroupId = null;
		if (domainInfo.catchAllMailGroup) {
			const catchAllGroup = await locator.entityClient.load(GroupTypeRef, domainInfo.catchAllMailGroup);
			if (catchAllGroup.type === GroupType.User) {
				const user = await locator.entityClient.load(UserTypeRef, neverNull(catchAllGroup.user));
				catchAllMailGroupId = getUserGroupMemberships(user, GroupType.Mail)[0].group;
			} else catchAllMailGroupId = domainInfo.catchAllMailGroup;
		}
		return {
			available: allMailGroups,
			selected: allMailGroups.find((g) => g.groupId === catchAllMailGroupId) ?? null
		};
	}
	deleteCustomDomain(domainInfo) {
		Dialog.confirm(lang.getTranslation("confirmCustomDomainDeletion_msg", { "{domain}": domainInfo.domain })).then((confirmed) => {
			if (confirmed) locator.customerFacade.removeDomain(domainInfo.domain).catch(ofClass(PreconditionFailedError, () => {
				Dialog.message(lang.getTranslation("customDomainDeletePreconditionFailed_msg", { "{domainName}": domainInfo.domain }));
			})).catch(ofClass(LockedError, () => Dialog.message("operationStillActive_msg")));
		});
	}
	entityEventsReceived(updates) {
		this.accountMaintenanceUpdateNotifier?.(updates);
		return pMap(updates, (update) => {
			if (isUpdateForTypeRef(CustomerServerPropertiesTypeRef, update) && update.operation === OperationType.UPDATE) return this.updateCustomerServerProperties();
else if (isUpdateForTypeRef(CustomerInfoTypeRef, update) && update.operation === OperationType.UPDATE) {
				this.customerInfo.reset();
				return this.updateDomains();
			} else if (isUpdateForTypeRef(CustomerPropertiesTypeRef, update)) {
				this.customerProperties.reset();
				this.customerProperties.getAsync().then(mithril_default.redraw);
			}
		}).then(noOp);
	}
};

//#endregion
//#region src/mail-app/settings/DesktopUpdateHelpLabel.ts
var DesktopUpdateHelpLabel = class {
	_waiting = false;
	_error = false;
	getActionLink({ updateAvailable, manualUpdate }) {
		if (this._waiting || this._error) return null;
		const onclick = async () => {
			if (updateAvailable()) manualUpdate();
else if (!this._waiting) {
				this._waiting = true;
				const [hasUpdate] = await Promise.all([manualUpdate(), delay(500)]);
				this._waiting = false;
				updateAvailable(hasUpdate);
				mithril_default.redraw();
			}
		};
		return mithril_default("span.text-break.pr-s", mithril_default("button.underline", {
			type: "button",
			href: "#",
			tabindex: "0",
			role: "button",
			onclick
		}, lang.get(updateAvailable() ? "installNow_action" : "checkAgain_action")));
	}
	getLabel(updateAvailable) {
		let ret = "";
		if (updateAvailable()) ret = lang.get("updateFound_label");
else if (this._error) ret = lang.get("serviceUnavailable_msg");
else if (this._waiting) ret = lang.get("checkingForUpdate_action");
else ret = lang.get("noUpdateAvailable_msg");
		return mithril_default("span.pr-s", ret + " ");
	}
	getIcon() {
		return this._waiting && !this._error ? mithril_default(Icon, {
			icon: BootIcons.Progress,
			class: "flex-center items-center icon-progress-tiny icon-progress"
		}) : null;
	}
	view(vnode) {
		return mithril_default(".flex.items-center", [
			this.getLabel(vnode.attrs.updateAvailable),
			this.getActionLink(vnode.attrs),
			this.getIcon()
		]);
	}
};

//#endregion
//#region src/mail-app/settings/DesktopSettingsViewer.ts
var import_stream$8 = __toESM(require_stream(), 1);
assertMainOrNode();
var DownloadLocationStrategy = function(DownloadLocationStrategy$1) {
	DownloadLocationStrategy$1[DownloadLocationStrategy$1["ALWAYS_ASK"] = 0] = "ALWAYS_ASK";
	DownloadLocationStrategy$1[DownloadLocationStrategy$1["CHOOSE_DIRECTORY"] = 1] = "CHOOSE_DIRECTORY";
	return DownloadLocationStrategy$1;
}(DownloadLocationStrategy || {});
var DesktopSettingsViewer = class {
	isDefaultMailtoHandler;
	defaultDownloadPath;
	runAsTrayApp;
	runOnStartup;
	spellCheckLang;
	isIntegrated;
	isAutoUpdateEnabled;
	showAutoUpdateOption;
	updateAvailable;
	mailExportMode;
	isPathDialogOpen = false;
	offlineStorageValue;
	constructor() {
		this.isDefaultMailtoHandler = (0, import_stream$8.default)(false);
		this.runAsTrayApp = (0, import_stream$8.default)(true);
		this.runOnStartup = (0, import_stream$8.default)(false);
		this.spellCheckLang = (0, import_stream$8.default)("");
		this.isIntegrated = (0, import_stream$8.default)(false);
		this.isAutoUpdateEnabled = (0, import_stream$8.default)(false);
		this.showAutoUpdateOption = true;
		this.updateAvailable = (0, import_stream$8.default)(false);
		this.mailExportMode = (0, import_stream$8.default)("msg");
		this.offlineStorageValue = (0, import_stream$8.default)(false);
	}
	oninit() {
		this.requestDesktopConfig();
	}
	view() {
		const setDefaultMailtoHandlerAttrs = {
			label: "defaultMailHandler_label",
			helpLabel: () => lang.get("defaultMailHandler_msg"),
			items: [{
				name: lang.get("unregistered_label"),
				value: false
			}, {
				name: lang.get("registered_label"),
				value: true
			}],
			selectedValue: this.isDefaultMailtoHandler(),
			selectionChangedHandler: (v) => {
				showProgressDialog("pleaseWait_msg", this.updateDefaultMailtoHandler(v)).then(() => {
					this.isDefaultMailtoHandler(v);
					mithril_default.redraw();
				});
			}
		};
		const setRunInBackgroundAttrs = {
			label: "runInBackground_action",
			helpLabel: () => {
				return ifAllowedTutaLinks(locator.logins, InfoLink.RunInBackground, (link) => [mithril_default("span", lang.get("runInBackground_msg") + " "), mithril_default(MoreInfoLink, { link })]);
			},
			items: [{
				name: lang.get("yes_label"),
				value: true
			}, {
				name: lang.get("no_label"),
				value: false
			}],
			selectedValue: this.runAsTrayApp(),
			selectionChangedHandler: (v) => {
				this.runAsTrayApp(v);
				this.setBooleanValue(DesktopConfigKey.runAsTrayApp, v);
			}
		};
		const setRunOnStartupAttrs = {
			label: "runOnStartup_action",
			items: [{
				name: lang.get("yes_label"),
				value: true
			}, {
				name: lang.get("no_label"),
				value: false
			}],
			selectedValue: this.runOnStartup(),
			selectionChangedHandler: (v) => {
				showProgressDialog("pleaseWait_msg", this.toggleAutoLaunchInNative(v)).then(() => {
					this.runOnStartup(v);
					mithril_default.redraw();
				});
			}
		};
		const editSpellcheckLanguageButtonAttrs = {
			title: "checkSpelling_action",
			click: () => showSpellcheckLanguageDialog().then((newLabel) => this.spellCheckLang(newLabel)),
			icon: Icons.Edit,
			size: ButtonSize.Compact
		};
		const spellcheckLanguageAttrs = {
			label: "checkSpelling_action",
			value: this.spellCheckLang(),
			oninput: this.spellCheckLang,
			isReadOnly: true,
			injectionsRight: () => mithril_default(IconButton, editSpellcheckLanguageButtonAttrs),
			helpLabel: () => lang.get("requiresNewWindow_msg")
		};
		const setDesktopIntegrationAttrs = {
			label: "desktopIntegration_label",
			items: [{
				name: lang.get("activated_label"),
				value: true
			}, {
				name: lang.get("deactivated_label"),
				value: false
			}],
			selectedValue: this.isIntegrated(),
			selectionChangedHandler: (v) => {
				showProgressDialog("pleaseWait_msg", this.updateDesktopIntegration(v)).then(() => {
					this.isIntegrated(v);
					mithril_default.redraw();
				}).catch((e) => Dialog.message("unknownError_msg", e.message));
			}
		};
		const setMailExportModeAttrs = {
			label: "mailExportMode_label",
			helpLabel: () => lang.get("mailExportModeHelp_msg"),
			items: [{
				name: "EML",
				value: "eml"
			}, {
				name: "MSG (Outlook)",
				value: "msg"
			}],
			selectedValue: this.mailExportMode(),
			selectionChangedHandler: (v) => {
				this.mailExportMode(v);
				this.setStringValue(DesktopConfigKey.mailExportMode, v);
			}
		};
		const updateHelpLabelAttrs = {
			updateAvailable: this.updateAvailable,
			manualUpdate: () => locator.desktopSettingsFacade.manualUpdate()
		};
		const setAutoUpdateAttrs = {
			label: "autoUpdate_label",
			helpLabel: () => mithril_default(DesktopUpdateHelpLabel, updateHelpLabelAttrs),
			items: [{
				name: lang.get("activated_label"),
				value: true
			}, {
				name: lang.get("deactivated_label"),
				value: false
			}],
			selectedValue: this.isAutoUpdateEnabled(),
			selectionChangedHandler: (v) => {
				this.isAutoUpdateEnabled(v);
				this.setBooleanValue(DesktopConfigKey.enableAutoUpdate, v);
			}
		};
		const changeDefaultDownloadPathAttrs = attachDropdown({
			mainButtonAttrs: {
				title: "edit_action",
				icon: Icons.Edit,
				size: ButtonSize.Compact
			},
			childAttrs: () => [{
				label: "alwaysAsk_action",
				click: () => this.setDefaultDownloadPath(DownloadLocationStrategy.ALWAYS_ASK)
			}, {
				label: "chooseDirectory_action",
				click: () => this.setDefaultDownloadPath(DownloadLocationStrategy.CHOOSE_DIRECTORY)
			}],
			showDropdown: () => !this.isPathDialogOpen,
			width: 200
		});
		const defaultDownloadPathAttrs = {
			label: "defaultDownloadPath_label",
			value: this.defaultDownloadPath(),
			oninput: this.defaultDownloadPath,
			injectionsRight: () => mithril_default(IconButton, changeDefaultDownloadPathAttrs),
			isReadOnly: true
		};
		return [mithril_default("#user-settings.fill-absolute.scroll.plr-l.pb-xl", [
			mithril_default(".h4.mt-l", lang.get("desktopSettings_label")),
			env.platformId === "darwin" ? null : mithril_default(TextField, spellcheckLanguageAttrs),
			env.platformId === "linux" ? null : mithril_default(DropDownSelector, setDefaultMailtoHandlerAttrs),
			env.platformId === "darwin" ? null : mithril_default(DropDownSelector, setRunInBackgroundAttrs),
			mithril_default(DropDownSelector, setRunOnStartupAttrs),
			mithril_default(TextField, defaultDownloadPathAttrs),
			mithril_default(DropDownSelector, setMailExportModeAttrs),
			env.platformId === "linux" ? mithril_default(DropDownSelector, setDesktopIntegrationAttrs) : null,
			this.showAutoUpdateOption ? mithril_default(DropDownSelector, setAutoUpdateAttrs) : null
		])];
	}
	toggleAutoLaunchInNative(enable) {
		return enable ? locator.desktopSettingsFacade.enableAutoLaunch() : locator.desktopSettingsFacade.disableAutoLaunch();
	}
	updateDefaultMailtoHandler(shouldBeDefaultMailtoHandler) {
		return shouldBeDefaultMailtoHandler ? locator.desktopSettingsFacade.registerMailto() : locator.desktopSettingsFacade.unregisterMailto();
	}
	updateDesktopIntegration(shouldIntegrate) {
		return shouldIntegrate ? locator.desktopSettingsFacade.integrateDesktop() : locator.desktopSettingsFacade.unIntegrateDesktop();
	}
	async requestDesktopConfig() {
		this.defaultDownloadPath = (0, import_stream$8.default)(lang.get("alwaysAsk_action"));
		const [integrationInfo, defaultDownloadPath, runAsTrayApp, showAutoUpdateOption, enableAutoUpdate, mailExportMode, spellcheckLabel] = await Promise.all([
			locator.desktopSettingsFacade.getIntegrationInfo(),
			locator.desktopSettingsFacade.getStringConfigValue(DesktopConfigKey.defaultDownloadPath),
			locator.desktopSettingsFacade.getBooleanConfigValue(DesktopConfigKey.runAsTrayApp),
			locator.desktopSettingsFacade.getBooleanConfigValue(DesktopConfigKey.showAutoUpdateOption),
			locator.desktopSettingsFacade.getBooleanConfigValue(DesktopConfigKey.enableAutoUpdate),
			locator.desktopSettingsFacade.getStringConfigValue(DesktopConfigKey.mailExportMode),
			getCurrentSpellcheckLanguageLabel()
		]);
		const { isMailtoHandler, isAutoLaunchEnabled, isIntegrated, isUpdateAvailable } = integrationInfo;
		this.isDefaultMailtoHandler(isMailtoHandler);
		this.defaultDownloadPath(defaultDownloadPath || lang.get("alwaysAsk_action"));
		this.runAsTrayApp(runAsTrayApp);
		this.runOnStartup(isAutoLaunchEnabled);
		this.isIntegrated(isIntegrated);
		this.showAutoUpdateOption = showAutoUpdateOption;
		this.isAutoUpdateEnabled(enableAutoUpdate);
		this.updateAvailable(isUpdateAvailable);
		this.mailExportMode(mailExportMode);
		this.spellCheckLang(spellcheckLabel);
		mithril_default.redraw();
	}
	async setBooleanValue(setting, value) {
		await locator.desktopSettingsFacade.setBooleanConfigValue(setting, value);
		mithril_default.redraw();
	}
	async setStringValue(setting, value) {
		await locator.desktopSettingsFacade.setStringConfigValue(setting, value);
		mithril_default.redraw();
	}
	async setDefaultDownloadPath(v) {
		this.isPathDialogOpen = true;
		let savePath;
		if (v === DownloadLocationStrategy.ALWAYS_ASK) savePath = null;
else savePath = await locator.fileApp.openFolderChooser();
		this.defaultDownloadPath(savePath ?? lang.get("alwaysAsk_action"));
		await this.setStringValue(DesktopConfigKey.defaultDownloadPath, savePath);
		this.isPathDialogOpen = false;
	}
	onAppUpdateAvailable() {
		this.updateAvailable(true);
		mithril_default.redraw();
	}
	entityEventsReceived = () => Promise.resolve();
};

//#endregion
//#region src/mail-app/settings/EditOutOfOfficeNotificationDialogModel.ts
var import_stream$7 = __toESM(require_stream(), 1);
let RecipientMessageType = function(RecipientMessageType$1) {
	RecipientMessageType$1[RecipientMessageType$1["EXTERNAL_TO_EVERYONE"] = 0] = "EXTERNAL_TO_EVERYONE";
	RecipientMessageType$1[RecipientMessageType$1["INTERNAL_AND_EXTERNAL"] = 1] = "INTERNAL_AND_EXTERNAL";
	RecipientMessageType$1[RecipientMessageType$1["INTERNAL_ONLY"] = 2] = "INTERNAL_ONLY";
	return RecipientMessageType$1;
}({});
const FAILURE_UPGRADE_REQUIRED = "outofoffice.not_available_on_current_plan";
var EditOutOfOfficeNotificationDialogModel = class {
	outOfOfficeNotification;
	enabled = (0, import_stream$7.default)(false);
	startDate = (0, import_stream$7.default)(new Date());
	endDate = (0, import_stream$7.default)(new Date());
	indefiniteTimeRange = (0, import_stream$7.default)(true);
	timeRangeEnabled = (0, import_stream$7.default)(false);
	organizationSubject = (0, import_stream$7.default)("");
	organizationMessage = (0, import_stream$7.default)("");
	defaultSubject = (0, import_stream$7.default)("");
	defaultMessage = (0, import_stream$7.default)("");
	recipientMessageTypes = (0, import_stream$7.default)(RecipientMessageType.EXTERNAL_TO_EVERYONE);
	_entityClient;
	_userController;
	_languageViewModel;
	constructor(outOfOfficeNotification, entityClient, userController, languageViewModel, serviceExecutor) {
		this.serviceExecutor = serviceExecutor;
		this._entityClient = entityClient;
		this._userController = userController;
		this._languageViewModel = languageViewModel;
		this._setDefaultMessages();
		if (!outOfOfficeNotification) {
			this.startDate(getStartOfDay(new Date()));
			this.outOfOfficeNotification = createOutOfOfficeNotification({
				notifications: [],
				enabled: false,
				endDate: null,
				startDate: null
			});
		} else {
			this.outOfOfficeNotification = outOfOfficeNotification;
			this.enabled(outOfOfficeNotification.enabled);
			let defaultEnabled = false;
			let organizationEnabled = false;
			for (const notification of outOfOfficeNotification.notifications) if (notification.type === OutOfOfficeNotificationMessageType.Default) {
				defaultEnabled = true;
				this.defaultSubject(notification.subject);
				this.defaultMessage(notification.message);
			} else if (notification.type === OutOfOfficeNotificationMessageType.InsideOrganization) {
				organizationEnabled = true;
				this.organizationSubject(notification.subject);
				this.organizationMessage(notification.message);
			}
			if (defaultEnabled && organizationEnabled) this.recipientMessageTypes(RecipientMessageType.INTERNAL_AND_EXTERNAL);
else if (organizationEnabled) this.recipientMessageTypes(RecipientMessageType.INTERNAL_ONLY);
else this.recipientMessageTypes(RecipientMessageType.EXTERNAL_TO_EVERYONE);
			if (outOfOfficeNotification.startDate) {
				this.startDate(outOfOfficeNotification.startDate);
				this.timeRangeEnabled(true);
				if (outOfOfficeNotification.endDate) {
					const shiftedEndDate = getDayShifted(outOfOfficeNotification.endDate, -1);
					this.endDate(shiftedEndDate);
					this.indefiniteTimeRange(false);
				} else this.indefiniteTimeRange(true);
			}
		}
	}
	_setDefaultMessages() {
		const templateSubject = this._languageViewModel.get("outOfOfficeDefaultSubject_msg");
		const templateMessage = appendEmailSignature(this._languageViewModel.get("outOfOfficeDefault_msg"), this._userController.props);
		this.organizationSubject(templateSubject);
		this.defaultSubject(templateSubject);
		this.defaultMessage(templateMessage);
		this.organizationMessage(templateMessage);
	}
	/**
	* Return OutOfOfficeNotification created from input data.
	* @throws UserError if time period is invalid
	* */
	getNotificationFromData() {
		let startDate = null;
		let endDate = null;
		if (this.timeRangeEnabled()) {
			startDate = this.startDate();
			if (!this.indefiniteTimeRange()) {
				endDate = getStartOfNextDay(this.endDate());
				if (startDate.getTime() > endDate.getTime() || endDate.getTime() < Date.now()) throw new UserError("invalidTimePeriod_msg");
			}
		}
		const notificationMessages = [];
		if (this.isDefaultMessageEnabled()) {
			const defaultNotification = createOutOfOfficeNotificationMessage({
				subject: this.defaultSubject().trim(),
				message: this.defaultMessage().trim(),
				type: OutOfOfficeNotificationMessageType.Default
			});
			notificationMessages.push(defaultNotification);
		}
		if (this.isOrganizationMessageEnabled()) {
			const organizationNotification = createOutOfOfficeNotificationMessage({
				subject: this.organizationSubject().trim(),
				message: this.organizationMessage().trim(),
				type: OutOfOfficeNotificationMessageType.InsideOrganization
			});
			notificationMessages.push(organizationNotification);
		}
		this.outOfOfficeNotification._ownerGroup = this._userController.getUserMailGroupMembership().group;
		this.outOfOfficeNotification.enabled = this.enabled();
		this.outOfOfficeNotification.startDate = startDate;
		this.outOfOfficeNotification.endDate = endDate;
		this.outOfOfficeNotification.notifications = notificationMessages;
		return this.outOfOfficeNotification;
	}
	isOrganizationMessageEnabled() {
		return this.recipientMessageTypes() === RecipientMessageType.INTERNAL_ONLY || this.recipientMessageTypes() === RecipientMessageType.INTERNAL_AND_EXTERNAL;
	}
	isDefaultMessageEnabled() {
		return this.recipientMessageTypes() === RecipientMessageType.EXTERNAL_TO_EVERYONE || this.recipientMessageTypes() === RecipientMessageType.INTERNAL_AND_EXTERNAL;
	}
	/**
	* @throws UserError
	* @throws UpgradeRequiredError
	*/
	saveOutOfOfficeNotification() {
		return Promise.resolve().then(() => this.getNotificationFromData()).then(async (sendableNotification) => {
			if (this._isNewNotification()) await this._entityClient.setup(null, sendableNotification);
else await this._entityClient.update(sendableNotification);
		}).catch(ofClass(InvalidDataError, (e) => {
			throw new UserError("outOfOfficeMessageInvalid_msg");
		})).catch(ofClass(PreconditionFailedError, async (e) => {
			if (e.data === FAILURE_UPGRADE_REQUIRED) throw new UpgradeRequiredError("upgradeRequired_msg", await getAvailablePlansWithAutoResponder());
else throw new UserError(lang.makeTranslation("error_msg", e.toString()));
		}));
	}
	_isNewNotification() {
		return !this.outOfOfficeNotification._id;
	}
};

//#endregion
//#region src/mail-app/settings/EditOutOfOfficeNotificationDialog.ts
function showEditOutOfOfficeNotificationDialog(outOfOfficeNotification) {
	const dialogModel = new EditOutOfOfficeNotificationDialogModel(outOfOfficeNotification, locator.entityClient, locator.logins.getUserController(), lang, locator.serviceExecutor);
	const organizationMessageEditor = new HtmlEditor("message_label").setMinHeight(100).showBorders().setValue(dialogModel.organizationMessage()).enableToolbar();
	const defaultMessageEditor = new HtmlEditor("message_label").setMinHeight(100).showBorders().setValue(dialogModel.defaultMessage()).enableToolbar();
	const saveOutOfOfficeNotification = () => {
		dialogModel.organizationMessage(organizationMessageEditor.getValue());
		dialogModel.defaultMessage(defaultMessageEditor.getValue());
		dialogModel.saveOutOfOfficeNotification().then(() => cancel()).catch(ofClass(UserError, (e) => showUserError(e))).catch(ofClass(UpgradeRequiredError, (e) => {
			showPlanUpgradeRequiredDialog(e.plans);
		}));
	};
	function cancel() {
		dialog.close();
	}
	const dialogHeaderAttrs = {
		left: [{
			label: "cancel_action",
			click: cancel,
			type: ButtonType.Secondary
		}],
		right: [{
			label: "save_action",
			click: saveOutOfOfficeNotification,
			type: ButtonType.Primary
		}],
		middle: "outOfOfficeNotification_title"
	};
	const dialog = Dialog.editDialog(dialogHeaderAttrs, EditOutOfOfficeNotificationDialog, {
		model: dialogModel,
		organizationMessageEditor,
		defaultMessageEditor
	}).addShortcut({
		key: Keys.ESC,
		exec: cancel,
		help: "close_alt"
	}).addShortcut({
		key: Keys.S,
		ctrlOrCmd: true,
		exec: saveOutOfOfficeNotification,
		help: "save_action"
	});
	dialog.show();
}
var EditOutOfOfficeNotificationDialog = class {
	view(vnode) {
		const { model, defaultMessageEditor, organizationMessageEditor } = vnode.attrs;
		const defaultEnabled = model.isDefaultMessageEnabled();
		const organizationEnabled = model.isOrganizationMessageEnabled();
		const startOfTheWeekOffset = getStartOfTheWeekOffsetForUser(locator.logins.getUserController().userSettingsGroupRoot);
		return [
			this.renderEnabled(model),
			this.renderRecipients(model),
			mithril_default(".mt.flex-start", mithril_default(Checkbox, {
				label: () => lang.get("outOfOfficeTimeRange_msg"),
				checked: model.timeRangeEnabled(),
				onChecked: model.timeRangeEnabled,
				helpLabel: "outOfOfficeTimeRangeHelp_msg"
			})),
			model.timeRangeEnabled() ? this.renderTimeRangeSelector(model, startOfTheWeekOffset) : null,
			mithril_default(".mt-l", lang.get("outOfOfficeUnencrypted_msg")),
			organizationEnabled ? this.renderOrganizations(model, organizationMessageEditor) : null,
			defaultEnabled ? this.renderDefault(organizationEnabled, model, defaultMessageEditor) : null,
			mithril_default(".pb", "")
		];
	}
	renderEnabled(model) {
		const statusItems = [{
			name: lang.get("deactivated_label"),
			value: false
		}, {
			name: lang.get("activated_label"),
			value: true
		}];
		return mithril_default(DropDownSelector, {
			label: "state_label",
			items: statusItems,
			selectedValue: model.enabled(),
			selectionChangedHandler: model.enabled
		});
	}
	renderDefault(organizationEnabled, model, defaultMessageEditor) {
		return [
			mithril_default(".h4.text-center.mt-l", getDefaultNotificationLabel(organizationEnabled)),
			mithril_default(TextField, {
				label: "subject_label",
				value: model.defaultSubject(),
				oninput: model.defaultSubject,
				injectionsLeft: () => mithril_default(".flex-no-grow-no-shrink-auto.pr-s", { style: {
					"line-height": px(24),
					opacity: "1"
				} }, OUT_OF_OFFICE_SUBJECT_PREFIX)
			}),
			mithril_default(defaultMessageEditor)
		];
	}
	renderOrganizations(model, organizationMessageEditor) {
		return [
			mithril_default(".h4.text-center.mt-l", lang.get("outOfOfficeInternal_msg")),
			mithril_default(TextField, {
				label: "subject_label",
				value: model.organizationSubject(),
				oninput: model.organizationSubject,
				injectionsLeft: () => mithril_default(".flex-no-grow-no-shrink-auto.pr-s", { style: {
					"line-height": px(24),
					opacity: "1"
				} }, OUT_OF_OFFICE_SUBJECT_PREFIX)
			}),
			mithril_default(organizationMessageEditor)
		];
	}
	renderRecipients(model) {
		const recipientItems = [
			{
				name: lang.get("everyone_label"),
				value: RecipientMessageType.EXTERNAL_TO_EVERYONE
			},
			{
				name: lang.get("insideOutside_label"),
				value: RecipientMessageType.INTERNAL_AND_EXTERNAL
			},
			{
				name: lang.get("insideOnly_label"),
				value: RecipientMessageType.INTERNAL_ONLY
			}
		];
		const recipientHelpLabel = () => {
			switch (model.recipientMessageTypes()) {
				case RecipientMessageType.EXTERNAL_TO_EVERYONE: return lang.get("outOfOfficeRecipientsEveryoneHelp_label");
				case RecipientMessageType.INTERNAL_AND_EXTERNAL: return lang.get("outOfOfficeRecipientsInternalExternalHelp_label");
				case RecipientMessageType.INTERNAL_ONLY: return lang.get("outOfOfficeRecipientsInternalOnlyHelp_label");
				default: return "";
			}
		};
		return mithril_default(DropDownSelector, {
			label: "outOfOfficeRecipients_label",
			items: recipientItems,
			selectedValue: model.recipientMessageTypes(),
			selectionChangedHandler: model.recipientMessageTypes,
			helpLabel: recipientHelpLabel
		});
	}
	renderTimeRangeSelector(model, startOfTheWeekOffset) {
		return mithril_default(".flex.col", [
			mithril_default(DatePicker, {
				date: model.startDate(),
				onDateSelected: model.startDate,
				label: "dateFrom_label",
				nullSelectionText: "emptyString_msg",
				startOfTheWeekOffset
			}),
			mithril_default(Checkbox, {
				label: () => lang.get("unlimited_label"),
				checked: model.indefiniteTimeRange(),
				onChecked: model.indefiniteTimeRange
			}),
			!model.indefiniteTimeRange() ? mithril_default(DatePicker, {
				date: model.endDate(),
				onDateSelected: model.endDate,
				label: "dateTo_label",
				nullSelectionText: "emptyString_msg",
				startOfTheWeekOffset
			}) : null
		]);
	}
};

//#endregion
//#region src/mail-app/settings/EditSignatureDialog.ts
assertMainOrNode();
const RECOMMENDED_SIGNATURE_SIZE_LIMIT = 15360;
function show$6(props) {
	import("./Signature2-chunk.js").then(({ getDefaultSignature }) => {
		const defaultSignature = getDefaultSignature();
		let currentCustomSignature = locator.logins.getUserController().props.customEmailSignature;
		if (currentCustomSignature === "" && !locator.logins.isEnabled(FeatureType.DisableDefaultSignature)) currentCustomSignature = defaultSignature;
		let selectedType = locator.logins.getUserController().props.emailSignatureType;
		const editor = new HtmlEditor("preview_label").showBorders().setMinHeight(200).setValue(getSignature(selectedType, defaultSignature, currentCustomSignature)).enableToolbar().setToolbarOptions({ imageButtonClickHandler: insertInlineImageB64ClickHandler }).setEnabled(selectedType === EmailSignatureType.EMAIL_SIGNATURE_TYPE_CUSTOM);
		const signatureTypes = getSignatureTypes(props);
		const form = { view: () => {
			return [mithril_default(DropDownSelector, {
				label: "userEmailSignature_label",
				items: signatureTypes,
				selectedValue: selectedType,
				selectionChangedHandler: (type) => {
					if (selectedType === EmailSignatureType.EMAIL_SIGNATURE_TYPE_CUSTOM) currentCustomSignature = editor.getValue();
					selectedType = type;
					editor.setValue(getSignature(type, defaultSignature, currentCustomSignature));
					editor.setEnabled(type === EmailSignatureType.EMAIL_SIGNATURE_TYPE_CUSTOM);
				}
			}), mithril_default(editor)];
		} };
		let editSignatureOkAction = (dialog) => {
			const props$1 = locator.logins.getUserController().props;
			const newType = selectedType;
			const newCustomValue = editor.getValue();
			const oldType = props$1.emailSignatureType;
			const oldCustomValue = props$1.customEmailSignature;
			const updateSignature = () => {
				props$1.emailSignatureType = newType;
				if (newType === EmailSignatureType.EMAIL_SIGNATURE_TYPE_CUSTOM) props$1.customEmailSignature = newCustomValue;
				const updatePromise = locator.entityClient.update(props$1);
				return showProgressDialog("pleaseWait_msg", updatePromise).then(() => dialog.close()).catch(ofClass(PayloadTooLargeError, () => {
					props$1.emailSignatureType = oldType;
					props$1.customEmailSignature = oldCustomValue;
					return Dialog.message("requestTooLarge_msg");
				}));
			};
			if (newType === oldType && (newType !== EmailSignatureType.EMAIL_SIGNATURE_TYPE_CUSTOM || newCustomValue === oldCustomValue)) return dialog.close();
else if (newType === EmailSignatureType.EMAIL_SIGNATURE_TYPE_CUSTOM && newCustomValue.length > RECOMMENDED_SIGNATURE_SIZE_LIMIT) {
				const signatureSizeKb = Math.floor(newCustomValue.length / 1024);
				const confirmLargeSignatureAttrs = {
					title: downcast("userEmailSignature_label"),
					child: { view: () => mithril_default("p", lang.get("largeSignature_msg", { "{1}": signatureSizeKb })) },
					okAction: (dialog$1) => {
						dialog$1.close();
						updateSignature();
					},
					allowOkWithReturn: true
				};
				Dialog.showActionDialog(confirmLargeSignatureAttrs);
			} else updateSignature();
		};
		Dialog.showActionDialog({
			title: "userEmailSignature_label",
			child: form,
			type: DialogType.EditLarge,
			okAction: editSignatureOkAction
		});
	});
}
function getSignatureTypes(props) {
	let signatureTypes = [{
		name: lang.get("emailSignatureTypeCustom_msg"),
		value: EmailSignatureType.EMAIL_SIGNATURE_TYPE_CUSTOM
	}, {
		name: lang.get("comboBoxSelectionNone_msg"),
		value: EmailSignatureType.EMAIL_SIGNATURE_TYPE_NONE
	}];
	if (!locator.logins.isEnabled(FeatureType.DisableDefaultSignature) || props.emailSignatureType === EmailSignatureType.EMAIL_SIGNATURE_TYPE_DEFAULT) signatureTypes.splice(0, 0, {
		name: lang.get("emailSignatureTypeDefault_msg"),
		value: EmailSignatureType.EMAIL_SIGNATURE_TYPE_DEFAULT
	});
	return signatureTypes;
}
function getSignature(type, defaultSignature, currentCustomSignature) {
	if (type === EmailSignatureType.EMAIL_SIGNATURE_TYPE_DEFAULT) return defaultSignature;
else if (type === EmailSignatureType.EMAIL_SIGNATURE_TYPE_CUSTOM) return currentCustomSignature;
else return "";
}
function getSignatureType(props) {
	return neverNull(getSignatureTypes(props).find((t) => t.value === props.emailSignatureType));
}

//#endregion
//#region src/mail-app/settings/OfflineStorageSettings.ts
var OfflineStorageSettingsModel = class {
	_isInitialized = false;
	isEnabled = null;
	timeRange = OFFLINE_STORAGE_DEFAULT_TIME_RANGE_DAYS;
	constructor(userController, deviceConfig$1) {
		this.userController = userController;
		this.deviceConfig = deviceConfig$1;
	}
	available() {
		return this._isInitialized && isOfflineStorageAvailable() && !!this.isEnabled;
	}
	assertAvailable() {
		assert(this.available(), "Not initialized or not available");
	}
	/**
	* get stored time range, will error out if offlineStorage isn't available.
	* if the user account is free, always returns the default time range and
	* resets the stored value if it's different from the default.
	*/
	getTimeRange() {
		this.assertAvailable();
		if (this.userController.isFreeAccount() && this.timeRange !== OFFLINE_STORAGE_DEFAULT_TIME_RANGE_DAYS) {
			this.setTimeRange(OFFLINE_STORAGE_DEFAULT_TIME_RANGE_DAYS).catch((e) => console.log("error while resetting storage time range:", e));
			this.timeRange = OFFLINE_STORAGE_DEFAULT_TIME_RANGE_DAYS;
			return OFFLINE_STORAGE_DEFAULT_TIME_RANGE_DAYS;
		}
		return this.timeRange;
	}
	async setTimeRange(days) {
		this.assertAvailable();
		await this.deviceConfig.setOfflineTimeRangeDays(this.userController.userId, days);
		this.timeRange = days;
	}
	async init() {
		this.isEnabled = isOfflineStorageAvailable();
		if (this.isEnabled) {
			const stored = this.deviceConfig.getOfflineTimeRangeDays(this.userController.userId);
			if (stored != null) this.timeRange = stored;
		}
		this._isInitialized = true;
	}
};

//#endregion
//#region src/mail-app/settings/MailSettingsViewer.ts
var import_stream$6 = __toESM(require_stream(), 1);
assertMainOrNode();
var MailSettingsViewer = class {
	_signature;
	_mailboxProperties;
	_reportMovedMails;
	_defaultSender;
	_defaultUnconfidential;
	_sendPlaintext;
	_noAutomaticContacts;
	_enableMailIndexing;
	_inboxRulesTableLines;
	_inboxRulesExpanded;
	_indexStateWatch;
	_outOfOfficeNotification;
	_outOfOfficeStatus;
	_storageFieldValue;
	customerInfo;
	mailAddressTableModel = null;
	mailAddressTableExpanded;
	offlineStorageSettings = new OfflineStorageSettingsModel(mailLocator.logins.getUserController(), deviceConfig);
	constructor() {
		this._defaultSender = getDefaultSenderFromUser(mailLocator.logins.getUserController());
		this._signature = (0, import_stream$6.default)(getSignatureType(mailLocator.logins.getUserController().props).name);
		this._reportMovedMails = getReportMovedMailsType(null);
		this._defaultUnconfidential = mailLocator.logins.getUserController().props.defaultUnconfidential;
		this._sendPlaintext = mailLocator.logins.getUserController().props.sendPlaintextOnly;
		this._noAutomaticContacts = mailLocator.logins.getUserController().props.noAutomaticContacts;
		this._enableMailIndexing = mailLocator.search.indexState().mailIndexEnabled;
		this._inboxRulesExpanded = (0, import_stream$6.default)(false);
		this.mailAddressTableExpanded = false;
		this._inboxRulesTableLines = (0, import_stream$6.default)([]);
		this._outOfOfficeStatus = (0, import_stream$6.default)(lang.get("deactivated_label"));
		this._indexStateWatch = null;
		mailLocator.mailAddressTableModelForOwnMailbox().then((model) => {
			this.mailAddressTableModel = model;
			mithril_default.redraw();
		});
		mithril_default.redraw();
		this._updateInboxRules(mailLocator.logins.getUserController().props);
		this._mailboxProperties = new LazyLoaded(async () => {
			const mailboxGroupRoot = await this.getMailboxGroupRoot();
			return mailLocator.mailboxModel.getMailboxProperties(mailboxGroupRoot);
		});
		this._updateMailboxPropertiesSettings();
		this._outOfOfficeNotification = new LazyLoaded(() => loadOutOfOfficeNotification(), null);
		this._outOfOfficeNotification.getAsync().then(() => this._updateOutOfOfficeNotification());
		this.customerInfo = null;
		this._storageFieldValue = (0, import_stream$6.default)("");
		this.offlineStorageSettings.init().then(() => mithril_default.redraw());
	}
	async oninit() {
		this.customerInfo = await mailLocator.logins.getUserController().loadCustomerInfo();
		this.updateStorageField(this.customerInfo).then(() => mithril_default.redraw());
	}
	async getMailboxGroupRoot() {
		const { mailboxGroupRoot } = await mailLocator.mailboxModel.getUserMailboxDetails();
		return mailboxGroupRoot;
	}
	async updateStorageField(customerInfo) {
		const user = mailLocator.logins.getUserController().user;
		const usedStorage = formatStorageSize(Number(await mailLocator.userManagementFacade.readUsedUserStorage(user)));
		const totalStorage = formatStorageSize(Number(customerInfo.perUserStorageCapacity) * Const.MEMORY_GB_FACTOR);
		this._storageFieldValue(lang.get("amountUsedOf_label", {
			"{amount}": usedStorage,
			"{totalAmount}": totalStorage
		}));
	}
	view() {
		this._defaultSender = getDefaultSenderFromUser(mailLocator.logins.getUserController());
		const defaultSenderAttrs = {
			label: "defaultSenderMailAddress_label",
			items: getEnabledMailAddressesForGroupInfo(mailLocator.logins.getUserController().userGroupInfo).sort().map((a) => ({
				name: a,
				value: a
			})),
			selectedValue: this._defaultSender,
			selectedValueDisplay: getMailAddressDisplayText(this.mailAddressTableModel?.addresses().find(({ address }) => address === this._defaultSender)?.name ?? "", this._defaultSender, false),
			selectionChangedHandler: (defaultSenderAddress) => {
				mailLocator.logins.getUserController().props.defaultSender = defaultSenderAddress;
				mailLocator.entityClient.update(mailLocator.logins.getUserController().props);
			},
			helpLabel: () => lang.get("defaultSenderMailAddressInfo_msg"),
			dropdownWidth: 300
		};
		const changeSignatureButtonAttrs = {
			title: "userEmailSignature_label",
			click: () => show$6(mailLocator.logins.getUserController().props),
			icon: Icons.Edit,
			size: ButtonSize.Compact
		};
		const signatureAttrs = {
			label: "userEmailSignature_label",
			value: this._signature(),
			oninput: this._signature,
			isReadOnly: true,
			injectionsRight: () => [mithril_default(IconButton, changeSignatureButtonAttrs)]
		};
		const editOutOfOfficeNotificationButtonAttrs = {
			title: "outOfOfficeNotification_title",
			click: () => {
				this._outOfOfficeNotification.getAsync().then((notification) => showEditOutOfOfficeNotificationDialog(notification));
			},
			icon: Icons.Edit,
			size: ButtonSize.Compact
		};
		const outOfOfficeAttrs = {
			label: "outOfOfficeNotification_title",
			value: this._outOfOfficeStatus(),
			oninput: this._outOfOfficeStatus,
			isReadOnly: true,
			injectionsRight: () => [mithril_default(IconButton, editOutOfOfficeNotificationButtonAttrs)]
		};
		const defaultUnconfidentialAttrs = {
			label: "defaultExternalDelivery_label",
			items: [{
				name: lang.get("confidential_action"),
				value: false
			}, {
				name: lang.get("nonConfidential_action"),
				value: true
			}],
			selectedValue: this._defaultUnconfidential,
			selectionChangedHandler: (v) => {
				mailLocator.logins.getUserController().props.defaultUnconfidential = v;
				mailLocator.entityClient.update(mailLocator.logins.getUserController().props);
			},
			helpLabel: () => lang.get("defaultExternalDeliveryInfo_msg"),
			dropdownWidth: 250
		};
		const sendPlaintextAttrs = {
			label: "externalFormatting_label",
			helpLabel: () => lang.get("externalFormattingInfo_msg"),
			items: [{
				name: lang.get("html_action"),
				value: false
			}, {
				name: lang.get("plaintext_action"),
				value: true
			}],
			selectedValue: this._sendPlaintext,
			selectionChangedHandler: (v) => {
				mailLocator.logins.getUserController().props.sendPlaintextOnly = v;
				mailLocator.entityClient.update(mailLocator.logins.getUserController().props);
			},
			dropdownWidth: 250
		};
		const enableMailIndexingAttrs = {
			label: "searchMailbox_label",
			helpLabel: () => lang.get("enableSearchMailbox_msg"),
			items: [{
				name: lang.get("activated_label"),
				value: true
			}, {
				name: lang.get("deactivated_label"),
				value: false
			}],
			selectedValue: this._enableMailIndexing,
			selectionChangedHandler: (mailIndexEnabled) => {
				if (mailIndexEnabled) showProgressDialog("pleaseWait_msg", mailLocator.indexerFacade.enableMailIndexing()).catch(ofClass(IndexingNotSupportedError, () => {
					Dialog.message(isApp() ? "searchDisabledApp_msg" : "searchDisabled_msg");
				}));
else showProgressDialog("pleaseWait_msg", mailLocator.indexerFacade.disableMailIndexing());
			},
			dropdownWidth: 250
		};
		const behaviorAfterMoveEmailAction = {
			label: "behaviorAfterMovingEmail_label",
			helpLabel: () => "",
			items: [
				{
					name: lang.get("showOlder_label"),
					value: ListAutoSelectBehavior.OLDER
				},
				{
					name: lang.get("showNewer_label"),
					value: ListAutoSelectBehavior.NEWER
				},
				{
					name: lang.get("showNone_label"),
					value: ListAutoSelectBehavior.NONE
				}
			],
			selectedValue: deviceConfig.getMailAutoSelectBehavior(),
			selectionChangedHandler: (behavior) => deviceConfig.setMailAutoSelectBehavior(behavior),
			dropdownWidth: 250
		};
		const reportMovedMailsAttrs = this.makeReportMovedMailsDropdownAttrs();
		const templateRule = createInboxRuleTemplate(InboxRuleType.RECIPIENT_TO_EQUALS, "");
		const addInboxRuleButtonAttrs = {
			title: "addInboxRule_action",
			click: () => mailLocator.mailboxModel.getUserMailboxDetails().then((mailboxDetails) => show$1(mailboxDetails, templateRule)),
			icon: Icons.Add,
			size: ButtonSize.Compact
		};
		const inboxRulesTableAttrs = {
			columnHeading: [
				"inboxRuleField_label",
				"inboxRuleValue_label",
				"inboxRuleTargetFolder_label"
			],
			columnWidths: [
				ColumnWidth.Small,
				ColumnWidth.Largest,
				ColumnWidth.Small
			],
			showActionButtonColumn: true,
			addButtonAttrs: addInboxRuleButtonAttrs,
			lines: this._inboxRulesTableLines()
		};
		const conversationViewDropdownAttrs = {
			label: "conversationViewPref_label",
			items: [{
				name: lang.get("showAllMailsInThread_label"),
				value: false
			}, {
				name: lang.get("showOnlySelectedMail_label"),
				value: true
			}],
			selectedValue: deviceConfig.getConversationViewShowOnlySelectedMail(),
			selectionChangedHandler: (arg) => {
				deviceConfig.setConversationViewShowOnlySelectedMail(arg);
			},
			dropdownWidth: 350
		};
		return [mithril_default("#user-settings.fill-absolute.scroll.plr-l.pb-xl", {
			role: "group",
			oncreate: () => {
				this._indexStateWatch = mailLocator.search.indexState.map((newValue) => {
					this._enableMailIndexing = newValue.mailIndexEnabled;
					mithril_default.redraw();
				});
			},
			onremove: () => {
				if (this._indexStateWatch) this._indexStateWatch.end(true);
			}
		}, [
			this.customerInfo != null && Number(this.customerInfo.perUserStorageCapacity) > 0 ? [mithril_default(".h4.mt-l", lang.get("storageCapacity_label")), mithril_default(TextField, {
				label: "storageCapacity_label",
				value: this._storageFieldValue(),
				oninput: this._storageFieldValue,
				isReadOnly: true
			})] : null,
			mithril_default(".h4.mt-l", lang.get("general_label")),
			mithril_default(DropDownSelector, conversationViewDropdownAttrs),
			mithril_default(DropDownSelector, enableMailIndexingAttrs),
			mithril_default(DropDownSelector, behaviorAfterMoveEmailAction),
			mithril_default(".h4.mt-l", lang.get("emailSending_label")),
			mithril_default(DropDownSelector, defaultSenderAttrs),
			mithril_default(TextField, signatureAttrs),
			mailLocator.logins.isEnabled(FeatureType.InternalCommunication) ? null : mithril_default(DropDownSelector, defaultUnconfidentialAttrs),
			mailLocator.logins.isEnabled(FeatureType.InternalCommunication) ? null : mithril_default(DropDownSelector, sendPlaintextAttrs),
			mithril_default(DropDownSelector, reportMovedMailsAttrs),
			mithril_default(TextField, outOfOfficeAttrs),
			this.renderLocalDataSection(),
			this.mailAddressTableModel ? mithril_default(MailAddressTable, {
				model: this.mailAddressTableModel,
				expanded: this.mailAddressTableExpanded,
				onExpanded: (newExpanded) => this.mailAddressTableExpanded = newExpanded
			}) : null,
			mailLocator.logins.isEnabled(FeatureType.InternalCommunication) ? null : [
				mithril_default(".flex-space-between.items-center.mt-l.mb-s", [mithril_default(".h4", lang.get("inboxRulesSettings_action")), mithril_default(ExpanderButton, {
					label: "showInboxRules_action",
					expanded: this._inboxRulesExpanded(),
					onExpandedChange: this._inboxRulesExpanded
				})]),
				mithril_default(ExpanderPanel, { expanded: this._inboxRulesExpanded() }, mithril_default(Table, inboxRulesTableAttrs)),
				mithril_default(".small", lang.get("nbrOfInboxRules_msg", { "{1}": mailLocator.logins.getUserController().props.inboxRules.length }))
			]
		])];
	}
	renderLocalDataSection() {
		if (!this.offlineStorageSettings.available()) return null;
		return [mithril_default(".h4.mt-l", lang.get("localDataSection_label")), mithril_default(TextField, {
			label: "emptyString_msg",
			class: "mt-negative-s",
			value: lang.get("storedDataTimeRange_label", { "{numDays}": this.offlineStorageSettings.getTimeRange() }),
			isReadOnly: true,
			injectionsRight: () => [mithril_default(IconButton, {
				title: "edit_action",
				click: () => this.onEditStoredDataTimeRangeClicked(),
				icon: Icons.Edit,
				size: ButtonSize.Compact
			})]
		})];
	}
	async onEditStoredDataTimeRangeClicked() {
		if (mailLocator.logins.getUserController().isFreeAccount()) showNotAvailableForFreeDialog();
else {
			await showEditStoredDataTimeRangeDialog(this.offlineStorageSettings);
			mithril_default.redraw();
		}
	}
	_updateTutanotaPropertiesSettings(props) {
		if (props.defaultSender) this._defaultSender = props.defaultSender;
		this._defaultUnconfidential = props.defaultUnconfidential;
		this._noAutomaticContacts = props.noAutomaticContacts;
		this._sendPlaintext = props.sendPlaintextOnly;
		this._signature(getSignatureType(props).name);
	}
	_updateMailboxPropertiesSettings() {
		this._mailboxProperties.getAsync().then((props) => {
			this._reportMovedMails = getReportMovedMailsType(props);
			mithril_default.redraw();
		});
	}
	_updateInboxRules(props) {
		mailLocator.mailboxModel.getUserMailboxDetails().then(async (mailboxDetails) => {
			this._inboxRulesTableLines(await pMap(props.inboxRules, async (rule, index) => {
				return {
					cells: [
						getInboxRuleTypeName(rule.type),
						rule.value,
						await this.getTextForTarget(mailboxDetails, rule.targetFolder)
					],
					actionButtonAttrs: createRowActions({
						getArray: () => props.inboxRules,
						updateInstance: () => mailLocator.entityClient.update(props).catch(ofClass(LockedError, noOp))
					}, rule, index, [{
						label: "edit_action",
						click: () => show$1(mailboxDetails, rule)
					}])
				};
			}));
			mithril_default.redraw();
		});
	}
	_updateOutOfOfficeNotification() {
		const notification = this._outOfOfficeNotification.getLoaded();
		this._outOfOfficeStatus(formatActivateState(notification));
		mithril_default.redraw();
	}
	async getTextForTarget(mailboxDetail, targetFolderId) {
		const folders = await mailLocator.mailModel.getMailboxFoldersForId(assertNotNull(mailboxDetail.mailbox.folders)._id);
		let folder = folders.getFolderById(elementIdPart(targetFolderId));
		if (folder) return getFolderName(folder);
else return lang.get("deletedFolder_label");
	}
	async entityEventsReceived(updates) {
		for (const update of updates) {
			const { operation } = update;
			if (isUpdateForTypeRef(TutanotaPropertiesTypeRef, update) && operation === OperationType.UPDATE) {
				const props = await mailLocator.entityClient.load(TutanotaPropertiesTypeRef, mailLocator.logins.getUserController().props._id);
				this._updateTutanotaPropertiesSettings(props);
				this._updateInboxRules(props);
			} else if (isUpdateForTypeRef(MailFolderTypeRef, update)) this._updateInboxRules(mailLocator.logins.getUserController().props);
else if (isUpdateForTypeRef(OutOfOfficeNotificationTypeRef, update)) this._outOfOfficeNotification.reload().then(() => this._updateOutOfOfficeNotification());
else if (isUpdateForTypeRef(MailboxPropertiesTypeRef, update)) this._mailboxProperties.reload().then(() => this._updateMailboxPropertiesSettings());
		}
		mithril_default.redraw();
	}
	makeReportMovedMailsDropdownAttrs() {
		return {
			label: "spamReports_label",
			helpLabel: () => lang.get("unencryptedTransmission_msg"),
			items: [
				{
					name: lang.get("alwaysAsk_action"),
					value: ReportMovedMailsType.ALWAYS_ASK
				},
				{
					name: lang.get("alwaysReport_action"),
					value: ReportMovedMailsType.AUTOMATICALLY_ONLY_SPAM
				},
				{
					name: lang.get("neverReport_action"),
					value: ReportMovedMailsType.NEVER
				}
			],
			selectedValue: this._reportMovedMails,
			selectionChangedHandler: async (reportMovedMails) => {
				const mailboxGroupRoot = await this.getMailboxGroupRoot();
				await mailLocator.mailModel.saveReportMovedMails(mailboxGroupRoot, reportMovedMails);
			},
			dropdownWidth: 250
		};
	}
};
async function showEditStoredDataTimeRangeDialog(settings) {
	const initialTimeRange = settings.getTimeRange();
	let timeRange = initialTimeRange;
	const newTimeRangeDeferred = defer();
	const dialog = Dialog.showActionDialog({
		title: "emptyString_msg",
		child: () => mithril_default(TextField, {
			label: lang.makeTranslation("days_label", capitalizeFirstLetter(lang.get("days_label"))),
			helpLabel: () => lang.get("storedDataTimeRangeHelpText_msg"),
			type: TextFieldType.Number,
			value: `${timeRange}`,
			oninput: (newValue) => {
				timeRange = Math.max(0, Number(newValue));
			}
		}),
		okAction: async () => {
			try {
				if (initialTimeRange !== timeRange) await settings.setTimeRange(timeRange);
			} finally {
				dialog.close();
			}
		}
	});
	return newTimeRangeDeferred.promise;
}

//#endregion
//#region src/common/subscription/BuyDialog.ts
assertMainOrNode();
async function showBuyDialog(params) {
	if (locator.logins.isEnabled(FeatureType.HideBuyDialogs)) return true;
	const priceChangeModel = await showProgressDialog("pleaseWait_msg", prepareDialog(params));
	if (priceChangeModel) return showDialog(priceChangeModel.getActionLabel(), () => mithril_default(ConfirmSubscriptionView, {
		priceChangeModel,
		count: params.count,
		freeAmount: params.freeAmount,
		bookingText: params.bookingText
	}));
else return false;
}
async function prepareDialog({ featureType, count, reactivate }) {
	const price = await locator.bookingFacade.getPrice(featureType, count, reactivate);
	const priceChangeModel = new PriceChangeModel(price, featureType);
	const customerInfo = await locator.logins.getUserController().loadCustomerInfo();
	const accountingInfo = await locator.entityClient.load(AccountingInfoTypeRef, customerInfo.accountingInfo).catch(ofClass(NotAuthorizedError, () => null));
	if (accountingInfo && accountingInfo.paymentMethod == null) {
		const confirm = await Dialog.confirm("enterPaymentDataFirst_msg");
		if (confirm) mithril_default.route.set("/settings/invoice");
		return null;
	} else return priceChangeModel;
}
function showDialog(okLabel, view) {
	return new Promise((resolve) => {
		let dialog;
		const doAction = (res) => {
			dialog.close();
			resolve(res);
		};
		dialog = Dialog.showActionDialog({
			okActionTextId: okLabel,
			title: "bookingSummary_label",
			child: () => view(),
			okAction: () => doAction(true),
			cancelAction: () => doAction(false),
			type: DialogType.EditSmall
		});
	});
}
var ConfirmSubscriptionView = class {
	view({ attrs }) {
		const { priceChangeModel, count, freeAmount } = attrs;
		const chargeDate = incrementDate(priceChangeModel.periodEndDate(), 1);
		return mithril_default("", [
			mithril_default(TextField, {
				label: "bookingOrder_label",
				value: lang.get(attrs.bookingText, { "{1}": Math.abs(count) }),
				type: TextFieldType.Area,
				isReadOnly: true
			}),
			priceChangeModel.isBuy() ? mithril_default(TextField, {
				label: "subscription_label",
				helpLabel: () => lang.get("nextChargeOn_label", { "{chargeDate}": formatDate(chargeDate) }),
				value: this.getSubscriptionText(priceChangeModel),
				isReadOnly: true
			}) : null,
			mithril_default(TextField, {
				label: "price_label",
				helpLabel: () => this.getPriceInfoText(priceChangeModel),
				value: this.getPriceText(priceChangeModel),
				isReadOnly: true
			})
		]);
	}
	getSubscriptionText(model) {
		if (model.isYearly()) return lang.get("pricing.yearly_label");
else return lang.get("pricing.monthly_label");
	}
	getPriceText(model) {
		let netGrossText = model.taxIncluded() ? lang.get("gross_label") : lang.get("net_label");
		let periodText = model.isYearly() ? lang.get("pricing.perYear_label") : lang.get("pricing.perMonth_label");
		const futurePriceNextPeriod = model.futurePrice;
		let currentPriceNextPeriod = model.currentPrice;
		if (model.isSinglePriceType()) {
			const priceDiff = futurePriceNextPeriod - currentPriceNextPeriod;
			return `${formatPrice(priceDiff, true)} ${periodText} (${netGrossText})`;
		} else return `${formatPrice(futurePriceNextPeriod, true)} ${periodText} (${netGrossText})`;
	}
	getPriceInfoText(model) {
		if (model.isUnbuy()) return lang.get("priceChangeValidFrom_label", { "{1}": formatDate(model.periodEndDate()) });
else if (model.addedPriceForCurrentPeriod() > 0) return lang.get("priceForCurrentAccountingPeriod_label", { "{1}": formatPrice(model.addedPriceForCurrentPeriod(), true) });
else return "";
	}
};
var PriceChangeModel = class {
	currentItem;
	futureItem;
	currentPrice;
	futurePrice;
	additionalFeatures;
	constructor(price, featureType) {
		this.price = price;
		this.featureType = featureType;
		this.currentItem = getPriceItem(price.currentPriceNextPeriod, featureType);
		this.futureItem = getPriceItem(price.futurePriceNextPeriod, featureType);
		this.currentPrice = this.getPriceFromPriceData(price.currentPriceNextPeriod, featureType);
		this.futurePrice = this.getPriceFromPriceData(price.futurePriceNextPeriod, featureType);
		if (this.featureType === BookingItemFeatureType.LegacyUsers) this.additionalFeatures = new Set([
			BookingItemFeatureType.Whitelabel,
			BookingItemFeatureType.Sharing,
			BookingItemFeatureType.Business
		].filter((f) => this.getFuturePrice(f) > 0));
else this.additionalFeatures = new Set();
	}
	getActionLabel() {
		if (!this.isPriceChange()) return "accept_action";
		if (this.isBuy()) return "buy_action";
		return "order_action";
	}
	isBuy() {
		return this.currentPrice < this.futurePrice;
	}
	isUnbuy() {
		return this.currentPrice > this.futurePrice;
	}
	isPriceChange() {
		return this.currentPrice !== this.futurePrice;
	}
	isSinglePriceType() {
		return this.anyItem().singleType;
	}
	getCurrentCount() {
		return filterInt(assertNotNull(this.currentItem).count);
	}
	getFutureCount() {
		return filterInt(assertNotNull(this.futureItem).count);
	}
	isYearly() {
		const period = assertNotNull(this.price.futurePriceNextPeriod ?? this.price.currentPriceNextPeriod);
		return asPaymentInterval(period.paymentInterval) === PaymentInterval.Yearly;
	}
	taxIncluded() {
		return assertNotNull(this.price.futurePriceNextPeriod).taxIncluded;
	}
	periodEndDate() {
		return new Date(this.price.periodEndDate);
	}
	addedPriceForCurrentPeriod() {
		return this.price.currentPeriodAddedPrice ? filterInt(this.price.currentPeriodAddedPrice) : 0;
	}
	anyItem() {
		return assertNotNull(this.futureItem ?? this.currentItem);
	}
	getFuturePrice(featureType) {
		return this.getPriceFromPriceData(this.price.futurePriceNextPeriod, featureType);
	}
	/**
	* Returns the price for the feature type from the price data if available, otherwise 0.
	*/
	getPriceFromPriceData(priceData, featureType) {
		let item = getPriceItem(priceData, featureType);
		let itemPrice = item ? Number(item.price) : 0;
		if (featureType === BookingItemFeatureType.LegacyUsers) {
			itemPrice += this.getPriceFromPriceData(priceData, BookingItemFeatureType.Whitelabel);
			itemPrice += this.getPriceFromPriceData(priceData, BookingItemFeatureType.Sharing);
			itemPrice += this.getPriceFromPriceData(priceData, BookingItemFeatureType.Business);
		}
		return itemPrice;
	}
};

//#endregion
//#region src/common/settings/groups/GroupDetailsView.ts
assertMainOrNode();
var GroupDetailsView = class {
	constructor(model) {
		this.model = model;
	}
	/**
	* render the header that tells us what type of group we have here
	* @private
	*/
	renderHeader() {
		return mithril_default(".h4.mt-l", getGroupTypeDisplayName(this.model.getGroupType()));
	}
	renderView() {
		return mithril_default("#user-viewer.fill-absolute.scroll.plr-l", [
			this.renderHeader(),
			this.renderCommonInfo(),
			this.renderMailGroupInfo()
		]);
	}
	/**
	* render the fields that are common to all group types
	* @private
	*/
	renderCommonInfo() {
		return [
			this.renderCreatedTextField(),
			this.renderNameField(),
			this.renderStatusSelector(),
			this.renderMembersTable()
		];
	}
	renderCreatedTextField() {
		return mithril_default(TextField, {
			label: "created_label",
			value: formatDateWithMonth(this.model.getCreationDate()),
			isReadOnly: true
		});
	}
	/**
	* render the information that only shared mailboxes have
	* @private
	*/
	renderMailGroupInfo() {
		return [
			this.renderUsedStorage(),
			mithril_default(TextField, {
				label: "mailAddress_label",
				value: this.model.getGroupMailAddress(),
				isReadOnly: true
			}),
			mithril_default(TextField, {
				label: "mailName_label",
				value: this.model.getGroupSenderName(),
				isReadOnly: true,
				injectionsRight: () => mithril_default(IconButton, {
					icon: Icons.Edit,
					title: "setSenderName_action",
					click: () => {
						this.showChangeSenderNameDialog();
					}
				})
			})
		];
	}
	renderStatusSelector() {
		const attrs = {
			label: "state_label",
			items: [{
				name: lang.get("activated_label"),
				value: false
			}, {
				name: lang.get("deactivated_label"),
				value: true
			}],
			selectedValue: !this.model.isGroupActive(),
			selectionChangedHandler: (deactivate) => this.onActivationStatusChanged(deactivate)
		};
		return mithril_default(DropDownSelector, attrs);
	}
	async onActivationStatusChanged(deactivate) {
		const buyParams = await showProgressDialog("pleaseWait_msg", this.model.validateGroupActivationStatus(deactivate));
		if (!buyParams) return;
		const confirmed = await showBuyDialog(buyParams);
		if (!confirmed) return;
		await showProgressDialog("pleaseWait_msg", this.model.executeGroupBuy(deactivate));
	}
	renderNameField() {
		return mithril_default(TextField, {
			label: "name_label",
			value: this.model.getGroupName(),
			isReadOnly: true,
			injectionsRight: () => mithril_default(IconButton, {
				title: "edit_action",
				click: () => this.showChangeNameDialog(),
				icon: Icons.Edit,
				size: ButtonSize.Compact
			})
		});
	}
	showChangeNameDialog() {
		Dialog.showProcessTextInputDialog({
			title: "edit_action",
			label: "name_label",
			defaultValue: this.model.getGroupName(),
			inputValidator: (newName) => this.model.validateGroupName(newName)
		}, (newName) => this.model.changeGroupName(newName));
	}
	showChangeSenderNameDialog() {
		Dialog.showProcessTextInputDialog({
			title: "edit_action",
			label: "name_label",
			defaultValue: this.model.getGroupSenderName()
		}, (newName) => this.model.changeGroupSenderName(newName));
	}
	renderUsedStorage() {
		const usedStorage = this.model.getUsedStorage();
		const formattedStorage = usedStorage ? formatStorageSize(usedStorage) : lang.get("loading_msg");
		return mithril_default(TextField, {
			label: "storageCapacityUsed_label",
			value: formattedStorage,
			isReadOnly: true
		});
	}
	async showAddMemberDialog() {
		const possibleMembers = await this.model.getPossibleMembers();
		if (possibleMembers.length === 0) return Dialog.message("noValidMembersToAdd_msg");
		let currentSelection = getFirstOrThrow(possibleMembers).value;
		const addUserToGroupOkAction = (dialog) => {
			showProgressDialog("pleaseWait_msg", this.model.addUserToGroup(currentSelection));
			dialog.close();
		};
		Dialog.showActionDialog({
			title: "addUserToGroup_label",
			child: { view: () => mithril_default(DropDownSelector, {
				label: "account_label",
				items: possibleMembers,
				selectedValue: currentSelection,
				selectionChangedHandler: (newSelected) => currentSelection = newSelected,
				dropdownWidth: 250
			}) },
			allowOkWithReturn: true,
			okAction: addUserToGroupOkAction
		});
	}
	async entityEventsReceived(updates) {
		return this.model.entityEventsReceived(updates);
	}
	renderMembersTable() {
		if (!this.model.isGroupActive()) return null;
		const addUserButtonAttrs = {
			title: "addUserToGroup_label",
			click: () => this.showAddMemberDialog(),
			icon: Icons.Add,
			size: ButtonSize.Compact
		};
		const lines = this.model.getMembersInfo().map((userGroupInfo) => {
			const removeButtonAttrs = {
				title: "remove_action",
				click: () => showProgressDialog("pleaseWait_msg", this.model.removeGroupMember(userGroupInfo)),
				icon: Icons.Cancel,
				size: ButtonSize.Compact
			};
			return {
				cells: [userGroupInfo.name, neverNull(userGroupInfo.mailAddress)],
				actionButtonAttrs: removeButtonAttrs
			};
		});
		const membersTableAttrs = {
			columnHeading: ["name_label", "mailAddress_label"],
			columnWidths: [ColumnWidth.Largest, ColumnWidth.Largest],
			showActionButtonColumn: true,
			addButtonAttrs: addUserButtonAttrs,
			lines
		};
		return [mithril_default(".h5.mt-l.mb-s", lang.get("groupMembers_label")), mithril_default(Table, membersTableAttrs)];
	}
};
function getGroupTypeDisplayName(groupType) {
	if (groupType == null) return "";
else if (groupType === GroupType.Mail) return lang.get("sharedMailbox_label");
else if (groupType === GroupType.User) return lang.get("userColumn_label");
else if (groupType === GroupType.Template) return lang.get("templateGroup_label");
else return groupType;
}

//#endregion
//#region src/common/settings/ImportUsersViewer.ts
const delayTime = 900;
const CSV_USER_FORMAT = "username;user@domain.com;password";
function checkAndImportUserData(userDetailsInputCsv, availableDomains) {
	let userData = csvToUserDetails(userDetailsInputCsv);
	if (!userData) {
		Dialog.message(lang.getTranslation("wrongUserCsvFormat_msg", { "{format}": CSV_USER_FORMAT }));
		return false;
	} else {
		const errorMessage = checkAndGetErrorMessage(userData, availableDomains);
		if (!errorMessage) {
			if (userData.length > 0) showBookingDialog(userData);
			return true;
		} else {
			Dialog.message(lang.makeTranslation("error_msg", errorMessage));
			return false;
		}
	}
}
/**
* Returns the user data from the given csv string or null if the scv string is not valid
*/
function csvToUserDetails(csvString) {
	let lines = csvString.replace("\r", "").split("\n").filter((l) => "" !== l.trim());
	let error = false;
	let userData = lines.map((a) => {
		let parts = a.trim().split(";");
		if (parts.length !== 3) {
			error = true;
			return null;
		} else return {
			username: parts[0],
			mailAddress: parts[1],
			password: parts[2]
		};
	});
	if (error) return null;
else return userData;
}
/**
* Check the user data for validity. Returns an error message for the first user with invalid data, otherwise null.
*/
function checkAndGetErrorMessage(userData, availableDomains) {
	if (userData.length === 0) return lang.get("noInputWasMade_msg");
else {
		let errorMessageArray = [];
		let errorMessage = null;
		userData.find((u, index) => {
			let mailAddress = u.mailAddress;
			let domain = u.mailAddress.split("@")[1].toLowerCase().trim();
			if (!isMailAddress(u.mailAddress, true)) errorMessageArray.push("mailAddressInvalid_msg");
			if (!contains(availableDomains, domain)) errorMessageArray.push("customDomainErrorDomainNotAvailable_msg");
			if (u.password.trim() === "") errorMessageArray.push("enterMissingPassword_msg");
			if (userData.some((otherUser) => otherUser.mailAddress === mailAddress && otherUser !== u)) errorMessageArray.push("duplicatedMailAddressInUserList_msg");
			if (errorMessageArray.length > 0) {
				errorMessage = errorMessageArray.map((e) => lang.get(e)).join("\n") + "\n" + lang.get("errorAtLine_msg", {
					"{index}": index + 1,
					"{error}": `"${u.username || ""};${u.mailAddress || ""};${u.password || ""}"`
				});
				return true;
			}
		});
		return errorMessage;
	}
}
async function showBookingDialog(userDetailsArray) {
	const userController = locator.logins.getUserController();
	const planType = await userController.getPlanType();
	const accepted = await showBuyDialog({
		featureType: await userController.isNewPaidPlan() ? toFeatureType(planType) : BookingItemFeatureType.LegacyUsers,
		bookingText: "bookingItemUsersIncluding_label",
		count: userDetailsArray.length,
		freeAmount: 0,
		reactivate: false
	});
	if (!accepted) return;
	let nbrOfCreatedUsers = 0;
	let notAvailableUsers = [];
	const operation = locator.operationProgressTracker.startNewOperation();
	await showProgressDialog(lang.getTranslation("createActionStatus_msg", {
		"{index}": nbrOfCreatedUsers,
		"{count}": userDetailsArray.length
	}), pMap(userDetailsArray, (user, userIndex) => {
		return createUserIfMailAddressAvailable(user, userIndex, userDetailsArray.length, operation.id).then((created) => {
			if (created) {
				nbrOfCreatedUsers++;
				mithril_default.redraw();
			} else notAvailableUsers.push(user);
		});
	}), operation.progress).catch(ofClass(PreconditionFailedError, () => Dialog.message("createUserFailed_msg"))).finally(() => operation.done);
	if (notAvailableUsers.length > 0) await Dialog.message(lang.makeTranslation("addressesAlreadyInUse_msg", lang.get("addressesAlreadyInUse_msg") + " " + notAvailableUsers.map((u) => u.mailAddress).join(", ")));
	await Dialog.message(lang.getTranslation("createdUsersCount_msg", { "{1}": nbrOfCreatedUsers }));
}
/**
* @returns True if the user was created, false if the email address is not available.
*/
function createUserIfMailAddressAvailable(user, index, overallNumberOfUsers, operationId) {
	let cleanMailAddress = user.mailAddress.trim().toLowerCase();
	return locator.mailAddressFacade.isMailAddressAvailable(cleanMailAddress).then(async (available) => {
		if (available) return locator.userManagementFacade.createUser(user.username ? user.username : "", cleanMailAddress, user.password, index, overallNumberOfUsers, operationId).then(() => {
			return delay(delayTime).then(() => true);
		});
else return delay(delayTime).then(() => false);
	});
}

//#endregion
//#region src/common/settings/UserViewer.ts
assertMainOrNode();
var UserViewer = class {
	user = new LazyLoaded(() => this.loadUser());
	customer = new LazyLoaded(() => this.loadCustomer());
	teamGroupInfos = new LazyLoaded(() => this.loadTeamGroupInfos());
	groupsTableAttrs = null;
	secondFactorsForm;
	usedStorage = null;
	mailAddressTableModel = null;
	mailAddressTableExpanded;
	constructor(userGroupInfo, isAdmin) {
		this.userGroupInfo = userGroupInfo;
		this.isAdmin = isAdmin;
		this.userGroupInfo = userGroupInfo;
		this.mailAddressTableExpanded = false;
		this.secondFactorsForm = new SecondFactorsEditForm(this.user, locator.domainConfigProvider(), locator.loginFacade, this.isAdmin, !!this.userGroupInfo.deleted);
		this.teamGroupInfos.getAsync().then(async (availableTeamGroupInfos) => {
			if (availableTeamGroupInfos.length > 0) {
				this.groupsTableAttrs = {
					columnHeading: ["name_label", "groupType_label"],
					columnWidths: [ColumnWidth.Largest, ColumnWidth.Small],
					showActionButtonColumn: true,
					addButtonAttrs: {
						title: "addGroup_label",
						icon: Icons.Add,
						click: () => this.showAddUserToGroupDialog()
					},
					lines: []
				};
				await this.updateGroups();
			}
		});
		this.user.getAsync().then(async (user) => {
			const mailMembership = await asyncFind(user.memberships, async (ship) => {
				return ship.groupType === GroupType.Mail && (await locator.entityClient.load(GroupTypeRef, ship.group)).user === user._id;
			});
			if (mailMembership == null) {
				console.error("User doesn't have a mailbox?", user._id);
				return;
			}
			this.mailAddressTableModel = this.isItMe() ? await locator.mailAddressTableModelForOwnMailbox() : await locator.mailAddressTableModelForAdmin(mailMembership.group, user._id, this.userGroupInfo);
			mithril_default.redraw();
		});
		this.updateUsedStorageAndAdminFlag();
	}
	renderView() {
		const changePasswordButtonAttrs = {
			title: "changePassword_label",
			click: () => this.changePassword(),
			icon: Icons.Edit,
			size: ButtonSize.Compact
		};
		const passwordFieldAttrs = {
			label: "password_label",
			value: "***",
			injectionsRight: () => [mithril_default(IconButton, changePasswordButtonAttrs)],
			isReadOnly: true
		};
		return mithril_default("#user-viewer.fill-absolute.scroll.plr-l.pb-floating", [
			mithril_default(".h4.mt-l", lang.get("userSettings_label")),
			mithril_default("", [
				mithril_default(TextField, {
					label: "mailAddress_label",
					value: this.userGroupInfo.mailAddress ?? "",
					isReadOnly: true
				}),
				mithril_default(TextField, {
					label: "created_label",
					value: formatDateWithMonth(this.userGroupInfo.created),
					isReadOnly: true
				}),
				mithril_default(TextField, {
					label: "storageCapacityUsed_label",
					value: this.usedStorage ? formatStorageSize(this.usedStorage) : lang.get("loading_msg"),
					isReadOnly: true
				})
			]),
			mithril_default("", [
				this.renderName(),
				mithril_default(TextField, passwordFieldAttrs),
				locator.logins.getUserController().isGlobalAdmin() ? this.renderAdminStatusSelector() : null,
				this.renderUserStatusSelector()
			]),
			mithril_default(this.secondFactorsForm),
			this.groupsTableAttrs ? mithril_default(".h4.mt-l.mb-s", lang.get("groups_label")) : null,
			this.groupsTableAttrs ? mithril_default(Table, this.groupsTableAttrs) : null,
			this.mailAddressTableModel ? mithril_default(MailAddressTable, {
				model: this.mailAddressTableModel,
				expanded: this.mailAddressTableExpanded,
				onExpanded: (newExpanded) => this.mailAddressTableExpanded = newExpanded
			}) : progressIcon()
		]);
	}
	renderName() {
		const name = this.userGroupInfo.name;
		return mithril_default(TextField, {
			label: "name_label",
			value: name,
			isReadOnly: true,
			injectionsRight: () => mithril_default(IconButton, {
				title: "edit_action",
				click: () => this.onChangeName(name),
				icon: Icons.Edit,
				size: ButtonSize.Compact
			})
		});
	}
	onChangeName(name) {
		Dialog.showProcessTextInputDialog({
			title: "edit_action",
			label: "name_label",
			defaultValue: name
		}, (newName) => {
			this.userGroupInfo.name = newName;
			return locator.entityClient.update(this.userGroupInfo);
		});
	}
	renderAdminStatusSelector() {
		return mithril_default(DropDownSelector, {
			label: "globalAdmin_label",
			items: [{
				name: lang.get("no_label"),
				value: false
			}, {
				name: lang.get("yes_label"),
				value: true
			}],
			selectedValue: this.isAdmin,
			selectionChangedHandler: (value) => {
				if (this.userGroupInfo.deleted) Dialog.message("userAccountDeactivated_msg");
else if (this.isItMe()) Dialog.message("removeOwnAdminFlagInfo_msg");
else showProgressDialog("pleaseWait_msg", this.user.getAsync().then((user) => locator.userManagementFacade.changeAdminFlag(user, value)).catch(ofClass(PreconditionFailedError, (e) => {
					if (e.data && e.data === "usergroup.pending-key-rotation") Dialog.message("makeAdminPendingUserGroupKeyRotationError_msg");
else if (e.data === "multiadmingroup.pending-key-rotation") Dialog.message("cannotAddAdminWhenMultiAdminKeyRotationScheduled_msg");
else throw e;
				})));
			}
		});
	}
	renderUserStatusSelector() {
		return mithril_default(DropDownSelector, {
			label: "state_label",
			items: [{
				name: lang.get("activated_label"),
				value: true
			}, {
				name: lang.get("deactivated_label"),
				value: false
			}],
			selectedValue: this.userGroupInfo.deleted == null,
			selectionChangedHandler: (activate) => {
				if (this.isAdmin) Dialog.message("deactivateOwnAccountInfo_msg");
else if (activate) this.restoreUser();
else this.deleteUser();
			}
		});
	}
	isItMe() {
		return isSameId(locator.logins.getUserController().userGroupInfo._id, this.userGroupInfo._id);
	}
	changePassword() {
		if (this.isItMe()) showChangeOwnPasswordDialog();
else if (this.isAdmin) Dialog.message("changeAdminPassword_msg");
else this.user.getAsync().then((user) => {
			showChangeUserPasswordAsAdminDialog(user);
		});
	}
	async updateGroups() {
		if (this.groupsTableAttrs) {
			const user = await this.user.getAsync();
			const customer = await this.customer.getAsync();
			this.groupsTableAttrs.lines = await pMap(this.getTeamMemberships(user, customer), async (m) => {
				const groupInfo = await locator.entityClient.load(GroupInfoTypeRef, m.groupInfo);
				return {
					cells: [getGroupInfoDisplayName(groupInfo), getGroupTypeDisplayName(neverNull(m.groupType))],
					actionButtonAttrs: {
						title: "remove_action",
						click: () => {
							showProgressDialog("pleaseWait_msg", locator.groupManagementFacade.removeUserFromGroup(user._id, groupInfo.group)).catch(ofClass(NotAuthorizedError, (e) => {
								Dialog.message("removeUserFromGroupNotAdministratedUserError_msg");
							}));
						},
						icon: Icons.Cancel
					}
				};
			}, { concurrency: 5 });
		}
	}
	async showAddUserToGroupDialog() {
		const user = await this.user.getAsync();
		if (this.userGroupInfo.deleted) Dialog.message("userAccountDeactivated_msg");
else {
			const globalAdmin = locator.logins.isGlobalAdminUserLoggedIn();
			const availableGroupInfos = this.teamGroupInfos.getLoaded().filter((g) => globalAdmin && !g.deleted && !user.memberships.some((m) => isSameId(m.groupInfo, g._id))).sort(compareGroupInfos);
			if (availableGroupInfos.length > 0) {
				const dropdownItems = availableGroupInfos.map((g) => ({
					name: getGroupInfoDisplayName(g),
					value: g
				}));
				let selectedGroupInfo = getFirstOrThrow(availableGroupInfos);
				Dialog.showActionDialog({
					title: "addUserToGroup_label",
					child: { view: () => mithril_default(DropDownSelector, {
						label: "group_label",
						items: dropdownItems,
						selectedValue: selectedGroupInfo,
						selectionChangedHandler: (selection) => selectedGroupInfo = selection,
						dropdownWidth: 250
					}) },
					allowOkWithReturn: true,
					okAction: (dialog) => {
						showProgressDialog("pleaseWait_msg", locator.groupManagementFacade.addUserToGroup(user, selectedGroupInfo.group));
						dialog.close();
					}
				});
			}
		}
	}
	async updateUsedStorageAndAdminFlag() {
		const user = await this.user.getAsync();
		this.isAdmin = this.isAdminUser(user);
		try {
			this.usedStorage = await locator.userManagementFacade.readUsedUserStorage(user);
			mithril_default.redraw();
		} catch (e) {
			if (!(e instanceof BadRequestError)) throw e;
		}
	}
	getTeamMemberships(user, customer) {
		return user.memberships.filter((m) => m.groupInfo[0] === customer.teamGroups);
	}
	isAdminUser(user) {
		return user.memberships.some((m) => m.groupType === GroupType.Admin);
	}
	async deleteUser() {
		const planType = await locator.logins.getUserController().getPlanType();
		const newPlan = await locator.logins.getUserController().isNewPaidPlan();
		const confirmed = await showBuyDialog({
			featureType: newPlan ? toFeatureType(planType) : BookingItemFeatureType.LegacyUsers,
			bookingText: "cancelUserAccounts_label",
			count: -1,
			freeAmount: 0,
			reactivate: false
		});
		if (confirmed) return locator.userManagementFacade.deleteUser(await this.user.getAsync(), false).catch(ofClass(PreconditionFailedError, () => Dialog.message("stillReferencedFromContactForm_msg")));
	}
	async restoreUser() {
		const planType = await locator.logins.getUserController().getPlanType();
		const newPlan = await locator.logins.getUserController().isNewPaidPlan();
		const confirmed = await showBuyDialog({
			featureType: newPlan ? toFeatureType(planType) : BookingItemFeatureType.LegacyUsers,
			bookingText: "bookingItemUsersIncluding_label",
			count: 1,
			freeAmount: 0,
			reactivate: true
		});
		if (confirmed) await locator.userManagementFacade.deleteUser(await this.user.getAsync(), true).catch(ofClass(PreconditionFailedError, () => Dialog.message("emailAddressInUse_msg")));
	}
	async entityEventsReceived(updates) {
		for (const update of updates) {
			const { instanceListId, instanceId, operation } = update;
			if (isUpdateForTypeRef(GroupInfoTypeRef, update) && operation === OperationType.UPDATE && isSameId(this.userGroupInfo._id, [neverNull(instanceListId), instanceId])) {
				this.userGroupInfo = await locator.entityClient.load(GroupInfoTypeRef, this.userGroupInfo._id);
				await this.updateUsedStorageAndAdminFlag();
				mithril_default.redraw();
			} else if (isUpdateForTypeRef(UserTypeRef, update) && operation === OperationType.UPDATE && this.user.isLoaded() && isSameId(this.user.getLoaded()._id, instanceId)) {
				this.user.reset();
				await this.updateUsedStorageAndAdminFlag();
				await this.updateGroups();
			}
			await this.secondFactorsForm.entityEventReceived(update);
		}
		mithril_default.redraw();
	}
	loadUser() {
		return locator.entityClient.load(GroupTypeRef, this.userGroupInfo.group).then((userGroup) => {
			return locator.entityClient.load(UserTypeRef, neverNull(userGroup.user));
		});
	}
	loadCustomer() {
		return locator.logins.getUserController().loadCustomer();
	}
	loadTeamGroupInfos() {
		return this.customer.getAsync().then((customer) => locator.entityClient.loadAll(GroupInfoTypeRef, customer.teamGroups));
	}
};
function showUserImportDialog(customDomains) {
	let editor = new HtmlEditor("enterAsCSV_msg").showBorders().setMode(HtmlEditorMode.HTML).setValue(CSV_USER_FORMAT).setMinHeight(200);
	let form = { view: () => {
		return [mithril_default(editor)];
	} };
	Dialog.showActionDialog({
		title: "importUsers_action",
		child: form,
		okAction: (csvDialog) => {
			let closeCsvDialog = checkAndImportUserData(editor.getValue(), customDomains);
			if (closeCsvDialog) csvDialog.close();
		}
	});
}

//#endregion
//#region src/common/settings/AddUserDialog.ts
assertMainOrNode();
async function show$5() {
	const availableDomains = await getAvailableDomains(locator.logins);
	const onNewPaidPlan = await locator.logins.getUserController().isNewPaidPlan();
	let emailAddress = null;
	let errorMsg = "mailAddressNeutral_msg";
	let isVerificationBusy = false;
	let userName = "";
	const passwordModel = new PasswordModel(locator.usageTestController, locator.logins, {
		checkOldPassword: false,
		enforceStrength: false,
		hideConfirmation: true
	});
	let selectedDomain = getFirstOrThrow(availableDomains);
	let form = { view: () => {
		return [
			mithril_default(TextField, {
				label: "name_label",
				helpLabel: () => lang.get("loginNameInfoAdmin_msg"),
				value: userName,
				oninput: (value) => userName = value
			}),
			mithril_default(SelectMailAddressForm, {
				selectedDomain,
				availableDomains,
				onDomainChanged: (domain) => {
					if (domain.isPaid && !onNewPaidPlan) showUpgradeWizard(locator.logins, NewPaidPlans, lang.makeTranslation("change_to_new_plan", `${lang.get("paidEmailDomainLegacy_msg")}\n${lang.get("changePaidPlan_msg")}`));
else selectedDomain = domain;
				},
				onValidationResult: (email, verificationResult) => {
					if (verificationResult.isValid) {
						emailAddress = email;
						errorMsg = null;
					} else errorMsg = verificationResult.errorId;
				},
				onBusyStateChanged: (isBusy) => {
					isVerificationBusy = isBusy;
				}
			}),
			mithril_default(PasswordForm, { model: passwordModel })
		];
	} };
	let addUserOkAction = async (dialog) => {
		if (isVerificationBusy) return;
		const passwordFormError = passwordModel.getErrorMessageId();
		if (errorMsg) {
			Dialog.message(errorMsg);
			return;
		} else if (passwordFormError) {
			Dialog.message(passwordFormError);
			return;
		}
		const userController = locator.logins.getUserController();
		const planType = await userController.getPlanType();
		const newPlan = await userController.isNewPaidPlan();
		showProgressDialog("pleaseWait_msg", showBuyDialog({
			featureType: newPlan ? toFeatureType(planType) : BookingItemFeatureType.LegacyUsers,
			bookingText: "bookingItemUsers_label",
			count: 1,
			freeAmount: 0,
			reactivate: false
		})).then(async (accepted) => {
			if (accepted) {
				const operation = locator.operationProgressTracker.startNewOperation();
				const p = locator.userManagementFacade.createUser(userName.trim(), assertNotNull(emailAddress), passwordModel.getNewPassword(), 0, 1, operation.id);
				showProgressDialog(lang.getTranslation("createActionStatus_msg", {
					"{index}": 0,
					"{count}": 1
				}), p, operation.progress).catch(ofClass(PreconditionFailedError, (e) => Dialog.message("createUserFailed_msg"))).then(() => dialog.close()).finally(() => operation.done());
			}
		});
	};
	Dialog.showActionDialog({
		title: "addUsers_action",
		child: form,
		okAction: addUserOkAction
	});
}

//#endregion
//#region src/common/settings/UserListView.ts
assertMainOrNode();
var UserListView = class {
	searchQuery = "";
	listModel;
	renderConfig = {
		createElement: (dom) => {
			const row = new UserRow((groupInfo) => this.isAdmin(groupInfo));
			mithril_default.render(dom, row.render());
			return row;
		},
		itemHeight: size.list_row_height,
		swipe: null,
		multiselectionAllowed: MultiselectMode.Disabled
	};
	listId;
	adminUserGroupInfoIds = [];
	listStateSubscription = null;
	listSelectionSubscription = null;
	constructor(updateDetailsViewer, focusDetailsViewer, canImportUsers, onImportUsers, onExportUsers) {
		this.updateDetailsViewer = updateDetailsViewer;
		this.focusDetailsViewer = focusDetailsViewer;
		this.canImportUsers = canImportUsers;
		this.onImportUsers = onImportUsers;
		this.onExportUsers = onExportUsers;
		this.listModel = this.makeListModel();
		this.listId = new LazyLoaded(async () => {
			const customer = await locator.logins.getUserController().loadCustomer();
			return customer.userGroups;
		});
		this.listModel.loadInitial();
		this.oncreate = this.oncreate.bind(this);
		this.onremove = this.onremove.bind(this);
		this.view = this.view.bind(this);
	}
	shortcuts = listSelectionKeyboardShortcuts(MultiselectMode.Disabled, () => this.listModel);
	oncreate() {
		keyManager.registerShortcuts(this.shortcuts);
	}
	view() {
		if (locator.logins.isEnabled(FeatureType.WhitelabelChild)) return null;
		return mithril_default(ListColumnWrapper, { headerContent: mithril_default(".flex.flex-space-between.center-vertically.plr-l", mithril_default(BaseSearchBar, {
			text: this.searchQuery,
			onInput: (text) => this.updateQuery(text),
			busy: false,
			onKeyDown: (e) => e.stopPropagation(),
			onClear: () => {
				this.searchQuery = "";
				this.listModel.reapplyFilter();
			},
			placeholder: lang.get("searchUsers_placeholder")
		}), mithril_default(".mr-negative-s", mithril_default(IconButton, {
			title: "addUsers_action",
			icon: Icons.Add,
			click: () => this.addButtonClicked()
		}), this.renderImportButton())) }, this.listModel.isEmptyAndDone() ? mithril_default(ColumnEmptyMessageBox, {
			color: theme.list_message_bg,
			icon: BootIcons.Contacts,
			message: "noEntries_msg"
		}) : mithril_default(List, {
			renderConfig: this.renderConfig,
			state: this.listModel.state,
			onLoadMore: () => this.listModel.loadMore(),
			onRetryLoading: () => this.listModel.retryLoading(),
			onStopLoading: () => this.listModel.stopLoading(),
			onSingleSelection: (item) => {
				this.listModel.onSingleSelection(item);
				this.focusDetailsViewer();
			},
			onSingleTogglingMultiselection: noOp,
			onRangeSelectionTowards: noOp
		}));
	}
	renderImportButton() {
		if (this.canImportUsers()) return mithril_default(IconButton, attachDropdown({
			mainButtonAttrs: {
				title: "more_label",
				icon: Icons.More
			},
			childAttrs: () => [{
				label: "importUsers_action",
				click: () => {
					this.onImportUsers();
				}
			}, {
				label: "exportUsers_action",
				click: () => {
					this.onExportUsers();
				}
			}]
		}));
else return null;
	}
	onremove() {
		keyManager.unregisterShortcuts(this.shortcuts);
		this.listStateSubscription?.end(true);
		this.listSelectionSubscription?.end(true);
	}
	async loadAdmins() {
		const adminGroupMembership = locator.logins.getUserController().user.memberships.find((gm) => gm.groupType === GroupType.Admin);
		if (adminGroupMembership == null) return;
		const members = await locator.entityClient.loadAll(GroupMemberTypeRef, adminGroupMembership.groupMember[0]);
		this.adminUserGroupInfoIds = members.map((adminGroupMember) => elementIdPart(adminGroupMember.userGroupInfo));
	}
	isAdmin(userGroupInfo) {
		return contains(this.adminUserGroupInfoIds, userGroupInfo._id[1]);
	}
	addButtonClicked() {
		show$5();
	}
	async entityEventsReceived(updates) {
		for (const update of updates) {
			const { instanceListId, instanceId, operation } = update;
			if (isUpdateForTypeRef(GroupInfoTypeRef, update) && this.listId.getSync() === instanceListId) await this.listModel.entityEventReceived(instanceListId, instanceId, operation);
else if (isUpdateFor(locator.logins.getUserController().user, update)) {
				await this.loadAdmins();
				this.listModel.reapplyFilter();
			}
			mithril_default.redraw();
		}
	}
	makeListModel() {
		const listModel = new ListElementListModel({
			sortCompare: compareGroupInfos,
			fetch: async (_lastFetchedEntity) => {
				await this.loadAdmins();
				const listId = await this.listId.getAsync();
				const allUserGroupInfos = await locator.entityClient.loadAll(GroupInfoTypeRef, listId);
				return {
					items: allUserGroupInfos,
					complete: true
				};
			},
			loadSingle: async (_listId, elementId) => {
				const listId = await this.listId.getAsync();
				try {
					return await locator.entityClient.load(GroupInfoTypeRef, [listId, elementId]);
				} catch (e) {
					if (e instanceof NotFoundError) return null;
else throw e;
				}
			},
			autoSelectBehavior: () => ListAutoSelectBehavior.OLDER
		});
		listModel.setFilter((gi) => this.groupFilter() && this.queryFilter(gi));
		this.listStateSubscription?.end(true);
		this.listStateSubscription = listModel.stateStream.map((state) => {
			mithril_default.redraw();
		});
		this.listSelectionSubscription?.end(true);
		this.listSelectionSubscription = listModel.differentItemsSelected.map((newSelection) => {
			let detailsViewer;
			if (newSelection.size === 0) detailsViewer = null;
else {
				const item = newSelection.values().next().value;
				detailsViewer = new UserViewer(item, this.isAdmin(item));
			}
			this.updateDetailsViewer(detailsViewer);
			mithril_default.redraw();
		});
		return listModel;
	}
	queryFilter(gi) {
		const lowercaseSearch = this.searchQuery.toLowerCase();
		return gi.name.toLowerCase().includes(lowercaseSearch) || !!gi.mailAddress && gi.mailAddress?.toLowerCase().includes(lowercaseSearch) || gi.mailAddressAliases.some((mai) => mai.mailAddress.toLowerCase().includes(lowercaseSearch));
	}
	groupFilter = () => {
		return locator.logins.getUserController().isGlobalAdmin();
	};
	updateQuery(query) {
		this.searchQuery = query;
		this.listModel.reapplyFilter();
	}
};
var UserRow = class {
	top = 0;
	domElement = null;
	entity = null;
	nameDom;
	addressDom;
	adminIconDom;
	deletedIconDom;
	selectionUpdater;
	constructor(isAdmin) {
		this.isAdmin = isAdmin;
	}
	update(groupInfo, selected) {
		this.entity = groupInfo;
		this.selectionUpdater(selected, false);
		this.nameDom.textContent = groupInfo.name;
		this.addressDom.textContent = groupInfo.mailAddress ? groupInfo.mailAddress : "";
		setVisibility(this.adminIconDom, this.isAdmin(groupInfo));
		setVisibility(this.deletedIconDom, groupInfo.deleted != null);
	}
	/**
	* Only the structure is managed by mithril. We set all contents on our own (see update) in order to avoid the vdom overhead (not negligible on mobiles)
	*/
	render() {
		return mithril_default(SelectableRowContainer, { onSelectedChangeRef: (updater) => this.selectionUpdater = updater }, mithril_default(".flex.col.flex-grow", [mithril_default(".badge-line-height", [mithril_default("", { oncreate: (vnode) => this.nameDom = vnode.dom })]), mithril_default(".flex-space-between.mt-xxs", [mithril_default(".smaller", { oncreate: (vnode) => this.addressDom = vnode.dom }), mithril_default(".icons.flex", [mithril_default(Icon, {
			icon: BootIcons.Settings,
			oncreate: (vnode) => this.adminIconDom = vnode.dom,
			class: "svg-list-accent-fg",
			style: { display: "none" }
		}), mithril_default(Icon, {
			icon: Icons.Trash,
			oncreate: (vnode) => this.deletedIconDom = vnode.dom,
			class: "svg-list-accent-fg",
			style: { display: "none" }
		})])])]));
	}
};

//#endregion
//#region src/mail-app/settings/groups/AddGroupDialog.ts
assertMainOrNode();
var AddGroupDialog = class {
	view(vnode) {
		const { availableGroupTypes, groupType, availableDomains, onEmailChanged, onBusyStateChanged, selectedDomain, onDomainChanged } = vnode.attrs;
		return [
			availableGroupTypes.length > 1 ? mithril_default(DropDownSelector, {
				label: "groupType_label",
				items: availableGroupTypes.map((t) => {
					return {
						name: getGroupTypeDisplayName(t),
						value: t
					};
				}),
				selectedValue: groupType,
				selectionChangedHandler: vnode.attrs.onGroupTypeChanged
			}) : null,
			mithril_default(TextField, {
				label: "name_label",
				value: vnode.attrs.name,
				oninput: vnode.attrs.onGroupNameChanged
			}),
			groupType === GroupType.Mail ? mithril_default("", [
				mithril_default(SelectMailAddressForm, {
					selectedDomain,
					availableDomains,
					onValidationResult: onEmailChanged,
					onBusyStateChanged,
					onDomainChanged
				}),
				mithril_default(".mt-m", ""),
				mithril_default(MoreInfoLink, {
					link: InfoLink.SharedMailboxes,
					isSmall: true
				})
			]) : mithril_default("")
		];
	}
};
var AddGroupDialogViewModel = class {
	groupName;
	mailAddress;
	groupTypes;
	errorMessageId;
	availableDomains;
	selectedDomain;
	groupType;
	isVerifactionBusy;
	_groupManagementFacade;
	constructor(availableDomains, groupManagementFacade) {
		this.availableDomains = availableDomains;
		this._groupManagementFacade = groupManagementFacade;
		this.groupTypes = this.getAvailableGroupTypes();
		this.groupType = getFirstOrThrow(this.groupTypes);
		this.groupName = "";
		this.mailAddress = "";
		this.errorMessageId = "mailAddressNeutral_msg";
		this.isVerifactionBusy = false;
		this.selectedDomain = getFirstOrThrow(availableDomains);
	}
	createMailGroup() {
		return this._groupManagementFacade.createMailGroup(this.groupName, this.mailAddress);
	}
	validateAddGroupInput() {
		if (this.groupType === GroupType.Mail) return this.errorMessageId;
else if (this.groupType === GroupType.Template || this.groupType === GroupType.MailingList && this.groupName.trim() === "") return "enterName_msg";
else return null;
	}
	getAvailableGroupTypes() {
		if (locator.logins.isEnabled(FeatureType.WhitelabelChild)) return [];
else return [GroupType.Mail];
	}
	onEmailChanged(email, validationResult) {
		this.errorMessageId = validationResult.errorId;
		if (validationResult.isValid) this.mailAddress = email;
	}
};
function show$4() {
	getAvailableDomains(locator.logins).then((availableDomains) => {
		const viewModel = new AddGroupDialogViewModel(availableDomains, locator.groupManagementFacade);
		if (viewModel.getAvailableGroupTypes().length === 0) return Dialog.message("selectionNotAvailable_msg");
		let addGroupOkAction = async (dialog) => {
			if (viewModel.isVerifactionBusy) return;
			const errorId = viewModel.validateAddGroupInput();
			if (errorId) {
				Dialog.message(errorId);
				return;
			}
			const userController = locator.logins.getUserController();
			const planType = await userController.getPlanType();
			const useLegacyBookingItem = await userController.useLegacyBookingItem();
			if (viewModel.groupType === GroupType.Mail) showProgressDialog("pleaseWait_msg", showBuyDialog({
				featureType: useLegacyBookingItem ? toFeatureType(planType) : BookingItemFeatureType.SharedMailGroup,
				bookingText: "sharedMailbox_label",
				count: 1,
				freeAmount: 0,
				reactivate: false
			}).then((accepted) => {
				if (accepted) {
					dialog.close();
					return viewModel.createMailGroup();
				}
			}));
else if (viewModel.groupType === GroupType.Template) addTemplateGroup(viewModel.groupName).then((success) => {
				if (success) dialog.close();
			});
		};
		Dialog.showActionDialog({
			title: viewModel.groupType == GroupType.Mail ? "createSharedMailbox_label" : "addGroup_label",
			child: () => mithril_default(AddGroupDialog, {
				selectedDomain: viewModel.selectedDomain,
				groupType: viewModel.groupType,
				availableDomains,
				availableGroupTypes: viewModel.groupTypes,
				name: viewModel.groupName,
				onGroupNameChanged: (newName) => viewModel.groupName = newName,
				onGroupTypeChanged: (newType) => viewModel.groupType = newType,
				onEmailChanged: (mailAddress, validationResult) => viewModel.onEmailChanged(mailAddress, validationResult),
				onBusyStateChanged: (isBusy) => viewModel.isVerifactionBusy = isBusy,
				onDomainChanged: (domain) => viewModel.selectedDomain = domain
			}),
			okAction: addGroupOkAction
		});
	});
}
/**
* @returns {Promise<boolean>} true if group was added, false otherwise
*/
function addTemplateGroup(name) {
	return showProgressDialog("pleaseWait_msg", locator.groupManagementFacade.createTemplateGroup(name).then(() => true).catch(ofClass(PreconditionFailedError, async (e) => {
		if (e.data === TemplateGroupPreconditionFailedReason.BUSINESS_FEATURE_REQUIRED || e.data === TemplateGroupPreconditionFailedReason.UNLIMITED_REQUIRED) {
			const plans = await getAvailablePlansWithTemplates();
			showPlanUpgradeRequiredDialog(plans);
		} else Dialog.message(lang.makeTranslation("confirm_msg", e.message));
		return false;
	})));
}

//#endregion
//#region src/mail-app/settings/groups/GroupDetailsModel.ts
var GroupDetailsModel = class {
	groupInfo;
	group;
	usedStorageInBytes;
	members;
	senderName;
	constructor(groupInfo, entityClient, updateViewCallback) {
		this.entityClient = entityClient;
		this.updateViewCallback = updateViewCallback;
		this.entityClient = entityClient;
		this.groupInfo = groupInfo;
		this.group = new LazyLoaded(() => this.entityClient.load(GroupTypeRef, this.groupInfo.group));
		this.group.getAsync().then(() => this.updateViewCallback());
		this.members = new LazyLoaded(async () => {
			const group = await this.group.getAsync();
			const groupMembers = await this.entityClient.loadRange(GroupMemberTypeRef, group.members, GENERATED_MIN_ID, 200, false);
			return pMap(groupMembers, (member) => this.entityClient.load(GroupInfoTypeRef, member.userGroupInfo));
		});
		this.updateMembers();
		if (this.groupInfo.groupType === GroupType.Mail) {
			this.senderName = new LazyLoaded(() => this.loadSenderName());
			this.updateSenderName();
		}
		this.updateUsedStorage();
	}
	isMailGroup() {
		return this.groupInfo.groupType === GroupType.Mail;
	}
	async loadSenderName() {
		const names = await locator.mailAddressFacade.getSenderNames(this.groupInfo.group);
		return getFirstOrThrow(Array.from(names.values()));
	}
	isGroupActive() {
		return this.groupInfo.deleted == null;
	}
	getGroupType() {
		return this.group.isLoaded() ? this.group.getLoaded().type : null;
	}
	getGroupName() {
		return this.groupInfo.name;
	}
	getUsedStorage() {
		return this.usedStorageInBytes;
	}
	getCreationDate() {
		return this.groupInfo.created;
	}
	getMembersInfo() {
		return this.members.isLoaded() ? this.members.getLoaded() : [];
	}
	getGroupMailAddress() {
		return this.groupInfo.mailAddress ?? "";
	}
	getGroupSenderName() {
		return this.senderName.isLoaded() ? this.senderName.getLoaded() : lang.get("loading_msg");
	}
	/**
	* remove the group of the given groupInfo from this group
	*/
	async removeGroupMember(userGroupInfo) {
		try {
			const userGroup = await this.entityClient.load(GroupTypeRef, userGroupInfo.group);
			return locator.groupManagementFacade.removeUserFromGroup(assertNotNull(userGroup.user), this.groupInfo.group);
		} catch (e) {
			if (!(e instanceof NotAuthorizedError)) throw e;
			throw new UserError("removeUserFromGroupNotAdministratedError_msg");
		}
	}
	async executeGroupBuy(deactivate) {
		const group = await this.group.getAsync();
		try {
			return await locator.groupManagementFacade.deactivateGroup(group, !deactivate);
		} catch (e) {
			if (!(e instanceof PreconditionFailedError)) throw e;
			if (!deactivate) throw new UserError("emailAddressInUse_msg");
else throw new UserError("stillReferencedFromContactForm_msg");
		}
	}
	changeGroupName(newName) {
		const newGroupInfo = createGroupInfo(this.groupInfo);
		newGroupInfo.name = newName;
		return this.entityClient.update(newGroupInfo);
	}
	async changeGroupSenderName(newName) {
		if (this.senderName.isLoaded() && this.senderName.getLoaded() === newName) return;
		const mailGroupId = await this.groupInfo.group;
		await locator.mailAddressFacade.setSenderName(mailGroupId, this.getGroupMailAddress(), newName);
		this.senderName.reset();
		this.senderName.getAsync();
		this.updateViewCallback();
	}
	validateGroupName(newName) {
		if (this.group.isLoaded() && this.group.getLoaded().type === GroupType.MailingList && newName.trim() === "") return "enterName_msg";
else return null;
	}
	/**
	* validate if the given deactivation/activation is valid for this group and return information about the item to book, if any
	* @param deactivate true if the group should be deactivated
	* @return the relevant BookingParams if the activation/deactivatian may go ahead, null otherwise (no action necessary)
	*/
	async validateGroupActivationStatus(deactivate) {
		if (deactivate !== this.isGroupActive()) {
			console.log("tried to set activation status to current status.");
			return null;
		}
		const members = await this.members.getAsync();
		if (deactivate && members.length > 0) throw new UserError("groupNotEmpty_msg");
else {
			const userController = locator.logins.getUserController();
			const planType = await userController.getPlanType();
			const useLegacyBookingItem = await userController.useLegacyBookingItem();
			const bookingItemType = useLegacyBookingItem ? toFeatureType(planType) : BookingItemFeatureType.SharedMailGroup;
			const bookingText = deactivate ? "cancelSharedMailbox_label" : "sharedMailbox_label";
			return {
				featureType: bookingItemType,
				bookingText,
				count: deactivate ? -1 : 1,
				freeAmount: 0,
				reactivate: !deactivate
			};
		}
	}
	async getPossibleMembers() {
		const customer = await this.entityClient.load(CustomerTypeRef, neverNull(locator.logins.getUserController().user.customer));
		const userGroupInfos = await this.entityClient.loadAll(GroupInfoTypeRef, customer.userGroups);
		let globalAdmin = locator.logins.isGlobalAdminUserLoggedIn();
		let availableUserGroupInfos = userGroupInfos.filter((userGroupInfo) => {
			if (!globalAdmin) return false;
else return !userGroupInfo.deleted && !this.members.getLoaded().some((m) => isSameId(m._id, userGroupInfo._id));
		});
		availableUserGroupInfos.sort(compareGroupInfos);
		return availableUserGroupInfos.map((g) => ({
			name: getGroupInfoDisplayName(g),
			value: g.group
		}));
	}
	async addUserToGroup(group) {
		const userGroup = await this.entityClient.load(GroupTypeRef, group);
		const user = await this.entityClient.load(UserTypeRef, neverNull(userGroup.user));
		return locator.groupManagementFacade.addUserToGroup(user, this.groupInfo.group);
	}
	async updateMembers() {
		this.members.reset();
		await this.members.getAsync();
		this.updateViewCallback();
	}
	async updateSenderName() {
		this.senderName.reset();
		await this.senderName.getAsync();
		this.updateViewCallback();
	}
	async updateUsedStorage() {
		if (this.isMailGroup()) try {
			this.usedStorageInBytes = await locator.groupManagementFacade.readUsedSharedMailGroupStorage(await this.group.getAsync());
		} catch (e) {
			if (!(e instanceof BadRequestError)) throw e;
		}
else this.usedStorageInBytes = 0;
		this.updateViewCallback();
	}
	async entityEventsReceived(updates) {
		await pMap(updates, async (update) => {
			const { instanceListId, instanceId, operation } = update;
			if (isUpdateForTypeRef(GroupInfoTypeRef, update) && operation === OperationType.UPDATE) {
				const updatedUserGroupInfo = await this.entityClient.load(GroupInfoTypeRef, this.groupInfo._id);
				if (isSameId(this.groupInfo._id, [assertNotNull(instanceListId, "got groupInfo update without instanceListId"), instanceId])) {
					this.groupInfo = updatedUserGroupInfo;
					return this.updateUsedStorage();
				} else return this.updateMembers();
			} else if (isUpdateForTypeRef(GroupMemberTypeRef, update) && this.group.isLoaded() && this.group.getLoaded().members === assertNotNull(instanceListId, "got a groupMember update without instanceListId")) return this.updateMembers();
else if (this.isMailGroup() && isUpdateForTypeRef(MailboxPropertiesTypeRef, update) && update.operation === OperationType.UPDATE) this.updateSenderName();
		});
	}
};

//#endregion
//#region src/mail-app/settings/groups/GroupListView.ts
assertMainOrNode();
var GroupListView = class {
	searchQuery = "";
	listModel;
	renderConfig = {
		itemHeight: size.list_row_height,
		multiselectionAllowed: MultiselectMode.Disabled,
		swipe: null,
		createElement: (dom) => {
			const groupRow = new GroupRow();
			mithril_default.render(dom, groupRow.render());
			return groupRow;
		}
	};
	listId;
	listStateSubscription = null;
	constructor(updateDetailsViewer, focusDetailsViewer) {
		this.updateDetailsViewer = updateDetailsViewer;
		this.focusDetailsViewer = focusDetailsViewer;
		this.listModel = this.makeListModel();
		this.listId = new LazyLoaded(() => {
			return locator.logins.getUserController().loadCustomer().then((customer) => {
				return customer.teamGroups;
			});
		});
		this.listModel.loadInitial();
		this.oncreate = this.oncreate.bind(this);
		this.onremove = this.onremove.bind(this);
		this.view = this.view.bind(this);
	}
	shortcuts = listSelectionKeyboardShortcuts(MultiselectMode.Disabled, () => this.listModel);
	oncreate() {
		keyManager.registerShortcuts(this.shortcuts);
	}
	view() {
		return mithril_default(ListColumnWrapper, { headerContent: mithril_default(".flex.flex-space-between.center-vertically.plr-l", mithril_default(BaseSearchBar, {
			text: this.searchQuery,
			onInput: (text) => this.updateQuery(text),
			busy: false,
			onKeyDown: (e) => e.stopPropagation(),
			onClear: () => {
				this.searchQuery = "";
				this.listModel.reapplyFilter();
			},
			placeholder: lang.get("searchMailboxes_placeholder")
		}), mithril_default(".mr-negative-s", mithril_default(IconButton, {
			title: "createSharedMailbox_label",
			icon: Icons.Add,
			click: () => this.addButtonClicked()
		}))) }, this.listModel.isEmptyAndDone() ? mithril_default(ColumnEmptyMessageBox, {
			color: theme.list_message_bg,
			icon: Icons.People,
			message: "noEntries_msg"
		}) : mithril_default(List, {
			renderConfig: this.renderConfig,
			state: this.listModel.state,
			onLoadMore: () => this.listModel.loadMore(),
			onRetryLoading: () => this.listModel.retryLoading(),
			onStopLoading: () => this.listModel.stopLoading(),
			onSingleSelection: (item) => {
				this.listModel.onSingleSelection(item);
				this.focusDetailsViewer();
			},
			onSingleTogglingMultiselection: noOp,
			onRangeSelectionTowards: noOp
		}));
	}
	onremove() {
		keyManager.unregisterShortcuts(this.shortcuts);
		this.listStateSubscription?.end(true);
	}
	async addButtonClicked() {
		if (await locator.logins.getUserController().isNewPaidPlan()) show$4();
else {
			const msg = lang.makeTranslation("upgrade_text", lang.get("newPaidPlanRequired_msg") + " " + lang.get("sharedMailboxesMultiUser_msg"));
			const wizard = await import("./UpgradeSubscriptionWizard-chunk.js");
			await wizard.showUpgradeWizard(locator.logins, NewPaidPlans, msg);
		}
	}
	async entityEventsReceived(updates) {
		for (const update of updates) {
			const { instanceListId, instanceId, operation } = update;
			if (isUpdateForTypeRef(GroupInfoTypeRef, update) && this.listId.getSync() === instanceListId) await this.listModel.entityEventReceived(instanceListId, instanceId, operation);
else if (isUpdateForTypeRef(GroupMemberTypeRef, update)) this.listModel.reapplyFilter();
			mithril_default.redraw();
		}
	}
	makeListModel() {
		const listModel = new ListElementListModel({
			sortCompare: compareGroupInfos,
			fetch: async (_lastFetchedEntity, _count) => {
				const listId = await this.listId.getAsync();
				const allGroupInfos = await locator.entityClient.loadAll(GroupInfoTypeRef, listId);
				return {
					items: allGroupInfos,
					complete: true
				};
			},
			loadSingle: async (_listId, elementId) => {
				const listId = await this.listId.getAsync();
				try {
					return await locator.entityClient.load(GroupInfoTypeRef, [listId, elementId]);
				} catch (e) {
					if (e instanceof NotFoundError) return null;
else throw e;
				}
			},
			autoSelectBehavior: () => ListAutoSelectBehavior.OLDER
		});
		listModel.setFilter((item) => this.groupFilter() && this.queryFilter(item));
		this.listStateSubscription?.end(true);
		this.listStateSubscription = listModel.stateStream.map((state) => {
			this.onSelectionChanged(onlySingleSelection(state));
			mithril_default.redraw();
		});
		return listModel;
	}
	onSelectionChanged = memoized((item) => {
		if (item) {
			const newSelectionModel = new GroupDetailsModel(item, locator.entityClient, mithril_default.redraw);
			const detailsViewer = item == null ? null : new GroupDetailsView(newSelectionModel);
			this.updateDetailsViewer(detailsViewer);
		}
	});
	queryFilter(gi) {
		const lowercaseSearch = this.searchQuery.toLowerCase();
		return gi.name.toLowerCase().includes(lowercaseSearch) || !!gi.mailAddress && gi.mailAddress?.toLowerCase().includes(lowercaseSearch);
	}
	groupFilter = () => {
		return locator.logins.getUserController().isGlobalAdmin();
	};
	updateQuery(query) {
		this.searchQuery = query;
		this.listModel.reapplyFilter();
	}
};
var GroupRow = class {
	top = 0;
	domElement = null;
	entity = null;
	nameDom;
	addressDom;
	deletedIconDom;
	localAdminIconDom;
	mailIconDom;
	selectionUpdater;
	constructor() {}
	update(groupInfo, selected) {
		this.entity = groupInfo;
		this.selectionUpdater(selected, false);
		this.nameDom.textContent = groupInfo.name;
		this.addressDom.textContent = groupInfo.mailAddress ?? "";
		setVisibility(this.deletedIconDom, groupInfo.deleted != null);
		if (groupInfo.mailAddress) {
			this.localAdminIconDom.style.display = "none";
			this.mailIconDom.style.display = "";
		} else {
			this.localAdminIconDom.style.display = "";
			this.mailIconDom.style.display = "none";
		}
	}
	/**
	* Only the structure is managed by mithril. We set all contents on our own (see update) in order to avoid the vdom overhead (not negligible on mobiles)
	*/
	render() {
		return mithril_default(SelectableRowContainer, { onSelectedChangeRef: (updater) => this.selectionUpdater = updater }, mithril_default(".flex.col.flex-grow", [mithril_default(".badge-line-height", [mithril_default("", { oncreate: (vnode) => this.nameDom = vnode.dom })]), mithril_default(".flex-space-between.mt-xxs", [mithril_default(".smaller", { oncreate: (vnode) => this.addressDom = vnode.dom }), mithril_default(".icons.flex", [
			mithril_default(Icon, {
				icon: Icons.Trash,
				oncreate: (vnode) => this.deletedIconDom = vnode.dom,
				class: "svg-list-accent-fg",
				style: { display: "none" }
			}),
			mithril_default(Icon, {
				icon: BootIcons.Settings,
				oncreate: (vnode) => this.localAdminIconDom = vnode.dom,
				class: "svg-list-accent-fg",
				style: { display: "none" }
			}),
			mithril_default(Icon, {
				icon: BootIcons.Mail,
				oncreate: (vnode) => this.mailIconDom = vnode.dom,
				class: "svg-list-accent-fg",
				style: { display: "none" }
			})
		])])]));
	}
};

//#endregion
//#region src/common/settings/SetDomainCertificateDialog.ts
var import_stream$5 = __toESM(require_stream(), 1);
assertMainOrNode();
function orderWhitelabelCertificate(domain, dialog) {
	showProgressDialog("pleaseWait_msg", locator.customerFacade.orderWhitelabelCertificate(domain).then(() => {
		dialog.close();
	}).catch(ofClass(InvalidDataError, (e) => {
		Dialog.message("certificateError_msg");
	})).catch(ofClass(LockedError, (e) => Dialog.message("operationStillActive_msg"))).catch(ofClass(PreconditionFailedError, (e) => {
		switch (e.data) {
			case "lock.locked":
				Dialog.message("operationStillActive_msg");
				break;
			case "domain.invalid_cname":
				Dialog.message("invalidCnameRecord_msg");
				break;
			case "domain.not_a_subdomain":
				Dialog.message("notASubdomain_msg");
				break;
			case "domain.invalid":
			case "domain.exists":
				Dialog.message("customDomainErrorDomainNotAvailable_msg");
				break;
			default: throw e;
		}
	})));
}
function show$3(customerInfo) {
	const whitelabelDomainInfo = getWhitelabelDomainInfo(customerInfo);
	const domain = whitelabelDomainInfo ? (0, import_stream$5.default)(whitelabelDomainInfo.domain) : (0, import_stream$5.default)("");
	let form = { view: () => {
		return mithril_default(TextField, {
			label: "whitelabelDomain_label",
			value: domain(),
			oninput: domain,
			isReadOnly: whitelabelDomainInfo ? true : false
		});
	} };
	let dialog = Dialog.showActionDialog({
		title: "whitelabelDomain_label",
		child: form,
		okAction: () => {
			const domainAllLowercase = domain().trim().toLowerCase();
			if (!isDomainName(domainAllLowercase) || domainAllLowercase.split(".").length < 3) Dialog.message("notASubdomain_msg");
else if (customerInfo.domainInfos.some((di) => !di.whitelabelConfig && di.domain === domainAllLowercase)) Dialog.message("customDomainErrorDomainNotAvailable_msg");
else orderWhitelabelCertificate(domainAllLowercase, dialog);
		}
	});
}

//#endregion
//#region src/common/settings/whitelabel/WhitelabelBrandingDomainSettings.ts
const FAILURE_LOCKED = "lock.locked";
const FAILURE_CONTACT_FORM_ACTIVE = "domain.contact_form_active";
var WhitelabelBrandingDomainSettings = class {
	view(vnode) {
		const { customerInfo, certificateInfo, whitelabelDomain, isWhitelabelFeatureEnabled } = vnode.attrs;
		return mithril_default(TextField, {
			label: "whitelabelDomain_label",
			value: whitelabelDomain ? whitelabelDomain : lang.get("deactivated_label"),
			helpLabel: this.renderWhitelabelInfo(certificateInfo),
			isReadOnly: true,
			injectionsRight: () => mithril_default(".ml-between-s", [whitelabelDomain ? this.renderDeactivateButton(whitelabelDomain) : null, customerInfo ? this._renderEditButton(customerInfo, certificateInfo, isWhitelabelFeatureEnabled) : null])
		});
	}
	renderDeactivateButton(whitelabelDomain) {
		return mithril_default(IconButton, {
			title: "deactivate_action",
			click: () => this.deactivate(whitelabelDomain),
			icon: Icons.Cancel,
			size: ButtonSize.Compact
		});
	}
	async deactivate(whitelabelDomain) {
		if (await Dialog.confirm("confirmDeactivateWhitelabelDomain_msg")) try {
			return await showProgressDialog("pleaseWait_msg", locator.customerFacade.deleteCertificate(whitelabelDomain));
		} catch (e) {
			if (e instanceof PreconditionFailedError) {
				if (e.data === FAILURE_LOCKED) return await Dialog.message("operationStillActive_msg");
else if (e.data === FAILURE_CONTACT_FORM_ACTIVE) return await Dialog.message(lang.getTranslation("domainStillHasContactForms_msg", { "{domain}": whitelabelDomain }));
			}
			throw e;
		}
	}
	_renderEditButton(customerInfo, certificateInfo, isWhitelabelFeatureEnabled) {
		return mithril_default(IconButton, {
			title: "edit_action",
			click: () => this.edit(isWhitelabelFeatureEnabled, customerInfo),
			icon: Icons.Edit,
			size: ButtonSize.Compact
		});
	}
	async edit(isWhitelabelFeatureEnabled, customerInfo) {
		if (locator.logins.getUserController().isFreeAccount()) showNotAvailableForFreeDialog([PlanType.Unlimited]);
else {
			if (!isWhitelabelFeatureEnabled) {
				const plansWithWhitelabel = await getAvailablePlansWithWhitelabel();
				isWhitelabelFeatureEnabled = await showPlanUpgradeRequiredDialog(plansWithWhitelabel);
			}
			if (isWhitelabelFeatureEnabled) show$3(customerInfo);
		}
	}
	renderWhitelabelInfo(certificateInfo) {
		let components;
		if (certificateInfo) switch (certificateInfo.state) {
			case CertificateState.VALID:
				components = [lang.get("certificateExpiryDate_label", { "{date}": formatDateTime(neverNull(certificateInfo.expiryDate)) }), this.certificateTypeString(certificateInfo)];
				break;
			case CertificateState.VALIDATING:
				components = [lang.get("certificateStateProcessing_label")];
				break;
			case CertificateState.INVALID:
				components = [lang.get("certificateStateInvalid_label")];
				break;
			default: components = [lang.get("emptyString_msg")];
		}
else components = [lang.get("emptyString_msg")];
		return () => mithril_default(".flex", components.map((c) => mithril_default(".pr-s", c)));
	}
	certificateTypeString(certificateInfo) {
		switch (certificateInfo.type) {
			case CertificateType.LETS_ENCRYPT: return lang.get("certificateTypeAutomatic_label");
			case CertificateType.MANUAL: return lang.get("certificateTypeManual_label");
			default: return lang.get("emptyString_msg");
		}
	}
};

//#endregion
//#region src/common/settings/whitelabel/CustomColorEditorPreview.ts
const BUTTON_WIDTH = 270;
var CustomColorEditorPreview = class {
	_mailRow;
	_mailRow2;
	toggleSelected = false;
	constructor() {
		this._mailRow = new MailRow(false, () => [], noOp);
		this._mailRow2 = new MailRow(false, () => [], noOp);
	}
	view() {
		return mithril_default(".editor-border.mt-l.flex.col", { style: { alignItems: "center" } }, [
			mithril_default(".pt", { style: { width: px(BUTTON_WIDTH) } }, mithril_default(LoginButton, {
				label: isApp() || isDesktop() ? "addAccount_action" : "login_action",
				onclick: noOp
			})),
			mithril_default(".pt", [mithril_default(Button, {
				label: lang.makeTranslation("secondary", "Secondary"),
				click: noOp,
				type: ButtonType.Secondary
			}), mithril_default(Button, {
				label: lang.makeTranslation("primary", "Primary"),
				click: noOp,
				type: ButtonType.Primary
			})]),
			mithril_default(".pt", [mithril_default(IconButton, {
				title: lang.makeTranslation("icon_button", "Icon button"),
				icon: Icons.Folder,
				click: noOp
			}), mithril_default(ToggleButton, {
				title: lang.makeTranslation("toggle_button", "Toggle button"),
				icon: this.toggleSelected ? Icons.Lock : Icons.Unlock,
				toggled: this.toggleSelected,
				onToggled: () => this.toggleSelected = !this.toggleSelected
			})]),
			mithril_default(".pt", this.renderPreviewMailRow())
		]);
	}
	renderPreviewMailRow() {
		const mailTemplate = {
			receivedDate: new Date(),
			attachments: [],
			state: "2",
			mailDetails: null,
			authStatus: null,
			encryptionAuthStatus: null,
			method: "0",
			bucketKey: null,
			conversationEntry: ["listId", "conversationId"],
			differentEnvelopeSender: null,
			firstRecipient: null,
			listUnsubscribe: false,
			mailDetailsDraft: null,
			movedTime: null,
			phishingStatus: "0",
			recipientCount: "0",
			sets: []
		};
		const mail = createMail({
			sender: createMailAddress({
				address: "m.mustermann@example.com",
				name: "Max Mustermann",
				contact: null
			}),
			subject: "Mail 1",
			unread: false,
			replyType: "0",
			confidential: true,
			...mailTemplate
		});
		const mail2 = createMail({
			sender: createMailAddress({
				address: "m.mustermann@example.com",
				name: "Max Mustermann",
				contact: null
			}),
			subject: "Mail 2",
			unread: true,
			replyType: "1",
			confidential: false,
			...mailTemplate
		});
		return mithril_default(".rel", { style: {
			width: px(size.second_col_max_width),
			height: px(size.list_row_height * 2)
		} }, [mithril_default(".list-row.pl.pr-l.odd-row", { oncreate: (vnode) => {
			this._mailRow.domElement = vnode.dom;
			requestAnimationFrame(() => this._mailRow.update(mail, false, false));
		} }, this._mailRow.render()), mithril_default(".list-row.pl.pr-l", {
			oncreate: (vnode) => {
				this._mailRow2.domElement = vnode.dom;
				requestAnimationFrame(() => this._mailRow2.update(mail2, true, false));
			},
			style: { top: px(size.list_row_height) }
		}, this._mailRow2.render())]);
	}
};

//#endregion
//#region src/common/settings/whitelabel/CustomColorEditor.ts
var import_stream$4 = __toESM(require_stream(), 1);
const COLOR_PICKER_WIDTH = 400;
const ADVANCED_TEXTFIELD_WIDTH = 344;
const CATEGORY_WIDTH = 750;
var CustomColorEditor = class {
	_colorPickerDom = null;
	_advancedSettingsEnabled;
	constructor() {
		this._advancedSettingsEnabled = (0, import_stream$4.default)(false);
	}
	view(vnode) {
		const { model } = vnode.attrs;
		const simpleColorPickerAttrs = {
			label: "accentColor_label",
			value: vnode.attrs.model.accentColor,
			injectionsRight: () => renderColorPicker((inputEvent) => {
				vnode.attrs.model.changeAccentColor(downcast(inputEvent.target).value);
				mithril_default.redraw();
			}, vnode.attrs.model.accentColor, ({ dom }) => this._colorPickerDom = dom),
			maxWidth: COLOR_PICKER_WIDTH,
			isReadOnly: true
		};
		return mithril_default("", [mithril_default("", [mithril_default(".flex", [mithril_default(".flex-grow", mithril_default(TextField, simpleColorPickerAttrs)), mithril_default(".ml-s.flex-grow", mithril_default(DropDownSelector, {
			label: "baseTheme_label",
			items: [{
				name: lang.get("light_label"),
				value: "light"
			}, {
				name: lang.get("dark_label"),
				value: "dark"
			}],
			selectedValue: vnode.attrs.model.baseThemeId,
			selectionChangedHandler: (v) => {
				vnode.attrs.model.changeBaseTheme(v);
			}
		}))]), mithril_default(CustomColorEditorPreview)]), mithril_default("", [mithril_default(ExpanderButton, {
			label: "advanced_label",
			expanded: this._advancedSettingsEnabled(),
			onExpandedChange: this._advancedSettingsEnabled
		}), mithril_default(ExpanderPanel, { expanded: this._advancedSettingsEnabled() }, [mithril_default(".small.mt", lang.get("customColorsInfo_msg")), mithril_default(".flex.flex-column", [Object.entries(this._getGroupedColors(model.customColors)).map(([name, colors]) => {
			return mithril_default("", [mithril_default(".h4.mt-l", capitalizeFirstLetterOfString(name)), mithril_default(".editor-border.text-break.wrapping-row", { style: { maxWidth: px(CATEGORY_WIDTH) } }, [colors.map((c) => renderCustomColorField(model, c))])]);
		})])])])]);
	}
	/**
	*
	*/
	_getGroupedColors(colors) {
		const groupedColors = {
			content: [],
			header: [],
			navigation: [],
			other: []
		};
		for (const color of colors) if (color.name.startsWith("content") || color.name.startsWith("list")) groupedColors.content.push(color);
else if (color.name.startsWith("header")) groupedColors.header.push(color);
else if (color.name.startsWith("navigation")) groupedColors.navigation.push(color);
else groupedColors.other.push(color);
		return groupedColors;
	}
};
function renderCustomColorField(model, { name, value, defaultValue, valid }) {
	return mithril_default("", { style: { maxWidth: px(ADVANCED_TEXTFIELD_WIDTH) } }, [mithril_default(TextField, {
		label: lang.makeTranslation(name, name),
		value,
		injectionsRight: () => renderColorPicker((event) => model.addCustomization(name, downcast(event.target).value), processColorInputValue(value)),
		oninput: (val) => {
			model.addCustomization(name, val);
		}
	}), renderDefaultColorLine(defaultValue, valid)]);
}
function renderColorPicker(onInput, value, oncreate) {
	return mithril_default("input.color-picker.mb-xs", {
		type: "color",
		value,
		oninput: onInput,
		oncreate
	});
}
function renderDefaultColorLine(defaultColor, valid) {
	if (valid) return mithril_default(".small.flex-space-between", [mithril_default("", lang.get("defaultColor_label", { "{1}": defaultColor })), mithril_default("", { style: {
		width: "100px",
		height: "10px",
		"margin-top": "2px",
		"background-color": defaultColor
	} })]);
else return mithril_default(".small", lang.get("invalidInputFormat_msg"));
}
/**
* If the provided value is a 3-digit hex string, it expands it to a 6-digit one (#RGB #RRGGBB)
* Otherwise, it returns the provided value
*/
function processColorInputValue(value) {
	const isHexTriplet = /^#[0-9a-fA-F][0-9a-fA-F][0-9a-fA-F]$/.test(value);
	if (isHexTriplet) {
		const withoutHash = value.slice(1);
		return "#" + expandHexTriplet(withoutHash);
	} else return value;
}
function capitalizeFirstLetterOfString(string) {
	return string.charAt(0).toUpperCase() + string.slice(1);
}

//#endregion
//#region src/common/settings/whitelabel/EditCustomColorsDialog.ts
assertMainOrNode();
function show$2(model) {
	model.init();
	model.builtTheme.map(() => mithril_default.redraw());
	const form = { view: () => {
		return mithril_default(".pb", [mithril_default(CustomColorEditor, { model })]);
	} };
	const cancelAction = () => {
		model.resetActiveClientTheme().then(() => dialog.close());
	};
	const okAction = async () => {
		if (await model.save()) dialog.close();
else return Dialog.message("correctValues_msg");
	};
	let actionBarAttrs = {
		left: [{
			label: "cancel_action",
			click: cancelAction,
			type: ButtonType.Secondary
		}],
		right: [{
			label: "ok_action",
			click: okAction,
			type: ButtonType.Primary
		}],
		middle: "customColors_label"
	};
	let dialog = Dialog.largeDialog(actionBarAttrs, form).addShortcut({
		key: Keys.ESC,
		exec: cancelAction,
		help: "close_alt"
	}).setCloseHandler(cancelAction).show();
}

//#endregion
//#region src/common/settings/whitelabel/CustomColorsEditorViewModel.ts
var import_stream$3 = __toESM(require_stream(), 1);
assertMainOrNode();
var CustomColorsEditorViewModel = class {
	_customizations;
	_whitelabelConfig;
	_whitelabelDomainInfo;
	_accentColor;
	_baseTheme;
	_themeController;
	_entityClient;
	_loginController;
	_themeBeforePreview;
	builtTheme;
	constructor(currentTheme, themeCustomizations, whitelabelConfig, whitelabelDomainInfo, themeController, entityClient, loginController) {
		this._themeBeforePreview = Object.freeze(currentTheme);
		this._customizations = clone(themeCustomizations);
		this._whitelabelDomainInfo = whitelabelDomainInfo;
		this._whitelabelConfig = whitelabelConfig;
		this._themeController = themeController;
		this._entityClient = entityClient;
		this._loginController = loginController;
		this.builtTheme = (0, import_stream$3.default)();
		const baseThemeId = themeCustomizations.base ?? "light";
		const accentColor = themeCustomizations.content_accent ?? this._themeController.getDefaultTheme().content_accent;
		this.changeBaseTheme(baseThemeId);
		this.changeAccentColor(accentColor);
	}
	init() {
		this._applyEditedTheme();
	}
	get customColors() {
		const base = this._themeController.getBaseTheme(this.baseThemeId);
		return Object.keys(base).map((key) => key).filter((name) => !this._shallBeExcluded(name)).map((key) => key).sort((a, b) => a.localeCompare(b)).map((key) => {
			const value = this._customizations[key] ?? "";
			const defaultValue = base[key];
			return {
				name: key,
				value,
				defaultValue: assertNotNull(defaultValue),
				valid: this._isValidColorValue(value)
			};
		});
	}
	get accentColor() {
		return this._accentColor;
	}
	get customizations() {
		return this._customizations;
	}
	get baseThemeId() {
		return this._baseTheme;
	}
	getDefaultColor(colorName) {
		return assertNotNull(this._themeController.getBaseTheme(this.baseThemeId)[colorName]);
	}
	changeAccentColor(accentColor) {
		this._accentColor = accentColor;
		this.addCustomization("list_accent_fg", accentColor);
		this.addCustomization("content_accent", accentColor);
		this.addCustomization("content_button_selected", accentColor);
		this.addCustomization("navigation_button_selected", accentColor);
		this.addCustomization("header_button_selected", accentColor);
		this._applyEditedTheme();
	}
	changeBaseTheme(baseThemeId) {
		this._baseTheme = baseThemeId;
		this.addCustomization("base", baseThemeId);
		this._applyEditedTheme();
	}
	/**
	* Try to save changes. if there are invalid color values in the theme doesn't save and returns false, else saves and returns true
	*/
	async save() {
		const colors = Object.keys(this.customizations).filter((name) => name !== "logo" && name !== "themeId" && name !== "base");
		for (let i = 0; i < colors.length; i++) if (!this._isValidColorValue(this.customizations[colors[i]] ?? "")) return false;
		this.addCustomization("themeId", this._whitelabelDomainInfo.domain);
		this._whitelabelConfig.jsonTheme = JSON.stringify(this.customizations);
		await this._entityClient.update(this._whitelabelConfig);
		if (!this._loginController.isWhitelabel()) await this.resetActiveClientTheme();
		return true;
	}
	async resetActiveClientTheme() {
		await this._themeController.applyCustomizations(downcast(Object.assign({}, { base: null }, this._themeBeforePreview)), false);
	}
	addCustomization(nameOfKey, colorValue) {
		this.customizations[nameOfKey] = colorValue;
		this._applyEditedTheme();
	}
	_isValidColorValue(colorValue) {
		return isValidColorCode(colorValue.trim()) || colorValue.trim() === "";
	}
	/**
	* These values shall be excluded when rendering the advanced TextFields
	* @return boolean, true iff provided parameter 'name' shall be excluded
	*/
	_shallBeExcluded(name) {
		const excludedColors = [
			"logo",
			"themeId",
			"base",
			"list_accent_fg",
			"content_button_selected",
			"navigation_button_selected",
			"header_button_selected",
			"content_accent",
			"content_accent_cyber_monday",
			"content_bg_cyber_monday",
			"content_border_cyber_monday"
		];
		return excludedColors.includes(name);
	}
	_applyEditedTheme = debounceStart(100, () => {
		this._removeEmptyCustomizations();
		this._themeController.applyCustomizations(this._filterAndReturnCustomizations(), false);
	});
	_removeEmptyCustomizations() {
		this._customizations = downcast(Object.fromEntries(Object.entries(this.customizations).filter(([k, v]) => v !== "")));
	}
	/**
	*  filters out all invalid color values from ThemeCustomizations whilst keeping logo, base and themeId
	*/
	_filterAndReturnCustomizations() {
		const colorValues = Object.entries(this.customizations).filter(([n, v]) => n !== "themeId" && n !== "base" && n !== "logo");
		const filteredColorValues = colorValues.filter(([n, v]) => this._isValidColorValue(downcast(v)));
		for (const [n, v] of Object.entries(this.customizations)) if (n === "themeId" || n === "base" || n === "logo") filteredColorValues.push([n, v]);
		return downcast(Object.fromEntries(filteredColorValues));
	}
};

//#endregion
//#region src/common/settings/whitelabel/WhitelabelThemeSettings.ts
var WhitelabelThemeSettings = class {
	view(vnode) {
		const { whitelabelData } = vnode.attrs;
		return [this.renderCustomColorsField(whitelabelData), this.renderCustomLogoField(whitelabelData)];
	}
	renderCustomColorsField(data) {
		return mithril_default(TextField, {
			label: "customColors_label",
			value: this.areCustomColorsDefined(data?.customTheme ?? null) ? lang.get("activated_label") : lang.get("deactivated_label"),
			isReadOnly: true,
			injectionsRight: () => data ? this.renderCustomColorsFieldButtons(data) : null
		});
	}
	renderCustomColorsFieldButtons(whitelabelData) {
		return [this.areCustomColorsDefined(whitelabelData.customTheme) ? mithril_default(IconButton, {
			title: "deactivate_action",
			click: () => this.deactivateCustomColors(whitelabelData),
			icon: Icons.Cancel,
			size: ButtonSize.Compact
		}) : null, mithril_default(IconButton, {
			title: "edit_action",
			click: () => this.showCustomColorsDialog(whitelabelData),
			icon: Icons.Edit,
			size: ButtonSize.Compact
		})];
	}
	async deactivateCustomColors({ customTheme, whitelabelConfig, whitelabelDomainInfo }) {
		const confirmed = await Dialog.confirm("confirmDeactivateCustomColors_msg");
		if (confirmed) {
			for (const key of Object.keys(customTheme)) if (key !== "logo") delete downcast(customTheme)[key];
			this.saveCustomTheme(customTheme, whitelabelConfig, whitelabelDomainInfo);
			if (locator.logins.isWhitelabel()) await locator.themeController.applyCustomizations(customTheme);
		}
	}
	renderCustomLogoField(data) {
		const customLogoTextfieldAttrs = {
			label: "customLogo_label",
			helpLabel: () => lang.get("customLogoInfo_msg"),
			value: lang.get(data?.customTheme.logo != null ? "activated_label" : "deactivated_label"),
			isReadOnly: true,
			injectionsRight: () => data ? this.renderCustomLogoFieldButtons(data) : null
		};
		return mithril_default(TextField, customLogoTextfieldAttrs);
	}
	renderCustomLogoFieldButtons(whitelabelData) {
		return [whitelabelData.customTheme.logo ? mithril_default(IconButton, {
			title: "deactivate_action",
			click: async () => {
				await this.deactivateCustomLogo(whitelabelData);
			},
			icon: Icons.Cancel,
			size: ButtonSize.Compact
		}) : null, mithril_default(IconButton, {
			title: "edit_action",
			click: () => this.editCustomLogo(whitelabelData),
			icon: Icons.Edit,
			size: ButtonSize.Compact
		})];
	}
	async editCustomLogo({ customTheme, whitelabelConfig, whitelabelDomainInfo }) {
		const files = await showFileChooser(false);
		let extension = files[0].name.toLowerCase().substring(files[0].name.lastIndexOf(".") + 1);
		if (files[0].size > MAX_LOGO_SIZE || !contains(ALLOWED_IMAGE_FORMATS, extension)) Dialog.message("customLogoInfo_msg");
else {
			let imageData;
			if (extension === "svg") imageData = utf8Uint8ArrayToString(files[0].data);
else {
				const ext = extension === "jpeg" ? "jpg" : extension;
				const b64 = uint8ArrayToBase64(files[0].data);
				imageData = `<img src="data:image/${ext};base64,${b64}">`;
			}
			customTheme.logo = imageData;
			this.saveCustomTheme(customTheme, whitelabelConfig, whitelabelDomainInfo);
			if (locator.logins.isWhitelabel()) await locator.themeController.applyCustomizations(customTheme);
		}
	}
	async deactivateCustomLogo({ customTheme, whitelabelConfig, whitelabelDomainInfo }) {
		const confirmed = await Dialog.confirm("confirmDeactivateCustomLogo_msg");
		if (confirmed) {
			delete customTheme.logo;
			this.saveCustomTheme(customTheme, whitelabelConfig, whitelabelDomainInfo);
			if (locator.logins.isWhitelabel()) await locator.themeController.applyCustomizations(customTheme);
		}
	}
	async showCustomColorsDialog({ customTheme, whitelabelConfig, whitelabelDomainInfo }) {
		const currentTheme = locator.themeController.getCurrentTheme();
		const viewModel = new CustomColorsEditorViewModel(currentTheme, customTheme, whitelabelConfig, assertNotNull(whitelabelDomainInfo), locator.themeController, locator.entityClient, locator.logins);
		show$2(viewModel);
	}
	areCustomColorsDefined(theme$1) {
		if (theme$1) return Object.keys(theme$1).some((key) => key !== "logo" && theme$1?.[key]);
else return false;
	}
	saveCustomTheme(customTheme, whitelabelConfig, whitelabelDomainInfo) {
		whitelabelConfig.jsonTheme = JSON.stringify(customTheme);
		locator.entityClient.update(whitelabelConfig);
		customTheme.themeId = whitelabelDomainInfo.domain;
	}
};

//#endregion
//#region src/common/settings/whitelabel/WhitelabelImprintAndPrivacySettings.ts
var WhitelabelImprintAndPrivacySettings = class {
	view(vnode) {
		const { privacyStatementUrl, onPrivacyStatementUrlChanged, imprintUrl, onImprintUrlChanged } = vnode.attrs;
		return [this.renderWhitelabelImprintSetting(imprintUrl, onImprintUrlChanged), this.renderPrivacyPolicySetting(privacyStatementUrl, onPrivacyStatementUrlChanged)];
	}
	renderPrivacyPolicySetting(privacyStatementUrl, onPrivacyStatementUrlChanged) {
		return mithril_default(TextField, {
			label: "privacyPolicyUrl_label",
			value: privacyStatementUrl,
			isReadOnly: true,
			injectionsRight: () => onPrivacyStatementUrlChanged ? mithril_default(IconButton, {
				title: "edit_action",
				click: () => this.editPrivacyStatementUrl(privacyStatementUrl, onPrivacyStatementUrlChanged),
				icon: Icons.Edit,
				size: ButtonSize.Compact
			}) : null
		});
	}
	editPrivacyStatementUrl(privacyStatementUrl, onPrivacyStatementUrlChanged) {
		let dialog = Dialog.showActionDialog({
			title: "privacyLink_label",
			child: { view: () => mithril_default(TextField, {
				label: "privacyPolicyUrl_label",
				value: privacyStatementUrl,
				type: TextFieldType.Url,
				oninput: (value) => privacyStatementUrl = value.trim()
			}) },
			allowOkWithReturn: true,
			okAction: (ok) => {
				if (ok) {
					onPrivacyStatementUrlChanged(privacyStatementUrl);
					dialog.close();
				}
			}
		});
		return privacyStatementUrl;
	}
	renderWhitelabelImprintSetting(imprintUrl, onImprintUrlChanged) {
		return mithril_default(TextField, {
			label: "imprintUrl_label",
			value: imprintUrl,
			isReadOnly: true,
			injectionsRight: () => onImprintUrlChanged ? mithril_default(IconButton, {
				title: "edit_action",
				click: () => this.showEditImprintDialog(imprintUrl, onImprintUrlChanged),
				icon: Icons.Edit,
				size: ButtonSize.Compact
			}) : null
		});
	}
	showEditImprintDialog(imprintUrl, onImprintUrlChanged) {
		const dialog = Dialog.showActionDialog({
			title: "imprintUrl_label",
			child: { view: () => mithril_default(TextField, {
				label: "imprintUrl_label",
				value: imprintUrl,
				type: TextFieldType.Url,
				oninput: (value) => imprintUrl = value.trim()
			}) },
			allowOkWithReturn: true,
			okAction: (ok) => {
				if (ok) {
					onImprintUrlChanged(imprintUrl);
					dialog.close();
				}
			}
		});
		return imprintUrl;
	}
};

//#endregion
//#region src/common/settings/whitelabel/WhitelabelRegistrationSettings.ts
var WhitelabelRegistrationSettings = class {
	constructor(vnode) {}
	view(vnode) {
		const { currentRegistrationDomain, possibleRegistrationDomains, onRegistrationDomainSelected, whitelabelCode, onWhitelabelCodeChanged } = vnode.attrs;
		return mithril_default("", [this._renderRegistrationDomain(currentRegistrationDomain, possibleRegistrationDomains, onRegistrationDomainSelected), this._renderWhitelabelCodeField(whitelabelCode, onWhitelabelCodeChanged)]);
	}
	_renderRegistrationDomain(currentRegistrationDomain, possibleRegistrationDomains, onRegistrationDomainSelected) {
		return mithril_default(DropDownSelector, {
			label: "whitelabelRegistrationEmailDomain_label",
			selectedValue: currentRegistrationDomain,
			items: possibleRegistrationDomains,
			selectionChangedHandler: onRegistrationDomainSelected ? (selectedValue) => {
				onRegistrationDomainSelected(selectedValue);
			} : null,
			disabled: !onRegistrationDomainSelected
		});
	}
	_renderWhitelabelCodeField(whitelabelCode, onWhitelabelCodeChanged) {
		return mithril_default(TextField, {
			label: "whitelabelRegistrationCode_label",
			value: whitelabelCode,
			isReadOnly: true,
			injectionsRight: () => onWhitelabelCodeChanged ? mithril_default(IconButton, {
				title: "edit_action",
				click: () => this.editRegistrationCode(whitelabelCode, onWhitelabelCodeChanged),
				icon: Icons.Edit,
				size: ButtonSize.Compact
			}) : null
		});
	}
	editRegistrationCode(whitelabelCode, onWhitelabelCodeChanged) {
		Dialog.showTextInputDialog({
			title: "edit_action",
			label: "whitelabelRegistrationCode_label",
			defaultValue: whitelabelCode
		}).then((newCode) => {
			onWhitelabelCodeChanged(newCode);
		});
	}
};

//#endregion
//#region src/common/settings/whitelabel/WhitelabelCustomMetaTagsSettings.ts
var WhitelabelCustomMetaTagsSettings = class {
	view(vnode) {
		const { metaTags, onMetaTagsChanged } = vnode.attrs;
		const customMetaTagsDefined = metaTags.length > 0;
		return mithril_default(TextField, {
			label: "customMetaTags_label",
			value: customMetaTagsDefined ? lang.get("activated_label") : lang.get("deactivated_label"),
			isReadOnly: true,
			injectionsRight: () => onMetaTagsChanged ? mithril_default(IconButton, {
				title: "edit_action",
				click: () => this.showEditMetaTagsDialog(metaTags, onMetaTagsChanged),
				icon: Icons.Edit,
				size: ButtonSize.Compact
			}) : null
		});
	}
	showEditMetaTagsDialog(metaTags, onMetaTagsChanged) {
		let dialog = Dialog.showActionDialog({
			title: "customMetaTags_label",
			child: { view: () => mithril_default(TextField, {
				label: "customMetaTags_label",
				value: metaTags,
				type: TextFieldType.Area,
				oninput: (value) => {
					metaTags = value;
				}
			}) },
			okAction: (ok) => {
				if (ok) {
					onMetaTagsChanged(metaTags);
					dialog.close();
				}
			}
		});
	}
};

//#endregion
//#region src/common/settings/whitelabel/WhitelabelStatusSettings.ts
var WhitelabelStatusSettings = class {
	view({ attrs }) {
		const { isWhitelabelActive: isWhitelabelActive$1 } = attrs;
		return mithril_default(TextField, {
			label: "state_label",
			value: isWhitelabelActive$1 ? lang.get("active_label") : lang.get("deactivated_label"),
			isReadOnly: true,
			injectionsRight: () => isWhitelabelActive$1 ? null : this.renderEnable()
		});
	}
	renderEnable() {
		return mithril_default(IconButton, {
			title: "whitelabelDomain_label",
			click: async () => {
				const plansWithWhitelabel = await getAvailablePlansWithWhitelabel();
				showPlanUpgradeRequiredDialog(plansWithWhitelabel);
			},
			icon: Icons.Edit,
			size: ButtonSize.Compact
		});
	}
};

//#endregion
//#region src/common/settings/whitelabel/WhitelabelNotificationEmailSettings.ts
var import_stream$2 = __toESM(require_stream(), 1);
var WhitelabelNotificationEmailSettings = class {
	_notificationEmailsExpanded;
	constructor(vnode) {
		this._notificationEmailsExpanded = (0, import_stream$2.default)(false);
	}
	view(vnode) {
		const { onAddTemplate, onEditTemplate, onRemoveTemplate, notificationMailTemplates } = vnode.attrs;
		return this._renderNotificationEmailSettings(notificationMailTemplates, onAddTemplate, onEditTemplate, onRemoveTemplate);
	}
	_renderNotificationEmailSettings(notificationMailTemplates, onAddTemplate, onEditTemplate, onRemoveTemplate) {
		return [
			mithril_default(".flex-space-between.items-center.mt-l.mb-s", [mithril_default(".h4", lang.get("customNotificationEmails_label")), mithril_default(ExpanderButton, {
				label: "show_action",
				expanded: this._notificationEmailsExpanded(),
				onExpandedChange: this._notificationEmailsExpanded
			})]),
			mithril_default(ExpanderPanel, { expanded: this._notificationEmailsExpanded() }, mithril_default(Table, {
				columnHeading: ["language_label", "subject_label"],
				columnWidths: [ColumnWidth.Largest, ColumnWidth.Largest],
				showActionButtonColumn: true,
				addButtonAttrs: {
					title: "add_action",
					click: () => {
						onAddTemplate();
					},
					icon: Icons.Add,
					size: ButtonSize.Compact
				},
				lines: notificationMailTemplates.map((template) => {
					const languageCode = downcast(template.language);
					const langName = lang.get(languageByCode[languageCode].textId);
					return {
						cells: [langName, template.subject],
						actionButtonAttrs: attachDropdown({
							mainButtonAttrs: {
								title: "edit_action",
								icon: Icons.Edit,
								size: ButtonSize.Compact
							},
							childAttrs: () => [{
								label: "edit_action",
								click: () => onEditTemplate(template)
							}, {
								label: "remove_action",
								click: () => onRemoveTemplate(template)
							}]
						})
					};
				})
			})),
			mithril_default(".small", lang.get("customNotificationEmailsHelp_msg"))
		];
	}
};

//#endregion
//#region src/common/settings/whitelabel/WhitelabelGermanLanguageFileSettings.ts
var WhitelabelGermanLanguageFileSettings = class {
	constructor(vnode) {}
	view(vnode) {
		const { customGermanLanguageFile, onGermanLanguageFileChanged } = vnode.attrs;
		return this._renderDefaultGermanLanguageFileSettings(customGermanLanguageFile, onGermanLanguageFileChanged);
	}
	_renderDefaultGermanLanguageFileSettings(customGermanLanguageFile, onGermanLanguageFileChanged) {
		const items = [{
			name: "Deutsch (Du)",
			value: "de"
		}, {
			name: "Deutsch (Sie)",
			value: "de_sie"
		}];
		const selectedValue = customGermanLanguageFile ?? items[0].value;
		const defaultGermanLanguageFileDropDownAttrs = {
			label: "germanLanguageFile_label",
			items,
			selectedValue,
			selectionChangedHandler: onGermanLanguageFileChanged
		};
		return mithril_default(DropDownSelector, defaultGermanLanguageFileDropDownAttrs);
	}
};

//#endregion
//#region src/common/settings/whitelabel/WhitelabelSettingsViewer.ts
assertMainOrNode();
var WhitelabelSettingsViewer = class {
	_whitelabelConfig = null;
	_certificateInfo = null;
	_whitelabelDomainInfo = null;
	_customJsonTheme = null;
	_customer;
	_customerInfo;
	_planConfig;
	_customerProperties;
	_lastBooking;
	_entityClient;
	_logins;
	constructor(entityClient, logins) {
		this.view = this.view.bind(this);
		this._entityClient = entityClient;
		this._logins = logins;
		this._customer = new LazyLoaded(() => locator.logins.getUserController().loadCustomer());
		this._customerInfo = new LazyLoaded(() => locator.logins.getUserController().loadCustomerInfo());
		this._planConfig = new LazyLoaded(() => locator.logins.getUserController().getPlanConfig());
		this._customerProperties = new LazyLoaded(() => this._customer.getAsync().then((customer) => locator.entityClient.load(CustomerPropertiesTypeRef, neverNull(customer.properties))));
		this._lastBooking = null;
		this._updateFields();
	}
	view() {
		const brandingDomainConfig = this._renderBrandingDomainConfig();
		return mithril_default("#global-settings.fill-absolute.scroll.plr-l", brandingDomainConfig ? [
			mithril_default(".h4.mt-l", lang.get("whitelabel_label")),
			mithril_default(".small", lang.get("whitelabelDomainLinkInfo_msg") + " "),
			mithril_default("small.text-break", [mithril_default(`a[href=${InfoLink.Whitelabel}][target=_blank]`, InfoLink.Whitelabel)]),
			this._renderWhitelabelStatusSettings(),
			this._renderNotificationEmailSettings(),
			mithril_default(".h4.mt-l", lang.get("whitelabelDomain_label")),
			brandingDomainConfig,
			this._renderThemeSettings(),
			this._renderCustomMetaTagsSettings(),
			this._renderImprintAndPrivacySettings(),
			this._renderDefaultGermanLanguageFileSettings(),
			this._renderWhitelabelRegistrationSettings(),
			mithril_default(".mb-l")
		] : [mithril_default(".flex-center.items-center.button-height.mt-l", progressIcon())]);
	}
	_renderImprintAndPrivacySettings() {
		const whitelabelConfig = this._whitelabelConfig;
		const privacyStatementUrl = whitelabelConfig?.privacyStatementUrl ?? "";
		let onPrivacyStatementUrlChanged = null;
		if (whitelabelConfig) onPrivacyStatementUrlChanged = (privacyStatementUrl$1) => {
			whitelabelConfig.privacyStatementUrl = privacyStatementUrl$1;
			this._entityClient.update(whitelabelConfig);
		};
		const imprintUrl = whitelabelConfig?.imprintUrl ?? "";
		let onImprintUrlChanged = null;
		if (whitelabelConfig) onImprintUrlChanged = (imprintUrl$1) => {
			whitelabelConfig.imprintUrl = imprintUrl$1;
			this._entityClient.update(whitelabelConfig);
		};
		return mithril_default(WhitelabelImprintAndPrivacySettings, {
			privacyStatementUrl,
			onPrivacyStatementUrlChanged,
			imprintUrl,
			onImprintUrlChanged
		});
	}
	_renderThemeSettings() {
		const customTheme = this._customJsonTheme;
		const whitelabelConfig = this._whitelabelConfig;
		const whitelabelDomainInfo = this._whitelabelDomainInfo;
		const whitelabelThemeSettingsAttrs = { whitelabelData: whitelabelConfig && whitelabelDomainInfo && customTheme ? {
			customTheme,
			whitelabelConfig,
			whitelabelDomainInfo
		} : null };
		return mithril_default(WhitelabelThemeSettings, whitelabelThemeSettingsAttrs);
	}
	_renderWhitelabelRegistrationSettings() {
		if (!this._isWhitelabelRegistrationVisible()) return null;
		const possibleRegistrationDomains = [{
			name: lang.get("deactivated_label"),
			value: null
		}].concat(getCustomMailDomains(this._customerInfo.getLoaded()).map((d) => {
			return {
				name: d.domain,
				value: d.domain
			};
		}));
		let onRegistrationDomainSelected = noOp;
		let currentRegistrationDomain = null;
		if (this._whitelabelConfig) {
			onRegistrationDomainSelected = (domain) => {
				clear(neverNull(this._whitelabelConfig).whitelabelRegistrationDomains);
				if (domain) {
					const domainWrapper = createStringWrapper({ value: domain });
					neverNull(this._whitelabelConfig).whitelabelRegistrationDomains.push(domainWrapper);
				}
				this._entityClient.update(neverNull(this._whitelabelConfig));
			};
			if (this._whitelabelConfig.whitelabelRegistrationDomains.length > 0) currentRegistrationDomain = this._whitelabelConfig.whitelabelRegistrationDomains[0].value;
		}
		const whitelabelCode = this._whitelabelConfig ? this._whitelabelConfig.whitelabelCode : "";
		let onWhitelabelCodeChanged = noOp;
		if (this._whitelabelConfig) onWhitelabelCodeChanged = (code) => {
			neverNull(this._whitelabelConfig).whitelabelCode = code;
			this._entityClient.update(neverNull(this._whitelabelConfig));
		};
		return mithril_default(WhitelabelRegistrationSettings, {
			whitelabelCode,
			onWhitelabelCodeChanged,
			possibleRegistrationDomains,
			currentRegistrationDomain,
			onRegistrationDomainSelected
		});
	}
	_renderDefaultGermanLanguageFileSettings() {
		if (!this._whitelabelConfig) return null;
		if (lang.code !== "de" && lang.code !== "de_sie") return null;
		const customGermanLanguageFile = downcast(this._whitelabelConfig.germanLanguageCode);
		const onGermanLanguageFileChanged = (languageFile) => {
			if (languageFile) {
				neverNull(this._whitelabelConfig).germanLanguageCode = languageFile;
				this._entityClient.update(neverNull(this._whitelabelConfig));
				lang.setLanguage({
					code: languageFile,
					languageTag: lang.languageTag
				});
			}
		};
		const whitelabelGermanLanguageFileSettingsAttrs = {
			customGermanLanguageFile,
			onGermanLanguageFileChanged
		};
		return mithril_default(WhitelabelGermanLanguageFileSettings, whitelabelGermanLanguageFileSettingsAttrs);
	}
	_renderCustomMetaTagsSettings() {
		let metaTags = "";
		let onMetaTagsChanged = null;
		if (this._whitelabelConfig) {
			metaTags = this._whitelabelConfig.metaTags;
			onMetaTagsChanged = (metaTags$1) => {
				neverNull(this._whitelabelConfig).metaTags = metaTags$1;
				this._entityClient.update(neverNull(this._whitelabelConfig));
			};
		}
		const whitelabelCustomMetaTagsSettingsAttrs = {
			metaTags,
			onMetaTagsChanged
		};
		return mithril_default(WhitelabelCustomMetaTagsSettings, whitelabelCustomMetaTagsSettingsAttrs);
	}
	_renderWhitelabelStatusSettings() {
		const planConfig = this._planConfig.getSync();
		if (planConfig == null) return null;
		const whitelabelActive = isWhitelabelActive(this._lastBooking, planConfig);
		const whitelabelStatusSettingsAttrs = { isWhitelabelActive: whitelabelActive };
		return mithril_default(WhitelabelStatusSettings, whitelabelStatusSettingsAttrs);
	}
	_renderBrandingDomainConfig() {
		const customerInfo = this._customerInfo.getSync();
		const planConfig = this._planConfig.getSync();
		if (!customerInfo || !planConfig) return null;
		const certificateInfo = this._certificateInfo;
		const isWhitelabelFeatureEnabled = isWhitelabelActive(this._lastBooking, planConfig);
		const whitelabelDomain = this._whitelabelDomainInfo ? this._whitelabelDomainInfo.domain : "";
		const whitelabelBrandingDomainSettingsAttrs = {
			customerInfo,
			isWhitelabelFeatureEnabled,
			certificateInfo,
			whitelabelDomain
		};
		return mithril_default(WhitelabelBrandingDomainSettings, whitelabelBrandingDomainSettingsAttrs);
	}
	_isWhitelabelRegistrationVisible() {
		return this._customer.isLoaded() && this._customer.getLoaded().customizations.some((c) => c.feature === FeatureType.WhitelabelParent) && this._customerInfo.isLoaded() && getWhitelabelDomainInfo(this._customerInfo.getLoaded()) != null;
	}
	_tryLoadWhitelabelConfig(domainInfo) {
		if (domainInfo && domainInfo.whitelabelConfig) return Promise.all([locator.entityClient.load(WhitelabelConfigTypeRef, domainInfo.whitelabelConfig), locator.serviceExecutor.get(BrandingDomainService, null).then((response) => neverNull(response.certificateInfo))]).then(([whitelabelConfig, certificateInfo]) => ({
			whitelabelConfig,
			certificateInfo
		}));
else return Promise.resolve(null);
	}
	async _updateFields() {
		await this._planConfig.getAsync();
		const customerInfo = await this._customerInfo.getAsync();
		this._whitelabelDomainInfo = getWhitelabelDomainInfo(customerInfo);
		const data = await this._tryLoadWhitelabelConfig(this._whitelabelDomainInfo);
		this._whitelabelConfig = data?.whitelabelConfig ?? null;
		this._certificateInfo = data?.certificateInfo ?? null;
		return locator.entityClient.loadRange(BookingTypeRef, neverNull(customerInfo.bookings).items, GENERATED_MAX_ID, 1, true).then((bookings) => {
			this._lastBooking = bookings.length === 1 ? bookings[0] : null;
			this._customJsonTheme = this._whitelabelConfig ? getThemeCustomizations(this._whitelabelConfig) : null;
			mithril_default.redraw();
			this._customerProperties.getAsync().then(mithril_default.redraw);
		});
	}
	_renderNotificationEmailSettings() {
		const customerProperties = this._customerProperties.getSync();
		if (!customerProperties) return null;
		const notificationMailTemplates = customerProperties.notificationMailTemplates;
		const onAddTemplate = () => {
			showBuyOrSetNotificationEmailDialog(this._lastBooking, this._customerProperties);
		};
		const onEditTemplate = (template) => {
			show(template, this._customerProperties);
		};
		const onRemoveTemplate = (template) => {
			this._removeNotificationMailTemplate(template);
		};
		const whitelabelNotificationEmailSettingsAttrs = {
			notificationMailTemplates,
			onAddTemplate,
			onEditTemplate,
			onRemoveTemplate
		};
		return mithril_default(WhitelabelNotificationEmailSettings, whitelabelNotificationEmailSettingsAttrs);
	}
	_removeNotificationMailTemplate(template) {
		showProgressDialog("pleaseWait_msg", this._customerProperties.getAsync().then((customerProps) => {
			const index = customerProps.notificationMailTemplates.findIndex((t) => t.language === template.language);
			if (index !== -1) {
				customerProps.notificationMailTemplates.splice(index, 1);
				this._entityClient.update(customerProps);
			}
		}));
	}
	entityEventsReceived(updates) {
		return pMap(updates, (update) => {
			if (isUpdateForTypeRef(CustomerTypeRef, update) && update.operation === OperationType.UPDATE) {
				this._customer.reset();
				return this._customer.getAsync().then(() => mithril_default.redraw());
			} else if (isUpdateForTypeRef(CustomerInfoTypeRef, update) && update.operation === OperationType.UPDATE) {
				this._customerInfo.reset();
				return this._updateFields();
			} else if (isUpdateForTypeRef(WhitelabelConfigTypeRef, update) && update.operation === OperationType.UPDATE) return this._updateFields();
else if (isUpdateForTypeRef(CustomerPropertiesTypeRef, update) && update.operation === OperationType.UPDATE) {
				this._customerProperties.reset();
				return this._updateFields();
			} else if (isUpdateForTypeRef(BookingTypeRef, update)) return this._updateFields();
		}).then(noOp);
	}
};

//#endregion
//#region src/common/settings/AppearanceSettingsViewer.ts
var AppearanceSettingsViewer = class {
	_customThemes = null;
	oncreate() {
		locator.themeController.getCustomThemes().then((themes) => {
			this._customThemes = themes;
			mithril_default.redraw();
		});
	}
	view() {
		const actualLanguageItems = languageNative.map((language) => {
			return {
				name: language.textName,
				value: language.code
			};
		}).sort((l1, l2) => l1.name.localeCompare(l2.name));
		const languageItems = actualLanguageItems.concat({
			name: lang.get("automatic_label"),
			value: null
		});
		const languageDropDownAttrs = {
			label: "language_label",
			items: languageItems,
			selectedValue: deviceConfig.getLanguage() || null,
			selectionChangedHandler: async (value) => {
				deviceConfig.setLanguage(value);
				const newLanguage = value ? {
					code: value,
					languageTag: languageCodeToTag(value)
				} : getLanguage();
				await lang.setLanguage(newLanguage);
				if (isDesktop()) await locator.desktopSettingsFacade.changeLanguage(newLanguage.code, newLanguage.languageTag);
				styles.updateStyle("main");
				mithril_default.redraw();
			}
		};
		const userSettingsGroupRoot = locator.logins.getUserController().userSettingsGroupRoot;
		const hourFormatDropDownAttrs = {
			label: "timeFormat_label",
			items: [{
				name: lang.get("timeFormatTwentyFourHour_label"),
				value: TimeFormat.TWENTY_FOUR_HOURS
			}, {
				name: lang.get("timeFormatTwelveHour_label"),
				value: TimeFormat.TWELVE_HOURS
			}],
			selectedValue: downcast(userSettingsGroupRoot.timeFormat),
			selectionChangedHandler: (value) => {
				userSettingsGroupRoot.timeFormat = value;
				locator.entityClient.update(userSettingsGroupRoot);
			}
		};
		const weekdayFormat = new Intl.DateTimeFormat(lang.languageTag, { weekday: "long" });
		const calcDate = new Date();
		const sundayName = weekdayFormat.format(incrementDate(calcDate, -calcDate.getDay()));
		const mondayName = weekdayFormat.format(incrementDate(calcDate, 1));
		const saturdayName = weekdayFormat.format(incrementDate(calcDate, 5));
		const weekStartDropDownAttrs = {
			label: "weekStart_label",
			items: [
				{
					name: mondayName,
					value: WeekStart.MONDAY
				},
				{
					name: saturdayName,
					value: WeekStart.SATURDAY
				},
				{
					name: sundayName,
					value: WeekStart.SUNDAY
				}
			],
			selectedValue: downcast(userSettingsGroupRoot.startOfTheWeek),
			selectionChangedHandler: (value) => {
				userSettingsGroupRoot.startOfTheWeek = value;
				locator.entityClient.update(userSettingsGroupRoot);
			}
		};
		return mithril_default(".fill-absolute.scroll.plr-l.pb-xl", [
			mithril_default(".h4.mt-l", lang.get("settingsForDevice_label")),
			mithril_default(DropDownSelector, languageDropDownAttrs),
			this._renderThemeSelector(),
			mithril_default(".h4.mt-l", lang.get("userSettings_label")),
			mithril_default(DropDownSelector, hourFormatDropDownAttrs),
			mithril_default(DropDownSelector, weekStartDropDownAttrs)
		]);
	}
	_renderThemeSelector() {
		if (!locator.themeController.shouldAllowChangingTheme() || this._customThemes == null) return null;
		const customOptions = this._customThemes.map((themeId) => {
			return {
				name: themeId,
				value: themeId
			};
		});
		const themeDropDownAttrs = {
			label: "switchColorTheme_action",
			items: [...themeOptions(client.isCalendarApp()).map(({ name, value }) => ({
				name: lang.get(name),
				value
			})), ...customOptions],
			selectedValue: locator.themeController.themePreference,
			selectionChangedHandler: (value) => locator.themeController.setThemePreference(value),
			dropdownWidth: 300
		};
		return mithril_default(DropDownSelector, themeDropDownAttrs);
	}
	entityEventsReceived(updates) {
		return pMap(updates, (update) => {
			if (isUpdateForTypeRef(UserSettingsGroupRootTypeRef, update)) return locator.entityClient.load(UserSettingsGroupRootTypeRef, update.instanceId).then((settings) => {
				lang.updateFormats({ hourCycle: getHourCycle(settings) });
				mithril_default.redraw();
			});
		}).then(noOp);
	}
};

//#endregion
//#region src/mail-app/settings/KnowledgeBaseListView.ts
assertMainOrNode();
var KnowledgeBaseListView = class {
	searchQuery = "";
	resultItemIds = [];
	listModel;
	listStateSubscription = null;
	renderConfig = {
		itemHeight: size.list_row_height,
		multiselectionAllowed: MultiselectMode.Disabled,
		swipe: null,
		createElement: (dom) => {
			const knowledgebaseRow = new KnowledgeBaseRow();
			mithril_default.render(dom, knowledgebaseRow.render());
			return knowledgebaseRow;
		}
	};
	shortcuts = listSelectionKeyboardShortcuts(MultiselectMode.Disabled, () => this.listModel);
	constructor(entityClient, logins, templateGroupRoot, templateGroup, updateDetailsViewer, focusDetailsViewer) {
		this.entityClient = entityClient;
		this.logins = logins;
		this.templateGroupRoot = templateGroupRoot;
		this.templateGroup = templateGroup;
		this.updateDetailsViewer = updateDetailsViewer;
		this.focusDetailsViewer = focusDetailsViewer;
		this.listModel = this.makeListModel();
		this.listModel.loadInitial();
		this.view = this.view.bind(this);
		this.oncreate = this.oncreate.bind(this);
		this.onremove = this.onremove.bind(this);
	}
	oncreate() {
		keyManager.registerShortcuts(this.shortcuts);
	}
	onremove() {
		keyManager.unregisterShortcuts(this.shortcuts);
	}
	makeListModel() {
		const listModel = new ListElementListModel({
			sortCompare: (a, b) => {
				const titleA = a.title.toUpperCase();
				const titleB = b.title.toUpperCase();
				return titleA < titleB ? -1 : titleA > titleB ? 1 : 0;
			},
			fetch: async (_lastFetchedEntity, _count) => {
				const allEntries = await this.entityClient.loadAll(KnowledgeBaseEntryTypeRef, this.getListId());
				return {
					items: allEntries,
					complete: true
				};
			},
			loadSingle: (_listId, elementId) => {
				return this.entityClient.load(KnowledgeBaseEntryTypeRef, [this.getListId(), elementId]);
			},
			autoSelectBehavior: () => ListAutoSelectBehavior.OLDER
		});
		listModel.setFilter((item) => this.queryFilter(item));
		this.listStateSubscription?.end(true);
		this.listStateSubscription = listModel.stateStream.map((state) => {
			this.onSelectionChanged(onlySingleSelection(state));
			mithril_default.redraw();
		});
		return listModel;
	}
	view() {
		return mithril_default(ListColumnWrapper, { headerContent: mithril_default(".flex.flex-space-between.center-vertically.plr-l", mithril_default(BaseSearchBar, {
			text: this.searchQuery,
			onInput: (text) => this.updateQuery(text),
			busy: false,
			onKeyDown: (e) => e.stopPropagation(),
			onClear: () => {
				this.searchQuery = "";
				this.resultItemIds = [];
				this.listModel.reapplyFilter();
			},
			placeholder: lang.get("searchKnowledgebase_placeholder")
		}), this.userCanEdit() ? mithril_default(".mr-negative-s", mithril_default(IconButton, {
			title: "addEntry_label",
			icon: Icons.Add,
			click: () => {
				showKnowledgeBaseEditor(null, this.templateGroupRoot);
			}
		})) : null) }, this.listModel.isEmptyAndDone() ? mithril_default(ColumnEmptyMessageBox, {
			color: theme.list_message_bg,
			icon: Icons.Book,
			message: "noEntries_msg"
		}) : mithril_default(List, {
			renderConfig: this.renderConfig,
			state: this.listModel.state,
			onLoadMore: () => this.listModel.loadMore(),
			onRetryLoading: () => this.listModel.retryLoading(),
			onStopLoading: () => this.listModel.stopLoading(),
			onSingleSelection: (item) => {
				this.listModel.onSingleSelection(item);
				this.focusDetailsViewer();
			},
			onSingleTogglingMultiselection: noOp,
			onRangeSelectionTowards: noOp
		}));
	}
	async entityEventsReceived(updates) {
		for (const update of updates) if (isUpdateForTypeRef(KnowledgeBaseEntryTypeRef, update) && isSameId(this.getListId(), update.instanceListId)) await this.listModel.entityEventReceived(update.instanceListId, update.instanceId, update.operation);
		this.updateQuery(this.searchQuery);
		mithril_default.redraw();
	}
	onSelectionChanged = memoized((item) => {
		const detailsViewer = item == null ? null : new KnowledgeBaseSettingsDetailsViewer(item, !this.userCanEdit());
		this.updateDetailsViewer(detailsViewer);
	});
	queryFilter(item) {
		return this.searchQuery === "" ? true : this.resultItemIds.includes(item._id);
	}
	updateQuery(query) {
		this.searchQuery = query;
		this.resultItemIds = knowledgeBaseSearch(this.searchQuery, this.listModel.getUnfilteredAsArray()).map((item) => item._id);
		this.listModel.reapplyFilter();
	}
	userCanEdit() {
		return hasCapabilityOnGroup(this.logins.getUserController().user, this.templateGroup, ShareCapability.Write);
	}
	getListId() {
		return this.templateGroupRoot.knowledgeBase;
	}
};
var KnowledgeBaseRow = class {
	top = 0;
	domElement = null;
	entity = null;
	entryTitleDom;
	selectionUpdater;
	update(entry, selected) {
		this.entity = entry;
		this.selectionUpdater(selected, false);
		this.entryTitleDom.textContent = entry.title;
	}
	render() {
		return mithril_default(SelectableRowContainer, { onSelectedChangeRef: (updater) => this.selectionUpdater = updater }, mithril_default(".flex.col", [mithril_default(".text-ellipsis.badge-line-height", { oncreate: (vnode) => this.entryTitleDom = vnode.dom }), mithril_default(".smaller.mt-xxs", NBSP)]));
	}
};
var KnowledgeBaseSettingsDetailsViewer = class {
	constructor(entry, readonly) {
		this.entry = entry;
		this.readonly = readonly;
	}
	renderView() {
		return mithril_default(".plr-l", mithril_default(KnowledgeBaseEntryView, {
			entry: this.entry,
			onTemplateSelected: (templateId) => mithril_default.route.set(`/settings/templates/${listIdPart(templateId)}}`),
			readonly: this.readonly
		}));
	}
	entityEventsReceived(updates) {
		return Promise.resolve();
	}
};

//#endregion
//#region src/mail-app/settings/DummyTemplateListView.ts
var DummyTemplateListView = class {
	searchQuery = "";
	view(vnode) {
		return mithril_default(ListColumnWrapper, { headerContent: mithril_default(".flex.flex-space-between.center-vertically.plr-l", mithril_default(BaseSearchBar, {
			text: this.searchQuery,
			onInput: (text) => this.searchQuery = text,
			busy: false,
			onKeyDown: (e) => e.stopPropagation(),
			onClear: () => {
				this.searchQuery = "";
			},
			placeholder: lang.get("searchTemplates_placeholder")
		}), mithril_default(".mr-negative-s", mithril_default(IconButton, {
			title: "addTemplate_label",
			icon: Icons.Add,
			click: () => {
				createInitialTemplateListIfAllowed().then((groupRoot) => {
					if (groupRoot) showTemplateEditor(null, groupRoot);
				});
			}
		}))) }, mithril_default(".fill-absolute.overflow-hidden", mithril_default(ColumnEmptyMessageBox, {
			color: theme.list_message_bg,
			icon: Icons.ListAlt,
			message: "noEntries_msg"
		})));
	}
};

//#endregion
//#region src/common/settings/SettingsFolderRow.ts
var SettingsFolderRow = class {
	view(vnode) {
		const { mainButtonAttrs, extraButton } = vnode.attrs;
		const isSelected = isNavButtonSelected(mainButtonAttrs);
		const selector = `.folder-row.flex-start.pl-button.pr-m${isSelected ? ".row-selected" : ""}`;
		return mithril_default(selector, [mithril_default(NavButton, mainButtonAttrs), extraButton && isSelected ? extraButton : null]);
	}
};

//#endregion
//#region src/common/settings/UserDataExporter.ts
const CSV_MIMETYPE = "text/csv";
const USER_CSV_FILENAME = "users.csv";
async function exportUserCsv(entityClient, logins, fileController, counterFacade) {
	const data = await loadUserExportData(entityClient, logins, counterFacade);
	const csv = renderCsv([
		"name",
		"mail address",
		"date created",
		"date deleted",
		"storage used (in bytes)",
		"aliases"
	], data.map((user) => [
		user.name,
		user.mailAddress,
		formatDate$1(user.created),
		mapNullable(user.deleted, formatDate$1) ?? "",
		`${user.usedStorage}`,
		user.aliases.join(" ")
	]));
	const dataFile = createDataFile(USER_CSV_FILENAME, CSV_MIMETYPE, stringToUtf8Uint8Array(csv));
	await fileController.saveDataFile(dataFile);
}
function formatDate$1(date) {
	return `${date.getFullYear()}-${pad(date.getMonth() + 1, 2)}-${pad(date.getDate(), 2)}`;
}
async function loadUserExportData(entityClient, logins, counterFacade) {
	const { user } = logins.getUserController();
	const { userGroups } = await entityClient.load(CustomerTypeRef, assertNotNull(user.customer));
	const groupsAdministeredByUser = await entityClient.loadAll(GroupInfoTypeRef, userGroups);
	const usedCustomerStorageCounterValues = await counterFacade.readAllCustomerCounterValues(CounterType.UserStorageLegacy, neverNull(user.customer));
	return pMap(groupsAdministeredByUser, async (info) => {
		const group = await entityClient.load(GroupTypeRef, info.group);
		const userStorageCounterValue = usedCustomerStorageCounterValues.find((counterValue) => counterValue.counterId === group.storageCounter);
		const usedStorage = userStorageCounterValue != null ? Number(userStorageCounterValue.value) : 0;
		return {
			name: info.name,
			mailAddress: info.mailAddress ?? "",
			created: info.created,
			deleted: info.deleted,
			usedStorage,
			aliases: info.mailAddressAliases.map((alias) => alias.mailAddress)
		};
	});
}

//#endregion
//#region src/common/settings/ReferralSettingsViewer.ts
var ReferralSettingsViewer = class {
	referralLink = "";
	constructor() {
		this.refreshReferralLink();
	}
	view() {
		return mithril_default(".mt-l.plr-l.pb-xl", mithril_default(ReferralLinkViewer, { referralLink: this.referralLink }));
	}
	async entityEventsReceived(updates) {}
	refreshReferralLink() {
		getReferralLink(locator.logins.getUserController()).then((link) => {
			this.referralLink = link;
			mithril_default.redraw();
		});
	}
};

//#endregion
//#region src/common/settings/AboutDialog.ts
var AboutDialog = class {
	view(vnode) {
		return mithril_default(".flex.col", [
			mithril_default(".center.mt", "Powered by"),
			mithril_default(
				".center",
				// Our logo must be padded but at least a certain amount.
				// This might be a bit more than needed but it's safe.
				{ style: { margin: px(size.vpad_xl) } },
				mithril_default.trust(getLightOrDarkTutaLogo(client.isCalendarApp()))
),
			mithril_default(".flex.justify-center.flex-wrap", [mithril_default(ExternalLink, {
				href: InfoLink.HomePage,
				text: "Website",
				isCompanySite: true,
				specialType: "me",
				class: "mlr mt"
			}), mithril_default(ExternalLink, {
				href: "https://github.com/tutao/tutanota/releases",
				text: "Releases",
				isCompanySite: false,
				class: "mlr mt"
			})]),
			mithril_default(".flex.justify-center.selectable.flex-wrap", [
				mithril_default("p.center.mt.mlr", `v${env.versionNumber}`),
				mithril_default("p.text-center.mlr", "GPL-v3"),
				mithril_default("p", "© 2024 Tutao GmbH")
			]),
			this._sendLogsLink(),
			isApp() ? mithril_default("", mithril_default(Button, {
				label: "showWelcomeDialog_action",
				type: ButtonType.Primary,
				click: vnode.attrs.onShowSetupWizard
			})) : null
		]);
	}
	_sendLogsLink() {
		return mithril_default(".mt", mithril_default(Button, {
			label: "sendLogs_action",
			click: () => this._sendDeviceLogs(),
			type: ButtonType.Primary
		}));
	}
	async _sendDeviceLogs() {
		const timestamp = new Date();
		const attachments = await getLogAttachments(timestamp);
		const mailboxDetails = await locator.mailboxModel.getUserMailboxDetails();
		let { message, type, client: client$1 } = clientInfoString(timestamp, true);
		message = message.split("\n").filter(Boolean).map((l) => `<div>${l}<br></div>`).join("");
		try {
			const editor = await newMailEditorFromTemplate(mailboxDetails, {}, `Device logs v${env.versionNumber} - ${type} - ${client$1}`, message, attachments, true);
			editor.show();
		} catch (e) {
			if (e instanceof UserError) await showUserError(e);
else throw e;
		}
	}
};

//#endregion
//#region src/common/gui/base/ActionBar.ts
assertMainOrNode();
var ActionBar = class {
	view(vnode) {
		return mithril_default(".action-bar.flex-end.items-center.ml-between-s", vnode.attrs.buttons.map((b) => mithril_default(IconButton, b)));
	}
};

//#endregion
//#region src/mail-app/settings/TemplateDetailsViewer.ts
var TemplateDetailsViewer = class {
	sanitizedContents;
	constructor(template, entityClient, isReadOnly) {
		this.template = template;
		this.entityClient = entityClient;
		this.isReadOnly = isReadOnly;
		this.sanitizedContents = template.contents.map((emailTemplateContent) => ({
			text: htmlSanitizer.sanitizeHTML(emailTemplateContent.text, {
				blockExternalContent: false,
				allowRelativeLinks: true
			}).html,
			languageCodeTextId: languageByCode[getLanguageCode(emailTemplateContent)].textId
		}));
	}
	renderView = () => {
		return mithril_default("#user-viewer.fill-absolute.scroll.plr-l.pb-floating", [this.renderTitleLine(), this.renderContent()]);
	};
	renderTitleLine() {
		return mithril_default(".flex.mt-l.center-vertically", [mithril_default(".h4.text-ellipsis", this.template.title), !this.isReadOnly() ? mithril_default(ActionBar, { buttons: [{
			title: "edit_action",
			icon: Icons.Edit,
			click: () => this.editTemplate()
		}, {
			title: "remove_action",
			icon: Icons.Trash,
			click: () => this.deleteTemplate()
		}] }) : null]);
	}
	renderContent() {
		return mithril_default("", [mithril_default(TextField, {
			label: "shortcut_label",
			value: TEMPLATE_SHORTCUT_PREFIX + assertNotNull(this.template.tag, "template without tag!"),
			isReadOnly: true
		}), this.sanitizedContents.map(({ text, languageCodeTextId }) => {
			return mithril_default(".flex.flex-column", [mithril_default(".h4.mt-l", lang.get(languageCodeTextId)), mithril_default(".editor-border.text-break", mithril_default.trust(text))]);
		})]);
	}
	async deleteTemplate() {
		if (!await Dialog.confirm("deleteTemplate_msg")) return;
		await this.entityClient.erase(this.template);
	}
	async editTemplate() {
		const { template } = this;
		const groupRoot = await locator.entityClient.load(TemplateGroupRootTypeRef, assertNotNull(template._ownerGroup, "template without ownerGroup!"));
		showTemplateEditor(template, groupRoot);
	}
	entityEventsReceived(updates) {
		return Promise.resolve();
	}
};

//#endregion
//#region src/mail-app/settings/TemplateListView.ts
assertMainOrNode();
var TemplateListView = class {
	searchQuery = "";
	resultItemIds = [];
	listModel;
	listStateSubscription = null;
	renderConfig = {
		itemHeight: size.list_row_height,
		multiselectionAllowed: MultiselectMode.Disabled,
		swipe: null,
		createElement: (dom) => {
			const templateRow = new TemplateRow();
			mithril_default.render(dom, templateRow.render());
			return templateRow;
		}
	};
	shortcuts = listSelectionKeyboardShortcuts(MultiselectMode.Disabled, () => this.listModel);
	constructor(groupInstance, entityClient, logins, updateDetailsViewer, focusDetailsViewer) {
		this.groupInstance = groupInstance;
		this.entityClient = entityClient;
		this.logins = logins;
		this.updateDetailsViewer = updateDetailsViewer;
		this.focusDetailsViewer = focusDetailsViewer;
		this.listModel = this.makeListModel();
		this.listModel.loadInitial();
		this.view = this.view.bind(this);
		this.oncreate = this.oncreate.bind(this);
		this.onremove = this.onremove.bind(this);
	}
	oncreate() {
		keyManager.registerShortcuts(this.shortcuts);
	}
	onremove() {
		keyManager.unregisterShortcuts(this.shortcuts);
	}
	makeListModel() {
		const listModel = new ListElementListModel({
			sortCompare: (a, b) => {
				const titleA = a.title.toUpperCase();
				const titleB = b.title.toUpperCase();
				return titleA < titleB ? -1 : titleA > titleB ? 1 : 0;
			},
			fetch: async (_lastFetchedEntity, _count) => {
				const allEntries = await this.entityClient.loadAll(EmailTemplateTypeRef, this.templateListId());
				return {
					items: allEntries,
					complete: true
				};
			},
			loadSingle: (_listId, elementId) => {
				return this.entityClient.load(EmailTemplateTypeRef, [this.templateListId(), elementId]);
			},
			autoSelectBehavior: () => ListAutoSelectBehavior.OLDER
		});
		listModel.setFilter((item) => this.queryFilter(item));
		this.listStateSubscription?.end(true);
		this.listStateSubscription = listModel.stateStream.map((state) => {
			this.onSelectionChanged(onlySingleSelection(state));
			mithril_default.redraw();
		});
		return listModel;
	}
	view() {
		return mithril_default(ListColumnWrapper, { headerContent: mithril_default(".flex.flex-space-between.center-vertically.plr-l", mithril_default(BaseSearchBar, {
			text: this.searchQuery,
			onInput: (text) => this.updateQuery(text),
			busy: false,
			onKeyDown: (e) => e.stopPropagation(),
			onClear: () => {
				this.searchQuery = "";
				this.resultItemIds = [];
				this.listModel.reapplyFilter();
			},
			placeholder: lang.get("searchTemplates_placeholder")
		}), this.userCanEdit() ? mithril_default(".mr-negative-s", mithril_default(IconButton, {
			title: "addTemplate_label",
			icon: Icons.Add,
			click: () => {
				showTemplateEditor(null, this.groupInstance.groupRoot);
			}
		})) : null) }, this.listModel.isEmptyAndDone() ? mithril_default(ColumnEmptyMessageBox, {
			color: theme.list_message_bg,
			icon: Icons.ListAlt,
			message: "noEntries_msg"
		}) : mithril_default(List, {
			renderConfig: this.renderConfig,
			state: this.listModel.state,
			onLoadMore: () => this.listModel.loadMore(),
			onRetryLoading: () => this.listModel.retryLoading(),
			onStopLoading: () => this.listModel.stopLoading(),
			onSingleSelection: (item) => {
				this.listModel.onSingleSelection(item);
				this.focusDetailsViewer();
			},
			onSingleTogglingMultiselection: noOp,
			onRangeSelectionTowards: noOp
		}));
	}
	async entityEventsReceived(updates) {
		for (const update of updates) {
			const { instanceListId, instanceId, operation } = update;
			if (isUpdateForTypeRef(EmailTemplateTypeRef, update) && isSameId(this.templateListId(), instanceListId)) await this.listModel.entityEventReceived(instanceListId, instanceId, operation);
		}
		this.updateQuery(this.searchQuery);
		mithril_default.redraw();
	}
	onSelectionChanged = memoized((item) => {
		const detailsViewer = item == null ? null : new TemplateDetailsViewer(item, this.entityClient, () => !this.userCanEdit());
		this.updateDetailsViewer(detailsViewer);
	});
	queryFilter(item) {
		return this.searchQuery === "" ? true : this.resultItemIds.includes(item._id);
	}
	updateQuery(query) {
		this.searchQuery = query;
		this.resultItemIds = searchInTemplates(this.searchQuery, this.listModel.getUnfilteredAsArray()).map((item) => item._id);
		this.listModel.reapplyFilter();
	}
	userCanEdit() {
		return hasCapabilityOnGroup(this.logins.getUserController().user, this.groupInstance.group, ShareCapability.Write);
	}
	templateListId() {
		return this.groupInstance.groupRoot.templates;
	}
};
var TemplateRow = class {
	top = 0;
	domElement = null;
	entity = null;
	selectionUpdater;
	titleDom;
	idDom;
	constructor() {}
	update(template, selected) {
		this.entity = template;
		this.selectionUpdater(selected, false);
		this.titleDom.textContent = template.title;
		this.idDom.textContent = TEMPLATE_SHORTCUT_PREFIX + template.tag;
	}
	render() {
		return mithril_default(SelectableRowContainer, { onSelectedChangeRef: (updater) => this.selectionUpdater = updater }, mithril_default(".flex.col", [mithril_default("", [mithril_default(".text-ellipsis.badge-line-height", { oncreate: (vnode) => this.titleDom = vnode.dom })]), mithril_default(".smaller.mt-xxs", { oncreate: (vnode) => this.idDom = vnode.dom })]));
	}
};

//#endregion
//#region src/mail-app/settings/ContactsSettingsViewer.ts
assertMainOrNode();
var ContactsSettingsViewer = class {
	noAutomaticContacts = false;
	constructor() {
		this.noAutomaticContacts = locator.logins.getUserController().props.noAutomaticContacts;
	}
	view() {
		return [mithril_default(".fill-absolute.scroll.plr-l.pb-xl", { role: "group" }, [
			mithril_default(".h4.mt-l", lang.get("contactsManagement_label")),
			this.renderImportContactsButton(),
			locator.logins.isEnabled(FeatureType.DisableContacts) ? null : this.renderAutoCreateContactsPreference(),
			this.renderContactsSyncDropdown()
		])];
	}
	renderAutoCreateContactsPreference() {
		return mithril_default(DropDownSelector, {
			label: "createContacts_label",
			helpLabel: () => lang.get("createContactsForRecipients_action"),
			items: [{
				name: lang.get("activated_label"),
				value: false
			}, {
				name: lang.get("deactivated_label"),
				value: true
			}],
			selectedValue: this.noAutomaticContacts,
			selectionChangedHandler: (v) => {
				locator.logins.getUserController().props.noAutomaticContacts = v;
				locator.entityClient.update(locator.logins.getUserController().props);
			},
			dropdownWidth: 250
		});
	}
	renderImportContactsButton() {
		if (!isApp()) return null;
		return mithril_default(".flex.flex-space-between.items-center", [lang.get("importFromContactBook_label"), mithril_default(Button, {
			label: "import_action",
			click: () => this.importContactsFromDevice(),
			type: ButtonType.Primary
		})]);
	}
	renderContactsSyncDropdown() {
		if (!isApp()) return null;
		return mithril_default(DropDownSelector, {
			label: "contactsSynchronization_label",
			helpLabel: () => lang.get("contactsSynchronizationWarning_msg"),
			items: [{
				name: lang.get("activated_label"),
				value: true
			}, {
				name: lang.get("deactivated_label"),
				value: false
			}],
			selectedValue: mailLocator.nativeContactsSyncManager().isEnabled(),
			selectionChangedHandler: async (contactSyncEnabled) => {
				await this.onContactSyncSelectionChanged(contactSyncEnabled);
			},
			dropdownWidth: 250
		});
	}
	async onContactSyncSelectionChanged(contactSyncEnabled) {
		assert(isApp(), "isApp");
		const syncManager = mailLocator.nativeContactsSyncManager();
		if (!contactSyncEnabled) syncManager.disableSync();
else {
			const canSync = await syncManager.canSync();
			if (!canSync) return;
			await syncManager.enableSync();
			const isSyncAllowed = await syncManager.syncContacts();
			if (!isSyncAllowed) this.handleContactsSynchronizationFail();
			mithril_default.redraw();
		}
	}
	updateTutaPropertiesSettings(props) {
		this.noAutomaticContacts = props.noAutomaticContacts;
	}
	async entityEventsReceived(updates) {
		for (const update of updates) {
			const { operation } = update;
			if (isUpdateForTypeRef(TutanotaPropertiesTypeRef, update) && operation === OperationType.UPDATE) {
				const props = await locator.entityClient.load(TutanotaPropertiesTypeRef, locator.logins.getUserController().props._id);
				this.updateTutaPropertiesSettings(props);
			}
		}
		mithril_default.redraw();
	}
	handleContactsSynchronizationFail() {
		mailLocator.nativeContactsSyncManager()?.disableSync();
		this.showContactsPermissionDialog();
	}
	async showContactsPermissionDialog() {
		await Dialog.message("allowContactReadWrite_msg");
		await locator.systemFacade.goToSettings();
	}
	async importContactsFromDevice() {
		const importer = await mailLocator.contactImporter();
		await importer.importContactsFromDeviceSafely();
	}
};

//#endregion
//#region src/common/settings/NotificationTargetsList.ts
var NotificationTargetsList = class {
	view(vnode) {
		return mithril_default("", [
			mithril_default(".flex-space-between.items-center.mt-s.mb-s", [mithril_default(".h5", lang.get("notificationTargets_label")), mithril_default(ExpanderButton, {
				label: "show_action",
				expanded: vnode.attrs.onExpandedChange(),
				onExpandedChange: vnode.attrs.onExpandedChange
			})]),
			mithril_default(ExpanderPanel, { expanded: vnode.attrs.onExpandedChange() }, mithril_default(".flex.flex-column.items-end.mb", [vnode.attrs.rowAdd, ...vnode.attrs.rows])),
			mithril_default(".small", lang.get("pushIdentifierInfoMessage_msg"))
		]);
	}
};

//#endregion
//#region src/common/settings/IdentifierRow.ts
var IdentifierRow = class {
	view(vnode) {
		const dropdownAttrs = attachDropdown({
			mainButtonAttrs: {
				title: "edit_action",
				icon: Icons.More,
				size: ButtonSize.Compact
			},
			childAttrs: () => [{
				label: vnode.attrs.disabled ? "activate_action" : "deactivate_action",
				click: vnode.attrs.disableClicked
			}, {
				label: "delete_action",
				click: vnode.attrs.removeClicked
			}]
		});
		return mithril_default(".flex.flex-column.full-width", [mithril_default(".flex.items-center.selectable", [
			mithril_default("span" + (vnode.attrs.current ? ".b" : ""), vnode.attrs.name),
			vnode.attrs.disabled ? mithril_default(".mlr", `(${lang.get("notificationsDisabled_label")})`) : null,
			mithril_default(".flex-grow"),
			mithril_default(IconButton, dropdownAttrs)
		]), this.renderIdentifier(vnode.attrs)]);
	}
	renderIdentifier({ identifier, formatIdentifier }) {
		const identifierText = formatIdentifier ? neverNull(identifier.match(/.{2}/g)).map((el, i) => mithril_default("span.pr-s" + (i % 2 === 0 ? ".b" : ""), el)) : identifier;
		return mithril_default(".text-break.small.monospace.mt-negative-hpad-button.selectable", identifierText);
	}
};

//#endregion
//#region src/mail-app/settings/NotificationSettingsViewer.ts
var import_stream$1 = __toESM(require_stream(), 1);
var NotificationSettingsViewer = class {
	currentIdentifier = null;
	extendedNotificationMode = null;
	expanded;
	user;
	identifiers;
	hasNotificationPermission = true;
	receiveCalendarNotifications = true;
	constructor() {
		this.expanded = (0, import_stream$1.default)(false);
		this.identifiers = [];
		this.user = locator.logins.getUserController().user;
		this.loadPushIdentifiers();
		if (isApp() || isDesktop()) {
			const promises = [locator.pushService.getExtendedNotificationMode()];
			if (isApp()) promises.push(locator.systemPermissionHandler.hasPermission(PermissionType.Notification), locator.pushService.getReceiveCalendarNotificationConfig());
			Promise.all(promises).then(([extendedNotificationMode, hasPermission, canReceiveCalendarNotifications]) => {
				this.extendedNotificationMode = extendedNotificationMode;
				if (isApp()) {
					if (this.hasNotificationPermission !== hasPermission) this.hasNotificationPermission = hasPermission;
					if (this.receiveCalendarNotifications !== canReceiveCalendarNotifications) this.receiveCalendarNotifications = canReceiveCalendarNotifications;
				}
				mithril_default.redraw();
			});
		}
	}
	togglePushIdentifier(identifier) {
		identifier.disabled = !identifier.disabled;
		locator.entityClient.update(identifier).then(() => mithril_default.redraw);
		if (!isBrowser() && identifier.identifier === this.currentIdentifier) if (identifier.disabled) locator.pushService.invalidateAlarmsForUser(this.user._id);
else locator.pushService.reRegister();
	}
	view() {
		const rowAdd = mithril_default(".full-width.flex-space-between.items-center.mb-s", [lang.get("emailPushNotification_action"), mithril_default(IconButton, {
			title: "emailPushNotification_action",
			click: () => this.showAddEmailNotificationDialog(),
			icon: Icons.Add,
			size: ButtonSize.Compact
		})]);
		const rows = this.identifiers.map((identifier) => {
			const isCurrentDevice = (isApp() || isDesktop()) && identifier.identifier === this.currentIdentifier;
			return mithril_default(IdentifierRow, {
				name: this.identifierDisplayName(isCurrentDevice, identifier.pushServiceType, identifier.displayName),
				disabled: identifier.disabled,
				identifier: identifier.identifier,
				current: isCurrentDevice,
				removeClicked: () => {
					locator.entityClient.erase(identifier).catch(ofClass(NotFoundError, noOp));
				},
				formatIdentifier: identifier.pushServiceType !== PushServiceType.EMAIL,
				disableClicked: () => this.togglePushIdentifier(identifier)
			});
		}).sort((l, r) => +r.attrs.current - +l.attrs.current);
		return mithril_default(".fill-absolute.scroll.plr-l.pb-xl", [mithril_default(".flex.col", [
			mithril_default(".flex-space-between.items-center.mt-l.mb-s", [mithril_default(".h4", lang.get("notificationSettings_action"))]),
			this.extendedNotificationMode ? mithril_default(NotificationContentSelector, {
				extendedNotificationMode: this.extendedNotificationMode,
				onChange: (value) => {
					locator.pushService.setExtendedNotificationMode(value);
					this.extendedNotificationMode = value;
					this.hasNotificationPermission = true;
				}
			}) : null,
			isApp() ? this.renderCalendarNotificationsDropdown() : null,
			mithril_default(NotificationTargetsList, {
				rows,
				rowAdd,
				onExpandedChange: this.expanded
			})
		])]);
	}
	renderCalendarNotificationsDropdown() {
		return mithril_default(DropDownSelector, {
			label: "receiveCalendarNotifications_label",
			items: [{
				name: lang.get("activated_label"),
				value: true
			}, {
				name: lang.get("deactivated_label"),
				value: false
			}],
			selectedValue: this.receiveCalendarNotifications,
			selectionChangedHandler: async (value) => {
				if (this.receiveCalendarNotifications !== value) {
					locator.pushService.setReceiveCalendarNotificationConfig(value);
					this.receiveCalendarNotifications = value;
					if (value) await locator.pushService.reRegister();
else await locator.pushService.invalidateAlarmsForUser(this.user._id);
				}
			},
			disabled: !this.hasNotificationPermission,
			selectedValueDisplay: !this.hasNotificationPermission ? lang.get("deactivated_label") : undefined
		});
	}
	async showAddEmailNotificationDialog() {
		const dialog = await mailLocator.addNotificationEmailDialog();
		dialog.show();
	}
	identifierDisplayName(current, type, displayName) {
		if (current) return lang.get("pushIdentifierCurrentDevice_label");
else if (displayName) return displayName;
else return [
			"Android FCM",
			"iOS",
			lang.get("adminEmailSettings_action"),
			"Android Tutanota"
		][Number(type)];
	}
	async loadPushIdentifiers() {
		this.currentIdentifier = this.getCurrentIdentifier();
		const list = this.user.pushIdentifierList;
		if (list) {
			this.identifiers = (await locator.entityClient.loadAll(PushIdentifierTypeRef, list.list)).filter((identifier) => identifier.app === AppType.Mail || identifier.app === AppType.Integrated);
			mithril_default.redraw();
		}
	}
	getCurrentIdentifier() {
		if (isApp() || isDesktop()) {
			const identifier = mailLocator.pushService.getLoadedPushIdentifier()?.identifier;
			return identifier ? identifier : null;
		}
		return null;
	}
	async entityEventsReceived(updates) {
		for (let update of updates) if (isUpdateForTypeRef(PushIdentifierTypeRef, update)) await this.loadPushIdentifiers();
	}
};

//#endregion
//#region src/common/settings/AffiliateSettingsViewer.ts
var AffiliateSettingsViewer = class {
	affiliateViewModel = new LazyLoaded(async () => await mailLocator.affiliateViewModel());
	domainConfig = locator.domainConfigProvider().getCurrentDomainConfig();
	constructor(getIsShowingKpis, toggleKpiColumn) {
		this.getIsShowingKpis = getIsShowingKpis;
		this.toggleKpiColumn = toggleKpiColumn;
	}
	oninit() {
		this.affiliateViewModel.getAsync().then((avm) => avm.load().finally(mithril_default.redraw));
	}
	view() {
		if (this.affiliateViewModel.isLoaded()) {
			const avm = this.affiliateViewModel.getSync();
			if (avm.isLoading) return mithril_default(ListColumnWrapper, mithril_default("p", "Loading..."));
			if (avm.data === null) return mithril_default(ListColumnWrapper, mithril_default("p", "Error"));
			const shareUrl = `${this.domainConfig.websiteBaseUrl}?t-src=${avm.data.promotionId}`;
			return mithril_default(ListColumnWrapper, mithril_default("section.fill-absolute.scroll.plr-l", mithril_default("h4.mt-l", lang.get("affiliateSettings_label")), mithril_default(TextField, {
				isReadOnly: true,
				label: "referralLink_label",
				value: shareUrl,
				injectionsRight: () => mithril_default(IconButton, {
					title: "copy_action",
					click: () => this.onCopyButtonClick(shareUrl),
					icon: Icons.Copy,
					size: ButtonSize.Compact
				})
			}), mithril_default(TextField, {
				isReadOnly: true,
				label: "affiliateSettingsAccumulated_label",
				helpLabel: () => lang.get("affiliateSettingsAccumulated_msg"),
				value: formatPrice(Number(avm.data.accumulatedCommission), true)
			}), mithril_default(TextField, {
				isReadOnly: true,
				label: "affiliateSettingsCredited_label",
				helpLabel: () => lang.get("affiliateSettingsCredited_msg"),
				value: formatPrice(Number(avm.data.creditedCommission), true)
			}), mithril_default(".flex.center-horizontally.mt-m", mithril_default(Button, {
				label: this.getIsShowingKpis() ? "affiliateSettingsHideKpis_label" : "affiliateSettingsShowKpis_label",
				type: ButtonType.Secondary,
				click: () => this.toggleKpiColumn()
			}))));
		} else return mithril_default("");
	}
	onCopyButtonClick(shareUrl) {
		copyToClipboard(shareUrl).then(() => {
			showSnackBar({
				message: "linkCopied_msg",
				button: {
					label: "close_alt",
					click: () => {}
				}
			});
		});
	}
	async entityEventsReceived(updates) {}
};

//#endregion
//#region src/common/settings/AffiliateKpisViewer.ts
var AffiliateKpisViewer = class {
	affiliateViewModel = new LazyLoaded(async () => await mailLocator.affiliateViewModel());
	renderView() {
		return mithril_default(ListColumnWrapper, mithril_default(".flex.flex-column.fill-absolute.plr-l", mithril_default("h4.mt-l", "KPIs"), mithril_default(".overflow-auto.pt-s", { style: { height: "100%" } }, mithril_default("", { style: { minWidth: "800px" } }, mithril_default(Table, {
			columnHeading: [
				{ label: "month_label" },
				{
					label: "affiliateSettingsNewFree_label",
					helpText: "affiliateSettingsNewFree_msg"
				},
				{
					label: "affiliateSettingsNewPaid_label",
					helpText: "affiliateSettingsNewPaid_msg"
				},
				{
					label: "affiliateSettingsTotalFree_label",
					helpText: "affiliateSettingsTotalFree_msg"
				},
				{
					label: "affiliateSettingsTotalPaid_label",
					helpText: "affiliateSettingsTotalPaid_msg"
				},
				{
					label: "affiliateSettingsCommission_label",
					helpText: "affiliateSettingsCommission_msg"
				}
			],
			columnWidths: [
				ColumnWidth.Largest,
				ColumnWidth.Largest,
				ColumnWidth.Largest,
				ColumnWidth.Largest,
				ColumnWidth.Largest,
				ColumnWidth.Largest
			],
			showActionButtonColumn: false,
			addButtonAttrs: null,
			lines: this.renderRows()
		})))));
	}
	renderRows() {
		if (this.affiliateViewModel.isLoaded()) {
			const avm = this.affiliateViewModel.getSync();
			return (avm.data?.kpis ?? []).slice().sort((a, b) => Number(b.monthTimestamp) - Number(a.monthTimestamp)).map((month) => {
				const date = DateTime.fromJSDate(new Date(Number(month.monthTimestamp))).minus({ day: 3 }).toJSDate();
				return { cells: [
					formatShortMonthYear2Digit(date),
					month.newFree,
					month.newPaid,
					month.totalFree,
					month.totalPaid,
					formatPrice(Number(month.commission), true)
				] };
			});
		} else {
			this.affiliateViewModel.getAsync().then(() => mithril_default.redraw());
			return [];
		}
	}
	entityEventsReceived(updates) {
		return Promise.resolve();
	}
};

//#endregion
//#region src/mail-app/settings/DesktopMailImportSettingsViewer.ts
var DesktopMailImportSettingsViewer = class {
	isImportHistoryExpanded = true;
	importStatePoolHandle;
	constructor(mailImporter) {
		this.mailImporter = mailImporter;
	}
	async oninit() {
		await this.mailImporter().initImportMailStates();
	}
	onbeforeremove() {
		clearInterval(this.importStatePoolHandle);
	}
	view() {
		return mithril_default(".fill-absolute.scroll.plr-l.pb-xl", [
			mithril_default(".h4.mt-l", lang.get("mailImportSettings_label")),
			this.renderTargetFolderControls(),
			!this.mailImporter().shouldRenderImportStatus() ? this.renderStartNewImportControls() : null,
			this.mailImporter().shouldRenderImportStatus() ? this.renderImportStatus() : null,
			this.renderImportHistory()
		]);
	}
	async onImportButtonClick(dom) {
		const currentPlanType = await mailLocator.logins.getUserController().getPlanType();
		const isHighestTierPlan = HighestTierPlans.includes(currentPlanType);
		if (!isHighestTierPlan) {
			showNotAvailableForFreeDialog([PlanType.Legend, PlanType.Unlimited]).then();
			return;
		}
		const allowedExtensions = ["eml", "mbox"];
		const filePaths = await mailLocator.fileApp.openFileChooser(dom.getBoundingClientRect(), allowedExtensions, true);
		await this.mailImporter().onStartBtnClick(filePaths.map((fp) => fp.location));
	}
	renderTargetFolderControls() {
		let folders = this.mailImporter().foldersForMailbox;
		if (folders) {
			const loadingMsg = lang.get("loading_msg");
			const emptyLabel = mithril_default("br");
			const selectedTargetFolder = this.mailImporter().selectedTargetFolder;
			const selectedTargetFolderPath = selectedTargetFolder ? getPathToFolderString(folders, selectedTargetFolder) : "";
			const isNotSubfolder = selectedTargetFolder ? selectedTargetFolderPath == getFolderName(selectedTargetFolder) : false;
			const helpLabel = selectedTargetFolder ? isNotSubfolder ? emptyLabel : selectedTargetFolderPath : emptyLabel;
			const selectableFolders = folders.getIndentedList().filter((folderInfo) => folderInfo.folder.folderType !== MailSetKind.INBOX);
			let targetFolders = selectableFolders.map((folderInfo) => {
				return {
					name: getIndentedFolderNameForDropdown(folderInfo),
					value: folderInfo.folder
				};
			});
			return mithril_default(DropDownSelector, {
				label: "mailImportTargetFolder_label",
				items: targetFolders,
				disabled: this.mailImporter().shouldRenderImportStatus(),
				selectedValue: selectedTargetFolder,
				selectedValueDisplay: selectedTargetFolder ? getFolderName(selectedTargetFolder) : loadingMsg,
				selectionChangedHandler: (newFolder) => this.mailImporter().selectedTargetFolder = newFolder,
				helpLabel: () => helpLabel
			});
		} else return null;
	}
	renderStartNewImportControls() {
		return [mithril_default(".flex-start.mt-m", this.renderImportInfoText()), mithril_default(".flex-start.mt-s", mithril_default(LoginButton, {
			type: LoginButtonType.FlexWidth,
			label: "import_action",
			onclick: (_, dom) => this.onImportButtonClick(dom)
		}))];
	}
	renderImportInfoText() {
		return [mithril_default(".small", lang.get("mailImportInfoText_label"))];
	}
	renderImportStatus() {
		const processedMailsCountLabel = mithril_default(".flex-start.p.small", lang.get("mailImportStateProcessedMailsTotalMails_label", {
			"{processedMails}": this.mailImporter().getProcessedMailsCount(),
			"{totalMails}": this.mailImporter().getTotalMailsCount()
		}));
		const resumeMailImportIconButtonAttrs = {
			title: "resumeMailImport_action",
			icon: Icons.Play,
			click: () => this.mailImporter().onResumeBtnClick(),
			size: ButtonSize.Normal,
			disabled: this.mailImporter().shouldDisableResumeButton()
		};
		const pauseMailImportIconButtonAttrs = {
			title: "pauseMailImport_action",
			icon: Icons.Pause,
			click: () => {
				this.mailImporter().onPauseBtnClick();
			},
			size: ButtonSize.Normal,
			disabled: this.mailImporter().shouldDisablePauseButton()
		};
		const cancelMailImportIconButtonAttrs = {
			title: "cancelMailImport_action",
			icon: Icons.Cancel,
			click: () => {
				this.mailImporter().onCancelBtnClick();
			},
			size: ButtonSize.Normal,
			disabled: this.mailImporter().shouldDisableCancelButton()
		};
		let buttonControls = [];
		if (this.mailImporter().shouldRenderPauseButton()) buttonControls.push(mithril_default(IconButton, pauseMailImportIconButtonAttrs));
		if (this.mailImporter().shouldRenderResumeButton()) buttonControls.push(mithril_default(IconButton, resumeMailImportIconButtonAttrs));
		if (this.mailImporter().shouldRenderCancelButton()) buttonControls.push(mithril_default(IconButton, cancelMailImportIconButtonAttrs));
		return [[mithril_default(".flex-space-between.p.small.mt-m", getReadableUiImportStatus(assertNotNull(this.mailImporter().getUiStatus())), this.mailImporter().shouldRenderProcessedMails() ? processedMailsCountLabel : null)], [mithril_default(".flex-space-between.border-radius-big.mt-s.rel.nav-bg.full-width", this.renderMailImportProgressBar(), ...buttonControls)]];
	}
	renderMailImportProgressBar() {
		return mithril_default(".rel.border-radius-big.full-width", mithril_default(ProgressBar, {
			progress: this.mailImporter().getProgress() / 100,
			type: ProgressBarType.Large
		}));
	}
	renderImportHistory() {
		return [mithril_default(".flex-space-between.items-center.mt-l.mb-s", [mithril_default(".h4", lang.get("mailImportHistory_label")), mithril_default(ExpanderButton, {
			label: "show_action",
			expanded: this.isImportHistoryExpanded,
			onExpandedChange: () => {
				this.isImportHistoryExpanded = !this.isImportHistoryExpanded;
			}
		})]), mithril_default(ExpanderPanel, { expanded: this.isImportHistoryExpanded }, mithril_default(Table, {
			columnHeading: ["mailImportHistoryTableHeading_label"],
			columnWidths: [ColumnWidth.Small, ColumnWidth.Largest],
			showActionButtonColumn: true,
			lines: this.makeMailImportHistoryTableLines()
		}))];
	}
	/**
	* Parses the importMailStates into displayable table lines.
	* @returns array of the parsed table lines.
	*/
	makeMailImportHistoryTableLines() {
		let folders = this.mailImporter().foldersForMailbox?.getIndentedList();
		if (folders) return this.mailImporter().getFinalisedImports().sort(sortCompareByReverseId).map((im) => {
			const targetFolderId = im.targetFolder;
			const displayTargetFolder = folders.find((f) => isSameId(f.folder._id, targetFolderId));
			return { cells: () => [{
				main: lang.get("mailImportHistoryTableRowTitle_label", {
					"{status}": getReadableImportStatus(parseInt(im.status)),
					"{folder}": displayTargetFolder ? getFolderName(displayTargetFolder.folder) : lang.get("mailImportHistoryTableRowFolderDeleted_label")
				}),
				info: [lang.get("mailImportHistoryTableRowSubtitle_label", {
					"{date}": formatDate(new Date(generatedIdToTimestamp(elementIdPart(im._id)))),
					"{successfulMails}": im.successfulMails,
					"{failedMails}": im.failedMails
				})]
			}] };
		});
else return [];
	}
	async entityEventsReceived(updates) {}
};
function getReadableUiImportStatus(uiStatus) {
	return lang.get(getUiImportStatusTranslationKey(uiStatus));
}
function getUiImportStatusTranslationKey(uiStatus) {
	switch (uiStatus) {
		case UiImportStatus.Starting: return "mailImportStatusStarting_label";
		case UiImportStatus.Resuming: return "mailImportStatusResuming_label";
		case UiImportStatus.Running: return "mailImportStatusRunning_label";
		case UiImportStatus.Pausing: return "mailImportStatusPausing_label";
		case UiImportStatus.Paused: return "mailImportStatusPaused_label";
		case UiImportStatus.Cancelling: return "mailImportStatusCancelling_label";
	}
}
function getReadableImportStatus(importStatus) {
	return lang.get(getImportStatusTranslationKey(importStatus));
}
function getImportStatusTranslationKey(importStatus) {
	switch (importStatus) {
		case ImportStatus.Running: return "mailImportStatusRunning_label";
		case ImportStatus.Paused: return "mailImportStatusPaused_label";
		case ImportStatus.Canceled: return "mailImportStatusCanceled_label";
		case ImportStatus.Finished: return "mailImportStatusFinished_label";
	}
}

//#endregion
//#region src/mail-app/settings/WebMailImportSettingsViewer.ts
var WebMailImportSettingsViewer = class {
	constructor() {}
	view() {
		return mithril_default(".fill-absolute.scroll.plr-l.pb-xl", [mithril_default(".h4.mt-l", lang.get("mailImportSettings_label")), this.renderNoImportOnWebText()]);
	}
	renderNoImportOnWebText() {
		return [mithril_default(".flex-column.mt", mithril_default(".p", lang.get("mailImportNoImportOnWeb_label")), mithril_default(".flex-start.mt-l", mithril_default(LoginButton, {
			type: LoginButtonType.FlexWidth,
			label: "mailImportDownloadDesktopClient_label",
			onclick: () => {
				const desktopClientDownloadUri = "https://tuta.com#download";
				if (isWebClient()) open(desktopClientDownloadUri);
else mailLocator.systemFacade.openLink(desktopClientDownloadUri);
			}
		})), mithril_default(".flex-v-center.full-width.mt-xl", mithril_default("img", {
			src: `${window.tutao.appState.prefixWithoutFile}/images/mail-import/email-import-webapp.svg`,
			alt: "",
			rel: "noreferrer",
			loading: "lazy",
			decoding: "async",
			class: "settings-illustration-large"
		})))];
	}
	async entityEventsReceived(updates) {}
};

//#endregion
//#region src/mail-app/settings/MailExportSettings.ts
var MailExportSettings = class {
	selectedMailbox = null;
	controllerSubscription = null;
	isExportHistoryExpanded = false;
	oncreate(vnode) {
		this.controllerSubscription = vnode.attrs.mailExportController.state.map(mithril_default.redraw);
	}
	onremove() {
		if (this.controllerSubscription) {
			this.controllerSubscription.end();
			this.controllerSubscription = null;
		}
	}
	view(vnode) {
		const { mailboxDetails } = vnode.attrs;
		this.selectedMailbox = this.selectedMailbox ?? first(mailboxDetails);
		const state = vnode.attrs.mailExportController.state();
		const emptyLabel = mithril_default("br");
		return [mithril_default(DropDownSelector, {
			label: "mailboxToExport_label",
			items: mailboxDetails.map((mailboxDetail) => {
				return {
					name: getMailboxName(mailLocator.logins, mailboxDetail),
					value: mailboxDetail
				};
			}),
			selectedValue: this.selectedMailbox,
			selectionChangedHandler: (selectedMailbox) => {
				this.selectedMailbox = selectedMailbox;
			},
			dropdownWidth: 300,
			disabled: state.type === "exporting",
			helpLabel: () => emptyLabel
		}), this.renderState(vnode.attrs.mailExportController)];
	}
	renderState(controller) {
		const state = controller.state();
		switch (state.type) {
			case "exporting": return [mithril_default(".flex-start.mt-m.small", lang.get("exportingEmails_label", { "{count}": state.exportedMails })), mithril_default(".flex-space-between.border-radius-big.mt-s.rel.nav-bg.full-width.center-vertically", [mithril_default(Icon, {
				icon: BootIcons.Progress,
				class: "flex-center items-center icon-progress-tiny icon-progress ml-s",
				size: IconSize.Medium
			}), mithril_default(IconButton, {
				title: "cancel_action",
				icon: Icons.Cancel,
				click: () => {
					controller.cancelExport();
				},
				size: ButtonSize.Normal
			})])];
			case "idle": return [mithril_default(".flex-start.mt-m", this.renderExportInfoText()), mithril_default(".flex-start.mt-s", mithril_default(LoginButton, {
				type: LoginButtonType.FlexWidth,
				label: "export_action",
				onclick: () => {
					if (this.selectedMailbox) controller.startExport(this.selectedMailbox);
				}
			}))];
			case "error": return [mithril_default(".flex-space-between.items-center.mt.mb-s", [mithril_default("small.noselect", state.message), mithril_default(Button, {
				label: "retry_action",
				click: () => {
					controller.cancelExport();
					if (this.selectedMailbox) controller.startExport(this.selectedMailbox);
				},
				type: ButtonType.Secondary
			})])];
			case "finished": return [mithril_default("small.noselect", lang.get("exportFinished_label")), mithril_default(".flex-start.mt-s", mithril_default(LoginButton, {
				type: LoginButtonType.FlexWidth,
				label: "open_action",
				onclick: () => this.onOpenClicked(controller)
			}))];
			case "locked": return [mithril_default(".flex-space-between.items-center.mt.mb-s.button-height", [mithril_default("small.noselect", `${lang.get("exportRunningElsewhere_label")} ${lang.get("pleaseWait_msg")}`)])];
		}
	}
	async onOpenClicked(controller) {
		await controller.openExportDirectory();
		await controller.cancelExport();
	}
	renderExportInfoText() {
		return [mithril_default(".small", lang.get("mailExportInfoText_label"))];
	}
};

//#endregion
//#region src/mail-app/settings/MailExportViewer.ts
assertMainOrNode();
var MailExportViewer = class {
	mailExportController = null;
	constructor() {
		this.view = this.view.bind(this);
		if (isDesktop()) mailLocator.mailExportController().then((controller) => {
			this.mailExportController = controller;
			mithril_default.redraw();
		});
	}
	view() {
		return [mithril_default(".fill-absolute.scroll.plr-l.pb-xl", mithril_default(".h4.mt-l", lang.get("mailExportSettings_label")), isDesktop() ? this.renderMailExportSettings() : this.renderExportOnlyOnDesktopText())];
	}
	renderMailExportSettings() {
		return this.mailExportController != null ? mithril_default(MailExportSettings, {
			mailboxDetails: mailLocator.mailboxModel.mailboxDetails(),
			logins: mailLocator.logins,
			mailExportController: this.mailExportController
		}) : null;
	}
	renderExportOnlyOnDesktopText() {
		return [mithril_default(".flex-column.mt", mithril_default(".p", lang.get("mailExportOnlyOnDesktop_label")), mithril_default(".flex-start.mt-l", mithril_default(LoginButton, {
			type: LoginButtonType.FlexWidth,
			label: "downloadDesktopClient_label",
			onclick: () => {
				const desktopClientDownloadUri = "https://tuta.com#download";
				if (isWebClient()) open(desktopClientDownloadUri);
else mailLocator.systemFacade.openLink(desktopClientDownloadUri);
			}
		})), mithril_default(".flex-v-center.full-width.mt-xl", mithril_default("img", {
			src: `${window.tutao.appState.prefixWithoutFile}/images/mail-import/email-import-webapp.svg`,
			alt: "",
			rel: "noreferrer",
			loading: "lazy",
			decoding: "async",
			class: "settings-illustration-large"
		})))];
	}
	async entityEventsReceived() {
		return Promise.resolve();
	}
};

//#endregion
//#region src/mail-app/settings/SettingsView.ts
var import_stream = __toESM(require_stream(), 1);
assertMainOrNode();
var SettingsView = class extends BaseTopLevelView {
	viewSlider;
	_settingsFoldersColumn;
	_settingsColumn;
	_settingsDetailsColumn;
	_userFolders;
	_adminFolders;
	logins;
	_templateFolders;
	_dummyTemplateFolder;
	_knowledgeBaseFolders;
	_selectedFolder;
	_currentViewer = null;
	showBusinessSettings = (0, import_stream.default)(false);
	showAffiliateSettings = false;
	_targetFolder;
	_targetRoute;
	detailsViewer = null;
	_customDomains;
	_templateInvitations;
	constructor(vnode) {
		super();
		this.logins = vnode.attrs.logins;
		this._userFolders = [
			new SettingsFolder(() => "login_label", () => BootIcons.Contacts, "login", () => new LoginSettingsViewer(locator.credentialsProvider, isApp() ? locator.systemFacade : null), undefined),
			new SettingsFolder(() => "email_label", () => BootIcons.Mail, "mail", () => new MailSettingsViewer(), undefined),
			new SettingsFolder(() => "contacts_label", () => BootIcons.Contacts, "contacts", () => new ContactsSettingsViewer(), undefined),
			new SettingsFolder(() => "appearanceSettings_label", () => Icons.Palette, "appearance", () => new AppearanceSettingsViewer(), undefined),
			new SettingsFolder(() => "notificationSettings_action", () => Icons.Bell, "notifications", () => new NotificationSettingsViewer(), undefined)
		];
		if (isDesktop()) this._userFolders.push(new SettingsFolder(() => "desktop_label", () => Icons.Desktop, "desktop", () => {
			const desktopSettingsViewer = new DesktopSettingsViewer();
			locator.initialized.then(() => {
				locator.native.setAppUpdateListener(() => desktopSettingsViewer.onAppUpdateAvailable());
			});
			return desktopSettingsViewer;
		}, undefined));
		mailLocator.mailboxModel.getMailboxDetails().then((mailboxes) => {
			this._userFolders.push(new SettingsFolder(() => "mailImportSettings_label", () => Icons.Import, "mailImport", () => {
				if (isDesktop()) return new DesktopMailImportSettingsViewer(() => mailLocator.getMailImporter());
else return new WebMailImportSettingsViewer();
			}, undefined));
		});
		this._userFolders.push(new SettingsFolder(() => "mailExportSettings_label", () => Icons.Export, "mailExport", () => new MailExportViewer(), undefined));
		this._adminFolders = [];
		this._templateFolders = [];
		this._makeTemplateFolders().then((folders) => {
			this._templateFolders = folders;
			mithril_default.redraw();
		});
		this._dummyTemplateFolder = new SettingsFolder(() => "templateGroupDefaultName_label", () => Icons.ListAlt, {
			folder: "templates",
			id: "init"
		}, () => {
			return {
				view: () => {
					return mithril_default(DummyTemplateListView);
				},
				entityEventsReceived: () => Promise.resolve()
			};
		}, undefined);
		this._knowledgeBaseFolders = [];
		this._makeKnowledgeBaseFolders().then((folders) => {
			this._knowledgeBaseFolders = folders;
			mithril_default.redraw();
		});
		this._selectedFolder = this._userFolders[0];
		this._templateInvitations = new ReceivedGroupInvitationsModel(GroupType.Template, locator.eventController, locator.entityClient, this.logins);
		this._templateInvitations.invitations.map(() => mithril_default.redraw());
		this._templateInvitations.init();
		this._settingsFoldersColumn = new ViewColumn({
			onbeforeremove: () => {
				this._templateInvitations.dispose();
			},
			view: () => {
				const [ownTemplates, sharedTemplates] = partition(this._templateFolders, (folder) => isSharedGroupOwner(folder.data.group, this.logins.getUserController().user));
				const templateInvitations = this._templateInvitations.invitations();
				return mithril_default(FolderColumnView, {
					drawer: vnode.attrs.drawerAttrs,
					button: null,
					content: mithril_default(".flex.flex-grow.col", [
						mithril_default(SidebarSection, { name: "userSettings_label" }, [
							this._renderSidebarSectionChildren(this._userFolders),
							ownTemplates.length > 0 ? ownTemplates.map((folder) => this._renderTemplateFolderRow(folder)) : mithril_default(SettingsFolderRow, { mainButtonAttrs: this._createSettingsFolderNavButton(this._dummyTemplateFolder) }),
							sharedTemplates.map((folder) => this._renderTemplateFolderRow(folder))
						]),
						this.logins.isUserLoggedIn() && this.logins.getUserController().isGlobalAdmin() ? mithril_default(SidebarSection, { name: "adminSettings_label" }, this._renderSidebarSectionChildren(this._adminFolders)) : null,
						templateInvitations.length > 0 ? mithril_default(SidebarSection, { name: "templateGroupInvitations_label" }, templateInvitations.map((invitation) => this._renderTemplateInvitationFolderRow(invitation))) : null,
						this._knowledgeBaseFolders.length > 0 ? mithril_default(SidebarSection, { name: "knowledgebase_label" }, this._renderSidebarSectionChildren(this._knowledgeBaseFolders)) : null,
						this._bottomSection()
					]),
					ariaLabel: "settings_label"
				});
			}
		}, ColumnType.Foreground, {
			minWidth: size.first_col_min_width,
			maxWidth: size.first_col_max_width,
			headerCenter: "settings_label"
		});
		this._settingsColumn = new ViewColumn({ view: () => mithril_default(BackgroundColumnLayout, {
			backgroundColor: theme.navigation_bg,
			columnLayout: mithril_default(".mlr-safe-inset.fill-absolute.content-bg", { class: styles.isUsingBottomNavigation() ? "" : "border-radius-top-left-big" }, mithril_default(this._getCurrentViewer())),
			mobileHeader: () => mithril_default(MobileHeader, {
				...vnode.attrs.header,
				backAction: () => this.viewSlider.focusPreviousColumn(),
				columnType: "first",
				title: this._selectedFolder.name(),
				actions: [],
				primaryAction: () => null
			}),
			desktopToolbar: () => null
		}) }, ColumnType.Background, {
			minWidth: 400,
			maxWidth: 600,
			headerCenter: this._selectedFolder.name
		});
		this._settingsDetailsColumn = new ViewColumn({ view: () => mithril_default(BackgroundColumnLayout, {
			backgroundColor: theme.navigation_bg,
			columnLayout: mithril_default(".mlr-safe-inset.fill-absolute.content-bg", this.detailsViewer ? this.detailsViewer.renderView() : mithril_default("")),
			mobileHeader: () => mithril_default(MobileHeader, {
				...vnode.attrs.header,
				backAction: () => this.viewSlider.focusPreviousColumn(),
				columnType: "other",
				title: this._selectedFolder.name(),
				actions: [],
				primaryAction: () => null
			}),
			desktopToolbar: () => null
		}) }, ColumnType.Background, {
			minWidth: 500,
			maxWidth: 2400,
			headerCenter: "settings_label"
		});
		this.viewSlider = new ViewSlider([
			this._settingsFoldersColumn,
			this._settingsColumn,
			this._settingsDetailsColumn
		]);
		this._customDomains = new LazyLoaded(async () => {
			const domainInfos = await getAvailableDomains(this.logins, true);
			return domainInfos.map((info) => info.domain);
		});
		this._customDomains.getAsync().then(() => mithril_default.redraw());
		this._targetFolder = mithril_default.route.param("folder");
		this._targetRoute = mithril_default.route.get();
	}
	async populateAdminFolders() {
		await this.updateShowBusinessSettings();
		await this.updateShowAffiliateSettings();
		const currentPlanType = await this.logins.getUserController().getPlanType();
		const isLegacyPlan = LegacyPlans.includes(currentPlanType);
		if (await this.logins.getUserController().canHaveUsers()) {
			this._adminFolders.push(new SettingsFolder(() => "adminUserList_action", () => BootIcons.Contacts, "users", () => new UserListView((viewer) => this.replaceDetailsViewer(viewer), () => this.focusSettingsDetailsColumn(), () => !isApp() && this._customDomains.isLoaded() && this._customDomains.getLoaded().length > 0, () => showUserImportDialog(this._customDomains.getLoaded()), () => exportUserCsv(locator.entityClient, this.logins, locator.fileController, locator.counterFacade)), undefined));
			if (!this.logins.isEnabled(FeatureType.WhitelabelChild)) this._adminFolders.push(new SettingsFolder(() => "sharedMailboxes_label", () => Icons.People, "groups", () => new GroupListView((viewer) => this.replaceDetailsViewer(viewer), () => this.focusSettingsDetailsColumn()), undefined));
		}
		if (this.logins.getUserController().isGlobalAdmin()) {
			this._adminFolders.push(new SettingsFolder(() => "globalSettings_label", () => BootIcons.Settings, "global", () => new GlobalSettingsViewer(), undefined));
			if (!this.logins.isEnabled(FeatureType.WhitelabelChild) && !isIOSApp()) this._adminFolders.push(new SettingsFolder(() => "whitelabel_label", () => Icons.Wand, "whitelabel", () => new WhitelabelSettingsViewer(locator.entityClient, this.logins), undefined));
		}
		if (!this.logins.isEnabled(FeatureType.WhitelabelChild)) {
			if (this.logins.getUserController().isGlobalAdmin()) {
				this._adminFolders.push(new SettingsFolder(() => "adminSubscription_action", () => BootIcons.Premium, "subscription", () => new SubscriptionViewer(currentPlanType, isIOSApp() ? locator.mobilePaymentsFacade : null), undefined));
				this._adminFolders.push(new SettingsFolder(() => "adminPayment_action", () => Icons.CreditCard, "invoice", () => new PaymentViewer(), undefined));
				this._adminFolders.push(new SettingsFolder(() => "referralSettings_label", () => BootIcons.Share, "referral", () => new ReferralSettingsViewer(), undefined).setIsVisibleHandler(() => !this.showBusinessSettings()));
				this._adminFolders.push(new SettingsFolder(() => "affiliateSettings_label", () => BootIcons.Share, "affiliate", () => new AffiliateSettingsViewer(() => this.viewSlider.focusedColumn === this._settingsDetailsColumn, () => {
					if (this.viewSlider.focusedColumn !== this._settingsDetailsColumn) {
						this.replaceDetailsViewer(new AffiliateKpisViewer());
						this.focusSettingsDetailsColumn();
					} else {
						this.replaceDetailsViewer(null);
						this.viewSlider.focus(this._settingsColumn);
					}
				}), undefined).setIsVisibleHandler(() => this.showAffiliateSettings));
			}
		}
		mithril_default.redraw();
	}
	replaceDetailsViewer(viewer) {
		return this.detailsViewer = viewer;
	}
	oncreate(vnode) {
		locator.eventController.addEntityListener(this.entityListener);
		this.populateAdminFolders().then(() => {
			const stillAtDefaultUrl = mithril_default.route.get() === this._userFolders[0].url;
			if (stillAtDefaultUrl) this.onNewUrl({ folder: this._targetFolder }, this._targetRoute);
		});
	}
	onremove(vnode) {
		locator.eventController.removeEntityListener(this.entityListener);
	}
	entityListener = (updates, eventOwnerGroupId) => {
		return this.entityEventsReceived(updates, eventOwnerGroupId);
	};
	view({ attrs }) {
		return mithril_default("#settings.main-view", mithril_default(this.viewSlider, {
			header: mithril_default(Header, { ...attrs.header }),
			bottomNav: mithril_default(BottomNav)
		}));
	}
	_createSettingsFolderNavButton(folder) {
		return {
			label: folder.name(),
			icon: folder.icon,
			href: folder.url,
			colors: NavButtonColor.Nav,
			click: () => this.viewSlider.focus(this._settingsColumn),
			persistentBackground: true
		};
	}
	_renderTemplateFolderRow(folder) {
		const instance = folder.data;
		const isGroupOwner = isSharedGroupOwner(instance.group, getEtId(this.logins.getUserController().user));
		return mithril_default(SettingsFolderRow, {
			mainButtonAttrs: this._createSettingsFolderNavButton(folder),
			extraButton: mithril_default(IconButton, createMoreActionButtonAttrs(() => [
				isGroupOwner ? {
					label: "delete_action",
					click: () => this._deleteTemplateGroup(folder.data),
					icon: Icons.Trash
				} : {
					label: "leaveGroup_action",
					click: () => this._leaveTemplateGroup(folder.data),
					icon: Icons.Trash
				},
				{
					label: "sharing_label",
					click: () => showGroupSharingDialog(folder.data.groupInfo, true),
					icon: Icons.ContactImport
				},
				{
					label: "rename_action",
					click: () => showRenameTemplateListDialog(folder.data),
					icon: Icons.Edit
				}
			]))
		});
	}
	_leaveTemplateGroup(templateInfo) {
		return getConfirmation(lang.getTranslation("confirmLeaveSharedGroup_msg", { "{groupName}": getSharedGroupName(templateInfo.groupInfo, this.logins.getUserController(), false) })).confirmed(() => locator.groupManagementFacade.removeUserFromGroup(getEtId(this.logins.getUserController().user), templateInfo.groupInfo.group));
	}
	_deleteTemplateGroup(templateInfo) {
		return getConfirmation("confirmDeleteTemplateGroup_msg").confirmed(() => showProgressDialog("pleaseWait_msg", locator.serviceExecutor.delete(TemplateGroupService, createUserAreaGroupDeleteData({ group: templateInfo.groupInfo.group }))));
	}
	_renderTemplateInvitationFolderRow(invitation) {
		return mithril_default(GroupInvitationFolderRow, {
			invitation,
			icon: BootIcons.Mail
		});
	}
	_renderSidebarSectionChildren(folders) {
		return mithril_default("", folders.filter((folder) => folder.isVisible()).map((folder) => {
			const buttonAttrs = this._createSettingsFolderNavButton(folder);
			return mithril_default(SettingsFolderRow, { mainButtonAttrs: buttonAttrs });
		}));
	}
	_getCurrentViewer() {
		if (!this._currentViewer) {
			this.detailsViewer = null;
			this._currentViewer = this._selectedFolder.viewerCreator();
		}
		return this._currentViewer;
	}
	/**
	* Notifies the current view about changes of the url within its scope.
	*/
	onNewUrl(args, requestedPath) {
		if (!args.folder) this._setUrl(this._userFolders[0].url);
else if (args.folder || !mithril_default.route.get().startsWith("/settings")) {
			const folder = this._allSettingsFolders().find((folder$1) => folder$1.url === requestedPath);
			if (!folder) this._setUrl(this._userFolders[0].url);
else if (this._selectedFolder.path === folder.path) {
				this._selectedFolder = folder;
				mithril_default.redraw();
			} else {
				this._setUrl(folder.url);
				this._selectedFolder = folder;
				this._currentViewer = null;
				this.detailsViewer = null;
				this._getCurrentViewer();
				mithril_default.redraw();
			}
		}
	}
	_getUserOwnedTemplateSettingsFolder() {
		return this._templateFolders.find((folder) => isSharedGroupOwner(folder.data.group, this.logins.getUserController().user)) || this._dummyTemplateFolder;
	}
	_allSettingsFolders() {
		const hasOwnTemplates = this._templateFolders.some((folder) => isSharedGroupOwner(folder.data.group, this.logins.getUserController().user));
		return [
			...this._userFolders,
			...this._adminFolders,
			...!hasOwnTemplates ? [this._dummyTemplateFolder] : [],
			...this._templateFolders,
			...this._knowledgeBaseFolders
		];
	}
	_setUrl(url) {
		mithril_default.route.set(url + location.hash);
	}
	_isGlobalAdmin(user) {
		return user.memberships.some((m) => m.groupType === GroupType.Admin);
	}
	focusSettingsDetailsColumn() {
		void this.viewSlider.focus(this._settingsDetailsColumn);
	}
	async updateShowBusinessSettings() {
		this.showBusinessSettings((await this.logins.getUserController().loadCustomer()).businessUse === true);
	}
	async entityEventsReceived(updates, eventOwnerGroupId) {
		for (const update of updates) if (isUpdateForTypeRef(CustomerTypeRef, update)) await this.updateShowBusinessSettings();
else if (this.logins.getUserController().isUpdateForLoggedInUserInstance(update, eventOwnerGroupId)) {
			const user = this.logins.getUserController().user;
			if (!this._isGlobalAdmin(user) && this._currentViewer && this._adminFolders.some((f) => f.isActive())) this._setUrl(this._userFolders[0].url);
			if (this._templateFolders.length !== this.logins.getUserController().getTemplateMemberships().length) {
				const templates = await this.reloadTemplateData();
				const currentRoute = mithril_default.route.get();
				if (currentRoute.startsWith(SETTINGS_PREFIX)) {
					const folder = mithril_default.route.param("folder");
					if (folder === "templates") {
						const templateListId = mithril_default.route.param("id");
						const haveOpenedFolder = templates.some((t) => t.id === templateListId);
						if (this._dummyTemplateFolder.url || !haveOpenedFolder) this._setUrl(this._getUserOwnedTemplateSettingsFolder().url);
					}
				}
			}
			mithril_default.redraw();
		} else if (isUpdateForTypeRef(CustomerInfoTypeRef, update)) {
			this._customDomains.reset();
			this._adminFolders.length = 0;
			await this.populateAdminFolders();
			await this._customDomains.getAsync();
			mithril_default.redraw();
		} else if (isUpdateForTypeRef(UserSettingsGroupRootTypeRef, update)) {
			await this.reloadTemplateData();
			mithril_default.redraw();
		}
		await this._currentViewer?.entityEventsReceived(updates);
		await this.detailsViewer?.entityEventsReceived(updates);
	}
	async reloadTemplateData() {
		const [templates, knowledgeBases] = await Promise.all([this._makeTemplateFolders(), this._makeKnowledgeBaseFolders()]);
		this._templateFolders = templates;
		this._knowledgeBaseFolders = knowledgeBases;
		return templates;
	}
	getViewSlider() {
		return this.viewSlider;
	}
	_bottomSection() {
		const isFirstPartyDomain = locator.domainConfigProvider().getCurrentDomainConfig().firstPartyDomain;
		return mithril_default(".pb.pt-l.flex-no-shrink.flex.col.justify-end.gap-vpad", [mithril_default(BaseButton, {
			class: "flash flex justify-center center-vertically pt-s pb-s plr-2l border-radius",
			style: {
				marginInline: "auto",
				border: `1px solid ${theme.navigation_button}`,
				color: theme.navigation_button
			},
			label: "supportMenu_label",
			text: mithril_default(".pl-m", lang.getTranslation("supportMenu_label").text),
			icon: mithril_default(Icon, {
				icon: Icons.SpeechBubbleFill,
				size: IconSize.Medium,
				class: "center-h",
				container: "div",
				style: { fill: theme.navigation_button }
			}),
			onclick: () => void showSupportDialog(locator.logins)
		}), isFirstPartyDomain ? this._aboutThisSoftwareLink() : null]);
	}
	_aboutThisSoftwareLink() {
		const label = lang.get("about_label");
		const versionLabel = `Tuta v${env.versionNumber}`;
		return mithril_default("button.text-center.small.no-text-decoration", {
			style: { backgroundColor: "transparent" },
			href: "#",
			"aria-label": label,
			"aria-description": versionLabel,
			"aria-haspopup": "dialog",
			onclick: () => {
				this.viewSlider.focusNextColumn();
				setTimeout(() => {
					const dialog = Dialog.showActionDialog({
						title: "about_label",
						child: () => mithril_default(AboutDialog, { onShowSetupWizard: () => {
							dialog.close();
							locator.showSetupWizard();
						} }),
						allowOkWithReturn: true,
						okAction: (dialog$1) => dialog$1.close(),
						allowCancel: false
					});
				}, 200);
			}
		}, [mithril_default("", versionLabel), mithril_default(".b", { style: { color: theme.navigation_button_selected } }, label)]);
	}
	async _makeTemplateFolders() {
		const userController = this.logins.getUserController();
		const templateMemberships = userController.getTemplateMemberships();
		return pMap(await loadTemplateGroupInstances(templateMemberships, locator.entityClient), (groupInstance) => {
			const sharedGroupName = getNullableSharedGroupName(groupInstance.groupInfo, userController.userSettingsGroupRoot, true);
			return new SettingsFolder(() => sharedGroupName ? lang.makeTranslation("templateGroupDefaultName_label", sharedGroupName) : "templateGroupDefaultName_label", () => Icons.ListAlt, {
				folder: "templates",
				id: getEtId(groupInstance.group)
			}, () => new TemplateListView(groupInstance, locator.entityClient, this.logins, (viewer) => this.replaceDetailsViewer(viewer), () => this.focusSettingsDetailsColumn()), groupInstance);
		});
	}
	async _makeKnowledgeBaseFolders() {
		const userController = this.logins.getUserController();
		const customer = await userController.loadCustomer();
		if (isCustomizationEnabledForCustomer(customer, FeatureType.KnowledgeBase)) {
			const templateMemberships = this.logins.getUserController() && this.logins.getUserController().getTemplateMemberships() || [];
			return pMap(await loadTemplateGroupInstances(templateMemberships, locator.entityClient), (groupInstance) => {
				const sharedGroupName = getNullableSharedGroupName(groupInstance.groupInfo, userController.userSettingsGroupRoot, true);
				return new SettingsFolder(() => sharedGroupName ? lang.makeTranslation("templateGroupDefaultName_label", sharedGroupName) : "templateGroupDefaultName_label", () => Icons.Book, {
					folder: "knowledgebase",
					id: getEtId(groupInstance.group)
				}, () => new KnowledgeBaseListView(locator.entityClient, this.logins, groupInstance.groupRoot, groupInstance.group, (viewer) => this.replaceDetailsViewer(viewer), () => this.focusSettingsDetailsColumn()), undefined);
			});
		} else return [];
	}
	async updateShowAffiliateSettings() {
		const customer = await this.logins.getUserController().loadCustomer();
		this.showAffiliateSettings = isCustomizationEnabledForCustomer(customer, FeatureType.AffiliatePartner);
	}
};
function showRenameTemplateListDialog(instance) {
	const logins = locator.logins;
	const name = (0, import_stream.default)(getSharedGroupName(instance.groupInfo, logins.getUserController(), true));
	Dialog.showActionDialog({
		title: "renameTemplateList_label",
		allowOkWithReturn: true,
		child: { view: () => mithril_default(TextField, {
			value: name(),
			oninput: name,
			label: "templateGroupName_label"
		}) },
		okAction: (dialog) => {
			dialog.close();
			const { userSettingsGroupRoot } = logins.getUserController();
			const existingGroupSettings = userSettingsGroupRoot.groupSettings.find((gc) => gc.group === instance.groupInfo.group);
			const newName = name();
			if (existingGroupSettings) existingGroupSettings.name = newName;
else {
				const newSettings = createGroupSettings({
					group: getEtId(instance.group),
					color: "",
					name: newName,
					defaultAlarmsList: [],
					sourceUrl: null
				});
				logins.getUserController().userSettingsGroupRoot.groupSettings.push(newSettings);
			}
			locator.entityClient.update(userSettingsGroupRoot).then(() => {
				if (isSharedGroupOwner(instance.group, logins.getUserController().user)) {
					instance.groupInfo.name = newName;
					locator.entityClient.update(instance.groupInfo);
				}
			});
		}
	});
}

//#endregion
export { SettingsView };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU2V0dGluZ3NWaWV3LWNodW5rLmpzIiwibmFtZXMiOlsibmFtZTogKCkgPT4gTWF5YmVUcmFuc2xhdGlvbiIsImljb246IGxhenlJY29uIiwicGF0aDogU2V0dGluZ3NGb2xkZXJQYXRoIiwidmlld2VyQ3JlYXRvcjogbGF6eTxVcGRhdGFibGVTZXR0aW5nc1ZpZXdlcj4iLCJkYXRhOiBUIiwiaXNWaXNpYmxlSGFuZGxlcjogbGF6eTxib29sZWFuPiIsIlNlY29uZEZhY3RvclR5cGVUb05hbWVUZXh0SWQ6IFJlY29yZDxTZWNvbmRGYWN0b3JUeXBlLCBUcmFuc2xhdGlvbktleT4iLCJlbnRpdHlDbGllbnQ6IEVudGl0eUNsaWVudCIsInVzZXI6IFVzZXIiLCJ3ZWJhdXRobkNsaWVudDogV2ViYXV0aG5DbGllbnQiLCJ0b3RwS2V5czogVG90cFNlY3JldCIsIndlYmF1dGhuU3VwcG9ydGVkOiBib29sZWFuIiwibG9naW5GYWNhZGU6IExvZ2luRmFjYWRlIiwiaG9zdG5hbWU6IHN0cmluZyIsImRvbWFpbkNvbmZpZzogRG9tYWluQ29uZmlnIiwidXBkYXRlVmlld0NhbGxiYWNrOiAoKSA9PiB2b2lkIiwidG9rZW4/OiBzdHJpbmciLCJRUkNvZGUiLCJvcHRpb25zOiBBcnJheTxTZWNvbmRGYWN0b3JUeXBlPiIsIm5ld1ZhbHVlOiBTZWNvbmRGYWN0b3JUeXBlIiwibmV3VmFsdWU6IHN0cmluZyIsInNlY3JldDogc3RyaW5nIiwiZXhwZWN0ZWRDb2RlOiBudW1iZXIiLCJrZXk6IFVpbnQ4QXJyYXkiLCJtb2RlbDogU2Vjb25kRmFjdG9yRWRpdE1vZGVsIiwidXNlcjogVXNlciIsImVudGl0eUNsaWVudDogRW50aXR5Q2xpZW50IiwibGF6eVVzZXI6IExhenlMb2FkZWQ8VXNlcj4iLCJ0b2tlbj86IHN0cmluZyIsImRpYWxvZzogU2Vjb25kRmFjdG9yRWRpdERpYWxvZyIsInR5cGVEcm9wZG93bkF0dHJzOiBEcm9wRG93blNlbGVjdG9yQXR0cnM8U2Vjb25kRmFjdG9yVHlwZT4iLCJuYW1lRmllbGRBdHRyczogVGV4dEZpZWxkQXR0cnMiLCJjb3B5QnV0dG9uQXR0cnM6IEljb25CdXR0b25BdHRycyIsIm0iLCJ1c2VyOiBMYXp5TG9hZGVkPFVzZXI+IiwiZG9tYWluQ29uZmlnUHJvdmlkZXI6IERvbWFpbkNvbmZpZ1Byb3ZpZGVyIiwibG9naW5GYWNhZGU6IExvZ2luRmFjYWRlIiwiYXNrRm9yUGFzc3dvcmQ6IGJvb2xlYW4iLCJpc0RlYWN0aXZhdGVkOiBib29sZWFuIiwic2Vjb25kRmFjdG9yVGFibGVBdHRyczogVGFibGVBdHRycyIsInJlbW92ZUJ1dHRvbkF0dHJzOiBJY29uQnV0dG9uQXR0cnMiLCJmYWN0b3I6IFNlY29uZEZhY3RvciIsImxvZ2luRG9tYWluczogUmVhZG9ubHlTZXQ8c3RyaW5nPiIsInRva2VuPzogc3RyaW5nIiwic2Vjb25kRmFjdG9yVG9SZW1vdmU6IFNlY29uZEZhY3RvciIsInVwZGF0ZTogRW50aXR5VXBkYXRlRGF0YSIsImNyZWRlbnRpYWxzUHJvdmlkZXI6IENyZWRlbnRpYWxzUHJvdmlkZXIiLCJtb2JpbGVTeXN0ZW1GYWNhZGU6IE1vYmlsZVN5c3RlbUZhY2FkZSB8IG51bGwiLCJtYWlsQWRkcmVzc0F0dHJzOiBUZXh0RmllbGRBdHRycyIsImNoYW5nZVBhc3N3b3JkQnV0dG9uQXR0cnM6IEljb25CdXR0b25BdHRycyIsInBhc3N3b3JkQXR0cnM6IFRleHRGaWVsZEF0dHJzIiwicmVjb3ZlcnlDb2RlRHJvcGRvd25CdXR0b25BdHRyczogSWNvbkJ1dHRvbkF0dHJzIiwicmVjb3ZlcnlDb2RlRmllbGRBdHRyczogVGV4dEZpZWxkQXR0cnMiLCJ1c2FnZURhdGFPcHRJbkF0dHJzOiBEcm9wRG93blNlbGVjdG9yQXR0cnM8Ym9vbGVhbiB8IG51bGw+Iiwic2Vzc2lvbjogU2Vzc2lvbiIsImlzVGhpc1Nlc3Npb246IGJvb2xlYW4iLCJ1cGRhdGVzOiBSZWFkb25seUFycmF5PEVudGl0eVVwZGF0ZURhdGE+IiwiY3JlZGVudGlhbHNFbmNyeXB0aW9uTW9kZTogQ3JlZGVudGlhbEVuY3J5cHRpb25Nb2RlIiwiYXBwTG9ja01ldGhvZDogQXBwTG9ja01ldGhvZCIsImdyb3VwSWQ6IElkIiwiZGlzcGxheU5hbWU6IHN0cmluZyIsImN1c3RvbWVyOiBDdXN0b21lciIsImNsZWFuRG9tYWluTmFtZTogc3RyaW5nIiwiY3VzdG9tZXJJZD86IElkIiwiRG5zUmVjb3JkVGFibGU6IFJlY29yZDxEbnNSZWNvcmRUeXBlLCBBY3R1YWxEbnNSZWNvcmRUeXBlPiIsInJlY29yZHM6IERuc1JlY29yZFtdIiwidm5vZGU6IFZub2RlRE9NPFdpemFyZFBhZ2VBdHRyczxBZGREb21haW5EYXRhPj4iLCJ2bm9kZTogVm5vZGU8V2l6YXJkUGFnZUF0dHJzPEFkZERvbWFpbkRhdGE+PiIsImRhdGE6IEFkZERvbWFpbkRhdGEiLCJkb206IEhUTUxFbGVtZW50IHwgbnVsbCIsImxlYXZlVW5maW5pc2hlZERpYWxvZ0F0dHJzOiBBY3Rpb25EaWFsb2dQcm9wcyIsImRpYWxvZzogRGlhbG9nIiwiZG9tYWluU3RhdHVzOiBEb21haW5EbnNTdGF0dXMiLCJyZWNvcmQ6IERuc1JlY29yZCIsInJlY29yZHM6IFZhbGlkYXRlZERuU1JlY29yZFtdIiwicmVmcmVzaEJ1dHRvbkF0dHJzOiBJY29uQnV0dG9uQXR0cnMgfCBudWxsIiwiaGlkZVJlZnJlc2hCdXR0b246IGJvb2xlYW4iLCJoZWxwSW5mbzogc3RyaW5nW10iLCJ2YWxpZGF0ZWRSZWNvcmQ6IERuc1JlY29yZCB8IG51bGwiLCJlcnJvck1lc3NhZ2VNYXA6IFJlY29yZDxDdXN0b21Eb21haW5DaGVja1Jlc3VsdCwgVHJhbnNsYXRpb25LZXk+IiwicmVjb3JkTGlzdDogQXJyYXk8RG5zUmVjb3JkPiIsImRvbWFpbkRhdGE6IEFkZERvbWFpbkRhdGEiLCJzaG93RXJyb3JEaWFsb2c6IGJvb2xlYW4iLCJkb21haW5TdGF0dXM6IERvbWFpbkRuc1N0YXR1cyIsInJlamVjdGVkU2VuZGVyOiBSZWplY3RlZFNlbmRlciIsIm1vZGVsOiBNYWlsQWRkcmVzc1RhYmxlTW9kZWwiLCJpc05ld1BhaWRQbGFuOiBib29sZWFuIiwibWFpbEFkZHJlc3M6IHN0cmluZyIsImZvcm1FcnJvcklkOiBUcmFuc2xhdGlvbktleSB8IG51bGwiLCJkaWFsb2c6IERpYWxvZyIsImFsaWFzOiBzdHJpbmciLCJzZW5kZXJOYW1lOiBzdHJpbmciLCJhZGRBbGlhc0J1dHRvbkF0dHJzOiBJY29uQnV0dG9uQXR0cnMgfCBudWxsIiwiYXR0cnM6IE1haWxBZGRyZXNzVGFibGVBdHRycyIsIm1vZGVsOiBNYWlsQWRkcmVzc1RhYmxlTW9kZWwiLCJhZGRyZXNzSW5mbzogQWRkcmVzc0luZm8iLCJhY3Rpb25CdXR0b25BdHRyczogSWNvbkJ1dHRvbkF0dHJzIHwgbnVsbCIsImFsaWFzOiBBZGRyZXNzSW5mbyIsIm1lc3NhZ2U6IFRyYW5zbGF0aW9uS2V5IiwiYWxpYXM6IHsgYWRkcmVzczogc3RyaW5nOyBuYW1lOiBzdHJpbmcgfSIsInZub2RlOiBWbm9kZTxBZGRFbWFpbEFkZHJlc3Nlc1BhZ2VBdHRycz4iLCJhbGlhc2VzVGFibGVBdHRyczogVGFibGVBdHRycyIsIm1haWxGb3JtQXR0cnM6IFNlbGVjdE1haWxBZGRyZXNzRm9ybUF0dHJzIiwiZG9tYWluRGF0YTogQWRkRG9tYWluRGF0YSIsInNob3dFcnJvckRpYWxvZzogYm9vbGVhbiIsInZub2RlOiBWbm9kZURPTTxXaXphcmRQYWdlQXR0cnM8QWRkRG9tYWluRGF0YT4+Iiwidm5vZGU6IFZub2RlPFdpemFyZFBhZ2VBdHRyczxBZGREb21haW5EYXRhPj4iLCJkb21haW5EYXRhOiBBZGREb21haW5EYXRhIiwic2hvd0Vycm9yRGlhbG9nOiBib29sZWFuIiwiZXJyb3JNZXNzYWdlTWFwOiBSZWNvcmQ8Q3VzdG9tRG9tYWluVmFsaWRhdGlvblJlc3VsdCwgVHJhbnNsYXRpb25LZXk+Iiwidm5vZGU6IFZub2RlRE9NPFdpemFyZFBhZ2VBdHRyczxBZGREb21haW5EYXRhPj4iLCJ2bm9kZTogVm5vZGU8V2l6YXJkUGFnZUF0dHJzPEFkZERvbWFpbkRhdGE+PiIsImRvbWFpbjogc3RyaW5nIiwiZG9tYWluRGF0YTogQWRkRG9tYWluRGF0YSIsInNob3dFcnJvckRpYWxvZzogYm9vbGVhbiIsImRvbWFpbjogc3RyaW5nIiwiY3VzdG9tZXJJbmZvOiBDdXN0b21lckluZm8iLCJtYWlsQWRkcmVzc1RhYmxlTW9kZWw6IE1haWxBZGRyZXNzVGFibGVNb2RlbCIsIm1haWxBZGRyZXNzVGFibGVFeHBhbmRlZDogYm9vbGVhbiIsImRvbWFpbkRhdGE6IEFkZERvbWFpbkRhdGEiLCJ2bm9kZTogVm5vZGU8RXhwYW5kYWJsZVRhYmxlQXR0cnM+Iiwic3VydmV5RGF0YTogU3VydmV5RGF0YSB8IG51bGwiLCJ0YWtlb3Zlcjogc3RyaW5nIiwicGFzc3dvcmQ6IHN0cmluZyIsInZub2RlOiBWbm9kZTxBY2NvdW50TWFpbnRlbmFuY2VTZXR0aW5nc0F0dHJzPiIsIm0iLCJ1cGRhdGVzOiBFbnRpdHlVcGRhdGVEYXRhW10iLCJhdWRpdExvZ1RhYmxlQXR0cnM6IFRhYmxlQXR0cnMiLCJuZXdQcm9wczogQ3VzdG9tZXJTZXJ2ZXJQcm9wZXJ0aWVzIiwiZW50cnk6IEF1ZGl0TG9nRW50cnkiLCJjdXN0b21lcjogQ3VzdG9tZXIiLCJtb2RpZmllZEdyb3VwSW5mbzogU3RyZWFtPEdyb3VwSW5mbz4iLCJncm91cEluZm9Mb2FkaW5nUHJvbWlzZXM6IFByb21pc2U8dW5rbm93bj5bXSIsImdyb3VwSW5mbzogR3JvdXBJbmZvIiwidXBkYXRlczogUmVhZG9ubHlBcnJheTxFbnRpdHlVcGRhdGVEYXRhPiIsIm0iLCJzcGFtUnVsZVRhYmxlQXR0cnM6IFRhYmxlQXR0cnMiLCJyZWplY3RlZFNlbmRlclRhYmxlQXR0cnM6IFRhYmxlQXR0cnMiLCJjdXN0b21Eb21haW5UYWJsZUF0dHJzOiBUYWJsZUF0dHJzIiwiZm46IEFjY291bnRNYWludGVuYW5jZVVwZGF0ZU5vdGlmaWVyIiwiYnV0dG9uczogRHJvcGRvd25DaGlsZEF0dHJzW10iLCJkb21haW5EbnNTdGF0dXM6IERvbWFpbkRuc1N0YXR1cyIsImN1c3RvbWVySW5mbzogYW55IiwiZG9tYWluSW5mbzogRG9tYWluSW5mbyIsImNhdGNoQWxsTWFpbEdyb3VwSWQ6IElkIHwgbnVsbCIsInVwZGF0ZXM6IFJlYWRvbmx5QXJyYXk8RW50aXR5VXBkYXRlRGF0YT4iLCJ1cGRhdGVBdmFpbGFibGU6IFN0cmVhbTxib29sZWFuPiIsInZub2RlOiBWbm9kZTxVcGRhdGVIZWxwTGFiZWxBdHRycz4iLCJzZXREZWZhdWx0TWFpbHRvSGFuZGxlckF0dHJzOiBEcm9wRG93blNlbGVjdG9yQXR0cnM8Ym9vbGVhbj4iLCJzZXRSdW5JbkJhY2tncm91bmRBdHRyczogRHJvcERvd25TZWxlY3RvckF0dHJzPGJvb2xlYW4+Iiwic2V0UnVuT25TdGFydHVwQXR0cnM6IERyb3BEb3duU2VsZWN0b3JBdHRyczxib29sZWFuPiIsImVkaXRTcGVsbGNoZWNrTGFuZ3VhZ2VCdXR0b25BdHRyczogSWNvbkJ1dHRvbkF0dHJzIiwic3BlbGxjaGVja0xhbmd1YWdlQXR0cnM6IFRleHRGaWVsZEF0dHJzIiwic2V0RGVza3RvcEludGVncmF0aW9uQXR0cnM6IERyb3BEb3duU2VsZWN0b3JBdHRyczxib29sZWFuPiIsInNldE1haWxFeHBvcnRNb2RlQXR0cnM6IERyb3BEb3duU2VsZWN0b3JBdHRyczxNYWlsRXhwb3J0TW9kZT4iLCJ1cGRhdGVIZWxwTGFiZWxBdHRyczogVXBkYXRlSGVscExhYmVsQXR0cnMiLCJzZXRBdXRvVXBkYXRlQXR0cnM6IERyb3BEb3duU2VsZWN0b3JBdHRyczxib29sZWFuPiIsImNoYW5nZURlZmF1bHREb3dubG9hZFBhdGhBdHRyczogSWNvbkJ1dHRvbkF0dHJzIiwiZGVmYXVsdERvd25sb2FkUGF0aEF0dHJzOiBUZXh0RmllbGRBdHRycyIsImVuYWJsZTogYm9vbGVhbiIsInNob3VsZEJlRGVmYXVsdE1haWx0b0hhbmRsZXI6IGJvb2xlYW4iLCJzaG91bGRJbnRlZ3JhdGU6IGJvb2xlYW4iLCJzZXR0aW5nOiBEZXNrdG9wQ29uZmlnS2V5IiwidmFsdWU6IGJvb2xlYW4iLCJ2YWx1ZTogc3RyaW5nIHwgbnVsbCIsInY6IERvd25sb2FkTG9jYXRpb25TdHJhdGVneSIsInNhdmVQYXRoOiBzdHJpbmcgfCBudWxsIiwib3V0T2ZPZmZpY2VOb3RpZmljYXRpb246IE91dE9mT2ZmaWNlTm90aWZpY2F0aW9uIHwgbnVsbCIsImVudGl0eUNsaWVudDogRW50aXR5Q2xpZW50IiwidXNlckNvbnRyb2xsZXI6IFVzZXJDb250cm9sbGVyIiwibGFuZ3VhZ2VWaWV3TW9kZWw6IExhbmd1YWdlVmlld01vZGVsIiwic2VydmljZUV4ZWN1dG9yOiBJU2VydmljZUV4ZWN1dG9yIiwic3RhcnREYXRlOiBEYXRlIHwgbnVsbCIsImVuZERhdGU6IERhdGUgfCBudWxsIiwibm90aWZpY2F0aW9uTWVzc2FnZXM6IE91dE9mT2ZmaWNlTm90aWZpY2F0aW9uTWVzc2FnZVtdIiwiZGVmYXVsdE5vdGlmaWNhdGlvbjogT3V0T2ZPZmZpY2VOb3RpZmljYXRpb25NZXNzYWdlIiwib3JnYW5pemF0aW9uTm90aWZpY2F0aW9uOiBPdXRPZk9mZmljZU5vdGlmaWNhdGlvbk1lc3NhZ2UiLCJvdXRPZk9mZmljZU5vdGlmaWNhdGlvbjogT3V0T2ZPZmZpY2VOb3RpZmljYXRpb24gfCBudWxsIiwiZGlhbG9nSGVhZGVyQXR0cnM6IERpYWxvZ0hlYWRlckJhckF0dHJzIiwidm5vZGU6IFZub2RlPEVkaXRPdXRPZk9mZmljZU5vdGlmaWNhdGlvbkRpYWxvZ0F0dHJzPiIsIm1vZGVsOiBFZGl0T3V0T2ZPZmZpY2VOb3RpZmljYXRpb25EaWFsb2dNb2RlbCIsIm9yZ2FuaXphdGlvbkVuYWJsZWQ6IGJvb2xlYW4iLCJkZWZhdWx0TWVzc2FnZUVkaXRvcjogSHRtbEVkaXRvciIsIm9yZ2FuaXphdGlvbk1lc3NhZ2VFZGl0b3I6IEh0bWxFZGl0b3IiLCJyZWNpcGllbnRIZWxwTGFiZWw6IGxhenk8c3RyaW5nPiIsInN0YXJ0T2ZUaGVXZWVrT2Zmc2V0OiBudW1iZXIiLCJzaG93IiwicHJvcHM6IFR1dGFub3RhUHJvcGVydGllcyIsInR5cGU6IEVtYWlsU2lnbmF0dXJlVHlwZSIsImRpYWxvZzogRGlhbG9nIiwicHJvcHMiLCJ0eXBlOiBzdHJpbmciLCJkZWZhdWx0U2lnbmF0dXJlOiBzdHJpbmciLCJjdXJyZW50Q3VzdG9tU2lnbmF0dXJlOiBzdHJpbmciLCJ1c2VyQ29udHJvbGxlcjogVXNlckNvbnRyb2xsZXIiLCJkZXZpY2VDb25maWc6IERldmljZUNvbmZpZyIsImRheXM6IG51bWJlciIsImN1c3RvbWVySW5mbzogQ3VzdG9tZXJJbmZvIiwiZGVmYXVsdFNlbmRlckF0dHJzOiBEcm9wRG93blNlbGVjdG9yQXR0cnM8c3RyaW5nPiIsImNoYW5nZVNpZ25hdHVyZUJ1dHRvbkF0dHJzOiBJY29uQnV0dG9uQXR0cnMiLCJzaWduYXR1cmVBdHRyczogVGV4dEZpZWxkQXR0cnMiLCJlZGl0T3V0T2ZPZmZpY2VOb3RpZmljYXRpb25CdXR0b25BdHRyczogSWNvbkJ1dHRvbkF0dHJzIiwib3V0T2ZPZmZpY2VBdHRyczogVGV4dEZpZWxkQXR0cnMiLCJkZWZhdWx0VW5jb25maWRlbnRpYWxBdHRyczogRHJvcERvd25TZWxlY3RvckF0dHJzPGJvb2xlYW4+Iiwic2VuZFBsYWludGV4dEF0dHJzOiBEcm9wRG93blNlbGVjdG9yQXR0cnM8Ym9vbGVhbj4iLCJlbmFibGVNYWlsSW5kZXhpbmdBdHRyczogRHJvcERvd25TZWxlY3RvckF0dHJzPGJvb2xlYW4+IiwiYmVoYXZpb3JBZnRlck1vdmVFbWFpbEFjdGlvbjogRHJvcERvd25TZWxlY3RvckF0dHJzPExpc3RBdXRvU2VsZWN0QmVoYXZpb3I+IiwiYWRkSW5ib3hSdWxlQnV0dG9uQXR0cnM6IEljb25CdXR0b25BdHRycyIsImluYm94UnVsZXNUYWJsZUF0dHJzOiBUYWJsZUF0dHJzIiwiY29udmVyc2F0aW9uVmlld0Ryb3Bkb3duQXR0cnM6IERyb3BEb3duU2VsZWN0b3JBdHRyczxib29sZWFuPiIsImFyZzogYm9vbGVhbiIsInByb3BzOiBUdXRhbm90YVByb3BlcnRpZXMiLCJtYWlsYm94RGV0YWlsOiBNYWlsYm94RGV0YWlsIiwidGFyZ2V0Rm9sZGVySWQ6IElkVHVwbGUiLCJ1cGRhdGVzOiBSZWFkb25seUFycmF5PEVudGl0eVVwZGF0ZURhdGE+Iiwic2V0dGluZ3M6IE9mZmxpbmVTdG9yYWdlU2V0dGluZ3NNb2RlbCIsInBhcmFtczogQm9va2luZ1BhcmFtcyIsIm9rTGFiZWw6IFRyYW5zbGF0aW9uS2V5IiwidmlldzogKCkgPT4gQ2hpbGRyZW4iLCJkaWFsb2c6IERpYWxvZyIsInJlczogYm9vbGVhbiIsIm1vZGVsOiBQcmljZUNoYW5nZU1vZGVsIiwicHJpY2U6IFByaWNlU2VydmljZVJldHVybiIsImZlYXR1cmVUeXBlOiBCb29raW5nSXRlbUZlYXR1cmVUeXBlIiwicHJpY2VEYXRhOiBQcmljZURhdGEgfCBudWxsIiwiZmVhdHVyZVR5cGU6IE51bWJlclN0cmluZyIsIm1vZGVsOiBHcm91cERldGFpbHNNb2RlbCIsImF0dHJzOiBEcm9wRG93blNlbGVjdG9yQXR0cnM8Ym9vbGVhbj4iLCJkZWFjdGl2YXRlOiBib29sZWFuIiwiZGlhbG9nOiBEaWFsb2ciLCJuZXdTZWxlY3RlZDogSWQiLCJ1cGRhdGVzOiBSZWFkb25seUFycmF5PEVudGl0eVVwZGF0ZURhdGE+IiwiYWRkVXNlckJ1dHRvbkF0dHJzOiBJY29uQnV0dG9uQXR0cnMiLCJsaW5lczogVGFibGVMaW5lQXR0cnNbXSIsInJlbW92ZUJ1dHRvbkF0dHJzOiBJY29uQnV0dG9uQXR0cnMiLCJtZW1iZXJzVGFibGVBdHRyczogVGFibGVBdHRycyIsImdyb3VwVHlwZTogTnVtYmVyU3RyaW5nIHwgbnVsbCIsInVzZXJEZXRhaWxzSW5wdXRDc3Y6IHN0cmluZyIsImF2YWlsYWJsZURvbWFpbnM6IHN0cmluZ1tdIiwiY3N2U3RyaW5nOiBzdHJpbmciLCJ1c2VyRGF0YTogVXNlckltcG9ydERldGFpbHNbXSIsImVycm9yTWVzc2FnZUFycmF5OiBUcmFuc2xhdGlvbktleVtdIiwiZXJyb3JNZXNzYWdlOiBzdHJpbmcgfCBudWxsIiwidXNlckRldGFpbHNBcnJheTogVXNlckltcG9ydERldGFpbHNbXSIsIm5vdEF2YWlsYWJsZVVzZXJzOiBVc2VySW1wb3J0RGV0YWlsc1tdIiwidXNlcjogVXNlckltcG9ydERldGFpbHMiLCJpbmRleDogbnVtYmVyIiwib3ZlcmFsbE51bWJlck9mVXNlcnM6IG51bWJlciIsIm9wZXJhdGlvbklkOiBPcGVyYXRpb25JZCIsInVzZXJHcm91cEluZm86IEdyb3VwSW5mbyIsImlzQWRtaW46IGJvb2xlYW4iLCJjaGFuZ2VQYXNzd29yZEJ1dHRvbkF0dHJzOiBJY29uQnV0dG9uQXR0cnMiLCJuYW1lOiBzdHJpbmciLCJ2YWx1ZTogYm9vbGVhbiIsImFjdGl2YXRlOiBib29sZWFuIiwic2VsZWN0aW9uOiBHcm91cEluZm8iLCJkaWFsb2c6IERpYWxvZyIsInVzZXI6IFVzZXIiLCJjdXN0b21lcjogQ3VzdG9tZXIiLCJ1cGRhdGVzOiBSZWFkb25seUFycmF5PEVudGl0eVVwZGF0ZURhdGE+IiwiY3VzdG9tRG9tYWluczogc3RyaW5nW10iLCJFZGl0b3IiLCJzaG93IiwiZW1haWxBZGRyZXNzOiBzdHJpbmcgfCBudWxsIiwiZXJyb3JNc2c6IE1heWJlVHJhbnNsYXRpb24gfCBudWxsIiwiZGlhbG9nOiBEaWFsb2ciLCJ1cGRhdGVEZXRhaWxzVmlld2VyOiAodmlld2VyOiBVc2VyVmlld2VyIHwgbnVsbCkgPT4gdW5rbm93biIsImZvY3VzRGV0YWlsc1ZpZXdlcjogKCkgPT4gdW5rbm93biIsImNhbkltcG9ydFVzZXJzOiAoKSA9PiBib29sZWFuIiwib25JbXBvcnRVc2VyczogKCkgPT4gdW5rbm93biIsIm9uRXhwb3J0VXNlcnM6ICgpID0+IHVua25vd24iLCJpdGVtOiBHcm91cEluZm8iLCJ1c2VyR3JvdXBJbmZvOiBHcm91cEluZm8iLCJ1cGRhdGVzOiBSZWFkb25seUFycmF5PEVudGl0eVVwZGF0ZURhdGE+IiwiX2xpc3RJZDogSWQiLCJlbGVtZW50SWQ6IElkIiwiZGV0YWlsc1ZpZXdlcjogVXNlclZpZXdlciB8IG51bGwiLCJnaTogR3JvdXBJbmZvIiwicXVlcnk6IHN0cmluZyIsImlzQWRtaW46IChncm91cEluZm86IEdyb3VwSW5mbykgPT4gYm9vbGVhbiIsImdyb3VwSW5mbzogR3JvdXBJbmZvIiwic2VsZWN0ZWQ6IGJvb2xlYW4iLCJ2bm9kZTogVm5vZGU8QWRkR3JvdXBEaWFsb2dBdHRycz4iLCJhdmFpbGFibGVEb21haW5zOiBBcnJheTxFbWFpbERvbWFpbkRhdGE+IiwiZ3JvdXBNYW5hZ2VtZW50RmFjYWRlOiBHcm91cE1hbmFnZW1lbnRGYWNhZGUiLCJlbWFpbDogc3RyaW5nIiwidmFsaWRhdGlvblJlc3VsdDogVmFsaWRhdGlvblJlc3VsdCIsInNob3ciLCJkaWFsb2c6IERpYWxvZyIsIm5hbWU6IHN0cmluZyIsImdyb3VwSW5mbzogR3JvdXBJbmZvIiwiZW50aXR5Q2xpZW50OiBFbnRpdHlDbGllbnQiLCJ1cGRhdGVWaWV3Q2FsbGJhY2s6ICgpID0+IHZvaWQiLCJ1c2VyR3JvdXBJbmZvOiBHcm91cEluZm8iLCJkZWFjdGl2YXRlOiBib29sZWFuIiwibmV3TmFtZTogc3RyaW5nIiwibmV3R3JvdXBJbmZvOiBHcm91cEluZm8iLCJib29raW5nVGV4dDogVHJhbnNsYXRpb25LZXkiLCJncm91cDogSWQiLCJ1cGRhdGVzOiBSZWFkb25seUFycmF5PEVudGl0eVVwZGF0ZURhdGE+IiwidXBkYXRlRGV0YWlsc1ZpZXdlcjogKHZpZXdlcjogR3JvdXBEZXRhaWxzVmlldyB8IG51bGwpID0+IHVua25vd24iLCJmb2N1c0RldGFpbHNWaWV3ZXI6ICgpID0+IHVua25vd24iLCJpdGVtOiBHcm91cEluZm8iLCJ1cGRhdGVzOiBSZWFkb25seUFycmF5PEVudGl0eVVwZGF0ZURhdGE+IiwiX2xpc3RJZDogSWQiLCJlbGVtZW50SWQ6IElkIiwiaXRlbTogR3JvdXBJbmZvIHwgbnVsbCIsIm0iLCJnaTogR3JvdXBJbmZvIiwicXVlcnk6IHN0cmluZyIsImdyb3VwSW5mbzogR3JvdXBJbmZvIiwic2VsZWN0ZWQ6IGJvb2xlYW4iLCJkb21haW46IHN0cmluZyIsImRpYWxvZzogRGlhbG9nIiwic2hvdyIsImN1c3RvbWVySW5mbzogQ3VzdG9tZXJJbmZvIiwidm5vZGU6IFZub2RlPFdoaXRlbGFiZWxCcmFuZGluZ0RvbWFpblNldHRpbmdzQXR0cnM+Iiwid2hpdGVsYWJlbERvbWFpbjogc3RyaW5nIiwiY3VzdG9tZXJJbmZvOiBDdXN0b21lckluZm8iLCJjZXJ0aWZpY2F0ZUluZm86IENlcnRpZmljYXRlSW5mbyB8IG51bGwiLCJpc1doaXRlbGFiZWxGZWF0dXJlRW5hYmxlZDogYm9vbGVhbiIsImNvbXBvbmVudHM6IEFycmF5PHN0cmluZz4iLCJjZXJ0aWZpY2F0ZUluZm86IENlcnRpZmljYXRlSW5mbyIsInZub2RlOiBWbm9kZTxTaW1wbGVDdXN0b21Db2xvckVkaXRvckF0dHJzPiIsInNpbXBsZUNvbG9yUGlja2VyQXR0cnM6IFRleHRGaWVsZEF0dHJzIiwidjogQmFzZVRoZW1lSWQiLCJjb2xvcnM6IFJlYWRvbmx5QXJyYXk8Q3VzdG9tQ29sb3I+IiwiZ3JvdXBlZENvbG9yczogQ29sb3JDYXRlZ29yaWVzIiwibW9kZWw6IEN1c3RvbUNvbG9yc0VkaXRvclZpZXdNb2RlbCIsIm9uSW5wdXQ6IChhcmcwOiBFdmVudCkgPT4gdW5rbm93biIsInZhbHVlOiBzdHJpbmciLCJvbmNyZWF0ZT86ICh2bm9kZTogVm5vZGVET008dm9pZD4pID0+IHZvaWQiLCJkZWZhdWx0Q29sb3I6IHN0cmluZyIsInZhbGlkOiBib29sZWFuIiwic3RyaW5nOiBzdHJpbmciLCJzaG93IiwibW9kZWw6IEN1c3RvbUNvbG9yc0VkaXRvclZpZXdNb2RlbCIsImFjdGlvbkJhckF0dHJzOiBEaWFsb2dIZWFkZXJCYXJBdHRycyIsImN1cnJlbnRUaGVtZTogVGhlbWUiLCJ0aGVtZUN1c3RvbWl6YXRpb25zOiBUaGVtZUN1c3RvbWl6YXRpb25zIiwid2hpdGVsYWJlbENvbmZpZzogV2hpdGVsYWJlbENvbmZpZyIsIndoaXRlbGFiZWxEb21haW5JbmZvOiBEb21haW5JbmZvIiwidGhlbWVDb250cm9sbGVyOiBUaGVtZUNvbnRyb2xsZXIiLCJlbnRpdHlDbGllbnQ6IEVudGl0eUNsaWVudCIsImxvZ2luQ29udHJvbGxlcjogTG9naW5Db250cm9sbGVyIiwiY29sb3JOYW1lOiBUaGVtZUtleSIsImFjY2VudENvbG9yOiBzdHJpbmciLCJiYXNlVGhlbWVJZDogQmFzZVRoZW1lSWQiLCJuYW1lT2ZLZXk6IEN1c3RvbWl6YXRpb25LZXkiLCJjb2xvclZhbHVlOiBzdHJpbmciLCJuYW1lOiBDdXN0b21pemF0aW9uS2V5Iiwidm5vZGU6IFZub2RlPFdoaXRlbGFiZWxUaGVtZVNldHRpbmdzQXR0cnM+IiwiZGF0YTogV2hpdGVsYWJlbERhdGEgfCBudWxsIiwid2hpdGVsYWJlbERhdGE6IFdoaXRlbGFiZWxEYXRhIiwiY3VzdG9tTG9nb1RleHRmaWVsZEF0dHJzOiBUZXh0RmllbGRBdHRycyIsImltYWdlRGF0YTogc3RyaW5nIiwidGhlbWU6IFRoZW1lQ3VzdG9taXphdGlvbnMgfCBudWxsIiwidGhlbWUiLCJjdXN0b21UaGVtZTogVGhlbWVDdXN0b21pemF0aW9ucyIsIndoaXRlbGFiZWxDb25maWc6IFdoaXRlbGFiZWxDb25maWciLCJ3aGl0ZWxhYmVsRG9tYWluSW5mbzogRG9tYWluSW5mbyIsInZub2RlOiBWbm9kZTxXaGl0ZWxhYmVsSW1wcmludEFuZFByaXZhY3lTZXR0aW5nc0F0dHJzPiIsInByaXZhY3lTdGF0ZW1lbnRVcmw6IHN0cmluZyIsIm9uUHJpdmFjeVN0YXRlbWVudFVybENoYW5nZWQ6ICgoYXJnMDogc3RyaW5nKSA9PiB1bmtub3duKSB8IG51bGwiLCJvblByaXZhY3lTdGF0ZW1lbnRVcmxDaGFuZ2VkOiAoYXJnMDogc3RyaW5nKSA9PiB1bmtub3duIiwiaW1wcmludFVybDogc3RyaW5nIiwib25JbXByaW50VXJsQ2hhbmdlZDogKChpbXByaW50VXJsOiBzdHJpbmcpID0+IHVua25vd24pIHwgbnVsbCIsIm9uSW1wcmludFVybENoYW5nZWQ6IChpbXByaW50VXJsOiBzdHJpbmcpID0+IHVua25vd24iLCJ2bm9kZTogVm5vZGU8V2hpdGVsYWJlbFJlZ2lzdHJhdGlvblNldHRpbmdzQXR0cnM+IiwiY3VycmVudFJlZ2lzdHJhdGlvbkRvbWFpbjogc3RyaW5nIHwgbnVsbCIsInBvc3NpYmxlUmVnaXN0cmF0aW9uRG9tYWluczogU2VsZWN0b3JJdGVtTGlzdDxzdHJpbmcgfCBudWxsPiIsIm9uUmVnaXN0cmF0aW9uRG9tYWluU2VsZWN0ZWQ6IChhcmcwOiBzdHJpbmcgfCBudWxsKSA9PiB1bmtub3duIiwic2VsZWN0ZWRWYWx1ZTogc3RyaW5nIHwgbnVsbCIsIndoaXRlbGFiZWxDb2RlOiBzdHJpbmciLCJvbldoaXRlbGFiZWxDb2RlQ2hhbmdlZDogKChhcmcwOiBzdHJpbmcpID0+IHVua25vd24pIHwgbnVsbCIsIm9uV2hpdGVsYWJlbENvZGVDaGFuZ2VkOiAoYXJnMDogc3RyaW5nKSA9PiB1bmtub3duIiwidm5vZGU6IFZub2RlPFdoaXRlbGFiZWxDdXN0b21NZXRhVGFnc1NldHRpbmdzQXR0cnM+IiwibWV0YVRhZ3M6IHN0cmluZyIsIm9uTWV0YVRhZ3NDaGFuZ2VkOiAodGFnczogc3RyaW5nKSA9PiB1bmtub3duIiwidmFsdWU6IHN0cmluZyIsImlzV2hpdGVsYWJlbEFjdGl2ZSIsInZub2RlOiBWbm9kZTxXaGl0ZWxhYmVsTm90aWZpY2F0aW9uRW1haWxTZXR0aW5nc0F0dHJzPiIsIm5vdGlmaWNhdGlvbk1haWxUZW1wbGF0ZXM6IEFycmF5PE5vdGlmaWNhdGlvbk1haWxUZW1wbGF0ZT4iLCJvbkFkZFRlbXBsYXRlOiAoKSA9PiB1bmtub3duIiwib25FZGl0VGVtcGxhdGU6IChhcmcwOiBOb3RpZmljYXRpb25NYWlsVGVtcGxhdGUpID0+IHVua25vd24iLCJvblJlbW92ZVRlbXBsYXRlOiAoYXJnMDogTm90aWZpY2F0aW9uTWFpbFRlbXBsYXRlKSA9PiB1bmtub3duIiwibGFuZ3VhZ2VDb2RlOiBMYW5ndWFnZUNvZGUiLCJ2bm9kZTogVm5vZGU8V2hpdGVsYWJlbEdlcm1hbkxhbmd1YWdlRmlsZVNldHRpbmdzQXR0cnM+IiwiY3VzdG9tR2VybWFuTGFuZ3VhZ2VGaWxlOiBHZXJtYW5MYW5ndWFnZUNvZGUgfCBudWxsIiwib25HZXJtYW5MYW5ndWFnZUZpbGVDaGFuZ2VkOiAoYXJnMDogR2VybWFuTGFuZ3VhZ2VDb2RlKSA9PiB1bmtub3duIiwiaXRlbXM6IFNlbGVjdG9ySXRlbUxpc3Q8R2VybWFuTGFuZ3VhZ2VDb2RlPiIsInNlbGVjdGVkVmFsdWU6IEdlcm1hbkxhbmd1YWdlQ29kZSIsImRlZmF1bHRHZXJtYW5MYW5ndWFnZUZpbGVEcm9wRG93bkF0dHJzOiBEcm9wRG93blNlbGVjdG9yQXR0cnM8R2VybWFuTGFuZ3VhZ2VDb2RlPiIsImVudGl0eUNsaWVudDogRW50aXR5Q2xpZW50IiwibG9naW5zOiBMb2dpbkNvbnRyb2xsZXIiLCJvblByaXZhY3lTdGF0ZW1lbnRVcmxDaGFuZ2VkOiAoKF86IHN0cmluZykgPT4gdm9pZCkgfCBudWxsIiwicHJpdmFjeVN0YXRlbWVudFVybCIsIm9uSW1wcmludFVybENoYW5nZWQ6ICgoXzogc3RyaW5nKSA9PiB2b2lkKSB8IG51bGwiLCJpbXByaW50VXJsIiwicG9zc2libGVSZWdpc3RyYXRpb25Eb21haW5zOiBTZWxlY3Rvckl0ZW1MaXN0PHN0cmluZyB8IG51bGw+Iiwib25SZWdpc3RyYXRpb25Eb21haW5TZWxlY3RlZDogV2hpdGVsYWJlbFJlZ2lzdHJhdGlvblNldHRpbmdzQXR0cnNbXCJvblJlZ2lzdHJhdGlvbkRvbWFpblNlbGVjdGVkXCJdIiwiY3VycmVudFJlZ2lzdHJhdGlvbkRvbWFpbjogc3RyaW5nIHwgbnVsbCIsIm9uV2hpdGVsYWJlbENvZGVDaGFuZ2VkOiAoXzogc3RyaW5nKSA9PiB2b2lkIiwiY3VzdG9tR2VybWFuTGFuZ3VhZ2VGaWxlOiBHZXJtYW5MYW5ndWFnZUNvZGUgfCBudWxsIiwibGFuZ3VhZ2VGaWxlOiBHZXJtYW5MYW5ndWFnZUNvZGUiLCJvbk1ldGFUYWdzQ2hhbmdlZDogV2hpdGVsYWJlbEN1c3RvbU1ldGFUYWdzU2V0dGluZ3NBdHRyc1tcIm9uTWV0YVRhZ3NDaGFuZ2VkXCJdIHwgbnVsbCIsIm1ldGFUYWdzIiwiZG9tYWluSW5mbzogRG9tYWluSW5mbyB8IG51bGwiLCJtIiwidGVtcGxhdGU6IE5vdGlmaWNhdGlvbk1haWxUZW1wbGF0ZSIsInVwZGF0ZXM6IFJlYWRvbmx5QXJyYXk8RW50aXR5VXBkYXRlRGF0YT4iLCJhY3R1YWxMYW5ndWFnZUl0ZW1zOiBTZWxlY3Rvckl0ZW1MaXN0PExhbmd1YWdlQ29kZSB8IG51bGw+IiwibGFuZ3VhZ2VJdGVtczogU2VsZWN0b3JJdGVtTGlzdDxMYW5ndWFnZUNvZGUgfCBudWxsPiIsImxhbmd1YWdlRHJvcERvd25BdHRyczogRHJvcERvd25TZWxlY3RvckF0dHJzPExhbmd1YWdlQ29kZSB8IG51bGw+IiwiaG91ckZvcm1hdERyb3BEb3duQXR0cnM6IERyb3BEb3duU2VsZWN0b3JBdHRyczxUaW1lRm9ybWF0PiIsIndlZWtTdGFydERyb3BEb3duQXR0cnM6IERyb3BEb3duU2VsZWN0b3JBdHRyczxXZWVrU3RhcnQ+IiwidGhlbWVEcm9wRG93bkF0dHJzOiBEcm9wRG93blNlbGVjdG9yQXR0cnM8VGhlbWVQcmVmZXJlbmNlPiIsInVwZGF0ZXM6IFJlYWRvbmx5QXJyYXk8RW50aXR5VXBkYXRlRGF0YT4iLCJlbnRpdHlDbGllbnQ6IEVudGl0eUNsaWVudCIsImxvZ2luczogTG9naW5Db250cm9sbGVyIiwidGVtcGxhdGVHcm91cFJvb3Q6IFRlbXBsYXRlR3JvdXBSb290IiwidGVtcGxhdGVHcm91cDogR3JvdXAiLCJ1cGRhdGVEZXRhaWxzVmlld2VyOiAodmlld2VyOiBLbm93bGVkZ2VCYXNlU2V0dGluZ3NEZXRhaWxzVmlld2VyIHwgbnVsbCkgPT4gdW5rbm93biIsImZvY3VzRGV0YWlsc1ZpZXdlcjogKCkgPT4gdW5rbm93biIsImE6IEtub3dsZWRnZUJhc2VFbnRyeSIsImI6IEtub3dsZWRnZUJhc2VFbnRyeSIsIl9saXN0SWQ6IElkIiwiZWxlbWVudElkOiBJZCIsIml0ZW06IEtub3dsZWRnZUJhc2VFbnRyeSIsInVwZGF0ZXM6IFJlYWRvbmx5QXJyYXk8RW50aXR5VXBkYXRlRGF0YT4iLCJpdGVtOiBLbm93bGVkZ2VCYXNlRW50cnkgfCBudWxsIiwicXVlcnk6IHN0cmluZyIsImVudHJ5OiBLbm93bGVkZ2VCYXNlRW50cnkiLCJzZWxlY3RlZDogYm9vbGVhbiIsInJlYWRvbmx5OiBib29sZWFuIiwidm5vZGU6IFZub2RlPER1bW15VGVtcGxhdGVMaXN0Vmlld0F0dHJzPiIsInZub2RlOiBWbm9kZTxTZXR0aW5nc0ZvbGRlclJvd0F0dHJzPiIsImVudGl0eUNsaWVudDogRW50aXR5Q2xpZW50IiwibG9naW5zOiBMb2dpbkNvbnRyb2xsZXIiLCJmaWxlQ29udHJvbGxlcjogRmlsZUNvbnRyb2xsZXIiLCJjb3VudGVyRmFjYWRlOiBDb3VudGVyRmFjYWRlIiwiZm9ybWF0RGF0ZSIsImRhdGU6IERhdGUiLCJ1cGRhdGVzOiBSZWFkb25seUFycmF5PEVudGl0eVVwZGF0ZURhdGE+Iiwidm5vZGU6IFZub2RlPEFib3V0RGlhbG9nQXR0cnM+IiwiY2xpZW50Iiwidm5vZGU6IFZub2RlPEFjdGlvbkJhckF0dHJzPiIsInRlbXBsYXRlOiBFbWFpbFRlbXBsYXRlIiwiZW50aXR5Q2xpZW50OiBFbnRpdHlDbGllbnQiLCJpc1JlYWRPbmx5OiBsYXp5PGJvb2xlYW4+IiwidXBkYXRlczogUmVhZG9ubHlBcnJheTxFbnRpdHlVcGRhdGVEYXRhPiIsImdyb3VwSW5zdGFuY2U6IFRlbXBsYXRlR3JvdXBJbnN0YW5jZSIsImVudGl0eUNsaWVudDogRW50aXR5Q2xpZW50IiwibG9naW5zOiBMb2dpbkNvbnRyb2xsZXIiLCJ1cGRhdGVEZXRhaWxzVmlld2VyOiAodmlld2VyOiBUZW1wbGF0ZURldGFpbHNWaWV3ZXIgfCBudWxsKSA9PiB1bmtub3duIiwiZm9jdXNEZXRhaWxzVmlld2VyOiAoKSA9PiB1bmtub3duIiwiYTogRW1haWxUZW1wbGF0ZSIsImI6IEVtYWlsVGVtcGxhdGUiLCJfbGlzdElkOiBJZCIsImVsZW1lbnRJZDogSWQiLCJpdGVtOiBFbWFpbFRlbXBsYXRlIiwidXBkYXRlczogUmVhZG9ubHlBcnJheTxFbnRpdHlVcGRhdGVEYXRhPiIsIml0ZW06IEVtYWlsVGVtcGxhdGUgfCBudWxsIiwicXVlcnk6IHN0cmluZyIsInRlbXBsYXRlOiBFbWFpbFRlbXBsYXRlIiwic2VsZWN0ZWQ6IGJvb2xlYW4iLCJjb250YWN0U3luY0VuYWJsZWQ6IGJvb2xlYW4iLCJwcm9wczogVHV0YW5vdGFQcm9wZXJ0aWVzIiwidXBkYXRlczogUmVhZG9ubHlBcnJheTxFbnRpdHlVcGRhdGVEYXRhPiIsInZub2RlOiBWbm9kZTxOb3RpZmljYXRpb25UYXJnZXRzTGlzdEF0dHJzPiIsInZub2RlOiBWbm9kZTxJZGVudGlmaWVyUm93QXR0cnM+IiwicHJvbWlzZXM6IFByb21pc2U8YW55PltdIiwiaWRlbnRpZmllcjogUHVzaElkZW50aWZpZXIiLCJtIiwidmFsdWU6IEV4dGVuZGVkTm90aWZpY2F0aW9uTW9kZSIsImN1cnJlbnQ6IGJvb2xlYW4iLCJ0eXBlOiBOdW1iZXJTdHJpbmciLCJkaXNwbGF5TmFtZTogc3RyaW5nIiwidXBkYXRlczogcmVhZG9ubHkgRW50aXR5VXBkYXRlRGF0YVtdIiwiZ2V0SXNTaG93aW5nS3BpczogKCkgPT4gYm9vbGVhbiIsInRvZ2dsZUtwaUNvbHVtbjogKCkgPT4gdW5rbm93biIsIm0iLCJzaGFyZVVybDogc3RyaW5nIiwidXBkYXRlczogUmVhZG9ubHlBcnJheTxFbnRpdHlVcGRhdGVEYXRhPiIsInVwZGF0ZXM6IHJlYWRvbmx5IEVudGl0eVVwZGF0ZURhdGFbXSIsIm1haWxJbXBvcnRlcjogbGF6eTxNYWlsSW1wb3J0ZXI+IiwiZG9tOiBIVE1MRWxlbWVudCIsInRhcmdldEZvbGRlcnM6IFNlbGVjdG9ySXRlbUxpc3Q8TWFpbEZvbGRlciB8IG51bGw+IiwiZm9sZGVySW5mbzogSW5kZW50ZWRGb2xkZXIiLCJuZXdGb2xkZXI6IE1haWxGb2xkZXIgfCBudWxsIiwicmVzdW1lTWFpbEltcG9ydEljb25CdXR0b25BdHRyczogSWNvbkJ1dHRvbkF0dHJzIiwicGF1c2VNYWlsSW1wb3J0SWNvbkJ1dHRvbkF0dHJzOiBJY29uQnV0dG9uQXR0cnMiLCJjYW5jZWxNYWlsSW1wb3J0SWNvbkJ1dHRvbkF0dHJzOiBJY29uQnV0dG9uQXR0cnMiLCJ1cGRhdGVzOiBSZWFkb25seUFycmF5PEVudGl0eVVwZGF0ZURhdGE+IiwidWlTdGF0dXM6IFVpSW1wb3J0U3RhdHVzIiwiaW1wb3J0U3RhdHVzOiBJbXBvcnRTdGF0dXMiLCJ1cGRhdGVzOiBSZWFkb25seUFycmF5PEVudGl0eVVwZGF0ZURhdGE+Iiwidm5vZGU6IFZub2RlPE1haWxFeHBvcnRTZXR0aW5nc0F0dHJzPiIsIm0iLCJjb250cm9sbGVyOiBNYWlsRXhwb3J0Q29udHJvbGxlciIsInZub2RlOiBWbm9kZTxTZXR0aW5nc1ZpZXdBdHRycz4iLCJ2aWV3ZXI6IFVwZGF0YWJsZVNldHRpbmdzRGV0YWlsc1ZpZXdlciB8IG51bGwiLCJ2bm9kZTogVm5vZGVET008U2V0dGluZ3NWaWV3QXR0cnM+IiwidXBkYXRlczogRW50aXR5VXBkYXRlRGF0YVtdIiwiZXZlbnRPd25lckdyb3VwSWQ6IElkIiwiZm9sZGVyOiBTZXR0aW5nc0ZvbGRlcjx1bmtub3duPiIsImZvbGRlcjogU2V0dGluZ3NGb2xkZXI8VGVtcGxhdGVHcm91cEluc3RhbmNlPiIsInRlbXBsYXRlSW5mbzogVGVtcGxhdGVHcm91cEluc3RhbmNlIiwiaW52aXRhdGlvbjogUmVjZWl2ZWRHcm91cEludml0YXRpb24iLCJmb2xkZXJzOiBTZXR0aW5nc0ZvbGRlcjx1bmtub3duPltdIiwiYXJnczogUmVjb3JkPHN0cmluZywgYW55PiIsInJlcXVlc3RlZFBhdGg6IHN0cmluZyIsImZvbGRlciIsInVybDogc3RyaW5nIiwidXNlcjogVXNlciIsInVwZGF0ZXM6IFJlYWRvbmx5QXJyYXk8RW50aXR5VXBkYXRlRGF0YT4iLCJkaWFsb2c6IERpYWxvZyIsImluc3RhbmNlOiBUZW1wbGF0ZUdyb3VwSW5zdGFuY2UiXSwic291cmNlcyI6WyIuLi9zcmMvY29tbW9uL3NldHRpbmdzL1NldHRpbmdzRm9sZGVyLnRzIiwiLi4vc3JjL2NvbW1vbi9zZXR0aW5ncy9sb2dpbi9zZWNvbmRmYWN0b3IvU2Vjb25kRmFjdG9yRWRpdE1vZGVsLnRzIiwiLi4vc3JjL2NvbW1vbi9zZXR0aW5ncy9sb2dpbi9zZWNvbmRmYWN0b3IvU2Vjb25kRmFjdG9yRWRpdERpYWxvZy50cyIsIi4uL3NyYy9jb21tb24vc2V0dGluZ3MvbG9naW4vc2Vjb25kZmFjdG9yL1NlY29uZEZhY3RvcnNFZGl0Rm9ybS50cyIsIi4uL3NyYy9jb21tb24vc2V0dGluZ3MvbG9naW4vTG9naW5TZXR0aW5nc1ZpZXdlci50cyIsIi4uL3NyYy9tYWlsLWFwcC9zZXR0aW5ncy9Mb2FkaW5nVXRpbHMudHMiLCIuLi9zcmMvbWFpbC1hcHAvc2V0dGluZ3MvRG9tYWluRG5zU3RhdHVzLnRzIiwiLi4vc3JjL21haWwtYXBwL3NldHRpbmdzL2VtYWlsZG9tYWluL0Ruc1JlY29yZFRhYmxlLnRzIiwiLi4vc3JjL21haWwtYXBwL3NldHRpbmdzL2VtYWlsZG9tYWluL1ZlcmlmeURuc1JlY29yZHNQYWdlLnRzIiwiLi4vc3JjL21haWwtYXBwL3NldHRpbmdzL0NoZWNrRG9tYWluRG5zU3RhdHVzRGlhbG9nLnRzIiwiLi4vc3JjL21haWwtYXBwL3NldHRpbmdzL1JlamVjdGVkU2VuZGVyc0luZm9EaWFsb2cudHMiLCIuLi9zcmMvY29tbW9uL3NldHRpbmdzL21haWxhZGRyZXNzL0FkZEFsaWFzRGlhbG9nLnRzIiwiLi4vc3JjL2NvbW1vbi9zZXR0aW5ncy9tYWlsYWRkcmVzcy9NYWlsQWRkcmVzc1RhYmxlLnRzIiwiLi4vc3JjL21haWwtYXBwL3NldHRpbmdzL2VtYWlsZG9tYWluL0FkZEVtYWlsQWRkcmVzc2VzUGFnZS50cyIsIi4uL3NyYy9tYWlsLWFwcC9zZXR0aW5ncy9lbWFpbGRvbWFpbi9WZXJpZnlPd25lcnNoaXBQYWdlLnRzIiwiLi4vc3JjL21haWwtYXBwL3NldHRpbmdzL2VtYWlsZG9tYWluL0VudGVyRG9tYWluUGFnZS50cyIsIi4uL3NyYy9tYWlsLWFwcC9zZXR0aW5ncy9lbWFpbGRvbWFpbi9BZGREb21haW5XaXphcmQudHMiLCIuLi9zcmMvY29tbW9uL3NldHRpbmdzL0V4cGFuZGFibGVUYWJsZS50cyIsIi4uL3NyYy9jb21tb24vc3Vic2NyaXB0aW9uL0RlbGV0ZUFjY291bnREaWFsb2cudHMiLCIuLi9zcmMvY29tbW9uL3NldHRpbmdzL0FjY291bnRNYWludGVuYW5jZVNldHRpbmdzLnRzIiwiLi4vc3JjL21haWwtYXBwL3NldHRpbmdzL0dsb2JhbFNldHRpbmdzVmlld2VyLnRzIiwiLi4vc3JjL21haWwtYXBwL3NldHRpbmdzL0Rlc2t0b3BVcGRhdGVIZWxwTGFiZWwudHMiLCIuLi9zcmMvbWFpbC1hcHAvc2V0dGluZ3MvRGVza3RvcFNldHRpbmdzVmlld2VyLnRzIiwiLi4vc3JjL21haWwtYXBwL3NldHRpbmdzL0VkaXRPdXRPZk9mZmljZU5vdGlmaWNhdGlvbkRpYWxvZ01vZGVsLnRzIiwiLi4vc3JjL21haWwtYXBwL3NldHRpbmdzL0VkaXRPdXRPZk9mZmljZU5vdGlmaWNhdGlvbkRpYWxvZy50cyIsIi4uL3NyYy9tYWlsLWFwcC9zZXR0aW5ncy9FZGl0U2lnbmF0dXJlRGlhbG9nLnRzIiwiLi4vc3JjL21haWwtYXBwL3NldHRpbmdzL09mZmxpbmVTdG9yYWdlU2V0dGluZ3MudHMiLCIuLi9zcmMvbWFpbC1hcHAvc2V0dGluZ3MvTWFpbFNldHRpbmdzVmlld2VyLnRzIiwiLi4vc3JjL2NvbW1vbi9zdWJzY3JpcHRpb24vQnV5RGlhbG9nLnRzIiwiLi4vc3JjL2NvbW1vbi9zZXR0aW5ncy9ncm91cHMvR3JvdXBEZXRhaWxzVmlldy50cyIsIi4uL3NyYy9jb21tb24vc2V0dGluZ3MvSW1wb3J0VXNlcnNWaWV3ZXIudHMiLCIuLi9zcmMvY29tbW9uL3NldHRpbmdzL1VzZXJWaWV3ZXIudHMiLCIuLi9zcmMvY29tbW9uL3NldHRpbmdzL0FkZFVzZXJEaWFsb2cudHMiLCIuLi9zcmMvY29tbW9uL3NldHRpbmdzL1VzZXJMaXN0Vmlldy50cyIsIi4uL3NyYy9tYWlsLWFwcC9zZXR0aW5ncy9ncm91cHMvQWRkR3JvdXBEaWFsb2cudHMiLCIuLi9zcmMvbWFpbC1hcHAvc2V0dGluZ3MvZ3JvdXBzL0dyb3VwRGV0YWlsc01vZGVsLnRzIiwiLi4vc3JjL21haWwtYXBwL3NldHRpbmdzL2dyb3Vwcy9Hcm91cExpc3RWaWV3LnRzIiwiLi4vc3JjL2NvbW1vbi9zZXR0aW5ncy9TZXREb21haW5DZXJ0aWZpY2F0ZURpYWxvZy50cyIsIi4uL3NyYy9jb21tb24vc2V0dGluZ3Mvd2hpdGVsYWJlbC9XaGl0ZWxhYmVsQnJhbmRpbmdEb21haW5TZXR0aW5ncy50cyIsIi4uL3NyYy9jb21tb24vc2V0dGluZ3Mvd2hpdGVsYWJlbC9DdXN0b21Db2xvckVkaXRvclByZXZpZXcudHMiLCIuLi9zcmMvY29tbW9uL3NldHRpbmdzL3doaXRlbGFiZWwvQ3VzdG9tQ29sb3JFZGl0b3IudHMiLCIuLi9zcmMvY29tbW9uL3NldHRpbmdzL3doaXRlbGFiZWwvRWRpdEN1c3RvbUNvbG9yc0RpYWxvZy50cyIsIi4uL3NyYy9jb21tb24vc2V0dGluZ3Mvd2hpdGVsYWJlbC9DdXN0b21Db2xvcnNFZGl0b3JWaWV3TW9kZWwudHMiLCIuLi9zcmMvY29tbW9uL3NldHRpbmdzL3doaXRlbGFiZWwvV2hpdGVsYWJlbFRoZW1lU2V0dGluZ3MudHMiLCIuLi9zcmMvY29tbW9uL3NldHRpbmdzL3doaXRlbGFiZWwvV2hpdGVsYWJlbEltcHJpbnRBbmRQcml2YWN5U2V0dGluZ3MudHMiLCIuLi9zcmMvY29tbW9uL3NldHRpbmdzL3doaXRlbGFiZWwvV2hpdGVsYWJlbFJlZ2lzdHJhdGlvblNldHRpbmdzLnRzIiwiLi4vc3JjL2NvbW1vbi9zZXR0aW5ncy93aGl0ZWxhYmVsL1doaXRlbGFiZWxDdXN0b21NZXRhVGFnc1NldHRpbmdzLnRzIiwiLi4vc3JjL2NvbW1vbi9zZXR0aW5ncy93aGl0ZWxhYmVsL1doaXRlbGFiZWxTdGF0dXNTZXR0aW5ncy50cyIsIi4uL3NyYy9jb21tb24vc2V0dGluZ3Mvd2hpdGVsYWJlbC9XaGl0ZWxhYmVsTm90aWZpY2F0aW9uRW1haWxTZXR0aW5ncy50cyIsIi4uL3NyYy9jb21tb24vc2V0dGluZ3Mvd2hpdGVsYWJlbC9XaGl0ZWxhYmVsR2VybWFuTGFuZ3VhZ2VGaWxlU2V0dGluZ3MudHMiLCIuLi9zcmMvY29tbW9uL3NldHRpbmdzL3doaXRlbGFiZWwvV2hpdGVsYWJlbFNldHRpbmdzVmlld2VyLnRzIiwiLi4vc3JjL2NvbW1vbi9zZXR0aW5ncy9BcHBlYXJhbmNlU2V0dGluZ3NWaWV3ZXIudHMiLCIuLi9zcmMvbWFpbC1hcHAvc2V0dGluZ3MvS25vd2xlZGdlQmFzZUxpc3RWaWV3LnRzIiwiLi4vc3JjL21haWwtYXBwL3NldHRpbmdzL0R1bW15VGVtcGxhdGVMaXN0Vmlldy50cyIsIi4uL3NyYy9jb21tb24vc2V0dGluZ3MvU2V0dGluZ3NGb2xkZXJSb3cudHMiLCIuLi9zcmMvY29tbW9uL3NldHRpbmdzL1VzZXJEYXRhRXhwb3J0ZXIudHMiLCIuLi9zcmMvY29tbW9uL3NldHRpbmdzL1JlZmVycmFsU2V0dGluZ3NWaWV3ZXIudHMiLCIuLi9zcmMvY29tbW9uL3NldHRpbmdzL0Fib3V0RGlhbG9nLnRzIiwiLi4vc3JjL2NvbW1vbi9ndWkvYmFzZS9BY3Rpb25CYXIudHMiLCIuLi9zcmMvbWFpbC1hcHAvc2V0dGluZ3MvVGVtcGxhdGVEZXRhaWxzVmlld2VyLnRzIiwiLi4vc3JjL21haWwtYXBwL3NldHRpbmdzL1RlbXBsYXRlTGlzdFZpZXcudHMiLCIuLi9zcmMvbWFpbC1hcHAvc2V0dGluZ3MvQ29udGFjdHNTZXR0aW5nc1ZpZXdlci50cyIsIi4uL3NyYy9jb21tb24vc2V0dGluZ3MvTm90aWZpY2F0aW9uVGFyZ2V0c0xpc3QudHMiLCIuLi9zcmMvY29tbW9uL3NldHRpbmdzL0lkZW50aWZpZXJSb3cudHMiLCIuLi9zcmMvbWFpbC1hcHAvc2V0dGluZ3MvTm90aWZpY2F0aW9uU2V0dGluZ3NWaWV3ZXIudHMiLCIuLi9zcmMvY29tbW9uL3NldHRpbmdzL0FmZmlsaWF0ZVNldHRpbmdzVmlld2VyLnRzIiwiLi4vc3JjL2NvbW1vbi9zZXR0aW5ncy9BZmZpbGlhdGVLcGlzVmlld2VyLnRzIiwiLi4vc3JjL21haWwtYXBwL3NldHRpbmdzL0Rlc2t0b3BNYWlsSW1wb3J0U2V0dGluZ3NWaWV3ZXIudHMiLCIuLi9zcmMvbWFpbC1hcHAvc2V0dGluZ3MvV2ViTWFpbEltcG9ydFNldHRpbmdzVmlld2VyLnRzIiwiLi4vc3JjL21haWwtYXBwL3NldHRpbmdzL01haWxFeHBvcnRTZXR0aW5ncy50cyIsIi4uL3NyYy9tYWlsLWFwcC9zZXR0aW5ncy9NYWlsRXhwb3J0Vmlld2VyLnRzIiwiLi4vc3JjL21haWwtYXBwL3NldHRpbmdzL1NldHRpbmdzVmlldy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IGxhenlJY29uIH0gZnJvbSBcIi4uL2d1aS9iYXNlL0ljb24uanNcIlxuaW1wb3J0IHR5cGUgeyBUcmFuc2xhdGlvbktleSwgTWF5YmVUcmFuc2xhdGlvbiB9IGZyb20gXCIuLi9taXNjL0xhbmd1YWdlVmlld01vZGVsLmpzXCJcbmltcG9ydCB7IGlzU2VsZWN0ZWRQcmVmaXggfSBmcm9tIFwiLi4vZ3VpL2Jhc2UvTmF2QnV0dG9uLmpzXCJcbmltcG9ydCB0eXBlIHsgbGF6eSB9IGZyb20gXCJAdHV0YW8vdHV0YW5vdGEtdXRpbHNcIlxuaW1wb3J0IHsgYXNzZXJ0TWFpbk9yTm9kZSB9IGZyb20gXCIuLi9hcGkvY29tbW9uL0Vudi5qc1wiXG5pbXBvcnQgeyBVcGRhdGFibGVTZXR0aW5nc1ZpZXdlciB9IGZyb20gXCIuL0ludGVyZmFjZXMuanNcIlxuXG5hc3NlcnRNYWluT3JOb2RlKClcblxudHlwZSBTZXR0aW5nc0ZvbGRlclBhdGggPSBzdHJpbmcgfCB7IGZvbGRlcjogc3RyaW5nOyBpZDogc3RyaW5nIH1cblxuZXhwb3J0IGNsYXNzIFNldHRpbmdzRm9sZGVyPFQ+IHtcblx0cmVhZG9ubHkgdXJsOiBzdHJpbmdcblxuXHRwcml2YXRlIF9pc1Zpc2libGVIYW5kbGVyOiBsYXp5PGJvb2xlYW4+XG5cblx0Y29uc3RydWN0b3IoXG5cdFx0cmVhZG9ubHkgbmFtZTogKCkgPT4gTWF5YmVUcmFuc2xhdGlvbixcblx0XHRyZWFkb25seSBpY29uOiBsYXp5SWNvbixcblx0XHRyZWFkb25seSBwYXRoOiBTZXR0aW5nc0ZvbGRlclBhdGgsXG5cdFx0cmVhZG9ubHkgdmlld2VyQ3JlYXRvcjogbGF6eTxVcGRhdGFibGVTZXR0aW5nc1ZpZXdlcj4sXG5cdFx0cmVhZG9ubHkgZGF0YTogVCxcblx0KSB7XG5cdFx0dGhpcy51cmwgPVxuXHRcdFx0dHlwZW9mIHBhdGggPT09IFwic3RyaW5nXCIgPyBgL3NldHRpbmdzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KHBhdGgpfWAgOiBgL3NldHRpbmdzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KHBhdGguZm9sZGVyKX0vJHtlbmNvZGVVUklDb21wb25lbnQocGF0aC5pZCl9YFxuXG5cdFx0dGhpcy5faXNWaXNpYmxlSGFuZGxlciA9ICgpID0+IHRydWVcblx0fVxuXG5cdGlzQWN0aXZlKCk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiBpc1NlbGVjdGVkUHJlZml4KHRoaXMudXJsKVxuXHR9XG5cblx0aXNWaXNpYmxlKCk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiB0aGlzLl9pc1Zpc2libGVIYW5kbGVyKClcblx0fVxuXG5cdHNldElzVmlzaWJsZUhhbmRsZXIoaXNWaXNpYmxlSGFuZGxlcjogbGF6eTxib29sZWFuPik6IHRoaXMge1xuXHRcdHRoaXMuX2lzVmlzaWJsZUhhbmRsZXIgPSBpc1Zpc2libGVIYW5kbGVyXG5cdFx0cmV0dXJuIHRoaXNcblx0fVxuXG5cdGdldCBmb2xkZXIoKTogc3RyaW5nIHwgbnVsbCB7XG5cdFx0cmV0dXJuIHR5cGVvZiB0aGlzLnBhdGggPT09IFwic3RyaW5nXCIgPyBudWxsIDogdGhpcy5wYXRoLmZvbGRlclxuXHR9XG5cblx0Z2V0IGlkKCk6IHN0cmluZyB8IG51bGwge1xuXHRcdHJldHVybiB0eXBlb2YgdGhpcy5wYXRoID09PSBcInN0cmluZ1wiID8gbnVsbCA6IHRoaXMucGF0aC5pZFxuXHR9XG59XG4iLCJpbXBvcnQgeyBFbnRpdHlDbGllbnQgfSBmcm9tIFwiLi4vLi4vLi4vYXBpL2NvbW1vbi9FbnRpdHlDbGllbnQuanNcIlxuaW1wb3J0IHsgY3JlYXRlU2Vjb25kRmFjdG9yLCBHcm91cEluZm9UeXBlUmVmLCBVMmZSZWdpc3RlcmVkRGV2aWNlLCBVc2VyIH0gZnJvbSBcIi4uLy4uLy4uL2FwaS9lbnRpdGllcy9zeXMvVHlwZVJlZnMuanNcIlxuaW1wb3J0IHsgdmFsaWRhdGVXZWJhdXRobkRpc3BsYXlOYW1lLCBXZWJhdXRobkNsaWVudCB9IGZyb20gXCIuLi8uLi8uLi9taXNjLzJmYS93ZWJhdXRobi9XZWJhdXRobkNsaWVudC5qc1wiXG5pbXBvcnQgeyBUb3RwU2VjcmV0IH0gZnJvbSBcIkB0dXRhby90dXRhbm90YS1jcnlwdG9cIlxuaW1wb3J0IHsgYXNzZXJ0Tm90TnVsbCwgTGF6eUxvYWRlZCwgbmV2ZXJOdWxsIH0gZnJvbSBcIkB0dXRhby90dXRhbm90YS11dGlsc1wiXG5pbXBvcnQgeyBpc0FwcCB9IGZyb20gXCIuLi8uLi8uLi9hcGkvY29tbW9uL0Vudi5qc1wiXG5pbXBvcnQgeyBMYW5ndWFnZVZpZXdNb2RlbCwgVHJhbnNsYXRpb25LZXkgfSBmcm9tIFwiLi4vLi4vLi4vbWlzYy9MYW5ndWFnZVZpZXdNb2RlbC5qc1wiXG5pbXBvcnQgeyBTZWNvbmRGYWN0b3JUeXBlIH0gZnJvbSBcIi4uLy4uLy4uL2FwaS9jb21tb24vVHV0YW5vdGFDb25zdGFudHMuanNcIlxuaW1wb3J0IHsgUHJvZ3JhbW1pbmdFcnJvciB9IGZyb20gXCIuLi8uLi8uLi9hcGkvY29tbW9uL2Vycm9yL1Byb2dyYW1taW5nRXJyb3IuanNcIlxuaW1wb3J0IHsgTG9naW5GYWNhZGUgfSBmcm9tIFwiLi4vLi4vLi4vYXBpL3dvcmtlci9mYWNhZGVzL0xvZ2luRmFjYWRlLmpzXCJcbmltcG9ydCB7IFVzZXJFcnJvciB9IGZyb20gXCIuLi8uLi8uLi9hcGkvbWFpbi9Vc2VyRXJyb3IuanNcIlxuaW1wb3J0IHsgaHRtbFNhbml0aXplciB9IGZyb20gXCIuLi8uLi8uLi9taXNjL0h0bWxTYW5pdGl6ZXIuanNcIlxuaW1wb3J0IFFSQ29kZSBmcm9tIFwicXJjb2RlLXN2Z1wiXG5cbmV4cG9ydCBjb25zdCBlbnVtIFZlcmlmaWNhdGlvblN0YXR1cyB7XG5cdEluaXRpYWwgPSBcIkluaXRpYWxcIixcblx0UHJvZ3Jlc3MgPSBcIlByb2dyZXNzXCIsXG5cdEZhaWxlZCA9IFwiRmFpbGVkXCIsXG5cdFN1Y2Nlc3MgPSBcIlN1Y2Nlc3NcIixcbn1cblxuZXhwb3J0IGNvbnN0IERFRkFVTFRfVTJGX05BTUUgPSBcIlUyRlwiXG5leHBvcnQgY29uc3QgREVGQVVMVF9UT1RQX05BTUUgPSBcIlRPVFBcIlxuXG5leHBvcnQgZW51bSBOYW1lVmFsaWRhdGlvblN0YXR1cyB7XG5cdFZhbGlkLFxuXHRJbnZhbGlkLFxufVxuXG5leHBvcnQgY29uc3QgU2Vjb25kRmFjdG9yVHlwZVRvTmFtZVRleHRJZDogUmVjb3JkPFNlY29uZEZhY3RvclR5cGUsIFRyYW5zbGF0aW9uS2V5PiA9IE9iamVjdC5mcmVlemUoe1xuXHRbU2Vjb25kRmFjdG9yVHlwZS50b3RwXTogXCJ0b3RwQXV0aGVudGljYXRvcl9sYWJlbFwiLFxuXHRbU2Vjb25kRmFjdG9yVHlwZS51MmZdOiBcInUyZlNlY3VyaXR5S2V5X2xhYmVsXCIsXG5cdFtTZWNvbmRGYWN0b3JUeXBlLndlYmF1dGhuXTogXCJ1MmZTZWN1cml0eUtleV9sYWJlbFwiLFxufSlcblxuZXhwb3J0IGNsYXNzIFNlY29uZEZhY3RvckVkaXRNb2RlbCB7XG5cdHRvdHBDb2RlOiBzdHJpbmcgPSBcIlwiXG5cdHNlbGVjdGVkVHlwZTogU2Vjb25kRmFjdG9yVHlwZVxuXHRuYW1lOiBzdHJpbmcgPSBcIlwiXG5cdG5hbWVWYWxpZGF0aW9uU3RhdHVzOiBOYW1lVmFsaWRhdGlvblN0YXR1cyA9IE5hbWVWYWxpZGF0aW9uU3RhdHVzLlZhbGlkXG5cdHZlcmlmaWNhdGlvblN0YXR1czogVmVyaWZpY2F0aW9uU3RhdHVzID0gVmVyaWZpY2F0aW9uU3RhdHVzLkluaXRpYWxcblx0cmVhZG9ubHkgb3RwSW5mbzogTGF6eUxvYWRlZDx7XG5cdFx0cXJDb2RlU3ZnOiBzdHJpbmcgfCBudWxsXG5cdFx0dXJsOiBzdHJpbmdcblx0fT5cblx0cHJpdmF0ZSB1MmZSZWdpc3RyYXRpb25EYXRhOiBVMmZSZWdpc3RlcmVkRGV2aWNlIHwgbnVsbCA9IG51bGxcblxuXHRjb25zdHJ1Y3Rvcihcblx0XHRwcml2YXRlIHJlYWRvbmx5IGVudGl0eUNsaWVudDogRW50aXR5Q2xpZW50LFxuXHRcdHByaXZhdGUgcmVhZG9ubHkgdXNlcjogVXNlcixcblx0XHRwcml2YXRlIHJlYWRvbmx5IHdlYmF1dGhuQ2xpZW50OiBXZWJhdXRobkNsaWVudCxcblx0XHRyZWFkb25seSB0b3RwS2V5czogVG90cFNlY3JldCxcblx0XHRwcml2YXRlIHJlYWRvbmx5IHdlYmF1dGhuU3VwcG9ydGVkOiBib29sZWFuLFxuXHRcdHByaXZhdGUgcmVhZG9ubHkgbG9naW5GYWNhZGU6IExvZ2luRmFjYWRlLFxuXHRcdHByaXZhdGUgcmVhZG9ubHkgaG9zdG5hbWU6IHN0cmluZyxcblx0XHRwcml2YXRlIHJlYWRvbmx5IGRvbWFpbkNvbmZpZzogRG9tYWluQ29uZmlnLFxuXHRcdHByaXZhdGUgcmVhZG9ubHkgdXBkYXRlVmlld0NhbGxiYWNrOiAoKSA9PiB2b2lkLFxuXHRcdHByaXZhdGUgcmVhZG9ubHkgdG9rZW4/OiBzdHJpbmcsXG5cdCkge1xuXHRcdHRoaXMuc2VsZWN0ZWRUeXBlID0gd2ViYXV0aG5TdXBwb3J0ZWQgPyBTZWNvbmRGYWN0b3JUeXBlLndlYmF1dGhuIDogU2Vjb25kRmFjdG9yVHlwZS50b3RwXG5cdFx0dGhpcy5zZXREZWZhdWx0TmFtZUlmTmVlZGVkKClcblx0XHR0aGlzLm90cEluZm8gPSBuZXcgTGF6eUxvYWRlZChhc3luYyAoKSA9PiB7XG5cdFx0XHRjb25zdCB1cmwgPSBhd2FpdCB0aGlzLmdldE90cEF1dGhVcmwodGhpcy50b3RwS2V5cy5yZWFkYWJsZUtleSlcblxuXHRcdFx0Y29uc3QgdG90cFFSQ29kZVN2ZyA9IGlzQXBwKClcblx0XHRcdFx0PyBudWxsXG5cdFx0XHRcdDogaHRtbFNhbml0aXplci5zYW5pdGl6ZVNWRyhcblx0XHRcdFx0XHRcdG5ldyBRUkNvZGUoe1xuXHRcdFx0XHRcdFx0XHRoZWlnaHQ6IDE1MCxcblx0XHRcdFx0XHRcdFx0d2lkdGg6IDE1MCxcblx0XHRcdFx0XHRcdFx0Y29udGVudDogdXJsLFxuXHRcdFx0XHRcdFx0XHRwYWRkaW5nOiAyLFxuXHRcdFx0XHRcdFx0XHQvLyBXZSBkb24ndCB3YW50IDx4bWw+IGFyb3VuZCB0aGUgY29udGVudCwgd2UgYWN0dWFsbHkgZW5mb3JjZSA8c3ZnPiBuYW1lc3BhY2UsIGFuZCB3ZSB3YW50IGl0IHRvIGJlIHBhcnNlZCBhcyBzdWNoLlxuXHRcdFx0XHRcdFx0XHR4bWxEZWNsYXJhdGlvbjogZmFsc2UsXG5cdFx0XHRcdFx0XHR9KS5zdmcoKSxcblx0XHRcdFx0ICApLmh0bWxcblxuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0cXJDb2RlU3ZnOiB0b3RwUVJDb2RlU3ZnLFxuXHRcdFx0XHR1cmwsXG5cdFx0XHR9XG5cdFx0fSlcblxuXHRcdHRoaXMub3RwSW5mby5nZXRBc3luYygpLnRoZW4oKCkgPT4gdGhpcy51cGRhdGVWaWV3Q2FsbGJhY2soKSlcblx0fVxuXG5cdC8qKlxuXHQgKiBpZiB0aGUgdXNlciBjYW5jZWxzIHRoZSBzZWNvbmQgZmFjdG9yIGNyZWF0aW9uIHdoaWxlIGl0J3MgYWxyZWFkeSB0YWxraW5nIHRvIHdlYkF1dGhuLCB3ZSB3YW50IHRvIGNhbmNlbCB0aGF0XG5cdCAqIHByb2Nlc3MgYmVmb3JlIGNsb3NpbmcgdGhlIGRpYWxvZy5cblx0ICovXG5cdGFib3J0KCkge1xuXHRcdC8vIG5vaW5zcGVjdGlvbiBKU0lnbm9yZWRQcm9taXNlRnJvbUNhbGxcblx0XHR0aGlzLndlYmF1dGhuQ2xpZW50LmFib3J0Q3VycmVudE9wZXJhdGlvbigpXG5cdH1cblxuXHQvKipcblx0ICogdmFsaWRhdGlvbiBtZXNzYWdlIGZvciB1c2UgaW4gZGlhbG9nIHZhbGlkYXRvcnNcblx0ICovXG5cdHZhbGlkYXRpb25NZXNzYWdlKCk6IFRyYW5zbGF0aW9uS2V5IHwgbnVsbCB7XG5cdFx0cmV0dXJuIHRoaXMubmFtZVZhbGlkYXRpb25TdGF0dXMgPT09IE5hbWVWYWxpZGF0aW9uU3RhdHVzLlZhbGlkID8gbnVsbCA6IFwidGV4dFRvb0xvbmdfbXNnXCJcblx0fVxuXG5cdC8qKlxuXHQgKiBnZXQgYSBsaXN0IG9mIHN1cHBvcnRlZCBzZWNvbmQgZmFjdG9yIHR5cGVzXG5cdCAqL1xuXHRnZXRGYWN0b3JUeXBlc09wdGlvbnMoKTogQXJyYXk8U2Vjb25kRmFjdG9yVHlwZT4ge1xuXHRcdGNvbnN0IG9wdGlvbnM6IEFycmF5PFNlY29uZEZhY3RvclR5cGU+ID0gW11cblx0XHRvcHRpb25zLnB1c2goU2Vjb25kRmFjdG9yVHlwZS50b3RwKVxuXG5cdFx0aWYgKHRoaXMud2ViYXV0aG5TdXBwb3J0ZWQpIHtcblx0XHRcdG9wdGlvbnMucHVzaChTZWNvbmRGYWN0b3JUeXBlLndlYmF1dGhuKVxuXHRcdH1cblx0XHRyZXR1cm4gb3B0aW9uc1xuXHR9XG5cblx0LyoqXG5cdCAqIGNhbGwgd2hlbiB0aGUgc2VsZWN0ZWQgc2Vjb25kIGZhY3RvciB0eXBlIGNoYW5nZXNcblx0ICovXG5cdG9uVHlwZVNlbGVjdGVkKG5ld1ZhbHVlOiBTZWNvbmRGYWN0b3JUeXBlKSB7XG5cdFx0dGhpcy5zZWxlY3RlZFR5cGUgPSBuZXdWYWx1ZVxuXHRcdHRoaXMudmVyaWZpY2F0aW9uU3RhdHVzID0gbmV3VmFsdWUgPT09IFNlY29uZEZhY3RvclR5cGUud2ViYXV0aG4gPyBWZXJpZmljYXRpb25TdGF0dXMuSW5pdGlhbCA6IFZlcmlmaWNhdGlvblN0YXR1cy5Qcm9ncmVzc1xuXG5cdFx0dGhpcy5zZXREZWZhdWx0TmFtZUlmTmVlZGVkKClcblx0XHR0aGlzLnVwZGF0ZU5hbWVWYWxpZGF0aW9uKClcblxuXHRcdGlmIChuZXdWYWx1ZSAhPT0gU2Vjb25kRmFjdG9yVHlwZS53ZWJhdXRobikge1xuXHRcdFx0Ly8gbm9pbnNwZWN0aW9uIEpTSWdub3JlZFByb21pc2VGcm9tQ2FsbFxuXHRcdFx0dGhpcy53ZWJhdXRobkNsaWVudC5hYm9ydEN1cnJlbnRPcGVyYXRpb24oKVxuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBjYWxsIHdoZW4gdGhlIGRpc3BsYXkgbmFtZSBvZiB0aGUgc2Vjb25kIGZhY3RvciBpbnN0YW5jZSBjaGFuZ2VzXG5cdCAqL1xuXHRvbk5hbWVDaGFuZ2UobmV3VmFsdWU6IHN0cmluZyk6IHZvaWQge1xuXHRcdHRoaXMubmFtZSA9IG5ld1ZhbHVlXG5cdFx0dGhpcy51cGRhdGVOYW1lVmFsaWRhdGlvbigpXG5cdH1cblxuXHQvKipcblx0ICogY2FsbCB3aGVuIHRoZSB2YWxpZGF0aW9uIGNvZGUgZm9yIHNldHRpbmcgdXAgVE9UUCBjaGFuZ2VzXG5cdCAqL1xuXHRhc3luYyBvblRvdHBWYWx1ZUNoYW5nZShuZXdWYWx1ZTogc3RyaW5nKSB7XG5cdFx0dGhpcy50b3RwQ29kZSA9IG5ld1ZhbHVlXG5cdFx0bGV0IGNsZWFuZWRWYWx1ZSA9IG5ld1ZhbHVlLnJlcGxhY2UoLyAvZywgXCJcIilcblxuXHRcdGlmIChjbGVhbmVkVmFsdWUubGVuZ3RoID09PSA2KSB7XG5cdFx0XHRjb25zdCBleHBlY3RlZENvZGUgPSBOdW1iZXIoY2xlYW5lZFZhbHVlKVxuXHRcdFx0dGhpcy52ZXJpZmljYXRpb25TdGF0dXMgPSBhd2FpdCB0aGlzLnRyeUNvZGVzKGV4cGVjdGVkQ29kZSwgdGhpcy50b3RwS2V5cy5rZXkpXG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMudmVyaWZpY2F0aW9uU3RhdHVzID0gVmVyaWZpY2F0aW9uU3RhdHVzLlByb2dyZXNzXG5cdFx0fVxuXHRcdHRoaXMudXBkYXRlVmlld0NhbGxiYWNrKClcblx0fVxuXG5cdC8qKlxuXHQgKiByZS12YWxpZGF0ZXMgdGhlIGlucHV0IGFuZCBtYWtlcyB0aGUgc2VydmVyIGNhbGxzIHRvIGFjdHVhbGx5IGNyZWF0ZSBhIHNlY29uZCBmYWN0b3Jcblx0ICogcmV0dXJucyB0aGUgdXNlciB0aGF0IHRoZSBzZWNvbmQgZmFjdG9yIHdhcyBjcmVhdGVkIGluIGNhc2UgYW55IGZvbGxvdy11cCBvcGVyYXRpb25zXG5cdCAqIGFyZSBuZWVkZWRcblx0ICovXG5cdGFzeW5jIHNhdmUoKTogUHJvbWlzZTxVc2VyIHwgbnVsbD4ge1xuXHRcdHRoaXMuc2V0RGVmYXVsdE5hbWVJZk5lZWRlZCgpXG5cdFx0aWYgKHRoaXMuc2VsZWN0ZWRUeXBlID09PSBTZWNvbmRGYWN0b3JUeXBlLndlYmF1dGhuKSB7XG5cdFx0XHQvLyBQcmV2ZW50IHN0YXJ0aW5nIGluIHBhcmFsbGVsXG5cdFx0XHRpZiAodGhpcy52ZXJpZmljYXRpb25TdGF0dXMgPT09IFZlcmlmaWNhdGlvblN0YXR1cy5Qcm9ncmVzcykge1xuXHRcdFx0XHRyZXR1cm4gbnVsbFxuXHRcdFx0fVxuXG5cdFx0XHR0cnkge1xuXHRcdFx0XHR0aGlzLnUyZlJlZ2lzdHJhdGlvbkRhdGEgPSBhd2FpdCB0aGlzLndlYmF1dGhuQ2xpZW50LnJlZ2lzdGVyKHRoaXMudXNlci5faWQsIHRoaXMubmFtZSlcblx0XHRcdFx0dGhpcy52ZXJpZmljYXRpb25TdGF0dXMgPSBWZXJpZmljYXRpb25TdGF0dXMuU3VjY2Vzc1xuXHRcdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0XHRjb25zb2xlLmxvZyhcIldlYmF1dGhuIHJlZ2lzdHJhdGlvbiBmYWlsZWQ6IFwiLCBlKVxuXHRcdFx0XHR0aGlzLnUyZlJlZ2lzdHJhdGlvbkRhdGEgPSBudWxsXG5cdFx0XHRcdHRoaXMudmVyaWZpY2F0aW9uU3RhdHVzID0gVmVyaWZpY2F0aW9uU3RhdHVzLkZhaWxlZFxuXHRcdFx0XHRyZXR1cm4gbnVsbFxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHRoaXMudXBkYXRlVmlld0NhbGxiYWNrKClcblxuXHRcdGlmICh0aGlzLnNlbGVjdGVkVHlwZSA9PT0gU2Vjb25kRmFjdG9yVHlwZS51MmYpIHtcblx0XHRcdHRocm93IG5ldyBQcm9ncmFtbWluZ0Vycm9yKGBpbnZhbGlkIGZhY3RvciB0eXBlOiAke3RoaXMuc2VsZWN0ZWRUeXBlfWApXG5cdFx0fVxuXG5cdFx0Y29uc3Qgc2YgPSBjcmVhdGVTZWNvbmRGYWN0b3Ioe1xuXHRcdFx0X293bmVyR3JvdXA6IHRoaXMudXNlci5fb3duZXJHcm91cCEsXG5cdFx0XHRuYW1lOiB0aGlzLm5hbWUsXG5cdFx0XHR0eXBlOiB0aGlzLnNlbGVjdGVkVHlwZSxcblx0XHRcdG90cFNlY3JldDogbnVsbCxcblx0XHRcdHUyZjogbnVsbCxcblx0XHR9KVxuXG5cdFx0aWYgKHRoaXMuc2VsZWN0ZWRUeXBlID09PSBTZWNvbmRGYWN0b3JUeXBlLndlYmF1dGhuKSB7XG5cdFx0XHRpZiAodGhpcy52ZXJpZmljYXRpb25TdGF0dXMgIT09IFZlcmlmaWNhdGlvblN0YXR1cy5TdWNjZXNzKSB7XG5cdFx0XHRcdHRocm93IG5ldyBVc2VyRXJyb3IoXCJ1bnJlY29nbml6ZWRVMmZEZXZpY2VfbXNnXCIpXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRzZi51MmYgPSB0aGlzLnUyZlJlZ2lzdHJhdGlvbkRhdGFcblx0XHRcdH1cblx0XHR9IGVsc2UgaWYgKHRoaXMuc2VsZWN0ZWRUeXBlID09PSBTZWNvbmRGYWN0b3JUeXBlLnRvdHApIHtcblx0XHRcdGlmICh0aGlzLnZlcmlmaWNhdGlvblN0YXR1cyA9PT0gVmVyaWZpY2F0aW9uU3RhdHVzLkZhaWxlZCkge1xuXHRcdFx0XHR0aHJvdyBuZXcgVXNlckVycm9yKFwidG90cENvZGVXcm9uZ19tc2dcIilcblx0XHRcdH0gZWxzZSBpZiAodGhpcy52ZXJpZmljYXRpb25TdGF0dXMgPT09IFZlcmlmaWNhdGlvblN0YXR1cy5Jbml0aWFsIHx8IHRoaXMudmVyaWZpY2F0aW9uU3RhdHVzID09PSBWZXJpZmljYXRpb25TdGF0dXMuUHJvZ3Jlc3MpIHtcblx0XHRcdFx0dGhyb3cgbmV3IFVzZXJFcnJvcihcInRvdHBDb2RlRW50ZXJfbXNnXCIpXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRzZi5vdHBTZWNyZXQgPSB0aGlzLnRvdHBLZXlzLmtleVxuXHRcdFx0fVxuXHRcdH1cblx0XHRhd2FpdCB0aGlzLmVudGl0eUNsaWVudC5zZXR1cChhc3NlcnROb3ROdWxsKHRoaXMudXNlci5hdXRoKS5zZWNvbmRGYWN0b3JzLCBzZiwgdGhpcy50b2tlbiA/IHsgdG9rZW46IHRoaXMudG9rZW4gfSA6IHVuZGVmaW5lZClcblx0XHRyZXR1cm4gdGhpcy51c2VyXG5cdH1cblxuXHQvKiogc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9nb29nbGUvZ29vZ2xlLWF1dGhlbnRpY2F0b3Ivd2lraS9LZXktVXJpLUZvcm1hdCAqL1xuXHRwcml2YXRlIGFzeW5jIGdldE90cEF1dGhVcmwoc2VjcmV0OiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuXHRcdGNvbnN0IHVzZXJHcm91cEluZm8gPSBhd2FpdCB0aGlzLmVudGl0eUNsaWVudC5sb2FkKEdyb3VwSW5mb1R5cGVSZWYsIHRoaXMudXNlci51c2VyR3JvdXAuZ3JvdXBJbmZvKVxuXHRcdGNvbnN0IGlzc3VlciA9IHRoaXMuZG9tYWluQ29uZmlnLmZpcnN0UGFydHlEb21haW4gPyBcIlR1dGFub3RhXCIgOiB0aGlzLmhvc3RuYW1lXG5cdFx0Y29uc3QgYWNjb3VudCA9IGVuY29kZVVSSShpc3N1ZXIgKyBcIjpcIiArIG5ldmVyTnVsbCh1c2VyR3JvdXBJbmZvLm1haWxBZGRyZXNzKSlcblx0XHRjb25zdCB1cmwgPSBuZXcgVVJMKFwib3RwYXV0aDovL3RvdHAvXCIgKyBhY2NvdW50KVxuXHRcdHVybC5zZWFyY2hQYXJhbXMuc2V0KFwiaXNzdWVyXCIsIGlzc3Vlcilcblx0XHR1cmwuc2VhcmNoUGFyYW1zLnNldChcInNlY3JldFwiLCBzZWNyZXQucmVwbGFjZSgvIC9nLCBcIlwiKSlcblx0XHR1cmwuc2VhcmNoUGFyYW1zLnNldChcImFsZ29yaXRobVwiLCBcIlNIQTFcIilcblx0XHR1cmwuc2VhcmNoUGFyYW1zLnNldChcImRpZ2l0c1wiLCBcIjZcIilcblx0XHR1cmwuc2VhcmNoUGFyYW1zLnNldChcInBlcmlvZFwiLCBcIjMwXCIpXG5cdFx0cmV0dXJuIHVybC50b1N0cmluZygpXG5cdH1cblxuXHQvKipcblx0ICogcmUtY2hlY2sgaWYgdGhlIGdpdmVuIGRpc3BsYXkgbmFtZSBpcyB2YWxpZCBmb3IgdGhlIGN1cnJlbnQgc2Vjb25kIGZhY3RvciB0eXBlXG5cdCAqL1xuXHRwcml2YXRlIHVwZGF0ZU5hbWVWYWxpZGF0aW9uKCk6IHZvaWQge1xuXHRcdHRoaXMubmFtZVZhbGlkYXRpb25TdGF0dXMgPVxuXHRcdFx0dGhpcy5zZWxlY3RlZFR5cGUgIT09IFNlY29uZEZhY3RvclR5cGUud2ViYXV0aG4gfHwgdmFsaWRhdGVXZWJhdXRobkRpc3BsYXlOYW1lKHRoaXMubmFtZSlcblx0XHRcdFx0PyBOYW1lVmFsaWRhdGlvblN0YXR1cy5WYWxpZFxuXHRcdFx0XHQ6IE5hbWVWYWxpZGF0aW9uU3RhdHVzLkludmFsaWRcblx0fVxuXG5cdC8qKlxuXHQgKiBlbXB0eSBuYW1lcyBzb21ldGltZXMgbGVhZCB0byBlcnJvcnMsIHNvIHdlIG1ha2Ugc3VyZSB3ZSBoYXZlIHNvbWV0aGluZyBzZW1pLXNlbnNpYmxlIHNldCBpbiB0aGUgZmllbGQuXG5cdCAqL1xuXHRwcml2YXRlIHNldERlZmF1bHROYW1lSWZOZWVkZWQoKSB7XG5cdFx0Y29uc3QgdHJpbW1lZCA9IHRoaXMubmFtZS50cmltKClcblx0XHRpZiAodGhpcy5zZWxlY3RlZFR5cGUgPT09IFNlY29uZEZhY3RvclR5cGUud2ViYXV0aG4gJiYgKHRyaW1tZWQgPT09IERFRkFVTFRfVE9UUF9OQU1FIHx8IHRyaW1tZWQubGVuZ3RoID09PSAwKSkge1xuXHRcdFx0dGhpcy5uYW1lID0gREVGQVVMVF9VMkZfTkFNRVxuXHRcdH0gZWxzZSBpZiAodGhpcy5zZWxlY3RlZFR5cGUgPT09IFNlY29uZEZhY3RvclR5cGUudG90cCAmJiAodHJpbW1lZCA9PT0gREVGQVVMVF9VMkZfTkFNRSB8fCB0cmltbWVkLmxlbmd0aCA9PT0gMCkpIHtcblx0XHRcdHRoaXMubmFtZSA9IERFRkFVTFRfVE9UUF9OQU1FXG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIGNoZWNrIGlmIHRoZSBnaXZlbiB2YWxpZGF0aW9uIGNvZGUgaXMgdGhlIGN1cnJlbnQsIG5leHQgb3IgbGFzdCBjb2RlIGZvciB0aGUgVE9UUFxuXHQgKi9cblx0cHJpdmF0ZSBhc3luYyB0cnlDb2RlcyhleHBlY3RlZENvZGU6IG51bWJlciwga2V5OiBVaW50OEFycmF5KTogUHJvbWlzZTxWZXJpZmljYXRpb25TdGF0dXM+IHtcblx0XHRjb25zdCB0aW1lID0gTWF0aC5mbG9vcihuZXcgRGF0ZSgpLmdldFRpbWUoKSAvIDEwMDAgLyAzMClcblx0XHQvLyBXZSB0cnkgb3V0IDMgY29kZXM6IGN1cnJlbnQgbWludXRlLCAzMCBzZWNvbmRzIGJlZm9yZSBhbmQgMzAgc2Vjb25kcyBhZnRlci5cblx0XHQvLyBJZiBhdCBsZWFzdCBvbmUgb2YgdGhlbSB3b3Jrcywgd2UgYWNjZXB0IGl0LlxuXHRcdGNvbnN0IG51bWJlciA9IGF3YWl0IHRoaXMubG9naW5GYWNhZGUuZ2VuZXJhdGVUb3RwQ29kZSh0aW1lLCBrZXkpXG5cblx0XHRpZiAobnVtYmVyID09PSBleHBlY3RlZENvZGUpIHtcblx0XHRcdHJldHVybiBWZXJpZmljYXRpb25TdGF0dXMuU3VjY2Vzc1xuXHRcdH1cblxuXHRcdGNvbnN0IG51bWJlcjIgPSBhd2FpdCB0aGlzLmxvZ2luRmFjYWRlLmdlbmVyYXRlVG90cENvZGUodGltZSAtIDEsIGtleSlcblxuXHRcdGlmIChudW1iZXIyID09PSBleHBlY3RlZENvZGUpIHtcblx0XHRcdHJldHVybiBWZXJpZmljYXRpb25TdGF0dXMuU3VjY2Vzc1xuXHRcdH1cblxuXHRcdGNvbnN0IG51bWJlcjMgPSBhd2FpdCB0aGlzLmxvZ2luRmFjYWRlLmdlbmVyYXRlVG90cENvZGUodGltZSArIDEsIGtleSlcblxuXHRcdGlmIChudW1iZXIzID09PSBleHBlY3RlZENvZGUpIHtcblx0XHRcdHJldHVybiBWZXJpZmljYXRpb25TdGF0dXMuU3VjY2Vzc1xuXHRcdH1cblxuXHRcdHJldHVybiBWZXJpZmljYXRpb25TdGF0dXMuRmFpbGVkXG5cdH1cbn1cbiIsImltcG9ydCB7IHNob3dQcm9ncmVzc0RpYWxvZyB9IGZyb20gXCIuLi8uLi8uLi9ndWkvZGlhbG9ncy9Qcm9ncmVzc0RpYWxvZy5qc1wiXG5pbXBvcnQgeyBTZWNvbmRGYWN0b3JUeXBlIH0gZnJvbSBcIi4uLy4uLy4uL2FwaS9jb21tb24vVHV0YW5vdGFDb25zdGFudHMuanNcIlxuaW1wb3J0IHR5cGUgeyBEcm9wRG93blNlbGVjdG9yQXR0cnMgfSBmcm9tIFwiLi4vLi4vLi4vZ3VpL2Jhc2UvRHJvcERvd25TZWxlY3Rvci5qc1wiXG5pbXBvcnQgeyBEcm9wRG93blNlbGVjdG9yIH0gZnJvbSBcIi4uLy4uLy4uL2d1aS9iYXNlL0Ryb3BEb3duU2VsZWN0b3IuanNcIlxuaW1wb3J0IHsgbGFuZyB9IGZyb20gXCIuLi8uLi8uLi9taXNjL0xhbmd1YWdlVmlld01vZGVsLmpzXCJcbmltcG9ydCB0eXBlIHsgVGV4dEZpZWxkQXR0cnMgfSBmcm9tIFwiLi4vLi4vLi4vZ3VpL2Jhc2UvVGV4dEZpZWxkLmpzXCJcbmltcG9ydCB7IEF1dG9jb21wbGV0ZSwgVGV4dEZpZWxkIH0gZnJvbSBcIi4uLy4uLy4uL2d1aS9iYXNlL1RleHRGaWVsZC5qc1wiXG5pbXBvcnQgeyBpc0FwcCB9IGZyb20gXCIuLi8uLi8uLi9hcGkvY29tbW9uL0Vudi5qc1wiXG5pbXBvcnQgbSwgeyBDaGlsZHJlbiB9IGZyb20gXCJtaXRocmlsXCJcbmltcG9ydCB7IGNvcHlUb0NsaXBib2FyZCB9IGZyb20gXCIuLi8uLi8uLi9taXNjL0NsaXBib2FyZFV0aWxzLmpzXCJcbmltcG9ydCB7IEljb25zIH0gZnJvbSBcIi4uLy4uLy4uL2d1aS9iYXNlL2ljb25zL0ljb25zLmpzXCJcbmltcG9ydCB7IERpYWxvZyB9IGZyb20gXCIuLi8uLi8uLi9ndWkvYmFzZS9EaWFsb2cuanNcIlxuaW1wb3J0IHsgSWNvbiwgSWNvblNpemUsIHByb2dyZXNzSWNvbiB9IGZyb20gXCIuLi8uLi8uLi9ndWkvYmFzZS9JY29uLmpzXCJcbmltcG9ydCB7IHRoZW1lIH0gZnJvbSBcIi4uLy4uLy4uL2d1aS90aGVtZS5qc1wiXG5pbXBvcnQgdHlwZSB7IFVzZXIgfSBmcm9tIFwiLi4vLi4vLi4vYXBpL2VudGl0aWVzL3N5cy9UeXBlUmVmcy5qc1wiXG5pbXBvcnQgeyBhc3NlcnROb3ROdWxsLCBMYXp5TG9hZGVkIH0gZnJvbSBcIkB0dXRhby90dXRhbm90YS11dGlsc1wiXG5pbXBvcnQgeyBsb2NhdG9yIH0gZnJvbSBcIi4uLy4uLy4uL2FwaS9tYWluL0NvbW1vbkxvY2F0b3IuanNcIlxuaW1wb3J0ICogYXMgUmVjb3ZlckNvZGVEaWFsb2cgZnJvbSBcIi4uL1JlY292ZXJDb2RlRGlhbG9nLmpzXCJcbmltcG9ydCB7IEVudGl0eUNsaWVudCB9IGZyb20gXCIuLi8uLi8uLi9hcGkvY29tbW9uL0VudGl0eUNsaWVudC5qc1wiXG5pbXBvcnQgeyBQcm9ncmFtbWluZ0Vycm9yIH0gZnJvbSBcIi4uLy4uLy4uL2FwaS9jb21tb24vZXJyb3IvUHJvZ3JhbW1pbmdFcnJvci5qc1wiXG5pbXBvcnQgeyBJY29uQnV0dG9uLCBJY29uQnV0dG9uQXR0cnMgfSBmcm9tIFwiLi4vLi4vLi4vZ3VpL2Jhc2UvSWNvbkJ1dHRvbi5qc1wiXG5pbXBvcnQgeyBCdXR0b25TaXplIH0gZnJvbSBcIi4uLy4uLy4uL2d1aS9iYXNlL0J1dHRvblNpemUuanNcIlxuaW1wb3J0IHsgTmFtZVZhbGlkYXRpb25TdGF0dXMsIFNlY29uZEZhY3RvckVkaXRNb2RlbCwgU2Vjb25kRmFjdG9yVHlwZVRvTmFtZVRleHRJZCwgVmVyaWZpY2F0aW9uU3RhdHVzIH0gZnJvbSBcIi4vU2Vjb25kRmFjdG9yRWRpdE1vZGVsLmpzXCJcbmltcG9ydCB7IFVzZXJFcnJvciB9IGZyb20gXCIuLi8uLi8uLi9hcGkvbWFpbi9Vc2VyRXJyb3IuanNcIlxuaW1wb3J0IHsgTG9naW5CdXR0b24gfSBmcm9tIFwiLi4vLi4vLi4vZ3VpL2Jhc2UvYnV0dG9ucy9Mb2dpbkJ1dHRvbi5qc1wiXG5pbXBvcnQgeyBOb3RBdXRob3JpemVkRXJyb3IgfSBmcm9tIFwiLi4vLi4vLi4vYXBpL2NvbW1vbi9lcnJvci9SZXN0RXJyb3JcIlxuXG5leHBvcnQgY2xhc3MgU2Vjb25kRmFjdG9yRWRpdERpYWxvZyB7XG5cdHByaXZhdGUgcmVhZG9ubHkgZGlhbG9nOiBEaWFsb2dcblxuXHRjb25zdHJ1Y3Rvcihwcml2YXRlIHJlYWRvbmx5IG1vZGVsOiBTZWNvbmRGYWN0b3JFZGl0TW9kZWwpIHtcblx0XHR0aGlzLmRpYWxvZyA9IERpYWxvZy5jcmVhdGVBY3Rpb25EaWFsb2coe1xuXHRcdFx0dGl0bGU6IFwiYWRkX2FjdGlvblwiLFxuXHRcdFx0YWxsb3dPa1dpdGhSZXR1cm46IHRydWUsXG5cdFx0XHRjaGlsZDoge1xuXHRcdFx0XHR2aWV3OiAoKSA9PiB0aGlzLnJlbmRlcigpLFxuXHRcdFx0fSxcblx0XHRcdG9rQWN0aW9uOiAoKSA9PiBzaG93UHJvZ3Jlc3NEaWFsb2coXCJwbGVhc2VXYWl0X21zZ1wiLCB0aGlzLm9rQWN0aW9uKCkpLFxuXHRcdFx0YWxsb3dDYW5jZWw6IHRydWUsXG5cdFx0XHRva0FjdGlvblRleHRJZDogXCJzYXZlX2FjdGlvblwiLFxuXHRcdFx0Y2FuY2VsQWN0aW9uOiAoKSA9PiB0aGlzLm1vZGVsLmFib3J0KCksXG5cdFx0XHR2YWxpZGF0b3I6ICgpID0+IHRoaXMubW9kZWwudmFsaWRhdGlvbk1lc3NhZ2UoKSxcblx0XHR9KVxuXHR9XG5cblx0YXN5bmMgb2tBY3Rpb24oKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0dHJ5IHtcblx0XHRcdGNvbnN0IHVzZXIgPSBhd2FpdCB0aGlzLm1vZGVsLnNhdmUoKVxuXHRcdFx0aWYgKHVzZXIgIT0gbnVsbCkgdGhpcy5maW5hbGl6ZSh1c2VyKVxuXHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdGlmIChlIGluc3RhbmNlb2YgVXNlckVycm9yKSB7XG5cdFx0XHRcdC8vIG5vaW5zcGVjdGlvbiBFUzZNaXNzaW5nQXdhaXRcblx0XHRcdFx0RGlhbG9nLm1lc3NhZ2UobGFuZy5tYWtlVHJhbnNsYXRpb24oXCJlcnJvcl9tc2dcIiwgZS5tZXNzYWdlKSlcblx0XHRcdH0gZWxzZSBpZiAoZSBpbnN0YW5jZW9mIE5vdEF1dGhvcml6ZWRFcnJvcikge1xuXHRcdFx0XHR0aGlzLmRpYWxvZy5jbG9zZSgpXG5cdFx0XHRcdERpYWxvZy5tZXNzYWdlKFwiY29udGFjdEZvcm1TdWJtaXRFcnJvcl9tc2dcIilcblx0XHRcdFx0cmV0dXJuXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0aHJvdyBlXG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0ZmluYWxpemUodXNlcjogVXNlcik6IHZvaWQge1xuXHRcdHRoaXMuZGlhbG9nLmNsb3NlKClcblx0XHRSZWNvdmVyQ29kZURpYWxvZy5zaG93UmVjb3ZlckNvZGVEaWFsb2dBZnRlclBhc3N3b3JkVmVyaWZpY2F0aW9uQW5kSW5mb0RpYWxvZyh1c2VyKVxuXHR9XG5cblx0c3RhdGljIGFzeW5jIGxvYWRBbmRTaG93KGVudGl0eUNsaWVudDogRW50aXR5Q2xpZW50LCBsYXp5VXNlcjogTGF6eUxvYWRlZDxVc2VyPiwgdG9rZW4/OiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRjb25zdCBkaWFsb2c6IFNlY29uZEZhY3RvckVkaXREaWFsb2cgPSBhd2FpdCBzaG93UHJvZ3Jlc3NEaWFsb2coXCJwbGVhc2VXYWl0X21zZ1wiLCB0aGlzLmxvYWRXZWJhdXRobkNsaWVudChlbnRpdHlDbGllbnQsIGxhenlVc2VyLCB0b2tlbikpXG5cdFx0ZGlhbG9nLmRpYWxvZy5zaG93KClcblx0fVxuXG5cdHByaXZhdGUgcmVuZGVyKCk6IENoaWxkcmVuIHtcblx0XHRjb25zdCBvcHRpb25zSXRlbXMgPSB0aGlzLm1vZGVsLmdldEZhY3RvclR5cGVzT3B0aW9ucygpLm1hcCgobykgPT4gKHtcblx0XHRcdG5hbWU6IGxhbmcuZ2V0KFNlY29uZEZhY3RvclR5cGVUb05hbWVUZXh0SWRbb10pLFxuXHRcdFx0dmFsdWU6IG8sXG5cdFx0fSkpXG5cblx0XHRjb25zdCB0eXBlRHJvcGRvd25BdHRyczogRHJvcERvd25TZWxlY3RvckF0dHJzPFNlY29uZEZhY3RvclR5cGU+ID0ge1xuXHRcdFx0bGFiZWw6IFwidHlwZV9sYWJlbFwiLFxuXHRcdFx0c2VsZWN0ZWRWYWx1ZTogdGhpcy5tb2RlbC5zZWxlY3RlZFR5cGUsXG5cdFx0XHRzZWxlY3Rpb25DaGFuZ2VkSGFuZGxlcjogKG5ld1ZhbHVlKSA9PiB0aGlzLm1vZGVsLm9uVHlwZVNlbGVjdGVkKG5ld1ZhbHVlKSxcblx0XHRcdGl0ZW1zOiBvcHRpb25zSXRlbXMsXG5cdFx0XHRkcm9wZG93bldpZHRoOiAzMDAsXG5cdFx0fVxuXHRcdGNvbnN0IG5hbWVGaWVsZEF0dHJzOiBUZXh0RmllbGRBdHRycyA9IHtcblx0XHRcdGxhYmVsOiBcIm5hbWVfbGFiZWxcIixcblx0XHRcdGhlbHBMYWJlbDogKCkgPT4gdGhpcy5yZW5kZXJIZWxwTGFiZWwoKSxcblx0XHRcdHZhbHVlOiB0aGlzLm1vZGVsLm5hbWUsXG5cdFx0XHRvbmlucHV0OiAodmFsdWUpID0+IHRoaXMubW9kZWwub25OYW1lQ2hhbmdlKHZhbHVlKSxcblx0XHR9XG5cdFx0cmV0dXJuIFttKERyb3BEb3duU2VsZWN0b3IsIHR5cGVEcm9wZG93bkF0dHJzKSwgbShUZXh0RmllbGQsIG5hbWVGaWVsZEF0dHJzKSwgdGhpcy5yZW5kZXJUeXBlU3BlY2lmaWNGaWVsZHMoKV1cblx0fVxuXG5cdHByaXZhdGUgcmVuZGVySGVscExhYmVsKCk6IENoaWxkcmVuIHtcblx0XHRyZXR1cm4gdGhpcy5tb2RlbC5uYW1lVmFsaWRhdGlvblN0YXR1cyA9PT0gTmFtZVZhbGlkYXRpb25TdGF0dXMuVmFsaWRcblx0XHRcdD8gbShcIlwiLCBsYW5nLmdldChcInNlY29uZEZhY3Rvck5hbWVJbmZvX21zZ1wiKSlcblx0XHRcdDogbShcIi5iLmNvbnRlbnQtYWNjZW50LWZnXCIsIGxhbmcuZ2V0KFwidGV4dFRvb0xvbmdfbXNnXCIpKVxuXHR9XG5cblx0cHJpdmF0ZSByZW5kZXJUeXBlU3BlY2lmaWNGaWVsZHMoKTogQ2hpbGRyZW4ge1xuXHRcdHN3aXRjaCAodGhpcy5tb2RlbC5zZWxlY3RlZFR5cGUpIHtcblx0XHRcdGNhc2UgU2Vjb25kRmFjdG9yVHlwZS50b3RwOlxuXHRcdFx0XHRyZXR1cm4gdGhpcy5yZW5kZXJPdHBGaWVsZHMoKVxuXG5cdFx0XHRjYXNlIFNlY29uZEZhY3RvclR5cGUud2ViYXV0aG46XG5cdFx0XHRcdHJldHVybiB0aGlzLnJlbmRlclUyRkZpZWxkcygpXG5cblx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdHRocm93IG5ldyBQcm9ncmFtbWluZ0Vycm9yKGBJbnZhbGlkIDJmYSB0eXBlOiAke3RoaXMubW9kZWwuc2VsZWN0ZWRUeXBlfWApXG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSByZW5kZXJVMkZGaWVsZHMoKTogQ2hpbGRyZW4ge1xuXHRcdHJldHVybiB0aGlzLm1vZGVsLnZlcmlmaWNhdGlvblN0YXR1cyA9PT0gVmVyaWZpY2F0aW9uU3RhdHVzLkluaXRpYWxcblx0XHRcdD8gbnVsbFxuXHRcdFx0OiBtKFwicC5mbGV4Lml0ZW1zLWNlbnRlclwiLCBbbShcIi5tci1zXCIsIHRoaXMuc3RhdHVzSWNvbigpKSwgbShcIlwiLCB0aGlzLnN0YXR1c01lc3NhZ2UoKSldKVxuXHR9XG5cblx0cHJpdmF0ZSByZW5kZXJPdHBGaWVsZHMoKTogQ2hpbGRyZW4ge1xuXHRcdGNvbnN0IGNvcHlCdXR0b25BdHRyczogSWNvbkJ1dHRvbkF0dHJzID0ge1xuXHRcdFx0dGl0bGU6IFwiY29weV9hY3Rpb25cIixcblx0XHRcdGNsaWNrOiAoKSA9PiBjb3B5VG9DbGlwYm9hcmQodGhpcy5tb2RlbC50b3RwS2V5cy5yZWFkYWJsZUtleSksXG5cdFx0XHRpY29uOiBJY29ucy5DbGlwYm9hcmQsXG5cdFx0XHRzaXplOiBCdXR0b25TaXplLkNvbXBhY3QsXG5cdFx0fVxuXHRcdHJldHVybiBtKFwiLm1iXCIsIFtcblx0XHRcdG0oVGV4dEZpZWxkLCB7XG5cdFx0XHRcdGxhYmVsOiBcInRvdHBTZWNyZXRfbGFiZWxcIixcblx0XHRcdFx0aGVscExhYmVsOiAoKSA9PiBsYW5nLmdldChpc0FwcCgpID8gXCJ0b3RwVHJhbnNmZXJTZWNyZXRBcHBfbXNnXCIgOiBcInRvdHBUcmFuc2ZlclNlY3JldF9tc2dcIiksXG5cdFx0XHRcdHZhbHVlOiB0aGlzLm1vZGVsLnRvdHBLZXlzLnJlYWRhYmxlS2V5LFxuXHRcdFx0XHRpbmplY3Rpb25zUmlnaHQ6ICgpID0+IG0oSWNvbkJ1dHRvbiwgY29weUJ1dHRvbkF0dHJzKSxcblx0XHRcdFx0aXNSZWFkT25seTogdHJ1ZSxcblx0XHRcdH0pLFxuXHRcdFx0aXNBcHAoKVxuXHRcdFx0XHQ/IG0oXG5cdFx0XHRcdFx0XHRcIi5wdFwiLFxuXHRcdFx0XHRcdFx0bShMb2dpbkJ1dHRvbiwge1xuXHRcdFx0XHRcdFx0XHRsYWJlbDogXCJhZGRPcGVuT1RQQXBwX2FjdGlvblwiLFxuXHRcdFx0XHRcdFx0XHRvbmNsaWNrOiAoKSA9PiB0aGlzLm9wZW5PdHBMaW5rKCksXG5cdFx0XHRcdFx0XHR9KSxcblx0XHRcdFx0ICApXG5cdFx0XHRcdDogdGhpcy5yZW5kZXJPdHBRckNvZGUoKSxcblx0XHRcdG0oVGV4dEZpZWxkLCB7XG5cdFx0XHRcdGxhYmVsOiBcInRvdHBDb2RlX2xhYmVsXCIsXG5cdFx0XHRcdHZhbHVlOiB0aGlzLm1vZGVsLnRvdHBDb2RlLFxuXHRcdFx0XHRoZWxwTGFiZWw6ICgpID0+IHRoaXMuc3RhdHVzTWVzc2FnZSgpLFxuXHRcdFx0XHRhdXRvY29tcGxldGVBczogQXV0b2NvbXBsZXRlLm9uZVRpbWVDb2RlLFxuXHRcdFx0XHRvbmlucHV0OiAobmV3VmFsdWUpID0+IHRoaXMubW9kZWwub25Ub3RwVmFsdWVDaGFuZ2UobmV3VmFsdWUpLFxuXHRcdFx0fSksXG5cdFx0XSlcblx0fVxuXG5cdHByaXZhdGUgcmVuZGVyT3RwUXJDb2RlKCk6IENoaWxkcmVuIHtcblx0XHRjb25zdCBvdHBJbmZvID0gdGhpcy5tb2RlbC5vdHBJbmZvLmdldFN5bmMoKVxuXG5cdFx0aWYgKG90cEluZm8pIHtcblx0XHRcdGNvbnN0IHFyQ29kZVN2ZyA9IGFzc2VydE5vdE51bGwob3RwSW5mby5xckNvZGVTdmcpXG5cdFx0XHQvLyBzYW5pdGl6ZWQgaW4gdGhlIG1vZGVsXG5cdFx0XHRyZXR1cm4gbShcIi5mbGV4LWNlbnRlci5wdFwiLCBtLnRydXN0KHFyQ29kZVN2ZykpXG5cdFx0fSBlbHNlIHtcblx0XHRcdHJldHVybiBudWxsXG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyBvcGVuT3RwTGluaygpIHtcblx0XHRjb25zdCB7IHVybCB9ID0gYXdhaXQgdGhpcy5tb2RlbC5vdHBJbmZvLmdldEFzeW5jKClcblx0XHRjb25zdCBzdWNjZXNzZnVsID0gYXdhaXQgbG9jYXRvci5zeXN0ZW1GYWNhZGUub3BlbkxpbmsodXJsKVxuXG5cdFx0aWYgKCFzdWNjZXNzZnVsKSB7XG5cdFx0XHQvLyBub2luc3BlY3Rpb24gRVM2TWlzc2luZ0F3YWl0XG5cdFx0XHREaWFsb2cubWVzc2FnZShcIm5vQXBwQXZhaWxhYmxlX21zZ1wiKVxuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgc3RhdGljIGFzeW5jIGxvYWRXZWJhdXRobkNsaWVudChlbnRpdHlDbGllbnQ6IEVudGl0eUNsaWVudCwgbGF6eVVzZXI6IExhenlMb2FkZWQ8VXNlcj4sIHRva2VuPzogc3RyaW5nKTogUHJvbWlzZTxTZWNvbmRGYWN0b3JFZGl0RGlhbG9nPiB7XG5cdFx0Y29uc3QgdG90cEtleXMgPSBhd2FpdCBsb2NhdG9yLmxvZ2luRmFjYWRlLmdlbmVyYXRlVG90cFNlY3JldCgpXG5cdFx0Y29uc3QgdXNlciA9IGF3YWl0IGxhenlVc2VyLmdldEFzeW5jKClcblx0XHRjb25zdCB3ZWJhdXRoblN1cHBvcnRlZCA9IGF3YWl0IGxvY2F0b3Iud2ViQXV0aG4uaXNTdXBwb3J0ZWQoKVxuXHRcdGNvbnN0IG1vZGVsID0gbmV3IFNlY29uZEZhY3RvckVkaXRNb2RlbChcblx0XHRcdGVudGl0eUNsaWVudCxcblx0XHRcdHVzZXIsXG5cdFx0XHRsb2NhdG9yLndlYkF1dGhuLFxuXHRcdFx0dG90cEtleXMsXG5cdFx0XHR3ZWJhdXRoblN1cHBvcnRlZCxcblx0XHRcdGxvY2F0b3IubG9naW5GYWNhZGUsXG5cdFx0XHRsb2NhdGlvbi5ob3N0bmFtZSxcblx0XHRcdGxvY2F0b3IuZG9tYWluQ29uZmlnUHJvdmlkZXIoKS5nZXRDdXJyZW50RG9tYWluQ29uZmlnKCksXG5cdFx0XHRtLnJlZHJhdyxcblx0XHRcdHRva2VuLFxuXHRcdClcblx0XHRyZXR1cm4gbmV3IFNlY29uZEZhY3RvckVkaXREaWFsb2cobW9kZWwpXG5cdH1cblxuXHRwcml2YXRlIHN0YXR1c0ljb24oKTogQ2hpbGRyZW4ge1xuXHRcdHN3aXRjaCAodGhpcy5tb2RlbC52ZXJpZmljYXRpb25TdGF0dXMpIHtcblx0XHRcdGNhc2UgVmVyaWZpY2F0aW9uU3RhdHVzLlByb2dyZXNzOlxuXHRcdFx0XHRyZXR1cm4gcHJvZ3Jlc3NJY29uKClcblxuXHRcdFx0Y2FzZSBWZXJpZmljYXRpb25TdGF0dXMuU3VjY2Vzczpcblx0XHRcdFx0cmV0dXJuIG0oSWNvbiwge1xuXHRcdFx0XHRcdGljb246IEljb25zLkNoZWNrbWFyayxcblx0XHRcdFx0XHRzaXplOiBJY29uU2l6ZS5NZWRpdW0sXG5cdFx0XHRcdFx0c3R5bGU6IHtcblx0XHRcdFx0XHRcdGZpbGw6IHRoZW1lLmNvbnRlbnRfYWNjZW50LFxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdH0pXG5cblx0XHRcdGNhc2UgVmVyaWZpY2F0aW9uU3RhdHVzLkZhaWxlZDpcblx0XHRcdFx0cmV0dXJuIG0oSWNvbiwge1xuXHRcdFx0XHRcdGljb246IEljb25zLkNhbmNlbCxcblx0XHRcdFx0XHRzaXplOiBJY29uU2l6ZS5NZWRpdW0sXG5cdFx0XHRcdFx0c3R5bGU6IHtcblx0XHRcdFx0XHRcdGZpbGw6IHRoZW1lLmNvbnRlbnRfYWNjZW50LFxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdH0pXG5cblx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdHJldHVybiBudWxsXG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBzdGF0dXNNZXNzYWdlKCk6IHN0cmluZyB7XG5cdFx0aWYgKHRoaXMubW9kZWwuc2VsZWN0ZWRUeXBlID09PSBTZWNvbmRGYWN0b3JUeXBlLndlYmF1dGhuKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5tb2RlbC52ZXJpZmljYXRpb25TdGF0dXMgPT09IFZlcmlmaWNhdGlvblN0YXR1cy5TdWNjZXNzID8gbGFuZy5nZXQoXCJyZWdpc3RlcmVkVTJmRGV2aWNlX21zZ1wiKSA6IGxhbmcuZ2V0KFwidW5yZWNvZ25pemVkVTJmRGV2aWNlX21zZ1wiKVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRpZiAodGhpcy5tb2RlbC52ZXJpZmljYXRpb25TdGF0dXMgPT09IFZlcmlmaWNhdGlvblN0YXR1cy5TdWNjZXNzKSB7XG5cdFx0XHRcdHJldHVybiBsYW5nLmdldChcInRvdHBDb2RlQ29uZmlybWVkX21zZ1wiKVxuXHRcdFx0fSBlbHNlIGlmICh0aGlzLm1vZGVsLnZlcmlmaWNhdGlvblN0YXR1cyA9PT0gVmVyaWZpY2F0aW9uU3RhdHVzLkZhaWxlZCkge1xuXHRcdFx0XHRyZXR1cm4gbGFuZy5nZXQoXCJ0b3RwQ29kZVdyb25nX21zZ1wiKVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmV0dXJuIGxhbmcuZ2V0KFwidG90cENvZGVFbnRlcl9tc2dcIilcblx0XHRcdH1cblx0XHR9XG5cdH1cbn1cbiIsImltcG9ydCBtLCB7IENoaWxkcmVuIH0gZnJvbSBcIm1pdGhyaWxcIlxuaW1wb3J0IHsgYXNzZXJ0TWFpbk9yTm9kZSB9IGZyb20gXCIuLi8uLi8uLi9hcGkvY29tbW9uL0Vudi5qc1wiXG5pbXBvcnQgdHlwZSB7IFNlY29uZEZhY3RvciwgVXNlciB9IGZyb20gXCIuLi8uLi8uLi9hcGkvZW50aXRpZXMvc3lzL1R5cGVSZWZzLmpzXCJcbmltcG9ydCB7IFNlY29uZEZhY3RvclR5cGVSZWYgfSBmcm9tIFwiLi4vLi4vLi4vYXBpL2VudGl0aWVzL3N5cy9UeXBlUmVmcy5qc1wiXG5pbXBvcnQgeyBhc3NlcnROb3ROdWxsLCBMYXp5TG9hZGVkLCBuZXZlck51bGwsIG5vT3AgfSBmcm9tIFwiQHR1dGFvL3R1dGFub3RhLXV0aWxzXCJcbmltcG9ydCB7IEljb25zIH0gZnJvbSBcIi4uLy4uLy4uL2d1aS9iYXNlL2ljb25zL0ljb25zLmpzXCJcbmltcG9ydCB7IEluZm9MaW5rLCBsYW5nIH0gZnJvbSBcIi4uLy4uLy4uL21pc2MvTGFuZ3VhZ2VWaWV3TW9kZWwuanNcIlxuaW1wb3J0IHsgYXNzZXJ0RW51bVZhbHVlLCBTZWNvbmRGYWN0b3JUeXBlIH0gZnJvbSBcIi4uLy4uLy4uL2FwaS9jb21tb24vVHV0YW5vdGFDb25zdGFudHMuanNcIlxuaW1wb3J0IHR5cGUgeyBUYWJsZUF0dHJzLCBUYWJsZUxpbmVBdHRycyB9IGZyb20gXCIuLi8uLi8uLi9ndWkvYmFzZS9UYWJsZS5qc1wiXG5pbXBvcnQgeyBDb2x1bW5XaWR0aCwgVGFibGUgfSBmcm9tIFwiLi4vLi4vLi4vZ3VpL2Jhc2UvVGFibGUuanNcIlxuaW1wb3J0IHsgTm90QXV0aG9yaXplZEVycm9yLCBOb3RGb3VuZEVycm9yIH0gZnJvbSBcIi4uLy4uLy4uL2FwaS9jb21tb24vZXJyb3IvUmVzdEVycm9yLmpzXCJcbmltcG9ydCB7IGlmQWxsb3dlZFR1dGFMaW5rcyB9IGZyb20gXCIuLi8uLi8uLi9ndWkvYmFzZS9HdWlVdGlscy5qc1wiXG5pbXBvcnQgeyBsb2NhdG9yIH0gZnJvbSBcIi4uLy4uLy4uL2FwaS9tYWluL0NvbW1vbkxvY2F0b3IuanNcIlxuaW1wb3J0IHsgU2Vjb25kRmFjdG9yRWRpdERpYWxvZyB9IGZyb20gXCIuL1NlY29uZEZhY3RvckVkaXREaWFsb2cuanNcIlxuaW1wb3J0IHsgU2Vjb25kRmFjdG9yVHlwZVRvTmFtZVRleHRJZCB9IGZyb20gXCIuL1NlY29uZEZhY3RvckVkaXRNb2RlbC5qc1wiXG5pbXBvcnQgeyBJY29uQnV0dG9uQXR0cnMgfSBmcm9tIFwiLi4vLi4vLi4vZ3VpL2Jhc2UvSWNvbkJ1dHRvbi5qc1wiXG5pbXBvcnQgeyBCdXR0b25TaXplIH0gZnJvbSBcIi4uLy4uLy4uL2d1aS9iYXNlL0J1dHRvblNpemUuanNcIlxuaW1wb3J0IHsgYXBwSWRUb0xvZ2luVXJsIH0gZnJvbSBcIi4uLy4uLy4uL21pc2MvMmZhL1NlY29uZEZhY3RvclV0aWxzLmpzXCJcbmltcG9ydCB7IERvbWFpbkNvbmZpZ1Byb3ZpZGVyIH0gZnJvbSBcIi4uLy4uLy4uL2FwaS9jb21tb24vRG9tYWluQ29uZmlnUHJvdmlkZXIuanNcIlxuaW1wb3J0IHsgRW50aXR5VXBkYXRlRGF0YSwgaXNVcGRhdGVGb3JUeXBlUmVmIH0gZnJvbSBcIi4uLy4uLy4uL2FwaS9jb21tb24vdXRpbHMvRW50aXR5VXBkYXRlVXRpbHMuanNcIlxuaW1wb3J0IHsgTW9yZUluZm9MaW5rIH0gZnJvbSBcIi4uLy4uLy4uL21pc2MvbmV3cy9Nb3JlSW5mb0xpbmsuanNcIlxuaW1wb3J0IHsgc2hvd1JlcXVlc3RQYXNzd29yZERpYWxvZyB9IGZyb20gXCIuLi8uLi8uLi9taXNjL3Bhc3N3b3Jkcy9QYXNzd29yZFJlcXVlc3REaWFsb2dcIlxuaW1wb3J0IHsgTG9naW5GYWNhZGUgfSBmcm9tIFwiLi4vLi4vLi4vYXBpL3dvcmtlci9mYWNhZGVzL0xvZ2luRmFjYWRlXCJcbmltcG9ydCB7IHNob3dQcm9ncmVzc0RpYWxvZyB9IGZyb20gXCIuLi8uLi8uLi9ndWkvZGlhbG9ncy9Qcm9ncmVzc0RpYWxvZ1wiXG5pbXBvcnQgeyBEaWFsb2cgfSBmcm9tIFwiLi4vLi4vLi4vZ3VpL2Jhc2UvRGlhbG9nXCJcblxuYXNzZXJ0TWFpbk9yTm9kZSgpXG5cbmV4cG9ydCBjbGFzcyBTZWNvbmRGYWN0b3JzRWRpdEZvcm0ge1xuXHRfMkZBTGluZUF0dHJzOiBUYWJsZUxpbmVBdHRyc1tdXG5cblx0Y29uc3RydWN0b3IoXG5cdFx0cHJpdmF0ZSByZWFkb25seSB1c2VyOiBMYXp5TG9hZGVkPFVzZXI+LFxuXHRcdHByaXZhdGUgcmVhZG9ubHkgZG9tYWluQ29uZmlnUHJvdmlkZXI6IERvbWFpbkNvbmZpZ1Byb3ZpZGVyLFxuXHRcdHByaXZhdGUgcmVhZG9ubHkgbG9naW5GYWNhZGU6IExvZ2luRmFjYWRlLFxuXHRcdHByaXZhdGUgYXNrRm9yUGFzc3dvcmQ6IGJvb2xlYW4sXG5cdFx0cHJpdmF0ZSBpc0RlYWN0aXZhdGVkOiBib29sZWFuLFxuXHQpIHtcblx0XHR0aGlzLl8yRkFMaW5lQXR0cnMgPSBbXVxuXG5cdFx0dGhpcy5fdXBkYXRlU2Vjb25kRmFjdG9ycygpXG5cblx0XHR0aGlzLnZpZXcgPSB0aGlzLnZpZXcuYmluZCh0aGlzKVxuXHR9XG5cblx0dmlldygpOiBDaGlsZHJlbiB7XG5cdFx0Y29uc3Qgc2Vjb25kRmFjdG9yVGFibGVBdHRyczogVGFibGVBdHRycyA9IHtcblx0XHRcdGNvbHVtbkhlYWRpbmc6IFtcIm5hbWVfbGFiZWxcIiwgXCJ0eXBlX2xhYmVsXCJdLFxuXHRcdFx0Y29sdW1uV2lkdGhzOiBbQ29sdW1uV2lkdGguTGFyZ2VzdCwgQ29sdW1uV2lkdGguTGFyZ2VzdF0sXG5cdFx0XHRsaW5lczogdGhpcy5fMkZBTGluZUF0dHJzLFxuXHRcdFx0c2hvd0FjdGlvbkJ1dHRvbkNvbHVtbjogdHJ1ZSxcblx0XHRcdGFkZEJ1dHRvbkF0dHJzOiB7XG5cdFx0XHRcdHRpdGxlOiBcImFkZFNlY29uZEZhY3Rvcl9hY3Rpb25cIixcblx0XHRcdFx0Y2xpY2s6ICgpID0+IHtcblx0XHRcdFx0XHRpZiAodGhpcy5pc0RlYWN0aXZhdGVkKSB7XG5cdFx0XHRcdFx0XHREaWFsb2cubWVzc2FnZShcInVzZXJBY2NvdW50RGVhY3RpdmF0ZWRfbXNnXCIpXG5cdFx0XHRcdFx0fSBlbHNlIGlmICh0aGlzLmFza0ZvclBhc3N3b3JkKSB7XG5cdFx0XHRcdFx0XHR0aGlzLnNob3dBZGRTZWNvbmRGYWN0b3JEaWFsb2dXaXRoUGFzc3dvcmRDaGVjaygpXG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHRoaXMuc2hvd0FkZFNlY29uZEZhY3RvckRpYWxvZygpXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LFxuXHRcdFx0XHRpY29uOiBJY29ucy5BZGQsXG5cdFx0XHRcdHNpemU6IEJ1dHRvblNpemUuQ29tcGFjdCxcblx0XHRcdH0sXG5cdFx0fVxuXHRcdHJldHVybiBbXG5cdFx0XHRtKFwiLmg0Lm10LWxcIiwgbGFuZy5nZXQoXCJzZWNvbmRGYWN0b3JBdXRoZW50aWNhdGlvbl9sYWJlbFwiKSksXG5cdFx0XHRtKFRhYmxlLCBzZWNvbmRGYWN0b3JUYWJsZUF0dHJzKSxcblx0XHRcdHRoaXMuZG9tYWluQ29uZmlnUHJvdmlkZXIuZ2V0Q3VycmVudERvbWFpbkNvbmZpZygpLmZpcnN0UGFydHlEb21haW5cblx0XHRcdFx0PyBbXG5cdFx0XHRcdFx0XHRpZkFsbG93ZWRUdXRhTGlua3MobG9jYXRvci5sb2dpbnMsIEluZm9MaW5rLlNlY29uZEZhY3RvciwgKGxpbmspID0+XG5cdFx0XHRcdFx0XHRcdG0oTW9yZUluZm9MaW5rLCB7XG5cdFx0XHRcdFx0XHRcdFx0bGluazogbGluayxcblx0XHRcdFx0XHRcdFx0XHRpc1NtYWxsOiB0cnVlLFxuXHRcdFx0XHRcdFx0XHR9KSxcblx0XHRcdFx0XHRcdCksXG5cdFx0XHRcdCAgXVxuXHRcdFx0XHQ6IG51bGwsXG5cdFx0XVxuXHR9XG5cblx0YXN5bmMgX3VwZGF0ZVNlY29uZEZhY3RvcnMoKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0Y29uc3QgdXNlciA9IGF3YWl0IHRoaXMudXNlci5nZXRBc3luYygpXG5cdFx0Y29uc3QgZmFjdG9ycyA9IGF3YWl0IGxvY2F0b3IuZW50aXR5Q2xpZW50LmxvYWRBbGwoU2Vjb25kRmFjdG9yVHlwZVJlZiwgbmV2ZXJOdWxsKHVzZXIuYXV0aCkuc2Vjb25kRmFjdG9ycylcblx0XHQvLyBJZiB3ZSBoYXZlIGtleXMgcmVnaXN0ZXJlZCBvbiBtdWx0aXBsZSBkb21haW5zIChyZWFkOiB3aGl0ZWxhYmVsKSB0aGVuIHdlIGRpc3BsYXkgZG9tYWluIGZvciBlYWNoXG5cdFx0Y29uc3QgbG9naW5Eb21haW5zID0gbmV3IFNldDxzdHJpbmc+KClcblxuXHRcdGZvciAoY29uc3QgZiBvZiBmYWN0b3JzKSB7XG5cdFx0XHRjb25zdCBpc1UyRiA9IGYudHlwZSA9PT0gU2Vjb25kRmFjdG9yVHlwZS51MmYgfHwgZi50eXBlID09PSBTZWNvbmRGYWN0b3JUeXBlLndlYmF1dGhuXG5cblx0XHRcdGlmIChpc1UyRikge1xuXHRcdFx0XHRjb25zdCBsb2dpbkRvbWFpbiA9IGFwcElkVG9Mb2dpblVybChhc3NlcnROb3ROdWxsKGYudTJmKS5hcHBJZCwgdGhpcy5kb21haW5Db25maWdQcm92aWRlcilcblx0XHRcdFx0bG9naW5Eb21haW5zLmFkZChsb2dpbkRvbWFpbilcblx0XHRcdH1cblx0XHR9XG5cblx0XHR0aGlzLl8yRkFMaW5lQXR0cnMgPSBmYWN0b3JzLm1hcCgoZikgPT4ge1xuXHRcdFx0Y29uc3QgcmVtb3ZlQnV0dG9uQXR0cnM6IEljb25CdXR0b25BdHRycyA9IHtcblx0XHRcdFx0dGl0bGU6IFwicmVtb3ZlX2FjdGlvblwiLFxuXHRcdFx0XHRjbGljazogKCkgPT4ge1xuXHRcdFx0XHRcdGlmICh0aGlzLmlzRGVhY3RpdmF0ZWQpIHtcblx0XHRcdFx0XHRcdERpYWxvZy5tZXNzYWdlKFwidXNlckFjY291bnREZWFjdGl2YXRlZF9tc2dcIilcblx0XHRcdFx0XHR9IGVsc2UgaWYgKHRoaXMuYXNrRm9yUGFzc3dvcmQpIHtcblx0XHRcdFx0XHRcdHRoaXMucmVtb3ZlU2Vjb25kRmFjdG9yV2l0aFBhc3N3b3JkQ2hlY2soZilcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0dGhpcy5yZW1vdmVTZWNvbmRGYWN0b3IoZilcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGljb246IEljb25zLkNhbmNlbCxcblx0XHRcdFx0c2l6ZTogQnV0dG9uU2l6ZS5Db21wYWN0LFxuXHRcdFx0fVxuXG5cdFx0XHRjb25zdCBmYWN0b3JOYW1lID0gdGhpcy5mb3JtYXRTZWNvbmRGYWN0b3JOYW1lKGYsIGxvZ2luRG9tYWlucylcblx0XHRcdGNvbnN0IHR5cGUgPSBhc3NlcnRFbnVtVmFsdWUoU2Vjb25kRmFjdG9yVHlwZSwgZi50eXBlKVxuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0Y2VsbHM6IFtmYWN0b3JOYW1lLCBsYW5nLmdldChTZWNvbmRGYWN0b3JUeXBlVG9OYW1lVGV4dElkW3R5cGVdKV0sXG5cdFx0XHRcdGFjdGlvbkJ1dHRvbkF0dHJzOiBsb2NhdG9yLmxvZ2lucy5nZXRVc2VyQ29udHJvbGxlcigpLmlzR2xvYmFsQWRtaW4oKSA/IHJlbW92ZUJ1dHRvbkF0dHJzIDogbnVsbCxcblx0XHRcdH1cblx0XHR9KVxuXHRcdG0ucmVkcmF3KClcblx0fVxuXG5cdHByaXZhdGUgZm9ybWF0U2Vjb25kRmFjdG9yTmFtZShmYWN0b3I6IFNlY29uZEZhY3RvciwgbG9naW5Eb21haW5zOiBSZWFkb25seVNldDxzdHJpbmc+KTogc3RyaW5nIHtcblx0XHRjb25zdCBpc1UyRiA9IGZhY3Rvci50eXBlID09PSBTZWNvbmRGYWN0b3JUeXBlLnUyZiB8fCBmYWN0b3IudHlwZSA9PT0gU2Vjb25kRmFjdG9yVHlwZS53ZWJhdXRoblxuXHRcdC8vIHdlIG9ubHkgc2hvdyB0aGUgZG9tYWlucyB3aGVuIHdlIGhhdmUga2V5cyByZWdpc3RlcmVkIGZvciBkaWZmZXJlbnQgZG9tYWluc1xuXHRcdGNvbnN0IHJlcXVpcmVzRG9tYWluRGlzYW1iaWd1YXRpb24gPSBpc1UyRiAmJiBsb2dpbkRvbWFpbnMuc2l6ZSA+IDFcblxuXHRcdGlmIChyZXF1aXJlc0RvbWFpbkRpc2FtYmlndWF0aW9uKSB7XG5cdFx0XHRjb25zdCBwcmVmaXggPSBmYWN0b3IubmFtZS5sZW5ndGggPiAwID8gXCIgLSBcIiA6IFwiXCJcblx0XHRcdGNvbnN0IGxvZ2luVXJsU3RyaW5nID0gYXBwSWRUb0xvZ2luVXJsKG5ldmVyTnVsbChmYWN0b3IudTJmKS5hcHBJZCwgdGhpcy5kb21haW5Db25maWdQcm92aWRlcilcblx0XHRcdGNvbnN0IGxvZ2luRG9tYWluID0gbmV3IFVSTChsb2dpblVybFN0cmluZykuaG9zdG5hbWVcblx0XHRcdHJldHVybiBmYWN0b3IubmFtZSArIHByZWZpeCArIGxvZ2luRG9tYWluXG5cdFx0fSBlbHNlIHtcblx0XHRcdHJldHVybiBmYWN0b3IubmFtZVxuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgc2hvd0FkZFNlY29uZEZhY3RvckRpYWxvZ1dpdGhQYXNzd29yZENoZWNrKCkge1xuXHRcdGNvbnN0IGRpYWxvZyA9IHNob3dSZXF1ZXN0UGFzc3dvcmREaWFsb2coe1xuXHRcdFx0YWN0aW9uOiBhc3luYyAocGFzc3BocmFzZSkgPT4ge1xuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdGNvbnN0IHRva2VuID0gYXdhaXQgdGhpcy5sb2dpbkZhY2FkZS5nZXRWZXJpZmllclRva2VuKHBhc3NwaHJhc2UpXG5cdFx0XHRcdFx0dGhpcy5zaG93QWRkU2Vjb25kRmFjdG9yRGlhbG9nKHRva2VuKVxuXHRcdFx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRcdFx0aWYgKGUgaW5zdGFuY2VvZiBOb3RBdXRob3JpemVkRXJyb3IpIHtcblx0XHRcdFx0XHRcdHJldHVybiBsYW5nLmdldChcImludmFsaWRQYXNzd29yZF9tc2dcIilcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0dGhyb3cgZVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRkaWFsb2cuY2xvc2UoKVxuXHRcdFx0XHRyZXR1cm4gXCJcIlxuXHRcdFx0fSxcblx0XHRcdGNhbmNlbDoge1xuXHRcdFx0XHR0ZXh0SWQ6IFwiY2FuY2VsX2FjdGlvblwiLFxuXHRcdFx0XHRhY3Rpb246IG5vT3AsXG5cdFx0XHR9LFxuXHRcdH0pXG5cdH1cblxuXHRwcml2YXRlIHNob3dBZGRTZWNvbmRGYWN0b3JEaWFsb2codG9rZW4/OiBzdHJpbmcpIHtcblx0XHRTZWNvbmRGYWN0b3JFZGl0RGlhbG9nLmxvYWRBbmRTaG93KGxvY2F0b3IuZW50aXR5Q2xpZW50LCB0aGlzLnVzZXIsIHRva2VuKVxuXHR9XG5cblx0cHJpdmF0ZSByZW1vdmVTZWNvbmRGYWN0b3JXaXRoUGFzc3dvcmRDaGVjayhzZWNvbmRGYWN0b3JUb1JlbW92ZTogU2Vjb25kRmFjdG9yKSB7XG5cdFx0Y29uc3QgZGlhbG9nID0gc2hvd1JlcXVlc3RQYXNzd29yZERpYWxvZyh7XG5cdFx0XHRhY3Rpb246IGFzeW5jIChwYXNzcGhyYXNlKSA9PiB7XG5cdFx0XHRcdGxldCB0b2tlbiA9IHVuZGVmaW5lZFxuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdHRva2VuID0gYXdhaXQgdGhpcy5sb2dpbkZhY2FkZS5nZXRWZXJpZmllclRva2VuKHBhc3NwaHJhc2UpXG5cdFx0XHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdFx0XHRpZiAoZSBpbnN0YW5jZW9mIE5vdEF1dGhvcml6ZWRFcnJvcikge1xuXHRcdFx0XHRcdFx0cmV0dXJuIGxhbmcuZ2V0KFwiaW52YWxpZFBhc3N3b3JkX21zZ1wiKVxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHR0aHJvdyBlXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdHRoaXMucmVtb3ZlU2Vjb25kRmFjdG9yKHNlY29uZEZhY3RvclRvUmVtb3ZlLCB0b2tlbilcblx0XHRcdFx0ZGlhbG9nLmNsb3NlKClcblx0XHRcdFx0cmV0dXJuIFwiXCJcblx0XHRcdH0sXG5cdFx0XHRtZXNzYWdlVGV4dDogbGFuZy5nZXQoXCJjb25maXJtRGVsZXRlU2Vjb25kRmFjdG9yX21zZ1wiKSxcblx0XHRcdGNhbmNlbDoge1xuXHRcdFx0XHR0ZXh0SWQ6IFwiY2FuY2VsX2FjdGlvblwiLFxuXHRcdFx0XHRhY3Rpb246IG5vT3AsXG5cdFx0XHR9LFxuXHRcdH0pXG5cdH1cblxuXHRwcml2YXRlIHJlbW92ZVNlY29uZEZhY3RvcihzZWNvbmRGYWN0b3JUb1JlbW92ZTogU2Vjb25kRmFjdG9yLCB0b2tlbj86IHN0cmluZykge1xuXHRcdHRyeSB7XG5cdFx0XHRsZXQgb3B0aW9ucyA9IHVuZGVmaW5lZFxuXHRcdFx0aWYgKHRva2VuKSB7XG5cdFx0XHRcdG9wdGlvbnMgPSB7IGV4dHJhSGVhZGVyczogeyB0b2tlbiB9IH1cblx0XHRcdH1cblx0XHRcdHNob3dQcm9ncmVzc0RpYWxvZyhcInBsZWFzZVdhaXRfbXNnXCIsIGxvY2F0b3IuZW50aXR5Q2xpZW50LmVyYXNlKHNlY29uZEZhY3RvclRvUmVtb3ZlLCBvcHRpb25zKSlcblx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRpZiAoZSBpbnN0YW5jZW9mIE5vdEZvdW5kRXJyb3IpIHtcblx0XHRcdFx0Y29uc29sZS5sb2coXCJjb3VsZCBub3QgZGVsZXRlIHNlY29uZCBmYWN0b3IgKGFscmVhZHkgZGVsZXRlZClcIilcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRocm93IGVcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRlbnRpdHlFdmVudFJlY2VpdmVkKHVwZGF0ZTogRW50aXR5VXBkYXRlRGF0YSk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGlmIChpc1VwZGF0ZUZvclR5cGVSZWYoU2Vjb25kRmFjdG9yVHlwZVJlZiwgdXBkYXRlKSkge1xuXHRcdFx0cmV0dXJuIHRoaXMuX3VwZGF0ZVNlY29uZEZhY3RvcnMoKVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKClcblx0XHR9XG5cdH1cbn1cbiIsImltcG9ydCBtLCB7IENoaWxkcmVuIH0gZnJvbSBcIm1pdGhyaWxcIlxuaW1wb3J0IHN0cmVhbSBmcm9tIFwibWl0aHJpbC9zdHJlYW1cIlxuaW1wb3J0IHR5cGUgeyBUZXh0RmllbGRBdHRycyB9IGZyb20gXCIuLi8uLi9ndWkvYmFzZS9UZXh0RmllbGQuanNcIlxuaW1wb3J0IHsgVGV4dEZpZWxkIH0gZnJvbSBcIi4uLy4uL2d1aS9iYXNlL1RleHRGaWVsZC5qc1wiXG5pbXBvcnQgeyBJbmZvTGluaywgbGFuZyB9IGZyb20gXCIuLi8uLi9taXNjL0xhbmd1YWdlVmlld01vZGVsLmpzXCJcbmltcG9ydCB7IEljb25zIH0gZnJvbSBcIi4uLy4uL2d1aS9iYXNlL2ljb25zL0ljb25zLmpzXCJcbmltcG9ydCB7IEN1c3RvbWVyUHJvcGVydGllc1R5cGVSZWYsIFNlc3Npb24sIFNlc3Npb25UeXBlUmVmIH0gZnJvbSBcIi4uLy4uL2FwaS9lbnRpdGllcy9zeXMvVHlwZVJlZnMuanNcIlxuaW1wb3J0IHsgYXNzZXJ0Tm90TnVsbCwgTGF6eUxvYWRlZCwgbmV2ZXJOdWxsLCBvZkNsYXNzIH0gZnJvbSBcIkB0dXRhby90dXRhbm90YS11dGlsc1wiXG5pbXBvcnQgeyBmb3JtYXREYXRlVGltZUZyb21ZZXN0ZXJkYXlPbiB9IGZyb20gXCIuLi8uLi9taXNjL0Zvcm1hdHRlci5qc1wiXG5pbXBvcnQgeyBTZXNzaW9uU3RhdGUgfSBmcm9tIFwiLi4vLi4vYXBpL2NvbW1vbi9UdXRhbm90YUNvbnN0YW50cy5qc1wiXG5pbXBvcnQgeyBTZWNvbmRGYWN0b3JzRWRpdEZvcm0gfSBmcm9tIFwiLi9zZWNvbmRmYWN0b3IvU2Vjb25kRmFjdG9yc0VkaXRGb3JtLmpzXCJcblxuaW1wb3J0IHsgTm90Rm91bmRFcnJvciB9IGZyb20gXCIuLi8uLi9hcGkvY29tbW9uL2Vycm9yL1Jlc3RFcnJvci5qc1wiXG5pbXBvcnQgKiBhcyBSZWNvdmVyQ29kZURpYWxvZyBmcm9tIFwiLi9SZWNvdmVyQ29kZURpYWxvZy5qc1wiXG5pbXBvcnQgeyBhdHRhY2hEcm9wZG93biB9IGZyb20gXCIuLi8uLi9ndWkvYmFzZS9Ecm9wZG93bi5qc1wiXG5pbXBvcnQgeyBFeHBhbmRlckJ1dHRvbiwgRXhwYW5kZXJQYW5lbCB9IGZyb20gXCIuLi8uLi9ndWkvYmFzZS9FeHBhbmRlci5qc1wiXG5pbXBvcnQgeyBDb2x1bW5XaWR0aCwgVGFibGUgfSBmcm9tIFwiLi4vLi4vZ3VpL2Jhc2UvVGFibGUuanNcIlxuaW1wb3J0IHsgaWZBbGxvd2VkVHV0YUxpbmtzIH0gZnJvbSBcIi4uLy4uL2d1aS9iYXNlL0d1aVV0aWxzLmpzXCJcbmltcG9ydCB7IENyZWRlbnRpYWxFbmNyeXB0aW9uTW9kZSB9IGZyb20gXCIuLi8uLi9taXNjL2NyZWRlbnRpYWxzL0NyZWRlbnRpYWxFbmNyeXB0aW9uTW9kZS5qc1wiXG5pbXBvcnQgeyBDcmVkZW50aWFsc1Byb3ZpZGVyIH0gZnJvbSBcIi4uLy4uL21pc2MvY3JlZGVudGlhbHMvQ3JlZGVudGlhbHNQcm92aWRlci5qc1wiXG5pbXBvcnQgeyBzaG93Q3JlZGVudGlhbHNFbmNyeXB0aW9uTW9kZURpYWxvZyB9IGZyb20gXCIuLi8uLi9ndWkvZGlhbG9ncy9TZWxlY3RDcmVkZW50aWFsc0VuY3J5cHRpb25Nb2RlRGlhbG9nLmpzXCJcbmltcG9ydCB7IGFzc2VydE1haW5Pck5vZGUsIGlzRGVza3RvcCB9IGZyb20gXCIuLi8uLi9hcGkvY29tbW9uL0Vudi5qc1wiXG5pbXBvcnQgeyBsb2NhdG9yIH0gZnJvbSBcIi4uLy4uL2FwaS9tYWluL0NvbW1vbkxvY2F0b3IuanNcIlxuaW1wb3J0IHsgZWxlbWVudElkUGFydCwgZ2V0RWxlbWVudElkIH0gZnJvbSBcIi4uLy4uL2FwaS9jb21tb24vdXRpbHMvRW50aXR5VXRpbHMuanNcIlxuaW1wb3J0IHsgc2hvd0NoYW5nZU93blBhc3N3b3JkRGlhbG9nIH0gZnJvbSBcIi4vQ2hhbmdlUGFzc3dvcmREaWFsb2dzLmpzXCJcbmltcG9ydCB7IEljb25CdXR0b24sIEljb25CdXR0b25BdHRycyB9IGZyb20gXCIuLi8uLi9ndWkvYmFzZS9JY29uQnV0dG9uLmpzXCJcbmltcG9ydCB7IEJ1dHRvblNpemUgfSBmcm9tIFwiLi4vLi4vZ3VpL2Jhc2UvQnV0dG9uU2l6ZS5qc1wiXG5pbXBvcnQgeyBEcm9wRG93blNlbGVjdG9yLCBEcm9wRG93blNlbGVjdG9yQXR0cnMgfSBmcm9tIFwiLi4vLi4vZ3VpL2Jhc2UvRHJvcERvd25TZWxlY3Rvci5qc1wiXG5pbXBvcnQgeyBVc2FnZVRlc3RNb2RlbCB9IGZyb20gXCIuLi8uLi9taXNjL1VzYWdlVGVzdE1vZGVsLmpzXCJcbmltcG9ydCB7IFVzZXJTZXR0aW5nc0dyb3VwUm9vdFR5cGVSZWYgfSBmcm9tIFwiLi4vLi4vYXBpL2VudGl0aWVzL3R1dGFub3RhL1R5cGVSZWZzLmpzXCJcbmltcG9ydCB7IEVudGl0eVVwZGF0ZURhdGEsIGlzVXBkYXRlRm9yVHlwZVJlZiB9IGZyb20gXCIuLi8uLi9hcGkvY29tbW9uL3V0aWxzL0VudGl0eVVwZGF0ZVV0aWxzLmpzXCJcbmltcG9ydCB7IERpYWxvZyB9IGZyb20gXCIuLi8uLi9ndWkvYmFzZS9EaWFsb2cuanNcIlxuaW1wb3J0IHsgTW9yZUluZm9MaW5rIH0gZnJvbSBcIi4uLy4uL21pc2MvbmV3cy9Nb3JlSW5mb0xpbmsuanNcIlxuaW1wb3J0IHsgQXBwTG9ja01ldGhvZCB9IGZyb20gXCIuLi8uLi9uYXRpdmUvY29tbW9uL2dlbmVyYXRlZGlwYy9BcHBMb2NrTWV0aG9kLmpzXCJcbmltcG9ydCB7IE1vYmlsZVN5c3RlbUZhY2FkZSB9IGZyb20gXCIuLi8uLi9uYXRpdmUvY29tbW9uL2dlbmVyYXRlZGlwYy9Nb2JpbGVTeXN0ZW1GYWNhZGUuanNcIlxuaW1wb3J0IHsgVXBkYXRhYmxlU2V0dGluZ3NWaWV3ZXIgfSBmcm9tIFwiLi4vSW50ZXJmYWNlcy5qc1wiXG5cbmFzc2VydE1haW5Pck5vZGUoKVxuXG5leHBvcnQgY2xhc3MgTG9naW5TZXR0aW5nc1ZpZXdlciBpbXBsZW1lbnRzIFVwZGF0YWJsZVNldHRpbmdzVmlld2VyIHtcblx0cHJpdmF0ZSByZWFkb25seSBfbWFpbEFkZHJlc3MgPSBzdHJlYW0obmV2ZXJOdWxsKGxvY2F0b3IubG9naW5zLmdldFVzZXJDb250cm9sbGVyKCkudXNlckdyb3VwSW5mby5tYWlsQWRkcmVzcykpXG5cdHByaXZhdGUgcmVhZG9ubHkgX3N0YXJzID0gc3RyZWFtKFwiKioqXCIpXG5cdHByaXZhdGUgcmVhZG9ubHkgX2Nsb3NlZFNlc3Npb25zRXhwYW5kZWQgPSBzdHJlYW0oZmFsc2UpXG5cdHByaXZhdGUgX3Nlc3Npb25zOiBTZXNzaW9uW10gPSBbXVxuXHRwcml2YXRlIHJlYWRvbmx5IF9zZWNvbmRGYWN0b3JzRm9ybSA9IG5ldyBTZWNvbmRGYWN0b3JzRWRpdEZvcm0oXG5cdFx0bmV3IExhenlMb2FkZWQoKCkgPT4gUHJvbWlzZS5yZXNvbHZlKGxvY2F0b3IubG9naW5zLmdldFVzZXJDb250cm9sbGVyKCkudXNlcikpLFxuXHRcdGxvY2F0b3IuZG9tYWluQ29uZmlnUHJvdmlkZXIoKSxcblx0XHRsb2NhdG9yLmxvZ2luRmFjYWRlLFxuXHRcdHRydWUsXG5cdFx0ZmFsc2UsXG5cdClcblx0cHJpdmF0ZSByZWFkb25seSBfdXNhZ2VUZXN0TW9kZWw6IFVzYWdlVGVzdE1vZGVsXG5cdHByaXZhdGUgY3JlZGVudGlhbEVuY3J5cHRpb25Nb2RlOiBDcmVkZW50aWFsRW5jcnlwdGlvbk1vZGUgfCBudWxsID0gbnVsbFxuXHRwcml2YXRlIGFwcExvY2tNZXRob2Q6IEFwcExvY2tNZXRob2QgfCBudWxsID0gbnVsbFxuXG5cdGNvbnN0cnVjdG9yKHByaXZhdGUgcmVhZG9ubHkgY3JlZGVudGlhbHNQcm92aWRlcjogQ3JlZGVudGlhbHNQcm92aWRlciwgcHJpdmF0ZSByZWFkb25seSBtb2JpbGVTeXN0ZW1GYWNhZGU6IE1vYmlsZVN5c3RlbUZhY2FkZSB8IG51bGwpIHtcblx0XHR0aGlzLl91c2FnZVRlc3RNb2RlbCA9IGxvY2F0b3IudXNhZ2VUZXN0TW9kZWxcblxuXHRcdHRoaXMuX3VwZGF0ZVNlc3Npb25zKClcblx0XHR0aGlzLnVwZGF0ZUFwcExvY2tEYXRhKClcblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgdXBkYXRlQXBwTG9ja0RhdGEoKSB7XG5cdFx0aWYgKGlzRGVza3RvcCgpKSB7XG5cdFx0XHR0aGlzLmNyZWRlbnRpYWxFbmNyeXB0aW9uTW9kZSA9IGF3YWl0IHRoaXMuY3JlZGVudGlhbHNQcm92aWRlci5nZXRDcmVkZW50aWFsRW5jcnlwdGlvbk1vZGUoKVxuXHRcdH0gZWxzZSBpZiAodGhpcy5tb2JpbGVTeXN0ZW1GYWNhZGUpIHtcblx0XHRcdHRoaXMuYXBwTG9ja01ldGhvZCA9IGF3YWl0IHRoaXMubW9iaWxlU3lzdGVtRmFjYWRlLmdldEFwcExvY2tNZXRob2QoKVxuXHRcdH1cblx0XHRtLnJlZHJhdygpXG5cdH1cblxuXHR2aWV3KCk6IENoaWxkcmVuIHtcblx0XHRjb25zdCBtYWlsQWRkcmVzc0F0dHJzOiBUZXh0RmllbGRBdHRycyA9IHtcblx0XHRcdGxhYmVsOiBcIm1haWxBZGRyZXNzX2xhYmVsXCIsXG5cdFx0XHR2YWx1ZTogdGhpcy5fbWFpbEFkZHJlc3MoKSxcblx0XHRcdG9uaW5wdXQ6IHRoaXMuX21haWxBZGRyZXNzLFxuXHRcdFx0aXNSZWFkT25seTogdHJ1ZSxcblx0XHR9XG5cdFx0Y29uc3QgY2hhbmdlUGFzc3dvcmRCdXR0b25BdHRyczogSWNvbkJ1dHRvbkF0dHJzID0ge1xuXHRcdFx0dGl0bGU6IFwiY2hhbmdlUGFzc3dvcmRfbGFiZWxcIixcblx0XHRcdGNsaWNrOiAoKSA9PiBzaG93Q2hhbmdlT3duUGFzc3dvcmREaWFsb2coKSxcblx0XHRcdGljb246IEljb25zLkVkaXQsXG5cdFx0XHRzaXplOiBCdXR0b25TaXplLkNvbXBhY3QsXG5cdFx0fVxuXHRcdGNvbnN0IHBhc3N3b3JkQXR0cnM6IFRleHRGaWVsZEF0dHJzID0ge1xuXHRcdFx0bGFiZWw6IFwicGFzc3dvcmRfbGFiZWxcIixcblx0XHRcdHZhbHVlOiB0aGlzLl9zdGFycygpLFxuXHRcdFx0b25pbnB1dDogdGhpcy5fc3RhcnMsXG5cdFx0XHRpc1JlYWRPbmx5OiB0cnVlLFxuXHRcdFx0aW5qZWN0aW9uc1JpZ2h0OiAoKSA9PiBtKEljb25CdXR0b24sIGNoYW5nZVBhc3N3b3JkQnV0dG9uQXR0cnMpLFxuXHRcdH1cblx0XHRjb25zdCByZWNvdmVyeUNvZGVEcm9wZG93bkJ1dHRvbkF0dHJzOiBJY29uQnV0dG9uQXR0cnMgPSBhdHRhY2hEcm9wZG93bih7XG5cdFx0XHRtYWluQnV0dG9uQXR0cnM6IHtcblx0XHRcdFx0dGl0bGU6IFwiZWRpdF9hY3Rpb25cIixcblx0XHRcdFx0aWNvbjogSWNvbnMuRWRpdCxcblx0XHRcdFx0c2l6ZTogQnV0dG9uU2l6ZS5Db21wYWN0LFxuXHRcdFx0fSxcblx0XHRcdGNoaWxkQXR0cnM6ICgpID0+IFtcblx0XHRcdFx0bG9jYXRvci5sb2dpbnMuZ2V0VXNlckNvbnRyb2xsZXIoKS51c2VyLmF1dGg/LnJlY292ZXJDb2RlXG5cdFx0XHRcdFx0PyB7XG5cdFx0XHRcdFx0XHRcdGxhYmVsOiBcInNob3dfYWN0aW9uXCIsXG5cdFx0XHRcdFx0XHRcdGNsaWNrOiAoKSA9PiBSZWNvdmVyQ29kZURpYWxvZy5zaG93UmVjb3ZlckNvZGVEaWFsb2dBZnRlclBhc3N3b3JkVmVyaWZpY2F0aW9uKFwiZ2V0XCIpLFxuXHRcdFx0XHRcdCAgfVxuXHRcdFx0XHRcdDogbnVsbCxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGxhYmVsOiBuZXZlck51bGwobG9jYXRvci5sb2dpbnMuZ2V0VXNlckNvbnRyb2xsZXIoKS51c2VyLmF1dGgpLnJlY292ZXJDb2RlID8gXCJ1cGRhdGVfYWN0aW9uXCIgOiBcInNldFVwX2FjdGlvblwiLFxuXHRcdFx0XHRcdGNsaWNrOiAoKSA9PiBSZWNvdmVyQ29kZURpYWxvZy5zaG93UmVjb3ZlckNvZGVEaWFsb2dBZnRlclBhc3N3b3JkVmVyaWZpY2F0aW9uKFwiY3JlYXRlXCIpLFxuXHRcdFx0XHR9LFxuXHRcdFx0XSxcblx0XHRcdHNob3dEcm9wZG93bjogKCkgPT4gdHJ1ZSxcblx0XHR9KVxuXHRcdGNvbnN0IHJlY292ZXJ5Q29kZUZpZWxkQXR0cnM6IFRleHRGaWVsZEF0dHJzID0ge1xuXHRcdFx0bGFiZWw6IFwicmVjb3ZlcnlDb2RlX2xhYmVsXCIsXG5cdFx0XHRoZWxwTGFiZWw6ICgpID0+IHtcblx0XHRcdFx0cmV0dXJuIGlmQWxsb3dlZFR1dGFMaW5rcyhsb2NhdG9yLmxvZ2lucywgSW5mb0xpbmsuUmVjb3ZlckNvZGUsIChsaW5rKSA9PiBbbShNb3JlSW5mb0xpbmssIHsgbGluazogbGluayB9KV0pXG5cdFx0XHR9LFxuXHRcdFx0dmFsdWU6IHRoaXMuX3N0YXJzKCksXG5cdFx0XHRvbmlucHV0OiB0aGlzLl9zdGFycyxcblx0XHRcdGlzUmVhZE9ubHk6IHRydWUsXG5cdFx0XHRpbmplY3Rpb25zUmlnaHQ6ICgpID0+IG0oSWNvbkJ1dHRvbiwgcmVjb3ZlcnlDb2RlRHJvcGRvd25CdXR0b25BdHRycyksXG5cdFx0fVxuXHRcdGNvbnN0IHVzYWdlRGF0YU9wdEluQXR0cnM6IERyb3BEb3duU2VsZWN0b3JBdHRyczxib29sZWFuIHwgbnVsbD4gPSB7XG5cdFx0XHRsYWJlbDogXCJ1c2VyVXNhZ2VEYXRhT3B0SW5fbGFiZWxcIixcblx0XHRcdGl0ZW1zOiBbXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRuYW1lOiBsYW5nLmdldChcImFjdGl2YXRlZF9sYWJlbFwiKSxcblx0XHRcdFx0XHR2YWx1ZTogdHJ1ZSxcblx0XHRcdFx0fSxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdG5hbWU6IGxhbmcuZ2V0KFwiZGVhY3RpdmF0ZWRfbGFiZWxcIiksXG5cdFx0XHRcdFx0dmFsdWU6IGZhbHNlLFxuXHRcdFx0XHR9LFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0bmFtZTogbGFuZy5nZXQoXCJ1bmRlY2lkZWRfbGFiZWxcIiksXG5cdFx0XHRcdFx0dmFsdWU6IG51bGwsXG5cdFx0XHRcdFx0c2VsZWN0YWJsZTogZmFsc2UsXG5cdFx0XHRcdH0sXG5cdFx0XHRdLFxuXHRcdFx0c2VsZWN0ZWRWYWx1ZTogbG9jYXRvci5sb2dpbnMuZ2V0VXNlckNvbnRyb2xsZXIoKS51c2VyU2V0dGluZ3NHcm91cFJvb3QudXNhZ2VEYXRhT3B0ZWRJbixcblx0XHRcdHNlbGVjdGlvbkNoYW5nZWRIYW5kbGVyOiAodikgPT4ge1xuXHRcdFx0XHR0aGlzLl91c2FnZVRlc3RNb2RlbC5zZXRPcHRJbkRlY2lzaW9uKGFzc2VydE5vdE51bGwodikpXG5cdFx0XHR9LFxuXHRcdFx0aGVscExhYmVsOiAoKSA9PiB7XG5cdFx0XHRcdHJldHVybiBpZkFsbG93ZWRUdXRhTGlua3MobG9jYXRvci5sb2dpbnMsIEluZm9MaW5rLlVzYWdlLCAobGluaykgPT4gW1xuXHRcdFx0XHRcdG0oXCJzcGFuXCIsIGxhbmcuZ2V0KFwidXNlclVzYWdlRGF0YU9wdEluSW5mb19tc2dcIikgKyBcIiBcIiksXG5cdFx0XHRcdFx0bShNb3JlSW5mb0xpbmssIHsgbGluazogbGluayB9KSxcblx0XHRcdFx0XSlcblx0XHRcdH0sXG5cdFx0XHRkcm9wZG93bldpZHRoOiAyNTAsXG5cdFx0fVxuXG5cdFx0Ly8gTWlnaHQgYmUgbm90IHRoZXJlIHdoZW4gd2UgYXJlIGxvZ2dpbmcgb3V0XG5cdFx0aWYgKGxvY2F0b3IubG9naW5zLmlzVXNlckxvZ2dlZEluKCkpIHtcblx0XHRcdGNvbnN0IHVzZXIgPSBsb2NhdG9yLmxvZ2lucy5nZXRVc2VyQ29udHJvbGxlcigpXG5cdFx0XHRyZXR1cm4gbShcIlwiLCBbXG5cdFx0XHRcdG0oXCIjdXNlci1zZXR0aW5ncy5maWxsLWFic29sdXRlLnNjcm9sbC5wbHItbC5wYi14bFwiLCBbXG5cdFx0XHRcdFx0bShcIi5oNC5tdC1sXCIsIGxhbmcuZ2V0KFwibG9naW5DcmVkZW50aWFsc19sYWJlbFwiKSksXG5cdFx0XHRcdFx0bShUZXh0RmllbGQsIG1haWxBZGRyZXNzQXR0cnMpLFxuXHRcdFx0XHRcdG0oVGV4dEZpZWxkLCBwYXNzd29yZEF0dHJzKSxcblx0XHRcdFx0XHR1c2VyLmlzR2xvYmFsQWRtaW4oKSA/IG0oVGV4dEZpZWxkLCByZWNvdmVyeUNvZGVGaWVsZEF0dHJzKSA6IG51bGwsXG5cdFx0XHRcdFx0dGhpcy5yZW5kZXJBcHBMb2NrRmllbGQoKSxcblx0XHRcdFx0XHRtKHRoaXMuX3NlY29uZEZhY3RvcnNGb3JtKSxcblx0XHRcdFx0XHRtKFwiLmg0Lm10LWxcIiwgbGFuZy5nZXQoXCJhY3RpdmVTZXNzaW9uc19sYWJlbFwiKSksXG5cdFx0XHRcdFx0dGhpcy5fcmVuZGVyQWN0aXZlU2Vzc2lvbnMoKSxcblx0XHRcdFx0XHRtKFwiLnNtYWxsXCIsIGxhbmcuZ2V0KFwic2Vzc2lvbnNJbmZvX21zZ1wiKSksXG5cdFx0XHRcdFx0bShcIi5mbGV4LXNwYWNlLWJldHdlZW4uaXRlbXMtY2VudGVyLm10LWwubWItc1wiLCBbXG5cdFx0XHRcdFx0XHRtKFwiLmg0XCIsIGxhbmcuZ2V0KFwiY2xvc2VkU2Vzc2lvbnNfbGFiZWxcIikpLFxuXHRcdFx0XHRcdFx0bShFeHBhbmRlckJ1dHRvbiwge1xuXHRcdFx0XHRcdFx0XHRsYWJlbDogXCJzaG93X2FjdGlvblwiLFxuXHRcdFx0XHRcdFx0XHRleHBhbmRlZDogdGhpcy5fY2xvc2VkU2Vzc2lvbnNFeHBhbmRlZCgpLFxuXHRcdFx0XHRcdFx0XHRvbkV4cGFuZGVkQ2hhbmdlOiB0aGlzLl9jbG9zZWRTZXNzaW9uc0V4cGFuZGVkLFxuXHRcdFx0XHRcdFx0XHRzaG93V2FybmluZzogZmFsc2UsXG5cdFx0XHRcdFx0XHR9KSxcblx0XHRcdFx0XHRdKSxcblx0XHRcdFx0XHRtKFxuXHRcdFx0XHRcdFx0RXhwYW5kZXJQYW5lbCxcblx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0ZXhwYW5kZWQ6IHRoaXMuX2Nsb3NlZFNlc3Npb25zRXhwYW5kZWQoKSxcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHR0aGlzLl9yZW5kZXJDbG9zZWRTZXNzaW9ucygpLFxuXHRcdFx0XHRcdCksXG5cdFx0XHRcdFx0bShcIi5zbWFsbFwiLCBsYW5nLmdldChcInNlc3Npb25zV2lsbEJlRGVsZXRlZF9tc2dcIikpLFxuXHRcdFx0XHRcdG0oXCIuc21hbGxcIiwgbGFuZy5nZXQoXCJzZXNzaW9uc0luZm9fbXNnXCIpKSxcblx0XHRcdFx0XHR0aGlzLl91c2FnZVRlc3RNb2RlbC5pc0N1c3RvbWVyT3B0ZWRPdXQoKVxuXHRcdFx0XHRcdFx0PyBudWxsXG5cdFx0XHRcdFx0XHQ6IG0oXCJcIiwgW20oXCIuaDQubXQtbFwiLCBsYW5nLmdldChcInVzYWdlRGF0YV9sYWJlbFwiKSksIG0oRHJvcERvd25TZWxlY3RvciwgdXNhZ2VEYXRhT3B0SW5BdHRycyldKSxcblx0XHRcdFx0XSksXG5cdFx0XHRdKVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZXR1cm4gbnVsbFxuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgcmVuZGVyQXBwTG9ja0ZpZWxkKCk6IENoaWxkcmVuIHtcblx0XHRjb25zdCBtb2JpbGVTeXN0ZW1GYWNhZGUgPSB0aGlzLm1vYmlsZVN5c3RlbUZhY2FkZVxuXG5cdFx0Ly8gT24gbW9iaWxlIHdlIGRpc3BsYXkgYXBwIGxvY2sgZGlhbG9nLCBvbiBkZXNrdG9wIGNyZWRlbnRpYWwgZW5jcnlwdGlvbiBkaWFsb2cuIFRoZXkgYXJlIHNpbWlsYXIgYnV0IGRpZmZlcmVudC5cblx0XHRpZiAobW9iaWxlU3lzdGVtRmFjYWRlKSB7XG5cdFx0XHRjb25zdCBvbkVkaXQgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRcdGNvbnN0IHsgc2hvd0FwcExvY2tNZXRob2REaWFsb2cgfSA9IGF3YWl0IGltcG9ydChcIi4uLy4uL25hdGl2ZS9tYWluL1NlbGVjdEFwcExvY2tNZXRob2REaWFsb2cuanNcIilcblx0XHRcdFx0YXdhaXQgc2hvd0FwcExvY2tNZXRob2REaWFsb2cobW9iaWxlU3lzdGVtRmFjYWRlKVxuXHRcdFx0XHRhd2FpdCB0aGlzLnVwZGF0ZUFwcExvY2tEYXRhKClcblx0XHRcdH1cblx0XHRcdHJldHVybiBtKFRleHRGaWVsZCwge1xuXHRcdFx0XHRsYWJlbDogXCJjcmVkZW50aWFsc0VuY3J5cHRpb25Nb2RlX2xhYmVsXCIsXG5cdFx0XHRcdHZhbHVlOiB0aGlzLmFwcExvY2tNZXRob2ROYW1lKHRoaXMuYXBwTG9ja01ldGhvZCA/PyBBcHBMb2NrTWV0aG9kLk5vbmUpLFxuXHRcdFx0XHRpc1JlYWRPbmx5OiB0cnVlLFxuXHRcdFx0XHRpbmplY3Rpb25zUmlnaHQ6ICgpID0+XG5cdFx0XHRcdFx0bShJY29uQnV0dG9uLCB7XG5cdFx0XHRcdFx0XHR0aXRsZTogXCJlZGl0X2FjdGlvblwiLFxuXHRcdFx0XHRcdFx0aWNvbjogSWNvbnMuRWRpdCxcblx0XHRcdFx0XHRcdGNsaWNrOiAoKSA9PiBvbkVkaXQoKSxcblx0XHRcdFx0XHR9KSxcblx0XHRcdH0pXG5cdFx0fSBlbHNlIGlmIChpc0Rlc2t0b3AoKSkge1xuXHRcdFx0Y29uc3QgdXNlZE1vZGUgPSB0aGlzLmNyZWRlbnRpYWxFbmNyeXB0aW9uTW9kZSA/PyBDcmVkZW50aWFsRW5jcnlwdGlvbk1vZGUuREVWSUNFX0xPQ0tcblxuXHRcdFx0cmV0dXJuIG0oVGV4dEZpZWxkLCB7XG5cdFx0XHRcdGxhYmVsOiBcImNyZWRlbnRpYWxzRW5jcnlwdGlvbk1vZGVfbGFiZWxcIixcblx0XHRcdFx0dmFsdWU6IHRoaXMuY3JlZGVudGlhbHNFbmNyeXB0aW9uTW9kZU5hbWUodXNlZE1vZGUpLFxuXHRcdFx0XHRpc1JlYWRPbmx5OiB0cnVlLFxuXHRcdFx0XHRpbmplY3Rpb25zUmlnaHQ6ICgpID0+XG5cdFx0XHRcdFx0bShJY29uQnV0dG9uLCB7XG5cdFx0XHRcdFx0XHR0aXRsZTogXCJlZGl0X2FjdGlvblwiLFxuXHRcdFx0XHRcdFx0aWNvbjogSWNvbnMuRWRpdCxcblx0XHRcdFx0XHRcdGNsaWNrOiAoKSA9PiBzaG93Q3JlZGVudGlhbHNFbmNyeXB0aW9uTW9kZURpYWxvZyh0aGlzLmNyZWRlbnRpYWxzUHJvdmlkZXIpLnRoZW4oKCkgPT4gdGhpcy51cGRhdGVBcHBMb2NrRGF0YSgpKSxcblx0XHRcdFx0XHR9KSxcblx0XHRcdH0pXG5cdFx0fVxuXHR9XG5cblx0YXN5bmMgX3VwZGF0ZVNlc3Npb25zKCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGNvbnN0IHNlc3Npb25zID0gYXdhaXQgbG9jYXRvci5lbnRpdHlDbGllbnQubG9hZEFsbChTZXNzaW9uVHlwZVJlZiwgbmV2ZXJOdWxsKGxvY2F0b3IubG9naW5zLmdldFVzZXJDb250cm9sbGVyKCkudXNlci5hdXRoKS5zZXNzaW9ucylcblx0XHRzZXNzaW9ucy5zb3J0KChzMSwgczIpID0+IHMyLmxhc3RBY2Nlc3NUaW1lLmdldFRpbWUoKSAtIHMxLmxhc3RBY2Nlc3NUaW1lLmdldFRpbWUoKSlcblx0XHR0aGlzLl9zZXNzaW9ucyA9IHNlc3Npb25zXG5cdFx0bS5yZWRyYXcoKVxuXHR9XG5cblx0cHJpdmF0ZSBfcmVuZGVyQWN0aXZlU2Vzc2lvbnMoKTogQ2hpbGRyZW4ge1xuXHRcdHJldHVybiBtKFRhYmxlLCB7XG5cdFx0XHRjb2x1bW5IZWFkaW5nOiBbXCJjbGllbnRfbGFiZWxcIl0sXG5cdFx0XHRjb2x1bW5XaWR0aHM6IFtDb2x1bW5XaWR0aC5MYXJnZXN0XSxcblx0XHRcdHNob3dBY3Rpb25CdXR0b25Db2x1bW46IHRydWUsXG5cdFx0XHRsaW5lczogdGhpcy5fc2Vzc2lvbnNcblx0XHRcdFx0LmZpbHRlcigoc2Vzc2lvbikgPT4gc2Vzc2lvbi5zdGF0ZSA9PT0gU2Vzc2lvblN0YXRlLlNFU1NJT05fU1RBVEVfQUNUSVZFKVxuXHRcdFx0XHQubWFwKChzZXNzaW9uKSA9PiB7XG5cdFx0XHRcdFx0Y29uc3QgdGhpc1Nlc3Npb24gPSBlbGVtZW50SWRQYXJ0KGxvY2F0b3IubG9naW5zLmdldFVzZXJDb250cm9sbGVyKCkuc2Vzc2lvbklkKSA9PT0gZ2V0RWxlbWVudElkKHNlc3Npb24pXG5cblx0XHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdFx0Y2VsbHM6ICgpID0+IFtcblx0XHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRcdG1haW46IHRoaXNTZXNzaW9uID8gbGFuZy5nZXQoXCJ0aGlzQ2xpZW50X2xhYmVsXCIpIDogc2Vzc2lvbi5jbGllbnRJZGVudGlmaWVyLFxuXHRcdFx0XHRcdFx0XHRcdGluZm86IFtcblx0XHRcdFx0XHRcdFx0XHRcdGxhbmcuZ2V0KFwibGFzdEFjY2Vzc1dpdGhUaW1lX2xhYmVsXCIsIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XCJ7dGltZX1cIjogZm9ybWF0RGF0ZVRpbWVGcm9tWWVzdGVyZGF5T24oc2Vzc2lvbi5sYXN0QWNjZXNzVGltZSksXG5cdFx0XHRcdFx0XHRcdFx0XHR9KSxcblx0XHRcdFx0XHRcdFx0XHRcdHNlc3Npb24ubG9naW5JcEFkZHJlc3MgPyBzZXNzaW9uLmxvZ2luSXBBZGRyZXNzIDogXCJcIixcblx0XHRcdFx0XHRcdFx0XHRdLFxuXHRcdFx0XHRcdFx0XHRcdGNsaWNrOiAoKSA9PiB0aGlzLnNob3dBY3RpdmVTZXNzaW9uSW5mb0RpYWxvZyhzZXNzaW9uLCB0aGlzU2Vzc2lvbiksXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRdLFxuXHRcdFx0XHRcdFx0YWN0aW9uQnV0dG9uQXR0cnM6IHRoaXNTZXNzaW9uXG5cdFx0XHRcdFx0XHRcdD8gbnVsbFxuXHRcdFx0XHRcdFx0XHQ6ICh7XG5cdFx0XHRcdFx0XHRcdFx0XHR0aXRsZTogXCJjbG9zZVNlc3Npb25fYWN0aW9uXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRjbGljazogKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR0aGlzLl9jbG9zZVNlc3Npb24oc2Vzc2lvbilcblx0XHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0XHRpY29uOiBJY29ucy5DYW5jZWwsXG5cdFx0XHRcdFx0XHRcdFx0XHRzaXplOiBCdXR0b25TaXplLkNvbXBhY3QsXG5cdFx0XHRcdFx0XHRcdCAgfSBhcyBjb25zdCksXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KSxcblx0XHR9KVxuXHR9XG5cblx0cHJpdmF0ZSBzaG93QWN0aXZlU2Vzc2lvbkluZm9EaWFsb2coc2Vzc2lvbjogU2Vzc2lvbiwgaXNUaGlzU2Vzc2lvbjogYm9vbGVhbikge1xuXHRcdGNvbnN0IGFjdGlvbkRpYWxvZ1Byb3BlcnRpZXMgPSB7XG5cdFx0XHR0aXRsZTogXCJkZXRhaWxzX2xhYmVsXCIsXG5cdFx0XHRjaGlsZDoge1xuXHRcdFx0XHR2aWV3OiAoKSA9PiB7XG5cdFx0XHRcdFx0cmV0dXJuIFtcblx0XHRcdFx0XHRcdG0oVGV4dEZpZWxkLCB7XG5cdFx0XHRcdFx0XHRcdGxhYmVsOiBcImNsaWVudF9sYWJlbFwiLFxuXHRcdFx0XHRcdFx0XHR2YWx1ZTogaXNUaGlzU2Vzc2lvbiA/IGxhbmcuZ2V0KFwidGhpc0NsaWVudF9sYWJlbFwiKSA6IHNlc3Npb24uY2xpZW50SWRlbnRpZmllcixcblx0XHRcdFx0XHRcdFx0aXNSZWFkT25seTogdHJ1ZSxcblx0XHRcdFx0XHRcdH0pLFxuXHRcdFx0XHRcdFx0bShUZXh0RmllbGQsIHtcblx0XHRcdFx0XHRcdFx0bGFiZWw6IFwibGFzdEFjY2Vzc19sYWJlbFwiLFxuXHRcdFx0XHRcdFx0XHR2YWx1ZTogYCR7Zm9ybWF0RGF0ZVRpbWVGcm9tWWVzdGVyZGF5T24oc2Vzc2lvbi5sYXN0QWNjZXNzVGltZSl9YCxcblx0XHRcdFx0XHRcdFx0aXNSZWFkT25seTogdHJ1ZSxcblx0XHRcdFx0XHRcdH0pLFxuXHRcdFx0XHRcdFx0bShUZXh0RmllbGQsIHtcblx0XHRcdFx0XHRcdFx0bGFiZWw6IFwiSXBBZGRyZXNzX2xhYmVsXCIsXG5cdFx0XHRcdFx0XHRcdHZhbHVlOiBzZXNzaW9uLmxvZ2luSXBBZGRyZXNzID8gc2Vzc2lvbi5sb2dpbklwQWRkcmVzcyA6IFwiXCIsXG5cdFx0XHRcdFx0XHRcdGlzUmVhZE9ubHk6IHRydWUsXG5cdFx0XHRcdFx0XHR9KSxcblx0XHRcdFx0XHRdXG5cdFx0XHRcdH0sXG5cdFx0XHR9LFxuXHRcdFx0b2tBY3Rpb246IG51bGwsXG5cdFx0XHRhbGxvd0NhbmNlbDogdHJ1ZSxcblx0XHRcdGFsbG93T2tXaXRoUmV0dXJuOiBmYWxzZSxcblx0XHRcdGNhbmNlbEFjdGlvblRleHRJZDogXCJjbG9zZV9hbHRcIixcblx0XHR9IGFzIGNvbnN0XG5cdFx0RGlhbG9nLnNob3dBY3Rpb25EaWFsb2coYWN0aW9uRGlhbG9nUHJvcGVydGllcylcblx0fVxuXG5cdHByaXZhdGUgX2Nsb3NlU2Vzc2lvbihzZXNzaW9uOiBTZXNzaW9uKSB7XG5cdFx0bG9jYXRvci5lbnRpdHlDbGllbnQuZXJhc2Uoc2Vzc2lvbikuY2F0Y2goXG5cdFx0XHRvZkNsYXNzKE5vdEZvdW5kRXJyb3IsICgpID0+IHtcblx0XHRcdFx0Y29uc29sZS5sb2coYHNlc3Npb24gJHtKU09OLnN0cmluZ2lmeShzZXNzaW9uLl9pZCl9IGFscmVhZHkgZGVsZXRlZGApXG5cdFx0XHR9KSxcblx0XHQpXG5cdH1cblxuXHRhc3luYyBlbnRpdHlFdmVudHNSZWNlaXZlZCh1cGRhdGVzOiBSZWFkb25seUFycmF5PEVudGl0eVVwZGF0ZURhdGE+KTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0Zm9yIChjb25zdCB1cGRhdGUgb2YgdXBkYXRlcykge1xuXHRcdFx0aWYgKGlzVXBkYXRlRm9yVHlwZVJlZihTZXNzaW9uVHlwZVJlZiwgdXBkYXRlKSkge1xuXHRcdFx0XHRhd2FpdCB0aGlzLl91cGRhdGVTZXNzaW9ucygpXG5cdFx0XHR9IGVsc2UgaWYgKGlzVXBkYXRlRm9yVHlwZVJlZihDdXN0b21lclByb3BlcnRpZXNUeXBlUmVmLCB1cGRhdGUpIHx8IGlzVXBkYXRlRm9yVHlwZVJlZihVc2VyU2V0dGluZ3NHcm91cFJvb3RUeXBlUmVmLCB1cGRhdGUpKSB7XG5cdFx0XHRcdG0ucmVkcmF3KClcblx0XHRcdH1cblxuXHRcdFx0YXdhaXQgdGhpcy5fc2Vjb25kRmFjdG9yc0Zvcm0uZW50aXR5RXZlbnRSZWNlaXZlZCh1cGRhdGUpXG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBjcmVkZW50aWFsc0VuY3J5cHRpb25Nb2RlTmFtZShjcmVkZW50aWFsc0VuY3J5cHRpb25Nb2RlOiBDcmVkZW50aWFsRW5jcnlwdGlvbk1vZGUpOiBzdHJpbmcge1xuXHRcdGNvbnN0IG1hcHBpbmcgPSB7XG5cdFx0XHRbQ3JlZGVudGlhbEVuY3J5cHRpb25Nb2RlLkRFVklDRV9MT0NLXTogXCJjcmVkZW50aWFsc0VuY3J5cHRpb25Nb2RlRGV2aWNlTG9ja19sYWJlbFwiLFxuXHRcdFx0W0NyZWRlbnRpYWxFbmNyeXB0aW9uTW9kZS5TWVNURU1fUEFTU1dPUkRdOiBcImNyZWRlbnRpYWxzRW5jcnlwdGlvbk1vZGVEZXZpY2VDcmVkZW50aWFsc19sYWJlbFwiLFxuXHRcdFx0W0NyZWRlbnRpYWxFbmNyeXB0aW9uTW9kZS5CSU9NRVRSSUNTXTogXCJjcmVkZW50aWFsc0VuY3J5cHRpb25Nb2RlQmlvbWV0cmljc19sYWJlbFwiLFxuXHRcdFx0W0NyZWRlbnRpYWxFbmNyeXB0aW9uTW9kZS5BUFBfUEFTU1dPUkRdOiBcImNyZWRlbnRpYWxzRW5jcnlwdGlvbk1vZGVBcHBQYXNzd29yZF9sYWJlbFwiLFxuXHRcdH0gYXMgY29uc3Rcblx0XHRyZXR1cm4gbGFuZy5nZXQobWFwcGluZ1tjcmVkZW50aWFsc0VuY3J5cHRpb25Nb2RlXSlcblx0fVxuXG5cdHByaXZhdGUgYXBwTG9ja01ldGhvZE5hbWUoYXBwTG9ja01ldGhvZDogQXBwTG9ja01ldGhvZCk6IHN0cmluZyB7XG5cdFx0Y29uc3QgbWFwcGluZyA9IHtcblx0XHRcdFtBcHBMb2NrTWV0aG9kLk5vbmVdOiBcImNyZWRlbnRpYWxzRW5jcnlwdGlvbk1vZGVEZXZpY2VMb2NrX2xhYmVsXCIsXG5cdFx0XHRbQXBwTG9ja01ldGhvZC5TeXN0ZW1QYXNzT3JCaW9tZXRyaWNzXTogXCJjcmVkZW50aWFsc0VuY3J5cHRpb25Nb2RlRGV2aWNlQ3JlZGVudGlhbHNfbGFiZWxcIixcblx0XHRcdFtBcHBMb2NrTWV0aG9kLkJpb21ldHJpY3NdOiBcImNyZWRlbnRpYWxzRW5jcnlwdGlvbk1vZGVCaW9tZXRyaWNzX2xhYmVsXCIsXG5cdFx0fSBhcyBjb25zdFxuXHRcdHJldHVybiBsYW5nLmdldChtYXBwaW5nW2FwcExvY2tNZXRob2RdKVxuXHR9XG5cblx0cHJpdmF0ZSBfcmVuZGVyQ2xvc2VkU2Vzc2lvbnMoKTogQ2hpbGRyZW4ge1xuXHRcdGNvbnN0IGxpbmVzID0gdGhpcy5fc2Vzc2lvbnNcblx0XHRcdC5maWx0ZXIoKHNlc3Npb24pID0+IHNlc3Npb24uc3RhdGUgIT09IFNlc3Npb25TdGF0ZS5TRVNTSU9OX1NUQVRFX0FDVElWRSlcblx0XHRcdC5tYXAoKHNlc3Npb24pID0+IHtcblx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRjZWxsczogW1xuXHRcdFx0XHRcdFx0c2Vzc2lvbi5jbGllbnRJZGVudGlmaWVyLFxuXHRcdFx0XHRcdFx0Zm9ybWF0RGF0ZVRpbWVGcm9tWWVzdGVyZGF5T24oc2Vzc2lvbi5sYXN0QWNjZXNzVGltZSksXG5cdFx0XHRcdFx0XHRzZXNzaW9uLmxvZ2luSXBBZGRyZXNzID8gc2Vzc2lvbi5sb2dpbklwQWRkcmVzcyA6IFwiXCIsXG5cdFx0XHRcdFx0XSxcblx0XHRcdFx0fVxuXHRcdFx0fSlcblx0XHRyZXR1cm4gbShUYWJsZSwge1xuXHRcdFx0Y29sdW1uSGVhZGluZzogW1wiY2xpZW50X2xhYmVsXCIsIFwibGFzdEFjY2Vzc19sYWJlbFwiLCBcIklwQWRkcmVzc19sYWJlbFwiXSxcblx0XHRcdGNvbHVtbldpZHRoczogW0NvbHVtbldpZHRoLlNtYWxsLCBDb2x1bW5XaWR0aC5MYXJnZXN0LCBDb2x1bW5XaWR0aC5TbWFsbF0sXG5cdFx0XHRzaG93QWN0aW9uQnV0dG9uQ29sdW1uOiB0cnVlLFxuXHRcdFx0bGluZXM6IGxpbmVzLFxuXHRcdH0pXG5cdH1cbn1cbiIsImltcG9ydCB0eXBlIHsgQ3VzdG9tZXIgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2FwaS9lbnRpdGllcy9zeXMvVHlwZVJlZnMuanNcIlxuaW1wb3J0IHsgR3JvdXBJbmZvVHlwZVJlZiwgR3JvdXBUeXBlUmVmLCBVc2VyVHlwZVJlZiB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL2VudGl0aWVzL3N5cy9UeXBlUmVmcy5qc1wiXG5pbXBvcnQgeyBuZXZlck51bGwsIHByb21pc2VNYXAgfSBmcm9tIFwiQHR1dGFvL3R1dGFub3RhLXV0aWxzXCJcbmltcG9ydCB7IEdyb3VwVHlwZSB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL2NvbW1vbi9UdXRhbm90YUNvbnN0YW50c1wiXG5pbXBvcnQgeyBnZXRHcm91cEluZm9EaXNwbGF5TmFtZSwgZ2V0VXNlckdyb3VwTWVtYmVyc2hpcHMgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2FwaS9jb21tb24vdXRpbHMvR3JvdXBVdGlsc1wiXG5pbXBvcnQgeyBsb2NhdG9yIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9hcGkvbWFpbi9Db21tb25Mb2NhdG9yXCJcblxuLyoqXG4gKiBBcyB1c2VycyBwZXJzb25hbCBtYWlsIGdyb3VwIGluZm9zIGRvIG5vdCBjb250YWluIG5hbWUgYW5kIG1haWwgYWRkcmVzcyB3ZSB1c2UgdGhpcyB3cmFwcGVyIHRvIHN0b3JlIGdyb3VwIGlkcyB0b2dldGhlciB3aXRoIG5hbWUgYW5kIG1haWwgYWRkcmVzcy5cbiAqL1xuZXhwb3J0IGNsYXNzIEdyb3VwRGF0YSB7XG5cdGdyb3VwSWQ6IElkXG5cdGRpc3BsYXlOYW1lOiBzdHJpbmdcblxuXHRjb25zdHJ1Y3Rvcihncm91cElkOiBJZCwgZGlzcGxheU5hbWU6IHN0cmluZykge1xuXHRcdHRoaXMuZ3JvdXBJZCA9IGdyb3VwSWRcblx0XHR0aGlzLmRpc3BsYXlOYW1lID0gZGlzcGxheU5hbWVcblx0fVxufVxuXG5leHBvcnQgZnVuY3Rpb24gbG9hZEdyb3VwRGlzcGxheU5hbWUoZ3JvdXBJZDogSWQpOiBQcm9taXNlPElkPiB7XG5cdHJldHVybiBsb2NhdG9yLmVudGl0eUNsaWVudFxuXHRcdC5sb2FkKEdyb3VwVHlwZVJlZiwgZ3JvdXBJZClcblx0XHQudGhlbigoZ3JvdXApID0+IHtcblx0XHRcdGlmIChncm91cC51c2VyICYmIGdyb3VwLnR5cGUgIT09IEdyb3VwVHlwZS5Vc2VyKSB7XG5cdFx0XHRcdC8vIHRoZSB1c2VycyBwZXJzb25hbCBtYWlsIGdyb3VwIGRvZXMgbm90IGhhdmUgYSBuYW1lLCBzbyBzaG93IHRoZSB1c2VyIG5hbWVcblx0XHRcdFx0cmV0dXJuIGxvY2F0b3IuZW50aXR5Q2xpZW50LmxvYWQoVXNlclR5cGVSZWYsIGdyb3VwLnVzZXIpLnRoZW4oKHVzZXIpID0+IHtcblx0XHRcdFx0XHRyZXR1cm4gbG9jYXRvci5lbnRpdHlDbGllbnQubG9hZChHcm91cEluZm9UeXBlUmVmLCB1c2VyLnVzZXJHcm91cC5ncm91cEluZm8pXG5cdFx0XHRcdH0pXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRyZXR1cm4gbG9jYXRvci5lbnRpdHlDbGllbnQubG9hZChHcm91cEluZm9UeXBlUmVmLCBncm91cC5ncm91cEluZm8pXG5cdFx0XHR9XG5cdFx0fSlcblx0XHQudGhlbigoZ3JvdXBJbmZvKSA9PiB7XG5cdFx0XHRyZXR1cm4gZ2V0R3JvdXBJbmZvRGlzcGxheU5hbWUoZ3JvdXBJbmZvKVxuXHRcdH0pXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsb2FkRW5hYmxlZFRlYW1NYWlsR3JvdXBzKGN1c3RvbWVyOiBDdXN0b21lcik6IFByb21pc2U8R3JvdXBEYXRhW10+IHtcblx0Y29uc3QgaW5mb3MgPSBhd2FpdCBsb2NhdG9yLmVudGl0eUNsaWVudC5sb2FkQWxsKEdyb3VwSW5mb1R5cGVSZWYsIGN1c3RvbWVyLnRlYW1Hcm91cHMpXG5cdHJldHVybiBpbmZvc1xuXHRcdC5maWx0ZXIoKHRlYW1Hcm91cEluZm8pID0+IHtcblx0XHRcdGlmICh0ZWFtR3JvdXBJbmZvLmRlbGV0ZWQpIHtcblx0XHRcdFx0cmV0dXJuIGZhbHNlXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRyZXR1cm4gbG9jYXRvci5lbnRpdHlDbGllbnQubG9hZChHcm91cFR5cGVSZWYsIHRlYW1Hcm91cEluZm8uZ3JvdXApLnRoZW4oKHRlYW1Hcm91cCkgPT4gdGVhbUdyb3VwLnR5cGUgPT09IEdyb3VwVHlwZS5NYWlsKVxuXHRcdFx0fVxuXHRcdH0pXG5cdFx0Lm1hcCgobWFpbFRlYW1Hcm91cEluZm8pID0+IG5ldyBHcm91cERhdGEobWFpbFRlYW1Hcm91cEluZm8uZ3JvdXAsIGdldEdyb3VwSW5mb0Rpc3BsYXlOYW1lKG1haWxUZWFtR3JvdXBJbmZvKSkpXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsb2FkRW5hYmxlZFVzZXJNYWlsR3JvdXBzKGN1c3RvbWVyOiBDdXN0b21lcik6IFByb21pc2U8R3JvdXBEYXRhW10+IHtcblx0Y29uc3QgZ3JvdXBJbmZvcyA9IGF3YWl0IGxvY2F0b3IuZW50aXR5Q2xpZW50LmxvYWRBbGwoR3JvdXBJbmZvVHlwZVJlZiwgY3VzdG9tZXIudXNlckdyb3Vwcylcblx0cmV0dXJuIHByb21pc2VNYXAoXG5cdFx0Z3JvdXBJbmZvcy5maWx0ZXIoKGcpID0+ICFnLmRlbGV0ZWQpLFxuXHRcdGFzeW5jICh1c2VyR3JvdXBJbmZvKSA9PiB7XG5cdFx0XHRjb25zdCB1c2VyR3JvdXAgPSBhd2FpdCBsb2NhdG9yLmVudGl0eUNsaWVudC5sb2FkKEdyb3VwVHlwZVJlZiwgdXNlckdyb3VwSW5mby5ncm91cClcblx0XHRcdGNvbnN0IHVzZXIgPSBhd2FpdCBsb2NhdG9yLmVudGl0eUNsaWVudC5sb2FkKFVzZXJUeXBlUmVmLCBuZXZlck51bGwodXNlckdyb3VwLnVzZXIpKVxuXHRcdFx0cmV0dXJuIG5ldyBHcm91cERhdGEoZ2V0VXNlckdyb3VwTWVtYmVyc2hpcHModXNlciwgR3JvdXBUeXBlLk1haWwpWzBdLmdyb3VwLCBnZXRHcm91cEluZm9EaXNwbGF5TmFtZSh1c2VyR3JvdXBJbmZvKSlcblx0XHR9LFxuXHQpXG59XG4iLCJpbXBvcnQgeyBjcmVhdGVDdXN0b21Eb21haW5DaGVja0dldEluIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9hcGkvZW50aXRpZXMvc3lzL1R5cGVSZWZzLmpzXCJcbmltcG9ydCB0eXBlIHsgQ3VzdG9tRG9tYWluQ2hlY2tHZXRPdXQgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2FwaS9lbnRpdGllcy9zeXMvVHlwZVJlZnMuanNcIlxuaW1wb3J0IHsgQ3VzdG9tRG9tYWluQ2hlY2tSZXN1bHQsIERuc1JlY29yZFR5cGUsIERuc1JlY29yZFZhbGlkYXRpb24gfSBmcm9tIFwiLi4vLi4vY29tbW9uL2FwaS9jb21tb24vVHV0YW5vdGFDb25zdGFudHNcIlxuaW1wb3J0IHsgTGF6eUxvYWRlZCwgbm9PcCB9IGZyb20gXCJAdHV0YW8vdHV0YW5vdGEtdXRpbHNcIlxuaW1wb3J0IHsgbGFuZyB9IGZyb20gXCIuLi8uLi9jb21tb24vbWlzYy9MYW5ndWFnZVZpZXdNb2RlbFwiXG5pbXBvcnQgeyBhc3NlcnRNYWluT3JOb2RlIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9hcGkvY29tbW9uL0VudlwiXG5pbXBvcnQgeyBsb2NhdG9yIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9hcGkvbWFpbi9Db21tb25Mb2NhdG9yXCJcbmltcG9ydCB7IEN1c3RvbURvbWFpbkNoZWNrU2VydmljZSB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL2VudGl0aWVzL3N5cy9TZXJ2aWNlc1wiXG5cbmFzc2VydE1haW5Pck5vZGUoKVxuXG5leHBvcnQgY2xhc3MgRG9tYWluRG5zU3RhdHVzIHtcblx0c3RhdHVzOiBMYXp5TG9hZGVkPEN1c3RvbURvbWFpbkNoZWNrR2V0T3V0PlxuXHRkb21haW46IHN0cmluZ1xuXG5cdGNvbnN0cnVjdG9yKGNsZWFuRG9tYWluTmFtZTogc3RyaW5nLCBjdXN0b21lcklkPzogSWQpIHtcblx0XHR0aGlzLmRvbWFpbiA9IGNsZWFuRG9tYWluTmFtZVxuXHRcdHRoaXMuc3RhdHVzID0gbmV3IExhenlMb2FkZWQoKCkgPT4ge1xuXHRcdFx0bGV0IGRhdGEgPSBjcmVhdGVDdXN0b21Eb21haW5DaGVja0dldEluKHtcblx0XHRcdFx0ZG9tYWluOiBjbGVhbkRvbWFpbk5hbWUsXG5cdFx0XHRcdGN1c3RvbWVyOiBjdXN0b21lcklkID8/IG51bGwsXG5cdFx0XHR9KVxuXHRcdFx0cmV0dXJuIGxvY2F0b3Iuc2VydmljZUV4ZWN1dG9yLmdldChDdXN0b21Eb21haW5DaGVja1NlcnZpY2UsIGRhdGEpXG5cdFx0fSlcblx0fVxuXG5cdGdldExvYWRlZEN1c3RvbURvbWFpbkNoZWNrR2V0T3V0KCk6IEN1c3RvbURvbWFpbkNoZWNrR2V0T3V0IHtcblx0XHRyZXR1cm4gdGhpcy5zdGF0dXMuZ2V0TG9hZGVkKClcblx0fVxuXG5cdC8qKlxuXHQgKiBPbmx5IGNoZWNrcyBmb3IgdGhlIHJlcXVpcmVkIHJlY29yZHMgKE1YIGFuZCBzcGYpIHRvIGJlIGZpbmUuXG5cdCAqIFdlIGhhdmUgdGhpcyBsZXNzIHN0cmljdCBjaGVjayBiZWNhdXNlIG9uZSBjYW4gYWxyZWFkeSB1c2UgdGhlIGN1c3RvbSBkb21haW4gKHdpdGggbGltaXRhdGlvbnMpIGV2ZW4gaWYgY2VydGFpbiByZWNvcmRzIGxpa2UgZG1hcmMgYXJlIG5vdCB5ZXQgc2V0IHByb3Blcmx5LlxuXHQgKiBXZSB3YW50IHRvIGFsbG93IGZpbmlzaGluZyB0aGUgZGlhbG9ncyBzdWNjZXNmdWxseSBldmVuIGlmIGp1c3QgdGhlc2UgYmFzaWMgY2hlY2sgcGFzcy5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IHRydWUgaWYgcmVjb3JkcyBhcmUgZmluZS5cblx0ICovXG5cdGFyZVJlY29yZHNGaW5lKCk6IGJvb2xlYW4ge1xuXHRcdGlmICghdGhpcy5zdGF0dXMuaXNMb2FkZWQoKSB8fCB0aGlzLnN0YXR1cy5nZXRMb2FkZWQoKS5jaGVja1Jlc3VsdCAhPT0gQ3VzdG9tRG9tYWluQ2hlY2tSZXN1bHQuQ1VTVE9NX0RPTUFJTl9DSEVDS19SRVNVTFRfT0spIHtcblx0XHRcdHJldHVybiBmYWxzZVxuXHRcdH1cblxuXHRcdGNvbnN0IHJlcXVpcmVkTWlzc2luZ1JlY29yZHMgPSB0aGlzLnN0YXR1c1xuXHRcdFx0LmdldExvYWRlZCgpXG5cdFx0XHQubWlzc2luZ1JlY29yZHMuZmlsdGVyKChyKSA9PiByLnR5cGUgPT09IERuc1JlY29yZFR5cGUuRE5TX1JFQ09SRF9UWVBFX01YIHx8IHIudHlwZSA9PT0gRG5zUmVjb3JkVHlwZS5ETlNfUkVDT1JEX1RZUEVfVFhUX1NQRilcblx0XHRyZXR1cm4gIXJlcXVpcmVkTWlzc2luZ1JlY29yZHMubGVuZ3RoXG5cdH1cblxuXHQvKipcblx0ICogQ2hlY2tzIHRoYXQgQUxMIHJlY29yZHMgYXJlIGZpbmUuIEV2ZW4gdGhlIG9uZXMgdGhhdCBhcmUgb25seSByZWNvbW1lbmRlZC5cblx0ICogV2UgbmVlZCB0aGlzIGNoZWNrIG9uIHRvcCBvZiBhcmVSZWNvcmRzRmluZSgpIGJlY2F1c2Ugd2Ugd2FudCB0byBkaXNwbGF5IGlmIHNvbWUgcmVjb3JkcyBhcmUgbm90IHlldCBzZXQgY29ycmVjdGx5IGV2ZW4gaWYgdGhlIGRvbWFpbiBjYW4gYWxyZWFkeSBiZSB1c2VkLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gdHJ1ZSBpZiBhbGwgcmVjb3JkcyBhcmUgZmluZS5cblx0ICovXG5cdGFyZUFsbFJlY29yZHNGaW5lKCk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiAoXG5cdFx0XHR0aGlzLnN0YXR1cy5pc0xvYWRlZCgpICYmXG5cdFx0XHR0aGlzLnN0YXR1cy5nZXRMb2FkZWQoKS5jaGVja1Jlc3VsdCA9PT0gQ3VzdG9tRG9tYWluQ2hlY2tSZXN1bHQuQ1VTVE9NX0RPTUFJTl9DSEVDS19SRVNVTFRfT0sgJiZcblx0XHRcdHRoaXMuc3RhdHVzLmdldExvYWRlZCgpLm1pc3NpbmdSZWNvcmRzLmxlbmd0aCA9PT0gMCAmJlxuXHRcdFx0dGhpcy5zdGF0dXMuZ2V0TG9hZGVkKCkuaW52YWxpZFJlY29yZHMubGVuZ3RoID09PSAwXG5cdFx0KVxuXHR9XG5cblx0Z2V0RG5zU3RhdHVzSW5mbygpOiBzdHJpbmcge1xuXHRcdGlmICh0aGlzLnN0YXR1cy5pc0xvYWRlZCgpKSB7XG5cdFx0XHRsZXQgcmVzdWx0ID0gdGhpcy5zdGF0dXMuZ2V0TG9hZGVkKClcblxuXHRcdFx0aWYgKHJlc3VsdC5jaGVja1Jlc3VsdCA9PT0gQ3VzdG9tRG9tYWluQ2hlY2tSZXN1bHQuQ1VTVE9NX0RPTUFJTl9DSEVDS19SRVNVTFRfT0spIHtcblx0XHRcdFx0bGV0IG14T2sgPVxuXHRcdFx0XHRcdCFyZXN1bHQubWlzc2luZ1JlY29yZHMuc29tZSgocikgPT4gci50eXBlID09PSBEbnNSZWNvcmRUeXBlLkROU19SRUNPUkRfVFlQRV9NWCkgJiZcblx0XHRcdFx0XHQhcmVzdWx0LmludmFsaWRSZWNvcmRzLnNvbWUoKHIpID0+IHIudHlwZSA9PT0gRG5zUmVjb3JkVHlwZS5ETlNfUkVDT1JEX1RZUEVfTVgpXG5cdFx0XHRcdGxldCBzcGZPayA9XG5cdFx0XHRcdFx0IXJlc3VsdC5taXNzaW5nUmVjb3Jkcy5zb21lKChyKSA9PiByLnR5cGUgPT09IERuc1JlY29yZFR5cGUuRE5TX1JFQ09SRF9UWVBFX1RYVF9TUEYpICYmXG5cdFx0XHRcdFx0IXJlc3VsdC5pbnZhbGlkUmVjb3Jkcy5zb21lKChyKSA9PiByLnR5cGUgPT09IERuc1JlY29yZFR5cGUuRE5TX1JFQ09SRF9UWVBFX1RYVF9TUEYpXG5cdFx0XHRcdGxldCBka2ltT2sgPVxuXHRcdFx0XHRcdCFyZXN1bHQubWlzc2luZ1JlY29yZHMuc29tZSgocikgPT4gci50eXBlID09PSBEbnNSZWNvcmRUeXBlLkROU19SRUNPUkRfVFlQRV9DTkFNRV9ES0lNKSAmJlxuXHRcdFx0XHRcdCFyZXN1bHQuaW52YWxpZFJlY29yZHMuc29tZSgocikgPT4gci50eXBlID09PSBEbnNSZWNvcmRUeXBlLkROU19SRUNPUkRfVFlQRV9DTkFNRV9ES0lNKVxuXHRcdFx0XHRsZXQgbXRhU3RzT2sgPVxuXHRcdFx0XHRcdCFyZXN1bHQubWlzc2luZ1JlY29yZHMuc29tZSgocikgPT4gci50eXBlID09PSBEbnNSZWNvcmRUeXBlLkROU19SRUNPUkRfVFlQRV9DTkFNRV9NVEFfU1RTKSAmJlxuXHRcdFx0XHRcdCFyZXN1bHQuaW52YWxpZFJlY29yZHMuc29tZSgocikgPT4gci50eXBlID09PSBEbnNSZWNvcmRUeXBlLkROU19SRUNPUkRfVFlQRV9DTkFNRV9NVEFfU1RTKVxuXHRcdFx0XHRsZXQgZG1hcmNXYXJuID0gcmVzdWx0Lm1pc3NpbmdSZWNvcmRzLmZpbmQoKHIpID0+IHIudHlwZSA9PT0gRG5zUmVjb3JkVHlwZS5ETlNfUkVDT1JEX1RZUEVfVFhUX0RNQVJDKVxuXHRcdFx0XHRsZXQgZG1hcmNCYWQgPSByZXN1bHQuaW52YWxpZFJlY29yZHMuZmluZCgocikgPT4gci50eXBlID09PSBEbnNSZWNvcmRUeXBlLkROU19SRUNPUkRfVFlQRV9UWFRfRE1BUkMpXG5cdFx0XHRcdHJldHVybiAoXG5cdFx0XHRcdFx0XCJNWCBcIiArXG5cdFx0XHRcdFx0KG14T2sgPyBEbnNSZWNvcmRWYWxpZGF0aW9uLk9LIDogRG5zUmVjb3JkVmFsaWRhdGlvbi5CQUQpICtcblx0XHRcdFx0XHRcIiwgU1BGIFwiICtcblx0XHRcdFx0XHQoc3BmT2sgPyBEbnNSZWNvcmRWYWxpZGF0aW9uLk9LIDogRG5zUmVjb3JkVmFsaWRhdGlvbi5CQUQpICtcblx0XHRcdFx0XHRcIiwgTVRBLVNUUyBcIiArXG5cdFx0XHRcdFx0KG10YVN0c09rID8gRG5zUmVjb3JkVmFsaWRhdGlvbi5PSyA6IERuc1JlY29yZFZhbGlkYXRpb24uQkFEKSArXG5cdFx0XHRcdFx0XCIsIERLSU0gXCIgK1xuXHRcdFx0XHRcdChka2ltT2sgPyBEbnNSZWNvcmRWYWxpZGF0aW9uLk9LIDogRG5zUmVjb3JkVmFsaWRhdGlvbi5CQUQpICtcblx0XHRcdFx0XHRcIiwgRE1BUkMgXCIgK1xuXHRcdFx0XHRcdChkbWFyY0JhZCB8fCBkbWFyY1dhcm4gPyBEbnNSZWNvcmRWYWxpZGF0aW9uLkJBRCA6IERuc1JlY29yZFZhbGlkYXRpb24uT0spXG5cdFx0XHRcdClcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHJldHVybiBcIkROUyBcIiArIERuc1JlY29yZFZhbGlkYXRpb24uQkFEXG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJldHVybiBsYW5nLmdldChcImxvYWRpbmdfbXNnXCIpXG5cdFx0fVxuXHR9XG5cblx0bG9hZEN1cnJlbnRTdGF0dXMoKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0aWYgKHRoaXMuc3RhdHVzLmlzTG9hZGVkKCkpIHtcblx0XHRcdC8vIGtlZXAgdGhlIG9sZCBzdGF0dXMgYXMgbG9uZyBhcyBjaGVja2luZyBhZ2FpblxuXHRcdFx0cmV0dXJuIHRoaXMuc3RhdHVzLnJlbG9hZCgpLnRoZW4obm9PcClcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmV0dXJuIHRoaXMuc3RhdHVzLmdldEFzeW5jKCkudGhlbihub09wKVxuXHRcdH1cblx0fVxufVxuIiwiaW1wb3J0IHsgRG5zUmVjb3JkVHlwZSB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vYXBpL2NvbW1vbi9UdXRhbm90YUNvbnN0YW50cy5qc1wiXG5pbXBvcnQgeyBEbnNSZWNvcmQgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2FwaS9lbnRpdGllcy9zeXMvVHlwZVJlZnMuanNcIlxuaW1wb3J0IG0sIHsgQ2hpbGRyZW4gfSBmcm9tIFwibWl0aHJpbFwiXG5pbXBvcnQgeyBDb2x1bW5XaWR0aCwgVGFibGUgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2d1aS9iYXNlL1RhYmxlLmpzXCJcblxuY29uc3QgZW51bSBBY3R1YWxEbnNSZWNvcmRUeXBlIHtcblx0TVggPSBcIk1YXCIsXG5cdFRYVCA9IFwiVFhUXCIsXG5cdENOQU1FID0gXCJDTkFNRVwiLFxufVxuXG5leHBvcnQgY29uc3QgRG5zUmVjb3JkVGFibGU6IFJlY29yZDxEbnNSZWNvcmRUeXBlLCBBY3R1YWxEbnNSZWNvcmRUeXBlPiA9IE9iamVjdC5mcmVlemUoe1xuXHRbRG5zUmVjb3JkVHlwZS5ETlNfUkVDT1JEX1RZUEVfTVhdOiBBY3R1YWxEbnNSZWNvcmRUeXBlLk1YLFxuXHRbRG5zUmVjb3JkVHlwZS5ETlNfUkVDT1JEX1RZUEVfVFhUX1NQRl06IEFjdHVhbERuc1JlY29yZFR5cGUuVFhULFxuXHRbRG5zUmVjb3JkVHlwZS5ETlNfUkVDT1JEX1RZUEVfQ05BTUVfREtJTV06IEFjdHVhbERuc1JlY29yZFR5cGUuQ05BTUUsXG5cdFtEbnNSZWNvcmRUeXBlLkROU19SRUNPUkRfVFlQRV9UWFRfRE1BUkNdOiBBY3R1YWxEbnNSZWNvcmRUeXBlLlRYVCxcblx0W0Ruc1JlY29yZFR5cGUuRE5TX1JFQ09SRF9UWVBFX0NOQU1FX01UQV9TVFNdOiBBY3R1YWxEbnNSZWNvcmRUeXBlLkNOQU1FLFxuXHRbRG5zUmVjb3JkVHlwZS5ETlNfUkVDT1JEX1RZUEVfVFhUX1ZFUklGWV06IEFjdHVhbERuc1JlY29yZFR5cGUuVFhULFxufSlcblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZURuc1JlY29yZFRhYmxlKHJlY29yZHM6IERuc1JlY29yZFtdKTogQ2hpbGRyZW4ge1xuXHRyZXR1cm4gbShUYWJsZSwge1xuXHRcdGNvbHVtbkhlYWRpbmc6IFtcInR5cGVfbGFiZWxcIiwgXCJkbnNSZWNvcmRIb3N0T3JOYW1lX2xhYmVsXCJdLFxuXHRcdGNvbHVtbldpZHRoczogW0NvbHVtbldpZHRoLlNtYWxsLCBDb2x1bW5XaWR0aC5MYXJnZXN0XSxcblx0XHRzaG93QWN0aW9uQnV0dG9uQ29sdW1uOiBmYWxzZSxcblx0XHRsaW5lczogcmVjb3Jkcy5tYXAoKHIpID0+ICh7XG5cdFx0XHRjZWxsczogKCkgPT4gW3sgbWFpbjogRG5zUmVjb3JkVGFibGVbci50eXBlIGFzIERuc1JlY29yZFR5cGVdIH0sIHsgbWFpbjogci5zdWJkb21haW4gPyByLnN1YmRvbWFpbiA6IFwiQFwiLCBpbmZvOiBbci52YWx1ZV0gfV0sXG5cdFx0fSkpLFxuXHR9KVxufVxuIiwiaW1wb3J0IHsgRG9tYWluRG5zU3RhdHVzIH0gZnJvbSBcIi4uL0RvbWFpbkRuc1N0YXR1c1wiXG5pbXBvcnQgbSwgeyBDaGlsZHJlbiwgVm5vZGUsIFZub2RlRE9NIH0gZnJvbSBcIm1pdGhyaWxcIlxuaW1wb3J0IHsgYXNzZXJ0RW51bVZhbHVlLCBDdXN0b21Eb21haW5DaGVja1Jlc3VsdCwgRG5zUmVjb3JkVHlwZSwgRG5zUmVjb3JkVmFsaWRhdGlvbiB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vYXBpL2NvbW1vbi9UdXRhbm90YUNvbnN0YW50c1wiXG5pbXBvcnQgeyBJbmZvTGluaywgbGFuZywgVHJhbnNsYXRpb25LZXkgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL21pc2MvTGFuZ3VhZ2VWaWV3TW9kZWxcIlxuaW1wb3J0IHR5cGUgeyBBZGREb21haW5EYXRhLCBWYWxpZGF0ZWREblNSZWNvcmQgfSBmcm9tIFwiLi9BZGREb21haW5XaXphcmRcIlxuaW1wb3J0IHsgQWN0aW9uRGlhbG9nUHJvcHMsIERpYWxvZyB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZ3VpL2Jhc2UvRGlhbG9nXCJcbmltcG9ydCB0eXBlIHsgV2l6YXJkUGFnZUF0dHJzIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9ndWkvYmFzZS9XaXphcmREaWFsb2cuanNcIlxuaW1wb3J0IHsgZW1pdFdpemFyZEV2ZW50LCBXaXphcmRFdmVudFR5cGUsIFdpemFyZFBhZ2VOIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9ndWkvYmFzZS9XaXphcmREaWFsb2cuanNcIlxuaW1wb3J0IHsgQnV0dG9uLCBCdXR0b25UeXBlIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9ndWkvYmFzZS9CdXR0b24uanNcIlxuaW1wb3J0IHR5cGUgeyBEbnNSZWNvcmQgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2FwaS9lbnRpdGllcy9zeXMvVHlwZVJlZnMuanNcIlxuaW1wb3J0IHsgQm9vdEljb25zIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9ndWkvYmFzZS9pY29ucy9Cb290SWNvbnNcIlxuaW1wb3J0IHsgYXNzZXJ0TWFpbk9yTm9kZSB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vYXBpL2NvbW1vbi9FbnZcIlxuaW1wb3J0IHsgZG93bmNhc3QgfSBmcm9tIFwiQHR1dGFvL3R1dGFub3RhLXV0aWxzXCJcbmltcG9ydCB7IEJ1dHRvblNpemUgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2d1aS9iYXNlL0J1dHRvblNpemUuanNcIlxuaW1wb3J0IHsgSWNvbkJ1dHRvbkF0dHJzIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9ndWkvYmFzZS9JY29uQnV0dG9uLmpzXCJcbmltcG9ydCB7IENvbHVtbldpZHRoLCBUYWJsZSB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZ3VpL2Jhc2UvVGFibGUuanNcIlxuaW1wb3J0IHsgRG5zUmVjb3JkVGFibGUgfSBmcm9tIFwiLi9EbnNSZWNvcmRUYWJsZS5qc1wiXG5pbXBvcnQgeyBMb2dpbkJ1dHRvbiB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZ3VpL2Jhc2UvYnV0dG9ucy9Mb2dpbkJ1dHRvbi5qc1wiXG5pbXBvcnQgeyBNb3JlSW5mb0xpbmsgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL21pc2MvbmV3cy9Nb3JlSW5mb0xpbmsuanNcIlxuXG5hc3NlcnRNYWluT3JOb2RlKClcblxuLyoqIFdpemFyZCBwYWdlIHdoaWNoIGNhbiB2ZXJpZnkgRE5TIHJlY29yZHMgZm9yIGN1c3RvbSBlbWFpbCBkb21haW4uICovXG5leHBvcnQgY2xhc3MgVmVyaWZ5RG5zUmVjb3Jkc1BhZ2UgaW1wbGVtZW50cyBXaXphcmRQYWdlTjxBZGREb21haW5EYXRhPiB7XG5cdG9uY3JlYXRlKHZub2RlOiBWbm9kZURPTTxXaXphcmRQYWdlQXR0cnM8QWRkRG9tYWluRGF0YT4+KSB7XG5cdFx0Y29uc3QgZGF0YSA9IHZub2RlLmF0dHJzLmRhdGFcblx0XHRkYXRhLmRvbWFpblN0YXR1cyA9IG5ldyBEb21haW5EbnNTdGF0dXMoZGF0YS5kb21haW4oKSlcblxuXHRcdF91cGRhdGVEbnNTdGF0dXMoZGF0YS5kb21haW5TdGF0dXMpXG5cdH1cblxuXHR2aWV3KHZub2RlOiBWbm9kZTxXaXphcmRQYWdlQXR0cnM8QWRkRG9tYWluRGF0YT4+KSB7XG5cdFx0Y29uc3QgYSA9IHZub2RlLmF0dHJzXG5cdFx0cmV0dXJuIFtcblx0XHRcdG0oXCJoNC5tdC1sLnRleHQtY2VudGVyXCIsIGxhbmcuZ2V0KFwidmVyaWZ5RE5TUmVjb3Jkc190aXRsZVwiKSksXG5cdFx0XHRtKFwicFwiLCBsYW5nLmdldChcInZlcmlmeUROU1JlY29yZHNfbXNnXCIpKSxcblx0XHRcdGEuZGF0YS5kb21haW5TdGF0dXMuc3RhdHVzLmlzTG9hZGVkKClcblx0XHRcdFx0PyBtKFwiXCIsIFtcblx0XHRcdFx0XHRcdHJlbmRlckNoZWNrUmVzdWx0KGEuZGF0YS5kb21haW5TdGF0dXMpLFxuXHRcdFx0XHRcdFx0bShcblx0XHRcdFx0XHRcdFx0XCIuZmxleC1jZW50ZXIuZnVsbC13aWR0aC5wdC1sLm1iLWxcIixcblx0XHRcdFx0XHRcdFx0bShMb2dpbkJ1dHRvbiwge1xuXHRcdFx0XHRcdFx0XHRcdGxhYmVsOiBcImZpbmlzaF9hY3Rpb25cIixcblx0XHRcdFx0XHRcdFx0XHRjbGFzczogXCJzbWFsbC1sb2dpbi1idXR0b25cIixcblx0XHRcdFx0XHRcdFx0XHQvLyBXZSBjaGVjayBpZiBhbGwgRE5TIHJlY29yZHMgYXJlIHNldCBjb3JyZWN0bHkgYW5kIGxldCB0aGUgdXNlciBjb25maXJtIGJlZm9yZSBsZWF2aW5nIGlmIG5vdFxuXHRcdFx0XHRcdFx0XHRcdG9uY2xpY2s6ICgpID0+IHRoaXMuX2ZpbmlzaERpYWxvZyhhLmRhdGEsIChkb3duY2FzdDxWbm9kZURPTT4odm5vZGUpPy5kb20gYXMgSFRNTEVsZW1lbnQgfCBudWxsKSA/PyBudWxsKSxcblx0XHRcdFx0XHRcdFx0fSksXG5cdFx0XHRcdFx0XHQpLFxuXHRcdFx0XHQgIF0pXG5cdFx0XHRcdDogbShcIlwiLCBbXG5cdFx0XHRcdFx0XHRsYW5nLmdldChcImxvYWRpbmdETlNSZWNvcmRzX21zZ1wiKSxcblx0XHRcdFx0XHRcdG0oXG5cdFx0XHRcdFx0XHRcdFwiLmZsZXgtY2VudGVyLmZ1bGwtd2lkdGgucHQtbC5tYi1sXCIsXG5cdFx0XHRcdFx0XHRcdG0oQnV0dG9uLCB7XG5cdFx0XHRcdFx0XHRcdFx0dHlwZTogQnV0dG9uVHlwZS5TZWNvbmRhcnksXG5cdFx0XHRcdFx0XHRcdFx0bGFiZWw6IFwicmVmcmVzaF9hY3Rpb25cIixcblx0XHRcdFx0XHRcdFx0XHRjbGljazogKCkgPT4gX3VwZGF0ZURuc1N0YXR1cyhhLmRhdGEuZG9tYWluU3RhdHVzKSxcblx0XHRcdFx0XHRcdFx0fSksXG5cdFx0XHRcdFx0XHQpLFxuXHRcdFx0XHQgIF0pLFxuXHRcdF1cblx0fVxuXG5cdF9maW5pc2hEaWFsb2coZGF0YTogQWRkRG9tYWluRGF0YSwgZG9tOiBIVE1MRWxlbWVudCB8IG51bGwpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRjb25zdCBsZWF2ZVVuZmluaXNoZWREaWFsb2dBdHRyczogQWN0aW9uRGlhbG9nUHJvcHMgPSB7XG5cdFx0XHR0aXRsZTogXCJxdWl0U2V0dXBfdGl0bGVcIixcblx0XHRcdGNoaWxkOiB7XG5cdFx0XHRcdHZpZXc6ICgpID0+IHtcblx0XHRcdFx0XHRyZXR1cm4gW20oXCJwXCIsIGxhbmcuZ2V0KFwicXVpdEROU1NldHVwX21zZ1wiKSldXG5cdFx0XHRcdH0sXG5cdFx0XHR9LFxuXHRcdFx0b2tBY3Rpb246IChkaWFsb2c6IERpYWxvZykgPT4ge1xuXHRcdFx0XHRkaWFsb2cuY2xvc2UoKVxuXHRcdFx0XHRlbWl0V2l6YXJkRXZlbnQoZG9tLCBXaXphcmRFdmVudFR5cGUuQ0xPU0VfRElBTE9HKVxuXHRcdFx0fSxcblx0XHR9XG5cdFx0cmV0dXJuIF91cGRhdGVEbnNTdGF0dXMoZGF0YS5kb21haW5TdGF0dXMpLnRoZW4oKCkgPT4ge1xuXHRcdFx0aWYgKGRhdGEuZG9tYWluU3RhdHVzLmFyZVJlY29yZHNGaW5lKCkpIHtcblx0XHRcdFx0ZW1pdFdpemFyZEV2ZW50KGRvbSwgV2l6YXJkRXZlbnRUeXBlLlNIT1dfTkVYVF9QQUdFKSAvLyBUaGUgd2l6YXJkIHdpbGwgY2xvc2UgdGhlIGRpYWxvZyBhcyB0aGlzIGlzIHRoZSBsYXN0IHBhZ2Vcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdERpYWxvZy5zaG93QWN0aW9uRGlhbG9nKGxlYXZlVW5maW5pc2hlZERpYWxvZ0F0dHJzKVxuXHRcdFx0fVxuXHRcdH0pXG5cdH1cbn1cblxuZnVuY3Rpb24gX3VwZGF0ZURuc1N0YXR1cyhkb21haW5TdGF0dXM6IERvbWFpbkRuc1N0YXR1cyk6IFByb21pc2U8dm9pZD4ge1xuXHRyZXR1cm4gZG9tYWluU3RhdHVzLmxvYWRDdXJyZW50U3RhdHVzKCkudGhlbigoKSA9PiB7XG5cdFx0bS5yZWRyYXcoKVxuXHR9KVxufVxuXG5mdW5jdGlvbiBfZ2V0RGlzcGxheWFibGVSZWNvcmRWYWx1ZShyZWNvcmQ6IERuc1JlY29yZCk6IHN0cmluZyB7XG5cdGlmIChcblx0XHQhcmVjb3JkLnZhbHVlLmVuZHNXaXRoKFwiLlwiKSAmJlxuXHRcdChyZWNvcmQudHlwZSA9PT0gRG5zUmVjb3JkVHlwZS5ETlNfUkVDT1JEX1RZUEVfTVggfHxcblx0XHRcdHJlY29yZC50eXBlID09PSBEbnNSZWNvcmRUeXBlLkROU19SRUNPUkRfVFlQRV9DTkFNRV9ES0lNIHx8XG5cdFx0XHRyZWNvcmQudHlwZSA9PT0gRG5zUmVjb3JkVHlwZS5ETlNfUkVDT1JEX1RZUEVfQ05BTUVfTVRBX1NUUylcblx0KSB7XG5cdFx0cmV0dXJuIHJlY29yZC52YWx1ZSArIFwiLlwiXG5cdH1cblxuXHRyZXR1cm4gcmVjb3JkLnZhbHVlXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVEbnNSZWNvcmRUYWJsZU4ocmVjb3JkczogVmFsaWRhdGVkRG5TUmVjb3JkW10sIHJlZnJlc2hCdXR0b25BdHRyczogSWNvbkJ1dHRvbkF0dHJzIHwgbnVsbCk6IENoaWxkcmVuIHtcblx0cmV0dXJuIG0oVGFibGUsIHtcblx0XHRjb2x1bW5IZWFkaW5nOiBbXCJ0eXBlX2xhYmVsXCIsIFwiZG5zUmVjb3JkSG9zdE9yTmFtZV9sYWJlbFwiLCBcImRuc1JlY29yZFZhbHVlT3JQb2ludHNUb19sYWJlbFwiXSxcblx0XHRhZGRCdXR0b25BdHRyczogcmVmcmVzaEJ1dHRvbkF0dHJzLFxuXHRcdGNvbHVtbldpZHRoczogW0NvbHVtbldpZHRoLlNtYWxsLCBDb2x1bW5XaWR0aC5TbWFsbCwgQ29sdW1uV2lkdGguTGFyZ2VzdF0sXG5cdFx0c2hvd0FjdGlvbkJ1dHRvbkNvbHVtbjogdHJ1ZSxcblx0XHRsaW5lczogcmVjb3Jkcy5tYXAoKHIpID0+IHtcblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdGNlbGxzOiAoKSA9PiBbXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0bWFpbjogRG5zUmVjb3JkVGFibGVbci5yZWNvcmQudHlwZSBhcyBEbnNSZWNvcmRUeXBlXSxcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdG1haW46IHIucmVjb3JkLnN1YmRvbWFpbiA/IHIucmVjb3JkLnN1YmRvbWFpbiA6IFwiQFwiLFxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0bWFpbjogci5yZWNvcmQudmFsdWUsXG5cdFx0XHRcdFx0XHRpbmZvOiByLmhlbHBJbmZvLFxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdF0sXG5cdFx0XHR9XG5cdFx0fSksXG5cdH0pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZW5kZXJDaGVja1Jlc3VsdChkb21haW5TdGF0dXM6IERvbWFpbkRuc1N0YXR1cywgaGlkZVJlZnJlc2hCdXR0b246IGJvb2xlYW4gPSBmYWxzZSk6IENoaWxkcmVuIHtcblx0Y29uc3QgY2hlY2tSZXR1cm4gPSBkb21haW5TdGF0dXMuZ2V0TG9hZGVkQ3VzdG9tRG9tYWluQ2hlY2tHZXRPdXQoKVxuXHRjb25zdCB7IHJlcXVpcmVkUmVjb3JkcywgbWlzc2luZ1JlY29yZHMsIGludmFsaWRSZWNvcmRzIH0gPSBjaGVja1JldHVyblxuXHRjb25zdCBjaGVja1Jlc3VsdCA9IGFzc2VydEVudW1WYWx1ZShDdXN0b21Eb21haW5DaGVja1Jlc3VsdCwgY2hlY2tSZXR1cm4uY2hlY2tSZXN1bHQpXG5cblx0aWYgKGNoZWNrUmVzdWx0ID09PSBDdXN0b21Eb21haW5DaGVja1Jlc3VsdC5DVVNUT01fRE9NQUlOX0NIRUNLX1JFU1VMVF9PSykge1xuXHRcdGNvbnN0IHZhbGlkYXRlZFJlY29yZHMgPSByZXF1aXJlZFJlY29yZHMubWFwKChyZWNvcmQpID0+IHtcblx0XHRcdGNvbnN0IGRpc3BsYXlhYmxlUmVjb3JkVmFsdWUgPSBfZ2V0RGlzcGxheWFibGVSZWNvcmRWYWx1ZShyZWNvcmQpXG5cblx0XHRcdGNvbnN0IGhlbHBJbmZvOiBzdHJpbmdbXSA9IFtdXG5cdFx0XHRsZXQgdmFsaWRhdGVkUmVjb3JkOiBEbnNSZWNvcmQgfCBudWxsID0gbnVsbFxuXG5cdFx0XHRmb3IgKGxldCBtaXNzaW5nUmVjb3JkIG9mIGZpbmREbnNSZWNvcmRJbkxpc3QocmVjb3JkLCBtaXNzaW5nUmVjb3JkcykpIHtcblx0XHRcdFx0dmFsaWRhdGVkUmVjb3JkID0gcmVjb3JkXG5cblx0XHRcdFx0aWYgKHJlY29yZC50eXBlID09PSBEbnNSZWNvcmRUeXBlLkROU19SRUNPUkRfVFlQRV9UWFRfRE1BUkMpIHtcblx0XHRcdFx0XHRoZWxwSW5mby5wdXNoKGAke0Ruc1JlY29yZFZhbGlkYXRpb24uQkFEfSAke2xhbmcuZ2V0KFwicmVjb21tZW5kZWRETlNWYWx1ZV9sYWJlbFwiKX06ICR7ZGlzcGxheWFibGVSZWNvcmRWYWx1ZX1gKVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGhlbHBJbmZvLnB1c2goYCR7RG5zUmVjb3JkVmFsaWRhdGlvbi5CQUR9ICR7bGFuZy5nZXQoXCJhZGRETlNWYWx1ZV9sYWJlbFwiKX06ICR7ZGlzcGxheWFibGVSZWNvcmRWYWx1ZX1gKVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGZvciAobGV0IGludmFsaWRSZWNvcmQgb2YgZmluZERuc1JlY29yZEluTGlzdChyZWNvcmQsIGludmFsaWRSZWNvcmRzKSkge1xuXHRcdFx0XHR2YWxpZGF0ZWRSZWNvcmQgPSByZWNvcmRcblx0XHRcdFx0Ly8gaGVyZSB3ZSB3YW50IHRvIGRpc3BsYXkgdGhlIGluY29ycmVjdCB2YWx1ZSFcblx0XHRcdFx0aGVscEluZm8ucHVzaChgJHtEbnNSZWNvcmRWYWxpZGF0aW9uLkJBRH0gJHtsYW5nLmdldChcInJlbW92ZUROU1ZhbHVlX2xhYmVsXCIpfTogJHtpbnZhbGlkUmVjb3JkLnZhbHVlfWApXG5cdFx0XHR9XG5cblx0XHRcdGlmICh2YWxpZGF0ZWRSZWNvcmQgPT0gbnVsbCkge1xuXHRcdFx0XHR2YWxpZGF0ZWRSZWNvcmQgPSByZWNvcmRcblx0XHRcdFx0aGVscEluZm8ucHVzaChgJHtEbnNSZWNvcmRWYWxpZGF0aW9uLk9LfSAke2xhbmcuZ2V0KFwiY29ycmVjdEROU1ZhbHVlX2xhYmVsXCIpfWApXG5cdFx0XHR9XG5cblx0XHRcdHZhbGlkYXRlZFJlY29yZC52YWx1ZSA9IGRpc3BsYXlhYmxlUmVjb3JkVmFsdWVcblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdHJlY29yZDogdmFsaWRhdGVkUmVjb3JkLFxuXHRcdFx0XHRoZWxwSW5mbyxcblx0XHRcdH1cblx0XHR9KVxuXHRcdHJldHVybiBbXG5cdFx0XHRtKFwiLm10LW0ubWItc1wiLCBsYW5nLmdldChcInNldERuc1JlY29yZHNfbXNnXCIpKSxcblx0XHRcdGNyZWF0ZURuc1JlY29yZFRhYmxlTihcblx0XHRcdFx0dmFsaWRhdGVkUmVjb3Jkcyxcblx0XHRcdFx0aGlkZVJlZnJlc2hCdXR0b25cblx0XHRcdFx0XHQ/IG51bGxcblx0XHRcdFx0XHQ6IHtcblx0XHRcdFx0XHRcdFx0dGl0bGU6IFwicmVmcmVzaF9hY3Rpb25cIixcblx0XHRcdFx0XHRcdFx0aWNvbjogQm9vdEljb25zLlByb2dyZXNzLFxuXHRcdFx0XHRcdFx0XHRzaXplOiBCdXR0b25TaXplLkNvbXBhY3QsXG5cdFx0XHRcdFx0XHRcdGNsaWNrOiAoKSA9PiBfdXBkYXRlRG5zU3RhdHVzKGRvbWFpblN0YXR1cyksXG5cdFx0XHRcdFx0ICB9LFxuXHRcdFx0KSxcblx0XHRcdG0oTW9yZUluZm9MaW5rLCB7IGxpbms6IEluZm9MaW5rLkRvbWFpbkluZm8sIGNsYXNzOiBcIm10LW1cIiwgaXNTbWFsbDogdHJ1ZSB9KSxcblx0XHRdXG5cdH0gZWxzZSB7XG5cdFx0Y29uc3QgZXJyb3JNZXNzYWdlTWFwOiBSZWNvcmQ8Q3VzdG9tRG9tYWluQ2hlY2tSZXN1bHQsIFRyYW5zbGF0aW9uS2V5PiA9IHtcblx0XHRcdFtDdXN0b21Eb21haW5DaGVja1Jlc3VsdC5DVVNUT01fRE9NQUlOX0NIRUNLX1JFU1VMVF9PS106IFwiZW1wdHlTdHJpbmdfbXNnXCIsXG5cdFx0XHRbQ3VzdG9tRG9tYWluQ2hlY2tSZXN1bHQuQ1VTVE9NX0RPTUFJTl9DSEVDS19SRVNVTFRfRE5TX0xPT0tVUF9GQUlMRURdOiBcImN1c3RvbURvbWFpbkVycm9yRG5zTG9va3VwRmFpbHVyZV9tc2dcIixcblx0XHRcdFtDdXN0b21Eb21haW5DaGVja1Jlc3VsdC5DVVNUT01fRE9NQUlOX0NIRUNLX1JFU1VMVF9ET01BSU5fTk9UX0ZPVU5EXTogXCJjdXN0b21Eb21haW5FcnJvckRvbWFpbk5vdEZvdW5kX21zZ1wiLFxuXHRcdFx0W0N1c3RvbURvbWFpbkNoZWNrUmVzdWx0LkNVU1RPTV9ET01BSU5fQ0hFQ0tfUkVTVUxUX05BTUVTRVJWRVJfTk9UX0ZPVU5EXTogXCJjdXN0b21Eb21haW5FcnJvck5hbWVzZXJ2ZXJOb3RGb3VuZF9tc2dcIixcblx0XHR9XG5cdFx0cmV0dXJuIGxhbmcuZ2V0KGVycm9yTWVzc2FnZU1hcFtjaGVja1Jlc3VsdF0pXG5cdH1cbn1cblxuZnVuY3Rpb24gZmluZERuc1JlY29yZEluTGlzdChyZWNvcmQ6IERuc1JlY29yZCwgcmVjb3JkTGlzdDogQXJyYXk8RG5zUmVjb3JkPik6IEFycmF5PERuc1JlY29yZD4ge1xuXHRyZXR1cm4gcmVjb3JkTGlzdC5maWx0ZXIoKHIpID0+IHIudHlwZSA9PT0gcmVjb3JkLnR5cGUgJiYgci5zdWJkb21haW4gPT09IHJlY29yZC5zdWJkb21haW4pXG59XG5cbmV4cG9ydCBjbGFzcyBWZXJpZnlEbnNSZWNvcmRzUGFnZUF0dHJzIGltcGxlbWVudHMgV2l6YXJkUGFnZUF0dHJzPEFkZERvbWFpbkRhdGE+IHtcblx0ZGF0YTogQWRkRG9tYWluRGF0YVxuXG5cdGNvbnN0cnVjdG9yKGRvbWFpbkRhdGE6IEFkZERvbWFpbkRhdGEpIHtcblx0XHR0aGlzLmRhdGEgPSBkb21haW5EYXRhXG5cdH1cblxuXHRoZWFkZXJUaXRsZSgpOiBUcmFuc2xhdGlvbktleSB7XG5cdFx0cmV0dXJuIFwiZG9tYWluU2V0dXBfdGl0bGVcIlxuXHR9XG5cblx0bmV4dEFjdGlvbihzaG93RXJyb3JEaWFsb2c6IGJvb2xlYW4pOiBQcm9taXNlPGJvb2xlYW4+IHtcblx0XHQvLyBObyBuZWVkIHRvIGRvIGFueXRoaW5nLCBhcyB3ZSBhcmUgbGVhdmluZyB0aGUgd2l6YXJkXG5cdFx0Ly8gVGhlIGd1aSBjb21wb25lbnQgd2lsbCBkaXNwbGF5IGEgY29uZmlybWF0aW9uIGRpYWxvZyBpZiBETlMgY29uZmlndXJhdGlvbiBpcyBub3Qgb2suXG5cdFx0Ly8gU28gaXQgaXMgb2sgbm90IHRvIGhhdmUgdGhpcyBkaWFsb2cgd2hlbiBjYWxsZWQgZnJvbSBlbHNld2hlcmUuXG5cdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZSh0cnVlKVxuXHR9XG5cblx0aXNTa2lwQXZhaWxhYmxlKCk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiBmYWxzZVxuXHR9XG5cblx0aXNFbmFibGVkKCk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiB0cnVlXG5cdH1cbn1cbiIsImltcG9ydCBtIGZyb20gXCJtaXRocmlsXCJcbmltcG9ydCB7IGxhbmcgfSBmcm9tIFwiLi4vLi4vY29tbW9uL21pc2MvTGFuZ3VhZ2VWaWV3TW9kZWxcIlxuaW1wb3J0IHsgRGlhbG9nLCBEaWFsb2dUeXBlIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvYmFzZS9EaWFsb2dcIlxuaW1wb3J0IHsgRG9tYWluRG5zU3RhdHVzIH0gZnJvbSBcIi4vRG9tYWluRG5zU3RhdHVzXCJcbmltcG9ydCB7IHJlbmRlckNoZWNrUmVzdWx0IH0gZnJvbSBcIi4vZW1haWxkb21haW4vVmVyaWZ5RG5zUmVjb3Jkc1BhZ2VcIlxuaW1wb3J0IHsgYXNzZXJ0TWFpbk9yTm9kZSB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL2NvbW1vbi9FbnZcIlxuXG5hc3NlcnRNYWluT3JOb2RlKClcblxuLyoqXG4gKiBAcHJlIGRvbWFpblN0YXR1cy5zdGF0dXMuaXNMb2FkZWQoKSA9PSB0cnVlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzaG93RG5zQ2hlY2tEaWFsb2coZG9tYWluU3RhdHVzOiBEb21haW5EbnNTdGF0dXMpIHtcblx0bGV0IGRpYWxvZyA9IERpYWxvZy5zaG93QWN0aW9uRGlhbG9nKHtcblx0XHR0eXBlOiBEaWFsb2dUeXBlLkVkaXRMYXJnZXIsXG5cdFx0dGl0bGU6IFwiY2hlY2tEbnNSZWNvcmRzX2FjdGlvblwiLFxuXHRcdG9rQWN0aW9uVGV4dElkOiBcImNoZWNrQWdhaW5fYWN0aW9uXCIsXG5cdFx0Y2FuY2VsQWN0aW9uVGV4dElkOiBcImNsb3NlX2FsdFwiLFxuXHRcdGNoaWxkOiAoKSA9PiByZW5kZXJDaGVja1Jlc3VsdChkb21haW5TdGF0dXMsIHRydWUpLFxuXHRcdG9rQWN0aW9uOiAoKSA9PiB7XG5cdFx0XHRkb21haW5TdGF0dXMubG9hZEN1cnJlbnRTdGF0dXMoKS50aGVuKCgpID0+IHtcblx0XHRcdFx0aWYgKGRvbWFpblN0YXR1cy5hcmVSZWNvcmRzRmluZSgpKSB7XG5cdFx0XHRcdFx0ZGlhbG9nLmNsb3NlKClcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRtLnJlZHJhdygpXG5cdFx0XHRcdH1cblx0XHRcdH0pXG5cdFx0fSxcblx0fSlcbn1cbiIsImltcG9ydCBtIGZyb20gXCJtaXRocmlsXCJcbmltcG9ydCB0eXBlIHsgUmVqZWN0ZWRTZW5kZXIgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2FwaS9lbnRpdGllcy9zeXMvVHlwZVJlZnMuanNcIlxuaW1wb3J0IHsgVGV4dEZpZWxkIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvYmFzZS9UZXh0RmllbGQuanNcIlxuaW1wb3J0IHN0cmVhbSBmcm9tIFwibWl0aHJpbC9zdHJlYW1cIlxuaW1wb3J0IHsgRGlhbG9nIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvYmFzZS9EaWFsb2dcIlxuaW1wb3J0IHsgbGFuZyB9IGZyb20gXCIuLi8uLi9jb21tb24vbWlzYy9MYW5ndWFnZVZpZXdNb2RlbFwiXG5cbi8qXG5sYWJlbDogVHJhbnNsYXRpb25LZXkgfCBsYXp5PHN0cmluZz4sXG5cdHZhbHVlOiBTdHJlYW08c3RyaW5nPixcblx0cHJldmVudEF1dG9maWxsPzogYm9vbGVhbixcblx0dHlwZT86IFRleHRGaWVsZFR5cGUsXG5cdGhlbHBMYWJlbD86ID9sYXp5PENoaWxkcmVuPixcblx0YWxpZ25SaWdodD86IGJvb2xlYW4sXG5cdGluamVjdGlvbnNMZWZ0PzogbGF6eTxDaGlsZHJlbj4sIC8vIG9ubHkgdXNlZCBieSB0aGUgQnViYmxlVGV4dEZpZWxkIHRvIGRpc3BsYXkgYnViYmxlc1xuXHRpbmplY3Rpb25zUmlnaHQ/OiBsYXp5PENoaWxkcmVuPixcblx0a2V5SGFuZGxlcj86IGtleUhhbmRsZXIsIC8vIGludGVyY2VwdG9yIHVzZWQgYnkgdGhlIEJ1YmJsZVRleHRGaWVsZCB0byByZWFjdCBvbiBjZXJ0YWluIGtleXNcblx0b25mb2N1cz86IChkb206IEhUTUxFbGVtZW50LCBpbnB1dDogSFRNTElucHV0RWxlbWVudCkgPT4gbWl4ZWQsXG5cdG9uYmx1cj86IEZ1bmN0aW9uLFxuXHRtYXhXaWR0aD86IG51bWJlcixcblx0Y2xhc3M/OiBzdHJpbmcsXG4qL1xuZXhwb3J0IGZ1bmN0aW9uIHNob3dSZWplY3RlZFNlbmRlcnNJbmZvRGlhbG9nKHJlamVjdGVkU2VuZGVyOiBSZWplY3RlZFNlbmRlcikge1xuXHRjb25zdCBhY3Rpb25EaWFsb2dQcm9wZXJ0aWVzID0ge1xuXHRcdHRpdGxlOiBcImRldGFpbHNfbGFiZWxcIixcblx0XHRjaGlsZDoge1xuXHRcdFx0dmlldzogKCkgPT4ge1xuXHRcdFx0XHRyZXR1cm4gW1xuXHRcdFx0XHRcdG0oVGV4dEZpZWxkLCB7XG5cdFx0XHRcdFx0XHRsYWJlbDogXCJlbWFpbFNlbmRlcl9sYWJlbFwiLFxuXHRcdFx0XHRcdFx0dmFsdWU6IHJlamVjdGVkU2VuZGVyLnNlbmRlck1haWxBZGRyZXNzLFxuXHRcdFx0XHRcdFx0aXNSZWFkT25seTogdHJ1ZSxcblx0XHRcdFx0XHR9KSxcblx0XHRcdFx0XHRtKFRleHRGaWVsZCwge1xuXHRcdFx0XHRcdFx0bGFiZWw6IFwibWFpbFNlcnZlcl9sYWJlbFwiLFxuXHRcdFx0XHRcdFx0dmFsdWU6IGAke3JlamVjdGVkU2VuZGVyLnNlbmRlckhvc3RuYW1lfSAoJHtyZWplY3RlZFNlbmRlci5zZW5kZXJJcH0pYCxcblx0XHRcdFx0XHRcdGlzUmVhZE9ubHk6IHRydWUsXG5cdFx0XHRcdFx0fSksXG5cdFx0XHRcdFx0bShUZXh0RmllbGQsIHtcblx0XHRcdFx0XHRcdGxhYmVsOiBcImVtYWlsUmVjaXBpZW50X2xhYmVsXCIsXG5cdFx0XHRcdFx0XHR2YWx1ZTogcmVqZWN0ZWRTZW5kZXIucmVjaXBpZW50TWFpbEFkZHJlc3MsXG5cdFx0XHRcdFx0XHRpc1JlYWRPbmx5OiB0cnVlLFxuXHRcdFx0XHRcdH0pLFxuXHRcdFx0XHRcdG0oVGV4dEZpZWxkLCB7XG5cdFx0XHRcdFx0XHRsYWJlbDogXCJyZWplY3RSZWFzb25fbGFiZWxcIixcblx0XHRcdFx0XHRcdHZhbHVlOiByZWplY3RlZFNlbmRlci5yZWFzb24sXG5cdFx0XHRcdFx0XHRpc1JlYWRPbmx5OiB0cnVlLFxuXHRcdFx0XHRcdH0pLFxuXHRcdFx0XHRdXG5cdFx0XHR9LFxuXHRcdH0sXG5cdFx0b2tBY3Rpb246IG51bGwsXG5cdFx0YWxsb3dDYW5jZWw6IHRydWUsXG5cdFx0YWxsb3dPa1dpdGhSZXR1cm46IGZhbHNlLFxuXHRcdGNhbmNlbEFjdGlvblRleHRJZDogXCJjbG9zZV9hbHRcIixcblx0fSBhcyBjb25zdFxuXHREaWFsb2cuc2hvd0FjdGlvbkRpYWxvZyhhY3Rpb25EaWFsb2dQcm9wZXJ0aWVzKVxufVxuIiwiaW1wb3J0IHsgbGFuZywgVHJhbnNsYXRpb25LZXkgfSBmcm9tIFwiLi4vLi4vbWlzYy9MYW5ndWFnZVZpZXdNb2RlbC5qc1wiXG5pbXBvcnQgeyBEaWFsb2cgfSBmcm9tIFwiLi4vLi4vZ3VpL2Jhc2UvRGlhbG9nLmpzXCJcbmltcG9ydCB7IERFRkFVTFRfRlJFRV9NQUlMX0FERFJFU1NfU0lHTlVQX0RPTUFJTiwgTmV3UGFpZFBsYW5zLCBUVVRBX01BSUxfQUREUkVTU19ET01BSU5TIH0gZnJvbSBcIi4uLy4uL2FwaS9jb21tb24vVHV0YW5vdGFDb25zdGFudHMuanNcIlxuaW1wb3J0IG0gZnJvbSBcIm1pdGhyaWxcIlxuaW1wb3J0IHsgU2VsZWN0TWFpbEFkZHJlc3NGb3JtIH0gZnJvbSBcIi4uL1NlbGVjdE1haWxBZGRyZXNzRm9ybS5qc1wiXG5pbXBvcnQgeyBFeHBhbmRlclBhbmVsIH0gZnJvbSBcIi4uLy4uL2d1aS9iYXNlL0V4cGFuZGVyLmpzXCJcbmltcG9ydCB7IGZpbHRlckludCwgZ2V0Rmlyc3RPclRocm93LCBvZkNsYXNzIH0gZnJvbSBcIkB0dXRhby90dXRhbm90YS11dGlsc1wiXG5pbXBvcnQgeyBzaG93UHJvZ3Jlc3NEaWFsb2cgfSBmcm9tIFwiLi4vLi4vZ3VpL2RpYWxvZ3MvUHJvZ3Jlc3NEaWFsb2cuanNcIlxuaW1wb3J0IHsgSW52YWxpZERhdGFFcnJvciwgUHJlY29uZGl0aW9uRmFpbGVkRXJyb3IgfSBmcm9tIFwiLi4vLi4vYXBpL2NvbW1vbi9lcnJvci9SZXN0RXJyb3IuanNcIlxuaW1wb3J0IHsgTWFpbEFkZHJlc3NUYWJsZU1vZGVsIH0gZnJvbSBcIi4vTWFpbEFkZHJlc3NUYWJsZU1vZGVsLmpzXCJcbmltcG9ydCB7IEF1dG9jb21wbGV0ZSwgVGV4dEZpZWxkIH0gZnJvbSBcIi4uLy4uL2d1aS9iYXNlL1RleHRGaWVsZC5qc1wiXG5pbXBvcnQgeyBVcGdyYWRlUmVxdWlyZWRFcnJvciB9IGZyb20gXCIuLi8uLi9hcGkvbWFpbi9VcGdyYWRlUmVxdWlyZWRFcnJvci5qc1wiXG5pbXBvcnQgeyBzaG93UGxhblVwZ3JhZGVSZXF1aXJlZERpYWxvZyB9IGZyb20gXCIuLi8uLi9taXNjL1N1YnNjcmlwdGlvbkRpYWxvZ3MuanNcIlxuXG5jb25zdCBGQUlMVVJFX1VTRVJfRElTQUJMRUQgPSBcIm1haWxhZGRyZXNzYWxpYXNzZXJ2aWNlLmdyb3VwX2Rpc2FibGVkXCJcblxuZXhwb3J0IGZ1bmN0aW9uIHNob3dBZGRBbGlhc0RpYWxvZyhtb2RlbDogTWFpbEFkZHJlc3NUYWJsZU1vZGVsLCBpc05ld1BhaWRQbGFuOiBib29sZWFuKSB7XG5cdG1vZGVsLmdldEF2YWlsYWJsZURvbWFpbnMoKS50aGVuKChkb21haW5zKSA9PiB7XG5cdFx0Y29uc3QgaGFzQ3VzdG9tRG9tYWlucyA9IGRvbWFpbnMuc29tZSgoZG9tYWluKSA9PiAhVFVUQV9NQUlMX0FERFJFU1NfRE9NQUlOUy5pbmNsdWRlcyhkb21haW4uZG9tYWluKSlcblx0XHRpZiAobW9kZWwuYWxpYXNDb3VudCAmJiBmaWx0ZXJJbnQobW9kZWwuYWxpYXNDb3VudC51c2VkQWxpYXNlcykgPj0gZmlsdGVySW50KG1vZGVsLmFsaWFzQ291bnQudG90YWxBbGlhc2VzKSkge1xuXHRcdFx0aWYgKCEoaXNOZXdQYWlkUGxhbiAmJiBoYXNDdXN0b21Eb21haW5zKSkge1xuXHRcdFx0XHRtb2RlbC5oYW5kbGVUb29NYW55QWxpYXNlcygpLmNhdGNoKG9mQ2xhc3MoVXBncmFkZVJlcXVpcmVkRXJyb3IsIChlKSA9PiBzaG93UGxhblVwZ3JhZGVSZXF1aXJlZERpYWxvZyhlLnBsYW5zLCBlLm1lc3NhZ2UpKSlcblx0XHRcdFx0cmV0dXJuXG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0bGV0IGlzVmVyaWZpY2F0aW9uQnVzeSA9IGZhbHNlXG5cdFx0bGV0IG1haWxBZGRyZXNzOiBzdHJpbmdcblx0XHRsZXQgZm9ybUVycm9ySWQ6IFRyYW5zbGF0aW9uS2V5IHwgbnVsbCA9IFwibWFpbEFkZHJlc3NOZXV0cmFsX21zZ1wiXG5cdFx0bGV0IGZvcm1Eb21haW4gPSBnZXRGaXJzdE9yVGhyb3coZG9tYWlucylcblx0XHRpZiAoIWlzTmV3UGFpZFBsYW4gJiYgIWhhc0N1c3RvbURvbWFpbnMpIHtcblx0XHRcdGZvcm1Eb21haW4gPSBkb21haW5zLmZpbmQoKGRvbWFpbikgPT4gZG9tYWluLmRvbWFpbiA9PT0gREVGQVVMVF9GUkVFX01BSUxfQUREUkVTU19TSUdOVVBfRE9NQUlOKSA/PyBmb3JtRG9tYWluXG5cdFx0fVxuXHRcdGxldCBzZW5kZXJOYW1lID0gbW9kZWwuZGVmYXVsdFNlbmRlck5hbWUoKVxuXG5cdFx0Y29uc3QgYWRkRW1haWxBbGlhc09rQWN0aW9uID0gKGRpYWxvZzogRGlhbG9nKSA9PiB7XG5cdFx0XHRpZiAoaXNWZXJpZmljYXRpb25CdXN5KSByZXR1cm5cblxuXHRcdFx0aWYgKGZvcm1FcnJvcklkKSB7XG5cdFx0XHRcdERpYWxvZy5tZXNzYWdlKGZvcm1FcnJvcklkKVxuXHRcdFx0XHRyZXR1cm5cblx0XHRcdH1cblxuXHRcdFx0YWRkQWxpYXMobW9kZWwsIG1haWxBZGRyZXNzLCBzZW5kZXJOYW1lKVxuXHRcdFx0Ly8gY2xvc2UgdGhlIGFkZCBhbGlhcyBkaWFsb2cgaW1tZWRpYXRlbHlcblx0XHRcdGRpYWxvZy5jbG9zZSgpXG5cdFx0fVxuXG5cdFx0RGlhbG9nLnNob3dBY3Rpb25EaWFsb2coe1xuXHRcdFx0dGl0bGU6IFwiYWRkRW1haWxBbGlhc19sYWJlbFwiLFxuXHRcdFx0Y2hpbGQ6IHtcblx0XHRcdFx0dmlldzogKCkgPT4ge1xuXHRcdFx0XHRcdHJldHVybiBbXG5cdFx0XHRcdFx0XHRtKFNlbGVjdE1haWxBZGRyZXNzRm9ybSwge1xuXHRcdFx0XHRcdFx0XHRzZWxlY3RlZERvbWFpbjogZm9ybURvbWFpbixcblx0XHRcdFx0XHRcdFx0YXZhaWxhYmxlRG9tYWluczogZG9tYWlucyxcblx0XHRcdFx0XHRcdFx0b25WYWxpZGF0aW9uUmVzdWx0OiAoZW1haWwsIHZhbGlkYXRpb25SZXN1bHQpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRpZiAodmFsaWRhdGlvblJlc3VsdC5pc1ZhbGlkKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRtYWlsQWRkcmVzcyA9IGVtYWlsXG5cdFx0XHRcdFx0XHRcdFx0XHRmb3JtRXJyb3JJZCA9IG51bGxcblx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdFx0Zm9ybUVycm9ySWQgPSB2YWxpZGF0aW9uUmVzdWx0LmVycm9ySWRcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdG9uQnVzeVN0YXRlQ2hhbmdlZDogKGlzQnVzeSkgPT4gKGlzVmVyaWZpY2F0aW9uQnVzeSA9IGlzQnVzeSksXG5cdFx0XHRcdFx0XHRcdG9uRG9tYWluQ2hhbmdlZDogKGRvbWFpbikgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdGlmICghZG9tYWluLmlzUGFpZCB8fCBpc05ld1BhaWRQbGFuKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRmb3JtRG9tYWluID0gZG9tYWluXG5cdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRcdERpYWxvZy5jb25maXJtKFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRsYW5nLm1ha2VUcmFuc2xhdGlvbihcImNvbmZpcm1fbXNnXCIsIGAke2xhbmcuZ2V0KFwicGFpZEVtYWlsRG9tYWluTGVnYWN5X21zZ1wiKX1cXG4ke2xhbmcuZ2V0KFwiY2hhbmdlUGFpZFBsYW5fbXNnXCIpfWApLFxuXHRcdFx0XHRcdFx0XHRcdFx0KS50aGVuKGFzeW5jIChjb25maXJtZWQpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKGNvbmZpcm1lZCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlzTmV3UGFpZFBsYW4gPSBhd2FpdCBzaG93UGxhblVwZ3JhZGVSZXF1aXJlZERpYWxvZyhOZXdQYWlkUGxhbnMpXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0fSksXG5cdFx0XHRcdFx0XHRtKFxuXHRcdFx0XHRcdFx0XHRFeHBhbmRlclBhbmVsLFxuXHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0ZXhwYW5kZWQ6IFRVVEFfTUFJTF9BRERSRVNTX0RPTUFJTlMuaW5jbHVkZXMoZm9ybURvbWFpbi5kb21haW4pLFxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRtKFwiLnB0XCIsIGxhbmcuZ2V0KFwicGVybWFuZW50QWxpYXNXYXJuaW5nX21zZ1wiKSksXG5cdFx0XHRcdFx0XHQpLFxuXHRcdFx0XHRcdFx0bShUZXh0RmllbGQsIHtcblx0XHRcdFx0XHRcdFx0bGFiZWw6IFwibWFpbE5hbWVfbGFiZWxcIixcblx0XHRcdFx0XHRcdFx0dmFsdWU6IHNlbmRlck5hbWUsXG5cdFx0XHRcdFx0XHRcdGF1dG9jb21wbGV0ZUFzOiBBdXRvY29tcGxldGUudXNlcm5hbWUsXG5cdFx0XHRcdFx0XHRcdG9uaW5wdXQ6IChuYW1lKSA9PiAoc2VuZGVyTmFtZSA9IG5hbWUpLFxuXHRcdFx0XHRcdFx0fSksXG5cdFx0XHRcdFx0XVxuXHRcdFx0XHR9LFxuXHRcdFx0fSxcblx0XHRcdGFsbG93T2tXaXRoUmV0dXJuOiB0cnVlLFxuXHRcdFx0b2tBY3Rpb246IGFkZEVtYWlsQWxpYXNPa0FjdGlvbixcblx0XHR9KVxuXHR9KVxufVxuXG5hc3luYyBmdW5jdGlvbiBhZGRBbGlhcyhtb2RlbDogTWFpbEFkZHJlc3NUYWJsZU1vZGVsLCBhbGlhczogc3RyaW5nLCBzZW5kZXJOYW1lOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcblx0dHJ5IHtcblx0XHRhd2FpdCBzaG93UHJvZ3Jlc3NEaWFsb2coXCJwbGVhc2VXYWl0X21zZ1wiLCBtb2RlbC5hZGRBbGlhcyhhbGlhcywgc2VuZGVyTmFtZSkpXG5cdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0aWYgKGVycm9yIGluc3RhbmNlb2YgSW52YWxpZERhdGFFcnJvcikge1xuXHRcdFx0RGlhbG9nLm1lc3NhZ2UoXCJtYWlsQWRkcmVzc05BX21zZ1wiKVxuXHRcdH0gZWxzZSBpZiAoZXJyb3IgaW5zdGFuY2VvZiBQcmVjb25kaXRpb25GYWlsZWRFcnJvcikge1xuXHRcdFx0bGV0IGVycm9yTXNnID0gZXJyb3IudG9TdHJpbmcoKVxuXG5cdFx0XHRpZiAoZXJyb3IuZGF0YSA9PT0gRkFJTFVSRV9VU0VSX0RJU0FCTEVEKSB7XG5cdFx0XHRcdGVycm9yTXNnID0gbGFuZy5nZXQoXCJhZGRBbGlhc1VzZXJEaXNhYmxlZF9tc2dcIilcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIERpYWxvZy5tZXNzYWdlKGxhbmcubWFrZVRyYW5zbGF0aW9uKFwiY29uZmlybV9tc2dcIiwgZXJyb3JNc2cpKVxuXHRcdH0gZWxzZSBpZiAoZXJyb3IgaW5zdGFuY2VvZiBVcGdyYWRlUmVxdWlyZWRFcnJvcikge1xuXHRcdFx0c2hvd1BsYW5VcGdyYWRlUmVxdWlyZWREaWFsb2coZXJyb3IucGxhbnMsIGVycm9yLm1lc3NhZ2UpXG5cdFx0fSBlbHNlIHtcblx0XHRcdHRocm93IGVycm9yXG5cdFx0fVxuXHR9XG59XG4iLCJpbXBvcnQgbSwgeyBDaGlsZHJlbiwgQ29tcG9uZW50LCBWbm9kZSB9IGZyb20gXCJtaXRocmlsXCJcbmltcG9ydCB7IERpYWxvZyB9IGZyb20gXCIuLi8uLi9ndWkvYmFzZS9EaWFsb2cuanNcIlxuaW1wb3J0IHR5cGUgeyBUYWJsZUxpbmVBdHRycyB9IGZyb20gXCIuLi8uLi9ndWkvYmFzZS9UYWJsZS5qc1wiXG5pbXBvcnQgeyBDb2x1bW5XaWR0aCwgVGFibGUgfSBmcm9tIFwiLi4vLi4vZ3VpL2Jhc2UvVGFibGUuanNcIlxuaW1wb3J0IHsgbGFuZywgVHJhbnNsYXRpb25LZXkgfSBmcm9tIFwiLi4vLi4vbWlzYy9MYW5ndWFnZVZpZXdNb2RlbC5qc1wiXG5pbXBvcnQgeyBMaW1pdFJlYWNoZWRFcnJvciB9IGZyb20gXCIuLi8uLi9hcGkvY29tbW9uL2Vycm9yL1Jlc3RFcnJvci5qc1wiXG5pbXBvcnQgeyBvZkNsYXNzIH0gZnJvbSBcIkB0dXRhby90dXRhbm90YS11dGlsc1wiXG5pbXBvcnQgeyBJY29ucyB9IGZyb20gXCIuLi8uLi9ndWkvYmFzZS9pY29ucy9JY29ucy5qc1wiXG5pbXBvcnQgeyBzaG93UHJvZ3Jlc3NEaWFsb2cgfSBmcm9tIFwiLi4vLi4vZ3VpL2RpYWxvZ3MvUHJvZ3Jlc3NEaWFsb2cuanNcIlxuaW1wb3J0IHsgRXhwYW5kZXJCdXR0b24sIEV4cGFuZGVyUGFuZWwgfSBmcm9tIFwiLi4vLi4vZ3VpL2Jhc2UvRXhwYW5kZXIuanNcIlxuaW1wb3J0IHsgYXR0YWNoRHJvcGRvd24sIERyb3Bkb3duQnV0dG9uQXR0cnMgfSBmcm9tIFwiLi4vLi4vZ3VpL2Jhc2UvRHJvcGRvd24uanNcIlxuaW1wb3J0IHsgc2hvd05vdEF2YWlsYWJsZUZvckZyZWVEaWFsb2csIHNob3dQbGFuVXBncmFkZVJlcXVpcmVkRGlhbG9nIH0gZnJvbSBcIi4uLy4uL21pc2MvU3Vic2NyaXB0aW9uRGlhbG9ncy5qc1wiXG5pbXBvcnQgeyBhc3NlcnRNYWluT3JOb2RlIH0gZnJvbSBcIi4uLy4uL2FwaS9jb21tb24vRW52LmpzXCJcbmltcG9ydCB7IEljb25CdXR0b25BdHRycyB9IGZyb20gXCIuLi8uLi9ndWkvYmFzZS9JY29uQnV0dG9uLmpzXCJcbmltcG9ydCB7IEJ1dHRvblNpemUgfSBmcm9tIFwiLi4vLi4vZ3VpL2Jhc2UvQnV0dG9uU2l6ZS5qc1wiXG5pbXBvcnQgeyBBZGRyZXNzSW5mbywgQWRkcmVzc1N0YXR1cywgTWFpbEFkZHJlc3NUYWJsZU1vZGVsIH0gZnJvbSBcIi4vTWFpbEFkZHJlc3NUYWJsZU1vZGVsLmpzXCJcbmltcG9ydCB7IHNob3dBZGRBbGlhc0RpYWxvZyB9IGZyb20gXCIuL0FkZEFsaWFzRGlhbG9nLmpzXCJcbmltcG9ydCB7IGxvY2F0b3IgfSBmcm9tIFwiLi4vLi4vYXBpL21haW4vQ29tbW9uTG9jYXRvci5qc1wiXG5pbXBvcnQgeyBVcGdyYWRlUmVxdWlyZWRFcnJvciB9IGZyb20gXCIuLi8uLi9hcGkvbWFpbi9VcGdyYWRlUmVxdWlyZWRFcnJvci5qc1wiXG5cbmFzc2VydE1haW5Pck5vZGUoKVxuXG5leHBvcnQgdHlwZSBNYWlsQWRkcmVzc1RhYmxlQXR0cnMgPSB7XG5cdG1vZGVsOiBNYWlsQWRkcmVzc1RhYmxlTW9kZWxcblx0ZXhwYW5kZWQ6IGJvb2xlYW5cblx0b25FeHBhbmRlZDogKGV4cGFuZGVkOiBib29sZWFuKSA9PiB1bmtub3duXG59XG5cbi8qKiBTaG93cyBhIHRhYmxlIHdpdGggYWxsIGFsaWFzZXMgYW5kIGFiaWxpdHkgdG8gZW5hYmxlL2Rpc2FibGUgdGhlbSwgYWRkIG1vcmUgYW5kIHNldCBuYW1lcy4gKi9cbmV4cG9ydCBjbGFzcyBNYWlsQWRkcmVzc1RhYmxlIGltcGxlbWVudHMgQ29tcG9uZW50PE1haWxBZGRyZXNzVGFibGVBdHRycz4ge1xuXHR2aWV3KHsgYXR0cnMgfTogVm5vZGU8TWFpbEFkZHJlc3NUYWJsZUF0dHJzPik6IENoaWxkcmVuIHtcblx0XHRjb25zdCB7IG1vZGVsIH0gPSBhdHRyc1xuXHRcdC8vIElmIHRoZSB0YWJsZSBpcyBleHBhbmRlZCB3ZSBuZWVkIHRvIGluaXQgdGhlIG1vZGVsLlxuXHRcdC8vIEl0IGlzIG5vLW9wIHRvIGluaXQgbXVsdGlwbGUgdGltZXMgc28gaXQncyBzYWZlLlxuXHRcdGlmIChhdHRycy5leHBhbmRlZCkge1xuXHRcdFx0bW9kZWwuaW5pdCgpXG5cdFx0fVxuXHRcdGNvbnN0IGFkZEFsaWFzQnV0dG9uQXR0cnM6IEljb25CdXR0b25BdHRycyB8IG51bGwgPSBtb2RlbC51c2VyQ2FuTW9kaWZ5QWxpYXNlcygpXG5cdFx0XHQ/IHtcblx0XHRcdFx0XHR0aXRsZTogXCJhZGRFbWFpbEFsaWFzX2xhYmVsXCIsXG5cdFx0XHRcdFx0Y2xpY2s6ICgpID0+IHRoaXMub25BZGRBbGlhcyhhdHRycyksXG5cdFx0XHRcdFx0aWNvbjogSWNvbnMuQWRkLFxuXHRcdFx0XHRcdHNpemU6IEJ1dHRvblNpemUuQ29tcGFjdCxcblx0XHRcdCAgfVxuXHRcdFx0OiBudWxsXG5cdFx0cmV0dXJuIFtcblx0XHRcdG0oXCIuZmxleC1zcGFjZS1iZXR3ZWVuLml0ZW1zLWNlbnRlci5tdC1sLm1iLXNcIiwgW1xuXHRcdFx0XHRtKFwiLmg0XCIsIGxhbmcuZ2V0KFwibWFpbEFkZHJlc3Nlc19sYWJlbFwiKSksXG5cdFx0XHRcdG0oRXhwYW5kZXJCdXR0b24sIHtcblx0XHRcdFx0XHRsYWJlbDogXCJzaG93X2FjdGlvblwiLFxuXHRcdFx0XHRcdGV4cGFuZGVkOiBhdHRycy5leHBhbmRlZCxcblx0XHRcdFx0XHRvbkV4cGFuZGVkQ2hhbmdlOiAodikgPT4ge1xuXHRcdFx0XHRcdFx0YXR0cnMub25FeHBhbmRlZCh2KVxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdH0pLFxuXHRcdFx0XSksXG5cdFx0XHRtKFxuXHRcdFx0XHRFeHBhbmRlclBhbmVsLFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0ZXhwYW5kZWQ6IGF0dHJzLmV4cGFuZGVkLFxuXHRcdFx0XHR9LFxuXHRcdFx0XHRtKFRhYmxlLCB7XG5cdFx0XHRcdFx0Y29sdW1uSGVhZGluZzogW1wibWFpbEFkZHJlc3NfbGFiZWxcIiwgXCJzdGF0ZV9sYWJlbFwiXSxcblx0XHRcdFx0XHRjb2x1bW5XaWR0aHM6IFtDb2x1bW5XaWR0aC5MYXJnZXN0LCBDb2x1bW5XaWR0aC5TbWFsbF0sXG5cdFx0XHRcdFx0c2hvd0FjdGlvbkJ1dHRvbkNvbHVtbjogdHJ1ZSxcblx0XHRcdFx0XHRhZGRCdXR0b25BdHRyczogYWRkQWxpYXNCdXR0b25BdHRycyxcblx0XHRcdFx0XHRsaW5lczogZ2V0QWxpYXNMaW5lQXR0cnMoYXR0cnMpLFxuXHRcdFx0XHR9KSxcblx0XHRcdCksXG5cdFx0XHRtb2RlbC5hbGlhc0NvdW50XG5cdFx0XHRcdD8gW1xuXHRcdFx0XHRcdFx0bShcblx0XHRcdFx0XHRcdFx0XCIubXQtc1wiLFxuXHRcdFx0XHRcdFx0XHRsYW5nLmdldChcImFtb3VudFVzZWRBbmRBY3RpdmF0ZWRPZl9sYWJlbFwiLCB7XG5cdFx0XHRcdFx0XHRcdFx0XCJ7dXNlZH1cIjogbW9kZWwuYWxpYXNDb3VudC51c2VkQWxpYXNlcyxcblx0XHRcdFx0XHRcdFx0XHRcInthY3RpdmV9XCI6IG1vZGVsLmFsaWFzQ291bnQuZW5hYmxlZEFsaWFzZXMsXG5cdFx0XHRcdFx0XHRcdFx0XCJ7dG90YWxBbW91bnR9XCI6IG1vZGVsLmFsaWFzQ291bnQudG90YWxBbGlhc2VzLFxuXHRcdFx0XHRcdFx0XHR9KSxcblx0XHRcdFx0XHRcdCksXG5cdFx0XHRcdFx0XHRtKFwiLnNtYWxsLm10LXNcIiwgbGFuZy5nZXQobW9kZWwuYWxpYXNMaW1pdEluY2x1ZGVzQ3VzdG9tRG9tYWlucygpID8gXCJtYWlsQWRkcmVzc0luZm9MZWdhY3lfbXNnXCIgOiBcIm1haWxBZGRyZXNzSW5mb19tc2dcIikpLFxuXHRcdFx0XHQgIF1cblx0XHRcdFx0OiBudWxsLFxuXHRcdF1cblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgb25BZGRBbGlhcyhhdHRyczogTWFpbEFkZHJlc3NUYWJsZUF0dHJzKSB7XG5cdFx0Y29uc3QgdXNlckNvbnRyb2xsZXIgPSBsb2NhdG9yLmxvZ2lucy5nZXRVc2VyQ29udHJvbGxlcigpXG5cdFx0aWYgKHVzZXJDb250cm9sbGVyLmlzRnJlZUFjY291bnQoKSkge1xuXHRcdFx0c2hvd05vdEF2YWlsYWJsZUZvckZyZWVEaWFsb2coKVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRjb25zdCBpc05ld1BhaWRQbGFuID0gYXdhaXQgdXNlckNvbnRyb2xsZXIuaXNOZXdQYWlkUGxhbigpXG5cdFx0XHRzaG93QWRkQWxpYXNEaWFsb2coYXR0cnMubW9kZWwsIGlzTmV3UGFpZFBsYW4pXG5cdFx0fVxuXHR9XG59XG5cbmZ1bmN0aW9uIHNldE5hbWVEcm9wZG93bkJ1dHRvbihtb2RlbDogTWFpbEFkZHJlc3NUYWJsZU1vZGVsLCBhZGRyZXNzSW5mbzogQWRkcmVzc0luZm8pOiBEcm9wZG93bkJ1dHRvbkF0dHJzIHtcblx0cmV0dXJuIHtcblx0XHRsYWJlbDogXCJzZXRTZW5kZXJOYW1lX2FjdGlvblwiLFxuXHRcdGNsaWNrOiAoKSA9PiBzaG93U2VuZGVyTmFtZUNoYW5nZURpYWxvZyhtb2RlbCwgYWRkcmVzc0luZm8pLFxuXHR9XG59XG5cbmZ1bmN0aW9uIGFkZHJlc3NEcm9wZG93bkJ1dHRvbnMoYXR0cnM6IE1haWxBZGRyZXNzVGFibGVBdHRycywgYWRkcmVzc0luZm86IEFkZHJlc3NJbmZvKTogRHJvcGRvd25CdXR0b25BdHRyc1tdIHtcblx0c3dpdGNoIChhZGRyZXNzSW5mby5zdGF0dXMpIHtcblx0XHRjYXNlIEFkZHJlc3NTdGF0dXMuUHJpbWFyeTpcblx0XHRcdHJldHVybiBbc2V0TmFtZURyb3Bkb3duQnV0dG9uKGF0dHJzLm1vZGVsLCBhZGRyZXNzSW5mbyldXG5cdFx0Y2FzZSBBZGRyZXNzU3RhdHVzLkFsaWFzOiB7XG5cdFx0XHRjb25zdCBidXR0b25zID0gW3NldE5hbWVEcm9wZG93bkJ1dHRvbihhdHRycy5tb2RlbCwgYWRkcmVzc0luZm8pXVxuXHRcdFx0aWYgKGF0dHJzLm1vZGVsLnVzZXJDYW5Nb2RpZnlBbGlhc2VzKCkpIHtcblx0XHRcdFx0YnV0dG9ucy5wdXNoKHtcblx0XHRcdFx0XHRsYWJlbDogXCJkZWFjdGl2YXRlX2FjdGlvblwiLFxuXHRcdFx0XHRcdGNsaWNrOiAoKSA9PiB7XG5cdFx0XHRcdFx0XHRzd2l0Y2hBbGlhc1N0YXR1cyhhZGRyZXNzSW5mbywgYXR0cnMpXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0fSlcblx0XHRcdH1cblx0XHRcdHJldHVybiBidXR0b25zXG5cdFx0fVxuXHRcdGNhc2UgQWRkcmVzc1N0YXR1cy5EaXNhYmxlZEFsaWFzOiB7XG5cdFx0XHRyZXR1cm4gYXR0cnMubW9kZWwudXNlckNhbk1vZGlmeUFsaWFzZXMoKVxuXHRcdFx0XHQ/IFtcblx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0bGFiZWw6IFwiYWN0aXZhdGVfYWN0aW9uXCIsXG5cdFx0XHRcdFx0XHRcdGNsaWNrOiAoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0c3dpdGNoQWxpYXNTdGF0dXMoYWRkcmVzc0luZm8sIGF0dHJzKVxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0ICBdXG5cdFx0XHRcdDogW11cblx0XHR9XG5cdFx0Y2FzZSBBZGRyZXNzU3RhdHVzLkN1c3RvbToge1xuXHRcdFx0Y29uc3QgYnV0dG9ucyA9IFtzZXROYW1lRHJvcGRvd25CdXR0b24oYXR0cnMubW9kZWwsIGFkZHJlc3NJbmZvKV1cblx0XHRcdGlmIChhdHRycy5tb2RlbC51c2VyQ2FuTW9kaWZ5QWxpYXNlcygpKSB7XG5cdFx0XHRcdGJ1dHRvbnMucHVzaCh7XG5cdFx0XHRcdFx0bGFiZWw6IFwiZGVsZXRlX2FjdGlvblwiLFxuXHRcdFx0XHRcdGNsaWNrOiAoKSA9PiB7XG5cdFx0XHRcdFx0XHRzd2l0Y2hBbGlhc1N0YXR1cyhhZGRyZXNzSW5mbywgYXR0cnMpXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0fSlcblx0XHRcdH1cblx0XHRcdHJldHVybiBidXR0b25zXG5cdFx0fVxuXHR9XG59XG5cbmZ1bmN0aW9uIHN0YXR1c0xhYmVsKGFkZHJlc3NJbmZvOiBBZGRyZXNzSW5mbyk6IHN0cmluZyB7XG5cdHN3aXRjaCAoYWRkcmVzc0luZm8uc3RhdHVzKSB7XG5cdFx0Y2FzZSBBZGRyZXNzU3RhdHVzLlByaW1hcnk6XG5cdFx0XHRyZXR1cm4gbGFuZy5nZXQoXCJwcmltYXJ5TWFpbEFkZHJlc3NfbGFiZWxcIilcblx0XHRjYXNlIEFkZHJlc3NTdGF0dXMuQWxpYXM6XG5cdFx0Y2FzZSBBZGRyZXNzU3RhdHVzLkN1c3RvbTpcblx0XHRcdHJldHVybiBsYW5nLmdldChcImFjdGl2YXRlZF9sYWJlbFwiKVxuXHRcdGNhc2UgQWRkcmVzc1N0YXR1cy5EaXNhYmxlZEFsaWFzOlxuXHRcdFx0cmV0dXJuIGxhbmcuZ2V0KFwiZGVhY3RpdmF0ZWRfbGFiZWxcIilcblx0fVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0QWxpYXNMaW5lQXR0cnMoYXR0cnM6IE1haWxBZGRyZXNzVGFibGVBdHRycyk6IEFycmF5PFRhYmxlTGluZUF0dHJzPiB7XG5cdHJldHVybiBhdHRycy5tb2RlbC5hZGRyZXNzZXMoKS5tYXAoKGFkZHJlc3NJbmZvKSA9PiB7XG5cdFx0Y29uc3QgZHJvcGRvd25CdXR0b25zID0gYWRkcmVzc0Ryb3Bkb3duQnV0dG9ucyhhdHRycywgYWRkcmVzc0luZm8pXG5cdFx0Ly8gZG8gbm90IGRpc3BsYXkgdGhlIFwibW9yZVwiIGJ1dHRvbiBpZiB0aGVyZSBhcmUgbm8gYXZhaWxhYmxlIGFjdGlvbnNcblx0XHRjb25zdCBhY3Rpb25CdXR0b25BdHRyczogSWNvbkJ1dHRvbkF0dHJzIHwgbnVsbCA9XG5cdFx0XHRkcm9wZG93bkJ1dHRvbnMubGVuZ3RoID09PSAwXG5cdFx0XHRcdD8gbnVsbFxuXHRcdFx0XHQ6IGF0dGFjaERyb3Bkb3duKHtcblx0XHRcdFx0XHRcdG1haW5CdXR0b25BdHRyczoge1xuXHRcdFx0XHRcdFx0XHR0aXRsZTogXCJlZGl0X2FjdGlvblwiLFxuXHRcdFx0XHRcdFx0XHRpY29uOiBJY29ucy5Nb3JlLFxuXHRcdFx0XHRcdFx0XHRzaXplOiBCdXR0b25TaXplLkNvbXBhY3QsXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0c2hvd0Ryb3Bkb3duOiAoKSA9PiB0cnVlLFxuXHRcdFx0XHRcdFx0d2lkdGg6IDI1MCxcblx0XHRcdFx0XHRcdGNoaWxkQXR0cnM6ICgpID0+IGRyb3Bkb3duQnV0dG9ucyxcblx0XHRcdFx0ICB9KVxuXHRcdHJldHVybiB7XG5cdFx0XHRjZWxsczogKCkgPT4gW3sgbWFpbjogYWRkcmVzc0luZm8uYWRkcmVzcywgaW5mbzogW2FkZHJlc3NJbmZvLm5hbWVdIH0sIHsgbWFpbjogc3RhdHVzTGFiZWwoYWRkcmVzc0luZm8pIH1dLFxuXHRcdFx0YWN0aW9uQnV0dG9uQXR0cnM6IGFjdGlvbkJ1dHRvbkF0dHJzLFxuXHRcdH1cblx0fSlcbn1cblxuYXN5bmMgZnVuY3Rpb24gc3dpdGNoQWxpYXNTdGF0dXMoYWxpYXM6IEFkZHJlc3NJbmZvLCBhdHRyczogTWFpbEFkZHJlc3NUYWJsZUF0dHJzKSB7XG5cdGNvbnN0IGRlYWN0aXZhdGVPckRlbGV0ZUFsaWFzID0gYWxpYXMuc3RhdHVzICE9PSBBZGRyZXNzU3RhdHVzLkRpc2FibGVkQWxpYXNcblx0aWYgKGRlYWN0aXZhdGVPckRlbGV0ZUFsaWFzKSB7XG5cdFx0Ly8gYWxpYXMgZnJvbSBjdXN0b20gZG9tYWlucyB3aWxsIGJlIGRlbGV0ZWQuIFR1dGFub3RhIGFsaWFzZXMgd2lsbCBiZSBkZWFjdGl2YXRlZFxuXHRcdGNvbnN0IG1lc3NhZ2U6IFRyYW5zbGF0aW9uS2V5ID0gYWxpYXMuc3RhdHVzID09PSBBZGRyZXNzU3RhdHVzLkN1c3RvbSA/IFwiZGVsZXRlQWxpYXNfbXNnXCIgOiBcImRlYWN0aXZhdGVBbGlhc19tc2dcIlxuXHRcdGNvbnN0IGNvbmZpcm1lZCA9IGF3YWl0IERpYWxvZy5jb25maXJtKFxuXHRcdFx0bGFuZy5nZXRUcmFuc2xhdGlvbihtZXNzYWdlLCB7XG5cdFx0XHRcdFwiezF9XCI6IGFsaWFzLmFkZHJlc3MsXG5cdFx0XHR9KSxcblx0XHQpXG5cdFx0aWYgKCFjb25maXJtZWQpIHtcblx0XHRcdHJldHVyblxuXHRcdH1cblx0fVxuXG5cdGNvbnN0IHVwZGF0ZU1vZGVsID0gYXR0cnMubW9kZWxcblx0XHQuc2V0QWxpYXNTdGF0dXMoYWxpYXMuYWRkcmVzcywgIWRlYWN0aXZhdGVPckRlbGV0ZUFsaWFzKVxuXHRcdC5jYXRjaChvZkNsYXNzKExpbWl0UmVhY2hlZEVycm9yLCAoKSA9PiBhdHRycy5tb2RlbC5oYW5kbGVUb29NYW55QWxpYXNlcygpKSlcblx0XHQuY2F0Y2gob2ZDbGFzcyhVcGdyYWRlUmVxdWlyZWRFcnJvciwgKGUpID0+IHNob3dQbGFuVXBncmFkZVJlcXVpcmVkRGlhbG9nKGUucGxhbnMsIGUubWVzc2FnZSkpKVxuXHRhd2FpdCBzaG93UHJvZ3Jlc3NEaWFsb2coXCJwbGVhc2VXYWl0X21zZ1wiLCB1cGRhdGVNb2RlbClcbn1cblxuZnVuY3Rpb24gc2hvd1NlbmRlck5hbWVDaGFuZ2VEaWFsb2cobW9kZWw6IE1haWxBZGRyZXNzVGFibGVNb2RlbCwgYWxpYXM6IHsgYWRkcmVzczogc3RyaW5nOyBuYW1lOiBzdHJpbmcgfSkge1xuXHREaWFsb2cuc2hvd1RleHRJbnB1dERpYWxvZyh7XG5cdFx0dGl0bGU6IFwiZWRpdF9hY3Rpb25cIixcblx0XHRsYWJlbDogXCJtYWlsTmFtZV9sYWJlbFwiLFxuXHRcdGluZm9Nc2dJZDogbGFuZy5tYWtlVHJhbnNsYXRpb24oXCJhbGlhc19hZGRyXCIsIGFsaWFzLmFkZHJlc3MpLFxuXHRcdGRlZmF1bHRWYWx1ZTogYWxpYXMubmFtZSxcblx0fSkudGhlbigobmV3TmFtZSkgPT4gc2hvd1Byb2dyZXNzRGlhbG9nKFwicGxlYXNlV2FpdF9tc2dcIiwgbW9kZWwuc2V0QWxpYXNOYW1lKGFsaWFzLmFkZHJlc3MsIG5ld05hbWUpKSlcbn1cbiIsImltcG9ydCB7IFNlbGVjdE1haWxBZGRyZXNzRm9ybSwgU2VsZWN0TWFpbEFkZHJlc3NGb3JtQXR0cnMgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL3NldHRpbmdzL1NlbGVjdE1haWxBZGRyZXNzRm9ybS5qc1wiXG5pbXBvcnQgbSwgeyBDaGlsZHJlbiwgQ29tcG9uZW50LCBWbm9kZSwgVm5vZGVET00gfSBmcm9tIFwibWl0aHJpbFwiXG5pbXBvcnQgeyBnZXRBbGlhc0xpbmVBdHRycyB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vc2V0dGluZ3MvbWFpbGFkZHJlc3MvTWFpbEFkZHJlc3NUYWJsZS5qc1wiXG5pbXBvcnQgdHlwZSB7IEFkZERvbWFpbkRhdGEgfSBmcm9tIFwiLi9BZGREb21haW5XaXphcmRcIlxuaW1wb3J0IHsgQ3VzdG9tZXJUeXBlUmVmLCBHcm91cEluZm9UeXBlUmVmIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9hcGkvZW50aXRpZXMvc3lzL1R5cGVSZWZzLmpzXCJcbmltcG9ydCB7IG5ldmVyTnVsbCB9IGZyb20gXCJAdHV0YW8vdHV0YW5vdGEtdXRpbHNcIlxuaW1wb3J0IHsgRGlhbG9nIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9ndWkvYmFzZS9EaWFsb2dcIlxuaW1wb3J0IHsgbG9jYXRvciB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vYXBpL21haW4vQ29tbW9uTG9jYXRvclwiXG5pbXBvcnQgdHlwZSB7IFRyYW5zbGF0aW9uS2V5IH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9taXNjL0xhbmd1YWdlVmlld01vZGVsXCJcbmltcG9ydCB7IGxhbmcgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL21pc2MvTGFuZ3VhZ2VWaWV3TW9kZWxcIlxuaW1wb3J0IHR5cGUgeyBUYWJsZUF0dHJzIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9ndWkvYmFzZS9UYWJsZS5qc1wiXG5pbXBvcnQgeyBDb2x1bW5XaWR0aCwgVGFibGUgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2d1aS9iYXNlL1RhYmxlLmpzXCJcbmltcG9ydCB0eXBlIHsgV2l6YXJkUGFnZUF0dHJzIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9ndWkvYmFzZS9XaXphcmREaWFsb2cuanNcIlxuaW1wb3J0IHsgZW1pdFdpemFyZEV2ZW50LCBXaXphcmRFdmVudFR5cGUgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2d1aS9iYXNlL1dpemFyZERpYWxvZy5qc1wiXG5pbXBvcnQgeyBzaG93UHJvZ3Jlc3NEaWFsb2cgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2d1aS9kaWFsb2dzL1Byb2dyZXNzRGlhbG9nXCJcbmltcG9ydCB7IEludmFsaWREYXRhRXJyb3IsIExpbWl0UmVhY2hlZEVycm9yIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9hcGkvY29tbW9uL2Vycm9yL1Jlc3RFcnJvclwiXG5pbXBvcnQgeyBhc3NlcnRNYWluT3JOb2RlIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9hcGkvY29tbW9uL0VudlwiXG5pbXBvcnQgeyBJY29ucyB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZ3VpL2Jhc2UvaWNvbnMvSWNvbnNcIlxuaW1wb3J0IHsgQnV0dG9uU2l6ZSB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZ3VpL2Jhc2UvQnV0dG9uU2l6ZS5qc1wiXG5pbXBvcnQgeyBVcGdyYWRlUmVxdWlyZWRFcnJvciB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vYXBpL21haW4vVXBncmFkZVJlcXVpcmVkRXJyb3IuanNcIlxuaW1wb3J0IHsgc2hvd1BsYW5VcGdyYWRlUmVxdWlyZWREaWFsb2cgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL21pc2MvU3Vic2NyaXB0aW9uRGlhbG9ncy5qc1wiXG5pbXBvcnQgeyBMb2dpbkJ1dHRvbiB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZ3VpL2Jhc2UvYnV0dG9ucy9Mb2dpbkJ1dHRvbi5qc1wiXG5cbmFzc2VydE1haW5Pck5vZGUoKVxuXG4vKipcbiAqIFBhcnQgb2YgdGhlIGN1c3RvbSBkb21haW4gd2l6YXJkIHdoZXJlIHVzZXIgY2FuIGFkZCBtYWlsIGFkZHJlc3NlcyBmb3IgdGhlIG5ldyBkb21haW4uXG4gKi9cbmV4cG9ydCBjbGFzcyBBZGRFbWFpbEFkZHJlc3Nlc1BhZ2UgaW1wbGVtZW50cyBDb21wb25lbnQ8QWRkRW1haWxBZGRyZXNzZXNQYWdlQXR0cnM+IHtcblx0b25jcmVhdGUoeyBhdHRycyB9OiBWbm9kZURPTTxBZGRFbWFpbEFkZHJlc3Nlc1BhZ2VBdHRycz4pIHtcblx0XHRhdHRycy5kYXRhLmVkaXRBbGlhc0Zvcm1BdHRycy5tb2RlbC5pbml0KClcblx0fVxuXG5cdG9ucmVtb3ZlKHsgYXR0cnMgfTogVm5vZGU8QWRkRW1haWxBZGRyZXNzZXNQYWdlQXR0cnM+KSB7XG5cdFx0Ly8gTWFpbEFkZHJlc3NUYWJsZU1vZGVsLmRpc3Bvc2UgaXMgaGFuZGxlZCBieSB0aGUgQWRkRG9tYWluV2l6YXJkIGNsb3NlIGFjdGlvbiBpbiBvcmRlciB0byBhbGxvdyBnb2luZyBiYWNrIGFuZCBmb3J0aCBuYXZpZ2F0aW9uIHdpdGhpbiB0aGUgd2l6YXJkIGRpYWxvZy5cblx0fVxuXG5cdHZpZXcodm5vZGU6IFZub2RlPEFkZEVtYWlsQWRkcmVzc2VzUGFnZUF0dHJzPik6IENoaWxkcmVuIHtcblx0XHRjb25zdCBhID0gdm5vZGUuYXR0cnNcblx0XHRjb25zdCBhbGlhc2VzVGFibGVBdHRyczogVGFibGVBdHRycyA9IHtcblx0XHRcdGNvbHVtbldpZHRoczogW0NvbHVtbldpZHRoLkxhcmdlc3RdLFxuXHRcdFx0c2hvd0FjdGlvbkJ1dHRvbkNvbHVtbjogdHJ1ZSxcblx0XHRcdGFkZEJ1dHRvbkF0dHJzOiBudWxsLFxuXHRcdFx0bGluZXM6IGdldEFsaWFzTGluZUF0dHJzKGEuZGF0YS5lZGl0QWxpYXNGb3JtQXR0cnMpLm1hcCgocm93KSA9PiB7XG5cdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0YWN0aW9uQnV0dG9uQXR0cnM6IHJvdy5hY3Rpb25CdXR0b25BdHRycyA/PyBudWxsLFxuXHRcdFx0XHRcdGNlbGxzOiByb3cuY2VsbHMsXG5cdFx0XHRcdH1cblx0XHRcdH0pLFxuXHRcdH1cblx0XHRsZXQgZG9tYWluSW5mbyA9IHsgZG9tYWluOiBhLmRhdGEuZG9tYWluKCksIGlzUGFpZDogZmFsc2UgfVxuXHRcdGNvbnN0IG1haWxGb3JtQXR0cnM6IFNlbGVjdE1haWxBZGRyZXNzRm9ybUF0dHJzID0ge1xuXHRcdFx0c2VsZWN0ZWREb21haW46IGRvbWFpbkluZm8sXG5cdFx0XHQvLyBpdCBpcyBhIGN1c3RvbSBkb21haW4gc28gaXQncyBub3QgYSBzcGVjaWFsIG9uZVxuXHRcdFx0YXZhaWxhYmxlRG9tYWluczogW2RvbWFpbkluZm9dLFxuXHRcdFx0b25WYWxpZGF0aW9uUmVzdWx0OiAoZW1haWwsIHZhbGlkYXRpb25SZXN1bHQpID0+IHtcblx0XHRcdFx0aWYgKHZhbGlkYXRpb25SZXN1bHQuaXNWYWxpZCkge1xuXHRcdFx0XHRcdGEubWFpbEFkZHJlc3MgPSBlbWFpbFxuXHRcdFx0XHRcdGEuZXJyb3JNZXNzYWdlSWQgPSBudWxsXG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0YS5lcnJvck1lc3NhZ2VJZCA9IHZhbGlkYXRpb25SZXN1bHQuZXJyb3JJZFxuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdFx0b25Eb21haW5DaGFuZ2VkOiAoZG9tYWluKSA9PiAoZG9tYWluSW5mbyA9IGRvbWFpbiksXG5cdFx0XHRvbkJ1c3lTdGF0ZUNoYW5nZWQ6IChpc0J1c3kpID0+IChhLmlzTWFpbFZlcmlmaWNhdGlvbkJ1c3kgPSBpc0J1c3kpLFxuXHRcdFx0aW5qZWN0aW9uc1JpZ2h0QnV0dG9uQXR0cnM6IHtcblx0XHRcdFx0dGl0bGU6IFwiYWRkRW1haWxBbGlhc19sYWJlbFwiLFxuXHRcdFx0XHRpY29uOiBJY29ucy5BZGQsXG5cdFx0XHRcdHNpemU6IEJ1dHRvblNpemUuQ29tcGFjdCxcblx0XHRcdFx0Y2xpY2s6ICgpID0+XG5cdFx0XHRcdFx0dm5vZGUuYXR0cnMuYWRkQWxpYXNGcm9tSW5wdXQoKS50aGVuKCgpID0+IHtcblx0XHRcdFx0XHRcdG0ucmVkcmF3KClcblx0XHRcdFx0XHR9KSxcblx0XHRcdH0sXG5cdFx0fVxuXHRcdHJldHVybiBtKFwiXCIsIFtcblx0XHRcdG0oXCJoNC5tdC1sLnRleHQtY2VudGVyXCIsIGxhbmcuZ2V0KFwiYWRkQ3VzdG9tRG9tYWluQWRkcmVzc2VzX3RpdGxlXCIpKSxcblx0XHRcdG0oXCIubXQubWJcIiwgbGFuZy5nZXQoXCJhZGRDdXN0b21Eb21haW5BZGRBZHJlc3Nlc19tc2dcIikpLFxuXHRcdFx0bShTZWxlY3RNYWlsQWRkcmVzc0Zvcm0sIG1haWxGb3JtQXR0cnMpLFxuXHRcdFx0bG9jYXRvci5sb2dpbnMuZ2V0VXNlckNvbnRyb2xsZXIoKS51c2VyR3JvdXBJbmZvLm1haWxBZGRyZXNzQWxpYXNlcy5sZW5ndGggPyBtKFRhYmxlLCBhbGlhc2VzVGFibGVBdHRycykgOiBudWxsLFxuXHRcdFx0bShcblx0XHRcdFx0XCIuZmxleC1jZW50ZXIuZnVsbC13aWR0aC5wdC1sLm1iLWxcIixcblx0XHRcdFx0bShMb2dpbkJ1dHRvbiwge1xuXHRcdFx0XHRcdGxhYmVsOiBcIm5leHRfYWN0aW9uXCIsXG5cdFx0XHRcdFx0Y2xhc3M6IFwic21hbGwtbG9naW4tYnV0dG9uXCIsXG5cdFx0XHRcdFx0b25jbGljazogKCkgPT4gZW1pdFdpemFyZEV2ZW50KCh2bm9kZSBhcyBWbm9kZURPTTxBZGRFbWFpbEFkZHJlc3Nlc1BhZ2VBdHRycz4pLmRvbSBhcyBIVE1MRWxlbWVudCwgV2l6YXJkRXZlbnRUeXBlLlNIT1dfTkVYVF9QQUdFKSxcblx0XHRcdFx0fSksXG5cdFx0XHQpLFxuXHRcdF0pXG5cdH1cbn1cblxuZXhwb3J0IGNsYXNzIEFkZEVtYWlsQWRkcmVzc2VzUGFnZUF0dHJzIGltcGxlbWVudHMgV2l6YXJkUGFnZUF0dHJzPEFkZERvbWFpbkRhdGE+IHtcblx0ZGF0YTogQWRkRG9tYWluRGF0YVxuXHRtYWlsQWRkcmVzczogc3RyaW5nXG5cdGVycm9yTWVzc2FnZUlkOiBUcmFuc2xhdGlvbktleSB8IG51bGxcblx0aXNNYWlsVmVyaWZpY2F0aW9uQnVzeTogYm9vbGVhblxuXG5cdGNvbnN0cnVjdG9yKGRvbWFpbkRhdGE6IEFkZERvbWFpbkRhdGEpIHtcblx0XHR0aGlzLmRhdGEgPSBkb21haW5EYXRhXG5cdFx0dGhpcy5tYWlsQWRkcmVzcyA9IFwiXCJcblx0XHR0aGlzLmVycm9yTWVzc2FnZUlkID0gXCJtYWlsQWRkcmVzc05ldXRyYWxfbXNnXCIgLy8gd2UgbmVlZCB0byBzZXQgdGhpcyBtZXNzYWdlIGlkIHRvIHByZXZlbnQgdGhhdCBhbiBlbXB0eSBpbnB1dCBpcyBpbml0aWFsbHkgcmVnYXJkZWQgYXMgdmFsaWRcblx0XHR0aGlzLmlzTWFpbFZlcmlmaWNhdGlvbkJ1c3kgPSBmYWxzZVxuXHR9XG5cblx0aGVhZGVyVGl0bGUoKTogVHJhbnNsYXRpb25LZXkge1xuXHRcdHJldHVybiBcImRvbWFpblNldHVwX3RpdGxlXCJcblx0fVxuXG5cdG5leHRBY3Rpb24oc2hvd0Vycm9yRGlhbG9nOiBib29sZWFuKTogUHJvbWlzZTxib29sZWFuPiB7XG5cdFx0aWYgKHRoaXMuaXNNYWlsVmVyaWZpY2F0aW9uQnVzeSkgcmV0dXJuIFByb21pc2UucmVzb2x2ZShmYWxzZSlcblxuXHRcdC8vV2UgdHJ5IHRvIGFkZCBhbiBhbGlhcyBmcm9tIHRoZSBpbnB1dCBmaWVsZCwgaWYgaXQgaXMgbm90IGVtcHR5IGFuZCBlcnJvciBkaWFsb2dzIGFyZSBhbGxvd2VkXG5cdFx0aWYgKHNob3dFcnJvckRpYWxvZyAmJiB0aGlzLmVycm9yTWVzc2FnZUlkKSB7XG5cdFx0XHQvL1dlIGFscmVhZHkgc2hvd2VkIG9uZSBlcnJvciBkaWFsb2cgaWYgZmFpbGluZyB0byBhZGQgYW4gYWxpYXMgZnJvbSB0aGUgaW5wdXQgZmllbGQuXG5cdFx0XHQvL1RoZSB1c2VyIGhhcyB0byBjbGVhbiB0aGUgaW5wdXQgZmllbGQgdXAgYmVmb3JlIHByb2NlZWRpbmcgdG8gdGhlIG5leHQgcGFnZSAoZXZlbiBpZiB0aGVyZSBpcyBhbHJlYWR5IGFuIGFsaWFzKVxuXHRcdFx0Ly9XZSBhcmUgZG9uZSBpZiB3ZSBzdWNjZWVkZWQgdG8gYWRkIHRoZSBhbGlhc1xuXHRcdFx0cmV0dXJuIHRoaXMuYWRkQWxpYXNGcm9tSW5wdXQoKVxuXHRcdH1cblxuXHRcdC8vT3RoZXJ3aXNlIHdlIGNoZWNrIHRoYXQgdGhlcmUgaXMgZWl0aGVyIGFuIGFsaWFzIG9yIGEgdXNlciAob3IgYW4gYWxpYXMgZm9yIHNvbWUgb3RoZXIgdXNlcikgZGVmaW5lZCBmb3IgdGhlIGN1c3RvbSBkb21haW4gcmVnYXJkbGVzcyBvZiBhY3RpdmF0aW9uIHN0YXR1c1xuXHRcdGNvbnN0IGNoZWNrTWFpbEFkZHJlc3NlcyA9IFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKCkgPT4ge1xuXHRcdFx0Y29uc3QgaGFzQWxpYXNlcyA9IGxvY2F0b3IubG9naW5zXG5cdFx0XHRcdC5nZXRVc2VyQ29udHJvbGxlcigpXG5cdFx0XHRcdC51c2VyR3JvdXBJbmZvLm1haWxBZGRyZXNzQWxpYXNlcy5zb21lKChhbGlhcykgPT4gYWxpYXMubWFpbEFkZHJlc3MuZW5kc1dpdGgoYEAke3RoaXMuZGF0YS5kb21haW4oKX1gKSlcblxuXHRcdFx0aWYgKGhhc0FsaWFzZXMpIHtcblx0XHRcdFx0cmV0dXJuIHRydWVcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHJldHVybiBsb2NhdG9yLmVudGl0eUNsaWVudFxuXHRcdFx0XHRcdC5sb2FkKEN1c3RvbWVyVHlwZVJlZiwgbmV2ZXJOdWxsKGxvY2F0b3IubG9naW5zLmdldFVzZXJDb250cm9sbGVyKCkudXNlci5jdXN0b21lcikpXG5cdFx0XHRcdFx0LnRoZW4oKGN1c3RvbWVyKSA9PiBsb2NhdG9yLmVudGl0eUNsaWVudC5sb2FkQWxsKEdyb3VwSW5mb1R5cGVSZWYsIGN1c3RvbWVyLnVzZXJHcm91cHMpKVxuXHRcdFx0XHRcdC50aGVuKChhbGxVc2VyR3JvdXBJbmZvcykgPT4ge1xuXHRcdFx0XHRcdFx0cmV0dXJuIGFsbFVzZXJHcm91cEluZm9zLnNvbWUoXG5cdFx0XHRcdFx0XHRcdCh1KSA9PlxuXHRcdFx0XHRcdFx0XHRcdG5ldmVyTnVsbCh1Lm1haWxBZGRyZXNzKS5lbmRzV2l0aChcIkBcIiArIHRoaXMuZGF0YS5kb21haW4oKSkgfHxcblx0XHRcdFx0XHRcdFx0XHR1Lm1haWxBZGRyZXNzQWxpYXNlcy5zb21lKChhKSA9PiBuZXZlck51bGwoYS5tYWlsQWRkcmVzcykuZW5kc1dpdGgoXCJAXCIgKyB0aGlzLmRhdGEuZG9tYWluKCkpKSxcblx0XHRcdFx0XHRcdClcblx0XHRcdFx0XHR9KVxuXHRcdFx0fVxuXHRcdH0pXG5cdFx0cmV0dXJuIHNob3dQcm9ncmVzc0RpYWxvZyhcInBsZWFzZVdhaXRfbXNnXCIsIGNoZWNrTWFpbEFkZHJlc3NlcykudGhlbigobmV4dEFsbG93ZWQpID0+IHtcblx0XHRcdGlmIChzaG93RXJyb3JEaWFsb2cgJiYgIW5leHRBbGxvd2VkKSBEaWFsb2cubWVzc2FnZShcImVuZm9yY2VBbGlhc1NldHVwX21zZ1wiKVxuXHRcdFx0cmV0dXJuIG5leHRBbGxvd2VkXG5cdFx0fSlcblx0fVxuXG5cdGlzU2tpcEF2YWlsYWJsZSgpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gdHJ1ZVxuXHR9XG5cblx0aXNFbmFibGVkKCk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiB0cnVlXG5cdH1cblxuXHQvKipcblx0ICogVHJ5IHRvIGFkZCBhbiBhbGlhcyBmcm9tIGlucHV0IGZpZWxkIGFuZCByZXR1cm4gdHJ1ZSBpZiBpdCBzdWNjZWVkZWRcblx0ICovXG5cdGFzeW5jIGFkZEFsaWFzRnJvbUlucHV0KCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuXHRcdGNvbnN0IGVycm9yID0gdGhpcy5lcnJvck1lc3NhZ2VJZFxuXG5cdFx0aWYgKGVycm9yKSB7XG5cdFx0XHRhd2FpdCBEaWFsb2cubWVzc2FnZShlcnJvcilcblx0XHRcdHJldHVybiBmYWxzZVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRjb25zdCBtYWlsQWRkcmVzc1RhYmxlTW9kZWwgPSB0aGlzLmRhdGEuZWRpdEFsaWFzRm9ybUF0dHJzLm1vZGVsXG5cdFx0XHR0cnkge1xuXHRcdFx0XHRhd2FpdCBzaG93UHJvZ3Jlc3NEaWFsb2coXG5cdFx0XHRcdFx0XCJwbGVhc2VXYWl0X21zZ1wiLFxuXHRcdFx0XHRcdC8vIFVzaW5nIGRlZmF1bHQgc2VuZGVyIG5hbWUgZm9yIG5vd1xuXHRcdFx0XHRcdG1haWxBZGRyZXNzVGFibGVNb2RlbC5hZGRBbGlhcyh0aGlzLm1haWxBZGRyZXNzLCBtYWlsQWRkcmVzc1RhYmxlTW9kZWwuZGVmYXVsdFNlbmRlck5hbWUoKSksXG5cdFx0XHRcdClcblx0XHRcdFx0cmV0dXJuIHRydWVcblx0XHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdFx0aWYgKGUgaW5zdGFuY2VvZiBJbnZhbGlkRGF0YUVycm9yKSB7XG5cdFx0XHRcdFx0YXdhaXQgRGlhbG9nLm1lc3NhZ2UoXCJtYWlsQWRkcmVzc05BX21zZ1wiKVxuXHRcdFx0XHR9IGVsc2UgaWYgKGUgaW5zdGFuY2VvZiBMaW1pdFJlYWNoZWRFcnJvcikge1xuXHRcdFx0XHRcdC8vIGlnbm9yZVxuXHRcdFx0XHR9IGVsc2UgaWYgKGUgaW5zdGFuY2VvZiBVcGdyYWRlUmVxdWlyZWRFcnJvcikge1xuXHRcdFx0XHRcdGF3YWl0IHNob3dQbGFuVXBncmFkZVJlcXVpcmVkRGlhbG9nKGUucGxhbnMsIGUubWVzc2FnZSlcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHR0aHJvdyBlXG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIGZhbHNlXG5cdFx0XHR9XG5cdFx0fVxuXHR9XG59XG4iLCJpbXBvcnQgeyBhc3NlcnRFbnVtVmFsdWUsIEN1c3RvbURvbWFpblR5cGUsIEN1c3RvbURvbWFpblR5cGVDb3VudCwgQ3VzdG9tRG9tYWluVmFsaWRhdGlvblJlc3VsdCB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vYXBpL2NvbW1vbi9UdXRhbm90YUNvbnN0YW50c1wiXG5pbXBvcnQgbSwgeyBDaGlsZHJlbiwgVm5vZGUsIFZub2RlRE9NIH0gZnJvbSBcIm1pdGhyaWxcIlxuaW1wb3J0IHR5cGUgeyBBZGREb21haW5EYXRhIH0gZnJvbSBcIi4vQWRkRG9tYWluV2l6YXJkXCJcbmltcG9ydCB7IHNob3dQcm9ncmVzc0RpYWxvZyB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZ3VpL2RpYWxvZ3MvUHJvZ3Jlc3NEaWFsb2dcIlxuaW1wb3J0IHsgbGFuZywgVHJhbnNsYXRpb25LZXkgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL21pc2MvTGFuZ3VhZ2VWaWV3TW9kZWxcIlxuaW1wb3J0IHsgRGlhbG9nIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9ndWkvYmFzZS9EaWFsb2dcIlxuaW1wb3J0IHR5cGUgeyBXaXphcmRQYWdlQXR0cnMsIFdpemFyZFBhZ2VOIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9ndWkvYmFzZS9XaXphcmREaWFsb2cuanNcIlxuaW1wb3J0IHsgZW1pdFdpemFyZEV2ZW50LCBXaXphcmRFdmVudFR5cGUgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2d1aS9iYXNlL1dpemFyZERpYWxvZy5qc1wiXG5pbXBvcnQgeyBQcmVjb25kaXRpb25GYWlsZWRFcnJvciB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vYXBpL2NvbW1vbi9lcnJvci9SZXN0RXJyb3IuanNcIlxuaW1wb3J0IHsgc2hvd1BsYW5VcGdyYWRlUmVxdWlyZWREaWFsb2cgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL21pc2MvU3Vic2NyaXB0aW9uRGlhbG9ncy5qc1wiXG5pbXBvcnQgeyBkb3duY2FzdCwgaXNFbXB0eSwgb2ZDbGFzcyB9IGZyb20gXCJAdHV0YW8vdHV0YW5vdGEtdXRpbHNcIlxuaW1wb3J0IHsgbG9jYXRvciB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vYXBpL21haW4vQ29tbW9uTG9jYXRvclwiXG5pbXBvcnQgeyBhc3NlcnRNYWluT3JOb2RlIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9hcGkvY29tbW9uL0VudlwiXG5pbXBvcnQgeyBjcmVhdGVEbnNSZWNvcmRUYWJsZSB9IGZyb20gXCIuL0Ruc1JlY29yZFRhYmxlLmpzXCJcbmltcG9ydCB7IGdldEF2YWlsYWJsZU1hdGNoaW5nUGxhbnMgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL3N1YnNjcmlwdGlvbi9TdWJzY3JpcHRpb25VdGlscy5qc1wiXG5pbXBvcnQgeyBnZXRDdXN0b21NYWlsRG9tYWlucyB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vYXBpL2NvbW1vbi91dGlscy9DdXN0b21lclV0aWxzLmpzXCJcbmltcG9ydCB7IExvZ2luQnV0dG9uIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9ndWkvYmFzZS9idXR0b25zL0xvZ2luQnV0dG9uLmpzXCJcblxuYXNzZXJ0TWFpbk9yTm9kZSgpXG5cbmV4cG9ydCBlbnVtIEN1c3RvbURvbWFpbkZhaWx1cmVSZWFzb25zIHtcblx0TElNSVRfUkVBQ0hFRCA9IFwiY3VzdG9tZG9tYWluc2VydmljZS5saW1pdF9yZWFjaGVkXCIsXG5cdERPTUFJTl9JTl9VU0UgPSBcImN1c3RvbWRvbWFpbnNlcnZpY2UuZG9tYWluX2luX3VzZVwiLFxufVxuXG5leHBvcnQgY2xhc3MgVmVyaWZ5T3duZXJzaGlwUGFnZSBpbXBsZW1lbnRzIFdpemFyZFBhZ2VOPEFkZERvbWFpbkRhdGE+IHtcblx0cHJpdmF0ZSBkb20hOiBIVE1MRWxlbWVudFxuXG5cdG9uY3JlYXRlKHZub2RlOiBWbm9kZURPTTxXaXphcmRQYWdlQXR0cnM8QWRkRG9tYWluRGF0YT4+KSB7XG5cdFx0dGhpcy5kb20gPSB2bm9kZS5kb20gYXMgSFRNTEVsZW1lbnRcblx0XHQvLyBXZSBleHBlY3QgdGhhdCB0aGUgcGFnZSBpcyBjcmVhdGVkIGFnYWluIGVhY2ggdGltZSB3aGVuIGRvbWFpbiBpcyBjaGFuZ2VkIHNvIHdlIG9ubHkgbmVlZCB0byBsb2FkIGl0IGluIG9uY3JlYXRlLlxuXHRcdGNvbnN0IHsgZGF0YSB9ID0gdm5vZGUuYXR0cnNcblx0XHRsb2NhdG9yLmN1c3RvbWVyRmFjYWRlLmdldERvbWFpblZhbGlkYXRpb25SZWNvcmQoZGF0YS5kb21haW4oKSkudGhlbigocmVjb3JkVmFsdWUpID0+IHtcblx0XHRcdGRhdGEuZXhwZWN0ZWRWZXJpZmljYXRpb25SZWNvcmQudmFsdWUgPSByZWNvcmRWYWx1ZVxuXHRcdFx0bS5yZWRyYXcoKVxuXHRcdH0pXG5cdH1cblxuXHR2aWV3KHZub2RlOiBWbm9kZTxXaXphcmRQYWdlQXR0cnM8QWRkRG9tYWluRGF0YT4+KTogQ2hpbGRyZW4ge1xuXHRcdGNvbnN0IGEgPSB2bm9kZS5hdHRyc1xuXHRcdHJldHVybiBbXG5cdFx0XHRtKFwiaDQubXQtbC50ZXh0LWNlbnRlclwiLCBsYW5nLmdldChcInZlcmlmeURvbWFpbk93bmVyc2hpcF90aXRsZVwiKSksXG5cdFx0XHRtKFxuXHRcdFx0XHRcInBcIixcblx0XHRcdFx0bGFuZy5nZXQoXCJ2ZXJpZnlEb21haW5Pd25lcnNoaXBFeHBsYW5hdGlvbl9tc2dcIiwge1xuXHRcdFx0XHRcdFwie2RvbWFpbn1cIjogYS5kYXRhLmRvbWFpbigpLFxuXHRcdFx0XHR9KSxcblx0XHRcdCksXG5cdFx0XHRtKFwicFwiLCBsYW5nLmdldChcInZlcmlmeU93bmVyc2hpcFRYVHJlY29yZF9tc2dcIikpLFxuXHRcdFx0Y3JlYXRlRG5zUmVjb3JkVGFibGUoW3Zub2RlLmF0dHJzLmRhdGEuZXhwZWN0ZWRWZXJpZmljYXRpb25SZWNvcmRdKSxcblx0XHRcdG0oXG5cdFx0XHRcdFwiLmZsZXgtY2VudGVyLmZ1bGwtd2lkdGgucHQtbC5tYi1sXCIsXG5cdFx0XHRcdG0oTG9naW5CdXR0b24sIHtcblx0XHRcdFx0XHRsYWJlbDogXCJuZXh0X2FjdGlvblwiLFxuXHRcdFx0XHRcdGNsYXNzOiBcInNtYWxsLWxvZ2luLWJ1dHRvblwiLFxuXHRcdFx0XHRcdG9uY2xpY2s6ICgpID0+IGVtaXRXaXphcmRFdmVudCh0aGlzLmRvbSwgV2l6YXJkRXZlbnRUeXBlLlNIT1dfTkVYVF9QQUdFKSxcblx0XHRcdFx0fSksXG5cdFx0XHQpLFxuXHRcdF1cblx0fVxufVxuXG5leHBvcnQgY2xhc3MgVmVyaWZ5T3duZXJzaGlwUGFnZUF0dHJzIGltcGxlbWVudHMgV2l6YXJkUGFnZUF0dHJzPEFkZERvbWFpbkRhdGE+IHtcblx0ZGF0YTogQWRkRG9tYWluRGF0YVxuXG5cdGNvbnN0cnVjdG9yKGRvbWFpbkRhdGE6IEFkZERvbWFpbkRhdGEpIHtcblx0XHR0aGlzLmRhdGEgPSBkb21haW5EYXRhXG5cdH1cblxuXHRoZWFkZXJUaXRsZSgpOiBUcmFuc2xhdGlvbktleSB7XG5cdFx0cmV0dXJuIFwiZG9tYWluU2V0dXBfdGl0bGVcIlxuXHR9XG5cblx0bmV4dEFjdGlvbihzaG93RXJyb3JEaWFsb2c6IGJvb2xlYW4gPSB0cnVlKTogUHJvbWlzZTxib29sZWFuPiB7XG5cdFx0cmV0dXJuIHNob3dQcm9ncmVzc0RpYWxvZyhcblx0XHRcdFwicGxlYXNlV2FpdF9tc2dcIixcblx0XHRcdGxvY2F0b3IuY3VzdG9tZXJGYWNhZGUuYWRkRG9tYWluKHRoaXMuZGF0YS5kb21haW4oKSkudGhlbigocmVzdWx0KSA9PiB7XG5cdFx0XHRcdGNvbnN0IHZhbGlkYXRpb25SZXN1bHQgPSBhc3NlcnRFbnVtVmFsdWUoQ3VzdG9tRG9tYWluVmFsaWRhdGlvblJlc3VsdCwgcmVzdWx0LnZhbGlkYXRpb25SZXN1bHQpXG5cdFx0XHRcdGlmICh2YWxpZGF0aW9uUmVzdWx0ID09PSBDdXN0b21Eb21haW5WYWxpZGF0aW9uUmVzdWx0LkNVU1RPTV9ET01BSU5fVkFMSURBVElPTl9SRVNVTFRfT0spIHtcblx0XHRcdFx0XHRyZXR1cm4gbnVsbFxuXHRcdFx0XHR9IGVsc2UgaWYgKHZhbGlkYXRpb25SZXN1bHQgPT09IEN1c3RvbURvbWFpblZhbGlkYXRpb25SZXN1bHQuQ1VTVE9NX0RPTUFJTl9WQUxJREFUSU9OX1JFU1VMVF9ET01BSU5fTk9UX0FWQUlMQUJMRSkge1xuXHRcdFx0XHRcdGxldCBjdXN0b21Eb21haW5JbmZvcyA9IGdldEN1c3RvbU1haWxEb21haW5zKHRoaXMuZGF0YS5jdXN0b21lckluZm8pXG5cblx0XHRcdFx0XHQvL2RvbWFpbiBpcyBhbHJlYWR5IGFzc2lnbmVkIHRvIHRoaXMgYWNjb3VudFxuXHRcdFx0XHRcdGlmIChjdXN0b21Eb21haW5JbmZvcy5zb21lKChkb21haW5JbmZvKSA9PiBkb21haW5JbmZvLmRvbWFpbiA9PT0gdGhpcy5kYXRhLmRvbWFpbigpKSkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIG51bGxcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRyZXR1cm4gKCkgPT4gbGFuZy5nZXQoXCJjdXN0b21Eb21haW5FcnJvckRvbWFpbk5vdEF2YWlsYWJsZV9tc2dcIilcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRjb25zdCBlcnJvck1lc3NhZ2VNYXA6IFJlY29yZDxDdXN0b21Eb21haW5WYWxpZGF0aW9uUmVzdWx0LCBUcmFuc2xhdGlvbktleT4gPSB7XG5cdFx0XHRcdFx0XHRbQ3VzdG9tRG9tYWluVmFsaWRhdGlvblJlc3VsdC5DVVNUT01fRE9NQUlOX1ZBTElEQVRJT05fUkVTVUxUX09LXTogXCJlbXB0eVN0cmluZ19tc2dcIixcblx0XHRcdFx0XHRcdFtDdXN0b21Eb21haW5WYWxpZGF0aW9uUmVzdWx0LkNVU1RPTV9ET01BSU5fVkFMSURBVElPTl9SRVNVTFRfRE5TX0xPT0tVUF9GQUlMRURdOiBcImN1c3RvbURvbWFpbkVycm9yRG5zTG9va3VwRmFpbHVyZV9tc2dcIixcblx0XHRcdFx0XHRcdFtDdXN0b21Eb21haW5WYWxpZGF0aW9uUmVzdWx0LkNVU1RPTV9ET01BSU5fVkFMSURBVElPTl9SRVNVTFRfRE9NQUlOX05PVF9GT1VORF06IFwiY3VzdG9tRG9tYWluRXJyb3JEb21haW5Ob3RGb3VuZF9tc2dcIixcblx0XHRcdFx0XHRcdFtDdXN0b21Eb21haW5WYWxpZGF0aW9uUmVzdWx0LkNVU1RPTV9ET01BSU5fVkFMSURBVElPTl9SRVNVTFRfTkFNRVNFUlZFUl9OT1RfRk9VTkRdOiBcImN1c3RvbURvbWFpbkVycm9yTmFtZXNlcnZlck5vdEZvdW5kX21zZ1wiLFxuXHRcdFx0XHRcdFx0W0N1c3RvbURvbWFpblZhbGlkYXRpb25SZXN1bHQuQ1VTVE9NX0RPTUFJTl9WQUxJREFUSU9OX1JFU1VMVF9ET01BSU5fTk9UX0FWQUlMQUJMRV06IFwiY3VzdG9tRG9tYWluRXJyb3JEb21haW5Ob3RBdmFpbGFibGVfbXNnXCIsXG5cdFx0XHRcdFx0XHRbQ3VzdG9tRG9tYWluVmFsaWRhdGlvblJlc3VsdC5DVVNUT01fRE9NQUlOX1ZBTElEQVRJT05fUkVTVUxUX1ZBTElEQVRJT05fRkFJTEVEXTogXCJjdXN0b21Eb21haW5FcnJvclZhbGlkYXRpb25GYWlsZWRfbXNnXCIsXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiBsYW5nLm1ha2VUcmFuc2xhdGlvbihcblx0XHRcdFx0XHRcdFwiZXJyb3JfbXNnXCIsXG5cdFx0XHRcdFx0XHRsYW5nLmdldChlcnJvck1lc3NhZ2VNYXBbdmFsaWRhdGlvblJlc3VsdF0pICsgLy9UT0RPIGNvcnJlY3QgdG8gdXNlPyBjdXN0b21Eb21haW5FcnJvck90aGVyVHh0UmVjb3Jkc19tc2dcblx0XHRcdFx0XHRcdFx0KHJlc3VsdC5pbnZhbGlkRG5zUmVjb3Jkcy5sZW5ndGggPiAwXG5cdFx0XHRcdFx0XHRcdFx0PyBcIiBcIiArIGxhbmcuZ2V0KFwiY3VzdG9tRG9tYWluRXJyb3JPdGhlclR4dFJlY29yZHNfbXNnXCIpICsgXCJcXG5cIiArIHJlc3VsdC5pbnZhbGlkRG5zUmVjb3Jkcy5tYXAoKHIpID0+IHIudmFsdWUpLmpvaW4oXCJcXG5cIilcblx0XHRcdFx0XHRcdFx0XHQ6IFwiXCIpLFxuXHRcdFx0XHRcdClcblx0XHRcdFx0fVxuXHRcdFx0fSksXG5cdFx0KVxuXHRcdFx0LnRoZW4oKG1lc3NhZ2UpID0+IHtcblx0XHRcdFx0aWYgKG1lc3NhZ2UpIHtcblx0XHRcdFx0XHRyZXR1cm4gc2hvd0Vycm9yRGlhbG9nID8gRGlhbG9nLm1lc3NhZ2UoZG93bmNhc3QobWVzc2FnZSkpLnRoZW4oKCkgPT4gZmFsc2UpIDogZmFsc2Vcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiB0cnVlXG5cdFx0XHR9KVxuXHRcdFx0LmNhdGNoKFxuXHRcdFx0XHRvZkNsYXNzKFByZWNvbmRpdGlvbkZhaWxlZEVycm9yLCBhc3luYyAoZSkgPT4ge1xuXHRcdFx0XHRcdGlmIChlLmRhdGEgPT09IEN1c3RvbURvbWFpbkZhaWx1cmVSZWFzb25zLkxJTUlUX1JFQUNIRUQpIHtcblx0XHRcdFx0XHRcdGNvbnN0IG5ick9mQ3VzdG9tRG9tYWlucyA9IHRoaXMuZGF0YS5jdXN0b21lckluZm8uZG9tYWluSW5mb3MuZmlsdGVyKChkb21haW5JbmZvKSA9PiBkb21haW5JbmZvLndoaXRlbGFiZWxDb25maWcgPT0gbnVsbCkubGVuZ3RoXG5cdFx0XHRcdFx0XHRjb25zdCBwbGFucyA9IGF3YWl0IGdldEF2YWlsYWJsZU1hdGNoaW5nUGxhbnMobG9jYXRvci5zZXJ2aWNlRXhlY3V0b3IsIChjb25maWcpID0+IHtcblx0XHRcdFx0XHRcdFx0aWYgKGNvbmZpZy5jdXN0b21Eb21haW5UeXBlIGluIEN1c3RvbURvbWFpblR5cGVDb3VudCkge1xuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IHBsYW5Eb21haW5zID0gQ3VzdG9tRG9tYWluVHlwZUNvdW50W2NvbmZpZy5jdXN0b21Eb21haW5UeXBlIGFzIEN1c3RvbURvbWFpblR5cGVdXG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuIHBsYW5Eb21haW5zID09PSAtMSB8fCBwbGFuRG9tYWlucyA+IG5ick9mQ3VzdG9tRG9tYWluc1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdHJldHVybiBmYWxzZVxuXHRcdFx0XHRcdFx0fSlcblxuXHRcdFx0XHRcdFx0aWYgKGlzRW1wdHkocGxhbnMpKSB7XG5cdFx0XHRcdFx0XHRcdC8vIHNob3VsZG4ndCBoYXBwZW4gd2hpbGUgd2UgaGF2ZSB0aGUgVW5saW1pdGVkIHBsYW4uLi5cblx0XHRcdFx0XHRcdFx0RGlhbG9nLm1lc3NhZ2UoXCJ0b29NYW55Q3VzdG9tRG9tYWluc19tc2dcIilcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdC8vIGlnbm9yZSBwcm9taXNlLiBhbHdheXMgcmV0dXJuIGZhbHNlIHRvIG5vdCBzd2l0Y2ggdG8gbmV4dCBwYWdlLlxuXHRcdFx0XHRcdFx0XHRzaG93UGxhblVwZ3JhZGVSZXF1aXJlZERpYWxvZyhwbGFucywgXCJtb3JlQ3VzdG9tRG9tYWluc1JlcXVpcmVkX21zZ1wiKVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHREaWFsb2cubWVzc2FnZShsYW5nLm1ha2VUcmFuc2xhdGlvbihcImVycm9yX21zZ1wiLCBlLnRvU3RyaW5nKCkpKVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZXR1cm4gZmFsc2Vcblx0XHRcdFx0fSksXG5cdFx0XHQpXG5cdH1cblxuXHRpc1NraXBBdmFpbGFibGUoKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIGZhbHNlXG5cdH1cblxuXHRpc0VuYWJsZWQoKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIHRydWVcblx0fVxufVxuIiwiaW1wb3J0IG0sIHsgQ2hpbGRyZW4sIFZub2RlLCBWbm9kZURPTSB9IGZyb20gXCJtaXRocmlsXCJcbmltcG9ydCB7IEF1dG9jYXBpdGFsaXplLCBUZXh0RmllbGQgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2d1aS9iYXNlL1RleHRGaWVsZC5qc1wiXG5pbXBvcnQgeyBpc0RvbWFpbk5hbWUgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL21pc2MvRm9ybWF0VmFsaWRhdG9yXCJcbmltcG9ydCB7IERpYWxvZyB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZ3VpL2Jhc2UvRGlhbG9nXCJcbmltcG9ydCB0eXBlIHsgQWRkRG9tYWluRGF0YSB9IGZyb20gXCIuL0FkZERvbWFpbldpemFyZFwiXG5pbXBvcnQgdHlwZSB7IFRyYW5zbGF0aW9uS2V5IH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9taXNjL0xhbmd1YWdlVmlld01vZGVsXCJcbmltcG9ydCB7IGxhbmcgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL21pc2MvTGFuZ3VhZ2VWaWV3TW9kZWxcIlxuaW1wb3J0IHR5cGUgeyBXaXphcmRQYWdlQXR0cnMsIFdpemFyZFBhZ2VOIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9ndWkvYmFzZS9XaXphcmREaWFsb2cuanNcIlxuaW1wb3J0IHsgZW1pdFdpemFyZEV2ZW50LCBXaXphcmRFdmVudFR5cGUgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2d1aS9iYXNlL1dpemFyZERpYWxvZy5qc1wiXG5pbXBvcnQgeyBhc3NlcnRNYWluT3JOb2RlIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9hcGkvY29tbW9uL0VudlwiXG5pbXBvcnQgeyBMb2dpbkJ1dHRvbiB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZ3VpL2Jhc2UvYnV0dG9ucy9Mb2dpbkJ1dHRvbi5qc1wiXG5cbmFzc2VydE1haW5Pck5vZGUoKVxuXG5leHBvcnQgY2xhc3MgRW50ZXJEb21haW5QYWdlIGltcGxlbWVudHMgV2l6YXJkUGFnZU48QWRkRG9tYWluRGF0YT4ge1xuXHRwcml2YXRlIGRvbTogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbFxuXG5cdG9uY3JlYXRlKHZub2RlOiBWbm9kZURPTTxXaXphcmRQYWdlQXR0cnM8QWRkRG9tYWluRGF0YT4+KSB7XG5cdFx0dGhpcy5kb20gPSB2bm9kZS5kb20gYXMgSFRNTEVsZW1lbnRcblx0fVxuXG5cdHZpZXcodm5vZGU6IFZub2RlPFdpemFyZFBhZ2VBdHRyczxBZGREb21haW5EYXRhPj4pOiBDaGlsZHJlbiB7XG5cdFx0cmV0dXJuIG0oXCJcIiwgW1xuXHRcdFx0bShcImg0Lm10LWwudGV4dC1jZW50ZXJcIiwgbGFuZy5nZXQoXCJlbnRlckN1c3RvbURvbWFpbl90aXRsZVwiKSksXG5cdFx0XHRtKFwiLm10XCIsIGxhbmcuZ2V0KFwiZW50ZXJEb21haW5JbnRyb2R1Y3Rpb25fbXNnXCIpKSxcblx0XHRcdG0oXCIubXRcIiwgbGFuZy5nZXQoXCJlbnRlckRvbWFpbkdldFJlYWR5X21zZ1wiKSksXG5cdFx0XHRtKFRleHRGaWVsZCwge1xuXHRcdFx0XHRsYWJlbDogXCJjdXN0b21Eb21haW5fbGFiZWxcIixcblx0XHRcdFx0YXV0b2NhcGl0YWxpemU6IEF1dG9jYXBpdGFsaXplLm5vbmUsXG5cdFx0XHRcdHZhbHVlOiB2bm9kZS5hdHRycy5kYXRhLmRvbWFpbigpLFxuXHRcdFx0XHRvbmlucHV0OiB2bm9kZS5hdHRycy5kYXRhLmRvbWFpbixcblx0XHRcdFx0aGVscExhYmVsOiAoKSA9PiB7XG5cdFx0XHRcdFx0Y29uc3QgZG9tYWluID0gdm5vZGUuYXR0cnMuZGF0YS5kb21haW4oKVxuXHRcdFx0XHRcdGNvbnN0IGVycm9yTXNnID0gdmFsaWRhdGVEb21haW4oZG9tYWluKVxuXG5cdFx0XHRcdFx0aWYgKGVycm9yTXNnKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gbGFuZy5nZXQoZXJyb3JNc2cpXG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHJldHVybiBsYW5nLmdldChcImVudGVyRG9tYWluRmllbGRIZWxwX2xhYmVsXCIsIHtcblx0XHRcdFx0XHRcdFx0XCJ7ZG9tYWlufVwiOiBkb21haW4udG9Mb2NhbGVMb3dlckNhc2UoKS50cmltKCksXG5cdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSxcblx0XHRcdH0pLFxuXHRcdFx0bShcblx0XHRcdFx0XCIuZmxleC1jZW50ZXIuZnVsbC13aWR0aC5wdC1sLm1iLWxcIixcblx0XHRcdFx0bShMb2dpbkJ1dHRvbiwge1xuXHRcdFx0XHRcdGxhYmVsOiBcIm5leHRfYWN0aW9uXCIsXG5cdFx0XHRcdFx0Y2xhc3M6IFwic21hbGwtbG9naW4tYnV0dG9uXCIsXG5cdFx0XHRcdFx0b25jbGljazogKCkgPT4gZW1pdFdpemFyZEV2ZW50KHRoaXMuZG9tIGFzIEhUTUxFbGVtZW50LCBXaXphcmRFdmVudFR5cGUuU0hPV19ORVhUX1BBR0UpLFxuXHRcdFx0XHR9KSxcblx0XHRcdCksXG5cdFx0XSlcblx0fVxufVxuXG5mdW5jdGlvbiB2YWxpZGF0ZURvbWFpbihkb21haW46IHN0cmluZyk6IFRyYW5zbGF0aW9uS2V5IHwgbnVsbCB7XG5cdGxldCBjbGVhbkRvbWFpbk5hbWUgPSBkb21haW4udG9Mb2NhbGVMb3dlckNhc2UoKS50cmltKClcblxuXHRpZiAoIWNsZWFuRG9tYWluTmFtZS5sZW5ndGgpIHtcblx0XHRyZXR1cm4gXCJjdXN0b21Eb21haW5OZXV0cmFsX21zZ1wiXG5cdH1cblxuXHRpZiAoIWlzRG9tYWluTmFtZShjbGVhbkRvbWFpbk5hbWUpKSB7XG5cdFx0cmV0dXJuIFwiY3VzdG9tRG9tYWluSW52YWxpZF9tc2dcIlxuXHR9IGVsc2Uge1xuXHRcdHJldHVybiBudWxsXG5cdH1cbn1cblxuZXhwb3J0IGNsYXNzIEVudGVyRG9tYWluUGFnZUF0dHJzIGltcGxlbWVudHMgV2l6YXJkUGFnZUF0dHJzPEFkZERvbWFpbkRhdGE+IHtcblx0ZGF0YTogQWRkRG9tYWluRGF0YVxuXG5cdGNvbnN0cnVjdG9yKGRvbWFpbkRhdGE6IEFkZERvbWFpbkRhdGEpIHtcblx0XHR0aGlzLmRhdGEgPSBkb21haW5EYXRhXG5cdH1cblxuXHRoZWFkZXJUaXRsZSgpOiBUcmFuc2xhdGlvbktleSB7XG5cdFx0cmV0dXJuIFwiZG9tYWluU2V0dXBfdGl0bGVcIlxuXHR9XG5cblx0bmV4dEFjdGlvbihzaG93RXJyb3JEaWFsb2c6IGJvb2xlYW4gPSB0cnVlKTogUHJvbWlzZTxib29sZWFuPiB7XG5cdFx0Y29uc3QgZXJyb3JNc2cgPSB2YWxpZGF0ZURvbWFpbih0aGlzLmRhdGEuZG9tYWluKCkpXG5cblx0XHRpZiAoZXJyb3JNc2cpIHtcblx0XHRcdHJldHVybiBzaG93RXJyb3JEaWFsb2cgPyBEaWFsb2cubWVzc2FnZShlcnJvck1zZykudGhlbigoKSA9PiBmYWxzZSkgOiBQcm9taXNlLnJlc29sdmUoZmFsc2UpXG5cdFx0fSBlbHNlIHtcblx0XHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUodHJ1ZSlcblx0XHR9XG5cdH1cblxuXHRpc1NraXBBdmFpbGFibGUoKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIGZhbHNlXG5cdH1cblxuXHRpc0VuYWJsZWQoKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIHRydWVcblx0fVxufVxuIiwiaW1wb3J0IHN0cmVhbSBmcm9tIFwibWl0aHJpbC9zdHJlYW1cIlxuaW1wb3J0IFN0cmVhbSBmcm9tIFwibWl0aHJpbC9zdHJlYW1cIlxuaW1wb3J0IHR5cGUgeyBDdXN0b21lckluZm8sIERuc1JlY29yZCB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vYXBpL2VudGl0aWVzL3N5cy9UeXBlUmVmcy5qc1wiXG5pbXBvcnQgeyBjcmVhdGVEbnNSZWNvcmQgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2FwaS9lbnRpdGllcy9zeXMvVHlwZVJlZnMuanNcIlxuaW1wb3J0IHsgRG5zUmVjb3JkVHlwZSB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vYXBpL2NvbW1vbi9UdXRhbm90YUNvbnN0YW50c1wiXG5pbXBvcnQgdHlwZSB7IE1haWxBZGRyZXNzVGFibGVBdHRycyB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vc2V0dGluZ3MvbWFpbGFkZHJlc3MvTWFpbEFkZHJlc3NUYWJsZS5qc1wiXG5pbXBvcnQgeyBBZGRFbWFpbEFkZHJlc3Nlc1BhZ2UsIEFkZEVtYWlsQWRkcmVzc2VzUGFnZUF0dHJzIH0gZnJvbSBcIi4vQWRkRW1haWxBZGRyZXNzZXNQYWdlXCJcbmltcG9ydCB7IERvbWFpbkRuc1N0YXR1cyB9IGZyb20gXCIuLi9Eb21haW5EbnNTdGF0dXNcIlxuaW1wb3J0IHsgVmVyaWZ5T3duZXJzaGlwUGFnZSwgVmVyaWZ5T3duZXJzaGlwUGFnZUF0dHJzIH0gZnJvbSBcIi4vVmVyaWZ5T3duZXJzaGlwUGFnZVwiXG5pbXBvcnQgeyBWZXJpZnlEbnNSZWNvcmRzUGFnZSwgVmVyaWZ5RG5zUmVjb3Jkc1BhZ2VBdHRycyB9IGZyb20gXCIuL1ZlcmlmeURuc1JlY29yZHNQYWdlXCJcbmltcG9ydCB7IEVudGVyRG9tYWluUGFnZSwgRW50ZXJEb21haW5QYWdlQXR0cnMgfSBmcm9tIFwiLi9FbnRlckRvbWFpblBhZ2VcIlxuaW1wb3J0IHsgY3JlYXRlV2l6YXJkRGlhbG9nLCB3aXphcmRQYWdlV3JhcHBlciB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZ3VpL2Jhc2UvV2l6YXJkRGlhbG9nLmpzXCJcbmltcG9ydCB7IGFzc2VydE1haW5Pck5vZGUgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2FwaS9jb21tb24vRW52XCJcbmltcG9ydCB7IE1haWxBZGRyZXNzVGFibGVNb2RlbCB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vc2V0dGluZ3MvbWFpbGFkZHJlc3MvTWFpbEFkZHJlc3NUYWJsZU1vZGVsLmpzXCJcbmltcG9ydCB7IERpYWxvZ1R5cGUgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2d1aS9iYXNlL0RpYWxvZy5qc1wiXG5cbmFzc2VydE1haW5Pck5vZGUoKVxuZXhwb3J0IHR5cGUgQWRkRG9tYWluRGF0YSA9IHtcblx0ZG9tYWluOiBTdHJlYW08c3RyaW5nPlxuXHRjdXN0b21lckluZm86IEN1c3RvbWVySW5mb1xuXHRleHBlY3RlZFZlcmlmaWNhdGlvblJlY29yZDogRG5zUmVjb3JkXG5cdGVkaXRBbGlhc0Zvcm1BdHRyczogTWFpbEFkZHJlc3NUYWJsZUF0dHJzXG5cdGRvbWFpblN0YXR1czogRG9tYWluRG5zU3RhdHVzXG59XG5cbi8qKiBTaG93cyBhIHdpemFyZCBmb3IgYWRkaW5nIGEgY3VzdG9tIGVtYWlsIGRvbWFpbi4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzaG93QWRkRG9tYWluV2l6YXJkKGRvbWFpbjogc3RyaW5nLCBjdXN0b21lckluZm86IEN1c3RvbWVySW5mbywgbWFpbEFkZHJlc3NUYWJsZU1vZGVsOiBNYWlsQWRkcmVzc1RhYmxlTW9kZWwpOiBQcm9taXNlPHZvaWQ+IHtcblx0bGV0IG1haWxBZGRyZXNzVGFibGVFeHBhbmRlZDogYm9vbGVhbiA9IGZhbHNlXG5cblx0Y29uc3QgZG9tYWluRGF0YTogQWRkRG9tYWluRGF0YSA9IHtcblx0XHRkb21haW46IHN0cmVhbShkb21haW4pLFxuXHRcdGN1c3RvbWVySW5mbzogY3VzdG9tZXJJbmZvLFxuXHRcdC8vIHdpbGwgYmUgZmlsbGVkIG9uY3JlYXRlIGJ5IHRoZSBwYWdlXG5cdFx0Ly8gbm90IGFjdHVhbGx5IHNwZiwgYnV0IHRoZSB0eXBlIFRYVCBvbmx5IG1hdHRlcnMgaGVyZVxuXHRcdGV4cGVjdGVkVmVyaWZpY2F0aW9uUmVjb3JkOiBjcmVhdGVEbnNSZWNvcmQoeyBzdWJkb21haW46IG51bGwsIHR5cGU6IERuc1JlY29yZFR5cGUuRE5TX1JFQ09SRF9UWVBFX1RYVF9TUEYsIHZhbHVlOiBcIlwiIH0pLFxuXHRcdGVkaXRBbGlhc0Zvcm1BdHRyczoge1xuXHRcdFx0bW9kZWw6IG1haWxBZGRyZXNzVGFibGVNb2RlbCxcblx0XHRcdGV4cGFuZGVkOiBtYWlsQWRkcmVzc1RhYmxlRXhwYW5kZWQsXG5cdFx0XHRvbkV4cGFuZGVkOiAobmV3RXhwYW5kZWQpID0+IChtYWlsQWRkcmVzc1RhYmxlRXhwYW5kZWQgPSBuZXdFeHBhbmRlZCksXG5cdFx0fSxcblx0XHRkb21haW5TdGF0dXM6IG5ldyBEb21haW5EbnNTdGF0dXMoZG9tYWluKSxcblx0fVxuXG5cdGNvbnN0IHdpemFyZFBhZ2VzID0gW1xuXHRcdHdpemFyZFBhZ2VXcmFwcGVyKEVudGVyRG9tYWluUGFnZSwgbmV3IEVudGVyRG9tYWluUGFnZUF0dHJzKGRvbWFpbkRhdGEpKSxcblx0XHR3aXphcmRQYWdlV3JhcHBlcihWZXJpZnlPd25lcnNoaXBQYWdlLCBuZXcgVmVyaWZ5T3duZXJzaGlwUGFnZUF0dHJzKGRvbWFpbkRhdGEpKSxcblx0XHR3aXphcmRQYWdlV3JhcHBlcihBZGRFbWFpbEFkZHJlc3Nlc1BhZ2UsIG5ldyBBZGRFbWFpbEFkZHJlc3Nlc1BhZ2VBdHRycyhkb21haW5EYXRhKSksXG5cdFx0d2l6YXJkUGFnZVdyYXBwZXIoVmVyaWZ5RG5zUmVjb3Jkc1BhZ2UsIG5ldyBWZXJpZnlEbnNSZWNvcmRzUGFnZUF0dHJzKGRvbWFpbkRhdGEpKSxcblx0XVxuXHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcblx0XHRjb25zdCB3aXphcmRCdWlsZGVyID0gY3JlYXRlV2l6YXJkRGlhbG9nKFxuXHRcdFx0ZG9tYWluRGF0YSxcblx0XHRcdHdpemFyZFBhZ2VzLFxuXHRcdFx0KCkgPT4ge1xuXHRcdFx0XHRtYWlsQWRkcmVzc1RhYmxlTW9kZWwuZGlzcG9zZSgpXG5cdFx0XHRcdHJlc29sdmUoKVxuXHRcdFx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKClcblx0XHRcdH0sXG5cdFx0XHREaWFsb2dUeXBlLkVkaXRMYXJnZSxcblx0XHQpXG5cdFx0Y29uc3Qgd2l6YXJkID0gd2l6YXJkQnVpbGRlci5kaWFsb2dcblx0XHRjb25zdCB3aXphcmRBdHRycyA9IHdpemFyZEJ1aWxkZXIuYXR0cnNcblx0XHR3aXphcmQuc2hvdygpXG5cblx0XHQvLyB3ZSBjYW4gc2tpcCB0aGUgbmV4dCB0d28gcGFnZXMgYmVjYXVzZSB3ZSBhc3N1bWUgdGhhdCB0aGUgZG9tYWluIGlzIGFscmVhZHkgYXNzaWduZWQgaWYgaXQgd2FzIHBhc3NlZCB0byB0aGUgd2l6YXJkXG5cdFx0aWYgKGRvbWFpbi5sZW5ndGgpIHtcblx0XHRcdHdpemFyZEF0dHJzLmdvVG9OZXh0UGFnZU9yQ2xvc2VXaXphcmQoKVxuXHRcdFx0d2l6YXJkQXR0cnMuZ29Ub05leHRQYWdlT3JDbG9zZVdpemFyZCgpXG5cblx0XHRcdGlmICh3aXphcmRBdHRycy5jdXJyZW50UGFnZSkge1xuXHRcdFx0XHQvLyBza2lwIGFkZCBlbWFpbCBhZGRyZXNzIHBhZ2UgaWYgYW4gZW1haWwgYWRkcmVzcyBoYXMgYmVlbiBhc3NpZ25lZFxuXHRcdFx0XHR3aXphcmRBdHRycy5jdXJyZW50UGFnZS5hdHRycy5uZXh0QWN0aW9uKGZhbHNlKS50aGVuKChyZWFkeSkgPT4ge1xuXHRcdFx0XHRcdGlmIChyZWFkeSkgd2l6YXJkQXR0cnMuZ29Ub05leHRQYWdlT3JDbG9zZVdpemFyZCgpXG5cdFx0XHRcdH0pXG5cdFx0XHR9XG5cdFx0fVxuXHR9KVxufVxuXG5leHBvcnQgdHlwZSBWYWxpZGF0ZWREblNSZWNvcmQgPSB7XG5cdHJlY29yZDogRG5zUmVjb3JkXG5cdGhlbHBJbmZvOiBzdHJpbmdbXVxufVxuIiwiaW1wb3J0IG0sIHsgQ2hpbGRyZW4sIENvbXBvbmVudCwgVm5vZGUgfSBmcm9tIFwibWl0aHJpbFwiXG5pbXBvcnQgc3RyZWFtIGZyb20gXCJtaXRocmlsL3N0cmVhbVwiXG5pbXBvcnQgdHlwZSB7IEluZm9MaW5rLCBUcmFuc2xhdGlvbktleSwgTWF5YmVUcmFuc2xhdGlvbiB9IGZyb20gXCIuLi9taXNjL0xhbmd1YWdlVmlld01vZGVsLmpzXCJcbmltcG9ydCB0eXBlIHsgVGFibGVBdHRycyB9IGZyb20gXCIuLi9ndWkvYmFzZS9UYWJsZS5qc1wiXG5pbXBvcnQgeyBUYWJsZSB9IGZyb20gXCIuLi9ndWkvYmFzZS9UYWJsZS5qc1wiXG5pbXBvcnQgeyBTZXR0aW5nc0V4cGFuZGVyIH0gZnJvbSBcIi4vU2V0dGluZ3NFeHBhbmRlci5qc1wiXG5pbXBvcnQgdHlwZSB7IGxhenkgfSBmcm9tIFwiQHR1dGFvL3R1dGFub3RhLXV0aWxzXCJcbmltcG9ydCBTdHJlYW0gZnJvbSBcIm1pdGhyaWwvc3RyZWFtXCJcblxudHlwZSBFeHBhbmRhYmxlVGFibGVBdHRycyA9IHtcblx0dGl0bGU6IE1heWJlVHJhbnNsYXRpb25cblx0dGFibGU6IFRhYmxlQXR0cnNcblx0aW5mb01zZzogTWF5YmVUcmFuc2xhdGlvblxuXHRpbmZvTGlua0lkPzogSW5mb0xpbmtcblx0Ly8gRXhwYW5kYWJsZVRhYmxlIHVzZXMgaW50ZXJuYWwgc3RhdGUgd2hlbmV2ZXIgdGhpcyBpc24ndCBwYXNzZWQgaW5cblx0ZXhwYW5kZWQ/OiBTdHJlYW08Ym9vbGVhbj5cblx0b25FeHBhbmQ/OiAoKSA9PiB2b2lkXG59XG5cbmV4cG9ydCBjbGFzcyBFeHBhbmRhYmxlVGFibGUgaW1wbGVtZW50cyBDb21wb25lbnQ8RXhwYW5kYWJsZVRhYmxlQXR0cnM+IHtcblx0ZXhwYW5kZWQ6IFN0cmVhbTxib29sZWFuPlxuXG5cdGNvbnN0cnVjdG9yKCkge1xuXHRcdHRoaXMuZXhwYW5kZWQgPSBzdHJlYW08Ym9vbGVhbj4oZmFsc2UpXG5cdH1cblxuXHR2aWV3KHZub2RlOiBWbm9kZTxFeHBhbmRhYmxlVGFibGVBdHRycz4pOiBDaGlsZHJlbiB7XG5cdFx0Y29uc3QgeyB0aXRsZSwgdGFibGUsIGluZm9MaW5rSWQsIGluZm9Nc2csIGV4cGFuZGVkLCBvbkV4cGFuZCB9ID0gdm5vZGUuYXR0cnNcblx0XHRyZXR1cm4gbShcblx0XHRcdFNldHRpbmdzRXhwYW5kZXIsXG5cdFx0XHR7XG5cdFx0XHRcdHRpdGxlLFxuXHRcdFx0XHRpbmZvTGlua0lkLFxuXHRcdFx0XHRpbmZvTXNnLFxuXHRcdFx0XHRvbkV4cGFuZCxcblx0XHRcdFx0ZXhwYW5kZWQ6IGV4cGFuZGVkIHx8IHRoaXMuZXhwYW5kZWQsXG5cdFx0XHR9LFxuXHRcdFx0bShUYWJsZSwgdGFibGUpLFxuXHRcdClcblx0fVxufVxuIiwiaW1wb3J0IG0gZnJvbSBcIm1pdGhyaWxcIlxuaW1wb3J0IHsgRGlhbG9nIH0gZnJvbSBcIi4uL2d1aS9iYXNlL0RpYWxvZ1wiXG5pbXBvcnQgeyBsYW5nIH0gZnJvbSBcIi4uL21pc2MvTGFuZ3VhZ2VWaWV3TW9kZWxcIlxuaW1wb3J0IHsgSW52YWxpZERhdGFFcnJvciwgTG9ja2VkRXJyb3IsIFByZWNvbmRpdGlvbkZhaWxlZEVycm9yIH0gZnJvbSBcIi4uL2FwaS9jb21tb24vZXJyb3IvUmVzdEVycm9yXCJcbmltcG9ydCB7IEF1dG9jb21wbGV0ZSwgVGV4dEZpZWxkLCBUZXh0RmllbGRUeXBlIH0gZnJvbSBcIi4uL2d1aS9iYXNlL1RleHRGaWVsZC5qc1wiXG5pbXBvcnQgeyBuZXZlck51bGwgfSBmcm9tIFwiQHR1dGFvL3R1dGFub3RhLXV0aWxzXCJcbmltcG9ydCB7IGdldENsZWFuZWRNYWlsQWRkcmVzcyB9IGZyb20gXCIuLi9taXNjL3BhcnNpbmcvTWFpbEFkZHJlc3NQYXJzZXJcIlxuaW1wb3J0IHsgbG9jYXRvciB9IGZyb20gXCIuLi9hcGkvbWFpbi9Db21tb25Mb2NhdG9yXCJcbmltcG9ydCB7IGdldEV0SWQgfSBmcm9tIFwiLi4vYXBpL2NvbW1vbi91dGlscy9FbnRpdHlVdGlsc1wiXG5pbXBvcnQgeyBDbG9zZUV2ZW50QnVzT3B0aW9uIH0gZnJvbSBcIi4uL2FwaS9jb21tb24vVHV0YW5vdGFDb25zdGFudHMuanNcIlxuaW1wb3J0IHsgU3VydmV5RGF0YSB9IGZyb20gXCIuLi9hcGkvZW50aXRpZXMvc3lzL1R5cGVSZWZzLmpzXCJcbmltcG9ydCB7IFBhc3N3b3JkRmllbGQgfSBmcm9tIFwiLi4vbWlzYy9wYXNzd29yZHMvUGFzc3dvcmRGaWVsZC5qc1wiXG5pbXBvcnQgeyBpc0lPU0FwcCB9IGZyb20gXCIuLi9hcGkvY29tbW9uL0Vudi5qc1wiXG5pbXBvcnQgeyBjbGllbnQgfSBmcm9tIFwiLi4vbWlzYy9DbGllbnREZXRlY3RvclwiXG5cbmV4cG9ydCBmdW5jdGlvbiBzaG93RGVsZXRlQWNjb3VudERpYWxvZyhzdXJ2ZXlEYXRhOiBTdXJ2ZXlEYXRhIHwgbnVsbCA9IG51bGwpIHtcblx0bGV0IHRha2VvdmVyID0gXCJcIlxuXHRsZXQgcGFzc3dvcmQgPSBcIlwiXG5cdGNvbnN0IHVzZXJJZCA9IGdldEV0SWQobG9jYXRvci5sb2dpbnMuZ2V0VXNlckNvbnRyb2xsZXIoKS51c2VyKVxuXG5cdERpYWxvZy5zaG93QWN0aW9uRGlhbG9nKHtcblx0XHR0aXRsZTogXCJhZG1pbkRlbGV0ZUFjY291bnRfYWN0aW9uXCIsXG5cdFx0Y2hpbGQ6IHtcblx0XHRcdHZpZXc6ICgpID0+XG5cdFx0XHRcdG0oXCIjZGVsZXRlLWFjY291bnQtZGlhbG9nXCIsIFtcblx0XHRcdFx0XHQhKGlzSU9TQXBwKCkgJiYgY2xpZW50LmlzQ2FsZW5kYXJBcHAoKSlcblx0XHRcdFx0XHRcdD8gbShUZXh0RmllbGQsIHtcblx0XHRcdFx0XHRcdFx0XHRsYWJlbDogXCJ0YXJnZXRBZGRyZXNzX2xhYmVsXCIsXG5cdFx0XHRcdFx0XHRcdFx0dmFsdWU6IHRha2VvdmVyLFxuXHRcdFx0XHRcdFx0XHRcdHR5cGU6IFRleHRGaWVsZFR5cGUuRW1haWwsXG5cdFx0XHRcdFx0XHRcdFx0b25pbnB1dDogKHZhbHVlKSA9PiAodGFrZW92ZXIgPSB2YWx1ZSksXG5cdFx0XHRcdFx0XHRcdFx0aGVscExhYmVsOiAoKSA9PiBsYW5nLmdldChcInRha2VvdmVyTWFpbEFkZHJlc3NJbmZvX21zZ1wiKSxcblx0XHRcdFx0XHRcdCAgfSlcblx0XHRcdFx0XHRcdDogbnVsbCxcblx0XHRcdFx0XHRtKFBhc3N3b3JkRmllbGQsIHtcblx0XHRcdFx0XHRcdHZhbHVlOiBwYXNzd29yZCxcblx0XHRcdFx0XHRcdGF1dG9jb21wbGV0ZUFzOiBBdXRvY29tcGxldGUuY3VycmVudFBhc3N3b3JkLFxuXHRcdFx0XHRcdFx0b25pbnB1dDogKHZhbHVlKSA9PiAocGFzc3dvcmQgPSB2YWx1ZSksXG5cdFx0XHRcdFx0XHRzdGF0dXM6IHtcblx0XHRcdFx0XHRcdFx0dHlwZTogXCJuZXV0cmFsXCIsXG5cdFx0XHRcdFx0XHRcdHRleHQ6IFwicGFzc3dvcmRFbnRlck5ldXRyYWxfbXNnXCIsXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdH0pLFxuXHRcdFx0XHRdKSxcblx0XHR9LFxuXHRcdG9rQWN0aW9uOiBhc3luYyAoKSA9PiB7XG5cdFx0XHRjb25zdCBpc0RlbGV0ZWQgPSBhd2FpdCBkZWxldGVBY2NvdW50KHRha2VvdmVyLCBwYXNzd29yZCwgc3VydmV5RGF0YSlcblx0XHRcdGlmIChpc0RlbGV0ZWQpIHtcblx0XHRcdFx0YXdhaXQgbG9jYXRvci5jcmVkZW50aWFsc1Byb3ZpZGVyLmRlbGV0ZUJ5VXNlcklkKHVzZXJJZClcblx0XHRcdFx0bS5yb3V0ZS5zZXQoXCIvbG9naW5cIiwgeyBub0F1dG9Mb2dpbjogdHJ1ZSB9KVxuXHRcdFx0fVxuXHRcdH0sXG5cdFx0YWxsb3dDYW5jZWw6IHRydWUsXG5cdFx0b2tBY3Rpb25UZXh0SWQ6IFwiZGVsZXRlX2FjdGlvblwiLFxuXHR9KVxufVxuXG5hc3luYyBmdW5jdGlvbiBkZWxldGVBY2NvdW50KHRha2VvdmVyOiBzdHJpbmcsIHBhc3N3b3JkOiBzdHJpbmcsIHN1cnZleURhdGE6IFN1cnZleURhdGEgfCBudWxsID0gbnVsbCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuXHRjb25zdCBjbGVhbmVkVGFrZW92ZXIgPSB0YWtlb3ZlciA9PT0gXCJcIiA/IFwiXCIgOiBnZXRDbGVhbmVkTWFpbEFkZHJlc3ModGFrZW92ZXIpXG5cblx0aWYgKGNsZWFuZWRUYWtlb3ZlciA9PT0gbnVsbCkge1xuXHRcdGF3YWl0IERpYWxvZy5tZXNzYWdlKFwibWFpbEFkZHJlc3NJbnZhbGlkX21zZ1wiKVxuXHRcdHJldHVybiBmYWxzZVxuXHR9IGVsc2Uge1xuXHRcdGNvbnN0IG1lc3NhZ2UgPSBsYW5nLm1ha2VUcmFuc2xhdGlvbihcblx0XHRcdFwiY29uZmlybV9tc2dcIixcblx0XHRcdGNsZWFuZWRUYWtlb3ZlciA9PT0gXCJcIlxuXHRcdFx0XHQ/IGxhbmcuZ2V0KFwiZGVsZXRlQWNjb3VudENvbmZpcm1fbXNnXCIpXG5cdFx0XHRcdDogbGFuZy5nZXQoXCJkZWxldGVBY2NvdW50V2l0aFRha2VvdmVyQ29uZmlybV9tc2dcIiwge1xuXHRcdFx0XHRcdFx0XCJ7MX1cIjogY2xlYW5lZFRha2VvdmVyLFxuXHRcdFx0XHQgIH0pLFxuXHRcdClcblxuXHRcdGNvbnN0IG9rID0gYXdhaXQgRGlhbG9nLmNvbmZpcm0obWVzc2FnZSlcblx0XHRpZiAoIW9rKSByZXR1cm4gZmFsc2Vcblx0XHQvLyB0aGlzIGlzIG5lY2Vzc2FyeSB0byBwcmV2ZW50IHVzIGZyb20gYXBwbHlpbmcgd2Vic29ja2V0IGV2ZW50cyB0byBhbiBhbHJlYWR5IGRlbGV0ZWQvY2xvc2VkIG9mZmxpbmUgREJcblx0XHQvLyB3aGljaCBpcyBhbiBpbW1lZGlhdGUgY3Jhc2ggb24gaW9zXG5cdFx0YXdhaXQgbG9jYXRvci5jb25uZWN0aXZpdHlNb2RlbC5jbG9zZShDbG9zZUV2ZW50QnVzT3B0aW9uLlRlcm1pbmF0ZSlcblx0XHR0cnkge1xuXHRcdFx0YXdhaXQgbG9jYXRvci5sb2dpbkZhY2FkZS5kZWxldGVBY2NvdW50KHBhc3N3b3JkLCBuZXZlck51bGwoY2xlYW5lZFRha2VvdmVyKSwgc3VydmV5RGF0YSlcblx0XHRcdHJldHVybiB0cnVlXG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0aWYgKGUgaW5zdGFuY2VvZiBQcmVjb25kaXRpb25GYWlsZWRFcnJvcikgYXdhaXQgRGlhbG9nLm1lc3NhZ2UoXCJwYXNzd29yZFdyb25nSW52YWxpZF9tc2dcIilcblx0XHRcdGlmIChlIGluc3RhbmNlb2YgSW52YWxpZERhdGFFcnJvcikgYXdhaXQgRGlhbG9nLm1lc3NhZ2UoXCJ0YWtlb3ZlckFjY291bnRJbnZhbGlkX21zZ1wiKVxuXHRcdFx0aWYgKGUgaW5zdGFuY2VvZiBMb2NrZWRFcnJvcikgYXdhaXQgRGlhbG9nLm1lc3NhZ2UoXCJvcGVyYXRpb25TdGlsbEFjdGl2ZV9tc2dcIilcblx0XHRcdHJldHVybiBmYWxzZVxuXHRcdH1cblx0fVxufVxuIiwiaW1wb3J0IG0sIHsgQ29tcG9uZW50LCBWbm9kZSB9IGZyb20gXCJtaXRocmlsXCJcbmltcG9ydCB7IGxhbmcgfSBmcm9tIFwiLi4vbWlzYy9MYW5ndWFnZVZpZXdNb2RlbC5qc1wiXG5pbXBvcnQgeyBEcm9wRG93blNlbGVjdG9yIH0gZnJvbSBcIi4uL2d1aS9iYXNlL0Ryb3BEb3duU2VsZWN0b3IuanNcIlxuaW1wb3J0IHtcblx0QXVkaXRMb2dFbnRyeSxcblx0QXVkaXRMb2dFbnRyeVR5cGVSZWYsXG5cdGNyZWF0ZVN1cnZleURhdGEsXG5cdEN1c3RvbWVyLFxuXHRDdXN0b21lckluZm8sXG5cdEN1c3RvbWVyUHJvcGVydGllc1R5cGVSZWYsXG5cdEN1c3RvbWVyU2VydmVyUHJvcGVydGllcyxcblx0Q3VzdG9tZXJUeXBlUmVmLFxuXHRHcm91cEluZm8sXG5cdEdyb3VwSW5mb1R5cGVSZWYsXG59IGZyb20gXCIuLi9hcGkvZW50aXRpZXMvc3lzL1R5cGVSZWZzLmpzXCJcbmltcG9ydCB7IEV4cGFuZGFibGVUYWJsZSB9IGZyb20gXCIuL0V4cGFuZGFibGVUYWJsZS5qc1wiXG5pbXBvcnQgeyBzaG93UHJvZ3Jlc3NEaWFsb2cgfSBmcm9tIFwiLi4vZ3VpL2RpYWxvZ3MvUHJvZ3Jlc3NEaWFsb2cuanNcIlxuaW1wb3J0IHsgU2V0dGluZ3NFeHBhbmRlciB9IGZyb20gXCIuL1NldHRpbmdzRXhwYW5kZXIuanNcIlxuaW1wb3J0IHsgTG9naW5CdXR0b24gfSBmcm9tIFwiLi4vZ3VpL2Jhc2UvYnV0dG9ucy9Mb2dpbkJ1dHRvbi5qc1wiXG5pbXBvcnQgeyBzaG93TGVhdmluZ1VzZXJTdXJ2ZXlXaXphcmQgfSBmcm9tIFwiLi4vc3Vic2NyaXB0aW9uL0xlYXZpbmdVc2VyU3VydmV5V2l6YXJkLmpzXCJcbmltcG9ydCB7IFNVUlZFWV9WRVJTSU9OX05VTUJFUiB9IGZyb20gXCIuLi9zdWJzY3JpcHRpb24vTGVhdmluZ1VzZXJTdXJ2ZXlDb25zdGFudHMuanNcIlxuaW1wb3J0IHsgc2hvd0RlbGV0ZUFjY291bnREaWFsb2cgfSBmcm9tIFwiLi4vc3Vic2NyaXB0aW9uL0RlbGV0ZUFjY291bnREaWFsb2cuanNcIlxuaW1wb3J0IHN0cmVhbSBmcm9tIFwibWl0aHJpbC9zdHJlYW1cIlxuaW1wb3J0IFN0cmVhbSBmcm9tIFwibWl0aHJpbC9zdHJlYW1cIlxuaW1wb3J0IHsgQ29sdW1uV2lkdGgsIFRhYmxlQXR0cnMsIFRhYmxlTGluZUF0dHJzIH0gZnJvbSBcIi4uL2d1aS9iYXNlL1RhYmxlLmpzXCJcbmltcG9ydCB7IExhenlMb2FkZWQsIG5ldmVyTnVsbCwgbm9PcCwgb2ZDbGFzcywgcHJvbWlzZU1hcCB9IGZyb20gXCJAdHV0YW8vdHV0YW5vdGEtdXRpbHNcIlxuaW1wb3J0IHsgQm9vdEljb25zIH0gZnJvbSBcIi4uL2d1aS9iYXNlL2ljb25zL0Jvb3RJY29ucy5qc1wiXG5pbXBvcnQgeyBCdXR0b25TaXplIH0gZnJvbSBcIi4uL2d1aS9iYXNlL0J1dHRvblNpemUuanNcIlxuaW1wb3J0IHsgR0VORVJBVEVEX01BWF9JRCB9IGZyb20gXCIuLi9hcGkvY29tbW9uL3V0aWxzL0VudGl0eVV0aWxzLmpzXCJcbmltcG9ydCB7IGZvcm1hdERhdGVUaW1lLCBmb3JtYXREYXRlVGltZUZyb21ZZXN0ZXJkYXlPbiB9IGZyb20gXCIuLi9taXNjL0Zvcm1hdHRlci5qc1wiXG5pbXBvcnQgeyBJY29ucyB9IGZyb20gXCIuLi9ndWkvYmFzZS9pY29ucy9JY29ucy5qc1wiXG5pbXBvcnQgeyBOb3RBdXRob3JpemVkRXJyb3IgfSBmcm9tIFwiLi4vYXBpL2NvbW1vbi9lcnJvci9SZXN0RXJyb3IuanNcIlxuaW1wb3J0IHsgRGlhbG9nIH0gZnJvbSBcIi4uL2d1aS9iYXNlL0RpYWxvZy5qc1wiXG5pbXBvcnQgeyBFbnRpdHlVcGRhdGVEYXRhLCBpc1VwZGF0ZUZvclR5cGVSZWYgfSBmcm9tIFwiLi4vYXBpL2NvbW1vbi91dGlscy9FbnRpdHlVcGRhdGVVdGlscy5qc1wiXG5pbXBvcnQgeyBsb2NhdG9yIH0gZnJvbSBcIi4uL2FwaS9tYWluL0NvbW1vbkxvY2F0b3IuanNcIlxuXG5leHBvcnQgdHlwZSBBY2NvdW50TWFpbnRlbmFuY2VVcGRhdGVOb3RpZmllciA9ICh1cGRhdGVzOiBSZWFkb25seUFycmF5PEVudGl0eVVwZGF0ZURhdGE+KSA9PiB2b2lkXG5cbmV4cG9ydCBpbnRlcmZhY2UgQWNjb3VudE1haW50ZW5hbmNlU2V0dGluZ3NBdHRycyB7XG5cdGN1c3RvbWVyU2VydmVyUHJvcGVydGllczogc3RyZWFtPFJlYWRvbmx5PEN1c3RvbWVyU2VydmVyUHJvcGVydGllcz4+XG5cdHNldE9uVXBkYXRlSGFuZGxlcjogKGZuOiBBY2NvdW50TWFpbnRlbmFuY2VVcGRhdGVOb3RpZmllcikgPT4gdm9pZFxufVxuXG5leHBvcnQgY2xhc3MgQWNjb3VudE1haW50ZW5hbmNlU2V0dGluZ3MgaW1wbGVtZW50cyBDb21wb25lbnQ8QWNjb3VudE1haW50ZW5hbmNlU2V0dGluZ3NBdHRycz4ge1xuXHRwcml2YXRlIHJlcXVpcmVQYXNzd29yZFVwZGF0ZUFmdGVyUmVzZXQgPSBmYWxzZVxuXHRwcml2YXRlIHNhdmVJcEFkZHJlc3MgPSBmYWxzZVxuXHRwcml2YXRlIHJlYWRvbmx5IHVzYWdlRGF0YUV4cGFuZGVkID0gc3RyZWFtKGZhbHNlKVxuXHRwcml2YXRlIHJlYWRvbmx5IGRlbGV0ZUFjY291bnRFeHBhbmRlZCA9IHN0cmVhbShmYWxzZSlcblx0cHJpdmF0ZSBhdWRpdExvZ0xpbmVzOiBSZWFkb25seUFycmF5PFRhYmxlTGluZUF0dHJzPiA9IFtdXG5cdHByaXZhdGUgYXVkaXRMb2dMb2FkZWQgPSBmYWxzZVxuXG5cdHByaXZhdGUgY3VzdG9tZXI6IEN1c3RvbWVyIHwgbnVsbCA9IG51bGxcblx0cHJpdmF0ZSByZWFkb25seSBjdXN0b21lckluZm8gPSBuZXcgTGF6eUxvYWRlZDxDdXN0b21lckluZm8+KCgpID0+IGxvY2F0b3IubG9naW5zLmdldFVzZXJDb250cm9sbGVyKCkubG9hZEN1c3RvbWVySW5mbygpKVxuXHRwcml2YXRlIHJlYWRvbmx5IGN1c3RvbWVyUHJvcGVydGllcyA9IG5ldyBMYXp5TG9hZGVkKCgpID0+XG5cdFx0bG9jYXRvci5lbnRpdHlDbGllbnRcblx0XHRcdC5sb2FkKEN1c3RvbWVyVHlwZVJlZiwgbmV2ZXJOdWxsKGxvY2F0b3IubG9naW5zLmdldFVzZXJDb250cm9sbGVyKCkudXNlci5jdXN0b21lcikpXG5cdFx0XHQudGhlbigoY3VzdG9tZXIpID0+IGxvY2F0b3IuZW50aXR5Q2xpZW50LmxvYWQoQ3VzdG9tZXJQcm9wZXJ0aWVzVHlwZVJlZiwgbmV2ZXJOdWxsKGN1c3RvbWVyLnByb3BlcnRpZXMpKSksXG5cdClcblxuXHRjb25zdHJ1Y3Rvcih2bm9kZTogVm5vZGU8QWNjb3VudE1haW50ZW5hbmNlU2V0dGluZ3NBdHRycz4pIHtcblx0XHR2bm9kZS5hdHRycy5jdXN0b21lclNlcnZlclByb3BlcnRpZXMubWFwKChwcm9wcykgPT4ge1xuXHRcdFx0dGhpcy5yZXF1aXJlUGFzc3dvcmRVcGRhdGVBZnRlclJlc2V0ID0gcHJvcHMucmVxdWlyZVBhc3N3b3JkVXBkYXRlQWZ0ZXJSZXNldFxuXHRcdFx0dGhpcy5zYXZlSXBBZGRyZXNzID0gcHJvcHMuc2F2ZUVuY3J5cHRlZElwQWRkcmVzc0luU2Vzc2lvblxuXHRcdH0pXG5cblx0XHR0aGlzLmN1c3RvbWVyUHJvcGVydGllcy5nZXRBc3luYygpLnRoZW4obS5yZWRyYXcpXG5cdFx0dm5vZGUuYXR0cnMuc2V0T25VcGRhdGVIYW5kbGVyKCh1cGRhdGVzOiBFbnRpdHlVcGRhdGVEYXRhW10pID0+IHRoaXMuaGFuZGxlRXZlbnRVcGRhdGVzKHVwZGF0ZXMpKVxuXHRcdHRoaXMudmlldyA9IHRoaXMudmlldy5iaW5kKHRoaXMpXG5cdFx0dGhpcy51cGRhdGVBdWRpdExvZygpXG5cdH1cblxuXHR2aWV3KHsgYXR0cnMgfTogVm5vZGU8QWNjb3VudE1haW50ZW5hbmNlU2V0dGluZ3NBdHRycz4pIHtcblx0XHRjb25zdCBhdWRpdExvZ1RhYmxlQXR0cnM6IFRhYmxlQXR0cnMgPSB7XG5cdFx0XHRjb2x1bW5IZWFkaW5nOiBbXCJhY3Rpb25fbGFiZWxcIiwgXCJtb2RpZmllZF9sYWJlbFwiLCBcInRpbWVfbGFiZWxcIl0sXG5cdFx0XHRjb2x1bW5XaWR0aHM6IFtDb2x1bW5XaWR0aC5MYXJnZXN0LCBDb2x1bW5XaWR0aC5MYXJnZXN0LCBDb2x1bW5XaWR0aC5TbWFsbF0sXG5cdFx0XHRzaG93QWN0aW9uQnV0dG9uQ29sdW1uOiB0cnVlLFxuXHRcdFx0bGluZXM6IHRoaXMuYXVkaXRMb2dMaW5lcyxcblx0XHRcdGFkZEJ1dHRvbkF0dHJzOiB7XG5cdFx0XHRcdHRpdGxlOiBcInJlZnJlc2hfYWN0aW9uXCIsXG5cdFx0XHRcdGNsaWNrOiAoKSA9PiBzaG93UHJvZ3Jlc3NEaWFsb2coXCJsb2FkaW5nX21zZ1wiLCB0aGlzLnVwZGF0ZUF1ZGl0TG9nKCkpLnRoZW4oKCkgPT4gbS5yZWRyYXcoKSksXG5cdFx0XHRcdGljb246IEJvb3RJY29ucy5Qcm9ncmVzcyxcblx0XHRcdFx0c2l6ZTogQnV0dG9uU2l6ZS5Db21wYWN0LFxuXHRcdFx0fSxcblx0XHR9XG5cblx0XHRyZXR1cm4gW1xuXHRcdFx0bShcIi5tdC1sXCIsIFtcblx0XHRcdFx0bShcIi5oNFwiLCBsYW5nLmdldChcInNlY3VyaXR5X3RpdGxlXCIpKSxcblx0XHRcdFx0bShEcm9wRG93blNlbGVjdG9yLCB7XG5cdFx0XHRcdFx0bGFiZWw6IFwic2F2ZUVuY3J5cHRlZElwQWRkcmVzc190aXRsZVwiLFxuXHRcdFx0XHRcdGhlbHBMYWJlbDogKCkgPT4gbGFuZy5nZXQoXCJzYXZlRW5jcnlwdGVkSXBBZGRyZXNzX2xhYmVsXCIpLFxuXHRcdFx0XHRcdHNlbGVjdGVkVmFsdWU6IHRoaXMuc2F2ZUlwQWRkcmVzcyxcblx0XHRcdFx0XHRzZWxlY3Rpb25DaGFuZ2VkSGFuZGxlcjogKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHRjb25zdCBuZXdQcm9wcyA9IE9iamVjdC5hc3NpZ24oe30sIGF0dHJzLmN1c3RvbWVyU2VydmVyUHJvcGVydGllcygpLCB7XG5cdFx0XHRcdFx0XHRcdHNhdmVFbmNyeXB0ZWRJcEFkZHJlc3NJblNlc3Npb246IHZhbHVlLFxuXHRcdFx0XHRcdFx0fSlcblx0XHRcdFx0XHRcdGxvY2F0b3IuZW50aXR5Q2xpZW50LnVwZGF0ZShuZXdQcm9wcylcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdGl0ZW1zOiBbXG5cdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdG5hbWU6IGxhbmcuZ2V0KFwieWVzX2xhYmVsXCIpLFxuXHRcdFx0XHRcdFx0XHR2YWx1ZTogdHJ1ZSxcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdG5hbWU6IGxhbmcuZ2V0KFwibm9fbGFiZWxcIiksXG5cdFx0XHRcdFx0XHRcdHZhbHVlOiBmYWxzZSxcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XSxcblx0XHRcdFx0XHRkcm9wZG93bldpZHRoOiAyNTAsXG5cdFx0XHRcdH0pLFxuXHRcdFx0XHRsb2NhdG9yLmxvZ2lucy5nZXRVc2VyQ29udHJvbGxlcigpLmlzR2xvYmFsQWRtaW4oKVxuXHRcdFx0XHRcdD8gbShcIlwiLCBbXG5cdFx0XHRcdFx0XHRcdGxvY2F0b3IubG9naW5zLmdldFVzZXJDb250cm9sbGVyKCkuaXNQYWlkQWNjb3VudCgpXG5cdFx0XHRcdFx0XHRcdFx0PyBtKERyb3BEb3duU2VsZWN0b3IsIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0bGFiZWw6IFwiZW5mb3JjZVBhc3N3b3JkVXBkYXRlX3RpdGxlXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGhlbHBMYWJlbDogKCkgPT4gbGFuZy5nZXQoXCJlbmZvcmNlUGFzc3dvcmRVcGRhdGVfbXNnXCIpLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRzZWxlY3RlZFZhbHVlOiB0aGlzLnJlcXVpcmVQYXNzd29yZFVwZGF0ZUFmdGVyUmVzZXQsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHNlbGVjdGlvbkNoYW5nZWRIYW5kbGVyOiAodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjb25zdCBuZXdQcm9wczogQ3VzdG9tZXJTZXJ2ZXJQcm9wZXJ0aWVzID0gT2JqZWN0LmFzc2lnbih7fSwgYXR0cnMuY3VzdG9tZXJTZXJ2ZXJQcm9wZXJ0aWVzKCksIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHJlcXVpcmVQYXNzd29yZFVwZGF0ZUFmdGVyUmVzZXQ6IHZhbHVlLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0bG9jYXRvci5lbnRpdHlDbGllbnQudXBkYXRlKG5ld1Byb3BzKVxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRpdGVtczogW1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdG5hbWU6IGxhbmcuZ2V0KFwieWVzX2xhYmVsXCIpLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dmFsdWU6IHRydWUsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRuYW1lOiBsYW5nLmdldChcIm5vX2xhYmVsXCIpLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dmFsdWU6IGZhbHNlLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0XHRcdF0sXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGRyb3Bkb3duV2lkdGg6IDI1MCxcblx0XHRcdFx0XHRcdFx0XHQgIH0pXG5cdFx0XHRcdFx0XHRcdFx0OiBudWxsLFxuXHRcdFx0XHRcdFx0XHR0aGlzLmN1c3RvbWVyXG5cdFx0XHRcdFx0XHRcdFx0PyBtKFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcIi5tdC1sXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdG0oRXhwYW5kYWJsZVRhYmxlLCB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dGl0bGU6IFwiYXVkaXRMb2dfdGl0bGVcIixcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0YWJsZTogYXVkaXRMb2dUYWJsZUF0dHJzLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGluZm9Nc2c6IFwiYXVkaXRMb2dJbmZvX21zZ1wiLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdG9uRXhwYW5kOiAoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBpZiB0aGUgdXNlciBkaWQgbm90IGxvYWQgdGhpcyB3aGVuIHRoZSB2aWV3IHdhcyBjcmVhdGVkIChpLmUuIGR1ZSB0byBhIGxvc3QgY29ubmVjdGlvbiksIGF0dGVtcHQgdG8gcmVsb2FkIGl0XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoIXRoaXMuYXVkaXRMb2dMb2FkZWQpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0c2hvd1Byb2dyZXNzRGlhbG9nKFwibG9hZGluZ19tc2dcIiwgdGhpcy51cGRhdGVBdWRpdExvZygpKS50aGVuKCgpID0+IG0ucmVkcmF3KCkpXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0fSksXG5cdFx0XHRcdFx0XHRcdFx0ICApXG5cdFx0XHRcdFx0XHRcdFx0OiBudWxsLFxuXHRcdFx0XHRcdCAgXSlcblx0XHRcdFx0XHQ6IG51bGwsXG5cdFx0XHRdKSxcblx0XHRcdGxvY2F0b3IubG9naW5zLmdldFVzZXJDb250cm9sbGVyKCkuaXNQYWlkQWNjb3VudCgpXG5cdFx0XHRcdD8gbShcblx0XHRcdFx0XHRcdFNldHRpbmdzRXhwYW5kZXIsXG5cdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdHRpdGxlOiBcInVzYWdlRGF0YV9sYWJlbFwiLFxuXHRcdFx0XHRcdFx0XHRleHBhbmRlZDogdGhpcy51c2FnZURhdGFFeHBhbmRlZCxcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHR0aGlzLmN1c3RvbWVyUHJvcGVydGllcy5pc0xvYWRlZCgpXG5cdFx0XHRcdFx0XHRcdD8gbShEcm9wRG93blNlbGVjdG9yLCB7XG5cdFx0XHRcdFx0XHRcdFx0XHRsYWJlbDogXCJjdXN0b21lclVzYWdlRGF0YU9wdE91dF9sYWJlbFwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0aXRlbXM6IFtcblx0XHRcdFx0XHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdG5hbWU6IGxhbmcuZ2V0KFwiY3VzdG9tZXJVc2FnZURhdGFHbG9iYWxseURlYWN0aXZhdGVkX2xhYmVsXCIpLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHZhbHVlOiB0cnVlLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0bmFtZTogbGFuZy5nZXQoXCJjdXN0b21lclVzYWdlRGF0YUdsb2JhbGx5UG9zc2libGVfbGFiZWxcIiksXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dmFsdWU6IGZhbHNlLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRcdFx0XSxcblx0XHRcdFx0XHRcdFx0XHRcdHNlbGVjdGVkVmFsdWU6IHRoaXMuY3VzdG9tZXJQcm9wZXJ0aWVzLmdldFN5bmMoKSEudXNhZ2VEYXRhT3B0ZWRPdXQsXG5cdFx0XHRcdFx0XHRcdFx0XHRzZWxlY3Rpb25DaGFuZ2VkSGFuZGxlcjogKHYpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKHRoaXMuY3VzdG9tZXJQcm9wZXJ0aWVzLmlzTG9hZGVkKCkpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjb25zdCBjdXN0b21lclByb3BzID0gdGhpcy5jdXN0b21lclByb3BlcnRpZXMuZ2V0U3luYygpIVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGN1c3RvbWVyUHJvcHMudXNhZ2VEYXRhT3B0ZWRPdXQgPSB2IGFzIGJvb2xlYW5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRsb2NhdG9yLmVudGl0eUNsaWVudC51cGRhdGUoY3VzdG9tZXJQcm9wcylcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XHRcdGRyb3Bkb3duV2lkdGg6IDI1MCxcblx0XHRcdFx0XHRcdFx0ICB9KVxuXHRcdFx0XHRcdFx0XHQ6IG51bGwsXG5cdFx0XHRcdCAgKVxuXHRcdFx0XHQ6IG51bGwsXG5cdFx0XHRtKFxuXHRcdFx0XHRcIi5tYi1sXCIsXG5cdFx0XHRcdG0oXG5cdFx0XHRcdFx0U2V0dGluZ3NFeHBhbmRlcixcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHR0aXRsZTogXCJhZG1pbkRlbGV0ZUFjY291bnRfYWN0aW9uXCIsXG5cdFx0XHRcdFx0XHRidXR0b25UZXh0OiBcImFkbWluRGVsZXRlQWNjb3VudF9hY3Rpb25cIixcblx0XHRcdFx0XHRcdGV4cGFuZGVkOiB0aGlzLmRlbGV0ZUFjY291bnRFeHBhbmRlZCxcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdG0oXG5cdFx0XHRcdFx0XHRcIi5mbGV4LWNlbnRlclwiLFxuXHRcdFx0XHRcdFx0bShcblx0XHRcdFx0XHRcdFx0XCJcIixcblx0XHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRcdHN0eWxlOiB7XG5cdFx0XHRcdFx0XHRcdFx0XHR3aWR0aDogXCIyMDBweFwiLFxuXHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdG0oTG9naW5CdXR0b24sIHtcblx0XHRcdFx0XHRcdFx0XHRsYWJlbDogXCJhZG1pbkRlbGV0ZUFjY291bnRfYWN0aW9uXCIsXG5cdFx0XHRcdFx0XHRcdFx0b25jbGljazogKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdFx0Y29uc3QgaXNQcmVtaXVtID0gbG9jYXRvci5sb2dpbnMuZ2V0VXNlckNvbnRyb2xsZXIoKS5pc1BhaWRBY2NvdW50KClcblx0XHRcdFx0XHRcdFx0XHRcdHNob3dMZWF2aW5nVXNlclN1cnZleVdpemFyZChpc1ByZW1pdW0sIGZhbHNlKS50aGVuKChyZWFzb24pID0+IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKHJlYXNvbi5zdWJtaXR0ZWQgJiYgcmVhc29uLmNhdGVnb3J5ICYmIHJlYXNvbi5yZWFzb24pIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjb25zdCBzdXJ2ZXlEYXRhID0gY3JlYXRlU3VydmV5RGF0YSh7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjYXRlZ29yeTogcmVhc29uLmNhdGVnb3J5LFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZGV0YWlsczogcmVhc29uLmRldGFpbHMsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZWFzb246IHJlYXNvbi5yZWFzb24sXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR2ZXJzaW9uOiBTVVJWRVlfVkVSU0lPTl9OVU1CRVIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0fSlcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzaG93RGVsZXRlQWNjb3VudERpYWxvZyhzdXJ2ZXlEYXRhKVxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHNob3dEZWxldGVBY2NvdW50RGlhbG9nKClcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0fSlcblx0XHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHR9KSxcblx0XHRcdFx0XHRcdCksXG5cdFx0XHRcdFx0KSxcblx0XHRcdFx0KSxcblx0XHRcdCksXG5cdFx0XVxuXHR9XG5cblx0cHJpdmF0ZSB1cGRhdGVBdWRpdExvZygpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRyZXR1cm4gbG9jYXRvci5sb2dpbnNcblx0XHRcdC5nZXRVc2VyQ29udHJvbGxlcigpXG5cdFx0XHQubG9hZEN1c3RvbWVyKClcblx0XHRcdC50aGVuKChjdXN0b21lcikgPT4ge1xuXHRcdFx0XHR0aGlzLmN1c3RvbWVyID0gY3VzdG9tZXJcblxuXHRcdFx0XHRyZXR1cm4gbG9jYXRvci5lbnRpdHlDbGllbnRcblx0XHRcdFx0XHQubG9hZFJhbmdlKEF1ZGl0TG9nRW50cnlUeXBlUmVmLCBuZXZlck51bGwoY3VzdG9tZXIuYXVkaXRMb2cpLml0ZW1zLCBHRU5FUkFURURfTUFYX0lELCAyMDAsIHRydWUpXG5cdFx0XHRcdFx0LnRoZW4oKGF1ZGl0TG9nKSA9PiB7XG5cdFx0XHRcdFx0XHR0aGlzLmF1ZGl0TG9nTG9hZGVkID0gdHJ1ZSAvLyBpbmRpY2F0ZSB0aGF0IHdlIGRvIG5vdCBuZWVkIHRvIHJlbG9hZCB0aGUgbGlzdCBhZ2FpbiB3aGVuIHdlIGV4cGFuZFxuXHRcdFx0XHRcdFx0dGhpcy5hdWRpdExvZ0xpbmVzID0gYXVkaXRMb2cubWFwKChhdWRpdExvZ0VudHJ5KSA9PiB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0XHRcdFx0Y2VsbHM6IFthdWRpdExvZ0VudHJ5LmFjdGlvbiwgYXVkaXRMb2dFbnRyeS5tb2RpZmllZEVudGl0eSwgZm9ybWF0RGF0ZVRpbWVGcm9tWWVzdGVyZGF5T24oYXVkaXRMb2dFbnRyeS5kYXRlKV0sXG5cdFx0XHRcdFx0XHRcdFx0YWN0aW9uQnV0dG9uQXR0cnM6IHtcblx0XHRcdFx0XHRcdFx0XHRcdHRpdGxlOiBcInNob3dNb3JlX2FjdGlvblwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0aWNvbjogSWNvbnMuTW9yZSxcblx0XHRcdFx0XHRcdFx0XHRcdGNsaWNrOiAoKSA9PiB0aGlzLnNob3dBdWRpdExvZ0RldGFpbHMoYXVkaXRMb2dFbnRyeSwgY3VzdG9tZXIpLFxuXHRcdFx0XHRcdFx0XHRcdFx0c2l6ZTogQnV0dG9uU2l6ZS5Db21wYWN0LFxuXHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0fSlcblx0XHRcdFx0XHQuZmluYWxseShtLnJlZHJhdylcblx0XHRcdH0pXG5cdH1cblxuXHRwcml2YXRlIHNob3dBdWRpdExvZ0RldGFpbHMoZW50cnk6IEF1ZGl0TG9nRW50cnksIGN1c3RvbWVyOiBDdXN0b21lcikge1xuXHRcdGxldCBtb2RpZmllZEdyb3VwSW5mbzogU3RyZWFtPEdyb3VwSW5mbz4gPSBzdHJlYW0oKVxuXHRcdGxldCBncm91cEluZm8gPSBzdHJlYW08R3JvdXBJbmZvPigpXG5cdFx0bGV0IGdyb3VwSW5mb0xvYWRpbmdQcm9taXNlczogUHJvbWlzZTx1bmtub3duPltdID0gW11cblxuXHRcdGlmIChlbnRyeS5tb2RpZmllZEdyb3VwSW5mbykge1xuXHRcdFx0Z3JvdXBJbmZvTG9hZGluZ1Byb21pc2VzLnB1c2goXG5cdFx0XHRcdGxvY2F0b3IuZW50aXR5Q2xpZW50XG5cdFx0XHRcdFx0LmxvYWQoR3JvdXBJbmZvVHlwZVJlZiwgZW50cnkubW9kaWZpZWRHcm91cEluZm8pXG5cdFx0XHRcdFx0LnRoZW4oKGdpKSA9PiB7XG5cdFx0XHRcdFx0XHRtb2RpZmllZEdyb3VwSW5mbyhnaSlcblx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdC5jYXRjaChcblx0XHRcdFx0XHRcdG9mQ2xhc3MoTm90QXV0aG9yaXplZEVycm9yLCAoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdC8vIElmIHRoZSBhZG1pbiBpcyByZW1vdmVkIGZyb20gdGhlIGZyZWUgZ3JvdXAsIGhlIGRvZXMgbm90IGhhdmUgdGhlIHBlcm1pc3Npb24gdG8gYWNjZXNzIHRoZSBncm91cGluZm8gb2YgdGhhdCBncm91cCBhbnltb3JlXG5cdFx0XHRcdFx0XHR9KSxcblx0XHRcdFx0XHQpLFxuXHRcdFx0KVxuXHRcdH1cblxuXHRcdGlmIChlbnRyeS5ncm91cEluZm8pIHtcblx0XHRcdGdyb3VwSW5mb0xvYWRpbmdQcm9taXNlcy5wdXNoKFxuXHRcdFx0XHRsb2NhdG9yLmVudGl0eUNsaWVudFxuXHRcdFx0XHRcdC5sb2FkKEdyb3VwSW5mb1R5cGVSZWYsIGVudHJ5Lmdyb3VwSW5mbylcblx0XHRcdFx0XHQudGhlbigoZ2kpID0+IHtcblx0XHRcdFx0XHRcdGdyb3VwSW5mbyhnaSlcblx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdC5jYXRjaChcblx0XHRcdFx0XHRcdG9mQ2xhc3MoTm90QXV0aG9yaXplZEVycm9yLCAoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdC8vIElmIHRoZSBhZG1pbiBpcyByZW1vdmVkIGZyb20gdGhlIGZyZWUgZ3JvdXAsIGhlIGRvZXMgbm90IGhhdmUgdGhlIHBlcm1pc3Npb24gdG8gYWNjZXNzIHRoZSBncm91cGluZm8gb2YgdGhhdCBncm91cCBhbnltb3JlXG5cdFx0XHRcdFx0XHR9KSxcblx0XHRcdFx0XHQpLFxuXHRcdFx0KVxuXHRcdH1cblxuXHRcdFByb21pc2UuYWxsKGdyb3VwSW5mb0xvYWRpbmdQcm9taXNlcykudGhlbigoKSA9PiB7XG5cdFx0XHRjb25zdCBncm91cEluZm9WYWx1ZSA9IGdyb3VwSW5mbygpXG5cdFx0XHRsZXQgZGlhbG9nID0gRGlhbG9nLnNob3dBY3Rpb25EaWFsb2coe1xuXHRcdFx0XHR0aXRsZTogXCJhdWRpdExvZ190aXRsZVwiLFxuXHRcdFx0XHRjaGlsZDoge1xuXHRcdFx0XHRcdHZpZXc6ICgpID0+XG5cdFx0XHRcdFx0XHRtKFwidGFibGUucHRcIiwgW1xuXHRcdFx0XHRcdFx0XHRtKFwidHJcIiwgW20oXCJ0ZFwiLCBsYW5nLmdldChcImFjdGlvbl9sYWJlbFwiKSksIG0oXCJ0ZC5wbFwiLCBlbnRyeS5hY3Rpb24pXSksXG5cdFx0XHRcdFx0XHRcdG0oXCJ0clwiLCBbbShcInRkXCIsIGxhbmcuZ2V0KFwiYWN0b3JfbGFiZWxcIikpLCBtKFwidGQucGxcIiwgZW50cnkuYWN0b3JNYWlsQWRkcmVzcyldKSxcblx0XHRcdFx0XHRcdFx0bShcInRyXCIsIFttKFwidGRcIiwgbGFuZy5nZXQoXCJJcEFkZHJlc3NfbGFiZWxcIikpLCBtKFwidGQucGxcIiwgZW50cnkuYWN0b3JJcEFkZHJlc3MgPyBlbnRyeS5hY3RvcklwQWRkcmVzcyA6IFwiXCIpXSksXG5cdFx0XHRcdFx0XHRcdG0oXCJ0clwiLCBbXG5cdFx0XHRcdFx0XHRcdFx0bShcInRkXCIsIGxhbmcuZ2V0KFwibW9kaWZpZWRfbGFiZWxcIikpLFxuXHRcdFx0XHRcdFx0XHRcdG0oXG5cdFx0XHRcdFx0XHRcdFx0XHRcInRkLnBsXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRtb2RpZmllZEdyb3VwSW5mbygpICYmIHRoaXMuZ2V0R3JvdXBJbmZvRGlzcGxheVRleHQobW9kaWZpZWRHcm91cEluZm8oKSlcblx0XHRcdFx0XHRcdFx0XHRcdFx0PyB0aGlzLmdldEdyb3VwSW5mb0Rpc3BsYXlUZXh0KG1vZGlmaWVkR3JvdXBJbmZvKCkpXG5cdFx0XHRcdFx0XHRcdFx0XHRcdDogZW50cnkubW9kaWZpZWRFbnRpdHksXG5cdFx0XHRcdFx0XHRcdFx0KSxcblx0XHRcdFx0XHRcdFx0XSksXG5cdFx0XHRcdFx0XHRcdGdyb3VwSW5mb1ZhbHVlXG5cdFx0XHRcdFx0XHRcdFx0PyBtKFwidHJcIiwgW1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRtKFwidGRcIiwgbGFuZy5nZXQoXCJncm91cF9sYWJlbFwiKSksXG5cdFx0XHRcdFx0XHRcdFx0XHRcdG0oXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XCJ0ZC5wbFwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGN1c3RvbWVyLmFkbWluR3JvdXAgPT09IGdyb3VwSW5mb1ZhbHVlLmdyb3VwXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQ/IGxhbmcuZ2V0KFwiZ2xvYmFsQWRtaW5fbGFiZWxcIilcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdDogdGhpcy5nZXRHcm91cEluZm9EaXNwbGF5VGV4dChncm91cEluZm9WYWx1ZSksXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCksXG5cdFx0XHRcdFx0XHRcdFx0ICBdKVxuXHRcdFx0XHRcdFx0XHRcdDogbnVsbCxcblx0XHRcdFx0XHRcdFx0bShcInRyXCIsIFttKFwidGRcIiwgbGFuZy5nZXQoXCJ0aW1lX2xhYmVsXCIpKSwgbShcInRkLnBsXCIsIGZvcm1hdERhdGVUaW1lKGVudHJ5LmRhdGUpKV0pLFxuXHRcdFx0XHRcdFx0XSksXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGFsbG93T2tXaXRoUmV0dXJuOiB0cnVlLFxuXHRcdFx0XHRva0FjdGlvbjogKCkgPT4gZGlhbG9nLmNsb3NlKCksXG5cdFx0XHRcdGFsbG93Q2FuY2VsOiBmYWxzZSxcblx0XHRcdH0pXG5cdFx0fSlcblx0fVxuXG5cdHByaXZhdGUgZ2V0R3JvdXBJbmZvRGlzcGxheVRleHQoZ3JvdXBJbmZvOiBHcm91cEluZm8pOiBzdHJpbmcge1xuXHRcdGlmIChncm91cEluZm8ubmFtZSAmJiBncm91cEluZm8ubWFpbEFkZHJlc3MpIHtcblx0XHRcdHJldHVybiBncm91cEluZm8ubmFtZSArIFwiIDxcIiArIGdyb3VwSW5mby5tYWlsQWRkcmVzcyArIFwiPlwiXG5cdFx0fSBlbHNlIGlmIChncm91cEluZm8ubWFpbEFkZHJlc3MpIHtcblx0XHRcdHJldHVybiBncm91cEluZm8ubWFpbEFkZHJlc3Ncblx0XHR9IGVsc2Uge1xuXHRcdFx0cmV0dXJuIGdyb3VwSW5mby5uYW1lXG5cdFx0fVxuXHR9XG5cblx0aGFuZGxlRXZlbnRVcGRhdGVzKHVwZGF0ZXM6IFJlYWRvbmx5QXJyYXk8RW50aXR5VXBkYXRlRGF0YT4pOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRyZXR1cm4gcHJvbWlzZU1hcCh1cGRhdGVzLCAodXBkYXRlKSA9PiB7XG5cdFx0XHRpZiAoaXNVcGRhdGVGb3JUeXBlUmVmKEF1ZGl0TG9nRW50cnlUeXBlUmVmLCB1cGRhdGUpKSB7XG5cdFx0XHRcdHJldHVybiB0aGlzLnVwZGF0ZUF1ZGl0TG9nKClcblx0XHRcdH0gZWxzZSBpZiAoaXNVcGRhdGVGb3JUeXBlUmVmKEN1c3RvbWVyUHJvcGVydGllc1R5cGVSZWYsIHVwZGF0ZSkpIHtcblx0XHRcdFx0dGhpcy5jdXN0b21lclByb3BlcnRpZXMucmVzZXQoKVxuXHRcdFx0XHR0aGlzLmN1c3RvbWVyUHJvcGVydGllcy5nZXRBc3luYygpLnRoZW4obS5yZWRyYXcpXG5cdFx0XHR9XG5cdFx0fSkudGhlbihub09wKVxuXHR9XG59XG4iLCJpbXBvcnQgbSwgeyBDaGlsZHJlbiB9IGZyb20gXCJtaXRocmlsXCJcbmltcG9ydCB7IERBWV9JTl9NSUxMSVMsIExhenlMb2FkZWQsIG5ldmVyTnVsbCwgbm9PcCwgb2ZDbGFzcywgcHJvbWlzZU1hcCB9IGZyb20gXCJAdHV0YW8vdHV0YW5vdGEtdXRpbHNcIlxuaW1wb3J0IHsgSW5mb0xpbmssIGxhbmcgfSBmcm9tIFwiLi4vLi4vY29tbW9uL21pc2MvTGFuZ3VhZ2VWaWV3TW9kZWxcIlxuaW1wb3J0IHsgZ2V0U3BhbVJ1bGVGaWVsZFRvTmFtZSwgZ2V0U3BhbVJ1bGVUeXBlTmFtZU1hcHBpbmcsIHNob3dBZGRTcGFtUnVsZURpYWxvZyB9IGZyb20gXCIuL0FkZFNwYW1SdWxlRGlhbG9nXCJcbmltcG9ydCB7IGdldFNwYW1SdWxlRmllbGQsIEdyb3VwVHlwZSwgT3BlcmF0aW9uVHlwZSwgU3BhbVJ1bGVGaWVsZFR5cGUsIFNwYW1SdWxlVHlwZSB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL2NvbW1vbi9UdXRhbm90YUNvbnN0YW50c1wiXG5pbXBvcnQge1xuXHRjcmVhdGVFbWFpbFNlbmRlckxpc3RFbGVtZW50LFxuXHRDdXN0b21lcixcblx0Q3VzdG9tZXJJbmZvLFxuXHRDdXN0b21lckluZm9UeXBlUmVmLFxuXHRDdXN0b21lclByb3BlcnRpZXNUeXBlUmVmLFxuXHRDdXN0b21lclNlcnZlclByb3BlcnRpZXMsXG5cdEN1c3RvbWVyU2VydmVyUHJvcGVydGllc1R5cGVSZWYsXG5cdEN1c3RvbWVyVHlwZVJlZixcblx0RG9tYWluSW5mbyxcblx0R3JvdXBUeXBlUmVmLFxuXHRSZWplY3RlZFNlbmRlclR5cGVSZWYsXG5cdFVzZXJUeXBlUmVmLFxufSBmcm9tIFwiLi4vLi4vY29tbW9uL2FwaS9lbnRpdGllcy9zeXMvVHlwZVJlZnMuanNcIlxuaW1wb3J0IHN0cmVhbSBmcm9tIFwibWl0aHJpbC9zdHJlYW1cIlxuaW1wb3J0IHsgZm9ybWF0RGF0ZVRpbWUgfSBmcm9tIFwiLi4vLi4vY29tbW9uL21pc2MvRm9ybWF0dGVyXCJcbmltcG9ydCB7IERpYWxvZyB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL2Jhc2UvRGlhbG9nXCJcbmltcG9ydCB7IExvY2tlZEVycm9yLCBQcmVjb25kaXRpb25GYWlsZWRFcnJvciB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL2NvbW1vbi9lcnJvci9SZXN0RXJyb3JcIlxuaW1wb3J0IHsgR3JvdXBEYXRhLCBsb2FkRW5hYmxlZFRlYW1NYWlsR3JvdXBzLCBsb2FkRW5hYmxlZFVzZXJNYWlsR3JvdXBzLCBsb2FkR3JvdXBEaXNwbGF5TmFtZSB9IGZyb20gXCIuL0xvYWRpbmdVdGlsc1wiXG5pbXBvcnQgeyBJY29ucyB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL2Jhc2UvaWNvbnMvSWNvbnNcIlxuaW1wb3J0IHsgc2hvd1Byb2dyZXNzRGlhbG9nIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvZGlhbG9ncy9Qcm9ncmVzc0RpYWxvZ1wiXG5pbXBvcnQgdHlwZSB7IFRhYmxlQXR0cnMsIFRhYmxlTGluZUF0dHJzIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvYmFzZS9UYWJsZS5qc1wiXG5pbXBvcnQgeyBDb2x1bW5XaWR0aCwgY3JlYXRlUm93QWN0aW9ucyB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL2Jhc2UvVGFibGUuanNcIlxuaW1wb3J0IHsgYXR0YWNoRHJvcGRvd24sIGNyZWF0ZURyb3Bkb3duLCBEcm9wZG93bkNoaWxkQXR0cnMgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2d1aS9iYXNlL0Ryb3Bkb3duLmpzXCJcbmltcG9ydCB7IERvbWFpbkRuc1N0YXR1cyB9IGZyb20gXCIuL0RvbWFpbkRuc1N0YXR1c1wiXG5pbXBvcnQgeyBzaG93RG5zQ2hlY2tEaWFsb2cgfSBmcm9tIFwiLi9DaGVja0RvbWFpbkRuc1N0YXR1c0RpYWxvZ1wiXG5pbXBvcnQgeyBCb290SWNvbnMgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2d1aS9iYXNlL2ljb25zL0Jvb3RJY29uc1wiXG5pbXBvcnQge1xuXHRHRU5FUkFURURfTUFYX0lELFxuXHRnZW5lcmF0ZWRJZFRvVGltZXN0YW1wLFxuXHRnZXRFbGVtZW50SWQsXG5cdHNvcnRDb21wYXJlQnlSZXZlcnNlSWQsXG5cdHRpbWVzdGFtcFRvR2VuZXJhdGVkSWQsXG59IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL2NvbW1vbi91dGlscy9FbnRpdHlVdGlsc1wiXG5pbXBvcnQgeyBzaG93UmVqZWN0ZWRTZW5kZXJzSW5mb0RpYWxvZyB9IGZyb20gXCIuL1JlamVjdGVkU2VuZGVyc0luZm9EaWFsb2dcIlxuaW1wb3J0IHsgc2hvd0FkZERvbWFpbldpemFyZCB9IGZyb20gXCIuL2VtYWlsZG9tYWluL0FkZERvbWFpbldpemFyZFwiXG5pbXBvcnQgeyBnZXRVc2VyR3JvdXBNZW1iZXJzaGlwcyB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL2NvbW1vbi91dGlscy9Hcm91cFV0aWxzXCJcbmltcG9ydCB7IHNob3dOb3RBdmFpbGFibGVGb3JGcmVlRGlhbG9nIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9taXNjL1N1YnNjcmlwdGlvbkRpYWxvZ3NcIlxuaW1wb3J0IHsgZ2V0RG9tYWluUGFydCB9IGZyb20gXCIuLi8uLi9jb21tb24vbWlzYy9wYXJzaW5nL01haWxBZGRyZXNzUGFyc2VyXCJcbmltcG9ydCB7IGxvY2F0b3IgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2FwaS9tYWluL0NvbW1vbkxvY2F0b3JcIlxuaW1wb3J0IHsgYXNzZXJ0TWFpbk9yTm9kZSB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL2NvbW1vbi9FbnZcIlxuaW1wb3J0IHsgQnV0dG9uU2l6ZSB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL2Jhc2UvQnV0dG9uU2l6ZS5qc1wiXG5pbXBvcnQgeyBnZXRDdXN0b21NYWlsRG9tYWlucyB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL2NvbW1vbi91dGlscy9DdXN0b21lclV0aWxzLmpzXCJcbmltcG9ydCB7IEVudGl0eVVwZGF0ZURhdGEsIGlzVXBkYXRlRm9yVHlwZVJlZiB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL2NvbW1vbi91dGlscy9FbnRpdHlVcGRhdGVVdGlscy5qc1wiXG5pbXBvcnQgeyBBY2NvdW50TWFpbnRlbmFuY2VTZXR0aW5ncywgQWNjb3VudE1haW50ZW5hbmNlVXBkYXRlTm90aWZpZXIgfSBmcm9tIFwiLi4vLi4vY29tbW9uL3NldHRpbmdzL0FjY291bnRNYWludGVuYW5jZVNldHRpbmdzLmpzXCJcbmltcG9ydCB0eXBlIHsgVXBkYXRhYmxlU2V0dGluZ3NWaWV3ZXIgfSBmcm9tIFwiLi4vLi4vY29tbW9uL3NldHRpbmdzL0ludGVyZmFjZXMuanNcIlxuaW1wb3J0IHsgRXhwYW5kYWJsZVRhYmxlIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9zZXR0aW5ncy9FeHBhbmRhYmxlVGFibGUuanNcIlxuXG5hc3NlcnRNYWluT3JOb2RlKClcbi8vIE51bWJlciBvZiBkYXlzIGZvciB0aGF0IHdlIGxvYWQgcmVqZWN0ZWQgc2VuZGVyc1xuY29uc3QgUkVKRUNURURfU0VOREVSU19UT19MT0FEX01TID0gNSAqIERBWV9JTl9NSUxMSVNcbi8vIE1heCBudW1iZXIgb2YgcmVqZWN0ZWQgc2VuZGVyIGVudHJpZXMgdGhhdCB3ZSBkaXNwbGF5IGluIHRoZSB1aVxuY29uc3QgUkVKRUNURURfU0VOREVSU19NQVhfTlVNQkVSID0gMTAwXG5cbmV4cG9ydCBjbGFzcyBHbG9iYWxTZXR0aW5nc1ZpZXdlciBpbXBsZW1lbnRzIFVwZGF0YWJsZVNldHRpbmdzVmlld2VyIHtcblx0cHJpdmF0ZSByZWFkb25seSBwcm9wcyA9IHN0cmVhbTxSZWFkb25seTxDdXN0b21lclNlcnZlclByb3BlcnRpZXM+PigpXG5cdHByaXZhdGUgY3VzdG9tZXI6IEN1c3RvbWVyIHwgbnVsbCA9IG51bGxcblx0cHJpdmF0ZSByZWFkb25seSBjdXN0b21lckluZm8gPSBuZXcgTGF6eUxvYWRlZDxDdXN0b21lckluZm8+KCgpID0+IGxvY2F0b3IubG9naW5zLmdldFVzZXJDb250cm9sbGVyKCkubG9hZEN1c3RvbWVySW5mbygpKVxuXG5cdHByaXZhdGUgYWNjb3VudE1haW50ZW5hbmNlVXBkYXRlTm90aWZpZXI6IEFjY291bnRNYWludGVuYW5jZVVwZGF0ZU5vdGlmaWVyIHwgbnVsbCA9IG51bGxcblxuXHRwcml2YXRlIHNwYW1SdWxlTGluZXM6IFJlYWRvbmx5QXJyYXk8VGFibGVMaW5lQXR0cnM+ID0gW11cblx0cHJpdmF0ZSByZWplY3RlZFNlbmRlckxpbmVzOiBSZWFkb25seUFycmF5PFRhYmxlTGluZUF0dHJzPiA9IFtdXG5cdHByaXZhdGUgY3VzdG9tRG9tYWluTGluZXM6IFJlYWRvbmx5QXJyYXk8VGFibGVMaW5lQXR0cnM+ID0gW11cblxuXHQvKipcblx0ICogY2FjaGVzIHRoZSBjdXJyZW50IHN0YXR1cyBmb3IgdGhlIGN1c3RvbSBlbWFpbCBkb21haW5zXG5cdCAqIG1hcCBmcm9tIGRvbWFpbiBuYW1lIHRvIHN0YXR1c1xuXHQgKi9cblx0cHJpdmF0ZSByZWFkb25seSBkb21haW5EbnNTdGF0dXM6IFJlY29yZDxzdHJpbmcsIERvbWFpbkRuc1N0YXR1cz4gPSB7fVxuXHRwcml2YXRlIHJlYWRvbmx5IGN1c3RvbWVyUHJvcGVydGllcyA9IG5ldyBMYXp5TG9hZGVkKCgpID0+XG5cdFx0bG9jYXRvci5lbnRpdHlDbGllbnRcblx0XHRcdC5sb2FkKEN1c3RvbWVyVHlwZVJlZiwgbmV2ZXJOdWxsKGxvY2F0b3IubG9naW5zLmdldFVzZXJDb250cm9sbGVyKCkudXNlci5jdXN0b21lcikpXG5cdFx0XHQudGhlbigoY3VzdG9tZXIpID0+IGxvY2F0b3IuZW50aXR5Q2xpZW50LmxvYWQoQ3VzdG9tZXJQcm9wZXJ0aWVzVHlwZVJlZiwgbmV2ZXJOdWxsKGN1c3RvbWVyLnByb3BlcnRpZXMpKSksXG5cdClcblxuXHRjb25zdHJ1Y3RvcigpIHtcblx0XHR0aGlzLmN1c3RvbWVyUHJvcGVydGllcy5nZXRBc3luYygpLnRoZW4obS5yZWRyYXcpXG5cdFx0dGhpcy51cGRhdGVDdXN0b21lclNlcnZlclByb3BlcnRpZXMoKVxuXHRcdHRoaXMudmlldyA9IHRoaXMudmlldy5iaW5kKHRoaXMpXG5cdFx0dGhpcy51cGRhdGVEb21haW5zKClcblx0fVxuXG5cdHZpZXcoKTogQ2hpbGRyZW4ge1xuXHRcdGNvbnN0IHNwYW1SdWxlVGFibGVBdHRyczogVGFibGVBdHRycyA9IHtcblx0XHRcdGNvbHVtbkhlYWRpbmc6IFtcImVtYWlsU2VuZGVyX2xhYmVsXCIsIFwiZW1haWxTZW5kZXJSdWxlX2xhYmVsXCJdLFxuXHRcdFx0Y29sdW1uV2lkdGhzOiBbQ29sdW1uV2lkdGguTGFyZ2VzdCwgQ29sdW1uV2lkdGguU21hbGxdLFxuXHRcdFx0c2hvd0FjdGlvbkJ1dHRvbkNvbHVtbjogdHJ1ZSxcblx0XHRcdGFkZEJ1dHRvbkF0dHJzOiB7XG5cdFx0XHRcdHRpdGxlOiBcImFkZFNwYW1SdWxlX2FjdGlvblwiLFxuXHRcdFx0XHRjbGljazogKCkgPT4gc2hvd0FkZFNwYW1SdWxlRGlhbG9nKG51bGwpLFxuXHRcdFx0XHRpY29uOiBJY29ucy5BZGQsXG5cdFx0XHRcdHNpemU6IEJ1dHRvblNpemUuQ29tcGFjdCxcblx0XHRcdH0sXG5cdFx0XHRsaW5lczogdGhpcy5zcGFtUnVsZUxpbmVzLFxuXHRcdH1cblx0XHRjb25zdCByZWplY3RlZFNlbmRlclRhYmxlQXR0cnM6IFRhYmxlQXR0cnMgPSB7XG5cdFx0XHRjb2x1bW5IZWFkaW5nOiBbXCJlbWFpbFNlbmRlcl9sYWJlbFwiXSxcblx0XHRcdGNvbHVtbldpZHRoczogW0NvbHVtbldpZHRoLkxhcmdlc3RdLFxuXHRcdFx0c2hvd0FjdGlvbkJ1dHRvbkNvbHVtbjogdHJ1ZSxcblx0XHRcdGFkZEJ1dHRvbkF0dHJzOiB7XG5cdFx0XHRcdHRpdGxlOiBcInJlZnJlc2hfYWN0aW9uXCIsXG5cdFx0XHRcdGNsaWNrOiAoKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy51cGRhdGVSZWplY3RlZFNlbmRlclRhYmxlKClcblx0XHRcdFx0fSxcblx0XHRcdFx0aWNvbjogQm9vdEljb25zLlByb2dyZXNzLFxuXHRcdFx0XHRzaXplOiBCdXR0b25TaXplLkNvbXBhY3QsXG5cdFx0XHR9LFxuXHRcdFx0bGluZXM6IHRoaXMucmVqZWN0ZWRTZW5kZXJMaW5lcyxcblx0XHR9XG5cdFx0Y29uc3QgY3VzdG9tRG9tYWluVGFibGVBdHRyczogVGFibGVBdHRycyA9IHtcblx0XHRcdGNvbHVtbkhlYWRpbmc6IFtcImFkbWluQ3VzdG9tRG9tYWluX2xhYmVsXCIsIFwiY2F0Y2hBbGxNYWlsYm94X2xhYmVsXCJdLFxuXHRcdFx0Y29sdW1uV2lkdGhzOiBbQ29sdW1uV2lkdGguTGFyZ2VzdCwgQ29sdW1uV2lkdGguU21hbGxdLFxuXHRcdFx0c2hvd0FjdGlvbkJ1dHRvbkNvbHVtbjogdHJ1ZSxcblx0XHRcdGFkZEJ1dHRvbkF0dHJzOiB7XG5cdFx0XHRcdHRpdGxlOiBcImFkZEN1c3RvbURvbWFpbl9hY3Rpb25cIixcblx0XHRcdFx0Y2xpY2s6IGFzeW5jICgpID0+IHtcblx0XHRcdFx0XHRjb25zdCBjdXN0b21lckluZm8gPSBhd2FpdCB0aGlzLmN1c3RvbWVySW5mby5nZXRBc3luYygpXG5cdFx0XHRcdFx0aWYgKGxvY2F0b3IubG9naW5zLmdldFVzZXJDb250cm9sbGVyKCkuaXNGcmVlQWNjb3VudCgpKSB7XG5cdFx0XHRcdFx0XHRzaG93Tm90QXZhaWxhYmxlRm9yRnJlZURpYWxvZygpXG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGNvbnN0IG1haWxBZGRyZXNzVGFibGVNb2RlbCA9IGF3YWl0IGxvY2F0b3IubWFpbEFkZHJlc3NUYWJsZU1vZGVsRm9yT3duTWFpbGJveCgpXG5cdFx0XHRcdFx0XHRhd2FpdCBzaG93QWRkRG9tYWluV2l6YXJkKFwiXCIsIGN1c3RvbWVySW5mbywgbWFpbEFkZHJlc3NUYWJsZU1vZGVsKVxuXHRcdFx0XHRcdFx0dGhpcy51cGRhdGVEb21haW5zKClcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGljb246IEljb25zLkFkZCxcblx0XHRcdFx0c2l6ZTogQnV0dG9uU2l6ZS5Db21wYWN0LFxuXHRcdFx0fSxcblx0XHRcdGxpbmVzOiB0aGlzLmN1c3RvbURvbWFpbkxpbmVzLFxuXHRcdH1cblxuXHRcdHJldHVybiBbXG5cdFx0XHRtKFwiI2dsb2JhbC1zZXR0aW5ncy5maWxsLWFic29sdXRlLnNjcm9sbC5wbHItbFwiLCBbXG5cdFx0XHRcdG0oRXhwYW5kYWJsZVRhYmxlLCB7XG5cdFx0XHRcdFx0dGl0bGU6IFwiYWRtaW5TcGFtX2FjdGlvblwiLFxuXHRcdFx0XHRcdHRhYmxlOiBzcGFtUnVsZVRhYmxlQXR0cnMsXG5cdFx0XHRcdFx0aW5mb01zZzogXCJhZG1pblNwYW1SdWxlSW5mb19tc2dcIixcblx0XHRcdFx0XHRpbmZvTGlua0lkOiBJbmZvTGluay5TcGFtUnVsZXMsXG5cdFx0XHRcdH0pLFxuXHRcdFx0XHRtKEV4cGFuZGFibGVUYWJsZSwge1xuXHRcdFx0XHRcdHRpdGxlOiBcInJlamVjdGVkRW1haWxzX2xhYmVsXCIsXG5cdFx0XHRcdFx0dGFibGU6IHJlamVjdGVkU2VuZGVyVGFibGVBdHRycyxcblx0XHRcdFx0XHRpbmZvTXNnOiBcInJlamVjdGVkU2VuZGVyTGlzdEluZm9fbXNnXCIsXG5cdFx0XHRcdFx0b25FeHBhbmQ6ICgpID0+IHRoaXMudXBkYXRlUmVqZWN0ZWRTZW5kZXJUYWJsZSgpLFxuXHRcdFx0XHR9KSxcblx0XHRcdFx0bShFeHBhbmRhYmxlVGFibGUsIHtcblx0XHRcdFx0XHR0aXRsZTogXCJjdXN0b21FbWFpbERvbWFpbnNfbGFiZWxcIixcblx0XHRcdFx0XHR0YWJsZTogY3VzdG9tRG9tYWluVGFibGVBdHRycyxcblx0XHRcdFx0XHRpbmZvTXNnOiBcIm1vcmVJbmZvX21zZ1wiLFxuXHRcdFx0XHRcdGluZm9MaW5rSWQ6IEluZm9MaW5rLkRvbWFpbkluZm8sXG5cdFx0XHRcdH0pLFxuXHRcdFx0XHRtKEFjY291bnRNYWludGVuYW5jZVNldHRpbmdzLCB7XG5cdFx0XHRcdFx0Y3VzdG9tZXJTZXJ2ZXJQcm9wZXJ0aWVzOiB0aGlzLnByb3BzLFxuXHRcdFx0XHRcdHNldE9uVXBkYXRlSGFuZGxlcjogKGZuOiBBY2NvdW50TWFpbnRlbmFuY2VVcGRhdGVOb3RpZmllcikgPT4ge1xuXHRcdFx0XHRcdFx0dGhpcy5hY2NvdW50TWFpbnRlbmFuY2VVcGRhdGVOb3RpZmllciA9IGZuXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0fSksXG5cdFx0XHRdKSxcblx0XHRdXG5cdH1cblxuXHRwcml2YXRlIHVwZGF0ZUN1c3RvbWVyU2VydmVyUHJvcGVydGllcygpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRyZXR1cm4gbG9jYXRvci5jdXN0b21lckZhY2FkZS5sb2FkQ3VzdG9tZXJTZXJ2ZXJQcm9wZXJ0aWVzKCkudGhlbigocHJvcHMpID0+IHtcblx0XHRcdHRoaXMucHJvcHMocHJvcHMpXG5cblx0XHRcdGNvbnN0IGZpZWxkVG9OYW1lID0gZ2V0U3BhbVJ1bGVGaWVsZFRvTmFtZSgpXG5cblx0XHRcdHRoaXMuc3BhbVJ1bGVMaW5lcyA9IHByb3BzLmVtYWlsU2VuZGVyTGlzdC5tYXAoKHJ1bGUsIGluZGV4KSA9PiB7XG5cdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0Y2VsbHM6ICgpID0+IFtcblx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0bWFpbjogZmllbGRUb05hbWVbZ2V0U3BhbVJ1bGVGaWVsZChydWxlKV0sXG5cdFx0XHRcdFx0XHRcdGluZm86IFtydWxlLnZhbHVlXSxcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdG1haW46IG5ldmVyTnVsbChnZXRTcGFtUnVsZVR5cGVOYW1lTWFwcGluZygpLmZpbmQoKHQpID0+IHQudmFsdWUgPT09IHJ1bGUudHlwZSkpLm5hbWUsXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdF0sXG5cdFx0XHRcdFx0YWN0aW9uQnV0dG9uQXR0cnM6IGNyZWF0ZVJvd0FjdGlvbnMoXG5cdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdGdldEFycmF5OiAoKSA9PiBwcm9wcy5lbWFpbFNlbmRlckxpc3QsXG5cdFx0XHRcdFx0XHRcdHVwZGF0ZUluc3RhbmNlOiAoKSA9PiBsb2NhdG9yLmVudGl0eUNsaWVudC51cGRhdGUocHJvcHMpLmNhdGNoKG9mQ2xhc3MoTG9ja2VkRXJyb3IsIG5vT3ApKSxcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRydWxlLFxuXHRcdFx0XHRcdFx0aW5kZXgsXG5cdFx0XHRcdFx0XHRbXG5cdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHRsYWJlbDogXCJlZGl0X2FjdGlvblwiLFxuXHRcdFx0XHRcdFx0XHRcdGNsaWNrOiAoKSA9PiBzaG93QWRkU3BhbVJ1bGVEaWFsb2cocnVsZSksXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRdLFxuXHRcdFx0XHRcdCksXG5cdFx0XHRcdH1cblx0XHRcdH0pXG5cblx0XHRcdG0ucmVkcmF3KClcblx0XHR9KVxuXHR9XG5cblx0cHJpdmF0ZSB1cGRhdGVSZWplY3RlZFNlbmRlclRhYmxlKCk6IHZvaWQge1xuXHRcdGNvbnN0IGN1c3RvbWVyID0gdGhpcy5jdXN0b21lclxuXG5cdFx0aWYgKGN1c3RvbWVyICYmIGN1c3RvbWVyLnJlamVjdGVkU2VuZGVycykge1xuXHRcdFx0Ly8gUmVqZWN0ZWQgc2VuZGVycyBhcmUgd3JpdHRlbiB3aXRoIFRUTCBmb3Igc2V2ZW4gZGF5cy5cblx0XHRcdC8vIFdlIGhhdmUgdG8gYXZvaWQgdGhhdCB3ZSBsb2FkIHRvbyBtYW55IChhbHJlYWR5IGRlbGV0ZWQpIHJlamVjdGVkIHNlbmRlcnMgZm9ybSB0aGUgcGFzdC5cblx0XHRcdC8vIEZpcnN0IHdlIGxvYWQgUkVKRUNURURfU0VOREVSU19NQVhfTlVNQkVSIGl0ZW1zIHN0YXJ0aW5nIGZyb20gdGhlIHBhc3QgdGltZXN0YW1wIGludG8gdGhlIGZ1dHVyZS4gSWYgdGhlcmUgYXJlXG5cdFx0XHQvLyBtb3JlIGVudHJpZXMgYXZhaWxhYmxlIHdlIGNhbiBzYWZlbHkgbG9hZCBSRUpFQ1RFRF9TRU5ERVJTX01BWF9OVU1CRVIgZnJvbSBHRU5FUkFURURfTUFYX0lEIGluIHJldmVyc2Ugb3JkZXIuXG5cdFx0XHQvLyBPdGhlcndpc2Ugd2Ugd2lsbCBqdXN0IHVzZSB3aGF0IGhhcyBiZWVuIHJldHVybmVkIGluIHRoZSBmaXJzdCByZXF1ZXN0LlxuXHRcdFx0Y29uc3Qgc2VuZGVyTGlzdElkID0gY3VzdG9tZXIucmVqZWN0ZWRTZW5kZXJzLml0ZW1zXG5cdFx0XHRjb25zdCBzdGFydElkID0gdGltZXN0YW1wVG9HZW5lcmF0ZWRJZChEYXRlLm5vdygpIC0gUkVKRUNURURfU0VOREVSU19UT19MT0FEX01TKVxuXHRcdFx0Y29uc3QgbG9hZGluZ1Byb21pc2UgPSBsb2NhdG9yLmVudGl0eUNsaWVudFxuXHRcdFx0XHQubG9hZFJhbmdlKFJlamVjdGVkU2VuZGVyVHlwZVJlZiwgc2VuZGVyTGlzdElkLCBzdGFydElkLCBSRUpFQ1RFRF9TRU5ERVJTX01BWF9OVU1CRVIsIGZhbHNlKVxuXHRcdFx0XHQudGhlbigocmVqZWN0ZWRTZW5kZXJzKSA9PiB7XG5cdFx0XHRcdFx0aWYgKFJFSkVDVEVEX1NFTkRFUlNfTUFYX05VTUJFUiA9PT0gcmVqZWN0ZWRTZW5kZXJzLmxlbmd0aCkge1xuXHRcdFx0XHRcdFx0Ly8gVGhlcmUgYXJlIG1vcmUgZW50cmllcyBhdmFpbGFibGUsIHdlIG5lZWQgdG8gbG9hZCBmcm9tIEdFTkVSQVRFRF9NQVhfSUQuXG5cdFx0XHRcdFx0XHQvLyB3ZSBkb24ndCBuZWVkIHRvIHNvcnQgaGVyZSBiZWNhdXNlIHdlIGxvYWQgaW4gcmV2ZXJzZSBkaXJlY3Rpb25cblx0XHRcdFx0XHRcdHJldHVybiBsb2NhdG9yLmVudGl0eUNsaWVudC5sb2FkUmFuZ2UoUmVqZWN0ZWRTZW5kZXJUeXBlUmVmLCBzZW5kZXJMaXN0SWQsIEdFTkVSQVRFRF9NQVhfSUQsIFJFSkVDVEVEX1NFTkRFUlNfTUFYX05VTUJFUiwgdHJ1ZSlcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0Ly8gZW5zdXJlIHRoYXQgcmVqZWN0ZWQgc2VuZGVycyBhcmUgc29ydGVkIGluIGRlc2NlbmRpbmcgb3JkZXJcblx0XHRcdFx0XHRcdHJldHVybiByZWplY3RlZFNlbmRlcnMuc29ydChzb3J0Q29tcGFyZUJ5UmV2ZXJzZUlkKVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSlcblx0XHRcdFx0LnRoZW4oKHJlamVjdGVkU2VuZGVycykgPT4ge1xuXHRcdFx0XHRcdHRoaXMucmVqZWN0ZWRTZW5kZXJMaW5lcyA9IHJlamVjdGVkU2VuZGVycy5tYXAoKHJlamVjdGVkU2VuZGVyKSA9PiB7XG5cdFx0XHRcdFx0XHRjb25zdCByZWplY3REYXRlID0gZm9ybWF0RGF0ZVRpbWUobmV3IERhdGUoZ2VuZXJhdGVkSWRUb1RpbWVzdGFtcChnZXRFbGVtZW50SWQocmVqZWN0ZWRTZW5kZXIpKSkpXG5cdFx0XHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdFx0XHRjZWxsczogKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdHJldHVybiBbXG5cdFx0XHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdG1haW46IHJlamVjdGVkU2VuZGVyLnNlbmRlck1haWxBZGRyZXNzLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRpbmZvOiBbYCR7cmVqZWN0RGF0ZX0sICR7cmVqZWN0ZWRTZW5kZXIuc2VuZGVySG9zdG5hbWV9ICgke3JlamVjdGVkU2VuZGVyLnNlbmRlcklwfSlgXSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y2xpY2s6ICgpID0+IHNob3dSZWplY3RlZFNlbmRlcnNJbmZvRGlhbG9nKHJlamVjdGVkU2VuZGVyKSxcblx0XHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0XVxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRhY3Rpb25CdXR0b25BdHRyczogYXR0YWNoRHJvcGRvd24oe1xuXHRcdFx0XHRcdFx0XHRcdG1haW5CdXR0b25BdHRyczoge1xuXHRcdFx0XHRcdFx0XHRcdFx0dGl0bGU6IFwic2hvd01vcmVfYWN0aW9uXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRpY29uOiBJY29ucy5Nb3JlLFxuXHRcdFx0XHRcdFx0XHRcdFx0c2l6ZTogQnV0dG9uU2l6ZS5Db21wYWN0LFxuXHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0Y2hpbGRBdHRyczogKCkgPT4gW1xuXHRcdFx0XHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRsYWJlbDogXCJzaG93UmVqZWN0UmVhc29uX2FjdGlvblwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRjbGljazogKCkgPT4gc2hvd1JlamVjdGVkU2VuZGVyc0luZm9EaWFsb2cocmVqZWN0ZWRTZW5kZXIpLFxuXHRcdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0bGFiZWw6IFwiYWRkU3BhbVJ1bGVfYWN0aW9uXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNsaWNrOiAoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y29uc3QgZG9tYWluUGFydCA9IGdldERvbWFpblBhcnQocmVqZWN0ZWRTZW5kZXIuc2VuZGVyTWFpbEFkZHJlc3MpXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0c2hvd0FkZFNwYW1SdWxlRGlhbG9nKFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y3JlYXRlRW1haWxTZW5kZXJMaXN0RWxlbWVudCh7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHZhbHVlOiBkb21haW5QYXJ0ID8gZG9tYWluUGFydCA6IFwiXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHR5cGU6IFNwYW1SdWxlVHlwZS5XSElURUxJU1QsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGZpZWxkOiBTcGFtUnVsZUZpZWxkVHlwZS5GUk9NLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRoYXNoZWRWYWx1ZTogXCJcIixcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0pLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdClcblx0XHRcdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0XSxcblx0XHRcdFx0XHRcdFx0fSksXG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSlcblx0XHRcdFx0fSlcblx0XHRcdHNob3dQcm9ncmVzc0RpYWxvZyhcImxvYWRpbmdfbXNnXCIsIGxvYWRpbmdQcm9taXNlKS50aGVuKCgpID0+IG0ucmVkcmF3KCkpXG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyB1cGRhdGVEb21haW5zKCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGNvbnN0IGN1c3RvbWVySW5mbyA9IGF3YWl0IHRoaXMuY3VzdG9tZXJJbmZvLmdldEFzeW5jKClcblx0XHRsZXQgY3VzdG9tRG9tYWluSW5mb3MgPSBnZXRDdXN0b21NYWlsRG9tYWlucyhjdXN0b21lckluZm8pXG5cdFx0Ly8gcmVtb3ZlIGRucyBzdGF0dXMgaW5zdGFuY2VzIGZvciBhbGwgcmVtb3ZlZCBkb21haW5zXG5cdFx0Zm9yIChjb25zdCBkb21haW4gb2YgT2JqZWN0LmtleXModGhpcy5kb21haW5EbnNTdGF0dXMpKSB7XG5cdFx0XHRpZiAoIWN1c3RvbURvbWFpbkluZm9zLnNvbWUoKGRpKSA9PiBkaS5kb21haW4gPT09IGRvbWFpbikpIHtcblx0XHRcdFx0ZGVsZXRlIHRoaXMuZG9tYWluRG5zU3RhdHVzW2RvbWFpbl1cblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIHByb21pc2VNYXAoY3VzdG9tRG9tYWluSW5mb3MsIChkb21haW5JbmZvKSA9PiB7XG5cdFx0XHQvLyBjcmVhdGUgZG5zIHN0YXR1cyBpbnN0YW5jZXMgZm9yIGFsbCBuZXcgZG9tYWluc1xuXHRcdFx0aWYgKCF0aGlzLmRvbWFpbkRuc1N0YXR1c1tkb21haW5JbmZvLmRvbWFpbl0pIHtcblx0XHRcdFx0dGhpcy5kb21haW5EbnNTdGF0dXNbZG9tYWluSW5mby5kb21haW5dID0gbmV3IERvbWFpbkRuc1N0YXR1cyhkb21haW5JbmZvLmRvbWFpbilcblxuXHRcdFx0XHR0aGlzLmRvbWFpbkRuc1N0YXR1c1tkb21haW5JbmZvLmRvbWFpbl0ubG9hZEN1cnJlbnRTdGF0dXMoKS50aGVuKCgpID0+IHtcblx0XHRcdFx0XHRtLnJlZHJhdygpXG5cdFx0XHRcdH0pXG5cdFx0XHR9XG5cblx0XHRcdGxldCBkb21haW5EbnNTdGF0dXMgPSB0aGlzLmRvbWFpbkRuc1N0YXR1c1tkb21haW5JbmZvLmRvbWFpbl1cblx0XHRcdGxldCBwID0gUHJvbWlzZS5yZXNvbHZlKGxhbmcuZ2V0KFwiY29tYm9Cb3hTZWxlY3Rpb25Ob25lX21zZ1wiKSlcblxuXHRcdFx0aWYgKGRvbWFpbkluZm8uY2F0Y2hBbGxNYWlsR3JvdXApIHtcblx0XHRcdFx0cCA9IGxvYWRHcm91cERpc3BsYXlOYW1lKGRvbWFpbkluZm8uY2F0Y2hBbGxNYWlsR3JvdXApXG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBwLnRoZW4oKGNhdGNoQWxsR3JvdXBOYW1lKSA9PiB7XG5cdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0Y2VsbHM6ICgpID0+IFtcblx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0bWFpbjogZG9tYWluSW5mby5kb21haW4sXG5cdFx0XHRcdFx0XHRcdGluZm86IFtkb21haW5EbnNTdGF0dXMuZ2V0RG5zU3RhdHVzSW5mbygpXSxcblx0XHRcdFx0XHRcdFx0Y2xpY2s6XG5cdFx0XHRcdFx0XHRcdFx0ZG9tYWluRG5zU3RhdHVzLnN0YXR1cy5pc0xvYWRlZCgpICYmICFkb21haW5EbnNTdGF0dXMuYXJlQWxsUmVjb3Jkc0ZpbmUoKVxuXHRcdFx0XHRcdFx0XHRcdFx0PyAoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0c2hvd0Ruc0NoZWNrRGlhbG9nKGRvbWFpbkRuc1N0YXR1cylcblx0XHRcdFx0XHRcdFx0XHRcdCAgfVxuXHRcdFx0XHRcdFx0XHRcdFx0OiBub09wLFxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0bWFpbjogY2F0Y2hBbGxHcm91cE5hbWUsXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdF0sXG5cdFx0XHRcdFx0YWN0aW9uQnV0dG9uQXR0cnM6IHtcblx0XHRcdFx0XHRcdHRpdGxlOiBcImFjdGlvbl9sYWJlbFwiIGFzIGNvbnN0LFxuXHRcdFx0XHRcdFx0aWNvbjogSWNvbnMuTW9yZSxcblx0XHRcdFx0XHRcdHNpemU6IEJ1dHRvblNpemUuQ29tcGFjdCxcblx0XHRcdFx0XHRcdGNsaWNrOiBjcmVhdGVEcm9wZG93bih7XG5cdFx0XHRcdFx0XHRcdGxhenlCdXR0b25zOiAoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgYnV0dG9uczogRHJvcGRvd25DaGlsZEF0dHJzW10gPSBbXG5cdFx0XHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGxhYmVsOiBcInNldENhdGNoQWxsTWFpbGJveF9hY3Rpb25cIixcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y2xpY2s6ICgpID0+IHRoaXMuZWRpdENhdGNoQWxsTWFpbGJveChkb21haW5JbmZvKSxcblx0XHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGxhYmVsOiBcImRlbGV0ZV9hY3Rpb25cIixcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y2xpY2s6ICgpID0+IHRoaXMuZGVsZXRlQ3VzdG9tRG9tYWluKGRvbWFpbkluZm8pLFxuXHRcdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XHRdXG5cblx0XHRcdFx0XHRcdFx0XHRpZiAoZG9tYWluRG5zU3RhdHVzLnN0YXR1cy5pc0xvYWRlZCgpICYmICFkb21haW5EbnNTdGF0dXMuYXJlQWxsUmVjb3Jkc0ZpbmUoKSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0YnV0dG9ucy51bnNoaWZ0KHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0bGFiZWw6IFwicmVzdW1lU2V0dXBfbGFiZWxcIixcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y2xpY2s6ICgpID0+IHRoaXMub25SZXN1bWVTZXR1cChkb21haW5EbnNTdGF0dXMsIGN1c3RvbWVySW5mbyksXG5cdFx0XHRcdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gYnV0dG9uc1xuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHR3aWR0aDogMjYwLFxuXHRcdFx0XHRcdFx0fSksXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0fVxuXHRcdFx0fSlcblx0XHR9KS50aGVuKCh0YWJsZUxpbmVzKSA9PiB7XG5cdFx0XHR0aGlzLmN1c3RvbURvbWFpbkxpbmVzID0gdGFibGVMaW5lc1xuXG5cdFx0XHRtLnJlZHJhdygpXG5cdFx0fSlcblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgb25SZXN1bWVTZXR1cChkb21haW5EbnNTdGF0dXM6IERvbWFpbkRuc1N0YXR1cywgY3VzdG9tZXJJbmZvOiBhbnkpIHtcblx0XHQvLyBBc3N1bWluZyB1c2VyIG1haWxib3ggZm9yIG5vd1xuXHRcdGNvbnN0IG1haWxBZGRyZXNzVGFibGVNb2RlbCA9IGF3YWl0IGxvY2F0b3IubWFpbEFkZHJlc3NUYWJsZU1vZGVsRm9yT3duTWFpbGJveCgpXG5cdFx0c2hvd0FkZERvbWFpbldpemFyZChkb21haW5EbnNTdGF0dXMuZG9tYWluLCBjdXN0b21lckluZm8sIG1haWxBZGRyZXNzVGFibGVNb2RlbCkudGhlbigoKSA9PiB7XG5cdFx0XHRkb21haW5EbnNTdGF0dXMubG9hZEN1cnJlbnRTdGF0dXMoKS50aGVuKCgpID0+IG0ucmVkcmF3KCkpXG5cdFx0fSlcblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgZWRpdENhdGNoQWxsTWFpbGJveChkb21haW5JbmZvOiBEb21haW5JbmZvKSB7XG5cdFx0Y29uc3QgZ3JvdXBEYXRhcyA9IGF3YWl0IHNob3dQcm9ncmVzc0RpYWxvZyhcInBsZWFzZVdhaXRfbXNnXCIsIHRoaXMubG9hZE1haWxib3hHcm91cERhdGFBbmRDYXRjaEFsbElkKGRvbWFpbkluZm8pKVxuXHRcdGNvbnN0IGluaXRpYWxWYWx1ZSA9IGdyb3VwRGF0YXMuc2VsZWN0ZWQ/Lmdyb3VwSWQgPz8gbnVsbFxuXHRcdGNvbnN0IHNlbGVjdGVkTWFpbEdyb3VwSWQgPSBhd2FpdCBEaWFsb2cuc2hvd0Ryb3BEb3duU2VsZWN0aW9uRGlhbG9nKFxuXHRcdFx0XCJzZXRDYXRjaEFsbE1haWxib3hfYWN0aW9uXCIsXG5cdFx0XHRcImNhdGNoQWxsTWFpbGJveF9sYWJlbFwiLFxuXHRcdFx0bnVsbCxcblx0XHRcdFtcblx0XHRcdFx0e1xuXHRcdFx0XHRcdG5hbWU6IGxhbmcuZ2V0KFwiY29tYm9Cb3hTZWxlY3Rpb25Ob25lX21zZ1wiKSxcblx0XHRcdFx0XHR2YWx1ZTogbnVsbCxcblx0XHRcdFx0fSxcblx0XHRcdFx0Li4uZ3JvdXBEYXRhcy5hdmFpbGFibGUubWFwKChncm91cERhdGEpID0+IHtcblx0XHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdFx0bmFtZTogZ3JvdXBEYXRhLmRpc3BsYXlOYW1lLFxuXHRcdFx0XHRcdFx0dmFsdWU6IGdyb3VwRGF0YS5ncm91cElkLFxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSksXG5cdFx0XHRdLFxuXHRcdFx0aW5pdGlhbFZhbHVlLFxuXHRcdFx0MjUwLFxuXHRcdClcblx0XHRyZXR1cm4gbG9jYXRvci5jdXN0b21lckZhY2FkZS5zZXRDYXRjaEFsbEdyb3VwKGRvbWFpbkluZm8uZG9tYWluLCBzZWxlY3RlZE1haWxHcm91cElkKVxuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyBsb2FkTWFpbGJveEdyb3VwRGF0YUFuZENhdGNoQWxsSWQoZG9tYWluSW5mbzogRG9tYWluSW5mbyk6IFByb21pc2U8e1xuXHRcdGF2YWlsYWJsZTogQXJyYXk8R3JvdXBEYXRhPlxuXHRcdHNlbGVjdGVkOiBHcm91cERhdGEgfCBudWxsXG5cdH0+IHtcblx0XHRjb25zdCBjdXN0b21lciA9IGF3YWl0IGxvY2F0b3IubG9naW5zLmdldFVzZXJDb250cm9sbGVyKCkubG9hZEN1c3RvbWVyKClcblx0XHRjb25zdCB0ZWFtTWFpbEdyb3VwcyA9IGF3YWl0IGxvYWRFbmFibGVkVGVhbU1haWxHcm91cHMoY3VzdG9tZXIpXG5cdFx0Y29uc3QgdXNlck1haWxHcm91cHMgPSBhd2FpdCBsb2FkRW5hYmxlZFVzZXJNYWlsR3JvdXBzKGN1c3RvbWVyKVxuXHRcdGNvbnN0IGFsbE1haWxHcm91cHMgPSB0ZWFtTWFpbEdyb3Vwcy5jb25jYXQodXNlck1haWxHcm91cHMpXG5cdFx0bGV0IGNhdGNoQWxsTWFpbEdyb3VwSWQ6IElkIHwgbnVsbCA9IG51bGxcblx0XHRpZiAoZG9tYWluSW5mby5jYXRjaEFsbE1haWxHcm91cCkge1xuXHRcdFx0Y29uc3QgY2F0Y2hBbGxHcm91cCA9IGF3YWl0IGxvY2F0b3IuZW50aXR5Q2xpZW50LmxvYWQoR3JvdXBUeXBlUmVmLCBkb21haW5JbmZvLmNhdGNoQWxsTWFpbEdyb3VwKVxuXHRcdFx0aWYgKGNhdGNoQWxsR3JvdXAudHlwZSA9PT0gR3JvdXBUeXBlLlVzZXIpIHtcblx0XHRcdFx0Ly8gdGhlIGNhdGNoIGFsbCBncm91cCBtYXkgYmUgYSB1c2VyIGdyb3VwLCBzbyBsb2FkIHRoZSBtYWlsIGdyb3VwIGluIHRoYXQgY2FzZVxuXHRcdFx0XHRjb25zdCB1c2VyID0gYXdhaXQgbG9jYXRvci5lbnRpdHlDbGllbnQubG9hZChVc2VyVHlwZVJlZiwgbmV2ZXJOdWxsKGNhdGNoQWxsR3JvdXAudXNlcikpXG5cdFx0XHRcdGNhdGNoQWxsTWFpbEdyb3VwSWQgPSBnZXRVc2VyR3JvdXBNZW1iZXJzaGlwcyh1c2VyLCBHcm91cFR5cGUuTWFpbClbMF0uZ3JvdXAgLy8gdGhlIGZpcnN0IGlzIHRoZSB1c2VycyBwZXJzb25hbCBtYWlsIGdyb3VwXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjYXRjaEFsbE1haWxHcm91cElkID0gZG9tYWluSW5mby5jYXRjaEFsbE1haWxHcm91cFxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiB7XG5cdFx0XHRhdmFpbGFibGU6IGFsbE1haWxHcm91cHMsXG5cdFx0XHRzZWxlY3RlZDogYWxsTWFpbEdyb3Vwcy5maW5kKChnKSA9PiBnLmdyb3VwSWQgPT09IGNhdGNoQWxsTWFpbEdyb3VwSWQpID8/IG51bGwsXG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBkZWxldGVDdXN0b21Eb21haW4oZG9tYWluSW5mbzogRG9tYWluSW5mbykge1xuXHRcdERpYWxvZy5jb25maXJtKFxuXHRcdFx0bGFuZy5nZXRUcmFuc2xhdGlvbihcImNvbmZpcm1DdXN0b21Eb21haW5EZWxldGlvbl9tc2dcIiwge1xuXHRcdFx0XHRcIntkb21haW59XCI6IGRvbWFpbkluZm8uZG9tYWluLFxuXHRcdFx0fSksXG5cdFx0KS50aGVuKChjb25maXJtZWQpID0+IHtcblx0XHRcdGlmIChjb25maXJtZWQpIHtcblx0XHRcdFx0bG9jYXRvci5jdXN0b21lckZhY2FkZVxuXHRcdFx0XHRcdC5yZW1vdmVEb21haW4oZG9tYWluSW5mby5kb21haW4pXG5cdFx0XHRcdFx0LmNhdGNoKFxuXHRcdFx0XHRcdFx0b2ZDbGFzcyhQcmVjb25kaXRpb25GYWlsZWRFcnJvciwgKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHREaWFsb2cubWVzc2FnZShcblx0XHRcdFx0XHRcdFx0XHRsYW5nLmdldFRyYW5zbGF0aW9uKFwiY3VzdG9tRG9tYWluRGVsZXRlUHJlY29uZGl0aW9uRmFpbGVkX21zZ1wiLCB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcIntkb21haW5OYW1lfVwiOiBkb21haW5JbmZvLmRvbWFpbixcblx0XHRcdFx0XHRcdFx0XHR9KSxcblx0XHRcdFx0XHRcdFx0KVxuXHRcdFx0XHRcdFx0fSksXG5cdFx0XHRcdFx0KVxuXHRcdFx0XHRcdC5jYXRjaChvZkNsYXNzKExvY2tlZEVycm9yLCAoKSA9PiBEaWFsb2cubWVzc2FnZShcIm9wZXJhdGlvblN0aWxsQWN0aXZlX21zZ1wiKSkpXG5cdFx0XHR9XG5cdFx0fSlcblx0fVxuXG5cdGVudGl0eUV2ZW50c1JlY2VpdmVkKHVwZGF0ZXM6IFJlYWRvbmx5QXJyYXk8RW50aXR5VXBkYXRlRGF0YT4pOiBQcm9taXNlPHZvaWQ+IHtcblx0XHR0aGlzLmFjY291bnRNYWludGVuYW5jZVVwZGF0ZU5vdGlmaWVyPy4odXBkYXRlcylcblxuXHRcdHJldHVybiBwcm9taXNlTWFwKHVwZGF0ZXMsICh1cGRhdGUpID0+IHtcblx0XHRcdGlmIChpc1VwZGF0ZUZvclR5cGVSZWYoQ3VzdG9tZXJTZXJ2ZXJQcm9wZXJ0aWVzVHlwZVJlZiwgdXBkYXRlKSAmJiB1cGRhdGUub3BlcmF0aW9uID09PSBPcGVyYXRpb25UeXBlLlVQREFURSkge1xuXHRcdFx0XHRyZXR1cm4gdGhpcy51cGRhdGVDdXN0b21lclNlcnZlclByb3BlcnRpZXMoKVxuXHRcdFx0fSBlbHNlIGlmIChpc1VwZGF0ZUZvclR5cGVSZWYoQ3VzdG9tZXJJbmZvVHlwZVJlZiwgdXBkYXRlKSAmJiB1cGRhdGUub3BlcmF0aW9uID09PSBPcGVyYXRpb25UeXBlLlVQREFURSkge1xuXHRcdFx0XHR0aGlzLmN1c3RvbWVySW5mby5yZXNldCgpXG5cblx0XHRcdFx0cmV0dXJuIHRoaXMudXBkYXRlRG9tYWlucygpXG5cdFx0XHR9IGVsc2UgaWYgKGlzVXBkYXRlRm9yVHlwZVJlZihDdXN0b21lclByb3BlcnRpZXNUeXBlUmVmLCB1cGRhdGUpKSB7XG5cdFx0XHRcdHRoaXMuY3VzdG9tZXJQcm9wZXJ0aWVzLnJlc2V0KClcblx0XHRcdFx0dGhpcy5jdXN0b21lclByb3BlcnRpZXMuZ2V0QXN5bmMoKS50aGVuKG0ucmVkcmF3KVxuXHRcdFx0fVxuXHRcdH0pLnRoZW4obm9PcClcblx0fVxufVxuIiwiaW1wb3J0IG0sIHsgQ2hpbGQsIENoaWxkcmVuLCBWbm9kZSB9IGZyb20gXCJtaXRocmlsXCJcbmltcG9ydCB7IEljb24gfSBmcm9tIFwiLi4vLi4vY29tbW9uL2d1aS9iYXNlL0ljb25cIlxuaW1wb3J0IHsgbGFuZyB9IGZyb20gXCIuLi8uLi9jb21tb24vbWlzYy9MYW5ndWFnZVZpZXdNb2RlbFwiXG5pbXBvcnQgeyBCb290SWNvbnMgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2d1aS9iYXNlL2ljb25zL0Jvb3RJY29uc1wiXG5pbXBvcnQgeyBkZWxheSB9IGZyb20gXCJAdHV0YW8vdHV0YW5vdGEtdXRpbHNcIlxuaW1wb3J0IFN0cmVhbSBmcm9tIFwibWl0aHJpbC9zdHJlYW1cIlxuXG5leHBvcnQgdHlwZSBVcGRhdGVIZWxwTGFiZWxBdHRycyA9IHtcblx0dXBkYXRlQXZhaWxhYmxlOiBTdHJlYW08Ym9vbGVhbj5cblx0bWFudWFsVXBkYXRlKCk6IFByb21pc2U8Ym9vbGVhbj5cbn1cblxuZXhwb3J0IGNsYXNzIERlc2t0b3BVcGRhdGVIZWxwTGFiZWwge1xuXHRwcml2YXRlIF93YWl0aW5nOiBib29sZWFuID0gZmFsc2Vcblx0cHJpdmF0ZSBfZXJyb3I6IGJvb2xlYW4gPSBmYWxzZVxuXG5cdGdldEFjdGlvbkxpbmsoeyB1cGRhdGVBdmFpbGFibGUsIG1hbnVhbFVwZGF0ZSB9OiBVcGRhdGVIZWxwTGFiZWxBdHRycyk6IENoaWxkIHtcblx0XHRpZiAodGhpcy5fd2FpdGluZyB8fCB0aGlzLl9lcnJvcikgcmV0dXJuIG51bGxcblxuXHRcdGNvbnN0IG9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRpZiAodXBkYXRlQXZhaWxhYmxlKCkpIHtcblx0XHRcdFx0Ly8gaW5zdGFsbCBub3cgKHJlc3RhcnRzIHRoZSBhcHApXG5cdFx0XHRcdG1hbnVhbFVwZGF0ZSgpXG5cdFx0XHR9IGVsc2UgaWYgKCF0aGlzLl93YWl0aW5nKSB7XG5cdFx0XHRcdC8vIG5vIHVwZGF0ZSBhdmFpbGFibGUgJiBub3QgY3VycmVudGx5IHdhaXRpbmcgZm9yIGNoZWNrIHJlc3VsdCAtPiBjaGVjayBmb3IgdXBkYXRlIGFnYWluXG5cdFx0XHRcdHRoaXMuX3dhaXRpbmcgPSB0cnVlXG5cdFx0XHRcdGNvbnN0IFtoYXNVcGRhdGVdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuXHRcdFx0XHRcdG1hbnVhbFVwZGF0ZSgpLCAvLyBtYWtlIHN1cmUgdGhlcmUncyBhdCBsZWFzdCBzb21lIGRlbGF5XG5cdFx0XHRcdFx0Ly8gaW5zdGFudCByZXNwb25zZSB0ZW5kcyB0byBtYWtlIHVzZXJzIG5lcnZvdXNcblx0XHRcdFx0XHRkZWxheSg1MDApLFxuXHRcdFx0XHRdKVxuXHRcdFx0XHR0aGlzLl93YWl0aW5nID0gZmFsc2Vcblx0XHRcdFx0dXBkYXRlQXZhaWxhYmxlKGhhc1VwZGF0ZSlcblx0XHRcdFx0bS5yZWRyYXcoKVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBtKFxuXHRcdFx0XCJzcGFuLnRleHQtYnJlYWsucHItc1wiLFxuXHRcdFx0bShcblx0XHRcdFx0XCJidXR0b24udW5kZXJsaW5lXCIsXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR0eXBlOiBcImJ1dHRvblwiLFxuXHRcdFx0XHRcdGhyZWY6IFwiI1wiLFxuXHRcdFx0XHRcdHRhYmluZGV4OiBcIjBcIixcblx0XHRcdFx0XHRyb2xlOiBcImJ1dHRvblwiLFxuXHRcdFx0XHRcdG9uY2xpY2ssXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGxhbmcuZ2V0KHVwZGF0ZUF2YWlsYWJsZSgpID8gXCJpbnN0YWxsTm93X2FjdGlvblwiIDogXCJjaGVja0FnYWluX2FjdGlvblwiKSxcblx0XHRcdCksXG5cdFx0KVxuXHR9XG5cblx0Z2V0TGFiZWwodXBkYXRlQXZhaWxhYmxlOiBTdHJlYW08Ym9vbGVhbj4pOiBDaGlsZCB7XG5cdFx0bGV0IHJldCA9IFwiXCJcblxuXHRcdGlmICh1cGRhdGVBdmFpbGFibGUoKSkge1xuXHRcdFx0cmV0ID0gbGFuZy5nZXQoXCJ1cGRhdGVGb3VuZF9sYWJlbFwiKVxuXHRcdH0gZWxzZSBpZiAodGhpcy5fZXJyb3IpIHtcblx0XHRcdHJldCA9IGxhbmcuZ2V0KFwic2VydmljZVVuYXZhaWxhYmxlX21zZ1wiKVxuXHRcdH0gZWxzZSBpZiAodGhpcy5fd2FpdGluZykge1xuXHRcdFx0cmV0ID0gbGFuZy5nZXQoXCJjaGVja2luZ0ZvclVwZGF0ZV9hY3Rpb25cIilcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmV0ID0gbGFuZy5nZXQoXCJub1VwZGF0ZUF2YWlsYWJsZV9tc2dcIilcblx0XHR9XG5cblx0XHRyZXR1cm4gbShcInNwYW4ucHItc1wiLCByZXQgKyBcIiBcIilcblx0fVxuXG5cdGdldEljb24oKTogQ2hpbGQge1xuXHRcdHJldHVybiB0aGlzLl93YWl0aW5nICYmICF0aGlzLl9lcnJvclxuXHRcdFx0PyBtKEljb24sIHtcblx0XHRcdFx0XHRpY29uOiBCb290SWNvbnMuUHJvZ3Jlc3MsXG5cdFx0XHRcdFx0Y2xhc3M6IFwiZmxleC1jZW50ZXIgaXRlbXMtY2VudGVyIGljb24tcHJvZ3Jlc3MtdGlueSBpY29uLXByb2dyZXNzXCIsXG5cdFx0XHQgIH0pXG5cdFx0XHQ6IG51bGxcblx0fVxuXG5cdHZpZXcodm5vZGU6IFZub2RlPFVwZGF0ZUhlbHBMYWJlbEF0dHJzPik6IENoaWxkcmVuIHtcblx0XHRyZXR1cm4gbShcIi5mbGV4Lml0ZW1zLWNlbnRlclwiLCBbdGhpcy5nZXRMYWJlbCh2bm9kZS5hdHRycy51cGRhdGVBdmFpbGFibGUpLCB0aGlzLmdldEFjdGlvbkxpbmsodm5vZGUuYXR0cnMpLCB0aGlzLmdldEljb24oKV0pXG5cdH1cbn1cbiIsImltcG9ydCBtLCB7IENoaWxkcmVuIH0gZnJvbSBcIm1pdGhyaWxcIlxuaW1wb3J0IHsgSW5mb0xpbmssIGxhbmcgfSBmcm9tIFwiLi4vLi4vY29tbW9uL21pc2MvTGFuZ3VhZ2VWaWV3TW9kZWxcIlxuaW1wb3J0IHN0cmVhbSBmcm9tIFwibWl0aHJpbC9zdHJlYW1cIlxuaW1wb3J0IFN0cmVhbSBmcm9tIFwibWl0aHJpbC9zdHJlYW1cIlxuaW1wb3J0IHsgc2hvd1Byb2dyZXNzRGlhbG9nIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvZGlhbG9ncy9Qcm9ncmVzc0RpYWxvZ1wiXG5pbXBvcnQgeyBJY29ucyB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL2Jhc2UvaWNvbnMvSWNvbnNcIlxuaW1wb3J0IHR5cGUgeyBUZXh0RmllbGRBdHRycyB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL2Jhc2UvVGV4dEZpZWxkLmpzXCJcbmltcG9ydCB7IFRleHRGaWVsZCB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL2Jhc2UvVGV4dEZpZWxkLmpzXCJcbmltcG9ydCB7IGF0dGFjaERyb3Bkb3duIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvYmFzZS9Ecm9wZG93bi5qc1wiXG5pbXBvcnQgdHlwZSB7IERyb3BEb3duU2VsZWN0b3JBdHRycyB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL2Jhc2UvRHJvcERvd25TZWxlY3Rvci5qc1wiXG5pbXBvcnQgeyBEcm9wRG93blNlbGVjdG9yIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvYmFzZS9Ecm9wRG93blNlbGVjdG9yLmpzXCJcbmltcG9ydCB7IERpYWxvZyB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL2Jhc2UvRGlhbG9nXCJcbmltcG9ydCB0eXBlIHsgVXBkYXRlSGVscExhYmVsQXR0cnMgfSBmcm9tIFwiLi9EZXNrdG9wVXBkYXRlSGVscExhYmVsXCJcbmltcG9ydCB7IERlc2t0b3BVcGRhdGVIZWxwTGFiZWwgfSBmcm9tIFwiLi9EZXNrdG9wVXBkYXRlSGVscExhYmVsXCJcbmltcG9ydCB7IERlc2t0b3BDb25maWdLZXkgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2Rlc2t0b3AvY29uZmlnL0NvbmZpZ0tleXNcIlxuaW1wb3J0IHsgZ2V0Q3VycmVudFNwZWxsY2hlY2tMYW5ndWFnZUxhYmVsLCBzaG93U3BlbGxjaGVja0xhbmd1YWdlRGlhbG9nIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvZGlhbG9ncy9TcGVsbGNoZWNrTGFuZ3VhZ2VEaWFsb2dcIlxuaW1wb3J0IHsgaWZBbGxvd2VkVHV0YUxpbmtzIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvYmFzZS9HdWlVdGlsc1wiXG5pbXBvcnQgeyBhc3NlcnRNYWluT3JOb2RlIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9hcGkvY29tbW9uL0VudlwiXG5pbXBvcnQgeyBsb2NhdG9yIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9hcGkvbWFpbi9Db21tb25Mb2NhdG9yXCJcbmltcG9ydCB7IEljb25CdXR0b24sIEljb25CdXR0b25BdHRycyB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL2Jhc2UvSWNvbkJ1dHRvbi5qc1wiXG5pbXBvcnQgeyBCdXR0b25TaXplIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvYmFzZS9CdXR0b25TaXplLmpzXCJcbmltcG9ydCB7IE1vcmVJbmZvTGluayB9IGZyb20gXCIuLi8uLi9jb21tb24vbWlzYy9uZXdzL01vcmVJbmZvTGluay5qc1wiXG5pbXBvcnQgeyBVcGRhdGFibGVTZXR0aW5nc1ZpZXdlciB9IGZyb20gXCIuLi8uLi9jb21tb24vc2V0dGluZ3MvSW50ZXJmYWNlcy5qc1wiXG5pbXBvcnQgeyBNYWlsRXhwb3J0TW9kZSB9IGZyb20gXCIuLi8uLi9jb21tb24vbWFpbEZ1bmN0aW9uYWxpdHkvU2hhcmVkTWFpbFV0aWxzLmpzXCJcblxuYXNzZXJ0TWFpbk9yTm9kZSgpXG5cbmVudW0gRG93bmxvYWRMb2NhdGlvblN0cmF0ZWd5IHtcblx0QUxXQVlTX0FTSyxcblx0Q0hPT1NFX0RJUkVDVE9SWSxcbn1cblxuZXhwb3J0IGNsYXNzIERlc2t0b3BTZXR0aW5nc1ZpZXdlciBpbXBsZW1lbnRzIFVwZGF0YWJsZVNldHRpbmdzVmlld2VyIHtcblx0cHJpdmF0ZSByZWFkb25seSBpc0RlZmF1bHRNYWlsdG9IYW5kbGVyOiBTdHJlYW08Ym9vbGVhbiB8IG51bGw+XG5cdHByaXZhdGUgZGVmYXVsdERvd25sb2FkUGF0aCE6IFN0cmVhbTxzdHJpbmc+XG5cdHByaXZhdGUgcmVhZG9ubHkgcnVuQXNUcmF5QXBwOiBTdHJlYW08Ym9vbGVhbiB8IG51bGw+XG5cdHByaXZhdGUgcmVhZG9ubHkgcnVuT25TdGFydHVwOiBTdHJlYW08Ym9vbGVhbiB8IG51bGw+XG5cdHByaXZhdGUgcmVhZG9ubHkgc3BlbGxDaGVja0xhbmc6IFN0cmVhbTxzdHJpbmc+XG5cdHByaXZhdGUgcmVhZG9ubHkgaXNJbnRlZ3JhdGVkOiBTdHJlYW08Ym9vbGVhbiB8IG51bGw+XG5cdHByaXZhdGUgcmVhZG9ubHkgaXNBdXRvVXBkYXRlRW5hYmxlZDogU3RyZWFtPGJvb2xlYW4gfCBudWxsPlxuXHRwcml2YXRlIHNob3dBdXRvVXBkYXRlT3B0aW9uOiBib29sZWFuXG5cdHByaXZhdGUgcmVhZG9ubHkgdXBkYXRlQXZhaWxhYmxlOiBTdHJlYW08Ym9vbGVhbj5cblx0cHJpdmF0ZSByZWFkb25seSBtYWlsRXhwb3J0TW9kZTogU3RyZWFtPE1haWxFeHBvcnRNb2RlPlxuXHRwcml2YXRlIGlzUGF0aERpYWxvZ09wZW46IGJvb2xlYW4gPSBmYWxzZVxuXHRwcml2YXRlIG9mZmxpbmVTdG9yYWdlVmFsdWU6IFN0cmVhbTxib29sZWFuPlxuXG5cdGNvbnN0cnVjdG9yKCkge1xuXHRcdHRoaXMuaXNEZWZhdWx0TWFpbHRvSGFuZGxlciA9IHN0cmVhbTxib29sZWFuIHwgbnVsbD4oZmFsc2UpXG5cdFx0dGhpcy5ydW5Bc1RyYXlBcHAgPSBzdHJlYW08Ym9vbGVhbiB8IG51bGw+KHRydWUpXG5cdFx0dGhpcy5ydW5PblN0YXJ0dXAgPSBzdHJlYW08Ym9vbGVhbiB8IG51bGw+KGZhbHNlKVxuXHRcdHRoaXMuc3BlbGxDaGVja0xhbmcgPSBzdHJlYW0oXCJcIilcblx0XHR0aGlzLmlzSW50ZWdyYXRlZCA9IHN0cmVhbTxib29sZWFuIHwgbnVsbD4oZmFsc2UpXG5cdFx0dGhpcy5pc0F1dG9VcGRhdGVFbmFibGVkID0gc3RyZWFtPGJvb2xlYW4gfCBudWxsPihmYWxzZSlcblx0XHR0aGlzLnNob3dBdXRvVXBkYXRlT3B0aW9uID0gdHJ1ZVxuXHRcdHRoaXMudXBkYXRlQXZhaWxhYmxlID0gc3RyZWFtPGJvb2xlYW4+KGZhbHNlKVxuXHRcdHRoaXMubWFpbEV4cG9ydE1vZGUgPSBzdHJlYW08TWFpbEV4cG9ydE1vZGU+KFwibXNnXCIpIC8vIG1zZyBpcyBqdXN0IGEgZHVtbXkgdmFsdWUgaGVyZSwgaXQgd2lsbCBiZSBvdmVyd3JpdHRlbiBpbiByZXF1ZXN0RGVza3RvcENvbmZpZ1xuXHRcdHRoaXMub2ZmbGluZVN0b3JhZ2VWYWx1ZSA9IHN0cmVhbTxib29sZWFuPihmYWxzZSlcblx0fVxuXG5cdG9uaW5pdCgpIHtcblx0XHR0aGlzLnJlcXVlc3REZXNrdG9wQ29uZmlnKClcblx0fVxuXG5cdHZpZXcoKTogQ2hpbGRyZW4ge1xuXHRcdGNvbnN0IHNldERlZmF1bHRNYWlsdG9IYW5kbGVyQXR0cnM6IERyb3BEb3duU2VsZWN0b3JBdHRyczxib29sZWFuPiA9IHtcblx0XHRcdGxhYmVsOiBcImRlZmF1bHRNYWlsSGFuZGxlcl9sYWJlbFwiLFxuXHRcdFx0aGVscExhYmVsOiAoKSA9PiBsYW5nLmdldChcImRlZmF1bHRNYWlsSGFuZGxlcl9tc2dcIiksXG5cdFx0XHRpdGVtczogW1xuXHRcdFx0XHR7XG5cdFx0XHRcdFx0bmFtZTogbGFuZy5nZXQoXCJ1bnJlZ2lzdGVyZWRfbGFiZWxcIiksXG5cdFx0XHRcdFx0dmFsdWU6IGZhbHNlLFxuXHRcdFx0XHR9LFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0bmFtZTogbGFuZy5nZXQoXCJyZWdpc3RlcmVkX2xhYmVsXCIpLFxuXHRcdFx0XHRcdHZhbHVlOiB0cnVlLFxuXHRcdFx0XHR9LFxuXHRcdFx0XSxcblx0XHRcdHNlbGVjdGVkVmFsdWU6IHRoaXMuaXNEZWZhdWx0TWFpbHRvSGFuZGxlcigpLFxuXHRcdFx0c2VsZWN0aW9uQ2hhbmdlZEhhbmRsZXI6ICh2KSA9PiB7XG5cdFx0XHRcdHNob3dQcm9ncmVzc0RpYWxvZyhcInBsZWFzZVdhaXRfbXNnXCIsIHRoaXMudXBkYXRlRGVmYXVsdE1haWx0b0hhbmRsZXIodikpLnRoZW4oKCkgPT4ge1xuXHRcdFx0XHRcdHRoaXMuaXNEZWZhdWx0TWFpbHRvSGFuZGxlcih2KVxuXG5cdFx0XHRcdFx0bS5yZWRyYXcoKVxuXHRcdFx0XHR9KVxuXHRcdFx0fSxcblx0XHR9XG5cdFx0Y29uc3Qgc2V0UnVuSW5CYWNrZ3JvdW5kQXR0cnM6IERyb3BEb3duU2VsZWN0b3JBdHRyczxib29sZWFuPiA9IHtcblx0XHRcdGxhYmVsOiBcInJ1bkluQmFja2dyb3VuZF9hY3Rpb25cIixcblx0XHRcdGhlbHBMYWJlbDogKCkgPT4ge1xuXHRcdFx0XHRyZXR1cm4gaWZBbGxvd2VkVHV0YUxpbmtzKGxvY2F0b3IubG9naW5zLCBJbmZvTGluay5SdW5JbkJhY2tncm91bmQsIChsaW5rKSA9PiBbXG5cdFx0XHRcdFx0bShcInNwYW5cIiwgbGFuZy5nZXQoXCJydW5JbkJhY2tncm91bmRfbXNnXCIpICsgXCIgXCIpLFxuXHRcdFx0XHRcdG0oTW9yZUluZm9MaW5rLCB7IGxpbms6IGxpbmsgfSksXG5cdFx0XHRcdF0pXG5cdFx0XHR9LFxuXHRcdFx0aXRlbXM6IFtcblx0XHRcdFx0e1xuXHRcdFx0XHRcdG5hbWU6IGxhbmcuZ2V0KFwieWVzX2xhYmVsXCIpLFxuXHRcdFx0XHRcdHZhbHVlOiB0cnVlLFxuXHRcdFx0XHR9LFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0bmFtZTogbGFuZy5nZXQoXCJub19sYWJlbFwiKSxcblx0XHRcdFx0XHR2YWx1ZTogZmFsc2UsXG5cdFx0XHRcdH0sXG5cdFx0XHRdLFxuXHRcdFx0c2VsZWN0ZWRWYWx1ZTogdGhpcy5ydW5Bc1RyYXlBcHAoKSxcblx0XHRcdHNlbGVjdGlvbkNoYW5nZWRIYW5kbGVyOiAodikgPT4ge1xuXHRcdFx0XHR0aGlzLnJ1bkFzVHJheUFwcCh2KVxuXG5cdFx0XHRcdHRoaXMuc2V0Qm9vbGVhblZhbHVlKERlc2t0b3BDb25maWdLZXkucnVuQXNUcmF5QXBwLCB2KVxuXHRcdFx0fSxcblx0XHR9XG5cdFx0Y29uc3Qgc2V0UnVuT25TdGFydHVwQXR0cnM6IERyb3BEb3duU2VsZWN0b3JBdHRyczxib29sZWFuPiA9IHtcblx0XHRcdGxhYmVsOiBcInJ1bk9uU3RhcnR1cF9hY3Rpb25cIixcblx0XHRcdGl0ZW1zOiBbXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRuYW1lOiBsYW5nLmdldChcInllc19sYWJlbFwiKSxcblx0XHRcdFx0XHR2YWx1ZTogdHJ1ZSxcblx0XHRcdFx0fSxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdG5hbWU6IGxhbmcuZ2V0KFwibm9fbGFiZWxcIiksXG5cdFx0XHRcdFx0dmFsdWU6IGZhbHNlLFxuXHRcdFx0XHR9LFxuXHRcdFx0XSxcblx0XHRcdHNlbGVjdGVkVmFsdWU6IHRoaXMucnVuT25TdGFydHVwKCksXG5cdFx0XHRzZWxlY3Rpb25DaGFuZ2VkSGFuZGxlcjogKHYpID0+IHtcblx0XHRcdFx0Ly8gdGhpcyBtYXkgdGFrZSBhIHdoaWxlXG5cdFx0XHRcdHNob3dQcm9ncmVzc0RpYWxvZyhcInBsZWFzZVdhaXRfbXNnXCIsIHRoaXMudG9nZ2xlQXV0b0xhdW5jaEluTmF0aXZlKHYpKS50aGVuKCgpID0+IHtcblx0XHRcdFx0XHR0aGlzLnJ1bk9uU3RhcnR1cCh2KVxuXG5cdFx0XHRcdFx0bS5yZWRyYXcoKVxuXHRcdFx0XHR9KVxuXHRcdFx0fSxcblx0XHR9XG5cdFx0Y29uc3QgZWRpdFNwZWxsY2hlY2tMYW5ndWFnZUJ1dHRvbkF0dHJzOiBJY29uQnV0dG9uQXR0cnMgPSB7XG5cdFx0XHR0aXRsZTogXCJjaGVja1NwZWxsaW5nX2FjdGlvblwiLFxuXHRcdFx0Y2xpY2s6ICgpID0+IHNob3dTcGVsbGNoZWNrTGFuZ3VhZ2VEaWFsb2coKS50aGVuKChuZXdMYWJlbCkgPT4gdGhpcy5zcGVsbENoZWNrTGFuZyhuZXdMYWJlbCkpLFxuXHRcdFx0aWNvbjogSWNvbnMuRWRpdCxcblx0XHRcdHNpemU6IEJ1dHRvblNpemUuQ29tcGFjdCxcblx0XHR9XG5cdFx0Y29uc3Qgc3BlbGxjaGVja0xhbmd1YWdlQXR0cnM6IFRleHRGaWVsZEF0dHJzID0ge1xuXHRcdFx0bGFiZWw6IFwiY2hlY2tTcGVsbGluZ19hY3Rpb25cIixcblx0XHRcdHZhbHVlOiB0aGlzLnNwZWxsQ2hlY2tMYW5nKCksXG5cdFx0XHRvbmlucHV0OiB0aGlzLnNwZWxsQ2hlY2tMYW5nLFxuXHRcdFx0aXNSZWFkT25seTogdHJ1ZSxcblx0XHRcdGluamVjdGlvbnNSaWdodDogKCkgPT4gbShJY29uQnV0dG9uLCBlZGl0U3BlbGxjaGVja0xhbmd1YWdlQnV0dG9uQXR0cnMpLFxuXHRcdFx0aGVscExhYmVsOiAoKSA9PiBsYW5nLmdldChcInJlcXVpcmVzTmV3V2luZG93X21zZ1wiKSxcblx0XHR9XG5cdFx0Y29uc3Qgc2V0RGVza3RvcEludGVncmF0aW9uQXR0cnM6IERyb3BEb3duU2VsZWN0b3JBdHRyczxib29sZWFuPiA9IHtcblx0XHRcdGxhYmVsOiBcImRlc2t0b3BJbnRlZ3JhdGlvbl9sYWJlbFwiLFxuXHRcdFx0aXRlbXM6IFtcblx0XHRcdFx0e1xuXHRcdFx0XHRcdG5hbWU6IGxhbmcuZ2V0KFwiYWN0aXZhdGVkX2xhYmVsXCIpLFxuXHRcdFx0XHRcdHZhbHVlOiB0cnVlLFxuXHRcdFx0XHR9LFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0bmFtZTogbGFuZy5nZXQoXCJkZWFjdGl2YXRlZF9sYWJlbFwiKSxcblx0XHRcdFx0XHR2YWx1ZTogZmFsc2UsXG5cdFx0XHRcdH0sXG5cdFx0XHRdLFxuXHRcdFx0c2VsZWN0ZWRWYWx1ZTogdGhpcy5pc0ludGVncmF0ZWQoKSxcblx0XHRcdHNlbGVjdGlvbkNoYW5nZWRIYW5kbGVyOiAodikgPT4ge1xuXHRcdFx0XHRzaG93UHJvZ3Jlc3NEaWFsb2coXCJwbGVhc2VXYWl0X21zZ1wiLCB0aGlzLnVwZGF0ZURlc2t0b3BJbnRlZ3JhdGlvbih2KSlcblx0XHRcdFx0XHQudGhlbigoKSA9PiB7XG5cdFx0XHRcdFx0XHR0aGlzLmlzSW50ZWdyYXRlZCh2KVxuXG5cdFx0XHRcdFx0XHRtLnJlZHJhdygpXG5cdFx0XHRcdFx0fSlcblx0XHRcdFx0XHQuY2F0Y2goKGUpID0+IERpYWxvZy5tZXNzYWdlKFwidW5rbm93bkVycm9yX21zZ1wiLCBlLm1lc3NhZ2UpKVxuXHRcdFx0fSxcblx0XHR9XG5cdFx0Y29uc3Qgc2V0TWFpbEV4cG9ydE1vZGVBdHRyczogRHJvcERvd25TZWxlY3RvckF0dHJzPE1haWxFeHBvcnRNb2RlPiA9IHtcblx0XHRcdGxhYmVsOiBcIm1haWxFeHBvcnRNb2RlX2xhYmVsXCIsXG5cdFx0XHRoZWxwTGFiZWw6ICgpID0+IGxhbmcuZ2V0KFwibWFpbEV4cG9ydE1vZGVIZWxwX21zZ1wiKSxcblx0XHRcdGl0ZW1zOiBbXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRuYW1lOiBcIkVNTFwiLFxuXHRcdFx0XHRcdHZhbHVlOiBcImVtbFwiLFxuXHRcdFx0XHR9LFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0bmFtZTogXCJNU0cgKE91dGxvb2spXCIsXG5cdFx0XHRcdFx0dmFsdWU6IFwibXNnXCIsXG5cdFx0XHRcdH0sXG5cdFx0XHRdLFxuXHRcdFx0c2VsZWN0ZWRWYWx1ZTogdGhpcy5tYWlsRXhwb3J0TW9kZSgpLFxuXHRcdFx0c2VsZWN0aW9uQ2hhbmdlZEhhbmRsZXI6ICh2KSA9PiB7XG5cdFx0XHRcdHRoaXMubWFpbEV4cG9ydE1vZGUodilcblxuXHRcdFx0XHR0aGlzLnNldFN0cmluZ1ZhbHVlKERlc2t0b3BDb25maWdLZXkubWFpbEV4cG9ydE1vZGUsIHYpXG5cdFx0XHR9LFxuXHRcdH1cblx0XHRjb25zdCB1cGRhdGVIZWxwTGFiZWxBdHRyczogVXBkYXRlSGVscExhYmVsQXR0cnMgPSB7XG5cdFx0XHR1cGRhdGVBdmFpbGFibGU6IHRoaXMudXBkYXRlQXZhaWxhYmxlLFxuXHRcdFx0bWFudWFsVXBkYXRlOiAoKSA9PiBsb2NhdG9yLmRlc2t0b3BTZXR0aW5nc0ZhY2FkZS5tYW51YWxVcGRhdGUoKSxcblx0XHR9XG5cdFx0Y29uc3Qgc2V0QXV0b1VwZGF0ZUF0dHJzOiBEcm9wRG93blNlbGVjdG9yQXR0cnM8Ym9vbGVhbj4gPSB7XG5cdFx0XHRsYWJlbDogXCJhdXRvVXBkYXRlX2xhYmVsXCIsXG5cdFx0XHRoZWxwTGFiZWw6ICgpID0+IG0oRGVza3RvcFVwZGF0ZUhlbHBMYWJlbCwgdXBkYXRlSGVscExhYmVsQXR0cnMpLFxuXHRcdFx0aXRlbXM6IFtcblx0XHRcdFx0e1xuXHRcdFx0XHRcdG5hbWU6IGxhbmcuZ2V0KFwiYWN0aXZhdGVkX2xhYmVsXCIpLFxuXHRcdFx0XHRcdHZhbHVlOiB0cnVlLFxuXHRcdFx0XHR9LFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0bmFtZTogbGFuZy5nZXQoXCJkZWFjdGl2YXRlZF9sYWJlbFwiKSxcblx0XHRcdFx0XHR2YWx1ZTogZmFsc2UsXG5cdFx0XHRcdH0sXG5cdFx0XHRdLFxuXHRcdFx0c2VsZWN0ZWRWYWx1ZTogdGhpcy5pc0F1dG9VcGRhdGVFbmFibGVkKCksXG5cdFx0XHRzZWxlY3Rpb25DaGFuZ2VkSGFuZGxlcjogKHYpID0+IHtcblx0XHRcdFx0dGhpcy5pc0F1dG9VcGRhdGVFbmFibGVkKHYpXG5cblx0XHRcdFx0dGhpcy5zZXRCb29sZWFuVmFsdWUoRGVza3RvcENvbmZpZ0tleS5lbmFibGVBdXRvVXBkYXRlLCB2KVxuXHRcdFx0fSxcblx0XHR9XG5cdFx0Y29uc3QgY2hhbmdlRGVmYXVsdERvd25sb2FkUGF0aEF0dHJzOiBJY29uQnV0dG9uQXR0cnMgPSBhdHRhY2hEcm9wZG93bih7XG5cdFx0XHRtYWluQnV0dG9uQXR0cnM6IHtcblx0XHRcdFx0dGl0bGU6IFwiZWRpdF9hY3Rpb25cIixcblx0XHRcdFx0aWNvbjogSWNvbnMuRWRpdCxcblx0XHRcdFx0c2l6ZTogQnV0dG9uU2l6ZS5Db21wYWN0LFxuXHRcdFx0fSxcblx0XHRcdGNoaWxkQXR0cnM6ICgpID0+IFtcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGxhYmVsOiBcImFsd2F5c0Fza19hY3Rpb25cIixcblx0XHRcdFx0XHRjbGljazogKCkgPT4gdGhpcy5zZXREZWZhdWx0RG93bmxvYWRQYXRoKERvd25sb2FkTG9jYXRpb25TdHJhdGVneS5BTFdBWVNfQVNLKSxcblx0XHRcdFx0fSxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGxhYmVsOiBcImNob29zZURpcmVjdG9yeV9hY3Rpb25cIixcblx0XHRcdFx0XHRjbGljazogKCkgPT4gdGhpcy5zZXREZWZhdWx0RG93bmxvYWRQYXRoKERvd25sb2FkTG9jYXRpb25TdHJhdGVneS5DSE9PU0VfRElSRUNUT1JZKSxcblx0XHRcdFx0fSxcblx0XHRcdF0sXG5cdFx0XHRzaG93RHJvcGRvd246ICgpID0+ICF0aGlzLmlzUGF0aERpYWxvZ09wZW4sXG5cdFx0XHR3aWR0aDogMjAwLFxuXHRcdH0pXG5cdFx0Y29uc3QgZGVmYXVsdERvd25sb2FkUGF0aEF0dHJzOiBUZXh0RmllbGRBdHRycyA9IHtcblx0XHRcdGxhYmVsOiBcImRlZmF1bHREb3dubG9hZFBhdGhfbGFiZWxcIixcblx0XHRcdHZhbHVlOiB0aGlzLmRlZmF1bHREb3dubG9hZFBhdGgoKSxcblx0XHRcdG9uaW5wdXQ6IHRoaXMuZGVmYXVsdERvd25sb2FkUGF0aCxcblx0XHRcdGluamVjdGlvbnNSaWdodDogKCkgPT4gbShJY29uQnV0dG9uLCBjaGFuZ2VEZWZhdWx0RG93bmxvYWRQYXRoQXR0cnMpLFxuXHRcdFx0aXNSZWFkT25seTogdHJ1ZSxcblx0XHR9XG5cblx0XHRyZXR1cm4gW1xuXHRcdFx0bShcIiN1c2VyLXNldHRpbmdzLmZpbGwtYWJzb2x1dGUuc2Nyb2xsLnBsci1sLnBiLXhsXCIsIFtcblx0XHRcdFx0bShcIi5oNC5tdC1sXCIsIGxhbmcuZ2V0KFwiZGVza3RvcFNldHRpbmdzX2xhYmVsXCIpKSxcblx0XHRcdFx0Ly8gc3BlbGwgY2hlY2sgaXMgZG9uZSB2aWEgT1Mgb24gbWFjXG5cdFx0XHRcdGVudi5wbGF0Zm9ybUlkID09PSBcImRhcndpblwiID8gbnVsbCA6IG0oVGV4dEZpZWxkLCBzcGVsbGNoZWNrTGFuZ3VhZ2VBdHRycyksXG5cdFx0XHRcdC8vIHNldHRpbmcgcHJvdG9jb2wgaGFuZGxlciB2aWEgRWxlY3Ryb24gZG9lcyBub3Qgd29yayBvbiBMaW51eFxuXHRcdFx0XHRlbnYucGxhdGZvcm1JZCA9PT0gXCJsaW51eFwiID8gbnVsbCA6IG0oRHJvcERvd25TZWxlY3Rvciwgc2V0RGVmYXVsdE1haWx0b0hhbmRsZXJBdHRycyksXG5cdFx0XHRcdC8vIG1hYyBkb2Vzbid0IHJlYWxseSBoYXZlIHJ1biBpbiBiYWNrZ3JvdW5kLCB5b3UgY2FuIGp1c3QgY2xvc2UgYSB3aW5kb3dcblx0XHRcdFx0ZW52LnBsYXRmb3JtSWQgPT09IFwiZGFyd2luXCIgPyBudWxsIDogbShEcm9wRG93blNlbGVjdG9yLCBzZXRSdW5JbkJhY2tncm91bmRBdHRycyksXG5cdFx0XHRcdG0oRHJvcERvd25TZWxlY3Rvciwgc2V0UnVuT25TdGFydHVwQXR0cnMpLFxuXHRcdFx0XHRtKFRleHRGaWVsZCwgZGVmYXVsdERvd25sb2FkUGF0aEF0dHJzKSxcblx0XHRcdFx0bShEcm9wRG93blNlbGVjdG9yLCBzZXRNYWlsRXhwb3J0TW9kZUF0dHJzKSxcblx0XHRcdFx0Ly8gQXBwSW1hZ2UgaXMga2luZCBvZiBhIHBvcnRhYmxlIGluc3RhbGwgc28gd2Ugb3B0aW9uYWxseSBhZGQgZGVza3RvcCBpY29ucyBldGNcblx0XHRcdFx0ZW52LnBsYXRmb3JtSWQgPT09IFwibGludXhcIiA/IG0oRHJvcERvd25TZWxlY3Rvciwgc2V0RGVza3RvcEludGVncmF0aW9uQXR0cnMpIDogbnVsbCxcblx0XHRcdFx0dGhpcy5zaG93QXV0b1VwZGF0ZU9wdGlvbiA/IG0oRHJvcERvd25TZWxlY3Rvciwgc2V0QXV0b1VwZGF0ZUF0dHJzKSA6IG51bGwsXG5cdFx0XHRdKSxcblx0XHRdXG5cdH1cblxuXHRwcml2YXRlIHRvZ2dsZUF1dG9MYXVuY2hJbk5hdGl2ZShlbmFibGU6IGJvb2xlYW4pOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRyZXR1cm4gZW5hYmxlID8gbG9jYXRvci5kZXNrdG9wU2V0dGluZ3NGYWNhZGUuZW5hYmxlQXV0b0xhdW5jaCgpIDogbG9jYXRvci5kZXNrdG9wU2V0dGluZ3NGYWNhZGUuZGlzYWJsZUF1dG9MYXVuY2goKVxuXHR9XG5cblx0cHJpdmF0ZSB1cGRhdGVEZWZhdWx0TWFpbHRvSGFuZGxlcihzaG91bGRCZURlZmF1bHRNYWlsdG9IYW5kbGVyOiBib29sZWFuKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0cmV0dXJuIHNob3VsZEJlRGVmYXVsdE1haWx0b0hhbmRsZXIgPyBsb2NhdG9yLmRlc2t0b3BTZXR0aW5nc0ZhY2FkZS5yZWdpc3Rlck1haWx0bygpIDogbG9jYXRvci5kZXNrdG9wU2V0dGluZ3NGYWNhZGUudW5yZWdpc3Rlck1haWx0bygpXG5cdH1cblxuXHRwcml2YXRlIHVwZGF0ZURlc2t0b3BJbnRlZ3JhdGlvbihzaG91bGRJbnRlZ3JhdGU6IGJvb2xlYW4pOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRyZXR1cm4gc2hvdWxkSW50ZWdyYXRlID8gbG9jYXRvci5kZXNrdG9wU2V0dGluZ3NGYWNhZGUuaW50ZWdyYXRlRGVza3RvcCgpIDogbG9jYXRvci5kZXNrdG9wU2V0dGluZ3NGYWNhZGUudW5JbnRlZ3JhdGVEZXNrdG9wKClcblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgcmVxdWVzdERlc2t0b3BDb25maWcoKSB7XG5cdFx0dGhpcy5kZWZhdWx0RG93bmxvYWRQYXRoID0gc3RyZWFtKGxhbmcuZ2V0KFwiYWx3YXlzQXNrX2FjdGlvblwiKSlcblx0XHRjb25zdCBbaW50ZWdyYXRpb25JbmZvLCBkZWZhdWx0RG93bmxvYWRQYXRoLCBydW5Bc1RyYXlBcHAsIHNob3dBdXRvVXBkYXRlT3B0aW9uLCBlbmFibGVBdXRvVXBkYXRlLCBtYWlsRXhwb3J0TW9kZSwgc3BlbGxjaGVja0xhYmVsXSA9IGF3YWl0IFByb21pc2UuYWxsKFxuXHRcdFx0W1xuXHRcdFx0XHRsb2NhdG9yLmRlc2t0b3BTZXR0aW5nc0ZhY2FkZS5nZXRJbnRlZ3JhdGlvbkluZm8oKSxcblx0XHRcdFx0bG9jYXRvci5kZXNrdG9wU2V0dGluZ3NGYWNhZGUuZ2V0U3RyaW5nQ29uZmlnVmFsdWUoRGVza3RvcENvbmZpZ0tleS5kZWZhdWx0RG93bmxvYWRQYXRoKSxcblx0XHRcdFx0bG9jYXRvci5kZXNrdG9wU2V0dGluZ3NGYWNhZGUuZ2V0Qm9vbGVhbkNvbmZpZ1ZhbHVlKERlc2t0b3BDb25maWdLZXkucnVuQXNUcmF5QXBwKSxcblx0XHRcdFx0bG9jYXRvci5kZXNrdG9wU2V0dGluZ3NGYWNhZGUuZ2V0Qm9vbGVhbkNvbmZpZ1ZhbHVlKERlc2t0b3BDb25maWdLZXkuc2hvd0F1dG9VcGRhdGVPcHRpb24pLFxuXHRcdFx0XHRsb2NhdG9yLmRlc2t0b3BTZXR0aW5nc0ZhY2FkZS5nZXRCb29sZWFuQ29uZmlnVmFsdWUoRGVza3RvcENvbmZpZ0tleS5lbmFibGVBdXRvVXBkYXRlKSxcblx0XHRcdFx0bG9jYXRvci5kZXNrdG9wU2V0dGluZ3NGYWNhZGUuZ2V0U3RyaW5nQ29uZmlnVmFsdWUoRGVza3RvcENvbmZpZ0tleS5tYWlsRXhwb3J0TW9kZSksXG5cdFx0XHRcdGdldEN1cnJlbnRTcGVsbGNoZWNrTGFuZ3VhZ2VMYWJlbCgpLFxuXHRcdFx0XSxcblx0XHQpXG5cdFx0Y29uc3QgeyBpc01haWx0b0hhbmRsZXIsIGlzQXV0b0xhdW5jaEVuYWJsZWQsIGlzSW50ZWdyYXRlZCwgaXNVcGRhdGVBdmFpbGFibGUgfSA9IGludGVncmF0aW9uSW5mb1xuXG5cdFx0dGhpcy5pc0RlZmF1bHRNYWlsdG9IYW5kbGVyKGlzTWFpbHRvSGFuZGxlcilcblxuXHRcdHRoaXMuZGVmYXVsdERvd25sb2FkUGF0aChkZWZhdWx0RG93bmxvYWRQYXRoIHx8IGxhbmcuZ2V0KFwiYWx3YXlzQXNrX2FjdGlvblwiKSlcblxuXHRcdHRoaXMucnVuQXNUcmF5QXBwKHJ1bkFzVHJheUFwcClcblxuXHRcdHRoaXMucnVuT25TdGFydHVwKGlzQXV0b0xhdW5jaEVuYWJsZWQpXG5cblx0XHR0aGlzLmlzSW50ZWdyYXRlZChpc0ludGVncmF0ZWQpXG5cblx0XHR0aGlzLnNob3dBdXRvVXBkYXRlT3B0aW9uID0gc2hvd0F1dG9VcGRhdGVPcHRpb25cblxuXHRcdHRoaXMuaXNBdXRvVXBkYXRlRW5hYmxlZChlbmFibGVBdXRvVXBkYXRlKVxuXG5cdFx0dGhpcy51cGRhdGVBdmFpbGFibGUoaXNVcGRhdGVBdmFpbGFibGUpXG5cblx0XHR0aGlzLm1haWxFeHBvcnRNb2RlKG1haWxFeHBvcnRNb2RlIGFzIE1haWxFeHBvcnRNb2RlKVxuXG5cdFx0dGhpcy5zcGVsbENoZWNrTGFuZyhzcGVsbGNoZWNrTGFiZWwpXG5cblx0XHRtLnJlZHJhdygpXG5cdH1cblxuXHRhc3luYyBzZXRCb29sZWFuVmFsdWUoc2V0dGluZzogRGVza3RvcENvbmZpZ0tleSwgdmFsdWU6IGJvb2xlYW4pOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRhd2FpdCBsb2NhdG9yLmRlc2t0b3BTZXR0aW5nc0ZhY2FkZS5zZXRCb29sZWFuQ29uZmlnVmFsdWUoc2V0dGluZywgdmFsdWUpXG5cdFx0bS5yZWRyYXcoKVxuXHR9XG5cblx0YXN5bmMgc2V0U3RyaW5nVmFsdWUoc2V0dGluZzogRGVza3RvcENvbmZpZ0tleSwgdmFsdWU6IHN0cmluZyB8IG51bGwpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRhd2FpdCBsb2NhdG9yLmRlc2t0b3BTZXR0aW5nc0ZhY2FkZS5zZXRTdHJpbmdDb25maWdWYWx1ZShzZXR0aW5nLCB2YWx1ZSlcblx0XHRtLnJlZHJhdygpXG5cdH1cblxuXHRhc3luYyBzZXREZWZhdWx0RG93bmxvYWRQYXRoKHY6IERvd25sb2FkTG9jYXRpb25TdHJhdGVneSk6IFByb21pc2U8dm9pZD4ge1xuXHRcdHRoaXMuaXNQYXRoRGlhbG9nT3BlbiA9IHRydWVcblxuXHRcdGxldCBzYXZlUGF0aDogc3RyaW5nIHwgbnVsbFxuXHRcdGlmICh2ID09PSBEb3dubG9hZExvY2F0aW9uU3RyYXRlZ3kuQUxXQVlTX0FTSykge1xuXHRcdFx0c2F2ZVBhdGggPSBudWxsXG5cdFx0fSBlbHNlIHtcblx0XHRcdHNhdmVQYXRoID0gYXdhaXQgbG9jYXRvci5maWxlQXBwLm9wZW5Gb2xkZXJDaG9vc2VyKClcblx0XHR9XG5cblx0XHR0aGlzLmRlZmF1bHREb3dubG9hZFBhdGgoc2F2ZVBhdGggPz8gbGFuZy5nZXQoXCJhbHdheXNBc2tfYWN0aW9uXCIpKVxuXG5cdFx0YXdhaXQgdGhpcy5zZXRTdHJpbmdWYWx1ZShEZXNrdG9wQ29uZmlnS2V5LmRlZmF1bHREb3dubG9hZFBhdGgsIHNhdmVQYXRoKVxuXHRcdHRoaXMuaXNQYXRoRGlhbG9nT3BlbiA9IGZhbHNlXG5cdH1cblxuXHRvbkFwcFVwZGF0ZUF2YWlsYWJsZSgpOiB2b2lkIHtcblx0XHR0aGlzLnVwZGF0ZUF2YWlsYWJsZSh0cnVlKVxuXG5cdFx0bS5yZWRyYXcoKVxuXHR9XG5cblx0Ly8gdGhpcyBpcyBhbGwgbG9jYWwgZm9yIG5vd1xuXHRlbnRpdHlFdmVudHNSZWNlaXZlZDogKCkgPT4gUHJvbWlzZTx2b2lkPiA9ICgpID0+IFByb21pc2UucmVzb2x2ZSgpXG59XG4iLCJpbXBvcnQgdHlwZSB7IE91dE9mT2ZmaWNlTm90aWZpY2F0aW9uLCBPdXRPZk9mZmljZU5vdGlmaWNhdGlvbk1lc3NhZ2UgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2FwaS9lbnRpdGllcy90dXRhbm90YS9UeXBlUmVmcy5qc1wiXG5pbXBvcnQgeyBjcmVhdGVPdXRPZk9mZmljZU5vdGlmaWNhdGlvbiwgY3JlYXRlT3V0T2ZPZmZpY2VOb3RpZmljYXRpb25NZXNzYWdlIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9hcGkvZW50aXRpZXMvdHV0YW5vdGEvVHlwZVJlZnMuanNcIlxuaW1wb3J0IHN0cmVhbSBmcm9tIFwibWl0aHJpbC9zdHJlYW1cIlxuaW1wb3J0IFN0cmVhbSBmcm9tIFwibWl0aHJpbC9zdHJlYW1cIlxuaW1wb3J0IHsgZ2V0RGF5U2hpZnRlZCwgZ2V0U3RhcnRPZkRheSwgZ2V0U3RhcnRPZk5leHREYXksIG9mQ2xhc3MgfSBmcm9tIFwiQHR1dGFvL3R1dGFub3RhLXV0aWxzXCJcbmltcG9ydCB7IE91dE9mT2ZmaWNlTm90aWZpY2F0aW9uTWVzc2FnZVR5cGUgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2FwaS9jb21tb24vVHV0YW5vdGFDb25zdGFudHNcIlxuaW1wb3J0IHsgSW52YWxpZERhdGFFcnJvciwgUHJlY29uZGl0aW9uRmFpbGVkRXJyb3IgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2FwaS9jb21tb24vZXJyb3IvUmVzdEVycm9yXCJcbmltcG9ydCB0eXBlIHsgRW50aXR5Q2xpZW50IH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9hcGkvY29tbW9uL0VudGl0eUNsaWVudFwiXG5pbXBvcnQgeyBsYW5nLCBMYW5ndWFnZVZpZXdNb2RlbCB9IGZyb20gXCIuLi8uLi9jb21tb24vbWlzYy9MYW5ndWFnZVZpZXdNb2RlbFwiXG5pbXBvcnQgdHlwZSB7IFVzZXJDb250cm9sbGVyIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9hcGkvbWFpbi9Vc2VyQ29udHJvbGxlclwiXG5pbXBvcnQgeyBhcHBlbmRFbWFpbFNpZ25hdHVyZSB9IGZyb20gXCIuLi9tYWlsL3NpZ25hdHVyZS9TaWduYXR1cmVcIlxuaW1wb3J0IHsgVXNlckVycm9yIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9hcGkvbWFpbi9Vc2VyRXJyb3JcIlxuaW1wb3J0IHsgVXBncmFkZVJlcXVpcmVkRXJyb3IgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2FwaS9tYWluL1VwZ3JhZGVSZXF1aXJlZEVycm9yLmpzXCJcbmltcG9ydCB7IElTZXJ2aWNlRXhlY3V0b3IgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2FwaS9jb21tb24vU2VydmljZVJlcXVlc3QuanNcIlxuXG5pbXBvcnQgeyBnZXRBdmFpbGFibGVQbGFuc1dpdGhBdXRvUmVzcG9uZGVyIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9zdWJzY3JpcHRpb24vU3Vic2NyaXB0aW9uVXRpbHMuanNcIlxuXG5leHBvcnQgY29uc3QgZW51bSBSZWNpcGllbnRNZXNzYWdlVHlwZSB7XG5cdEVYVEVSTkFMX1RPX0VWRVJZT05FID0gMCxcblx0SU5URVJOQUxfQU5EX0VYVEVSTkFMID0gMSxcblx0SU5URVJOQUxfT05MWSA9IDIsXG59XG5cbmNvbnN0IEZBSUxVUkVfVVBHUkFERV9SRVFVSVJFRCA9IFwib3V0b2ZvZmZpY2Uubm90X2F2YWlsYWJsZV9vbl9jdXJyZW50X3BsYW5cIlxuXG5leHBvcnQgY2xhc3MgRWRpdE91dE9mT2ZmaWNlTm90aWZpY2F0aW9uRGlhbG9nTW9kZWwge1xuXHRvdXRPZk9mZmljZU5vdGlmaWNhdGlvbjogT3V0T2ZPZmZpY2VOb3RpZmljYXRpb25cblx0ZW5hYmxlZDogU3RyZWFtPGJvb2xlYW4+ID0gc3RyZWFtPGJvb2xlYW4+KGZhbHNlKVxuXHRzdGFydERhdGU6IFN0cmVhbTxEYXRlPiA9IHN0cmVhbShuZXcgRGF0ZSgpKVxuXHRlbmREYXRlOiBTdHJlYW08RGF0ZT4gPSBzdHJlYW0obmV3IERhdGUoKSlcblx0aW5kZWZpbml0ZVRpbWVSYW5nZTogU3RyZWFtPGJvb2xlYW4+ID0gc3RyZWFtPGJvb2xlYW4+KHRydWUpXG5cdHRpbWVSYW5nZUVuYWJsZWQ6IFN0cmVhbTxib29sZWFuPiA9IHN0cmVhbTxib29sZWFuPihmYWxzZSlcblx0b3JnYW5pemF0aW9uU3ViamVjdDogU3RyZWFtPHN0cmluZz4gPSBzdHJlYW0oXCJcIilcblx0b3JnYW5pemF0aW9uTWVzc2FnZTogU3RyZWFtPHN0cmluZz4gPSBzdHJlYW0oXCJcIilcblx0ZGVmYXVsdFN1YmplY3Q6IFN0cmVhbTxzdHJpbmc+ID0gc3RyZWFtKFwiXCIpXG5cdGRlZmF1bHRNZXNzYWdlOiBTdHJlYW08c3RyaW5nPiA9IHN0cmVhbShcIlwiKVxuXHRyZWNpcGllbnRNZXNzYWdlVHlwZXM6IFN0cmVhbTxSZWNpcGllbnRNZXNzYWdlVHlwZT4gPSBzdHJlYW08UmVjaXBpZW50TWVzc2FnZVR5cGU+KFJlY2lwaWVudE1lc3NhZ2VUeXBlLkVYVEVSTkFMX1RPX0VWRVJZT05FKVxuXHRfZW50aXR5Q2xpZW50OiBFbnRpdHlDbGllbnRcblx0X3VzZXJDb250cm9sbGVyOiBVc2VyQ29udHJvbGxlclxuXHRfbGFuZ3VhZ2VWaWV3TW9kZWw6IExhbmd1YWdlVmlld01vZGVsXG5cblx0Y29uc3RydWN0b3IoXG5cdFx0b3V0T2ZPZmZpY2VOb3RpZmljYXRpb246IE91dE9mT2ZmaWNlTm90aWZpY2F0aW9uIHwgbnVsbCxcblx0XHRlbnRpdHlDbGllbnQ6IEVudGl0eUNsaWVudCxcblx0XHR1c2VyQ29udHJvbGxlcjogVXNlckNvbnRyb2xsZXIsXG5cdFx0bGFuZ3VhZ2VWaWV3TW9kZWw6IExhbmd1YWdlVmlld01vZGVsLFxuXHRcdHJlYWRvbmx5IHNlcnZpY2VFeGVjdXRvcjogSVNlcnZpY2VFeGVjdXRvcixcblx0KSB7XG5cdFx0dGhpcy5fZW50aXR5Q2xpZW50ID0gZW50aXR5Q2xpZW50XG5cdFx0dGhpcy5fdXNlckNvbnRyb2xsZXIgPSB1c2VyQ29udHJvbGxlclxuXHRcdHRoaXMuX2xhbmd1YWdlVmlld01vZGVsID0gbGFuZ3VhZ2VWaWV3TW9kZWxcblxuXHRcdHRoaXMuX3NldERlZmF1bHRNZXNzYWdlcygpXG5cblx0XHRpZiAoIW91dE9mT2ZmaWNlTm90aWZpY2F0aW9uKSB7XG5cdFx0XHR0aGlzLnN0YXJ0RGF0ZShnZXRTdGFydE9mRGF5KG5ldyBEYXRlKCkpKVxuXHRcdFx0dGhpcy5vdXRPZk9mZmljZU5vdGlmaWNhdGlvbiA9IGNyZWF0ZU91dE9mT2ZmaWNlTm90aWZpY2F0aW9uKHtcblx0XHRcdFx0bm90aWZpY2F0aW9uczogW10sXG5cdFx0XHRcdGVuYWJsZWQ6IGZhbHNlLFxuXHRcdFx0XHRlbmREYXRlOiBudWxsLFxuXHRcdFx0XHRzdGFydERhdGU6IG51bGwsXG5cdFx0XHR9KVxuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLm91dE9mT2ZmaWNlTm90aWZpY2F0aW9uID0gb3V0T2ZPZmZpY2VOb3RpZmljYXRpb25cblx0XHRcdHRoaXMuZW5hYmxlZChvdXRPZk9mZmljZU5vdGlmaWNhdGlvbi5lbmFibGVkKVxuXHRcdFx0bGV0IGRlZmF1bHRFbmFibGVkID0gZmFsc2Vcblx0XHRcdGxldCBvcmdhbml6YXRpb25FbmFibGVkID0gZmFsc2Vcblx0XHRcdGZvciAoY29uc3Qgbm90aWZpY2F0aW9uIG9mIG91dE9mT2ZmaWNlTm90aWZpY2F0aW9uLm5vdGlmaWNhdGlvbnMpIHtcblx0XHRcdFx0aWYgKG5vdGlmaWNhdGlvbi50eXBlID09PSBPdXRPZk9mZmljZU5vdGlmaWNhdGlvbk1lc3NhZ2VUeXBlLkRlZmF1bHQpIHtcblx0XHRcdFx0XHRkZWZhdWx0RW5hYmxlZCA9IHRydWVcblx0XHRcdFx0XHR0aGlzLmRlZmF1bHRTdWJqZWN0KG5vdGlmaWNhdGlvbi5zdWJqZWN0KVxuXHRcdFx0XHRcdHRoaXMuZGVmYXVsdE1lc3NhZ2Uobm90aWZpY2F0aW9uLm1lc3NhZ2UpXG5cdFx0XHRcdH0gZWxzZSBpZiAobm90aWZpY2F0aW9uLnR5cGUgPT09IE91dE9mT2ZmaWNlTm90aWZpY2F0aW9uTWVzc2FnZVR5cGUuSW5zaWRlT3JnYW5pemF0aW9uKSB7XG5cdFx0XHRcdFx0b3JnYW5pemF0aW9uRW5hYmxlZCA9IHRydWVcblx0XHRcdFx0XHR0aGlzLm9yZ2FuaXphdGlvblN1YmplY3Qobm90aWZpY2F0aW9uLnN1YmplY3QpXG5cdFx0XHRcdFx0dGhpcy5vcmdhbml6YXRpb25NZXNzYWdlKG5vdGlmaWNhdGlvbi5tZXNzYWdlKVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGlmIChkZWZhdWx0RW5hYmxlZCAmJiBvcmdhbml6YXRpb25FbmFibGVkKSB7XG5cdFx0XHRcdHRoaXMucmVjaXBpZW50TWVzc2FnZVR5cGVzKFJlY2lwaWVudE1lc3NhZ2VUeXBlLklOVEVSTkFMX0FORF9FWFRFUk5BTClcblx0XHRcdH0gZWxzZSBpZiAob3JnYW5pemF0aW9uRW5hYmxlZCkge1xuXHRcdFx0XHR0aGlzLnJlY2lwaWVudE1lc3NhZ2VUeXBlcyhSZWNpcGllbnRNZXNzYWdlVHlwZS5JTlRFUk5BTF9PTkxZKVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGhpcy5yZWNpcGllbnRNZXNzYWdlVHlwZXMoUmVjaXBpZW50TWVzc2FnZVR5cGUuRVhURVJOQUxfVE9fRVZFUllPTkUpXG5cdFx0XHR9XG5cblx0XHRcdGlmIChvdXRPZk9mZmljZU5vdGlmaWNhdGlvbi5zdGFydERhdGUpIHtcblx0XHRcdFx0dGhpcy5zdGFydERhdGUob3V0T2ZPZmZpY2VOb3RpZmljYXRpb24uc3RhcnREYXRlKVxuXHRcdFx0XHR0aGlzLnRpbWVSYW5nZUVuYWJsZWQodHJ1ZSlcblxuXHRcdFx0XHQvLyBlbmQgZGF0ZXMgYXJlIHN0b3JlZCBhcyB0aGUgYmVnaW5uaW5nIG9mIHRoZSBmb2xsb3dpbmcgZGF0ZS4gV2Ugc3VidHJhY3Qgb25lIGRheSB0byBzaG93IHRoZSBjb3JyZWN0IGRhdGUgdG8gdGhlIHVzZXIuXG5cdFx0XHRcdGlmIChvdXRPZk9mZmljZU5vdGlmaWNhdGlvbi5lbmREYXRlKSB7XG5cdFx0XHRcdFx0Y29uc3Qgc2hpZnRlZEVuZERhdGUgPSBnZXREYXlTaGlmdGVkKG91dE9mT2ZmaWNlTm90aWZpY2F0aW9uLmVuZERhdGUsIC0xKVxuXHRcdFx0XHRcdHRoaXMuZW5kRGF0ZShzaGlmdGVkRW5kRGF0ZSlcblx0XHRcdFx0XHR0aGlzLmluZGVmaW5pdGVUaW1lUmFuZ2UoZmFsc2UpXG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0dGhpcy5pbmRlZmluaXRlVGltZVJhbmdlKHRydWUpXG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRfc2V0RGVmYXVsdE1lc3NhZ2VzKCkge1xuXHRcdGNvbnN0IHRlbXBsYXRlU3ViamVjdCA9IHRoaXMuX2xhbmd1YWdlVmlld01vZGVsLmdldChcIm91dE9mT2ZmaWNlRGVmYXVsdFN1YmplY3RfbXNnXCIpXG5cblx0XHRjb25zdCB0ZW1wbGF0ZU1lc3NhZ2UgPSBhcHBlbmRFbWFpbFNpZ25hdHVyZSh0aGlzLl9sYW5ndWFnZVZpZXdNb2RlbC5nZXQoXCJvdXRPZk9mZmljZURlZmF1bHRfbXNnXCIpLCB0aGlzLl91c2VyQ29udHJvbGxlci5wcm9wcylcblx0XHR0aGlzLm9yZ2FuaXphdGlvblN1YmplY3QodGVtcGxhdGVTdWJqZWN0KVxuXHRcdHRoaXMuZGVmYXVsdFN1YmplY3QodGVtcGxhdGVTdWJqZWN0KVxuXHRcdHRoaXMuZGVmYXVsdE1lc3NhZ2UodGVtcGxhdGVNZXNzYWdlKVxuXHRcdHRoaXMub3JnYW5pemF0aW9uTWVzc2FnZSh0ZW1wbGF0ZU1lc3NhZ2UpXG5cdH1cblxuXHQvKipcblx0ICogUmV0dXJuIE91dE9mT2ZmaWNlTm90aWZpY2F0aW9uIGNyZWF0ZWQgZnJvbSBpbnB1dCBkYXRhLlxuXHQgKiBAdGhyb3dzIFVzZXJFcnJvciBpZiB0aW1lIHBlcmlvZCBpcyBpbnZhbGlkXG5cdCAqICovXG5cdGdldE5vdGlmaWNhdGlvbkZyb21EYXRhKCk6IE91dE9mT2ZmaWNlTm90aWZpY2F0aW9uIHtcblx0XHRsZXQgc3RhcnREYXRlOiBEYXRlIHwgbnVsbCA9IG51bGxcblx0XHRsZXQgZW5kRGF0ZTogRGF0ZSB8IG51bGwgPSBudWxsXG5cblx0XHQvLyBXZSB1c2UgdGhlIGxhc3Qgc2Vjb25kIG9mIHRoZSBkYXkgYXMgZW5kIHRpbWUgdG8gbWFrZSBzdXJlIG5vdGlmaWNhdGlvbnMgYXJlIHN0aWxsIHNlbmQgZHVyaW5nIHRoaXMgZGF5LlxuXHRcdC8vIFdlIHVzZSB0aGUgbG9jYWwgdGltZSBmb3IgZGF0ZSBwaWNraW5nIGFuZCBjb252ZXJ0IGl0IHRvIFVUQyBiZWNhdXNlIHRoZSBzZXJ2ZXIgZXhwZWN0cyB1dGMgZGF0ZXNcblx0XHRpZiAodGhpcy50aW1lUmFuZ2VFbmFibGVkKCkpIHtcblx0XHRcdHN0YXJ0RGF0ZSA9IHRoaXMuc3RhcnREYXRlKClcblxuXHRcdFx0aWYgKCF0aGlzLmluZGVmaW5pdGVUaW1lUmFuZ2UoKSkge1xuXHRcdFx0XHRlbmREYXRlID0gZ2V0U3RhcnRPZk5leHREYXkodGhpcy5lbmREYXRlKCkpXG5cblx0XHRcdFx0aWYgKHN0YXJ0RGF0ZS5nZXRUaW1lKCkgPiBlbmREYXRlLmdldFRpbWUoKSB8fCBlbmREYXRlLmdldFRpbWUoKSA8IERhdGUubm93KCkpIHtcblx0XHRcdFx0XHR0aHJvdyBuZXcgVXNlckVycm9yKFwiaW52YWxpZFRpbWVQZXJpb2RfbXNnXCIpXG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRjb25zdCBub3RpZmljYXRpb25NZXNzYWdlczogT3V0T2ZPZmZpY2VOb3RpZmljYXRpb25NZXNzYWdlW10gPSBbXVxuXG5cdFx0aWYgKHRoaXMuaXNEZWZhdWx0TWVzc2FnZUVuYWJsZWQoKSkge1xuXHRcdFx0Y29uc3QgZGVmYXVsdE5vdGlmaWNhdGlvbjogT3V0T2ZPZmZpY2VOb3RpZmljYXRpb25NZXNzYWdlID0gY3JlYXRlT3V0T2ZPZmZpY2VOb3RpZmljYXRpb25NZXNzYWdlKHtcblx0XHRcdFx0c3ViamVjdDogdGhpcy5kZWZhdWx0U3ViamVjdCgpLnRyaW0oKSxcblx0XHRcdFx0bWVzc2FnZTogdGhpcy5kZWZhdWx0TWVzc2FnZSgpLnRyaW0oKSxcblx0XHRcdFx0dHlwZTogT3V0T2ZPZmZpY2VOb3RpZmljYXRpb25NZXNzYWdlVHlwZS5EZWZhdWx0LFxuXHRcdFx0fSlcblx0XHRcdG5vdGlmaWNhdGlvbk1lc3NhZ2VzLnB1c2goZGVmYXVsdE5vdGlmaWNhdGlvbilcblx0XHR9XG5cblx0XHRpZiAodGhpcy5pc09yZ2FuaXphdGlvbk1lc3NhZ2VFbmFibGVkKCkpIHtcblx0XHRcdGNvbnN0IG9yZ2FuaXphdGlvbk5vdGlmaWNhdGlvbjogT3V0T2ZPZmZpY2VOb3RpZmljYXRpb25NZXNzYWdlID0gY3JlYXRlT3V0T2ZPZmZpY2VOb3RpZmljYXRpb25NZXNzYWdlKHtcblx0XHRcdFx0c3ViamVjdDogdGhpcy5vcmdhbml6YXRpb25TdWJqZWN0KCkudHJpbSgpLFxuXHRcdFx0XHRtZXNzYWdlOiB0aGlzLm9yZ2FuaXphdGlvbk1lc3NhZ2UoKS50cmltKCksXG5cdFx0XHRcdHR5cGU6IE91dE9mT2ZmaWNlTm90aWZpY2F0aW9uTWVzc2FnZVR5cGUuSW5zaWRlT3JnYW5pemF0aW9uLFxuXHRcdFx0fSlcblx0XHRcdG5vdGlmaWNhdGlvbk1lc3NhZ2VzLnB1c2gob3JnYW5pemF0aW9uTm90aWZpY2F0aW9uKVxuXHRcdH1cblxuXHRcdHRoaXMub3V0T2ZPZmZpY2VOb3RpZmljYXRpb24uX293bmVyR3JvdXAgPSB0aGlzLl91c2VyQ29udHJvbGxlci5nZXRVc2VyTWFpbEdyb3VwTWVtYmVyc2hpcCgpLmdyb3VwXG5cdFx0dGhpcy5vdXRPZk9mZmljZU5vdGlmaWNhdGlvbi5lbmFibGVkID0gdGhpcy5lbmFibGVkKClcblx0XHR0aGlzLm91dE9mT2ZmaWNlTm90aWZpY2F0aW9uLnN0YXJ0RGF0ZSA9IHN0YXJ0RGF0ZVxuXHRcdHRoaXMub3V0T2ZPZmZpY2VOb3RpZmljYXRpb24uZW5kRGF0ZSA9IGVuZERhdGVcblx0XHR0aGlzLm91dE9mT2ZmaWNlTm90aWZpY2F0aW9uLm5vdGlmaWNhdGlvbnMgPSBub3RpZmljYXRpb25NZXNzYWdlc1xuXHRcdHJldHVybiB0aGlzLm91dE9mT2ZmaWNlTm90aWZpY2F0aW9uXG5cdH1cblxuXHRpc09yZ2FuaXphdGlvbk1lc3NhZ2VFbmFibGVkKCk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiAoXG5cdFx0XHR0aGlzLnJlY2lwaWVudE1lc3NhZ2VUeXBlcygpID09PSBSZWNpcGllbnRNZXNzYWdlVHlwZS5JTlRFUk5BTF9PTkxZIHx8IHRoaXMucmVjaXBpZW50TWVzc2FnZVR5cGVzKCkgPT09IFJlY2lwaWVudE1lc3NhZ2VUeXBlLklOVEVSTkFMX0FORF9FWFRFUk5BTFxuXHRcdClcblx0fVxuXG5cdGlzRGVmYXVsdE1lc3NhZ2VFbmFibGVkKCk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiAoXG5cdFx0XHR0aGlzLnJlY2lwaWVudE1lc3NhZ2VUeXBlcygpID09PSBSZWNpcGllbnRNZXNzYWdlVHlwZS5FWFRFUk5BTF9UT19FVkVSWU9ORSB8fFxuXHRcdFx0dGhpcy5yZWNpcGllbnRNZXNzYWdlVHlwZXMoKSA9PT0gUmVjaXBpZW50TWVzc2FnZVR5cGUuSU5URVJOQUxfQU5EX0VYVEVSTkFMXG5cdFx0KVxuXHR9XG5cblx0LyoqXG5cdCAqIEB0aHJvd3MgVXNlckVycm9yXG5cdCAqIEB0aHJvd3MgVXBncmFkZVJlcXVpcmVkRXJyb3Jcblx0ICovXG5cdHNhdmVPdXRPZk9mZmljZU5vdGlmaWNhdGlvbigpOiBQcm9taXNlPGFueT4ge1xuXHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUoKVxuXHRcdFx0LnRoZW4oKCkgPT4gdGhpcy5nZXROb3RpZmljYXRpb25Gcm9tRGF0YSgpKVxuXHRcdFx0LnRoZW4oYXN5bmMgKHNlbmRhYmxlTm90aWZpY2F0aW9uKSA9PiB7XG5cdFx0XHRcdC8vIEVycm9yIG1lc3NhZ2VzIGFyZSBhbHJlYWR5IHNob3duIGlmIHNlbmRhYmxlTm90aWZpY2F0aW9uIGlzIG51bGwuIFdlIGRvIG5vdCBjbG9zZSB0aGUgZGlhbG9nLlxuXHRcdFx0XHRpZiAodGhpcy5faXNOZXdOb3RpZmljYXRpb24oKSkge1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMuX2VudGl0eUNsaWVudC5zZXR1cChudWxsLCBzZW5kYWJsZU5vdGlmaWNhdGlvbilcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLl9lbnRpdHlDbGllbnQudXBkYXRlKHNlbmRhYmxlTm90aWZpY2F0aW9uKVxuXHRcdFx0XHR9XG5cdFx0XHR9KVxuXHRcdFx0LmNhdGNoKFxuXHRcdFx0XHRvZkNsYXNzKEludmFsaWREYXRhRXJyb3IsIChlKSA9PiB7XG5cdFx0XHRcdFx0dGhyb3cgbmV3IFVzZXJFcnJvcihcIm91dE9mT2ZmaWNlTWVzc2FnZUludmFsaWRfbXNnXCIpXG5cdFx0XHRcdH0pLFxuXHRcdFx0KVxuXHRcdFx0LmNhdGNoKFxuXHRcdFx0XHRvZkNsYXNzKFByZWNvbmRpdGlvbkZhaWxlZEVycm9yLCBhc3luYyAoZSkgPT4ge1xuXHRcdFx0XHRcdGlmIChlLmRhdGEgPT09IEZBSUxVUkVfVVBHUkFERV9SRVFVSVJFRCkge1xuXHRcdFx0XHRcdFx0dGhyb3cgbmV3IFVwZ3JhZGVSZXF1aXJlZEVycm9yKFwidXBncmFkZVJlcXVpcmVkX21zZ1wiLCBhd2FpdCBnZXRBdmFpbGFibGVQbGFuc1dpdGhBdXRvUmVzcG9uZGVyKCkpXG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHRocm93IG5ldyBVc2VyRXJyb3IobGFuZy5tYWtlVHJhbnNsYXRpb24oXCJlcnJvcl9tc2dcIiwgZS50b1N0cmluZygpKSlcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pLFxuXHRcdFx0KVxuXHR9XG5cblx0X2lzTmV3Tm90aWZpY2F0aW9uKCk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiAhdGhpcy5vdXRPZk9mZmljZU5vdGlmaWNhdGlvbi5faWRcblx0fVxufVxuIiwiaW1wb3J0IG0sIHsgQ2hpbGRyZW4sIENvbXBvbmVudCwgVm5vZGUgfSBmcm9tIFwibWl0aHJpbFwiXG5pbXBvcnQgeyBEaWFsb2cgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2d1aS9iYXNlL0RpYWxvZ1wiXG5pbXBvcnQgeyBnZXRTdGFydE9mVGhlV2Vla09mZnNldEZvclVzZXIgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2NhbGVuZGFyL2RhdGUvQ2FsZW5kYXJVdGlsc1wiXG5pbXBvcnQgdHlwZSB7IE91dE9mT2ZmaWNlTm90aWZpY2F0aW9uIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9hcGkvZW50aXRpZXMvdHV0YW5vdGEvVHlwZVJlZnMuanNcIlxuaW1wb3J0IHsgVGV4dEZpZWxkIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvYmFzZS9UZXh0RmllbGQuanNcIlxuaW1wb3J0IHsgbGFuZyB9IGZyb20gXCIuLi8uLi9jb21tb24vbWlzYy9MYW5ndWFnZVZpZXdNb2RlbFwiXG5pbXBvcnQgeyBLZXlzLCBPVVRfT0ZfT0ZGSUNFX1NVQkpFQ1RfUFJFRklYIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9hcGkvY29tbW9uL1R1dGFub3RhQ29uc3RhbnRzXCJcbmltcG9ydCB7IENoZWNrYm94IH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvYmFzZS9DaGVja2JveC5qc1wiXG5pbXBvcnQgeyBweCB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL3NpemVcIlxuaW1wb3J0IHsgQnV0dG9uVHlwZSB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL2Jhc2UvQnV0dG9uLmpzXCJcbmltcG9ydCB7IGdldERlZmF1bHROb3RpZmljYXRpb25MYWJlbCB9IGZyb20gXCIuLi8uLi9jb21tb24vbWlzYy9PdXRPZk9mZmljZU5vdGlmaWNhdGlvblV0aWxzXCJcbmltcG9ydCB7IHNob3dQbGFuVXBncmFkZVJlcXVpcmVkRGlhbG9nIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9taXNjL1N1YnNjcmlwdGlvbkRpYWxvZ3NcIlxuaW1wb3J0IHsgRHJvcERvd25TZWxlY3RvciB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL2Jhc2UvRHJvcERvd25TZWxlY3Rvci5qc1wiXG5pbXBvcnQgeyBzaG93VXNlckVycm9yIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9taXNjL0Vycm9ySGFuZGxlckltcGxcIlxuaW1wb3J0IHsgbG9jYXRvciB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL21haW4vQ29tbW9uTG9jYXRvclwiXG5pbXBvcnQgeyBFZGl0T3V0T2ZPZmZpY2VOb3RpZmljYXRpb25EaWFsb2dNb2RlbCwgUmVjaXBpZW50TWVzc2FnZVR5cGUgfSBmcm9tIFwiLi9FZGl0T3V0T2ZPZmZpY2VOb3RpZmljYXRpb25EaWFsb2dNb2RlbFwiXG5pbXBvcnQgeyBIdG1sRWRpdG9yIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvZWRpdG9yL0h0bWxFZGl0b3JcIlxuaW1wb3J0IHsgVXNlckVycm9yIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9hcGkvbWFpbi9Vc2VyRXJyb3JcIlxuaW1wb3J0IHsgRGF0ZVBpY2tlciB9IGZyb20gXCIuLi8uLi9jYWxlbmRhci1hcHAvY2FsZW5kYXIvZ3VpL3BpY2tlcnMvRGF0ZVBpY2tlclwiXG5pbXBvcnQgdHlwZSB7IGxhenkgfSBmcm9tIFwiQHR1dGFvL3R1dGFub3RhLXV0aWxzXCJcbmltcG9ydCB7IG9mQ2xhc3MgfSBmcm9tIFwiQHR1dGFvL3R1dGFub3RhLXV0aWxzXCJcbmltcG9ydCB7IERpYWxvZ0hlYWRlckJhckF0dHJzIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvYmFzZS9EaWFsb2dIZWFkZXJCYXJcIlxuaW1wb3J0IHsgVXBncmFkZVJlcXVpcmVkRXJyb3IgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2FwaS9tYWluL1VwZ3JhZGVSZXF1aXJlZEVycm9yLmpzXCJcblxuZXhwb3J0IGZ1bmN0aW9uIHNob3dFZGl0T3V0T2ZPZmZpY2VOb3RpZmljYXRpb25EaWFsb2cob3V0T2ZPZmZpY2VOb3RpZmljYXRpb246IE91dE9mT2ZmaWNlTm90aWZpY2F0aW9uIHwgbnVsbCkge1xuXHRjb25zdCBkaWFsb2dNb2RlbCA9IG5ldyBFZGl0T3V0T2ZPZmZpY2VOb3RpZmljYXRpb25EaWFsb2dNb2RlbChcblx0XHRvdXRPZk9mZmljZU5vdGlmaWNhdGlvbixcblx0XHRsb2NhdG9yLmVudGl0eUNsaWVudCxcblx0XHRsb2NhdG9yLmxvZ2lucy5nZXRVc2VyQ29udHJvbGxlcigpLFxuXHRcdGxhbmcsXG5cdFx0bG9jYXRvci5zZXJ2aWNlRXhlY3V0b3IsXG5cdClcblx0Y29uc3Qgb3JnYW5pemF0aW9uTWVzc2FnZUVkaXRvciA9IG5ldyBIdG1sRWRpdG9yKFwibWVzc2FnZV9sYWJlbFwiKVxuXHRcdC5zZXRNaW5IZWlnaHQoMTAwKVxuXHRcdC5zaG93Qm9yZGVycygpXG5cdFx0LnNldFZhbHVlKGRpYWxvZ01vZGVsLm9yZ2FuaXphdGlvbk1lc3NhZ2UoKSlcblx0XHQuZW5hYmxlVG9vbGJhcigpXG5cdGNvbnN0IGRlZmF1bHRNZXNzYWdlRWRpdG9yID0gbmV3IEh0bWxFZGl0b3IoXCJtZXNzYWdlX2xhYmVsXCIpLnNldE1pbkhlaWdodCgxMDApLnNob3dCb3JkZXJzKCkuc2V0VmFsdWUoZGlhbG9nTW9kZWwuZGVmYXVsdE1lc3NhZ2UoKSkuZW5hYmxlVG9vbGJhcigpXG5cblx0Y29uc3Qgc2F2ZU91dE9mT2ZmaWNlTm90aWZpY2F0aW9uID0gKCkgPT4ge1xuXHRcdGRpYWxvZ01vZGVsLm9yZ2FuaXphdGlvbk1lc3NhZ2Uob3JnYW5pemF0aW9uTWVzc2FnZUVkaXRvci5nZXRWYWx1ZSgpKVxuXHRcdGRpYWxvZ01vZGVsLmRlZmF1bHRNZXNzYWdlKGRlZmF1bHRNZXNzYWdlRWRpdG9yLmdldFZhbHVlKCkpXG5cdFx0ZGlhbG9nTW9kZWxcblx0XHRcdC5zYXZlT3V0T2ZPZmZpY2VOb3RpZmljYXRpb24oKVxuXHRcdFx0LnRoZW4oKCkgPT4gY2FuY2VsKCkpXG5cdFx0XHQuY2F0Y2gob2ZDbGFzcyhVc2VyRXJyb3IsIChlKSA9PiBzaG93VXNlckVycm9yKGUpKSlcblx0XHRcdC5jYXRjaChcblx0XHRcdFx0b2ZDbGFzcyhVcGdyYWRlUmVxdWlyZWRFcnJvciwgKGUpID0+IHtcblx0XHRcdFx0XHRzaG93UGxhblVwZ3JhZGVSZXF1aXJlZERpYWxvZyhlLnBsYW5zKVxuXHRcdFx0XHR9KSxcblx0XHRcdClcblx0fVxuXG5cdGZ1bmN0aW9uIGNhbmNlbCgpIHtcblx0XHRkaWFsb2cuY2xvc2UoKVxuXHR9XG5cblx0Y29uc3QgZGlhbG9nSGVhZGVyQXR0cnM6IERpYWxvZ0hlYWRlckJhckF0dHJzID0ge1xuXHRcdGxlZnQ6IFtcblx0XHRcdHtcblx0XHRcdFx0bGFiZWw6IFwiY2FuY2VsX2FjdGlvblwiLFxuXHRcdFx0XHRjbGljazogY2FuY2VsLFxuXHRcdFx0XHR0eXBlOiBCdXR0b25UeXBlLlNlY29uZGFyeSxcblx0XHRcdH0sXG5cdFx0XSxcblx0XHRyaWdodDogW1xuXHRcdFx0e1xuXHRcdFx0XHRsYWJlbDogXCJzYXZlX2FjdGlvblwiLFxuXHRcdFx0XHRjbGljazogc2F2ZU91dE9mT2ZmaWNlTm90aWZpY2F0aW9uLFxuXHRcdFx0XHR0eXBlOiBCdXR0b25UeXBlLlByaW1hcnksXG5cdFx0XHR9LFxuXHRcdF0sXG5cdFx0bWlkZGxlOiBcIm91dE9mT2ZmaWNlTm90aWZpY2F0aW9uX3RpdGxlXCIsXG5cdH1cblx0Y29uc3QgZGlhbG9nID0gRGlhbG9nLmVkaXREaWFsb2coZGlhbG9nSGVhZGVyQXR0cnMsIEVkaXRPdXRPZk9mZmljZU5vdGlmaWNhdGlvbkRpYWxvZywge1xuXHRcdG1vZGVsOiBkaWFsb2dNb2RlbCxcblx0XHRvcmdhbml6YXRpb25NZXNzYWdlRWRpdG9yLFxuXHRcdGRlZmF1bHRNZXNzYWdlRWRpdG9yLFxuXHR9KVxuXHRcdC5hZGRTaG9ydGN1dCh7XG5cdFx0XHRrZXk6IEtleXMuRVNDLFxuXHRcdFx0ZXhlYzogY2FuY2VsLFxuXHRcdFx0aGVscDogXCJjbG9zZV9hbHRcIixcblx0XHR9KVxuXHRcdC5hZGRTaG9ydGN1dCh7XG5cdFx0XHRrZXk6IEtleXMuUyxcblx0XHRcdGN0cmxPckNtZDogdHJ1ZSxcblx0XHRcdGV4ZWM6IHNhdmVPdXRPZk9mZmljZU5vdGlmaWNhdGlvbixcblx0XHRcdGhlbHA6IFwic2F2ZV9hY3Rpb25cIixcblx0XHR9KVxuXHRkaWFsb2cuc2hvdygpXG59XG5cbnR5cGUgRWRpdE91dE9mT2ZmaWNlTm90aWZpY2F0aW9uRGlhbG9nQXR0cnMgPSB7XG5cdG1vZGVsOiBFZGl0T3V0T2ZPZmZpY2VOb3RpZmljYXRpb25EaWFsb2dNb2RlbFxuXHRkZWZhdWx0TWVzc2FnZUVkaXRvcjogSHRtbEVkaXRvclxuXHRvcmdhbml6YXRpb25NZXNzYWdlRWRpdG9yOiBIdG1sRWRpdG9yXG59XG5cbmNsYXNzIEVkaXRPdXRPZk9mZmljZU5vdGlmaWNhdGlvbkRpYWxvZyBpbXBsZW1lbnRzIENvbXBvbmVudDxFZGl0T3V0T2ZPZmZpY2VOb3RpZmljYXRpb25EaWFsb2dBdHRycz4ge1xuXHR2aWV3KHZub2RlOiBWbm9kZTxFZGl0T3V0T2ZPZmZpY2VOb3RpZmljYXRpb25EaWFsb2dBdHRycz4pOiBDaGlsZHJlbiB7XG5cdFx0Y29uc3QgeyBtb2RlbCwgZGVmYXVsdE1lc3NhZ2VFZGl0b3IsIG9yZ2FuaXphdGlvbk1lc3NhZ2VFZGl0b3IgfSA9IHZub2RlLmF0dHJzXG5cdFx0Y29uc3QgZGVmYXVsdEVuYWJsZWQgPSBtb2RlbC5pc0RlZmF1bHRNZXNzYWdlRW5hYmxlZCgpXG5cdFx0Y29uc3Qgb3JnYW5pemF0aW9uRW5hYmxlZCA9IG1vZGVsLmlzT3JnYW5pemF0aW9uTWVzc2FnZUVuYWJsZWQoKVxuXHRcdGNvbnN0IHN0YXJ0T2ZUaGVXZWVrT2Zmc2V0ID0gZ2V0U3RhcnRPZlRoZVdlZWtPZmZzZXRGb3JVc2VyKGxvY2F0b3IubG9naW5zLmdldFVzZXJDb250cm9sbGVyKCkudXNlclNldHRpbmdzR3JvdXBSb290KVxuXHRcdHJldHVybiBbXG5cdFx0XHR0aGlzLnJlbmRlckVuYWJsZWQobW9kZWwpLFxuXHRcdFx0dGhpcy5yZW5kZXJSZWNpcGllbnRzKG1vZGVsKSxcblx0XHRcdG0oXG5cdFx0XHRcdFwiLm10LmZsZXgtc3RhcnRcIixcblx0XHRcdFx0bShDaGVja2JveCwge1xuXHRcdFx0XHRcdGxhYmVsOiAoKSA9PiBsYW5nLmdldChcIm91dE9mT2ZmaWNlVGltZVJhbmdlX21zZ1wiKSxcblx0XHRcdFx0XHRjaGVja2VkOiBtb2RlbC50aW1lUmFuZ2VFbmFibGVkKCksXG5cdFx0XHRcdFx0b25DaGVja2VkOiBtb2RlbC50aW1lUmFuZ2VFbmFibGVkLFxuXHRcdFx0XHRcdGhlbHBMYWJlbDogXCJvdXRPZk9mZmljZVRpbWVSYW5nZUhlbHBfbXNnXCIsXG5cdFx0XHRcdH0pLFxuXHRcdFx0KSxcblx0XHRcdG1vZGVsLnRpbWVSYW5nZUVuYWJsZWQoKSA/IHRoaXMucmVuZGVyVGltZVJhbmdlU2VsZWN0b3IobW9kZWwsIHN0YXJ0T2ZUaGVXZWVrT2Zmc2V0KSA6IG51bGwsXG5cdFx0XHRtKFwiLm10LWxcIiwgbGFuZy5nZXQoXCJvdXRPZk9mZmljZVVuZW5jcnlwdGVkX21zZ1wiKSksXG5cdFx0XHRvcmdhbml6YXRpb25FbmFibGVkID8gdGhpcy5yZW5kZXJPcmdhbml6YXRpb25zKG1vZGVsLCBvcmdhbml6YXRpb25NZXNzYWdlRWRpdG9yKSA6IG51bGwsXG5cdFx0XHRkZWZhdWx0RW5hYmxlZCA/IHRoaXMucmVuZGVyRGVmYXVsdChvcmdhbml6YXRpb25FbmFibGVkLCBtb2RlbCwgZGVmYXVsdE1lc3NhZ2VFZGl0b3IpIDogbnVsbCxcblx0XHRcdG0oXCIucGJcIiwgXCJcIiksXG5cdFx0XVxuXHR9XG5cblx0cHJpdmF0ZSByZW5kZXJFbmFibGVkKG1vZGVsOiBFZGl0T3V0T2ZPZmZpY2VOb3RpZmljYXRpb25EaWFsb2dNb2RlbCkge1xuXHRcdGNvbnN0IHN0YXR1c0l0ZW1zID0gW1xuXHRcdFx0eyBuYW1lOiBsYW5nLmdldChcImRlYWN0aXZhdGVkX2xhYmVsXCIpLCB2YWx1ZTogZmFsc2UgfSxcblx0XHRcdHsgbmFtZTogbGFuZy5nZXQoXCJhY3RpdmF0ZWRfbGFiZWxcIiksIHZhbHVlOiB0cnVlIH0sXG5cdFx0XVxuXHRcdHJldHVybiBtKERyb3BEb3duU2VsZWN0b3IsIHtcblx0XHRcdGxhYmVsOiBcInN0YXRlX2xhYmVsXCIsXG5cdFx0XHRpdGVtczogc3RhdHVzSXRlbXMsXG5cdFx0XHRzZWxlY3RlZFZhbHVlOiBtb2RlbC5lbmFibGVkKCksXG5cdFx0XHRzZWxlY3Rpb25DaGFuZ2VkSGFuZGxlcjogbW9kZWwuZW5hYmxlZCxcblx0XHR9KVxuXHR9XG5cblx0cHJpdmF0ZSByZW5kZXJEZWZhdWx0KG9yZ2FuaXphdGlvbkVuYWJsZWQ6IGJvb2xlYW4sIG1vZGVsOiBFZGl0T3V0T2ZPZmZpY2VOb3RpZmljYXRpb25EaWFsb2dNb2RlbCwgZGVmYXVsdE1lc3NhZ2VFZGl0b3I6IEh0bWxFZGl0b3IpIHtcblx0XHRyZXR1cm4gW1xuXHRcdFx0bShcIi5oNC50ZXh0LWNlbnRlci5tdC1sXCIsIGdldERlZmF1bHROb3RpZmljYXRpb25MYWJlbChvcmdhbml6YXRpb25FbmFibGVkKSksXG5cdFx0XHRtKFRleHRGaWVsZCwge1xuXHRcdFx0XHRsYWJlbDogXCJzdWJqZWN0X2xhYmVsXCIsXG5cdFx0XHRcdHZhbHVlOiBtb2RlbC5kZWZhdWx0U3ViamVjdCgpLFxuXHRcdFx0XHRvbmlucHV0OiBtb2RlbC5kZWZhdWx0U3ViamVjdCxcblx0XHRcdFx0aW5qZWN0aW9uc0xlZnQ6ICgpID0+XG5cdFx0XHRcdFx0bShcblx0XHRcdFx0XHRcdFwiLmZsZXgtbm8tZ3Jvdy1uby1zaHJpbmstYXV0by5wci1zXCIsXG5cdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdHN0eWxlOiB7XG5cdFx0XHRcdFx0XHRcdFx0XCJsaW5lLWhlaWdodFwiOiBweCgyNCksXG5cdFx0XHRcdFx0XHRcdFx0b3BhY2l0eTogXCIxXCIsXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0T1VUX09GX09GRklDRV9TVUJKRUNUX1BSRUZJWCxcblx0XHRcdFx0XHQpLFxuXHRcdFx0fSksXG5cdFx0XHRtKGRlZmF1bHRNZXNzYWdlRWRpdG9yKSxcblx0XHRdXG5cdH1cblxuXHRwcml2YXRlIHJlbmRlck9yZ2FuaXphdGlvbnMobW9kZWw6IEVkaXRPdXRPZk9mZmljZU5vdGlmaWNhdGlvbkRpYWxvZ01vZGVsLCBvcmdhbml6YXRpb25NZXNzYWdlRWRpdG9yOiBIdG1sRWRpdG9yKSB7XG5cdFx0cmV0dXJuIFtcblx0XHRcdG0oXCIuaDQudGV4dC1jZW50ZXIubXQtbFwiLCBsYW5nLmdldChcIm91dE9mT2ZmaWNlSW50ZXJuYWxfbXNnXCIpKSxcblx0XHRcdG0oVGV4dEZpZWxkLCB7XG5cdFx0XHRcdGxhYmVsOiBcInN1YmplY3RfbGFiZWxcIixcblx0XHRcdFx0dmFsdWU6IG1vZGVsLm9yZ2FuaXphdGlvblN1YmplY3QoKSxcblx0XHRcdFx0b25pbnB1dDogbW9kZWwub3JnYW5pemF0aW9uU3ViamVjdCxcblx0XHRcdFx0aW5qZWN0aW9uc0xlZnQ6ICgpID0+XG5cdFx0XHRcdFx0bShcblx0XHRcdFx0XHRcdFwiLmZsZXgtbm8tZ3Jvdy1uby1zaHJpbmstYXV0by5wci1zXCIsXG5cdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdHN0eWxlOiB7XG5cdFx0XHRcdFx0XHRcdFx0XCJsaW5lLWhlaWdodFwiOiBweCgyNCksXG5cdFx0XHRcdFx0XHRcdFx0b3BhY2l0eTogXCIxXCIsXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0T1VUX09GX09GRklDRV9TVUJKRUNUX1BSRUZJWCxcblx0XHRcdFx0XHQpLFxuXHRcdFx0fSksXG5cdFx0XHRtKG9yZ2FuaXphdGlvbk1lc3NhZ2VFZGl0b3IpLFxuXHRcdF1cblx0fVxuXG5cdHByaXZhdGUgcmVuZGVyUmVjaXBpZW50cyhtb2RlbDogRWRpdE91dE9mT2ZmaWNlTm90aWZpY2F0aW9uRGlhbG9nTW9kZWwpIHtcblx0XHRjb25zdCByZWNpcGllbnRJdGVtcyA9IFtcblx0XHRcdHsgbmFtZTogbGFuZy5nZXQoXCJldmVyeW9uZV9sYWJlbFwiKSwgdmFsdWU6IFJlY2lwaWVudE1lc3NhZ2VUeXBlLkVYVEVSTkFMX1RPX0VWRVJZT05FIH0sXG5cdFx0XHR7IG5hbWU6IGxhbmcuZ2V0KFwiaW5zaWRlT3V0c2lkZV9sYWJlbFwiKSwgdmFsdWU6IFJlY2lwaWVudE1lc3NhZ2VUeXBlLklOVEVSTkFMX0FORF9FWFRFUk5BTCB9LFxuXHRcdFx0eyBuYW1lOiBsYW5nLmdldChcImluc2lkZU9ubHlfbGFiZWxcIiksIHZhbHVlOiBSZWNpcGllbnRNZXNzYWdlVHlwZS5JTlRFUk5BTF9PTkxZIH0sXG5cdFx0XVxuXHRcdGNvbnN0IHJlY2lwaWVudEhlbHBMYWJlbDogbGF6eTxzdHJpbmc+ID0gKCkgPT4ge1xuXHRcdFx0c3dpdGNoIChtb2RlbC5yZWNpcGllbnRNZXNzYWdlVHlwZXMoKSkge1xuXHRcdFx0XHRjYXNlIFJlY2lwaWVudE1lc3NhZ2VUeXBlLkVYVEVSTkFMX1RPX0VWRVJZT05FOlxuXHRcdFx0XHRcdHJldHVybiBsYW5nLmdldChcIm91dE9mT2ZmaWNlUmVjaXBpZW50c0V2ZXJ5b25lSGVscF9sYWJlbFwiKVxuXG5cdFx0XHRcdGNhc2UgUmVjaXBpZW50TWVzc2FnZVR5cGUuSU5URVJOQUxfQU5EX0VYVEVSTkFMOlxuXHRcdFx0XHRcdHJldHVybiBsYW5nLmdldChcIm91dE9mT2ZmaWNlUmVjaXBpZW50c0ludGVybmFsRXh0ZXJuYWxIZWxwX2xhYmVsXCIpXG5cblx0XHRcdFx0Y2FzZSBSZWNpcGllbnRNZXNzYWdlVHlwZS5JTlRFUk5BTF9PTkxZOlxuXHRcdFx0XHRcdHJldHVybiBsYW5nLmdldChcIm91dE9mT2ZmaWNlUmVjaXBpZW50c0ludGVybmFsT25seUhlbHBfbGFiZWxcIilcblxuXHRcdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRcdHJldHVybiBcIlwiXG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIG0oRHJvcERvd25TZWxlY3Rvciwge1xuXHRcdFx0bGFiZWw6IFwib3V0T2ZPZmZpY2VSZWNpcGllbnRzX2xhYmVsXCIsXG5cdFx0XHRpdGVtczogcmVjaXBpZW50SXRlbXMsXG5cdFx0XHRzZWxlY3RlZFZhbHVlOiBtb2RlbC5yZWNpcGllbnRNZXNzYWdlVHlwZXMoKSxcblx0XHRcdHNlbGVjdGlvbkNoYW5nZWRIYW5kbGVyOiBtb2RlbC5yZWNpcGllbnRNZXNzYWdlVHlwZXMsXG5cdFx0XHRoZWxwTGFiZWw6IHJlY2lwaWVudEhlbHBMYWJlbCxcblx0XHR9KVxuXHR9XG5cblx0cHJpdmF0ZSByZW5kZXJUaW1lUmFuZ2VTZWxlY3Rvcihtb2RlbDogRWRpdE91dE9mT2ZmaWNlTm90aWZpY2F0aW9uRGlhbG9nTW9kZWwsIHN0YXJ0T2ZUaGVXZWVrT2Zmc2V0OiBudW1iZXIpOiBDaGlsZHJlbiB7XG5cdFx0cmV0dXJuIG0oXCIuZmxleC5jb2xcIiwgW1xuXHRcdFx0bShEYXRlUGlja2VyLCB7XG5cdFx0XHRcdGRhdGU6IG1vZGVsLnN0YXJ0RGF0ZSgpLFxuXHRcdFx0XHRvbkRhdGVTZWxlY3RlZDogbW9kZWwuc3RhcnREYXRlLFxuXHRcdFx0XHRsYWJlbDogXCJkYXRlRnJvbV9sYWJlbFwiLFxuXHRcdFx0XHRudWxsU2VsZWN0aW9uVGV4dDogXCJlbXB0eVN0cmluZ19tc2dcIixcblx0XHRcdFx0c3RhcnRPZlRoZVdlZWtPZmZzZXQsXG5cdFx0XHR9KSxcblx0XHRcdG0oQ2hlY2tib3gsIHtcblx0XHRcdFx0bGFiZWw6ICgpID0+IGxhbmcuZ2V0KFwidW5saW1pdGVkX2xhYmVsXCIpLFxuXHRcdFx0XHRjaGVja2VkOiBtb2RlbC5pbmRlZmluaXRlVGltZVJhbmdlKCksXG5cdFx0XHRcdG9uQ2hlY2tlZDogbW9kZWwuaW5kZWZpbml0ZVRpbWVSYW5nZSxcblx0XHRcdH0pLFxuXHRcdFx0IW1vZGVsLmluZGVmaW5pdGVUaW1lUmFuZ2UoKVxuXHRcdFx0XHQ/IG0oRGF0ZVBpY2tlciwge1xuXHRcdFx0XHRcdFx0ZGF0ZTogbW9kZWwuZW5kRGF0ZSgpLFxuXHRcdFx0XHRcdFx0b25EYXRlU2VsZWN0ZWQ6IG1vZGVsLmVuZERhdGUsXG5cdFx0XHRcdFx0XHRsYWJlbDogXCJkYXRlVG9fbGFiZWxcIixcblx0XHRcdFx0XHRcdG51bGxTZWxlY3Rpb25UZXh0OiBcImVtcHR5U3RyaW5nX21zZ1wiLFxuXHRcdFx0XHRcdFx0c3RhcnRPZlRoZVdlZWtPZmZzZXQsXG5cdFx0XHRcdCAgfSlcblx0XHRcdFx0OiBudWxsLFxuXHRcdF0pXG5cdH1cbn1cbiIsImltcG9ydCBtIGZyb20gXCJtaXRocmlsXCJcbmltcG9ydCB7IERpYWxvZywgRGlhbG9nVHlwZSB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL2Jhc2UvRGlhbG9nXCJcbmltcG9ydCB7IGxhbmcsIE1heWJlVHJhbnNsYXRpb24gfSBmcm9tIFwiLi4vLi4vY29tbW9uL21pc2MvTGFuZ3VhZ2VWaWV3TW9kZWxcIlxuaW1wb3J0IHsgRW1haWxTaWduYXR1cmVUeXBlLCBGZWF0dXJlVHlwZSB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL2NvbW1vbi9UdXRhbm90YUNvbnN0YW50c1wiXG5pbXBvcnQgeyBIdG1sRWRpdG9yIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvZWRpdG9yL0h0bWxFZGl0b3JcIlxuaW1wb3J0IHR5cGUgeyBUdXRhbm90YVByb3BlcnRpZXMgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2FwaS9lbnRpdGllcy90dXRhbm90YS9UeXBlUmVmcy5qc1wiXG5pbXBvcnQgeyBQYXlsb2FkVG9vTGFyZ2VFcnJvciB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL2NvbW1vbi9lcnJvci9SZXN0RXJyb3JcIlxuaW1wb3J0IHsgc2hvd1Byb2dyZXNzRGlhbG9nIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvZGlhbG9ncy9Qcm9ncmVzc0RpYWxvZ1wiXG5pbXBvcnQgeyBkb3duY2FzdCwgbmV2ZXJOdWxsLCBvZkNsYXNzIH0gZnJvbSBcIkB0dXRhby90dXRhbm90YS11dGlsc1wiXG5pbXBvcnQgeyBsb2NhdG9yIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9hcGkvbWFpbi9Db21tb25Mb2NhdG9yXCJcbmltcG9ydCB7IGFzc2VydE1haW5Pck5vZGUgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2FwaS9jb21tb24vRW52XCJcbmltcG9ydCB7IERyb3BEb3duU2VsZWN0b3IgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2d1aS9iYXNlL0Ryb3BEb3duU2VsZWN0b3IuanNcIlxuaW1wb3J0IHsgaW5zZXJ0SW5saW5lSW1hZ2VCNjRDbGlja0hhbmRsZXIgfSBmcm9tIFwiLi4vLi4vY29tbW9uL21haWxGdW5jdGlvbmFsaXR5L1NoYXJlZE1haWxVdGlscy5qc1wiXG5cbmFzc2VydE1haW5Pck5vZGUoKVxuLy8gc2lnbmF0dXJlcyBjYW4gYmVjb21lIGxhcmdlLCBmb3IgZXhhbXBsZSBpZiB0aGV5IGluY2x1ZGUgYSBiYXNlNjQgZW1iZWRkZWQgaW1hZ2UuIHdlIGFzayBmb3IgY29uZmlybWF0aW9uIGluIHN1Y2ggY2FzZXNcbmNvbnN0IFJFQ09NTUVOREVEX1NJR05BVFVSRV9TSVpFX0xJTUlUID0gMTUgKiAxMDI0XG5cbmV4cG9ydCBmdW5jdGlvbiBzaG93KHByb3BzOiBUdXRhbm90YVByb3BlcnRpZXMpIHtcblx0aW1wb3J0KFwiLi4vbWFpbC9zaWduYXR1cmUvU2lnbmF0dXJlXCIpLnRoZW4oKHsgZ2V0RGVmYXVsdFNpZ25hdHVyZSB9KSA9PiB7XG5cdFx0Y29uc3QgZGVmYXVsdFNpZ25hdHVyZSA9IGdldERlZmF1bHRTaWduYXR1cmUoKVxuXHRcdGxldCBjdXJyZW50Q3VzdG9tU2lnbmF0dXJlID0gbG9jYXRvci5sb2dpbnMuZ2V0VXNlckNvbnRyb2xsZXIoKS5wcm9wcy5jdXN0b21FbWFpbFNpZ25hdHVyZVxuXG5cdFx0aWYgKGN1cnJlbnRDdXN0b21TaWduYXR1cmUgPT09IFwiXCIgJiYgIWxvY2F0b3IubG9naW5zLmlzRW5hYmxlZChGZWF0dXJlVHlwZS5EaXNhYmxlRGVmYXVsdFNpZ25hdHVyZSkpIHtcblx0XHRcdGN1cnJlbnRDdXN0b21TaWduYXR1cmUgPSBkZWZhdWx0U2lnbmF0dXJlXG5cdFx0fVxuXG5cdFx0bGV0IHNlbGVjdGVkVHlwZSA9IGxvY2F0b3IubG9naW5zLmdldFVzZXJDb250cm9sbGVyKCkucHJvcHMuZW1haWxTaWduYXR1cmVUeXBlIGFzIEVtYWlsU2lnbmF0dXJlVHlwZVxuXHRcdGNvbnN0IGVkaXRvciA9IG5ldyBIdG1sRWRpdG9yKFwicHJldmlld19sYWJlbFwiKVxuXHRcdFx0LnNob3dCb3JkZXJzKClcblx0XHRcdC5zZXRNaW5IZWlnaHQoMjAwKVxuXHRcdFx0LnNldFZhbHVlKGdldFNpZ25hdHVyZShzZWxlY3RlZFR5cGUsIGRlZmF1bHRTaWduYXR1cmUsIGN1cnJlbnRDdXN0b21TaWduYXR1cmUpKVxuXHRcdFx0LmVuYWJsZVRvb2xiYXIoKVxuXHRcdFx0LnNldFRvb2xiYXJPcHRpb25zKHtcblx0XHRcdFx0aW1hZ2VCdXR0b25DbGlja0hhbmRsZXI6IGluc2VydElubGluZUltYWdlQjY0Q2xpY2tIYW5kbGVyLFxuXHRcdFx0fSlcblx0XHRcdC5zZXRFbmFibGVkKHNlbGVjdGVkVHlwZSA9PT0gRW1haWxTaWduYXR1cmVUeXBlLkVNQUlMX1NJR05BVFVSRV9UWVBFX0NVU1RPTSlcblxuXHRcdGNvbnN0IHNpZ25hdHVyZVR5cGVzID0gZ2V0U2lnbmF0dXJlVHlwZXMocHJvcHMpXG5cblx0XHRjb25zdCBmb3JtID0ge1xuXHRcdFx0dmlldzogKCkgPT4ge1xuXHRcdFx0XHRyZXR1cm4gW1xuXHRcdFx0XHRcdG0oRHJvcERvd25TZWxlY3Rvciwge1xuXHRcdFx0XHRcdFx0bGFiZWw6IFwidXNlckVtYWlsU2lnbmF0dXJlX2xhYmVsXCIsXG5cdFx0XHRcdFx0XHRpdGVtczogc2lnbmF0dXJlVHlwZXMsXG5cdFx0XHRcdFx0XHRzZWxlY3RlZFZhbHVlOiBzZWxlY3RlZFR5cGUsXG5cdFx0XHRcdFx0XHRzZWxlY3Rpb25DaGFuZ2VkSGFuZGxlcjogKHR5cGU6IEVtYWlsU2lnbmF0dXJlVHlwZSkgPT4ge1xuXHRcdFx0XHRcdFx0XHRpZiAoc2VsZWN0ZWRUeXBlID09PSBFbWFpbFNpZ25hdHVyZVR5cGUuRU1BSUxfU0lHTkFUVVJFX1RZUEVfQ1VTVE9NKSB7XG5cdFx0XHRcdFx0XHRcdFx0Y3VycmVudEN1c3RvbVNpZ25hdHVyZSA9IGVkaXRvci5nZXRWYWx1ZSgpXG5cdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHRzZWxlY3RlZFR5cGUgPSB0eXBlXG5cdFx0XHRcdFx0XHRcdGVkaXRvci5zZXRWYWx1ZShnZXRTaWduYXR1cmUodHlwZSwgZGVmYXVsdFNpZ25hdHVyZSwgY3VycmVudEN1c3RvbVNpZ25hdHVyZSkpXG5cdFx0XHRcdFx0XHRcdGVkaXRvci5zZXRFbmFibGVkKHR5cGUgPT09IEVtYWlsU2lnbmF0dXJlVHlwZS5FTUFJTF9TSUdOQVRVUkVfVFlQRV9DVVNUT00pXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdH0pLFxuXHRcdFx0XHRcdG0oZWRpdG9yKSxcblx0XHRcdFx0XVxuXHRcdFx0fSxcblx0XHR9XG5cblx0XHRsZXQgZWRpdFNpZ25hdHVyZU9rQWN0aW9uID0gKGRpYWxvZzogRGlhbG9nKSA9PiB7XG5cdFx0XHRjb25zdCBwcm9wcyA9IGxvY2F0b3IubG9naW5zLmdldFVzZXJDb250cm9sbGVyKCkucHJvcHNcblx0XHRcdGNvbnN0IG5ld1R5cGUgPSBzZWxlY3RlZFR5cGVcblx0XHRcdGNvbnN0IG5ld0N1c3RvbVZhbHVlID0gZWRpdG9yLmdldFZhbHVlKClcblx0XHRcdGNvbnN0IG9sZFR5cGUgPSBwcm9wcy5lbWFpbFNpZ25hdHVyZVR5cGVcblx0XHRcdGNvbnN0IG9sZEN1c3RvbVZhbHVlID0gcHJvcHMuY3VzdG9tRW1haWxTaWduYXR1cmVcblxuXHRcdFx0Y29uc3QgdXBkYXRlU2lnbmF0dXJlID0gKCkgPT4ge1xuXHRcdFx0XHRwcm9wcy5lbWFpbFNpZ25hdHVyZVR5cGUgPSBuZXdUeXBlXG5cblx0XHRcdFx0aWYgKG5ld1R5cGUgPT09IEVtYWlsU2lnbmF0dXJlVHlwZS5FTUFJTF9TSUdOQVRVUkVfVFlQRV9DVVNUT00pIHtcblx0XHRcdFx0XHRwcm9wcy5jdXN0b21FbWFpbFNpZ25hdHVyZSA9IG5ld0N1c3RvbVZhbHVlXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRjb25zdCB1cGRhdGVQcm9taXNlID0gbG9jYXRvci5lbnRpdHlDbGllbnQudXBkYXRlKHByb3BzKVxuXHRcdFx0XHRyZXR1cm4gc2hvd1Byb2dyZXNzRGlhbG9nKFwicGxlYXNlV2FpdF9tc2dcIiwgdXBkYXRlUHJvbWlzZSlcblx0XHRcdFx0XHQudGhlbigoKSA9PiBkaWFsb2cuY2xvc2UoKSlcblx0XHRcdFx0XHQuY2F0Y2goXG5cdFx0XHRcdFx0XHRvZkNsYXNzKFBheWxvYWRUb29MYXJnZUVycm9yLCAoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdHByb3BzLmVtYWlsU2lnbmF0dXJlVHlwZSA9IG9sZFR5cGVcblx0XHRcdFx0XHRcdFx0cHJvcHMuY3VzdG9tRW1haWxTaWduYXR1cmUgPSBvbGRDdXN0b21WYWx1ZVxuXHRcdFx0XHRcdFx0XHRyZXR1cm4gRGlhbG9nLm1lc3NhZ2UoXCJyZXF1ZXN0VG9vTGFyZ2VfbXNnXCIpXG5cdFx0XHRcdFx0XHR9KSxcblx0XHRcdFx0XHQpXG5cdFx0XHR9XG5cblx0XHRcdGlmIChuZXdUeXBlID09PSBvbGRUeXBlICYmIChuZXdUeXBlICE9PSBFbWFpbFNpZ25hdHVyZVR5cGUuRU1BSUxfU0lHTkFUVVJFX1RZUEVfQ1VTVE9NIHx8IG5ld0N1c3RvbVZhbHVlID09PSBvbGRDdXN0b21WYWx1ZSkpIHtcblx0XHRcdFx0cmV0dXJuIGRpYWxvZy5jbG9zZSgpXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRpZiAobmV3VHlwZSA9PT0gRW1haWxTaWduYXR1cmVUeXBlLkVNQUlMX1NJR05BVFVSRV9UWVBFX0NVU1RPTSAmJiBuZXdDdXN0b21WYWx1ZS5sZW5ndGggPiBSRUNPTU1FTkRFRF9TSUdOQVRVUkVfU0laRV9MSU1JVCkge1xuXHRcdFx0XHRcdGNvbnN0IHNpZ25hdHVyZVNpemVLYiA9IE1hdGguZmxvb3IobmV3Q3VzdG9tVmFsdWUubGVuZ3RoIC8gMTAyNClcblx0XHRcdFx0XHRjb25zdCBjb25maXJtTGFyZ2VTaWduYXR1cmVBdHRycyA9IHtcblx0XHRcdFx0XHRcdHRpdGxlOiBkb3duY2FzdChcInVzZXJFbWFpbFNpZ25hdHVyZV9sYWJlbFwiKSxcblx0XHRcdFx0XHRcdGNoaWxkOiB7XG5cdFx0XHRcdFx0XHRcdHZpZXc6ICgpID0+XG5cdFx0XHRcdFx0XHRcdFx0bShcblx0XHRcdFx0XHRcdFx0XHRcdFwicFwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0bGFuZy5nZXQoXCJsYXJnZVNpZ25hdHVyZV9tc2dcIiwge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcInsxfVwiOiBzaWduYXR1cmVTaXplS2IsXG5cdFx0XHRcdFx0XHRcdFx0XHR9KSxcblx0XHRcdFx0XHRcdFx0XHQpLFxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdG9rQWN0aW9uOiAoZGlhbG9nOiBEaWFsb2cpID0+IHtcblx0XHRcdFx0XHRcdFx0ZGlhbG9nLmNsb3NlKClcblx0XHRcdFx0XHRcdFx0dXBkYXRlU2lnbmF0dXJlKClcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRhbGxvd09rV2l0aFJldHVybjogdHJ1ZSxcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0RGlhbG9nLnNob3dBY3Rpb25EaWFsb2coY29uZmlybUxhcmdlU2lnbmF0dXJlQXR0cnMpXG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0dXBkYXRlU2lnbmF0dXJlKClcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdERpYWxvZy5zaG93QWN0aW9uRGlhbG9nKHtcblx0XHRcdHRpdGxlOiBcInVzZXJFbWFpbFNpZ25hdHVyZV9sYWJlbFwiLFxuXHRcdFx0Y2hpbGQ6IGZvcm0sXG5cdFx0XHR0eXBlOiBEaWFsb2dUeXBlLkVkaXRMYXJnZSxcblx0XHRcdG9rQWN0aW9uOiBlZGl0U2lnbmF0dXJlT2tBY3Rpb24sXG5cdFx0fSlcblx0fSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFNpZ25hdHVyZVR5cGVzKHByb3BzOiBUdXRhbm90YVByb3BlcnRpZXMpOiB7XG5cdG5hbWU6IHN0cmluZ1xuXHR2YWx1ZTogc3RyaW5nXG59W10ge1xuXHRsZXQgc2lnbmF0dXJlVHlwZXMgPSBbXG5cdFx0e1xuXHRcdFx0bmFtZTogbGFuZy5nZXQoXCJlbWFpbFNpZ25hdHVyZVR5cGVDdXN0b21fbXNnXCIpLFxuXHRcdFx0dmFsdWU6IEVtYWlsU2lnbmF0dXJlVHlwZS5FTUFJTF9TSUdOQVRVUkVfVFlQRV9DVVNUT00sXG5cdFx0fSxcblx0XHR7XG5cdFx0XHRuYW1lOiBsYW5nLmdldChcImNvbWJvQm94U2VsZWN0aW9uTm9uZV9tc2dcIiksXG5cdFx0XHR2YWx1ZTogRW1haWxTaWduYXR1cmVUeXBlLkVNQUlMX1NJR05BVFVSRV9UWVBFX05PTkUsXG5cdFx0fSxcblx0XVxuXG5cdGlmICghbG9jYXRvci5sb2dpbnMuaXNFbmFibGVkKEZlYXR1cmVUeXBlLkRpc2FibGVEZWZhdWx0U2lnbmF0dXJlKSB8fCBwcm9wcy5lbWFpbFNpZ25hdHVyZVR5cGUgPT09IEVtYWlsU2lnbmF0dXJlVHlwZS5FTUFJTF9TSUdOQVRVUkVfVFlQRV9ERUZBVUxUKSB7XG5cdFx0c2lnbmF0dXJlVHlwZXMuc3BsaWNlKDAsIDAsIHtcblx0XHRcdG5hbWU6IGxhbmcuZ2V0KFwiZW1haWxTaWduYXR1cmVUeXBlRGVmYXVsdF9tc2dcIiksXG5cdFx0XHR2YWx1ZTogRW1haWxTaWduYXR1cmVUeXBlLkVNQUlMX1NJR05BVFVSRV9UWVBFX0RFRkFVTFQsXG5cdFx0fSlcblx0fVxuXG5cdHJldHVybiBzaWduYXR1cmVUeXBlc1xufVxuXG5mdW5jdGlvbiBnZXRTaWduYXR1cmUodHlwZTogc3RyaW5nLCBkZWZhdWx0U2lnbmF0dXJlOiBzdHJpbmcsIGN1cnJlbnRDdXN0b21TaWduYXR1cmU6IHN0cmluZyk6IHN0cmluZyB7XG5cdGlmICh0eXBlID09PSBFbWFpbFNpZ25hdHVyZVR5cGUuRU1BSUxfU0lHTkFUVVJFX1RZUEVfREVGQVVMVCkge1xuXHRcdHJldHVybiBkZWZhdWx0U2lnbmF0dXJlXG5cdH0gZWxzZSBpZiAodHlwZSA9PT0gRW1haWxTaWduYXR1cmVUeXBlLkVNQUlMX1NJR05BVFVSRV9UWVBFX0NVU1RPTSkge1xuXHRcdHJldHVybiBjdXJyZW50Q3VzdG9tU2lnbmF0dXJlXG5cdH0gZWxzZSB7XG5cdFx0cmV0dXJuIFwiXCJcblx0fVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2lnbmF0dXJlVHlwZShwcm9wczogVHV0YW5vdGFQcm9wZXJ0aWVzKToge1xuXHRuYW1lOiBzdHJpbmdcblx0dmFsdWU6IHN0cmluZ1xufSB7XG5cdHJldHVybiBuZXZlck51bGwoZ2V0U2lnbmF0dXJlVHlwZXMocHJvcHMpLmZpbmQoKHQpID0+IHQudmFsdWUgPT09IHByb3BzLmVtYWlsU2lnbmF0dXJlVHlwZSkpXG59XG4iLCJpbXBvcnQgeyBPRkZMSU5FX1NUT1JBR0VfREVGQVVMVF9USU1FX1JBTkdFX0RBWVMgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2FwaS9jb21tb24vVHV0YW5vdGFDb25zdGFudHMuanNcIlxuaW1wb3J0IHsgaXNPZmZsaW5lU3RvcmFnZUF2YWlsYWJsZSB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL2NvbW1vbi9FbnYuanNcIlxuaW1wb3J0IHsgYXNzZXJ0IH0gZnJvbSBcIkB0dXRhby90dXRhbm90YS11dGlsc1wiXG5pbXBvcnQgeyBVc2VyQ29udHJvbGxlciB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL21haW4vVXNlckNvbnRyb2xsZXJcIlxuaW1wb3J0IHsgRGV2aWNlQ29uZmlnIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9taXNjL0RldmljZUNvbmZpZ1wiXG5cbi8qKlxuICogQSBtb2RlbCBmb3IgaGFuZGxpbmcgb2ZmbGluZSBzdG9yYWdlIGNvbmZpZ3VyYXRpb25cbiAqIEFjY2Vzc2luZyBzZXR0ZXJzIGFuZCBnZXR0ZXJzIHdpbGwgdGhyb3cgaWYgeW91IGFyZSBub3QgaW4gYSBjb250ZXh0IHdoZXJlIGFuIG9mZmxpbmUgZGF0YWJhc2UgaXMgYXZhaWxhYmxlXG4gKiBTb21lIGxvZ2ljIGlzIGR1cGxpY2F0ZWQgZnJvbSBPZmZsaW5lU3RvcmFnZVxuICovXG5leHBvcnQgY2xhc3MgT2ZmbGluZVN0b3JhZ2VTZXR0aW5nc01vZGVsIHtcblx0cHJpdmF0ZSBfaXNJbml0aWFsaXplZCA9IGZhbHNlXG5cdHByaXZhdGUgaXNFbmFibGVkOiBib29sZWFuIHwgbnVsbCA9IG51bGxcblxuXHQvLyB0aGUgZGVmYXVsdCB2YWx1ZSB3aWxsIG5ldmVyIGFjdHVhbGx5IGJlIHVzZWRcblx0cHJpdmF0ZSB0aW1lUmFuZ2UgPSBPRkZMSU5FX1NUT1JBR0VfREVGQVVMVF9USU1FX1JBTkdFX0RBWVNcblxuXHQvLyBOYXRpdmUgaW50ZXJmYWNlcyBhcmUgbGF6eSB0byBhbGxvdyB1cyB0byB1bmNvbmRpdGlvbmFsbHkgY29uc3RydWN0IHRoZSBTZXR0aW5nc01vZGVsXG5cdC8vIElmIHdlIGFyZSBub3QgaW4gYSBuYXRpdmUgY29udGV4dCwgdGhlbiB0aGV5IHNob3VsZCBuZXZlciBiZSBhY2Nlc3NlZFxuXHRjb25zdHJ1Y3Rvcihwcml2YXRlIHJlYWRvbmx5IHVzZXJDb250cm9sbGVyOiBVc2VyQ29udHJvbGxlciwgcHJpdmF0ZSByZWFkb25seSBkZXZpY2VDb25maWc6IERldmljZUNvbmZpZykge31cblxuXHRhdmFpbGFibGUoKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIHRoaXMuX2lzSW5pdGlhbGl6ZWQgJiYgaXNPZmZsaW5lU3RvcmFnZUF2YWlsYWJsZSgpICYmICEhdGhpcy5pc0VuYWJsZWRcblx0fVxuXG5cdHByaXZhdGUgYXNzZXJ0QXZhaWxhYmxlKCkge1xuXHRcdGFzc2VydCh0aGlzLmF2YWlsYWJsZSgpLCBcIk5vdCBpbml0aWFsaXplZCBvciBub3QgYXZhaWxhYmxlXCIpXG5cdH1cblxuXHQvKipcblx0ICogZ2V0IHN0b3JlZCB0aW1lIHJhbmdlLCB3aWxsIGVycm9yIG91dCBpZiBvZmZsaW5lU3RvcmFnZSBpc24ndCBhdmFpbGFibGUuXG5cdCAqIGlmIHRoZSB1c2VyIGFjY291bnQgaXMgZnJlZSwgYWx3YXlzIHJldHVybnMgdGhlIGRlZmF1bHQgdGltZSByYW5nZSBhbmRcblx0ICogcmVzZXRzIHRoZSBzdG9yZWQgdmFsdWUgaWYgaXQncyBkaWZmZXJlbnQgZnJvbSB0aGUgZGVmYXVsdC5cblx0ICovXG5cdGdldFRpbWVSYW5nZSgpOiBudW1iZXIge1xuXHRcdHRoaXMuYXNzZXJ0QXZhaWxhYmxlKClcblx0XHRpZiAodGhpcy51c2VyQ29udHJvbGxlci5pc0ZyZWVBY2NvdW50KCkgJiYgdGhpcy50aW1lUmFuZ2UgIT09IE9GRkxJTkVfU1RPUkFHRV9ERUZBVUxUX1RJTUVfUkFOR0VfREFZUykge1xuXHRcdFx0dGhpcy5zZXRUaW1lUmFuZ2UoT0ZGTElORV9TVE9SQUdFX0RFRkFVTFRfVElNRV9SQU5HRV9EQVlTKS5jYXRjaCgoZSkgPT4gY29uc29sZS5sb2coXCJlcnJvciB3aGlsZSByZXNldHRpbmcgc3RvcmFnZSB0aW1lIHJhbmdlOlwiLCBlKSlcblx0XHRcdHRoaXMudGltZVJhbmdlID0gT0ZGTElORV9TVE9SQUdFX0RFRkFVTFRfVElNRV9SQU5HRV9EQVlTXG5cdFx0XHRyZXR1cm4gT0ZGTElORV9TVE9SQUdFX0RFRkFVTFRfVElNRV9SQU5HRV9EQVlTXG5cdFx0fVxuXHRcdHJldHVybiB0aGlzLnRpbWVSYW5nZVxuXHR9XG5cblx0YXN5bmMgc2V0VGltZVJhbmdlKGRheXM6IG51bWJlcik6IFByb21pc2U8dm9pZD4ge1xuXHRcdHRoaXMuYXNzZXJ0QXZhaWxhYmxlKClcblx0XHRhd2FpdCB0aGlzLmRldmljZUNvbmZpZy5zZXRPZmZsaW5lVGltZVJhbmdlRGF5cyh0aGlzLnVzZXJDb250cm9sbGVyLnVzZXJJZCwgZGF5cylcblx0XHR0aGlzLnRpbWVSYW5nZSA9IGRheXNcblx0fVxuXG5cdGFzeW5jIGluaXQoKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0dGhpcy5pc0VuYWJsZWQgPSBpc09mZmxpbmVTdG9yYWdlQXZhaWxhYmxlKClcblxuXHRcdGlmICh0aGlzLmlzRW5hYmxlZCkge1xuXHRcdFx0Y29uc3Qgc3RvcmVkID0gdGhpcy5kZXZpY2VDb25maWcuZ2V0T2ZmbGluZVRpbWVSYW5nZURheXModGhpcy51c2VyQ29udHJvbGxlci51c2VySWQpXG5cdFx0XHRpZiAoc3RvcmVkICE9IG51bGwpIHtcblx0XHRcdFx0dGhpcy50aW1lUmFuZ2UgPSBzdG9yZWRcblx0XHRcdH1cblx0XHR9XG5cblx0XHR0aGlzLl9pc0luaXRpYWxpemVkID0gdHJ1ZVxuXHR9XG59XG4iLCJpbXBvcnQgbSwgeyBDaGlsZHJlbiB9IGZyb20gXCJtaXRocmlsXCJcbmltcG9ydCB7IGFzc2VydE1haW5Pck5vZGUsIGlzQXBwIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9hcGkvY29tbW9uL0VudlwiXG5pbXBvcnQgeyBsYW5nIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9taXNjL0xhbmd1YWdlVmlld01vZGVsXCJcbmltcG9ydCB0eXBlIHsgTWFpbGJveEdyb3VwUm9vdCwgTWFpbGJveFByb3BlcnRpZXMsIE91dE9mT2ZmaWNlTm90aWZpY2F0aW9uLCBUdXRhbm90YVByb3BlcnRpZXMgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2FwaS9lbnRpdGllcy90dXRhbm90YS9UeXBlUmVmcy5qc1wiXG5pbXBvcnQge1xuXHRNYWlsYm94UHJvcGVydGllc1R5cGVSZWYsXG5cdE1haWxGb2xkZXJUeXBlUmVmLFxuXHRPdXRPZk9mZmljZU5vdGlmaWNhdGlvblR5cGVSZWYsXG5cdFR1dGFub3RhUHJvcGVydGllc1R5cGVSZWYsXG59IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL2VudGl0aWVzL3R1dGFub3RhL1R5cGVSZWZzLmpzXCJcbmltcG9ydCB7IENvbnN0LCBGZWF0dXJlVHlwZSwgSW5ib3hSdWxlVHlwZSwgT3BlcmF0aW9uVHlwZSwgUmVwb3J0TW92ZWRNYWlsc1R5cGUgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2FwaS9jb21tb24vVHV0YW5vdGFDb25zdGFudHNcIlxuaW1wb3J0IHsgYXNzZXJ0Tm90TnVsbCwgY2FwaXRhbGl6ZUZpcnN0TGV0dGVyLCBkZWZlciwgTGF6eUxvYWRlZCwgbm9PcCwgb2ZDbGFzcywgcHJvbWlzZU1hcCB9IGZyb20gXCJAdHV0YW8vdHV0YW5vdGEtdXRpbHNcIlxuaW1wb3J0IHsgZ2V0SW5ib3hSdWxlVHlwZU5hbWUgfSBmcm9tIFwiLi4vbWFpbC9tb2RlbC9JbmJveFJ1bGVIYW5kbGVyXCJcbmltcG9ydCB7IE1haWxBZGRyZXNzVGFibGUgfSBmcm9tIFwiLi4vLi4vY29tbW9uL3NldHRpbmdzL21haWxhZGRyZXNzL01haWxBZGRyZXNzVGFibGUuanNcIlxuaW1wb3J0IHsgRGlhbG9nIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvYmFzZS9EaWFsb2dcIlxuaW1wb3J0IHsgSWNvbnMgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2d1aS9iYXNlL2ljb25zL0ljb25zXCJcbmltcG9ydCB7IHNob3dQcm9ncmVzc0RpYWxvZyB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL2RpYWxvZ3MvUHJvZ3Jlc3NEaWFsb2dcIlxuaW1wb3J0IHR5cGUgeyBNYWlsYm94RGV0YWlsIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9tYWlsRnVuY3Rpb25hbGl0eS9NYWlsYm94TW9kZWwuanNcIlxuaW1wb3J0IHN0cmVhbSBmcm9tIFwibWl0aHJpbC9zdHJlYW1cIlxuaW1wb3J0IFN0cmVhbSBmcm9tIFwibWl0aHJpbC9zdHJlYW1cIlxuXG5pbXBvcnQgdHlwZSB7IERyb3BEb3duU2VsZWN0b3JBdHRycyB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL2Jhc2UvRHJvcERvd25TZWxlY3Rvci5qc1wiXG5pbXBvcnQgeyBEcm9wRG93blNlbGVjdG9yIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvYmFzZS9Ecm9wRG93blNlbGVjdG9yLmpzXCJcbmltcG9ydCB0eXBlIHsgVGV4dEZpZWxkQXR0cnMgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2d1aS9iYXNlL1RleHRGaWVsZC5qc1wiXG5pbXBvcnQgeyBUZXh0RmllbGQsIFRleHRGaWVsZFR5cGUgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2d1aS9iYXNlL1RleHRGaWVsZC5qc1wiXG5pbXBvcnQgdHlwZSB7IFRhYmxlQXR0cnMsIFRhYmxlTGluZUF0dHJzIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvYmFzZS9UYWJsZS5qc1wiXG5pbXBvcnQgeyBDb2x1bW5XaWR0aCwgY3JlYXRlUm93QWN0aW9ucywgVGFibGUgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2d1aS9iYXNlL1RhYmxlLmpzXCJcbmltcG9ydCAqIGFzIEFkZEluYm94UnVsZURpYWxvZyBmcm9tIFwiLi9BZGRJbmJveFJ1bGVEaWFsb2dcIlxuaW1wb3J0IHsgY3JlYXRlSW5ib3hSdWxlVGVtcGxhdGUgfSBmcm9tIFwiLi9BZGRJbmJveFJ1bGVEaWFsb2dcIlxuaW1wb3J0IHsgRXhwYW5kZXJCdXR0b24sIEV4cGFuZGVyUGFuZWwgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2d1aS9iYXNlL0V4cGFuZGVyXCJcbmltcG9ydCB7IEluZGV4aW5nTm90U3VwcG9ydGVkRXJyb3IgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2FwaS9jb21tb24vZXJyb3IvSW5kZXhpbmdOb3RTdXBwb3J0ZWRFcnJvclwiXG5pbXBvcnQgeyBMb2NrZWRFcnJvciB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL2NvbW1vbi9lcnJvci9SZXN0RXJyb3JcIlxuaW1wb3J0IHsgc2hvd0VkaXRPdXRPZk9mZmljZU5vdGlmaWNhdGlvbkRpYWxvZyB9IGZyb20gXCIuL0VkaXRPdXRPZk9mZmljZU5vdGlmaWNhdGlvbkRpYWxvZ1wiXG5pbXBvcnQgeyBmb3JtYXRBY3RpdmF0ZVN0YXRlLCBsb2FkT3V0T2ZPZmZpY2VOb3RpZmljYXRpb24gfSBmcm9tIFwiLi4vLi4vY29tbW9uL21pc2MvT3V0T2ZPZmZpY2VOb3RpZmljYXRpb25VdGlsc1wiXG5pbXBvcnQgeyBnZXRTaWduYXR1cmVUeXBlLCBzaG93IGFzIHNob3dFZGl0U2lnbmF0dXJlRGlhbG9nIH0gZnJvbSBcIi4vRWRpdFNpZ25hdHVyZURpYWxvZ1wiXG5pbXBvcnQgeyBPZmZsaW5lU3RvcmFnZVNldHRpbmdzTW9kZWwgfSBmcm9tIFwiLi9PZmZsaW5lU3RvcmFnZVNldHRpbmdzXCJcbmltcG9ydCB7IHNob3dOb3RBdmFpbGFibGVGb3JGcmVlRGlhbG9nIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9taXNjL1N1YnNjcmlwdGlvbkRpYWxvZ3NcIlxuaW1wb3J0IHsgZGV2aWNlQ29uZmlnLCBMaXN0QXV0b1NlbGVjdEJlaGF2aW9yIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9taXNjL0RldmljZUNvbmZpZ1wiXG5pbXBvcnQgeyBJY29uQnV0dG9uLCBJY29uQnV0dG9uQXR0cnMgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2d1aS9iYXNlL0ljb25CdXR0b24uanNcIlxuaW1wb3J0IHsgQnV0dG9uU2l6ZSB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL2Jhc2UvQnV0dG9uU2l6ZS5qc1wiXG5pbXBvcnQgeyBnZXRSZXBvcnRNb3ZlZE1haWxzVHlwZSB9IGZyb20gXCIuLi8uLi9jb21tb24vbWlzYy9NYWlsYm94UHJvcGVydGllc1V0aWxzLmpzXCJcbmltcG9ydCB7IE1haWxBZGRyZXNzVGFibGVNb2RlbCB9IGZyb20gXCIuLi8uLi9jb21tb24vc2V0dGluZ3MvbWFpbGFkZHJlc3MvTWFpbEFkZHJlc3NUYWJsZU1vZGVsLmpzXCJcbmltcG9ydCB7IGdldEVuYWJsZWRNYWlsQWRkcmVzc2VzRm9yR3JvdXBJbmZvIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9hcGkvY29tbW9uL3V0aWxzL0dyb3VwVXRpbHMuanNcIlxuaW1wb3J0IHsgZm9ybWF0U3RvcmFnZVNpemUgfSBmcm9tIFwiLi4vLi4vY29tbW9uL21pc2MvRm9ybWF0dGVyLmpzXCJcbmltcG9ydCB7IEN1c3RvbWVySW5mbyB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL2VudGl0aWVzL3N5cy9UeXBlUmVmcy5qc1wiXG5pbXBvcnQgeyBFbnRpdHlVcGRhdGVEYXRhLCBpc1VwZGF0ZUZvclR5cGVSZWYgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2FwaS9jb21tb24vdXRpbHMvRW50aXR5VXBkYXRlVXRpbHMuanNcIlxuaW1wb3J0IHsgZ2V0TWFpbEFkZHJlc3NEaXNwbGF5VGV4dCB9IGZyb20gXCIuLi8uLi9jb21tb24vbWFpbEZ1bmN0aW9uYWxpdHkvU2hhcmVkTWFpbFV0aWxzLmpzXCJcbmltcG9ydCB7IFVwZGF0YWJsZVNldHRpbmdzVmlld2VyIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9zZXR0aW5ncy9JbnRlcmZhY2VzLmpzXCJcbmltcG9ydCB7IG1haWxMb2NhdG9yIH0gZnJvbSBcIi4uL21haWxMb2NhdG9yLmpzXCJcbmltcG9ydCB7IGdldERlZmF1bHRTZW5kZXJGcm9tVXNlciwgZ2V0Rm9sZGVyTmFtZSB9IGZyb20gXCIuLi9tYWlsL21vZGVsL01haWxVdGlscy5qc1wiXG5pbXBvcnQgeyBlbGVtZW50SWRQYXJ0IH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9hcGkvY29tbW9uL3V0aWxzL0VudGl0eVV0aWxzLmpzXCJcblxuYXNzZXJ0TWFpbk9yTm9kZSgpXG5cbmV4cG9ydCBjbGFzcyBNYWlsU2V0dGluZ3NWaWV3ZXIgaW1wbGVtZW50cyBVcGRhdGFibGVTZXR0aW5nc1ZpZXdlciB7XG5cdF9zaWduYXR1cmU6IFN0cmVhbTxzdHJpbmc+XG5cdF9tYWlsYm94UHJvcGVydGllczogTGF6eUxvYWRlZDxNYWlsYm94UHJvcGVydGllcz5cblx0X3JlcG9ydE1vdmVkTWFpbHM6IFJlcG9ydE1vdmVkTWFpbHNUeXBlXG5cdF9kZWZhdWx0U2VuZGVyOiBzdHJpbmdcblx0X2RlZmF1bHRVbmNvbmZpZGVudGlhbDogYm9vbGVhbiB8IG51bGxcblx0X3NlbmRQbGFpbnRleHQ6IGJvb2xlYW4gfCBudWxsXG5cdF9ub0F1dG9tYXRpY0NvbnRhY3RzOiBib29sZWFuIHwgbnVsbFxuXHRfZW5hYmxlTWFpbEluZGV4aW5nOiBib29sZWFuIHwgbnVsbFxuXHRfaW5ib3hSdWxlc1RhYmxlTGluZXM6IFN0cmVhbTxBcnJheTxUYWJsZUxpbmVBdHRycz4+XG5cdF9pbmJveFJ1bGVzRXhwYW5kZWQ6IFN0cmVhbTxib29sZWFuPlxuXHRfaW5kZXhTdGF0ZVdhdGNoOiBTdHJlYW08YW55PiB8IG51bGxcblx0X291dE9mT2ZmaWNlTm90aWZpY2F0aW9uOiBMYXp5TG9hZGVkPE91dE9mT2ZmaWNlTm90aWZpY2F0aW9uIHwgbnVsbD5cblx0X291dE9mT2ZmaWNlU3RhdHVzOiBTdHJlYW08c3RyaW5nPiAvLyBzdG9yZXMgdGhlIHN0YXR1cyBsYWJlbCwgYmFzZWQgb24gd2hldGhlciB0aGUgbm90aWZpY2F0aW9uIGlzLyBvciB3aWxsIHJlYWxseSBiZSBhY3RpdmF0ZWQgKGNoZWNraW5nIHN0YXJ0IHRpbWUvIGVuZCB0aW1lKVxuXHRwcml2YXRlIF9zdG9yYWdlRmllbGRWYWx1ZTogU3RyZWFtPHN0cmluZz5cblx0cHJpdmF0ZSBjdXN0b21lckluZm86IEN1c3RvbWVySW5mbyB8IG51bGxcblx0cHJpdmF0ZSBtYWlsQWRkcmVzc1RhYmxlTW9kZWw6IE1haWxBZGRyZXNzVGFibGVNb2RlbCB8IG51bGwgPSBudWxsXG5cdHByaXZhdGUgbWFpbEFkZHJlc3NUYWJsZUV4cGFuZGVkOiBib29sZWFuXG5cdHByaXZhdGUgb2ZmbGluZVN0b3JhZ2VTZXR0aW5ncyA9IG5ldyBPZmZsaW5lU3RvcmFnZVNldHRpbmdzTW9kZWwobWFpbExvY2F0b3IubG9naW5zLmdldFVzZXJDb250cm9sbGVyKCksIGRldmljZUNvbmZpZylcblxuXHRjb25zdHJ1Y3RvcigpIHtcblx0XHR0aGlzLl9kZWZhdWx0U2VuZGVyID0gZ2V0RGVmYXVsdFNlbmRlckZyb21Vc2VyKG1haWxMb2NhdG9yLmxvZ2lucy5nZXRVc2VyQ29udHJvbGxlcigpKVxuXHRcdHRoaXMuX3NpZ25hdHVyZSA9IHN0cmVhbShnZXRTaWduYXR1cmVUeXBlKG1haWxMb2NhdG9yLmxvZ2lucy5nZXRVc2VyQ29udHJvbGxlcigpLnByb3BzKS5uYW1lKVxuXHRcdHRoaXMuX3JlcG9ydE1vdmVkTWFpbHMgPSBnZXRSZXBvcnRNb3ZlZE1haWxzVHlwZShudWxsKSAvLyBsb2FkZWQgbGF0ZXJcblxuXHRcdHRoaXMuX2RlZmF1bHRVbmNvbmZpZGVudGlhbCA9IG1haWxMb2NhdG9yLmxvZ2lucy5nZXRVc2VyQ29udHJvbGxlcigpLnByb3BzLmRlZmF1bHRVbmNvbmZpZGVudGlhbFxuXHRcdHRoaXMuX3NlbmRQbGFpbnRleHQgPSBtYWlsTG9jYXRvci5sb2dpbnMuZ2V0VXNlckNvbnRyb2xsZXIoKS5wcm9wcy5zZW5kUGxhaW50ZXh0T25seVxuXHRcdHRoaXMuX25vQXV0b21hdGljQ29udGFjdHMgPSBtYWlsTG9jYXRvci5sb2dpbnMuZ2V0VXNlckNvbnRyb2xsZXIoKS5wcm9wcy5ub0F1dG9tYXRpY0NvbnRhY3RzXG5cdFx0dGhpcy5fZW5hYmxlTWFpbEluZGV4aW5nID0gbWFpbExvY2F0b3Iuc2VhcmNoLmluZGV4U3RhdGUoKS5tYWlsSW5kZXhFbmFibGVkXG5cdFx0dGhpcy5faW5ib3hSdWxlc0V4cGFuZGVkID0gc3RyZWFtPGJvb2xlYW4+KGZhbHNlKVxuXHRcdHRoaXMubWFpbEFkZHJlc3NUYWJsZUV4cGFuZGVkID0gZmFsc2Vcblx0XHR0aGlzLl9pbmJveFJ1bGVzVGFibGVMaW5lcyA9IHN0cmVhbTxBcnJheTxUYWJsZUxpbmVBdHRycz4+KFtdKVxuXHRcdHRoaXMuX291dE9mT2ZmaWNlU3RhdHVzID0gc3RyZWFtKGxhbmcuZ2V0KFwiZGVhY3RpdmF0ZWRfbGFiZWxcIikpXG5cdFx0dGhpcy5faW5kZXhTdGF0ZVdhdGNoID0gbnVsbFxuXHRcdC8vIG5vcm1hbGx5IHdlIHdvdWxkIG1heWJlIGxpa2UgdG8gZ2V0IGl0IGFzIGFuIGFyZ3VtZW50IGJ1dCB0aGVzZSB2aWV3ZXJzIGFyZSBjcmVhdGVkIGluIGFuIG9kZCB3YXlcblx0XHRtYWlsTG9jYXRvci5tYWlsQWRkcmVzc1RhYmxlTW9kZWxGb3JPd25NYWlsYm94KCkudGhlbigobW9kZWwpID0+IHtcblx0XHRcdHRoaXMubWFpbEFkZHJlc3NUYWJsZU1vZGVsID0gbW9kZWxcblx0XHRcdG0ucmVkcmF3KClcblx0XHR9KVxuXHRcdG0ucmVkcmF3KClcblxuXHRcdHRoaXMuX3VwZGF0ZUluYm94UnVsZXMobWFpbExvY2F0b3IubG9naW5zLmdldFVzZXJDb250cm9sbGVyKCkucHJvcHMpXG5cblx0XHR0aGlzLl9tYWlsYm94UHJvcGVydGllcyA9IG5ldyBMYXp5TG9hZGVkKGFzeW5jICgpID0+IHtcblx0XHRcdGNvbnN0IG1haWxib3hHcm91cFJvb3QgPSBhd2FpdCB0aGlzLmdldE1haWxib3hHcm91cFJvb3QoKVxuXHRcdFx0cmV0dXJuIG1haWxMb2NhdG9yLm1haWxib3hNb2RlbC5nZXRNYWlsYm94UHJvcGVydGllcyhtYWlsYm94R3JvdXBSb290KVxuXHRcdH0pXG5cblx0XHR0aGlzLl91cGRhdGVNYWlsYm94UHJvcGVydGllc1NldHRpbmdzKClcblxuXHRcdHRoaXMuX291dE9mT2ZmaWNlTm90aWZpY2F0aW9uID0gbmV3IExhenlMb2FkZWQoKCkgPT4gbG9hZE91dE9mT2ZmaWNlTm90aWZpY2F0aW9uKCksIG51bGwpXG5cblx0XHR0aGlzLl9vdXRPZk9mZmljZU5vdGlmaWNhdGlvbi5nZXRBc3luYygpLnRoZW4oKCkgPT4gdGhpcy5fdXBkYXRlT3V0T2ZPZmZpY2VOb3RpZmljYXRpb24oKSlcblxuXHRcdHRoaXMuY3VzdG9tZXJJbmZvID0gbnVsbFxuXHRcdHRoaXMuX3N0b3JhZ2VGaWVsZFZhbHVlID0gc3RyZWFtKFwiXCIpXG5cblx0XHR0aGlzLm9mZmxpbmVTdG9yYWdlU2V0dGluZ3MuaW5pdCgpLnRoZW4oKCkgPT4gbS5yZWRyYXcoKSlcblx0fVxuXG5cdGFzeW5jIG9uaW5pdCgpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHR0aGlzLmN1c3RvbWVySW5mbyA9IGF3YWl0IG1haWxMb2NhdG9yLmxvZ2lucy5nZXRVc2VyQ29udHJvbGxlcigpLmxvYWRDdXN0b21lckluZm8oKVxuXHRcdHRoaXMudXBkYXRlU3RvcmFnZUZpZWxkKHRoaXMuY3VzdG9tZXJJbmZvKS50aGVuKCgpID0+IG0ucmVkcmF3KCkpXG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIGdldE1haWxib3hHcm91cFJvb3QoKTogUHJvbWlzZTxNYWlsYm94R3JvdXBSb290PiB7XG5cdFx0Ly8gRm9yIG5vdyB3ZSBhc3N1bWUgdXNlciBtYWlsYm94LCBpbiB0aGUgZnV0dXJlIHdlIHNob3VsZCBzcGVjaWZ5IHdoaWNoIG1haWxib3ggd2UgYXJlIGNvbmZpZ3VyaW5nXG5cdFx0Y29uc3QgeyBtYWlsYm94R3JvdXBSb290IH0gPSBhd2FpdCBtYWlsTG9jYXRvci5tYWlsYm94TW9kZWwuZ2V0VXNlck1haWxib3hEZXRhaWxzKClcblx0XHRyZXR1cm4gbWFpbGJveEdyb3VwUm9vdFxuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyB1cGRhdGVTdG9yYWdlRmllbGQoY3VzdG9tZXJJbmZvOiBDdXN0b21lckluZm8pOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRjb25zdCB1c2VyID0gbWFpbExvY2F0b3IubG9naW5zLmdldFVzZXJDb250cm9sbGVyKCkudXNlclxuXHRcdGNvbnN0IHVzZWRTdG9yYWdlID0gZm9ybWF0U3RvcmFnZVNpemUoTnVtYmVyKGF3YWl0IG1haWxMb2NhdG9yLnVzZXJNYW5hZ2VtZW50RmFjYWRlLnJlYWRVc2VkVXNlclN0b3JhZ2UodXNlcikpKVxuXHRcdGNvbnN0IHRvdGFsU3RvcmFnZSA9IGZvcm1hdFN0b3JhZ2VTaXplKE51bWJlcihjdXN0b21lckluZm8ucGVyVXNlclN0b3JhZ2VDYXBhY2l0eSkgKiBDb25zdC5NRU1PUllfR0JfRkFDVE9SKVxuXHRcdHRoaXMuX3N0b3JhZ2VGaWVsZFZhbHVlKFxuXHRcdFx0bGFuZy5nZXQoXCJhbW91bnRVc2VkT2ZfbGFiZWxcIiwge1xuXHRcdFx0XHRcInthbW91bnR9XCI6IHVzZWRTdG9yYWdlLFxuXHRcdFx0XHRcInt0b3RhbEFtb3VudH1cIjogdG90YWxTdG9yYWdlLFxuXHRcdFx0fSksXG5cdFx0KVxuXHR9XG5cblx0dmlldygpOiBDaGlsZHJlbiB7XG5cdFx0dGhpcy5fZGVmYXVsdFNlbmRlciA9IGdldERlZmF1bHRTZW5kZXJGcm9tVXNlcihtYWlsTG9jYXRvci5sb2dpbnMuZ2V0VXNlckNvbnRyb2xsZXIoKSlcblx0XHRjb25zdCBkZWZhdWx0U2VuZGVyQXR0cnM6IERyb3BEb3duU2VsZWN0b3JBdHRyczxzdHJpbmc+ID0ge1xuXHRcdFx0bGFiZWw6IFwiZGVmYXVsdFNlbmRlck1haWxBZGRyZXNzX2xhYmVsXCIsXG5cdFx0XHRpdGVtczogZ2V0RW5hYmxlZE1haWxBZGRyZXNzZXNGb3JHcm91cEluZm8obWFpbExvY2F0b3IubG9naW5zLmdldFVzZXJDb250cm9sbGVyKCkudXNlckdyb3VwSW5mbylcblx0XHRcdFx0LnNvcnQoKVxuXHRcdFx0XHQubWFwKChhKSA9PiAoe1xuXHRcdFx0XHRcdG5hbWU6IGEsXG5cdFx0XHRcdFx0dmFsdWU6IGEsXG5cdFx0XHRcdH0pKSxcblx0XHRcdHNlbGVjdGVkVmFsdWU6IHRoaXMuX2RlZmF1bHRTZW5kZXIsXG5cdFx0XHRzZWxlY3RlZFZhbHVlRGlzcGxheTogZ2V0TWFpbEFkZHJlc3NEaXNwbGF5VGV4dChcblx0XHRcdFx0dGhpcy5tYWlsQWRkcmVzc1RhYmxlTW9kZWw/LmFkZHJlc3NlcygpLmZpbmQoKHsgYWRkcmVzcyB9KSA9PiBhZGRyZXNzID09PSB0aGlzLl9kZWZhdWx0U2VuZGVyKT8ubmFtZSA/PyBcIlwiLFxuXHRcdFx0XHR0aGlzLl9kZWZhdWx0U2VuZGVyLFxuXHRcdFx0XHRmYWxzZSxcblx0XHRcdCksXG5cdFx0XHRzZWxlY3Rpb25DaGFuZ2VkSGFuZGxlcjogKGRlZmF1bHRTZW5kZXJBZGRyZXNzKSA9PiB7XG5cdFx0XHRcdG1haWxMb2NhdG9yLmxvZ2lucy5nZXRVc2VyQ29udHJvbGxlcigpLnByb3BzLmRlZmF1bHRTZW5kZXIgPSBkZWZhdWx0U2VuZGVyQWRkcmVzc1xuXHRcdFx0XHRtYWlsTG9jYXRvci5lbnRpdHlDbGllbnQudXBkYXRlKG1haWxMb2NhdG9yLmxvZ2lucy5nZXRVc2VyQ29udHJvbGxlcigpLnByb3BzKVxuXHRcdFx0fSxcblx0XHRcdGhlbHBMYWJlbDogKCkgPT4gbGFuZy5nZXQoXCJkZWZhdWx0U2VuZGVyTWFpbEFkZHJlc3NJbmZvX21zZ1wiKSxcblx0XHRcdGRyb3Bkb3duV2lkdGg6IDMwMCxcblx0XHR9XG5cblx0XHRjb25zdCBjaGFuZ2VTaWduYXR1cmVCdXR0b25BdHRyczogSWNvbkJ1dHRvbkF0dHJzID0ge1xuXHRcdFx0dGl0bGU6IFwidXNlckVtYWlsU2lnbmF0dXJlX2xhYmVsXCIsXG5cdFx0XHRjbGljazogKCkgPT4gc2hvd0VkaXRTaWduYXR1cmVEaWFsb2cobWFpbExvY2F0b3IubG9naW5zLmdldFVzZXJDb250cm9sbGVyKCkucHJvcHMpLFxuXHRcdFx0aWNvbjogSWNvbnMuRWRpdCxcblx0XHRcdHNpemU6IEJ1dHRvblNpemUuQ29tcGFjdCxcblx0XHR9XG5cdFx0Y29uc3Qgc2lnbmF0dXJlQXR0cnM6IFRleHRGaWVsZEF0dHJzID0ge1xuXHRcdFx0bGFiZWw6IFwidXNlckVtYWlsU2lnbmF0dXJlX2xhYmVsXCIsXG5cdFx0XHR2YWx1ZTogdGhpcy5fc2lnbmF0dXJlKCksXG5cdFx0XHRvbmlucHV0OiB0aGlzLl9zaWduYXR1cmUsXG5cdFx0XHRpc1JlYWRPbmx5OiB0cnVlLFxuXHRcdFx0aW5qZWN0aW9uc1JpZ2h0OiAoKSA9PiBbbShJY29uQnV0dG9uLCBjaGFuZ2VTaWduYXR1cmVCdXR0b25BdHRycyldLFxuXHRcdH1cblxuXHRcdGNvbnN0IGVkaXRPdXRPZk9mZmljZU5vdGlmaWNhdGlvbkJ1dHRvbkF0dHJzOiBJY29uQnV0dG9uQXR0cnMgPSB7XG5cdFx0XHR0aXRsZTogXCJvdXRPZk9mZmljZU5vdGlmaWNhdGlvbl90aXRsZVwiLFxuXHRcdFx0Y2xpY2s6ICgpID0+IHtcblx0XHRcdFx0dGhpcy5fb3V0T2ZPZmZpY2VOb3RpZmljYXRpb24uZ2V0QXN5bmMoKS50aGVuKChub3RpZmljYXRpb24pID0+IHNob3dFZGl0T3V0T2ZPZmZpY2VOb3RpZmljYXRpb25EaWFsb2cobm90aWZpY2F0aW9uKSlcblx0XHRcdH0sXG5cdFx0XHRpY29uOiBJY29ucy5FZGl0LFxuXHRcdFx0c2l6ZTogQnV0dG9uU2l6ZS5Db21wYWN0LFxuXHRcdH1cblxuXHRcdGNvbnN0IG91dE9mT2ZmaWNlQXR0cnM6IFRleHRGaWVsZEF0dHJzID0ge1xuXHRcdFx0bGFiZWw6IFwib3V0T2ZPZmZpY2VOb3RpZmljYXRpb25fdGl0bGVcIixcblx0XHRcdHZhbHVlOiB0aGlzLl9vdXRPZk9mZmljZVN0YXR1cygpLFxuXHRcdFx0b25pbnB1dDogdGhpcy5fb3V0T2ZPZmZpY2VTdGF0dXMsXG5cdFx0XHRpc1JlYWRPbmx5OiB0cnVlLFxuXHRcdFx0aW5qZWN0aW9uc1JpZ2h0OiAoKSA9PiBbbShJY29uQnV0dG9uLCBlZGl0T3V0T2ZPZmZpY2VOb3RpZmljYXRpb25CdXR0b25BdHRycyldLFxuXHRcdH1cblxuXHRcdGNvbnN0IGRlZmF1bHRVbmNvbmZpZGVudGlhbEF0dHJzOiBEcm9wRG93blNlbGVjdG9yQXR0cnM8Ym9vbGVhbj4gPSB7XG5cdFx0XHRsYWJlbDogXCJkZWZhdWx0RXh0ZXJuYWxEZWxpdmVyeV9sYWJlbFwiLFxuXHRcdFx0aXRlbXM6IFtcblx0XHRcdFx0e1xuXHRcdFx0XHRcdG5hbWU6IGxhbmcuZ2V0KFwiY29uZmlkZW50aWFsX2FjdGlvblwiKSxcblx0XHRcdFx0XHR2YWx1ZTogZmFsc2UsXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRuYW1lOiBsYW5nLmdldChcIm5vbkNvbmZpZGVudGlhbF9hY3Rpb25cIiksXG5cdFx0XHRcdFx0dmFsdWU6IHRydWUsXG5cdFx0XHRcdH0sXG5cdFx0XHRdLFxuXHRcdFx0c2VsZWN0ZWRWYWx1ZTogdGhpcy5fZGVmYXVsdFVuY29uZmlkZW50aWFsLFxuXHRcdFx0c2VsZWN0aW9uQ2hhbmdlZEhhbmRsZXI6ICh2KSA9PiB7XG5cdFx0XHRcdG1haWxMb2NhdG9yLmxvZ2lucy5nZXRVc2VyQ29udHJvbGxlcigpLnByb3BzLmRlZmF1bHRVbmNvbmZpZGVudGlhbCA9IHZcblx0XHRcdFx0bWFpbExvY2F0b3IuZW50aXR5Q2xpZW50LnVwZGF0ZShtYWlsTG9jYXRvci5sb2dpbnMuZ2V0VXNlckNvbnRyb2xsZXIoKS5wcm9wcylcblx0XHRcdH0sXG5cdFx0XHRoZWxwTGFiZWw6ICgpID0+IGxhbmcuZ2V0KFwiZGVmYXVsdEV4dGVybmFsRGVsaXZlcnlJbmZvX21zZ1wiKSxcblx0XHRcdGRyb3Bkb3duV2lkdGg6IDI1MCxcblx0XHR9XG5cdFx0Y29uc3Qgc2VuZFBsYWludGV4dEF0dHJzOiBEcm9wRG93blNlbGVjdG9yQXR0cnM8Ym9vbGVhbj4gPSB7XG5cdFx0XHRsYWJlbDogXCJleHRlcm5hbEZvcm1hdHRpbmdfbGFiZWxcIixcblx0XHRcdGhlbHBMYWJlbDogKCkgPT4gbGFuZy5nZXQoXCJleHRlcm5hbEZvcm1hdHRpbmdJbmZvX21zZ1wiKSxcblx0XHRcdGl0ZW1zOiBbXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRuYW1lOiBsYW5nLmdldChcImh0bWxfYWN0aW9uXCIpLFxuXHRcdFx0XHRcdHZhbHVlOiBmYWxzZSxcblx0XHRcdFx0fSxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdG5hbWU6IGxhbmcuZ2V0KFwicGxhaW50ZXh0X2FjdGlvblwiKSxcblx0XHRcdFx0XHR2YWx1ZTogdHJ1ZSxcblx0XHRcdFx0fSxcblx0XHRcdF0sXG5cdFx0XHRzZWxlY3RlZFZhbHVlOiB0aGlzLl9zZW5kUGxhaW50ZXh0LFxuXHRcdFx0c2VsZWN0aW9uQ2hhbmdlZEhhbmRsZXI6ICh2KSA9PiB7XG5cdFx0XHRcdG1haWxMb2NhdG9yLmxvZ2lucy5nZXRVc2VyQ29udHJvbGxlcigpLnByb3BzLnNlbmRQbGFpbnRleHRPbmx5ID0gdlxuXHRcdFx0XHRtYWlsTG9jYXRvci5lbnRpdHlDbGllbnQudXBkYXRlKG1haWxMb2NhdG9yLmxvZ2lucy5nZXRVc2VyQ29udHJvbGxlcigpLnByb3BzKVxuXHRcdFx0fSxcblx0XHRcdGRyb3Bkb3duV2lkdGg6IDI1MCxcblx0XHR9XG5cdFx0Y29uc3QgZW5hYmxlTWFpbEluZGV4aW5nQXR0cnM6IERyb3BEb3duU2VsZWN0b3JBdHRyczxib29sZWFuPiA9IHtcblx0XHRcdGxhYmVsOiBcInNlYXJjaE1haWxib3hfbGFiZWxcIixcblx0XHRcdGhlbHBMYWJlbDogKCkgPT4gbGFuZy5nZXQoXCJlbmFibGVTZWFyY2hNYWlsYm94X21zZ1wiKSxcblx0XHRcdGl0ZW1zOiBbXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRuYW1lOiBsYW5nLmdldChcImFjdGl2YXRlZF9sYWJlbFwiKSxcblx0XHRcdFx0XHR2YWx1ZTogdHJ1ZSxcblx0XHRcdFx0fSxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdG5hbWU6IGxhbmcuZ2V0KFwiZGVhY3RpdmF0ZWRfbGFiZWxcIiksXG5cdFx0XHRcdFx0dmFsdWU6IGZhbHNlLFxuXHRcdFx0XHR9LFxuXHRcdFx0XSxcblx0XHRcdHNlbGVjdGVkVmFsdWU6IHRoaXMuX2VuYWJsZU1haWxJbmRleGluZyxcblx0XHRcdHNlbGVjdGlvbkNoYW5nZWRIYW5kbGVyOiAobWFpbEluZGV4RW5hYmxlZCkgPT4ge1xuXHRcdFx0XHRpZiAobWFpbEluZGV4RW5hYmxlZCkge1xuXHRcdFx0XHRcdHNob3dQcm9ncmVzc0RpYWxvZyhcInBsZWFzZVdhaXRfbXNnXCIsIG1haWxMb2NhdG9yLmluZGV4ZXJGYWNhZGUuZW5hYmxlTWFpbEluZGV4aW5nKCkpLmNhdGNoKFxuXHRcdFx0XHRcdFx0b2ZDbGFzcyhJbmRleGluZ05vdFN1cHBvcnRlZEVycm9yLCAoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdERpYWxvZy5tZXNzYWdlKGlzQXBwKCkgPyBcInNlYXJjaERpc2FibGVkQXBwX21zZ1wiIDogXCJzZWFyY2hEaXNhYmxlZF9tc2dcIilcblx0XHRcdFx0XHRcdH0pLFxuXHRcdFx0XHRcdClcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRzaG93UHJvZ3Jlc3NEaWFsb2coXCJwbGVhc2VXYWl0X21zZ1wiLCBtYWlsTG9jYXRvci5pbmRleGVyRmFjYWRlLmRpc2FibGVNYWlsSW5kZXhpbmcoKSlcblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHRcdGRyb3Bkb3duV2lkdGg6IDI1MCxcblx0XHR9XG5cdFx0Y29uc3QgYmVoYXZpb3JBZnRlck1vdmVFbWFpbEFjdGlvbjogRHJvcERvd25TZWxlY3RvckF0dHJzPExpc3RBdXRvU2VsZWN0QmVoYXZpb3I+ID0ge1xuXHRcdFx0bGFiZWw6IFwiYmVoYXZpb3JBZnRlck1vdmluZ0VtYWlsX2xhYmVsXCIsXG5cdFx0XHRoZWxwTGFiZWw6ICgpID0+IFwiXCIsXG5cdFx0XHRpdGVtczogW1xuXHRcdFx0XHR7XG5cdFx0XHRcdFx0bmFtZTogbGFuZy5nZXQoXCJzaG93T2xkZXJfbGFiZWxcIiksXG5cdFx0XHRcdFx0dmFsdWU6IExpc3RBdXRvU2VsZWN0QmVoYXZpb3IuT0xERVIsXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRuYW1lOiBsYW5nLmdldChcInNob3dOZXdlcl9sYWJlbFwiKSxcblx0XHRcdFx0XHR2YWx1ZTogTGlzdEF1dG9TZWxlY3RCZWhhdmlvci5ORVdFUixcblx0XHRcdFx0fSxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdG5hbWU6IGxhbmcuZ2V0KFwic2hvd05vbmVfbGFiZWxcIiksXG5cdFx0XHRcdFx0dmFsdWU6IExpc3RBdXRvU2VsZWN0QmVoYXZpb3IuTk9ORSxcblx0XHRcdFx0fSxcblx0XHRcdF0sXG5cdFx0XHRzZWxlY3RlZFZhbHVlOiBkZXZpY2VDb25maWcuZ2V0TWFpbEF1dG9TZWxlY3RCZWhhdmlvcigpLFxuXHRcdFx0c2VsZWN0aW9uQ2hhbmdlZEhhbmRsZXI6IChiZWhhdmlvcikgPT4gZGV2aWNlQ29uZmlnLnNldE1haWxBdXRvU2VsZWN0QmVoYXZpb3IoYmVoYXZpb3IpLFxuXHRcdFx0ZHJvcGRvd25XaWR0aDogMjUwLFxuXHRcdH1cblx0XHRjb25zdCByZXBvcnRNb3ZlZE1haWxzQXR0cnMgPSB0aGlzLm1ha2VSZXBvcnRNb3ZlZE1haWxzRHJvcGRvd25BdHRycygpXG5cdFx0Y29uc3QgdGVtcGxhdGVSdWxlID0gY3JlYXRlSW5ib3hSdWxlVGVtcGxhdGUoSW5ib3hSdWxlVHlwZS5SRUNJUElFTlRfVE9fRVFVQUxTLCBcIlwiKVxuXHRcdGNvbnN0IGFkZEluYm94UnVsZUJ1dHRvbkF0dHJzOiBJY29uQnV0dG9uQXR0cnMgPSB7XG5cdFx0XHR0aXRsZTogXCJhZGRJbmJveFJ1bGVfYWN0aW9uXCIsXG5cdFx0XHRjbGljazogKCkgPT4gbWFpbExvY2F0b3IubWFpbGJveE1vZGVsLmdldFVzZXJNYWlsYm94RGV0YWlscygpLnRoZW4oKG1haWxib3hEZXRhaWxzKSA9PiBBZGRJbmJveFJ1bGVEaWFsb2cuc2hvdyhtYWlsYm94RGV0YWlscywgdGVtcGxhdGVSdWxlKSksXG5cdFx0XHRpY29uOiBJY29ucy5BZGQsXG5cdFx0XHRzaXplOiBCdXR0b25TaXplLkNvbXBhY3QsXG5cdFx0fVxuXHRcdGNvbnN0IGluYm94UnVsZXNUYWJsZUF0dHJzOiBUYWJsZUF0dHJzID0ge1xuXHRcdFx0Y29sdW1uSGVhZGluZzogW1wiaW5ib3hSdWxlRmllbGRfbGFiZWxcIiwgXCJpbmJveFJ1bGVWYWx1ZV9sYWJlbFwiLCBcImluYm94UnVsZVRhcmdldEZvbGRlcl9sYWJlbFwiXSxcblx0XHRcdGNvbHVtbldpZHRoczogW0NvbHVtbldpZHRoLlNtYWxsLCBDb2x1bW5XaWR0aC5MYXJnZXN0LCBDb2x1bW5XaWR0aC5TbWFsbF0sXG5cdFx0XHRzaG93QWN0aW9uQnV0dG9uQ29sdW1uOiB0cnVlLFxuXHRcdFx0YWRkQnV0dG9uQXR0cnM6IGFkZEluYm94UnVsZUJ1dHRvbkF0dHJzLFxuXHRcdFx0bGluZXM6IHRoaXMuX2luYm94UnVsZXNUYWJsZUxpbmVzKCksXG5cdFx0fVxuXHRcdGNvbnN0IGNvbnZlcnNhdGlvblZpZXdEcm9wZG93bkF0dHJzOiBEcm9wRG93blNlbGVjdG9yQXR0cnM8Ym9vbGVhbj4gPSB7XG5cdFx0XHRsYWJlbDogXCJjb252ZXJzYXRpb25WaWV3UHJlZl9sYWJlbFwiLFxuXHRcdFx0Ly8gc2hvdyBhbGwgbWVhbnMgXCJmYWxzZVwiIGJlY2F1c2UgdGhlIHByZWYgaXMgdG8gXCJkaXNhYmxlXCIgaXQsIGJ1dFxuXHRcdFx0Ly8gd2UgZGlzYWJsZWQgaXQgYXMgXCJlbmFibGVkXCJcblx0XHRcdGl0ZW1zOiBbXG5cdFx0XHRcdHsgbmFtZTogbGFuZy5nZXQoXCJzaG93QWxsTWFpbHNJblRocmVhZF9sYWJlbFwiKSwgdmFsdWU6IGZhbHNlIH0sXG5cdFx0XHRcdHsgbmFtZTogbGFuZy5nZXQoXCJzaG93T25seVNlbGVjdGVkTWFpbF9sYWJlbFwiKSwgdmFsdWU6IHRydWUgfSxcblx0XHRcdF0sXG5cdFx0XHRzZWxlY3RlZFZhbHVlOiBkZXZpY2VDb25maWcuZ2V0Q29udmVyc2F0aW9uVmlld1Nob3dPbmx5U2VsZWN0ZWRNYWlsKCksXG5cdFx0XHRzZWxlY3Rpb25DaGFuZ2VkSGFuZGxlcjogKGFyZzogYm9vbGVhbikgPT4ge1xuXHRcdFx0XHRkZXZpY2VDb25maWcuc2V0Q29udmVyc2F0aW9uVmlld1Nob3dPbmx5U2VsZWN0ZWRNYWlsKGFyZylcblx0XHRcdH0sXG5cdFx0XHRkcm9wZG93bldpZHRoOiAzNTAsXG5cdFx0fVxuXHRcdHJldHVybiBbXG5cdFx0XHRtKFxuXHRcdFx0XHRcIiN1c2VyLXNldHRpbmdzLmZpbGwtYWJzb2x1dGUuc2Nyb2xsLnBsci1sLnBiLXhsXCIsXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRyb2xlOiBcImdyb3VwXCIsXG5cdFx0XHRcdFx0b25jcmVhdGU6ICgpID0+IHtcblx0XHRcdFx0XHRcdHRoaXMuX2luZGV4U3RhdGVXYXRjaCA9IG1haWxMb2NhdG9yLnNlYXJjaC5pbmRleFN0YXRlLm1hcCgobmV3VmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdFx0dGhpcy5fZW5hYmxlTWFpbEluZGV4aW5nID0gbmV3VmFsdWUubWFpbEluZGV4RW5hYmxlZFxuXG5cdFx0XHRcdFx0XHRcdG0ucmVkcmF3KClcblx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRvbnJlbW92ZTogKCkgPT4ge1xuXHRcdFx0XHRcdFx0aWYgKHRoaXMuX2luZGV4U3RhdGVXYXRjaCkge1xuXHRcdFx0XHRcdFx0XHR0aGlzLl9pbmRleFN0YXRlV2F0Y2guZW5kKHRydWUpXG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0fSxcblx0XHRcdFx0W1xuXHRcdFx0XHRcdHRoaXMuY3VzdG9tZXJJbmZvICE9IG51bGwgJiYgTnVtYmVyKHRoaXMuY3VzdG9tZXJJbmZvLnBlclVzZXJTdG9yYWdlQ2FwYWNpdHkpID4gMFxuXHRcdFx0XHRcdFx0PyBbXG5cdFx0XHRcdFx0XHRcdFx0bShcIi5oNC5tdC1sXCIsIGxhbmcuZ2V0KFwic3RvcmFnZUNhcGFjaXR5X2xhYmVsXCIpKSxcblx0XHRcdFx0XHRcdFx0XHRtKFRleHRGaWVsZCwge1xuXHRcdFx0XHRcdFx0XHRcdFx0bGFiZWw6IFwic3RvcmFnZUNhcGFjaXR5X2xhYmVsXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHR2YWx1ZTogdGhpcy5fc3RvcmFnZUZpZWxkVmFsdWUoKSxcblx0XHRcdFx0XHRcdFx0XHRcdG9uaW5wdXQ6IHRoaXMuX3N0b3JhZ2VGaWVsZFZhbHVlLFxuXHRcdFx0XHRcdFx0XHRcdFx0aXNSZWFkT25seTogdHJ1ZSxcblx0XHRcdFx0XHRcdFx0XHR9KSxcblx0XHRcdFx0XHRcdCAgXVxuXHRcdFx0XHRcdFx0OiBudWxsLFxuXHRcdFx0XHRcdG0oXCIuaDQubXQtbFwiLCBsYW5nLmdldChcImdlbmVyYWxfbGFiZWxcIikpLFxuXHRcdFx0XHRcdG0oRHJvcERvd25TZWxlY3RvciwgY29udmVyc2F0aW9uVmlld0Ryb3Bkb3duQXR0cnMpLFxuXHRcdFx0XHRcdG0oRHJvcERvd25TZWxlY3RvciwgZW5hYmxlTWFpbEluZGV4aW5nQXR0cnMpLFxuXHRcdFx0XHRcdG0oRHJvcERvd25TZWxlY3RvciwgYmVoYXZpb3JBZnRlck1vdmVFbWFpbEFjdGlvbiksXG5cdFx0XHRcdFx0bShcIi5oNC5tdC1sXCIsIGxhbmcuZ2V0KFwiZW1haWxTZW5kaW5nX2xhYmVsXCIpKSxcblx0XHRcdFx0XHRtKERyb3BEb3duU2VsZWN0b3IsIGRlZmF1bHRTZW5kZXJBdHRycyksXG5cdFx0XHRcdFx0bShUZXh0RmllbGQsIHNpZ25hdHVyZUF0dHJzKSxcblx0XHRcdFx0XHRtYWlsTG9jYXRvci5sb2dpbnMuaXNFbmFibGVkKEZlYXR1cmVUeXBlLkludGVybmFsQ29tbXVuaWNhdGlvbikgPyBudWxsIDogbShEcm9wRG93blNlbGVjdG9yLCBkZWZhdWx0VW5jb25maWRlbnRpYWxBdHRycyksXG5cdFx0XHRcdFx0bWFpbExvY2F0b3IubG9naW5zLmlzRW5hYmxlZChGZWF0dXJlVHlwZS5JbnRlcm5hbENvbW11bmljYXRpb24pID8gbnVsbCA6IG0oRHJvcERvd25TZWxlY3Rvciwgc2VuZFBsYWludGV4dEF0dHJzKSxcblx0XHRcdFx0XHRtKERyb3BEb3duU2VsZWN0b3IsIHJlcG9ydE1vdmVkTWFpbHNBdHRycyksXG5cdFx0XHRcdFx0bShUZXh0RmllbGQsIG91dE9mT2ZmaWNlQXR0cnMpLFxuXHRcdFx0XHRcdHRoaXMucmVuZGVyTG9jYWxEYXRhU2VjdGlvbigpLFxuXHRcdFx0XHRcdHRoaXMubWFpbEFkZHJlc3NUYWJsZU1vZGVsXG5cdFx0XHRcdFx0XHQ/IG0oTWFpbEFkZHJlc3NUYWJsZSwge1xuXHRcdFx0XHRcdFx0XHRcdG1vZGVsOiB0aGlzLm1haWxBZGRyZXNzVGFibGVNb2RlbCxcblx0XHRcdFx0XHRcdFx0XHRleHBhbmRlZDogdGhpcy5tYWlsQWRkcmVzc1RhYmxlRXhwYW5kZWQsXG5cdFx0XHRcdFx0XHRcdFx0b25FeHBhbmRlZDogKG5ld0V4cGFuZGVkKSA9PiAodGhpcy5tYWlsQWRkcmVzc1RhYmxlRXhwYW5kZWQgPSBuZXdFeHBhbmRlZCksXG5cdFx0XHRcdFx0XHQgIH0pXG5cdFx0XHRcdFx0XHQ6IG51bGwsXG5cdFx0XHRcdFx0bWFpbExvY2F0b3IubG9naW5zLmlzRW5hYmxlZChGZWF0dXJlVHlwZS5JbnRlcm5hbENvbW11bmljYXRpb24pXG5cdFx0XHRcdFx0XHQ/IG51bGxcblx0XHRcdFx0XHRcdDogW1xuXHRcdFx0XHRcdFx0XHRcdG0oXCIuZmxleC1zcGFjZS1iZXR3ZWVuLml0ZW1zLWNlbnRlci5tdC1sLm1iLXNcIiwgW1xuXHRcdFx0XHRcdFx0XHRcdFx0bShcIi5oNFwiLCBsYW5nLmdldChcImluYm94UnVsZXNTZXR0aW5nc19hY3Rpb25cIikpLFxuXHRcdFx0XHRcdFx0XHRcdFx0bShFeHBhbmRlckJ1dHRvbiwge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRsYWJlbDogXCJzaG93SW5ib3hSdWxlc19hY3Rpb25cIixcblx0XHRcdFx0XHRcdFx0XHRcdFx0ZXhwYW5kZWQ6IHRoaXMuX2luYm94UnVsZXNFeHBhbmRlZCgpLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRvbkV4cGFuZGVkQ2hhbmdlOiB0aGlzLl9pbmJveFJ1bGVzRXhwYW5kZWQsXG5cdFx0XHRcdFx0XHRcdFx0XHR9KSxcblx0XHRcdFx0XHRcdFx0XHRdKSxcblx0XHRcdFx0XHRcdFx0XHRtKFxuXHRcdFx0XHRcdFx0XHRcdFx0RXhwYW5kZXJQYW5lbCxcblx0XHRcdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0ZXhwYW5kZWQ6IHRoaXMuX2luYm94UnVsZXNFeHBhbmRlZCgpLFxuXHRcdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XHRcdG0oVGFibGUsIGluYm94UnVsZXNUYWJsZUF0dHJzKSxcblx0XHRcdFx0XHRcdFx0XHQpLFxuXHRcdFx0XHRcdFx0XHRcdG0oXG5cdFx0XHRcdFx0XHRcdFx0XHRcIi5zbWFsbFwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0bGFuZy5nZXQoXCJuYnJPZkluYm94UnVsZXNfbXNnXCIsIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XCJ7MX1cIjogbWFpbExvY2F0b3IubG9naW5zLmdldFVzZXJDb250cm9sbGVyKCkucHJvcHMuaW5ib3hSdWxlcy5sZW5ndGgsXG5cdFx0XHRcdFx0XHRcdFx0XHR9KSxcblx0XHRcdFx0XHRcdFx0XHQpLFxuXHRcdFx0XHRcdFx0ICBdLFxuXHRcdFx0XHRdLFxuXHRcdFx0KSxcblx0XHRdXG5cdH1cblxuXHRwcml2YXRlIHJlbmRlckxvY2FsRGF0YVNlY3Rpb24oKTogQ2hpbGRyZW4ge1xuXHRcdGlmICghdGhpcy5vZmZsaW5lU3RvcmFnZVNldHRpbmdzLmF2YWlsYWJsZSgpKSB7XG5cdFx0XHRyZXR1cm4gbnVsbFxuXHRcdH1cblxuXHRcdHJldHVybiBbXG5cdFx0XHRtKFwiLmg0Lm10LWxcIiwgbGFuZy5nZXQoXCJsb2NhbERhdGFTZWN0aW9uX2xhYmVsXCIpKSxcblx0XHRcdG0oVGV4dEZpZWxkLCB7XG5cdFx0XHRcdGxhYmVsOiBcImVtcHR5U3RyaW5nX21zZ1wiLFxuXHRcdFx0XHQvLyBOZWdhdGl2ZSB1cHBlciBtYXJnaW4gdG8gbWFrZSB1cCBmb3Igbm8gbGFiZWxcblx0XHRcdFx0Y2xhc3M6IFwibXQtbmVnYXRpdmUtc1wiLFxuXHRcdFx0XHR2YWx1ZTogbGFuZy5nZXQoXCJzdG9yZWREYXRhVGltZVJhbmdlX2xhYmVsXCIsIHsgXCJ7bnVtRGF5c31cIjogdGhpcy5vZmZsaW5lU3RvcmFnZVNldHRpbmdzLmdldFRpbWVSYW5nZSgpIH0pLFxuXHRcdFx0XHRpc1JlYWRPbmx5OiB0cnVlLFxuXHRcdFx0XHRpbmplY3Rpb25zUmlnaHQ6ICgpID0+IFtcblx0XHRcdFx0XHRtKEljb25CdXR0b24sIHtcblx0XHRcdFx0XHRcdHRpdGxlOiBcImVkaXRfYWN0aW9uXCIsXG5cdFx0XHRcdFx0XHRjbGljazogKCkgPT4gdGhpcy5vbkVkaXRTdG9yZWREYXRhVGltZVJhbmdlQ2xpY2tlZCgpLFxuXHRcdFx0XHRcdFx0aWNvbjogSWNvbnMuRWRpdCxcblx0XHRcdFx0XHRcdHNpemU6IEJ1dHRvblNpemUuQ29tcGFjdCxcblx0XHRcdFx0XHR9KSxcblx0XHRcdFx0XSxcblx0XHRcdH0pLFxuXHRcdF1cblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgb25FZGl0U3RvcmVkRGF0YVRpbWVSYW5nZUNsaWNrZWQoKSB7XG5cdFx0aWYgKG1haWxMb2NhdG9yLmxvZ2lucy5nZXRVc2VyQ29udHJvbGxlcigpLmlzRnJlZUFjY291bnQoKSkge1xuXHRcdFx0c2hvd05vdEF2YWlsYWJsZUZvckZyZWVEaWFsb2coKVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRhd2FpdCBzaG93RWRpdFN0b3JlZERhdGFUaW1lUmFuZ2VEaWFsb2codGhpcy5vZmZsaW5lU3RvcmFnZVNldHRpbmdzKVxuXHRcdFx0bS5yZWRyYXcoKVxuXHRcdH1cblx0fVxuXG5cdF91cGRhdGVUdXRhbm90YVByb3BlcnRpZXNTZXR0aW5ncyhwcm9wczogVHV0YW5vdGFQcm9wZXJ0aWVzKSB7XG5cdFx0aWYgKHByb3BzLmRlZmF1bHRTZW5kZXIpIHtcblx0XHRcdHRoaXMuX2RlZmF1bHRTZW5kZXIgPSBwcm9wcy5kZWZhdWx0U2VuZGVyXG5cdFx0fVxuXG5cdFx0dGhpcy5fZGVmYXVsdFVuY29uZmlkZW50aWFsID0gcHJvcHMuZGVmYXVsdFVuY29uZmlkZW50aWFsXG5cblx0XHR0aGlzLl9ub0F1dG9tYXRpY0NvbnRhY3RzID0gcHJvcHMubm9BdXRvbWF0aWNDb250YWN0c1xuXG5cdFx0dGhpcy5fc2VuZFBsYWludGV4dCA9IHByb3BzLnNlbmRQbGFpbnRleHRPbmx5XG5cblx0XHR0aGlzLl9zaWduYXR1cmUoZ2V0U2lnbmF0dXJlVHlwZShwcm9wcykubmFtZSlcblx0fVxuXG5cdF91cGRhdGVNYWlsYm94UHJvcGVydGllc1NldHRpbmdzKCkge1xuXHRcdHRoaXMuX21haWxib3hQcm9wZXJ0aWVzLmdldEFzeW5jKCkudGhlbigocHJvcHMpID0+IHtcblx0XHRcdHRoaXMuX3JlcG9ydE1vdmVkTWFpbHMgPSBnZXRSZXBvcnRNb3ZlZE1haWxzVHlwZShwcm9wcylcblxuXHRcdFx0bS5yZWRyYXcoKVxuXHRcdH0pXG5cdH1cblxuXHRfdXBkYXRlSW5ib3hSdWxlcyhwcm9wczogVHV0YW5vdGFQcm9wZXJ0aWVzKTogdm9pZCB7XG5cdFx0bWFpbExvY2F0b3IubWFpbGJveE1vZGVsLmdldFVzZXJNYWlsYm94RGV0YWlscygpLnRoZW4oYXN5bmMgKG1haWxib3hEZXRhaWxzKSA9PiB7XG5cdFx0XHR0aGlzLl9pbmJveFJ1bGVzVGFibGVMaW5lcyhcblx0XHRcdFx0YXdhaXQgcHJvbWlzZU1hcChwcm9wcy5pbmJveFJ1bGVzLCBhc3luYyAocnVsZSwgaW5kZXgpID0+IHtcblx0XHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdFx0Y2VsbHM6IFtnZXRJbmJveFJ1bGVUeXBlTmFtZShydWxlLnR5cGUpLCBydWxlLnZhbHVlLCBhd2FpdCB0aGlzLmdldFRleHRGb3JUYXJnZXQobWFpbGJveERldGFpbHMsIHJ1bGUudGFyZ2V0Rm9sZGVyKV0sXG5cdFx0XHRcdFx0XHRhY3Rpb25CdXR0b25BdHRyczogY3JlYXRlUm93QWN0aW9ucyhcblx0XHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRcdGdldEFycmF5OiAoKSA9PiBwcm9wcy5pbmJveFJ1bGVzLFxuXHRcdFx0XHRcdFx0XHRcdHVwZGF0ZUluc3RhbmNlOiAoKSA9PiBtYWlsTG9jYXRvci5lbnRpdHlDbGllbnQudXBkYXRlKHByb3BzKS5jYXRjaChvZkNsYXNzKExvY2tlZEVycm9yLCBub09wKSksXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdHJ1bGUsXG5cdFx0XHRcdFx0XHRcdGluZGV4LFxuXHRcdFx0XHRcdFx0XHRbXG5cdFx0XHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRcdFx0bGFiZWw6IFwiZWRpdF9hY3Rpb25cIixcblx0XHRcdFx0XHRcdFx0XHRcdGNsaWNrOiAoKSA9PiBBZGRJbmJveFJ1bGVEaWFsb2cuc2hvdyhtYWlsYm94RGV0YWlscywgcnVsZSksXG5cdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XSxcblx0XHRcdFx0XHRcdCksXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KSxcblx0XHRcdClcblxuXHRcdFx0bS5yZWRyYXcoKVxuXHRcdH0pXG5cdH1cblxuXHRfdXBkYXRlT3V0T2ZPZmZpY2VOb3RpZmljYXRpb24oKTogdm9pZCB7XG5cdFx0Y29uc3Qgbm90aWZpY2F0aW9uID0gdGhpcy5fb3V0T2ZPZmZpY2VOb3RpZmljYXRpb24uZ2V0TG9hZGVkKClcblxuXHRcdHRoaXMuX291dE9mT2ZmaWNlU3RhdHVzKGZvcm1hdEFjdGl2YXRlU3RhdGUobm90aWZpY2F0aW9uKSlcblxuXHRcdG0ucmVkcmF3KClcblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgZ2V0VGV4dEZvclRhcmdldChtYWlsYm94RGV0YWlsOiBNYWlsYm94RGV0YWlsLCB0YXJnZXRGb2xkZXJJZDogSWRUdXBsZSk6IFByb21pc2U8c3RyaW5nPiB7XG5cdFx0Y29uc3QgZm9sZGVycyA9IGF3YWl0IG1haWxMb2NhdG9yLm1haWxNb2RlbC5nZXRNYWlsYm94Rm9sZGVyc0ZvcklkKGFzc2VydE5vdE51bGwobWFpbGJveERldGFpbC5tYWlsYm94LmZvbGRlcnMpLl9pZClcblx0XHRsZXQgZm9sZGVyID0gZm9sZGVycy5nZXRGb2xkZXJCeUlkKGVsZW1lbnRJZFBhcnQodGFyZ2V0Rm9sZGVySWQpKVxuXG5cdFx0aWYgKGZvbGRlcikge1xuXHRcdFx0cmV0dXJuIGdldEZvbGRlck5hbWUoZm9sZGVyKVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZXR1cm4gbGFuZy5nZXQoXCJkZWxldGVkRm9sZGVyX2xhYmVsXCIpXG5cdFx0fVxuXHR9XG5cblx0YXN5bmMgZW50aXR5RXZlbnRzUmVjZWl2ZWQodXBkYXRlczogUmVhZG9ubHlBcnJheTxFbnRpdHlVcGRhdGVEYXRhPik6IFByb21pc2U8dm9pZD4ge1xuXHRcdGZvciAoY29uc3QgdXBkYXRlIG9mIHVwZGF0ZXMpIHtcblx0XHRcdGNvbnN0IHsgb3BlcmF0aW9uIH0gPSB1cGRhdGVcblx0XHRcdGlmIChpc1VwZGF0ZUZvclR5cGVSZWYoVHV0YW5vdGFQcm9wZXJ0aWVzVHlwZVJlZiwgdXBkYXRlKSAmJiBvcGVyYXRpb24gPT09IE9wZXJhdGlvblR5cGUuVVBEQVRFKSB7XG5cdFx0XHRcdGNvbnN0IHByb3BzID0gYXdhaXQgbWFpbExvY2F0b3IuZW50aXR5Q2xpZW50LmxvYWQoVHV0YW5vdGFQcm9wZXJ0aWVzVHlwZVJlZiwgbWFpbExvY2F0b3IubG9naW5zLmdldFVzZXJDb250cm9sbGVyKCkucHJvcHMuX2lkKVxuXHRcdFx0XHR0aGlzLl91cGRhdGVUdXRhbm90YVByb3BlcnRpZXNTZXR0aW5ncyhwcm9wcylcblx0XHRcdFx0dGhpcy5fdXBkYXRlSW5ib3hSdWxlcyhwcm9wcylcblx0XHRcdH0gZWxzZSBpZiAoaXNVcGRhdGVGb3JUeXBlUmVmKE1haWxGb2xkZXJUeXBlUmVmLCB1cGRhdGUpKSB7XG5cdFx0XHRcdHRoaXMuX3VwZGF0ZUluYm94UnVsZXMobWFpbExvY2F0b3IubG9naW5zLmdldFVzZXJDb250cm9sbGVyKCkucHJvcHMpXG5cdFx0XHR9IGVsc2UgaWYgKGlzVXBkYXRlRm9yVHlwZVJlZihPdXRPZk9mZmljZU5vdGlmaWNhdGlvblR5cGVSZWYsIHVwZGF0ZSkpIHtcblx0XHRcdFx0dGhpcy5fb3V0T2ZPZmZpY2VOb3RpZmljYXRpb24ucmVsb2FkKCkudGhlbigoKSA9PiB0aGlzLl91cGRhdGVPdXRPZk9mZmljZU5vdGlmaWNhdGlvbigpKVxuXHRcdFx0fSBlbHNlIGlmIChpc1VwZGF0ZUZvclR5cGVSZWYoTWFpbGJveFByb3BlcnRpZXNUeXBlUmVmLCB1cGRhdGUpKSB7XG5cdFx0XHRcdHRoaXMuX21haWxib3hQcm9wZXJ0aWVzLnJlbG9hZCgpLnRoZW4oKCkgPT4gdGhpcy5fdXBkYXRlTWFpbGJveFByb3BlcnRpZXNTZXR0aW5ncygpKVxuXHRcdFx0fVxuXHRcdH1cblx0XHRtLnJlZHJhdygpXG5cdH1cblxuXHRtYWtlUmVwb3J0TW92ZWRNYWlsc0Ryb3Bkb3duQXR0cnMoKTogRHJvcERvd25TZWxlY3RvckF0dHJzPFJlcG9ydE1vdmVkTWFpbHNUeXBlPiB7XG5cdFx0cmV0dXJuIHtcblx0XHRcdGxhYmVsOiBcInNwYW1SZXBvcnRzX2xhYmVsXCIsXG5cdFx0XHRoZWxwTGFiZWw6ICgpID0+IGxhbmcuZ2V0KFwidW5lbmNyeXB0ZWRUcmFuc21pc3Npb25fbXNnXCIpLFxuXHRcdFx0aXRlbXM6IFtcblx0XHRcdFx0e1xuXHRcdFx0XHRcdG5hbWU6IGxhbmcuZ2V0KFwiYWx3YXlzQXNrX2FjdGlvblwiKSxcblx0XHRcdFx0XHR2YWx1ZTogUmVwb3J0TW92ZWRNYWlsc1R5cGUuQUxXQVlTX0FTSyxcblx0XHRcdFx0fSxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdG5hbWU6IGxhbmcuZ2V0KFwiYWx3YXlzUmVwb3J0X2FjdGlvblwiKSxcblx0XHRcdFx0XHR2YWx1ZTogUmVwb3J0TW92ZWRNYWlsc1R5cGUuQVVUT01BVElDQUxMWV9PTkxZX1NQQU0sXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRuYW1lOiBsYW5nLmdldChcIm5ldmVyUmVwb3J0X2FjdGlvblwiKSxcblx0XHRcdFx0XHR2YWx1ZTogUmVwb3J0TW92ZWRNYWlsc1R5cGUuTkVWRVIsXG5cdFx0XHRcdH0sXG5cdFx0XHRdLFxuXHRcdFx0c2VsZWN0ZWRWYWx1ZTogdGhpcy5fcmVwb3J0TW92ZWRNYWlscyxcblx0XHRcdHNlbGVjdGlvbkNoYW5nZWRIYW5kbGVyOiBhc3luYyAocmVwb3J0TW92ZWRNYWlscykgPT4ge1xuXHRcdFx0XHRjb25zdCBtYWlsYm94R3JvdXBSb290ID0gYXdhaXQgdGhpcy5nZXRNYWlsYm94R3JvdXBSb290KClcblx0XHRcdFx0YXdhaXQgbWFpbExvY2F0b3IubWFpbE1vZGVsLnNhdmVSZXBvcnRNb3ZlZE1haWxzKG1haWxib3hHcm91cFJvb3QsIHJlcG9ydE1vdmVkTWFpbHMpXG5cdFx0XHR9LFxuXHRcdFx0ZHJvcGRvd25XaWR0aDogMjUwLFxuXHRcdH1cblx0fVxufVxuXG5hc3luYyBmdW5jdGlvbiBzaG93RWRpdFN0b3JlZERhdGFUaW1lUmFuZ2VEaWFsb2coc2V0dGluZ3M6IE9mZmxpbmVTdG9yYWdlU2V0dGluZ3NNb2RlbCkge1xuXHRjb25zdCBpbml0aWFsVGltZVJhbmdlID0gc2V0dGluZ3MuZ2V0VGltZVJhbmdlKClcblx0bGV0IHRpbWVSYW5nZSA9IGluaXRpYWxUaW1lUmFuZ2VcblxuXHRjb25zdCBuZXdUaW1lUmFuZ2VEZWZlcnJlZCA9IGRlZmVyPG51bWJlcj4oKVxuXHRjb25zdCBkaWFsb2cgPSBEaWFsb2cuc2hvd0FjdGlvbkRpYWxvZyh7XG5cdFx0dGl0bGU6IFwiZW1wdHlTdHJpbmdfbXNnXCIsXG5cdFx0Y2hpbGQ6ICgpID0+XG5cdFx0XHRtKFRleHRGaWVsZCwge1xuXHRcdFx0XHRsYWJlbDogbGFuZy5tYWtlVHJhbnNsYXRpb24oXCJkYXlzX2xhYmVsXCIsIGNhcGl0YWxpemVGaXJzdExldHRlcihsYW5nLmdldChcImRheXNfbGFiZWxcIikpKSxcblx0XHRcdFx0aGVscExhYmVsOiAoKSA9PiBsYW5nLmdldChcInN0b3JlZERhdGFUaW1lUmFuZ2VIZWxwVGV4dF9tc2dcIiksXG5cdFx0XHRcdHR5cGU6IFRleHRGaWVsZFR5cGUuTnVtYmVyLFxuXHRcdFx0XHR2YWx1ZTogYCR7dGltZVJhbmdlfWAsXG5cdFx0XHRcdG9uaW5wdXQ6IChuZXdWYWx1ZSkgPT4ge1xuXHRcdFx0XHRcdHRpbWVSYW5nZSA9IE1hdGgubWF4KDAsIE51bWJlcihuZXdWYWx1ZSkpXG5cdFx0XHRcdH0sXG5cdFx0XHR9KSxcblx0XHRva0FjdGlvbjogYXN5bmMgKCkgPT4ge1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0aWYgKGluaXRpYWxUaW1lUmFuZ2UgIT09IHRpbWVSYW5nZSkge1xuXHRcdFx0XHRcdGF3YWl0IHNldHRpbmdzLnNldFRpbWVSYW5nZSh0aW1lUmFuZ2UpXG5cdFx0XHRcdH1cblx0XHRcdH0gZmluYWxseSB7XG5cdFx0XHRcdGRpYWxvZy5jbG9zZSgpXG5cdFx0XHR9XG5cdFx0fSxcblx0fSlcblxuXHRyZXR1cm4gbmV3VGltZVJhbmdlRGVmZXJyZWQucHJvbWlzZVxufVxuIiwiaW1wb3J0IG0sIHsgQ2hpbGRyZW4sIENvbXBvbmVudCwgVm5vZGUgfSBmcm9tIFwibWl0aHJpbFwiXG5pbXBvcnQgeyBhc3NlcnROb3ROdWxsLCBmaWx0ZXJJbnQsIGluY3JlbWVudERhdGUsIG9mQ2xhc3MgfSBmcm9tIFwiQHR1dGFvL3R1dGFub3RhLXV0aWxzXCJcbmltcG9ydCB7IFRleHRGaWVsZCwgVGV4dEZpZWxkVHlwZSB9IGZyb20gXCIuLi9ndWkvYmFzZS9UZXh0RmllbGQuanNcIlxuaW1wb3J0IHsgRGlhbG9nLCBEaWFsb2dUeXBlIH0gZnJvbSBcIi4uL2d1aS9iYXNlL0RpYWxvZy5qc1wiXG5pbXBvcnQgeyBsYW5nLCBUcmFuc2xhdGlvbktleSB9IGZyb20gXCIuLi9taXNjL0xhbmd1YWdlVmlld01vZGVsLmpzXCJcbmltcG9ydCB7IEJvb2tpbmdJdGVtRmVhdHVyZVR5cGUsIEZlYXR1cmVUeXBlIH0gZnJvbSBcIi4uL2FwaS9jb21tb24vVHV0YW5vdGFDb25zdGFudHMuanNcIlxuaW1wb3J0IHsgZm9ybWF0RGF0ZSB9IGZyb20gXCIuLi9taXNjL0Zvcm1hdHRlci5qc1wiXG5pbXBvcnQgdHlwZSB7IFByaWNlRGF0YSwgUHJpY2VTZXJ2aWNlUmV0dXJuIH0gZnJvbSBcIi4uL2FwaS9lbnRpdGllcy9zeXMvVHlwZVJlZnMuanNcIlxuaW1wb3J0IHsgQWNjb3VudGluZ0luZm9UeXBlUmVmLCBQcmljZUl0ZW1EYXRhIH0gZnJvbSBcIi4uL2FwaS9lbnRpdGllcy9zeXMvVHlwZVJlZnMuanNcIlxuaW1wb3J0IHsgTm90QXV0aG9yaXplZEVycm9yIH0gZnJvbSBcIi4uL2FwaS9jb21tb24vZXJyb3IvUmVzdEVycm9yLmpzXCJcbmltcG9ydCB7IGFzUGF5bWVudEludGVydmFsLCBmb3JtYXRQcmljZSwgZ2V0UHJpY2VJdGVtLCBQYXltZW50SW50ZXJ2YWwgfSBmcm9tIFwiLi9QcmljZVV0aWxzLmpzXCJcbmltcG9ydCB7IHNob3dQcm9ncmVzc0RpYWxvZyB9IGZyb20gXCIuLi9ndWkvZGlhbG9ncy9Qcm9ncmVzc0RpYWxvZy5qc1wiXG5pbXBvcnQgeyBsb2NhdG9yIH0gZnJvbSBcIi4uL2FwaS9tYWluL0NvbW1vbkxvY2F0b3IuanNcIlxuaW1wb3J0IHsgYXNzZXJ0TWFpbk9yTm9kZSB9IGZyb20gXCIuLi9hcGkvY29tbW9uL0Vudi5qc1wiXG5cbmFzc2VydE1haW5Pck5vZGUoKVxuXG5leHBvcnQgaW50ZXJmYWNlIEJvb2tpbmdQYXJhbXMge1xuXHRmZWF0dXJlVHlwZTogQm9va2luZ0l0ZW1GZWF0dXJlVHlwZVxuXHRib29raW5nVGV4dDogVHJhbnNsYXRpb25LZXlcblx0Y291bnQ6IG51bWJlclxuXHRmcmVlQW1vdW50OiBudW1iZXJcblx0cmVhY3RpdmF0ZTogYm9vbGVhblxufVxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgb3JkZXIgaXMgYWNjZXB0ZWQgYnkgdGhlIHVzZXIsIGZhbHNlIG90aGVyd2lzZS5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNob3dCdXlEaWFsb2cocGFyYW1zOiBCb29raW5nUGFyYW1zKTogUHJvbWlzZTxib29sZWFuPiB7XG5cdGlmIChsb2NhdG9yLmxvZ2lucy5pc0VuYWJsZWQoRmVhdHVyZVR5cGUuSGlkZUJ1eURpYWxvZ3MpKSB7XG5cdFx0cmV0dXJuIHRydWVcblx0fVxuXHRjb25zdCBwcmljZUNoYW5nZU1vZGVsID0gYXdhaXQgc2hvd1Byb2dyZXNzRGlhbG9nKFwicGxlYXNlV2FpdF9tc2dcIiwgcHJlcGFyZURpYWxvZyhwYXJhbXMpKVxuXHRpZiAocHJpY2VDaGFuZ2VNb2RlbCkge1xuXHRcdHJldHVybiBzaG93RGlhbG9nKHByaWNlQ2hhbmdlTW9kZWwuZ2V0QWN0aW9uTGFiZWwoKSwgKCkgPT5cblx0XHRcdG0oQ29uZmlybVN1YnNjcmlwdGlvblZpZXcsIHsgcHJpY2VDaGFuZ2VNb2RlbCwgY291bnQ6IHBhcmFtcy5jb3VudCwgZnJlZUFtb3VudDogcGFyYW1zLmZyZWVBbW91bnQsIGJvb2tpbmdUZXh0OiBwYXJhbXMuYm9va2luZ1RleHQgfSksXG5cdFx0KVxuXHR9IGVsc2Uge1xuXHRcdHJldHVybiBmYWxzZVxuXHR9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHByZXBhcmVEaWFsb2coeyBmZWF0dXJlVHlwZSwgY291bnQsIHJlYWN0aXZhdGUgfTogQm9va2luZ1BhcmFtcyk6IFByb21pc2U8UHJpY2VDaGFuZ2VNb2RlbCB8IG51bGw+IHtcblx0Y29uc3QgcHJpY2UgPSBhd2FpdCBsb2NhdG9yLmJvb2tpbmdGYWNhZGUuZ2V0UHJpY2UoZmVhdHVyZVR5cGUsIGNvdW50LCByZWFjdGl2YXRlKVxuXHRjb25zdCBwcmljZUNoYW5nZU1vZGVsID0gbmV3IFByaWNlQ2hhbmdlTW9kZWwocHJpY2UsIGZlYXR1cmVUeXBlKVxuXHRjb25zdCBjdXN0b21lckluZm8gPSBhd2FpdCBsb2NhdG9yLmxvZ2lucy5nZXRVc2VyQ29udHJvbGxlcigpLmxvYWRDdXN0b21lckluZm8oKVxuXHRjb25zdCBhY2NvdW50aW5nSW5mbyA9IGF3YWl0IGxvY2F0b3IuZW50aXR5Q2xpZW50LmxvYWQoQWNjb3VudGluZ0luZm9UeXBlUmVmLCBjdXN0b21lckluZm8uYWNjb3VudGluZ0luZm8pLmNhdGNoKG9mQ2xhc3MoTm90QXV0aG9yaXplZEVycm9yLCAoKSA9PiBudWxsKSlcblx0aWYgKGFjY291bnRpbmdJbmZvICYmIGFjY291bnRpbmdJbmZvLnBheW1lbnRNZXRob2QgPT0gbnVsbCkge1xuXHRcdGNvbnN0IGNvbmZpcm0gPSBhd2FpdCBEaWFsb2cuY29uZmlybShcImVudGVyUGF5bWVudERhdGFGaXJzdF9tc2dcIilcblx0XHRpZiAoY29uZmlybSkge1xuXHRcdFx0bS5yb3V0ZS5zZXQoXCIvc2V0dGluZ3MvaW52b2ljZVwiKVxuXHRcdH1cblxuXHRcdHJldHVybiBudWxsXG5cdH0gZWxzZSB7XG5cdFx0cmV0dXJuIHByaWNlQ2hhbmdlTW9kZWxcblx0fVxufVxuXG5mdW5jdGlvbiBzaG93RGlhbG9nKG9rTGFiZWw6IFRyYW5zbGF0aW9uS2V5LCB2aWV3OiAoKSA9PiBDaGlsZHJlbikge1xuXHRyZXR1cm4gbmV3IFByb21pc2U8Ym9vbGVhbj4oKHJlc29sdmUpID0+IHtcblx0XHRsZXQgZGlhbG9nOiBEaWFsb2dcblxuXHRcdGNvbnN0IGRvQWN0aW9uID0gKHJlczogYm9vbGVhbikgPT4ge1xuXHRcdFx0ZGlhbG9nLmNsb3NlKClcblx0XHRcdHJlc29sdmUocmVzKVxuXHRcdH1cblxuXHRcdGRpYWxvZyA9IERpYWxvZy5zaG93QWN0aW9uRGlhbG9nKHtcblx0XHRcdG9rQWN0aW9uVGV4dElkOiBva0xhYmVsLFxuXHRcdFx0dGl0bGU6IFwiYm9va2luZ1N1bW1hcnlfbGFiZWxcIixcblx0XHRcdGNoaWxkOiAoKSA9PiB2aWV3KCksXG5cdFx0XHRva0FjdGlvbjogKCkgPT4gZG9BY3Rpb24odHJ1ZSksXG5cdFx0XHRjYW5jZWxBY3Rpb246ICgpID0+IGRvQWN0aW9uKGZhbHNlKSxcblx0XHRcdHR5cGU6IERpYWxvZ1R5cGUuRWRpdFNtYWxsLFxuXHRcdH0pXG5cdH0pXG59XG5cbmludGVyZmFjZSBDb25maXJtQXR0cnMge1xuXHRwcmljZUNoYW5nZU1vZGVsOiBQcmljZUNoYW5nZU1vZGVsXG5cdGNvdW50OiBudW1iZXJcblx0ZnJlZUFtb3VudDogbnVtYmVyXG5cdGJvb2tpbmdUZXh0OiBUcmFuc2xhdGlvbktleVxufVxuXG5jbGFzcyBDb25maXJtU3Vic2NyaXB0aW9uVmlldyBpbXBsZW1lbnRzIENvbXBvbmVudDxDb25maXJtQXR0cnM+IHtcblx0dmlldyh7IGF0dHJzIH06IFZub2RlPENvbmZpcm1BdHRycz4pOiBDaGlsZHJlbiB7XG5cdFx0Y29uc3QgeyBwcmljZUNoYW5nZU1vZGVsLCBjb3VudCwgZnJlZUFtb3VudCB9ID0gYXR0cnNcblx0XHRjb25zdCBjaGFyZ2VEYXRlID0gaW5jcmVtZW50RGF0ZShwcmljZUNoYW5nZU1vZGVsLnBlcmlvZEVuZERhdGUoKSwgMSlcblxuXHRcdHJldHVybiBtKFwiXCIsIFtcblx0XHRcdG0oVGV4dEZpZWxkLCB7XG5cdFx0XHRcdGxhYmVsOiBcImJvb2tpbmdPcmRlcl9sYWJlbFwiLFxuXHRcdFx0XHR2YWx1ZTogbGFuZy5nZXQoYXR0cnMuYm9va2luZ1RleHQsIHtcblx0XHRcdFx0XHRcInsxfVwiOiBNYXRoLmFicyhjb3VudCksXG5cdFx0XHRcdH0pLFxuXHRcdFx0XHR0eXBlOiBUZXh0RmllbGRUeXBlLkFyZWEsXG5cdFx0XHRcdGlzUmVhZE9ubHk6IHRydWUsXG5cdFx0XHR9KSxcblx0XHRcdHByaWNlQ2hhbmdlTW9kZWwuaXNCdXkoKVxuXHRcdFx0XHQ/IG0oVGV4dEZpZWxkLCB7XG5cdFx0XHRcdFx0XHRsYWJlbDogXCJzdWJzY3JpcHRpb25fbGFiZWxcIixcblx0XHRcdFx0XHRcdGhlbHBMYWJlbDogKCkgPT4gbGFuZy5nZXQoXCJuZXh0Q2hhcmdlT25fbGFiZWxcIiwgeyBcIntjaGFyZ2VEYXRlfVwiOiBmb3JtYXREYXRlKGNoYXJnZURhdGUpIH0pLFxuXHRcdFx0XHRcdFx0dmFsdWU6IHRoaXMuZ2V0U3Vic2NyaXB0aW9uVGV4dChwcmljZUNoYW5nZU1vZGVsKSxcblx0XHRcdFx0XHRcdGlzUmVhZE9ubHk6IHRydWUsXG5cdFx0XHRcdCAgfSlcblx0XHRcdFx0OiBudWxsLFxuXHRcdFx0bShUZXh0RmllbGQsIHtcblx0XHRcdFx0bGFiZWw6IFwicHJpY2VfbGFiZWxcIixcblx0XHRcdFx0aGVscExhYmVsOiAoKSA9PiB0aGlzLmdldFByaWNlSW5mb1RleHQocHJpY2VDaGFuZ2VNb2RlbCksXG5cdFx0XHRcdHZhbHVlOiB0aGlzLmdldFByaWNlVGV4dChwcmljZUNoYW5nZU1vZGVsKSxcblx0XHRcdFx0aXNSZWFkT25seTogdHJ1ZSxcblx0XHRcdH0pLFxuXHRcdF0pXG5cdH1cblxuXHRwcml2YXRlIGdldFN1YnNjcmlwdGlvblRleHQobW9kZWw6IFByaWNlQ2hhbmdlTW9kZWwpOiBzdHJpbmcge1xuXHRcdGlmIChtb2RlbC5pc1llYXJseSgpKSB7XG5cdFx0XHRyZXR1cm4gbGFuZy5nZXQoXCJwcmljaW5nLnllYXJseV9sYWJlbFwiKVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZXR1cm4gbGFuZy5nZXQoXCJwcmljaW5nLm1vbnRobHlfbGFiZWxcIilcblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIGdldFByaWNlVGV4dChtb2RlbDogUHJpY2VDaGFuZ2VNb2RlbCk6IHN0cmluZyB7XG5cdFx0bGV0IG5ldEdyb3NzVGV4dCA9IG1vZGVsLnRheEluY2x1ZGVkKCkgPyBsYW5nLmdldChcImdyb3NzX2xhYmVsXCIpIDogbGFuZy5nZXQoXCJuZXRfbGFiZWxcIilcblx0XHRsZXQgcGVyaW9kVGV4dCA9IG1vZGVsLmlzWWVhcmx5KCkgPyBsYW5nLmdldChcInByaWNpbmcucGVyWWVhcl9sYWJlbFwiKSA6IGxhbmcuZ2V0KFwicHJpY2luZy5wZXJNb250aF9sYWJlbFwiKVxuXG5cdFx0Y29uc3QgZnV0dXJlUHJpY2VOZXh0UGVyaW9kID0gbW9kZWwuZnV0dXJlUHJpY2Vcblx0XHRsZXQgY3VycmVudFByaWNlTmV4dFBlcmlvZCA9IG1vZGVsLmN1cnJlbnRQcmljZVxuXG5cdFx0aWYgKG1vZGVsLmlzU2luZ2xlUHJpY2VUeXBlKCkpIHtcblx0XHRcdGNvbnN0IHByaWNlRGlmZiA9IGZ1dHVyZVByaWNlTmV4dFBlcmlvZCAtIGN1cnJlbnRQcmljZU5leHRQZXJpb2Rcblx0XHRcdHJldHVybiBgJHtmb3JtYXRQcmljZShwcmljZURpZmYsIHRydWUpfSAke3BlcmlvZFRleHR9ICgke25ldEdyb3NzVGV4dH0pYFxuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZXR1cm4gYCR7Zm9ybWF0UHJpY2UoZnV0dXJlUHJpY2VOZXh0UGVyaW9kLCB0cnVlKX0gJHtwZXJpb2RUZXh0fSAoJHtuZXRHcm9zc1RleHR9KWBcblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIGdldFByaWNlSW5mb1RleHQobW9kZWw6IFByaWNlQ2hhbmdlTW9kZWwpOiBzdHJpbmcge1xuXHRcdGlmIChtb2RlbC5pc1VuYnV5KCkpIHtcblx0XHRcdHJldHVybiBsYW5nLmdldChcInByaWNlQ2hhbmdlVmFsaWRGcm9tX2xhYmVsXCIsIHtcblx0XHRcdFx0XCJ7MX1cIjogZm9ybWF0RGF0ZShtb2RlbC5wZXJpb2RFbmREYXRlKCkpLFxuXHRcdFx0fSlcblx0XHR9IGVsc2UgaWYgKG1vZGVsLmFkZGVkUHJpY2VGb3JDdXJyZW50UGVyaW9kKCkgPiAwKSB7XG5cdFx0XHRyZXR1cm4gbGFuZy5nZXQoXCJwcmljZUZvckN1cnJlbnRBY2NvdW50aW5nUGVyaW9kX2xhYmVsXCIsIHtcblx0XHRcdFx0XCJ7MX1cIjogZm9ybWF0UHJpY2UobW9kZWwuYWRkZWRQcmljZUZvckN1cnJlbnRQZXJpb2QoKSwgdHJ1ZSksXG5cdFx0XHR9KVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZXR1cm4gXCJcIlxuXHRcdH1cblx0fVxufVxuXG5jbGFzcyBQcmljZUNoYW5nZU1vZGVsIHtcblx0cmVhZG9ubHkgY3VycmVudEl0ZW06IFByaWNlSXRlbURhdGEgfCBudWxsXG5cdHJlYWRvbmx5IGZ1dHVyZUl0ZW06IFByaWNlSXRlbURhdGEgfCBudWxsXG5cdHJlYWRvbmx5IGN1cnJlbnRQcmljZTogbnVtYmVyXG5cdHJlYWRvbmx5IGZ1dHVyZVByaWNlOiBudW1iZXJcblx0cmVhZG9ubHkgYWRkaXRpb25hbEZlYXR1cmVzOiBSZWFkb25seVNldDxCb29raW5nSXRlbUZlYXR1cmVUeXBlPlxuXG5cdGNvbnN0cnVjdG9yKHByaXZhdGUgcmVhZG9ubHkgcHJpY2U6IFByaWNlU2VydmljZVJldHVybiwgcmVhZG9ubHkgZmVhdHVyZVR5cGU6IEJvb2tpbmdJdGVtRmVhdHVyZVR5cGUpIHtcblx0XHR0aGlzLmN1cnJlbnRJdGVtID0gZ2V0UHJpY2VJdGVtKHByaWNlLmN1cnJlbnRQcmljZU5leHRQZXJpb2QsIGZlYXR1cmVUeXBlKVxuXHRcdHRoaXMuZnV0dXJlSXRlbSA9IGdldFByaWNlSXRlbShwcmljZS5mdXR1cmVQcmljZU5leHRQZXJpb2QsIGZlYXR1cmVUeXBlKVxuXHRcdHRoaXMuY3VycmVudFByaWNlID0gdGhpcy5nZXRQcmljZUZyb21QcmljZURhdGEocHJpY2UuY3VycmVudFByaWNlTmV4dFBlcmlvZCwgZmVhdHVyZVR5cGUpXG5cdFx0dGhpcy5mdXR1cmVQcmljZSA9IHRoaXMuZ2V0UHJpY2VGcm9tUHJpY2VEYXRhKHByaWNlLmZ1dHVyZVByaWNlTmV4dFBlcmlvZCwgZmVhdHVyZVR5cGUpXG5cblx0XHRpZiAodGhpcy5mZWF0dXJlVHlwZSA9PT0gQm9va2luZ0l0ZW1GZWF0dXJlVHlwZS5MZWdhY3lVc2Vycykge1xuXHRcdFx0dGhpcy5hZGRpdGlvbmFsRmVhdHVyZXMgPSBuZXcgU2V0KFxuXHRcdFx0XHRbQm9va2luZ0l0ZW1GZWF0dXJlVHlwZS5XaGl0ZWxhYmVsLCBCb29raW5nSXRlbUZlYXR1cmVUeXBlLlNoYXJpbmcsIEJvb2tpbmdJdGVtRmVhdHVyZVR5cGUuQnVzaW5lc3NdLmZpbHRlcigoZikgPT4gdGhpcy5nZXRGdXR1cmVQcmljZShmKSA+IDApLFxuXHRcdFx0KVxuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLmFkZGl0aW9uYWxGZWF0dXJlcyA9IG5ldyBTZXQoKVxuXHRcdH1cblx0fVxuXG5cdGdldEFjdGlvbkxhYmVsKCk6IFRyYW5zbGF0aW9uS2V5IHtcblx0XHRpZiAoIXRoaXMuaXNQcmljZUNoYW5nZSgpKSB7XG5cdFx0XHRyZXR1cm4gXCJhY2NlcHRfYWN0aW9uXCJcblx0XHR9XG5cdFx0aWYgKHRoaXMuaXNCdXkoKSkge1xuXHRcdFx0cmV0dXJuIFwiYnV5X2FjdGlvblwiXG5cdFx0fVxuXHRcdHJldHVybiBcIm9yZGVyX2FjdGlvblwiXG5cdH1cblxuXHRpc0J1eSgpIHtcblx0XHRyZXR1cm4gdGhpcy5jdXJyZW50UHJpY2UgPCB0aGlzLmZ1dHVyZVByaWNlXG5cdH1cblxuXHRpc1VuYnV5KCkge1xuXHRcdHJldHVybiB0aGlzLmN1cnJlbnRQcmljZSA+IHRoaXMuZnV0dXJlUHJpY2Vcblx0fVxuXG5cdGlzUHJpY2VDaGFuZ2UoKSB7XG5cdFx0cmV0dXJuIHRoaXMuY3VycmVudFByaWNlICE9PSB0aGlzLmZ1dHVyZVByaWNlXG5cdH1cblxuXHRpc1NpbmdsZVByaWNlVHlwZSgpIHtcblx0XHRyZXR1cm4gdGhpcy5hbnlJdGVtKCkuc2luZ2xlVHlwZVxuXHR9XG5cblx0Z2V0Q3VycmVudENvdW50KCk6IG51bWJlciB7XG5cdFx0cmV0dXJuIGZpbHRlckludChhc3NlcnROb3ROdWxsKHRoaXMuY3VycmVudEl0ZW0pLmNvdW50KVxuXHR9XG5cblx0Z2V0RnV0dXJlQ291bnQoKTogbnVtYmVyIHtcblx0XHRyZXR1cm4gZmlsdGVySW50KGFzc2VydE5vdE51bGwodGhpcy5mdXR1cmVJdGVtKS5jb3VudClcblx0fVxuXG5cdGlzWWVhcmx5KCk6IGJvb2xlYW4ge1xuXHRcdGNvbnN0IHBlcmlvZCA9IGFzc2VydE5vdE51bGwodGhpcy5wcmljZS5mdXR1cmVQcmljZU5leHRQZXJpb2QgPz8gdGhpcy5wcmljZS5jdXJyZW50UHJpY2VOZXh0UGVyaW9kKVxuXHRcdHJldHVybiBhc1BheW1lbnRJbnRlcnZhbChwZXJpb2QucGF5bWVudEludGVydmFsKSA9PT0gUGF5bWVudEludGVydmFsLlllYXJseVxuXHR9XG5cblx0dGF4SW5jbHVkZWQoKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIGFzc2VydE5vdE51bGwodGhpcy5wcmljZS5mdXR1cmVQcmljZU5leHRQZXJpb2QpLnRheEluY2x1ZGVkXG5cdH1cblxuXHRwZXJpb2RFbmREYXRlKCk6IERhdGUge1xuXHRcdC8vIHJldHVybiBhIGNvcHkgdG8gcHJldmVudCB0aGUgZGF0ZSBmcm9tIGJlaW5nIGNoYW5nZWQgYnkgdGhlIGNhbGxlclxuXHRcdHJldHVybiBuZXcgRGF0ZSh0aGlzLnByaWNlLnBlcmlvZEVuZERhdGUpXG5cdH1cblxuXHRhZGRlZFByaWNlRm9yQ3VycmVudFBlcmlvZCgpOiBudW1iZXIge1xuXHRcdHJldHVybiB0aGlzLnByaWNlLmN1cnJlbnRQZXJpb2RBZGRlZFByaWNlID8gZmlsdGVySW50KHRoaXMucHJpY2UuY3VycmVudFBlcmlvZEFkZGVkUHJpY2UpIDogMFxuXHR9XG5cblx0cHJpdmF0ZSBhbnlJdGVtKCkge1xuXHRcdHJldHVybiBhc3NlcnROb3ROdWxsKHRoaXMuZnV0dXJlSXRlbSA/PyB0aGlzLmN1cnJlbnRJdGVtKVxuXHR9XG5cblx0cHJpdmF0ZSBnZXRGdXR1cmVQcmljZShmZWF0dXJlVHlwZTogQm9va2luZ0l0ZW1GZWF0dXJlVHlwZSkge1xuXHRcdHJldHVybiB0aGlzLmdldFByaWNlRnJvbVByaWNlRGF0YSh0aGlzLnByaWNlLmZ1dHVyZVByaWNlTmV4dFBlcmlvZCwgZmVhdHVyZVR5cGUpXG5cdH1cblxuXHQvKipcblx0ICogUmV0dXJucyB0aGUgcHJpY2UgZm9yIHRoZSBmZWF0dXJlIHR5cGUgZnJvbSB0aGUgcHJpY2UgZGF0YSBpZiBhdmFpbGFibGUsIG90aGVyd2lzZSAwLlxuXHQgKi9cblx0cHJpdmF0ZSBnZXRQcmljZUZyb21QcmljZURhdGEocHJpY2VEYXRhOiBQcmljZURhdGEgfCBudWxsLCBmZWF0dXJlVHlwZTogTnVtYmVyU3RyaW5nKTogbnVtYmVyIHtcblx0XHRsZXQgaXRlbSA9IGdldFByaWNlSXRlbShwcmljZURhdGEsIGZlYXR1cmVUeXBlKVxuXHRcdGxldCBpdGVtUHJpY2UgPSBpdGVtID8gTnVtYmVyKGl0ZW0ucHJpY2UpIDogMFxuXG5cdFx0aWYgKGZlYXR1cmVUeXBlID09PSBCb29raW5nSXRlbUZlYXR1cmVUeXBlLkxlZ2FjeVVzZXJzKSB7XG5cdFx0XHRpdGVtUHJpY2UgKz0gdGhpcy5nZXRQcmljZUZyb21QcmljZURhdGEocHJpY2VEYXRhLCBCb29raW5nSXRlbUZlYXR1cmVUeXBlLldoaXRlbGFiZWwpXG5cdFx0XHRpdGVtUHJpY2UgKz0gdGhpcy5nZXRQcmljZUZyb21QcmljZURhdGEocHJpY2VEYXRhLCBCb29raW5nSXRlbUZlYXR1cmVUeXBlLlNoYXJpbmcpXG5cdFx0XHRpdGVtUHJpY2UgKz0gdGhpcy5nZXRQcmljZUZyb21QcmljZURhdGEocHJpY2VEYXRhLCBCb29raW5nSXRlbUZlYXR1cmVUeXBlLkJ1c2luZXNzKVxuXHRcdH1cblxuXHRcdHJldHVybiBpdGVtUHJpY2Vcblx0fVxufVxuIiwiaW1wb3J0IG0sIHsgQ2hpbGRBcnJheSwgQ2hpbGRyZW4gfSBmcm9tIFwibWl0aHJpbFwiXG5pbXBvcnQgeyBEaWFsb2cgfSBmcm9tIFwiLi4vLi4vZ3VpL2Jhc2UvRGlhbG9nLmpzXCJcbmltcG9ydCB7IGZvcm1hdERhdGVXaXRoTW9udGgsIGZvcm1hdFN0b3JhZ2VTaXplIH0gZnJvbSBcIi4uLy4uL21pc2MvRm9ybWF0dGVyLmpzXCJcbmltcG9ydCB7IGxhbmcgfSBmcm9tIFwiLi4vLi4vbWlzYy9MYW5ndWFnZVZpZXdNb2RlbC5qc1wiXG5pbXBvcnQgeyBnZXRGaXJzdE9yVGhyb3csIG5ldmVyTnVsbCB9IGZyb20gXCJAdHV0YW8vdHV0YW5vdGEtdXRpbHNcIlxuaW1wb3J0IHsgR3JvdXBUeXBlIH0gZnJvbSBcIi4uLy4uL2FwaS9jb21tb24vVHV0YW5vdGFDb25zdGFudHMuanNcIlxuaW1wb3J0IHR5cGUgeyBUYWJsZUF0dHJzIH0gZnJvbSBcIi4uLy4uL2d1aS9iYXNlL1RhYmxlLmpzXCJcbmltcG9ydCB7IENvbHVtbldpZHRoLCBUYWJsZSwgVGFibGVMaW5lQXR0cnMgfSBmcm9tIFwiLi4vLi4vZ3VpL2Jhc2UvVGFibGUuanNcIlxuaW1wb3J0IHsgSWNvbnMgfSBmcm9tIFwiLi4vLi4vZ3VpL2Jhc2UvaWNvbnMvSWNvbnMuanNcIlxuaW1wb3J0IHsgc2hvd1Byb2dyZXNzRGlhbG9nIH0gZnJvbSBcIi4uLy4uL2d1aS9kaWFsb2dzL1Byb2dyZXNzRGlhbG9nLmpzXCJcbmltcG9ydCB7IFRleHRGaWVsZCB9IGZyb20gXCIuLi8uLi9ndWkvYmFzZS9UZXh0RmllbGQuanNcIlxuaW1wb3J0IHR5cGUgeyBEcm9wRG93blNlbGVjdG9yQXR0cnMgfSBmcm9tIFwiLi4vLi4vZ3VpL2Jhc2UvRHJvcERvd25TZWxlY3Rvci5qc1wiXG5pbXBvcnQgeyBEcm9wRG93blNlbGVjdG9yIH0gZnJvbSBcIi4uLy4uL2d1aS9iYXNlL0Ryb3BEb3duU2VsZWN0b3IuanNcIlxuaW1wb3J0IHsgYXNzZXJ0TWFpbk9yTm9kZSB9IGZyb20gXCIuLi8uLi9hcGkvY29tbW9uL0Vudi5qc1wiXG5pbXBvcnQgeyBJY29uQnV0dG9uLCBJY29uQnV0dG9uQXR0cnMgfSBmcm9tIFwiLi4vLi4vZ3VpL2Jhc2UvSWNvbkJ1dHRvbi5qc1wiXG5pbXBvcnQgeyBCdXR0b25TaXplIH0gZnJvbSBcIi4uLy4uL2d1aS9iYXNlL0J1dHRvblNpemUuanNcIlxuaW1wb3J0IHsgR3JvdXBEZXRhaWxzTW9kZWwgfSBmcm9tIFwiLi4vLi4vLi4vbWFpbC1hcHAvc2V0dGluZ3MvZ3JvdXBzL0dyb3VwRGV0YWlsc01vZGVsLmpzXCJcbmltcG9ydCB7IHNob3dCdXlEaWFsb2cgfSBmcm9tIFwiLi4vLi4vc3Vic2NyaXB0aW9uL0J1eURpYWxvZy5qc1wiXG5pbXBvcnQgeyBFbnRpdHlVcGRhdGVEYXRhIH0gZnJvbSBcIi4uLy4uL2FwaS9jb21tb24vdXRpbHMvRW50aXR5VXBkYXRlVXRpbHMuanNcIlxuaW1wb3J0IHsgVXBkYXRhYmxlU2V0dGluZ3NEZXRhaWxzVmlld2VyIH0gZnJvbSBcIi4uL0ludGVyZmFjZXMuanNcIlxuXG5hc3NlcnRNYWluT3JOb2RlKClcblxuZXhwb3J0IGNsYXNzIEdyb3VwRGV0YWlsc1ZpZXcgaW1wbGVtZW50cyBVcGRhdGFibGVTZXR0aW5nc0RldGFpbHNWaWV3ZXIge1xuXHRjb25zdHJ1Y3Rvcihwcml2YXRlIHJlYWRvbmx5IG1vZGVsOiBHcm91cERldGFpbHNNb2RlbCkge31cblxuXHQvKipcblx0ICogcmVuZGVyIHRoZSBoZWFkZXIgdGhhdCB0ZWxscyB1cyB3aGF0IHR5cGUgb2YgZ3JvdXAgd2UgaGF2ZSBoZXJlXG5cdCAqIEBwcml2YXRlXG5cdCAqL1xuXHRwcml2YXRlIHJlbmRlckhlYWRlcigpOiBDaGlsZHJlbiB7XG5cdFx0cmV0dXJuIG0oXCIuaDQubXQtbFwiLCBnZXRHcm91cFR5cGVEaXNwbGF5TmFtZSh0aGlzLm1vZGVsLmdldEdyb3VwVHlwZSgpKSlcblx0fVxuXG5cdHJlbmRlclZpZXcoKTogQ2hpbGRyZW4ge1xuXHRcdHJldHVybiBtKFwiI3VzZXItdmlld2VyLmZpbGwtYWJzb2x1dGUuc2Nyb2xsLnBsci1sXCIsIFt0aGlzLnJlbmRlckhlYWRlcigpLCB0aGlzLnJlbmRlckNvbW1vbkluZm8oKSwgdGhpcy5yZW5kZXJNYWlsR3JvdXBJbmZvKCldKVxuXHR9XG5cblx0LyoqXG5cdCAqIHJlbmRlciB0aGUgZmllbGRzIHRoYXQgYXJlIGNvbW1vbiB0byBhbGwgZ3JvdXAgdHlwZXNcblx0ICogQHByaXZhdGVcblx0ICovXG5cdHByaXZhdGUgcmVuZGVyQ29tbW9uSW5mbygpOiBDaGlsZEFycmF5IHtcblx0XHRyZXR1cm4gW3RoaXMucmVuZGVyQ3JlYXRlZFRleHRGaWVsZCgpLCB0aGlzLnJlbmRlck5hbWVGaWVsZCgpLCB0aGlzLnJlbmRlclN0YXR1c1NlbGVjdG9yKCksIHRoaXMucmVuZGVyTWVtYmVyc1RhYmxlKCldXG5cdH1cblxuXHRwcml2YXRlIHJlbmRlckNyZWF0ZWRUZXh0RmllbGQoKTogQ2hpbGRyZW4ge1xuXHRcdHJldHVybiBtKFRleHRGaWVsZCwgeyBsYWJlbDogXCJjcmVhdGVkX2xhYmVsXCIsIHZhbHVlOiBmb3JtYXREYXRlV2l0aE1vbnRoKHRoaXMubW9kZWwuZ2V0Q3JlYXRpb25EYXRlKCkpLCBpc1JlYWRPbmx5OiB0cnVlIH0pXG5cdH1cblxuXHQvKipcblx0ICogcmVuZGVyIHRoZSBpbmZvcm1hdGlvbiB0aGF0IG9ubHkgc2hhcmVkIG1haWxib3hlcyBoYXZlXG5cdCAqIEBwcml2YXRlXG5cdCAqL1xuXHRwcml2YXRlIHJlbmRlck1haWxHcm91cEluZm8oKTogQ2hpbGRBcnJheSB7XG5cdFx0cmV0dXJuIFtcblx0XHRcdHRoaXMucmVuZGVyVXNlZFN0b3JhZ2UoKSxcblx0XHRcdG0oVGV4dEZpZWxkLCB7XG5cdFx0XHRcdGxhYmVsOiBcIm1haWxBZGRyZXNzX2xhYmVsXCIsXG5cdFx0XHRcdHZhbHVlOiB0aGlzLm1vZGVsLmdldEdyb3VwTWFpbEFkZHJlc3MoKSxcblx0XHRcdFx0aXNSZWFkT25seTogdHJ1ZSxcblx0XHRcdH0pLFxuXHRcdFx0bShUZXh0RmllbGQsIHtcblx0XHRcdFx0bGFiZWw6IFwibWFpbE5hbWVfbGFiZWxcIixcblx0XHRcdFx0dmFsdWU6IHRoaXMubW9kZWwuZ2V0R3JvdXBTZW5kZXJOYW1lKCksXG5cdFx0XHRcdGlzUmVhZE9ubHk6IHRydWUsXG5cdFx0XHRcdGluamVjdGlvbnNSaWdodDogKCkgPT5cblx0XHRcdFx0XHRtKEljb25CdXR0b24sIHtcblx0XHRcdFx0XHRcdGljb246IEljb25zLkVkaXQsXG5cdFx0XHRcdFx0XHR0aXRsZTogXCJzZXRTZW5kZXJOYW1lX2FjdGlvblwiLFxuXHRcdFx0XHRcdFx0Y2xpY2s6ICgpID0+IHtcblx0XHRcdFx0XHRcdFx0dGhpcy5zaG93Q2hhbmdlU2VuZGVyTmFtZURpYWxvZygpXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdH0pLFxuXHRcdFx0fSksXG5cdFx0XVxuXHR9XG5cblx0cHJpdmF0ZSByZW5kZXJTdGF0dXNTZWxlY3RvcigpOiBDaGlsZHJlbiB7XG5cdFx0Y29uc3QgYXR0cnM6IERyb3BEb3duU2VsZWN0b3JBdHRyczxib29sZWFuPiA9IHtcblx0XHRcdGxhYmVsOiBcInN0YXRlX2xhYmVsXCIsXG5cdFx0XHRpdGVtczogW1xuXHRcdFx0XHR7XG5cdFx0XHRcdFx0bmFtZTogbGFuZy5nZXQoXCJhY3RpdmF0ZWRfbGFiZWxcIiksXG5cdFx0XHRcdFx0dmFsdWU6IGZhbHNlLFxuXHRcdFx0XHR9LFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0bmFtZTogbGFuZy5nZXQoXCJkZWFjdGl2YXRlZF9sYWJlbFwiKSxcblx0XHRcdFx0XHR2YWx1ZTogdHJ1ZSxcblx0XHRcdFx0fSxcblx0XHRcdF0sXG5cdFx0XHRzZWxlY3RlZFZhbHVlOiAhdGhpcy5tb2RlbC5pc0dyb3VwQWN0aXZlKCksXG5cdFx0XHRzZWxlY3Rpb25DaGFuZ2VkSGFuZGxlcjogKGRlYWN0aXZhdGUpID0+IHRoaXMub25BY3RpdmF0aW9uU3RhdHVzQ2hhbmdlZChkZWFjdGl2YXRlKSxcblx0XHR9XG5cdFx0cmV0dXJuIG0oRHJvcERvd25TZWxlY3RvciwgYXR0cnMpXG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIG9uQWN0aXZhdGlvblN0YXR1c0NoYW5nZWQoZGVhY3RpdmF0ZTogYm9vbGVhbik6IFByb21pc2U8dm9pZD4ge1xuXHRcdGNvbnN0IGJ1eVBhcmFtcyA9IGF3YWl0IHNob3dQcm9ncmVzc0RpYWxvZyhcInBsZWFzZVdhaXRfbXNnXCIsIHRoaXMubW9kZWwudmFsaWRhdGVHcm91cEFjdGl2YXRpb25TdGF0dXMoZGVhY3RpdmF0ZSkpXG5cdFx0aWYgKCFidXlQYXJhbXMpIHJldHVyblxuXHRcdGNvbnN0IGNvbmZpcm1lZCA9IGF3YWl0IHNob3dCdXlEaWFsb2coYnV5UGFyYW1zKVxuXHRcdGlmICghY29uZmlybWVkKSByZXR1cm5cblx0XHRhd2FpdCBzaG93UHJvZ3Jlc3NEaWFsb2coXCJwbGVhc2VXYWl0X21zZ1wiLCB0aGlzLm1vZGVsLmV4ZWN1dGVHcm91cEJ1eShkZWFjdGl2YXRlKSlcblx0fVxuXG5cdHByaXZhdGUgcmVuZGVyTmFtZUZpZWxkKCk6IENoaWxkcmVuIHtcblx0XHRyZXR1cm4gbShUZXh0RmllbGQsIHtcblx0XHRcdGxhYmVsOiBcIm5hbWVfbGFiZWxcIixcblx0XHRcdHZhbHVlOiB0aGlzLm1vZGVsLmdldEdyb3VwTmFtZSgpLFxuXHRcdFx0aXNSZWFkT25seTogdHJ1ZSxcblx0XHRcdGluamVjdGlvbnNSaWdodDogKCkgPT5cblx0XHRcdFx0bShJY29uQnV0dG9uLCB7XG5cdFx0XHRcdFx0dGl0bGU6IFwiZWRpdF9hY3Rpb25cIixcblx0XHRcdFx0XHRjbGljazogKCkgPT4gdGhpcy5zaG93Q2hhbmdlTmFtZURpYWxvZygpLFxuXHRcdFx0XHRcdGljb246IEljb25zLkVkaXQsXG5cdFx0XHRcdFx0c2l6ZTogQnV0dG9uU2l6ZS5Db21wYWN0LFxuXHRcdFx0XHR9KSxcblx0XHR9KVxuXHR9XG5cblx0cHJpdmF0ZSBzaG93Q2hhbmdlTmFtZURpYWxvZygpOiB2b2lkIHtcblx0XHREaWFsb2cuc2hvd1Byb2Nlc3NUZXh0SW5wdXREaWFsb2coXG5cdFx0XHR7XG5cdFx0XHRcdHRpdGxlOiBcImVkaXRfYWN0aW9uXCIsXG5cdFx0XHRcdGxhYmVsOiBcIm5hbWVfbGFiZWxcIixcblx0XHRcdFx0ZGVmYXVsdFZhbHVlOiB0aGlzLm1vZGVsLmdldEdyb3VwTmFtZSgpLFxuXHRcdFx0XHRpbnB1dFZhbGlkYXRvcjogKG5ld05hbWUpID0+IHRoaXMubW9kZWwudmFsaWRhdGVHcm91cE5hbWUobmV3TmFtZSksXG5cdFx0XHR9LFxuXHRcdFx0KG5ld05hbWUpID0+IHRoaXMubW9kZWwuY2hhbmdlR3JvdXBOYW1lKG5ld05hbWUpLFxuXHRcdClcblx0fVxuXG5cdHByaXZhdGUgc2hvd0NoYW5nZVNlbmRlck5hbWVEaWFsb2coKTogdm9pZCB7XG5cdFx0RGlhbG9nLnNob3dQcm9jZXNzVGV4dElucHV0RGlhbG9nKFxuXHRcdFx0e1xuXHRcdFx0XHR0aXRsZTogXCJlZGl0X2FjdGlvblwiLFxuXHRcdFx0XHRsYWJlbDogXCJuYW1lX2xhYmVsXCIsXG5cdFx0XHRcdGRlZmF1bHRWYWx1ZTogdGhpcy5tb2RlbC5nZXRHcm91cFNlbmRlck5hbWUoKSxcblx0XHRcdH0sXG5cdFx0XHQobmV3TmFtZSkgPT4gdGhpcy5tb2RlbC5jaGFuZ2VHcm91cFNlbmRlck5hbWUobmV3TmFtZSksXG5cdFx0KVxuXHR9XG5cblx0cHJpdmF0ZSByZW5kZXJVc2VkU3RvcmFnZSgpOiBDaGlsZHJlbiB7XG5cdFx0Y29uc3QgdXNlZFN0b3JhZ2UgPSB0aGlzLm1vZGVsLmdldFVzZWRTdG9yYWdlKClcblx0XHRjb25zdCBmb3JtYXR0ZWRTdG9yYWdlID0gdXNlZFN0b3JhZ2UgPyBmb3JtYXRTdG9yYWdlU2l6ZSh1c2VkU3RvcmFnZSkgOiBsYW5nLmdldChcImxvYWRpbmdfbXNnXCIpXG5cblx0XHRyZXR1cm4gbShUZXh0RmllbGQsIHtcblx0XHRcdGxhYmVsOiBcInN0b3JhZ2VDYXBhY2l0eVVzZWRfbGFiZWxcIixcblx0XHRcdHZhbHVlOiBmb3JtYXR0ZWRTdG9yYWdlLFxuXHRcdFx0aXNSZWFkT25seTogdHJ1ZSxcblx0XHR9KVxuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyBzaG93QWRkTWVtYmVyRGlhbG9nKCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGNvbnN0IHBvc3NpYmxlTWVtYmVycyA9IGF3YWl0IHRoaXMubW9kZWwuZ2V0UG9zc2libGVNZW1iZXJzKClcblx0XHRpZiAocG9zc2libGVNZW1iZXJzLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0cmV0dXJuIERpYWxvZy5tZXNzYWdlKFwibm9WYWxpZE1lbWJlcnNUb0FkZF9tc2dcIilcblx0XHR9XG5cdFx0bGV0IGN1cnJlbnRTZWxlY3Rpb24gPSBnZXRGaXJzdE9yVGhyb3cocG9zc2libGVNZW1iZXJzKS52YWx1ZVxuXG5cdFx0Y29uc3QgYWRkVXNlclRvR3JvdXBPa0FjdGlvbiA9IChkaWFsb2c6IERpYWxvZykgPT4ge1xuXHRcdFx0Ly8gbm9pbnNwZWN0aW9uIEpTSWdub3JlZFByb21pc2VGcm9tQ2FsbFxuXHRcdFx0c2hvd1Byb2dyZXNzRGlhbG9nKFwicGxlYXNlV2FpdF9tc2dcIiwgdGhpcy5tb2RlbC5hZGRVc2VyVG9Hcm91cChjdXJyZW50U2VsZWN0aW9uKSlcblx0XHRcdGRpYWxvZy5jbG9zZSgpXG5cdFx0fVxuXG5cdFx0RGlhbG9nLnNob3dBY3Rpb25EaWFsb2coe1xuXHRcdFx0dGl0bGU6IFwiYWRkVXNlclRvR3JvdXBfbGFiZWxcIixcblx0XHRcdGNoaWxkOiB7XG5cdFx0XHRcdHZpZXc6ICgpID0+XG5cdFx0XHRcdFx0bShEcm9wRG93blNlbGVjdG9yLCB7XG5cdFx0XHRcdFx0XHRsYWJlbDogXCJhY2NvdW50X2xhYmVsXCIsXG5cdFx0XHRcdFx0XHRpdGVtczogcG9zc2libGVNZW1iZXJzLFxuXHRcdFx0XHRcdFx0c2VsZWN0ZWRWYWx1ZTogY3VycmVudFNlbGVjdGlvbixcblx0XHRcdFx0XHRcdHNlbGVjdGlvbkNoYW5nZWRIYW5kbGVyOiAobmV3U2VsZWN0ZWQ6IElkKSA9PiAoY3VycmVudFNlbGVjdGlvbiA9IG5ld1NlbGVjdGVkKSxcblx0XHRcdFx0XHRcdGRyb3Bkb3duV2lkdGg6IDI1MCxcblx0XHRcdFx0XHR9KSxcblx0XHRcdH0sXG5cdFx0XHRhbGxvd09rV2l0aFJldHVybjogdHJ1ZSxcblx0XHRcdG9rQWN0aW9uOiBhZGRVc2VyVG9Hcm91cE9rQWN0aW9uLFxuXHRcdH0pXG5cdH1cblxuXHRhc3luYyBlbnRpdHlFdmVudHNSZWNlaXZlZCh1cGRhdGVzOiBSZWFkb25seUFycmF5PEVudGl0eVVwZGF0ZURhdGE+KTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0cmV0dXJuIHRoaXMubW9kZWwuZW50aXR5RXZlbnRzUmVjZWl2ZWQodXBkYXRlcylcblx0fVxuXG5cdHByaXZhdGUgcmVuZGVyTWVtYmVyc1RhYmxlKCk6IENoaWxkcmVuIHtcblx0XHRpZiAoIXRoaXMubW9kZWwuaXNHcm91cEFjdGl2ZSgpKSByZXR1cm4gbnVsbFxuXG5cdFx0Y29uc3QgYWRkVXNlckJ1dHRvbkF0dHJzOiBJY29uQnV0dG9uQXR0cnMgPSB7XG5cdFx0XHR0aXRsZTogXCJhZGRVc2VyVG9Hcm91cF9sYWJlbFwiLFxuXHRcdFx0Y2xpY2s6ICgpID0+IHRoaXMuc2hvd0FkZE1lbWJlckRpYWxvZygpLFxuXHRcdFx0aWNvbjogSWNvbnMuQWRkLFxuXHRcdFx0c2l6ZTogQnV0dG9uU2l6ZS5Db21wYWN0LFxuXHRcdH0gYXMgY29uc3RcblxuXHRcdGNvbnN0IGxpbmVzOiBUYWJsZUxpbmVBdHRyc1tdID0gdGhpcy5tb2RlbC5nZXRNZW1iZXJzSW5mbygpLm1hcCgodXNlckdyb3VwSW5mbykgPT4ge1xuXHRcdFx0Y29uc3QgcmVtb3ZlQnV0dG9uQXR0cnM6IEljb25CdXR0b25BdHRycyA9IHtcblx0XHRcdFx0dGl0bGU6IFwicmVtb3ZlX2FjdGlvblwiLFxuXHRcdFx0XHRjbGljazogKCkgPT4gc2hvd1Byb2dyZXNzRGlhbG9nKFwicGxlYXNlV2FpdF9tc2dcIiwgdGhpcy5tb2RlbC5yZW1vdmVHcm91cE1lbWJlcih1c2VyR3JvdXBJbmZvKSksXG5cdFx0XHRcdGljb246IEljb25zLkNhbmNlbCxcblx0XHRcdFx0c2l6ZTogQnV0dG9uU2l6ZS5Db21wYWN0LFxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0Y2VsbHM6IFt1c2VyR3JvdXBJbmZvLm5hbWUsIG5ldmVyTnVsbCh1c2VyR3JvdXBJbmZvLm1haWxBZGRyZXNzKV0sXG5cdFx0XHRcdGFjdGlvbkJ1dHRvbkF0dHJzOiByZW1vdmVCdXR0b25BdHRycyxcblx0XHRcdH1cblx0XHR9KVxuXG5cdFx0Y29uc3QgbWVtYmVyc1RhYmxlQXR0cnM6IFRhYmxlQXR0cnMgPSB7XG5cdFx0XHRjb2x1bW5IZWFkaW5nOiBbXCJuYW1lX2xhYmVsXCIsIFwibWFpbEFkZHJlc3NfbGFiZWxcIl0sXG5cdFx0XHRjb2x1bW5XaWR0aHM6IFtDb2x1bW5XaWR0aC5MYXJnZXN0LCBDb2x1bW5XaWR0aC5MYXJnZXN0XSxcblx0XHRcdHNob3dBY3Rpb25CdXR0b25Db2x1bW46IHRydWUsXG5cdFx0XHRhZGRCdXR0b25BdHRyczogYWRkVXNlckJ1dHRvbkF0dHJzLFxuXHRcdFx0bGluZXMsXG5cdFx0fVxuXG5cdFx0cmV0dXJuIFttKFwiLmg1Lm10LWwubWItc1wiLCBsYW5nLmdldChcImdyb3VwTWVtYmVyc19sYWJlbFwiKSksIG0oVGFibGUsIG1lbWJlcnNUYWJsZUF0dHJzKV1cblx0fVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0R3JvdXBUeXBlRGlzcGxheU5hbWUoZ3JvdXBUeXBlOiBOdW1iZXJTdHJpbmcgfCBudWxsKTogc3RyaW5nIHtcblx0aWYgKGdyb3VwVHlwZSA9PSBudWxsKSB7XG5cdFx0cmV0dXJuIFwiXCJcblx0fSBlbHNlIGlmIChncm91cFR5cGUgPT09IEdyb3VwVHlwZS5NYWlsKSB7XG5cdFx0cmV0dXJuIGxhbmcuZ2V0KFwic2hhcmVkTWFpbGJveF9sYWJlbFwiKVxuXHR9IGVsc2UgaWYgKGdyb3VwVHlwZSA9PT0gR3JvdXBUeXBlLlVzZXIpIHtcblx0XHRyZXR1cm4gbGFuZy5nZXQoXCJ1c2VyQ29sdW1uX2xhYmVsXCIpXG5cdH0gZWxzZSBpZiAoZ3JvdXBUeXBlID09PSBHcm91cFR5cGUuVGVtcGxhdGUpIHtcblx0XHRyZXR1cm4gbGFuZy5nZXQoXCJ0ZW1wbGF0ZUdyb3VwX2xhYmVsXCIpXG5cdH0gZWxzZSB7XG5cdFx0cmV0dXJuIGdyb3VwVHlwZSAvLyBqdXN0IGZvciB0ZXN0aW5nXG5cdH1cbn1cbiIsImltcG9ydCBtIGZyb20gXCJtaXRocmlsXCJcbmltcG9ydCB7IERpYWxvZyB9IGZyb20gXCIuLi9ndWkvYmFzZS9EaWFsb2cuanNcIlxuaW1wb3J0IHsgbGFuZywgVHJhbnNsYXRpb25LZXkgfSBmcm9tIFwiLi4vbWlzYy9MYW5ndWFnZVZpZXdNb2RlbC5qc1wiXG5pbXBvcnQgeyBpc01haWxBZGRyZXNzIH0gZnJvbSBcIi4uL21pc2MvRm9ybWF0VmFsaWRhdG9yLmpzXCJcbmltcG9ydCB7IEJvb2tpbmdJdGVtRmVhdHVyZVR5cGUgfSBmcm9tIFwiLi4vYXBpL2NvbW1vbi9UdXRhbm90YUNvbnN0YW50cy5qc1wiXG5pbXBvcnQgeyBjb250YWlucywgZGVsYXksIG9mQ2xhc3MsIHByb21pc2VNYXAgfSBmcm9tIFwiQHR1dGFvL3R1dGFub3RhLXV0aWxzXCJcbmltcG9ydCB7IFByZWNvbmRpdGlvbkZhaWxlZEVycm9yIH0gZnJvbSBcIi4uL2FwaS9jb21tb24vZXJyb3IvUmVzdEVycm9yLmpzXCJcbmltcG9ydCB7IHNob3dCdXlEaWFsb2cgfSBmcm9tIFwiLi4vc3Vic2NyaXB0aW9uL0J1eURpYWxvZy5qc1wiXG5pbXBvcnQgeyBsb2NhdG9yIH0gZnJvbSBcIi4uL2FwaS9tYWluL0NvbW1vbkxvY2F0b3IuanNcIlxuaW1wb3J0IHsgc2hvd1Byb2dyZXNzRGlhbG9nIH0gZnJvbSBcIi4uL2d1aS9kaWFsb2dzL1Byb2dyZXNzRGlhbG9nLmpzXCJcbmltcG9ydCB7IE9wZXJhdGlvbklkIH0gZnJvbSBcIi4uL2FwaS9tYWluL09wZXJhdGlvblByb2dyZXNzVHJhY2tlci5qc1wiXG5pbXBvcnQgeyB0b0ZlYXR1cmVUeXBlIH0gZnJvbSBcIi4uL3N1YnNjcmlwdGlvbi9TdWJzY3JpcHRpb25VdGlscy5qc1wiXG5cbmNvbnN0IGRlbGF5VGltZSA9IDkwMFxudHlwZSBVc2VySW1wb3J0RGV0YWlscyA9IHtcblx0dXNlcm5hbWU6IHN0cmluZyB8IG51bGxcblx0bWFpbEFkZHJlc3M6IHN0cmluZ1xuXHRwYXNzd29yZDogc3RyaW5nXG59XG5leHBvcnQgY29uc3QgQ1NWX1VTRVJfRk9STUFUID0gXCJ1c2VybmFtZTt1c2VyQGRvbWFpbi5jb207cGFzc3dvcmRcIlxuXG5leHBvcnQgZnVuY3Rpb24gY2hlY2tBbmRJbXBvcnRVc2VyRGF0YSh1c2VyRGV0YWlsc0lucHV0Q3N2OiBzdHJpbmcsIGF2YWlsYWJsZURvbWFpbnM6IHN0cmluZ1tdKTogYm9vbGVhbiB7XG5cdGxldCB1c2VyRGF0YSA9IGNzdlRvVXNlckRldGFpbHModXNlckRldGFpbHNJbnB1dENzdilcblxuXHRpZiAoIXVzZXJEYXRhKSB7XG5cdFx0RGlhbG9nLm1lc3NhZ2UoXG5cdFx0XHRsYW5nLmdldFRyYW5zbGF0aW9uKFwid3JvbmdVc2VyQ3N2Rm9ybWF0X21zZ1wiLCB7XG5cdFx0XHRcdFwie2Zvcm1hdH1cIjogQ1NWX1VTRVJfRk9STUFULFxuXHRcdFx0fSksXG5cdFx0KVxuXHRcdHJldHVybiBmYWxzZVxuXHR9IGVsc2Uge1xuXHRcdGNvbnN0IGVycm9yTWVzc2FnZSA9IGNoZWNrQW5kR2V0RXJyb3JNZXNzYWdlKHVzZXJEYXRhLCBhdmFpbGFibGVEb21haW5zKVxuXG5cdFx0aWYgKCFlcnJvck1lc3NhZ2UpIHtcblx0XHRcdGlmICh1c2VyRGF0YS5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdHNob3dCb29raW5nRGlhbG9nKHVzZXJEYXRhKVxuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gdHJ1ZVxuXHRcdH0gZWxzZSB7XG5cdFx0XHREaWFsb2cubWVzc2FnZShsYW5nLm1ha2VUcmFuc2xhdGlvbihcImVycm9yX21zZ1wiLCBlcnJvck1lc3NhZ2UpKVxuXHRcdFx0cmV0dXJuIGZhbHNlXG5cdFx0fVxuXHR9XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgdXNlciBkYXRhIGZyb20gdGhlIGdpdmVuIGNzdiBzdHJpbmcgb3IgbnVsbCBpZiB0aGUgc2N2IHN0cmluZyBpcyBub3QgdmFsaWRcbiAqL1xuZnVuY3Rpb24gY3N2VG9Vc2VyRGV0YWlscyhjc3ZTdHJpbmc6IHN0cmluZyk6IFVzZXJJbXBvcnREZXRhaWxzW10gfCBudWxsIHtcblx0bGV0IGxpbmVzID0gY3N2U3RyaW5nXG5cdFx0LnJlcGxhY2UoXCJcXHJcIiwgXCJcIilcblx0XHQuc3BsaXQoXCJcXG5cIilcblx0XHQuZmlsdGVyKChsKSA9PiBcIlwiICE9PSBsLnRyaW0oKSlcblx0bGV0IGVycm9yID0gZmFsc2Vcblx0bGV0IHVzZXJEYXRhID0gbGluZXMubWFwKChhKSA9PiB7XG5cdFx0bGV0IHBhcnRzID0gYS50cmltKCkuc3BsaXQoXCI7XCIpXG5cblx0XHRpZiAocGFydHMubGVuZ3RoICE9PSAzKSB7XG5cdFx0XHRlcnJvciA9IHRydWVcblx0XHRcdHJldHVybiBudWxsXG5cdFx0fSBlbHNlIHtcblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdHVzZXJuYW1lOiBwYXJ0c1swXSxcblx0XHRcdFx0bWFpbEFkZHJlc3M6IHBhcnRzWzFdLFxuXHRcdFx0XHRwYXNzd29yZDogcGFydHNbMl0sXG5cdFx0XHR9XG5cdFx0fVxuXHR9KVxuXG5cdGlmIChlcnJvcikge1xuXHRcdHJldHVybiBudWxsXG5cdH0gZWxzZSB7XG5cdFx0cmV0dXJuIHVzZXJEYXRhIGFzIGFueVxuXHR9XG59XG5cbi8qKlxuICogQ2hlY2sgdGhlIHVzZXIgZGF0YSBmb3IgdmFsaWRpdHkuIFJldHVybnMgYW4gZXJyb3IgbWVzc2FnZSBmb3IgdGhlIGZpcnN0IHVzZXIgd2l0aCBpbnZhbGlkIGRhdGEsIG90aGVyd2lzZSBudWxsLlxuICovXG5mdW5jdGlvbiBjaGVja0FuZEdldEVycm9yTWVzc2FnZSh1c2VyRGF0YTogVXNlckltcG9ydERldGFpbHNbXSwgYXZhaWxhYmxlRG9tYWluczogc3RyaW5nW10pOiBzdHJpbmcgfCBudWxsIHtcblx0aWYgKHVzZXJEYXRhLmxlbmd0aCA9PT0gMCkge1xuXHRcdHJldHVybiBsYW5nLmdldChcIm5vSW5wdXRXYXNNYWRlX21zZ1wiKVxuXHR9IGVsc2Uge1xuXHRcdGxldCBlcnJvck1lc3NhZ2VBcnJheTogVHJhbnNsYXRpb25LZXlbXSA9IFtdXG5cdFx0bGV0IGVycm9yTWVzc2FnZTogc3RyaW5nIHwgbnVsbCA9IG51bGxcblx0XHR1c2VyRGF0YS5maW5kKCh1LCBpbmRleCkgPT4ge1xuXHRcdFx0bGV0IG1haWxBZGRyZXNzID0gdS5tYWlsQWRkcmVzc1xuXHRcdFx0bGV0IGRvbWFpbiA9IHUubWFpbEFkZHJlc3Muc3BsaXQoXCJAXCIpWzFdLnRvTG93ZXJDYXNlKCkudHJpbSgpXG5cblx0XHRcdGlmICghaXNNYWlsQWRkcmVzcyh1Lm1haWxBZGRyZXNzLCB0cnVlKSkge1xuXHRcdFx0XHRlcnJvck1lc3NhZ2VBcnJheS5wdXNoKFwibWFpbEFkZHJlc3NJbnZhbGlkX21zZ1wiKVxuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIWNvbnRhaW5zKGF2YWlsYWJsZURvbWFpbnMsIGRvbWFpbikpIHtcblx0XHRcdFx0ZXJyb3JNZXNzYWdlQXJyYXkucHVzaChcImN1c3RvbURvbWFpbkVycm9yRG9tYWluTm90QXZhaWxhYmxlX21zZ1wiKVxuXHRcdFx0fVxuXG5cdFx0XHRpZiAodS5wYXNzd29yZC50cmltKCkgPT09IFwiXCIpIHtcblx0XHRcdFx0ZXJyb3JNZXNzYWdlQXJyYXkucHVzaChcImVudGVyTWlzc2luZ1Bhc3N3b3JkX21zZ1wiKVxuXHRcdFx0fVxuXG5cdFx0XHRpZiAodXNlckRhdGEuc29tZSgob3RoZXJVc2VyKSA9PiBvdGhlclVzZXIubWFpbEFkZHJlc3MgPT09IG1haWxBZGRyZXNzICYmIG90aGVyVXNlciAhPT0gdSkpIHtcblx0XHRcdFx0ZXJyb3JNZXNzYWdlQXJyYXkucHVzaChcImR1cGxpY2F0ZWRNYWlsQWRkcmVzc0luVXNlckxpc3RfbXNnXCIpXG5cdFx0XHR9XG5cblx0XHRcdC8vIGNyZWF0ZSBlcnJvciBtc2cgZnJvbSBhbGwgZXJyb3JzIGZvciB0aGlzIHVzZXJcblx0XHRcdGlmIChlcnJvck1lc3NhZ2VBcnJheS5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdGVycm9yTWVzc2FnZSA9XG5cdFx0XHRcdFx0ZXJyb3JNZXNzYWdlQXJyYXkubWFwKChlKSA9PiBsYW5nLmdldChlKSkuam9pbihcIlxcblwiKSArXG5cdFx0XHRcdFx0XCJcXG5cIiArXG5cdFx0XHRcdFx0bGFuZy5nZXQoXCJlcnJvckF0TGluZV9tc2dcIiwge1xuXHRcdFx0XHRcdFx0XCJ7aW5kZXh9XCI6IGluZGV4ICsgMSxcblx0XHRcdFx0XHRcdFwie2Vycm9yfVwiOiBgXCIke3UudXNlcm5hbWUgfHwgXCJcIn07JHt1Lm1haWxBZGRyZXNzIHx8IFwiXCJ9OyR7dS5wYXNzd29yZCB8fCBcIlwifVwiYCxcblx0XHRcdFx0XHR9KVxuXHRcdFx0XHRyZXR1cm4gdHJ1ZVxuXHRcdFx0fVxuXHRcdH0pXG5cdFx0cmV0dXJuIGVycm9yTWVzc2FnZVxuXHR9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHNob3dCb29raW5nRGlhbG9nKHVzZXJEZXRhaWxzQXJyYXk6IFVzZXJJbXBvcnREZXRhaWxzW10pIHtcblx0Ly8gV2Ugc2VuZCBpbmRleCB0byB3b3JrZXIgYW5kIHRoZW4gd29ya2VyIGNhbGN1bGF0ZXMgdGhlIHByb2dyZXNzIGJhc2VkIG9uIHRoZSBpbmRleCBvZiB0aGUgdXNlclxuXHRjb25zdCB1c2VyQ29udHJvbGxlciA9IGxvY2F0b3IubG9naW5zLmdldFVzZXJDb250cm9sbGVyKClcblx0Y29uc3QgcGxhblR5cGUgPSBhd2FpdCB1c2VyQ29udHJvbGxlci5nZXRQbGFuVHlwZSgpXG5cblx0Y29uc3QgYWNjZXB0ZWQgPSBhd2FpdCBzaG93QnV5RGlhbG9nKHtcblx0XHRmZWF0dXJlVHlwZTogKGF3YWl0IHVzZXJDb250cm9sbGVyLmlzTmV3UGFpZFBsYW4oKSkgPyB0b0ZlYXR1cmVUeXBlKHBsYW5UeXBlKSA6IEJvb2tpbmdJdGVtRmVhdHVyZVR5cGUuTGVnYWN5VXNlcnMsXG5cdFx0Ym9va2luZ1RleHQ6IFwiYm9va2luZ0l0ZW1Vc2Vyc0luY2x1ZGluZ19sYWJlbFwiLFxuXHRcdGNvdW50OiB1c2VyRGV0YWlsc0FycmF5Lmxlbmd0aCxcblx0XHRmcmVlQW1vdW50OiAwLFxuXHRcdHJlYWN0aXZhdGU6IGZhbHNlLFxuXHR9KVxuXHRpZiAoIWFjY2VwdGVkKSB7XG5cdFx0cmV0dXJuXG5cdH1cblx0bGV0IG5ick9mQ3JlYXRlZFVzZXJzID0gMFxuXHRsZXQgbm90QXZhaWxhYmxlVXNlcnM6IFVzZXJJbXBvcnREZXRhaWxzW10gPSBbXVxuXHRjb25zdCBvcGVyYXRpb24gPSBsb2NhdG9yLm9wZXJhdGlvblByb2dyZXNzVHJhY2tlci5zdGFydE5ld09wZXJhdGlvbigpXG5cdGF3YWl0IHNob3dQcm9ncmVzc0RpYWxvZyhcblx0XHRsYW5nLmdldFRyYW5zbGF0aW9uKFwiY3JlYXRlQWN0aW9uU3RhdHVzX21zZ1wiLCB7XG5cdFx0XHRcIntpbmRleH1cIjogbmJyT2ZDcmVhdGVkVXNlcnMsXG5cdFx0XHRcIntjb3VudH1cIjogdXNlckRldGFpbHNBcnJheS5sZW5ndGgsXG5cdFx0fSksXG5cdFx0cHJvbWlzZU1hcCh1c2VyRGV0YWlsc0FycmF5LCAodXNlciwgdXNlckluZGV4KSA9PiB7XG5cdFx0XHRyZXR1cm4gY3JlYXRlVXNlcklmTWFpbEFkZHJlc3NBdmFpbGFibGUodXNlciwgdXNlckluZGV4LCB1c2VyRGV0YWlsc0FycmF5Lmxlbmd0aCwgb3BlcmF0aW9uLmlkKS50aGVuKChjcmVhdGVkKSA9PiB7XG5cdFx0XHRcdGlmIChjcmVhdGVkKSB7XG5cdFx0XHRcdFx0bmJyT2ZDcmVhdGVkVXNlcnMrK1xuXHRcdFx0XHRcdG0ucmVkcmF3KClcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRub3RBdmFpbGFibGVVc2Vycy5wdXNoKHVzZXIpXG5cdFx0XHRcdH1cblx0XHRcdH0pXG5cdFx0fSksXG5cdFx0b3BlcmF0aW9uLnByb2dyZXNzLFxuXHQpXG5cdFx0LmNhdGNoKG9mQ2xhc3MoUHJlY29uZGl0aW9uRmFpbGVkRXJyb3IsICgpID0+IERpYWxvZy5tZXNzYWdlKFwiY3JlYXRlVXNlckZhaWxlZF9tc2dcIikpKVxuXHRcdC5maW5hbGx5KCgpID0+IG9wZXJhdGlvbi5kb25lKVxuXG5cdGlmIChub3RBdmFpbGFibGVVc2Vycy5sZW5ndGggPiAwKSB7XG5cdFx0YXdhaXQgRGlhbG9nLm1lc3NhZ2UoXG5cdFx0XHRsYW5nLm1ha2VUcmFuc2xhdGlvbihcblx0XHRcdFx0XCJhZGRyZXNzZXNBbHJlYWR5SW5Vc2VfbXNnXCIsXG5cdFx0XHRcdGxhbmcuZ2V0KFwiYWRkcmVzc2VzQWxyZWFkeUluVXNlX21zZ1wiKSArIFwiIFwiICsgbm90QXZhaWxhYmxlVXNlcnMubWFwKCh1KSA9PiB1Lm1haWxBZGRyZXNzKS5qb2luKFwiLCBcIiksXG5cdFx0XHQpLFxuXHRcdClcblx0fVxuXG5cdGF3YWl0IERpYWxvZy5tZXNzYWdlKFxuXHRcdGxhbmcuZ2V0VHJhbnNsYXRpb24oXCJjcmVhdGVkVXNlcnNDb3VudF9tc2dcIiwge1xuXHRcdFx0XCJ7MX1cIjogbmJyT2ZDcmVhdGVkVXNlcnMsXG5cdFx0fSksXG5cdClcbn1cblxuLyoqXG4gKiBAcmV0dXJucyBUcnVlIGlmIHRoZSB1c2VyIHdhcyBjcmVhdGVkLCBmYWxzZSBpZiB0aGUgZW1haWwgYWRkcmVzcyBpcyBub3QgYXZhaWxhYmxlLlxuICovXG5mdW5jdGlvbiBjcmVhdGVVc2VySWZNYWlsQWRkcmVzc0F2YWlsYWJsZSh1c2VyOiBVc2VySW1wb3J0RGV0YWlscywgaW5kZXg6IG51bWJlciwgb3ZlcmFsbE51bWJlck9mVXNlcnM6IG51bWJlciwgb3BlcmF0aW9uSWQ6IE9wZXJhdGlvbklkKTogUHJvbWlzZTxib29sZWFuPiB7XG5cdGxldCBjbGVhbk1haWxBZGRyZXNzID0gdXNlci5tYWlsQWRkcmVzcy50cmltKCkudG9Mb3dlckNhc2UoKVxuXHRyZXR1cm4gbG9jYXRvci5tYWlsQWRkcmVzc0ZhY2FkZS5pc01haWxBZGRyZXNzQXZhaWxhYmxlKGNsZWFuTWFpbEFkZHJlc3MpLnRoZW4oYXN5bmMgKGF2YWlsYWJsZSkgPT4ge1xuXHRcdGlmIChhdmFpbGFibGUpIHtcblx0XHRcdC8vIHdlIGRvbid0IHVzZSBpdCBjdXJyZW50bHlcblxuXHRcdFx0cmV0dXJuIGxvY2F0b3IudXNlck1hbmFnZW1lbnRGYWNhZGVcblx0XHRcdFx0LmNyZWF0ZVVzZXIodXNlci51c2VybmFtZSA/IHVzZXIudXNlcm5hbWUgOiBcIlwiLCBjbGVhbk1haWxBZGRyZXNzLCB1c2VyLnBhc3N3b3JkLCBpbmRleCwgb3ZlcmFsbE51bWJlck9mVXNlcnMsIG9wZXJhdGlvbklkKVxuXHRcdFx0XHQudGhlbigoKSA9PiB7XG5cdFx0XHRcdFx0Ly8gZGVsYXkgaXMgbmVlZGVkIHNvIHRoYXQgdGhlcmUgYXJlIG5vdCB0b28gbWFueSByZXF1ZXN0cyBmcm9tIGlzTWFpbEFkZHJlc3NBdmFpbGFibGUgc2VydmljZSBpZiB1c2VycyBhciBub3QgYXZhaWxhYmxlIChhcmUgbm90IGNyZWF0ZWQpXG5cdFx0XHRcdFx0cmV0dXJuIGRlbGF5KGRlbGF5VGltZSkudGhlbigoKSA9PiB0cnVlKVxuXHRcdFx0XHR9KVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZXR1cm4gZGVsYXkoZGVsYXlUaW1lKS50aGVuKCgpID0+IGZhbHNlKVxuXHRcdH1cblx0fSlcbn1cbiIsImltcG9ydCBtLCB7IENoaWxkcmVuIH0gZnJvbSBcIm1pdGhyaWxcIlxuaW1wb3J0IHsgYXNzZXJ0TWFpbk9yTm9kZSB9IGZyb20gXCIuLi9hcGkvY29tbW9uL0Vudi5qc1wiXG5pbXBvcnQgeyBEaWFsb2cgfSBmcm9tIFwiLi4vZ3VpL2Jhc2UvRGlhbG9nLmpzXCJcbmltcG9ydCB7IGZvcm1hdERhdGVXaXRoTW9udGgsIGZvcm1hdFN0b3JhZ2VTaXplIH0gZnJvbSBcIi4uL21pc2MvRm9ybWF0dGVyLmpzXCJcbmltcG9ydCB7IGxhbmcgfSBmcm9tIFwiLi4vbWlzYy9MYW5ndWFnZVZpZXdNb2RlbC5qc1wiXG5pbXBvcnQgdHlwZSB7IEN1c3RvbWVyLCBHcm91cEluZm8sIEdyb3VwTWVtYmVyc2hpcCwgVXNlciB9IGZyb20gXCIuLi9hcGkvZW50aXRpZXMvc3lzL1R5cGVSZWZzLmpzXCJcbmltcG9ydCB7IEdyb3VwSW5mb1R5cGVSZWYsIEdyb3VwVHlwZVJlZiwgVXNlclR5cGVSZWYgfSBmcm9tIFwiLi4vYXBpL2VudGl0aWVzL3N5cy9UeXBlUmVmcy5qc1wiXG5pbXBvcnQgeyBhc3luY0ZpbmQsIGdldEZpcnN0T3JUaHJvdywgTGF6eUxvYWRlZCwgbmV2ZXJOdWxsLCBvZkNsYXNzLCBwcm9taXNlTWFwIH0gZnJvbSBcIkB0dXRhby90dXRhbm90YS11dGlsc1wiXG5pbXBvcnQgeyBCb29raW5nSXRlbUZlYXR1cmVUeXBlLCBHcm91cFR5cGUsIE9wZXJhdGlvblR5cGUgfSBmcm9tIFwiLi4vYXBpL2NvbW1vbi9UdXRhbm90YUNvbnN0YW50cy5qc1wiXG5pbXBvcnQgeyBCYWRSZXF1ZXN0RXJyb3IsIE5vdEF1dGhvcml6ZWRFcnJvciwgUHJlY29uZGl0aW9uRmFpbGVkRXJyb3IgfSBmcm9tIFwiLi4vYXBpL2NvbW1vbi9lcnJvci9SZXN0RXJyb3IuanNcIlxuaW1wb3J0IHsgQ29sdW1uV2lkdGgsIFRhYmxlLCBUYWJsZUF0dHJzIH0gZnJvbSBcIi4uL2d1aS9iYXNlL1RhYmxlLmpzXCJcbmltcG9ydCB7IGdldEdyb3VwVHlwZURpc3BsYXlOYW1lIH0gZnJvbSBcIi4vZ3JvdXBzL0dyb3VwRGV0YWlsc1ZpZXcuanNcIlxuaW1wb3J0IHsgSWNvbnMgfSBmcm9tIFwiLi4vZ3VpL2Jhc2UvaWNvbnMvSWNvbnMuanNcIlxuaW1wb3J0IHsgU2Vjb25kRmFjdG9yc0VkaXRGb3JtIH0gZnJvbSBcIi4vbG9naW4vc2Vjb25kZmFjdG9yL1NlY29uZEZhY3RvcnNFZGl0Rm9ybS5qc1wiXG5pbXBvcnQgeyBzaG93UHJvZ3Jlc3NEaWFsb2cgfSBmcm9tIFwiLi4vZ3VpL2RpYWxvZ3MvUHJvZ3Jlc3NEaWFsb2cuanNcIlxuXG5pbXBvcnQgeyBIdG1sRWRpdG9yIGFzIEVkaXRvciwgSHRtbEVkaXRvck1vZGUgfSBmcm9tIFwiLi4vZ3VpL2VkaXRvci9IdG1sRWRpdG9yLmpzXCJcbmltcG9ydCB7IGNoZWNrQW5kSW1wb3J0VXNlckRhdGEsIENTVl9VU0VSX0ZPUk1BVCB9IGZyb20gXCIuL0ltcG9ydFVzZXJzVmlld2VyLmpzXCJcbmltcG9ydCB7IE1haWxBZGRyZXNzVGFibGUgfSBmcm9tIFwiLi9tYWlsYWRkcmVzcy9NYWlsQWRkcmVzc1RhYmxlLmpzXCJcbmltcG9ydCB7IGNvbXBhcmVHcm91cEluZm9zLCBnZXRHcm91cEluZm9EaXNwbGF5TmFtZSB9IGZyb20gXCIuLi9hcGkvY29tbW9uL3V0aWxzL0dyb3VwVXRpbHMuanNcIlxuaW1wb3J0IHsgaXNTYW1lSWQgfSBmcm9tIFwiLi4vYXBpL2NvbW1vbi91dGlscy9FbnRpdHlVdGlscy5qc1wiXG5pbXBvcnQgeyBzaG93QnV5RGlhbG9nIH0gZnJvbSBcIi4uL3N1YnNjcmlwdGlvbi9CdXlEaWFsb2cuanNcIlxuaW1wb3J0IHsgVGV4dEZpZWxkIH0gZnJvbSBcIi4uL2d1aS9iYXNlL1RleHRGaWVsZC5qc1wiXG5pbXBvcnQgeyBsb2NhdG9yIH0gZnJvbSBcIi4uL2FwaS9tYWluL0NvbW1vbkxvY2F0b3IuanNcIlxuaW1wb3J0IHsgRHJvcERvd25TZWxlY3RvciB9IGZyb20gXCIuLi9ndWkvYmFzZS9Ecm9wRG93blNlbGVjdG9yLmpzXCJcbmltcG9ydCB7IHNob3dDaGFuZ2VPd25QYXNzd29yZERpYWxvZywgc2hvd0NoYW5nZVVzZXJQYXNzd29yZEFzQWRtaW5EaWFsb2cgfSBmcm9tIFwiLi9sb2dpbi9DaGFuZ2VQYXNzd29yZERpYWxvZ3MuanNcIlxuaW1wb3J0IHsgSWNvbkJ1dHRvbiwgSWNvbkJ1dHRvbkF0dHJzIH0gZnJvbSBcIi4uL2d1aS9iYXNlL0ljb25CdXR0b24uanNcIlxuaW1wb3J0IHsgQnV0dG9uU2l6ZSB9IGZyb20gXCIuLi9ndWkvYmFzZS9CdXR0b25TaXplLmpzXCJcbmltcG9ydCB7IE1haWxBZGRyZXNzVGFibGVNb2RlbCB9IGZyb20gXCIuL21haWxhZGRyZXNzL01haWxBZGRyZXNzVGFibGVNb2RlbC5qc1wiXG5pbXBvcnQgeyBwcm9ncmVzc0ljb24gfSBmcm9tIFwiLi4vZ3VpL2Jhc2UvSWNvbi5qc1wiXG5pbXBvcnQgeyB0b0ZlYXR1cmVUeXBlIH0gZnJvbSBcIi4uL3N1YnNjcmlwdGlvbi9TdWJzY3JpcHRpb25VdGlscy5qc1wiXG5pbXBvcnQgeyBFbnRpdHlVcGRhdGVEYXRhLCBpc1VwZGF0ZUZvclR5cGVSZWYgfSBmcm9tIFwiLi4vYXBpL2NvbW1vbi91dGlscy9FbnRpdHlVcGRhdGVVdGlscy5qc1wiXG5pbXBvcnQgeyBVcGRhdGFibGVTZXR0aW5nc0RldGFpbHNWaWV3ZXIgfSBmcm9tIFwiLi9JbnRlcmZhY2VzLmpzXCJcblxuYXNzZXJ0TWFpbk9yTm9kZSgpXG5cbmV4cG9ydCBjbGFzcyBVc2VyVmlld2VyIGltcGxlbWVudHMgVXBkYXRhYmxlU2V0dGluZ3NEZXRhaWxzVmlld2VyIHtcblx0cHJpdmF0ZSByZWFkb25seSB1c2VyOiBMYXp5TG9hZGVkPFVzZXI+ID0gbmV3IExhenlMb2FkZWQoKCkgPT4gdGhpcy5sb2FkVXNlcigpKVxuXHRwcml2YXRlIHJlYWRvbmx5IGN1c3RvbWVyID0gbmV3IExhenlMb2FkZWQoKCkgPT4gdGhpcy5sb2FkQ3VzdG9tZXIoKSlcblx0cHJpdmF0ZSByZWFkb25seSB0ZWFtR3JvdXBJbmZvcyA9IG5ldyBMYXp5TG9hZGVkKCgpID0+IHRoaXMubG9hZFRlYW1Hcm91cEluZm9zKCkpXG5cdHByaXZhdGUgZ3JvdXBzVGFibGVBdHRyczogVGFibGVBdHRycyB8IG51bGwgPSBudWxsXG5cdHByaXZhdGUgcmVhZG9ubHkgc2Vjb25kRmFjdG9yc0Zvcm06IFNlY29uZEZhY3RvcnNFZGl0Rm9ybVxuXHRwcml2YXRlIHVzZWRTdG9yYWdlOiBudW1iZXIgfCBudWxsID0gbnVsbFxuXHRwcml2YXRlIG1haWxBZGRyZXNzVGFibGVNb2RlbDogTWFpbEFkZHJlc3NUYWJsZU1vZGVsIHwgbnVsbCA9IG51bGxcblx0cHJpdmF0ZSBtYWlsQWRkcmVzc1RhYmxlRXhwYW5kZWQ6IGJvb2xlYW5cblxuXHRjb25zdHJ1Y3RvcihwdWJsaWMgdXNlckdyb3VwSW5mbzogR3JvdXBJbmZvLCBwcml2YXRlIGlzQWRtaW46IGJvb2xlYW4pIHtcblx0XHR0aGlzLnVzZXJHcm91cEluZm8gPSB1c2VyR3JvdXBJbmZvXG5cblx0XHR0aGlzLm1haWxBZGRyZXNzVGFibGVFeHBhbmRlZCA9IGZhbHNlXG5cblx0XHR0aGlzLnNlY29uZEZhY3RvcnNGb3JtID0gbmV3IFNlY29uZEZhY3RvcnNFZGl0Rm9ybShcblx0XHRcdHRoaXMudXNlcixcblx0XHRcdGxvY2F0b3IuZG9tYWluQ29uZmlnUHJvdmlkZXIoKSxcblx0XHRcdGxvY2F0b3IubG9naW5GYWNhZGUsXG5cdFx0XHR0aGlzLmlzQWRtaW4sXG5cdFx0XHQhIXRoaXMudXNlckdyb3VwSW5mby5kZWxldGVkLFxuXHRcdClcblxuXHRcdHRoaXMudGVhbUdyb3VwSW5mb3MuZ2V0QXN5bmMoKS50aGVuKGFzeW5jIChhdmFpbGFibGVUZWFtR3JvdXBJbmZvcykgPT4ge1xuXHRcdFx0aWYgKGF2YWlsYWJsZVRlYW1Hcm91cEluZm9zLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0dGhpcy5ncm91cHNUYWJsZUF0dHJzID0ge1xuXHRcdFx0XHRcdGNvbHVtbkhlYWRpbmc6IFtcIm5hbWVfbGFiZWxcIiwgXCJncm91cFR5cGVfbGFiZWxcIl0sXG5cdFx0XHRcdFx0Y29sdW1uV2lkdGhzOiBbQ29sdW1uV2lkdGguTGFyZ2VzdCwgQ29sdW1uV2lkdGguU21hbGxdLFxuXHRcdFx0XHRcdHNob3dBY3Rpb25CdXR0b25Db2x1bW46IHRydWUsXG5cdFx0XHRcdFx0YWRkQnV0dG9uQXR0cnM6IHtcblx0XHRcdFx0XHRcdHRpdGxlOiBcImFkZEdyb3VwX2xhYmVsXCIsXG5cdFx0XHRcdFx0XHRpY29uOiBJY29ucy5BZGQsXG5cdFx0XHRcdFx0XHRjbGljazogKCkgPT4gdGhpcy5zaG93QWRkVXNlclRvR3JvdXBEaWFsb2coKSxcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdGxpbmVzOiBbXSxcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGF3YWl0IHRoaXMudXBkYXRlR3JvdXBzKClcblx0XHRcdH1cblx0XHR9KVxuXG5cdFx0dGhpcy51c2VyLmdldEFzeW5jKCkudGhlbihhc3luYyAodXNlcikgPT4ge1xuXHRcdFx0Y29uc3QgbWFpbE1lbWJlcnNoaXAgPSBhd2FpdCBhc3luY0ZpbmQodXNlci5tZW1iZXJzaGlwcywgYXN5bmMgKHNoaXApID0+IHtcblx0XHRcdFx0cmV0dXJuIHNoaXAuZ3JvdXBUeXBlID09PSBHcm91cFR5cGUuTWFpbCAmJiAoYXdhaXQgbG9jYXRvci5lbnRpdHlDbGllbnQubG9hZChHcm91cFR5cGVSZWYsIHNoaXAuZ3JvdXApKS51c2VyID09PSB1c2VyLl9pZFxuXHRcdFx0fSlcblx0XHRcdGlmIChtYWlsTWVtYmVyc2hpcCA9PSBudWxsKSB7XG5cdFx0XHRcdGNvbnNvbGUuZXJyb3IoXCJVc2VyIGRvZXNuJ3QgaGF2ZSBhIG1haWxib3g/XCIsIHVzZXIuX2lkKVxuXHRcdFx0XHRyZXR1cm5cblx0XHRcdH1cblx0XHRcdHRoaXMubWFpbEFkZHJlc3NUYWJsZU1vZGVsID0gdGhpcy5pc0l0TWUoKVxuXHRcdFx0XHQ/IGF3YWl0IGxvY2F0b3IubWFpbEFkZHJlc3NUYWJsZU1vZGVsRm9yT3duTWFpbGJveCgpXG5cdFx0XHRcdDogYXdhaXQgbG9jYXRvci5tYWlsQWRkcmVzc1RhYmxlTW9kZWxGb3JBZG1pbihtYWlsTWVtYmVyc2hpcC5ncm91cCwgdXNlci5faWQsIHRoaXMudXNlckdyb3VwSW5mbylcblx0XHRcdG0ucmVkcmF3KClcblx0XHR9KVxuXG5cdFx0dGhpcy51cGRhdGVVc2VkU3RvcmFnZUFuZEFkbWluRmxhZygpXG5cdH1cblxuXHRyZW5kZXJWaWV3KCk6IENoaWxkcmVuIHtcblx0XHRjb25zdCBjaGFuZ2VQYXNzd29yZEJ1dHRvbkF0dHJzOiBJY29uQnV0dG9uQXR0cnMgPSB7XG5cdFx0XHR0aXRsZTogXCJjaGFuZ2VQYXNzd29yZF9sYWJlbFwiLFxuXHRcdFx0Y2xpY2s6ICgpID0+IHRoaXMuY2hhbmdlUGFzc3dvcmQoKSxcblx0XHRcdGljb246IEljb25zLkVkaXQsXG5cdFx0XHRzaXplOiBCdXR0b25TaXplLkNvbXBhY3QsXG5cdFx0fSBhcyBjb25zdFxuXHRcdGNvbnN0IHBhc3N3b3JkRmllbGRBdHRycyA9IHtcblx0XHRcdGxhYmVsOiBcInBhc3N3b3JkX2xhYmVsXCIsXG5cdFx0XHR2YWx1ZTogXCIqKipcIixcblx0XHRcdGluamVjdGlvbnNSaWdodDogKCkgPT4gW20oSWNvbkJ1dHRvbiwgY2hhbmdlUGFzc3dvcmRCdXR0b25BdHRycyldLFxuXHRcdFx0aXNSZWFkT25seTogdHJ1ZSxcblx0XHR9IGFzIGNvbnN0XG5cdFx0cmV0dXJuIG0oXCIjdXNlci12aWV3ZXIuZmlsbC1hYnNvbHV0ZS5zY3JvbGwucGxyLWwucGItZmxvYXRpbmdcIiwgW1xuXHRcdFx0bShcIi5oNC5tdC1sXCIsIGxhbmcuZ2V0KFwidXNlclNldHRpbmdzX2xhYmVsXCIpKSxcblx0XHRcdG0oXCJcIiwgW1xuXHRcdFx0XHRtKFRleHRGaWVsZCwge1xuXHRcdFx0XHRcdGxhYmVsOiBcIm1haWxBZGRyZXNzX2xhYmVsXCIsXG5cdFx0XHRcdFx0dmFsdWU6IHRoaXMudXNlckdyb3VwSW5mby5tYWlsQWRkcmVzcyA/PyBcIlwiLFxuXHRcdFx0XHRcdGlzUmVhZE9ubHk6IHRydWUsXG5cdFx0XHRcdH0pLFxuXHRcdFx0XHRtKFRleHRGaWVsZCwge1xuXHRcdFx0XHRcdGxhYmVsOiBcImNyZWF0ZWRfbGFiZWxcIixcblx0XHRcdFx0XHR2YWx1ZTogZm9ybWF0RGF0ZVdpdGhNb250aCh0aGlzLnVzZXJHcm91cEluZm8uY3JlYXRlZCksXG5cdFx0XHRcdFx0aXNSZWFkT25seTogdHJ1ZSxcblx0XHRcdFx0fSksXG5cdFx0XHRcdG0oVGV4dEZpZWxkLCB7XG5cdFx0XHRcdFx0bGFiZWw6IFwic3RvcmFnZUNhcGFjaXR5VXNlZF9sYWJlbFwiLFxuXHRcdFx0XHRcdHZhbHVlOiB0aGlzLnVzZWRTdG9yYWdlID8gZm9ybWF0U3RvcmFnZVNpemUodGhpcy51c2VkU3RvcmFnZSkgOiBsYW5nLmdldChcImxvYWRpbmdfbXNnXCIpLFxuXHRcdFx0XHRcdGlzUmVhZE9ubHk6IHRydWUsXG5cdFx0XHRcdH0gYXMgY29uc3QpLFxuXHRcdFx0XSksXG5cdFx0XHRtKFwiXCIsIFtcblx0XHRcdFx0dGhpcy5yZW5kZXJOYW1lKCksXG5cdFx0XHRcdG0oVGV4dEZpZWxkLCBwYXNzd29yZEZpZWxkQXR0cnMpLFxuXHRcdFx0XHRsb2NhdG9yLmxvZ2lucy5nZXRVc2VyQ29udHJvbGxlcigpLmlzR2xvYmFsQWRtaW4oKSA/IHRoaXMucmVuZGVyQWRtaW5TdGF0dXNTZWxlY3RvcigpIDogbnVsbCxcblx0XHRcdFx0dGhpcy5yZW5kZXJVc2VyU3RhdHVzU2VsZWN0b3IoKSxcblx0XHRcdF0pLFxuXHRcdFx0bSh0aGlzLnNlY29uZEZhY3RvcnNGb3JtKSxcblx0XHRcdHRoaXMuZ3JvdXBzVGFibGVBdHRycyA/IG0oXCIuaDQubXQtbC5tYi1zXCIsIGxhbmcuZ2V0KFwiZ3JvdXBzX2xhYmVsXCIpKSA6IG51bGwsXG5cdFx0XHR0aGlzLmdyb3Vwc1RhYmxlQXR0cnMgPyBtKFRhYmxlLCB0aGlzLmdyb3Vwc1RhYmxlQXR0cnMpIDogbnVsbCxcblx0XHRcdHRoaXMubWFpbEFkZHJlc3NUYWJsZU1vZGVsXG5cdFx0XHRcdD8gbShNYWlsQWRkcmVzc1RhYmxlLCB7XG5cdFx0XHRcdFx0XHRtb2RlbDogdGhpcy5tYWlsQWRkcmVzc1RhYmxlTW9kZWwsXG5cdFx0XHRcdFx0XHRleHBhbmRlZDogdGhpcy5tYWlsQWRkcmVzc1RhYmxlRXhwYW5kZWQsXG5cdFx0XHRcdFx0XHRvbkV4cGFuZGVkOiAobmV3RXhwYW5kZWQpID0+ICh0aGlzLm1haWxBZGRyZXNzVGFibGVFeHBhbmRlZCA9IG5ld0V4cGFuZGVkKSxcblx0XHRcdFx0ICB9KVxuXHRcdFx0XHQ6IHByb2dyZXNzSWNvbigpLFxuXHRcdF0pXG5cdH1cblxuXHRwcml2YXRlIHJlbmRlck5hbWUoKTogQ2hpbGRyZW4ge1xuXHRcdGNvbnN0IG5hbWUgPSB0aGlzLnVzZXJHcm91cEluZm8ubmFtZVxuXHRcdHJldHVybiBtKFRleHRGaWVsZCwge1xuXHRcdFx0bGFiZWw6IFwibmFtZV9sYWJlbFwiLFxuXHRcdFx0dmFsdWU6IG5hbWUsXG5cdFx0XHRpc1JlYWRPbmx5OiB0cnVlLFxuXHRcdFx0aW5qZWN0aW9uc1JpZ2h0OiAoKSA9PlxuXHRcdFx0XHRtKEljb25CdXR0b24sIHtcblx0XHRcdFx0XHR0aXRsZTogXCJlZGl0X2FjdGlvblwiLFxuXHRcdFx0XHRcdGNsaWNrOiAoKSA9PiB0aGlzLm9uQ2hhbmdlTmFtZShuYW1lKSxcblx0XHRcdFx0XHRpY29uOiBJY29ucy5FZGl0LFxuXHRcdFx0XHRcdHNpemU6IEJ1dHRvblNpemUuQ29tcGFjdCxcblx0XHRcdFx0fSksXG5cdFx0fSlcblx0fVxuXG5cdHByaXZhdGUgb25DaGFuZ2VOYW1lKG5hbWU6IHN0cmluZykge1xuXHRcdERpYWxvZy5zaG93UHJvY2Vzc1RleHRJbnB1dERpYWxvZyhcblx0XHRcdHtcblx0XHRcdFx0dGl0bGU6IFwiZWRpdF9hY3Rpb25cIixcblx0XHRcdFx0bGFiZWw6IFwibmFtZV9sYWJlbFwiLFxuXHRcdFx0XHRkZWZhdWx0VmFsdWU6IG5hbWUsXG5cdFx0XHR9LFxuXHRcdFx0KG5ld05hbWUpID0+IHtcblx0XHRcdFx0dGhpcy51c2VyR3JvdXBJbmZvLm5hbWUgPSBuZXdOYW1lXG5cdFx0XHRcdHJldHVybiBsb2NhdG9yLmVudGl0eUNsaWVudC51cGRhdGUodGhpcy51c2VyR3JvdXBJbmZvKVxuXHRcdFx0fSxcblx0XHQpXG5cdH1cblxuXHRwcml2YXRlIHJlbmRlckFkbWluU3RhdHVzU2VsZWN0b3IoKTogQ2hpbGRyZW4ge1xuXHRcdHJldHVybiBtKERyb3BEb3duU2VsZWN0b3IsIHtcblx0XHRcdGxhYmVsOiBcImdsb2JhbEFkbWluX2xhYmVsXCIsXG5cdFx0XHRpdGVtczogW1xuXHRcdFx0XHR7XG5cdFx0XHRcdFx0bmFtZTogbGFuZy5nZXQoXCJub19sYWJlbFwiKSxcblx0XHRcdFx0XHR2YWx1ZTogZmFsc2UsXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRuYW1lOiBsYW5nLmdldChcInllc19sYWJlbFwiKSxcblx0XHRcdFx0XHR2YWx1ZTogdHJ1ZSxcblx0XHRcdFx0fSxcblx0XHRcdF0sXG5cdFx0XHRzZWxlY3RlZFZhbHVlOiB0aGlzLmlzQWRtaW4sXG5cdFx0XHRzZWxlY3Rpb25DaGFuZ2VkSGFuZGxlcjogKHZhbHVlOiBib29sZWFuKSA9PiB7XG5cdFx0XHRcdGlmICh0aGlzLnVzZXJHcm91cEluZm8uZGVsZXRlZCkge1xuXHRcdFx0XHRcdERpYWxvZy5tZXNzYWdlKFwidXNlckFjY291bnREZWFjdGl2YXRlZF9tc2dcIilcblx0XHRcdFx0fSBlbHNlIGlmICh0aGlzLmlzSXRNZSgpKSB7XG5cdFx0XHRcdFx0RGlhbG9nLm1lc3NhZ2UoXCJyZW1vdmVPd25BZG1pbkZsYWdJbmZvX21zZ1wiKVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHNob3dQcm9ncmVzc0RpYWxvZyhcblx0XHRcdFx0XHRcdFwicGxlYXNlV2FpdF9tc2dcIixcblx0XHRcdFx0XHRcdHRoaXMudXNlclxuXHRcdFx0XHRcdFx0XHQuZ2V0QXN5bmMoKVxuXHRcdFx0XHRcdFx0XHQudGhlbigodXNlcikgPT4gbG9jYXRvci51c2VyTWFuYWdlbWVudEZhY2FkZS5jaGFuZ2VBZG1pbkZsYWcodXNlciwgdmFsdWUpKVxuXHRcdFx0XHRcdFx0XHQuY2F0Y2goXG5cdFx0XHRcdFx0XHRcdFx0b2ZDbGFzcyhQcmVjb25kaXRpb25GYWlsZWRFcnJvciwgKGUpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRcdGlmIChlLmRhdGEgJiYgZS5kYXRhID09PSBcInVzZXJncm91cC5wZW5kaW5nLWtleS1yb3RhdGlvblwiKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdERpYWxvZy5tZXNzYWdlKFwibWFrZUFkbWluUGVuZGluZ1VzZXJHcm91cEtleVJvdGF0aW9uRXJyb3JfbXNnXCIpXG5cdFx0XHRcdFx0XHRcdFx0XHR9IGVsc2UgaWYgKGUuZGF0YSA9PT0gXCJtdWx0aWFkbWluZ3JvdXAucGVuZGluZy1rZXktcm90YXRpb25cIikge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyB3aGVuIGEgbXVsdGkgYWRtaW4ga2V5IHJvdGF0aW9uIGlzIHNjaGVkdWxlZCB3ZSBkbyBub3Qgd2FudCB0byBpbnRyb2R1Y2UgbmV3IG1lbWJlcnMgaW50byB0aGUgYWRtaW4gZ3JvdXBcblx0XHRcdFx0XHRcdFx0XHRcdFx0RGlhbG9nLm1lc3NhZ2UoXCJjYW5ub3RBZGRBZG1pbldoZW5NdWx0aUFkbWluS2V5Um90YXRpb25TY2hlZHVsZWRfbXNnXCIpXG5cdFx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR0aHJvdyBlXG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0fSksXG5cdFx0XHRcdFx0XHRcdCksXG5cdFx0XHRcdFx0KVxuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdH0pXG5cdH1cblxuXHRwcml2YXRlIHJlbmRlclVzZXJTdGF0dXNTZWxlY3RvcigpOiBDaGlsZHJlbiB7XG5cdFx0cmV0dXJuIG0oRHJvcERvd25TZWxlY3Rvciwge1xuXHRcdFx0bGFiZWw6IFwic3RhdGVfbGFiZWxcIixcblx0XHRcdGl0ZW1zOiBbXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRuYW1lOiBsYW5nLmdldChcImFjdGl2YXRlZF9sYWJlbFwiKSxcblx0XHRcdFx0XHR2YWx1ZTogdHJ1ZSxcblx0XHRcdFx0fSxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdG5hbWU6IGxhbmcuZ2V0KFwiZGVhY3RpdmF0ZWRfbGFiZWxcIiksXG5cdFx0XHRcdFx0dmFsdWU6IGZhbHNlLFxuXHRcdFx0XHR9LFxuXHRcdFx0XSxcblx0XHRcdHNlbGVjdGVkVmFsdWU6IHRoaXMudXNlckdyb3VwSW5mby5kZWxldGVkID09IG51bGwsXG5cdFx0XHRzZWxlY3Rpb25DaGFuZ2VkSGFuZGxlcjogKGFjdGl2YXRlOiBib29sZWFuKSA9PiB7XG5cdFx0XHRcdGlmICh0aGlzLmlzQWRtaW4pIHtcblx0XHRcdFx0XHREaWFsb2cubWVzc2FnZShcImRlYWN0aXZhdGVPd25BY2NvdW50SW5mb19tc2dcIilcblx0XHRcdFx0fSBlbHNlIGlmIChhY3RpdmF0ZSkge1xuXHRcdFx0XHRcdHRoaXMucmVzdG9yZVVzZXIoKVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHRoaXMuZGVsZXRlVXNlcigpXG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0fSlcblx0fVxuXG5cdHByaXZhdGUgaXNJdE1lKCk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiBpc1NhbWVJZChsb2NhdG9yLmxvZ2lucy5nZXRVc2VyQ29udHJvbGxlcigpLnVzZXJHcm91cEluZm8uX2lkLCB0aGlzLnVzZXJHcm91cEluZm8uX2lkKVxuXHR9XG5cblx0cHJpdmF0ZSBjaGFuZ2VQYXNzd29yZCgpOiB2b2lkIHtcblx0XHRpZiAodGhpcy5pc0l0TWUoKSkge1xuXHRcdFx0c2hvd0NoYW5nZU93blBhc3N3b3JkRGlhbG9nKClcblx0XHR9IGVsc2UgaWYgKHRoaXMuaXNBZG1pbikge1xuXHRcdFx0RGlhbG9nLm1lc3NhZ2UoXCJjaGFuZ2VBZG1pblBhc3N3b3JkX21zZ1wiKVxuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLnVzZXIuZ2V0QXN5bmMoKS50aGVuKCh1c2VyKSA9PiB7XG5cdFx0XHRcdHNob3dDaGFuZ2VVc2VyUGFzc3dvcmRBc0FkbWluRGlhbG9nKHVzZXIpXG5cdFx0XHR9KVxuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgdXBkYXRlR3JvdXBzKCkge1xuXHRcdGlmICh0aGlzLmdyb3Vwc1RhYmxlQXR0cnMpIHtcblx0XHRcdGNvbnN0IHVzZXIgPSBhd2FpdCB0aGlzLnVzZXIuZ2V0QXN5bmMoKVxuXHRcdFx0Y29uc3QgY3VzdG9tZXIgPSBhd2FpdCB0aGlzLmN1c3RvbWVyLmdldEFzeW5jKClcblx0XHRcdHRoaXMuZ3JvdXBzVGFibGVBdHRycy5saW5lcyA9IGF3YWl0IHByb21pc2VNYXAoXG5cdFx0XHRcdHRoaXMuZ2V0VGVhbU1lbWJlcnNoaXBzKHVzZXIsIGN1c3RvbWVyKSxcblx0XHRcdFx0YXN5bmMgKG0pID0+IHtcblx0XHRcdFx0XHRjb25zdCBncm91cEluZm8gPSBhd2FpdCBsb2NhdG9yLmVudGl0eUNsaWVudC5sb2FkKEdyb3VwSW5mb1R5cGVSZWYsIG0uZ3JvdXBJbmZvKVxuXHRcdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0XHRjZWxsczogW2dldEdyb3VwSW5mb0Rpc3BsYXlOYW1lKGdyb3VwSW5mbyksIGdldEdyb3VwVHlwZURpc3BsYXlOYW1lKG5ldmVyTnVsbChtLmdyb3VwVHlwZSkpXSxcblx0XHRcdFx0XHRcdGFjdGlvbkJ1dHRvbkF0dHJzOiB7XG5cdFx0XHRcdFx0XHRcdHRpdGxlOiBcInJlbW92ZV9hY3Rpb25cIixcblx0XHRcdFx0XHRcdFx0Y2xpY2s6ICgpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRzaG93UHJvZ3Jlc3NEaWFsb2coXCJwbGVhc2VXYWl0X21zZ1wiLCBsb2NhdG9yLmdyb3VwTWFuYWdlbWVudEZhY2FkZS5yZW1vdmVVc2VyRnJvbUdyb3VwKHVzZXIuX2lkLCBncm91cEluZm8uZ3JvdXApKS5jYXRjaChcblx0XHRcdFx0XHRcdFx0XHRcdG9mQ2xhc3MoTm90QXV0aG9yaXplZEVycm9yLCAoZSkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHREaWFsb2cubWVzc2FnZShcInJlbW92ZVVzZXJGcm9tR3JvdXBOb3RBZG1pbmlzdHJhdGVkVXNlckVycm9yX21zZ1wiKVxuXHRcdFx0XHRcdFx0XHRcdFx0fSksXG5cdFx0XHRcdFx0XHRcdFx0KVxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRpY29uOiBJY29ucy5DYW5jZWwsXG5cdFx0XHRcdFx0XHR9IGFzIGNvbnN0LFxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGNvbmN1cnJlbmN5OiA1LFxuXHRcdFx0XHR9LFxuXHRcdFx0KVxuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgc2hvd0FkZFVzZXJUb0dyb3VwRGlhbG9nKCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGNvbnN0IHVzZXIgPSBhd2FpdCB0aGlzLnVzZXIuZ2V0QXN5bmMoKVxuXHRcdGlmICh0aGlzLnVzZXJHcm91cEluZm8uZGVsZXRlZCkge1xuXHRcdFx0RGlhbG9nLm1lc3NhZ2UoXCJ1c2VyQWNjb3VudERlYWN0aXZhdGVkX21zZ1wiKVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRjb25zdCBnbG9iYWxBZG1pbiA9IGxvY2F0b3IubG9naW5zLmlzR2xvYmFsQWRtaW5Vc2VyTG9nZ2VkSW4oKVxuXG5cdFx0XHRjb25zdCBhdmFpbGFibGVHcm91cEluZm9zID0gdGhpcy50ZWFtR3JvdXBJbmZvc1xuXHRcdFx0XHQuZ2V0TG9hZGVkKClcblx0XHRcdFx0LmZpbHRlcihcblx0XHRcdFx0XHQoZykgPT5cblx0XHRcdFx0XHRcdC8vIGdsb2JhbCBhZG1pbnMgbWF5IGFkZCBhbGwgZ3JvdXBzXG5cdFx0XHRcdFx0XHRnbG9iYWxBZG1pbiAmJlxuXHRcdFx0XHRcdFx0Ly8gY2FuJ3QgYWRkIGRlbGV0ZWQgZ3JvdXBzXG5cdFx0XHRcdFx0XHQhZy5kZWxldGVkICYmXG5cdFx0XHRcdFx0XHQvLyBjYW4ndCBhZGQgaWYgdGhlIHVzZXIgaXMgYWxyZWFkeSBpbiB0aGUgZ3JvdXBcblx0XHRcdFx0XHRcdCF1c2VyLm1lbWJlcnNoaXBzLnNvbWUoKG0pID0+IGlzU2FtZUlkKG0uZ3JvdXBJbmZvLCBnLl9pZCkpLFxuXHRcdFx0XHQpXG5cdFx0XHRcdC5zb3J0KGNvbXBhcmVHcm91cEluZm9zKVxuXG5cdFx0XHRpZiAoYXZhaWxhYmxlR3JvdXBJbmZvcy5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdGNvbnN0IGRyb3Bkb3duSXRlbXMgPSBhdmFpbGFibGVHcm91cEluZm9zLm1hcCgoZykgPT4gKHtcblx0XHRcdFx0XHRuYW1lOiBnZXRHcm91cEluZm9EaXNwbGF5TmFtZShnKSxcblx0XHRcdFx0XHR2YWx1ZTogZyxcblx0XHRcdFx0fSkpXG5cblx0XHRcdFx0bGV0IHNlbGVjdGVkR3JvdXBJbmZvID0gZ2V0Rmlyc3RPclRocm93KGF2YWlsYWJsZUdyb3VwSW5mb3MpXG5cdFx0XHRcdERpYWxvZy5zaG93QWN0aW9uRGlhbG9nKHtcblx0XHRcdFx0XHR0aXRsZTogXCJhZGRVc2VyVG9Hcm91cF9sYWJlbFwiLFxuXHRcdFx0XHRcdGNoaWxkOiB7XG5cdFx0XHRcdFx0XHR2aWV3OiAoKSA9PlxuXHRcdFx0XHRcdFx0XHRtKERyb3BEb3duU2VsZWN0b3IsIHtcblx0XHRcdFx0XHRcdFx0XHRsYWJlbDogXCJncm91cF9sYWJlbFwiLFxuXHRcdFx0XHRcdFx0XHRcdGl0ZW1zOiBkcm9wZG93bkl0ZW1zLFxuXHRcdFx0XHRcdFx0XHRcdHNlbGVjdGVkVmFsdWU6IHNlbGVjdGVkR3JvdXBJbmZvLFxuXHRcdFx0XHRcdFx0XHRcdHNlbGVjdGlvbkNoYW5nZWRIYW5kbGVyOiAoc2VsZWN0aW9uOiBHcm91cEluZm8pID0+IChzZWxlY3RlZEdyb3VwSW5mbyA9IHNlbGVjdGlvbiksXG5cdFx0XHRcdFx0XHRcdFx0ZHJvcGRvd25XaWR0aDogMjUwLFxuXHRcdFx0XHRcdFx0XHR9KSxcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdGFsbG93T2tXaXRoUmV0dXJuOiB0cnVlLFxuXHRcdFx0XHRcdG9rQWN0aW9uOiAoZGlhbG9nOiBEaWFsb2cpID0+IHtcblx0XHRcdFx0XHRcdHNob3dQcm9ncmVzc0RpYWxvZyhcInBsZWFzZVdhaXRfbXNnXCIsIGxvY2F0b3IuZ3JvdXBNYW5hZ2VtZW50RmFjYWRlLmFkZFVzZXJUb0dyb3VwKHVzZXIsIHNlbGVjdGVkR3JvdXBJbmZvLmdyb3VwKSlcblx0XHRcdFx0XHRcdGRpYWxvZy5jbG9zZSgpXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0fSlcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIHVwZGF0ZVVzZWRTdG9yYWdlQW5kQWRtaW5GbGFnKCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGNvbnN0IHVzZXIgPSBhd2FpdCB0aGlzLnVzZXIuZ2V0QXN5bmMoKVxuXHRcdHRoaXMuaXNBZG1pbiA9IHRoaXMuaXNBZG1pblVzZXIodXNlcilcblx0XHR0cnkge1xuXHRcdFx0dGhpcy51c2VkU3RvcmFnZSA9IGF3YWl0IGxvY2F0b3IudXNlck1hbmFnZW1lbnRGYWNhZGUucmVhZFVzZWRVc2VyU3RvcmFnZSh1c2VyKVxuXHRcdFx0bS5yZWRyYXcoKVxuXHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdC8vIG1heSBoYXBwZW4gaWYgdGhlIHVzZXIgZ2V0cyB0aGUgYWRtaW4gZmxhZyByZW1vdmVkLCBzbyBpZ25vcmUgaXRcblx0XHRcdGlmICghKGUgaW5zdGFuY2VvZiBCYWRSZXF1ZXN0RXJyb3IpKSB7XG5cdFx0XHRcdHRocm93IGVcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIGdldFRlYW1NZW1iZXJzaGlwcyh1c2VyOiBVc2VyLCBjdXN0b21lcjogQ3VzdG9tZXIpOiBHcm91cE1lbWJlcnNoaXBbXSB7XG5cdFx0cmV0dXJuIHVzZXIubWVtYmVyc2hpcHMuZmlsdGVyKChtKSA9PiBtLmdyb3VwSW5mb1swXSA9PT0gY3VzdG9tZXIudGVhbUdyb3Vwcylcblx0fVxuXG5cdHByaXZhdGUgaXNBZG1pblVzZXIodXNlcjogVXNlcik6IGJvb2xlYW4ge1xuXHRcdHJldHVybiB1c2VyLm1lbWJlcnNoaXBzLnNvbWUoKG0pID0+IG0uZ3JvdXBUeXBlID09PSBHcm91cFR5cGUuQWRtaW4pXG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIGRlbGV0ZVVzZXIoKSB7XG5cdFx0Y29uc3QgcGxhblR5cGUgPSBhd2FpdCBsb2NhdG9yLmxvZ2lucy5nZXRVc2VyQ29udHJvbGxlcigpLmdldFBsYW5UeXBlKClcblx0XHRjb25zdCBuZXdQbGFuID0gYXdhaXQgbG9jYXRvci5sb2dpbnMuZ2V0VXNlckNvbnRyb2xsZXIoKS5pc05ld1BhaWRQbGFuKClcblxuXHRcdGNvbnN0IGNvbmZpcm1lZCA9IGF3YWl0IHNob3dCdXlEaWFsb2coe1xuXHRcdFx0ZmVhdHVyZVR5cGU6IG5ld1BsYW4gPyB0b0ZlYXR1cmVUeXBlKHBsYW5UeXBlKSA6IEJvb2tpbmdJdGVtRmVhdHVyZVR5cGUuTGVnYWN5VXNlcnMsXG5cdFx0XHRib29raW5nVGV4dDogXCJjYW5jZWxVc2VyQWNjb3VudHNfbGFiZWxcIixcblx0XHRcdGNvdW50OiAtMSxcblx0XHRcdGZyZWVBbW91bnQ6IDAsXG5cdFx0XHRyZWFjdGl2YXRlOiBmYWxzZSxcblx0XHR9KVxuXHRcdGlmIChjb25maXJtZWQpIHtcblx0XHRcdHJldHVybiBsb2NhdG9yLnVzZXJNYW5hZ2VtZW50RmFjYWRlXG5cdFx0XHRcdC5kZWxldGVVc2VyKGF3YWl0IHRoaXMudXNlci5nZXRBc3luYygpLCBmYWxzZSlcblx0XHRcdFx0LmNhdGNoKG9mQ2xhc3MoUHJlY29uZGl0aW9uRmFpbGVkRXJyb3IsICgpID0+IERpYWxvZy5tZXNzYWdlKFwic3RpbGxSZWZlcmVuY2VkRnJvbUNvbnRhY3RGb3JtX21zZ1wiKSkpXG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyByZXN0b3JlVXNlcigpIHtcblx0XHRjb25zdCBwbGFuVHlwZSA9IGF3YWl0IGxvY2F0b3IubG9naW5zLmdldFVzZXJDb250cm9sbGVyKCkuZ2V0UGxhblR5cGUoKVxuXHRcdGNvbnN0IG5ld1BsYW4gPSBhd2FpdCBsb2NhdG9yLmxvZ2lucy5nZXRVc2VyQ29udHJvbGxlcigpLmlzTmV3UGFpZFBsYW4oKVxuXHRcdGNvbnN0IGNvbmZpcm1lZCA9IGF3YWl0IHNob3dCdXlEaWFsb2coe1xuXHRcdFx0ZmVhdHVyZVR5cGU6IG5ld1BsYW4gPyB0b0ZlYXR1cmVUeXBlKHBsYW5UeXBlKSA6IEJvb2tpbmdJdGVtRmVhdHVyZVR5cGUuTGVnYWN5VXNlcnMsXG5cdFx0XHRib29raW5nVGV4dDogXCJib29raW5nSXRlbVVzZXJzSW5jbHVkaW5nX2xhYmVsXCIsXG5cdFx0XHRjb3VudDogMSxcblx0XHRcdGZyZWVBbW91bnQ6IDAsXG5cdFx0XHRyZWFjdGl2YXRlOiB0cnVlLFxuXHRcdH0pXG5cdFx0aWYgKGNvbmZpcm1lZCkge1xuXHRcdFx0YXdhaXQgbG9jYXRvci51c2VyTWFuYWdlbWVudEZhY2FkZVxuXHRcdFx0XHQuZGVsZXRlVXNlcihhd2FpdCB0aGlzLnVzZXIuZ2V0QXN5bmMoKSwgdHJ1ZSlcblx0XHRcdFx0LmNhdGNoKG9mQ2xhc3MoUHJlY29uZGl0aW9uRmFpbGVkRXJyb3IsICgpID0+IERpYWxvZy5tZXNzYWdlKFwiZW1haWxBZGRyZXNzSW5Vc2VfbXNnXCIpKSlcblx0XHR9XG5cdH1cblxuXHRhc3luYyBlbnRpdHlFdmVudHNSZWNlaXZlZCh1cGRhdGVzOiBSZWFkb25seUFycmF5PEVudGl0eVVwZGF0ZURhdGE+KSB7XG5cdFx0Zm9yIChjb25zdCB1cGRhdGUgb2YgdXBkYXRlcykge1xuXHRcdFx0Y29uc3QgeyBpbnN0YW5jZUxpc3RJZCwgaW5zdGFuY2VJZCwgb3BlcmF0aW9uIH0gPSB1cGRhdGVcblx0XHRcdGlmIChcblx0XHRcdFx0aXNVcGRhdGVGb3JUeXBlUmVmKEdyb3VwSW5mb1R5cGVSZWYsIHVwZGF0ZSkgJiZcblx0XHRcdFx0b3BlcmF0aW9uID09PSBPcGVyYXRpb25UeXBlLlVQREFURSAmJlxuXHRcdFx0XHRpc1NhbWVJZCh0aGlzLnVzZXJHcm91cEluZm8uX2lkLCBbbmV2ZXJOdWxsKGluc3RhbmNlTGlzdElkKSwgaW5zdGFuY2VJZF0pXG5cdFx0XHQpIHtcblx0XHRcdFx0dGhpcy51c2VyR3JvdXBJbmZvID0gYXdhaXQgbG9jYXRvci5lbnRpdHlDbGllbnQubG9hZChHcm91cEluZm9UeXBlUmVmLCB0aGlzLnVzZXJHcm91cEluZm8uX2lkKVxuXHRcdFx0XHRhd2FpdCB0aGlzLnVwZGF0ZVVzZWRTdG9yYWdlQW5kQWRtaW5GbGFnKClcblx0XHRcdFx0bS5yZWRyYXcoKVxuXHRcdFx0fSBlbHNlIGlmIChcblx0XHRcdFx0aXNVcGRhdGVGb3JUeXBlUmVmKFVzZXJUeXBlUmVmLCB1cGRhdGUpICYmXG5cdFx0XHRcdG9wZXJhdGlvbiA9PT0gT3BlcmF0aW9uVHlwZS5VUERBVEUgJiZcblx0XHRcdFx0dGhpcy51c2VyLmlzTG9hZGVkKCkgJiZcblx0XHRcdFx0aXNTYW1lSWQodGhpcy51c2VyLmdldExvYWRlZCgpLl9pZCwgaW5zdGFuY2VJZClcblx0XHRcdCkge1xuXHRcdFx0XHR0aGlzLnVzZXIucmVzZXQoKVxuXHRcdFx0XHRhd2FpdCB0aGlzLnVwZGF0ZVVzZWRTdG9yYWdlQW5kQWRtaW5GbGFnKClcblx0XHRcdFx0YXdhaXQgdGhpcy51cGRhdGVHcm91cHMoKVxuXHRcdFx0fVxuXHRcdFx0YXdhaXQgdGhpcy5zZWNvbmRGYWN0b3JzRm9ybS5lbnRpdHlFdmVudFJlY2VpdmVkKHVwZGF0ZSlcblx0XHR9XG5cdFx0bS5yZWRyYXcoKVxuXHR9XG5cblx0cHJpdmF0ZSBsb2FkVXNlcigpOiBQcm9taXNlPFVzZXI+IHtcblx0XHRyZXR1cm4gbG9jYXRvci5lbnRpdHlDbGllbnQubG9hZChHcm91cFR5cGVSZWYsIHRoaXMudXNlckdyb3VwSW5mby5ncm91cCkudGhlbigodXNlckdyb3VwKSA9PiB7XG5cdFx0XHRyZXR1cm4gbG9jYXRvci5lbnRpdHlDbGllbnQubG9hZChVc2VyVHlwZVJlZiwgbmV2ZXJOdWxsKHVzZXJHcm91cC51c2VyKSlcblx0XHR9KVxuXHR9XG5cblx0cHJpdmF0ZSBsb2FkQ3VzdG9tZXIoKTogUHJvbWlzZTxDdXN0b21lcj4ge1xuXHRcdHJldHVybiBsb2NhdG9yLmxvZ2lucy5nZXRVc2VyQ29udHJvbGxlcigpLmxvYWRDdXN0b21lcigpXG5cdH1cblxuXHRwcml2YXRlIGxvYWRUZWFtR3JvdXBJbmZvcygpOiBQcm9taXNlPEFycmF5PEdyb3VwSW5mbz4+IHtcblx0XHRyZXR1cm4gdGhpcy5jdXN0b21lci5nZXRBc3luYygpLnRoZW4oKGN1c3RvbWVyKSA9PiBsb2NhdG9yLmVudGl0eUNsaWVudC5sb2FkQWxsKEdyb3VwSW5mb1R5cGVSZWYsIGN1c3RvbWVyLnRlYW1Hcm91cHMpKVxuXHR9XG59XG5cbi8qKlxuICogU2hvdyBlZGl0b3IgZm9yIGFkZGluZyB0aGUgY3N2IHZhbHVlcyBvZiB0aGUgdXNlcnMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzaG93VXNlckltcG9ydERpYWxvZyhjdXN0b21Eb21haW5zOiBzdHJpbmdbXSkge1xuXHRsZXQgZWRpdG9yID0gbmV3IEVkaXRvcihcImVudGVyQXNDU1ZfbXNnXCIpLnNob3dCb3JkZXJzKCkuc2V0TW9kZShIdG1sRWRpdG9yTW9kZS5IVE1MKS5zZXRWYWx1ZShDU1ZfVVNFUl9GT1JNQVQpLnNldE1pbkhlaWdodCgyMDApXG5cdGxldCBmb3JtID0ge1xuXHRcdHZpZXc6ICgpID0+IHtcblx0XHRcdHJldHVybiBbbShlZGl0b3IpXVxuXHRcdH0sXG5cdH1cblx0RGlhbG9nLnNob3dBY3Rpb25EaWFsb2coe1xuXHRcdHRpdGxlOiBcImltcG9ydFVzZXJzX2FjdGlvblwiLFxuXHRcdGNoaWxkOiBmb3JtLFxuXHRcdG9rQWN0aW9uOiAoY3N2RGlhbG9nKSA9PiB7XG5cdFx0XHRsZXQgY2xvc2VDc3ZEaWFsb2cgPSBjaGVja0FuZEltcG9ydFVzZXJEYXRhKGVkaXRvci5nZXRWYWx1ZSgpLCBjdXN0b21Eb21haW5zKVxuXHRcdFx0aWYgKGNsb3NlQ3N2RGlhbG9nKSB7XG5cdFx0XHRcdGNzdkRpYWxvZy5jbG9zZSgpXG5cdFx0XHR9XG5cdFx0fSxcblx0fSlcbn1cbiIsImltcG9ydCBtIGZyb20gXCJtaXRocmlsXCJcbmltcG9ydCB7IGxhbmcsIFRyYW5zbGF0aW9uS2V5LCBNYXliZVRyYW5zbGF0aW9uIH0gZnJvbSBcIi4uL21pc2MvTGFuZ3VhZ2VWaWV3TW9kZWwuanNcIlxuaW1wb3J0IHsgQm9va2luZ0l0ZW1GZWF0dXJlVHlwZSwgTmV3UGFpZFBsYW5zIH0gZnJvbSBcIi4uL2FwaS9jb21tb24vVHV0YW5vdGFDb25zdGFudHMuanNcIlxuaW1wb3J0IHsgRGlhbG9nIH0gZnJvbSBcIi4uL2d1aS9iYXNlL0RpYWxvZy5qc1wiXG5pbXBvcnQgeyBQYXNzd29yZEZvcm0sIFBhc3N3b3JkTW9kZWwgfSBmcm9tIFwiLi9QYXNzd29yZEZvcm0uanNcIlxuaW1wb3J0IHsgU2VsZWN0TWFpbEFkZHJlc3NGb3JtIH0gZnJvbSBcIi4vU2VsZWN0TWFpbEFkZHJlc3NGb3JtLmpzXCJcbmltcG9ydCB7IGFzc2VydE5vdE51bGwsIGdldEZpcnN0T3JUaHJvdywgb2ZDbGFzcyB9IGZyb20gXCJAdHV0YW8vdHV0YW5vdGEtdXRpbHNcIlxuaW1wb3J0IHsgc2hvd1Byb2dyZXNzRGlhbG9nIH0gZnJvbSBcIi4uL2d1aS9kaWFsb2dzL1Byb2dyZXNzRGlhbG9nLmpzXCJcbmltcG9ydCB7IFByZWNvbmRpdGlvbkZhaWxlZEVycm9yIH0gZnJvbSBcIi4uL2FwaS9jb21tb24vZXJyb3IvUmVzdEVycm9yLmpzXCJcbmltcG9ydCB7IHNob3dCdXlEaWFsb2cgfSBmcm9tIFwiLi4vc3Vic2NyaXB0aW9uL0J1eURpYWxvZy5qc1wiXG5pbXBvcnQgeyBUZXh0RmllbGQgfSBmcm9tIFwiLi4vZ3VpL2Jhc2UvVGV4dEZpZWxkLmpzXCJcbmltcG9ydCB7IGxvY2F0b3IgfSBmcm9tIFwiLi4vYXBpL21haW4vQ29tbW9uTG9jYXRvci5qc1wiXG5pbXBvcnQgeyBhc3NlcnRNYWluT3JOb2RlIH0gZnJvbSBcIi4uL2FwaS9jb21tb24vRW52LmpzXCJcbmltcG9ydCB7IGdldEF2YWlsYWJsZURvbWFpbnMgfSBmcm9tIFwiLi9tYWlsYWRkcmVzcy9NYWlsQWRkcmVzc2VzVXRpbHMuanNcIlxuaW1wb3J0IHsgdG9GZWF0dXJlVHlwZSB9IGZyb20gXCIuLi9zdWJzY3JpcHRpb24vU3Vic2NyaXB0aW9uVXRpbHMuanNcIlxuaW1wb3J0IHsgc2hvd1VwZ3JhZGVXaXphcmQgfSBmcm9tIFwiLi4vc3Vic2NyaXB0aW9uL1VwZ3JhZGVTdWJzY3JpcHRpb25XaXphcmQuanNcIlxuXG5hc3NlcnRNYWluT3JOb2RlKClcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNob3coKTogUHJvbWlzZTx2b2lkPiB7XG5cdGNvbnN0IGF2YWlsYWJsZURvbWFpbnMgPSBhd2FpdCBnZXRBdmFpbGFibGVEb21haW5zKGxvY2F0b3IubG9naW5zKVxuXHRjb25zdCBvbk5ld1BhaWRQbGFuID0gYXdhaXQgbG9jYXRvci5sb2dpbnMuZ2V0VXNlckNvbnRyb2xsZXIoKS5pc05ld1BhaWRQbGFuKClcblx0bGV0IGVtYWlsQWRkcmVzczogc3RyaW5nIHwgbnVsbCA9IG51bGxcblx0bGV0IGVycm9yTXNnOiBNYXliZVRyYW5zbGF0aW9uIHwgbnVsbCA9IFwibWFpbEFkZHJlc3NOZXV0cmFsX21zZ1wiXG5cdGxldCBpc1ZlcmlmaWNhdGlvbkJ1c3kgPSBmYWxzZVxuXHRsZXQgdXNlck5hbWUgPSBcIlwiXG5cdGNvbnN0IHBhc3N3b3JkTW9kZWwgPSBuZXcgUGFzc3dvcmRNb2RlbChsb2NhdG9yLnVzYWdlVGVzdENvbnRyb2xsZXIsIGxvY2F0b3IubG9naW5zLCB7XG5cdFx0Y2hlY2tPbGRQYXNzd29yZDogZmFsc2UsXG5cdFx0ZW5mb3JjZVN0cmVuZ3RoOiBmYWxzZSxcblx0XHRoaWRlQ29uZmlybWF0aW9uOiB0cnVlLFxuXHR9KVxuXHRsZXQgc2VsZWN0ZWREb21haW4gPSBnZXRGaXJzdE9yVGhyb3coYXZhaWxhYmxlRG9tYWlucylcblx0bGV0IGZvcm0gPSB7XG5cdFx0dmlldzogKCkgPT4ge1xuXHRcdFx0cmV0dXJuIFtcblx0XHRcdFx0bShUZXh0RmllbGQsIHtcblx0XHRcdFx0XHRsYWJlbDogXCJuYW1lX2xhYmVsXCIsXG5cdFx0XHRcdFx0aGVscExhYmVsOiAoKSA9PiBsYW5nLmdldChcImxvZ2luTmFtZUluZm9BZG1pbl9tc2dcIiksXG5cdFx0XHRcdFx0dmFsdWU6IHVzZXJOYW1lLFxuXHRcdFx0XHRcdG9uaW5wdXQ6ICh2YWx1ZSkgPT4gKHVzZXJOYW1lID0gdmFsdWUpLFxuXHRcdFx0XHR9KSxcblx0XHRcdFx0bShTZWxlY3RNYWlsQWRkcmVzc0Zvcm0sIHtcblx0XHRcdFx0XHRzZWxlY3RlZERvbWFpbixcblx0XHRcdFx0XHRhdmFpbGFibGVEb21haW5zLFxuXHRcdFx0XHRcdG9uRG9tYWluQ2hhbmdlZDogKGRvbWFpbikgPT4ge1xuXHRcdFx0XHRcdFx0aWYgKGRvbWFpbi5pc1BhaWQgJiYgIW9uTmV3UGFpZFBsYW4pIHtcblx0XHRcdFx0XHRcdFx0c2hvd1VwZ3JhZGVXaXphcmQoXG5cdFx0XHRcdFx0XHRcdFx0bG9jYXRvci5sb2dpbnMsXG5cdFx0XHRcdFx0XHRcdFx0TmV3UGFpZFBsYW5zLFxuXHRcdFx0XHRcdFx0XHRcdGxhbmcubWFrZVRyYW5zbGF0aW9uKFwiY2hhbmdlX3RvX25ld19wbGFuXCIsIGAke2xhbmcuZ2V0KFwicGFpZEVtYWlsRG9tYWluTGVnYWN5X21zZ1wiKX1cXG4ke2xhbmcuZ2V0KFwiY2hhbmdlUGFpZFBsYW5fbXNnXCIpfWApLFxuXHRcdFx0XHRcdFx0XHQpXG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRzZWxlY3RlZERvbWFpbiA9IGRvbWFpblxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0b25WYWxpZGF0aW9uUmVzdWx0OiAoZW1haWwsIHZlcmlmaWNhdGlvblJlc3VsdCkgPT4ge1xuXHRcdFx0XHRcdFx0aWYgKHZlcmlmaWNhdGlvblJlc3VsdC5pc1ZhbGlkKSB7XG5cdFx0XHRcdFx0XHRcdGVtYWlsQWRkcmVzcyA9IGVtYWlsXG5cdFx0XHRcdFx0XHRcdGVycm9yTXNnID0gbnVsbFxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0ZXJyb3JNc2cgPSB2ZXJpZmljYXRpb25SZXN1bHQuZXJyb3JJZFxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0b25CdXN5U3RhdGVDaGFuZ2VkOiAoaXNCdXN5KSA9PiB7XG5cdFx0XHRcdFx0XHRpc1ZlcmlmaWNhdGlvbkJ1c3kgPSBpc0J1c3lcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHR9KSxcblx0XHRcdFx0bShQYXNzd29yZEZvcm0sIHsgbW9kZWw6IHBhc3N3b3JkTW9kZWwgfSksXG5cdFx0XHRdXG5cdFx0fSxcblx0fVxuXG5cdGxldCBhZGRVc2VyT2tBY3Rpb24gPSBhc3luYyAoZGlhbG9nOiBEaWFsb2cpID0+IHtcblx0XHRpZiAoaXNWZXJpZmljYXRpb25CdXN5KSByZXR1cm5cblx0XHRjb25zdCBwYXNzd29yZEZvcm1FcnJvciA9IHBhc3N3b3JkTW9kZWwuZ2V0RXJyb3JNZXNzYWdlSWQoKVxuXG5cdFx0aWYgKGVycm9yTXNnKSB7XG5cdFx0XHREaWFsb2cubWVzc2FnZShlcnJvck1zZyBhcyBUcmFuc2xhdGlvbktleSlcblx0XHRcdHJldHVyblxuXHRcdH0gZWxzZSBpZiAocGFzc3dvcmRGb3JtRXJyb3IpIHtcblx0XHRcdERpYWxvZy5tZXNzYWdlKHBhc3N3b3JkRm9ybUVycm9yKVxuXHRcdFx0cmV0dXJuXG5cdFx0fVxuXG5cdFx0Y29uc3QgdXNlckNvbnRyb2xsZXIgPSBsb2NhdG9yLmxvZ2lucy5nZXRVc2VyQ29udHJvbGxlcigpXG5cdFx0Y29uc3QgcGxhblR5cGUgPSBhd2FpdCB1c2VyQ29udHJvbGxlci5nZXRQbGFuVHlwZSgpXG5cdFx0Y29uc3QgbmV3UGxhbiA9IGF3YWl0IHVzZXJDb250cm9sbGVyLmlzTmV3UGFpZFBsYW4oKVxuXG5cdFx0c2hvd1Byb2dyZXNzRGlhbG9nKFxuXHRcdFx0XCJwbGVhc2VXYWl0X21zZ1wiLFxuXHRcdFx0c2hvd0J1eURpYWxvZyh7XG5cdFx0XHRcdGZlYXR1cmVUeXBlOiBuZXdQbGFuID8gdG9GZWF0dXJlVHlwZShwbGFuVHlwZSkgOiBCb29raW5nSXRlbUZlYXR1cmVUeXBlLkxlZ2FjeVVzZXJzLFxuXHRcdFx0XHRib29raW5nVGV4dDogXCJib29raW5nSXRlbVVzZXJzX2xhYmVsXCIsXG5cdFx0XHRcdGNvdW50OiAxLFxuXHRcdFx0XHRmcmVlQW1vdW50OiAwLFxuXHRcdFx0XHRyZWFjdGl2YXRlOiBmYWxzZSxcblx0XHRcdH0pLFxuXHRcdCkudGhlbihhc3luYyAoYWNjZXB0ZWQpID0+IHtcblx0XHRcdGlmIChhY2NlcHRlZCkge1xuXHRcdFx0XHRjb25zdCBvcGVyYXRpb24gPSBsb2NhdG9yLm9wZXJhdGlvblByb2dyZXNzVHJhY2tlci5zdGFydE5ld09wZXJhdGlvbigpXG5cdFx0XHRcdGNvbnN0IHAgPSBsb2NhdG9yLnVzZXJNYW5hZ2VtZW50RmFjYWRlLmNyZWF0ZVVzZXIoXG5cdFx0XHRcdFx0dXNlck5hbWUudHJpbSgpLFxuXHRcdFx0XHRcdGFzc2VydE5vdE51bGwoZW1haWxBZGRyZXNzKSxcblx0XHRcdFx0XHRwYXNzd29yZE1vZGVsLmdldE5ld1Bhc3N3b3JkKCksXG5cdFx0XHRcdFx0MCxcblx0XHRcdFx0XHQxLFxuXHRcdFx0XHRcdG9wZXJhdGlvbi5pZCxcblx0XHRcdFx0KVxuXHRcdFx0XHRzaG93UHJvZ3Jlc3NEaWFsb2coXG5cdFx0XHRcdFx0bGFuZy5nZXRUcmFuc2xhdGlvbihcImNyZWF0ZUFjdGlvblN0YXR1c19tc2dcIiwge1xuXHRcdFx0XHRcdFx0XCJ7aW5kZXh9XCI6IDAsXG5cdFx0XHRcdFx0XHRcIntjb3VudH1cIjogMSxcblx0XHRcdFx0XHR9KSxcblx0XHRcdFx0XHRwLFxuXHRcdFx0XHRcdG9wZXJhdGlvbi5wcm9ncmVzcyxcblx0XHRcdFx0KVxuXHRcdFx0XHRcdC5jYXRjaChvZkNsYXNzKFByZWNvbmRpdGlvbkZhaWxlZEVycm9yLCAoZSkgPT4gRGlhbG9nLm1lc3NhZ2UoXCJjcmVhdGVVc2VyRmFpbGVkX21zZ1wiKSkpXG5cdFx0XHRcdFx0LnRoZW4oKCkgPT4gZGlhbG9nLmNsb3NlKCkpXG5cdFx0XHRcdFx0LmZpbmFsbHkoKCkgPT4gb3BlcmF0aW9uLmRvbmUoKSlcblx0XHRcdH1cblx0XHR9KVxuXHR9XG5cblx0RGlhbG9nLnNob3dBY3Rpb25EaWFsb2coe1xuXHRcdHRpdGxlOiBcImFkZFVzZXJzX2FjdGlvblwiLFxuXHRcdGNoaWxkOiBmb3JtLFxuXHRcdG9rQWN0aW9uOiBhZGRVc2VyT2tBY3Rpb24sXG5cdH0pXG59XG4iLCJpbXBvcnQgbSwgeyBDaGlsZHJlbiB9IGZyb20gXCJtaXRocmlsXCJcbmltcG9ydCB7IE5vdEZvdW5kRXJyb3IgfSBmcm9tIFwiLi4vYXBpL2NvbW1vbi9lcnJvci9SZXN0RXJyb3IuanNcIlxuaW1wb3J0IHsgc2l6ZSB9IGZyb20gXCIuLi9ndWkvc2l6ZS5qc1wiXG5pbXBvcnQgdHlwZSB7IEdyb3VwSW5mbyB9IGZyb20gXCIuLi9hcGkvZW50aXRpZXMvc3lzL1R5cGVSZWZzLmpzXCJcbmltcG9ydCB7IEdyb3VwSW5mb1R5cGVSZWYsIEdyb3VwTWVtYmVyVHlwZVJlZiB9IGZyb20gXCIuLi9hcGkvZW50aXRpZXMvc3lzL1R5cGVSZWZzLmpzXCJcbmltcG9ydCB7IGNvbnRhaW5zLCBMYXp5TG9hZGVkLCBub09wIH0gZnJvbSBcIkB0dXRhby90dXRhbm90YS11dGlsc1wiXG5pbXBvcnQgeyBVc2VyVmlld2VyIH0gZnJvbSBcIi4vVXNlclZpZXdlci5qc1wiXG5pbXBvcnQgeyBGZWF0dXJlVHlwZSwgR3JvdXBUeXBlIH0gZnJvbSBcIi4uL2FwaS9jb21tb24vVHV0YW5vdGFDb25zdGFudHMuanNcIlxuaW1wb3J0IHsgSWNvbiB9IGZyb20gXCIuLi9ndWkvYmFzZS9JY29uLmpzXCJcbmltcG9ydCB7IEljb25zIH0gZnJvbSBcIi4uL2d1aS9iYXNlL2ljb25zL0ljb25zLmpzXCJcbmltcG9ydCB7IEJvb3RJY29ucyB9IGZyb20gXCIuLi9ndWkvYmFzZS9pY29ucy9Cb290SWNvbnMuanNcIlxuXG5pbXBvcnQgeyBjb21wYXJlR3JvdXBJbmZvcyB9IGZyb20gXCIuLi9hcGkvY29tbW9uL3V0aWxzL0dyb3VwVXRpbHMuanNcIlxuaW1wb3J0IHsgZWxlbWVudElkUGFydCB9IGZyb20gXCIuLi9hcGkvY29tbW9uL3V0aWxzL0VudGl0eVV0aWxzLmpzXCJcbmltcG9ydCB7IExpc3RDb2x1bW5XcmFwcGVyIH0gZnJvbSBcIi4uL2d1aS9MaXN0Q29sdW1uV3JhcHBlci5qc1wiXG5pbXBvcnQgeyBhc3NlcnRNYWluT3JOb2RlIH0gZnJvbSBcIi4uL2FwaS9jb21tb24vRW52LmpzXCJcbmltcG9ydCB7IGxvY2F0b3IgfSBmcm9tIFwiLi4vYXBpL21haW4vQ29tbW9uTG9jYXRvci5qc1wiXG5pbXBvcnQgU3RyZWFtIGZyb20gXCJtaXRocmlsL3N0cmVhbVwiXG5pbXBvcnQgKiBhcyBBZGRVc2VyRGlhbG9nIGZyb20gXCIuL0FkZFVzZXJEaWFsb2cuanNcIlxuaW1wb3J0IHsgU2VsZWN0YWJsZVJvd0NvbnRhaW5lciwgU2VsZWN0YWJsZVJvd1NlbGVjdGVkU2V0dGVyLCBzZXRWaXNpYmlsaXR5IH0gZnJvbSBcIi4uL2d1aS9TZWxlY3RhYmxlUm93Q29udGFpbmVyLmpzXCJcbmltcG9ydCB7IExpc3QsIExpc3RBdHRycywgTXVsdGlzZWxlY3RNb2RlLCBSZW5kZXJDb25maWcgfSBmcm9tIFwiLi4vZ3VpL2Jhc2UvTGlzdC5qc1wiXG5pbXBvcnQgeyBsaXN0U2VsZWN0aW9uS2V5Ym9hcmRTaG9ydGN1dHMsIFZpcnR1YWxSb3cgfSBmcm9tIFwiLi4vZ3VpL2Jhc2UvTGlzdFV0aWxzLmpzXCJcbmltcG9ydCBDb2x1bW5FbXB0eU1lc3NhZ2VCb3ggZnJvbSBcIi4uL2d1aS9iYXNlL0NvbHVtbkVtcHR5TWVzc2FnZUJveC5qc1wiXG5pbXBvcnQgeyB0aGVtZSB9IGZyb20gXCIuLi9ndWkvdGhlbWUuanNcIlxuaW1wb3J0IHsgQmFzZVNlYXJjaEJhciwgQmFzZVNlYXJjaEJhckF0dHJzIH0gZnJvbSBcIi4uL2d1aS9iYXNlL0Jhc2VTZWFyY2hCYXIuanNcIlxuaW1wb3J0IHsgSWNvbkJ1dHRvbiB9IGZyb20gXCIuLi9ndWkvYmFzZS9JY29uQnV0dG9uLmpzXCJcbmltcG9ydCB7IGF0dGFjaERyb3Bkb3duIH0gZnJvbSBcIi4uL2d1aS9iYXNlL0Ryb3Bkb3duLmpzXCJcbmltcG9ydCB7IGxhbmcgfSBmcm9tIFwiLi4vbWlzYy9MYW5ndWFnZVZpZXdNb2RlbC5qc1wiXG5pbXBvcnQgeyBrZXlNYW5hZ2VyIH0gZnJvbSBcIi4uL21pc2MvS2V5TWFuYWdlci5qc1wiXG5pbXBvcnQgeyBFbnRpdHlVcGRhdGVEYXRhLCBpc1VwZGF0ZUZvciwgaXNVcGRhdGVGb3JUeXBlUmVmIH0gZnJvbSBcIi4uL2FwaS9jb21tb24vdXRpbHMvRW50aXR5VXBkYXRlVXRpbHMuanNcIlxuaW1wb3J0IHsgTGlzdEF1dG9TZWxlY3RCZWhhdmlvciB9IGZyb20gXCIuLi9taXNjL0RldmljZUNvbmZpZy5qc1wiXG5pbXBvcnQgeyBVcGRhdGFibGVTZXR0aW5nc1ZpZXdlciB9IGZyb20gXCIuL0ludGVyZmFjZXMuanNcIlxuaW1wb3J0IHsgTGlzdEVsZW1lbnRMaXN0TW9kZWwgfSBmcm9tIFwiLi4vbWlzYy9MaXN0RWxlbWVudExpc3RNb2RlbFwiXG5cbmFzc2VydE1haW5Pck5vZGUoKVxuXG4vKipcbiAqIERpc3BsYXlzIGEgbGlzdCB3aXRoIHVzZXJzIHRoYXQgYXJlIGF2YWlsYWJsZSB0byBtYW5hZ2UgYnkgdGhlIGN1cnJlbnQgdXNlci5cbiAqIEdsb2JhbCBhZG1pbnMgc2VlIGFsbCB1c2Vycy5cbiAqIExvY2FsIGFkbWlucyBzZWUgb25seSB0aGVpciBhc3NpZ25lZCB1c2Vycy5cbiAqL1xuZXhwb3J0IGNsYXNzIFVzZXJMaXN0VmlldyBpbXBsZW1lbnRzIFVwZGF0YWJsZVNldHRpbmdzVmlld2VyIHtcblx0cHJpdmF0ZSBzZWFyY2hRdWVyeTogc3RyaW5nID0gXCJcIlxuXHRwcml2YXRlIGxpc3RNb2RlbDogTGlzdEVsZW1lbnRMaXN0TW9kZWw8R3JvdXBJbmZvPlxuXHRwcml2YXRlIHJlYWRvbmx5IHJlbmRlckNvbmZpZzogUmVuZGVyQ29uZmlnPEdyb3VwSW5mbywgVXNlclJvdz4gPSB7XG5cdFx0Y3JlYXRlRWxlbWVudDogKGRvbSkgPT4ge1xuXHRcdFx0Y29uc3Qgcm93ID0gbmV3IFVzZXJSb3coKGdyb3VwSW5mbykgPT4gdGhpcy5pc0FkbWluKGdyb3VwSW5mbykpXG5cdFx0XHRtLnJlbmRlcihkb20sIHJvdy5yZW5kZXIoKSlcblx0XHRcdHJldHVybiByb3dcblx0XHR9LFxuXHRcdGl0ZW1IZWlnaHQ6IHNpemUubGlzdF9yb3dfaGVpZ2h0LFxuXHRcdHN3aXBlOiBudWxsLFxuXHRcdG11bHRpc2VsZWN0aW9uQWxsb3dlZDogTXVsdGlzZWxlY3RNb2RlLkRpc2FibGVkLFxuXHR9XG5cblx0cHJpdmF0ZSByZWFkb25seSBsaXN0SWQ6IExhenlMb2FkZWQ8SWQ+XG5cdHByaXZhdGUgYWRtaW5Vc2VyR3JvdXBJbmZvSWRzOiBJZFtdID0gW11cblx0cHJpdmF0ZSBsaXN0U3RhdGVTdWJzY3JpcHRpb246IFN0cmVhbTx1bmtub3duPiB8IG51bGwgPSBudWxsXG5cdHByaXZhdGUgbGlzdFNlbGVjdGlvblN1YnNjcmlwdGlvbjogU3RyZWFtPHVua25vd24+IHwgbnVsbCA9IG51bGxcblxuXHRjb25zdHJ1Y3Rvcihcblx0XHRwcml2YXRlIHJlYWRvbmx5IHVwZGF0ZURldGFpbHNWaWV3ZXI6ICh2aWV3ZXI6IFVzZXJWaWV3ZXIgfCBudWxsKSA9PiB1bmtub3duLFxuXHRcdHByaXZhdGUgcmVhZG9ubHkgZm9jdXNEZXRhaWxzVmlld2VyOiAoKSA9PiB1bmtub3duLFxuXHRcdHByaXZhdGUgcmVhZG9ubHkgY2FuSW1wb3J0VXNlcnM6ICgpID0+IGJvb2xlYW4sXG5cdFx0cHJpdmF0ZSByZWFkb25seSBvbkltcG9ydFVzZXJzOiAoKSA9PiB1bmtub3duLFxuXHRcdHByaXZhdGUgcmVhZG9ubHkgb25FeHBvcnRVc2VyczogKCkgPT4gdW5rbm93bixcblx0KSB7XG5cdFx0Ly8gZG9pbmcgaXQgYWZ0ZXIgXCJvblNlbGVjdGlvbkNoYW5nZWRcIiBpcyBpbml0aWFsaXplZFxuXHRcdHRoaXMubGlzdE1vZGVsID0gdGhpcy5tYWtlTGlzdE1vZGVsKClcblx0XHR0aGlzLmxpc3RJZCA9IG5ldyBMYXp5TG9hZGVkKGFzeW5jICgpID0+IHtcblx0XHRcdGNvbnN0IGN1c3RvbWVyID0gYXdhaXQgbG9jYXRvci5sb2dpbnMuZ2V0VXNlckNvbnRyb2xsZXIoKS5sb2FkQ3VzdG9tZXIoKVxuXHRcdFx0cmV0dXJuIGN1c3RvbWVyLnVzZXJHcm91cHNcblx0XHR9KVxuXG5cdFx0dGhpcy5saXN0TW9kZWwubG9hZEluaXRpYWwoKVxuXG5cdFx0dGhpcy5vbmNyZWF0ZSA9IHRoaXMub25jcmVhdGUuYmluZCh0aGlzKVxuXHRcdHRoaXMub25yZW1vdmUgPSB0aGlzLm9ucmVtb3ZlLmJpbmQodGhpcylcblx0XHR0aGlzLnZpZXcgPSB0aGlzLnZpZXcuYmluZCh0aGlzKVxuXHR9XG5cblx0cHJpdmF0ZSByZWFkb25seSBzaG9ydGN1dHMgPSBsaXN0U2VsZWN0aW9uS2V5Ym9hcmRTaG9ydGN1dHMoTXVsdGlzZWxlY3RNb2RlLkRpc2FibGVkLCAoKSA9PiB0aGlzLmxpc3RNb2RlbClcblxuXHRvbmNyZWF0ZSgpIHtcblx0XHRrZXlNYW5hZ2VyLnJlZ2lzdGVyU2hvcnRjdXRzKHRoaXMuc2hvcnRjdXRzKVxuXHR9XG5cblx0dmlldygpOiBDaGlsZHJlbiB7XG5cdFx0aWYgKGxvY2F0b3IubG9naW5zLmlzRW5hYmxlZChGZWF0dXJlVHlwZS5XaGl0ZWxhYmVsQ2hpbGQpKSB7XG5cdFx0XHRyZXR1cm4gbnVsbFxuXHRcdH1cblxuXHRcdHJldHVybiBtKFxuXHRcdFx0TGlzdENvbHVtbldyYXBwZXIsXG5cdFx0XHR7XG5cdFx0XHRcdGhlYWRlckNvbnRlbnQ6IG0oXG5cdFx0XHRcdFx0XCIuZmxleC5mbGV4LXNwYWNlLWJldHdlZW4uY2VudGVyLXZlcnRpY2FsbHkucGxyLWxcIixcblx0XHRcdFx0XHRtKEJhc2VTZWFyY2hCYXIsIHtcblx0XHRcdFx0XHRcdHRleHQ6IHRoaXMuc2VhcmNoUXVlcnksXG5cdFx0XHRcdFx0XHRvbklucHV0OiAodGV4dCkgPT4gdGhpcy51cGRhdGVRdWVyeSh0ZXh0KSxcblx0XHRcdFx0XHRcdGJ1c3k6IGZhbHNlLFxuXHRcdFx0XHRcdFx0b25LZXlEb3duOiAoZSkgPT4gZS5zdG9wUHJvcGFnYXRpb24oKSxcblx0XHRcdFx0XHRcdG9uQ2xlYXI6ICgpID0+IHtcblx0XHRcdFx0XHRcdFx0dGhpcy5zZWFyY2hRdWVyeSA9IFwiXCJcblx0XHRcdFx0XHRcdFx0dGhpcy5saXN0TW9kZWwucmVhcHBseUZpbHRlcigpXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0cGxhY2Vob2xkZXI6IGxhbmcuZ2V0KFwic2VhcmNoVXNlcnNfcGxhY2Vob2xkZXJcIiksXG5cdFx0XHRcdFx0fSBzYXRpc2ZpZXMgQmFzZVNlYXJjaEJhckF0dHJzKSxcblx0XHRcdFx0XHRtKFxuXHRcdFx0XHRcdFx0XCIubXItbmVnYXRpdmUtc1wiLFxuXHRcdFx0XHRcdFx0bShJY29uQnV0dG9uLCB7XG5cdFx0XHRcdFx0XHRcdHRpdGxlOiBcImFkZFVzZXJzX2FjdGlvblwiLFxuXHRcdFx0XHRcdFx0XHRpY29uOiBJY29ucy5BZGQsXG5cdFx0XHRcdFx0XHRcdGNsaWNrOiAoKSA9PiB0aGlzLmFkZEJ1dHRvbkNsaWNrZWQoKSxcblx0XHRcdFx0XHRcdH0pLFxuXHRcdFx0XHRcdFx0dGhpcy5yZW5kZXJJbXBvcnRCdXR0b24oKSxcblx0XHRcdFx0XHQpLFxuXHRcdFx0XHQpLFxuXHRcdFx0fSxcblx0XHRcdHRoaXMubGlzdE1vZGVsLmlzRW1wdHlBbmREb25lKClcblx0XHRcdFx0PyBtKENvbHVtbkVtcHR5TWVzc2FnZUJveCwge1xuXHRcdFx0XHRcdFx0Y29sb3I6IHRoZW1lLmxpc3RfbWVzc2FnZV9iZyxcblx0XHRcdFx0XHRcdGljb246IEJvb3RJY29ucy5Db250YWN0cyxcblx0XHRcdFx0XHRcdG1lc3NhZ2U6IFwibm9FbnRyaWVzX21zZ1wiLFxuXHRcdFx0XHQgIH0pXG5cdFx0XHRcdDogbShMaXN0LCB7XG5cdFx0XHRcdFx0XHRyZW5kZXJDb25maWc6IHRoaXMucmVuZGVyQ29uZmlnLFxuXHRcdFx0XHRcdFx0c3RhdGU6IHRoaXMubGlzdE1vZGVsLnN0YXRlLFxuXHRcdFx0XHRcdFx0b25Mb2FkTW9yZTogKCkgPT4gdGhpcy5saXN0TW9kZWwubG9hZE1vcmUoKSxcblx0XHRcdFx0XHRcdG9uUmV0cnlMb2FkaW5nOiAoKSA9PiB0aGlzLmxpc3RNb2RlbC5yZXRyeUxvYWRpbmcoKSxcblx0XHRcdFx0XHRcdG9uU3RvcExvYWRpbmc6ICgpID0+IHRoaXMubGlzdE1vZGVsLnN0b3BMb2FkaW5nKCksXG5cdFx0XHRcdFx0XHRvblNpbmdsZVNlbGVjdGlvbjogKGl0ZW06IEdyb3VwSW5mbykgPT4ge1xuXHRcdFx0XHRcdFx0XHR0aGlzLmxpc3RNb2RlbC5vblNpbmdsZVNlbGVjdGlvbihpdGVtKVxuXHRcdFx0XHRcdFx0XHR0aGlzLmZvY3VzRGV0YWlsc1ZpZXdlcigpXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0b25TaW5nbGVUb2dnbGluZ011bHRpc2VsZWN0aW9uOiBub09wLFxuXHRcdFx0XHRcdFx0b25SYW5nZVNlbGVjdGlvblRvd2FyZHM6IG5vT3AsXG5cdFx0XHRcdCAgfSBzYXRpc2ZpZXMgTGlzdEF0dHJzPEdyb3VwSW5mbywgVXNlclJvdz4pLFxuXHRcdClcblx0fVxuXG5cdHByaXZhdGUgcmVuZGVySW1wb3J0QnV0dG9uKCkge1xuXHRcdGlmICh0aGlzLmNhbkltcG9ydFVzZXJzKCkpIHtcblx0XHRcdHJldHVybiBtKFxuXHRcdFx0XHRJY29uQnV0dG9uLFxuXHRcdFx0XHRhdHRhY2hEcm9wZG93bih7XG5cdFx0XHRcdFx0bWFpbkJ1dHRvbkF0dHJzOiB7XG5cdFx0XHRcdFx0XHR0aXRsZTogXCJtb3JlX2xhYmVsXCIsXG5cdFx0XHRcdFx0XHRpY29uOiBJY29ucy5Nb3JlLFxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0Y2hpbGRBdHRyczogKCkgPT4gW1xuXHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRsYWJlbDogXCJpbXBvcnRVc2Vyc19hY3Rpb25cIixcblx0XHRcdFx0XHRcdFx0Y2xpY2s6ICgpID0+IHtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLm9uSW1wb3J0VXNlcnMoKVxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0bGFiZWw6IFwiZXhwb3J0VXNlcnNfYWN0aW9uXCIsXG5cdFx0XHRcdFx0XHRcdGNsaWNrOiAoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5vbkV4cG9ydFVzZXJzKClcblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XSxcblx0XHRcdFx0fSksXG5cdFx0XHQpXG5cdFx0fSBlbHNlIHtcblx0XHRcdHJldHVybiBudWxsXG5cdFx0fVxuXHR9XG5cblx0b25yZW1vdmUoKSB7XG5cdFx0a2V5TWFuYWdlci51bnJlZ2lzdGVyU2hvcnRjdXRzKHRoaXMuc2hvcnRjdXRzKVxuXG5cdFx0dGhpcy5saXN0U3RhdGVTdWJzY3JpcHRpb24/LmVuZCh0cnVlKVxuXHRcdHRoaXMubGlzdFNlbGVjdGlvblN1YnNjcmlwdGlvbj8uZW5kKHRydWUpXG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIGxvYWRBZG1pbnMoKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0Y29uc3QgYWRtaW5Hcm91cE1lbWJlcnNoaXAgPSBsb2NhdG9yLmxvZ2lucy5nZXRVc2VyQ29udHJvbGxlcigpLnVzZXIubWVtYmVyc2hpcHMuZmluZCgoZ20pID0+IGdtLmdyb3VwVHlwZSA9PT0gR3JvdXBUeXBlLkFkbWluKVxuXHRcdGlmIChhZG1pbkdyb3VwTWVtYmVyc2hpcCA9PSBudWxsKSB7XG5cdFx0XHRyZXR1cm5cblx0XHR9XG5cdFx0Y29uc3QgbWVtYmVycyA9IGF3YWl0IGxvY2F0b3IuZW50aXR5Q2xpZW50LmxvYWRBbGwoR3JvdXBNZW1iZXJUeXBlUmVmLCBhZG1pbkdyb3VwTWVtYmVyc2hpcC5ncm91cE1lbWJlclswXSlcblx0XHR0aGlzLmFkbWluVXNlckdyb3VwSW5mb0lkcyA9IG1lbWJlcnMubWFwKChhZG1pbkdyb3VwTWVtYmVyKSA9PiBlbGVtZW50SWRQYXJ0KGFkbWluR3JvdXBNZW1iZXIudXNlckdyb3VwSW5mbykpXG5cdH1cblxuXHRwcml2YXRlIGlzQWRtaW4odXNlckdyb3VwSW5mbzogR3JvdXBJbmZvKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIGNvbnRhaW5zKHRoaXMuYWRtaW5Vc2VyR3JvdXBJbmZvSWRzLCB1c2VyR3JvdXBJbmZvLl9pZFsxXSlcblx0fVxuXG5cdHByaXZhdGUgYWRkQnV0dG9uQ2xpY2tlZCgpIHtcblx0XHRBZGRVc2VyRGlhbG9nLnNob3coKVxuXHR9XG5cblx0YXN5bmMgZW50aXR5RXZlbnRzUmVjZWl2ZWQ8VD4odXBkYXRlczogUmVhZG9ubHlBcnJheTxFbnRpdHlVcGRhdGVEYXRhPik6IFByb21pc2U8dm9pZD4ge1xuXHRcdGZvciAoY29uc3QgdXBkYXRlIG9mIHVwZGF0ZXMpIHtcblx0XHRcdGNvbnN0IHsgaW5zdGFuY2VMaXN0SWQsIGluc3RhbmNlSWQsIG9wZXJhdGlvbiB9ID0gdXBkYXRlXG5cblx0XHRcdGlmIChpc1VwZGF0ZUZvclR5cGVSZWYoR3JvdXBJbmZvVHlwZVJlZiwgdXBkYXRlKSAmJiB0aGlzLmxpc3RJZC5nZXRTeW5jKCkgPT09IGluc3RhbmNlTGlzdElkKSB7XG5cdFx0XHRcdGF3YWl0IHRoaXMubGlzdE1vZGVsLmVudGl0eUV2ZW50UmVjZWl2ZWQoaW5zdGFuY2VMaXN0SWQsIGluc3RhbmNlSWQsIG9wZXJhdGlvbilcblx0XHRcdH0gZWxzZSBpZiAoaXNVcGRhdGVGb3IobG9jYXRvci5sb2dpbnMuZ2V0VXNlckNvbnRyb2xsZXIoKS51c2VyLCB1cGRhdGUpKSB7XG5cdFx0XHRcdGF3YWl0IHRoaXMubG9hZEFkbWlucygpXG5cdFx0XHRcdHRoaXMubGlzdE1vZGVsLnJlYXBwbHlGaWx0ZXIoKVxuXHRcdFx0fVxuXHRcdFx0bS5yZWRyYXcoKVxuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgbWFrZUxpc3RNb2RlbCgpOiBMaXN0RWxlbWVudExpc3RNb2RlbDxHcm91cEluZm8+IHtcblx0XHRjb25zdCBsaXN0TW9kZWwgPSBuZXcgTGlzdEVsZW1lbnRMaXN0TW9kZWw8R3JvdXBJbmZvPih7XG5cdFx0XHRzb3J0Q29tcGFyZTogY29tcGFyZUdyb3VwSW5mb3MsXG5cdFx0XHRmZXRjaDogYXN5bmMgKF9sYXN0RmV0Y2hlZEVudGl0eSkgPT4ge1xuXHRcdFx0XHRhd2FpdCB0aGlzLmxvYWRBZG1pbnMoKVxuXHRcdFx0XHRjb25zdCBsaXN0SWQgPSBhd2FpdCB0aGlzLmxpc3RJZC5nZXRBc3luYygpXG5cdFx0XHRcdGNvbnN0IGFsbFVzZXJHcm91cEluZm9zID0gYXdhaXQgbG9jYXRvci5lbnRpdHlDbGllbnQubG9hZEFsbChHcm91cEluZm9UeXBlUmVmLCBsaXN0SWQpXG5cblx0XHRcdFx0cmV0dXJuIHsgaXRlbXM6IGFsbFVzZXJHcm91cEluZm9zLCBjb21wbGV0ZTogdHJ1ZSB9XG5cdFx0XHR9LFxuXHRcdFx0bG9hZFNpbmdsZTogYXN5bmMgKF9saXN0SWQ6IElkLCBlbGVtZW50SWQ6IElkKSA9PiB7XG5cdFx0XHRcdGNvbnN0IGxpc3RJZCA9IGF3YWl0IHRoaXMubGlzdElkLmdldEFzeW5jKClcblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRyZXR1cm4gYXdhaXQgbG9jYXRvci5lbnRpdHlDbGllbnQubG9hZDxHcm91cEluZm8+KEdyb3VwSW5mb1R5cGVSZWYsIFtsaXN0SWQsIGVsZW1lbnRJZF0pXG5cdFx0XHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdFx0XHRpZiAoZSBpbnN0YW5jZW9mIE5vdEZvdW5kRXJyb3IpIHtcblx0XHRcdFx0XHRcdC8vIHdlIHJldHVybiBudWxsIGlmIHRoZSBHcm91cEluZm8gZG9lcyBub3QgZXhpc3Rcblx0XHRcdFx0XHRcdHJldHVybiBudWxsXG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHRocm93IGVcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0XHRhdXRvU2VsZWN0QmVoYXZpb3I6ICgpID0+IExpc3RBdXRvU2VsZWN0QmVoYXZpb3IuT0xERVIsXG5cdFx0fSlcblxuXHRcdGxpc3RNb2RlbC5zZXRGaWx0ZXIoKGdpKSA9PiB0aGlzLmdyb3VwRmlsdGVyKCkgJiYgdGhpcy5xdWVyeUZpbHRlcihnaSkpXG5cblx0XHR0aGlzLmxpc3RTdGF0ZVN1YnNjcmlwdGlvbj8uZW5kKHRydWUpXG5cdFx0dGhpcy5saXN0U3RhdGVTdWJzY3JpcHRpb24gPSBsaXN0TW9kZWwuc3RhdGVTdHJlYW0ubWFwKChzdGF0ZSkgPT4ge1xuXHRcdFx0bS5yZWRyYXcoKVxuXHRcdH0pXG5cblx0XHR0aGlzLmxpc3RTZWxlY3Rpb25TdWJzY3JpcHRpb24/LmVuZCh0cnVlKVxuXHRcdHRoaXMubGlzdFNlbGVjdGlvblN1YnNjcmlwdGlvbiA9IGxpc3RNb2RlbC5kaWZmZXJlbnRJdGVtc1NlbGVjdGVkLm1hcCgobmV3U2VsZWN0aW9uKSA9PiB7XG5cdFx0XHRsZXQgZGV0YWlsc1ZpZXdlcjogVXNlclZpZXdlciB8IG51bGxcblx0XHRcdGlmIChuZXdTZWxlY3Rpb24uc2l6ZSA9PT0gMCkge1xuXHRcdFx0XHRkZXRhaWxzVmlld2VyID0gbnVsbFxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y29uc3QgaXRlbSA9IG5ld1NlbGVjdGlvbi52YWx1ZXMoKS5uZXh0KCkudmFsdWVcblx0XHRcdFx0ZGV0YWlsc1ZpZXdlciA9IG5ldyBVc2VyVmlld2VyKGl0ZW0sIHRoaXMuaXNBZG1pbihpdGVtKSlcblx0XHRcdH1cblx0XHRcdHRoaXMudXBkYXRlRGV0YWlsc1ZpZXdlcihkZXRhaWxzVmlld2VyKVxuXHRcdFx0bS5yZWRyYXcoKVxuXHRcdH0pXG5cdFx0cmV0dXJuIGxpc3RNb2RlbFxuXHR9XG5cblx0cHJpdmF0ZSBxdWVyeUZpbHRlcihnaTogR3JvdXBJbmZvKSB7XG5cdFx0Y29uc3QgbG93ZXJjYXNlU2VhcmNoID0gdGhpcy5zZWFyY2hRdWVyeS50b0xvd2VyQ2FzZSgpXG5cdFx0cmV0dXJuIChcblx0XHRcdGdpLm5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhsb3dlcmNhc2VTZWFyY2gpIHx8XG5cdFx0XHQoISFnaS5tYWlsQWRkcmVzcyAmJiBnaS5tYWlsQWRkcmVzcz8udG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhsb3dlcmNhc2VTZWFyY2gpKSB8fFxuXHRcdFx0Z2kubWFpbEFkZHJlc3NBbGlhc2VzLnNvbWUoKG1haSkgPT4gbWFpLm1haWxBZGRyZXNzLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMobG93ZXJjYXNlU2VhcmNoKSlcblx0XHQpXG5cdH1cblxuXHRwcml2YXRlIGdyb3VwRmlsdGVyID0gKCkgPT4ge1xuXHRcdHJldHVybiBsb2NhdG9yLmxvZ2lucy5nZXRVc2VyQ29udHJvbGxlcigpLmlzR2xvYmFsQWRtaW4oKVxuXHR9XG5cblx0cHJpdmF0ZSB1cGRhdGVRdWVyeShxdWVyeTogc3RyaW5nKSB7XG5cdFx0dGhpcy5zZWFyY2hRdWVyeSA9IHF1ZXJ5XG5cdFx0dGhpcy5saXN0TW9kZWwucmVhcHBseUZpbHRlcigpXG5cdH1cbn1cblxuZXhwb3J0IGNsYXNzIFVzZXJSb3cgaW1wbGVtZW50cyBWaXJ0dWFsUm93PEdyb3VwSW5mbz4ge1xuXHR0b3A6IG51bWJlciA9IDBcblx0ZG9tRWxlbWVudDogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbCAvLyBzZXQgZnJvbSBMaXN0XG5cdGVudGl0eTogR3JvdXBJbmZvIHwgbnVsbCA9IG51bGxcblx0cHJpdmF0ZSBuYW1lRG9tITogSFRNTEVsZW1lbnRcblx0cHJpdmF0ZSBhZGRyZXNzRG9tITogSFRNTEVsZW1lbnRcblx0cHJpdmF0ZSBhZG1pbkljb25Eb20hOiBIVE1MRWxlbWVudFxuXHRwcml2YXRlIGRlbGV0ZWRJY29uRG9tITogSFRNTEVsZW1lbnRcblx0cHJpdmF0ZSBzZWxlY3Rpb25VcGRhdGVyITogU2VsZWN0YWJsZVJvd1NlbGVjdGVkU2V0dGVyXG5cblx0Y29uc3RydWN0b3IocHJpdmF0ZSByZWFkb25seSBpc0FkbWluOiAoZ3JvdXBJbmZvOiBHcm91cEluZm8pID0+IGJvb2xlYW4pIHt9XG5cblx0dXBkYXRlKGdyb3VwSW5mbzogR3JvdXBJbmZvLCBzZWxlY3RlZDogYm9vbGVhbik6IHZvaWQge1xuXHRcdHRoaXMuZW50aXR5ID0gZ3JvdXBJbmZvXG5cblx0XHR0aGlzLnNlbGVjdGlvblVwZGF0ZXIoc2VsZWN0ZWQsIGZhbHNlKVxuXG5cdFx0dGhpcy5uYW1lRG9tLnRleHRDb250ZW50ID0gZ3JvdXBJbmZvLm5hbWVcblx0XHR0aGlzLmFkZHJlc3NEb20udGV4dENvbnRlbnQgPSBncm91cEluZm8ubWFpbEFkZHJlc3MgPyBncm91cEluZm8ubWFpbEFkZHJlc3MgOiBcIlwiXG5cblx0XHRzZXRWaXNpYmlsaXR5KHRoaXMuYWRtaW5JY29uRG9tLCB0aGlzLmlzQWRtaW4oZ3JvdXBJbmZvKSlcblx0XHRzZXRWaXNpYmlsaXR5KHRoaXMuZGVsZXRlZEljb25Eb20sIGdyb3VwSW5mby5kZWxldGVkICE9IG51bGwpXG5cdH1cblxuXHQvKipcblx0ICogT25seSB0aGUgc3RydWN0dXJlIGlzIG1hbmFnZWQgYnkgbWl0aHJpbC4gV2Ugc2V0IGFsbCBjb250ZW50cyBvbiBvdXIgb3duIChzZWUgdXBkYXRlKSBpbiBvcmRlciB0byBhdm9pZCB0aGUgdmRvbSBvdmVyaGVhZCAobm90IG5lZ2xpZ2libGUgb24gbW9iaWxlcylcblx0ICovXG5cdHJlbmRlcigpOiBDaGlsZHJlbiB7XG5cdFx0cmV0dXJuIG0oXG5cdFx0XHRTZWxlY3RhYmxlUm93Q29udGFpbmVyLFxuXHRcdFx0e1xuXHRcdFx0XHRvblNlbGVjdGVkQ2hhbmdlUmVmOiAodXBkYXRlcikgPT4gKHRoaXMuc2VsZWN0aW9uVXBkYXRlciA9IHVwZGF0ZXIpLFxuXHRcdFx0fSxcblx0XHRcdG0oXCIuZmxleC5jb2wuZmxleC1ncm93XCIsIFtcblx0XHRcdFx0bShcIi5iYWRnZS1saW5lLWhlaWdodFwiLCBbXG5cdFx0XHRcdFx0bShcIlwiLCB7XG5cdFx0XHRcdFx0XHRvbmNyZWF0ZTogKHZub2RlKSA9PiAodGhpcy5uYW1lRG9tID0gdm5vZGUuZG9tIGFzIEhUTUxFbGVtZW50KSxcblx0XHRcdFx0XHR9KSxcblx0XHRcdFx0XSksXG5cdFx0XHRcdG0oXCIuZmxleC1zcGFjZS1iZXR3ZWVuLm10LXh4c1wiLCBbXG5cdFx0XHRcdFx0bShcIi5zbWFsbGVyXCIsIHtcblx0XHRcdFx0XHRcdG9uY3JlYXRlOiAodm5vZGUpID0+ICh0aGlzLmFkZHJlc3NEb20gPSB2bm9kZS5kb20gYXMgSFRNTEVsZW1lbnQpLFxuXHRcdFx0XHRcdH0pLFxuXHRcdFx0XHRcdG0oXCIuaWNvbnMuZmxleFwiLCBbXG5cdFx0XHRcdFx0XHRtKEljb24sIHtcblx0XHRcdFx0XHRcdFx0aWNvbjogQm9vdEljb25zLlNldHRpbmdzLFxuXHRcdFx0XHRcdFx0XHRvbmNyZWF0ZTogKHZub2RlKSA9PiAodGhpcy5hZG1pbkljb25Eb20gPSB2bm9kZS5kb20gYXMgSFRNTEVsZW1lbnQpLFxuXHRcdFx0XHRcdFx0XHRjbGFzczogXCJzdmctbGlzdC1hY2NlbnQtZmdcIixcblx0XHRcdFx0XHRcdFx0c3R5bGU6IHtcblx0XHRcdFx0XHRcdFx0XHRkaXNwbGF5OiBcIm5vbmVcIixcblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdH0pLFxuXHRcdFx0XHRcdFx0bShJY29uLCB7XG5cdFx0XHRcdFx0XHRcdGljb246IEljb25zLlRyYXNoLFxuXHRcdFx0XHRcdFx0XHRvbmNyZWF0ZTogKHZub2RlKSA9PiAodGhpcy5kZWxldGVkSWNvbkRvbSA9IHZub2RlLmRvbSBhcyBIVE1MRWxlbWVudCksXG5cdFx0XHRcdFx0XHRcdGNsYXNzOiBcInN2Zy1saXN0LWFjY2VudC1mZ1wiLFxuXHRcdFx0XHRcdFx0XHRzdHlsZToge1xuXHRcdFx0XHRcdFx0XHRcdGRpc3BsYXk6IFwibm9uZVwiLFxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0fSksXG5cdFx0XHRcdFx0XSksXG5cdFx0XHRcdF0pLFxuXHRcdFx0XSksXG5cdFx0KVxuXHR9XG59XG4iLCJpbXBvcnQgbSwgeyBDaGlsZHJlbiwgQ29tcG9uZW50LCBWbm9kZSB9IGZyb20gXCJtaXRocmlsXCJcbmltcG9ydCB7IEJvb2tpbmdJdGVtRmVhdHVyZVR5cGUsIEZlYXR1cmVUeXBlLCBHcm91cFR5cGUgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2FwaS9jb21tb24vVHV0YW5vdGFDb25zdGFudHMuanNcIlxuaW1wb3J0IHsgRGlhbG9nIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9ndWkvYmFzZS9EaWFsb2cuanNcIlxuaW1wb3J0IHR5cGUgeyBWYWxpZGF0aW9uUmVzdWx0IH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9zZXR0aW5ncy9TZWxlY3RNYWlsQWRkcmVzc0Zvcm0uanNcIlxuaW1wb3J0IHsgU2VsZWN0TWFpbEFkZHJlc3NGb3JtIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9zZXR0aW5ncy9TZWxlY3RNYWlsQWRkcmVzc0Zvcm0uanNcIlxuaW1wb3J0IHsgZ2V0R3JvdXBUeXBlRGlzcGxheU5hbWUgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL3NldHRpbmdzL2dyb3Vwcy9Hcm91cERldGFpbHNWaWV3LmpzXCJcbmltcG9ydCB7IHNob3dQcm9ncmVzc0RpYWxvZyB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZ3VpL2RpYWxvZ3MvUHJvZ3Jlc3NEaWFsb2cuanNcIlxuaW1wb3J0IHsgSW5mb0xpbmssIGxhbmcsIFRyYW5zbGF0aW9uS2V5IH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9taXNjL0xhbmd1YWdlVmlld01vZGVsLmpzXCJcbmltcG9ydCB7IHNob3dCdXlEaWFsb2cgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL3N1YnNjcmlwdGlvbi9CdXlEaWFsb2cuanNcIlxuaW1wb3J0IHsgUHJlY29uZGl0aW9uRmFpbGVkRXJyb3IgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2FwaS9jb21tb24vZXJyb3IvUmVzdEVycm9yLmpzXCJcbmltcG9ydCB7IHNob3dQbGFuVXBncmFkZVJlcXVpcmVkRGlhbG9nIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9taXNjL1N1YnNjcmlwdGlvbkRpYWxvZ3MuanNcIlxuaW1wb3J0IHsgVGVtcGxhdGVHcm91cFByZWNvbmRpdGlvbkZhaWxlZFJlYXNvbiB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vc2hhcmluZy9Hcm91cFV0aWxzLmpzXCJcbmltcG9ydCB7IERyb3BEb3duU2VsZWN0b3IgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2d1aS9iYXNlL0Ryb3BEb3duU2VsZWN0b3IuanNcIlxuaW1wb3J0IHsgVGV4dEZpZWxkIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9ndWkvYmFzZS9UZXh0RmllbGQuanNcIlxuaW1wb3J0IHsgZ2V0Rmlyc3RPclRocm93LCBvZkNsYXNzIH0gZnJvbSBcIkB0dXRhby90dXRhbm90YS11dGlsc1wiXG5pbXBvcnQgdHlwZSB7IEdyb3VwTWFuYWdlbWVudEZhY2FkZSB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vYXBpL3dvcmtlci9mYWNhZGVzL2xhenkvR3JvdXBNYW5hZ2VtZW50RmFjYWRlLmpzXCJcbmltcG9ydCB7IGxvY2F0b3IgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2FwaS9tYWluL0NvbW1vbkxvY2F0b3IuanNcIlxuaW1wb3J0IHsgYXNzZXJ0TWFpbk9yTm9kZSB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vYXBpL2NvbW1vbi9FbnYuanNcIlxuaW1wb3J0IHsgRW1haWxEb21haW5EYXRhLCBnZXRBdmFpbGFibGVEb21haW5zIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9zZXR0aW5ncy9tYWlsYWRkcmVzcy9NYWlsQWRkcmVzc2VzVXRpbHMuanNcIlxuaW1wb3J0IHsgZ2V0QXZhaWxhYmxlUGxhbnNXaXRoVGVtcGxhdGVzLCB0b0ZlYXR1cmVUeXBlIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9zdWJzY3JpcHRpb24vU3Vic2NyaXB0aW9uVXRpbHMuanNcIlxuaW1wb3J0IHsgTW9yZUluZm9MaW5rIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9taXNjL25ld3MvTW9yZUluZm9MaW5rLmpzXCJcblxuYXNzZXJ0TWFpbk9yTm9kZSgpXG5cbmV4cG9ydCB0eXBlIEFkZEdyb3VwRGlhbG9nQXR0cnMgPSB7XG5cdGdyb3VwVHlwZTogR3JvdXBUeXBlXG5cdHNlbGVjdGVkRG9tYWluOiBFbWFpbERvbWFpbkRhdGFcblx0YXZhaWxhYmxlRG9tYWluczogQXJyYXk8RW1haWxEb21haW5EYXRhPlxuXHRhdmFpbGFibGVHcm91cFR5cGVzOiBBcnJheTxHcm91cFR5cGU+XG5cdG5hbWU6IHN0cmluZ1xuXHRvbkdyb3VwTmFtZUNoYW5nZWQ6IChuYW1lOiBzdHJpbmcpID0+IHVua25vd25cblx0b25Hcm91cFR5cGVDaGFuZ2VkOiAodHlwZTogR3JvdXBUeXBlKSA9PiB1bmtub3duXG5cdG9uRW1haWxDaGFuZ2VkOiAoZW1haWxBZGRyZXNzOiBzdHJpbmcsIHZhbGlkYXRpb25SZXN1bHQ6IFZhbGlkYXRpb25SZXN1bHQpID0+IHVua25vd25cblx0b25CdXN5U3RhdGVDaGFuZ2VkOiAoYnVzeTogYm9vbGVhbikgPT4gdW5rbm93blxuXHRvbkRvbWFpbkNoYW5nZWQ6IChkb21haW46IEVtYWlsRG9tYWluRGF0YSkgPT4gdW5rbm93blxufVxuXG5leHBvcnQgY2xhc3MgQWRkR3JvdXBEaWFsb2cgaW1wbGVtZW50cyBDb21wb25lbnQ8QWRkR3JvdXBEaWFsb2dBdHRycz4ge1xuXHR2aWV3KHZub2RlOiBWbm9kZTxBZGRHcm91cERpYWxvZ0F0dHJzPik6IENoaWxkcmVuIHtcblx0XHRjb25zdCB7IGF2YWlsYWJsZUdyb3VwVHlwZXMsIGdyb3VwVHlwZSwgYXZhaWxhYmxlRG9tYWlucywgb25FbWFpbENoYW5nZWQsIG9uQnVzeVN0YXRlQ2hhbmdlZCwgc2VsZWN0ZWREb21haW4sIG9uRG9tYWluQ2hhbmdlZCB9ID0gdm5vZGUuYXR0cnNcblx0XHRyZXR1cm4gW1xuXHRcdFx0YXZhaWxhYmxlR3JvdXBUeXBlcy5sZW5ndGggPiAxXG5cdFx0XHRcdD8gbShEcm9wRG93blNlbGVjdG9yLCB7XG5cdFx0XHRcdFx0XHRsYWJlbDogXCJncm91cFR5cGVfbGFiZWxcIixcblx0XHRcdFx0XHRcdGl0ZW1zOiBhdmFpbGFibGVHcm91cFR5cGVzLm1hcCgodCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdFx0XHRcdG5hbWU6IGdldEdyb3VwVHlwZURpc3BsYXlOYW1lKHQpLFxuXHRcdFx0XHRcdFx0XHRcdHZhbHVlOiB0LFxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9KSxcblx0XHRcdFx0XHRcdHNlbGVjdGVkVmFsdWU6IGdyb3VwVHlwZSxcblx0XHRcdFx0XHRcdHNlbGVjdGlvbkNoYW5nZWRIYW5kbGVyOiB2bm9kZS5hdHRycy5vbkdyb3VwVHlwZUNoYW5nZWQsXG5cdFx0XHRcdCAgfSlcblx0XHRcdFx0OiBudWxsLFxuXHRcdFx0bShUZXh0RmllbGQsIHtcblx0XHRcdFx0bGFiZWw6IFwibmFtZV9sYWJlbFwiLFxuXHRcdFx0XHR2YWx1ZTogdm5vZGUuYXR0cnMubmFtZSxcblx0XHRcdFx0b25pbnB1dDogdm5vZGUuYXR0cnMub25Hcm91cE5hbWVDaGFuZ2VkLFxuXHRcdFx0fSksXG5cdFx0XHRncm91cFR5cGUgPT09IEdyb3VwVHlwZS5NYWlsXG5cdFx0XHRcdD8gbShcIlwiLCBbXG5cdFx0XHRcdFx0XHRtKFNlbGVjdE1haWxBZGRyZXNzRm9ybSwge1xuXHRcdFx0XHRcdFx0XHRzZWxlY3RlZERvbWFpbixcblx0XHRcdFx0XHRcdFx0YXZhaWxhYmxlRG9tYWlucyxcblx0XHRcdFx0XHRcdFx0b25WYWxpZGF0aW9uUmVzdWx0OiBvbkVtYWlsQ2hhbmdlZCxcblx0XHRcdFx0XHRcdFx0b25CdXN5U3RhdGVDaGFuZ2VkLFxuXHRcdFx0XHRcdFx0XHRvbkRvbWFpbkNoYW5nZWQsXG5cdFx0XHRcdFx0XHR9KSxcblx0XHRcdFx0XHRcdG0oXCIubXQtbVwiLCBcIlwiKSxcblx0XHRcdFx0XHRcdG0oTW9yZUluZm9MaW5rLCB7IGxpbms6IEluZm9MaW5rLlNoYXJlZE1haWxib3hlcywgaXNTbWFsbDogdHJ1ZSB9KSxcblx0XHRcdFx0ICBdKVxuXHRcdFx0XHQ6IG0oXCJcIiksXG5cdFx0XVxuXHR9XG59XG5cbmV4cG9ydCBjbGFzcyBBZGRHcm91cERpYWxvZ1ZpZXdNb2RlbCB7XG5cdGdyb3VwTmFtZTogc3RyaW5nXG5cdG1haWxBZGRyZXNzOiBzdHJpbmdcblx0Z3JvdXBUeXBlczogQXJyYXk8R3JvdXBUeXBlPlxuXHRlcnJvck1lc3NhZ2VJZDogVHJhbnNsYXRpb25LZXkgfCBudWxsXG5cdGF2YWlsYWJsZURvbWFpbnM6IEFycmF5PEVtYWlsRG9tYWluRGF0YT5cblx0c2VsZWN0ZWREb21haW46IEVtYWlsRG9tYWluRGF0YVxuXHRncm91cFR5cGU6IEdyb3VwVHlwZVxuXHRpc1ZlcmlmYWN0aW9uQnVzeTogYm9vbGVhblxuXHRfZ3JvdXBNYW5hZ2VtZW50RmFjYWRlOiBHcm91cE1hbmFnZW1lbnRGYWNhZGVcblxuXHRjb25zdHJ1Y3RvcihhdmFpbGFibGVEb21haW5zOiBBcnJheTxFbWFpbERvbWFpbkRhdGE+LCBncm91cE1hbmFnZW1lbnRGYWNhZGU6IEdyb3VwTWFuYWdlbWVudEZhY2FkZSkge1xuXHRcdHRoaXMuYXZhaWxhYmxlRG9tYWlucyA9IGF2YWlsYWJsZURvbWFpbnNcblx0XHR0aGlzLl9ncm91cE1hbmFnZW1lbnRGYWNhZGUgPSBncm91cE1hbmFnZW1lbnRGYWNhZGVcblx0XHR0aGlzLmdyb3VwVHlwZXMgPSB0aGlzLmdldEF2YWlsYWJsZUdyb3VwVHlwZXMoKVxuXHRcdHRoaXMuZ3JvdXBUeXBlID0gZ2V0Rmlyc3RPclRocm93KHRoaXMuZ3JvdXBUeXBlcylcblx0XHR0aGlzLmdyb3VwTmFtZSA9IFwiXCJcblx0XHR0aGlzLm1haWxBZGRyZXNzID0gXCJcIlxuXHRcdHRoaXMuZXJyb3JNZXNzYWdlSWQgPSBcIm1haWxBZGRyZXNzTmV1dHJhbF9tc2dcIlxuXHRcdHRoaXMuaXNWZXJpZmFjdGlvbkJ1c3kgPSBmYWxzZVxuXG5cdFx0dGhpcy5zZWxlY3RlZERvbWFpbiA9IGdldEZpcnN0T3JUaHJvdyhhdmFpbGFibGVEb21haW5zKVxuXHR9XG5cblx0Y3JlYXRlTWFpbEdyb3VwKCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdHJldHVybiB0aGlzLl9ncm91cE1hbmFnZW1lbnRGYWNhZGUuY3JlYXRlTWFpbEdyb3VwKHRoaXMuZ3JvdXBOYW1lLCB0aGlzLm1haWxBZGRyZXNzKVxuXHR9XG5cblx0dmFsaWRhdGVBZGRHcm91cElucHV0KCk6IFRyYW5zbGF0aW9uS2V5IHwgbnVsbCB7XG5cdFx0aWYgKHRoaXMuZ3JvdXBUeXBlID09PSBHcm91cFR5cGUuTWFpbCkge1xuXHRcdFx0cmV0dXJuIHRoaXMuZXJyb3JNZXNzYWdlSWRcblx0XHR9IGVsc2UgaWYgKHRoaXMuZ3JvdXBUeXBlID09PSBHcm91cFR5cGUuVGVtcGxhdGUgfHwgKHRoaXMuZ3JvdXBUeXBlID09PSBHcm91cFR5cGUuTWFpbGluZ0xpc3QgJiYgdGhpcy5ncm91cE5hbWUudHJpbSgpID09PSBcIlwiKSkge1xuXHRcdFx0cmV0dXJuIFwiZW50ZXJOYW1lX21zZ1wiXG5cdFx0fSBlbHNlIHtcblx0XHRcdHJldHVybiBudWxsXG5cdFx0fVxuXHR9XG5cblx0Z2V0QXZhaWxhYmxlR3JvdXBUeXBlcygpOiBHcm91cFR5cGVbXSB7XG5cdFx0aWYgKGxvY2F0b3IubG9naW5zLmlzRW5hYmxlZChGZWF0dXJlVHlwZS5XaGl0ZWxhYmVsQ2hpbGQpKSB7XG5cdFx0XHRyZXR1cm4gW11cblx0XHR9IGVsc2Uge1xuXHRcdFx0cmV0dXJuIFtHcm91cFR5cGUuTWFpbF1cblx0XHR9XG5cdH1cblxuXHRvbkVtYWlsQ2hhbmdlZChlbWFpbDogc3RyaW5nLCB2YWxpZGF0aW9uUmVzdWx0OiBWYWxpZGF0aW9uUmVzdWx0KSB7XG5cdFx0dGhpcy5lcnJvck1lc3NhZ2VJZCA9IHZhbGlkYXRpb25SZXN1bHQuZXJyb3JJZFxuXG5cdFx0aWYgKHZhbGlkYXRpb25SZXN1bHQuaXNWYWxpZCkge1xuXHRcdFx0dGhpcy5tYWlsQWRkcmVzcyA9IGVtYWlsXG5cdFx0fVxuXHR9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzaG93KCk6IHZvaWQge1xuXHRnZXRBdmFpbGFibGVEb21haW5zKGxvY2F0b3IubG9naW5zKS50aGVuKChhdmFpbGFibGVEb21haW5zKSA9PiB7XG5cdFx0Y29uc3Qgdmlld01vZGVsID0gbmV3IEFkZEdyb3VwRGlhbG9nVmlld01vZGVsKGF2YWlsYWJsZURvbWFpbnMsIGxvY2F0b3IuZ3JvdXBNYW5hZ2VtZW50RmFjYWRlKVxuXHRcdGlmICh2aWV3TW9kZWwuZ2V0QXZhaWxhYmxlR3JvdXBUeXBlcygpLmxlbmd0aCA9PT0gMCkgcmV0dXJuIERpYWxvZy5tZXNzYWdlKFwic2VsZWN0aW9uTm90QXZhaWxhYmxlX21zZ1wiKVxuXG5cdFx0bGV0IGFkZEdyb3VwT2tBY3Rpb24gPSBhc3luYyAoZGlhbG9nOiBEaWFsb2cpID0+IHtcblx0XHRcdGlmICh2aWV3TW9kZWwuaXNWZXJpZmFjdGlvbkJ1c3kpIHJldHVyblxuXHRcdFx0Y29uc3QgZXJyb3JJZCA9IHZpZXdNb2RlbC52YWxpZGF0ZUFkZEdyb3VwSW5wdXQoKVxuXG5cdFx0XHRpZiAoZXJyb3JJZCkge1xuXHRcdFx0XHREaWFsb2cubWVzc2FnZShlcnJvcklkKVxuXHRcdFx0XHRyZXR1cm5cblx0XHRcdH1cblxuXHRcdFx0Y29uc3QgdXNlckNvbnRyb2xsZXIgPSBsb2NhdG9yLmxvZ2lucy5nZXRVc2VyQ29udHJvbGxlcigpXG5cdFx0XHRjb25zdCBwbGFuVHlwZSA9IGF3YWl0IHVzZXJDb250cm9sbGVyLmdldFBsYW5UeXBlKClcblx0XHRcdGNvbnN0IHVzZUxlZ2FjeUJvb2tpbmdJdGVtID0gYXdhaXQgdXNlckNvbnRyb2xsZXIudXNlTGVnYWN5Qm9va2luZ0l0ZW0oKVxuXG5cdFx0XHRpZiAodmlld01vZGVsLmdyb3VwVHlwZSA9PT0gR3JvdXBUeXBlLk1haWwpIHtcblx0XHRcdFx0c2hvd1Byb2dyZXNzRGlhbG9nKFxuXHRcdFx0XHRcdFwicGxlYXNlV2FpdF9tc2dcIixcblx0XHRcdFx0XHRzaG93QnV5RGlhbG9nKHtcblx0XHRcdFx0XHRcdGZlYXR1cmVUeXBlOiB1c2VMZWdhY3lCb29raW5nSXRlbSA/IHRvRmVhdHVyZVR5cGUocGxhblR5cGUpIDogQm9va2luZ0l0ZW1GZWF0dXJlVHlwZS5TaGFyZWRNYWlsR3JvdXAsXG5cdFx0XHRcdFx0XHRib29raW5nVGV4dDogXCJzaGFyZWRNYWlsYm94X2xhYmVsXCIsXG5cdFx0XHRcdFx0XHRjb3VudDogMSxcblx0XHRcdFx0XHRcdGZyZWVBbW91bnQ6IDAsXG5cdFx0XHRcdFx0XHRyZWFjdGl2YXRlOiBmYWxzZSxcblx0XHRcdFx0XHR9KS50aGVuKChhY2NlcHRlZCkgPT4ge1xuXHRcdFx0XHRcdFx0aWYgKGFjY2VwdGVkKSB7XG5cdFx0XHRcdFx0XHRcdGRpYWxvZy5jbG9zZSgpXG5cdFx0XHRcdFx0XHRcdHJldHVybiB2aWV3TW9kZWwuY3JlYXRlTWFpbEdyb3VwKClcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KSxcblx0XHRcdFx0KVxuXHRcdFx0fSBlbHNlIGlmICh2aWV3TW9kZWwuZ3JvdXBUeXBlID09PSBHcm91cFR5cGUuVGVtcGxhdGUpIHtcblx0XHRcdFx0YWRkVGVtcGxhdGVHcm91cCh2aWV3TW9kZWwuZ3JvdXBOYW1lKS50aGVuKChzdWNjZXNzKSA9PiB7XG5cdFx0XHRcdFx0aWYgKHN1Y2Nlc3MpIHtcblx0XHRcdFx0XHRcdGRpYWxvZy5jbG9zZSgpXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdERpYWxvZy5zaG93QWN0aW9uRGlhbG9nKHtcblx0XHRcdHRpdGxlOiB2aWV3TW9kZWwuZ3JvdXBUeXBlID09IEdyb3VwVHlwZS5NYWlsID8gXCJjcmVhdGVTaGFyZWRNYWlsYm94X2xhYmVsXCIgOiBcImFkZEdyb3VwX2xhYmVsXCIsXG5cdFx0XHRjaGlsZDogKCkgPT5cblx0XHRcdFx0bShBZGRHcm91cERpYWxvZywge1xuXHRcdFx0XHRcdHNlbGVjdGVkRG9tYWluOiB2aWV3TW9kZWwuc2VsZWN0ZWREb21haW4sXG5cdFx0XHRcdFx0Z3JvdXBUeXBlOiB2aWV3TW9kZWwuZ3JvdXBUeXBlLFxuXHRcdFx0XHRcdGF2YWlsYWJsZURvbWFpbnM6IGF2YWlsYWJsZURvbWFpbnMsXG5cdFx0XHRcdFx0YXZhaWxhYmxlR3JvdXBUeXBlczogdmlld01vZGVsLmdyb3VwVHlwZXMsXG5cdFx0XHRcdFx0bmFtZTogdmlld01vZGVsLmdyb3VwTmFtZSxcblx0XHRcdFx0XHRvbkdyb3VwTmFtZUNoYW5nZWQ6IChuZXdOYW1lKSA9PiAodmlld01vZGVsLmdyb3VwTmFtZSA9IG5ld05hbWUpLFxuXHRcdFx0XHRcdG9uR3JvdXBUeXBlQ2hhbmdlZDogKG5ld1R5cGUpID0+ICh2aWV3TW9kZWwuZ3JvdXBUeXBlID0gbmV3VHlwZSksXG5cdFx0XHRcdFx0b25FbWFpbENoYW5nZWQ6IChtYWlsQWRkcmVzcywgdmFsaWRhdGlvblJlc3VsdCkgPT4gdmlld01vZGVsLm9uRW1haWxDaGFuZ2VkKG1haWxBZGRyZXNzLCB2YWxpZGF0aW9uUmVzdWx0KSxcblx0XHRcdFx0XHRvbkJ1c3lTdGF0ZUNoYW5nZWQ6IChpc0J1c3kpID0+ICh2aWV3TW9kZWwuaXNWZXJpZmFjdGlvbkJ1c3kgPSBpc0J1c3kpLFxuXHRcdFx0XHRcdG9uRG9tYWluQ2hhbmdlZDogKGRvbWFpbikgPT4gKHZpZXdNb2RlbC5zZWxlY3RlZERvbWFpbiA9IGRvbWFpbiksXG5cdFx0XHRcdH0pLFxuXHRcdFx0b2tBY3Rpb246IGFkZEdyb3VwT2tBY3Rpb24sXG5cdFx0fSlcblx0fSlcbn1cblxuLyoqXG4gKiBAcmV0dXJucyB7UHJvbWlzZTxib29sZWFuPn0gdHJ1ZSBpZiBncm91cCB3YXMgYWRkZWQsIGZhbHNlIG90aGVyd2lzZVxuICovXG5mdW5jdGlvbiBhZGRUZW1wbGF0ZUdyb3VwKG5hbWU6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuXHRyZXR1cm4gc2hvd1Byb2dyZXNzRGlhbG9nKFxuXHRcdFwicGxlYXNlV2FpdF9tc2dcIixcblx0XHRsb2NhdG9yLmdyb3VwTWFuYWdlbWVudEZhY2FkZVxuXHRcdFx0LmNyZWF0ZVRlbXBsYXRlR3JvdXAobmFtZSlcblx0XHRcdC50aGVuKCgpID0+IHRydWUpXG5cdFx0XHQuY2F0Y2goXG5cdFx0XHRcdG9mQ2xhc3MoUHJlY29uZGl0aW9uRmFpbGVkRXJyb3IsIGFzeW5jIChlKSA9PiB7XG5cdFx0XHRcdFx0aWYgKFxuXHRcdFx0XHRcdFx0ZS5kYXRhID09PSBUZW1wbGF0ZUdyb3VwUHJlY29uZGl0aW9uRmFpbGVkUmVhc29uLkJVU0lORVNTX0ZFQVRVUkVfUkVRVUlSRUQgfHxcblx0XHRcdFx0XHRcdGUuZGF0YSA9PT0gVGVtcGxhdGVHcm91cFByZWNvbmRpdGlvbkZhaWxlZFJlYXNvbi5VTkxJTUlURURfUkVRVUlSRURcblx0XHRcdFx0XHQpIHtcblx0XHRcdFx0XHRcdGNvbnN0IHBsYW5zID0gYXdhaXQgZ2V0QXZhaWxhYmxlUGxhbnNXaXRoVGVtcGxhdGVzKClcblx0XHRcdFx0XHRcdHNob3dQbGFuVXBncmFkZVJlcXVpcmVkRGlhbG9nKHBsYW5zKVxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHREaWFsb2cubWVzc2FnZShsYW5nLm1ha2VUcmFuc2xhdGlvbihcImNvbmZpcm1fbXNnXCIsIGUubWVzc2FnZSkpXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlXG5cdFx0XHRcdH0pLFxuXHRcdFx0KSxcblx0KVxufVxuIiwiaW1wb3J0IHtcblx0Y3JlYXRlR3JvdXBJbmZvLFxuXHRDdXN0b21lclR5cGVSZWYsXG5cdEdyb3VwLFxuXHRHcm91cEluZm8sXG5cdEdyb3VwSW5mb1R5cGVSZWYsXG5cdEdyb3VwTWVtYmVyVHlwZVJlZixcblx0R3JvdXBUeXBlUmVmLFxuXHRVc2VyVHlwZVJlZixcbn0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9hcGkvZW50aXRpZXMvc3lzL1R5cGVSZWZzLmpzXCJcbmltcG9ydCB7IGFzc2VydE5vdE51bGwsIGdldEZpcnN0T3JUaHJvdywgTGF6eUxvYWRlZCwgbmV2ZXJOdWxsLCBwcm9taXNlTWFwIH0gZnJvbSBcIkB0dXRhby90dXRhbm90YS11dGlsc1wiXG5pbXBvcnQgeyBFbnRpdHlDbGllbnQgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2FwaS9jb21tb24vRW50aXR5Q2xpZW50LmpzXCJcbmltcG9ydCB7IEdFTkVSQVRFRF9NSU5fSUQsIGlzU2FtZUlkIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9hcGkvY29tbW9uL3V0aWxzL0VudGl0eVV0aWxzLmpzXCJcbmltcG9ydCB7IEJvb2tpbmdJdGVtRmVhdHVyZVR5cGUsIEdyb3VwVHlwZSwgT3BlcmF0aW9uVHlwZSB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vYXBpL2NvbW1vbi9UdXRhbm90YUNvbnN0YW50cy5qc1wiXG5pbXBvcnQgeyBsYW5nLCBUcmFuc2xhdGlvbktleSB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vbWlzYy9MYW5ndWFnZVZpZXdNb2RlbC5qc1wiXG5pbXBvcnQgeyBzdHJpbmdWYWxpZGF0b3IgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2d1aS9iYXNlL0RpYWxvZy5qc1wiXG5pbXBvcnQgeyBsb2NhdG9yIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9hcGkvbWFpbi9Db21tb25Mb2NhdG9yLmpzXCJcbmltcG9ydCB7IEJhZFJlcXVlc3RFcnJvciwgTm90QXV0aG9yaXplZEVycm9yLCBQcmVjb25kaXRpb25GYWlsZWRFcnJvciB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vYXBpL2NvbW1vbi9lcnJvci9SZXN0RXJyb3IuanNcIlxuaW1wb3J0IHsgY29tcGFyZUdyb3VwSW5mb3MsIGdldEdyb3VwSW5mb0Rpc3BsYXlOYW1lIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9hcGkvY29tbW9uL3V0aWxzL0dyb3VwVXRpbHMuanNcIlxuaW1wb3J0IHsgTWFpbGJveFByb3BlcnRpZXNUeXBlUmVmIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9hcGkvZW50aXRpZXMvdHV0YW5vdGEvVHlwZVJlZnMuanNcIlxuaW1wb3J0IHsgVXNlckVycm9yIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9hcGkvbWFpbi9Vc2VyRXJyb3IuanNcIlxuaW1wb3J0IHsgQm9va2luZ1BhcmFtcyB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vc3Vic2NyaXB0aW9uL0J1eURpYWxvZy5qc1wiXG5pbXBvcnQgeyB0b0ZlYXR1cmVUeXBlIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9zdWJzY3JpcHRpb24vU3Vic2NyaXB0aW9uVXRpbHMuanNcIlxuaW1wb3J0IHsgRW50aXR5VXBkYXRlRGF0YSwgaXNVcGRhdGVGb3JUeXBlUmVmIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9hcGkvY29tbW9uL3V0aWxzL0VudGl0eVVwZGF0ZVV0aWxzLmpzXCJcblxuZXhwb3J0IGNsYXNzIEdyb3VwRGV0YWlsc01vZGVsIHtcblx0Z3JvdXBJbmZvOiBHcm91cEluZm9cblx0cHJpdmF0ZSByZWFkb25seSBncm91cDogTGF6eUxvYWRlZDxHcm91cD5cblx0cHJpdmF0ZSB1c2VkU3RvcmFnZUluQnl0ZXMhOiBudW1iZXJcblx0cHJpdmF0ZSByZWFkb25seSBtZW1iZXJzOiBMYXp5TG9hZGVkPEFycmF5PEdyb3VwSW5mbz4+XG5cblx0cHJpdmF0ZSBzZW5kZXJOYW1lITogTGF6eUxvYWRlZDxzdHJpbmc+XG5cblx0Y29uc3RydWN0b3IoZ3JvdXBJbmZvOiBHcm91cEluZm8sIHByaXZhdGUgcmVhZG9ubHkgZW50aXR5Q2xpZW50OiBFbnRpdHlDbGllbnQsIHByaXZhdGUgcmVhZG9ubHkgdXBkYXRlVmlld0NhbGxiYWNrOiAoKSA9PiB2b2lkKSB7XG5cdFx0dGhpcy5lbnRpdHlDbGllbnQgPSBlbnRpdHlDbGllbnRcblx0XHR0aGlzLmdyb3VwSW5mbyA9IGdyb3VwSW5mb1xuXHRcdHRoaXMuZ3JvdXAgPSBuZXcgTGF6eUxvYWRlZCgoKSA9PiB0aGlzLmVudGl0eUNsaWVudC5sb2FkKEdyb3VwVHlwZVJlZiwgdGhpcy5ncm91cEluZm8uZ3JvdXApKVxuXG5cdFx0dGhpcy5ncm91cC5nZXRBc3luYygpLnRoZW4oKCkgPT4gdGhpcy51cGRhdGVWaWV3Q2FsbGJhY2soKSlcblxuXHRcdHRoaXMubWVtYmVycyA9IG5ldyBMYXp5TG9hZGVkKGFzeW5jICgpID0+IHtcblx0XHRcdGNvbnN0IGdyb3VwID0gYXdhaXQgdGhpcy5ncm91cC5nZXRBc3luYygpXG5cdFx0XHQvLyBsb2FkIG9ubHkgdXAgdG8gMjAwIG1lbWJlcnMgdG8gYXZvaWQgdG9vIGxvbmcgbG9hZGluZywgbGlrZSBmb3IgYWNjb3VudCBncm91cHNcblx0XHRcdGNvbnN0IGdyb3VwTWVtYmVycyA9IGF3YWl0IHRoaXMuZW50aXR5Q2xpZW50LmxvYWRSYW5nZShHcm91cE1lbWJlclR5cGVSZWYsIGdyb3VwLm1lbWJlcnMsIEdFTkVSQVRFRF9NSU5fSUQsIDIwMCwgZmFsc2UpXG5cdFx0XHRyZXR1cm4gcHJvbWlzZU1hcChncm91cE1lbWJlcnMsIChtZW1iZXIpID0+IHRoaXMuZW50aXR5Q2xpZW50LmxvYWQoR3JvdXBJbmZvVHlwZVJlZiwgbWVtYmVyLnVzZXJHcm91cEluZm8pKVxuXHRcdH0pXG5cblx0XHQvLyBub2luc3BlY3Rpb24gSlNJZ25vcmVkUHJvbWlzZUZyb21DYWxsXG5cdFx0dGhpcy51cGRhdGVNZW1iZXJzKClcblxuXHRcdGlmICh0aGlzLmdyb3VwSW5mby5ncm91cFR5cGUgPT09IEdyb3VwVHlwZS5NYWlsKSB7XG5cdFx0XHR0aGlzLnNlbmRlck5hbWUgPSBuZXcgTGF6eUxvYWRlZDxzdHJpbmc+KCgpID0+IHRoaXMubG9hZFNlbmRlck5hbWUoKSlcblx0XHRcdC8vIG5vaW5zcGVjdGlvbiBKU0lnbm9yZWRQcm9taXNlRnJvbUNhbGxcblx0XHRcdHRoaXMudXBkYXRlU2VuZGVyTmFtZSgpXG5cdFx0fVxuXG5cdFx0Ly8gbm9pbnNwZWN0aW9uIEpTSWdub3JlZFByb21pc2VGcm9tQ2FsbFxuXHRcdHRoaXMudXBkYXRlVXNlZFN0b3JhZ2UoKVxuXHR9XG5cblx0aXNNYWlsR3JvdXAoKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIHRoaXMuZ3JvdXBJbmZvLmdyb3VwVHlwZSA9PT0gR3JvdXBUeXBlLk1haWxcblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgbG9hZFNlbmRlck5hbWUoKTogUHJvbWlzZTxzdHJpbmc+IHtcblx0XHRjb25zdCBuYW1lcyA9IGF3YWl0IGxvY2F0b3IubWFpbEFkZHJlc3NGYWNhZGUuZ2V0U2VuZGVyTmFtZXModGhpcy5ncm91cEluZm8uZ3JvdXApXG5cdFx0cmV0dXJuIGdldEZpcnN0T3JUaHJvdyhBcnJheS5mcm9tKG5hbWVzLnZhbHVlcygpKSlcblx0fVxuXG5cdGlzR3JvdXBBY3RpdmUoKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIHRoaXMuZ3JvdXBJbmZvLmRlbGV0ZWQgPT0gbnVsbFxuXHR9XG5cblx0Z2V0R3JvdXBUeXBlKCk6IHN0cmluZyB8IG51bGwge1xuXHRcdHJldHVybiB0aGlzLmdyb3VwLmlzTG9hZGVkKCkgPyB0aGlzLmdyb3VwLmdldExvYWRlZCgpLnR5cGUgOiBudWxsXG5cdH1cblxuXHRnZXRHcm91cE5hbWUoKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gdGhpcy5ncm91cEluZm8ubmFtZVxuXHR9XG5cblx0Z2V0VXNlZFN0b3JhZ2UoKTogbnVtYmVyIHwgbnVsbCB7XG5cdFx0cmV0dXJuIHRoaXMudXNlZFN0b3JhZ2VJbkJ5dGVzXG5cdH1cblxuXHRnZXRDcmVhdGlvbkRhdGUoKTogRGF0ZSB7XG5cdFx0cmV0dXJuIHRoaXMuZ3JvdXBJbmZvLmNyZWF0ZWRcblx0fVxuXG5cdGdldE1lbWJlcnNJbmZvKCk6IEFycmF5PEdyb3VwSW5mbz4ge1xuXHRcdHJldHVybiB0aGlzLm1lbWJlcnMuaXNMb2FkZWQoKSA/IHRoaXMubWVtYmVycy5nZXRMb2FkZWQoKSA6IFtdXG5cdH1cblxuXHRnZXRHcm91cE1haWxBZGRyZXNzKCk6IHN0cmluZyB7XG5cdFx0cmV0dXJuIHRoaXMuZ3JvdXBJbmZvLm1haWxBZGRyZXNzID8/IFwiXCJcblx0fVxuXG5cdGdldEdyb3VwU2VuZGVyTmFtZSgpOiBzdHJpbmcge1xuXHRcdHJldHVybiB0aGlzLnNlbmRlck5hbWUuaXNMb2FkZWQoKSA/IHRoaXMuc2VuZGVyTmFtZS5nZXRMb2FkZWQoKSA6IGxhbmcuZ2V0KFwibG9hZGluZ19tc2dcIilcblx0fVxuXG5cdC8qKlxuXHQgKiByZW1vdmUgdGhlIGdyb3VwIG9mIHRoZSBnaXZlbiBncm91cEluZm8gZnJvbSB0aGlzIGdyb3VwXG5cdCAqL1xuXHRhc3luYyByZW1vdmVHcm91cE1lbWJlcih1c2VyR3JvdXBJbmZvOiBHcm91cEluZm8pOiBQcm9taXNlPHZvaWQ+IHtcblx0XHR0cnkge1xuXHRcdFx0Y29uc3QgdXNlckdyb3VwID0gYXdhaXQgdGhpcy5lbnRpdHlDbGllbnQubG9hZChHcm91cFR5cGVSZWYsIHVzZXJHcm91cEluZm8uZ3JvdXApXG5cdFx0XHRyZXR1cm4gbG9jYXRvci5ncm91cE1hbmFnZW1lbnRGYWNhZGUucmVtb3ZlVXNlckZyb21Hcm91cChhc3NlcnROb3ROdWxsKHVzZXJHcm91cC51c2VyKSwgdGhpcy5ncm91cEluZm8uZ3JvdXApXG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0aWYgKCEoZSBpbnN0YW5jZW9mIE5vdEF1dGhvcml6ZWRFcnJvcikpIHRocm93IGVcblx0XHRcdHRocm93IG5ldyBVc2VyRXJyb3IoXCJyZW1vdmVVc2VyRnJvbUdyb3VwTm90QWRtaW5pc3RyYXRlZEVycm9yX21zZ1wiKVxuXHRcdH1cblx0fVxuXG5cdGFzeW5jIGV4ZWN1dGVHcm91cEJ1eShkZWFjdGl2YXRlOiBib29sZWFuKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0Y29uc3QgZ3JvdXAgPSBhd2FpdCB0aGlzLmdyb3VwLmdldEFzeW5jKClcblx0XHR0cnkge1xuXHRcdFx0cmV0dXJuIGF3YWl0IGxvY2F0b3IuZ3JvdXBNYW5hZ2VtZW50RmFjYWRlLmRlYWN0aXZhdGVHcm91cChncm91cCwgIWRlYWN0aXZhdGUpXG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0aWYgKCEoZSBpbnN0YW5jZW9mIFByZWNvbmRpdGlvbkZhaWxlZEVycm9yKSkgdGhyb3cgZVxuXHRcdFx0aWYgKCFkZWFjdGl2YXRlKSB7XG5cdFx0XHRcdHRocm93IG5ldyBVc2VyRXJyb3IoXCJlbWFpbEFkZHJlc3NJblVzZV9tc2dcIilcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRocm93IG5ldyBVc2VyRXJyb3IoXCJzdGlsbFJlZmVyZW5jZWRGcm9tQ29udGFjdEZvcm1fbXNnXCIpXG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0Y2hhbmdlR3JvdXBOYW1lKG5ld05hbWU6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGNvbnN0IG5ld0dyb3VwSW5mbzogR3JvdXBJbmZvID0gY3JlYXRlR3JvdXBJbmZvKHRoaXMuZ3JvdXBJbmZvKVxuXHRcdG5ld0dyb3VwSW5mby5uYW1lID0gbmV3TmFtZVxuXHRcdHJldHVybiB0aGlzLmVudGl0eUNsaWVudC51cGRhdGUobmV3R3JvdXBJbmZvKVxuXHR9XG5cblx0YXN5bmMgY2hhbmdlR3JvdXBTZW5kZXJOYW1lKG5ld05hbWU6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGlmICh0aGlzLnNlbmRlck5hbWUuaXNMb2FkZWQoKSAmJiB0aGlzLnNlbmRlck5hbWUuZ2V0TG9hZGVkKCkgPT09IG5ld05hbWUpIHJldHVyblxuXHRcdGNvbnN0IG1haWxHcm91cElkID0gYXdhaXQgdGhpcy5ncm91cEluZm8uZ3JvdXBcblx0XHRhd2FpdCBsb2NhdG9yLm1haWxBZGRyZXNzRmFjYWRlLnNldFNlbmRlck5hbWUobWFpbEdyb3VwSWQsIHRoaXMuZ2V0R3JvdXBNYWlsQWRkcmVzcygpLCBuZXdOYW1lKVxuXG5cdFx0Ly8gd2UgbWF5IG5vdCBiZSBhIG1lbWJlciBvZiB0aGUgZ3JvdXAgYW5kIHRoZXJlZm9yZSB3b24ndCBuZWNlc3NhcmlseSByZWNlaXZlIHVwZGF0ZXNcblx0XHQvLyBmb3IgdXBkYXRlZCBtYWlsYm94IHByb3BlcnRpZXMuXG5cdFx0dGhpcy5zZW5kZXJOYW1lLnJlc2V0KClcblx0XHQvLyBub2luc3BlY3Rpb24gRVM2TWlzc2luZ0F3YWl0XG5cdFx0dGhpcy5zZW5kZXJOYW1lLmdldEFzeW5jKClcblx0XHR0aGlzLnVwZGF0ZVZpZXdDYWxsYmFjaygpXG5cdH1cblxuXHR2YWxpZGF0ZUdyb3VwTmFtZShuZXdOYW1lOiBzdHJpbmcpOiBSZXR1cm5UeXBlPHN0cmluZ1ZhbGlkYXRvcj4ge1xuXHRcdGlmICh0aGlzLmdyb3VwLmlzTG9hZGVkKCkgJiYgdGhpcy5ncm91cC5nZXRMb2FkZWQoKS50eXBlID09PSBHcm91cFR5cGUuTWFpbGluZ0xpc3QgJiYgbmV3TmFtZS50cmltKCkgPT09IFwiXCIpIHtcblx0XHRcdHJldHVybiBcImVudGVyTmFtZV9tc2dcIlxuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZXR1cm4gbnVsbFxuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiB2YWxpZGF0ZSBpZiB0aGUgZ2l2ZW4gZGVhY3RpdmF0aW9uL2FjdGl2YXRpb24gaXMgdmFsaWQgZm9yIHRoaXMgZ3JvdXAgYW5kIHJldHVybiBpbmZvcm1hdGlvbiBhYm91dCB0aGUgaXRlbSB0byBib29rLCBpZiBhbnlcblx0ICogQHBhcmFtIGRlYWN0aXZhdGUgdHJ1ZSBpZiB0aGUgZ3JvdXAgc2hvdWxkIGJlIGRlYWN0aXZhdGVkXG5cdCAqIEByZXR1cm4gdGhlIHJlbGV2YW50IEJvb2tpbmdQYXJhbXMgaWYgdGhlIGFjdGl2YXRpb24vZGVhY3RpdmF0aWFuIG1heSBnbyBhaGVhZCwgbnVsbCBvdGhlcndpc2UgKG5vIGFjdGlvbiBuZWNlc3NhcnkpXG5cdCAqL1xuXHRhc3luYyB2YWxpZGF0ZUdyb3VwQWN0aXZhdGlvblN0YXR1cyhkZWFjdGl2YXRlOiBib29sZWFuKTogUHJvbWlzZTxCb29raW5nUGFyYW1zIHwgbnVsbD4ge1xuXHRcdGlmIChkZWFjdGl2YXRlICE9PSB0aGlzLmlzR3JvdXBBY3RpdmUoKSkge1xuXHRcdFx0Y29uc29sZS5sb2coXCJ0cmllZCB0byBzZXQgYWN0aXZhdGlvbiBzdGF0dXMgdG8gY3VycmVudCBzdGF0dXMuXCIpXG5cdFx0XHRyZXR1cm4gbnVsbFxuXHRcdH1cblx0XHRjb25zdCBtZW1iZXJzID0gYXdhaXQgdGhpcy5tZW1iZXJzLmdldEFzeW5jKClcblx0XHRpZiAoZGVhY3RpdmF0ZSAmJiBtZW1iZXJzLmxlbmd0aCA+IDApIHtcblx0XHRcdHRocm93IG5ldyBVc2VyRXJyb3IoXCJncm91cE5vdEVtcHR5X21zZ1wiKVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRjb25zdCB1c2VyQ29udHJvbGxlciA9IGxvY2F0b3IubG9naW5zLmdldFVzZXJDb250cm9sbGVyKClcblx0XHRcdGNvbnN0IHBsYW5UeXBlID0gYXdhaXQgdXNlckNvbnRyb2xsZXIuZ2V0UGxhblR5cGUoKVxuXHRcdFx0Y29uc3QgdXNlTGVnYWN5Qm9va2luZ0l0ZW0gPSBhd2FpdCB1c2VyQ29udHJvbGxlci51c2VMZWdhY3lCb29raW5nSXRlbSgpXG5cblx0XHRcdGNvbnN0IGJvb2tpbmdJdGVtVHlwZSA9IHVzZUxlZ2FjeUJvb2tpbmdJdGVtID8gdG9GZWF0dXJlVHlwZShwbGFuVHlwZSkgOiBCb29raW5nSXRlbUZlYXR1cmVUeXBlLlNoYXJlZE1haWxHcm91cFxuXHRcdFx0Y29uc3QgYm9va2luZ1RleHQ6IFRyYW5zbGF0aW9uS2V5ID0gZGVhY3RpdmF0ZSA/IFwiY2FuY2VsU2hhcmVkTWFpbGJveF9sYWJlbFwiIDogXCJzaGFyZWRNYWlsYm94X2xhYmVsXCJcblxuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0ZmVhdHVyZVR5cGU6IGJvb2tpbmdJdGVtVHlwZSxcblx0XHRcdFx0Ym9va2luZ1RleHQ6IGJvb2tpbmdUZXh0LFxuXHRcdFx0XHRjb3VudDogZGVhY3RpdmF0ZSA/IC0xIDogMSxcblx0XHRcdFx0ZnJlZUFtb3VudDogMCxcblx0XHRcdFx0cmVhY3RpdmF0ZTogIWRlYWN0aXZhdGUsXG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0YXN5bmMgZ2V0UG9zc2libGVNZW1iZXJzKCk6IFByb21pc2U8QXJyYXk8eyBuYW1lOiBzdHJpbmc7IHZhbHVlOiBJZCB9Pj4ge1xuXHRcdGNvbnN0IGN1c3RvbWVyID0gYXdhaXQgdGhpcy5lbnRpdHlDbGllbnQubG9hZChDdXN0b21lclR5cGVSZWYsIG5ldmVyTnVsbChsb2NhdG9yLmxvZ2lucy5nZXRVc2VyQ29udHJvbGxlcigpLnVzZXIuY3VzdG9tZXIpKVxuXHRcdGNvbnN0IHVzZXJHcm91cEluZm9zID0gYXdhaXQgdGhpcy5lbnRpdHlDbGllbnQubG9hZEFsbChHcm91cEluZm9UeXBlUmVmLCBjdXN0b21lci51c2VyR3JvdXBzKVxuXHRcdC8vIHJlbW92ZSBhbGwgdXNlcnMgdGhhdCBhcmUgYWxyZWFkeSBtZW1iZXJcblx0XHRsZXQgZ2xvYmFsQWRtaW4gPSBsb2NhdG9yLmxvZ2lucy5pc0dsb2JhbEFkbWluVXNlckxvZ2dlZEluKClcblx0XHRsZXQgYXZhaWxhYmxlVXNlckdyb3VwSW5mb3MgPSB1c2VyR3JvdXBJbmZvcy5maWx0ZXIoKHVzZXJHcm91cEluZm8pID0+IHtcblx0XHRcdGlmIChcblx0XHRcdFx0IWdsb2JhbEFkbWluIC8vIGlmIHdlIGFyZSBub3QgYSAgZ2xvYmFsIGFkbWluIHdlIG1heSBub3QgYWRkIGFueW9uZSwgZG9uJ3QgZmlsdGVyXG5cdFx0XHQpIHtcblx0XHRcdFx0cmV0dXJuIGZhbHNlXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvLyBvbmx5IHNob3cgdXNlcnMgdGhhdCBhcmUgbm90IGRlbGV0ZWQgYW5kIG5vdCBhbHJlYWR5IGluIHRoZSBncm91cC5cblx0XHRcdFx0cmV0dXJuICF1c2VyR3JvdXBJbmZvLmRlbGV0ZWQgJiYgIXRoaXMubWVtYmVycy5nZXRMb2FkZWQoKS5zb21lKChtKSA9PiBpc1NhbWVJZChtLl9pZCwgdXNlckdyb3VwSW5mby5faWQpKVxuXHRcdFx0fVxuXHRcdH0pXG5cblx0XHRhdmFpbGFibGVVc2VyR3JvdXBJbmZvcy5zb3J0KGNvbXBhcmVHcm91cEluZm9zKVxuXHRcdHJldHVybiBhdmFpbGFibGVVc2VyR3JvdXBJbmZvcy5tYXAoKGcpID0+ICh7IG5hbWU6IGdldEdyb3VwSW5mb0Rpc3BsYXlOYW1lKGcpLCB2YWx1ZTogZy5ncm91cCB9KSlcblx0fVxuXG5cdGFzeW5jIGFkZFVzZXJUb0dyb3VwKGdyb3VwOiBJZCk6IFByb21pc2U8YW55PiB7XG5cdFx0Y29uc3QgdXNlckdyb3VwID0gYXdhaXQgdGhpcy5lbnRpdHlDbGllbnQubG9hZChHcm91cFR5cGVSZWYsIGdyb3VwKVxuXHRcdGNvbnN0IHVzZXIgPSBhd2FpdCB0aGlzLmVudGl0eUNsaWVudC5sb2FkKFVzZXJUeXBlUmVmLCBuZXZlck51bGwodXNlckdyb3VwLnVzZXIpKVxuXHRcdHJldHVybiBsb2NhdG9yLmdyb3VwTWFuYWdlbWVudEZhY2FkZS5hZGRVc2VyVG9Hcm91cCh1c2VyLCB0aGlzLmdyb3VwSW5mby5ncm91cClcblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgdXBkYXRlTWVtYmVycygpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHR0aGlzLm1lbWJlcnMucmVzZXQoKVxuXHRcdGF3YWl0IHRoaXMubWVtYmVycy5nZXRBc3luYygpXG5cdFx0dGhpcy51cGRhdGVWaWV3Q2FsbGJhY2soKVxuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyB1cGRhdGVTZW5kZXJOYW1lKCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdHRoaXMuc2VuZGVyTmFtZS5yZXNldCgpXG5cdFx0YXdhaXQgdGhpcy5zZW5kZXJOYW1lLmdldEFzeW5jKClcblx0XHR0aGlzLnVwZGF0ZVZpZXdDYWxsYmFjaygpXG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIHVwZGF0ZVVzZWRTdG9yYWdlKCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGlmICh0aGlzLmlzTWFpbEdyb3VwKCkpIHtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdHRoaXMudXNlZFN0b3JhZ2VJbkJ5dGVzID0gYXdhaXQgbG9jYXRvci5ncm91cE1hbmFnZW1lbnRGYWNhZGUucmVhZFVzZWRTaGFyZWRNYWlsR3JvdXBTdG9yYWdlKGF3YWl0IHRoaXMuZ3JvdXAuZ2V0QXN5bmMoKSlcblx0XHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdFx0aWYgKCEoZSBpbnN0YW5jZW9mIEJhZFJlcXVlc3RFcnJvcikpIHRocm93IGVcblx0XHRcdFx0Ly8gbWF5IGhhcHBlbiBpZiB0aGUgdXNlciBnZXRzIHRoZSBhZG1pbiBmbGFnIHJlbW92ZWRcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhpcy51c2VkU3RvcmFnZUluQnl0ZXMgPSAwXG5cdFx0fVxuXG5cdFx0dGhpcy51cGRhdGVWaWV3Q2FsbGJhY2soKVxuXHR9XG5cblx0YXN5bmMgZW50aXR5RXZlbnRzUmVjZWl2ZWQodXBkYXRlczogUmVhZG9ubHlBcnJheTxFbnRpdHlVcGRhdGVEYXRhPik6IFByb21pc2U8dm9pZD4ge1xuXHRcdGF3YWl0IHByb21pc2VNYXAodXBkYXRlcywgYXN5bmMgKHVwZGF0ZSkgPT4ge1xuXHRcdFx0Y29uc3QgeyBpbnN0YW5jZUxpc3RJZCwgaW5zdGFuY2VJZCwgb3BlcmF0aW9uIH0gPSB1cGRhdGVcblxuXHRcdFx0aWYgKGlzVXBkYXRlRm9yVHlwZVJlZihHcm91cEluZm9UeXBlUmVmLCB1cGRhdGUpICYmIG9wZXJhdGlvbiA9PT0gT3BlcmF0aW9uVHlwZS5VUERBVEUpIHtcblx0XHRcdFx0Y29uc3QgdXBkYXRlZFVzZXJHcm91cEluZm8gPSBhd2FpdCB0aGlzLmVudGl0eUNsaWVudC5sb2FkKEdyb3VwSW5mb1R5cGVSZWYsIHRoaXMuZ3JvdXBJbmZvLl9pZClcblx0XHRcdFx0aWYgKGlzU2FtZUlkKHRoaXMuZ3JvdXBJbmZvLl9pZCwgW2Fzc2VydE5vdE51bGwoaW5zdGFuY2VMaXN0SWQsIFwiZ290IGdyb3VwSW5mbyB1cGRhdGUgd2l0aG91dCBpbnN0YW5jZUxpc3RJZFwiKSwgaW5zdGFuY2VJZF0pKSB7XG5cdFx0XHRcdFx0dGhpcy5ncm91cEluZm8gPSB1cGRhdGVkVXNlckdyb3VwSW5mb1xuXHRcdFx0XHRcdHJldHVybiB0aGlzLnVwZGF0ZVVzZWRTdG9yYWdlKClcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQvLyBhIG1lbWJlciBuYW1lIG1heSBoYXZlIGNoYW5nZWRcblx0XHRcdFx0XHRyZXR1cm4gdGhpcy51cGRhdGVNZW1iZXJzKClcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIGlmIChcblx0XHRcdFx0aXNVcGRhdGVGb3JUeXBlUmVmKEdyb3VwTWVtYmVyVHlwZVJlZiwgdXBkYXRlKSAmJlxuXHRcdFx0XHR0aGlzLmdyb3VwLmlzTG9hZGVkKCkgJiZcblx0XHRcdFx0dGhpcy5ncm91cC5nZXRMb2FkZWQoKS5tZW1iZXJzID09PSBhc3NlcnROb3ROdWxsKGluc3RhbmNlTGlzdElkLCBcImdvdCBhIGdyb3VwTWVtYmVyIHVwZGF0ZSB3aXRob3V0IGluc3RhbmNlTGlzdElkXCIpXG5cdFx0XHQpIHtcblx0XHRcdFx0Ly8gdGhlIG1lbWJlcnMgaGF2ZSBjaGFuZ2VkXG5cdFx0XHRcdHJldHVybiB0aGlzLnVwZGF0ZU1lbWJlcnMoKVxuXHRcdFx0fSBlbHNlIGlmICh0aGlzLmlzTWFpbEdyb3VwKCkgJiYgaXNVcGRhdGVGb3JUeXBlUmVmKE1haWxib3hQcm9wZXJ0aWVzVHlwZVJlZiwgdXBkYXRlKSAmJiB1cGRhdGUub3BlcmF0aW9uID09PSBPcGVyYXRpb25UeXBlLlVQREFURSkge1xuXHRcdFx0XHQvLyB0aGUgc2VuZGVyIG5hbWUgYmVsb25naW5nIHRvIHRoaXMgZ3JvdXAgbWF5IGhhdmUgY2hhbmdlZC5cblx0XHRcdFx0Ly8gbm9pbnNwZWN0aW9uIEVTNk1pc3NpbmdBd2FpdFxuXHRcdFx0XHR0aGlzLnVwZGF0ZVNlbmRlck5hbWUoKVxuXHRcdFx0fVxuXHRcdH0pXG5cdH1cbn1cbiIsImltcG9ydCBtLCB7IENoaWxkcmVuIH0gZnJvbSBcIm1pdGhyaWxcIlxuaW1wb3J0IHR5cGUgeyBHcm91cEluZm8gfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2FwaS9lbnRpdGllcy9zeXMvVHlwZVJlZnMuanNcIlxuaW1wb3J0IHsgR3JvdXBJbmZvVHlwZVJlZiwgR3JvdXBNZW1iZXJUeXBlUmVmIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9hcGkvZW50aXRpZXMvc3lzL1R5cGVSZWZzLmpzXCJcbmltcG9ydCB7IExhenlMb2FkZWQsIG1lbW9pemVkLCBub09wIH0gZnJvbSBcIkB0dXRhby90dXRhbm90YS11dGlsc1wiXG5pbXBvcnQgeyBHcm91cERldGFpbHNWaWV3IH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9zZXR0aW5ncy9ncm91cHMvR3JvdXBEZXRhaWxzVmlldy5qc1wiXG5pbXBvcnQgKiBhcyBBZGRHcm91cERpYWxvZyBmcm9tIFwiLi9BZGRHcm91cERpYWxvZy5qc1wiXG5pbXBvcnQgeyBJY29uIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9ndWkvYmFzZS9JY29uLmpzXCJcbmltcG9ydCB7IEljb25zIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9ndWkvYmFzZS9pY29ucy9JY29ucy5qc1wiXG5pbXBvcnQgeyBCb290SWNvbnMgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2d1aS9iYXNlL2ljb25zL0Jvb3RJY29ucy5qc1wiXG5pbXBvcnQgeyBsb2NhdG9yIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9hcGkvbWFpbi9Db21tb25Mb2NhdG9yLmpzXCJcbmltcG9ydCB7IExpc3RDb2x1bW5XcmFwcGVyIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9ndWkvTGlzdENvbHVtbldyYXBwZXIuanNcIlxuaW1wb3J0IHsgYXNzZXJ0TWFpbk9yTm9kZSB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vYXBpL2NvbW1vbi9FbnYuanNcIlxuaW1wb3J0IHsgR3JvdXBEZXRhaWxzTW9kZWwgfSBmcm9tIFwiLi9Hcm91cERldGFpbHNNb2RlbC5qc1wiXG5pbXBvcnQgeyBTZWxlY3RhYmxlUm93Q29udGFpbmVyLCBTZWxlY3RhYmxlUm93U2VsZWN0ZWRTZXR0ZXIsIHNldFZpc2liaWxpdHkgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2d1aS9TZWxlY3RhYmxlUm93Q29udGFpbmVyLmpzXCJcbmltcG9ydCBTdHJlYW0gZnJvbSBcIm1pdGhyaWwvc3RyZWFtXCJcbmltcG9ydCB7IExpc3QsIExpc3RBdHRycywgTXVsdGlzZWxlY3RNb2RlLCBSZW5kZXJDb25maWcgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2d1aS9iYXNlL0xpc3QuanNcIlxuaW1wb3J0IHsgc2l6ZSB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZ3VpL3NpemUuanNcIlxuaW1wb3J0IHsgTGlzdEVsZW1lbnRMaXN0TW9kZWwgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL21pc2MvTGlzdEVsZW1lbnRMaXN0TW9kZWwuanNcIlxuaW1wb3J0IHsgY29tcGFyZUdyb3VwSW5mb3MgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2FwaS9jb21tb24vdXRpbHMvR3JvdXBVdGlscy5qc1wiXG5pbXBvcnQgeyBOb3RGb3VuZEVycm9yIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9hcGkvY29tbW9uL2Vycm9yL1Jlc3RFcnJvci5qc1wiXG5pbXBvcnQgeyBsaXN0U2VsZWN0aW9uS2V5Ym9hcmRTaG9ydGN1dHMsIG9ubHlTaW5nbGVTZWxlY3Rpb24sIFZpcnR1YWxSb3cgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2d1aS9iYXNlL0xpc3RVdGlscy5qc1wiXG5pbXBvcnQgeyBrZXlNYW5hZ2VyIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9taXNjL0tleU1hbmFnZXIuanNcIlxuaW1wb3J0IHsgQmFzZVNlYXJjaEJhciwgQmFzZVNlYXJjaEJhckF0dHJzIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9ndWkvYmFzZS9CYXNlU2VhcmNoQmFyLmpzXCJcbmltcG9ydCB7IGxhbmcgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL21pc2MvTGFuZ3VhZ2VWaWV3TW9kZWwuanNcIlxuaW1wb3J0IENvbHVtbkVtcHR5TWVzc2FnZUJveCBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2d1aS9iYXNlL0NvbHVtbkVtcHR5TWVzc2FnZUJveC5qc1wiXG5pbXBvcnQgeyB0aGVtZSB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZ3VpL3RoZW1lLmpzXCJcbmltcG9ydCB7IEljb25CdXR0b24gfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2d1aS9iYXNlL0ljb25CdXR0b24uanNcIlxuaW1wb3J0IHsgTmV3UGFpZFBsYW5zIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9hcGkvY29tbW9uL1R1dGFub3RhQ29uc3RhbnRzLmpzXCJcbmltcG9ydCB7IEVudGl0eVVwZGF0ZURhdGEsIGlzVXBkYXRlRm9yVHlwZVJlZiB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vYXBpL2NvbW1vbi91dGlscy9FbnRpdHlVcGRhdGVVdGlscy5qc1wiXG5pbXBvcnQgeyBMaXN0QXV0b1NlbGVjdEJlaGF2aW9yIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9taXNjL0RldmljZUNvbmZpZy5qc1wiXG5pbXBvcnQgeyBVcGRhdGFibGVTZXR0aW5nc1ZpZXdlciB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vc2V0dGluZ3MvSW50ZXJmYWNlcy5qc1wiXG5cbmFzc2VydE1haW5Pck5vZGUoKVxuY29uc3QgY2xhc3NOYW1lID0gXCJncm91cC1saXN0XCJcblxuZXhwb3J0IGNsYXNzIEdyb3VwTGlzdFZpZXcgaW1wbGVtZW50cyBVcGRhdGFibGVTZXR0aW5nc1ZpZXdlciB7XG5cdHByaXZhdGUgc2VhcmNoUXVlcnk6IHN0cmluZyA9IFwiXCJcblx0cHJpdmF0ZSBsaXN0TW9kZWw6IExpc3RFbGVtZW50TGlzdE1vZGVsPEdyb3VwSW5mbz5cblx0cHJpdmF0ZSByZWFkb25seSByZW5kZXJDb25maWc6IFJlbmRlckNvbmZpZzxHcm91cEluZm8sIEdyb3VwUm93PiA9IHtcblx0XHRpdGVtSGVpZ2h0OiBzaXplLmxpc3Rfcm93X2hlaWdodCxcblx0XHRtdWx0aXNlbGVjdGlvbkFsbG93ZWQ6IE11bHRpc2VsZWN0TW9kZS5EaXNhYmxlZCxcblx0XHRzd2lwZTogbnVsbCxcblx0XHRjcmVhdGVFbGVtZW50OiAoZG9tKSA9PiB7XG5cdFx0XHRjb25zdCBncm91cFJvdyA9IG5ldyBHcm91cFJvdygpXG5cdFx0XHRtLnJlbmRlcihkb20sIGdyb3VwUm93LnJlbmRlcigpKVxuXHRcdFx0cmV0dXJuIGdyb3VwUm93XG5cdFx0fSxcblx0fVxuXG5cdHByaXZhdGUgbGlzdElkOiBMYXp5TG9hZGVkPElkPlxuXHRwcml2YXRlIGxpc3RTdGF0ZVN1YnNjcmlwdGlvbjogU3RyZWFtPHVua25vd24+IHwgbnVsbCA9IG51bGxcblxuXHRjb25zdHJ1Y3Rvcihwcml2YXRlIHJlYWRvbmx5IHVwZGF0ZURldGFpbHNWaWV3ZXI6ICh2aWV3ZXI6IEdyb3VwRGV0YWlsc1ZpZXcgfCBudWxsKSA9PiB1bmtub3duLCBwcml2YXRlIHJlYWRvbmx5IGZvY3VzRGV0YWlsc1ZpZXdlcjogKCkgPT4gdW5rbm93bikge1xuXHRcdHRoaXMubGlzdE1vZGVsID0gdGhpcy5tYWtlTGlzdE1vZGVsKClcblx0XHR0aGlzLmxpc3RJZCA9IG5ldyBMYXp5TG9hZGVkKCgpID0+IHtcblx0XHRcdHJldHVybiBsb2NhdG9yLmxvZ2luc1xuXHRcdFx0XHQuZ2V0VXNlckNvbnRyb2xsZXIoKVxuXHRcdFx0XHQubG9hZEN1c3RvbWVyKClcblx0XHRcdFx0LnRoZW4oKGN1c3RvbWVyKSA9PiB7XG5cdFx0XHRcdFx0cmV0dXJuIGN1c3RvbWVyLnRlYW1Hcm91cHNcblx0XHRcdFx0fSlcblx0XHR9KVxuXG5cdFx0dGhpcy5saXN0TW9kZWwubG9hZEluaXRpYWwoKVxuXG5cdFx0dGhpcy5vbmNyZWF0ZSA9IHRoaXMub25jcmVhdGUuYmluZCh0aGlzKVxuXHRcdHRoaXMub25yZW1vdmUgPSB0aGlzLm9ucmVtb3ZlLmJpbmQodGhpcylcblx0XHR0aGlzLnZpZXcgPSB0aGlzLnZpZXcuYmluZCh0aGlzKVxuXHR9XG5cblx0cHJpdmF0ZSByZWFkb25seSBzaG9ydGN1dHMgPSBsaXN0U2VsZWN0aW9uS2V5Ym9hcmRTaG9ydGN1dHMoTXVsdGlzZWxlY3RNb2RlLkRpc2FibGVkLCAoKSA9PiB0aGlzLmxpc3RNb2RlbClcblxuXHRvbmNyZWF0ZSgpIHtcblx0XHRrZXlNYW5hZ2VyLnJlZ2lzdGVyU2hvcnRjdXRzKHRoaXMuc2hvcnRjdXRzKVxuXHR9XG5cblx0dmlldygpOiBDaGlsZHJlbiB7XG5cdFx0cmV0dXJuIG0oXG5cdFx0XHRMaXN0Q29sdW1uV3JhcHBlcixcblx0XHRcdHtcblx0XHRcdFx0aGVhZGVyQ29udGVudDogbShcblx0XHRcdFx0XHRcIi5mbGV4LmZsZXgtc3BhY2UtYmV0d2Vlbi5jZW50ZXItdmVydGljYWxseS5wbHItbFwiLFxuXHRcdFx0XHRcdG0oQmFzZVNlYXJjaEJhciwge1xuXHRcdFx0XHRcdFx0dGV4dDogdGhpcy5zZWFyY2hRdWVyeSxcblx0XHRcdFx0XHRcdG9uSW5wdXQ6ICh0ZXh0KSA9PiB0aGlzLnVwZGF0ZVF1ZXJ5KHRleHQpLFxuXHRcdFx0XHRcdFx0YnVzeTogZmFsc2UsXG5cdFx0XHRcdFx0XHRvbktleURvd246IChlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpLFxuXHRcdFx0XHRcdFx0b25DbGVhcjogKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHR0aGlzLnNlYXJjaFF1ZXJ5ID0gXCJcIlxuXHRcdFx0XHRcdFx0XHR0aGlzLmxpc3RNb2RlbC5yZWFwcGx5RmlsdGVyKClcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRwbGFjZWhvbGRlcjogbGFuZy5nZXQoXCJzZWFyY2hNYWlsYm94ZXNfcGxhY2Vob2xkZXJcIiksXG5cdFx0XHRcdFx0fSBzYXRpc2ZpZXMgQmFzZVNlYXJjaEJhckF0dHJzKSxcblx0XHRcdFx0XHRtKFxuXHRcdFx0XHRcdFx0XCIubXItbmVnYXRpdmUtc1wiLFxuXHRcdFx0XHRcdFx0bShJY29uQnV0dG9uLCB7XG5cdFx0XHRcdFx0XHRcdHRpdGxlOiBcImNyZWF0ZVNoYXJlZE1haWxib3hfbGFiZWxcIixcblx0XHRcdFx0XHRcdFx0aWNvbjogSWNvbnMuQWRkLFxuXHRcdFx0XHRcdFx0XHRjbGljazogKCkgPT4gdGhpcy5hZGRCdXR0b25DbGlja2VkKCksXG5cdFx0XHRcdFx0XHR9KSxcblx0XHRcdFx0XHQpLFxuXHRcdFx0XHQpLFxuXHRcdFx0fSxcblx0XHRcdHRoaXMubGlzdE1vZGVsLmlzRW1wdHlBbmREb25lKClcblx0XHRcdFx0PyBtKENvbHVtbkVtcHR5TWVzc2FnZUJveCwge1xuXHRcdFx0XHRcdFx0Y29sb3I6IHRoZW1lLmxpc3RfbWVzc2FnZV9iZyxcblx0XHRcdFx0XHRcdGljb246IEljb25zLlBlb3BsZSxcblx0XHRcdFx0XHRcdG1lc3NhZ2U6IFwibm9FbnRyaWVzX21zZ1wiLFxuXHRcdFx0XHQgIH0pXG5cdFx0XHRcdDogbShMaXN0LCB7XG5cdFx0XHRcdFx0XHRyZW5kZXJDb25maWc6IHRoaXMucmVuZGVyQ29uZmlnLFxuXHRcdFx0XHRcdFx0c3RhdGU6IHRoaXMubGlzdE1vZGVsLnN0YXRlLFxuXHRcdFx0XHRcdFx0b25Mb2FkTW9yZTogKCkgPT4gdGhpcy5saXN0TW9kZWwubG9hZE1vcmUoKSxcblx0XHRcdFx0XHRcdG9uUmV0cnlMb2FkaW5nOiAoKSA9PiB0aGlzLmxpc3RNb2RlbC5yZXRyeUxvYWRpbmcoKSxcblx0XHRcdFx0XHRcdG9uU3RvcExvYWRpbmc6ICgpID0+IHRoaXMubGlzdE1vZGVsLnN0b3BMb2FkaW5nKCksXG5cdFx0XHRcdFx0XHRvblNpbmdsZVNlbGVjdGlvbjogKGl0ZW06IEdyb3VwSW5mbykgPT4ge1xuXHRcdFx0XHRcdFx0XHR0aGlzLmxpc3RNb2RlbC5vblNpbmdsZVNlbGVjdGlvbihpdGVtKVxuXHRcdFx0XHRcdFx0XHR0aGlzLmZvY3VzRGV0YWlsc1ZpZXdlcigpXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0b25TaW5nbGVUb2dnbGluZ011bHRpc2VsZWN0aW9uOiBub09wLFxuXHRcdFx0XHRcdFx0b25SYW5nZVNlbGVjdGlvblRvd2FyZHM6IG5vT3AsXG5cdFx0XHRcdCAgfSBzYXRpc2ZpZXMgTGlzdEF0dHJzPEdyb3VwSW5mbywgR3JvdXBSb3c+KSxcblx0XHQpXG5cdH1cblxuXHRvbnJlbW92ZSgpIHtcblx0XHRrZXlNYW5hZ2VyLnVucmVnaXN0ZXJTaG9ydGN1dHModGhpcy5zaG9ydGN1dHMpXG5cblx0XHR0aGlzLmxpc3RTdGF0ZVN1YnNjcmlwdGlvbj8uZW5kKHRydWUpXG5cdH1cblxuXHRhc3luYyBhZGRCdXR0b25DbGlja2VkKCkge1xuXHRcdGlmIChhd2FpdCBsb2NhdG9yLmxvZ2lucy5nZXRVc2VyQ29udHJvbGxlcigpLmlzTmV3UGFpZFBsYW4oKSkge1xuXHRcdFx0QWRkR3JvdXBEaWFsb2cuc2hvdygpXG5cdFx0fSBlbHNlIHtcblx0XHRcdGNvbnN0IG1zZyA9IGxhbmcubWFrZVRyYW5zbGF0aW9uKFwidXBncmFkZV90ZXh0XCIsIGxhbmcuZ2V0KFwibmV3UGFpZFBsYW5SZXF1aXJlZF9tc2dcIikgKyBcIiBcIiArIGxhbmcuZ2V0KFwic2hhcmVkTWFpbGJveGVzTXVsdGlVc2VyX21zZ1wiKSlcblx0XHRcdGNvbnN0IHdpemFyZCA9IGF3YWl0IGltcG9ydChcIi4uLy4uLy4uL2NvbW1vbi9zdWJzY3JpcHRpb24vVXBncmFkZVN1YnNjcmlwdGlvbldpemFyZFwiKVxuXHRcdFx0YXdhaXQgd2l6YXJkLnNob3dVcGdyYWRlV2l6YXJkKGxvY2F0b3IubG9naW5zLCBOZXdQYWlkUGxhbnMsIG1zZylcblx0XHR9XG5cdH1cblxuXHRhc3luYyBlbnRpdHlFdmVudHNSZWNlaXZlZCh1cGRhdGVzOiBSZWFkb25seUFycmF5PEVudGl0eVVwZGF0ZURhdGE+KTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0Zm9yIChjb25zdCB1cGRhdGUgb2YgdXBkYXRlcykge1xuXHRcdFx0Y29uc3QgeyBpbnN0YW5jZUxpc3RJZCwgaW5zdGFuY2VJZCwgb3BlcmF0aW9uIH0gPSB1cGRhdGVcblxuXHRcdFx0aWYgKGlzVXBkYXRlRm9yVHlwZVJlZihHcm91cEluZm9UeXBlUmVmLCB1cGRhdGUpICYmIHRoaXMubGlzdElkLmdldFN5bmMoKSA9PT0gaW5zdGFuY2VMaXN0SWQpIHtcblx0XHRcdFx0YXdhaXQgdGhpcy5saXN0TW9kZWwuZW50aXR5RXZlbnRSZWNlaXZlZChpbnN0YW5jZUxpc3RJZCwgaW5zdGFuY2VJZCwgb3BlcmF0aW9uKVxuXHRcdFx0fSBlbHNlIGlmIChpc1VwZGF0ZUZvclR5cGVSZWYoR3JvdXBNZW1iZXJUeXBlUmVmLCB1cGRhdGUpKSB7XG5cdFx0XHRcdHRoaXMubGlzdE1vZGVsLnJlYXBwbHlGaWx0ZXIoKVxuXHRcdFx0fVxuXG5cdFx0XHRtLnJlZHJhdygpXG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBtYWtlTGlzdE1vZGVsKCk6IExpc3RFbGVtZW50TGlzdE1vZGVsPEdyb3VwSW5mbz4ge1xuXHRcdGNvbnN0IGxpc3RNb2RlbCA9IG5ldyBMaXN0RWxlbWVudExpc3RNb2RlbDxHcm91cEluZm8+KHtcblx0XHRcdHNvcnRDb21wYXJlOiBjb21wYXJlR3JvdXBJbmZvcyxcblx0XHRcdGZldGNoOiBhc3luYyAoX2xhc3RGZXRjaGVkRW50aXR5LCBfY291bnQpID0+IHtcblx0XHRcdFx0Ly8gbG9hZCBhbGwgZW50cmllcyBhdCBvbmNlIHRvIGFwcGx5IGN1c3RvbSBzb3J0IG9yZGVyXG5cdFx0XHRcdGNvbnN0IGxpc3RJZCA9IGF3YWl0IHRoaXMubGlzdElkLmdldEFzeW5jKClcblx0XHRcdFx0Y29uc3QgYWxsR3JvdXBJbmZvcyA9IGF3YWl0IGxvY2F0b3IuZW50aXR5Q2xpZW50LmxvYWRBbGwoR3JvdXBJbmZvVHlwZVJlZiwgbGlzdElkKVxuXG5cdFx0XHRcdHJldHVybiB7IGl0ZW1zOiBhbGxHcm91cEluZm9zLCBjb21wbGV0ZTogdHJ1ZSB9XG5cdFx0XHR9LFxuXHRcdFx0bG9hZFNpbmdsZTogYXN5bmMgKF9saXN0SWQ6IElkLCBlbGVtZW50SWQ6IElkKSA9PiB7XG5cdFx0XHRcdGNvbnN0IGxpc3RJZCA9IGF3YWl0IHRoaXMubGlzdElkLmdldEFzeW5jKClcblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRyZXR1cm4gYXdhaXQgbG9jYXRvci5lbnRpdHlDbGllbnQubG9hZDxHcm91cEluZm8+KEdyb3VwSW5mb1R5cGVSZWYsIFtsaXN0SWQsIGVsZW1lbnRJZF0pXG5cdFx0XHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdFx0XHRpZiAoZSBpbnN0YW5jZW9mIE5vdEZvdW5kRXJyb3IpIHtcblx0XHRcdFx0XHRcdC8vIHdlIHJldHVybiBudWxsIGlmIHRoZSBHcm91cEluZm8gZG9lcyBub3QgZXhpc3Rcblx0XHRcdFx0XHRcdHJldHVybiBudWxsXG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHRocm93IGVcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0XHRhdXRvU2VsZWN0QmVoYXZpb3I6ICgpID0+IExpc3RBdXRvU2VsZWN0QmVoYXZpb3IuT0xERVIsXG5cdFx0fSlcblxuXHRcdGxpc3RNb2RlbC5zZXRGaWx0ZXIoKGl0ZW06IEdyb3VwSW5mbykgPT4gdGhpcy5ncm91cEZpbHRlcigpICYmIHRoaXMucXVlcnlGaWx0ZXIoaXRlbSkpXG5cblx0XHR0aGlzLmxpc3RTdGF0ZVN1YnNjcmlwdGlvbj8uZW5kKHRydWUpXG5cdFx0dGhpcy5saXN0U3RhdGVTdWJzY3JpcHRpb24gPSBsaXN0TW9kZWwuc3RhdGVTdHJlYW0ubWFwKChzdGF0ZSkgPT4ge1xuXHRcdFx0dGhpcy5vblNlbGVjdGlvbkNoYW5nZWQob25seVNpbmdsZVNlbGVjdGlvbihzdGF0ZSkpXG5cdFx0XHRtLnJlZHJhdygpXG5cdFx0fSlcblxuXHRcdHJldHVybiBsaXN0TW9kZWxcblx0fVxuXG5cdHByaXZhdGUgcmVhZG9ubHkgb25TZWxlY3Rpb25DaGFuZ2VkID0gbWVtb2l6ZWQoKGl0ZW06IEdyb3VwSW5mbyB8IG51bGwpID0+IHtcblx0XHRpZiAoaXRlbSkge1xuXHRcdFx0Y29uc3QgbmV3U2VsZWN0aW9uTW9kZWwgPSBuZXcgR3JvdXBEZXRhaWxzTW9kZWwoaXRlbSwgbG9jYXRvci5lbnRpdHlDbGllbnQsIG0ucmVkcmF3KVxuXHRcdFx0Y29uc3QgZGV0YWlsc1ZpZXdlciA9IGl0ZW0gPT0gbnVsbCA/IG51bGwgOiBuZXcgR3JvdXBEZXRhaWxzVmlldyhuZXdTZWxlY3Rpb25Nb2RlbClcblx0XHRcdHRoaXMudXBkYXRlRGV0YWlsc1ZpZXdlcihkZXRhaWxzVmlld2VyKVxuXHRcdH1cblx0fSlcblxuXHRwcml2YXRlIHF1ZXJ5RmlsdGVyKGdpOiBHcm91cEluZm8pIHtcblx0XHRjb25zdCBsb3dlcmNhc2VTZWFyY2ggPSB0aGlzLnNlYXJjaFF1ZXJ5LnRvTG93ZXJDYXNlKClcblx0XHRyZXR1cm4gZ2kubmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGxvd2VyY2FzZVNlYXJjaCkgfHwgKCEhZ2kubWFpbEFkZHJlc3MgJiYgZ2kubWFpbEFkZHJlc3M/LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMobG93ZXJjYXNlU2VhcmNoKSlcblx0fVxuXG5cdHByaXZhdGUgZ3JvdXBGaWx0ZXIgPSAoKSA9PiB7XG5cdFx0cmV0dXJuIGxvY2F0b3IubG9naW5zLmdldFVzZXJDb250cm9sbGVyKCkuaXNHbG9iYWxBZG1pbigpXG5cdH1cblxuXHRwcml2YXRlIHVwZGF0ZVF1ZXJ5KHF1ZXJ5OiBzdHJpbmcpIHtcblx0XHR0aGlzLnNlYXJjaFF1ZXJ5ID0gcXVlcnlcblx0XHR0aGlzLmxpc3RNb2RlbC5yZWFwcGx5RmlsdGVyKClcblx0fVxufVxuXG5leHBvcnQgY2xhc3MgR3JvdXBSb3cgaW1wbGVtZW50cyBWaXJ0dWFsUm93PEdyb3VwSW5mbz4ge1xuXHR0b3A6IG51bWJlciA9IDBcblx0ZG9tRWxlbWVudDogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbCAvLyBzZXQgZnJvbSBMaXN0XG5cdGVudGl0eTogR3JvdXBJbmZvIHwgbnVsbCA9IG51bGxcblx0cHJpdmF0ZSBuYW1lRG9tITogSFRNTEVsZW1lbnRcblx0cHJpdmF0ZSBhZGRyZXNzRG9tITogSFRNTEVsZW1lbnRcblx0cHJpdmF0ZSBkZWxldGVkSWNvbkRvbSE6IEhUTUxFbGVtZW50XG5cdHByaXZhdGUgbG9jYWxBZG1pbkljb25Eb20hOiBIVE1MRWxlbWVudFxuXHRwcml2YXRlIG1haWxJY29uRG9tITogSFRNTEVsZW1lbnRcblx0cHJpdmF0ZSBzZWxlY3Rpb25VcGRhdGVyITogU2VsZWN0YWJsZVJvd1NlbGVjdGVkU2V0dGVyXG5cblx0Y29uc3RydWN0b3IoKSB7fVxuXG5cdHVwZGF0ZShncm91cEluZm86IEdyb3VwSW5mbywgc2VsZWN0ZWQ6IGJvb2xlYW4pOiB2b2lkIHtcblx0XHR0aGlzLmVudGl0eSA9IGdyb3VwSW5mb1xuXG5cdFx0dGhpcy5zZWxlY3Rpb25VcGRhdGVyKHNlbGVjdGVkLCBmYWxzZSlcblxuXHRcdHRoaXMubmFtZURvbS50ZXh0Q29udGVudCA9IGdyb3VwSW5mby5uYW1lXG5cdFx0dGhpcy5hZGRyZXNzRG9tLnRleHRDb250ZW50ID0gZ3JvdXBJbmZvLm1haWxBZGRyZXNzID8/IFwiXCJcblx0XHRzZXRWaXNpYmlsaXR5KHRoaXMuZGVsZXRlZEljb25Eb20sIGdyb3VwSW5mby5kZWxldGVkICE9IG51bGwpXG5cblx0XHQvLyBtYWlsIGdyb3VwIG9yIGxvY2FsIGFkbWluIGdyb3VwXG5cdFx0aWYgKGdyb3VwSW5mby5tYWlsQWRkcmVzcykge1xuXHRcdFx0dGhpcy5sb2NhbEFkbWluSWNvbkRvbS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCJcblx0XHRcdHRoaXMubWFpbEljb25Eb20uc3R5bGUuZGlzcGxheSA9IFwiXCJcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhpcy5sb2NhbEFkbWluSWNvbkRvbS5zdHlsZS5kaXNwbGF5ID0gXCJcIlxuXHRcdFx0dGhpcy5tYWlsSWNvbkRvbS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCJcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogT25seSB0aGUgc3RydWN0dXJlIGlzIG1hbmFnZWQgYnkgbWl0aHJpbC4gV2Ugc2V0IGFsbCBjb250ZW50cyBvbiBvdXIgb3duIChzZWUgdXBkYXRlKSBpbiBvcmRlciB0byBhdm9pZCB0aGUgdmRvbSBvdmVyaGVhZCAobm90IG5lZ2xpZ2libGUgb24gbW9iaWxlcylcblx0ICovXG5cdHJlbmRlcigpOiBDaGlsZHJlbiB7XG5cdFx0cmV0dXJuIG0oXG5cdFx0XHRTZWxlY3RhYmxlUm93Q29udGFpbmVyLFxuXHRcdFx0e1xuXHRcdFx0XHRvblNlbGVjdGVkQ2hhbmdlUmVmOiAodXBkYXRlcikgPT4gKHRoaXMuc2VsZWN0aW9uVXBkYXRlciA9IHVwZGF0ZXIpLFxuXHRcdFx0fSxcblx0XHRcdG0oXCIuZmxleC5jb2wuZmxleC1ncm93XCIsIFtcblx0XHRcdFx0bShcIi5iYWRnZS1saW5lLWhlaWdodFwiLCBbXG5cdFx0XHRcdFx0bShcIlwiLCB7XG5cdFx0XHRcdFx0XHRvbmNyZWF0ZTogKHZub2RlKSA9PiAodGhpcy5uYW1lRG9tID0gdm5vZGUuZG9tIGFzIEhUTUxFbGVtZW50KSxcblx0XHRcdFx0XHR9KSxcblx0XHRcdFx0XSksXG5cdFx0XHRcdG0oXCIuZmxleC1zcGFjZS1iZXR3ZWVuLm10LXh4c1wiLCBbXG5cdFx0XHRcdFx0bShcIi5zbWFsbGVyXCIsIHtcblx0XHRcdFx0XHRcdG9uY3JlYXRlOiAodm5vZGUpID0+ICh0aGlzLmFkZHJlc3NEb20gPSB2bm9kZS5kb20gYXMgSFRNTEVsZW1lbnQpLFxuXHRcdFx0XHRcdH0pLFxuXHRcdFx0XHRcdG0oXCIuaWNvbnMuZmxleFwiLCBbXG5cdFx0XHRcdFx0XHRtKEljb24sIHtcblx0XHRcdFx0XHRcdFx0aWNvbjogSWNvbnMuVHJhc2gsXG5cdFx0XHRcdFx0XHRcdG9uY3JlYXRlOiAodm5vZGUpID0+ICh0aGlzLmRlbGV0ZWRJY29uRG9tID0gdm5vZGUuZG9tIGFzIEhUTUxFbGVtZW50KSxcblx0XHRcdFx0XHRcdFx0Y2xhc3M6IFwic3ZnLWxpc3QtYWNjZW50LWZnXCIsXG5cdFx0XHRcdFx0XHRcdHN0eWxlOiB7XG5cdFx0XHRcdFx0XHRcdFx0ZGlzcGxheTogXCJub25lXCIsXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHR9KSxcblx0XHRcdFx0XHRcdG0oSWNvbiwge1xuXHRcdFx0XHRcdFx0XHRpY29uOiBCb290SWNvbnMuU2V0dGluZ3MsXG5cdFx0XHRcdFx0XHRcdG9uY3JlYXRlOiAodm5vZGUpID0+ICh0aGlzLmxvY2FsQWRtaW5JY29uRG9tID0gdm5vZGUuZG9tIGFzIEhUTUxFbGVtZW50KSxcblx0XHRcdFx0XHRcdFx0Y2xhc3M6IFwic3ZnLWxpc3QtYWNjZW50LWZnXCIsXG5cdFx0XHRcdFx0XHRcdHN0eWxlOiB7XG5cdFx0XHRcdFx0XHRcdFx0ZGlzcGxheTogXCJub25lXCIsXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHR9KSxcblx0XHRcdFx0XHRcdG0oSWNvbiwge1xuXHRcdFx0XHRcdFx0XHRpY29uOiBCb290SWNvbnMuTWFpbCxcblx0XHRcdFx0XHRcdFx0b25jcmVhdGU6ICh2bm9kZSkgPT4gKHRoaXMubWFpbEljb25Eb20gPSB2bm9kZS5kb20gYXMgSFRNTEVsZW1lbnQpLFxuXHRcdFx0XHRcdFx0XHRjbGFzczogXCJzdmctbGlzdC1hY2NlbnQtZmdcIixcblx0XHRcdFx0XHRcdFx0c3R5bGU6IHtcblx0XHRcdFx0XHRcdFx0XHRkaXNwbGF5OiBcIm5vbmVcIixcblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdH0pLFxuXHRcdFx0XHRcdF0pLFxuXHRcdFx0XHRdKSxcblx0XHRcdF0pLFxuXHRcdClcblx0fVxufVxuIiwiaW1wb3J0IG0gZnJvbSBcIm1pdGhyaWxcIlxuaW1wb3J0IHsgbGFuZyB9IGZyb20gXCIuLi9taXNjL0xhbmd1YWdlVmlld01vZGVsLmpzXCJcbmltcG9ydCB7IERpYWxvZyB9IGZyb20gXCIuLi9ndWkvYmFzZS9EaWFsb2cuanNcIlxuaW1wb3J0IHsgSW52YWxpZERhdGFFcnJvciwgTG9ja2VkRXJyb3IsIFByZWNvbmRpdGlvbkZhaWxlZEVycm9yIH0gZnJvbSBcIi4uL2FwaS9jb21tb24vZXJyb3IvUmVzdEVycm9yLmpzXCJcbmltcG9ydCB7IHNob3dQcm9ncmVzc0RpYWxvZyB9IGZyb20gXCIuLi9ndWkvZGlhbG9ncy9Qcm9ncmVzc0RpYWxvZy5qc1wiXG5pbXBvcnQgeyBpc0RvbWFpbk5hbWUgfSBmcm9tIFwiLi4vbWlzYy9Gb3JtYXRWYWxpZGF0b3IuanNcIlxuaW1wb3J0IHN0cmVhbSBmcm9tIFwibWl0aHJpbC9zdHJlYW1cIlxuaW1wb3J0IHR5cGUgeyBDdXN0b21lckluZm8gfSBmcm9tIFwiLi4vYXBpL2VudGl0aWVzL3N5cy9UeXBlUmVmcy5qc1wiXG5pbXBvcnQgeyBUZXh0RmllbGQgfSBmcm9tIFwiLi4vZ3VpL2Jhc2UvVGV4dEZpZWxkLmpzXCJcbmltcG9ydCB7IG9mQ2xhc3MgfSBmcm9tIFwiQHR1dGFvL3R1dGFub3RhLXV0aWxzXCJcbmltcG9ydCB7IGxvY2F0b3IgfSBmcm9tIFwiLi4vYXBpL21haW4vQ29tbW9uTG9jYXRvci5qc1wiXG5pbXBvcnQgeyBhc3NlcnRNYWluT3JOb2RlIH0gZnJvbSBcIi4uL2FwaS9jb21tb24vRW52LmpzXCJcbmltcG9ydCB7IGdldFdoaXRlbGFiZWxEb21haW5JbmZvIH0gZnJvbSBcIi4uL2FwaS9jb21tb24vdXRpbHMvQ3VzdG9tZXJVdGlscy5qc1wiXG5cbmFzc2VydE1haW5Pck5vZGUoKVxuXG5mdW5jdGlvbiBvcmRlcldoaXRlbGFiZWxDZXJ0aWZpY2F0ZShkb21haW46IHN0cmluZywgZGlhbG9nOiBEaWFsb2cpIHtcblx0c2hvd1Byb2dyZXNzRGlhbG9nKFxuXHRcdFwicGxlYXNlV2FpdF9tc2dcIixcblx0XHRsb2NhdG9yLmN1c3RvbWVyRmFjYWRlXG5cdFx0XHQub3JkZXJXaGl0ZWxhYmVsQ2VydGlmaWNhdGUoZG9tYWluKVxuXHRcdFx0LnRoZW4oKCkgPT4ge1xuXHRcdFx0XHRkaWFsb2cuY2xvc2UoKVxuXHRcdFx0fSlcblx0XHRcdC5jYXRjaChcblx0XHRcdFx0b2ZDbGFzcyhJbnZhbGlkRGF0YUVycm9yLCAoZSkgPT4ge1xuXHRcdFx0XHRcdERpYWxvZy5tZXNzYWdlKFwiY2VydGlmaWNhdGVFcnJvcl9tc2dcIilcblx0XHRcdFx0fSksXG5cdFx0XHQpXG5cdFx0XHQuY2F0Y2gob2ZDbGFzcyhMb2NrZWRFcnJvciwgKGUpID0+IERpYWxvZy5tZXNzYWdlKFwib3BlcmF0aW9uU3RpbGxBY3RpdmVfbXNnXCIpKSlcblx0XHRcdC5jYXRjaChcblx0XHRcdFx0b2ZDbGFzcyhQcmVjb25kaXRpb25GYWlsZWRFcnJvciwgKGUpID0+IHtcblx0XHRcdFx0XHRzd2l0Y2ggKGUuZGF0YSkge1xuXHRcdFx0XHRcdFx0Y2FzZSBcImxvY2subG9ja2VkXCI6XG5cdFx0XHRcdFx0XHRcdERpYWxvZy5tZXNzYWdlKFwib3BlcmF0aW9uU3RpbGxBY3RpdmVfbXNnXCIpXG5cdFx0XHRcdFx0XHRcdGJyZWFrXG5cblx0XHRcdFx0XHRcdGNhc2UgXCJkb21haW4uaW52YWxpZF9jbmFtZVwiOlxuXHRcdFx0XHRcdFx0XHREaWFsb2cubWVzc2FnZShcImludmFsaWRDbmFtZVJlY29yZF9tc2dcIilcblx0XHRcdFx0XHRcdFx0YnJlYWtcblxuXHRcdFx0XHRcdFx0Y2FzZSBcImRvbWFpbi5ub3RfYV9zdWJkb21haW5cIjpcblx0XHRcdFx0XHRcdFx0RGlhbG9nLm1lc3NhZ2UoXCJub3RBU3ViZG9tYWluX21zZ1wiKVxuXHRcdFx0XHRcdFx0XHRicmVha1xuXG5cdFx0XHRcdFx0XHRjYXNlIFwiZG9tYWluLmludmFsaWRcIjpcblx0XHRcdFx0XHRcdGNhc2UgXCJkb21haW4uZXhpc3RzXCI6XG5cdFx0XHRcdFx0XHRcdERpYWxvZy5tZXNzYWdlKFwiY3VzdG9tRG9tYWluRXJyb3JEb21haW5Ob3RBdmFpbGFibGVfbXNnXCIpXG5cdFx0XHRcdFx0XHRcdGJyZWFrXG5cblx0XHRcdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0XHRcdHRocm93IGVcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pLFxuXHRcdFx0KSxcblx0KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gc2hvdyhjdXN0b21lckluZm86IEN1c3RvbWVySW5mbyk6IHZvaWQge1xuXHQvLyBvbmx5IHNob3cgYSBkcm9wZG93biBpZiBhIGRvbWFpbiBpcyBhbHJlYWR5IHNlbGVjdGVkIGZvciB0dXRhbm90YSBsb2dpbiBvciBpZiB0aGVyZSBpcyBleGFjdGx5IG9uZSBkb21haW4gYXZhaWxhYmxlXG5cdGNvbnN0IHdoaXRlbGFiZWxEb21haW5JbmZvID0gZ2V0V2hpdGVsYWJlbERvbWFpbkluZm8oY3VzdG9tZXJJbmZvKVxuXHRjb25zdCBkb21haW4gPSB3aGl0ZWxhYmVsRG9tYWluSW5mbyA/IHN0cmVhbSh3aGl0ZWxhYmVsRG9tYWluSW5mby5kb21haW4pIDogc3RyZWFtKFwiXCIpXG5cdGxldCBmb3JtID0ge1xuXHRcdHZpZXc6ICgpID0+IHtcblx0XHRcdHJldHVybiBtKFRleHRGaWVsZCwge1xuXHRcdFx0XHRsYWJlbDogXCJ3aGl0ZWxhYmVsRG9tYWluX2xhYmVsXCIsXG5cdFx0XHRcdHZhbHVlOiBkb21haW4oKSxcblx0XHRcdFx0b25pbnB1dDogZG9tYWluLFxuXHRcdFx0XHRpc1JlYWRPbmx5OiB3aGl0ZWxhYmVsRG9tYWluSW5mbyA/IHRydWUgOiBmYWxzZSxcblx0XHRcdH0pXG5cdFx0fSxcblx0fVxuXHRsZXQgZGlhbG9nID0gRGlhbG9nLnNob3dBY3Rpb25EaWFsb2coe1xuXHRcdHRpdGxlOiBcIndoaXRlbGFiZWxEb21haW5fbGFiZWxcIixcblx0XHRjaGlsZDogZm9ybSxcblx0XHRva0FjdGlvbjogKCkgPT4ge1xuXHRcdFx0Y29uc3QgZG9tYWluQWxsTG93ZXJjYXNlID0gZG9tYWluKCkudHJpbSgpLnRvTG93ZXJDYXNlKClcblxuXHRcdFx0aWYgKCFpc0RvbWFpbk5hbWUoZG9tYWluQWxsTG93ZXJjYXNlKSB8fCBkb21haW5BbGxMb3dlcmNhc2Uuc3BsaXQoXCIuXCIpLmxlbmd0aCA8IDMpIHtcblx0XHRcdFx0RGlhbG9nLm1lc3NhZ2UoXCJub3RBU3ViZG9tYWluX21zZ1wiKVxuXHRcdFx0fSBlbHNlIGlmIChjdXN0b21lckluZm8uZG9tYWluSW5mb3Muc29tZSgoZGkpID0+ICFkaS53aGl0ZWxhYmVsQ29uZmlnICYmIGRpLmRvbWFpbiA9PT0gZG9tYWluQWxsTG93ZXJjYXNlKSkge1xuXHRcdFx0XHREaWFsb2cubWVzc2FnZShcImN1c3RvbURvbWFpbkVycm9yRG9tYWluTm90QXZhaWxhYmxlX21zZ1wiKVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0b3JkZXJXaGl0ZWxhYmVsQ2VydGlmaWNhdGUoZG9tYWluQWxsTG93ZXJjYXNlLCBkaWFsb2cpXG5cdFx0XHR9XG5cdFx0fSxcblx0fSlcbn1cbiIsImltcG9ydCB7IFRleHRGaWVsZCB9IGZyb20gXCIuLi8uLi9ndWkvYmFzZS9UZXh0RmllbGQuanNcIlxuaW1wb3J0IHsgRGlhbG9nIH0gZnJvbSBcIi4uLy4uL2d1aS9iYXNlL0RpYWxvZ1wiXG5pbXBvcnQgeyBzaG93UHJvZ3Jlc3NEaWFsb2cgfSBmcm9tIFwiLi4vLi4vZ3VpL2RpYWxvZ3MvUHJvZ3Jlc3NEaWFsb2dcIlxuaW1wb3J0IHsgbmV2ZXJOdWxsIH0gZnJvbSBcIkB0dXRhby90dXRhbm90YS11dGlsc1wiXG5pbXBvcnQgeyBQcmVjb25kaXRpb25GYWlsZWRFcnJvciB9IGZyb20gXCIuLi8uLi9hcGkvY29tbW9uL2Vycm9yL1Jlc3RFcnJvclwiXG5pbXBvcnQgeyBJY29ucyB9IGZyb20gXCIuLi8uLi9ndWkvYmFzZS9pY29ucy9JY29uc1wiXG5pbXBvcnQgeyBzaG93Tm90QXZhaWxhYmxlRm9yRnJlZURpYWxvZywgc2hvd1BsYW5VcGdyYWRlUmVxdWlyZWREaWFsb2cgfSBmcm9tIFwiLi4vLi4vbWlzYy9TdWJzY3JpcHRpb25EaWFsb2dzXCJcbmltcG9ydCAqIGFzIFNldEN1c3RvbURvbWFpbkNlcnRpZmljYXRlRGlhbG9nIGZyb20gXCIuLi9TZXREb21haW5DZXJ0aWZpY2F0ZURpYWxvZy5qc1wiXG5pbXBvcnQgeyBsYW5nIH0gZnJvbSBcIi4uLy4uL21pc2MvTGFuZ3VhZ2VWaWV3TW9kZWxcIlxuaW1wb3J0IG0sIHsgQ2hpbGRyZW4sIENvbXBvbmVudCwgVm5vZGUgfSBmcm9tIFwibWl0aHJpbFwiXG5pbXBvcnQgdHlwZSB7IENlcnRpZmljYXRlSW5mbywgQ3VzdG9tZXJJbmZvIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9hcGkvZW50aXRpZXMvc3lzL1R5cGVSZWZzLmpzXCJcbmltcG9ydCB7IENlcnRpZmljYXRlU3RhdGUsIENlcnRpZmljYXRlVHlwZSwgUGxhblR5cGUgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2FwaS9jb21tb24vVHV0YW5vdGFDb25zdGFudHNcIlxuaW1wb3J0IHsgZm9ybWF0RGF0ZVRpbWUgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL21pc2MvRm9ybWF0dGVyXCJcbmltcG9ydCB7IGxvY2F0b3IgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2FwaS9tYWluL0NvbW1vbkxvY2F0b3JcIlxuaW1wb3J0IHsgSWNvbkJ1dHRvbiB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZ3VpL2Jhc2UvSWNvbkJ1dHRvbi5qc1wiXG5pbXBvcnQgeyBCdXR0b25TaXplIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9ndWkvYmFzZS9CdXR0b25TaXplLmpzXCJcbmltcG9ydCB7IFByb2dyYW1taW5nRXJyb3IgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2FwaS9jb21tb24vZXJyb3IvUHJvZ3JhbW1pbmdFcnJvci5qc1wiXG5pbXBvcnQgeyBnZXRBdmFpbGFibGVQbGFuc1dpdGhXaGl0ZWxhYmVsIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9zdWJzY3JpcHRpb24vU3Vic2NyaXB0aW9uVXRpbHMuanNcIlxuXG5leHBvcnQgdHlwZSBXaGl0ZWxhYmVsQnJhbmRpbmdEb21haW5TZXR0aW5nc0F0dHJzID0ge1xuXHRjdXN0b21lckluZm86IEN1c3RvbWVySW5mb1xuXHRpc1doaXRlbGFiZWxGZWF0dXJlRW5hYmxlZDogYm9vbGVhblxuXHRjZXJ0aWZpY2F0ZUluZm86IENlcnRpZmljYXRlSW5mbyB8IG51bGxcblx0d2hpdGVsYWJlbERvbWFpbjogc3RyaW5nXG59XG5cbmNvbnN0IEZBSUxVUkVfTE9DS0VEID0gXCJsb2NrLmxvY2tlZFwiXG5jb25zdCBGQUlMVVJFX0NPTlRBQ1RfRk9STV9BQ1RJVkUgPSBcImRvbWFpbi5jb250YWN0X2Zvcm1fYWN0aXZlXCJcblxuZXhwb3J0IGNsYXNzIFdoaXRlbGFiZWxCcmFuZGluZ0RvbWFpblNldHRpbmdzIGltcGxlbWVudHMgQ29tcG9uZW50PFdoaXRlbGFiZWxCcmFuZGluZ0RvbWFpblNldHRpbmdzQXR0cnM+IHtcblx0dmlldyh2bm9kZTogVm5vZGU8V2hpdGVsYWJlbEJyYW5kaW5nRG9tYWluU2V0dGluZ3NBdHRycz4pOiBDaGlsZHJlbiB7XG5cdFx0Y29uc3QgeyBjdXN0b21lckluZm8sIGNlcnRpZmljYXRlSW5mbywgd2hpdGVsYWJlbERvbWFpbiwgaXNXaGl0ZWxhYmVsRmVhdHVyZUVuYWJsZWQgfSA9IHZub2RlLmF0dHJzXG5cdFx0cmV0dXJuIG0oVGV4dEZpZWxkLCB7XG5cdFx0XHRsYWJlbDogXCJ3aGl0ZWxhYmVsRG9tYWluX2xhYmVsXCIsXG5cdFx0XHR2YWx1ZTogd2hpdGVsYWJlbERvbWFpbiA/IHdoaXRlbGFiZWxEb21haW4gOiBsYW5nLmdldChcImRlYWN0aXZhdGVkX2xhYmVsXCIpLFxuXHRcdFx0aGVscExhYmVsOiB0aGlzLnJlbmRlcldoaXRlbGFiZWxJbmZvKGNlcnRpZmljYXRlSW5mbyksXG5cdFx0XHRpc1JlYWRPbmx5OiB0cnVlLFxuXHRcdFx0aW5qZWN0aW9uc1JpZ2h0OiAoKSA9PlxuXHRcdFx0XHRtKFwiLm1sLWJldHdlZW4tc1wiLCBbXG5cdFx0XHRcdFx0d2hpdGVsYWJlbERvbWFpbiA/IHRoaXMucmVuZGVyRGVhY3RpdmF0ZUJ1dHRvbih3aGl0ZWxhYmVsRG9tYWluKSA6IG51bGwsXG5cdFx0XHRcdFx0Y3VzdG9tZXJJbmZvID8gdGhpcy5fcmVuZGVyRWRpdEJ1dHRvbihjdXN0b21lckluZm8sIGNlcnRpZmljYXRlSW5mbywgaXNXaGl0ZWxhYmVsRmVhdHVyZUVuYWJsZWQpIDogbnVsbCxcblx0XHRcdFx0XSksXG5cdFx0fSlcblx0fVxuXG5cdHByaXZhdGUgcmVuZGVyRGVhY3RpdmF0ZUJ1dHRvbih3aGl0ZWxhYmVsRG9tYWluOiBzdHJpbmcpOiBDaGlsZHJlbiB7XG5cdFx0cmV0dXJuIG0oSWNvbkJ1dHRvbiwge1xuXHRcdFx0dGl0bGU6IFwiZGVhY3RpdmF0ZV9hY3Rpb25cIixcblx0XHRcdGNsaWNrOiAoKSA9PiB0aGlzLmRlYWN0aXZhdGUod2hpdGVsYWJlbERvbWFpbiksXG5cdFx0XHRpY29uOiBJY29ucy5DYW5jZWwsXG5cdFx0XHRzaXplOiBCdXR0b25TaXplLkNvbXBhY3QsXG5cdFx0fSlcblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgZGVhY3RpdmF0ZSh3aGl0ZWxhYmVsRG9tYWluOiBzdHJpbmcpIHtcblx0XHRpZiAoYXdhaXQgRGlhbG9nLmNvbmZpcm0oXCJjb25maXJtRGVhY3RpdmF0ZVdoaXRlbGFiZWxEb21haW5fbXNnXCIpKSB7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRyZXR1cm4gYXdhaXQgc2hvd1Byb2dyZXNzRGlhbG9nKFwicGxlYXNlV2FpdF9tc2dcIiwgbG9jYXRvci5jdXN0b21lckZhY2FkZS5kZWxldGVDZXJ0aWZpY2F0ZSh3aGl0ZWxhYmVsRG9tYWluKSlcblx0XHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdFx0aWYgKGUgaW5zdGFuY2VvZiBQcmVjb25kaXRpb25GYWlsZWRFcnJvcikge1xuXHRcdFx0XHRcdGlmIChlLmRhdGEgPT09IEZBSUxVUkVfTE9DS0VEKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gYXdhaXQgRGlhbG9nLm1lc3NhZ2UoXCJvcGVyYXRpb25TdGlsbEFjdGl2ZV9tc2dcIilcblx0XHRcdFx0XHR9IGVsc2UgaWYgKGUuZGF0YSA9PT0gRkFJTFVSRV9DT05UQUNUX0ZPUk1fQUNUSVZFKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gYXdhaXQgRGlhbG9nLm1lc3NhZ2UobGFuZy5nZXRUcmFuc2xhdGlvbihcImRvbWFpblN0aWxsSGFzQ29udGFjdEZvcm1zX21zZ1wiLCB7IFwie2RvbWFpbn1cIjogd2hpdGVsYWJlbERvbWFpbiB9KSlcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0dGhyb3cgZVxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdF9yZW5kZXJFZGl0QnV0dG9uKGN1c3RvbWVySW5mbzogQ3VzdG9tZXJJbmZvLCBjZXJ0aWZpY2F0ZUluZm86IENlcnRpZmljYXRlSW5mbyB8IG51bGwsIGlzV2hpdGVsYWJlbEZlYXR1cmVFbmFibGVkOiBib29sZWFuKTogQ2hpbGRyZW4ge1xuXHRcdHJldHVybiBtKEljb25CdXR0b24sIHtcblx0XHRcdHRpdGxlOiBcImVkaXRfYWN0aW9uXCIsXG5cdFx0XHRjbGljazogKCkgPT4gdGhpcy5lZGl0KGlzV2hpdGVsYWJlbEZlYXR1cmVFbmFibGVkLCBjdXN0b21lckluZm8pLFxuXHRcdFx0aWNvbjogSWNvbnMuRWRpdCxcblx0XHRcdHNpemU6IEJ1dHRvblNpemUuQ29tcGFjdCxcblx0XHR9KVxuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyBlZGl0KGlzV2hpdGVsYWJlbEZlYXR1cmVFbmFibGVkOiBib29sZWFuLCBjdXN0b21lckluZm86IEN1c3RvbWVySW5mbyk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGlmIChsb2NhdG9yLmxvZ2lucy5nZXRVc2VyQ29udHJvbGxlcigpLmlzRnJlZUFjY291bnQoKSkge1xuXHRcdFx0c2hvd05vdEF2YWlsYWJsZUZvckZyZWVEaWFsb2coW1BsYW5UeXBlLlVubGltaXRlZF0pXG5cdFx0fSBlbHNlIHtcblx0XHRcdGlmICghaXNXaGl0ZWxhYmVsRmVhdHVyZUVuYWJsZWQpIHtcblx0XHRcdFx0Y29uc3QgcGxhbnNXaXRoV2hpdGVsYWJlbCA9IGF3YWl0IGdldEF2YWlsYWJsZVBsYW5zV2l0aFdoaXRlbGFiZWwoKVxuXHRcdFx0XHRpc1doaXRlbGFiZWxGZWF0dXJlRW5hYmxlZCA9IGF3YWl0IHNob3dQbGFuVXBncmFkZVJlcXVpcmVkRGlhbG9nKHBsYW5zV2l0aFdoaXRlbGFiZWwpXG5cdFx0XHR9XG5cdFx0XHRpZiAoaXNXaGl0ZWxhYmVsRmVhdHVyZUVuYWJsZWQpIHtcblx0XHRcdFx0U2V0Q3VzdG9tRG9tYWluQ2VydGlmaWNhdGVEaWFsb2cuc2hvdyhjdXN0b21lckluZm8pXG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSByZW5kZXJXaGl0ZWxhYmVsSW5mbyhjZXJ0aWZpY2F0ZUluZm86IENlcnRpZmljYXRlSW5mbyB8IG51bGwpOiAoKSA9PiBDaGlsZHJlbiB7XG5cdFx0bGV0IGNvbXBvbmVudHM6IEFycmF5PHN0cmluZz5cblxuXHRcdGlmIChjZXJ0aWZpY2F0ZUluZm8pIHtcblx0XHRcdHN3aXRjaCAoY2VydGlmaWNhdGVJbmZvLnN0YXRlKSB7XG5cdFx0XHRcdGNhc2UgQ2VydGlmaWNhdGVTdGF0ZS5WQUxJRDpcblx0XHRcdFx0XHRjb21wb25lbnRzID0gW1xuXHRcdFx0XHRcdFx0bGFuZy5nZXQoXCJjZXJ0aWZpY2F0ZUV4cGlyeURhdGVfbGFiZWxcIiwge1xuXHRcdFx0XHRcdFx0XHRcIntkYXRlfVwiOiBmb3JtYXREYXRlVGltZShuZXZlck51bGwoY2VydGlmaWNhdGVJbmZvLmV4cGlyeURhdGUpKSxcblx0XHRcdFx0XHRcdH0pLFxuXHRcdFx0XHRcdFx0dGhpcy5jZXJ0aWZpY2F0ZVR5cGVTdHJpbmcoY2VydGlmaWNhdGVJbmZvKSxcblx0XHRcdFx0XHRdXG5cdFx0XHRcdFx0YnJlYWtcblxuXHRcdFx0XHRjYXNlIENlcnRpZmljYXRlU3RhdGUuVkFMSURBVElORzpcblx0XHRcdFx0XHRjb21wb25lbnRzID0gW2xhbmcuZ2V0KFwiY2VydGlmaWNhdGVTdGF0ZVByb2Nlc3NpbmdfbGFiZWxcIildXG5cdFx0XHRcdFx0YnJlYWtcblxuXHRcdFx0XHRjYXNlIENlcnRpZmljYXRlU3RhdGUuSU5WQUxJRDpcblx0XHRcdFx0XHRjb21wb25lbnRzID0gW2xhbmcuZ2V0KFwiY2VydGlmaWNhdGVTdGF0ZUludmFsaWRfbGFiZWxcIildXG5cdFx0XHRcdFx0YnJlYWtcblxuXHRcdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRcdGNvbXBvbmVudHMgPSBbbGFuZy5nZXQoXCJlbXB0eVN0cmluZ19tc2dcIildXG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdGNvbXBvbmVudHMgPSBbbGFuZy5nZXQoXCJlbXB0eVN0cmluZ19tc2dcIildXG5cdFx0fVxuXG5cdFx0cmV0dXJuICgpID0+XG5cdFx0XHRtKFxuXHRcdFx0XHRcIi5mbGV4XCIsXG5cdFx0XHRcdGNvbXBvbmVudHMubWFwKChjKSA9PiBtKFwiLnByLXNcIiwgYykpLFxuXHRcdFx0KVxuXHR9XG5cblx0cHJpdmF0ZSBjZXJ0aWZpY2F0ZVR5cGVTdHJpbmcoY2VydGlmaWNhdGVJbmZvOiBDZXJ0aWZpY2F0ZUluZm8pOiBzdHJpbmcge1xuXHRcdHN3aXRjaCAoY2VydGlmaWNhdGVJbmZvLnR5cGUpIHtcblx0XHRcdGNhc2UgQ2VydGlmaWNhdGVUeXBlLkxFVFNfRU5DUllQVDpcblx0XHRcdFx0cmV0dXJuIGxhbmcuZ2V0KFwiY2VydGlmaWNhdGVUeXBlQXV0b21hdGljX2xhYmVsXCIpXG5cblx0XHRcdGNhc2UgQ2VydGlmaWNhdGVUeXBlLk1BTlVBTDpcblx0XHRcdFx0cmV0dXJuIGxhbmcuZ2V0KFwiY2VydGlmaWNhdGVUeXBlTWFudWFsX2xhYmVsXCIpXG5cblx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdHJldHVybiBsYW5nLmdldChcImVtcHR5U3RyaW5nX21zZ1wiKVxuXHRcdH1cblx0fVxufVxuIiwiaW1wb3J0IG0sIHsgQ2hpbGRyZW4sIENvbXBvbmVudCB9IGZyb20gXCJtaXRocmlsXCJcbmltcG9ydCB7IHB4LCBzaXplIH0gZnJvbSBcIi4uLy4uL2d1aS9zaXplXCJcbmltcG9ydCB7IEJ1dHRvbiwgQnV0dG9uVHlwZSB9IGZyb20gXCIuLi8uLi9ndWkvYmFzZS9CdXR0b24uanNcIlxuaW1wb3J0IHsgY3JlYXRlTWFpbCwgY3JlYXRlTWFpbEFkZHJlc3MsIE1haWwgfSBmcm9tIFwiLi4vLi4vYXBpL2VudGl0aWVzL3R1dGFub3RhL1R5cGVSZWZzLmpzXCJcbmltcG9ydCB7IE1haWxSb3cgfSBmcm9tIFwiLi4vLi4vLi4vbWFpbC1hcHAvbWFpbC92aWV3L01haWxSb3dcIlxuaW1wb3J0IHsgbm9PcCB9IGZyb20gXCJAdHV0YW8vdHV0YW5vdGEtdXRpbHNcIlxuaW1wb3J0IHsgSWNvbkJ1dHRvbiB9IGZyb20gXCIuLi8uLi9ndWkvYmFzZS9JY29uQnV0dG9uLmpzXCJcbmltcG9ydCB7IEljb25zIH0gZnJvbSBcIi4uLy4uL2d1aS9iYXNlL2ljb25zL0ljb25zLmpzXCJcbmltcG9ydCB7IFRvZ2dsZUJ1dHRvbiB9IGZyb20gXCIuLi8uLi9ndWkvYmFzZS9idXR0b25zL1RvZ2dsZUJ1dHRvbi5qc1wiXG5pbXBvcnQgeyBpc0FwcCwgaXNEZXNrdG9wIH0gZnJvbSBcIi4uLy4uL2FwaS9jb21tb24vRW52LmpzXCJcbmltcG9ydCB7IExvZ2luQnV0dG9uIH0gZnJvbSBcIi4uLy4uL2d1aS9iYXNlL2J1dHRvbnMvTG9naW5CdXR0b24uanNcIlxuaW1wb3J0IHsgbGFuZyB9IGZyb20gXCIuLi8uLi9taXNjL0xhbmd1YWdlVmlld01vZGVsLmpzXCJcblxuZXhwb3J0IGNvbnN0IEJVVFRPTl9XSURUSCA9IDI3MFxuXG5leHBvcnQgY2xhc3MgQ3VzdG9tQ29sb3JFZGl0b3JQcmV2aWV3IGltcGxlbWVudHMgQ29tcG9uZW50IHtcblx0X21haWxSb3c6IE1haWxSb3dcblx0X21haWxSb3cyOiBNYWlsUm93XG5cdHByaXZhdGUgdG9nZ2xlU2VsZWN0ZWQ6IGJvb2xlYW4gPSBmYWxzZVxuXG5cdGNvbnN0cnVjdG9yKCkge1xuXHRcdHRoaXMuX21haWxSb3cgPSBuZXcgTWFpbFJvdyhmYWxzZSwgKCkgPT4gW10sIG5vT3ApXG5cdFx0dGhpcy5fbWFpbFJvdzIgPSBuZXcgTWFpbFJvdyhmYWxzZSwgKCkgPT4gW10sIG5vT3ApXG5cdH1cblxuXHR2aWV3KCk6IENoaWxkcmVuIHtcblx0XHRyZXR1cm4gbShcblx0XHRcdFwiLmVkaXRvci1ib3JkZXIubXQtbC5mbGV4LmNvbFwiLFxuXHRcdFx0e1xuXHRcdFx0XHRzdHlsZToge1xuXHRcdFx0XHRcdGFsaWduSXRlbXM6IFwiY2VudGVyXCIsXG5cdFx0XHRcdH0sXG5cdFx0XHR9LFxuXHRcdFx0W1xuXHRcdFx0XHRtKFxuXHRcdFx0XHRcdFwiLnB0XCIsXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0c3R5bGU6IHtcblx0XHRcdFx0XHRcdFx0d2lkdGg6IHB4KEJVVFRPTl9XSURUSCksXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0bShMb2dpbkJ1dHRvbiwge1xuXHRcdFx0XHRcdFx0bGFiZWw6IGlzQXBwKCkgfHwgaXNEZXNrdG9wKCkgPyBcImFkZEFjY291bnRfYWN0aW9uXCIgOiBcImxvZ2luX2FjdGlvblwiLFxuXHRcdFx0XHRcdFx0b25jbGljazogbm9PcCxcblx0XHRcdFx0XHR9KSxcblx0XHRcdFx0KSxcblx0XHRcdFx0bShcIi5wdFwiLCBbXG5cdFx0XHRcdFx0bShCdXR0b24sIHtcblx0XHRcdFx0XHRcdGxhYmVsOiBsYW5nLm1ha2VUcmFuc2xhdGlvbihcInNlY29uZGFyeVwiLCBcIlNlY29uZGFyeVwiKSxcblx0XHRcdFx0XHRcdGNsaWNrOiBub09wLFxuXHRcdFx0XHRcdFx0dHlwZTogQnV0dG9uVHlwZS5TZWNvbmRhcnksXG5cdFx0XHRcdFx0fSksXG5cdFx0XHRcdFx0bShCdXR0b24sIHtcblx0XHRcdFx0XHRcdGxhYmVsOiBsYW5nLm1ha2VUcmFuc2xhdGlvbihcInByaW1hcnlcIiwgXCJQcmltYXJ5XCIpLFxuXHRcdFx0XHRcdFx0Y2xpY2s6IG5vT3AsXG5cdFx0XHRcdFx0XHR0eXBlOiBCdXR0b25UeXBlLlByaW1hcnksXG5cdFx0XHRcdFx0fSksXG5cdFx0XHRcdF0pLFxuXHRcdFx0XHRtKFwiLnB0XCIsIFtcblx0XHRcdFx0XHRtKEljb25CdXR0b24sIHtcblx0XHRcdFx0XHRcdHRpdGxlOiBsYW5nLm1ha2VUcmFuc2xhdGlvbihcImljb25fYnV0dG9uXCIsIFwiSWNvbiBidXR0b25cIiksXG5cdFx0XHRcdFx0XHRpY29uOiBJY29ucy5Gb2xkZXIsXG5cdFx0XHRcdFx0XHRjbGljazogbm9PcCxcblx0XHRcdFx0XHR9KSxcblx0XHRcdFx0XHRtKFRvZ2dsZUJ1dHRvbiwge1xuXHRcdFx0XHRcdFx0dGl0bGU6IGxhbmcubWFrZVRyYW5zbGF0aW9uKFwidG9nZ2xlX2J1dHRvblwiLCBcIlRvZ2dsZSBidXR0b25cIiksXG5cdFx0XHRcdFx0XHRpY29uOiB0aGlzLnRvZ2dsZVNlbGVjdGVkID8gSWNvbnMuTG9jayA6IEljb25zLlVubG9jayxcblx0XHRcdFx0XHRcdHRvZ2dsZWQ6IHRoaXMudG9nZ2xlU2VsZWN0ZWQsXG5cdFx0XHRcdFx0XHRvblRvZ2dsZWQ6ICgpID0+ICh0aGlzLnRvZ2dsZVNlbGVjdGVkID0gIXRoaXMudG9nZ2xlU2VsZWN0ZWQpLFxuXHRcdFx0XHRcdH0pLFxuXHRcdFx0XHRdKSxcblx0XHRcdFx0bShcIi5wdFwiLCB0aGlzLnJlbmRlclByZXZpZXdNYWlsUm93KCkpLFxuXHRcdFx0XSxcblx0XHQpXG5cdH1cblxuXHRyZW5kZXJQcmV2aWV3TWFpbFJvdygpOiBDaGlsZHJlbiB7XG5cdFx0Y29uc3QgbWFpbFRlbXBsYXRlID0ge1xuXHRcdFx0cmVjZWl2ZWREYXRlOiBuZXcgRGF0ZSgpLFxuXHRcdFx0YXR0YWNobWVudHM6IFtdLFxuXHRcdFx0c3RhdGU6IFwiMlwiLFxuXHRcdFx0bWFpbERldGFpbHM6IG51bGwsXG5cdFx0XHRhdXRoU3RhdHVzOiBudWxsLFxuXHRcdFx0ZW5jcnlwdGlvbkF1dGhTdGF0dXM6IG51bGwsXG5cdFx0XHRtZXRob2Q6IFwiMFwiLFxuXHRcdFx0YnVja2V0S2V5OiBudWxsLFxuXHRcdFx0Y29udmVyc2F0aW9uRW50cnk6IFtcImxpc3RJZFwiLCBcImNvbnZlcnNhdGlvbklkXCJdLFxuXHRcdFx0ZGlmZmVyZW50RW52ZWxvcGVTZW5kZXI6IG51bGwsXG5cdFx0XHRmaXJzdFJlY2lwaWVudDogbnVsbCxcblx0XHRcdGxpc3RVbnN1YnNjcmliZTogZmFsc2UsXG5cdFx0XHRtYWlsRGV0YWlsc0RyYWZ0OiBudWxsLFxuXHRcdFx0bW92ZWRUaW1lOiBudWxsLFxuXHRcdFx0cGhpc2hpbmdTdGF0dXM6IFwiMFwiLFxuXHRcdFx0cmVjaXBpZW50Q291bnQ6IFwiMFwiLFxuXHRcdFx0c2V0czogW10sXG5cdFx0fSBzYXRpc2ZpZXMgUGFydGlhbDxNYWlsPlxuXHRcdGNvbnN0IG1haWwgPSBjcmVhdGVNYWlsKHtcblx0XHRcdHNlbmRlcjogY3JlYXRlTWFpbEFkZHJlc3Moe1xuXHRcdFx0XHRhZGRyZXNzOiBcIm0ubXVzdGVybWFubkBleGFtcGxlLmNvbVwiLFxuXHRcdFx0XHRuYW1lOiBcIk1heCBNdXN0ZXJtYW5uXCIsXG5cdFx0XHRcdGNvbnRhY3Q6IG51bGwsXG5cdFx0XHR9KSxcblx0XHRcdHN1YmplY3Q6IFwiTWFpbCAxXCIsXG5cdFx0XHR1bnJlYWQ6IGZhbHNlLFxuXHRcdFx0cmVwbHlUeXBlOiBcIjBcIixcblx0XHRcdGNvbmZpZGVudGlhbDogdHJ1ZSxcblx0XHRcdC4uLm1haWxUZW1wbGF0ZSxcblx0XHR9KVxuXHRcdGNvbnN0IG1haWwyID0gY3JlYXRlTWFpbCh7XG5cdFx0XHRzZW5kZXI6IGNyZWF0ZU1haWxBZGRyZXNzKHtcblx0XHRcdFx0YWRkcmVzczogXCJtLm11c3Rlcm1hbm5AZXhhbXBsZS5jb21cIixcblx0XHRcdFx0bmFtZTogXCJNYXggTXVzdGVybWFublwiLFxuXHRcdFx0XHRjb250YWN0OiBudWxsLFxuXHRcdFx0fSksXG5cdFx0XHRzdWJqZWN0OiBcIk1haWwgMlwiLFxuXHRcdFx0dW5yZWFkOiB0cnVlLFxuXHRcdFx0cmVwbHlUeXBlOiBcIjFcIixcblx0XHRcdGNvbmZpZGVudGlhbDogZmFsc2UsXG5cdFx0XHQuLi5tYWlsVGVtcGxhdGUsXG5cdFx0fSlcblx0XHRyZXR1cm4gbShcblx0XHRcdFwiLnJlbFwiLFxuXHRcdFx0e1xuXHRcdFx0XHRzdHlsZToge1xuXHRcdFx0XHRcdHdpZHRoOiBweChzaXplLnNlY29uZF9jb2xfbWF4X3dpZHRoKSxcblx0XHRcdFx0XHRoZWlnaHQ6IHB4KHNpemUubGlzdF9yb3dfaGVpZ2h0ICogMiksXG5cdFx0XHRcdH0sXG5cdFx0XHR9LFxuXHRcdFx0W1xuXHRcdFx0XHRtKFxuXHRcdFx0XHRcdFwiLmxpc3Qtcm93LnBsLnByLWwub2RkLXJvd1wiLFxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdG9uY3JlYXRlOiAodm5vZGUpID0+IHtcblx0XHRcdFx0XHRcdFx0dGhpcy5fbWFpbFJvdy5kb21FbGVtZW50ID0gdm5vZGUuZG9tIGFzIEhUTUxFbGVtZW50XG5cdFx0XHRcdFx0XHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB0aGlzLl9tYWlsUm93LnVwZGF0ZShtYWlsLCBmYWxzZSwgZmFsc2UpKVxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdHRoaXMuX21haWxSb3cucmVuZGVyKCksXG5cdFx0XHRcdCksXG5cdFx0XHRcdG0oXG5cdFx0XHRcdFx0XCIubGlzdC1yb3cucGwucHItbFwiLFxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdG9uY3JlYXRlOiAodm5vZGUpID0+IHtcblx0XHRcdFx0XHRcdFx0dGhpcy5fbWFpbFJvdzIuZG9tRWxlbWVudCA9IHZub2RlLmRvbSBhcyBIVE1MRWxlbWVudFxuXHRcdFx0XHRcdFx0XHRyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gdGhpcy5fbWFpbFJvdzIudXBkYXRlKG1haWwyLCB0cnVlLCBmYWxzZSkpXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0c3R5bGU6IHtcblx0XHRcdFx0XHRcdFx0dG9wOiBweChzaXplLmxpc3Rfcm93X2hlaWdodCksXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0dGhpcy5fbWFpbFJvdzIucmVuZGVyKCksXG5cdFx0XHRcdCksXG5cdFx0XHRdLFxuXHRcdClcblx0fVxufVxuIiwiaW1wb3J0IG0sIHsgQ2hpbGQsIENoaWxkcmVuLCBDb21wb25lbnQsIFZub2RlLCBWbm9kZURPTSB9IGZyb20gXCJtaXRocmlsXCJcbmltcG9ydCB0eXBlIHsgVGV4dEZpZWxkQXR0cnMgfSBmcm9tIFwiLi4vLi4vZ3VpL2Jhc2UvVGV4dEZpZWxkLmpzXCJcbmltcG9ydCB7IFRleHRGaWVsZCB9IGZyb20gXCIuLi8uLi9ndWkvYmFzZS9UZXh0RmllbGQuanNcIlxuaW1wb3J0IHN0cmVhbSBmcm9tIFwibWl0aHJpbC9zdHJlYW1cIlxuaW1wb3J0IFN0cmVhbSBmcm9tIFwibWl0aHJpbC9zdHJlYW1cIlxuaW1wb3J0IHsgRHJvcERvd25TZWxlY3RvciB9IGZyb20gXCIuLi8uLi9ndWkvYmFzZS9Ecm9wRG93blNlbGVjdG9yLmpzXCJcbmltcG9ydCB7IGxhbmcgfSBmcm9tIFwiLi4vLi4vbWlzYy9MYW5ndWFnZVZpZXdNb2RlbFwiXG5pbXBvcnQgdHlwZSB7IEN1c3RvbUNvbG9yIH0gZnJvbSBcIi4vQ3VzdG9tQ29sb3JzRWRpdG9yVmlld01vZGVsXCJcbmltcG9ydCB7IEN1c3RvbUNvbG9yc0VkaXRvclZpZXdNb2RlbCB9IGZyb20gXCIuL0N1c3RvbUNvbG9yc0VkaXRvclZpZXdNb2RlbFwiXG5pbXBvcnQgeyBFeHBhbmRlckJ1dHRvbiwgRXhwYW5kZXJQYW5lbCB9IGZyb20gXCIuLi8uLi9ndWkvYmFzZS9FeHBhbmRlclwiXG5pbXBvcnQgeyBDdXN0b21Db2xvckVkaXRvclByZXZpZXcgfSBmcm9tIFwiLi9DdXN0b21Db2xvckVkaXRvclByZXZpZXdcIlxuaW1wb3J0IHsgZG93bmNhc3QgfSBmcm9tIFwiQHR1dGFvL3R1dGFub3RhLXV0aWxzXCJcbmltcG9ydCB7IGV4cGFuZEhleFRyaXBsZXQgfSBmcm9tIFwiLi4vLi4vZ3VpL2Jhc2UvQ29sb3JcIlxuaW1wb3J0IHsgcHggfSBmcm9tIFwiLi4vLi4vZ3VpL3NpemVcIlxuaW1wb3J0IHsgQmFzZVRoZW1lSWQgfSBmcm9tIFwiLi4vLi4vZ3VpL3RoZW1lXCJcblxuZXhwb3J0IHR5cGUgU2ltcGxlQ3VzdG9tQ29sb3JFZGl0b3JBdHRycyA9IHtcblx0bW9kZWw6IEN1c3RvbUNvbG9yc0VkaXRvclZpZXdNb2RlbFxufVxuZXhwb3J0IHR5cGUgQ29sb3JDYXRlZ29yaWVzID0ge1xuXHRjb250ZW50OiBBcnJheTxDdXN0b21Db2xvcj5cblx0aGVhZGVyOiBBcnJheTxDdXN0b21Db2xvcj5cblx0bmF2aWdhdGlvbjogQXJyYXk8Q3VzdG9tQ29sb3I+XG5cdG90aGVyOiBBcnJheTxDdXN0b21Db2xvcj5cbn1cbmV4cG9ydCBjb25zdCBDT0xPUl9QSUNLRVJfV0lEVEggPSA0MDBcbmV4cG9ydCBjb25zdCBBRFZBTkNFRF9URVhURklFTERfV0lEVEggPSAzNDRcbmV4cG9ydCBjb25zdCBDQVRFR09SWV9XSURUSCA9IDc1MFxuXG4vKipcbiAqICBFZGl0b3IgdGhhdCBzaW1wbGlmaWVzIHRoZSBleGlzdGluZyB3aGl0ZWxhYmVsIGVkaXRvciwgYWxsb3dpbmcgZm9yIGVhc3kgY2hhbmdlcyB0byBhY2NlbnQgY29sb3IgYW5kIGJhc2UgdGhlbWUsIGFsc28gc2hvd2luZyBhIHByZXZpZXdcbiAqL1xuZXhwb3J0IGNsYXNzIEN1c3RvbUNvbG9yRWRpdG9yIGltcGxlbWVudHMgQ29tcG9uZW50PFNpbXBsZUN1c3RvbUNvbG9yRWRpdG9yQXR0cnM+IHtcblx0cHJpdmF0ZSBfY29sb3JQaWNrZXJEb206IEhUTUxJbnB1dEVsZW1lbnQgfCBudWxsID0gbnVsbFxuXHRwcml2YXRlIHJlYWRvbmx5IF9hZHZhbmNlZFNldHRpbmdzRW5hYmxlZDogU3RyZWFtPGJvb2xlYW4+XG5cblx0Y29uc3RydWN0b3IoKSB7XG5cdFx0dGhpcy5fYWR2YW5jZWRTZXR0aW5nc0VuYWJsZWQgPSBzdHJlYW08Ym9vbGVhbj4oZmFsc2UpXG5cdH1cblxuXHR2aWV3KHZub2RlOiBWbm9kZTxTaW1wbGVDdXN0b21Db2xvckVkaXRvckF0dHJzPik6IENoaWxkcmVuIHtcblx0XHRjb25zdCB7IG1vZGVsIH0gPSB2bm9kZS5hdHRyc1xuXHRcdGNvbnN0IHNpbXBsZUNvbG9yUGlja2VyQXR0cnM6IFRleHRGaWVsZEF0dHJzID0ge1xuXHRcdFx0bGFiZWw6IFwiYWNjZW50Q29sb3JfbGFiZWxcIixcblx0XHRcdHZhbHVlOiB2bm9kZS5hdHRycy5tb2RlbC5hY2NlbnRDb2xvcixcblx0XHRcdGluamVjdGlvbnNSaWdodDogKCkgPT5cblx0XHRcdFx0cmVuZGVyQ29sb3JQaWNrZXIoXG5cdFx0XHRcdFx0KGlucHV0RXZlbnQpID0+IHtcblx0XHRcdFx0XHRcdHZub2RlLmF0dHJzLm1vZGVsLmNoYW5nZUFjY2VudENvbG9yKGRvd25jYXN0PEhUTUxJbnB1dEVsZW1lbnQ+KGlucHV0RXZlbnQudGFyZ2V0KS52YWx1ZSlcblx0XHRcdFx0XHRcdG0ucmVkcmF3KClcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdHZub2RlLmF0dHJzLm1vZGVsLmFjY2VudENvbG9yLFxuXHRcdFx0XHRcdCh7IGRvbSB9KSA9PiAodGhpcy5fY29sb3JQaWNrZXJEb20gPSBkb20gYXMgSFRNTElucHV0RWxlbWVudCksXG5cdFx0XHRcdCksXG5cdFx0XHRtYXhXaWR0aDogQ09MT1JfUElDS0VSX1dJRFRILFxuXHRcdFx0aXNSZWFkT25seTogdHJ1ZSxcblx0XHR9XG5cblx0XHQvKlxuXHRDdXJyZW50bHk6XG5cdFx0QnV0dG9uOlxuXHRcdENvbnRlbnQ6XG5cdFx0RWxldmF0ZWQ6XG5cdFx0SGVhZGVyOlxuXHRcdExpc3Q6XG5cdFx0TW9kYWw6XG5cdFx0TmF2aWdhdGlvbjpcblx0XHRUaGVuOlxuXHRcdENvbnRlbnQ6IENvbnRlbnQsIExpc3Rcblx0XHRIZWFkZXI6IEhlYWRlclxuXHRcdE5hdmlnYXRpb246IE5hdmlnYXRpb25cblx0XHRPdGhlcjogQnV0dG9uLCBFbGV2YXRlZCwgTW9kYWxcblx0ICovXG5cdFx0cmV0dXJuIG0oXCJcIiwgW1xuXHRcdFx0bShcIlwiLCBbXG5cdFx0XHRcdG0oXCIuZmxleFwiLCBbXG5cdFx0XHRcdFx0bShcIi5mbGV4LWdyb3dcIiwgbShUZXh0RmllbGQsIHNpbXBsZUNvbG9yUGlja2VyQXR0cnMpKSxcblx0XHRcdFx0XHRtKFxuXHRcdFx0XHRcdFx0XCIubWwtcy5mbGV4LWdyb3dcIixcblx0XHRcdFx0XHRcdG0oRHJvcERvd25TZWxlY3Rvciwge1xuXHRcdFx0XHRcdFx0XHRsYWJlbDogXCJiYXNlVGhlbWVfbGFiZWxcIixcblx0XHRcdFx0XHRcdFx0aXRlbXM6IFtcblx0XHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0XHRuYW1lOiBsYW5nLmdldChcImxpZ2h0X2xhYmVsXCIpLFxuXHRcdFx0XHRcdFx0XHRcdFx0dmFsdWU6IFwibGlnaHRcIixcblx0XHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHRcdG5hbWU6IGxhbmcuZ2V0KFwiZGFya19sYWJlbFwiKSxcblx0XHRcdFx0XHRcdFx0XHRcdHZhbHVlOiBcImRhcmtcIixcblx0XHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRdLFxuXHRcdFx0XHRcdFx0XHRzZWxlY3RlZFZhbHVlOiB2bm9kZS5hdHRycy5tb2RlbC5iYXNlVGhlbWVJZCxcblx0XHRcdFx0XHRcdFx0c2VsZWN0aW9uQ2hhbmdlZEhhbmRsZXI6ICh2OiBCYXNlVGhlbWVJZCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdHZub2RlLmF0dHJzLm1vZGVsLmNoYW5nZUJhc2VUaGVtZSh2KVxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0fSksXG5cdFx0XHRcdFx0KSxcblx0XHRcdFx0XSksXG5cdFx0XHRcdG0oQ3VzdG9tQ29sb3JFZGl0b3JQcmV2aWV3KSxcblx0XHRcdF0pLFxuXHRcdFx0bShcIlwiLCBbXG5cdFx0XHRcdG0oRXhwYW5kZXJCdXR0b24sIHtcblx0XHRcdFx0XHRsYWJlbDogXCJhZHZhbmNlZF9sYWJlbFwiLFxuXHRcdFx0XHRcdGV4cGFuZGVkOiB0aGlzLl9hZHZhbmNlZFNldHRpbmdzRW5hYmxlZCgpLFxuXHRcdFx0XHRcdG9uRXhwYW5kZWRDaGFuZ2U6IHRoaXMuX2FkdmFuY2VkU2V0dGluZ3NFbmFibGVkLFxuXHRcdFx0XHR9KSxcblx0XHRcdFx0bShcblx0XHRcdFx0XHRFeHBhbmRlclBhbmVsLFxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdGV4cGFuZGVkOiB0aGlzLl9hZHZhbmNlZFNldHRpbmdzRW5hYmxlZCgpLFxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0W1xuXHRcdFx0XHRcdFx0bShcIi5zbWFsbC5tdFwiLCBsYW5nLmdldChcImN1c3RvbUNvbG9yc0luZm9fbXNnXCIpKSxcblx0XHRcdFx0XHRcdG0oXCIuZmxleC5mbGV4LWNvbHVtblwiLCBbXG5cdFx0XHRcdFx0XHRcdE9iamVjdC5lbnRyaWVzKHRoaXMuX2dldEdyb3VwZWRDb2xvcnMobW9kZWwuY3VzdG9tQ29sb3JzKSkubWFwKChbbmFtZSwgY29sb3JzXSkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdHJldHVybiBtKFwiXCIsIFtcblx0XHRcdFx0XHRcdFx0XHRcdG0oXCIuaDQubXQtbFwiLCBjYXBpdGFsaXplRmlyc3RMZXR0ZXJPZlN0cmluZyhuYW1lKSksXG5cdFx0XHRcdFx0XHRcdFx0XHRtKFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcIi5lZGl0b3ItYm9yZGVyLnRleHQtYnJlYWsud3JhcHBpbmctcm93XCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzdHlsZToge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0bWF4V2lkdGg6IHB4KENBVEVHT1JZX1dJRFRIKSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRbY29sb3JzLm1hcCgoYykgPT4gcmVuZGVyQ3VzdG9tQ29sb3JGaWVsZChtb2RlbCwgYykpXSxcblx0XHRcdFx0XHRcdFx0XHRcdCksXG5cdFx0XHRcdFx0XHRcdFx0XSlcblx0XHRcdFx0XHRcdFx0fSksXG5cdFx0XHRcdFx0XHRdKSxcblx0XHRcdFx0XHRdLFxuXHRcdFx0XHQpLFxuXHRcdFx0XSksXG5cdFx0XSlcblx0fVxuXG5cdC8qKlxuXHQgKlxuXHQgKi9cblx0X2dldEdyb3VwZWRDb2xvcnMoY29sb3JzOiBSZWFkb25seUFycmF5PEN1c3RvbUNvbG9yPik6IENvbG9yQ2F0ZWdvcmllcyB7XG5cdFx0Y29uc3QgZ3JvdXBlZENvbG9yczogQ29sb3JDYXRlZ29yaWVzID0ge1xuXHRcdFx0Y29udGVudDogW10sXG5cdFx0XHRoZWFkZXI6IFtdLFxuXHRcdFx0bmF2aWdhdGlvbjogW10sXG5cdFx0XHRvdGhlcjogW10sXG5cdFx0fVxuXG5cdFx0Zm9yIChjb25zdCBjb2xvciBvZiBjb2xvcnMpIHtcblx0XHRcdGlmIChjb2xvci5uYW1lLnN0YXJ0c1dpdGgoXCJjb250ZW50XCIpIHx8IGNvbG9yLm5hbWUuc3RhcnRzV2l0aChcImxpc3RcIikpIHtcblx0XHRcdFx0Z3JvdXBlZENvbG9ycy5jb250ZW50LnB1c2goY29sb3IpXG5cdFx0XHR9IGVsc2UgaWYgKGNvbG9yLm5hbWUuc3RhcnRzV2l0aChcImhlYWRlclwiKSkge1xuXHRcdFx0XHRncm91cGVkQ29sb3JzLmhlYWRlci5wdXNoKGNvbG9yKVxuXHRcdFx0fSBlbHNlIGlmIChjb2xvci5uYW1lLnN0YXJ0c1dpdGgoXCJuYXZpZ2F0aW9uXCIpKSB7XG5cdFx0XHRcdGdyb3VwZWRDb2xvcnMubmF2aWdhdGlvbi5wdXNoKGNvbG9yKVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Z3JvdXBlZENvbG9ycy5vdGhlci5wdXNoKGNvbG9yKVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBncm91cGVkQ29sb3JzXG5cdH1cbn1cblxuZnVuY3Rpb24gcmVuZGVyQ3VzdG9tQ29sb3JGaWVsZChtb2RlbDogQ3VzdG9tQ29sb3JzRWRpdG9yVmlld01vZGVsLCB7IG5hbWUsIHZhbHVlLCBkZWZhdWx0VmFsdWUsIHZhbGlkIH06IEN1c3RvbUNvbG9yKTogQ2hpbGQge1xuXHRyZXR1cm4gbShcblx0XHRcIlwiLFxuXHRcdHtcblx0XHRcdHN0eWxlOiB7XG5cdFx0XHRcdG1heFdpZHRoOiBweChBRFZBTkNFRF9URVhURklFTERfV0lEVEgpLFxuXHRcdFx0fSxcblx0XHR9LFxuXHRcdFtcblx0XHRcdG0oVGV4dEZpZWxkLCB7XG5cdFx0XHRcdGxhYmVsOiBsYW5nLm1ha2VUcmFuc2xhdGlvbihuYW1lLCBuYW1lKSxcblx0XHRcdFx0dmFsdWU6IHZhbHVlLFxuXHRcdFx0XHRpbmplY3Rpb25zUmlnaHQ6ICgpID0+XG5cdFx0XHRcdFx0cmVuZGVyQ29sb3JQaWNrZXIoKGV2ZW50KSA9PiBtb2RlbC5hZGRDdXN0b21pemF0aW9uKG5hbWUsIGRvd25jYXN0PEhUTUxJbnB1dEVsZW1lbnQ+KGV2ZW50LnRhcmdldCkudmFsdWUpLCBwcm9jZXNzQ29sb3JJbnB1dFZhbHVlKHZhbHVlKSksXG5cdFx0XHRcdG9uaW5wdXQ6ICh2YWwpID0+IHtcblx0XHRcdFx0XHRtb2RlbC5hZGRDdXN0b21pemF0aW9uKG5hbWUsIHZhbClcblx0XHRcdFx0fSxcblx0XHRcdH0pLFxuXHRcdFx0cmVuZGVyRGVmYXVsdENvbG9yTGluZShkZWZhdWx0VmFsdWUsIHZhbGlkKSxcblx0XHRdLFxuXHQpXG59XG5cbmZ1bmN0aW9uIHJlbmRlckNvbG9yUGlja2VyKG9uSW5wdXQ6IChhcmcwOiBFdmVudCkgPT4gdW5rbm93biwgdmFsdWU6IHN0cmluZywgb25jcmVhdGU/OiAodm5vZGU6IFZub2RlRE9NPHZvaWQ+KSA9PiB2b2lkKTogQ2hpbGQge1xuXHRyZXR1cm4gbShcImlucHV0LmNvbG9yLXBpY2tlci5tYi14c1wiLCB7XG5cdFx0dHlwZTogXCJjb2xvclwiLFxuXHRcdHZhbHVlOiB2YWx1ZSxcblx0XHRvbmlucHV0OiBvbklucHV0LFxuXHRcdG9uY3JlYXRlLFxuXHR9KVxufVxuXG5mdW5jdGlvbiByZW5kZXJEZWZhdWx0Q29sb3JMaW5lKGRlZmF1bHRDb2xvcjogc3RyaW5nLCB2YWxpZDogYm9vbGVhbik6IENoaWxkIHtcblx0aWYgKHZhbGlkKSB7XG5cdFx0cmV0dXJuIG0oXCIuc21hbGwuZmxleC1zcGFjZS1iZXR3ZWVuXCIsIFtcblx0XHRcdG0oXG5cdFx0XHRcdFwiXCIsXG5cdFx0XHRcdGxhbmcuZ2V0KFwiZGVmYXVsdENvbG9yX2xhYmVsXCIsIHtcblx0XHRcdFx0XHRcInsxfVwiOiBkZWZhdWx0Q29sb3IsXG5cdFx0XHRcdH0pLFxuXHRcdFx0KSxcblx0XHRcdG0oXCJcIiwge1xuXHRcdFx0XHRzdHlsZToge1xuXHRcdFx0XHRcdHdpZHRoOiBcIjEwMHB4XCIsXG5cdFx0XHRcdFx0aGVpZ2h0OiBcIjEwcHhcIixcblx0XHRcdFx0XHRcIm1hcmdpbi10b3BcIjogXCIycHhcIixcblx0XHRcdFx0XHRcImJhY2tncm91bmQtY29sb3JcIjogZGVmYXVsdENvbG9yLFxuXHRcdFx0XHR9LFxuXHRcdFx0fSksXG5cdFx0XSlcblx0fSBlbHNlIHtcblx0XHRyZXR1cm4gbShcIi5zbWFsbFwiLCBsYW5nLmdldChcImludmFsaWRJbnB1dEZvcm1hdF9tc2dcIikpXG5cdH1cbn1cblxuLyoqXG4gKiBJZiB0aGUgcHJvdmlkZWQgdmFsdWUgaXMgYSAzLWRpZ2l0IGhleCBzdHJpbmcsIGl0IGV4cGFuZHMgaXQgdG8gYSA2LWRpZ2l0IG9uZSAoI1JHQiAjUlJHR0JCKVxuICogT3RoZXJ3aXNlLCBpdCByZXR1cm5zIHRoZSBwcm92aWRlZCB2YWx1ZVxuICovXG5mdW5jdGlvbiBwcm9jZXNzQ29sb3JJbnB1dFZhbHVlKHZhbHVlOiBzdHJpbmcpIHtcblx0Y29uc3QgaXNIZXhUcmlwbGV0ID0gL14jWzAtOWEtZkEtRl1bMC05YS1mQS1GXVswLTlhLWZBLUZdJC8udGVzdCh2YWx1ZSlcblxuXHRpZiAoaXNIZXhUcmlwbGV0KSB7XG5cdFx0Y29uc3Qgd2l0aG91dEhhc2ggPSB2YWx1ZS5zbGljZSgxKVxuXHRcdHJldHVybiBcIiNcIiArIGV4cGFuZEhleFRyaXBsZXQod2l0aG91dEhhc2gpXG5cdH0gZWxzZSB7XG5cdFx0cmV0dXJuIHZhbHVlXG5cdH1cbn1cblxuZnVuY3Rpb24gY2FwaXRhbGl6ZUZpcnN0TGV0dGVyT2ZTdHJpbmcoc3RyaW5nOiBzdHJpbmcpOiBzdHJpbmcge1xuXHRyZXR1cm4gc3RyaW5nLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgc3RyaW5nLnNsaWNlKDEpXG59XG4iLCJpbXBvcnQgbSBmcm9tIFwibWl0aHJpbFwiXG5pbXBvcnQgeyBsYW5nIH0gZnJvbSBcIi4uLy4uL21pc2MvTGFuZ3VhZ2VWaWV3TW9kZWxcIlxuaW1wb3J0IHsgYXNzZXJ0TWFpbk9yTm9kZSB9IGZyb20gXCIuLi8uLi9hcGkvY29tbW9uL0VudlwiXG5pbXBvcnQgeyBEaWFsb2cgfSBmcm9tIFwiLi4vLi4vZ3VpL2Jhc2UvRGlhbG9nXCJcbmltcG9ydCB7IEJ1dHRvblR5cGUgfSBmcm9tIFwiLi4vLi4vZ3VpL2Jhc2UvQnV0dG9uLmpzXCJcbmltcG9ydCB0eXBlIHsgRGlhbG9nSGVhZGVyQmFyQXR0cnMgfSBmcm9tIFwiLi4vLi4vZ3VpL2Jhc2UvRGlhbG9nSGVhZGVyQmFyXCJcbmltcG9ydCB7IEtleXMgfSBmcm9tIFwiLi4vLi4vYXBpL2NvbW1vbi9UdXRhbm90YUNvbnN0YW50c1wiXG5pbXBvcnQgeyBDdXN0b21Db2xvckVkaXRvciB9IGZyb20gXCIuL0N1c3RvbUNvbG9yRWRpdG9yXCJcbmltcG9ydCB7IEN1c3RvbUNvbG9yc0VkaXRvclZpZXdNb2RlbCB9IGZyb20gXCIuL0N1c3RvbUNvbG9yc0VkaXRvclZpZXdNb2RlbFwiXG5cbmFzc2VydE1haW5Pck5vZGUoKVxuXG5leHBvcnQgZnVuY3Rpb24gc2hvdyhtb2RlbDogQ3VzdG9tQ29sb3JzRWRpdG9yVmlld01vZGVsKSB7XG5cdG1vZGVsLmluaXQoKVxuXHRtb2RlbC5idWlsdFRoZW1lLm1hcCgoKSA9PiBtLnJlZHJhdygpKVxuXHRjb25zdCBmb3JtID0ge1xuXHRcdHZpZXc6ICgpID0+IHtcblx0XHRcdHJldHVybiBtKFwiLnBiXCIsIFtcblx0XHRcdFx0bShDdXN0b21Db2xvckVkaXRvciwge1xuXHRcdFx0XHRcdG1vZGVsOiBtb2RlbCxcblx0XHRcdFx0fSksXG5cdFx0XHRdKVxuXHRcdH0sXG5cdH1cblxuXHRjb25zdCBjYW5jZWxBY3Rpb24gPSAoKSA9PiB7XG5cdFx0bW9kZWwucmVzZXRBY3RpdmVDbGllbnRUaGVtZSgpLnRoZW4oKCkgPT4gZGlhbG9nLmNsb3NlKCkpXG5cdH1cblxuXHRjb25zdCBva0FjdGlvbiA9IGFzeW5jICgpID0+IHtcblx0XHRpZiAoYXdhaXQgbW9kZWwuc2F2ZSgpKSB7XG5cdFx0XHRkaWFsb2cuY2xvc2UoKVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZXR1cm4gRGlhbG9nLm1lc3NhZ2UoXCJjb3JyZWN0VmFsdWVzX21zZ1wiKVxuXHRcdH1cblx0fVxuXG5cdGxldCBhY3Rpb25CYXJBdHRyczogRGlhbG9nSGVhZGVyQmFyQXR0cnMgPSB7XG5cdFx0bGVmdDogW1xuXHRcdFx0e1xuXHRcdFx0XHRsYWJlbDogXCJjYW5jZWxfYWN0aW9uXCIsXG5cdFx0XHRcdGNsaWNrOiBjYW5jZWxBY3Rpb24sXG5cdFx0XHRcdHR5cGU6IEJ1dHRvblR5cGUuU2Vjb25kYXJ5LFxuXHRcdFx0fSxcblx0XHRdLFxuXHRcdHJpZ2h0OiBbXG5cdFx0XHR7XG5cdFx0XHRcdGxhYmVsOiBcIm9rX2FjdGlvblwiLFxuXHRcdFx0XHRjbGljazogb2tBY3Rpb24sXG5cdFx0XHRcdHR5cGU6IEJ1dHRvblR5cGUuUHJpbWFyeSxcblx0XHRcdH0sXG5cdFx0XSxcblx0XHRtaWRkbGU6IFwiY3VzdG9tQ29sb3JzX2xhYmVsXCIsXG5cdH1cblx0bGV0IGRpYWxvZyA9IERpYWxvZy5sYXJnZURpYWxvZyhhY3Rpb25CYXJBdHRycywgZm9ybSlcblx0XHQuYWRkU2hvcnRjdXQoe1xuXHRcdFx0a2V5OiBLZXlzLkVTQyxcblx0XHRcdGV4ZWM6IGNhbmNlbEFjdGlvbixcblx0XHRcdGhlbHA6IFwiY2xvc2VfYWx0XCIsXG5cdFx0fSlcblx0XHQuc2V0Q2xvc2VIYW5kbGVyKGNhbmNlbEFjdGlvbilcblx0XHQuc2hvdygpXG59XG4iLCJpbXBvcnQgeyBhc3NlcnRNYWluT3JOb2RlIH0gZnJvbSBcIi4uLy4uL2FwaS9jb21tb24vRW52XCJcbmltcG9ydCB0eXBlIHsgQmFzZVRoZW1lSWQsIFRoZW1lIH0gZnJvbSBcIi4uLy4uL2d1aS90aGVtZVwiXG5pbXBvcnQgeyBhc3NlcnROb3ROdWxsLCBjbG9uZSwgZGVib3VuY2VTdGFydCwgZG93bmNhc3QgfSBmcm9tIFwiQHR1dGFvL3R1dGFub3RhLXV0aWxzXCJcbmltcG9ydCB0eXBlIHsgRG9tYWluSW5mbywgV2hpdGVsYWJlbENvbmZpZyB9IGZyb20gXCIuLi8uLi9hcGkvZW50aXRpZXMvc3lzL1R5cGVSZWZzLmpzXCJcbmltcG9ydCB7IGlzVmFsaWRDb2xvckNvZGUgfSBmcm9tIFwiLi4vLi4vZ3VpL2Jhc2UvQ29sb3JcIlxuaW1wb3J0IHN0cmVhbSBmcm9tIFwibWl0aHJpbC9zdHJlYW1cIlxuaW1wb3J0IFN0cmVhbSBmcm9tIFwibWl0aHJpbC9zdHJlYW1cIlxuaW1wb3J0IHR5cGUgeyBDdXN0b21pemF0aW9uS2V5LCBUaGVtZUN1c3RvbWl6YXRpb25zLCBUaGVtZUtleSB9IGZyb20gXCIuLi8uLi9taXNjL1doaXRlbGFiZWxDdXN0b21pemF0aW9uc1wiXG5pbXBvcnQgeyBUaGVtZUNvbnRyb2xsZXIgfSBmcm9tIFwiLi4vLi4vZ3VpL1RoZW1lQ29udHJvbGxlclwiXG5pbXBvcnQgeyBFbnRpdHlDbGllbnQgfSBmcm9tIFwiLi4vLi4vYXBpL2NvbW1vbi9FbnRpdHlDbGllbnRcIlxuaW1wb3J0IHR5cGUgeyBMb2dpbkNvbnRyb2xsZXIgfSBmcm9tIFwiLi4vLi4vYXBpL21haW4vTG9naW5Db250cm9sbGVyXCJcblxuYXNzZXJ0TWFpbk9yTm9kZSgpXG5leHBvcnQgdHlwZSBDdXN0b21Db2xvciA9IHtcblx0bmFtZTogVGhlbWVLZXlcblx0dmFsdWU6IHN0cmluZ1xuXHRkZWZhdWx0VmFsdWU6IHN0cmluZ1xuXHR2YWxpZDogYm9vbGVhblxufVxuXG5leHBvcnQgY2xhc3MgQ3VzdG9tQ29sb3JzRWRpdG9yVmlld01vZGVsIHtcblx0cHJpdmF0ZSBfY3VzdG9taXphdGlvbnM6IFRoZW1lQ3VzdG9taXphdGlvbnNcblx0cHJpdmF0ZSByZWFkb25seSBfd2hpdGVsYWJlbENvbmZpZzogV2hpdGVsYWJlbENvbmZpZ1xuXHRwcml2YXRlIHJlYWRvbmx5IF93aGl0ZWxhYmVsRG9tYWluSW5mbzogRG9tYWluSW5mb1xuXHRwcml2YXRlIF9hY2NlbnRDb2xvciE6IHN0cmluZ1xuXHRwcml2YXRlIF9iYXNlVGhlbWUhOiBCYXNlVGhlbWVJZFxuXHRwcml2YXRlIHJlYWRvbmx5IF90aGVtZUNvbnRyb2xsZXI6IFRoZW1lQ29udHJvbGxlclxuXHRwcml2YXRlIHJlYWRvbmx5IF9lbnRpdHlDbGllbnQ6IEVudGl0eUNsaWVudFxuXHRwcml2YXRlIHJlYWRvbmx5IF9sb2dpbkNvbnRyb2xsZXI6IExvZ2luQ29udHJvbGxlclxuXHRwcml2YXRlIHJlYWRvbmx5IF90aGVtZUJlZm9yZVByZXZpZXc6IFRoZW1lXG5cdHJlYWRvbmx5IGJ1aWx0VGhlbWU6IFN0cmVhbTxUaGVtZT5cblxuXHRjb25zdHJ1Y3Rvcihcblx0XHRjdXJyZW50VGhlbWU6IFRoZW1lLFxuXHRcdHRoZW1lQ3VzdG9taXphdGlvbnM6IFRoZW1lQ3VzdG9taXphdGlvbnMsXG5cdFx0d2hpdGVsYWJlbENvbmZpZzogV2hpdGVsYWJlbENvbmZpZyxcblx0XHR3aGl0ZWxhYmVsRG9tYWluSW5mbzogRG9tYWluSW5mbyxcblx0XHR0aGVtZUNvbnRyb2xsZXI6IFRoZW1lQ29udHJvbGxlcixcblx0XHRlbnRpdHlDbGllbnQ6IEVudGl0eUNsaWVudCxcblx0XHRsb2dpbkNvbnRyb2xsZXI6IExvZ2luQ29udHJvbGxlcixcblx0KSB7XG5cdFx0dGhpcy5fdGhlbWVCZWZvcmVQcmV2aWV3ID0gT2JqZWN0LmZyZWV6ZShjdXJyZW50VGhlbWUpXG5cdFx0dGhpcy5fY3VzdG9taXphdGlvbnMgPSBjbG9uZSh0aGVtZUN1c3RvbWl6YXRpb25zKVxuXHRcdHRoaXMuX3doaXRlbGFiZWxEb21haW5JbmZvID0gd2hpdGVsYWJlbERvbWFpbkluZm9cblx0XHR0aGlzLl93aGl0ZWxhYmVsQ29uZmlnID0gd2hpdGVsYWJlbENvbmZpZ1xuXHRcdHRoaXMuX3RoZW1lQ29udHJvbGxlciA9IHRoZW1lQ29udHJvbGxlclxuXHRcdHRoaXMuX2VudGl0eUNsaWVudCA9IGVudGl0eUNsaWVudFxuXHRcdHRoaXMuX2xvZ2luQ29udHJvbGxlciA9IGxvZ2luQ29udHJvbGxlclxuXHRcdHRoaXMuYnVpbHRUaGVtZSA9IHN0cmVhbSgpXG5cdFx0Y29uc3QgYmFzZVRoZW1lSWQgPSB0aGVtZUN1c3RvbWl6YXRpb25zLmJhc2UgPz8gXCJsaWdodFwiXG5cblx0XHRjb25zdCBhY2NlbnRDb2xvciA9IHRoZW1lQ3VzdG9taXphdGlvbnMuY29udGVudF9hY2NlbnQgPz8gdGhpcy5fdGhlbWVDb250cm9sbGVyLmdldERlZmF1bHRUaGVtZSgpLmNvbnRlbnRfYWNjZW50XG5cblx0XHR0aGlzLmNoYW5nZUJhc2VUaGVtZShiYXNlVGhlbWVJZClcblx0XHR0aGlzLmNoYW5nZUFjY2VudENvbG9yKGFjY2VudENvbG9yKVxuXHR9XG5cblx0aW5pdCgpIHtcblx0XHR0aGlzLl9hcHBseUVkaXRlZFRoZW1lKClcblx0fVxuXG5cdGdldCBjdXN0b21Db2xvcnMoKTogUmVhZG9ubHlBcnJheTxDdXN0b21Db2xvcj4ge1xuXHRcdGNvbnN0IGJhc2UgPSB0aGlzLl90aGVtZUNvbnRyb2xsZXIuZ2V0QmFzZVRoZW1lKHRoaXMuYmFzZVRoZW1lSWQpXG5cblx0XHRyZXR1cm4gT2JqZWN0LmtleXMoYmFzZSlcblx0XHRcdC5tYXAoKGtleSkgPT4ga2V5IGFzIEN1c3RvbWl6YXRpb25LZXkpXG5cdFx0XHQuZmlsdGVyKChuYW1lKSA9PiAhdGhpcy5fc2hhbGxCZUV4Y2x1ZGVkKG5hbWUpKVxuXHRcdFx0Lm1hcCgoa2V5KSA9PiBrZXkgYXMgVGhlbWVLZXkpXG5cdFx0XHQuc29ydCgoYSwgYikgPT4gYS5sb2NhbGVDb21wYXJlKGIpKVxuXHRcdFx0Lm1hcCgoa2V5KSA9PiB7XG5cdFx0XHRcdGNvbnN0IHZhbHVlID0gdGhpcy5fY3VzdG9taXphdGlvbnNba2V5XSA/PyBcIlwiXG5cdFx0XHRcdC8vIEB0cy1pZ25vcmUgd2UgYWxyZWFkeSBjaGVja2VkIHRoYXQgaXQncyBzYWZlXG5cdFx0XHRcdGNvbnN0IGRlZmF1bHRWYWx1ZSA9IGJhc2Vba2V5XVxuXHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdG5hbWU6IGtleSxcblx0XHRcdFx0XHR2YWx1ZSxcblx0XHRcdFx0XHRkZWZhdWx0VmFsdWU6IGFzc2VydE5vdE51bGwoZGVmYXVsdFZhbHVlKSxcblx0XHRcdFx0XHR2YWxpZDogdGhpcy5faXNWYWxpZENvbG9yVmFsdWUodmFsdWUpLFxuXHRcdFx0XHR9XG5cdFx0XHR9KVxuXHR9XG5cblx0Z2V0IGFjY2VudENvbG9yKCk6IHN0cmluZyB7XG5cdFx0cmV0dXJuIHRoaXMuX2FjY2VudENvbG9yXG5cdH1cblxuXHRnZXQgY3VzdG9taXphdGlvbnMoKTogVGhlbWVDdXN0b21pemF0aW9ucyB7XG5cdFx0cmV0dXJuIHRoaXMuX2N1c3RvbWl6YXRpb25zXG5cdH1cblxuXHRnZXQgYmFzZVRoZW1lSWQoKTogQmFzZVRoZW1lSWQge1xuXHRcdHJldHVybiB0aGlzLl9iYXNlVGhlbWVcblx0fVxuXG5cdGdldERlZmF1bHRDb2xvcihjb2xvck5hbWU6IFRoZW1lS2V5KTogc3RyaW5nIHtcblx0XHRyZXR1cm4gYXNzZXJ0Tm90TnVsbCh0aGlzLl90aGVtZUNvbnRyb2xsZXIuZ2V0QmFzZVRoZW1lKHRoaXMuYmFzZVRoZW1lSWQpW2NvbG9yTmFtZV0pXG5cdH1cblxuXHRjaGFuZ2VBY2NlbnRDb2xvcihhY2NlbnRDb2xvcjogc3RyaW5nKSB7XG5cdFx0dGhpcy5fYWNjZW50Q29sb3IgPSBhY2NlbnRDb2xvclxuXHRcdHRoaXMuYWRkQ3VzdG9taXphdGlvbihcImxpc3RfYWNjZW50X2ZnXCIsIGFjY2VudENvbG9yKVxuXHRcdHRoaXMuYWRkQ3VzdG9taXphdGlvbihcImNvbnRlbnRfYWNjZW50XCIsIGFjY2VudENvbG9yKVxuXHRcdHRoaXMuYWRkQ3VzdG9taXphdGlvbihcImNvbnRlbnRfYnV0dG9uX3NlbGVjdGVkXCIsIGFjY2VudENvbG9yKVxuXHRcdHRoaXMuYWRkQ3VzdG9taXphdGlvbihcIm5hdmlnYXRpb25fYnV0dG9uX3NlbGVjdGVkXCIsIGFjY2VudENvbG9yKVxuXHRcdHRoaXMuYWRkQ3VzdG9taXphdGlvbihcImhlYWRlcl9idXR0b25fc2VsZWN0ZWRcIiwgYWNjZW50Q29sb3IpXG5cblx0XHR0aGlzLl9hcHBseUVkaXRlZFRoZW1lKClcblx0fVxuXG5cdGNoYW5nZUJhc2VUaGVtZShiYXNlVGhlbWVJZDogQmFzZVRoZW1lSWQpIHtcblx0XHR0aGlzLl9iYXNlVGhlbWUgPSBiYXNlVGhlbWVJZFxuXHRcdHRoaXMuYWRkQ3VzdG9taXphdGlvbihcImJhc2VcIiwgYmFzZVRoZW1lSWQpXG5cblx0XHR0aGlzLl9hcHBseUVkaXRlZFRoZW1lKClcblx0fVxuXG5cdC8qKlxuXHQgKiBUcnkgdG8gc2F2ZSBjaGFuZ2VzLiBpZiB0aGVyZSBhcmUgaW52YWxpZCBjb2xvciB2YWx1ZXMgaW4gdGhlIHRoZW1lIGRvZXNuJ3Qgc2F2ZSBhbmQgcmV0dXJucyBmYWxzZSwgZWxzZSBzYXZlcyBhbmQgcmV0dXJucyB0cnVlXG5cdCAqL1xuXHRhc3luYyBzYXZlKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuXHRcdGNvbnN0IGNvbG9ycyA9IE9iamVjdC5rZXlzKHRoaXMuY3VzdG9taXphdGlvbnMpLmZpbHRlcigobmFtZSkgPT4gbmFtZSAhPT0gXCJsb2dvXCIgJiYgbmFtZSAhPT0gXCJ0aGVtZUlkXCIgJiYgbmFtZSAhPT0gXCJiYXNlXCIpIGFzIEN1c3RvbWl6YXRpb25LZXlbXVxuXG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBjb2xvcnMubGVuZ3RoOyBpKyspIHtcblx0XHRcdGlmICghdGhpcy5faXNWYWxpZENvbG9yVmFsdWUodGhpcy5jdXN0b21pemF0aW9uc1tjb2xvcnNbaV1dID8/IFwiXCIpKSB7XG5cdFx0XHRcdHJldHVybiBmYWxzZVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHRoaXMuYWRkQ3VzdG9taXphdGlvbihcInRoZW1lSWRcIiwgdGhpcy5fd2hpdGVsYWJlbERvbWFpbkluZm8uZG9tYWluKVxuXHRcdHRoaXMuX3doaXRlbGFiZWxDb25maWcuanNvblRoZW1lID0gSlNPTi5zdHJpbmdpZnkodGhpcy5jdXN0b21pemF0aW9ucylcblx0XHRhd2FpdCB0aGlzLl9lbnRpdHlDbGllbnQudXBkYXRlKHRoaXMuX3doaXRlbGFiZWxDb25maWcpXG5cblx0XHRpZiAoIXRoaXMuX2xvZ2luQ29udHJvbGxlci5pc1doaXRlbGFiZWwoKSkge1xuXHRcdFx0YXdhaXQgdGhpcy5yZXNldEFjdGl2ZUNsaWVudFRoZW1lKClcblx0XHR9XG5cblx0XHRyZXR1cm4gdHJ1ZVxuXHR9XG5cblx0YXN5bmMgcmVzZXRBY3RpdmVDbGllbnRUaGVtZSgpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRhd2FpdCB0aGlzLl90aGVtZUNvbnRyb2xsZXIuYXBwbHlDdXN0b21pemF0aW9ucyhcblx0XHRcdGRvd25jYXN0KFxuXHRcdFx0XHRPYmplY3QuYXNzaWduKFxuXHRcdFx0XHRcdHt9LFxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdGJhc2U6IG51bGwsXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHR0aGlzLl90aGVtZUJlZm9yZVByZXZpZXcsXG5cdFx0XHRcdCksXG5cdFx0XHQpLFxuXHRcdFx0ZmFsc2UsXG5cdFx0KVxuXHR9XG5cblx0YWRkQ3VzdG9taXphdGlvbihuYW1lT2ZLZXk6IEN1c3RvbWl6YXRpb25LZXksIGNvbG9yVmFsdWU6IHN0cmluZykge1xuXHRcdC8vIEB0cy1pZ25vcmUgaXQncyBwcmV0dHkgaGFyZCB0byBkZWZpbmUgd2hhdCB3ZSB3YW50XG5cdFx0dGhpcy5jdXN0b21pemF0aW9uc1tuYW1lT2ZLZXldID0gY29sb3JWYWx1ZVxuXG5cdFx0dGhpcy5fYXBwbHlFZGl0ZWRUaGVtZSgpXG5cdH1cblxuXHRfaXNWYWxpZENvbG9yVmFsdWUoY29sb3JWYWx1ZTogc3RyaW5nKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIGlzVmFsaWRDb2xvckNvZGUoY29sb3JWYWx1ZS50cmltKCkpIHx8IGNvbG9yVmFsdWUudHJpbSgpID09PSBcIlwiXG5cdH1cblxuXHQvKipcblx0ICogVGhlc2UgdmFsdWVzIHNoYWxsIGJlIGV4Y2x1ZGVkIHdoZW4gcmVuZGVyaW5nIHRoZSBhZHZhbmNlZCBUZXh0RmllbGRzXG5cdCAqIEByZXR1cm4gYm9vbGVhbiwgdHJ1ZSBpZmYgcHJvdmlkZWQgcGFyYW1ldGVyICduYW1lJyBzaGFsbCBiZSBleGNsdWRlZFxuXHQgKi9cblx0X3NoYWxsQmVFeGNsdWRlZChuYW1lOiBDdXN0b21pemF0aW9uS2V5KTogYm9vbGVhbiB7XG5cdFx0Y29uc3QgZXhjbHVkZWRDb2xvcnMgPSBbXG5cdFx0XHRcImxvZ29cIixcblx0XHRcdFwidGhlbWVJZFwiLFxuXHRcdFx0XCJiYXNlXCIsXG5cdFx0XHRcImxpc3RfYWNjZW50X2ZnXCIsXG5cdFx0XHRcImNvbnRlbnRfYnV0dG9uX3NlbGVjdGVkXCIsXG5cdFx0XHRcIm5hdmlnYXRpb25fYnV0dG9uX3NlbGVjdGVkXCIsXG5cdFx0XHRcImhlYWRlcl9idXR0b25fc2VsZWN0ZWRcIixcblx0XHRcdFwiY29udGVudF9hY2NlbnRcIixcblx0XHRcdFwiY29udGVudF9hY2NlbnRfY3liZXJfbW9uZGF5XCIsXG5cdFx0XHRcImNvbnRlbnRfYmdfY3liZXJfbW9uZGF5XCIsXG5cdFx0XHRcImNvbnRlbnRfYm9yZGVyX2N5YmVyX21vbmRheVwiLFxuXHRcdF1cblx0XHRyZXR1cm4gZXhjbHVkZWRDb2xvcnMuaW5jbHVkZXMobmFtZSlcblx0fVxuXG5cdF9hcHBseUVkaXRlZFRoZW1lOiAoKSA9PiB2b2lkID0gZGVib3VuY2VTdGFydCgxMDAsICgpID0+IHtcblx0XHR0aGlzLl9yZW1vdmVFbXB0eUN1c3RvbWl6YXRpb25zKClcblxuXHRcdHRoaXMuX3RoZW1lQ29udHJvbGxlci5hcHBseUN1c3RvbWl6YXRpb25zKHRoaXMuX2ZpbHRlckFuZFJldHVybkN1c3RvbWl6YXRpb25zKCksIGZhbHNlKVxuXHR9KVxuXG5cdF9yZW1vdmVFbXB0eUN1c3RvbWl6YXRpb25zKCkge1xuXHRcdHRoaXMuX2N1c3RvbWl6YXRpb25zID0gZG93bmNhc3QoT2JqZWN0LmZyb21FbnRyaWVzKE9iamVjdC5lbnRyaWVzKHRoaXMuY3VzdG9taXphdGlvbnMpLmZpbHRlcigoW2ssIHZdKSA9PiB2ICE9PSBcIlwiKSkpXG5cdH1cblxuXHQvKipcblx0ICogIGZpbHRlcnMgb3V0IGFsbCBpbnZhbGlkIGNvbG9yIHZhbHVlcyBmcm9tIFRoZW1lQ3VzdG9taXphdGlvbnMgd2hpbHN0IGtlZXBpbmcgbG9nbywgYmFzZSBhbmQgdGhlbWVJZFxuXHQgKi9cblx0X2ZpbHRlckFuZFJldHVybkN1c3RvbWl6YXRpb25zKCk6IFRoZW1lQ3VzdG9taXphdGlvbnMge1xuXHRcdGNvbnN0IGNvbG9yVmFsdWVzID0gT2JqZWN0LmVudHJpZXModGhpcy5jdXN0b21pemF0aW9ucykuZmlsdGVyKChbbiwgdl0pID0+IG4gIT09IFwidGhlbWVJZFwiICYmIG4gIT09IFwiYmFzZVwiICYmIG4gIT09IFwibG9nb1wiKVxuXHRcdGNvbnN0IGZpbHRlcmVkQ29sb3JWYWx1ZXMgPSBjb2xvclZhbHVlcy5maWx0ZXIoKFtuLCB2XSkgPT4gdGhpcy5faXNWYWxpZENvbG9yVmFsdWUoZG93bmNhc3QodikpKVxuXHRcdGZvciAoY29uc3QgW24sIHZdIG9mIE9iamVjdC5lbnRyaWVzKHRoaXMuY3VzdG9taXphdGlvbnMpKSB7XG5cdFx0XHRpZiAobiA9PT0gXCJ0aGVtZUlkXCIgfHwgbiA9PT0gXCJiYXNlXCIgfHwgbiA9PT0gXCJsb2dvXCIpIHtcblx0XHRcdFx0ZmlsdGVyZWRDb2xvclZhbHVlcy5wdXNoKFtuLCB2XSlcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIGRvd25jYXN0KE9iamVjdC5mcm9tRW50cmllcyhmaWx0ZXJlZENvbG9yVmFsdWVzKSlcblx0fVxufVxuIiwiaW1wb3J0IHsgbGFuZyB9IGZyb20gXCIuLi8uLi9taXNjL0xhbmd1YWdlVmlld01vZGVsXCJcbmltcG9ydCB7IERpYWxvZyB9IGZyb20gXCIuLi8uLi9ndWkvYmFzZS9EaWFsb2dcIlxuaW1wb3J0IHsgYXNzZXJ0Tm90TnVsbCwgY29udGFpbnMsIGRvd25jYXN0LCB1aW50OEFycmF5VG9CYXNlNjQsIHV0ZjhVaW50OEFycmF5VG9TdHJpbmcgfSBmcm9tIFwiQHR1dGFvL3R1dGFub3RhLXV0aWxzXCJcbmltcG9ydCB7IEljb25zIH0gZnJvbSBcIi4uLy4uL2d1aS9iYXNlL2ljb25zL0ljb25zLmpzXCJcbmltcG9ydCB7IEFMTE9XRURfSU1BR0VfRk9STUFUUywgTUFYX0xPR09fU0laRSB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vYXBpL2NvbW1vbi9UdXRhbm90YUNvbnN0YW50c1wiXG5pbXBvcnQgbSwgeyBDaGlsZHJlbiwgQ29tcG9uZW50LCBWbm9kZSB9IGZyb20gXCJtaXRocmlsXCJcbmltcG9ydCB7IFRleHRGaWVsZCwgVGV4dEZpZWxkQXR0cnMgfSBmcm9tIFwiLi4vLi4vZ3VpL2Jhc2UvVGV4dEZpZWxkLmpzXCJcbmltcG9ydCAqIGFzIEVkaXRDdXN0b21Db2xvcnNEaWFsb2cgZnJvbSBcIi4vRWRpdEN1c3RvbUNvbG9yc0RpYWxvZ1wiXG5pbXBvcnQgeyBDdXN0b21Db2xvcnNFZGl0b3JWaWV3TW9kZWwgfSBmcm9tIFwiLi9DdXN0b21Db2xvcnNFZGl0b3JWaWV3TW9kZWxcIlxuaW1wb3J0IHR5cGUgeyBEb21haW5JbmZvLCBXaGl0ZWxhYmVsQ29uZmlnIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9hcGkvZW50aXRpZXMvc3lzL1R5cGVSZWZzLmpzXCJcbmltcG9ydCB0eXBlIHsgVGhlbWVDdXN0b21pemF0aW9ucyB9IGZyb20gXCIuLi8uLi9taXNjL1doaXRlbGFiZWxDdXN0b21pemF0aW9ucy5qc1wiXG5pbXBvcnQgeyBsb2NhdG9yIH0gZnJvbSBcIi4uLy4uL2FwaS9tYWluL0NvbW1vbkxvY2F0b3IuanNcIlxuaW1wb3J0IHsgc2hvd0ZpbGVDaG9vc2VyIH0gZnJvbSBcIi4uLy4uL2ZpbGUvRmlsZUNvbnRyb2xsZXIuanNcIlxuaW1wb3J0IHsgSWNvbkJ1dHRvbiB9IGZyb20gXCIuLi8uLi9ndWkvYmFzZS9JY29uQnV0dG9uLmpzXCJcbmltcG9ydCB7IEJ1dHRvblNpemUgfSBmcm9tIFwiLi4vLi4vZ3VpL2Jhc2UvQnV0dG9uU2l6ZS5qc1wiXG5cbmV4cG9ydCB0eXBlIFdoaXRlbGFiZWxEYXRhID0ge1xuXHRjdXN0b21UaGVtZTogVGhlbWVDdXN0b21pemF0aW9uc1xuXHR3aGl0ZWxhYmVsQ29uZmlnOiBXaGl0ZWxhYmVsQ29uZmlnXG5cdHdoaXRlbGFiZWxEb21haW5JbmZvOiBEb21haW5JbmZvXG59XG5leHBvcnQgdHlwZSBXaGl0ZWxhYmVsVGhlbWVTZXR0aW5nc0F0dHJzID0ge1xuXHR3aGl0ZWxhYmVsRGF0YTogbnVsbCB8IFdoaXRlbGFiZWxEYXRhXG59XG5cbmV4cG9ydCBjbGFzcyBXaGl0ZWxhYmVsVGhlbWVTZXR0aW5ncyBpbXBsZW1lbnRzIENvbXBvbmVudDxXaGl0ZWxhYmVsVGhlbWVTZXR0aW5nc0F0dHJzPiB7XG5cdHZpZXcodm5vZGU6IFZub2RlPFdoaXRlbGFiZWxUaGVtZVNldHRpbmdzQXR0cnM+KTogQ2hpbGRyZW4ge1xuXHRcdGNvbnN0IHsgd2hpdGVsYWJlbERhdGEgfSA9IHZub2RlLmF0dHJzXG5cdFx0cmV0dXJuIFt0aGlzLnJlbmRlckN1c3RvbUNvbG9yc0ZpZWxkKHdoaXRlbGFiZWxEYXRhKSwgdGhpcy5yZW5kZXJDdXN0b21Mb2dvRmllbGQod2hpdGVsYWJlbERhdGEpXVxuXHR9XG5cblx0cHJpdmF0ZSByZW5kZXJDdXN0b21Db2xvcnNGaWVsZChkYXRhOiBXaGl0ZWxhYmVsRGF0YSB8IG51bGwpOiBDaGlsZHJlbiB7XG5cdFx0cmV0dXJuIG0oVGV4dEZpZWxkLCB7XG5cdFx0XHRsYWJlbDogXCJjdXN0b21Db2xvcnNfbGFiZWxcIixcblx0XHRcdHZhbHVlOiB0aGlzLmFyZUN1c3RvbUNvbG9yc0RlZmluZWQoZGF0YT8uY3VzdG9tVGhlbWUgPz8gbnVsbCkgPyBsYW5nLmdldChcImFjdGl2YXRlZF9sYWJlbFwiKSA6IGxhbmcuZ2V0KFwiZGVhY3RpdmF0ZWRfbGFiZWxcIiksXG5cdFx0XHRpc1JlYWRPbmx5OiB0cnVlLFxuXHRcdFx0aW5qZWN0aW9uc1JpZ2h0OiAoKSA9PiAoZGF0YSA/IHRoaXMucmVuZGVyQ3VzdG9tQ29sb3JzRmllbGRCdXR0b25zKGRhdGEpIDogbnVsbCksXG5cdFx0fSlcblx0fVxuXG5cdHByaXZhdGUgcmVuZGVyQ3VzdG9tQ29sb3JzRmllbGRCdXR0b25zKHdoaXRlbGFiZWxEYXRhOiBXaGl0ZWxhYmVsRGF0YSk6IENoaWxkcmVuIHtcblx0XHRyZXR1cm4gW1xuXHRcdFx0dGhpcy5hcmVDdXN0b21Db2xvcnNEZWZpbmVkKHdoaXRlbGFiZWxEYXRhLmN1c3RvbVRoZW1lKVxuXHRcdFx0XHQ/IG0oSWNvbkJ1dHRvbiwge1xuXHRcdFx0XHRcdFx0dGl0bGU6IFwiZGVhY3RpdmF0ZV9hY3Rpb25cIixcblx0XHRcdFx0XHRcdGNsaWNrOiAoKSA9PiB0aGlzLmRlYWN0aXZhdGVDdXN0b21Db2xvcnMod2hpdGVsYWJlbERhdGEpLFxuXHRcdFx0XHRcdFx0aWNvbjogSWNvbnMuQ2FuY2VsLFxuXHRcdFx0XHRcdFx0c2l6ZTogQnV0dG9uU2l6ZS5Db21wYWN0LFxuXHRcdFx0XHQgIH0pXG5cdFx0XHRcdDogbnVsbCxcblx0XHRcdG0oSWNvbkJ1dHRvbiwge1xuXHRcdFx0XHR0aXRsZTogXCJlZGl0X2FjdGlvblwiLFxuXHRcdFx0XHRjbGljazogKCkgPT4gdGhpcy5zaG93Q3VzdG9tQ29sb3JzRGlhbG9nKHdoaXRlbGFiZWxEYXRhKSxcblx0XHRcdFx0aWNvbjogSWNvbnMuRWRpdCxcblx0XHRcdFx0c2l6ZTogQnV0dG9uU2l6ZS5Db21wYWN0LFxuXHRcdFx0fSksXG5cdFx0XVxuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyBkZWFjdGl2YXRlQ3VzdG9tQ29sb3JzKHsgY3VzdG9tVGhlbWUsIHdoaXRlbGFiZWxDb25maWcsIHdoaXRlbGFiZWxEb21haW5JbmZvIH06IFdoaXRlbGFiZWxEYXRhKSB7XG5cdFx0Y29uc3QgY29uZmlybWVkID0gYXdhaXQgRGlhbG9nLmNvbmZpcm0oXCJjb25maXJtRGVhY3RpdmF0ZUN1c3RvbUNvbG9yc19tc2dcIilcblxuXHRcdGlmIChjb25maXJtZWQpIHtcblx0XHRcdGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKGN1c3RvbVRoZW1lKSkge1xuXHRcdFx0XHRpZiAoa2V5ICE9PSBcImxvZ29cIikge1xuXHRcdFx0XHRcdGRlbGV0ZSBkb3duY2FzdChjdXN0b21UaGVtZSlba2V5XVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHR0aGlzLnNhdmVDdXN0b21UaGVtZShjdXN0b21UaGVtZSwgd2hpdGVsYWJlbENvbmZpZywgd2hpdGVsYWJlbERvbWFpbkluZm8pXG5cblx0XHRcdGlmIChsb2NhdG9yLmxvZ2lucy5pc1doaXRlbGFiZWwoKSkge1xuXHRcdFx0XHRhd2FpdCBsb2NhdG9yLnRoZW1lQ29udHJvbGxlci5hcHBseUN1c3RvbWl6YXRpb25zKGN1c3RvbVRoZW1lKVxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgcmVuZGVyQ3VzdG9tTG9nb0ZpZWxkKGRhdGE6IFdoaXRlbGFiZWxEYXRhIHwgbnVsbCk6IENoaWxkcmVuIHtcblx0XHRjb25zdCBjdXN0b21Mb2dvVGV4dGZpZWxkQXR0cnM6IFRleHRGaWVsZEF0dHJzID0ge1xuXHRcdFx0bGFiZWw6IFwiY3VzdG9tTG9nb19sYWJlbFwiLFxuXHRcdFx0aGVscExhYmVsOiAoKSA9PiBsYW5nLmdldChcImN1c3RvbUxvZ29JbmZvX21zZ1wiKSxcblx0XHRcdHZhbHVlOiBsYW5nLmdldChkYXRhPy5jdXN0b21UaGVtZS5sb2dvICE9IG51bGwgPyBcImFjdGl2YXRlZF9sYWJlbFwiIDogXCJkZWFjdGl2YXRlZF9sYWJlbFwiKSxcblx0XHRcdGlzUmVhZE9ubHk6IHRydWUsXG5cdFx0XHRpbmplY3Rpb25zUmlnaHQ6ICgpID0+IChkYXRhID8gdGhpcy5yZW5kZXJDdXN0b21Mb2dvRmllbGRCdXR0b25zKGRhdGEpIDogbnVsbCksXG5cdFx0fVxuXHRcdHJldHVybiBtKFRleHRGaWVsZCwgY3VzdG9tTG9nb1RleHRmaWVsZEF0dHJzKVxuXHR9XG5cblx0cHJpdmF0ZSByZW5kZXJDdXN0b21Mb2dvRmllbGRCdXR0b25zKHdoaXRlbGFiZWxEYXRhOiBXaGl0ZWxhYmVsRGF0YSk6IENoaWxkcmVuIHtcblx0XHRyZXR1cm4gW1xuXHRcdFx0d2hpdGVsYWJlbERhdGEuY3VzdG9tVGhlbWUubG9nb1xuXHRcdFx0XHQ/IG0oSWNvbkJ1dHRvbiwge1xuXHRcdFx0XHRcdFx0dGl0bGU6IFwiZGVhY3RpdmF0ZV9hY3Rpb25cIixcblx0XHRcdFx0XHRcdGNsaWNrOiBhc3luYyAoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuZGVhY3RpdmF0ZUN1c3RvbUxvZ28od2hpdGVsYWJlbERhdGEpXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0aWNvbjogSWNvbnMuQ2FuY2VsLFxuXHRcdFx0XHRcdFx0c2l6ZTogQnV0dG9uU2l6ZS5Db21wYWN0LFxuXHRcdFx0XHQgIH0pXG5cdFx0XHRcdDogbnVsbCxcblx0XHRcdG0oSWNvbkJ1dHRvbiwge1xuXHRcdFx0XHR0aXRsZTogXCJlZGl0X2FjdGlvblwiLFxuXHRcdFx0XHRjbGljazogKCkgPT4gdGhpcy5lZGl0Q3VzdG9tTG9nbyh3aGl0ZWxhYmVsRGF0YSksXG5cdFx0XHRcdGljb246IEljb25zLkVkaXQsXG5cdFx0XHRcdHNpemU6IEJ1dHRvblNpemUuQ29tcGFjdCxcblx0XHRcdH0pLFxuXHRcdF1cblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgZWRpdEN1c3RvbUxvZ28oeyBjdXN0b21UaGVtZSwgd2hpdGVsYWJlbENvbmZpZywgd2hpdGVsYWJlbERvbWFpbkluZm8gfTogV2hpdGVsYWJlbERhdGEpIHtcblx0XHRjb25zdCBmaWxlcyA9IGF3YWl0IHNob3dGaWxlQ2hvb3NlcihmYWxzZSlcblx0XHRsZXQgZXh0ZW5zaW9uID0gZmlsZXNbMF0ubmFtZS50b0xvd2VyQ2FzZSgpLnN1YnN0cmluZyhmaWxlc1swXS5uYW1lLmxhc3RJbmRleE9mKFwiLlwiKSArIDEpXG5cblx0XHRpZiAoZmlsZXNbMF0uc2l6ZSA+IE1BWF9MT0dPX1NJWkUgfHwgIWNvbnRhaW5zKEFMTE9XRURfSU1BR0VfRk9STUFUUywgZXh0ZW5zaW9uKSkge1xuXHRcdFx0RGlhbG9nLm1lc3NhZ2UoXCJjdXN0b21Mb2dvSW5mb19tc2dcIilcblx0XHR9IGVsc2Uge1xuXHRcdFx0bGV0IGltYWdlRGF0YTogc3RyaW5nXG5cblx0XHRcdGlmIChleHRlbnNpb24gPT09IFwic3ZnXCIpIHtcblx0XHRcdFx0aW1hZ2VEYXRhID0gdXRmOFVpbnQ4QXJyYXlUb1N0cmluZyhmaWxlc1swXS5kYXRhKVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y29uc3QgZXh0ID0gZXh0ZW5zaW9uID09PSBcImpwZWdcIiA/IFwianBnXCIgOiBleHRlbnNpb25cblx0XHRcdFx0Y29uc3QgYjY0ID0gdWludDhBcnJheVRvQmFzZTY0KGZpbGVzWzBdLmRhdGEpXG5cdFx0XHRcdGltYWdlRGF0YSA9IGA8aW1nIHNyYz1cImRhdGE6aW1hZ2UvJHtleHR9O2Jhc2U2NCwke2I2NH1cIj5gXG5cdFx0XHR9XG5cblx0XHRcdGN1c3RvbVRoZW1lLmxvZ28gPSBpbWFnZURhdGFcblx0XHRcdHRoaXMuc2F2ZUN1c3RvbVRoZW1lKGN1c3RvbVRoZW1lLCB3aGl0ZWxhYmVsQ29uZmlnLCB3aGl0ZWxhYmVsRG9tYWluSW5mbylcblxuXHRcdFx0aWYgKGxvY2F0b3IubG9naW5zLmlzV2hpdGVsYWJlbCgpKSB7XG5cdFx0XHRcdGF3YWl0IGxvY2F0b3IudGhlbWVDb250cm9sbGVyLmFwcGx5Q3VzdG9taXphdGlvbnMoY3VzdG9tVGhlbWUpXG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyBkZWFjdGl2YXRlQ3VzdG9tTG9nbyh7IGN1c3RvbVRoZW1lLCB3aGl0ZWxhYmVsQ29uZmlnLCB3aGl0ZWxhYmVsRG9tYWluSW5mbyB9OiBXaGl0ZWxhYmVsRGF0YSkge1xuXHRcdGNvbnN0IGNvbmZpcm1lZCA9IGF3YWl0IERpYWxvZy5jb25maXJtKFwiY29uZmlybURlYWN0aXZhdGVDdXN0b21Mb2dvX21zZ1wiKVxuXG5cdFx0aWYgKGNvbmZpcm1lZCkge1xuXHRcdFx0ZGVsZXRlIGN1c3RvbVRoZW1lLmxvZ29cblx0XHRcdHRoaXMuc2F2ZUN1c3RvbVRoZW1lKGN1c3RvbVRoZW1lLCB3aGl0ZWxhYmVsQ29uZmlnLCB3aGl0ZWxhYmVsRG9tYWluSW5mbylcblxuXHRcdFx0aWYgKGxvY2F0b3IubG9naW5zLmlzV2hpdGVsYWJlbCgpKSB7XG5cdFx0XHRcdGF3YWl0IGxvY2F0b3IudGhlbWVDb250cm9sbGVyLmFwcGx5Q3VzdG9taXphdGlvbnMoY3VzdG9tVGhlbWUpXG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyBzaG93Q3VzdG9tQ29sb3JzRGlhbG9nKHsgY3VzdG9tVGhlbWUsIHdoaXRlbGFiZWxDb25maWcsIHdoaXRlbGFiZWxEb21haW5JbmZvIH06IFdoaXRlbGFiZWxEYXRhKSB7XG5cdFx0Y29uc3QgY3VycmVudFRoZW1lID0gbG9jYXRvci50aGVtZUNvbnRyb2xsZXIuZ2V0Q3VycmVudFRoZW1lKClcblx0XHRjb25zdCB2aWV3TW9kZWwgPSBuZXcgQ3VzdG9tQ29sb3JzRWRpdG9yVmlld01vZGVsKFxuXHRcdFx0Y3VycmVudFRoZW1lLFxuXHRcdFx0Y3VzdG9tVGhlbWUsXG5cdFx0XHR3aGl0ZWxhYmVsQ29uZmlnLFxuXHRcdFx0YXNzZXJ0Tm90TnVsbCh3aGl0ZWxhYmVsRG9tYWluSW5mbyksXG5cdFx0XHRsb2NhdG9yLnRoZW1lQ29udHJvbGxlcixcblx0XHRcdGxvY2F0b3IuZW50aXR5Q2xpZW50LFxuXHRcdFx0bG9jYXRvci5sb2dpbnMsXG5cdFx0KVxuXHRcdEVkaXRDdXN0b21Db2xvcnNEaWFsb2cuc2hvdyh2aWV3TW9kZWwpXG5cdH1cblxuXHRwcml2YXRlIGFyZUN1c3RvbUNvbG9yc0RlZmluZWQodGhlbWU6IFRoZW1lQ3VzdG9taXphdGlvbnMgfCBudWxsKTogYm9vbGVhbiB7XG5cdFx0aWYgKHRoZW1lKSB7XG5cdFx0XHRyZXR1cm4gT2JqZWN0LmtleXModGhlbWUpLnNvbWUoXG5cdFx0XHRcdChrZXkpID0+XG5cdFx0XHRcdFx0a2V5ICE9PSBcImxvZ29cIiAmJlxuXHRcdFx0XHRcdC8vIEB0cy1pZ25vcmVcblx0XHRcdFx0XHR0aGVtZT8uW2tleV0sXG5cdFx0XHQpXG5cdFx0fSBlbHNlIHtcblx0XHRcdHJldHVybiBmYWxzZVxuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgc2F2ZUN1c3RvbVRoZW1lKGN1c3RvbVRoZW1lOiBUaGVtZUN1c3RvbWl6YXRpb25zLCB3aGl0ZWxhYmVsQ29uZmlnOiBXaGl0ZWxhYmVsQ29uZmlnLCB3aGl0ZWxhYmVsRG9tYWluSW5mbzogRG9tYWluSW5mbykge1xuXHRcdHdoaXRlbGFiZWxDb25maWcuanNvblRoZW1lID0gSlNPTi5zdHJpbmdpZnkoY3VzdG9tVGhlbWUpXG5cdFx0bG9jYXRvci5lbnRpdHlDbGllbnQudXBkYXRlKHdoaXRlbGFiZWxDb25maWcpXG5cdFx0Y3VzdG9tVGhlbWUudGhlbWVJZCA9IHdoaXRlbGFiZWxEb21haW5JbmZvLmRvbWFpblxuXHR9XG59XG4iLCJpbXBvcnQgeyBEaWFsb2cgfSBmcm9tIFwiLi4vLi4vZ3VpL2Jhc2UvRGlhbG9nXCJcbmltcG9ydCB7IGxhbmcgfSBmcm9tIFwiLi4vLi4vbWlzYy9MYW5ndWFnZVZpZXdNb2RlbFwiXG5pbXBvcnQgbSwgeyBDaGlsZHJlbiwgQ29tcG9uZW50LCBWbm9kZSB9IGZyb20gXCJtaXRocmlsXCJcbmltcG9ydCB7IFRleHRGaWVsZCwgVGV4dEZpZWxkVHlwZSB9IGZyb20gXCIuLi8uLi9ndWkvYmFzZS9UZXh0RmllbGQuanNcIlxuaW1wb3J0IHsgSWNvbnMgfSBmcm9tIFwiLi4vLi4vZ3VpL2Jhc2UvaWNvbnMvSWNvbnNcIlxuaW1wb3J0IHsgSWNvbkJ1dHRvbiB9IGZyb20gXCIuLi8uLi9ndWkvYmFzZS9JY29uQnV0dG9uLmpzXCJcbmltcG9ydCB7IEJ1dHRvblNpemUgfSBmcm9tIFwiLi4vLi4vZ3VpL2Jhc2UvQnV0dG9uU2l6ZS5qc1wiXG5cbmV4cG9ydCB0eXBlIFdoaXRlbGFiZWxJbXByaW50QW5kUHJpdmFjeVNldHRpbmdzQXR0cnMgPSB7XG5cdHByaXZhY3lTdGF0ZW1lbnRVcmw6IHN0cmluZ1xuXHRvblByaXZhY3lTdGF0ZW1lbnRVcmxDaGFuZ2VkOiAoKHByaXZhY3lTdGF0ZW1lbnRVcmw6IHN0cmluZykgPT4gdW5rbm93bikgfCBudWxsXG5cdGltcHJpbnRVcmw6IHN0cmluZ1xuXHRvbkltcHJpbnRVcmxDaGFuZ2VkOiAoKGltcHJpbnRVcmw6IHN0cmluZykgPT4gdW5rbm93bikgfCBudWxsXG59XG5cbmV4cG9ydCBjbGFzcyBXaGl0ZWxhYmVsSW1wcmludEFuZFByaXZhY3lTZXR0aW5ncyBpbXBsZW1lbnRzIENvbXBvbmVudDxXaGl0ZWxhYmVsSW1wcmludEFuZFByaXZhY3lTZXR0aW5nc0F0dHJzPiB7XG5cdHZpZXcodm5vZGU6IFZub2RlPFdoaXRlbGFiZWxJbXByaW50QW5kUHJpdmFjeVNldHRpbmdzQXR0cnM+KTogQ2hpbGRyZW4ge1xuXHRcdGNvbnN0IHsgcHJpdmFjeVN0YXRlbWVudFVybCwgb25Qcml2YWN5U3RhdGVtZW50VXJsQ2hhbmdlZCwgaW1wcmludFVybCwgb25JbXByaW50VXJsQ2hhbmdlZCB9ID0gdm5vZGUuYXR0cnNcblx0XHRyZXR1cm4gW1xuXHRcdFx0dGhpcy5yZW5kZXJXaGl0ZWxhYmVsSW1wcmludFNldHRpbmcoaW1wcmludFVybCwgb25JbXByaW50VXJsQ2hhbmdlZCksXG5cdFx0XHR0aGlzLnJlbmRlclByaXZhY3lQb2xpY3lTZXR0aW5nKHByaXZhY3lTdGF0ZW1lbnRVcmwsIG9uUHJpdmFjeVN0YXRlbWVudFVybENoYW5nZWQpLFxuXHRcdF1cblx0fVxuXG5cdHByaXZhdGUgcmVuZGVyUHJpdmFjeVBvbGljeVNldHRpbmcocHJpdmFjeVN0YXRlbWVudFVybDogc3RyaW5nLCBvblByaXZhY3lTdGF0ZW1lbnRVcmxDaGFuZ2VkOiAoKGFyZzA6IHN0cmluZykgPT4gdW5rbm93bikgfCBudWxsKTogQ2hpbGRyZW4ge1xuXHRcdHJldHVybiBtKFRleHRGaWVsZCwge1xuXHRcdFx0bGFiZWw6IFwicHJpdmFjeVBvbGljeVVybF9sYWJlbFwiLFxuXHRcdFx0dmFsdWU6IHByaXZhY3lTdGF0ZW1lbnRVcmwsXG5cdFx0XHRpc1JlYWRPbmx5OiB0cnVlLFxuXHRcdFx0aW5qZWN0aW9uc1JpZ2h0OiAoKSA9PlxuXHRcdFx0XHRvblByaXZhY3lTdGF0ZW1lbnRVcmxDaGFuZ2VkXG5cdFx0XHRcdFx0PyBtKEljb25CdXR0b24sIHtcblx0XHRcdFx0XHRcdFx0dGl0bGU6IFwiZWRpdF9hY3Rpb25cIixcblx0XHRcdFx0XHRcdFx0Y2xpY2s6ICgpID0+IHRoaXMuZWRpdFByaXZhY3lTdGF0ZW1lbnRVcmwocHJpdmFjeVN0YXRlbWVudFVybCwgb25Qcml2YWN5U3RhdGVtZW50VXJsQ2hhbmdlZCksXG5cdFx0XHRcdFx0XHRcdGljb246IEljb25zLkVkaXQsXG5cdFx0XHRcdFx0XHRcdHNpemU6IEJ1dHRvblNpemUuQ29tcGFjdCxcblx0XHRcdFx0XHQgIH0pXG5cdFx0XHRcdFx0OiBudWxsLFxuXHRcdH0pXG5cdH1cblxuXHRwcml2YXRlIGVkaXRQcml2YWN5U3RhdGVtZW50VXJsKHByaXZhY3lTdGF0ZW1lbnRVcmw6IHN0cmluZywgb25Qcml2YWN5U3RhdGVtZW50VXJsQ2hhbmdlZDogKGFyZzA6IHN0cmluZykgPT4gdW5rbm93bikge1xuXHRcdGxldCBkaWFsb2cgPSBEaWFsb2cuc2hvd0FjdGlvbkRpYWxvZyh7XG5cdFx0XHR0aXRsZTogXCJwcml2YWN5TGlua19sYWJlbFwiLFxuXHRcdFx0Y2hpbGQ6IHtcblx0XHRcdFx0dmlldzogKCkgPT5cblx0XHRcdFx0XHRtKFRleHRGaWVsZCwge1xuXHRcdFx0XHRcdFx0bGFiZWw6IFwicHJpdmFjeVBvbGljeVVybF9sYWJlbFwiLFxuXHRcdFx0XHRcdFx0dmFsdWU6IHByaXZhY3lTdGF0ZW1lbnRVcmwsXG5cdFx0XHRcdFx0XHR0eXBlOiBUZXh0RmllbGRUeXBlLlVybCxcblx0XHRcdFx0XHRcdG9uaW5wdXQ6ICh2YWx1ZSkgPT4gKHByaXZhY3lTdGF0ZW1lbnRVcmwgPSB2YWx1ZS50cmltKCkpLFxuXHRcdFx0XHRcdH0pLFxuXHRcdFx0fSxcblx0XHRcdGFsbG93T2tXaXRoUmV0dXJuOiB0cnVlLFxuXHRcdFx0b2tBY3Rpb246IChvaykgPT4ge1xuXHRcdFx0XHRpZiAob2spIHtcblx0XHRcdFx0XHRvblByaXZhY3lTdGF0ZW1lbnRVcmxDaGFuZ2VkKHByaXZhY3lTdGF0ZW1lbnRVcmwpXG5cdFx0XHRcdFx0ZGlhbG9nLmNsb3NlKClcblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHR9KVxuXHRcdHJldHVybiBwcml2YWN5U3RhdGVtZW50VXJsXG5cdH1cblxuXHRwcml2YXRlIHJlbmRlcldoaXRlbGFiZWxJbXByaW50U2V0dGluZyhpbXByaW50VXJsOiBzdHJpbmcsIG9uSW1wcmludFVybENoYW5nZWQ6ICgoaW1wcmludFVybDogc3RyaW5nKSA9PiB1bmtub3duKSB8IG51bGwpOiBDaGlsZHJlbiB7XG5cdFx0cmV0dXJuIG0oVGV4dEZpZWxkLCB7XG5cdFx0XHRsYWJlbDogXCJpbXByaW50VXJsX2xhYmVsXCIsXG5cdFx0XHR2YWx1ZTogaW1wcmludFVybCxcblx0XHRcdGlzUmVhZE9ubHk6IHRydWUsXG5cdFx0XHRpbmplY3Rpb25zUmlnaHQ6ICgpID0+XG5cdFx0XHRcdG9uSW1wcmludFVybENoYW5nZWRcblx0XHRcdFx0XHQ/IG0oSWNvbkJ1dHRvbiwge1xuXHRcdFx0XHRcdFx0XHR0aXRsZTogXCJlZGl0X2FjdGlvblwiLFxuXHRcdFx0XHRcdFx0XHRjbGljazogKCkgPT4gdGhpcy5zaG93RWRpdEltcHJpbnREaWFsb2coaW1wcmludFVybCwgb25JbXByaW50VXJsQ2hhbmdlZCksXG5cdFx0XHRcdFx0XHRcdGljb246IEljb25zLkVkaXQsXG5cdFx0XHRcdFx0XHRcdHNpemU6IEJ1dHRvblNpemUuQ29tcGFjdCxcblx0XHRcdFx0XHQgIH0pXG5cdFx0XHRcdFx0OiBudWxsLFxuXHRcdH0pXG5cdH1cblxuXHRwcml2YXRlIHNob3dFZGl0SW1wcmludERpYWxvZyhpbXByaW50VXJsOiBzdHJpbmcsIG9uSW1wcmludFVybENoYW5nZWQ6IChpbXByaW50VXJsOiBzdHJpbmcpID0+IHVua25vd24pIHtcblx0XHRjb25zdCBkaWFsb2cgPSBEaWFsb2cuc2hvd0FjdGlvbkRpYWxvZyh7XG5cdFx0XHR0aXRsZTogXCJpbXByaW50VXJsX2xhYmVsXCIsXG5cdFx0XHRjaGlsZDoge1xuXHRcdFx0XHR2aWV3OiAoKSA9PlxuXHRcdFx0XHRcdG0oVGV4dEZpZWxkLCB7XG5cdFx0XHRcdFx0XHRsYWJlbDogXCJpbXByaW50VXJsX2xhYmVsXCIsXG5cdFx0XHRcdFx0XHR2YWx1ZTogaW1wcmludFVybCxcblx0XHRcdFx0XHRcdHR5cGU6IFRleHRGaWVsZFR5cGUuVXJsLFxuXHRcdFx0XHRcdFx0b25pbnB1dDogKHZhbHVlKSA9PiAoaW1wcmludFVybCA9IHZhbHVlLnRyaW0oKSksXG5cdFx0XHRcdFx0fSksXG5cdFx0XHR9LFxuXHRcdFx0YWxsb3dPa1dpdGhSZXR1cm46IHRydWUsXG5cdFx0XHRva0FjdGlvbjogKG9rKSA9PiB7XG5cdFx0XHRcdGlmIChvaykge1xuXHRcdFx0XHRcdG9uSW1wcmludFVybENoYW5nZWQoaW1wcmludFVybClcblx0XHRcdFx0XHRkaWFsb2cuY2xvc2UoKVxuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdH0pXG5cdFx0cmV0dXJuIGltcHJpbnRVcmxcblx0fVxufVxuIiwiaW1wb3J0IG0sIHsgQ2hpbGRyZW4sIENvbXBvbmVudCwgVm5vZGUgfSBmcm9tIFwibWl0aHJpbFwiXG5pbXBvcnQgdHlwZSB7IFNlbGVjdG9ySXRlbUxpc3QgfSBmcm9tIFwiLi4vLi4vZ3VpL2Jhc2UvRHJvcERvd25TZWxlY3Rvci5qc1wiXG5pbXBvcnQgeyBEcm9wRG93blNlbGVjdG9yIH0gZnJvbSBcIi4uLy4uL2d1aS9iYXNlL0Ryb3BEb3duU2VsZWN0b3IuanNcIlxuaW1wb3J0IHsgRGlhbG9nIH0gZnJvbSBcIi4uLy4uL2d1aS9iYXNlL0RpYWxvZ1wiXG5pbXBvcnQgeyBJY29ucyB9IGZyb20gXCIuLi8uLi9ndWkvYmFzZS9pY29ucy9JY29uc1wiXG5pbXBvcnQgeyBUZXh0RmllbGQgfSBmcm9tIFwiLi4vLi4vZ3VpL2Jhc2UvVGV4dEZpZWxkLmpzXCJcbmltcG9ydCB7IEljb25CdXR0b24gfSBmcm9tIFwiLi4vLi4vZ3VpL2Jhc2UvSWNvbkJ1dHRvbi5qc1wiXG5pbXBvcnQgeyBCdXR0b25TaXplIH0gZnJvbSBcIi4uLy4uL2d1aS9iYXNlL0J1dHRvblNpemUuanNcIlxuXG5leHBvcnQgdHlwZSBXaGl0ZWxhYmVsUmVnaXN0cmF0aW9uU2V0dGluZ3NBdHRycyA9IHtcblx0d2hpdGVsYWJlbENvZGU6IHN0cmluZ1xuXHRvbldoaXRlbGFiZWxDb2RlQ2hhbmdlZDogKGFyZzA6IHN0cmluZykgPT4gdW5rbm93blxuXHRjdXJyZW50UmVnaXN0cmF0aW9uRG9tYWluOiBzdHJpbmcgfCBudWxsXG5cdHBvc3NpYmxlUmVnaXN0cmF0aW9uRG9tYWluczogU2VsZWN0b3JJdGVtTGlzdDxzdHJpbmcgfCBudWxsPlxuXHRvblJlZ2lzdHJhdGlvbkRvbWFpblNlbGVjdGVkOiAoYXJnMDogc3RyaW5nIHwgbnVsbCkgPT4gdW5rbm93blxufVxuXG5leHBvcnQgY2xhc3MgV2hpdGVsYWJlbFJlZ2lzdHJhdGlvblNldHRpbmdzIGltcGxlbWVudHMgQ29tcG9uZW50PFdoaXRlbGFiZWxSZWdpc3RyYXRpb25TZXR0aW5nc0F0dHJzPiB7XG5cdGNvbnN0cnVjdG9yKHZub2RlOiBWbm9kZTxXaGl0ZWxhYmVsUmVnaXN0cmF0aW9uU2V0dGluZ3NBdHRycz4pIHt9XG5cblx0dmlldyh2bm9kZTogVm5vZGU8V2hpdGVsYWJlbFJlZ2lzdHJhdGlvblNldHRpbmdzQXR0cnM+KTogQ2hpbGRyZW4ge1xuXHRcdGNvbnN0IHsgY3VycmVudFJlZ2lzdHJhdGlvbkRvbWFpbiwgcG9zc2libGVSZWdpc3RyYXRpb25Eb21haW5zLCBvblJlZ2lzdHJhdGlvbkRvbWFpblNlbGVjdGVkLCB3aGl0ZWxhYmVsQ29kZSwgb25XaGl0ZWxhYmVsQ29kZUNoYW5nZWQgfSA9IHZub2RlLmF0dHJzXG5cdFx0cmV0dXJuIG0oXCJcIiwgW1xuXHRcdFx0dGhpcy5fcmVuZGVyUmVnaXN0cmF0aW9uRG9tYWluKGN1cnJlbnRSZWdpc3RyYXRpb25Eb21haW4sIHBvc3NpYmxlUmVnaXN0cmF0aW9uRG9tYWlucywgb25SZWdpc3RyYXRpb25Eb21haW5TZWxlY3RlZCksXG5cdFx0XHR0aGlzLl9yZW5kZXJXaGl0ZWxhYmVsQ29kZUZpZWxkKHdoaXRlbGFiZWxDb2RlLCBvbldoaXRlbGFiZWxDb2RlQ2hhbmdlZCksXG5cdFx0XSlcblx0fVxuXG5cdF9yZW5kZXJSZWdpc3RyYXRpb25Eb21haW4oXG5cdFx0Y3VycmVudFJlZ2lzdHJhdGlvbkRvbWFpbjogc3RyaW5nIHwgbnVsbCxcblx0XHRwb3NzaWJsZVJlZ2lzdHJhdGlvbkRvbWFpbnM6IFNlbGVjdG9ySXRlbUxpc3Q8c3RyaW5nIHwgbnVsbD4sXG5cdFx0b25SZWdpc3RyYXRpb25Eb21haW5TZWxlY3RlZDogKGFyZzA6IHN0cmluZyB8IG51bGwpID0+IHVua25vd24sXG5cdCk6IENoaWxkcmVuIHtcblx0XHRyZXR1cm4gbShEcm9wRG93blNlbGVjdG9yLCB7XG5cdFx0XHRsYWJlbDogXCJ3aGl0ZWxhYmVsUmVnaXN0cmF0aW9uRW1haWxEb21haW5fbGFiZWxcIixcblx0XHRcdHNlbGVjdGVkVmFsdWU6IGN1cnJlbnRSZWdpc3RyYXRpb25Eb21haW4sXG5cdFx0XHRpdGVtczogcG9zc2libGVSZWdpc3RyYXRpb25Eb21haW5zLFxuXHRcdFx0c2VsZWN0aW9uQ2hhbmdlZEhhbmRsZXI6IG9uUmVnaXN0cmF0aW9uRG9tYWluU2VsZWN0ZWRcblx0XHRcdFx0PyAoc2VsZWN0ZWRWYWx1ZTogc3RyaW5nIHwgbnVsbCkgPT4ge1xuXHRcdFx0XHRcdFx0b25SZWdpc3RyYXRpb25Eb21haW5TZWxlY3RlZChzZWxlY3RlZFZhbHVlKVxuXHRcdFx0XHQgIH1cblx0XHRcdFx0OiBudWxsLFxuXHRcdFx0ZGlzYWJsZWQ6ICFvblJlZ2lzdHJhdGlvbkRvbWFpblNlbGVjdGVkLFxuXHRcdH0pXG5cdH1cblxuXHRfcmVuZGVyV2hpdGVsYWJlbENvZGVGaWVsZCh3aGl0ZWxhYmVsQ29kZTogc3RyaW5nLCBvbldoaXRlbGFiZWxDb2RlQ2hhbmdlZDogKChhcmcwOiBzdHJpbmcpID0+IHVua25vd24pIHwgbnVsbCk6IENoaWxkcmVuIHtcblx0XHRyZXR1cm4gbShUZXh0RmllbGQsIHtcblx0XHRcdGxhYmVsOiBcIndoaXRlbGFiZWxSZWdpc3RyYXRpb25Db2RlX2xhYmVsXCIsXG5cdFx0XHR2YWx1ZTogd2hpdGVsYWJlbENvZGUsXG5cdFx0XHRpc1JlYWRPbmx5OiB0cnVlLFxuXHRcdFx0aW5qZWN0aW9uc1JpZ2h0OiAoKSA9PlxuXHRcdFx0XHRvbldoaXRlbGFiZWxDb2RlQ2hhbmdlZFxuXHRcdFx0XHRcdD8gbShJY29uQnV0dG9uLCB7XG5cdFx0XHRcdFx0XHRcdHRpdGxlOiBcImVkaXRfYWN0aW9uXCIsXG5cdFx0XHRcdFx0XHRcdGNsaWNrOiAoKSA9PiB0aGlzLmVkaXRSZWdpc3RyYXRpb25Db2RlKHdoaXRlbGFiZWxDb2RlLCBvbldoaXRlbGFiZWxDb2RlQ2hhbmdlZCksXG5cdFx0XHRcdFx0XHRcdGljb246IEljb25zLkVkaXQsXG5cdFx0XHRcdFx0XHRcdHNpemU6IEJ1dHRvblNpemUuQ29tcGFjdCxcblx0XHRcdFx0XHQgIH0pXG5cdFx0XHRcdFx0OiBudWxsLFxuXHRcdH0gYXMgY29uc3QpXG5cdH1cblxuXHRwcml2YXRlIGVkaXRSZWdpc3RyYXRpb25Db2RlKHdoaXRlbGFiZWxDb2RlOiBzdHJpbmcsIG9uV2hpdGVsYWJlbENvZGVDaGFuZ2VkOiAoYXJnMDogc3RyaW5nKSA9PiB1bmtub3duKSB7XG5cdFx0RGlhbG9nLnNob3dUZXh0SW5wdXREaWFsb2coe1xuXHRcdFx0dGl0bGU6IFwiZWRpdF9hY3Rpb25cIixcblx0XHRcdGxhYmVsOiBcIndoaXRlbGFiZWxSZWdpc3RyYXRpb25Db2RlX2xhYmVsXCIsXG5cdFx0XHRkZWZhdWx0VmFsdWU6IHdoaXRlbGFiZWxDb2RlLFxuXHRcdH0pLnRoZW4oKG5ld0NvZGUpID0+IHtcblx0XHRcdG9uV2hpdGVsYWJlbENvZGVDaGFuZ2VkKG5ld0NvZGUpXG5cdFx0fSlcblx0fVxufVxuIiwiaW1wb3J0IHsgVGV4dEZpZWxkLCBUZXh0RmllbGRUeXBlIH0gZnJvbSBcIi4uLy4uL2d1aS9iYXNlL1RleHRGaWVsZC5qc1wiXG5pbXBvcnQgeyBEaWFsb2cgfSBmcm9tIFwiLi4vLi4vZ3VpL2Jhc2UvRGlhbG9nXCJcbmltcG9ydCB7IGxhbmcgfSBmcm9tIFwiLi4vLi4vbWlzYy9MYW5ndWFnZVZpZXdNb2RlbFwiXG5pbXBvcnQgbSwgeyBDaGlsZHJlbiwgQ29tcG9uZW50LCBWbm9kZSB9IGZyb20gXCJtaXRocmlsXCJcbmltcG9ydCB7IEljb25zIH0gZnJvbSBcIi4uLy4uL2d1aS9iYXNlL2ljb25zL0ljb25zXCJcbmltcG9ydCB7IEljb25CdXR0b24gfSBmcm9tIFwiLi4vLi4vZ3VpL2Jhc2UvSWNvbkJ1dHRvbi5qc1wiXG5pbXBvcnQgeyBCdXR0b25TaXplIH0gZnJvbSBcIi4uLy4uL2d1aS9iYXNlL0J1dHRvblNpemUuanNcIlxuXG5leHBvcnQgdHlwZSBXaGl0ZWxhYmVsQ3VzdG9tTWV0YVRhZ3NTZXR0aW5nc0F0dHJzID0ge1xuXHRtZXRhVGFnczogc3RyaW5nXG5cdG9uTWV0YVRhZ3NDaGFuZ2VkOiAoKHRhZ3M6IHN0cmluZykgPT4gdW5rbm93bikgfCBudWxsXG59XG5cbmV4cG9ydCBjbGFzcyBXaGl0ZWxhYmVsQ3VzdG9tTWV0YVRhZ3NTZXR0aW5ncyBpbXBsZW1lbnRzIENvbXBvbmVudDxXaGl0ZWxhYmVsQ3VzdG9tTWV0YVRhZ3NTZXR0aW5nc0F0dHJzPiB7XG5cdHZpZXcodm5vZGU6IFZub2RlPFdoaXRlbGFiZWxDdXN0b21NZXRhVGFnc1NldHRpbmdzQXR0cnM+KTogQ2hpbGRyZW4ge1xuXHRcdGNvbnN0IHsgbWV0YVRhZ3MsIG9uTWV0YVRhZ3NDaGFuZ2VkIH0gPSB2bm9kZS5hdHRyc1xuXHRcdGNvbnN0IGN1c3RvbU1ldGFUYWdzRGVmaW5lZCA9IG1ldGFUYWdzLmxlbmd0aCA+IDBcblx0XHRyZXR1cm4gbShUZXh0RmllbGQsIHtcblx0XHRcdGxhYmVsOiBcImN1c3RvbU1ldGFUYWdzX2xhYmVsXCIsXG5cdFx0XHR2YWx1ZTogY3VzdG9tTWV0YVRhZ3NEZWZpbmVkID8gbGFuZy5nZXQoXCJhY3RpdmF0ZWRfbGFiZWxcIikgOiBsYW5nLmdldChcImRlYWN0aXZhdGVkX2xhYmVsXCIpLFxuXHRcdFx0aXNSZWFkT25seTogdHJ1ZSxcblx0XHRcdGluamVjdGlvbnNSaWdodDogKCkgPT5cblx0XHRcdFx0b25NZXRhVGFnc0NoYW5nZWRcblx0XHRcdFx0XHQ/IG0oSWNvbkJ1dHRvbiwge1xuXHRcdFx0XHRcdFx0XHR0aXRsZTogXCJlZGl0X2FjdGlvblwiLFxuXHRcdFx0XHRcdFx0XHRjbGljazogKCkgPT4gdGhpcy5zaG93RWRpdE1ldGFUYWdzRGlhbG9nKG1ldGFUYWdzLCBvbk1ldGFUYWdzQ2hhbmdlZCksXG5cdFx0XHRcdFx0XHRcdGljb246IEljb25zLkVkaXQsXG5cdFx0XHRcdFx0XHRcdHNpemU6IEJ1dHRvblNpemUuQ29tcGFjdCxcblx0XHRcdFx0XHQgIH0pXG5cdFx0XHRcdFx0OiBudWxsLFxuXHRcdH0pXG5cdH1cblxuXHRwcml2YXRlIHNob3dFZGl0TWV0YVRhZ3NEaWFsb2cobWV0YVRhZ3M6IHN0cmluZywgb25NZXRhVGFnc0NoYW5nZWQ6ICh0YWdzOiBzdHJpbmcpID0+IHVua25vd24pIHtcblx0XHRsZXQgZGlhbG9nID0gRGlhbG9nLnNob3dBY3Rpb25EaWFsb2coe1xuXHRcdFx0dGl0bGU6IFwiY3VzdG9tTWV0YVRhZ3NfbGFiZWxcIixcblx0XHRcdGNoaWxkOiB7XG5cdFx0XHRcdHZpZXc6ICgpID0+XG5cdFx0XHRcdFx0bShUZXh0RmllbGQsIHtcblx0XHRcdFx0XHRcdGxhYmVsOiBcImN1c3RvbU1ldGFUYWdzX2xhYmVsXCIsXG5cdFx0XHRcdFx0XHR2YWx1ZTogbWV0YVRhZ3MsXG5cdFx0XHRcdFx0XHR0eXBlOiBUZXh0RmllbGRUeXBlLkFyZWEsXG5cdFx0XHRcdFx0XHRvbmlucHV0OiAodmFsdWU6IHN0cmluZykgPT4ge1xuXHRcdFx0XHRcdFx0XHRtZXRhVGFncyA9IHZhbHVlXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdH0pLFxuXHRcdFx0fSxcblx0XHRcdG9rQWN0aW9uOiAob2spID0+IHtcblx0XHRcdFx0aWYgKG9rKSB7XG5cdFx0XHRcdFx0b25NZXRhVGFnc0NoYW5nZWQobWV0YVRhZ3MpXG5cdFx0XHRcdFx0ZGlhbG9nLmNsb3NlKClcblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHR9KVxuXHR9XG59XG4iLCJpbXBvcnQgeyBzaG93UGxhblVwZ3JhZGVSZXF1aXJlZERpYWxvZyB9IGZyb20gXCIuLi8uLi9taXNjL1N1YnNjcmlwdGlvbkRpYWxvZ3NcIlxuaW1wb3J0IHsgSWNvbnMgfSBmcm9tIFwiLi4vLi4vZ3VpL2Jhc2UvaWNvbnMvSWNvbnNcIlxuaW1wb3J0IHsgbGFuZyB9IGZyb20gXCIuLi8uLi9taXNjL0xhbmd1YWdlVmlld01vZGVsXCJcbmltcG9ydCBtLCB7IENoaWxkcmVuLCBDb21wb25lbnQsIFZub2RlIH0gZnJvbSBcIm1pdGhyaWxcIlxuaW1wb3J0IHsgVGV4dEZpZWxkIH0gZnJvbSBcIi4uLy4uL2d1aS9iYXNlL1RleHRGaWVsZC5qc1wiXG5pbXBvcnQgeyBJY29uQnV0dG9uIH0gZnJvbSBcIi4uLy4uL2d1aS9iYXNlL0ljb25CdXR0b24uanNcIlxuaW1wb3J0IHsgQnV0dG9uU2l6ZSB9IGZyb20gXCIuLi8uLi9ndWkvYmFzZS9CdXR0b25TaXplLmpzXCJcbmltcG9ydCB7IGdldEF2YWlsYWJsZVBsYW5zV2l0aFdoaXRlbGFiZWwgfSBmcm9tIFwiLi4vLi4vc3Vic2NyaXB0aW9uL1N1YnNjcmlwdGlvblV0aWxzLmpzXCJcblxuZXhwb3J0IHR5cGUgV2hpdGVsYWJlbFN0YXR1c1NldHRpbmdzQXR0cnMgPSB7XG5cdGlzV2hpdGVsYWJlbEFjdGl2ZTogYm9vbGVhblxufVxuXG5leHBvcnQgY2xhc3MgV2hpdGVsYWJlbFN0YXR1c1NldHRpbmdzIGltcGxlbWVudHMgQ29tcG9uZW50PFdoaXRlbGFiZWxTdGF0dXNTZXR0aW5nc0F0dHJzPiB7XG5cdHZpZXcoeyBhdHRycyB9OiBWbm9kZTxXaGl0ZWxhYmVsU3RhdHVzU2V0dGluZ3NBdHRycz4pOiBDaGlsZHJlbiB7XG5cdFx0Y29uc3QgeyBpc1doaXRlbGFiZWxBY3RpdmUgfSA9IGF0dHJzXG5cdFx0cmV0dXJuIG0oVGV4dEZpZWxkLCB7XG5cdFx0XHRsYWJlbDogXCJzdGF0ZV9sYWJlbFwiLFxuXHRcdFx0dmFsdWU6IGlzV2hpdGVsYWJlbEFjdGl2ZSA/IGxhbmcuZ2V0KFwiYWN0aXZlX2xhYmVsXCIpIDogbGFuZy5nZXQoXCJkZWFjdGl2YXRlZF9sYWJlbFwiKSxcblx0XHRcdGlzUmVhZE9ubHk6IHRydWUsXG5cdFx0XHRpbmplY3Rpb25zUmlnaHQ6ICgpID0+IChpc1doaXRlbGFiZWxBY3RpdmUgPyBudWxsIDogdGhpcy5yZW5kZXJFbmFibGUoKSksXG5cdFx0fSlcblx0fVxuXG5cdHByaXZhdGUgcmVuZGVyRW5hYmxlKCk6IENoaWxkcmVuIHtcblx0XHRyZXR1cm4gbShJY29uQnV0dG9uLCB7XG5cdFx0XHR0aXRsZTogXCJ3aGl0ZWxhYmVsRG9tYWluX2xhYmVsXCIsXG5cdFx0XHRjbGljazogYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRjb25zdCBwbGFuc1dpdGhXaGl0ZWxhYmVsID0gYXdhaXQgZ2V0QXZhaWxhYmxlUGxhbnNXaXRoV2hpdGVsYWJlbCgpXG5cdFx0XHRcdHNob3dQbGFuVXBncmFkZVJlcXVpcmVkRGlhbG9nKHBsYW5zV2l0aFdoaXRlbGFiZWwpXG5cdFx0XHR9LFxuXHRcdFx0aWNvbjogSWNvbnMuRWRpdCxcblx0XHRcdHNpemU6IEJ1dHRvblNpemUuQ29tcGFjdCxcblx0XHR9KVxuXHR9XG59XG4iLCJpbXBvcnQgbSwgeyBDaGlsZHJlbiwgQ29tcG9uZW50LCBWbm9kZSB9IGZyb20gXCJtaXRocmlsXCJcbmltcG9ydCBzdHJlYW0gZnJvbSBcIm1pdGhyaWwvc3RyZWFtXCJcbmltcG9ydCB7IGxhbmcsIGxhbmd1YWdlQnlDb2RlIH0gZnJvbSBcIi4uLy4uL21pc2MvTGFuZ3VhZ2VWaWV3TW9kZWxcIlxuaW1wb3J0IHsgRXhwYW5kZXJCdXR0b24sIEV4cGFuZGVyUGFuZWwgfSBmcm9tIFwiLi4vLi4vZ3VpL2Jhc2UvRXhwYW5kZXJcIlxuaW1wb3J0IHsgQ29sdW1uV2lkdGgsIFRhYmxlIH0gZnJvbSBcIi4uLy4uL2d1aS9iYXNlL1RhYmxlLmpzXCJcbmltcG9ydCB7IEJ1dHRvblR5cGUgfSBmcm9tIFwiLi4vLi4vZ3VpL2Jhc2UvQnV0dG9uLmpzXCJcbmltcG9ydCB7IEljb25zIH0gZnJvbSBcIi4uLy4uL2d1aS9iYXNlL2ljb25zL0ljb25zXCJcbmltcG9ydCB7IGF0dGFjaERyb3Bkb3duIH0gZnJvbSBcIi4uLy4uL2d1aS9iYXNlL0Ryb3Bkb3duLmpzXCJcbmltcG9ydCB0eXBlIHsgTm90aWZpY2F0aW9uTWFpbFRlbXBsYXRlIH0gZnJvbSBcIi4uLy4uL2FwaS9lbnRpdGllcy9zeXMvVHlwZVJlZnMuanNcIlxuaW1wb3J0IHsgZG93bmNhc3QgfSBmcm9tIFwiQHR1dGFvL3R1dGFub3RhLXV0aWxzXCJcbmltcG9ydCB0eXBlIHsgTGFuZ3VhZ2VDb2RlIH0gZnJvbSBcIi4uLy4uL21pc2MvTGFuZ3VhZ2VWaWV3TW9kZWxcIlxuaW1wb3J0IFN0cmVhbSBmcm9tIFwibWl0aHJpbC9zdHJlYW1cIlxuaW1wb3J0IHsgQnV0dG9uU2l6ZSB9IGZyb20gXCIuLi8uLi9ndWkvYmFzZS9CdXR0b25TaXplLmpzXCJcblxuZXhwb3J0IHR5cGUgV2hpdGVsYWJlbE5vdGlmaWNhdGlvbkVtYWlsU2V0dGluZ3NBdHRycyA9IHtcblx0bm90aWZpY2F0aW9uTWFpbFRlbXBsYXRlczogQXJyYXk8Tm90aWZpY2F0aW9uTWFpbFRlbXBsYXRlPlxuXHRvbkFkZFRlbXBsYXRlOiAoKSA9PiB1bmtub3duXG5cdG9uRWRpdFRlbXBsYXRlOiAoYXJnMDogTm90aWZpY2F0aW9uTWFpbFRlbXBsYXRlKSA9PiB1bmtub3duXG5cdG9uUmVtb3ZlVGVtcGxhdGU6IChhcmcwOiBOb3RpZmljYXRpb25NYWlsVGVtcGxhdGUpID0+IHVua25vd25cbn1cblxuZXhwb3J0IGNsYXNzIFdoaXRlbGFiZWxOb3RpZmljYXRpb25FbWFpbFNldHRpbmdzIGltcGxlbWVudHMgQ29tcG9uZW50PFdoaXRlbGFiZWxOb3RpZmljYXRpb25FbWFpbFNldHRpbmdzQXR0cnM+IHtcblx0X25vdGlmaWNhdGlvbkVtYWlsc0V4cGFuZGVkOiBTdHJlYW08Ym9vbGVhbj5cblxuXHRjb25zdHJ1Y3Rvcih2bm9kZTogVm5vZGU8V2hpdGVsYWJlbE5vdGlmaWNhdGlvbkVtYWlsU2V0dGluZ3NBdHRycz4pIHtcblx0XHR0aGlzLl9ub3RpZmljYXRpb25FbWFpbHNFeHBhbmRlZCA9IHN0cmVhbTxib29sZWFuPihmYWxzZSlcblx0fVxuXG5cdHZpZXcodm5vZGU6IFZub2RlPFdoaXRlbGFiZWxOb3RpZmljYXRpb25FbWFpbFNldHRpbmdzQXR0cnM+KTogQ2hpbGRyZW4ge1xuXHRcdGNvbnN0IHsgb25BZGRUZW1wbGF0ZSwgb25FZGl0VGVtcGxhdGUsIG9uUmVtb3ZlVGVtcGxhdGUsIG5vdGlmaWNhdGlvbk1haWxUZW1wbGF0ZXMgfSA9IHZub2RlLmF0dHJzXG5cdFx0cmV0dXJuIHRoaXMuX3JlbmRlck5vdGlmaWNhdGlvbkVtYWlsU2V0dGluZ3Mobm90aWZpY2F0aW9uTWFpbFRlbXBsYXRlcywgb25BZGRUZW1wbGF0ZSwgb25FZGl0VGVtcGxhdGUsIG9uUmVtb3ZlVGVtcGxhdGUpXG5cdH1cblxuXHRfcmVuZGVyTm90aWZpY2F0aW9uRW1haWxTZXR0aW5ncyhcblx0XHRub3RpZmljYXRpb25NYWlsVGVtcGxhdGVzOiBBcnJheTxOb3RpZmljYXRpb25NYWlsVGVtcGxhdGU+LFxuXHRcdG9uQWRkVGVtcGxhdGU6ICgpID0+IHVua25vd24sXG5cdFx0b25FZGl0VGVtcGxhdGU6IChhcmcwOiBOb3RpZmljYXRpb25NYWlsVGVtcGxhdGUpID0+IHVua25vd24sXG5cdFx0b25SZW1vdmVUZW1wbGF0ZTogKGFyZzA6IE5vdGlmaWNhdGlvbk1haWxUZW1wbGF0ZSkgPT4gdW5rbm93bixcblx0KTogQ2hpbGRyZW4ge1xuXHRcdHJldHVybiBbXG5cdFx0XHRtKFwiLmZsZXgtc3BhY2UtYmV0d2Vlbi5pdGVtcy1jZW50ZXIubXQtbC5tYi1zXCIsIFtcblx0XHRcdFx0bShcIi5oNFwiLCBsYW5nLmdldChcImN1c3RvbU5vdGlmaWNhdGlvbkVtYWlsc19sYWJlbFwiKSksXG5cdFx0XHRcdG0oRXhwYW5kZXJCdXR0b24sIHtcblx0XHRcdFx0XHRsYWJlbDogXCJzaG93X2FjdGlvblwiLFxuXHRcdFx0XHRcdGV4cGFuZGVkOiB0aGlzLl9ub3RpZmljYXRpb25FbWFpbHNFeHBhbmRlZCgpLFxuXHRcdFx0XHRcdG9uRXhwYW5kZWRDaGFuZ2U6IHRoaXMuX25vdGlmaWNhdGlvbkVtYWlsc0V4cGFuZGVkLFxuXHRcdFx0XHR9KSxcblx0XHRcdF0pLFxuXHRcdFx0bShcblx0XHRcdFx0RXhwYW5kZXJQYW5lbCxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGV4cGFuZGVkOiB0aGlzLl9ub3RpZmljYXRpb25FbWFpbHNFeHBhbmRlZCgpLFxuXHRcdFx0XHR9LFxuXHRcdFx0XHRtKFRhYmxlLCB7XG5cdFx0XHRcdFx0Y29sdW1uSGVhZGluZzogW1wibGFuZ3VhZ2VfbGFiZWxcIiwgXCJzdWJqZWN0X2xhYmVsXCJdLFxuXHRcdFx0XHRcdGNvbHVtbldpZHRoczogW0NvbHVtbldpZHRoLkxhcmdlc3QsIENvbHVtbldpZHRoLkxhcmdlc3RdLFxuXHRcdFx0XHRcdHNob3dBY3Rpb25CdXR0b25Db2x1bW46IHRydWUsXG5cdFx0XHRcdFx0YWRkQnV0dG9uQXR0cnM6IHtcblx0XHRcdFx0XHRcdHRpdGxlOiBcImFkZF9hY3Rpb25cIixcblx0XHRcdFx0XHRcdGNsaWNrOiAoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdG9uQWRkVGVtcGxhdGUoKVxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdGljb246IEljb25zLkFkZCxcblx0XHRcdFx0XHRcdHNpemU6IEJ1dHRvblNpemUuQ29tcGFjdCxcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdGxpbmVzOiBub3RpZmljYXRpb25NYWlsVGVtcGxhdGVzLm1hcCgodGVtcGxhdGUpID0+IHtcblx0XHRcdFx0XHRcdGNvbnN0IGxhbmd1YWdlQ29kZTogTGFuZ3VhZ2VDb2RlID0gZG93bmNhc3QodGVtcGxhdGUubGFuZ3VhZ2UpXG5cdFx0XHRcdFx0XHRjb25zdCBsYW5nTmFtZSA9IGxhbmcuZ2V0KGxhbmd1YWdlQnlDb2RlW2xhbmd1YWdlQ29kZV0udGV4dElkKVxuXHRcdFx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRcdFx0Y2VsbHM6IFtsYW5nTmFtZSwgdGVtcGxhdGUuc3ViamVjdF0sXG5cdFx0XHRcdFx0XHRcdGFjdGlvbkJ1dHRvbkF0dHJzOiBhdHRhY2hEcm9wZG93bih7XG5cdFx0XHRcdFx0XHRcdFx0bWFpbkJ1dHRvbkF0dHJzOiB7XG5cdFx0XHRcdFx0XHRcdFx0XHR0aXRsZTogXCJlZGl0X2FjdGlvblwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0aWNvbjogSWNvbnMuRWRpdCxcblx0XHRcdFx0XHRcdFx0XHRcdHNpemU6IEJ1dHRvblNpemUuQ29tcGFjdCxcblx0XHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRcdGNoaWxkQXR0cnM6ICgpID0+IFtcblx0XHRcdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0bGFiZWw6IFwiZWRpdF9hY3Rpb25cIixcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y2xpY2s6ICgpID0+IG9uRWRpdFRlbXBsYXRlKHRlbXBsYXRlKSxcblx0XHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGxhYmVsOiBcInJlbW92ZV9hY3Rpb25cIixcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y2xpY2s6ICgpID0+IG9uUmVtb3ZlVGVtcGxhdGUodGVtcGxhdGUpLFxuXHRcdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XHRdLFxuXHRcdFx0XHRcdFx0XHR9KSxcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KSxcblx0XHRcdFx0fSksXG5cdFx0XHQpLFxuXHRcdFx0bShcIi5zbWFsbFwiLCBsYW5nLmdldChcImN1c3RvbU5vdGlmaWNhdGlvbkVtYWlsc0hlbHBfbXNnXCIpKSxcblx0XHRdXG5cdH1cbn1cbiIsImltcG9ydCBzdHJlYW0gZnJvbSBcIm1pdGhyaWwvc3RyZWFtXCJcbmltcG9ydCBtLCB7IENoaWxkcmVuLCBDb21wb25lbnQsIFZub2RlIH0gZnJvbSBcIm1pdGhyaWxcIlxuaW1wb3J0IHsgRHJvcERvd25TZWxlY3RvckF0dHJzLCBEcm9wRG93blNlbGVjdG9yLCBTZWxlY3Rvckl0ZW1MaXN0IH0gZnJvbSBcIi4uLy4uL2d1aS9iYXNlL0Ryb3BEb3duU2VsZWN0b3IuanNcIlxuXG5leHBvcnQgdHlwZSBHZXJtYW5MYW5ndWFnZUNvZGUgPSBcImRlXCIgfCBcImRlX3NpZVwiXG5leHBvcnQgdHlwZSBXaGl0ZWxhYmVsR2VybWFuTGFuZ3VhZ2VGaWxlU2V0dGluZ3NBdHRycyA9IHtcblx0Y3VzdG9tR2VybWFuTGFuZ3VhZ2VGaWxlOiBHZXJtYW5MYW5ndWFnZUNvZGUgfCBudWxsXG5cdG9uR2VybWFuTGFuZ3VhZ2VGaWxlQ2hhbmdlZDogKGFyZzA6IEdlcm1hbkxhbmd1YWdlQ29kZSkgPT4gdW5rbm93blxufVxuXG5leHBvcnQgY2xhc3MgV2hpdGVsYWJlbEdlcm1hbkxhbmd1YWdlRmlsZVNldHRpbmdzIGltcGxlbWVudHMgQ29tcG9uZW50PFdoaXRlbGFiZWxHZXJtYW5MYW5ndWFnZUZpbGVTZXR0aW5nc0F0dHJzPiB7XG5cdGNvbnN0cnVjdG9yKHZub2RlOiBWbm9kZTxXaGl0ZWxhYmVsR2VybWFuTGFuZ3VhZ2VGaWxlU2V0dGluZ3NBdHRycz4pIHt9XG5cblx0dmlldyh2bm9kZTogVm5vZGU8V2hpdGVsYWJlbEdlcm1hbkxhbmd1YWdlRmlsZVNldHRpbmdzQXR0cnM+KTogQ2hpbGRyZW4ge1xuXHRcdGNvbnN0IHsgY3VzdG9tR2VybWFuTGFuZ3VhZ2VGaWxlLCBvbkdlcm1hbkxhbmd1YWdlRmlsZUNoYW5nZWQgfSA9IHZub2RlLmF0dHJzXG5cdFx0cmV0dXJuIHRoaXMuX3JlbmRlckRlZmF1bHRHZXJtYW5MYW5ndWFnZUZpbGVTZXR0aW5ncyhjdXN0b21HZXJtYW5MYW5ndWFnZUZpbGUsIG9uR2VybWFuTGFuZ3VhZ2VGaWxlQ2hhbmdlZClcblx0fVxuXG5cdF9yZW5kZXJEZWZhdWx0R2VybWFuTGFuZ3VhZ2VGaWxlU2V0dGluZ3MoXG5cdFx0Y3VzdG9tR2VybWFuTGFuZ3VhZ2VGaWxlOiBHZXJtYW5MYW5ndWFnZUNvZGUgfCBudWxsLFxuXHRcdG9uR2VybWFuTGFuZ3VhZ2VGaWxlQ2hhbmdlZDogKGFyZzA6IEdlcm1hbkxhbmd1YWdlQ29kZSkgPT4gdW5rbm93bixcblx0KTogQ2hpbGRyZW4ge1xuXHRcdGNvbnN0IGl0ZW1zOiBTZWxlY3Rvckl0ZW1MaXN0PEdlcm1hbkxhbmd1YWdlQ29kZT4gPSBbXG5cdFx0XHR7XG5cdFx0XHRcdG5hbWU6IFwiRGV1dHNjaCAoRHUpXCIsXG5cdFx0XHRcdHZhbHVlOiBcImRlXCIsXG5cdFx0XHR9LFxuXHRcdFx0e1xuXHRcdFx0XHRuYW1lOiBcIkRldXRzY2ggKFNpZSlcIixcblx0XHRcdFx0dmFsdWU6IFwiZGVfc2llXCIsXG5cdFx0XHR9LFxuXHRcdF1cblx0XHRjb25zdCBzZWxlY3RlZFZhbHVlOiBHZXJtYW5MYW5ndWFnZUNvZGUgPSBjdXN0b21HZXJtYW5MYW5ndWFnZUZpbGUgPz8gaXRlbXNbMF0udmFsdWVcblx0XHRjb25zdCBkZWZhdWx0R2VybWFuTGFuZ3VhZ2VGaWxlRHJvcERvd25BdHRyczogRHJvcERvd25TZWxlY3RvckF0dHJzPEdlcm1hbkxhbmd1YWdlQ29kZT4gPSB7XG5cdFx0XHRsYWJlbDogXCJnZXJtYW5MYW5ndWFnZUZpbGVfbGFiZWxcIixcblx0XHRcdGl0ZW1zLFxuXHRcdFx0c2VsZWN0ZWRWYWx1ZTogc2VsZWN0ZWRWYWx1ZSxcblx0XHRcdHNlbGVjdGlvbkNoYW5nZWRIYW5kbGVyOiBvbkdlcm1hbkxhbmd1YWdlRmlsZUNoYW5nZWQsXG5cdFx0fSBhcyBjb25zdFxuXHRcdHJldHVybiBtKERyb3BEb3duU2VsZWN0b3IsIGRlZmF1bHRHZXJtYW5MYW5ndWFnZUZpbGVEcm9wRG93bkF0dHJzKVxuXHR9XG59XG4iLCJpbXBvcnQgbSwgeyBDaGlsZHJlbiB9IGZyb20gXCJtaXRocmlsXCJcbmltcG9ydCB7IGFzc2VydE1haW5Pck5vZGUgfSBmcm9tIFwiLi4vLi4vYXBpL2NvbW1vbi9FbnYuanNcIlxuaW1wb3J0IHsgY2xlYXIsIGRvd25jYXN0LCBMYXp5TG9hZGVkLCBuZXZlck51bGwsIG5vT3AsIHByb21pc2VNYXAgfSBmcm9tIFwiQHR1dGFvL3R1dGFub3RhLXV0aWxzXCJcbmltcG9ydCB0eXBlIHtcblx0Qm9va2luZyxcblx0Q2VydGlmaWNhdGVJbmZvLFxuXHRDdXN0b21lcixcblx0Q3VzdG9tZXJJbmZvLFxuXHRDdXN0b21lclByb3BlcnRpZXMsXG5cdERvbWFpbkluZm8sXG5cdE5vdGlmaWNhdGlvbk1haWxUZW1wbGF0ZSxcblx0UGxhbkNvbmZpZ3VyYXRpb24sXG5cdFdoaXRlbGFiZWxDb25maWcsXG59IGZyb20gXCIuLi8uLi9hcGkvZW50aXRpZXMvc3lzL1R5cGVSZWZzLmpzXCJcbmltcG9ydCB7XG5cdEJvb2tpbmdUeXBlUmVmLFxuXHRjcmVhdGVTdHJpbmdXcmFwcGVyLFxuXHRDdXN0b21lckluZm9UeXBlUmVmLFxuXHRDdXN0b21lclByb3BlcnRpZXNUeXBlUmVmLFxuXHRDdXN0b21lclR5cGVSZWYsXG5cdFdoaXRlbGFiZWxDb25maWdUeXBlUmVmLFxufSBmcm9tIFwiLi4vLi4vYXBpL2VudGl0aWVzL3N5cy9UeXBlUmVmcy5qc1wiXG5pbXBvcnQgeyBJbmZvTGluaywgbGFuZyB9IGZyb20gXCIuLi8uLi9taXNjL0xhbmd1YWdlVmlld01vZGVsLmpzXCJcbmltcG9ydCB7IEZlYXR1cmVUeXBlLCBPcGVyYXRpb25UeXBlIH0gZnJvbSBcIi4uLy4uL2FwaS9jb21tb24vVHV0YW5vdGFDb25zdGFudHMuanNcIlxuaW1wb3J0IHsgcHJvZ3Jlc3NJY29uIH0gZnJvbSBcIi4uLy4uL2d1aS9iYXNlL0ljb24uanNcIlxuaW1wb3J0IHsgc2hvd1Byb2dyZXNzRGlhbG9nIH0gZnJvbSBcIi4uLy4uL2d1aS9kaWFsb2dzL1Byb2dyZXNzRGlhbG9nLmpzXCJcblxuaW1wb3J0ICogYXMgRWRpdE5vdGlmaWNhdGlvbkVtYWlsRGlhbG9nIGZyb20gXCIuLi8uLi9zZXR0aW5ncy9FZGl0Tm90aWZpY2F0aW9uRW1haWxEaWFsb2dcIlxuaW1wb3J0IHsgaXNXaGl0ZWxhYmVsQWN0aXZlIH0gZnJvbSBcIi4uLy4uL3N1YnNjcmlwdGlvbi9TdWJzY3JpcHRpb25VdGlscy5qc1wiXG5pbXBvcnQgeyBHRU5FUkFURURfTUFYX0lEIH0gZnJvbSBcIi4uLy4uL2FwaS9jb21tb24vdXRpbHMvRW50aXR5VXRpbHMuanNcIlxuaW1wb3J0IHsgV2hpdGVsYWJlbEJyYW5kaW5nRG9tYWluU2V0dGluZ3MgfSBmcm9tIFwiLi9XaGl0ZWxhYmVsQnJhbmRpbmdEb21haW5TZXR0aW5nc1wiXG5pbXBvcnQgeyBXaGl0ZWxhYmVsVGhlbWVTZXR0aW5ncyB9IGZyb20gXCIuL1doaXRlbGFiZWxUaGVtZVNldHRpbmdzXCJcbmltcG9ydCB7IFdoaXRlbGFiZWxJbXByaW50QW5kUHJpdmFjeVNldHRpbmdzIH0gZnJvbSBcIi4vV2hpdGVsYWJlbEltcHJpbnRBbmRQcml2YWN5U2V0dGluZ3NcIlxuaW1wb3J0IHsgV2hpdGVsYWJlbFJlZ2lzdHJhdGlvblNldHRpbmdzLCBXaGl0ZWxhYmVsUmVnaXN0cmF0aW9uU2V0dGluZ3NBdHRycyB9IGZyb20gXCIuL1doaXRlbGFiZWxSZWdpc3RyYXRpb25TZXR0aW5nc1wiXG5pbXBvcnQgeyBXaGl0ZWxhYmVsQ3VzdG9tTWV0YVRhZ3NTZXR0aW5ncywgV2hpdGVsYWJlbEN1c3RvbU1ldGFUYWdzU2V0dGluZ3NBdHRycyB9IGZyb20gXCIuL1doaXRlbGFiZWxDdXN0b21NZXRhVGFnc1NldHRpbmdzXCJcbmltcG9ydCB7IFdoaXRlbGFiZWxTdGF0dXNTZXR0aW5ncyB9IGZyb20gXCIuL1doaXRlbGFiZWxTdGF0dXNTZXR0aW5nc1wiXG5pbXBvcnQgeyBXaGl0ZWxhYmVsTm90aWZpY2F0aW9uRW1haWxTZXR0aW5ncyB9IGZyb20gXCIuL1doaXRlbGFiZWxOb3RpZmljYXRpb25FbWFpbFNldHRpbmdzXCJcbmltcG9ydCB0eXBlIHsgR2VybWFuTGFuZ3VhZ2VDb2RlIH0gZnJvbSBcIi4vV2hpdGVsYWJlbEdlcm1hbkxhbmd1YWdlRmlsZVNldHRpbmdzXCJcbmltcG9ydCB7IFdoaXRlbGFiZWxHZXJtYW5MYW5ndWFnZUZpbGVTZXR0aW5ncyB9IGZyb20gXCIuL1doaXRlbGFiZWxHZXJtYW5MYW5ndWFnZUZpbGVTZXR0aW5nc1wiXG5pbXBvcnQgdHlwZSB7IFVwZGF0YWJsZVNldHRpbmdzVmlld2VyIH0gZnJvbSBcIi4uL0ludGVyZmFjZXMuanNcIlxuaW1wb3J0IHR5cGUgeyBUaGVtZUN1c3RvbWl6YXRpb25zIH0gZnJvbSBcIi4uLy4uL21pc2MvV2hpdGVsYWJlbEN1c3RvbWl6YXRpb25zLmpzXCJcbmltcG9ydCB7IGdldFRoZW1lQ3VzdG9taXphdGlvbnMgfSBmcm9tIFwiLi4vLi4vbWlzYy9XaGl0ZWxhYmVsQ3VzdG9taXphdGlvbnMuanNcIlxuaW1wb3J0IHsgRW50aXR5Q2xpZW50IH0gZnJvbSBcIi4uLy4uL2FwaS9jb21tb24vRW50aXR5Q2xpZW50LmpzXCJcbmltcG9ydCB7IFNlbGVjdG9ySXRlbSwgU2VsZWN0b3JJdGVtTGlzdCB9IGZyb20gXCIuLi8uLi9ndWkvYmFzZS9Ecm9wRG93blNlbGVjdG9yLmpzXCJcbmltcG9ydCB7IEJyYW5kaW5nRG9tYWluU2VydmljZSB9IGZyb20gXCIuLi8uLi9hcGkvZW50aXRpZXMvc3lzL1NlcnZpY2VzLmpzXCJcbmltcG9ydCB7IExvZ2luQ29udHJvbGxlciB9IGZyb20gXCIuLi8uLi9hcGkvbWFpbi9Mb2dpbkNvbnRyb2xsZXIuanNcIlxuaW1wb3J0IHsgZ2V0Q3VzdG9tTWFpbERvbWFpbnMsIGdldFdoaXRlbGFiZWxEb21haW5JbmZvIH0gZnJvbSBcIi4uLy4uL2FwaS9jb21tb24vdXRpbHMvQ3VzdG9tZXJVdGlscy5qc1wiXG5pbXBvcnQgeyBFbnRpdHlVcGRhdGVEYXRhLCBpc1VwZGF0ZUZvclR5cGVSZWYgfSBmcm9tIFwiLi4vLi4vYXBpL2NvbW1vbi91dGlscy9FbnRpdHlVcGRhdGVVdGlscy5qc1wiXG5pbXBvcnQgeyBsb2NhdG9yIH0gZnJvbSBcIi4uLy4uL2FwaS9tYWluL0NvbW1vbkxvY2F0b3IuanNcIlxuaW1wb3J0IHsgc2hvd0J1eU9yU2V0Tm90aWZpY2F0aW9uRW1haWxEaWFsb2cgfSBmcm9tIFwiLi4vRWRpdE5vdGlmaWNhdGlvbkVtYWlsRGlhbG9nLmpzXCJcblxuYXNzZXJ0TWFpbk9yTm9kZSgpXG5cbmV4cG9ydCBjbGFzcyBXaGl0ZWxhYmVsU2V0dGluZ3NWaWV3ZXIgaW1wbGVtZW50cyBVcGRhdGFibGVTZXR0aW5nc1ZpZXdlciB7XG5cdHByaXZhdGUgX3doaXRlbGFiZWxDb25maWc6IFdoaXRlbGFiZWxDb25maWcgfCBudWxsID0gbnVsbFxuXHRwcml2YXRlIF9jZXJ0aWZpY2F0ZUluZm86IENlcnRpZmljYXRlSW5mbyB8IG51bGwgPSBudWxsXG5cdHByaXZhdGUgX3doaXRlbGFiZWxEb21haW5JbmZvOiBEb21haW5JbmZvIHwgbnVsbCA9IG51bGxcblx0cHJpdmF0ZSBfY3VzdG9tSnNvblRoZW1lOiBUaGVtZUN1c3RvbWl6YXRpb25zIHwgbnVsbCA9IG51bGxcblx0cHJpdmF0ZSBfY3VzdG9tZXI6IExhenlMb2FkZWQ8Q3VzdG9tZXI+XG5cdHByaXZhdGUgX2N1c3RvbWVySW5mbzogTGF6eUxvYWRlZDxDdXN0b21lckluZm8+XG5cdHByaXZhdGUgX3BsYW5Db25maWc6IExhenlMb2FkZWQ8UGxhbkNvbmZpZ3VyYXRpb24+XG5cdHByaXZhdGUgX2N1c3RvbWVyUHJvcGVydGllczogTGF6eUxvYWRlZDxDdXN0b21lclByb3BlcnRpZXM+XG5cdHByaXZhdGUgX2xhc3RCb29raW5nOiBCb29raW5nIHwgbnVsbFxuXHRwcml2YXRlIF9lbnRpdHlDbGllbnQ6IEVudGl0eUNsaWVudFxuXHRwcml2YXRlIF9sb2dpbnM6IExvZ2luQ29udHJvbGxlclxuXG5cdGNvbnN0cnVjdG9yKGVudGl0eUNsaWVudDogRW50aXR5Q2xpZW50LCBsb2dpbnM6IExvZ2luQ29udHJvbGxlcikge1xuXHRcdHRoaXMudmlldyA9IHRoaXMudmlldy5iaW5kKHRoaXMpXG5cdFx0dGhpcy5fZW50aXR5Q2xpZW50ID0gZW50aXR5Q2xpZW50XG5cdFx0dGhpcy5fbG9naW5zID0gbG9naW5zXG5cdFx0dGhpcy5fY3VzdG9tZXIgPSBuZXcgTGF6eUxvYWRlZCgoKSA9PiBsb2NhdG9yLmxvZ2lucy5nZXRVc2VyQ29udHJvbGxlcigpLmxvYWRDdXN0b21lcigpKVxuXHRcdHRoaXMuX2N1c3RvbWVySW5mbyA9IG5ldyBMYXp5TG9hZGVkKCgpID0+IGxvY2F0b3IubG9naW5zLmdldFVzZXJDb250cm9sbGVyKCkubG9hZEN1c3RvbWVySW5mbygpKVxuXHRcdHRoaXMuX3BsYW5Db25maWcgPSBuZXcgTGF6eUxvYWRlZCgoKSA9PiBsb2NhdG9yLmxvZ2lucy5nZXRVc2VyQ29udHJvbGxlcigpLmdldFBsYW5Db25maWcoKSlcblx0XHR0aGlzLl9jdXN0b21lclByb3BlcnRpZXMgPSBuZXcgTGF6eUxvYWRlZCgoKSA9PlxuXHRcdFx0dGhpcy5fY3VzdG9tZXIuZ2V0QXN5bmMoKS50aGVuKChjdXN0b21lcikgPT4gbG9jYXRvci5lbnRpdHlDbGllbnQubG9hZChDdXN0b21lclByb3BlcnRpZXNUeXBlUmVmLCBuZXZlck51bGwoY3VzdG9tZXIucHJvcGVydGllcykpKSxcblx0XHQpXG5cdFx0dGhpcy5fbGFzdEJvb2tpbmcgPSBudWxsXG5cblx0XHR0aGlzLl91cGRhdGVGaWVsZHMoKVxuXHR9XG5cblx0dmlldygpOiBDaGlsZHJlbiB7XG5cdFx0Y29uc3QgYnJhbmRpbmdEb21haW5Db25maWcgPSB0aGlzLl9yZW5kZXJCcmFuZGluZ0RvbWFpbkNvbmZpZygpXG5cblx0XHRyZXR1cm4gbShcblx0XHRcdFwiI2dsb2JhbC1zZXR0aW5ncy5maWxsLWFic29sdXRlLnNjcm9sbC5wbHItbFwiLFxuXHRcdFx0YnJhbmRpbmdEb21haW5Db25maWdcblx0XHRcdFx0PyBbXG5cdFx0XHRcdFx0XHRtKFwiLmg0Lm10LWxcIiwgbGFuZy5nZXQoXCJ3aGl0ZWxhYmVsX2xhYmVsXCIpKSxcblx0XHRcdFx0XHRcdG0oXCIuc21hbGxcIiwgbGFuZy5nZXQoXCJ3aGl0ZWxhYmVsRG9tYWluTGlua0luZm9fbXNnXCIpICsgXCIgXCIpLFxuXHRcdFx0XHRcdFx0bShcInNtYWxsLnRleHQtYnJlYWtcIiwgW20oYGFbaHJlZj0ke0luZm9MaW5rLldoaXRlbGFiZWx9XVt0YXJnZXQ9X2JsYW5rXWAsIEluZm9MaW5rLldoaXRlbGFiZWwpXSksXG5cdFx0XHRcdFx0XHR0aGlzLl9yZW5kZXJXaGl0ZWxhYmVsU3RhdHVzU2V0dGluZ3MoKSxcblx0XHRcdFx0XHRcdHRoaXMuX3JlbmRlck5vdGlmaWNhdGlvbkVtYWlsU2V0dGluZ3MoKSxcblx0XHRcdFx0XHRcdG0oXCIuaDQubXQtbFwiLCBsYW5nLmdldChcIndoaXRlbGFiZWxEb21haW5fbGFiZWxcIikpLFxuXHRcdFx0XHRcdFx0YnJhbmRpbmdEb21haW5Db25maWcsXG5cdFx0XHRcdFx0XHR0aGlzLl9yZW5kZXJUaGVtZVNldHRpbmdzKCksXG5cdFx0XHRcdFx0XHR0aGlzLl9yZW5kZXJDdXN0b21NZXRhVGFnc1NldHRpbmdzKCksXG5cdFx0XHRcdFx0XHR0aGlzLl9yZW5kZXJJbXByaW50QW5kUHJpdmFjeVNldHRpbmdzKCksXG5cdFx0XHRcdFx0XHR0aGlzLl9yZW5kZXJEZWZhdWx0R2VybWFuTGFuZ3VhZ2VGaWxlU2V0dGluZ3MoKSxcblx0XHRcdFx0XHRcdHRoaXMuX3JlbmRlcldoaXRlbGFiZWxSZWdpc3RyYXRpb25TZXR0aW5ncygpLFxuXHRcdFx0XHRcdFx0bShcIi5tYi1sXCIpLFxuXHRcdFx0XHQgIF1cblx0XHRcdFx0OiBbbShcIi5mbGV4LWNlbnRlci5pdGVtcy1jZW50ZXIuYnV0dG9uLWhlaWdodC5tdC1sXCIsIHByb2dyZXNzSWNvbigpKV0sXG5cdFx0KVxuXHR9XG5cblx0X3JlbmRlckltcHJpbnRBbmRQcml2YWN5U2V0dGluZ3MoKTogQ2hpbGRyZW4ge1xuXHRcdGNvbnN0IHdoaXRlbGFiZWxDb25maWcgPSB0aGlzLl93aGl0ZWxhYmVsQ29uZmlnXG5cdFx0Y29uc3QgcHJpdmFjeVN0YXRlbWVudFVybCA9IHdoaXRlbGFiZWxDb25maWc/LnByaXZhY3lTdGF0ZW1lbnRVcmwgPz8gXCJcIlxuXHRcdGxldCBvblByaXZhY3lTdGF0ZW1lbnRVcmxDaGFuZ2VkOiAoKF86IHN0cmluZykgPT4gdm9pZCkgfCBudWxsID0gbnVsbFxuXG5cdFx0aWYgKHdoaXRlbGFiZWxDb25maWcpIHtcblx0XHRcdG9uUHJpdmFjeVN0YXRlbWVudFVybENoYW5nZWQgPSAocHJpdmFjeVN0YXRlbWVudFVybCkgPT4ge1xuXHRcdFx0XHR3aGl0ZWxhYmVsQ29uZmlnLnByaXZhY3lTdGF0ZW1lbnRVcmwgPSBwcml2YWN5U3RhdGVtZW50VXJsXG5cblx0XHRcdFx0dGhpcy5fZW50aXR5Q2xpZW50LnVwZGF0ZSh3aGl0ZWxhYmVsQ29uZmlnKVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGNvbnN0IGltcHJpbnRVcmwgPSB3aGl0ZWxhYmVsQ29uZmlnPy5pbXByaW50VXJsID8/IFwiXCJcblx0XHRsZXQgb25JbXByaW50VXJsQ2hhbmdlZDogKChfOiBzdHJpbmcpID0+IHZvaWQpIHwgbnVsbCA9IG51bGxcblxuXHRcdGlmICh3aGl0ZWxhYmVsQ29uZmlnKSB7XG5cdFx0XHRvbkltcHJpbnRVcmxDaGFuZ2VkID0gKGltcHJpbnRVcmwpID0+IHtcblx0XHRcdFx0d2hpdGVsYWJlbENvbmZpZy5pbXByaW50VXJsID0gaW1wcmludFVybFxuXG5cdFx0XHRcdHRoaXMuX2VudGl0eUNsaWVudC51cGRhdGUod2hpdGVsYWJlbENvbmZpZylcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gbShXaGl0ZWxhYmVsSW1wcmludEFuZFByaXZhY3lTZXR0aW5ncywge1xuXHRcdFx0cHJpdmFjeVN0YXRlbWVudFVybCxcblx0XHRcdG9uUHJpdmFjeVN0YXRlbWVudFVybENoYW5nZWQsXG5cdFx0XHRpbXByaW50VXJsLFxuXHRcdFx0b25JbXByaW50VXJsQ2hhbmdlZCxcblx0XHR9KVxuXHR9XG5cblx0X3JlbmRlclRoZW1lU2V0dGluZ3MoKTogQ2hpbGRyZW4ge1xuXHRcdGNvbnN0IGN1c3RvbVRoZW1lID0gdGhpcy5fY3VzdG9tSnNvblRoZW1lXG5cdFx0Y29uc3Qgd2hpdGVsYWJlbENvbmZpZyA9IHRoaXMuX3doaXRlbGFiZWxDb25maWdcblx0XHRjb25zdCB3aGl0ZWxhYmVsRG9tYWluSW5mbyA9IHRoaXMuX3doaXRlbGFiZWxEb21haW5JbmZvXG5cdFx0Y29uc3Qgd2hpdGVsYWJlbFRoZW1lU2V0dGluZ3NBdHRycyA9IHtcblx0XHRcdHdoaXRlbGFiZWxEYXRhOlxuXHRcdFx0XHR3aGl0ZWxhYmVsQ29uZmlnICYmIHdoaXRlbGFiZWxEb21haW5JbmZvICYmIGN1c3RvbVRoZW1lXG5cdFx0XHRcdFx0PyB7XG5cdFx0XHRcdFx0XHRcdGN1c3RvbVRoZW1lLFxuXHRcdFx0XHRcdFx0XHR3aGl0ZWxhYmVsQ29uZmlnLFxuXHRcdFx0XHRcdFx0XHR3aGl0ZWxhYmVsRG9tYWluSW5mbyxcblx0XHRcdFx0XHQgIH1cblx0XHRcdFx0XHQ6IG51bGwsXG5cdFx0fVxuXHRcdHJldHVybiBtKFdoaXRlbGFiZWxUaGVtZVNldHRpbmdzLCB3aGl0ZWxhYmVsVGhlbWVTZXR0aW5nc0F0dHJzKVxuXHR9XG5cblx0X3JlbmRlcldoaXRlbGFiZWxSZWdpc3RyYXRpb25TZXR0aW5ncygpOiBDaGlsZHJlbiB7XG5cdFx0aWYgKCF0aGlzLl9pc1doaXRlbGFiZWxSZWdpc3RyYXRpb25WaXNpYmxlKCkpIHJldHVybiBudWxsXG5cdFx0Y29uc3QgcG9zc2libGVSZWdpc3RyYXRpb25Eb21haW5zOiBTZWxlY3Rvckl0ZW1MaXN0PHN0cmluZyB8IG51bGw+ID0gW1xuXHRcdFx0e1xuXHRcdFx0XHRuYW1lOiBsYW5nLmdldChcImRlYWN0aXZhdGVkX2xhYmVsXCIpLFxuXHRcdFx0XHR2YWx1ZTogbnVsbCxcblx0XHRcdH0gYXMgU2VsZWN0b3JJdGVtPHN0cmluZyB8IG51bGw+LFxuXHRcdF0uY29uY2F0KFxuXHRcdFx0Z2V0Q3VzdG9tTWFpbERvbWFpbnModGhpcy5fY3VzdG9tZXJJbmZvLmdldExvYWRlZCgpKS5tYXAoKGQpID0+IHtcblx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRuYW1lOiBkLmRvbWFpbixcblx0XHRcdFx0XHR2YWx1ZTogZC5kb21haW4sXG5cdFx0XHRcdH1cblx0XHRcdH0pLFxuXHRcdClcblx0XHRsZXQgb25SZWdpc3RyYXRpb25Eb21haW5TZWxlY3RlZDogV2hpdGVsYWJlbFJlZ2lzdHJhdGlvblNldHRpbmdzQXR0cnNbXCJvblJlZ2lzdHJhdGlvbkRvbWFpblNlbGVjdGVkXCJdID0gbm9PcFxuXHRcdGxldCBjdXJyZW50UmVnaXN0cmF0aW9uRG9tYWluOiBzdHJpbmcgfCBudWxsID0gbnVsbFxuXG5cdFx0aWYgKHRoaXMuX3doaXRlbGFiZWxDb25maWcpIHtcblx0XHRcdG9uUmVnaXN0cmF0aW9uRG9tYWluU2VsZWN0ZWQgPSAoZG9tYWluKSA9PiB7XG5cdFx0XHRcdGNsZWFyKG5ldmVyTnVsbCh0aGlzLl93aGl0ZWxhYmVsQ29uZmlnKS53aGl0ZWxhYmVsUmVnaXN0cmF0aW9uRG9tYWlucylcblxuXHRcdFx0XHRpZiAoZG9tYWluKSB7XG5cdFx0XHRcdFx0Y29uc3QgZG9tYWluV3JhcHBlciA9IGNyZWF0ZVN0cmluZ1dyYXBwZXIoe1xuXHRcdFx0XHRcdFx0dmFsdWU6IGRvbWFpbixcblx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdG5ldmVyTnVsbCh0aGlzLl93aGl0ZWxhYmVsQ29uZmlnKS53aGl0ZWxhYmVsUmVnaXN0cmF0aW9uRG9tYWlucy5wdXNoKGRvbWFpbldyYXBwZXIpXG5cdFx0XHRcdH1cblxuXHRcdFx0XHR0aGlzLl9lbnRpdHlDbGllbnQudXBkYXRlKG5ldmVyTnVsbCh0aGlzLl93aGl0ZWxhYmVsQ29uZmlnKSlcblx0XHRcdH1cblxuXHRcdFx0aWYgKHRoaXMuX3doaXRlbGFiZWxDb25maWcud2hpdGVsYWJlbFJlZ2lzdHJhdGlvbkRvbWFpbnMubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRjdXJyZW50UmVnaXN0cmF0aW9uRG9tYWluID0gdGhpcy5fd2hpdGVsYWJlbENvbmZpZy53aGl0ZWxhYmVsUmVnaXN0cmF0aW9uRG9tYWluc1swXS52YWx1ZVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGNvbnN0IHdoaXRlbGFiZWxDb2RlID0gdGhpcy5fd2hpdGVsYWJlbENvbmZpZyA/IHRoaXMuX3doaXRlbGFiZWxDb25maWcud2hpdGVsYWJlbENvZGUgOiBcIlwiXG5cdFx0bGV0IG9uV2hpdGVsYWJlbENvZGVDaGFuZ2VkOiAoXzogc3RyaW5nKSA9PiB2b2lkID0gbm9PcFxuXG5cdFx0aWYgKHRoaXMuX3doaXRlbGFiZWxDb25maWcpIHtcblx0XHRcdG9uV2hpdGVsYWJlbENvZGVDaGFuZ2VkID0gKGNvZGUpID0+IHtcblx0XHRcdFx0bmV2ZXJOdWxsKHRoaXMuX3doaXRlbGFiZWxDb25maWcpLndoaXRlbGFiZWxDb2RlID0gY29kZVxuXG5cdFx0XHRcdHRoaXMuX2VudGl0eUNsaWVudC51cGRhdGUobmV2ZXJOdWxsKHRoaXMuX3doaXRlbGFiZWxDb25maWcpKVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBtKFdoaXRlbGFiZWxSZWdpc3RyYXRpb25TZXR0aW5ncywge1xuXHRcdFx0d2hpdGVsYWJlbENvZGUsXG5cdFx0XHRvbldoaXRlbGFiZWxDb2RlQ2hhbmdlZCxcblx0XHRcdHBvc3NpYmxlUmVnaXN0cmF0aW9uRG9tYWlucyxcblx0XHRcdGN1cnJlbnRSZWdpc3RyYXRpb25Eb21haW4sXG5cdFx0XHRvblJlZ2lzdHJhdGlvbkRvbWFpblNlbGVjdGVkLFxuXHRcdH0pXG5cdH1cblxuXHRfcmVuZGVyRGVmYXVsdEdlcm1hbkxhbmd1YWdlRmlsZVNldHRpbmdzKCk6IENoaWxkcmVuIHtcblx0XHRpZiAoIXRoaXMuX3doaXRlbGFiZWxDb25maWcpIHJldHVybiBudWxsXG5cdFx0aWYgKGxhbmcuY29kZSAhPT0gXCJkZVwiICYmIGxhbmcuY29kZSAhPT0gXCJkZV9zaWVcIikgcmV0dXJuIG51bGxcblx0XHRjb25zdCBjdXN0b21HZXJtYW5MYW5ndWFnZUZpbGU6IEdlcm1hbkxhbmd1YWdlQ29kZSB8IG51bGwgPSBkb3duY2FzdCh0aGlzLl93aGl0ZWxhYmVsQ29uZmlnLmdlcm1hbkxhbmd1YWdlQ29kZSlcblxuXHRcdGNvbnN0IG9uR2VybWFuTGFuZ3VhZ2VGaWxlQ2hhbmdlZCA9IChsYW5ndWFnZUZpbGU6IEdlcm1hbkxhbmd1YWdlQ29kZSkgPT4ge1xuXHRcdFx0aWYgKGxhbmd1YWdlRmlsZSkge1xuXHRcdFx0XHRuZXZlck51bGwodGhpcy5fd2hpdGVsYWJlbENvbmZpZykuZ2VybWFuTGFuZ3VhZ2VDb2RlID0gbGFuZ3VhZ2VGaWxlXG5cblx0XHRcdFx0dGhpcy5fZW50aXR5Q2xpZW50LnVwZGF0ZShuZXZlck51bGwodGhpcy5fd2hpdGVsYWJlbENvbmZpZykpXG5cblx0XHRcdFx0bGFuZy5zZXRMYW5ndWFnZSh7XG5cdFx0XHRcdFx0Y29kZTogbGFuZ3VhZ2VGaWxlLFxuXHRcdFx0XHRcdGxhbmd1YWdlVGFnOiBsYW5nLmxhbmd1YWdlVGFnLFxuXHRcdFx0XHR9KVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGNvbnN0IHdoaXRlbGFiZWxHZXJtYW5MYW5ndWFnZUZpbGVTZXR0aW5nc0F0dHJzID0ge1xuXHRcdFx0Y3VzdG9tR2VybWFuTGFuZ3VhZ2VGaWxlLFxuXHRcdFx0b25HZXJtYW5MYW5ndWFnZUZpbGVDaGFuZ2VkLFxuXHRcdH1cblx0XHRyZXR1cm4gbShXaGl0ZWxhYmVsR2VybWFuTGFuZ3VhZ2VGaWxlU2V0dGluZ3MsIHdoaXRlbGFiZWxHZXJtYW5MYW5ndWFnZUZpbGVTZXR0aW5nc0F0dHJzKVxuXHR9XG5cblx0X3JlbmRlckN1c3RvbU1ldGFUYWdzU2V0dGluZ3MoKTogQ2hpbGRyZW4ge1xuXHRcdGxldCBtZXRhVGFncyA9IFwiXCJcblx0XHRsZXQgb25NZXRhVGFnc0NoYW5nZWQ6IFdoaXRlbGFiZWxDdXN0b21NZXRhVGFnc1NldHRpbmdzQXR0cnNbXCJvbk1ldGFUYWdzQ2hhbmdlZFwiXSB8IG51bGwgPSBudWxsXG5cblx0XHRpZiAodGhpcy5fd2hpdGVsYWJlbENvbmZpZykge1xuXHRcdFx0bWV0YVRhZ3MgPSB0aGlzLl93aGl0ZWxhYmVsQ29uZmlnLm1ldGFUYWdzXG5cblx0XHRcdG9uTWV0YVRhZ3NDaGFuZ2VkID0gKG1ldGFUYWdzKSA9PiB7XG5cdFx0XHRcdG5ldmVyTnVsbCh0aGlzLl93aGl0ZWxhYmVsQ29uZmlnKS5tZXRhVGFncyA9IG1ldGFUYWdzXG5cblx0XHRcdFx0dGhpcy5fZW50aXR5Q2xpZW50LnVwZGF0ZShuZXZlck51bGwodGhpcy5fd2hpdGVsYWJlbENvbmZpZykpXG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Y29uc3Qgd2hpdGVsYWJlbEN1c3RvbU1ldGFUYWdzU2V0dGluZ3NBdHRycyA9IHtcblx0XHRcdG1ldGFUYWdzLFxuXHRcdFx0b25NZXRhVGFnc0NoYW5nZWQsXG5cdFx0fVxuXHRcdHJldHVybiBtKFdoaXRlbGFiZWxDdXN0b21NZXRhVGFnc1NldHRpbmdzLCB3aGl0ZWxhYmVsQ3VzdG9tTWV0YVRhZ3NTZXR0aW5nc0F0dHJzKVxuXHR9XG5cblx0X3JlbmRlcldoaXRlbGFiZWxTdGF0dXNTZXR0aW5ncygpOiBDaGlsZHJlbiB7XG5cdFx0Y29uc3QgcGxhbkNvbmZpZyA9IHRoaXMuX3BsYW5Db25maWcuZ2V0U3luYygpXG5cdFx0aWYgKHBsYW5Db25maWcgPT0gbnVsbCkgcmV0dXJuIG51bGxcblx0XHRjb25zdCB3aGl0ZWxhYmVsQWN0aXZlID0gaXNXaGl0ZWxhYmVsQWN0aXZlKHRoaXMuX2xhc3RCb29raW5nLCBwbGFuQ29uZmlnKVxuXHRcdGNvbnN0IHdoaXRlbGFiZWxTdGF0dXNTZXR0aW5nc0F0dHJzID0ge1xuXHRcdFx0aXNXaGl0ZWxhYmVsQWN0aXZlOiB3aGl0ZWxhYmVsQWN0aXZlLFxuXHRcdH1cblx0XHRyZXR1cm4gbShXaGl0ZWxhYmVsU3RhdHVzU2V0dGluZ3MsIHdoaXRlbGFiZWxTdGF0dXNTZXR0aW5nc0F0dHJzKVxuXHR9XG5cblx0X3JlbmRlckJyYW5kaW5nRG9tYWluQ29uZmlnKCk6IENoaWxkcmVuIHtcblx0XHRjb25zdCBjdXN0b21lckluZm8gPSB0aGlzLl9jdXN0b21lckluZm8uZ2V0U3luYygpXG5cdFx0Y29uc3QgcGxhbkNvbmZpZyA9IHRoaXMuX3BsYW5Db25maWcuZ2V0U3luYygpXG5cblx0XHRpZiAoIWN1c3RvbWVySW5mbyB8fCAhcGxhbkNvbmZpZykgcmV0dXJuIG51bGxcblx0XHRjb25zdCBjZXJ0aWZpY2F0ZUluZm8gPSB0aGlzLl9jZXJ0aWZpY2F0ZUluZm9cblx0XHRjb25zdCBpc1doaXRlbGFiZWxGZWF0dXJlRW5hYmxlZCA9IGlzV2hpdGVsYWJlbEFjdGl2ZSh0aGlzLl9sYXN0Qm9va2luZywgcGxhbkNvbmZpZylcblx0XHRjb25zdCB3aGl0ZWxhYmVsRG9tYWluID0gdGhpcy5fd2hpdGVsYWJlbERvbWFpbkluZm8gPyB0aGlzLl93aGl0ZWxhYmVsRG9tYWluSW5mby5kb21haW4gOiBcIlwiXG5cdFx0Y29uc3Qgd2hpdGVsYWJlbEJyYW5kaW5nRG9tYWluU2V0dGluZ3NBdHRycyA9IHtcblx0XHRcdGN1c3RvbWVySW5mbyxcblx0XHRcdGlzV2hpdGVsYWJlbEZlYXR1cmVFbmFibGVkLFxuXHRcdFx0Y2VydGlmaWNhdGVJbmZvLFxuXHRcdFx0d2hpdGVsYWJlbERvbWFpbixcblx0XHR9XG5cdFx0cmV0dXJuIG0oV2hpdGVsYWJlbEJyYW5kaW5nRG9tYWluU2V0dGluZ3MsIHdoaXRlbGFiZWxCcmFuZGluZ0RvbWFpblNldHRpbmdzQXR0cnMpXG5cdH1cblxuXHRfaXNXaGl0ZWxhYmVsUmVnaXN0cmF0aW9uVmlzaWJsZSgpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gKFxuXHRcdFx0dGhpcy5fY3VzdG9tZXIuaXNMb2FkZWQoKSAmJlxuXHRcdFx0dGhpcy5fY3VzdG9tZXIuZ2V0TG9hZGVkKCkuY3VzdG9taXphdGlvbnMuc29tZSgoYykgPT4gYy5mZWF0dXJlID09PSBGZWF0dXJlVHlwZS5XaGl0ZWxhYmVsUGFyZW50KSAmJlxuXHRcdFx0dGhpcy5fY3VzdG9tZXJJbmZvLmlzTG9hZGVkKCkgJiZcblx0XHRcdGdldFdoaXRlbGFiZWxEb21haW5JbmZvKHRoaXMuX2N1c3RvbWVySW5mby5nZXRMb2FkZWQoKSkgIT0gbnVsbFxuXHRcdClcblx0fVxuXG5cdF90cnlMb2FkV2hpdGVsYWJlbENvbmZpZyhkb21haW5JbmZvOiBEb21haW5JbmZvIHwgbnVsbCk6IFByb21pc2U8XG5cdFx0fCB7XG5cdFx0XHRcdHdoaXRlbGFiZWxDb25maWc6IFdoaXRlbGFiZWxDb25maWdcblx0XHRcdFx0Y2VydGlmaWNhdGVJbmZvOiBDZXJ0aWZpY2F0ZUluZm9cblx0XHQgIH1cblx0XHR8IG51bGxcblx0XHR8IHVuZGVmaW5lZFxuXHQ+IHtcblx0XHRpZiAoZG9tYWluSW5mbyAmJiBkb21haW5JbmZvLndoaXRlbGFiZWxDb25maWcpIHtcblx0XHRcdHJldHVybiBQcm9taXNlLmFsbChbXG5cdFx0XHRcdGxvY2F0b3IuZW50aXR5Q2xpZW50LmxvYWQoV2hpdGVsYWJlbENvbmZpZ1R5cGVSZWYsIGRvbWFpbkluZm8ud2hpdGVsYWJlbENvbmZpZyksXG5cdFx0XHRcdGxvY2F0b3Iuc2VydmljZUV4ZWN1dG9yLmdldChCcmFuZGluZ0RvbWFpblNlcnZpY2UsIG51bGwpLnRoZW4oKHJlc3BvbnNlKSA9PiBuZXZlck51bGwocmVzcG9uc2UuY2VydGlmaWNhdGVJbmZvKSksXG5cdFx0XHRdKS50aGVuKChbd2hpdGVsYWJlbENvbmZpZywgY2VydGlmaWNhdGVJbmZvXSkgPT4gKHtcblx0XHRcdFx0d2hpdGVsYWJlbENvbmZpZyxcblx0XHRcdFx0Y2VydGlmaWNhdGVJbmZvLFxuXHRcdFx0fSkpXG5cdFx0fSBlbHNlIHtcblx0XHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUobnVsbClcblx0XHR9XG5cdH1cblxuXHRhc3luYyBfdXBkYXRlRmllbGRzKCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGF3YWl0IHRoaXMuX3BsYW5Db25maWcuZ2V0QXN5bmMoKVxuXHRcdGNvbnN0IGN1c3RvbWVySW5mbyA9IGF3YWl0IHRoaXMuX2N1c3RvbWVySW5mby5nZXRBc3luYygpXG5cdFx0dGhpcy5fd2hpdGVsYWJlbERvbWFpbkluZm8gPSBnZXRXaGl0ZWxhYmVsRG9tYWluSW5mbyhjdXN0b21lckluZm8pXG5cdFx0Y29uc3QgZGF0YSA9IGF3YWl0IHRoaXMuX3RyeUxvYWRXaGl0ZWxhYmVsQ29uZmlnKHRoaXMuX3doaXRlbGFiZWxEb21haW5JbmZvKVxuXHRcdHRoaXMuX3doaXRlbGFiZWxDb25maWcgPSBkYXRhPy53aGl0ZWxhYmVsQ29uZmlnID8/IG51bGxcblx0XHR0aGlzLl9jZXJ0aWZpY2F0ZUluZm8gPSBkYXRhPy5jZXJ0aWZpY2F0ZUluZm8gPz8gbnVsbFxuXHRcdHJldHVybiBsb2NhdG9yLmVudGl0eUNsaWVudC5sb2FkUmFuZ2UoQm9va2luZ1R5cGVSZWYsIG5ldmVyTnVsbChjdXN0b21lckluZm8uYm9va2luZ3MpLml0ZW1zLCBHRU5FUkFURURfTUFYX0lELCAxLCB0cnVlKS50aGVuKChib29raW5ncykgPT4ge1xuXHRcdFx0dGhpcy5fbGFzdEJvb2tpbmcgPSBib29raW5ncy5sZW5ndGggPT09IDEgPyBib29raW5nc1swXSA6IG51bGxcblx0XHRcdHRoaXMuX2N1c3RvbUpzb25UaGVtZSA9IHRoaXMuX3doaXRlbGFiZWxDb25maWcgPyBnZXRUaGVtZUN1c3RvbWl6YXRpb25zKHRoaXMuX3doaXRlbGFiZWxDb25maWcpIDogbnVsbFxuXHRcdFx0bS5yZWRyYXcoKVxuXHRcdFx0dGhpcy5fY3VzdG9tZXJQcm9wZXJ0aWVzLmdldEFzeW5jKCkudGhlbihtLnJlZHJhdylcblx0XHR9KVxuXHR9XG5cblx0X3JlbmRlck5vdGlmaWNhdGlvbkVtYWlsU2V0dGluZ3MoKTogQ2hpbGRyZW4ge1xuXHRcdGNvbnN0IGN1c3RvbWVyUHJvcGVydGllcyA9IHRoaXMuX2N1c3RvbWVyUHJvcGVydGllcy5nZXRTeW5jKClcblxuXHRcdGlmICghY3VzdG9tZXJQcm9wZXJ0aWVzKSByZXR1cm4gbnVsbFxuXHRcdGNvbnN0IG5vdGlmaWNhdGlvbk1haWxUZW1wbGF0ZXMgPSBjdXN0b21lclByb3BlcnRpZXMubm90aWZpY2F0aW9uTWFpbFRlbXBsYXRlc1xuXG5cdFx0Y29uc3Qgb25BZGRUZW1wbGF0ZSA9ICgpID0+IHtcblx0XHRcdHNob3dCdXlPclNldE5vdGlmaWNhdGlvbkVtYWlsRGlhbG9nKHRoaXMuX2xhc3RCb29raW5nLCB0aGlzLl9jdXN0b21lclByb3BlcnRpZXMpXG5cdFx0fVxuXG5cdFx0Y29uc3Qgb25FZGl0VGVtcGxhdGUgPSAodGVtcGxhdGU6IE5vdGlmaWNhdGlvbk1haWxUZW1wbGF0ZSkgPT4ge1xuXHRcdFx0RWRpdE5vdGlmaWNhdGlvbkVtYWlsRGlhbG9nLnNob3codGVtcGxhdGUsIHRoaXMuX2N1c3RvbWVyUHJvcGVydGllcylcblx0XHR9XG5cblx0XHRjb25zdCBvblJlbW92ZVRlbXBsYXRlID0gKHRlbXBsYXRlOiBOb3RpZmljYXRpb25NYWlsVGVtcGxhdGUpID0+IHtcblx0XHRcdHRoaXMuX3JlbW92ZU5vdGlmaWNhdGlvbk1haWxUZW1wbGF0ZSh0ZW1wbGF0ZSlcblx0XHR9XG5cblx0XHRjb25zdCB3aGl0ZWxhYmVsTm90aWZpY2F0aW9uRW1haWxTZXR0aW5nc0F0dHJzID0ge1xuXHRcdFx0bm90aWZpY2F0aW9uTWFpbFRlbXBsYXRlcyxcblx0XHRcdG9uQWRkVGVtcGxhdGUsXG5cdFx0XHRvbkVkaXRUZW1wbGF0ZSxcblx0XHRcdG9uUmVtb3ZlVGVtcGxhdGUsXG5cdFx0fVxuXHRcdHJldHVybiBtKFdoaXRlbGFiZWxOb3RpZmljYXRpb25FbWFpbFNldHRpbmdzLCB3aGl0ZWxhYmVsTm90aWZpY2F0aW9uRW1haWxTZXR0aW5nc0F0dHJzKVxuXHR9XG5cblx0X3JlbW92ZU5vdGlmaWNhdGlvbk1haWxUZW1wbGF0ZSh0ZW1wbGF0ZTogTm90aWZpY2F0aW9uTWFpbFRlbXBsYXRlKSB7XG5cdFx0c2hvd1Byb2dyZXNzRGlhbG9nKFxuXHRcdFx0XCJwbGVhc2VXYWl0X21zZ1wiLFxuXHRcdFx0dGhpcy5fY3VzdG9tZXJQcm9wZXJ0aWVzLmdldEFzeW5jKCkudGhlbigoY3VzdG9tZXJQcm9wcykgPT4ge1xuXHRcdFx0XHRjb25zdCBpbmRleCA9IGN1c3RvbWVyUHJvcHMubm90aWZpY2F0aW9uTWFpbFRlbXBsYXRlcy5maW5kSW5kZXgoKHQpID0+IHQubGFuZ3VhZ2UgPT09IHRlbXBsYXRlLmxhbmd1YWdlKVxuXG5cdFx0XHRcdGlmIChpbmRleCAhPT0gLTEpIHtcblx0XHRcdFx0XHRjdXN0b21lclByb3BzLm5vdGlmaWNhdGlvbk1haWxUZW1wbGF0ZXMuc3BsaWNlKGluZGV4LCAxKVxuXG5cdFx0XHRcdFx0dGhpcy5fZW50aXR5Q2xpZW50LnVwZGF0ZShjdXN0b21lclByb3BzKVxuXHRcdFx0XHR9XG5cdFx0XHR9KSxcblx0XHQpXG5cdH1cblxuXHRlbnRpdHlFdmVudHNSZWNlaXZlZCh1cGRhdGVzOiBSZWFkb25seUFycmF5PEVudGl0eVVwZGF0ZURhdGE+KTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0cmV0dXJuIHByb21pc2VNYXAodXBkYXRlcywgKHVwZGF0ZSkgPT4ge1xuXHRcdFx0aWYgKGlzVXBkYXRlRm9yVHlwZVJlZihDdXN0b21lclR5cGVSZWYsIHVwZGF0ZSkgJiYgdXBkYXRlLm9wZXJhdGlvbiA9PT0gT3BlcmF0aW9uVHlwZS5VUERBVEUpIHtcblx0XHRcdFx0dGhpcy5fY3VzdG9tZXIucmVzZXQoKVxuXG5cdFx0XHRcdHJldHVybiB0aGlzLl9jdXN0b21lci5nZXRBc3luYygpLnRoZW4oKCkgPT4gbS5yZWRyYXcoKSlcblx0XHRcdH0gZWxzZSBpZiAoaXNVcGRhdGVGb3JUeXBlUmVmKEN1c3RvbWVySW5mb1R5cGVSZWYsIHVwZGF0ZSkgJiYgdXBkYXRlLm9wZXJhdGlvbiA9PT0gT3BlcmF0aW9uVHlwZS5VUERBVEUpIHtcblx0XHRcdFx0dGhpcy5fY3VzdG9tZXJJbmZvLnJlc2V0KClcblxuXHRcdFx0XHRyZXR1cm4gdGhpcy5fdXBkYXRlRmllbGRzKClcblx0XHRcdH0gZWxzZSBpZiAoaXNVcGRhdGVGb3JUeXBlUmVmKFdoaXRlbGFiZWxDb25maWdUeXBlUmVmLCB1cGRhdGUpICYmIHVwZGF0ZS5vcGVyYXRpb24gPT09IE9wZXJhdGlvblR5cGUuVVBEQVRFKSB7XG5cdFx0XHRcdHJldHVybiB0aGlzLl91cGRhdGVGaWVsZHMoKVxuXHRcdFx0fSBlbHNlIGlmIChpc1VwZGF0ZUZvclR5cGVSZWYoQ3VzdG9tZXJQcm9wZXJ0aWVzVHlwZVJlZiwgdXBkYXRlKSAmJiB1cGRhdGUub3BlcmF0aW9uID09PSBPcGVyYXRpb25UeXBlLlVQREFURSkge1xuXHRcdFx0XHR0aGlzLl9jdXN0b21lclByb3BlcnRpZXMucmVzZXQoKVxuXG5cdFx0XHRcdHJldHVybiB0aGlzLl91cGRhdGVGaWVsZHMoKVxuXHRcdFx0fSBlbHNlIGlmIChpc1VwZGF0ZUZvclR5cGVSZWYoQm9va2luZ1R5cGVSZWYsIHVwZGF0ZSkpIHtcblx0XHRcdFx0cmV0dXJuIHRoaXMuX3VwZGF0ZUZpZWxkcygpXG5cdFx0XHR9XG5cdFx0fSkudGhlbihub09wKVxuXHR9XG59XG4iLCJpbXBvcnQgbSwgeyBDaGlsZHJlbiB9IGZyb20gXCJtaXRocmlsXCJcbmltcG9ydCB7IGdldExhbmd1YWdlLCBsYW5nLCBMYW5ndWFnZUNvZGUsIGxhbmd1YWdlQ29kZVRvVGFnLCBsYW5ndWFnZU5hdGl2ZSB9IGZyb20gXCIuLi9taXNjL0xhbmd1YWdlVmlld01vZGVsLmpzXCJcbmltcG9ydCB7IHN0eWxlcyB9IGZyb20gXCIuLi9ndWkvc3R5bGVzLmpzXCJcbmltcG9ydCB0eXBlIHsgRHJvcERvd25TZWxlY3RvckF0dHJzIH0gZnJvbSBcIi4uL2d1aS9iYXNlL0Ryb3BEb3duU2VsZWN0b3IuanNcIlxuaW1wb3J0IHsgRHJvcERvd25TZWxlY3RvciwgU2VsZWN0b3JJdGVtTGlzdCB9IGZyb20gXCIuLi9ndWkvYmFzZS9Ecm9wRG93blNlbGVjdG9yLmpzXCJcbmltcG9ydCB7IGRldmljZUNvbmZpZyB9IGZyb20gXCIuLi9taXNjL0RldmljZUNvbmZpZy5qc1wiXG5pbXBvcnQgeyBUaW1lRm9ybWF0LCBXZWVrU3RhcnQgfSBmcm9tIFwiLi4vYXBpL2NvbW1vbi9UdXRhbm90YUNvbnN0YW50cy5qc1wiXG5pbXBvcnQgeyBkb3duY2FzdCwgaW5jcmVtZW50RGF0ZSwgbm9PcCwgcHJvbWlzZU1hcCB9IGZyb20gXCJAdHV0YW8vdHV0YW5vdGEtdXRpbHNcIlxuaW1wb3J0IHsgVXNlclNldHRpbmdzR3JvdXBSb290VHlwZVJlZiB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL2VudGl0aWVzL3R1dGFub3RhL1R5cGVSZWZzLmpzXCJcbmltcG9ydCB7IGdldEhvdXJDeWNsZSB9IGZyb20gXCIuLi8uLi9jb21tb24vbWlzYy9Gb3JtYXR0ZXJcIlxuaW1wb3J0IHsgVGhlbWVJZCwgdGhlbWVPcHRpb25zLCBUaGVtZVByZWZlcmVuY2UgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2d1aS90aGVtZVwiXG5pbXBvcnQgdHlwZSB7IFVwZGF0YWJsZVNldHRpbmdzVmlld2VyIH0gZnJvbSBcIi4vSW50ZXJmYWNlcy5qc1wiXG5pbXBvcnQgeyBpc0Rlc2t0b3AgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2FwaS9jb21tb24vRW52XCJcbmltcG9ydCB7IGxvY2F0b3IgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2FwaS9tYWluL0NvbW1vbkxvY2F0b3JcIlxuaW1wb3J0IHsgRW50aXR5VXBkYXRlRGF0YSwgaXNVcGRhdGVGb3JUeXBlUmVmIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9hcGkvY29tbW9uL3V0aWxzL0VudGl0eVVwZGF0ZVV0aWxzLmpzXCJcbmltcG9ydCB7IGNsaWVudCB9IGZyb20gXCIuLi9taXNjL0NsaWVudERldGVjdG9yLmpzXCJcblxuZXhwb3J0IGNsYXNzIEFwcGVhcmFuY2VTZXR0aW5nc1ZpZXdlciBpbXBsZW1lbnRzIFVwZGF0YWJsZVNldHRpbmdzVmlld2VyIHtcblx0cHJpdmF0ZSBfY3VzdG9tVGhlbWVzOiBBcnJheTxUaGVtZUlkPiB8IG51bGwgPSBudWxsXG5cblx0b25jcmVhdGUoKSB7XG5cdFx0bG9jYXRvci50aGVtZUNvbnRyb2xsZXIuZ2V0Q3VzdG9tVGhlbWVzKCkudGhlbigodGhlbWVzKSA9PiB7XG5cdFx0XHR0aGlzLl9jdXN0b21UaGVtZXMgPSB0aGVtZXNcblx0XHRcdG0ucmVkcmF3KClcblx0XHR9KVxuXHR9XG5cblx0dmlldygpOiBDaGlsZHJlbiB7XG5cdFx0Y29uc3QgYWN0dWFsTGFuZ3VhZ2VJdGVtczogU2VsZWN0b3JJdGVtTGlzdDxMYW5ndWFnZUNvZGUgfCBudWxsPiA9IGxhbmd1YWdlTmF0aXZlXG5cdFx0XHQubWFwKChsYW5ndWFnZSkgPT4ge1xuXHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdG5hbWU6IGxhbmd1YWdlLnRleHROYW1lLFxuXHRcdFx0XHRcdHZhbHVlOiBsYW5ndWFnZS5jb2RlLFxuXHRcdFx0XHR9XG5cdFx0XHR9KVxuXHRcdFx0LnNvcnQoKGwxLCBsMikgPT4gbDEubmFtZS5sb2NhbGVDb21wYXJlKGwyLm5hbWUpKVxuXHRcdGNvbnN0IGxhbmd1YWdlSXRlbXM6IFNlbGVjdG9ySXRlbUxpc3Q8TGFuZ3VhZ2VDb2RlIHwgbnVsbD4gPSBhY3R1YWxMYW5ndWFnZUl0ZW1zLmNvbmNhdCh7XG5cdFx0XHRuYW1lOiBsYW5nLmdldChcImF1dG9tYXRpY19sYWJlbFwiKSxcblx0XHRcdHZhbHVlOiBudWxsLFxuXHRcdH0pXG5cblx0XHRjb25zdCBsYW5ndWFnZURyb3BEb3duQXR0cnM6IERyb3BEb3duU2VsZWN0b3JBdHRyczxMYW5ndWFnZUNvZGUgfCBudWxsPiA9IHtcblx0XHRcdGxhYmVsOiBcImxhbmd1YWdlX2xhYmVsXCIsXG5cdFx0XHRpdGVtczogbGFuZ3VhZ2VJdGVtcyxcblx0XHRcdC8vIERyb3Bkb3duU2VsZWN0b3JOIHVzZXMgYD09PWAgdG8gY29tcGFyZSBpdGVtcyBzbyBpZiB0aGUgbGFuZ3VhZ2UgaXMgbm90IHNldCB0aGVuIGB1bmRlZmluZWRgIHdpbGwgbm90IG1hdGNoIGBudWxsYFxuXHRcdFx0c2VsZWN0ZWRWYWx1ZTogZGV2aWNlQ29uZmlnLmdldExhbmd1YWdlKCkgfHwgbnVsbCxcblx0XHRcdHNlbGVjdGlvbkNoYW5nZWRIYW5kbGVyOiBhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0ZGV2aWNlQ29uZmlnLnNldExhbmd1YWdlKHZhbHVlKVxuXHRcdFx0XHRjb25zdCBuZXdMYW5ndWFnZSA9IHZhbHVlXG5cdFx0XHRcdFx0PyB7XG5cdFx0XHRcdFx0XHRcdGNvZGU6IHZhbHVlLFxuXHRcdFx0XHRcdFx0XHRsYW5ndWFnZVRhZzogbGFuZ3VhZ2VDb2RlVG9UYWcodmFsdWUpLFxuXHRcdFx0XHRcdCAgfVxuXHRcdFx0XHRcdDogZ2V0TGFuZ3VhZ2UoKVxuXHRcdFx0XHRhd2FpdCBsYW5nLnNldExhbmd1YWdlKG5ld0xhbmd1YWdlKVxuXG5cdFx0XHRcdGlmIChpc0Rlc2t0b3AoKSkge1xuXHRcdFx0XHRcdGF3YWl0IGxvY2F0b3IuZGVza3RvcFNldHRpbmdzRmFjYWRlLmNoYW5nZUxhbmd1YWdlKG5ld0xhbmd1YWdlLmNvZGUsIG5ld0xhbmd1YWdlLmxhbmd1YWdlVGFnKVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0c3R5bGVzLnVwZGF0ZVN0eWxlKFwibWFpblwiKVxuXHRcdFx0XHRtLnJlZHJhdygpXG5cdFx0XHR9LFxuXHRcdH1cblx0XHRjb25zdCB1c2VyU2V0dGluZ3NHcm91cFJvb3QgPSBsb2NhdG9yLmxvZ2lucy5nZXRVc2VyQ29udHJvbGxlcigpLnVzZXJTZXR0aW5nc0dyb3VwUm9vdFxuXHRcdGNvbnN0IGhvdXJGb3JtYXREcm9wRG93bkF0dHJzOiBEcm9wRG93blNlbGVjdG9yQXR0cnM8VGltZUZvcm1hdD4gPSB7XG5cdFx0XHRsYWJlbDogXCJ0aW1lRm9ybWF0X2xhYmVsXCIsXG5cdFx0XHRpdGVtczogW1xuXHRcdFx0XHR7XG5cdFx0XHRcdFx0bmFtZTogbGFuZy5nZXQoXCJ0aW1lRm9ybWF0VHdlbnR5Rm91ckhvdXJfbGFiZWxcIiksXG5cdFx0XHRcdFx0dmFsdWU6IFRpbWVGb3JtYXQuVFdFTlRZX0ZPVVJfSE9VUlMsXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRuYW1lOiBsYW5nLmdldChcInRpbWVGb3JtYXRUd2VsdmVIb3VyX2xhYmVsXCIpLFxuXHRcdFx0XHRcdHZhbHVlOiBUaW1lRm9ybWF0LlRXRUxWRV9IT1VSUyxcblx0XHRcdFx0fSxcblx0XHRcdF0sXG5cdFx0XHRzZWxlY3RlZFZhbHVlOiBkb3duY2FzdCh1c2VyU2V0dGluZ3NHcm91cFJvb3QudGltZUZvcm1hdCksXG5cdFx0XHRzZWxlY3Rpb25DaGFuZ2VkSGFuZGxlcjogKHZhbHVlKSA9PiB7XG5cdFx0XHRcdHVzZXJTZXR0aW5nc0dyb3VwUm9vdC50aW1lRm9ybWF0ID0gdmFsdWVcblx0XHRcdFx0bG9jYXRvci5lbnRpdHlDbGllbnQudXBkYXRlKHVzZXJTZXR0aW5nc0dyb3VwUm9vdClcblx0XHRcdH0sXG5cdFx0fVxuXHRcdGNvbnN0IHdlZWtkYXlGb3JtYXQgPSBuZXcgSW50bC5EYXRlVGltZUZvcm1hdChsYW5nLmxhbmd1YWdlVGFnLCB7XG5cdFx0XHR3ZWVrZGF5OiBcImxvbmdcIixcblx0XHR9KVxuXHRcdGNvbnN0IGNhbGNEYXRlID0gbmV3IERhdGUoKVxuXHRcdGNvbnN0IHN1bmRheU5hbWUgPSB3ZWVrZGF5Rm9ybWF0LmZvcm1hdChpbmNyZW1lbnREYXRlKGNhbGNEYXRlLCAtY2FsY0RhdGUuZ2V0RGF5KCkpKSAvLyBTdW5kYXkgYXMgcmVmZXJlbmNlXG5cblx0XHRjb25zdCBtb25kYXlOYW1lID0gd2Vla2RheUZvcm1hdC5mb3JtYXQoaW5jcmVtZW50RGF0ZShjYWxjRGF0ZSwgMSkpIC8vIE1vbmRheSBpcyBvbmUgZGF5IGxhdGVyXG5cblx0XHRjb25zdCBzYXR1cmRheU5hbWUgPSB3ZWVrZGF5Rm9ybWF0LmZvcm1hdChpbmNyZW1lbnREYXRlKGNhbGNEYXRlLCA1KSkgLy8gU2F0dXJkYXkgaXMgZml2ZSBkYXlzIGxhdGVyXG5cblx0XHRjb25zdCB3ZWVrU3RhcnREcm9wRG93bkF0dHJzOiBEcm9wRG93blNlbGVjdG9yQXR0cnM8V2Vla1N0YXJ0PiA9IHtcblx0XHRcdGxhYmVsOiBcIndlZWtTdGFydF9sYWJlbFwiLFxuXHRcdFx0aXRlbXM6IFtcblx0XHRcdFx0e1xuXHRcdFx0XHRcdG5hbWU6IG1vbmRheU5hbWUsXG5cdFx0XHRcdFx0dmFsdWU6IFdlZWtTdGFydC5NT05EQVksXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRuYW1lOiBzYXR1cmRheU5hbWUsXG5cdFx0XHRcdFx0dmFsdWU6IFdlZWtTdGFydC5TQVRVUkRBWSxcblx0XHRcdFx0fSxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdG5hbWU6IHN1bmRheU5hbWUsXG5cdFx0XHRcdFx0dmFsdWU6IFdlZWtTdGFydC5TVU5EQVksXG5cdFx0XHRcdH0sXG5cdFx0XHRdLFxuXHRcdFx0c2VsZWN0ZWRWYWx1ZTogZG93bmNhc3QodXNlclNldHRpbmdzR3JvdXBSb290LnN0YXJ0T2ZUaGVXZWVrKSxcblx0XHRcdHNlbGVjdGlvbkNoYW5nZWRIYW5kbGVyOiAodmFsdWUpID0+IHtcblx0XHRcdFx0dXNlclNldHRpbmdzR3JvdXBSb290LnN0YXJ0T2ZUaGVXZWVrID0gdmFsdWVcblx0XHRcdFx0bG9jYXRvci5lbnRpdHlDbGllbnQudXBkYXRlKHVzZXJTZXR0aW5nc0dyb3VwUm9vdClcblx0XHRcdH0sXG5cdFx0fVxuXHRcdHJldHVybiBtKFwiLmZpbGwtYWJzb2x1dGUuc2Nyb2xsLnBsci1sLnBiLXhsXCIsIFtcblx0XHRcdG0oXCIuaDQubXQtbFwiLCBsYW5nLmdldChcInNldHRpbmdzRm9yRGV2aWNlX2xhYmVsXCIpKSxcblx0XHRcdG0oRHJvcERvd25TZWxlY3RvciwgbGFuZ3VhZ2VEcm9wRG93bkF0dHJzKSxcblx0XHRcdHRoaXMuX3JlbmRlclRoZW1lU2VsZWN0b3IoKSxcblx0XHRcdG0oXCIuaDQubXQtbFwiLCBsYW5nLmdldChcInVzZXJTZXR0aW5nc19sYWJlbFwiKSksXG5cdFx0XHRtKERyb3BEb3duU2VsZWN0b3IsIGhvdXJGb3JtYXREcm9wRG93bkF0dHJzKSxcblx0XHRcdG0oRHJvcERvd25TZWxlY3Rvciwgd2Vla1N0YXJ0RHJvcERvd25BdHRycyksXG5cdFx0XSlcblx0fVxuXG5cdF9yZW5kZXJUaGVtZVNlbGVjdG9yKCk6IENoaWxkcmVuIHtcblx0XHRpZiAoIWxvY2F0b3IudGhlbWVDb250cm9sbGVyLnNob3VsZEFsbG93Q2hhbmdpbmdUaGVtZSgpIHx8IHRoaXMuX2N1c3RvbVRoZW1lcyA9PSBudWxsKSB7XG5cdFx0XHRyZXR1cm4gbnVsbFxuXHRcdH1cblxuXHRcdGNvbnN0IGN1c3RvbU9wdGlvbnMgPSB0aGlzLl9jdXN0b21UaGVtZXMubWFwKCh0aGVtZUlkKSA9PiB7XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRuYW1lOiB0aGVtZUlkLFxuXHRcdFx0XHR2YWx1ZTogdGhlbWVJZCxcblx0XHRcdH1cblx0XHR9KVxuXG5cdFx0Y29uc3QgdGhlbWVEcm9wRG93bkF0dHJzOiBEcm9wRG93blNlbGVjdG9yQXR0cnM8VGhlbWVQcmVmZXJlbmNlPiA9IHtcblx0XHRcdGxhYmVsOiBcInN3aXRjaENvbG9yVGhlbWVfYWN0aW9uXCIsXG5cdFx0XHRpdGVtczogWy4uLnRoZW1lT3B0aW9ucyhjbGllbnQuaXNDYWxlbmRhckFwcCgpKS5tYXAoKHsgbmFtZSwgdmFsdWUgfSkgPT4gKHsgbmFtZTogbGFuZy5nZXQobmFtZSksIHZhbHVlOiB2YWx1ZSB9KSksIC4uLmN1c3RvbU9wdGlvbnNdLFxuXHRcdFx0c2VsZWN0ZWRWYWx1ZTogbG9jYXRvci50aGVtZUNvbnRyb2xsZXIudGhlbWVQcmVmZXJlbmNlLFxuXHRcdFx0c2VsZWN0aW9uQ2hhbmdlZEhhbmRsZXI6ICh2YWx1ZSkgPT4gbG9jYXRvci50aGVtZUNvbnRyb2xsZXIuc2V0VGhlbWVQcmVmZXJlbmNlKHZhbHVlKSxcblx0XHRcdGRyb3Bkb3duV2lkdGg6IDMwMCxcblx0XHR9XG5cdFx0cmV0dXJuIG0oRHJvcERvd25TZWxlY3RvciwgdGhlbWVEcm9wRG93bkF0dHJzKVxuXHR9XG5cblx0ZW50aXR5RXZlbnRzUmVjZWl2ZWQodXBkYXRlczogUmVhZG9ubHlBcnJheTxFbnRpdHlVcGRhdGVEYXRhPik6IFByb21pc2U8dm9pZD4ge1xuXHRcdHJldHVybiBwcm9taXNlTWFwKHVwZGF0ZXMsICh1cGRhdGUpID0+IHtcblx0XHRcdGlmIChpc1VwZGF0ZUZvclR5cGVSZWYoVXNlclNldHRpbmdzR3JvdXBSb290VHlwZVJlZiwgdXBkYXRlKSkge1xuXHRcdFx0XHRyZXR1cm4gbG9jYXRvci5lbnRpdHlDbGllbnQubG9hZChVc2VyU2V0dGluZ3NHcm91cFJvb3RUeXBlUmVmLCB1cGRhdGUuaW5zdGFuY2VJZCkudGhlbigoc2V0dGluZ3MpID0+IHtcblx0XHRcdFx0XHRsYW5nLnVwZGF0ZUZvcm1hdHMoe1xuXHRcdFx0XHRcdFx0aG91ckN5Y2xlOiBnZXRIb3VyQ3ljbGUoc2V0dGluZ3MpLFxuXHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0bS5yZWRyYXcoKVxuXHRcdFx0XHR9KVxuXHRcdFx0fVxuXHRcdH0pLnRoZW4obm9PcClcblx0fVxufVxuIiwiaW1wb3J0IG0sIHsgQ2hpbGRyZW4gfSBmcm9tIFwibWl0aHJpbFwiXG5pbXBvcnQgdHlwZSB7IEtub3dsZWRnZUJhc2VFbnRyeSwgVGVtcGxhdGVHcm91cFJvb3QgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2FwaS9lbnRpdGllcy90dXRhbm90YS9UeXBlUmVmcy5qc1wiXG5pbXBvcnQgeyBLbm93bGVkZ2VCYXNlRW50cnlUeXBlUmVmIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9hcGkvZW50aXRpZXMvdHV0YW5vdGEvVHlwZVJlZnMuanNcIlxuaW1wb3J0IHsgbGFuZyB9IGZyb20gXCIuLi8uLi9jb21tb24vbWlzYy9MYW5ndWFnZVZpZXdNb2RlbFwiXG5cbmltcG9ydCB7IHNpemUgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2d1aS9zaXplXCJcbmltcG9ydCB7IEVudGl0eUNsaWVudCB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL2NvbW1vbi9FbnRpdHlDbGllbnRcIlxuaW1wb3J0IHsgaXNTYW1lSWQsIGxpc3RJZFBhcnQgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2FwaS9jb21tb24vdXRpbHMvRW50aXR5VXRpbHNcIlxuaW1wb3J0IHsgaGFzQ2FwYWJpbGl0eU9uR3JvdXAgfSBmcm9tIFwiLi4vLi4vY29tbW9uL3NoYXJpbmcvR3JvdXBVdGlsc1wiXG5pbXBvcnQgeyBTaGFyZUNhcGFiaWxpdHkgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2FwaS9jb21tb24vVHV0YW5vdGFDb25zdGFudHNcIlxuaW1wb3J0IHR5cGUgeyBMb2dpbkNvbnRyb2xsZXIgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2FwaS9tYWluL0xvZ2luQ29udHJvbGxlclwiXG5pbXBvcnQgdHlwZSB7IEdyb3VwIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9hcGkvZW50aXRpZXMvc3lzL1R5cGVSZWZzLmpzXCJcbmltcG9ydCB7IExpc3RDb2x1bW5XcmFwcGVyIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvTGlzdENvbHVtbldyYXBwZXJcIlxuaW1wb3J0IHsgS25vd2xlZGdlQmFzZUVudHJ5VmlldyB9IGZyb20gXCIuLi9rbm93bGVkZ2ViYXNlL3ZpZXcvS25vd2xlZGdlQmFzZUVudHJ5Vmlld1wiXG5pbXBvcnQgeyBtZW1vaXplZCwgTkJTUCwgbm9PcCB9IGZyb20gXCJAdHV0YW8vdHV0YW5vdGEtdXRpbHNcIlxuaW1wb3J0IHsgYXNzZXJ0TWFpbk9yTm9kZSB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL2NvbW1vbi9FbnZcIlxuaW1wb3J0IHsgU2VsZWN0YWJsZVJvd0NvbnRhaW5lciwgU2VsZWN0YWJsZVJvd1NlbGVjdGVkU2V0dGVyIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvU2VsZWN0YWJsZVJvd0NvbnRhaW5lci5qc1wiXG5pbXBvcnQgeyBMaXN0RWxlbWVudExpc3RNb2RlbCB9IGZyb20gXCIuLi8uLi9jb21tb24vbWlzYy9MaXN0RWxlbWVudExpc3RNb2RlbC5qc1wiXG5pbXBvcnQgeyBsaXN0U2VsZWN0aW9uS2V5Ym9hcmRTaG9ydGN1dHMsIG9ubHlTaW5nbGVTZWxlY3Rpb24sIFZpcnR1YWxSb3cgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2d1aS9iYXNlL0xpc3RVdGlscy5qc1wiXG5pbXBvcnQgU3RyZWFtIGZyb20gXCJtaXRocmlsL3N0cmVhbVwiXG5pbXBvcnQgeyBMaXN0LCBMaXN0QXR0cnMsIE11bHRpc2VsZWN0TW9kZSwgUmVuZGVyQ29uZmlnIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvYmFzZS9MaXN0LmpzXCJcbmltcG9ydCB7IEJhc2VTZWFyY2hCYXIsIEJhc2VTZWFyY2hCYXJBdHRycyB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL2Jhc2UvQmFzZVNlYXJjaEJhci5qc1wiXG5pbXBvcnQgeyBJY29uQnV0dG9uIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvYmFzZS9JY29uQnV0dG9uLmpzXCJcbmltcG9ydCB7IEljb25zIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvYmFzZS9pY29ucy9JY29ucy5qc1wiXG5pbXBvcnQgQ29sdW1uRW1wdHlNZXNzYWdlQm94IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL2Jhc2UvQ29sdW1uRW1wdHlNZXNzYWdlQm94LmpzXCJcbmltcG9ydCB7IHRoZW1lIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvdGhlbWUuanNcIlxuaW1wb3J0IHsga25vd2xlZGdlQmFzZVNlYXJjaCB9IGZyb20gXCIuLi9rbm93bGVkZ2ViYXNlL21vZGVsL0tub3dsZWRnZUJhc2VTZWFyY2hGaWx0ZXIuanNcIlxuaW1wb3J0IHsgc2hvd0tub3dsZWRnZUJhc2VFZGl0b3IgfSBmcm9tIFwiLi9Lbm93bGVkZ2VCYXNlRWRpdG9yLmpzXCJcbmltcG9ydCB7IGtleU1hbmFnZXIgfSBmcm9tIFwiLi4vLi4vY29tbW9uL21pc2MvS2V5TWFuYWdlci5qc1wiXG5pbXBvcnQgeyBFbnRpdHlVcGRhdGVEYXRhLCBpc1VwZGF0ZUZvclR5cGVSZWYgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2FwaS9jb21tb24vdXRpbHMvRW50aXR5VXBkYXRlVXRpbHMuanNcIlxuaW1wb3J0IHsgTGlzdEF1dG9TZWxlY3RCZWhhdmlvciB9IGZyb20gXCIuLi8uLi9jb21tb24vbWlzYy9EZXZpY2VDb25maWcuanNcIlxuaW1wb3J0IHsgVXBkYXRhYmxlU2V0dGluZ3NEZXRhaWxzVmlld2VyLCBVcGRhdGFibGVTZXR0aW5nc1ZpZXdlciB9IGZyb20gXCIuLi8uLi9jb21tb24vc2V0dGluZ3MvSW50ZXJmYWNlcy5qc1wiXG5cbmFzc2VydE1haW5Pck5vZGUoKVxuXG4vKipcbiAqICBMaXN0IHRoYXQgaXMgcmVuZGVyZWQgd2l0aGluIHRoZSBrbm93bGVkZ2VCYXNlIFNldHRpbmdzXG4gKi9cbmV4cG9ydCBjbGFzcyBLbm93bGVkZ2VCYXNlTGlzdFZpZXcgaW1wbGVtZW50cyBVcGRhdGFibGVTZXR0aW5nc1ZpZXdlciB7XG5cdHByaXZhdGUgc2VhcmNoUXVlcnk6IHN0cmluZyA9IFwiXCJcblx0cHJpdmF0ZSByZXN1bHRJdGVtSWRzOiBBcnJheTxJZFR1cGxlPiA9IFtdXG5cblx0cHJpdmF0ZSBsaXN0TW9kZWw6IExpc3RFbGVtZW50TGlzdE1vZGVsPEtub3dsZWRnZUJhc2VFbnRyeT5cblx0cHJpdmF0ZSBsaXN0U3RhdGVTdWJzY3JpcHRpb246IFN0cmVhbTx1bmtub3duPiB8IG51bGwgPSBudWxsXG5cdHByaXZhdGUgcmVhZG9ubHkgcmVuZGVyQ29uZmlnOiBSZW5kZXJDb25maWc8S25vd2xlZGdlQmFzZUVudHJ5LCBLbm93bGVkZ2VCYXNlUm93PiA9IHtcblx0XHRpdGVtSGVpZ2h0OiBzaXplLmxpc3Rfcm93X2hlaWdodCxcblx0XHRtdWx0aXNlbGVjdGlvbkFsbG93ZWQ6IE11bHRpc2VsZWN0TW9kZS5EaXNhYmxlZCxcblx0XHRzd2lwZTogbnVsbCxcblx0XHRjcmVhdGVFbGVtZW50OiAoZG9tKSA9PiB7XG5cdFx0XHRjb25zdCBrbm93bGVkZ2ViYXNlUm93ID0gbmV3IEtub3dsZWRnZUJhc2VSb3coKVxuXHRcdFx0bS5yZW5kZXIoZG9tLCBrbm93bGVkZ2ViYXNlUm93LnJlbmRlcigpKVxuXHRcdFx0cmV0dXJuIGtub3dsZWRnZWJhc2VSb3dcblx0XHR9LFxuXHR9XG5cdHByaXZhdGUgcmVhZG9ubHkgc2hvcnRjdXRzID0gbGlzdFNlbGVjdGlvbktleWJvYXJkU2hvcnRjdXRzKE11bHRpc2VsZWN0TW9kZS5EaXNhYmxlZCwgKCkgPT4gdGhpcy5saXN0TW9kZWwpXG5cblx0Y29uc3RydWN0b3IoXG5cdFx0cHJpdmF0ZSByZWFkb25seSBlbnRpdHlDbGllbnQ6IEVudGl0eUNsaWVudCxcblx0XHRwcml2YXRlIHJlYWRvbmx5IGxvZ2luczogTG9naW5Db250cm9sbGVyLFxuXHRcdHByaXZhdGUgcmVhZG9ubHkgdGVtcGxhdGVHcm91cFJvb3Q6IFRlbXBsYXRlR3JvdXBSb290LFxuXHRcdHByaXZhdGUgcmVhZG9ubHkgdGVtcGxhdGVHcm91cDogR3JvdXAsXG5cdFx0cHJpdmF0ZSByZWFkb25seSB1cGRhdGVEZXRhaWxzVmlld2VyOiAodmlld2VyOiBLbm93bGVkZ2VCYXNlU2V0dGluZ3NEZXRhaWxzVmlld2VyIHwgbnVsbCkgPT4gdW5rbm93bixcblx0XHRwcml2YXRlIHJlYWRvbmx5IGZvY3VzRGV0YWlsc1ZpZXdlcjogKCkgPT4gdW5rbm93bixcblx0KSB7XG5cdFx0dGhpcy5saXN0TW9kZWwgPSB0aGlzLm1ha2VMaXN0TW9kZWwoKVxuXG5cdFx0dGhpcy5saXN0TW9kZWwubG9hZEluaXRpYWwoKVxuXG5cdFx0Ly8gaGFja3MgZm9yIG9sZCBjb21wb25lbnRzXG5cdFx0dGhpcy52aWV3ID0gdGhpcy52aWV3LmJpbmQodGhpcylcblx0XHR0aGlzLm9uY3JlYXRlID0gdGhpcy5vbmNyZWF0ZS5iaW5kKHRoaXMpXG5cdFx0dGhpcy5vbnJlbW92ZSA9IHRoaXMub25yZW1vdmUuYmluZCh0aGlzKVxuXHR9XG5cblx0b25jcmVhdGUoKSB7XG5cdFx0a2V5TWFuYWdlci5yZWdpc3RlclNob3J0Y3V0cyh0aGlzLnNob3J0Y3V0cylcblx0fVxuXG5cdG9ucmVtb3ZlKCkge1xuXHRcdGtleU1hbmFnZXIudW5yZWdpc3RlclNob3J0Y3V0cyh0aGlzLnNob3J0Y3V0cylcblx0fVxuXG5cdHByaXZhdGUgbWFrZUxpc3RNb2RlbCgpIHtcblx0XHRjb25zdCBsaXN0TW9kZWwgPSBuZXcgTGlzdEVsZW1lbnRMaXN0TW9kZWw8S25vd2xlZGdlQmFzZUVudHJ5Pih7XG5cdFx0XHRzb3J0Q29tcGFyZTogKGE6IEtub3dsZWRnZUJhc2VFbnRyeSwgYjogS25vd2xlZGdlQmFzZUVudHJ5KSA9PiB7XG5cdFx0XHRcdGNvbnN0IHRpdGxlQSA9IGEudGl0bGUudG9VcHBlckNhc2UoKVxuXHRcdFx0XHRjb25zdCB0aXRsZUIgPSBiLnRpdGxlLnRvVXBwZXJDYXNlKClcblx0XHRcdFx0cmV0dXJuIHRpdGxlQSA8IHRpdGxlQiA/IC0xIDogdGl0bGVBID4gdGl0bGVCID8gMSA6IDBcblx0XHRcdH0sXG5cdFx0XHRmZXRjaDogYXN5bmMgKF9sYXN0RmV0Y2hlZEVudGl0eSwgX2NvdW50KSA9PiB7XG5cdFx0XHRcdC8vIGxvYWQgYWxsIGVudHJpZXMgYXQgb25jZSB0byBhcHBseSBjdXN0b20gc29ydCBvcmRlclxuXHRcdFx0XHRjb25zdCBhbGxFbnRyaWVzID0gYXdhaXQgdGhpcy5lbnRpdHlDbGllbnQubG9hZEFsbChLbm93bGVkZ2VCYXNlRW50cnlUeXBlUmVmLCB0aGlzLmdldExpc3RJZCgpKVxuXHRcdFx0XHRyZXR1cm4geyBpdGVtczogYWxsRW50cmllcywgY29tcGxldGU6IHRydWUgfVxuXHRcdFx0fSxcblx0XHRcdGxvYWRTaW5nbGU6IChfbGlzdElkOiBJZCwgZWxlbWVudElkOiBJZCkgPT4ge1xuXHRcdFx0XHRyZXR1cm4gdGhpcy5lbnRpdHlDbGllbnQubG9hZDxLbm93bGVkZ2VCYXNlRW50cnk+KEtub3dsZWRnZUJhc2VFbnRyeVR5cGVSZWYsIFt0aGlzLmdldExpc3RJZCgpLCBlbGVtZW50SWRdKVxuXHRcdFx0fSxcblx0XHRcdGF1dG9TZWxlY3RCZWhhdmlvcjogKCkgPT4gTGlzdEF1dG9TZWxlY3RCZWhhdmlvci5PTERFUixcblx0XHR9KVxuXG5cdFx0bGlzdE1vZGVsLnNldEZpbHRlcigoaXRlbTogS25vd2xlZGdlQmFzZUVudHJ5KSA9PiB0aGlzLnF1ZXJ5RmlsdGVyKGl0ZW0pKVxuXG5cdFx0dGhpcy5saXN0U3RhdGVTdWJzY3JpcHRpb24/LmVuZCh0cnVlKVxuXHRcdHRoaXMubGlzdFN0YXRlU3Vic2NyaXB0aW9uID0gbGlzdE1vZGVsLnN0YXRlU3RyZWFtLm1hcCgoc3RhdGUpID0+IHtcblx0XHRcdHRoaXMub25TZWxlY3Rpb25DaGFuZ2VkKG9ubHlTaW5nbGVTZWxlY3Rpb24oc3RhdGUpKVxuXHRcdFx0bS5yZWRyYXcoKVxuXHRcdH0pXG5cblx0XHRyZXR1cm4gbGlzdE1vZGVsXG5cdH1cblxuXHR2aWV3KCk6IENoaWxkcmVuIHtcblx0XHRyZXR1cm4gbShcblx0XHRcdExpc3RDb2x1bW5XcmFwcGVyLFxuXHRcdFx0e1xuXHRcdFx0XHRoZWFkZXJDb250ZW50OiBtKFxuXHRcdFx0XHRcdFwiLmZsZXguZmxleC1zcGFjZS1iZXR3ZWVuLmNlbnRlci12ZXJ0aWNhbGx5LnBsci1sXCIsXG5cdFx0XHRcdFx0bShCYXNlU2VhcmNoQmFyLCB7XG5cdFx0XHRcdFx0XHR0ZXh0OiB0aGlzLnNlYXJjaFF1ZXJ5LFxuXHRcdFx0XHRcdFx0b25JbnB1dDogKHRleHQpID0+IHRoaXMudXBkYXRlUXVlcnkodGV4dCksXG5cdFx0XHRcdFx0XHRidXN5OiBmYWxzZSxcblx0XHRcdFx0XHRcdG9uS2V5RG93bjogKGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCksXG5cdFx0XHRcdFx0XHRvbkNsZWFyOiAoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdHRoaXMuc2VhcmNoUXVlcnkgPSBcIlwiXG5cdFx0XHRcdFx0XHRcdHRoaXMucmVzdWx0SXRlbUlkcyA9IFtdXG5cdFx0XHRcdFx0XHRcdHRoaXMubGlzdE1vZGVsLnJlYXBwbHlGaWx0ZXIoKVxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdHBsYWNlaG9sZGVyOiBsYW5nLmdldChcInNlYXJjaEtub3dsZWRnZWJhc2VfcGxhY2Vob2xkZXJcIiksXG5cdFx0XHRcdFx0fSBzYXRpc2ZpZXMgQmFzZVNlYXJjaEJhckF0dHJzKSxcblx0XHRcdFx0XHR0aGlzLnVzZXJDYW5FZGl0KClcblx0XHRcdFx0XHRcdD8gbShcblx0XHRcdFx0XHRcdFx0XHRcIi5tci1uZWdhdGl2ZS1zXCIsXG5cdFx0XHRcdFx0XHRcdFx0bShJY29uQnV0dG9uLCB7XG5cdFx0XHRcdFx0XHRcdFx0XHR0aXRsZTogXCJhZGRFbnRyeV9sYWJlbFwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0aWNvbjogSWNvbnMuQWRkLFxuXHRcdFx0XHRcdFx0XHRcdFx0Y2xpY2s6ICgpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0c2hvd0tub3dsZWRnZUJhc2VFZGl0b3IobnVsbCwgdGhpcy50ZW1wbGF0ZUdyb3VwUm9vdClcblx0XHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0fSksXG5cdFx0XHRcdFx0XHQgIClcblx0XHRcdFx0XHRcdDogbnVsbCxcblx0XHRcdFx0KSxcblx0XHRcdH0sXG5cdFx0XHR0aGlzLmxpc3RNb2RlbC5pc0VtcHR5QW5kRG9uZSgpXG5cdFx0XHRcdD8gbShDb2x1bW5FbXB0eU1lc3NhZ2VCb3gsIHtcblx0XHRcdFx0XHRcdGNvbG9yOiB0aGVtZS5saXN0X21lc3NhZ2VfYmcsXG5cdFx0XHRcdFx0XHRpY29uOiBJY29ucy5Cb29rLFxuXHRcdFx0XHRcdFx0bWVzc2FnZTogXCJub0VudHJpZXNfbXNnXCIsXG5cdFx0XHRcdCAgfSlcblx0XHRcdFx0OiBtKExpc3QsIHtcblx0XHRcdFx0XHRcdHJlbmRlckNvbmZpZzogdGhpcy5yZW5kZXJDb25maWcsXG5cdFx0XHRcdFx0XHRzdGF0ZTogdGhpcy5saXN0TW9kZWwuc3RhdGUsXG5cdFx0XHRcdFx0XHRvbkxvYWRNb3JlOiAoKSA9PiB0aGlzLmxpc3RNb2RlbC5sb2FkTW9yZSgpLFxuXHRcdFx0XHRcdFx0b25SZXRyeUxvYWRpbmc6ICgpID0+IHRoaXMubGlzdE1vZGVsLnJldHJ5TG9hZGluZygpLFxuXHRcdFx0XHRcdFx0b25TdG9wTG9hZGluZzogKCkgPT4gdGhpcy5saXN0TW9kZWwuc3RvcExvYWRpbmcoKSxcblx0XHRcdFx0XHRcdG9uU2luZ2xlU2VsZWN0aW9uOiAoaXRlbTogS25vd2xlZGdlQmFzZUVudHJ5KSA9PiB7XG5cdFx0XHRcdFx0XHRcdHRoaXMubGlzdE1vZGVsLm9uU2luZ2xlU2VsZWN0aW9uKGl0ZW0pXG5cdFx0XHRcdFx0XHRcdHRoaXMuZm9jdXNEZXRhaWxzVmlld2VyKClcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRvblNpbmdsZVRvZ2dsaW5nTXVsdGlzZWxlY3Rpb246IG5vT3AsXG5cdFx0XHRcdFx0XHRvblJhbmdlU2VsZWN0aW9uVG93YXJkczogbm9PcCxcblx0XHRcdFx0ICB9IHNhdGlzZmllcyBMaXN0QXR0cnM8S25vd2xlZGdlQmFzZUVudHJ5LCBLbm93bGVkZ2VCYXNlUm93PiksXG5cdFx0KVxuXHR9XG5cblx0YXN5bmMgZW50aXR5RXZlbnRzUmVjZWl2ZWQodXBkYXRlczogUmVhZG9ubHlBcnJheTxFbnRpdHlVcGRhdGVEYXRhPik6IFByb21pc2U8YW55PiB7XG5cdFx0Zm9yIChjb25zdCB1cGRhdGUgb2YgdXBkYXRlcykge1xuXHRcdFx0aWYgKGlzVXBkYXRlRm9yVHlwZVJlZihLbm93bGVkZ2VCYXNlRW50cnlUeXBlUmVmLCB1cGRhdGUpICYmIGlzU2FtZUlkKHRoaXMuZ2V0TGlzdElkKCksIHVwZGF0ZS5pbnN0YW5jZUxpc3RJZCkpIHtcblx0XHRcdFx0YXdhaXQgdGhpcy5saXN0TW9kZWwuZW50aXR5RXZlbnRSZWNlaXZlZCh1cGRhdGUuaW5zdGFuY2VMaXN0SWQsIHVwZGF0ZS5pbnN0YW5jZUlkLCB1cGRhdGUub3BlcmF0aW9uKVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIHdlIG5lZWQgdG8gbWFrZSBhbm90aGVyIHNlYXJjaCBpbiBjYXNlIGl0ZW1zIGhhdmUgY2hhbmdlZFxuXHRcdHRoaXMudXBkYXRlUXVlcnkodGhpcy5zZWFyY2hRdWVyeSlcblx0XHRtLnJlZHJhdygpXG5cdH1cblxuXHRwcml2YXRlIHJlYWRvbmx5IG9uU2VsZWN0aW9uQ2hhbmdlZCA9IG1lbW9pemVkKChpdGVtOiBLbm93bGVkZ2VCYXNlRW50cnkgfCBudWxsKSA9PiB7XG5cdFx0Y29uc3QgZGV0YWlsc1ZpZXdlciA9IGl0ZW0gPT0gbnVsbCA/IG51bGwgOiBuZXcgS25vd2xlZGdlQmFzZVNldHRpbmdzRGV0YWlsc1ZpZXdlcihpdGVtLCAhdGhpcy51c2VyQ2FuRWRpdCgpKVxuXHRcdHRoaXMudXBkYXRlRGV0YWlsc1ZpZXdlcihkZXRhaWxzVmlld2VyKVxuXHR9KVxuXG5cdHByaXZhdGUgcXVlcnlGaWx0ZXIoaXRlbTogS25vd2xlZGdlQmFzZUVudHJ5KSB7XG5cdFx0cmV0dXJuIHRoaXMuc2VhcmNoUXVlcnkgPT09IFwiXCIgPyB0cnVlIDogdGhpcy5yZXN1bHRJdGVtSWRzLmluY2x1ZGVzKGl0ZW0uX2lkKVxuXHR9XG5cblx0cHJpdmF0ZSB1cGRhdGVRdWVyeShxdWVyeTogc3RyaW5nKSB7XG5cdFx0dGhpcy5zZWFyY2hRdWVyeSA9IHF1ZXJ5XG5cdFx0dGhpcy5yZXN1bHRJdGVtSWRzID0ga25vd2xlZGdlQmFzZVNlYXJjaCh0aGlzLnNlYXJjaFF1ZXJ5LCB0aGlzLmxpc3RNb2RlbC5nZXRVbmZpbHRlcmVkQXNBcnJheSgpKS5tYXAoKGl0ZW0pID0+IGl0ZW0uX2lkKVxuXHRcdHRoaXMubGlzdE1vZGVsLnJlYXBwbHlGaWx0ZXIoKVxuXHR9XG5cblx0dXNlckNhbkVkaXQoKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIGhhc0NhcGFiaWxpdHlPbkdyb3VwKHRoaXMubG9naW5zLmdldFVzZXJDb250cm9sbGVyKCkudXNlciwgdGhpcy50ZW1wbGF0ZUdyb3VwLCBTaGFyZUNhcGFiaWxpdHkuV3JpdGUpXG5cdH1cblxuXHRnZXRMaXN0SWQoKTogSWQge1xuXHRcdHJldHVybiB0aGlzLnRlbXBsYXRlR3JvdXBSb290Lmtub3dsZWRnZUJhc2Vcblx0fVxufVxuXG5leHBvcnQgY2xhc3MgS25vd2xlZGdlQmFzZVJvdyBpbXBsZW1lbnRzIFZpcnR1YWxSb3c8S25vd2xlZGdlQmFzZUVudHJ5PiB7XG5cdHRvcDogbnVtYmVyID0gMFxuXHRkb21FbGVtZW50OiBIVE1MRWxlbWVudCB8IG51bGwgPSBudWxsXG5cdGVudGl0eTogS25vd2xlZGdlQmFzZUVudHJ5IHwgbnVsbCA9IG51bGxcblx0cHJpdmF0ZSBlbnRyeVRpdGxlRG9tITogSFRNTEVsZW1lbnRcblx0cHJpdmF0ZSBzZWxlY3Rpb25VcGRhdGVyITogU2VsZWN0YWJsZVJvd1NlbGVjdGVkU2V0dGVyXG5cblx0dXBkYXRlKGVudHJ5OiBLbm93bGVkZ2VCYXNlRW50cnksIHNlbGVjdGVkOiBib29sZWFuKTogdm9pZCB7XG5cdFx0dGhpcy5lbnRpdHkgPSBlbnRyeVxuXG5cdFx0dGhpcy5zZWxlY3Rpb25VcGRhdGVyKHNlbGVjdGVkLCBmYWxzZSlcblxuXHRcdHRoaXMuZW50cnlUaXRsZURvbS50ZXh0Q29udGVudCA9IGVudHJ5LnRpdGxlXG5cdH1cblxuXHRyZW5kZXIoKTogQ2hpbGRyZW4ge1xuXHRcdHJldHVybiBtKFxuXHRcdFx0U2VsZWN0YWJsZVJvd0NvbnRhaW5lcixcblx0XHRcdHtcblx0XHRcdFx0b25TZWxlY3RlZENoYW5nZVJlZjogKHVwZGF0ZXIpID0+ICh0aGlzLnNlbGVjdGlvblVwZGF0ZXIgPSB1cGRhdGVyKSxcblx0XHRcdH0sXG5cdFx0XHRtKFwiLmZsZXguY29sXCIsIFtcblx0XHRcdFx0bShcIi50ZXh0LWVsbGlwc2lzLmJhZGdlLWxpbmUtaGVpZ2h0XCIsIHtcblx0XHRcdFx0XHRvbmNyZWF0ZTogKHZub2RlKSA9PiAodGhpcy5lbnRyeVRpdGxlRG9tID0gdm5vZGUuZG9tIGFzIEhUTUxFbGVtZW50KSxcblx0XHRcdFx0fSksXG5cdFx0XHRcdC8vIHRvIGNyZWF0ZSBhIHNlY29uZCByb3dcblx0XHRcdFx0bShcIi5zbWFsbGVyLm10LXh4c1wiLCBOQlNQKSxcblx0XHRcdF0pLFxuXHRcdClcblx0fVxufVxuXG5leHBvcnQgY2xhc3MgS25vd2xlZGdlQmFzZVNldHRpbmdzRGV0YWlsc1ZpZXdlciBpbXBsZW1lbnRzIFVwZGF0YWJsZVNldHRpbmdzRGV0YWlsc1ZpZXdlciB7XG5cdGNvbnN0cnVjdG9yKHByaXZhdGUgcmVhZG9ubHkgZW50cnk6IEtub3dsZWRnZUJhc2VFbnRyeSwgcHJpdmF0ZSByZWFkb25seSByZWFkb25seTogYm9vbGVhbikge31cblxuXHRyZW5kZXJWaWV3KCk6IENoaWxkcmVuIHtcblx0XHRyZXR1cm4gbShcblx0XHRcdFwiLnBsci1sXCIsXG5cdFx0XHRtKEtub3dsZWRnZUJhc2VFbnRyeVZpZXcsIHtcblx0XHRcdFx0ZW50cnk6IHRoaXMuZW50cnksXG5cdFx0XHRcdG9uVGVtcGxhdGVTZWxlY3RlZDogKHRlbXBsYXRlSWQpID0+IG0ucm91dGUuc2V0KGAvc2V0dGluZ3MvdGVtcGxhdGVzLyR7bGlzdElkUGFydCh0ZW1wbGF0ZUlkKX19YCksXG5cdFx0XHRcdHJlYWRvbmx5OiB0aGlzLnJlYWRvbmx5LFxuXHRcdFx0fSksXG5cdFx0KVxuXHR9XG5cblx0ZW50aXR5RXZlbnRzUmVjZWl2ZWQodXBkYXRlczogUmVhZG9ubHlBcnJheTxFbnRpdHlVcGRhdGVEYXRhPik6IFByb21pc2U8YW55PiB7XG5cdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpXG5cdH1cbn1cbiIsImltcG9ydCBtLCB7IENoaWxkcmVuLCBDb21wb25lbnQsIFZub2RlIH0gZnJvbSBcIm1pdGhyaWxcIlxuaW1wb3J0IHsgTGlzdENvbHVtbldyYXBwZXIgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2d1aS9MaXN0Q29sdW1uV3JhcHBlclwiXG5pbXBvcnQgeyB0aGVtZSB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL3RoZW1lXCJcbmltcG9ydCBDb2x1bW5FbXB0eU1lc3NhZ2VCb3ggZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvYmFzZS9Db2x1bW5FbXB0eU1lc3NhZ2VCb3hcIlxuaW1wb3J0IHsgY3JlYXRlSW5pdGlhbFRlbXBsYXRlTGlzdElmQWxsb3dlZCB9IGZyb20gXCIuLi90ZW1wbGF0ZXMvVGVtcGxhdGVHcm91cFV0aWxzXCJcbmltcG9ydCB7IHNob3dUZW1wbGF0ZUVkaXRvciB9IGZyb20gXCIuL1RlbXBsYXRlRWRpdG9yXCJcbmltcG9ydCB7IEJhc2VTZWFyY2hCYXIsIEJhc2VTZWFyY2hCYXJBdHRycyB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL2Jhc2UvQmFzZVNlYXJjaEJhci5qc1wiXG5pbXBvcnQgeyBsYW5nIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9taXNjL0xhbmd1YWdlVmlld01vZGVsLmpzXCJcbmltcG9ydCB7IEljb25CdXR0b24gfSBmcm9tIFwiLi4vLi4vY29tbW9uL2d1aS9iYXNlL0ljb25CdXR0b24uanNcIlxuaW1wb3J0IHsgSWNvbnMgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2d1aS9iYXNlL2ljb25zL0ljb25zLmpzXCJcblxuZXhwb3J0IHR5cGUgRHVtbXlUZW1wbGF0ZUxpc3RWaWV3QXR0cnMgPSB2b2lkXG5cbmV4cG9ydCBjbGFzcyBEdW1teVRlbXBsYXRlTGlzdFZpZXcgaW1wbGVtZW50cyBDb21wb25lbnQ8RHVtbXlUZW1wbGF0ZUxpc3RWaWV3QXR0cnM+IHtcblx0cHJpdmF0ZSBzZWFyY2hRdWVyeTogc3RyaW5nID0gXCJcIlxuXG5cdHZpZXcodm5vZGU6IFZub2RlPER1bW15VGVtcGxhdGVMaXN0Vmlld0F0dHJzPik6IENoaWxkcmVuIHtcblx0XHRyZXR1cm4gbShcblx0XHRcdExpc3RDb2x1bW5XcmFwcGVyLFxuXHRcdFx0e1xuXHRcdFx0XHRoZWFkZXJDb250ZW50OiBtKFxuXHRcdFx0XHRcdFwiLmZsZXguZmxleC1zcGFjZS1iZXR3ZWVuLmNlbnRlci12ZXJ0aWNhbGx5LnBsci1sXCIsXG5cdFx0XHRcdFx0bShCYXNlU2VhcmNoQmFyLCB7XG5cdFx0XHRcdFx0XHR0ZXh0OiB0aGlzLnNlYXJjaFF1ZXJ5LFxuXHRcdFx0XHRcdFx0b25JbnB1dDogKHRleHQpID0+ICh0aGlzLnNlYXJjaFF1ZXJ5ID0gdGV4dCksXG5cdFx0XHRcdFx0XHRidXN5OiBmYWxzZSxcblx0XHRcdFx0XHRcdG9uS2V5RG93bjogKGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCksXG5cdFx0XHRcdFx0XHRvbkNsZWFyOiAoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdHRoaXMuc2VhcmNoUXVlcnkgPSBcIlwiXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0cGxhY2Vob2xkZXI6IGxhbmcuZ2V0KFwic2VhcmNoVGVtcGxhdGVzX3BsYWNlaG9sZGVyXCIpLFxuXHRcdFx0XHRcdH0gc2F0aXNmaWVzIEJhc2VTZWFyY2hCYXJBdHRycyksXG5cdFx0XHRcdFx0bShcblx0XHRcdFx0XHRcdFwiLm1yLW5lZ2F0aXZlLXNcIixcblx0XHRcdFx0XHRcdG0oSWNvbkJ1dHRvbiwge1xuXHRcdFx0XHRcdFx0XHR0aXRsZTogXCJhZGRUZW1wbGF0ZV9sYWJlbFwiLFxuXHRcdFx0XHRcdFx0XHRpY29uOiBJY29ucy5BZGQsXG5cdFx0XHRcdFx0XHRcdGNsaWNrOiAoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0Ly8gU2V0dGluZ3NWaWV3IHdpbGwgcmVyb3V0ZSB0byB0aGUgZm9sZGVyIGZvciB0aGUgbmV3bHkgY3JlYXRlZCB0ZW1wbGF0ZSBsaXN0IChpZiB0aGVyZSBpcyBvbmUpXG5cdFx0XHRcdFx0XHRcdFx0Y3JlYXRlSW5pdGlhbFRlbXBsYXRlTGlzdElmQWxsb3dlZCgpLnRoZW4oKGdyb3VwUm9vdCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKGdyb3VwUm9vdCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRzaG93VGVtcGxhdGVFZGl0b3IobnVsbCwgZ3JvdXBSb290KVxuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHR9KSxcblx0XHRcdFx0XHQpLFxuXHRcdFx0XHQpLFxuXHRcdFx0fSxcblx0XHRcdG0oXG5cdFx0XHRcdFwiLmZpbGwtYWJzb2x1dGUub3ZlcmZsb3ctaGlkZGVuXCIsXG5cdFx0XHRcdG0oQ29sdW1uRW1wdHlNZXNzYWdlQm94LCB7XG5cdFx0XHRcdFx0Y29sb3I6IHRoZW1lLmxpc3RfbWVzc2FnZV9iZyxcblx0XHRcdFx0XHRpY29uOiBJY29ucy5MaXN0QWx0LFxuXHRcdFx0XHRcdG1lc3NhZ2U6IFwibm9FbnRyaWVzX21zZ1wiLFxuXHRcdFx0XHR9KSxcblx0XHRcdCksXG5cdFx0KVxuXHR9XG59XG4iLCJpbXBvcnQgbSwgeyBDaGlsZCwgQ2hpbGRyZW4sIENvbXBvbmVudCwgVm5vZGUgfSBmcm9tIFwibWl0aHJpbFwiXG5pbXBvcnQgdHlwZSB7IE5hdkJ1dHRvbkF0dHJzIH0gZnJvbSBcIi4uL2d1aS9iYXNlL05hdkJ1dHRvbi5qc1wiXG5pbXBvcnQgeyBpc05hdkJ1dHRvblNlbGVjdGVkLCBOYXZCdXR0b24gfSBmcm9tIFwiLi4vZ3VpL2Jhc2UvTmF2QnV0dG9uLmpzXCJcblxuZXhwb3J0IHR5cGUgU2V0dGluZ3NGb2xkZXJSb3dBdHRycyA9IHtcblx0bWFpbkJ1dHRvbkF0dHJzOiBOYXZCdXR0b25BdHRyc1xuXHQvKipcblx0ICogQW4gZXh0cmEgYnV0dG9uIHdpbGwgYmUgc2hvd24gZWl0aGVyIG9ubHkgd2hlbiB0aGUgcm93IGlzIHNlbGVjdGVkLCBvciBhbHdheXMgaW4gdGhlIGNhc2UgdGhhdCB0aGUgbmF2IGJ1dHRvbiBpcyBkaXNhYmxlZFxuXHQgKi9cblx0ZXh0cmFCdXR0b24/OiBDaGlsZCB8IG51bGxcbn1cblxuZXhwb3J0IGNsYXNzIFNldHRpbmdzRm9sZGVyUm93IGltcGxlbWVudHMgQ29tcG9uZW50PFNldHRpbmdzRm9sZGVyUm93QXR0cnM+IHtcblx0dmlldyh2bm9kZTogVm5vZGU8U2V0dGluZ3NGb2xkZXJSb3dBdHRycz4pOiBDaGlsZHJlbiB7XG5cdFx0Y29uc3QgeyBtYWluQnV0dG9uQXR0cnMsIGV4dHJhQnV0dG9uIH0gPSB2bm9kZS5hdHRyc1xuXHRcdGNvbnN0IGlzU2VsZWN0ZWQgPSBpc05hdkJ1dHRvblNlbGVjdGVkKG1haW5CdXR0b25BdHRycylcblx0XHRjb25zdCBzZWxlY3RvciA9IGAuZm9sZGVyLXJvdy5mbGV4LXN0YXJ0LnBsLWJ1dHRvbi5wci1tJHtpc1NlbGVjdGVkID8gXCIucm93LXNlbGVjdGVkXCIgOiBcIlwifWBcblx0XHRyZXR1cm4gbShzZWxlY3RvciwgW20oTmF2QnV0dG9uLCBtYWluQnV0dG9uQXR0cnMpLCBleHRyYUJ1dHRvbiAmJiBpc1NlbGVjdGVkID8gZXh0cmFCdXR0b24gOiBudWxsXSlcblx0fVxufVxuIiwiaW1wb3J0IHsgTG9naW5Db250cm9sbGVyIH0gZnJvbSBcIi4uL2FwaS9tYWluL0xvZ2luQ29udHJvbGxlci5qc1wiXG5pbXBvcnQgeyBDdXN0b21lclR5cGVSZWYsIEdyb3VwSW5mb1R5cGVSZWYsIEdyb3VwVHlwZVJlZiB9IGZyb20gXCIuLi9hcGkvZW50aXRpZXMvc3lzL1R5cGVSZWZzLmpzXCJcbmltcG9ydCB7IGFzc2VydE5vdE51bGwsIG1hcE51bGxhYmxlLCBuZXZlck51bGwsIHBhZCwgcHJvbWlzZU1hcCwgcmVuZGVyQ3N2LCBzdHJpbmdUb1V0ZjhVaW50OEFycmF5IH0gZnJvbSBcIkB0dXRhby90dXRhbm90YS11dGlsc1wiXG5pbXBvcnQgeyBFbnRpdHlDbGllbnQgfSBmcm9tIFwiLi4vYXBpL2NvbW1vbi9FbnRpdHlDbGllbnQuanNcIlxuaW1wb3J0IHsgRmlsZUNvbnRyb2xsZXIgfSBmcm9tIFwiLi4vZmlsZS9GaWxlQ29udHJvbGxlci5qc1wiXG5pbXBvcnQgeyBjcmVhdGVEYXRhRmlsZSB9IGZyb20gXCIuLi9hcGkvY29tbW9uL0RhdGFGaWxlLmpzXCJcbmltcG9ydCB7IENvdW50ZXJGYWNhZGUgfSBmcm9tIFwiLi4vYXBpL3dvcmtlci9mYWNhZGVzL2xhenkvQ291bnRlckZhY2FkZS5qc1wiXG5pbXBvcnQgeyBDb3VudGVyVHlwZSB9IGZyb20gXCIuLi9hcGkvY29tbW9uL1R1dGFub3RhQ29uc3RhbnRzLmpzXCJcblxuZXhwb3J0IGNvbnN0IENTVl9NSU1FVFlQRSA9IFwidGV4dC9jc3ZcIlxuZXhwb3J0IGNvbnN0IFVTRVJfQ1NWX0ZJTEVOQU1FID0gXCJ1c2Vycy5jc3ZcIlxuXG5pbnRlcmZhY2UgVXNlckV4cG9ydERhdGEge1xuXHRuYW1lOiBzdHJpbmdcblx0bWFpbEFkZHJlc3M6IHN0cmluZ1xuXHRjcmVhdGVkOiBEYXRlXG5cdGRlbGV0ZWQ6IERhdGUgfCBudWxsXG5cdHVzZWRTdG9yYWdlOiBudW1iZXJcblx0YWxpYXNlczogQXJyYXk8c3RyaW5nPlxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZXhwb3J0VXNlckNzdihlbnRpdHlDbGllbnQ6IEVudGl0eUNsaWVudCwgbG9naW5zOiBMb2dpbkNvbnRyb2xsZXIsIGZpbGVDb250cm9sbGVyOiBGaWxlQ29udHJvbGxlciwgY291bnRlckZhY2FkZTogQ291bnRlckZhY2FkZSkge1xuXHRjb25zdCBkYXRhID0gYXdhaXQgbG9hZFVzZXJFeHBvcnREYXRhKGVudGl0eUNsaWVudCwgbG9naW5zLCBjb3VudGVyRmFjYWRlKVxuXHRjb25zdCBjc3YgPSByZW5kZXJDc3YoXG5cdFx0W1wibmFtZVwiLCBcIm1haWwgYWRkcmVzc1wiLCBcImRhdGUgY3JlYXRlZFwiLCBcImRhdGUgZGVsZXRlZFwiLCBcInN0b3JhZ2UgdXNlZCAoaW4gYnl0ZXMpXCIsIFwiYWxpYXNlc1wiXSxcblx0XHRkYXRhLm1hcCgodXNlcikgPT4gW1xuXHRcdFx0dXNlci5uYW1lLFxuXHRcdFx0dXNlci5tYWlsQWRkcmVzcyxcblx0XHRcdGZvcm1hdERhdGUodXNlci5jcmVhdGVkKSxcblx0XHRcdG1hcE51bGxhYmxlKHVzZXIuZGVsZXRlZCwgZm9ybWF0RGF0ZSkgPz8gXCJcIixcblx0XHRcdGAke3VzZXIudXNlZFN0b3JhZ2V9YCxcblx0XHRcdHVzZXIuYWxpYXNlcy5qb2luKFwiIFwiKSxcblx0XHRdKSxcblx0KVxuXHRjb25zdCBkYXRhRmlsZSA9IGNyZWF0ZURhdGFGaWxlKFVTRVJfQ1NWX0ZJTEVOQU1FLCBDU1ZfTUlNRVRZUEUsIHN0cmluZ1RvVXRmOFVpbnQ4QXJyYXkoY3N2KSlcblx0YXdhaXQgZmlsZUNvbnRyb2xsZXIuc2F2ZURhdGFGaWxlKGRhdGFGaWxlKVxufVxuXG5mdW5jdGlvbiBmb3JtYXREYXRlKGRhdGU6IERhdGUpOiBzdHJpbmcge1xuXHRyZXR1cm4gYCR7ZGF0ZS5nZXRGdWxsWWVhcigpfS0ke3BhZChkYXRlLmdldE1vbnRoKCkgKyAxLCAyKX0tJHtwYWQoZGF0ZS5nZXREYXRlKCksIDIpfWBcbn1cblxuLyoqXG4gKiBMb2FkIGRhdGEgZm9yIGVhY2ggdXNlciBhZG1pbmlzdHJhdGVkIGJ5IHRoZSBsb2dnZWQgaW4gdXNlciwgaW4gb3JkZXIgdG8gYmUgZXhwb3J0ZWRcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxvYWRVc2VyRXhwb3J0RGF0YShlbnRpdHlDbGllbnQ6IEVudGl0eUNsaWVudCwgbG9naW5zOiBMb2dpbkNvbnRyb2xsZXIsIGNvdW50ZXJGYWNhZGU6IENvdW50ZXJGYWNhZGUpOiBQcm9taXNlPEFycmF5PFVzZXJFeHBvcnREYXRhPj4ge1xuXHRjb25zdCB7IHVzZXIgfSA9IGxvZ2lucy5nZXRVc2VyQ29udHJvbGxlcigpXG5cdGNvbnN0IHsgdXNlckdyb3VwcyB9ID0gYXdhaXQgZW50aXR5Q2xpZW50LmxvYWQoQ3VzdG9tZXJUeXBlUmVmLCBhc3NlcnROb3ROdWxsKHVzZXIuY3VzdG9tZXIpKVxuXG5cdGNvbnN0IGdyb3Vwc0FkbWluaXN0ZXJlZEJ5VXNlciA9IGF3YWl0IGVudGl0eUNsaWVudC5sb2FkQWxsKEdyb3VwSW5mb1R5cGVSZWYsIHVzZXJHcm91cHMpXG5cblx0Y29uc3QgdXNlZEN1c3RvbWVyU3RvcmFnZUNvdW50ZXJWYWx1ZXMgPSBhd2FpdCBjb3VudGVyRmFjYWRlLnJlYWRBbGxDdXN0b21lckNvdW50ZXJWYWx1ZXMoQ291bnRlclR5cGUuVXNlclN0b3JhZ2VMZWdhY3ksIG5ldmVyTnVsbCh1c2VyLmN1c3RvbWVyKSlcblx0cmV0dXJuIHByb21pc2VNYXAoZ3JvdXBzQWRtaW5pc3RlcmVkQnlVc2VyLCBhc3luYyAoaW5mbykgPT4ge1xuXHRcdGNvbnN0IGdyb3VwID0gYXdhaXQgZW50aXR5Q2xpZW50LmxvYWQoR3JvdXBUeXBlUmVmLCBpbmZvLmdyb3VwKVxuXHRcdGNvbnN0IHVzZXJTdG9yYWdlQ291bnRlclZhbHVlID0gdXNlZEN1c3RvbWVyU3RvcmFnZUNvdW50ZXJWYWx1ZXMuZmluZCgoY291bnRlclZhbHVlKSA9PiBjb3VudGVyVmFsdWUuY291bnRlcklkID09PSBncm91cC5zdG9yYWdlQ291bnRlcilcblx0XHRjb25zdCB1c2VkU3RvcmFnZSA9IHVzZXJTdG9yYWdlQ291bnRlclZhbHVlICE9IG51bGwgPyBOdW1iZXIodXNlclN0b3JhZ2VDb3VudGVyVmFsdWUudmFsdWUpIDogMFxuXG5cdFx0cmV0dXJuIHtcblx0XHRcdG5hbWU6IGluZm8ubmFtZSxcblx0XHRcdG1haWxBZGRyZXNzOiBpbmZvLm1haWxBZGRyZXNzID8/IFwiXCIsXG5cdFx0XHRjcmVhdGVkOiBpbmZvLmNyZWF0ZWQsXG5cdFx0XHRkZWxldGVkOiBpbmZvLmRlbGV0ZWQsXG5cdFx0XHR1c2VkU3RvcmFnZSxcblx0XHRcdGFsaWFzZXM6IGluZm8ubWFpbEFkZHJlc3NBbGlhc2VzLm1hcCgoYWxpYXMpID0+IGFsaWFzLm1haWxBZGRyZXNzKSxcblx0XHR9XG5cdH0pXG59XG4iLCJpbXBvcnQgbSwgeyBDaGlsZHJlbiB9IGZyb20gXCJtaXRocmlsXCJcbmltcG9ydCB0eXBlIHsgVXBkYXRhYmxlU2V0dGluZ3NWaWV3ZXIgfSBmcm9tIFwiLi9JbnRlcmZhY2VzLmpzXCJcbmltcG9ydCB7IGdldFJlZmVycmFsTGluaywgUmVmZXJyYWxMaW5rVmlld2VyIH0gZnJvbSBcIi4uL21pc2MvbmV3cy9pdGVtcy9SZWZlcnJhbExpbmtWaWV3ZXIuanNcIlxuaW1wb3J0IHsgbG9jYXRvciB9IGZyb20gXCIuLi9hcGkvbWFpbi9Db21tb25Mb2NhdG9yLmpzXCJcbmltcG9ydCB7IEVudGl0eVVwZGF0ZURhdGEgfSBmcm9tIFwiLi4vYXBpL2NvbW1vbi91dGlscy9FbnRpdHlVcGRhdGVVdGlscy5qc1wiXG5cbi8qKlxuICogU2VjdGlvbiBpbiB1c2VyIHNldHRpbmdzIHRvIGRpc3BsYXkgdGhlIHJlZmVycmFsIGxpbmsgYW5kIGxldCB1c2VycyBzaGFyZSBpdC5cbiAqL1xuZXhwb3J0IGNsYXNzIFJlZmVycmFsU2V0dGluZ3NWaWV3ZXIgaW1wbGVtZW50cyBVcGRhdGFibGVTZXR0aW5nc1ZpZXdlciB7XG5cdHByaXZhdGUgcmVmZXJyYWxMaW5rOiBzdHJpbmcgPSBcIlwiXG5cblx0Y29uc3RydWN0b3IoKSB7XG5cdFx0dGhpcy5yZWZyZXNoUmVmZXJyYWxMaW5rKClcblx0fVxuXG5cdHZpZXcoKTogQ2hpbGRyZW4ge1xuXHRcdHJldHVybiBtKFwiLm10LWwucGxyLWwucGIteGxcIiwgbShSZWZlcnJhbExpbmtWaWV3ZXIsIHsgcmVmZXJyYWxMaW5rOiB0aGlzLnJlZmVycmFsTGluayB9KSlcblx0fVxuXG5cdGFzeW5jIGVudGl0eUV2ZW50c1JlY2VpdmVkKHVwZGF0ZXM6IFJlYWRvbmx5QXJyYXk8RW50aXR5VXBkYXRlRGF0YT4pOiBQcm9taXNlPHZvaWQ+IHtcblx0XHQvLyBjYW4gYmUgYSBub29wIGJlY2F1c2UgdGhlIHJlZmVycmFsIGNvZGUgd2lsbCBuZXZlciBjaGFuZ2Ugb25jZSBpdCB3YXMgY3JlYXRlZFxuXHRcdC8vIHdlIHRyaWdnZXIgY3JlYXRpb24gaW4gdGhlIGNvbnN0cnVjdG9yIGlmIHRoZXJlIGlzIG5vIGNvZGUgeWV0XG5cdH1cblxuXHRwcml2YXRlIHJlZnJlc2hSZWZlcnJhbExpbmsoKSB7XG5cdFx0Z2V0UmVmZXJyYWxMaW5rKGxvY2F0b3IubG9naW5zLmdldFVzZXJDb250cm9sbGVyKCkpLnRoZW4oKGxpbmspID0+IHtcblx0XHRcdHRoaXMucmVmZXJyYWxMaW5rID0gbGlua1xuXHRcdFx0bS5yZWRyYXcoKVxuXHRcdH0pXG5cdH1cbn1cbiIsImltcG9ydCBtLCB7IENoaWxkcmVuLCBDb21wb25lbnQsIFZub2RlIH0gZnJvbSBcIm1pdGhyaWxcIlxuaW1wb3J0IHsgQnV0dG9uLCBCdXR0b25UeXBlIH0gZnJvbSBcIi4uL2d1aS9iYXNlL0J1dHRvbi5qc1wiXG5pbXBvcnQgeyBnZXRMaWdodE9yRGFya1R1dGFMb2dvIH0gZnJvbSBcIi4uL2d1aS90aGVtZS5qc1wiXG5pbXBvcnQgeyBzaG93VXNlckVycm9yIH0gZnJvbSBcIi4uL21pc2MvRXJyb3JIYW5kbGVySW1wbC5qc1wiXG5pbXBvcnQgeyBsb2NhdG9yIH0gZnJvbSBcIi4uL2FwaS9tYWluL0NvbW1vbkxvY2F0b3IuanNcIlxuaW1wb3J0IHsgSW5mb0xpbmsgfSBmcm9tIFwiLi4vbWlzYy9MYW5ndWFnZVZpZXdNb2RlbC5qc1wiXG5pbXBvcnQgeyBuZXdNYWlsRWRpdG9yRnJvbVRlbXBsYXRlIH0gZnJvbSBcIi4uLy4uL21haWwtYXBwL21haWwvZWRpdG9yL01haWxFZGl0b3IuanNcIlxuaW1wb3J0IHsgVXNlckVycm9yIH0gZnJvbSBcIi4uL2FwaS9tYWluL1VzZXJFcnJvci5qc1wiXG5pbXBvcnQgeyBjbGllbnRJbmZvU3RyaW5nLCBnZXRMb2dBdHRhY2htZW50cyB9IGZyb20gXCIuLi9taXNjL0Vycm9yUmVwb3J0ZXIuanNcIlxuaW1wb3J0IHsgRXh0ZXJuYWxMaW5rIH0gZnJvbSBcIi4uL2d1aS9iYXNlL0V4dGVybmFsTGluay5qc1wiXG5pbXBvcnQgeyBpc0FwcCB9IGZyb20gXCIuLi9hcGkvY29tbW9uL0Vudi5qc1wiXG5pbXBvcnQgeyBweCwgc2l6ZSB9IGZyb20gXCIuLi9ndWkvc2l6ZS5qc1wiXG5pbXBvcnQgeyBjbGllbnQgfSBmcm9tIFwiLi4vbWlzYy9DbGllbnREZXRlY3Rvci5qc1wiXG5cbmludGVyZmFjZSBBYm91dERpYWxvZ0F0dHJzIHtcblx0b25TaG93U2V0dXBXaXphcmQ6ICgpID0+IHVua25vd25cbn1cblxuZXhwb3J0IGNsYXNzIEFib3V0RGlhbG9nIGltcGxlbWVudHMgQ29tcG9uZW50PEFib3V0RGlhbG9nQXR0cnM+IHtcblx0dmlldyh2bm9kZTogVm5vZGU8QWJvdXREaWFsb2dBdHRycz4pOiBDaGlsZHJlbiB7XG5cdFx0cmV0dXJuIG0oXCIuZmxleC5jb2xcIiwgW1xuXHRcdFx0bShcIi5jZW50ZXIubXRcIiwgXCJQb3dlcmVkIGJ5XCIpLFxuXHRcdFx0bShcblx0XHRcdFx0XCIuY2VudGVyXCIsXG5cdFx0XHRcdC8vIE91ciBsb2dvIG11c3QgYmUgcGFkZGVkIGJ1dCBhdCBsZWFzdCBhIGNlcnRhaW4gYW1vdW50LlxuXHRcdFx0XHQvLyBUaGlzIG1pZ2h0IGJlIGEgYml0IG1vcmUgdGhhbiBuZWVkZWQgYnV0IGl0J3Mgc2FmZS5cblx0XHRcdFx0e1xuXHRcdFx0XHRcdHN0eWxlOiB7XG5cdFx0XHRcdFx0XHRtYXJnaW46IHB4KHNpemUudnBhZF94bCksXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0fSxcblx0XHRcdFx0bS50cnVzdChnZXRMaWdodE9yRGFya1R1dGFMb2dvKGNsaWVudC5pc0NhbGVuZGFyQXBwKCkpKSxcblx0XHRcdCksXG5cdFx0XHRtKFwiLmZsZXguanVzdGlmeS1jZW50ZXIuZmxleC13cmFwXCIsIFtcblx0XHRcdFx0bShFeHRlcm5hbExpbmssIHtcblx0XHRcdFx0XHRocmVmOiBJbmZvTGluay5Ib21lUGFnZSxcblx0XHRcdFx0XHR0ZXh0OiBcIldlYnNpdGVcIixcblx0XHRcdFx0XHRpc0NvbXBhbnlTaXRlOiB0cnVlLFxuXHRcdFx0XHRcdHNwZWNpYWxUeXBlOiBcIm1lXCIsXG5cdFx0XHRcdFx0Y2xhc3M6IFwibWxyIG10XCIsXG5cdFx0XHRcdH0pLFxuXHRcdFx0XHRtKEV4dGVybmFsTGluaywge1xuXHRcdFx0XHRcdGhyZWY6IFwiaHR0cHM6Ly9naXRodWIuY29tL3R1dGFvL3R1dGFub3RhL3JlbGVhc2VzXCIsXG5cdFx0XHRcdFx0dGV4dDogXCJSZWxlYXNlc1wiLFxuXHRcdFx0XHRcdGlzQ29tcGFueVNpdGU6IGZhbHNlLFxuXHRcdFx0XHRcdGNsYXNzOiBcIm1sciBtdFwiLFxuXHRcdFx0XHR9KSxcblx0XHRcdF0pLFxuXHRcdFx0bShcIi5mbGV4Lmp1c3RpZnktY2VudGVyLnNlbGVjdGFibGUuZmxleC13cmFwXCIsIFtcblx0XHRcdFx0bShcInAuY2VudGVyLm10Lm1sclwiLCBgdiR7ZW52LnZlcnNpb25OdW1iZXJ9YCksXG5cdFx0XHRcdG0oXCJwLnRleHQtY2VudGVyLm1sclwiLCBcIkdQTC12M1wiKSxcblx0XHRcdFx0bShcInBcIiwgXCLCqSAyMDI0IFR1dGFvIEdtYkhcIiksXG5cdFx0XHRdKSxcblx0XHRcdHRoaXMuX3NlbmRMb2dzTGluaygpLFxuXHRcdFx0Ly8gd3JhcCBpdCBpbiBhIGRpdiBzbyB0aGF0IGl0J3Mgbm90IGZpbGxpbmcgdGhlIHdob2xlIHdpZHRoXG5cdFx0XHRpc0FwcCgpXG5cdFx0XHRcdD8gbShcblx0XHRcdFx0XHRcdFwiXCIsXG5cdFx0XHRcdFx0XHRtKEJ1dHRvbiwge1xuXHRcdFx0XHRcdFx0XHRsYWJlbDogXCJzaG93V2VsY29tZURpYWxvZ19hY3Rpb25cIixcblx0XHRcdFx0XHRcdFx0dHlwZTogQnV0dG9uVHlwZS5QcmltYXJ5LFxuXHRcdFx0XHRcdFx0XHRjbGljazogdm5vZGUuYXR0cnMub25TaG93U2V0dXBXaXphcmQsXG5cdFx0XHRcdFx0XHR9KSxcblx0XHRcdFx0ICApXG5cdFx0XHRcdDogbnVsbCxcblx0XHRdKVxuXHR9XG5cblx0X3NlbmRMb2dzTGluaygpOiBDaGlsZHJlbiB7XG5cdFx0cmV0dXJuIG0oXG5cdFx0XHRcIi5tdFwiLFxuXHRcdFx0bShCdXR0b24sIHtcblx0XHRcdFx0bGFiZWw6IFwic2VuZExvZ3NfYWN0aW9uXCIsXG5cdFx0XHRcdGNsaWNrOiAoKSA9PiB0aGlzLl9zZW5kRGV2aWNlTG9ncygpLFxuXHRcdFx0XHR0eXBlOiBCdXR0b25UeXBlLlByaW1hcnksXG5cdFx0XHR9KSxcblx0XHQpXG5cdH1cblxuXHRhc3luYyBfc2VuZERldmljZUxvZ3MoKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0Y29uc3QgdGltZXN0YW1wID0gbmV3IERhdGUoKVxuXHRcdGNvbnN0IGF0dGFjaG1lbnRzID0gYXdhaXQgZ2V0TG9nQXR0YWNobWVudHModGltZXN0YW1wKVxuXHRcdGNvbnN0IG1haWxib3hEZXRhaWxzID0gYXdhaXQgbG9jYXRvci5tYWlsYm94TW9kZWwuZ2V0VXNlck1haWxib3hEZXRhaWxzKClcblx0XHRsZXQgeyBtZXNzYWdlLCB0eXBlLCBjbGllbnQgfSA9IGNsaWVudEluZm9TdHJpbmcodGltZXN0YW1wLCB0cnVlKVxuXHRcdG1lc3NhZ2UgPSBtZXNzYWdlXG5cdFx0XHQuc3BsaXQoXCJcXG5cIilcblx0XHRcdC5maWx0ZXIoQm9vbGVhbilcblx0XHRcdC5tYXAoKGwpID0+IGA8ZGl2PiR7bH08YnI+PC9kaXY+YClcblx0XHRcdC5qb2luKFwiXCIpXG5cblx0XHR0cnkge1xuXHRcdFx0Y29uc3QgZWRpdG9yID0gYXdhaXQgbmV3TWFpbEVkaXRvckZyb21UZW1wbGF0ZShcblx0XHRcdFx0bWFpbGJveERldGFpbHMsXG5cdFx0XHRcdHt9LFxuXHRcdFx0XHRgRGV2aWNlIGxvZ3MgdiR7ZW52LnZlcnNpb25OdW1iZXJ9IC0gJHt0eXBlfSAtICR7Y2xpZW50fWAsXG5cdFx0XHRcdG1lc3NhZ2UsXG5cdFx0XHRcdGF0dGFjaG1lbnRzLFxuXHRcdFx0XHR0cnVlLFxuXHRcdFx0KVxuXHRcdFx0ZWRpdG9yLnNob3coKVxuXHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdGlmIChlIGluc3RhbmNlb2YgVXNlckVycm9yKSB7XG5cdFx0XHRcdGF3YWl0IHNob3dVc2VyRXJyb3IoZSlcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRocm93IGVcblx0XHRcdH1cblx0XHR9XG5cdH1cbn1cbiIsImltcG9ydCBtLCB7IENoaWxkcmVuLCBDb21wb25lbnQsIFZub2RlIH0gZnJvbSBcIm1pdGhyaWxcIlxuaW1wb3J0IHR5cGUgeyBCdXR0b25BdHRycyB9IGZyb20gXCIuL0J1dHRvbi5qc1wiXG5pbXBvcnQgeyBCdXR0b24gfSBmcm9tIFwiLi9CdXR0b24uanNcIlxuaW1wb3J0IHsgYXNzZXJ0TWFpbk9yTm9kZSB9IGZyb20gXCIuLi8uLi9hcGkvY29tbW9uL0VudlwiXG5pbXBvcnQgeyBJY29uQnV0dG9uLCBJY29uQnV0dG9uQXR0cnMgfSBmcm9tIFwiLi9JY29uQnV0dG9uLmpzXCJcblxuYXNzZXJ0TWFpbk9yTm9kZSgpXG5leHBvcnQgdHlwZSBBY3Rpb25CYXJBdHRycyA9IHtcblx0YnV0dG9uczogSWNvbkJ1dHRvbkF0dHJzW11cbn1cblxuLyoqXG4gKiBBbiBhY3Rpb24gYmFyIGlzIGEgYmFyIHRoYXQgY29udGFpbnMgYnV0dG9ucyAoZWl0aGVyIG9uIHRoZSBsZWZ0IG9yIG9uIHRoZSByaWdodCkuXG4gKi9cbmV4cG9ydCBjbGFzcyBBY3Rpb25CYXIgaW1wbGVtZW50cyBDb21wb25lbnQ8QWN0aW9uQmFyQXR0cnM+IHtcblx0dmlldyh2bm9kZTogVm5vZGU8QWN0aW9uQmFyQXR0cnM+KTogQ2hpbGRyZW4ge1xuXHRcdHJldHVybiBtKFxuXHRcdFx0XCIuYWN0aW9uLWJhci5mbGV4LWVuZC5pdGVtcy1jZW50ZXIubWwtYmV0d2Vlbi1zXCIsXG5cdFx0XHR2bm9kZS5hdHRycy5idXR0b25zLm1hcCgoYikgPT4gbShJY29uQnV0dG9uLCBiKSksXG5cdFx0KVxuXHR9XG59XG4iLCJpbXBvcnQgbSwgeyBDaGlsZHJlbiB9IGZyb20gXCJtaXRocmlsXCJcbmltcG9ydCB0eXBlIHsgbGF6eSB9IGZyb20gXCJAdHV0YW8vdHV0YW5vdGEtdXRpbHNcIlxuaW1wb3J0IHsgYXNzZXJ0Tm90TnVsbCB9IGZyb20gXCJAdHV0YW8vdHV0YW5vdGEtdXRpbHNcIlxuaW1wb3J0IHsgVGV4dEZpZWxkIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvYmFzZS9UZXh0RmllbGQuanNcIlxuaW1wb3J0IHsgSWNvbnMgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2d1aS9iYXNlL2ljb25zL0ljb25zXCJcbmltcG9ydCB7IGdldExhbmd1YWdlQ29kZSB9IGZyb20gXCIuL1RlbXBsYXRlRWRpdG9yTW9kZWxcIlxuaW1wb3J0IHsgc2hvd1RlbXBsYXRlRWRpdG9yIH0gZnJvbSBcIi4vVGVtcGxhdGVFZGl0b3JcIlxuaW1wb3J0IHsgRGlhbG9nIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvYmFzZS9EaWFsb2dcIlxuaW1wb3J0IHsgbGFuZywgbGFuZ3VhZ2VCeUNvZGUsIFRyYW5zbGF0aW9uS2V5IH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9taXNjL0xhbmd1YWdlVmlld01vZGVsXCJcbmltcG9ydCB0eXBlIHsgRW1haWxUZW1wbGF0ZSB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL2VudGl0aWVzL3R1dGFub3RhL1R5cGVSZWZzLmpzXCJcbmltcG9ydCB7IFRlbXBsYXRlR3JvdXBSb290VHlwZVJlZiB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL2VudGl0aWVzL3R1dGFub3RhL1R5cGVSZWZzLmpzXCJcbmltcG9ydCB7IGxvY2F0b3IgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2FwaS9tYWluL0NvbW1vbkxvY2F0b3JcIlxuaW1wb3J0IHsgRW50aXR5Q2xpZW50IH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9hcGkvY29tbW9uL0VudGl0eUNsaWVudFwiXG5pbXBvcnQgeyBURU1QTEFURV9TSE9SVENVVF9QUkVGSVggfSBmcm9tIFwiLi4vdGVtcGxhdGVzL21vZGVsL1RlbXBsYXRlUG9wdXBNb2RlbFwiXG5pbXBvcnQgeyBBY3Rpb25CYXIgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2d1aS9iYXNlL0FjdGlvbkJhci5qc1wiXG5pbXBvcnQgeyBodG1sU2FuaXRpemVyIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9taXNjL0h0bWxTYW5pdGl6ZXIuanNcIlxuaW1wb3J0IHsgRW50aXR5VXBkYXRlRGF0YSB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL2NvbW1vbi91dGlscy9FbnRpdHlVcGRhdGVVdGlscy5qc1wiXG5pbXBvcnQgeyBVcGRhdGFibGVTZXR0aW5nc0RldGFpbHNWaWV3ZXIgfSBmcm9tIFwiLi4vLi4vY29tbW9uL3NldHRpbmdzL0ludGVyZmFjZXMuanNcIlxuXG5leHBvcnQgY2xhc3MgVGVtcGxhdGVEZXRhaWxzVmlld2VyIGltcGxlbWVudHMgVXBkYXRhYmxlU2V0dGluZ3NEZXRhaWxzVmlld2VyIHtcblx0Ly8gd2UncmUgbm90IG1lbW9pemluZyB0aGUgdHJhbnNsYXRlZCBsYW5ndWFnZSBuYW1lIHNpbmNlIHRoaXMgaXMgbm90IGEgcHJvcGVyIG1pdGhyaWwgY29tcG9uZW50IGFuZCBtYXkgc3RpY2sgYXJvdW5kIGFmdGVyIGEgbGFuZ3VhZ2Vcblx0Ly8gc3dpdGNoLlxuXHRwcml2YXRlIHJlYWRvbmx5IHNhbml0aXplZENvbnRlbnRzOiBBcnJheTx7IHRleHQ6IHN0cmluZzsgbGFuZ3VhZ2VDb2RlVGV4dElkOiBUcmFuc2xhdGlvbktleSB9PlxuXG5cdGNvbnN0cnVjdG9yKHByaXZhdGUgcmVhZG9ubHkgdGVtcGxhdGU6IEVtYWlsVGVtcGxhdGUsIHByaXZhdGUgcmVhZG9ubHkgZW50aXR5Q2xpZW50OiBFbnRpdHlDbGllbnQsIHJlYWRvbmx5IGlzUmVhZE9ubHk6IGxhenk8Ym9vbGVhbj4pIHtcblx0XHR0aGlzLnNhbml0aXplZENvbnRlbnRzID0gdGVtcGxhdGUuY29udGVudHMubWFwKChlbWFpbFRlbXBsYXRlQ29udGVudCkgPT4gKHtcblx0XHRcdHRleHQ6IGh0bWxTYW5pdGl6ZXIuc2FuaXRpemVIVE1MKGVtYWlsVGVtcGxhdGVDb250ZW50LnRleHQsIHsgYmxvY2tFeHRlcm5hbENvbnRlbnQ6IGZhbHNlLCBhbGxvd1JlbGF0aXZlTGlua3M6IHRydWUgfSkuaHRtbCxcblx0XHRcdGxhbmd1YWdlQ29kZVRleHRJZDogbGFuZ3VhZ2VCeUNvZGVbZ2V0TGFuZ3VhZ2VDb2RlKGVtYWlsVGVtcGxhdGVDb250ZW50KV0udGV4dElkLFxuXHRcdH0pKVxuXHR9XG5cblx0cmVhZG9ubHkgcmVuZGVyVmlldzogVXBkYXRhYmxlU2V0dGluZ3NEZXRhaWxzVmlld2VyW1wicmVuZGVyVmlld1wiXSA9ICgpID0+IHtcblx0XHRyZXR1cm4gbShcIiN1c2VyLXZpZXdlci5maWxsLWFic29sdXRlLnNjcm9sbC5wbHItbC5wYi1mbG9hdGluZ1wiLCBbdGhpcy5yZW5kZXJUaXRsZUxpbmUoKSwgdGhpcy5yZW5kZXJDb250ZW50KCldKVxuXHR9XG5cblx0cHJpdmF0ZSByZW5kZXJUaXRsZUxpbmUoKTogQ2hpbGRyZW4ge1xuXHRcdHJldHVybiBtKFwiLmZsZXgubXQtbC5jZW50ZXItdmVydGljYWxseVwiLCBbXG5cdFx0XHRtKFwiLmg0LnRleHQtZWxsaXBzaXNcIiwgdGhpcy50ZW1wbGF0ZS50aXRsZSksXG5cdFx0XHQhdGhpcy5pc1JlYWRPbmx5KClcblx0XHRcdFx0PyBtKEFjdGlvbkJhciwge1xuXHRcdFx0XHRcdFx0YnV0dG9uczogW1xuXHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0dGl0bGU6IFwiZWRpdF9hY3Rpb25cIixcblx0XHRcdFx0XHRcdFx0XHRpY29uOiBJY29ucy5FZGl0LFxuXHRcdFx0XHRcdFx0XHRcdGNsaWNrOiAoKSA9PiB0aGlzLmVkaXRUZW1wbGF0ZSgpLFxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0dGl0bGU6IFwicmVtb3ZlX2FjdGlvblwiLFxuXHRcdFx0XHRcdFx0XHRcdGljb246IEljb25zLlRyYXNoLFxuXHRcdFx0XHRcdFx0XHRcdGNsaWNrOiAoKSA9PiB0aGlzLmRlbGV0ZVRlbXBsYXRlKCksXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRdLFxuXHRcdFx0XHQgIH0pXG5cdFx0XHRcdDogbnVsbCxcblx0XHRdKVxuXHR9XG5cblx0cHJpdmF0ZSByZW5kZXJDb250ZW50KCk6IENoaWxkcmVuIHtcblx0XHRyZXR1cm4gbShcIlwiLCBbXG5cdFx0XHRtKFRleHRGaWVsZCwge1xuXHRcdFx0XHRsYWJlbDogXCJzaG9ydGN1dF9sYWJlbFwiLFxuXHRcdFx0XHR2YWx1ZTogVEVNUExBVEVfU0hPUlRDVVRfUFJFRklYICsgYXNzZXJ0Tm90TnVsbCh0aGlzLnRlbXBsYXRlLnRhZywgXCJ0ZW1wbGF0ZSB3aXRob3V0IHRhZyFcIiksXG5cdFx0XHRcdGlzUmVhZE9ubHk6IHRydWUsXG5cdFx0XHR9KSxcblx0XHRcdHRoaXMuc2FuaXRpemVkQ29udGVudHMubWFwKCh7IHRleHQsIGxhbmd1YWdlQ29kZVRleHRJZCB9KSA9PiB7XG5cdFx0XHRcdHJldHVybiBtKFwiLmZsZXguZmxleC1jb2x1bW5cIiwgW20oXCIuaDQubXQtbFwiLCBsYW5nLmdldChsYW5ndWFnZUNvZGVUZXh0SWQpKSwgbShcIi5lZGl0b3ItYm9yZGVyLnRleHQtYnJlYWtcIiwgbS50cnVzdCh0ZXh0KSldKVxuXHRcdFx0fSksXG5cdFx0XSlcblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgZGVsZXRlVGVtcGxhdGUoKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0aWYgKCEoYXdhaXQgRGlhbG9nLmNvbmZpcm0oXCJkZWxldGVUZW1wbGF0ZV9tc2dcIikpKSByZXR1cm5cblx0XHRhd2FpdCB0aGlzLmVudGl0eUNsaWVudC5lcmFzZSh0aGlzLnRlbXBsYXRlKVxuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyBlZGl0VGVtcGxhdGUoKSB7XG5cdFx0Y29uc3QgeyB0ZW1wbGF0ZSB9ID0gdGhpc1xuXHRcdGNvbnN0IGdyb3VwUm9vdCA9IGF3YWl0IGxvY2F0b3IuZW50aXR5Q2xpZW50LmxvYWQoVGVtcGxhdGVHcm91cFJvb3RUeXBlUmVmLCBhc3NlcnROb3ROdWxsKHRlbXBsYXRlLl9vd25lckdyb3VwLCBcInRlbXBsYXRlIHdpdGhvdXQgb3duZXJHcm91cCFcIikpXG5cdFx0c2hvd1RlbXBsYXRlRWRpdG9yKHRlbXBsYXRlLCBncm91cFJvb3QpXG5cdH1cblxuXHRlbnRpdHlFdmVudHNSZWNlaXZlZCh1cGRhdGVzOiBSZWFkb25seUFycmF5PEVudGl0eVVwZGF0ZURhdGE+KTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpXG5cdH1cbn1cbiIsImltcG9ydCBtLCB7IENoaWxkcmVuIH0gZnJvbSBcIm1pdGhyaWxcIlxuXG5pbXBvcnQgeyBzaG93VGVtcGxhdGVFZGl0b3IgfSBmcm9tIFwiLi9UZW1wbGF0ZUVkaXRvclwiXG5pbXBvcnQgdHlwZSB7IEVtYWlsVGVtcGxhdGUgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2FwaS9lbnRpdGllcy90dXRhbm90YS9UeXBlUmVmcy5qc1wiXG5pbXBvcnQgeyBFbWFpbFRlbXBsYXRlVHlwZVJlZiB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL2VudGl0aWVzL3R1dGFub3RhL1R5cGVSZWZzLmpzXCJcbmltcG9ydCB7IEVudGl0eUNsaWVudCB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL2NvbW1vbi9FbnRpdHlDbGllbnRcIlxuaW1wb3J0IHsgaXNTYW1lSWQgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2FwaS9jb21tb24vdXRpbHMvRW50aXR5VXRpbHNcIlxuaW1wb3J0IHsgc2VhcmNoSW5UZW1wbGF0ZXMsIFRFTVBMQVRFX1NIT1JUQ1VUX1BSRUZJWCB9IGZyb20gXCIuLi90ZW1wbGF0ZXMvbW9kZWwvVGVtcGxhdGVQb3B1cE1vZGVsXCJcbmltcG9ydCB7IGhhc0NhcGFiaWxpdHlPbkdyb3VwIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9zaGFyaW5nL0dyb3VwVXRpbHNcIlxuaW1wb3J0IHsgU2hhcmVDYXBhYmlsaXR5IH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9hcGkvY29tbW9uL1R1dGFub3RhQ29uc3RhbnRzXCJcbmltcG9ydCB0eXBlIHsgVGVtcGxhdGVHcm91cEluc3RhbmNlIH0gZnJvbSBcIi4uL3RlbXBsYXRlcy9tb2RlbC9UZW1wbGF0ZUdyb3VwTW9kZWxcIlxuaW1wb3J0IHR5cGUgeyBMb2dpbkNvbnRyb2xsZXIgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2FwaS9tYWluL0xvZ2luQ29udHJvbGxlclwiXG5pbXBvcnQgeyBMaXN0Q29sdW1uV3JhcHBlciB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL0xpc3RDb2x1bW5XcmFwcGVyXCJcbmltcG9ydCB7IG1lbW9pemVkLCBub09wIH0gZnJvbSBcIkB0dXRhby90dXRhbm90YS11dGlsc1wiXG5pbXBvcnQgeyBhc3NlcnRNYWluT3JOb2RlIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9hcGkvY29tbW9uL0VudlwiXG5pbXBvcnQgeyBTZWxlY3RhYmxlUm93Q29udGFpbmVyLCBTZWxlY3RhYmxlUm93U2VsZWN0ZWRTZXR0ZXIgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2d1aS9TZWxlY3RhYmxlUm93Q29udGFpbmVyLmpzXCJcbmltcG9ydCB7IExpc3RFbGVtZW50TGlzdE1vZGVsIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9taXNjL0xpc3RFbGVtZW50TGlzdE1vZGVsLmpzXCJcbmltcG9ydCBTdHJlYW0gZnJvbSBcIm1pdGhyaWwvc3RyZWFtXCJcbmltcG9ydCBDb2x1bW5FbXB0eU1lc3NhZ2VCb3ggZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvYmFzZS9Db2x1bW5FbXB0eU1lc3NhZ2VCb3guanNcIlxuaW1wb3J0IHsgdGhlbWUgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2d1aS90aGVtZS5qc1wiXG5pbXBvcnQgeyBJY29ucyB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL2Jhc2UvaWNvbnMvSWNvbnMuanNcIlxuaW1wb3J0IHsgTGlzdCwgTGlzdEF0dHJzLCBNdWx0aXNlbGVjdE1vZGUsIFJlbmRlckNvbmZpZyB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL2Jhc2UvTGlzdC5qc1wiXG5pbXBvcnQgeyBzaXplIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvc2l6ZS5qc1wiXG5pbXBvcnQgeyBUZW1wbGF0ZURldGFpbHNWaWV3ZXIgfSBmcm9tIFwiLi9UZW1wbGF0ZURldGFpbHNWaWV3ZXIuanNcIlxuaW1wb3J0IHsgbGlzdFNlbGVjdGlvbktleWJvYXJkU2hvcnRjdXRzLCBvbmx5U2luZ2xlU2VsZWN0aW9uLCBWaXJ0dWFsUm93IH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvYmFzZS9MaXN0VXRpbHMuanNcIlxuaW1wb3J0IHsgSWNvbkJ1dHRvbiB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL2Jhc2UvSWNvbkJ1dHRvbi5qc1wiXG5pbXBvcnQgeyBCYXNlU2VhcmNoQmFyLCBCYXNlU2VhcmNoQmFyQXR0cnMgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2d1aS9iYXNlL0Jhc2VTZWFyY2hCYXIuanNcIlxuaW1wb3J0IHsgbGFuZyB9IGZyb20gXCIuLi8uLi9jb21tb24vbWlzYy9MYW5ndWFnZVZpZXdNb2RlbC5qc1wiXG5pbXBvcnQgeyBrZXlNYW5hZ2VyIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9taXNjL0tleU1hbmFnZXIuanNcIlxuaW1wb3J0IHsgRW50aXR5VXBkYXRlRGF0YSwgaXNVcGRhdGVGb3JUeXBlUmVmIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9hcGkvY29tbW9uL3V0aWxzL0VudGl0eVVwZGF0ZVV0aWxzLmpzXCJcbmltcG9ydCB7IExpc3RBdXRvU2VsZWN0QmVoYXZpb3IgfSBmcm9tIFwiLi4vLi4vY29tbW9uL21pc2MvRGV2aWNlQ29uZmlnLmpzXCJcbmltcG9ydCB7IFVwZGF0YWJsZVNldHRpbmdzVmlld2VyIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9zZXR0aW5ncy9JbnRlcmZhY2VzLmpzXCJcblxuYXNzZXJ0TWFpbk9yTm9kZSgpXG5cbi8qKlxuICogIExpc3QgdGhhdCBpcyByZW5kZXJlZCB3aXRoaW4gdGhlIHRlbXBsYXRlIFNldHRpbmdzXG4gKi9cbmV4cG9ydCBjbGFzcyBUZW1wbGF0ZUxpc3RWaWV3IGltcGxlbWVudHMgVXBkYXRhYmxlU2V0dGluZ3NWaWV3ZXIge1xuXHRwcml2YXRlIHNlYXJjaFF1ZXJ5OiBzdHJpbmcgPSBcIlwiXG5cdHByaXZhdGUgcmVzdWx0SXRlbUlkczogUmVhZG9ubHlBcnJheTxJZFR1cGxlPiA9IFtdXG5cblx0cHJpdmF0ZSBsaXN0TW9kZWw6IExpc3RFbGVtZW50TGlzdE1vZGVsPEVtYWlsVGVtcGxhdGU+XG5cdHByaXZhdGUgbGlzdFN0YXRlU3Vic2NyaXB0aW9uOiBTdHJlYW08dW5rbm93bj4gfCBudWxsID0gbnVsbFxuXHRwcml2YXRlIHJlYWRvbmx5IHJlbmRlckNvbmZpZzogUmVuZGVyQ29uZmlnPEVtYWlsVGVtcGxhdGUsIFRlbXBsYXRlUm93PiA9IHtcblx0XHRpdGVtSGVpZ2h0OiBzaXplLmxpc3Rfcm93X2hlaWdodCxcblx0XHRtdWx0aXNlbGVjdGlvbkFsbG93ZWQ6IE11bHRpc2VsZWN0TW9kZS5EaXNhYmxlZCxcblx0XHRzd2lwZTogbnVsbCxcblx0XHRjcmVhdGVFbGVtZW50OiAoZG9tKSA9PiB7XG5cdFx0XHRjb25zdCB0ZW1wbGF0ZVJvdyA9IG5ldyBUZW1wbGF0ZVJvdygpXG5cdFx0XHRtLnJlbmRlcihkb20sIHRlbXBsYXRlUm93LnJlbmRlcigpKVxuXHRcdFx0cmV0dXJuIHRlbXBsYXRlUm93XG5cdFx0fSxcblx0fVxuXHRwcml2YXRlIHJlYWRvbmx5IHNob3J0Y3V0cyA9IGxpc3RTZWxlY3Rpb25LZXlib2FyZFNob3J0Y3V0cyhNdWx0aXNlbGVjdE1vZGUuRGlzYWJsZWQsICgpID0+IHRoaXMubGlzdE1vZGVsKVxuXG5cdGNvbnN0cnVjdG9yKFxuXHRcdHByaXZhdGUgcmVhZG9ubHkgZ3JvdXBJbnN0YW5jZTogVGVtcGxhdGVHcm91cEluc3RhbmNlLFxuXHRcdHByaXZhdGUgcmVhZG9ubHkgZW50aXR5Q2xpZW50OiBFbnRpdHlDbGllbnQsXG5cdFx0cHJpdmF0ZSByZWFkb25seSBsb2dpbnM6IExvZ2luQ29udHJvbGxlcixcblx0XHRwcml2YXRlIHJlYWRvbmx5IHVwZGF0ZURldGFpbHNWaWV3ZXI6ICh2aWV3ZXI6IFRlbXBsYXRlRGV0YWlsc1ZpZXdlciB8IG51bGwpID0+IHVua25vd24sXG5cdFx0cHJpdmF0ZSByZWFkb25seSBmb2N1c0RldGFpbHNWaWV3ZXI6ICgpID0+IHVua25vd24sXG5cdCkge1xuXHRcdHRoaXMubGlzdE1vZGVsID0gdGhpcy5tYWtlTGlzdE1vZGVsKClcblxuXHRcdHRoaXMubGlzdE1vZGVsLmxvYWRJbml0aWFsKClcblxuXHRcdC8vIGhhY2tzIGZvciBvbGQgY29tcG9uZW50c1xuXHRcdHRoaXMudmlldyA9IHRoaXMudmlldy5iaW5kKHRoaXMpXG5cdFx0dGhpcy5vbmNyZWF0ZSA9IHRoaXMub25jcmVhdGUuYmluZCh0aGlzKVxuXHRcdHRoaXMub25yZW1vdmUgPSB0aGlzLm9ucmVtb3ZlLmJpbmQodGhpcylcblx0fVxuXG5cdG9uY3JlYXRlKCkge1xuXHRcdGtleU1hbmFnZXIucmVnaXN0ZXJTaG9ydGN1dHModGhpcy5zaG9ydGN1dHMpXG5cdH1cblxuXHRvbnJlbW92ZSgpIHtcblx0XHRrZXlNYW5hZ2VyLnVucmVnaXN0ZXJTaG9ydGN1dHModGhpcy5zaG9ydGN1dHMpXG5cdH1cblxuXHRwcml2YXRlIG1ha2VMaXN0TW9kZWwoKSB7XG5cdFx0Y29uc3QgbGlzdE1vZGVsID0gbmV3IExpc3RFbGVtZW50TGlzdE1vZGVsPEVtYWlsVGVtcGxhdGU+KHtcblx0XHRcdHNvcnRDb21wYXJlOiAoYTogRW1haWxUZW1wbGF0ZSwgYjogRW1haWxUZW1wbGF0ZSkgPT4ge1xuXHRcdFx0XHRjb25zdCB0aXRsZUEgPSBhLnRpdGxlLnRvVXBwZXJDYXNlKClcblx0XHRcdFx0Y29uc3QgdGl0bGVCID0gYi50aXRsZS50b1VwcGVyQ2FzZSgpXG5cdFx0XHRcdHJldHVybiB0aXRsZUEgPCB0aXRsZUIgPyAtMSA6IHRpdGxlQSA+IHRpdGxlQiA/IDEgOiAwXG5cdFx0XHR9LFxuXHRcdFx0ZmV0Y2g6IGFzeW5jIChfbGFzdEZldGNoZWRFbnRpdHksIF9jb3VudCkgPT4ge1xuXHRcdFx0XHQvLyBsb2FkIGFsbCBlbnRyaWVzIGF0IG9uY2UgdG8gYXBwbHkgY3VzdG9tIHNvcnQgb3JkZXJcblx0XHRcdFx0Y29uc3QgYWxsRW50cmllcyA9IGF3YWl0IHRoaXMuZW50aXR5Q2xpZW50LmxvYWRBbGwoRW1haWxUZW1wbGF0ZVR5cGVSZWYsIHRoaXMudGVtcGxhdGVMaXN0SWQoKSlcblx0XHRcdFx0cmV0dXJuIHsgaXRlbXM6IGFsbEVudHJpZXMsIGNvbXBsZXRlOiB0cnVlIH1cblx0XHRcdH0sXG5cdFx0XHRsb2FkU2luZ2xlOiAoX2xpc3RJZDogSWQsIGVsZW1lbnRJZDogSWQpID0+IHtcblx0XHRcdFx0cmV0dXJuIHRoaXMuZW50aXR5Q2xpZW50LmxvYWQ8RW1haWxUZW1wbGF0ZT4oRW1haWxUZW1wbGF0ZVR5cGVSZWYsIFt0aGlzLnRlbXBsYXRlTGlzdElkKCksIGVsZW1lbnRJZF0pXG5cdFx0XHR9LFxuXHRcdFx0YXV0b1NlbGVjdEJlaGF2aW9yOiAoKSA9PiBMaXN0QXV0b1NlbGVjdEJlaGF2aW9yLk9MREVSLFxuXHRcdH0pXG5cblx0XHRsaXN0TW9kZWwuc2V0RmlsdGVyKChpdGVtOiBFbWFpbFRlbXBsYXRlKSA9PiB0aGlzLnF1ZXJ5RmlsdGVyKGl0ZW0pKVxuXG5cdFx0dGhpcy5saXN0U3RhdGVTdWJzY3JpcHRpb24/LmVuZCh0cnVlKVxuXHRcdHRoaXMubGlzdFN0YXRlU3Vic2NyaXB0aW9uID0gbGlzdE1vZGVsLnN0YXRlU3RyZWFtLm1hcCgoc3RhdGUpID0+IHtcblx0XHRcdHRoaXMub25TZWxlY3Rpb25DaGFuZ2VkKG9ubHlTaW5nbGVTZWxlY3Rpb24oc3RhdGUpKVxuXHRcdFx0bS5yZWRyYXcoKVxuXHRcdH0pXG5cblx0XHRyZXR1cm4gbGlzdE1vZGVsXG5cdH1cblxuXHR2aWV3KCk6IENoaWxkcmVuIHtcblx0XHRyZXR1cm4gbShcblx0XHRcdExpc3RDb2x1bW5XcmFwcGVyLFxuXHRcdFx0e1xuXHRcdFx0XHRoZWFkZXJDb250ZW50OiBtKFxuXHRcdFx0XHRcdFwiLmZsZXguZmxleC1zcGFjZS1iZXR3ZWVuLmNlbnRlci12ZXJ0aWNhbGx5LnBsci1sXCIsXG5cdFx0XHRcdFx0bShCYXNlU2VhcmNoQmFyLCB7XG5cdFx0XHRcdFx0XHR0ZXh0OiB0aGlzLnNlYXJjaFF1ZXJ5LFxuXHRcdFx0XHRcdFx0b25JbnB1dDogKHRleHQpID0+IHRoaXMudXBkYXRlUXVlcnkodGV4dCksXG5cdFx0XHRcdFx0XHRidXN5OiBmYWxzZSxcblx0XHRcdFx0XHRcdG9uS2V5RG93bjogKGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCksXG5cdFx0XHRcdFx0XHRvbkNsZWFyOiAoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdHRoaXMuc2VhcmNoUXVlcnkgPSBcIlwiXG5cdFx0XHRcdFx0XHRcdHRoaXMucmVzdWx0SXRlbUlkcyA9IFtdXG5cdFx0XHRcdFx0XHRcdHRoaXMubGlzdE1vZGVsLnJlYXBwbHlGaWx0ZXIoKVxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdHBsYWNlaG9sZGVyOiBsYW5nLmdldChcInNlYXJjaFRlbXBsYXRlc19wbGFjZWhvbGRlclwiKSxcblx0XHRcdFx0XHR9IHNhdGlzZmllcyBCYXNlU2VhcmNoQmFyQXR0cnMpLFxuXHRcdFx0XHRcdHRoaXMudXNlckNhbkVkaXQoKVxuXHRcdFx0XHRcdFx0PyBtKFxuXHRcdFx0XHRcdFx0XHRcdFwiLm1yLW5lZ2F0aXZlLXNcIixcblx0XHRcdFx0XHRcdFx0XHRtKEljb25CdXR0b24sIHtcblx0XHRcdFx0XHRcdFx0XHRcdHRpdGxlOiBcImFkZFRlbXBsYXRlX2xhYmVsXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRpY29uOiBJY29ucy5BZGQsXG5cdFx0XHRcdFx0XHRcdFx0XHRjbGljazogKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRzaG93VGVtcGxhdGVFZGl0b3IobnVsbCwgdGhpcy5ncm91cEluc3RhbmNlLmdyb3VwUm9vdClcblx0XHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0fSksXG5cdFx0XHRcdFx0XHQgIClcblx0XHRcdFx0XHRcdDogbnVsbCxcblx0XHRcdFx0KSxcblx0XHRcdH0sXG5cdFx0XHR0aGlzLmxpc3RNb2RlbC5pc0VtcHR5QW5kRG9uZSgpXG5cdFx0XHRcdD8gbShDb2x1bW5FbXB0eU1lc3NhZ2VCb3gsIHtcblx0XHRcdFx0XHRcdGNvbG9yOiB0aGVtZS5saXN0X21lc3NhZ2VfYmcsXG5cdFx0XHRcdFx0XHRpY29uOiBJY29ucy5MaXN0QWx0LFxuXHRcdFx0XHRcdFx0bWVzc2FnZTogXCJub0VudHJpZXNfbXNnXCIsXG5cdFx0XHRcdCAgfSlcblx0XHRcdFx0OiBtKExpc3QsIHtcblx0XHRcdFx0XHRcdHJlbmRlckNvbmZpZzogdGhpcy5yZW5kZXJDb25maWcsXG5cdFx0XHRcdFx0XHRzdGF0ZTogdGhpcy5saXN0TW9kZWwuc3RhdGUsXG5cdFx0XHRcdFx0XHRvbkxvYWRNb3JlOiAoKSA9PiB0aGlzLmxpc3RNb2RlbC5sb2FkTW9yZSgpLFxuXHRcdFx0XHRcdFx0b25SZXRyeUxvYWRpbmc6ICgpID0+IHRoaXMubGlzdE1vZGVsLnJldHJ5TG9hZGluZygpLFxuXHRcdFx0XHRcdFx0b25TdG9wTG9hZGluZzogKCkgPT4gdGhpcy5saXN0TW9kZWwuc3RvcExvYWRpbmcoKSxcblx0XHRcdFx0XHRcdG9uU2luZ2xlU2VsZWN0aW9uOiAoaXRlbTogRW1haWxUZW1wbGF0ZSkgPT4ge1xuXHRcdFx0XHRcdFx0XHR0aGlzLmxpc3RNb2RlbC5vblNpbmdsZVNlbGVjdGlvbihpdGVtKVxuXHRcdFx0XHRcdFx0XHR0aGlzLmZvY3VzRGV0YWlsc1ZpZXdlcigpXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0b25TaW5nbGVUb2dnbGluZ011bHRpc2VsZWN0aW9uOiBub09wLFxuXHRcdFx0XHRcdFx0b25SYW5nZVNlbGVjdGlvblRvd2FyZHM6IG5vT3AsXG5cdFx0XHRcdCAgfSBzYXRpc2ZpZXMgTGlzdEF0dHJzPEVtYWlsVGVtcGxhdGUsIFRlbXBsYXRlUm93PiksXG5cdFx0KVxuXHR9XG5cblx0YXN5bmMgZW50aXR5RXZlbnRzUmVjZWl2ZWQodXBkYXRlczogUmVhZG9ubHlBcnJheTxFbnRpdHlVcGRhdGVEYXRhPik6IFByb21pc2U8dm9pZD4ge1xuXHRcdGZvciAoY29uc3QgdXBkYXRlIG9mIHVwZGF0ZXMpIHtcblx0XHRcdGNvbnN0IHsgaW5zdGFuY2VMaXN0SWQsIGluc3RhbmNlSWQsIG9wZXJhdGlvbiB9ID0gdXBkYXRlXG5cdFx0XHRpZiAoaXNVcGRhdGVGb3JUeXBlUmVmKEVtYWlsVGVtcGxhdGVUeXBlUmVmLCB1cGRhdGUpICYmIGlzU2FtZUlkKHRoaXMudGVtcGxhdGVMaXN0SWQoKSwgaW5zdGFuY2VMaXN0SWQpKSB7XG5cdFx0XHRcdGF3YWl0IHRoaXMubGlzdE1vZGVsLmVudGl0eUV2ZW50UmVjZWl2ZWQoaW5zdGFuY2VMaXN0SWQsIGluc3RhbmNlSWQsIG9wZXJhdGlvbilcblx0XHRcdH1cblx0XHR9XG5cdFx0Ly8gd2UgbmVlZCB0byBtYWtlIGFub3RoZXIgc2VhcmNoIGluIGNhc2UgaXRlbXMgaGF2ZSBjaGFuZ2VkXG5cdFx0dGhpcy51cGRhdGVRdWVyeSh0aGlzLnNlYXJjaFF1ZXJ5KVxuXHRcdG0ucmVkcmF3KClcblx0fVxuXG5cdHByaXZhdGUgcmVhZG9ubHkgb25TZWxlY3Rpb25DaGFuZ2VkID0gbWVtb2l6ZWQoKGl0ZW06IEVtYWlsVGVtcGxhdGUgfCBudWxsKSA9PiB7XG5cdFx0Y29uc3QgZGV0YWlsc1ZpZXdlciA9IGl0ZW0gPT0gbnVsbCA/IG51bGwgOiBuZXcgVGVtcGxhdGVEZXRhaWxzVmlld2VyKGl0ZW0sIHRoaXMuZW50aXR5Q2xpZW50LCAoKSA9PiAhdGhpcy51c2VyQ2FuRWRpdCgpKVxuXHRcdHRoaXMudXBkYXRlRGV0YWlsc1ZpZXdlcihkZXRhaWxzVmlld2VyKVxuXHR9KVxuXG5cdHByaXZhdGUgcXVlcnlGaWx0ZXIoaXRlbTogRW1haWxUZW1wbGF0ZSkge1xuXHRcdHJldHVybiB0aGlzLnNlYXJjaFF1ZXJ5ID09PSBcIlwiID8gdHJ1ZSA6IHRoaXMucmVzdWx0SXRlbUlkcy5pbmNsdWRlcyhpdGVtLl9pZClcblx0fVxuXG5cdHByaXZhdGUgdXBkYXRlUXVlcnkocXVlcnk6IHN0cmluZykge1xuXHRcdHRoaXMuc2VhcmNoUXVlcnkgPSBxdWVyeVxuXHRcdHRoaXMucmVzdWx0SXRlbUlkcyA9IHNlYXJjaEluVGVtcGxhdGVzKHRoaXMuc2VhcmNoUXVlcnksIHRoaXMubGlzdE1vZGVsLmdldFVuZmlsdGVyZWRBc0FycmF5KCkpLm1hcCgoaXRlbSkgPT4gaXRlbS5faWQpXG5cdFx0dGhpcy5saXN0TW9kZWwucmVhcHBseUZpbHRlcigpXG5cdH1cblxuXHR1c2VyQ2FuRWRpdCgpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gaGFzQ2FwYWJpbGl0eU9uR3JvdXAodGhpcy5sb2dpbnMuZ2V0VXNlckNvbnRyb2xsZXIoKS51c2VyLCB0aGlzLmdyb3VwSW5zdGFuY2UuZ3JvdXAsIFNoYXJlQ2FwYWJpbGl0eS5Xcml0ZSlcblx0fVxuXG5cdHRlbXBsYXRlTGlzdElkKCk6IElkIHtcblx0XHRyZXR1cm4gdGhpcy5ncm91cEluc3RhbmNlLmdyb3VwUm9vdC50ZW1wbGF0ZXNcblx0fVxufVxuXG5leHBvcnQgY2xhc3MgVGVtcGxhdGVSb3cgaW1wbGVtZW50cyBWaXJ0dWFsUm93PEVtYWlsVGVtcGxhdGU+IHtcblx0dG9wOiBudW1iZXIgPSAwXG5cdGRvbUVsZW1lbnQ6IEhUTUxFbGVtZW50IHwgbnVsbCA9IG51bGwgLy8gc2V0IGZyb20gTGlzdFxuXG5cdGVudGl0eTogRW1haWxUZW1wbGF0ZSB8IG51bGwgPSBudWxsXG5cdHByaXZhdGUgc2VsZWN0aW9uVXBkYXRlciE6IFNlbGVjdGFibGVSb3dTZWxlY3RlZFNldHRlclxuXHRwcml2YXRlIHRpdGxlRG9tITogSFRNTEVsZW1lbnRcblx0cHJpdmF0ZSBpZERvbSE6IEhUTUxFbGVtZW50XG5cblx0Y29uc3RydWN0b3IoKSB7fVxuXG5cdHVwZGF0ZSh0ZW1wbGF0ZTogRW1haWxUZW1wbGF0ZSwgc2VsZWN0ZWQ6IGJvb2xlYW4pOiB2b2lkIHtcblx0XHR0aGlzLmVudGl0eSA9IHRlbXBsYXRlXG5cblx0XHR0aGlzLnNlbGVjdGlvblVwZGF0ZXIoc2VsZWN0ZWQsIGZhbHNlKVxuXG5cdFx0dGhpcy50aXRsZURvbS50ZXh0Q29udGVudCA9IHRlbXBsYXRlLnRpdGxlXG5cdFx0dGhpcy5pZERvbS50ZXh0Q29udGVudCA9IFRFTVBMQVRFX1NIT1JUQ1VUX1BSRUZJWCArIHRlbXBsYXRlLnRhZ1xuXHR9XG5cblx0cmVuZGVyKCk6IENoaWxkcmVuIHtcblx0XHRyZXR1cm4gbShcblx0XHRcdFNlbGVjdGFibGVSb3dDb250YWluZXIsXG5cdFx0XHR7XG5cdFx0XHRcdG9uU2VsZWN0ZWRDaGFuZ2VSZWY6ICh1cGRhdGVyKSA9PiAodGhpcy5zZWxlY3Rpb25VcGRhdGVyID0gdXBkYXRlciksXG5cdFx0XHR9LFxuXHRcdFx0bShcIi5mbGV4LmNvbFwiLCBbXG5cdFx0XHRcdG0oXCJcIiwgW1xuXHRcdFx0XHRcdG0oXCIudGV4dC1lbGxpcHNpcy5iYWRnZS1saW5lLWhlaWdodFwiLCB7XG5cdFx0XHRcdFx0XHRvbmNyZWF0ZTogKHZub2RlKSA9PiAodGhpcy50aXRsZURvbSA9IHZub2RlLmRvbSBhcyBIVE1MRWxlbWVudCksXG5cdFx0XHRcdFx0fSksXG5cdFx0XHRcdF0pLFxuXHRcdFx0XHRtKFwiLnNtYWxsZXIubXQteHhzXCIsIHtcblx0XHRcdFx0XHRvbmNyZWF0ZTogKHZub2RlKSA9PiAodGhpcy5pZERvbSA9IHZub2RlLmRvbSBhcyBIVE1MRWxlbWVudCksXG5cdFx0XHRcdH0pLFxuXHRcdFx0XSksXG5cdFx0KVxuXHR9XG59XG4iLCJpbXBvcnQgbSwgeyBDaGlsZCwgQ2hpbGRyZW4gfSBmcm9tIFwibWl0aHJpbFwiXG5pbXBvcnQgeyBhc3NlcnRNYWluT3JOb2RlLCBpc0FwcCwgaXNJT1NBcHAgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2FwaS9jb21tb24vRW52XCJcbmltcG9ydCB7IGxhbmcgfSBmcm9tIFwiLi4vLi4vY29tbW9uL21pc2MvTGFuZ3VhZ2VWaWV3TW9kZWxcIlxuaW1wb3J0IHR5cGUgeyBEcm9wRG93blNlbGVjdG9yQXR0cnMgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2d1aS9iYXNlL0Ryb3BEb3duU2VsZWN0b3IuanNcIlxuaW1wb3J0IHsgRHJvcERvd25TZWxlY3RvciB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL2Jhc2UvRHJvcERvd25TZWxlY3Rvci5qc1wiXG5pbXBvcnQgeyBFbnRpdHlVcGRhdGVEYXRhLCBpc1VwZGF0ZUZvclR5cGVSZWYgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2FwaS9jb21tb24vdXRpbHMvRW50aXR5VXBkYXRlVXRpbHMuanNcIlxuaW1wb3J0IHsgbG9jYXRvciB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL21haW4vQ29tbW9uTG9jYXRvci5qc1wiXG5pbXBvcnQgeyBGZWF0dXJlVHlwZSwgT3BlcmF0aW9uVHlwZSB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL2NvbW1vbi9UdXRhbm90YUNvbnN0YW50cy5qc1wiXG5pbXBvcnQgeyBUdXRhbm90YVByb3BlcnRpZXMsIFR1dGFub3RhUHJvcGVydGllc1R5cGVSZWYgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2FwaS9lbnRpdGllcy90dXRhbm90YS9UeXBlUmVmcy5qc1wiXG5pbXBvcnQgeyBCdXR0b24sIEJ1dHRvblR5cGUgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2d1aS9iYXNlL0J1dHRvbi5qc1wiXG5pbXBvcnQgeyBEaWFsb2cgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2d1aS9iYXNlL0RpYWxvZy5qc1wiXG5pbXBvcnQgeyBtYWlsTG9jYXRvciB9IGZyb20gXCIuLi9tYWlsTG9jYXRvci5qc1wiXG5pbXBvcnQgeyBVcGRhdGFibGVTZXR0aW5nc1ZpZXdlciB9IGZyb20gXCIuLi8uLi9jb21tb24vc2V0dGluZ3MvSW50ZXJmYWNlcy5qc1wiXG5pbXBvcnQgeyBhc3NlcnQgfSBmcm9tIFwiQHR1dGFvL3R1dGFub3RhLXV0aWxzXCJcblxuYXNzZXJ0TWFpbk9yTm9kZSgpXG5cbmV4cG9ydCBjbGFzcyBDb250YWN0c1NldHRpbmdzVmlld2VyIGltcGxlbWVudHMgVXBkYXRhYmxlU2V0dGluZ3NWaWV3ZXIge1xuXHRwcml2YXRlIG5vQXV0b21hdGljQ29udGFjdHM6IGJvb2xlYW4gPSBmYWxzZVxuXG5cdGNvbnN0cnVjdG9yKCkge1xuXHRcdHRoaXMubm9BdXRvbWF0aWNDb250YWN0cyA9IGxvY2F0b3IubG9naW5zLmdldFVzZXJDb250cm9sbGVyKCkucHJvcHMubm9BdXRvbWF0aWNDb250YWN0c1xuXHR9XG5cblx0dmlldygpOiBDaGlsZHJlbiB7XG5cdFx0cmV0dXJuIFtcblx0XHRcdG0oXG5cdFx0XHRcdFwiLmZpbGwtYWJzb2x1dGUuc2Nyb2xsLnBsci1sLnBiLXhsXCIsXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRyb2xlOiBcImdyb3VwXCIsXG5cdFx0XHRcdH0sXG5cdFx0XHRcdFtcblx0XHRcdFx0XHRtKFwiLmg0Lm10LWxcIiwgbGFuZy5nZXQoXCJjb250YWN0c01hbmFnZW1lbnRfbGFiZWxcIikpLFxuXHRcdFx0XHRcdHRoaXMucmVuZGVySW1wb3J0Q29udGFjdHNCdXR0b24oKSxcblx0XHRcdFx0XHRsb2NhdG9yLmxvZ2lucy5pc0VuYWJsZWQoRmVhdHVyZVR5cGUuRGlzYWJsZUNvbnRhY3RzKSA/IG51bGwgOiB0aGlzLnJlbmRlckF1dG9DcmVhdGVDb250YWN0c1ByZWZlcmVuY2UoKSxcblx0XHRcdFx0XHR0aGlzLnJlbmRlckNvbnRhY3RzU3luY0Ryb3Bkb3duKCksXG5cdFx0XHRcdF0sXG5cdFx0XHQpLFxuXHRcdF1cblx0fVxuXG5cdHByaXZhdGUgcmVuZGVyQXV0b0NyZWF0ZUNvbnRhY3RzUHJlZmVyZW5jZSgpOiBDaGlsZHJlbiB7XG5cdFx0cmV0dXJuIG0oRHJvcERvd25TZWxlY3Rvciwge1xuXHRcdFx0bGFiZWw6IFwiY3JlYXRlQ29udGFjdHNfbGFiZWxcIixcblx0XHRcdGhlbHBMYWJlbDogKCkgPT4gbGFuZy5nZXQoXCJjcmVhdGVDb250YWN0c0ZvclJlY2lwaWVudHNfYWN0aW9uXCIpLFxuXHRcdFx0aXRlbXM6IFtcblx0XHRcdFx0e1xuXHRcdFx0XHRcdG5hbWU6IGxhbmcuZ2V0KFwiYWN0aXZhdGVkX2xhYmVsXCIpLFxuXHRcdFx0XHRcdHZhbHVlOiBmYWxzZSxcblx0XHRcdFx0fSxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdG5hbWU6IGxhbmcuZ2V0KFwiZGVhY3RpdmF0ZWRfbGFiZWxcIiksXG5cdFx0XHRcdFx0dmFsdWU6IHRydWUsXG5cdFx0XHRcdH0sXG5cdFx0XHRdLFxuXHRcdFx0c2VsZWN0ZWRWYWx1ZTogdGhpcy5ub0F1dG9tYXRpY0NvbnRhY3RzLFxuXHRcdFx0c2VsZWN0aW9uQ2hhbmdlZEhhbmRsZXI6ICh2KSA9PiB7XG5cdFx0XHRcdGxvY2F0b3IubG9naW5zLmdldFVzZXJDb250cm9sbGVyKCkucHJvcHMubm9BdXRvbWF0aWNDb250YWN0cyA9IHZcblx0XHRcdFx0bG9jYXRvci5lbnRpdHlDbGllbnQudXBkYXRlKGxvY2F0b3IubG9naW5zLmdldFVzZXJDb250cm9sbGVyKCkucHJvcHMpXG5cdFx0XHR9LFxuXHRcdFx0ZHJvcGRvd25XaWR0aDogMjUwLFxuXHRcdH0gc2F0aXNmaWVzIERyb3BEb3duU2VsZWN0b3JBdHRyczxib29sZWFuPilcblx0fVxuXG5cdHByaXZhdGUgcmVuZGVySW1wb3J0Q29udGFjdHNCdXR0b24oKTogQ2hpbGRyZW4ge1xuXHRcdGlmICghaXNBcHAoKSkge1xuXHRcdFx0cmV0dXJuIG51bGxcblx0XHR9XG5cdFx0cmV0dXJuIG0oXCIuZmxleC5mbGV4LXNwYWNlLWJldHdlZW4uaXRlbXMtY2VudGVyXCIsIFtcblx0XHRcdGxhbmcuZ2V0KFwiaW1wb3J0RnJvbUNvbnRhY3RCb29rX2xhYmVsXCIpLFxuXHRcdFx0bShCdXR0b24sIHtcblx0XHRcdFx0bGFiZWw6IFwiaW1wb3J0X2FjdGlvblwiLFxuXHRcdFx0XHRjbGljazogKCkgPT4gdGhpcy5pbXBvcnRDb250YWN0c0Zyb21EZXZpY2UoKSxcblx0XHRcdFx0dHlwZTogQnV0dG9uVHlwZS5QcmltYXJ5LFxuXHRcdFx0fSksXG5cdFx0XSlcblx0fVxuXG5cdHByaXZhdGUgcmVuZGVyQ29udGFjdHNTeW5jRHJvcGRvd24oKTogQ2hpbGQge1xuXHRcdGlmICghaXNBcHAoKSkgcmV0dXJuIG51bGxcblxuXHRcdHJldHVybiBtKERyb3BEb3duU2VsZWN0b3IsIHtcblx0XHRcdGxhYmVsOiBcImNvbnRhY3RzU3luY2hyb25pemF0aW9uX2xhYmVsXCIsXG5cdFx0XHRoZWxwTGFiZWw6ICgpID0+IGxhbmcuZ2V0KFwiY29udGFjdHNTeW5jaHJvbml6YXRpb25XYXJuaW5nX21zZ1wiKSxcblx0XHRcdGl0ZW1zOiBbXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRuYW1lOiBsYW5nLmdldChcImFjdGl2YXRlZF9sYWJlbFwiKSxcblx0XHRcdFx0XHR2YWx1ZTogdHJ1ZSxcblx0XHRcdFx0fSxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdG5hbWU6IGxhbmcuZ2V0KFwiZGVhY3RpdmF0ZWRfbGFiZWxcIiksXG5cdFx0XHRcdFx0dmFsdWU6IGZhbHNlLFxuXHRcdFx0XHR9LFxuXHRcdFx0XSxcblx0XHRcdHNlbGVjdGVkVmFsdWU6IG1haWxMb2NhdG9yLm5hdGl2ZUNvbnRhY3RzU3luY01hbmFnZXIoKS5pc0VuYWJsZWQoKSxcblx0XHRcdHNlbGVjdGlvbkNoYW5nZWRIYW5kbGVyOiBhc3luYyAoY29udGFjdFN5bmNFbmFibGVkOiBib29sZWFuKSA9PiB7XG5cdFx0XHRcdGF3YWl0IHRoaXMub25Db250YWN0U3luY1NlbGVjdGlvbkNoYW5nZWQoY29udGFjdFN5bmNFbmFibGVkKVxuXHRcdFx0fSxcblx0XHRcdGRyb3Bkb3duV2lkdGg6IDI1MCxcblx0XHR9KVxuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyBvbkNvbnRhY3RTeW5jU2VsZWN0aW9uQ2hhbmdlZChjb250YWN0U3luY0VuYWJsZWQ6IGJvb2xlYW4pIHtcblx0XHRhc3NlcnQoaXNBcHAoKSwgXCJpc0FwcFwiKVxuXHRcdGNvbnN0IHN5bmNNYW5hZ2VyID0gbWFpbExvY2F0b3IubmF0aXZlQ29udGFjdHNTeW5jTWFuYWdlcigpXG5cblx0XHRpZiAoIWNvbnRhY3RTeW5jRW5hYmxlZCkge1xuXHRcdFx0c3luY01hbmFnZXIuZGlzYWJsZVN5bmMoKVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRjb25zdCBjYW5TeW5jID0gYXdhaXQgc3luY01hbmFnZXIuY2FuU3luYygpXG5cdFx0XHRpZiAoIWNhblN5bmMpIHtcblx0XHRcdFx0cmV0dXJuXG5cdFx0XHR9XG5cblx0XHRcdGF3YWl0IHN5bmNNYW5hZ2VyLmVuYWJsZVN5bmMoKVxuXHRcdFx0Ly8gV2UganVzdCBlbmFibGUgaWYgdGhlIHN5bmNocm9uaXphdGlvbiBzdGFydGVkIHN1Y2Nlc3NmdWxseVxuXHRcdFx0Y29uc3QgaXNTeW5jQWxsb3dlZCA9IGF3YWl0IHN5bmNNYW5hZ2VyLnN5bmNDb250YWN0cygpXG5cdFx0XHRpZiAoIWlzU3luY0FsbG93ZWQpIHtcblx0XHRcdFx0dGhpcy5oYW5kbGVDb250YWN0c1N5bmNocm9uaXphdGlvbkZhaWwoKVxuXHRcdFx0fVxuXHRcdFx0bS5yZWRyYXcoKVxuXHRcdH1cblx0fVxuXG5cdHVwZGF0ZVR1dGFQcm9wZXJ0aWVzU2V0dGluZ3MocHJvcHM6IFR1dGFub3RhUHJvcGVydGllcykge1xuXHRcdHRoaXMubm9BdXRvbWF0aWNDb250YWN0cyA9IHByb3BzLm5vQXV0b21hdGljQ29udGFjdHNcblx0fVxuXG5cdGFzeW5jIGVudGl0eUV2ZW50c1JlY2VpdmVkKHVwZGF0ZXM6IFJlYWRvbmx5QXJyYXk8RW50aXR5VXBkYXRlRGF0YT4pOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRmb3IgKGNvbnN0IHVwZGF0ZSBvZiB1cGRhdGVzKSB7XG5cdFx0XHRjb25zdCB7IG9wZXJhdGlvbiB9ID0gdXBkYXRlXG5cdFx0XHRpZiAoaXNVcGRhdGVGb3JUeXBlUmVmKFR1dGFub3RhUHJvcGVydGllc1R5cGVSZWYsIHVwZGF0ZSkgJiYgb3BlcmF0aW9uID09PSBPcGVyYXRpb25UeXBlLlVQREFURSkge1xuXHRcdFx0XHRjb25zdCBwcm9wcyA9IGF3YWl0IGxvY2F0b3IuZW50aXR5Q2xpZW50LmxvYWQoVHV0YW5vdGFQcm9wZXJ0aWVzVHlwZVJlZiwgbG9jYXRvci5sb2dpbnMuZ2V0VXNlckNvbnRyb2xsZXIoKS5wcm9wcy5faWQpXG5cdFx0XHRcdHRoaXMudXBkYXRlVHV0YVByb3BlcnRpZXNTZXR0aW5ncyhwcm9wcylcblx0XHRcdH1cblx0XHR9XG5cdFx0bS5yZWRyYXcoKVxuXHR9XG5cblx0cHJpdmF0ZSBoYW5kbGVDb250YWN0c1N5bmNocm9uaXphdGlvbkZhaWwoKSB7XG5cdFx0bWFpbExvY2F0b3IubmF0aXZlQ29udGFjdHNTeW5jTWFuYWdlcigpPy5kaXNhYmxlU3luYygpXG5cdFx0dGhpcy5zaG93Q29udGFjdHNQZXJtaXNzaW9uRGlhbG9nKClcblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgc2hvd0NvbnRhY3RzUGVybWlzc2lvbkRpYWxvZygpIHtcblx0XHRhd2FpdCBEaWFsb2cubWVzc2FnZShcImFsbG93Q29udGFjdFJlYWRXcml0ZV9tc2dcIilcblx0XHRhd2FpdCBsb2NhdG9yLnN5c3RlbUZhY2FkZS5nb1RvU2V0dGluZ3MoKVxuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyBpbXBvcnRDb250YWN0c0Zyb21EZXZpY2UoKSB7XG5cdFx0Y29uc3QgaW1wb3J0ZXIgPSBhd2FpdCBtYWlsTG9jYXRvci5jb250YWN0SW1wb3J0ZXIoKVxuXHRcdGF3YWl0IGltcG9ydGVyLmltcG9ydENvbnRhY3RzRnJvbURldmljZVNhZmVseSgpXG5cdH1cbn1cbiIsImltcG9ydCB7IGxhbmcgfSBmcm9tIFwiLi4vbWlzYy9MYW5ndWFnZVZpZXdNb2RlbC5qc1wiXG5pbXBvcnQgeyBFeHBhbmRlckJ1dHRvbiwgRXhwYW5kZXJQYW5lbCB9IGZyb20gXCIuLi9ndWkvYmFzZS9FeHBhbmRlci5qc1wiXG5pbXBvcnQgbSwgeyBDaGlsZCwgQ2hpbGRBcnJheSwgQ2hpbGRyZW4sIENsYXNzQ29tcG9uZW50LCBDb21wb25lbnQsIFZub2RlIH0gZnJvbSBcIm1pdGhyaWxcIlxuaW1wb3J0IFN0cmVhbSBmcm9tIFwibWl0aHJpbC9zdHJlYW1cIlxuXG5leHBvcnQgaW50ZXJmYWNlIE5vdGlmaWNhdGlvblRhcmdldHNMaXN0QXR0cnMge1xuXHRyb3dBZGQ6IENoaWxkXG5cdHJvd3M6IENoaWxkQXJyYXlcblx0b25FeHBhbmRlZENoYW5nZTogU3RyZWFtPGJvb2xlYW4+XG59XG5cbi8qKlxuICogTGlzdHMgbm90aWZpY2F0aW9uIGRldmljZSB0YXJnZXRzXG4gKi9cbmV4cG9ydCBjbGFzcyBOb3RpZmljYXRpb25UYXJnZXRzTGlzdCBpbXBsZW1lbnRzIENvbXBvbmVudDxOb3RpZmljYXRpb25UYXJnZXRzTGlzdEF0dHJzPiB7XG5cdHZpZXcodm5vZGU6IFZub2RlPE5vdGlmaWNhdGlvblRhcmdldHNMaXN0QXR0cnM+KSB7XG5cdFx0cmV0dXJuIG0oXCJcIiwgW1xuXHRcdFx0bShcIi5mbGV4LXNwYWNlLWJldHdlZW4uaXRlbXMtY2VudGVyLm10LXMubWItc1wiLCBbXG5cdFx0XHRcdG0oXCIuaDVcIiwgbGFuZy5nZXQoXCJub3RpZmljYXRpb25UYXJnZXRzX2xhYmVsXCIpKSxcblx0XHRcdFx0bShFeHBhbmRlckJ1dHRvbiwge1xuXHRcdFx0XHRcdGxhYmVsOiBcInNob3dfYWN0aW9uXCIsXG5cdFx0XHRcdFx0ZXhwYW5kZWQ6IHZub2RlLmF0dHJzLm9uRXhwYW5kZWRDaGFuZ2UoKSxcblx0XHRcdFx0XHRvbkV4cGFuZGVkQ2hhbmdlOiB2bm9kZS5hdHRycy5vbkV4cGFuZGVkQ2hhbmdlLFxuXHRcdFx0XHR9KSxcblx0XHRcdF0pLFxuXHRcdFx0bShcblx0XHRcdFx0RXhwYW5kZXJQYW5lbCxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGV4cGFuZGVkOiB2bm9kZS5hdHRycy5vbkV4cGFuZGVkQ2hhbmdlKCksXG5cdFx0XHRcdH0sXG5cdFx0XHRcdG0oXCIuZmxleC5mbGV4LWNvbHVtbi5pdGVtcy1lbmQubWJcIiwgW3Zub2RlLmF0dHJzLnJvd0FkZCwgLi4udm5vZGUuYXR0cnMucm93c10pLFxuXHRcdFx0KSxcblx0XHRcdG0oXCIuc21hbGxcIiwgbGFuZy5nZXQoXCJwdXNoSWRlbnRpZmllckluZm9NZXNzYWdlX21zZ1wiKSksXG5cdFx0XSlcblx0fVxufVxuIiwiaW1wb3J0IG0sIHsgQ2hpbGRyZW4sIENvbXBvbmVudCwgVm5vZGUgfSBmcm9tIFwibWl0aHJpbFwiXG5pbXBvcnQgeyBsYW5nIH0gZnJvbSBcIi4uL21pc2MvTGFuZ3VhZ2VWaWV3TW9kZWwuanNcIlxuaW1wb3J0IHsgbmV2ZXJOdWxsIH0gZnJvbSBcIkB0dXRhby90dXRhbm90YS11dGlsc1wiXG5pbXBvcnQgeyBJY29ucyB9IGZyb20gXCIuLi9ndWkvYmFzZS9pY29ucy9JY29ucy5qc1wiXG5pbXBvcnQgeyBhdHRhY2hEcm9wZG93biB9IGZyb20gXCIuLi9ndWkvYmFzZS9Ecm9wZG93bi5qc1wiXG5pbXBvcnQgeyBJY29uQnV0dG9uIH0gZnJvbSBcIi4uL2d1aS9iYXNlL0ljb25CdXR0b24uanNcIlxuaW1wb3J0IHsgQnV0dG9uU2l6ZSB9IGZyb20gXCIuLi9ndWkvYmFzZS9CdXR0b25TaXplLmpzXCJcblxuZXhwb3J0IGludGVyZmFjZSBJZGVudGlmaWVyUm93QXR0cnMge1xuXHRuYW1lOiBzdHJpbmdcblx0aWRlbnRpZmllcjogc3RyaW5nXG5cdGRpc2FibGVkOiBib29sZWFuXG5cdGN1cnJlbnQ6IGJvb2xlYW5cblx0Zm9ybWF0SWRlbnRpZmllcjogYm9vbGVhblxuXHRyZW1vdmVDbGlja2VkOiAoKSA9PiB2b2lkXG5cdGRpc2FibGVDbGlja2VkOiAoKSA9PiB2b2lkXG59XG5cbi8qKlxuICogRGlzcGxheXMgZGF0YSBmb3Igb25lIHB1c2ggaWRlbnRpZmllclxuICovXG5leHBvcnQgY2xhc3MgSWRlbnRpZmllclJvdyBpbXBsZW1lbnRzIENvbXBvbmVudDxJZGVudGlmaWVyUm93QXR0cnM+IHtcblx0dmlldyh2bm9kZTogVm5vZGU8SWRlbnRpZmllclJvd0F0dHJzPik6IENoaWxkcmVuIHtcblx0XHRjb25zdCBkcm9wZG93bkF0dHJzID0gYXR0YWNoRHJvcGRvd24oe1xuXHRcdFx0bWFpbkJ1dHRvbkF0dHJzOiB7XG5cdFx0XHRcdHRpdGxlOiBcImVkaXRfYWN0aW9uXCIsXG5cdFx0XHRcdGljb246IEljb25zLk1vcmUsXG5cdFx0XHRcdHNpemU6IEJ1dHRvblNpemUuQ29tcGFjdCxcblx0XHRcdH0sXG5cdFx0XHRjaGlsZEF0dHJzOiAoKSA9PiBbXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRsYWJlbDogdm5vZGUuYXR0cnMuZGlzYWJsZWQgPyBcImFjdGl2YXRlX2FjdGlvblwiIDogXCJkZWFjdGl2YXRlX2FjdGlvblwiLFxuXHRcdFx0XHRcdGNsaWNrOiB2bm9kZS5hdHRycy5kaXNhYmxlQ2xpY2tlZCxcblx0XHRcdFx0fSxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGxhYmVsOiBcImRlbGV0ZV9hY3Rpb25cIixcblx0XHRcdFx0XHRjbGljazogdm5vZGUuYXR0cnMucmVtb3ZlQ2xpY2tlZCxcblx0XHRcdFx0fSxcblx0XHRcdF0sXG5cdFx0fSlcblx0XHRyZXR1cm4gbShcIi5mbGV4LmZsZXgtY29sdW1uLmZ1bGwtd2lkdGhcIiwgW1xuXHRcdFx0bShcIi5mbGV4Lml0ZW1zLWNlbnRlci5zZWxlY3RhYmxlXCIsIFtcblx0XHRcdFx0bShcInNwYW5cIiArICh2bm9kZS5hdHRycy5jdXJyZW50ID8gXCIuYlwiIDogXCJcIiksIHZub2RlLmF0dHJzLm5hbWUpLFxuXHRcdFx0XHR2bm9kZS5hdHRycy5kaXNhYmxlZCA/IG0oXCIubWxyXCIsIGAoJHtsYW5nLmdldChcIm5vdGlmaWNhdGlvbnNEaXNhYmxlZF9sYWJlbFwiKX0pYCkgOiBudWxsLFxuXHRcdFx0XHRtKFwiLmZsZXgtZ3Jvd1wiKSxcblx0XHRcdFx0bShJY29uQnV0dG9uLCBkcm9wZG93bkF0dHJzKSxcblx0XHRcdF0pLFxuXHRcdFx0dGhpcy5yZW5kZXJJZGVudGlmaWVyKHZub2RlLmF0dHJzKSxcblx0XHRdKVxuXHR9XG5cblx0cHJpdmF0ZSByZW5kZXJJZGVudGlmaWVyKHsgaWRlbnRpZmllciwgZm9ybWF0SWRlbnRpZmllciB9OiBJZGVudGlmaWVyUm93QXR0cnMpOiBDaGlsZHJlbiB7XG5cdFx0Y29uc3QgaWRlbnRpZmllclRleHQgPSBmb3JtYXRJZGVudGlmaWVyXG5cdFx0XHQ/IG5ldmVyTnVsbChpZGVudGlmaWVyLm1hdGNoKC8uezJ9L2cpKS5tYXAoKGVsLCBpKSA9PiBtKFwic3Bhbi5wci1zXCIgKyAoaSAlIDIgPT09IDAgPyBcIi5iXCIgOiBcIlwiKSwgZWwpKVxuXHRcdFx0OiBpZGVudGlmaWVyXG5cdFx0cmV0dXJuIG0oXCIudGV4dC1icmVhay5zbWFsbC5tb25vc3BhY2UubXQtbmVnYXRpdmUtaHBhZC1idXR0b24uc2VsZWN0YWJsZVwiLCBpZGVudGlmaWVyVGV4dClcblx0fVxufVxuIiwiaW1wb3J0IG0sIHsgQ2hpbGRyZW4gfSBmcm9tIFwibWl0aHJpbFwiXG5pbXBvcnQgeyBFbnRpdHlVcGRhdGVEYXRhLCBpc1VwZGF0ZUZvclR5cGVSZWYgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2FwaS9jb21tb24vdXRpbHMvRW50aXR5VXBkYXRlVXRpbHMuanNcIlxuaW1wb3J0IHsgRXh0ZW5kZWROb3RpZmljYXRpb25Nb2RlIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9uYXRpdmUvY29tbW9uL2dlbmVyYXRlZGlwYy9FeHRlbmRlZE5vdGlmaWNhdGlvbk1vZGUuanNcIlxuaW1wb3J0IFN0cmVhbSBmcm9tIFwibWl0aHJpbC9zdHJlYW1cIlxuaW1wb3J0IHN0cmVhbSBmcm9tIFwibWl0aHJpbC9zdHJlYW1cIlxuaW1wb3J0IHsgUHVzaElkZW50aWZpZXIsIFB1c2hJZGVudGlmaWVyVHlwZVJlZiwgVXNlciB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL2VudGl0aWVzL3N5cy9UeXBlUmVmcy5qc1wiXG5pbXBvcnQgeyBsb2NhdG9yIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9hcGkvbWFpbi9Db21tb25Mb2NhdG9yLmpzXCJcbmltcG9ydCB7IGxhbmcgfSBmcm9tIFwiLi4vLi4vY29tbW9uL21pc2MvTGFuZ3VhZ2VWaWV3TW9kZWwuanNcIlxuaW1wb3J0IHsgSWNvbkJ1dHRvbiB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL2Jhc2UvSWNvbkJ1dHRvbi5qc1wiXG5pbXBvcnQgeyBJY29ucyB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL2Jhc2UvaWNvbnMvSWNvbnMuanNcIlxuaW1wb3J0IHsgQnV0dG9uU2l6ZSB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL2Jhc2UvQnV0dG9uU2l6ZS5qc1wiXG5pbXBvcnQgeyBpc0FwcCwgaXNCcm93c2VyLCBpc0Rlc2t0b3AgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2FwaS9jb21tb24vRW52LmpzXCJcbmltcG9ydCB7IG5vT3AsIG9mQ2xhc3MgfSBmcm9tIFwiQHR1dGFvL3R1dGFub3RhLXV0aWxzXCJcbmltcG9ydCB7IFB1c2hTZXJ2aWNlVHlwZSB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL2NvbW1vbi9UdXRhbm90YUNvbnN0YW50cy5qc1wiXG5pbXBvcnQgeyBtYWlsTG9jYXRvciB9IGZyb20gXCIuLi9tYWlsTG9jYXRvci5qc1wiXG5pbXBvcnQgeyBVcGRhdGFibGVTZXR0aW5nc1ZpZXdlciB9IGZyb20gXCIuLi8uLi9jb21tb24vc2V0dGluZ3MvSW50ZXJmYWNlcy5qc1wiXG5pbXBvcnQgeyBOb3RpZmljYXRpb25Db250ZW50U2VsZWN0b3IgfSBmcm9tIFwiLi9Ob3RpZmljYXRpb25Db250ZW50U2VsZWN0b3IuanNcIlxuaW1wb3J0IHsgTm90aWZpY2F0aW9uVGFyZ2V0c0xpc3QsIE5vdGlmaWNhdGlvblRhcmdldHNMaXN0QXR0cnMgfSBmcm9tIFwiLi4vLi4vY29tbW9uL3NldHRpbmdzL05vdGlmaWNhdGlvblRhcmdldHNMaXN0LmpzXCJcbmltcG9ydCB7IEFwcFR5cGUgfSBmcm9tIFwiLi4vLi4vY29tbW9uL21pc2MvQ2xpZW50Q29uc3RhbnRzLmpzXCJcbmltcG9ydCB7IE5vdEZvdW5kRXJyb3IgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2FwaS9jb21tb24vZXJyb3IvUmVzdEVycm9yLmpzXCJcbmltcG9ydCB7IElkZW50aWZpZXJSb3cgfSBmcm9tIFwiLi4vLi4vY29tbW9uL3NldHRpbmdzL0lkZW50aWZpZXJSb3cuanNcIlxuaW1wb3J0IHsgRHJvcERvd25TZWxlY3RvciwgdHlwZSBEcm9wRG93blNlbGVjdG9yQXR0cnMgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2d1aS9iYXNlL0Ryb3BEb3duU2VsZWN0b3IuanNcIlxuaW1wb3J0IHsgUGVybWlzc2lvblR5cGUgfSBmcm9tIFwiLi4vLi4vY29tbW9uL25hdGl2ZS9jb21tb24vZ2VuZXJhdGVkaXBjL1Blcm1pc3Npb25UeXBlLmpzXCJcblxuZXhwb3J0IGNsYXNzIE5vdGlmaWNhdGlvblNldHRpbmdzVmlld2VyIGltcGxlbWVudHMgVXBkYXRhYmxlU2V0dGluZ3NWaWV3ZXIge1xuXHRwcml2YXRlIGN1cnJlbnRJZGVudGlmaWVyOiBzdHJpbmcgfCBudWxsID0gbnVsbFxuXHRwcml2YXRlIGV4dGVuZGVkTm90aWZpY2F0aW9uTW9kZTogRXh0ZW5kZWROb3RpZmljYXRpb25Nb2RlIHwgbnVsbCA9IG51bGxcblx0cHJpdmF0ZSByZWFkb25seSBleHBhbmRlZDogU3RyZWFtPGJvb2xlYW4+XG5cdHByaXZhdGUgcmVhZG9ubHkgdXNlcjogVXNlclxuXHRwcml2YXRlIGlkZW50aWZpZXJzOiBQdXNoSWRlbnRpZmllcltdXG5cdHByaXZhdGUgaGFzTm90aWZpY2F0aW9uUGVybWlzc2lvbjogYm9vbGVhbiA9IHRydWVcblx0cHJpdmF0ZSByZWNlaXZlQ2FsZW5kYXJOb3RpZmljYXRpb25zOiBib29sZWFuID0gdHJ1ZVxuXG5cdGNvbnN0cnVjdG9yKCkge1xuXHRcdHRoaXMuZXhwYW5kZWQgPSBzdHJlYW08Ym9vbGVhbj4oZmFsc2UpXG5cdFx0dGhpcy5pZGVudGlmaWVycyA9IFtdXG5cdFx0dGhpcy51c2VyID0gbG9jYXRvci5sb2dpbnMuZ2V0VXNlckNvbnRyb2xsZXIoKS51c2VyXG5cblx0XHR0aGlzLmxvYWRQdXNoSWRlbnRpZmllcnMoKVxuXG5cdFx0aWYgKGlzQXBwKCkgfHwgaXNEZXNrdG9wKCkpIHtcblx0XHRcdGNvbnN0IHByb21pc2VzOiBQcm9taXNlPGFueT5bXSA9IFtsb2NhdG9yLnB1c2hTZXJ2aWNlLmdldEV4dGVuZGVkTm90aWZpY2F0aW9uTW9kZSgpXVxuXG5cdFx0XHRpZiAoaXNBcHAoKSkge1xuXHRcdFx0XHRwcm9taXNlcy5wdXNoKFxuXHRcdFx0XHRcdGxvY2F0b3Iuc3lzdGVtUGVybWlzc2lvbkhhbmRsZXIuaGFzUGVybWlzc2lvbihQZXJtaXNzaW9uVHlwZS5Ob3RpZmljYXRpb24pLFxuXHRcdFx0XHRcdGxvY2F0b3IucHVzaFNlcnZpY2UuZ2V0UmVjZWl2ZUNhbGVuZGFyTm90aWZpY2F0aW9uQ29uZmlnKCksXG5cdFx0XHRcdClcblx0XHRcdH1cblx0XHRcdFByb21pc2UuYWxsKHByb21pc2VzKS50aGVuKChbZXh0ZW5kZWROb3RpZmljYXRpb25Nb2RlLCBoYXNQZXJtaXNzaW9uLCBjYW5SZWNlaXZlQ2FsZW5kYXJOb3RpZmljYXRpb25zXSkgPT4ge1xuXHRcdFx0XHR0aGlzLmV4dGVuZGVkTm90aWZpY2F0aW9uTW9kZSA9IGV4dGVuZGVkTm90aWZpY2F0aW9uTW9kZVxuXHRcdFx0XHRpZiAoaXNBcHAoKSkge1xuXHRcdFx0XHRcdGlmICh0aGlzLmhhc05vdGlmaWNhdGlvblBlcm1pc3Npb24gIT09IGhhc1Blcm1pc3Npb24pIHRoaXMuaGFzTm90aWZpY2F0aW9uUGVybWlzc2lvbiA9IGhhc1Blcm1pc3Npb25cblx0XHRcdFx0XHRpZiAodGhpcy5yZWNlaXZlQ2FsZW5kYXJOb3RpZmljYXRpb25zICE9PSBjYW5SZWNlaXZlQ2FsZW5kYXJOb3RpZmljYXRpb25zKVxuXHRcdFx0XHRcdFx0dGhpcy5yZWNlaXZlQ2FsZW5kYXJOb3RpZmljYXRpb25zID0gY2FuUmVjZWl2ZUNhbGVuZGFyTm90aWZpY2F0aW9uc1xuXHRcdFx0XHR9XG5cdFx0XHRcdG0ucmVkcmF3KClcblx0XHRcdH0pXG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSB0b2dnbGVQdXNoSWRlbnRpZmllcihpZGVudGlmaWVyOiBQdXNoSWRlbnRpZmllcikge1xuXHRcdGlkZW50aWZpZXIuZGlzYWJsZWQgPSAhaWRlbnRpZmllci5kaXNhYmxlZFxuXHRcdGxvY2F0b3IuZW50aXR5Q2xpZW50LnVwZGF0ZShpZGVudGlmaWVyKS50aGVuKCgpID0+IG0ucmVkcmF3KVxuXG5cdFx0aWYgKCFpc0Jyb3dzZXIoKSAmJiBpZGVudGlmaWVyLmlkZW50aWZpZXIgPT09IHRoaXMuY3VycmVudElkZW50aWZpZXIpIHtcblx0XHRcdGlmIChpZGVudGlmaWVyLmRpc2FibGVkKSB7XG5cdFx0XHRcdGxvY2F0b3IucHVzaFNlcnZpY2UuaW52YWxpZGF0ZUFsYXJtc0ZvclVzZXIodGhpcy51c2VyLl9pZClcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGxvY2F0b3IucHVzaFNlcnZpY2UucmVSZWdpc3RlcigpXG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0dmlldygpOiBDaGlsZHJlbiB7XG5cdFx0Y29uc3Qgcm93QWRkID0gbShcIi5mdWxsLXdpZHRoLmZsZXgtc3BhY2UtYmV0d2Vlbi5pdGVtcy1jZW50ZXIubWItc1wiLCBbXG5cdFx0XHRsYW5nLmdldChcImVtYWlsUHVzaE5vdGlmaWNhdGlvbl9hY3Rpb25cIiksXG5cdFx0XHRtKEljb25CdXR0b24sIHtcblx0XHRcdFx0dGl0bGU6IFwiZW1haWxQdXNoTm90aWZpY2F0aW9uX2FjdGlvblwiLFxuXHRcdFx0XHRjbGljazogKCkgPT4gdGhpcy5zaG93QWRkRW1haWxOb3RpZmljYXRpb25EaWFsb2coKSxcblx0XHRcdFx0aWNvbjogSWNvbnMuQWRkLFxuXHRcdFx0XHRzaXplOiBCdXR0b25TaXplLkNvbXBhY3QsXG5cdFx0XHR9KSxcblx0XHRdKVxuXG5cdFx0Y29uc3Qgcm93cyA9IHRoaXMuaWRlbnRpZmllcnNcblx0XHRcdC5tYXAoKGlkZW50aWZpZXIpID0+IHtcblx0XHRcdFx0Y29uc3QgaXNDdXJyZW50RGV2aWNlID0gKGlzQXBwKCkgfHwgaXNEZXNrdG9wKCkpICYmIGlkZW50aWZpZXIuaWRlbnRpZmllciA9PT0gdGhpcy5jdXJyZW50SWRlbnRpZmllclxuXG5cdFx0XHRcdHJldHVybiBtKElkZW50aWZpZXJSb3csIHtcblx0XHRcdFx0XHRuYW1lOiB0aGlzLmlkZW50aWZpZXJEaXNwbGF5TmFtZShpc0N1cnJlbnREZXZpY2UsIGlkZW50aWZpZXIucHVzaFNlcnZpY2VUeXBlLCBpZGVudGlmaWVyLmRpc3BsYXlOYW1lKSxcblx0XHRcdFx0XHRkaXNhYmxlZDogaWRlbnRpZmllci5kaXNhYmxlZCxcblx0XHRcdFx0XHRpZGVudGlmaWVyOiBpZGVudGlmaWVyLmlkZW50aWZpZXIsXG5cdFx0XHRcdFx0Y3VycmVudDogaXNDdXJyZW50RGV2aWNlLFxuXHRcdFx0XHRcdHJlbW92ZUNsaWNrZWQ6ICgpID0+IHtcblx0XHRcdFx0XHRcdGxvY2F0b3IuZW50aXR5Q2xpZW50LmVyYXNlKGlkZW50aWZpZXIpLmNhdGNoKG9mQ2xhc3MoTm90Rm91bmRFcnJvciwgbm9PcCkpXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRmb3JtYXRJZGVudGlmaWVyOiBpZGVudGlmaWVyLnB1c2hTZXJ2aWNlVHlwZSAhPT0gUHVzaFNlcnZpY2VUeXBlLkVNQUlMLFxuXHRcdFx0XHRcdGRpc2FibGVDbGlja2VkOiAoKSA9PiB0aGlzLnRvZ2dsZVB1c2hJZGVudGlmaWVyKGlkZW50aWZpZXIpLFxuXHRcdFx0XHR9KVxuXHRcdFx0fSlcblx0XHRcdC5zb3J0KChsLCByKSA9PiArci5hdHRycy5jdXJyZW50IC0gK2wuYXR0cnMuY3VycmVudClcblxuXHRcdHJldHVybiBtKFwiLmZpbGwtYWJzb2x1dGUuc2Nyb2xsLnBsci1sLnBiLXhsXCIsIFtcblx0XHRcdG0oXCIuZmxleC5jb2xcIiwgW1xuXHRcdFx0XHRtKFwiLmZsZXgtc3BhY2UtYmV0d2Vlbi5pdGVtcy1jZW50ZXIubXQtbC5tYi1zXCIsIFttKFwiLmg0XCIsIGxhbmcuZ2V0KFwibm90aWZpY2F0aW9uU2V0dGluZ3NfYWN0aW9uXCIpKV0pLFxuXHRcdFx0XHR0aGlzLmV4dGVuZGVkTm90aWZpY2F0aW9uTW9kZVxuXHRcdFx0XHRcdD8gbShOb3RpZmljYXRpb25Db250ZW50U2VsZWN0b3IsIHtcblx0XHRcdFx0XHRcdFx0ZXh0ZW5kZWROb3RpZmljYXRpb25Nb2RlOiB0aGlzLmV4dGVuZGVkTm90aWZpY2F0aW9uTW9kZSxcblx0XHRcdFx0XHRcdFx0b25DaGFuZ2U6ICh2YWx1ZTogRXh0ZW5kZWROb3RpZmljYXRpb25Nb2RlKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0bG9jYXRvci5wdXNoU2VydmljZS5zZXRFeHRlbmRlZE5vdGlmaWNhdGlvbk1vZGUodmFsdWUpXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5leHRlbmRlZE5vdGlmaWNhdGlvbk1vZGUgPSB2YWx1ZVxuXHRcdFx0XHRcdFx0XHRcdC8vIFdlIGNhbiBhc3N1bWUgXCJ0cnVlXCIgYmVjYXVzZSBvbkNoYW5nZSBpcyBvbmx5IHRyaWdnZXJlZCBpZiBwZXJtaXNzaW9uIHdhcyBncmFudGVkXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5oYXNOb3RpZmljYXRpb25QZXJtaXNzaW9uID0gdHJ1ZVxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdCAgfSlcblx0XHRcdFx0XHQ6IG51bGwsXG5cdFx0XHRcdGlzQXBwKCkgPyB0aGlzLnJlbmRlckNhbGVuZGFyTm90aWZpY2F0aW9uc0Ryb3Bkb3duKCkgOiBudWxsLFxuXHRcdFx0XHRtKE5vdGlmaWNhdGlvblRhcmdldHNMaXN0LCB7IHJvd3MsIHJvd0FkZCwgb25FeHBhbmRlZENoYW5nZTogdGhpcy5leHBhbmRlZCB9IHNhdGlzZmllcyBOb3RpZmljYXRpb25UYXJnZXRzTGlzdEF0dHJzKSxcblx0XHRcdF0pLFxuXHRcdF0pXG5cdH1cblxuXHRwcml2YXRlIHJlbmRlckNhbGVuZGFyTm90aWZpY2F0aW9uc0Ryb3Bkb3duKCk6IENoaWxkcmVuIHtcblx0XHRyZXR1cm4gbShEcm9wRG93blNlbGVjdG9yLCB7XG5cdFx0XHRsYWJlbDogXCJyZWNlaXZlQ2FsZW5kYXJOb3RpZmljYXRpb25zX2xhYmVsXCIsXG5cdFx0XHRpdGVtczogW1xuXHRcdFx0XHR7XG5cdFx0XHRcdFx0bmFtZTogbGFuZy5nZXQoXCJhY3RpdmF0ZWRfbGFiZWxcIiksXG5cdFx0XHRcdFx0dmFsdWU6IHRydWUsXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRuYW1lOiBsYW5nLmdldChcImRlYWN0aXZhdGVkX2xhYmVsXCIpLFxuXHRcdFx0XHRcdHZhbHVlOiBmYWxzZSxcblx0XHRcdFx0fSxcblx0XHRcdF0sXG5cdFx0XHRzZWxlY3RlZFZhbHVlOiB0aGlzLnJlY2VpdmVDYWxlbmRhck5vdGlmaWNhdGlvbnMsXG5cdFx0XHRzZWxlY3Rpb25DaGFuZ2VkSGFuZGxlcjogYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdGlmICh0aGlzLnJlY2VpdmVDYWxlbmRhck5vdGlmaWNhdGlvbnMgIT09IHZhbHVlKSB7XG5cdFx0XHRcdFx0bG9jYXRvci5wdXNoU2VydmljZS5zZXRSZWNlaXZlQ2FsZW5kYXJOb3RpZmljYXRpb25Db25maWcodmFsdWUpXG5cdFx0XHRcdFx0dGhpcy5yZWNlaXZlQ2FsZW5kYXJOb3RpZmljYXRpb25zID0gdmFsdWVcblx0XHRcdFx0XHRpZiAodmFsdWUpIHtcblx0XHRcdFx0XHRcdGF3YWl0IGxvY2F0b3IucHVzaFNlcnZpY2UucmVSZWdpc3RlcigpXG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGF3YWl0IGxvY2F0b3IucHVzaFNlcnZpY2UuaW52YWxpZGF0ZUFsYXJtc0ZvclVzZXIodGhpcy51c2VyLl9pZClcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0XHRkaXNhYmxlZDogIXRoaXMuaGFzTm90aWZpY2F0aW9uUGVybWlzc2lvbixcblx0XHRcdHNlbGVjdGVkVmFsdWVEaXNwbGF5OiAhdGhpcy5oYXNOb3RpZmljYXRpb25QZXJtaXNzaW9uID8gbGFuZy5nZXQoXCJkZWFjdGl2YXRlZF9sYWJlbFwiKSA6IHVuZGVmaW5lZCxcblx0XHR9IHNhdGlzZmllcyBEcm9wRG93blNlbGVjdG9yQXR0cnM8Ym9vbGVhbj4pXG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIHNob3dBZGRFbWFpbE5vdGlmaWNhdGlvbkRpYWxvZygpIHtcblx0XHRjb25zdCBkaWFsb2cgPSBhd2FpdCBtYWlsTG9jYXRvci5hZGROb3RpZmljYXRpb25FbWFpbERpYWxvZygpXG5cdFx0ZGlhbG9nLnNob3coKVxuXHR9XG5cblx0cHJpdmF0ZSBpZGVudGlmaWVyRGlzcGxheU5hbWUoY3VycmVudDogYm9vbGVhbiwgdHlwZTogTnVtYmVyU3RyaW5nLCBkaXNwbGF5TmFtZTogc3RyaW5nKTogc3RyaW5nIHtcblx0XHRpZiAoY3VycmVudCkge1xuXHRcdFx0cmV0dXJuIGxhbmcuZ2V0KFwicHVzaElkZW50aWZpZXJDdXJyZW50RGV2aWNlX2xhYmVsXCIpXG5cdFx0fSBlbHNlIGlmIChkaXNwbGF5TmFtZSkge1xuXHRcdFx0cmV0dXJuIGRpc3BsYXlOYW1lXG5cdFx0fSBlbHNlIHtcblx0XHRcdHJldHVybiBbXCJBbmRyb2lkIEZDTVwiLCBcImlPU1wiLCBsYW5nLmdldChcImFkbWluRW1haWxTZXR0aW5nc19hY3Rpb25cIiksIFwiQW5kcm9pZCBUdXRhbm90YVwiXVtOdW1iZXIodHlwZSldXG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyBsb2FkUHVzaElkZW50aWZpZXJzKCkge1xuXHRcdHRoaXMuY3VycmVudElkZW50aWZpZXIgPSB0aGlzLmdldEN1cnJlbnRJZGVudGlmaWVyKClcblx0XHRjb25zdCBsaXN0ID0gdGhpcy51c2VyLnB1c2hJZGVudGlmaWVyTGlzdFxuXG5cdFx0aWYgKGxpc3QpIHtcblx0XHRcdHRoaXMuaWRlbnRpZmllcnMgPSAoYXdhaXQgbG9jYXRvci5lbnRpdHlDbGllbnQubG9hZEFsbChQdXNoSWRlbnRpZmllclR5cGVSZWYsIGxpc3QubGlzdCkpLmZpbHRlcihcblx0XHRcdFx0KGlkZW50aWZpZXIpID0+IGlkZW50aWZpZXIuYXBwID09PSBBcHBUeXBlLk1haWwgfHwgaWRlbnRpZmllci5hcHAgPT09IEFwcFR5cGUuSW50ZWdyYXRlZCxcblx0XHRcdCkgLy8gRmlsdGVyIG91dCBjYWxlbmRhciB0YXJnZXRzXG5cblx0XHRcdG0ucmVkcmF3KClcblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIGdldEN1cnJlbnRJZGVudGlmaWVyKCk6IHN0cmluZyB8IG51bGwge1xuXHRcdGlmIChpc0FwcCgpIHx8IGlzRGVza3RvcCgpKSB7XG5cdFx0XHRjb25zdCBpZGVudGlmaWVyID0gbWFpbExvY2F0b3IucHVzaFNlcnZpY2UuZ2V0TG9hZGVkUHVzaElkZW50aWZpZXIoKT8uaWRlbnRpZmllclxuXHRcdFx0cmV0dXJuIGlkZW50aWZpZXIgPyBpZGVudGlmaWVyIDogbnVsbFxuXHRcdH1cblxuXHRcdHJldHVybiBudWxsXG5cdH1cblxuXHRhc3luYyBlbnRpdHlFdmVudHNSZWNlaXZlZCh1cGRhdGVzOiByZWFkb25seSBFbnRpdHlVcGRhdGVEYXRhW10pOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRmb3IgKGxldCB1cGRhdGUgb2YgdXBkYXRlcykge1xuXHRcdFx0aWYgKGlzVXBkYXRlRm9yVHlwZVJlZihQdXNoSWRlbnRpZmllclR5cGVSZWYsIHVwZGF0ZSkpIHtcblx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkUHVzaElkZW50aWZpZXJzKClcblx0XHRcdH1cblx0XHR9XG5cdH1cbn1cbiIsImltcG9ydCBtIGZyb20gXCJtaXRocmlsXCJcbmltcG9ydCBNaXRocmlsLCB7IENoaWxkcmVuIH0gZnJvbSBcIm1pdGhyaWxcIlxuaW1wb3J0IHsgVXBkYXRhYmxlU2V0dGluZ3NWaWV3ZXIgfSBmcm9tIFwiLi9JbnRlcmZhY2VzLmpzXCJcbmltcG9ydCB7IEVudGl0eVVwZGF0ZURhdGEgfSBmcm9tIFwiLi4vYXBpL2NvbW1vbi91dGlscy9FbnRpdHlVcGRhdGVVdGlscy5qc1wiXG5pbXBvcnQgeyBJY29uQnV0dG9uIH0gZnJvbSBcIi4uL2d1aS9iYXNlL0ljb25CdXR0b24uanNcIlxuaW1wb3J0IHsgSWNvbnMgfSBmcm9tIFwiLi4vZ3VpL2Jhc2UvaWNvbnMvSWNvbnMuanNcIlxuaW1wb3J0IHsgQnV0dG9uU2l6ZSB9IGZyb20gXCIuLi9ndWkvYmFzZS9CdXR0b25TaXplLmpzXCJcbmltcG9ydCB7IFRleHRGaWVsZCB9IGZyb20gXCIuLi9ndWkvYmFzZS9UZXh0RmllbGQuanNcIlxuaW1wb3J0IHsgZm9ybWF0UHJpY2UgfSBmcm9tIFwiLi4vc3Vic2NyaXB0aW9uL1ByaWNlVXRpbHMuanNcIlxuaW1wb3J0IHsgQnV0dG9uLCBCdXR0b25UeXBlIH0gZnJvbSBcIi4uL2d1aS9iYXNlL0J1dHRvbi5qc1wiXG5pbXBvcnQgeyBMaXN0Q29sdW1uV3JhcHBlciB9IGZyb20gXCIuLi9ndWkvTGlzdENvbHVtbldyYXBwZXIuanNcIlxuaW1wb3J0IHsgbGFuZyB9IGZyb20gXCIuLi9taXNjL0xhbmd1YWdlVmlld01vZGVsLmpzXCJcbmltcG9ydCB7IGxvY2F0b3IgfSBmcm9tIFwiLi4vYXBpL21haW4vQ29tbW9uTG9jYXRvclwiXG5pbXBvcnQgeyBjb3B5VG9DbGlwYm9hcmQgfSBmcm9tIFwiLi4vbWlzYy9DbGlwYm9hcmRVdGlscy5qc1wiXG5pbXBvcnQgeyBtYWlsTG9jYXRvciB9IGZyb20gXCIuLi8uLi9tYWlsLWFwcC9tYWlsTG9jYXRvci5qc1wiXG5pbXBvcnQgeyBzaG93U25hY2tCYXIgfSBmcm9tIFwiLi4vZ3VpL2Jhc2UvU25hY2tCYXIuanNcIlxuaW1wb3J0IHsgTGF6eUxvYWRlZCB9IGZyb20gXCJAdHV0YW8vdHV0YW5vdGEtdXRpbHNcIlxuaW1wb3J0IHsgQWZmaWxpYXRlVmlld01vZGVsIH0gZnJvbSBcIi4vQWZmaWxpYXRlVmlld01vZGVsLmpzXCJcblxuLyoqXG4gKiBTZWN0aW9uIGluIHVzZXIgc2V0dGluZ3MgdG8gZGlzcGxheSB0aGUgcmVmZXJyYWwgbGluayBhbmQgbGV0IHVzZXJzIHNoYXJlIGl0LlxuICovXG5leHBvcnQgY2xhc3MgQWZmaWxpYXRlU2V0dGluZ3NWaWV3ZXIgaW1wbGVtZW50cyBVcGRhdGFibGVTZXR0aW5nc1ZpZXdlciB7XG5cdHByaXZhdGUgcmVhZG9ubHkgYWZmaWxpYXRlVmlld01vZGVsID0gbmV3IExhenlMb2FkZWQ8QWZmaWxpYXRlVmlld01vZGVsPihhc3luYyAoKSA9PiBhd2FpdCBtYWlsTG9jYXRvci5hZmZpbGlhdGVWaWV3TW9kZWwoKSlcblx0cHJpdmF0ZSByZWFkb25seSBkb21haW5Db25maWcgPSBsb2NhdG9yLmRvbWFpbkNvbmZpZ1Byb3ZpZGVyKCkuZ2V0Q3VycmVudERvbWFpbkNvbmZpZygpXG5cblx0Y29uc3RydWN0b3IocHJpdmF0ZSByZWFkb25seSBnZXRJc1Nob3dpbmdLcGlzOiAoKSA9PiBib29sZWFuLCBwcml2YXRlIHJlYWRvbmx5IHRvZ2dsZUtwaUNvbHVtbjogKCkgPT4gdW5rbm93bikge31cblxuXHRvbmluaXQoKTogYW55IHtcblx0XHR0aGlzLmFmZmlsaWF0ZVZpZXdNb2RlbC5nZXRBc3luYygpLnRoZW4oKGF2bSkgPT4gYXZtLmxvYWQoKS5maW5hbGx5KG0ucmVkcmF3KSlcblx0fVxuXG5cdHZpZXcoKTogQ2hpbGRyZW4ge1xuXHRcdGlmICh0aGlzLmFmZmlsaWF0ZVZpZXdNb2RlbC5pc0xvYWRlZCgpKSB7XG5cdFx0XHRjb25zdCBhdm0gPSB0aGlzLmFmZmlsaWF0ZVZpZXdNb2RlbC5nZXRTeW5jKCkgYXMgQWZmaWxpYXRlVmlld01vZGVsXG5cdFx0XHRpZiAoYXZtLmlzTG9hZGluZykge1xuXHRcdFx0XHRyZXR1cm4gbShMaXN0Q29sdW1uV3JhcHBlciwgbShcInBcIiwgXCJMb2FkaW5nLi4uXCIpKVxuXHRcdFx0fVxuXG5cdFx0XHRpZiAoYXZtLmRhdGEgPT09IG51bGwpIHtcblx0XHRcdFx0cmV0dXJuIG0oTGlzdENvbHVtbldyYXBwZXIsIG0oXCJwXCIsIFwiRXJyb3JcIikpXG5cdFx0XHR9XG5cblx0XHRcdGNvbnN0IHNoYXJlVXJsID0gYCR7dGhpcy5kb21haW5Db25maWcud2Vic2l0ZUJhc2VVcmx9P3Qtc3JjPSR7YXZtLmRhdGEucHJvbW90aW9uSWR9YFxuXG5cdFx0XHRyZXR1cm4gbShcblx0XHRcdFx0TGlzdENvbHVtbldyYXBwZXIsXG5cdFx0XHRcdG0oXG5cdFx0XHRcdFx0XCJzZWN0aW9uLmZpbGwtYWJzb2x1dGUuc2Nyb2xsLnBsci1sXCIsXG5cdFx0XHRcdFx0bShcImg0Lm10LWxcIiwgbGFuZy5nZXQoXCJhZmZpbGlhdGVTZXR0aW5nc19sYWJlbFwiKSksXG5cdFx0XHRcdFx0bShUZXh0RmllbGQsIHtcblx0XHRcdFx0XHRcdGlzUmVhZE9ubHk6IHRydWUsXG5cdFx0XHRcdFx0XHRsYWJlbDogXCJyZWZlcnJhbExpbmtfbGFiZWxcIixcblx0XHRcdFx0XHRcdHZhbHVlOiBzaGFyZVVybCxcblx0XHRcdFx0XHRcdGluamVjdGlvbnNSaWdodDogKCkgPT5cblx0XHRcdFx0XHRcdFx0bShJY29uQnV0dG9uLCB7XG5cdFx0XHRcdFx0XHRcdFx0dGl0bGU6IFwiY29weV9hY3Rpb25cIixcblx0XHRcdFx0XHRcdFx0XHRjbGljazogKCkgPT4gdGhpcy5vbkNvcHlCdXR0b25DbGljayhzaGFyZVVybCksXG5cdFx0XHRcdFx0XHRcdFx0aWNvbjogSWNvbnMuQ29weSxcblx0XHRcdFx0XHRcdFx0XHRzaXplOiBCdXR0b25TaXplLkNvbXBhY3QsXG5cdFx0XHRcdFx0XHRcdH0pLFxuXHRcdFx0XHRcdH0pLFxuXHRcdFx0XHRcdG0oVGV4dEZpZWxkLCB7XG5cdFx0XHRcdFx0XHRpc1JlYWRPbmx5OiB0cnVlLFxuXHRcdFx0XHRcdFx0bGFiZWw6IFwiYWZmaWxpYXRlU2V0dGluZ3NBY2N1bXVsYXRlZF9sYWJlbFwiLFxuXHRcdFx0XHRcdFx0aGVscExhYmVsOiAoKSA9PiBsYW5nLmdldChcImFmZmlsaWF0ZVNldHRpbmdzQWNjdW11bGF0ZWRfbXNnXCIpLFxuXHRcdFx0XHRcdFx0dmFsdWU6IGZvcm1hdFByaWNlKE51bWJlcihhdm0hLmRhdGEhLmFjY3VtdWxhdGVkQ29tbWlzc2lvbiksIHRydWUpLFxuXHRcdFx0XHRcdH0pLFxuXHRcdFx0XHRcdG0oVGV4dEZpZWxkLCB7XG5cdFx0XHRcdFx0XHRpc1JlYWRPbmx5OiB0cnVlLFxuXHRcdFx0XHRcdFx0bGFiZWw6IFwiYWZmaWxpYXRlU2V0dGluZ3NDcmVkaXRlZF9sYWJlbFwiLFxuXHRcdFx0XHRcdFx0aGVscExhYmVsOiAoKSA9PiBsYW5nLmdldChcImFmZmlsaWF0ZVNldHRpbmdzQ3JlZGl0ZWRfbXNnXCIpLFxuXHRcdFx0XHRcdFx0dmFsdWU6IGZvcm1hdFByaWNlKE51bWJlcihhdm0hLmRhdGEhLmNyZWRpdGVkQ29tbWlzc2lvbiksIHRydWUpLFxuXHRcdFx0XHRcdH0pLFxuXHRcdFx0XHRcdG0oXG5cdFx0XHRcdFx0XHRcIi5mbGV4LmNlbnRlci1ob3Jpem9udGFsbHkubXQtbVwiLFxuXHRcdFx0XHRcdFx0bShCdXR0b24sIHtcblx0XHRcdFx0XHRcdFx0bGFiZWw6IHRoaXMuZ2V0SXNTaG93aW5nS3BpcygpID8gXCJhZmZpbGlhdGVTZXR0aW5nc0hpZGVLcGlzX2xhYmVsXCIgOiBcImFmZmlsaWF0ZVNldHRpbmdzU2hvd0twaXNfbGFiZWxcIixcblx0XHRcdFx0XHRcdFx0dHlwZTogQnV0dG9uVHlwZS5TZWNvbmRhcnksXG5cdFx0XHRcdFx0XHRcdGNsaWNrOiAoKSA9PiB0aGlzLnRvZ2dsZUtwaUNvbHVtbigpLFxuXHRcdFx0XHRcdFx0fSksXG5cdFx0XHRcdFx0KSxcblx0XHRcdFx0KSxcblx0XHRcdClcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmV0dXJuIG0oXCJcIilcblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIG9uQ29weUJ1dHRvbkNsaWNrKHNoYXJlVXJsOiBzdHJpbmcpOiB2b2lkIHtcblx0XHRjb3B5VG9DbGlwYm9hcmQoc2hhcmVVcmwpLnRoZW4oKCkgPT4ge1xuXHRcdFx0c2hvd1NuYWNrQmFyKHtcblx0XHRcdFx0bWVzc2FnZTogXCJsaW5rQ29waWVkX21zZ1wiLFxuXHRcdFx0XHRidXR0b246IHtcblx0XHRcdFx0XHRsYWJlbDogXCJjbG9zZV9hbHRcIixcblx0XHRcdFx0XHRjbGljazogKCkgPT4ge30sXG5cdFx0XHRcdH0sXG5cdFx0XHR9KVxuXHRcdH0pXG5cdH1cblxuXHRhc3luYyBlbnRpdHlFdmVudHNSZWNlaXZlZCh1cGRhdGVzOiBSZWFkb25seUFycmF5PEVudGl0eVVwZGF0ZURhdGE+KTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0Ly8gY2FuIGJlIGEgbm9vcCBiZWNhdXNlIHRoZSByZWZlcnJhbCBjb2RlIHdpbGwgbmV2ZXIgY2hhbmdlIG9uY2UgaXQgd2FzIGNyZWF0ZWRcblx0XHQvLyB3ZSB0cmlnZ2VyIGNyZWF0aW9uIGluIHRoZSBjb25zdHJ1Y3RvciBpZiB0aGVyZSBpcyBubyBjb2RlIHlldFxuXHR9XG59XG4iLCJpbXBvcnQgeyBVcGRhdGFibGVTZXR0aW5nc0RldGFpbHNWaWV3ZXIgfSBmcm9tIFwiLi9JbnRlcmZhY2VzLmpzXCJcbmltcG9ydCBtIGZyb20gXCJtaXRocmlsXCJcbmltcG9ydCB7IEVudGl0eVVwZGF0ZURhdGEgfSBmcm9tIFwiLi4vYXBpL2NvbW1vbi91dGlscy9FbnRpdHlVcGRhdGVVdGlscy5qc1wiXG5pbXBvcnQgeyBMaXN0Q29sdW1uV3JhcHBlciB9IGZyb20gXCIuLi9ndWkvTGlzdENvbHVtbldyYXBwZXIuanNcIlxuaW1wb3J0IHsgQ29sdW1uV2lkdGgsIFRhYmxlLCBUYWJsZUxpbmVBdHRycyB9IGZyb20gXCIuLi9ndWkvYmFzZS9UYWJsZS5qc1wiXG5pbXBvcnQgeyBtYWlsTG9jYXRvciB9IGZyb20gXCIuLi8uLi9tYWlsLWFwcC9tYWlsTG9jYXRvci5qc1wiXG5pbXBvcnQgeyBmb3JtYXRTaG9ydE1vbnRoWWVhcjJEaWdpdCB9IGZyb20gXCIuLi9taXNjL0Zvcm1hdHRlci5qc1wiXG5pbXBvcnQgeyBBZmZpbGlhdGVWaWV3TW9kZWwgfSBmcm9tIFwiLi9BZmZpbGlhdGVWaWV3TW9kZWwuanNcIlxuaW1wb3J0IHsgZm9ybWF0UHJpY2UgfSBmcm9tIFwiLi4vc3Vic2NyaXB0aW9uL1ByaWNlVXRpbHMuanNcIlxuaW1wb3J0IHsgbGFuZyB9IGZyb20gXCIuLi9taXNjL0xhbmd1YWdlVmlld01vZGVsLmpzXCJcbmltcG9ydCB7IExhenlMb2FkZWQgfSBmcm9tIFwiQHR1dGFvL3R1dGFub3RhLXV0aWxzXCJcbmltcG9ydCB7IERhdGVUaW1lIH0gZnJvbSBcImx1eG9uXCJcblxuZXhwb3J0IGNsYXNzIEFmZmlsaWF0ZUtwaXNWaWV3ZXIgaW1wbGVtZW50cyBVcGRhdGFibGVTZXR0aW5nc0RldGFpbHNWaWV3ZXIge1xuXHRwcml2YXRlIHJlYWRvbmx5IGFmZmlsaWF0ZVZpZXdNb2RlbDogTGF6eUxvYWRlZDxBZmZpbGlhdGVWaWV3TW9kZWw+ID0gbmV3IExhenlMb2FkZWQ8QWZmaWxpYXRlVmlld01vZGVsPihhc3luYyAoKSA9PiBhd2FpdCBtYWlsTG9jYXRvci5hZmZpbGlhdGVWaWV3TW9kZWwoKSlcblxuXHRyZW5kZXJWaWV3KCk6IG0uQ2hpbGRyZW4ge1xuXHRcdHJldHVybiBtKFxuXHRcdFx0TGlzdENvbHVtbldyYXBwZXIsXG5cdFx0XHRtKFxuXHRcdFx0XHRcIi5mbGV4LmZsZXgtY29sdW1uLmZpbGwtYWJzb2x1dGUucGxyLWxcIixcblx0XHRcdFx0bShcImg0Lm10LWxcIiwgXCJLUElzXCIpLFxuXHRcdFx0XHRtKFxuXHRcdFx0XHRcdFwiLm92ZXJmbG93LWF1dG8ucHQtc1wiLFxuXHRcdFx0XHRcdHsgc3R5bGU6IHsgaGVpZ2h0OiBcIjEwMCVcIiB9IH0sXG5cdFx0XHRcdFx0bShcblx0XHRcdFx0XHRcdFwiXCIsXG5cdFx0XHRcdFx0XHR7IHN0eWxlOiB7IG1pbldpZHRoOiBcIjgwMHB4XCIgfSB9LFxuXHRcdFx0XHRcdFx0bShUYWJsZSwge1xuXHRcdFx0XHRcdFx0XHRjb2x1bW5IZWFkaW5nOiBbXG5cdFx0XHRcdFx0XHRcdFx0eyBsYWJlbDogXCJtb250aF9sYWJlbFwiIH0sXG5cdFx0XHRcdFx0XHRcdFx0eyBsYWJlbDogXCJhZmZpbGlhdGVTZXR0aW5nc05ld0ZyZWVfbGFiZWxcIiwgaGVscFRleHQ6IFwiYWZmaWxpYXRlU2V0dGluZ3NOZXdGcmVlX21zZ1wiIH0sXG5cdFx0XHRcdFx0XHRcdFx0eyBsYWJlbDogXCJhZmZpbGlhdGVTZXR0aW5nc05ld1BhaWRfbGFiZWxcIiwgaGVscFRleHQ6IFwiYWZmaWxpYXRlU2V0dGluZ3NOZXdQYWlkX21zZ1wiIH0sXG5cdFx0XHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRcdFx0bGFiZWw6IFwiYWZmaWxpYXRlU2V0dGluZ3NUb3RhbEZyZWVfbGFiZWxcIixcblx0XHRcdFx0XHRcdFx0XHRcdGhlbHBUZXh0OiBcImFmZmlsaWF0ZVNldHRpbmdzVG90YWxGcmVlX21zZ1wiLFxuXHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRcdFx0bGFiZWw6IFwiYWZmaWxpYXRlU2V0dGluZ3NUb3RhbFBhaWRfbGFiZWxcIixcblx0XHRcdFx0XHRcdFx0XHRcdGhlbHBUZXh0OiBcImFmZmlsaWF0ZVNldHRpbmdzVG90YWxQYWlkX21zZ1wiLFxuXHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRcdFx0bGFiZWw6IFwiYWZmaWxpYXRlU2V0dGluZ3NDb21taXNzaW9uX2xhYmVsXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRoZWxwVGV4dDogXCJhZmZpbGlhdGVTZXR0aW5nc0NvbW1pc3Npb25fbXNnXCIsXG5cdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XSxcblx0XHRcdFx0XHRcdFx0Y29sdW1uV2lkdGhzOiBbXG5cdFx0XHRcdFx0XHRcdFx0Q29sdW1uV2lkdGguTGFyZ2VzdCxcblx0XHRcdFx0XHRcdFx0XHRDb2x1bW5XaWR0aC5MYXJnZXN0LFxuXHRcdFx0XHRcdFx0XHRcdENvbHVtbldpZHRoLkxhcmdlc3QsXG5cdFx0XHRcdFx0XHRcdFx0Q29sdW1uV2lkdGguTGFyZ2VzdCxcblx0XHRcdFx0XHRcdFx0XHRDb2x1bW5XaWR0aC5MYXJnZXN0LFxuXHRcdFx0XHRcdFx0XHRcdENvbHVtbldpZHRoLkxhcmdlc3QsXG5cdFx0XHRcdFx0XHRcdF0sXG5cdFx0XHRcdFx0XHRcdHNob3dBY3Rpb25CdXR0b25Db2x1bW46IGZhbHNlLFxuXHRcdFx0XHRcdFx0XHRhZGRCdXR0b25BdHRyczogbnVsbCxcblx0XHRcdFx0XHRcdFx0bGluZXM6IHRoaXMucmVuZGVyUm93cygpLFxuXHRcdFx0XHRcdFx0fSksXG5cdFx0XHRcdFx0KSxcblx0XHRcdFx0KSxcblx0XHRcdCksXG5cdFx0KVxuXHR9XG5cblx0cHJpdmF0ZSByZW5kZXJSb3dzKCk6IFRhYmxlTGluZUF0dHJzW10ge1xuXHRcdGlmICh0aGlzLmFmZmlsaWF0ZVZpZXdNb2RlbC5pc0xvYWRlZCgpKSB7XG5cdFx0XHRjb25zdCBhdm0gPSB0aGlzLmFmZmlsaWF0ZVZpZXdNb2RlbC5nZXRTeW5jKCkhXG5cdFx0XHRyZXR1cm4gKGF2bS5kYXRhPy5rcGlzID8/IFtdKVxuXHRcdFx0XHQuc2xpY2UoKVxuXHRcdFx0XHQuc29ydCgoYSwgYikgPT4gTnVtYmVyKGIubW9udGhUaW1lc3RhbXApIC0gTnVtYmVyKGEubW9udGhUaW1lc3RhbXApKVxuXHRcdFx0XHQubWFwKChtb250aCkgPT4ge1xuXHRcdFx0XHRcdGNvbnN0IGRhdGUgPSBEYXRlVGltZS5mcm9tSlNEYXRlKG5ldyBEYXRlKE51bWJlcihtb250aC5tb250aFRpbWVzdGFtcCkpKVxuXHRcdFx0XHRcdFx0Lm1pbnVzKHsgZGF5OiAzIH0pXG5cdFx0XHRcdFx0XHQudG9KU0RhdGUoKSAvLyBSZW1vdmUgMyBkYXlzIHRvIGF2b2lkIHRpbWV6b25lcyBpc3N1ZXMgKGp1c3QgaW4gY2FzZSksIHNpbmNlIHRoZSBvcmlnaW5hbCBkYXRlIGlzIHRoZSBlbmQgb2YgdGhlIG1vbnRoLlxuXG5cdFx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRcdGNlbGxzOiBbXG5cdFx0XHRcdFx0XHRcdGZvcm1hdFNob3J0TW9udGhZZWFyMkRpZ2l0KGRhdGUpLFxuXHRcdFx0XHRcdFx0XHRtb250aC5uZXdGcmVlLFxuXHRcdFx0XHRcdFx0XHRtb250aC5uZXdQYWlkLFxuXHRcdFx0XHRcdFx0XHRtb250aC50b3RhbEZyZWUsXG5cdFx0XHRcdFx0XHRcdG1vbnRoLnRvdGFsUGFpZCxcblx0XHRcdFx0XHRcdFx0Zm9ybWF0UHJpY2UoTnVtYmVyKG1vbnRoLmNvbW1pc3Npb24pLCB0cnVlKSxcblx0XHRcdFx0XHRcdF0sXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KVxuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLmFmZmlsaWF0ZVZpZXdNb2RlbC5nZXRBc3luYygpLnRoZW4oKCkgPT4gbS5yZWRyYXcoKSlcblx0XHRcdHJldHVybiBbXVxuXHRcdH1cblx0fVxuXG5cdGVudGl0eUV2ZW50c1JlY2VpdmVkKHVwZGF0ZXM6IHJlYWRvbmx5IEVudGl0eVVwZGF0ZURhdGFbXSk6IFByb21pc2U8dW5rbm93bj4ge1xuXHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUoKVxuXHR9XG59XG4iLCJpbXBvcnQgeyBVcGRhdGFibGVTZXR0aW5nc1ZpZXdlciB9IGZyb20gXCIuLi8uLi9jb21tb24vc2V0dGluZ3MvSW50ZXJmYWNlc1wiXG5pbXBvcnQgbSwgeyBDaGlsZHJlbiB9IGZyb20gXCJtaXRocmlsXCJcbmltcG9ydCB7IEVudGl0eVVwZGF0ZURhdGEgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2FwaS9jb21tb24vdXRpbHMvRW50aXR5VXBkYXRlVXRpbHNcIlxuaW1wb3J0IHsgSWNvbkJ1dHRvbiwgSWNvbkJ1dHRvbkF0dHJzIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvYmFzZS9JY29uQnV0dG9uXCJcbmltcG9ydCB7IEJ1dHRvblNpemUgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2d1aS9iYXNlL0J1dHRvblNpemVcIlxuaW1wb3J0IHsgYXNzZXJ0Tm90TnVsbCwgbGF6eSB9IGZyb20gXCJAdHV0YW8vdHV0YW5vdGEtdXRpbHNcIlxuaW1wb3J0IHsgZ2V0Rm9sZGVyTmFtZSwgZ2V0SW5kZW50ZWRGb2xkZXJOYW1lRm9yRHJvcGRvd24sIGdldFBhdGhUb0ZvbGRlclN0cmluZyB9IGZyb20gXCIuLi9tYWlsL21vZGVsL01haWxVdGlsc1wiXG5pbXBvcnQgeyBIaWdoZXN0VGllclBsYW5zLCBJbXBvcnRTdGF0dXMsIE1haWxTZXRLaW5kLCBQbGFuVHlwZSB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL2NvbW1vbi9UdXRhbm90YUNvbnN0YW50c1wiXG5pbXBvcnQgeyBJbmRlbnRlZEZvbGRlciB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL2NvbW1vbi9tYWlsL0ZvbGRlclN5c3RlbVwiXG5pbXBvcnQgeyBsYW5nLCBUcmFuc2xhdGlvbktleSB9IGZyb20gXCIuLi8uLi9jb21tb24vbWlzYy9MYW5ndWFnZVZpZXdNb2RlbFwiXG5pbXBvcnQgeyBNYWlsSW1wb3J0ZXIsIFVpSW1wb3J0U3RhdHVzIH0gZnJvbSBcIi4uL21haWwvaW1wb3J0L01haWxJbXBvcnRlci5qc1wiXG5pbXBvcnQgeyBNYWlsRm9sZGVyIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9hcGkvZW50aXRpZXMvdHV0YW5vdGEvVHlwZVJlZnNcIlxuaW1wb3J0IHsgZWxlbWVudElkUGFydCwgZ2VuZXJhdGVkSWRUb1RpbWVzdGFtcCwgaXNTYW1lSWQsIHNvcnRDb21wYXJlQnlSZXZlcnNlSWQgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2FwaS9jb21tb24vdXRpbHMvRW50aXR5VXRpbHNcIlxuaW1wb3J0IHsgSWNvbnMgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2d1aS9iYXNlL2ljb25zL0ljb25zLmpzXCJcbmltcG9ydCB7IERyb3BEb3duU2VsZWN0b3IsIFNlbGVjdG9ySXRlbUxpc3QgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2d1aS9iYXNlL0Ryb3BEb3duU2VsZWN0b3IuanNcIlxuaW1wb3J0IHsgc2hvd05vdEF2YWlsYWJsZUZvckZyZWVEaWFsb2cgfSBmcm9tIFwiLi4vLi4vY29tbW9uL21pc2MvU3Vic2NyaXB0aW9uRGlhbG9ncy5qc1wiXG5pbXBvcnQgeyBQcm9ncmVzc0JhciwgUHJvZ3Jlc3NCYXJUeXBlIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvYmFzZS9Qcm9ncmVzc0Jhci5qc1wiXG5pbXBvcnQgeyBFeHBhbmRlckJ1dHRvbiwgRXhwYW5kZXJQYW5lbCB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL2Jhc2UvRXhwYW5kZXIuanNcIlxuaW1wb3J0IHsgQ29sdW1uV2lkdGgsIFRhYmxlLCBUYWJsZUxpbmVBdHRycyB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL2Jhc2UvVGFibGUuanNcIlxuaW1wb3J0IHsgbWFpbExvY2F0b3IgfSBmcm9tIFwiLi4vbWFpbExvY2F0b3IuanNcIlxuaW1wb3J0IHsgZm9ybWF0RGF0ZSB9IGZyb20gXCIuLi8uLi9jb21tb24vbWlzYy9Gb3JtYXR0ZXIuanNcIlxuaW1wb3J0IHsgTG9naW5CdXR0b24sIExvZ2luQnV0dG9uVHlwZSB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL2Jhc2UvYnV0dG9ucy9Mb2dpbkJ1dHRvblwiXG5cbi8qKlxuICogU2V0dGluZ3Mgdmlld2VyIGZvciBtYWlsIGltcG9ydCByZW5kZXJlZCBvbmx5IGluIHRoZSBEZXNrdG9wIGNsaWVudC5cbiAqIFNlZSB7QGxpbmsgV2ViTWFpbEltcG9ydFNldHRpbmdzVmlld2VyfSBmb3Igb3RoZXIgdmlld3MuXG4gKi9cbmV4cG9ydCBjbGFzcyBEZXNrdG9wTWFpbEltcG9ydFNldHRpbmdzVmlld2VyIGltcGxlbWVudHMgVXBkYXRhYmxlU2V0dGluZ3NWaWV3ZXIge1xuXHRwcml2YXRlIGlzSW1wb3J0SGlzdG9yeUV4cGFuZGVkOiBib29sZWFuID0gdHJ1ZVxuXHRwcml2YXRlIGltcG9ydFN0YXRlUG9vbEhhbmRsZTogVGltZW91dElEXG5cblx0Y29uc3RydWN0b3IocHJpdmF0ZSByZWFkb25seSBtYWlsSW1wb3J0ZXI6IGxhenk8TWFpbEltcG9ydGVyPikge31cblxuXHRhc3luYyBvbmluaXQoKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0YXdhaXQgdGhpcy5tYWlsSW1wb3J0ZXIoKS5pbml0SW1wb3J0TWFpbFN0YXRlcygpXG5cdH1cblxuXHRvbmJlZm9yZXJlbW92ZSgpOiB2b2lkIHtcblx0XHRjbGVhckludGVydmFsKHRoaXMuaW1wb3J0U3RhdGVQb29sSGFuZGxlKVxuXHR9XG5cblx0dmlldygpOiBDaGlsZHJlbiB7XG5cdFx0cmV0dXJuIG0oXCIuZmlsbC1hYnNvbHV0ZS5zY3JvbGwucGxyLWwucGIteGxcIiwgW1xuXHRcdFx0bShcIi5oNC5tdC1sXCIsIGxhbmcuZ2V0KFwibWFpbEltcG9ydFNldHRpbmdzX2xhYmVsXCIpKSxcblx0XHRcdHRoaXMucmVuZGVyVGFyZ2V0Rm9sZGVyQ29udHJvbHMoKSxcblx0XHRcdCF0aGlzLm1haWxJbXBvcnRlcigpLnNob3VsZFJlbmRlckltcG9ydFN0YXR1cygpID8gdGhpcy5yZW5kZXJTdGFydE5ld0ltcG9ydENvbnRyb2xzKCkgOiBudWxsLFxuXHRcdFx0dGhpcy5tYWlsSW1wb3J0ZXIoKS5zaG91bGRSZW5kZXJJbXBvcnRTdGF0dXMoKSA/IHRoaXMucmVuZGVySW1wb3J0U3RhdHVzKCkgOiBudWxsLFxuXHRcdFx0dGhpcy5yZW5kZXJJbXBvcnRIaXN0b3J5KCksXG5cdFx0XSlcblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgb25JbXBvcnRCdXR0b25DbGljayhkb206IEhUTUxFbGVtZW50KSB7XG5cdFx0Y29uc3QgY3VycmVudFBsYW5UeXBlID0gYXdhaXQgbWFpbExvY2F0b3IubG9naW5zLmdldFVzZXJDb250cm9sbGVyKCkuZ2V0UGxhblR5cGUoKVxuXHRcdGNvbnN0IGlzSGlnaGVzdFRpZXJQbGFuID0gSGlnaGVzdFRpZXJQbGFucy5pbmNsdWRlcyhjdXJyZW50UGxhblR5cGUpXG5cdFx0aWYgKCFpc0hpZ2hlc3RUaWVyUGxhbikge1xuXHRcdFx0c2hvd05vdEF2YWlsYWJsZUZvckZyZWVEaWFsb2coW1BsYW5UeXBlLkxlZ2VuZCwgUGxhblR5cGUuVW5saW1pdGVkXSkudGhlbigpXG5cdFx0XHRyZXR1cm5cblx0XHR9XG5cblx0XHRjb25zdCBhbGxvd2VkRXh0ZW5zaW9ucyA9IFtcImVtbFwiLCBcIm1ib3hcIl1cblx0XHRjb25zdCBmaWxlUGF0aHMgPSBhd2FpdCBtYWlsTG9jYXRvci5maWxlQXBwLm9wZW5GaWxlQ2hvb3Nlcihkb20uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksIGFsbG93ZWRFeHRlbnNpb25zLCB0cnVlKVxuXHRcdGF3YWl0IHRoaXMubWFpbEltcG9ydGVyKCkub25TdGFydEJ0bkNsaWNrKGZpbGVQYXRocy5tYXAoKGZwKSA9PiBmcC5sb2NhdGlvbikpXG5cdH1cblxuXHRwcml2YXRlIHJlbmRlclRhcmdldEZvbGRlckNvbnRyb2xzKCkge1xuXHRcdGxldCBmb2xkZXJzID0gdGhpcy5tYWlsSW1wb3J0ZXIoKS5mb2xkZXJzRm9yTWFpbGJveFxuXHRcdGlmIChmb2xkZXJzKSB7XG5cdFx0XHRjb25zdCBsb2FkaW5nTXNnID0gbGFuZy5nZXQoXCJsb2FkaW5nX21zZ1wiKVxuXHRcdFx0Y29uc3QgZW1wdHlMYWJlbCA9IG0oXCJiclwiKVxuXHRcdFx0Y29uc3Qgc2VsZWN0ZWRUYXJnZXRGb2xkZXIgPSB0aGlzLm1haWxJbXBvcnRlcigpLnNlbGVjdGVkVGFyZ2V0Rm9sZGVyXG5cdFx0XHRjb25zdCBzZWxlY3RlZFRhcmdldEZvbGRlclBhdGggPSBzZWxlY3RlZFRhcmdldEZvbGRlciA/IGdldFBhdGhUb0ZvbGRlclN0cmluZyhmb2xkZXJzISwgc2VsZWN0ZWRUYXJnZXRGb2xkZXIpIDogXCJcIlxuXHRcdFx0Y29uc3QgaXNOb3RTdWJmb2xkZXIgPSBzZWxlY3RlZFRhcmdldEZvbGRlciA/IHNlbGVjdGVkVGFyZ2V0Rm9sZGVyUGF0aCA9PSBnZXRGb2xkZXJOYW1lKHNlbGVjdGVkVGFyZ2V0Rm9sZGVyKSA6IGZhbHNlXG5cdFx0XHRjb25zdCBoZWxwTGFiZWwgPSBzZWxlY3RlZFRhcmdldEZvbGRlciA/IChpc05vdFN1YmZvbGRlciA/IGVtcHR5TGFiZWwgOiBzZWxlY3RlZFRhcmdldEZvbGRlclBhdGgpIDogZW1wdHlMYWJlbFxuXG5cdFx0XHQvLyBkbyBub3QgYWxsb3cgaW1wb3J0aW5nIHRvIGluYm94IGZvbGRlcixcblx0XHRcdC8vIHByb2JsZW06XG5cdFx0XHQvLyBpZiBhIGZvbGRlciByZWNlaXZlcy9pbXBvcnRzIGEgdmVyeSBsYXJnZSBhbW91bnQgb2YgbWFpbHMgKGh1bmRyZWRzIG9mIHRob3VzYW5kcykgdGhhdCBhbGwgZ2V0IG1vdmVkL2RlbGV0ZWQgYXQgb25jZSxcblx0XHRcdC8vIHRoZSBiYWNrZW5kIHdpbGwgbm90IGJlIGFibGUgdG8gcmVhZCBhbnkgbGl2ZSBkYXRhIGZyb20gdGhhdCBsaXN0IGZvciBhIHdoaWxlLlxuXHRcdFx0Ly8gaWYgdGhhdCBoYXBwZW5zLCB1c2VyIHdpbGwgbm90IHNlZSBpbmNvbWluZyBtYWlscyBpbiB0aGVpciBpbmJveCBmb2xkZXIgZm9yIHRoYXQgdGltZSxcblx0XHRcdC8vIHRoaXMgcHJvYmxlbSBjYW4gc3RpbGwgaGFwcGVuIG9uIG90aGVyIGZvbGRlcnMsXG5cdFx0XHQvLyBidXQgYXQgbGVhc3Qgd2Ugd29uJ3QgYmxvY2sgaW5ib3ggKCBpbmNvbWluZyBuZXcgbWFpbHMgKVxuXHRcdFx0Y29uc3Qgc2VsZWN0YWJsZUZvbGRlcnMgPSBmb2xkZXJzLmdldEluZGVudGVkTGlzdCgpLmZpbHRlcigoZm9sZGVySW5mbykgPT4gZm9sZGVySW5mby5mb2xkZXIuZm9sZGVyVHlwZSAhPT0gTWFpbFNldEtpbmQuSU5CT1gpXG5cblx0XHRcdGxldCB0YXJnZXRGb2xkZXJzOiBTZWxlY3Rvckl0ZW1MaXN0PE1haWxGb2xkZXIgfCBudWxsPiA9IHNlbGVjdGFibGVGb2xkZXJzLm1hcCgoZm9sZGVySW5mbzogSW5kZW50ZWRGb2xkZXIpID0+IHtcblx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRuYW1lOiBnZXRJbmRlbnRlZEZvbGRlck5hbWVGb3JEcm9wZG93bihmb2xkZXJJbmZvKSxcblx0XHRcdFx0XHR2YWx1ZTogZm9sZGVySW5mby5mb2xkZXIsXG5cdFx0XHRcdH1cblx0XHRcdH0pXG5cdFx0XHRyZXR1cm4gbShEcm9wRG93blNlbGVjdG9yLCB7XG5cdFx0XHRcdGxhYmVsOiBcIm1haWxJbXBvcnRUYXJnZXRGb2xkZXJfbGFiZWxcIixcblx0XHRcdFx0aXRlbXM6IHRhcmdldEZvbGRlcnMsXG5cdFx0XHRcdGRpc2FibGVkOiB0aGlzLm1haWxJbXBvcnRlcigpLnNob3VsZFJlbmRlckltcG9ydFN0YXR1cygpLFxuXHRcdFx0XHRzZWxlY3RlZFZhbHVlOiBzZWxlY3RlZFRhcmdldEZvbGRlcixcblx0XHRcdFx0c2VsZWN0ZWRWYWx1ZURpc3BsYXk6IHNlbGVjdGVkVGFyZ2V0Rm9sZGVyID8gZ2V0Rm9sZGVyTmFtZShzZWxlY3RlZFRhcmdldEZvbGRlcikgOiBsb2FkaW5nTXNnLFxuXHRcdFx0XHRzZWxlY3Rpb25DaGFuZ2VkSGFuZGxlcjogKG5ld0ZvbGRlcjogTWFpbEZvbGRlciB8IG51bGwpID0+ICh0aGlzLm1haWxJbXBvcnRlcigpLnNlbGVjdGVkVGFyZ2V0Rm9sZGVyID0gbmV3Rm9sZGVyKSxcblx0XHRcdFx0aGVscExhYmVsOiAoKSA9PiBoZWxwTGFiZWwsXG5cdFx0XHR9KVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZXR1cm4gbnVsbFxuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgcmVuZGVyU3RhcnROZXdJbXBvcnRDb250cm9scygpIHtcblx0XHRyZXR1cm4gW1xuXHRcdFx0bShcIi5mbGV4LXN0YXJ0Lm10LW1cIiwgdGhpcy5yZW5kZXJJbXBvcnRJbmZvVGV4dCgpKSxcblx0XHRcdG0oXG5cdFx0XHRcdFwiLmZsZXgtc3RhcnQubXQtc1wiLFxuXHRcdFx0XHRtKExvZ2luQnV0dG9uLCB7XG5cdFx0XHRcdFx0dHlwZTogTG9naW5CdXR0b25UeXBlLkZsZXhXaWR0aCxcblx0XHRcdFx0XHRsYWJlbDogXCJpbXBvcnRfYWN0aW9uXCIsXG5cdFx0XHRcdFx0b25jbGljazogKF8sIGRvbSkgPT4gdGhpcy5vbkltcG9ydEJ1dHRvbkNsaWNrKGRvbSksXG5cdFx0XHRcdH0pLFxuXHRcdFx0KSxcblx0XHRdXG5cdH1cblxuXHRwcml2YXRlIHJlbmRlckltcG9ydEluZm9UZXh0KCkge1xuXHRcdHJldHVybiBbbShcIi5zbWFsbFwiLCBsYW5nLmdldChcIm1haWxJbXBvcnRJbmZvVGV4dF9sYWJlbFwiKSldXG5cdH1cblxuXHRwcml2YXRlIHJlbmRlckltcG9ydFN0YXR1cygpIHtcblx0XHRjb25zdCBwcm9jZXNzZWRNYWlsc0NvdW50TGFiZWwgPSBtKFxuXHRcdFx0XCIuZmxleC1zdGFydC5wLnNtYWxsXCIsXG5cdFx0XHRsYW5nLmdldChcIm1haWxJbXBvcnRTdGF0ZVByb2Nlc3NlZE1haWxzVG90YWxNYWlsc19sYWJlbFwiLCB7XG5cdFx0XHRcdFwie3Byb2Nlc3NlZE1haWxzfVwiOiB0aGlzLm1haWxJbXBvcnRlcigpLmdldFByb2Nlc3NlZE1haWxzQ291bnQoKSxcblx0XHRcdFx0XCJ7dG90YWxNYWlsc31cIjogdGhpcy5tYWlsSW1wb3J0ZXIoKS5nZXRUb3RhbE1haWxzQ291bnQoKSxcblx0XHRcdH0pLFxuXHRcdClcblx0XHRjb25zdCByZXN1bWVNYWlsSW1wb3J0SWNvbkJ1dHRvbkF0dHJzOiBJY29uQnV0dG9uQXR0cnMgPSB7XG5cdFx0XHR0aXRsZTogXCJyZXN1bWVNYWlsSW1wb3J0X2FjdGlvblwiLFxuXHRcdFx0aWNvbjogSWNvbnMuUGxheSxcblx0XHRcdGNsaWNrOiAoKSA9PiB0aGlzLm1haWxJbXBvcnRlcigpLm9uUmVzdW1lQnRuQ2xpY2soKSxcblx0XHRcdHNpemU6IEJ1dHRvblNpemUuTm9ybWFsLFxuXHRcdFx0ZGlzYWJsZWQ6IHRoaXMubWFpbEltcG9ydGVyKCkuc2hvdWxkRGlzYWJsZVJlc3VtZUJ1dHRvbigpLFxuXHRcdH1cblx0XHRjb25zdCBwYXVzZU1haWxJbXBvcnRJY29uQnV0dG9uQXR0cnM6IEljb25CdXR0b25BdHRycyA9IHtcblx0XHRcdHRpdGxlOiBcInBhdXNlTWFpbEltcG9ydF9hY3Rpb25cIixcblx0XHRcdGljb246IEljb25zLlBhdXNlLFxuXHRcdFx0Y2xpY2s6ICgpID0+IHtcblx0XHRcdFx0dGhpcy5tYWlsSW1wb3J0ZXIoKS5vblBhdXNlQnRuQ2xpY2soKVxuXHRcdFx0fSxcblx0XHRcdHNpemU6IEJ1dHRvblNpemUuTm9ybWFsLFxuXHRcdFx0ZGlzYWJsZWQ6IHRoaXMubWFpbEltcG9ydGVyKCkuc2hvdWxkRGlzYWJsZVBhdXNlQnV0dG9uKCksXG5cdFx0fVxuXHRcdGNvbnN0IGNhbmNlbE1haWxJbXBvcnRJY29uQnV0dG9uQXR0cnM6IEljb25CdXR0b25BdHRycyA9IHtcblx0XHRcdHRpdGxlOiBcImNhbmNlbE1haWxJbXBvcnRfYWN0aW9uXCIsXG5cdFx0XHRpY29uOiBJY29ucy5DYW5jZWwsXG5cdFx0XHRjbGljazogKCkgPT4ge1xuXHRcdFx0XHR0aGlzLm1haWxJbXBvcnRlcigpLm9uQ2FuY2VsQnRuQ2xpY2soKVxuXHRcdFx0fSxcblx0XHRcdHNpemU6IEJ1dHRvblNpemUuTm9ybWFsLFxuXHRcdFx0ZGlzYWJsZWQ6IHRoaXMubWFpbEltcG9ydGVyKCkuc2hvdWxkRGlzYWJsZUNhbmNlbEJ1dHRvbigpLFxuXHRcdH1cblxuXHRcdGxldCBidXR0b25Db250cm9scyA9IFtdXG5cdFx0aWYgKHRoaXMubWFpbEltcG9ydGVyKCkuc2hvdWxkUmVuZGVyUGF1c2VCdXR0b24oKSkge1xuXHRcdFx0YnV0dG9uQ29udHJvbHMucHVzaChtKEljb25CdXR0b24sIHBhdXNlTWFpbEltcG9ydEljb25CdXR0b25BdHRycykpXG5cdFx0fVxuXHRcdGlmICh0aGlzLm1haWxJbXBvcnRlcigpLnNob3VsZFJlbmRlclJlc3VtZUJ1dHRvbigpKSB7XG5cdFx0XHRidXR0b25Db250cm9scy5wdXNoKG0oSWNvbkJ1dHRvbiwgcmVzdW1lTWFpbEltcG9ydEljb25CdXR0b25BdHRycykpXG5cdFx0fVxuXHRcdGlmICh0aGlzLm1haWxJbXBvcnRlcigpLnNob3VsZFJlbmRlckNhbmNlbEJ1dHRvbigpKSB7XG5cdFx0XHRidXR0b25Db250cm9scy5wdXNoKG0oSWNvbkJ1dHRvbiwgY2FuY2VsTWFpbEltcG9ydEljb25CdXR0b25BdHRycykpXG5cdFx0fVxuXG5cdFx0cmV0dXJuIFtcblx0XHRcdFtcblx0XHRcdFx0bShcblx0XHRcdFx0XHRcIi5mbGV4LXNwYWNlLWJldHdlZW4ucC5zbWFsbC5tdC1tXCIsXG5cdFx0XHRcdFx0Z2V0UmVhZGFibGVVaUltcG9ydFN0YXR1cyhhc3NlcnROb3ROdWxsKHRoaXMubWFpbEltcG9ydGVyKCkuZ2V0VWlTdGF0dXMoKSkpLFxuXHRcdFx0XHRcdHRoaXMubWFpbEltcG9ydGVyKCkuc2hvdWxkUmVuZGVyUHJvY2Vzc2VkTWFpbHMoKSA/IHByb2Nlc3NlZE1haWxzQ291bnRMYWJlbCA6IG51bGwsXG5cdFx0XHRcdCksXG5cdFx0XHRdLFxuXHRcdFx0W20oXCIuZmxleC1zcGFjZS1iZXR3ZWVuLmJvcmRlci1yYWRpdXMtYmlnLm10LXMucmVsLm5hdi1iZy5mdWxsLXdpZHRoXCIsIHRoaXMucmVuZGVyTWFpbEltcG9ydFByb2dyZXNzQmFyKCksIC4uLmJ1dHRvbkNvbnRyb2xzKV0sXG5cdFx0XVxuXHR9XG5cblx0cHJpdmF0ZSByZW5kZXJNYWlsSW1wb3J0UHJvZ3Jlc3NCYXIoKSB7XG5cdFx0Ly8gdGhlIFByb2dyZXNzQmFyIHVzZXMgcHJvZ3Jlc3MgdmFsdWVzIDAgLi4uIDFcblx0XHRyZXR1cm4gbShcblx0XHRcdFwiLnJlbC5ib3JkZXItcmFkaXVzLWJpZy5mdWxsLXdpZHRoXCIsXG5cdFx0XHRtKFByb2dyZXNzQmFyLCB7XG5cdFx0XHRcdHByb2dyZXNzOiB0aGlzLm1haWxJbXBvcnRlcigpLmdldFByb2dyZXNzKCkgLyAxMDAsXG5cdFx0XHRcdHR5cGU6IFByb2dyZXNzQmFyVHlwZS5MYXJnZSxcblx0XHRcdH0pLFxuXHRcdClcblx0fVxuXG5cdHByaXZhdGUgcmVuZGVySW1wb3J0SGlzdG9yeSgpIHtcblx0XHRyZXR1cm4gW1xuXHRcdFx0bShcIi5mbGV4LXNwYWNlLWJldHdlZW4uaXRlbXMtY2VudGVyLm10LWwubWItc1wiLCBbXG5cdFx0XHRcdG0oXCIuaDRcIiwgbGFuZy5nZXQoXCJtYWlsSW1wb3J0SGlzdG9yeV9sYWJlbFwiKSksXG5cdFx0XHRcdG0oRXhwYW5kZXJCdXR0b24sIHtcblx0XHRcdFx0XHRsYWJlbDogXCJzaG93X2FjdGlvblwiLFxuXHRcdFx0XHRcdGV4cGFuZGVkOiB0aGlzLmlzSW1wb3J0SGlzdG9yeUV4cGFuZGVkLFxuXHRcdFx0XHRcdG9uRXhwYW5kZWRDaGFuZ2U6ICgpID0+IHtcblx0XHRcdFx0XHRcdHRoaXMuaXNJbXBvcnRIaXN0b3J5RXhwYW5kZWQgPSAhdGhpcy5pc0ltcG9ydEhpc3RvcnlFeHBhbmRlZFxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdH0pLFxuXHRcdFx0XSksXG5cdFx0XHRtKFxuXHRcdFx0XHRFeHBhbmRlclBhbmVsLFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0ZXhwYW5kZWQ6IHRoaXMuaXNJbXBvcnRIaXN0b3J5RXhwYW5kZWQsXG5cdFx0XHRcdH0sXG5cdFx0XHRcdG0oVGFibGUsIHtcblx0XHRcdFx0XHRjb2x1bW5IZWFkaW5nOiBbXCJtYWlsSW1wb3J0SGlzdG9yeVRhYmxlSGVhZGluZ19sYWJlbFwiXSxcblx0XHRcdFx0XHRjb2x1bW5XaWR0aHM6IFtDb2x1bW5XaWR0aC5TbWFsbCwgQ29sdW1uV2lkdGguTGFyZ2VzdF0sXG5cdFx0XHRcdFx0c2hvd0FjdGlvbkJ1dHRvbkNvbHVtbjogdHJ1ZSxcblx0XHRcdFx0XHRsaW5lczogdGhpcy5tYWtlTWFpbEltcG9ydEhpc3RvcnlUYWJsZUxpbmVzKCksXG5cdFx0XHRcdH0pLFxuXHRcdFx0KSxcblx0XHRdXG5cdH1cblxuXHQvKipcblx0ICogUGFyc2VzIHRoZSBpbXBvcnRNYWlsU3RhdGVzIGludG8gZGlzcGxheWFibGUgdGFibGUgbGluZXMuXG5cdCAqIEByZXR1cm5zIGFycmF5IG9mIHRoZSBwYXJzZWQgdGFibGUgbGluZXMuXG5cdCAqL1xuXHRwcml2YXRlIG1ha2VNYWlsSW1wb3J0SGlzdG9yeVRhYmxlTGluZXMoKTogQXJyYXk8VGFibGVMaW5lQXR0cnM+IHtcblx0XHRsZXQgZm9sZGVycyA9IHRoaXMubWFpbEltcG9ydGVyKCkuZm9sZGVyc0Zvck1haWxib3g/LmdldEluZGVudGVkTGlzdCgpXG5cdFx0aWYgKGZvbGRlcnMpIHtcblx0XHRcdHJldHVybiB0aGlzLm1haWxJbXBvcnRlcigpXG5cdFx0XHRcdC5nZXRGaW5hbGlzZWRJbXBvcnRzKClcblx0XHRcdFx0LnNvcnQoc29ydENvbXBhcmVCeVJldmVyc2VJZClcblx0XHRcdFx0Lm1hcCgoaW0pID0+IHtcblx0XHRcdFx0XHRjb25zdCB0YXJnZXRGb2xkZXJJZCA9IGltLnRhcmdldEZvbGRlclxuXHRcdFx0XHRcdGNvbnN0IGRpc3BsYXlUYXJnZXRGb2xkZXIgPSBmb2xkZXJzIS5maW5kKChmKSA9PiBpc1NhbWVJZChmLmZvbGRlci5faWQsIHRhcmdldEZvbGRlcklkKSlcblxuXHRcdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0XHRjZWxsczogKCkgPT4gW1xuXHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0bWFpbjogbGFuZy5nZXQoXCJtYWlsSW1wb3J0SGlzdG9yeVRhYmxlUm93VGl0bGVfbGFiZWxcIiwge1xuXHRcdFx0XHRcdFx0XHRcdFx0XCJ7c3RhdHVzfVwiOiBnZXRSZWFkYWJsZUltcG9ydFN0YXR1cyhwYXJzZUludChpbS5zdGF0dXMpIGFzIEltcG9ydFN0YXR1cyksXG5cdFx0XHRcdFx0XHRcdFx0XHRcIntmb2xkZXJ9XCI6IGRpc3BsYXlUYXJnZXRGb2xkZXJcblx0XHRcdFx0XHRcdFx0XHRcdFx0PyBnZXRGb2xkZXJOYW1lKGRpc3BsYXlUYXJnZXRGb2xkZXIuZm9sZGVyKVxuXHRcdFx0XHRcdFx0XHRcdFx0XHQ6IGxhbmcuZ2V0KFwibWFpbEltcG9ydEhpc3RvcnlUYWJsZVJvd0ZvbGRlckRlbGV0ZWRfbGFiZWxcIiksXG5cdFx0XHRcdFx0XHRcdFx0fSksXG5cdFx0XHRcdFx0XHRcdFx0aW5mbzogW1xuXHRcdFx0XHRcdFx0XHRcdFx0bGFuZy5nZXQoXCJtYWlsSW1wb3J0SGlzdG9yeVRhYmxlUm93U3VidGl0bGVfbGFiZWxcIiwge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcIntkYXRlfVwiOiBmb3JtYXREYXRlKG5ldyBEYXRlKGdlbmVyYXRlZElkVG9UaW1lc3RhbXAoZWxlbWVudElkUGFydChpbS5faWQpKSkpLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcIntzdWNjZXNzZnVsTWFpbHN9XCI6IGltLnN1Y2Nlc3NmdWxNYWlscyxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XCJ7ZmFpbGVkTWFpbHN9XCI6IGltLmZhaWxlZE1haWxzLFxuXHRcdFx0XHRcdFx0XHRcdFx0fSksXG5cdFx0XHRcdFx0XHRcdFx0XSxcblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdF0sXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZXR1cm4gW11cblx0XHR9XG5cdH1cblxuXHRhc3luYyBlbnRpdHlFdmVudHNSZWNlaXZlZCh1cGRhdGVzOiBSZWFkb25seUFycmF5PEVudGl0eVVwZGF0ZURhdGE+KTogUHJvbWlzZTx2b2lkPiB7fVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0UmVhZGFibGVVaUltcG9ydFN0YXR1cyh1aVN0YXR1czogVWlJbXBvcnRTdGF0dXMpOiBzdHJpbmcge1xuXHRyZXR1cm4gbGFuZy5nZXQoZ2V0VWlJbXBvcnRTdGF0dXNUcmFuc2xhdGlvbktleSh1aVN0YXR1cykpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRVaUltcG9ydFN0YXR1c1RyYW5zbGF0aW9uS2V5KHVpU3RhdHVzOiBVaUltcG9ydFN0YXR1cyk6IFRyYW5zbGF0aW9uS2V5IHtcblx0c3dpdGNoICh1aVN0YXR1cykge1xuXHRcdGNhc2UgVWlJbXBvcnRTdGF0dXMuU3RhcnRpbmc6XG5cdFx0XHRyZXR1cm4gXCJtYWlsSW1wb3J0U3RhdHVzU3RhcnRpbmdfbGFiZWxcIlxuXHRcdGNhc2UgVWlJbXBvcnRTdGF0dXMuUmVzdW1pbmc6XG5cdFx0XHRyZXR1cm4gXCJtYWlsSW1wb3J0U3RhdHVzUmVzdW1pbmdfbGFiZWxcIlxuXHRcdGNhc2UgVWlJbXBvcnRTdGF0dXMuUnVubmluZzpcblx0XHRcdHJldHVybiBcIm1haWxJbXBvcnRTdGF0dXNSdW5uaW5nX2xhYmVsXCJcblx0XHRjYXNlIFVpSW1wb3J0U3RhdHVzLlBhdXNpbmc6XG5cdFx0XHRyZXR1cm4gXCJtYWlsSW1wb3J0U3RhdHVzUGF1c2luZ19sYWJlbFwiXG5cdFx0Y2FzZSBVaUltcG9ydFN0YXR1cy5QYXVzZWQ6XG5cdFx0XHRyZXR1cm4gXCJtYWlsSW1wb3J0U3RhdHVzUGF1c2VkX2xhYmVsXCJcblx0XHRjYXNlIFVpSW1wb3J0U3RhdHVzLkNhbmNlbGxpbmc6XG5cdFx0XHRyZXR1cm4gXCJtYWlsSW1wb3J0U3RhdHVzQ2FuY2VsbGluZ19sYWJlbFwiXG5cdH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFJlYWRhYmxlSW1wb3J0U3RhdHVzKGltcG9ydFN0YXR1czogSW1wb3J0U3RhdHVzKTogc3RyaW5nIHtcblx0cmV0dXJuIGxhbmcuZ2V0KGdldEltcG9ydFN0YXR1c1RyYW5zbGF0aW9uS2V5KGltcG9ydFN0YXR1cykpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRJbXBvcnRTdGF0dXNUcmFuc2xhdGlvbktleShpbXBvcnRTdGF0dXM6IEltcG9ydFN0YXR1cyk6IFRyYW5zbGF0aW9uS2V5IHtcblx0c3dpdGNoIChpbXBvcnRTdGF0dXMpIHtcblx0XHRjYXNlIEltcG9ydFN0YXR1cy5SdW5uaW5nOlxuXHRcdFx0cmV0dXJuIFwibWFpbEltcG9ydFN0YXR1c1J1bm5pbmdfbGFiZWxcIlxuXHRcdGNhc2UgSW1wb3J0U3RhdHVzLlBhdXNlZDpcblx0XHRcdHJldHVybiBcIm1haWxJbXBvcnRTdGF0dXNQYXVzZWRfbGFiZWxcIlxuXHRcdGNhc2UgSW1wb3J0U3RhdHVzLkNhbmNlbGVkOlxuXHRcdFx0cmV0dXJuIFwibWFpbEltcG9ydFN0YXR1c0NhbmNlbGVkX2xhYmVsXCJcblx0XHRjYXNlIEltcG9ydFN0YXR1cy5GaW5pc2hlZDpcblx0XHRcdHJldHVybiBcIm1haWxJbXBvcnRTdGF0dXNGaW5pc2hlZF9sYWJlbFwiXG5cdH1cbn1cbiIsImltcG9ydCBtLCB7IENoaWxkcmVuIH0gZnJvbSBcIm1pdGhyaWxcIlxuaW1wb3J0IHsgbGF6eSB9IGZyb20gXCJAdHV0YW8vdHV0YW5vdGEtdXRpbHNcIlxuaW1wb3J0IHsgbGFuZyB9IGZyb20gXCIuLi8uLi9jb21tb24vbWlzYy9MYW5ndWFnZVZpZXdNb2RlbFwiXG5pbXBvcnQgeyBMb2dpbkJ1dHRvbiwgTG9naW5CdXR0b25UeXBlIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvYmFzZS9idXR0b25zL0xvZ2luQnV0dG9uXCJcbmltcG9ydCB7IFVwZGF0YWJsZVNldHRpbmdzVmlld2VyIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9zZXR0aW5ncy9JbnRlcmZhY2VzLmpzXCJcbmltcG9ydCB7IEVudGl0eVVwZGF0ZURhdGEgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2FwaS9jb21tb24vdXRpbHMvRW50aXR5VXBkYXRlVXRpbHMuanNcIlxuaW1wb3J0IHsgbWFpbExvY2F0b3IgfSBmcm9tIFwiLi4vbWFpbExvY2F0b3IuanNcIlxuaW1wb3J0IHsgaXNXZWJDbGllbnQgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2FwaS9jb21tb24vRW52LmpzXCJcblxuLyoqXG4gKiBTZXR0aW5ncyB2aWV3ZXIgZm9yIG1haWwgaW1wb3J0IHJlbmRlcmVkIG9ubHkgaW4gdGhlIFdlYkFwcCwgQW5kcm9pZCBhbmQgaU9TLlxuICogU2VlIHtAbGluayBEZXNrdG9wTWFpbEltcG9ydFNldHRpbmdzVmlld2VyfSBmb3IgdGhlIERlc2t0b3AgY2xpZW50LlxuICovXG5leHBvcnQgY2xhc3MgV2ViTWFpbEltcG9ydFNldHRpbmdzVmlld2VyIGltcGxlbWVudHMgVXBkYXRhYmxlU2V0dGluZ3NWaWV3ZXIge1xuXHRjb25zdHJ1Y3RvcigpIHt9XG5cblx0dmlldygpOiBDaGlsZHJlbiB7XG5cdFx0cmV0dXJuIG0oXCIuZmlsbC1hYnNvbHV0ZS5zY3JvbGwucGxyLWwucGIteGxcIiwgW20oXCIuaDQubXQtbFwiLCBsYW5nLmdldChcIm1haWxJbXBvcnRTZXR0aW5nc19sYWJlbFwiKSksIHRoaXMucmVuZGVyTm9JbXBvcnRPbldlYlRleHQoKV0pXG5cdH1cblxuXHRwcml2YXRlIHJlbmRlck5vSW1wb3J0T25XZWJUZXh0KCkge1xuXHRcdHJldHVybiBbXG5cdFx0XHRtKFxuXHRcdFx0XHRcIi5mbGV4LWNvbHVtbi5tdFwiLFxuXHRcdFx0XHRtKFwiLnBcIiwgbGFuZy5nZXQoXCJtYWlsSW1wb3J0Tm9JbXBvcnRPbldlYl9sYWJlbFwiKSksXG5cdFx0XHRcdG0oXG5cdFx0XHRcdFx0XCIuZmxleC1zdGFydC5tdC1sXCIsXG5cdFx0XHRcdFx0bShMb2dpbkJ1dHRvbiwge1xuXHRcdFx0XHRcdFx0dHlwZTogTG9naW5CdXR0b25UeXBlLkZsZXhXaWR0aCxcblx0XHRcdFx0XHRcdGxhYmVsOiBcIm1haWxJbXBvcnREb3dubG9hZERlc2t0b3BDbGllbnRfbGFiZWxcIixcblx0XHRcdFx0XHRcdG9uY2xpY2s6ICgpID0+IHtcblx0XHRcdFx0XHRcdFx0Y29uc3QgZGVza3RvcENsaWVudERvd25sb2FkVXJpID0gXCJodHRwczovL3R1dGEuY29tI2Rvd25sb2FkXCJcblx0XHRcdFx0XHRcdFx0aWYgKGlzV2ViQ2xpZW50KCkpIHtcblx0XHRcdFx0XHRcdFx0XHRvcGVuKGRlc2t0b3BDbGllbnREb3dubG9hZFVyaSlcblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRtYWlsTG9jYXRvci5zeXN0ZW1GYWNhZGUub3BlbkxpbmsoZGVza3RvcENsaWVudERvd25sb2FkVXJpKVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdH0pLFxuXHRcdFx0XHQpLFxuXHRcdFx0XHRtKFxuXHRcdFx0XHRcdFwiLmZsZXgtdi1jZW50ZXIuZnVsbC13aWR0aC5tdC14bFwiLFxuXHRcdFx0XHRcdG0oXCJpbWdcIiwge1xuXHRcdFx0XHRcdFx0c3JjOiBgJHt3aW5kb3cudHV0YW8uYXBwU3RhdGUucHJlZml4V2l0aG91dEZpbGV9L2ltYWdlcy9tYWlsLWltcG9ydC9lbWFpbC1pbXBvcnQtd2ViYXBwLnN2Z2AsXG5cdFx0XHRcdFx0XHRhbHQ6IFwiXCIsXG5cdFx0XHRcdFx0XHRyZWw6IFwibm9yZWZlcnJlclwiLFxuXHRcdFx0XHRcdFx0bG9hZGluZzogXCJsYXp5XCIsXG5cdFx0XHRcdFx0XHRkZWNvZGluZzogXCJhc3luY1wiLFxuXHRcdFx0XHRcdFx0Y2xhc3M6IFwic2V0dGluZ3MtaWxsdXN0cmF0aW9uLWxhcmdlXCIsXG5cdFx0XHRcdFx0fSksXG5cdFx0XHRcdCksXG5cdFx0XHQpLFxuXHRcdF1cblx0fVxuXG5cdGFzeW5jIGVudGl0eUV2ZW50c1JlY2VpdmVkKHVwZGF0ZXM6IFJlYWRvbmx5QXJyYXk8RW50aXR5VXBkYXRlRGF0YT4pOiBQcm9taXNlPHZvaWQ+IHt9XG59XG4iLCJpbXBvcnQgbSwgeyBDaGlsZHJlbiwgQ29tcG9uZW50LCBWbm9kZSB9IGZyb20gXCJtaXRocmlsXCJcbmltcG9ydCB7IGxhbmcgfSBmcm9tIFwiLi4vLi4vY29tbW9uL21pc2MvTGFuZ3VhZ2VWaWV3TW9kZWxcIlxuaW1wb3J0IHsgRHJvcERvd25TZWxlY3RvciwgdHlwZSBEcm9wRG93blNlbGVjdG9yQXR0cnMgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2d1aS9iYXNlL0Ryb3BEb3duU2VsZWN0b3JcIlxuaW1wb3J0IHsgTWFpbGJveERldGFpbCB9IGZyb20gXCIuLi8uLi9jb21tb24vbWFpbEZ1bmN0aW9uYWxpdHkvTWFpbGJveE1vZGVsXCJcbmltcG9ydCB7IGdldE1haWxib3hOYW1lIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9tYWlsRnVuY3Rpb25hbGl0eS9TaGFyZWRNYWlsVXRpbHNcIlxuaW1wb3J0IHsgbWFpbExvY2F0b3IgfSBmcm9tIFwiLi4vbWFpbExvY2F0b3JcIlxuaW1wb3J0IHsgZmlyc3QgfSBmcm9tIFwiQHR1dGFvL3R1dGFub3RhLXV0aWxzXCJcbmltcG9ydCB7IExvZ2luQ29udHJvbGxlciB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL21haW4vTG9naW5Db250cm9sbGVyXCJcbmltcG9ydCB7IE1haWxFeHBvcnRDb250cm9sbGVyIH0gZnJvbSBcIi4uL25hdGl2ZS9tYWluL01haWxFeHBvcnRDb250cm9sbGVyLmpzXCJcbmltcG9ydCBTdHJlYW0gZnJvbSBcIm1pdGhyaWwvc3RyZWFtXCJcbmltcG9ydCB7IEJ1dHRvbiwgQnV0dG9uVHlwZSB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL2Jhc2UvQnV0dG9uXCJcbmltcG9ydCB7IEljb25CdXR0b24gfSBmcm9tIFwiLi4vLi4vY29tbW9uL2d1aS9iYXNlL0ljb25CdXR0b25cIlxuaW1wb3J0IHsgSWNvbnMgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2d1aS9iYXNlL2ljb25zL0ljb25zXCJcbmltcG9ydCB7IEJ1dHRvblNpemUgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2d1aS9iYXNlL0J1dHRvblNpemVcIlxuaW1wb3J0IHsgTG9naW5CdXR0b24sIExvZ2luQnV0dG9uVHlwZSB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL2Jhc2UvYnV0dG9ucy9Mb2dpbkJ1dHRvblwiXG5pbXBvcnQgeyBJY29uLCBJY29uU2l6ZSB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL2Jhc2UvSWNvblwiXG5pbXBvcnQgeyBCb290SWNvbnMgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2d1aS9iYXNlL2ljb25zL0Jvb3RJY29uc1wiXG5cbmludGVyZmFjZSBNYWlsRXhwb3J0U2V0dGluZ3NBdHRycyB7XG5cdG1haWxib3hEZXRhaWxzOiBNYWlsYm94RGV0YWlsW11cblx0bG9naW5zOiBMb2dpbkNvbnRyb2xsZXJcblx0bWFpbEV4cG9ydENvbnRyb2xsZXI6IE1haWxFeHBvcnRDb250cm9sbGVyXG59XG5cbmV4cG9ydCBjbGFzcyBNYWlsRXhwb3J0U2V0dGluZ3MgaW1wbGVtZW50cyBDb21wb25lbnQ8TWFpbEV4cG9ydFNldHRpbmdzQXR0cnM+IHtcblx0cHJpdmF0ZSBzZWxlY3RlZE1haWxib3g6IE1haWxib3hEZXRhaWwgfCBudWxsID0gbnVsbFxuXHRwcml2YXRlIGNvbnRyb2xsZXJTdWJzY3JpcHRpb246IFN0cmVhbTx2b2lkPiB8IG51bGwgPSBudWxsXG5cdHByaXZhdGUgaXNFeHBvcnRIaXN0b3J5RXhwYW5kZWQ6IGJvb2xlYW4gPSBmYWxzZVxuXG5cdG9uY3JlYXRlKHZub2RlOiBWbm9kZTxNYWlsRXhwb3J0U2V0dGluZ3NBdHRycz4pIHtcblx0XHR0aGlzLmNvbnRyb2xsZXJTdWJzY3JpcHRpb24gPSB2bm9kZS5hdHRycy5tYWlsRXhwb3J0Q29udHJvbGxlci5zdGF0ZS5tYXAobS5yZWRyYXcpXG5cdH1cblxuXHRvbnJlbW92ZSgpIHtcblx0XHRpZiAodGhpcy5jb250cm9sbGVyU3Vic2NyaXB0aW9uKSB7XG5cdFx0XHR0aGlzLmNvbnRyb2xsZXJTdWJzY3JpcHRpb24uZW5kKClcblx0XHRcdHRoaXMuY29udHJvbGxlclN1YnNjcmlwdGlvbiA9IG51bGxcblx0XHR9XG5cdH1cblxuXHR2aWV3KHZub2RlOiBWbm9kZTxNYWlsRXhwb3J0U2V0dGluZ3NBdHRycz4pOiBDaGlsZHJlbiB7XG5cdFx0Y29uc3QgeyBtYWlsYm94RGV0YWlscyB9ID0gdm5vZGUuYXR0cnNcblx0XHR0aGlzLnNlbGVjdGVkTWFpbGJveCA9IHRoaXMuc2VsZWN0ZWRNYWlsYm94ID8/IGZpcnN0KG1haWxib3hEZXRhaWxzKVxuXHRcdGNvbnN0IHN0YXRlID0gdm5vZGUuYXR0cnMubWFpbEV4cG9ydENvbnRyb2xsZXIuc3RhdGUoKVxuXHRcdGNvbnN0IGVtcHR5TGFiZWwgPSBtKFwiYnJcIilcblx0XHRyZXR1cm4gW1xuXHRcdFx0bShEcm9wRG93blNlbGVjdG9yLCB7XG5cdFx0XHRcdGxhYmVsOiBcIm1haWxib3hUb0V4cG9ydF9sYWJlbFwiLFxuXHRcdFx0XHRpdGVtczogbWFpbGJveERldGFpbHMubWFwKChtYWlsYm94RGV0YWlsKSA9PiB7XG5cdFx0XHRcdFx0cmV0dXJuIHsgbmFtZTogZ2V0TWFpbGJveE5hbWUobWFpbExvY2F0b3IubG9naW5zLCBtYWlsYm94RGV0YWlsKSwgdmFsdWU6IG1haWxib3hEZXRhaWwgfVxuXHRcdFx0XHR9KSxcblx0XHRcdFx0c2VsZWN0ZWRWYWx1ZTogdGhpcy5zZWxlY3RlZE1haWxib3gsXG5cdFx0XHRcdHNlbGVjdGlvbkNoYW5nZWRIYW5kbGVyOiAoc2VsZWN0ZWRNYWlsYm94KSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5zZWxlY3RlZE1haWxib3ggPSBzZWxlY3RlZE1haWxib3hcblx0XHRcdFx0fSxcblx0XHRcdFx0ZHJvcGRvd25XaWR0aDogMzAwLFxuXHRcdFx0XHRkaXNhYmxlZDogc3RhdGUudHlwZSA9PT0gXCJleHBvcnRpbmdcIixcblx0XHRcdFx0aGVscExhYmVsOiAoKSA9PiBlbXB0eUxhYmVsLFxuXHRcdFx0fSBzYXRpc2ZpZXMgRHJvcERvd25TZWxlY3RvckF0dHJzPE1haWxib3hEZXRhaWw+KSxcblx0XHRcdHRoaXMucmVuZGVyU3RhdGUodm5vZGUuYXR0cnMubWFpbEV4cG9ydENvbnRyb2xsZXIpLFxuXHRcdF1cblx0fVxuXG5cdHByaXZhdGUgcmVuZGVyU3RhdGUoY29udHJvbGxlcjogTWFpbEV4cG9ydENvbnRyb2xsZXIpOiBDaGlsZHJlbiB7XG5cdFx0Y29uc3Qgc3RhdGUgPSBjb250cm9sbGVyLnN0YXRlKClcblx0XHRzd2l0Y2ggKHN0YXRlLnR5cGUpIHtcblx0XHRcdGNhc2UgXCJleHBvcnRpbmdcIjpcblx0XHRcdFx0cmV0dXJuIFtcblx0XHRcdFx0XHRtKFxuXHRcdFx0XHRcdFx0XCIuZmxleC1zdGFydC5tdC1tLnNtYWxsXCIsXG5cdFx0XHRcdFx0XHRsYW5nLmdldChcImV4cG9ydGluZ0VtYWlsc19sYWJlbFwiLCB7XG5cdFx0XHRcdFx0XHRcdFwie2NvdW50fVwiOiBzdGF0ZS5leHBvcnRlZE1haWxzLFxuXHRcdFx0XHRcdFx0fSksXG5cdFx0XHRcdFx0KSxcblx0XHRcdFx0XHRtKFwiLmZsZXgtc3BhY2UtYmV0d2Vlbi5ib3JkZXItcmFkaXVzLWJpZy5tdC1zLnJlbC5uYXYtYmcuZnVsbC13aWR0aC5jZW50ZXItdmVydGljYWxseVwiLCBbXG5cdFx0XHRcdFx0XHRtKEljb24sIHtcblx0XHRcdFx0XHRcdFx0aWNvbjogQm9vdEljb25zLlByb2dyZXNzLFxuXHRcdFx0XHRcdFx0XHRjbGFzczogXCJmbGV4LWNlbnRlciBpdGVtcy1jZW50ZXIgaWNvbi1wcm9ncmVzcy10aW55IGljb24tcHJvZ3Jlc3MgbWwtc1wiLFxuXHRcdFx0XHRcdFx0XHRzaXplOiBJY29uU2l6ZS5NZWRpdW0sXG5cdFx0XHRcdFx0XHR9KSxcblx0XHRcdFx0XHRcdG0oSWNvbkJ1dHRvbiwge1xuXHRcdFx0XHRcdFx0XHR0aXRsZTogXCJjYW5jZWxfYWN0aW9uXCIsXG5cdFx0XHRcdFx0XHRcdGljb246IEljb25zLkNhbmNlbCxcblx0XHRcdFx0XHRcdFx0Y2xpY2s6ICgpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRjb250cm9sbGVyLmNhbmNlbEV4cG9ydCgpXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdHNpemU6IEJ1dHRvblNpemUuTm9ybWFsLFxuXHRcdFx0XHRcdFx0fSksXG5cdFx0XHRcdFx0XSksXG5cdFx0XHRcdF1cblx0XHRcdGNhc2UgXCJpZGxlXCI6XG5cdFx0XHRcdHJldHVybiBbXG5cdFx0XHRcdFx0bShcIi5mbGV4LXN0YXJ0Lm10LW1cIiwgdGhpcy5yZW5kZXJFeHBvcnRJbmZvVGV4dCgpKSxcblx0XHRcdFx0XHRtKFxuXHRcdFx0XHRcdFx0XCIuZmxleC1zdGFydC5tdC1zXCIsXG5cdFx0XHRcdFx0XHRtKExvZ2luQnV0dG9uLCB7XG5cdFx0XHRcdFx0XHRcdHR5cGU6IExvZ2luQnV0dG9uVHlwZS5GbGV4V2lkdGgsXG5cdFx0XHRcdFx0XHRcdGxhYmVsOiBcImV4cG9ydF9hY3Rpb25cIixcblx0XHRcdFx0XHRcdFx0b25jbGljazogKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdGlmICh0aGlzLnNlbGVjdGVkTWFpbGJveCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0Y29udHJvbGxlci5zdGFydEV4cG9ydCh0aGlzLnNlbGVjdGVkTWFpbGJveClcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHR9KSxcblx0XHRcdFx0XHQpLFxuXHRcdFx0XHRdXG5cdFx0XHRjYXNlIFwiZXJyb3JcIjpcblx0XHRcdFx0cmV0dXJuIFtcblx0XHRcdFx0XHRtKFwiLmZsZXgtc3BhY2UtYmV0d2Vlbi5pdGVtcy1jZW50ZXIubXQubWItc1wiLCBbXG5cdFx0XHRcdFx0XHRtKFwic21hbGwubm9zZWxlY3RcIiwgc3RhdGUubWVzc2FnZSksXG5cdFx0XHRcdFx0XHRtKEJ1dHRvbiwge1xuXHRcdFx0XHRcdFx0XHRsYWJlbDogXCJyZXRyeV9hY3Rpb25cIixcblx0XHRcdFx0XHRcdFx0Y2xpY2s6ICgpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRjb250cm9sbGVyLmNhbmNlbEV4cG9ydCgpXG5cdFx0XHRcdFx0XHRcdFx0aWYgKHRoaXMuc2VsZWN0ZWRNYWlsYm94KSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRjb250cm9sbGVyLnN0YXJ0RXhwb3J0KHRoaXMuc2VsZWN0ZWRNYWlsYm94KVxuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0dHlwZTogQnV0dG9uVHlwZS5TZWNvbmRhcnksXG5cdFx0XHRcdFx0XHR9KSxcblx0XHRcdFx0XHRdKSxcblx0XHRcdFx0XVxuXHRcdFx0Y2FzZSBcImZpbmlzaGVkXCI6XG5cdFx0XHRcdHJldHVybiBbXG5cdFx0XHRcdFx0bShcInNtYWxsLm5vc2VsZWN0XCIsIGxhbmcuZ2V0KFwiZXhwb3J0RmluaXNoZWRfbGFiZWxcIikpLFxuXHRcdFx0XHRcdG0oXG5cdFx0XHRcdFx0XHRcIi5mbGV4LXN0YXJ0Lm10LXNcIixcblx0XHRcdFx0XHRcdG0oTG9naW5CdXR0b24sIHtcblx0XHRcdFx0XHRcdFx0dHlwZTogTG9naW5CdXR0b25UeXBlLkZsZXhXaWR0aCxcblx0XHRcdFx0XHRcdFx0bGFiZWw6IFwib3Blbl9hY3Rpb25cIixcblx0XHRcdFx0XHRcdFx0b25jbGljazogKCkgPT4gdGhpcy5vbk9wZW5DbGlja2VkKGNvbnRyb2xsZXIpLFxuXHRcdFx0XHRcdFx0fSksXG5cdFx0XHRcdFx0KSxcblx0XHRcdFx0XVxuXHRcdFx0Y2FzZSBcImxvY2tlZFwiOlxuXHRcdFx0XHRyZXR1cm4gW1xuXHRcdFx0XHRcdG0oXCIuZmxleC1zcGFjZS1iZXR3ZWVuLml0ZW1zLWNlbnRlci5tdC5tYi1zLmJ1dHRvbi1oZWlnaHRcIiwgW1xuXHRcdFx0XHRcdFx0bShcInNtYWxsLm5vc2VsZWN0XCIsIGAke2xhbmcuZ2V0KFwiZXhwb3J0UnVubmluZ0Vsc2V3aGVyZV9sYWJlbFwiKX0gJHtsYW5nLmdldChcInBsZWFzZVdhaXRfbXNnXCIpfWApLFxuXHRcdFx0XHRcdF0pLFxuXHRcdFx0XHRdXG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyBvbk9wZW5DbGlja2VkKGNvbnRyb2xsZXI6IE1haWxFeHBvcnRDb250cm9sbGVyKSB7XG5cdFx0YXdhaXQgY29udHJvbGxlci5vcGVuRXhwb3J0RGlyZWN0b3J5KClcblx0XHRhd2FpdCBjb250cm9sbGVyLmNhbmNlbEV4cG9ydCgpXG5cdH1cblxuXHRwcml2YXRlIHJlbmRlckV4cG9ydEluZm9UZXh0KCkge1xuXHRcdHJldHVybiBbbShcIi5zbWFsbFwiLCBsYW5nLmdldChcIm1haWxFeHBvcnRJbmZvVGV4dF9sYWJlbFwiKSldXG5cdH1cbn1cbiIsImltcG9ydCBtLCB7IENoaWxkcmVuIH0gZnJvbSBcIm1pdGhyaWxcIlxuaW1wb3J0IHsgYXNzZXJ0TWFpbk9yTm9kZSwgaXNEZXNrdG9wLCBpc1dlYkNsaWVudCB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL2NvbW1vbi9FbnZcIlxuaW1wb3J0IHsgbGFuZyB9IGZyb20gXCIuLi8uLi9jb21tb24vbWlzYy9MYW5ndWFnZVZpZXdNb2RlbFwiXG5pbXBvcnQgeyBVcGRhdGFibGVTZXR0aW5nc1ZpZXdlciB9IGZyb20gXCIuLi8uLi9jb21tb24vc2V0dGluZ3MvSW50ZXJmYWNlcy5qc1wiXG5pbXBvcnQgeyBtYWlsTG9jYXRvciB9IGZyb20gXCIuLi9tYWlsTG9jYXRvci5qc1wiXG5pbXBvcnQgeyBNYWlsRXhwb3J0U2V0dGluZ3MgfSBmcm9tIFwiLi9NYWlsRXhwb3J0U2V0dGluZ3NcIlxuaW1wb3J0IHsgTWFpbEV4cG9ydENvbnRyb2xsZXIgfSBmcm9tIFwiLi4vbmF0aXZlL21haW4vTWFpbEV4cG9ydENvbnRyb2xsZXIuanNcIlxuaW1wb3J0IHsgTG9naW5CdXR0b24sIExvZ2luQnV0dG9uVHlwZSB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL2Jhc2UvYnV0dG9ucy9Mb2dpbkJ1dHRvblwiXG5cbmFzc2VydE1haW5Pck5vZGUoKVxuXG5leHBvcnQgY2xhc3MgTWFpbEV4cG9ydFZpZXdlciBpbXBsZW1lbnRzIFVwZGF0YWJsZVNldHRpbmdzVmlld2VyIHtcblx0cHJpdmF0ZSBtYWlsRXhwb3J0Q29udHJvbGxlcjogTWFpbEV4cG9ydENvbnRyb2xsZXIgfCBudWxsID0gbnVsbFxuXG5cdGNvbnN0cnVjdG9yKCkge1xuXHRcdHRoaXMudmlldyA9IHRoaXMudmlldy5iaW5kKHRoaXMpXG5cblx0XHRpZiAoaXNEZXNrdG9wKCkpIHtcblx0XHRcdC8vIGV4cG9ydCBpcyBvbmx5IGF2YWlsYWJsZSBvbiBkZXNrdG9wXG5cdFx0XHRtYWlsTG9jYXRvci5tYWlsRXhwb3J0Q29udHJvbGxlcigpLnRoZW4oKGNvbnRyb2xsZXIpID0+IHtcblx0XHRcdFx0dGhpcy5tYWlsRXhwb3J0Q29udHJvbGxlciA9IGNvbnRyb2xsZXJcblx0XHRcdFx0bS5yZWRyYXcoKVxuXHRcdFx0fSlcblx0XHR9XG5cdH1cblxuXHR2aWV3KCk6IENoaWxkcmVuIHtcblx0XHRyZXR1cm4gW1xuXHRcdFx0bShcblx0XHRcdFx0XCIuZmlsbC1hYnNvbHV0ZS5zY3JvbGwucGxyLWwucGIteGxcIixcblx0XHRcdFx0bShcIi5oNC5tdC1sXCIsIGxhbmcuZ2V0KFwibWFpbEV4cG9ydFNldHRpbmdzX2xhYmVsXCIpKSxcblx0XHRcdFx0aXNEZXNrdG9wKCkgPyB0aGlzLnJlbmRlck1haWxFeHBvcnRTZXR0aW5ncygpIDogdGhpcy5yZW5kZXJFeHBvcnRPbmx5T25EZXNrdG9wVGV4dCgpLFxuXHRcdFx0KSxcblx0XHRdXG5cdH1cblxuXHRwcml2YXRlIHJlbmRlck1haWxFeHBvcnRTZXR0aW5ncygpIHtcblx0XHRyZXR1cm4gdGhpcy5tYWlsRXhwb3J0Q29udHJvbGxlciAhPSBudWxsXG5cdFx0XHQ/IG0oTWFpbEV4cG9ydFNldHRpbmdzLCB7XG5cdFx0XHRcdFx0bWFpbGJveERldGFpbHM6IG1haWxMb2NhdG9yLm1haWxib3hNb2RlbC5tYWlsYm94RGV0YWlscygpLFxuXHRcdFx0XHRcdGxvZ2luczogbWFpbExvY2F0b3IubG9naW5zLFxuXHRcdFx0XHRcdG1haWxFeHBvcnRDb250cm9sbGVyOiB0aGlzLm1haWxFeHBvcnRDb250cm9sbGVyLFxuXHRcdFx0ICB9KVxuXHRcdFx0OiBudWxsXG5cdH1cblxuXHRwcml2YXRlIHJlbmRlckV4cG9ydE9ubHlPbkRlc2t0b3BUZXh0KCkge1xuXHRcdHJldHVybiBbXG5cdFx0XHRtKFxuXHRcdFx0XHRcIi5mbGV4LWNvbHVtbi5tdFwiLFxuXHRcdFx0XHRtKFwiLnBcIiwgbGFuZy5nZXQoXCJtYWlsRXhwb3J0T25seU9uRGVza3RvcF9sYWJlbFwiKSksXG5cdFx0XHRcdG0oXG5cdFx0XHRcdFx0XCIuZmxleC1zdGFydC5tdC1sXCIsXG5cdFx0XHRcdFx0bShMb2dpbkJ1dHRvbiwge1xuXHRcdFx0XHRcdFx0dHlwZTogTG9naW5CdXR0b25UeXBlLkZsZXhXaWR0aCxcblx0XHRcdFx0XHRcdGxhYmVsOiBcImRvd25sb2FkRGVza3RvcENsaWVudF9sYWJlbFwiLFxuXHRcdFx0XHRcdFx0b25jbGljazogKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRjb25zdCBkZXNrdG9wQ2xpZW50RG93bmxvYWRVcmkgPSBcImh0dHBzOi8vdHV0YS5jb20jZG93bmxvYWRcIlxuXHRcdFx0XHRcdFx0XHRpZiAoaXNXZWJDbGllbnQoKSkge1xuXHRcdFx0XHRcdFx0XHRcdG9wZW4oZGVza3RvcENsaWVudERvd25sb2FkVXJpKVxuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdG1haWxMb2NhdG9yLnN5c3RlbUZhY2FkZS5vcGVuTGluayhkZXNrdG9wQ2xpZW50RG93bmxvYWRVcmkpXG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0fSksXG5cdFx0XHRcdCksXG5cdFx0XHRcdG0oXG5cdFx0XHRcdFx0XCIuZmxleC12LWNlbnRlci5mdWxsLXdpZHRoLm10LXhsXCIsXG5cdFx0XHRcdFx0bShcImltZ1wiLCB7XG5cdFx0XHRcdFx0XHRzcmM6IGAke3dpbmRvdy50dXRhby5hcHBTdGF0ZS5wcmVmaXhXaXRob3V0RmlsZX0vaW1hZ2VzL21haWwtaW1wb3J0L2VtYWlsLWltcG9ydC13ZWJhcHAuc3ZnYCxcblx0XHRcdFx0XHRcdGFsdDogXCJcIixcblx0XHRcdFx0XHRcdHJlbDogXCJub3JlZmVycmVyXCIsXG5cdFx0XHRcdFx0XHRsb2FkaW5nOiBcImxhenlcIixcblx0XHRcdFx0XHRcdGRlY29kaW5nOiBcImFzeW5jXCIsXG5cdFx0XHRcdFx0XHRjbGFzczogXCJzZXR0aW5ncy1pbGx1c3RyYXRpb24tbGFyZ2VcIixcblx0XHRcdFx0XHR9KSxcblx0XHRcdFx0KSxcblx0XHRcdCksXG5cdFx0XVxuXHR9XG5cblx0YXN5bmMgZW50aXR5RXZlbnRzUmVjZWl2ZWQoKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpXG5cdH1cbn1cbiIsImltcG9ydCBtLCB7IENoaWxkcmVuLCBWbm9kZSwgVm5vZGVET00gfSBmcm9tIFwibWl0aHJpbFwiXG5pbXBvcnQgc3RyZWFtIGZyb20gXCJtaXRocmlsL3N0cmVhbVwiXG5pbXBvcnQgeyBhc3NlcnRNYWluT3JOb2RlLCBpc0FwcCwgaXNEZXNrdG9wLCBpc0lPU0FwcCB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL2NvbW1vbi9FbnZcIlxuaW1wb3J0IHsgQ29sdW1uVHlwZSwgVmlld0NvbHVtbiB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL2Jhc2UvVmlld0NvbHVtblwiXG5pbXBvcnQgeyBWaWV3U2xpZGVyIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvbmF2L1ZpZXdTbGlkZXIuanNcIlxuaW1wb3J0IHsgU2V0dGluZ3NGb2xkZXIgfSBmcm9tIFwiLi4vLi4vY29tbW9uL3NldHRpbmdzL1NldHRpbmdzRm9sZGVyLmpzXCJcbmltcG9ydCB7IGxhbmcgfSBmcm9tIFwiLi4vLi4vY29tbW9uL21pc2MvTGFuZ3VhZ2VWaWV3TW9kZWxcIlxuaW1wb3J0IHsgSGVhZGVyIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvSGVhZGVyLmpzXCJcbmltcG9ydCB7IExvZ2luU2V0dGluZ3NWaWV3ZXIgfSBmcm9tIFwiLi4vLi4vY29tbW9uL3NldHRpbmdzL2xvZ2luL0xvZ2luU2V0dGluZ3NWaWV3ZXIuanNcIlxuaW1wb3J0IHsgR2xvYmFsU2V0dGluZ3NWaWV3ZXIgfSBmcm9tIFwiLi9HbG9iYWxTZXR0aW5nc1ZpZXdlclwiXG5pbXBvcnQgeyBEZXNrdG9wU2V0dGluZ3NWaWV3ZXIgfSBmcm9tIFwiLi9EZXNrdG9wU2V0dGluZ3NWaWV3ZXJcIlxuaW1wb3J0IHsgTWFpbFNldHRpbmdzVmlld2VyIH0gZnJvbSBcIi4vTWFpbFNldHRpbmdzVmlld2VyXCJcbmltcG9ydCB7IFVzZXJMaXN0VmlldyB9IGZyb20gXCIuLi8uLi9jb21tb24vc2V0dGluZ3MvVXNlckxpc3RWaWV3LmpzXCJcbmltcG9ydCB0eXBlIHsgUmVjZWl2ZWRHcm91cEludml0YXRpb24sIFVzZXIgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2FwaS9lbnRpdGllcy9zeXMvVHlwZVJlZnMuanNcIlxuaW1wb3J0IHsgQ3VzdG9tZXJJbmZvVHlwZVJlZiwgQ3VzdG9tZXJUeXBlUmVmIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9hcGkvZW50aXRpZXMvc3lzL1R5cGVSZWZzLmpzXCJcbmltcG9ydCB7IEdyb3VwTGlzdFZpZXcgfSBmcm9tIFwiLi9ncm91cHMvR3JvdXBMaXN0Vmlldy5qc1wiXG5pbXBvcnQgeyBXaGl0ZWxhYmVsU2V0dGluZ3NWaWV3ZXIgfSBmcm9tIFwiLi4vLi4vY29tbW9uL3NldHRpbmdzL3doaXRlbGFiZWwvV2hpdGVsYWJlbFNldHRpbmdzVmlld2VyXCJcbmltcG9ydCB7IEljb25zIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvYmFzZS9pY29ucy9JY29uc1wiXG5pbXBvcnQgeyB0aGVtZSB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL3RoZW1lXCJcbmltcG9ydCB7IEZlYXR1cmVUeXBlLCBHcm91cFR5cGUsIExlZ2FjeVBsYW5zIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9hcGkvY29tbW9uL1R1dGFub3RhQ29uc3RhbnRzXCJcbmltcG9ydCB7IEJvb3RJY29ucyB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL2Jhc2UvaWNvbnMvQm9vdEljb25zXCJcbmltcG9ydCB7IGxvY2F0b3IgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2FwaS9tYWluL0NvbW1vbkxvY2F0b3JcIlxuaW1wb3J0IHsgU3Vic2NyaXB0aW9uVmlld2VyIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9zdWJzY3JpcHRpb24vU3Vic2NyaXB0aW9uVmlld2VyXCJcbmltcG9ydCB7IFBheW1lbnRWaWV3ZXIgfSBmcm9tIFwiLi4vLi4vY29tbW9uL3N1YnNjcmlwdGlvbi9QYXltZW50Vmlld2VyXCJcbmltcG9ydCB7IHNob3dVc2VySW1wb3J0RGlhbG9nIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9zZXR0aW5ncy9Vc2VyVmlld2VyLmpzXCJcbmltcG9ydCB7IGZpcnN0LCBMYXp5TG9hZGVkLCBwYXJ0aXRpb24sIHByb21pc2VNYXAgfSBmcm9tIFwiQHR1dGFvL3R1dGFub3RhLXV0aWxzXCJcbmltcG9ydCB7IEFwcGVhcmFuY2VTZXR0aW5nc1ZpZXdlciB9IGZyb20gXCIuLi8uLi9jb21tb24vc2V0dGluZ3MvQXBwZWFyYW5jZVNldHRpbmdzVmlld2VyLmpzXCJcbmltcG9ydCB0eXBlIHsgTmF2QnV0dG9uQXR0cnMgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2d1aS9iYXNlL05hdkJ1dHRvbi5qc1wiXG5pbXBvcnQgeyBOYXZCdXR0b25Db2xvciB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL2Jhc2UvTmF2QnV0dG9uLmpzXCJcbmltcG9ydCB7IFNFVFRJTkdTX1BSRUZJWCB9IGZyb20gXCIuLi8uLi9jb21tb24vbWlzYy9Sb3V0ZUNoYW5nZVwiXG5pbXBvcnQgeyBzaXplIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvc2l6ZVwiXG5pbXBvcnQgeyBGb2xkZXJDb2x1bW5WaWV3IH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvRm9sZGVyQ29sdW1uVmlldy5qc1wiXG5pbXBvcnQgeyBnZXRFdElkIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9hcGkvY29tbW9uL3V0aWxzL0VudGl0eVV0aWxzXCJcbmltcG9ydCB7IEtub3dsZWRnZUJhc2VMaXN0VmlldyB9IGZyb20gXCIuL0tub3dsZWRnZUJhc2VMaXN0Vmlld1wiXG5pbXBvcnQgdHlwZSB7IFRlbXBsYXRlR3JvdXBJbnN0YW5jZSB9IGZyb20gXCIuLi90ZW1wbGF0ZXMvbW9kZWwvVGVtcGxhdGVHcm91cE1vZGVsXCJcbmltcG9ydCB7IHNob3dHcm91cFNoYXJpbmdEaWFsb2cgfSBmcm9tIFwiLi4vLi4vY29tbW9uL3NoYXJpbmcvdmlldy9Hcm91cFNoYXJpbmdEaWFsb2dcIlxuaW1wb3J0IHsgY3JlYXRlTW9yZUFjdGlvbkJ1dHRvbkF0dHJzLCBnZXRDb25maXJtYXRpb24gfSBmcm9tIFwiLi4vLi4vY29tbW9uL2d1aS9iYXNlL0d1aVV0aWxzXCJcbmltcG9ydCB7IFNpZGViYXJTZWN0aW9uIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvU2lkZWJhclNlY3Rpb25cIlxuaW1wb3J0IHsgUmVjZWl2ZWRHcm91cEludml0YXRpb25zTW9kZWwgfSBmcm9tIFwiLi4vLi4vY29tbW9uL3NoYXJpbmcvbW9kZWwvUmVjZWl2ZWRHcm91cEludml0YXRpb25zTW9kZWxcIlxuaW1wb3J0IHsgZ2V0TnVsbGFibGVTaGFyZWRHcm91cE5hbWUsIGdldFNoYXJlZEdyb3VwTmFtZSwgaXNTaGFyZWRHcm91cE93bmVyIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9zaGFyaW5nL0dyb3VwVXRpbHNcIlxuaW1wb3J0IHsgRHVtbXlUZW1wbGF0ZUxpc3RWaWV3IH0gZnJvbSBcIi4vRHVtbXlUZW1wbGF0ZUxpc3RWaWV3XCJcbmltcG9ydCB7IFNldHRpbmdzRm9sZGVyUm93IH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9zZXR0aW5ncy9TZXR0aW5nc0ZvbGRlclJvdy5qc1wiXG5pbXBvcnQgeyBzaG93UHJvZ3Jlc3NEaWFsb2cgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2d1aS9kaWFsb2dzL1Byb2dyZXNzRGlhbG9nXCJcbmltcG9ydCB7IGNyZWF0ZUdyb3VwU2V0dGluZ3MsIGNyZWF0ZVVzZXJBcmVhR3JvdXBEZWxldGVEYXRhLCBVc2VyU2V0dGluZ3NHcm91cFJvb3RUeXBlUmVmIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9hcGkvZW50aXRpZXMvdHV0YW5vdGEvVHlwZVJlZnMuanNcIlxuaW1wb3J0IHsgR3JvdXBJbnZpdGF0aW9uRm9sZGVyUm93IH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9zaGFyaW5nL3ZpZXcvR3JvdXBJbnZpdGF0aW9uRm9sZGVyUm93XCJcbmltcG9ydCB7IFRlbXBsYXRlR3JvdXBTZXJ2aWNlIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9hcGkvZW50aXRpZXMvdHV0YW5vdGEvU2VydmljZXNcIlxuaW1wb3J0IHsgZXhwb3J0VXNlckNzdiB9IGZyb20gXCIuLi8uLi9jb21tb24vc2V0dGluZ3MvVXNlckRhdGFFeHBvcnRlci5qc1wiXG5pbXBvcnQgeyBJY29uQnV0dG9uIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvYmFzZS9JY29uQnV0dG9uLmpzXCJcbmltcG9ydCB7IEJvdHRvbU5hdiB9IGZyb20gXCIuLi9ndWkvQm90dG9tTmF2LmpzXCJcbmltcG9ydCB7IGdldEF2YWlsYWJsZURvbWFpbnMgfSBmcm9tIFwiLi4vLi4vY29tbW9uL3NldHRpbmdzL21haWxhZGRyZXNzL01haWxBZGRyZXNzZXNVdGlscy5qc1wiXG5pbXBvcnQgeyBCYXNlVG9wTGV2ZWxWaWV3IH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvQmFzZVRvcExldmVsVmlldy5qc1wiXG5pbXBvcnQgeyBUb3BMZXZlbFZpZXcgfSBmcm9tIFwiLi4vLi4vVG9wTGV2ZWxWaWV3LmpzXCJcbmltcG9ydCB7IFJlZmVycmFsU2V0dGluZ3NWaWV3ZXIgfSBmcm9tIFwiLi4vLi4vY29tbW9uL3NldHRpbmdzL1JlZmVycmFsU2V0dGluZ3NWaWV3ZXIuanNcIlxuaW1wb3J0IHsgTG9naW5Db250cm9sbGVyIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9hcGkvbWFpbi9Mb2dpbkNvbnRyb2xsZXIuanNcIlxuaW1wb3J0IHsgQmFja2dyb3VuZENvbHVtbkxheW91dCB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL0JhY2tncm91bmRDb2x1bW5MYXlvdXQuanNcIlxuaW1wb3J0IHsgc3R5bGVzIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvc3R5bGVzLmpzXCJcbmltcG9ydCB7IE1vYmlsZUhlYWRlciB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL01vYmlsZUhlYWRlci5qc1wiXG5pbXBvcnQgeyBpc0N1c3RvbWl6YXRpb25FbmFibGVkRm9yQ3VzdG9tZXIgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2FwaS9jb21tb24vdXRpbHMvQ3VzdG9tZXJVdGlscy5qc1wiXG5pbXBvcnQgeyBFbnRpdHlVcGRhdGVEYXRhLCBpc1VwZGF0ZUZvclR5cGVSZWYgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2FwaS9jb21tb24vdXRpbHMvRW50aXR5VXBkYXRlVXRpbHMuanNcIlxuaW1wb3J0IHsgRGlhbG9nIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvYmFzZS9EaWFsb2cuanNcIlxuaW1wb3J0IHsgQWJvdXREaWFsb2cgfSBmcm9tIFwiLi4vLi4vY29tbW9uL3NldHRpbmdzL0Fib3V0RGlhbG9nLmpzXCJcbmltcG9ydCB7IGxvYWRUZW1wbGF0ZUdyb3VwSW5zdGFuY2VzIH0gZnJvbSBcIi4uL3RlbXBsYXRlcy9tb2RlbC9UZW1wbGF0ZVBvcHVwTW9kZWwuanNcIlxuaW1wb3J0IHsgVGVtcGxhdGVMaXN0VmlldyB9IGZyb20gXCIuL1RlbXBsYXRlTGlzdFZpZXcuanNcIlxuaW1wb3J0IHsgVGV4dEZpZWxkIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvYmFzZS9UZXh0RmllbGQuanNcIlxuaW1wb3J0IHsgQ29udGFjdHNTZXR0aW5nc1ZpZXdlciB9IGZyb20gXCIuL0NvbnRhY3RzU2V0dGluZ3NWaWV3ZXIuanNcIlxuaW1wb3J0IHsgTm90aWZpY2F0aW9uU2V0dGluZ3NWaWV3ZXIgfSBmcm9tIFwiLi9Ob3RpZmljYXRpb25TZXR0aW5nc1ZpZXdlci5qc1wiXG5pbXBvcnQgeyBTZXR0aW5nc1ZpZXdBdHRycywgVXBkYXRhYmxlU2V0dGluZ3NEZXRhaWxzVmlld2VyLCBVcGRhdGFibGVTZXR0aW5nc1ZpZXdlciB9IGZyb20gXCIuLi8uLi9jb21tb24vc2V0dGluZ3MvSW50ZXJmYWNlcy5qc1wiXG5pbXBvcnQgeyBBZmZpbGlhdGVTZXR0aW5nc1ZpZXdlciB9IGZyb20gXCIuLi8uLi9jb21tb24vc2V0dGluZ3MvQWZmaWxpYXRlU2V0dGluZ3NWaWV3ZXIuanNcIlxuaW1wb3J0IHsgQWZmaWxpYXRlS3Bpc1ZpZXdlciB9IGZyb20gXCIuLi8uLi9jb21tb24vc2V0dGluZ3MvQWZmaWxpYXRlS3Bpc1ZpZXdlci5qc1wiXG5pbXBvcnQgeyBEZXNrdG9wTWFpbEltcG9ydFNldHRpbmdzVmlld2VyIH0gZnJvbSBcIi4vRGVza3RvcE1haWxJbXBvcnRTZXR0aW5nc1ZpZXdlci5qc1wiXG5pbXBvcnQgeyBtYWlsTG9jYXRvciB9IGZyb20gXCIuLi9tYWlsTG9jYXRvclwiXG5pbXBvcnQgeyBXZWJNYWlsSW1wb3J0U2V0dGluZ3NWaWV3ZXIgfSBmcm9tIFwiLi9XZWJNYWlsSW1wb3J0U2V0dGluZ3NWaWV3ZXIuanNcIlxuaW1wb3J0IHsgQmFzZUJ1dHRvbiB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL2Jhc2UvYnV0dG9ucy9CYXNlQnV0dG9uXCJcbmltcG9ydCB7IHNob3dTdXBwb3J0RGlhbG9nIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9zdXBwb3J0L1N1cHBvcnREaWFsb2dcIlxuaW1wb3J0IHsgSWNvbiwgSWNvblNpemUgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2d1aS9iYXNlL0ljb25cIlxuaW1wb3J0IHsgTWFpbEV4cG9ydFZpZXdlciB9IGZyb20gXCIuL01haWxFeHBvcnRWaWV3ZXJcIlxuXG5hc3NlcnRNYWluT3JOb2RlKClcblxuZXhwb3J0IGNsYXNzIFNldHRpbmdzVmlldyBleHRlbmRzIEJhc2VUb3BMZXZlbFZpZXcgaW1wbGVtZW50cyBUb3BMZXZlbFZpZXc8U2V0dGluZ3NWaWV3QXR0cnM+IHtcblx0dmlld1NsaWRlcjogVmlld1NsaWRlclxuXHRwcml2YXRlIHJlYWRvbmx5IF9zZXR0aW5nc0ZvbGRlcnNDb2x1bW46IFZpZXdDb2x1bW5cblx0cHJpdmF0ZSByZWFkb25seSBfc2V0dGluZ3NDb2x1bW46IFZpZXdDb2x1bW5cblx0cHJpdmF0ZSByZWFkb25seSBfc2V0dGluZ3NEZXRhaWxzQ29sdW1uOiBWaWV3Q29sdW1uXG5cdHByaXZhdGUgcmVhZG9ubHkgX3VzZXJGb2xkZXJzOiBTZXR0aW5nc0ZvbGRlcjx1bmtub3duPltdXG5cdHByaXZhdGUgcmVhZG9ubHkgX2FkbWluRm9sZGVyczogU2V0dGluZ3NGb2xkZXI8dW5rbm93bj5bXVxuXHRwcml2YXRlIHJlYWRvbmx5IGxvZ2luczogTG9naW5Db250cm9sbGVyXG5cdHByaXZhdGUgX3RlbXBsYXRlRm9sZGVyczogU2V0dGluZ3NGb2xkZXI8VGVtcGxhdGVHcm91cEluc3RhbmNlPltdXG5cdHByaXZhdGUgcmVhZG9ubHkgX2R1bW15VGVtcGxhdGVGb2xkZXI6IFNldHRpbmdzRm9sZGVyPHVua25vd24+XG5cdHByaXZhdGUgX2tub3dsZWRnZUJhc2VGb2xkZXJzOiBTZXR0aW5nc0ZvbGRlcjx1bmtub3duPltdXG5cdHByaXZhdGUgX3NlbGVjdGVkRm9sZGVyOiBTZXR0aW5nc0ZvbGRlcjx1bmtub3duPlxuXHRwcml2YXRlIF9jdXJyZW50Vmlld2VyOiBVcGRhdGFibGVTZXR0aW5nc1ZpZXdlciB8IG51bGwgPSBudWxsXG5cdHByaXZhdGUgc2hvd0J1c2luZXNzU2V0dGluZ3M6IHN0cmVhbTxib29sZWFuPiA9IHN0cmVhbShmYWxzZSlcblx0cHJpdmF0ZSBzaG93QWZmaWxpYXRlU2V0dGluZ3M6IGJvb2xlYW4gPSBmYWxzZVxuXHRwcml2YXRlIHJlYWRvbmx5IF90YXJnZXRGb2xkZXI6IHN0cmluZ1xuXHRwcml2YXRlIHJlYWRvbmx5IF90YXJnZXRSb3V0ZTogc3RyaW5nXG5cdGRldGFpbHNWaWV3ZXI6IFVwZGF0YWJsZVNldHRpbmdzRGV0YWlsc1ZpZXdlciB8IG51bGwgPSBudWxsIC8vIHRoZSBjb21wb25lbnQgZm9yIHRoZSBkZXRhaWxzIGNvbHVtbi4gY2FuIGJlIHNldCBieSBzZXR0aW5ncyB2aWV3c1xuXG5cdF9jdXN0b21Eb21haW5zOiBMYXp5TG9hZGVkPHN0cmluZ1tdPlxuXHRfdGVtcGxhdGVJbnZpdGF0aW9uczogUmVjZWl2ZWRHcm91cEludml0YXRpb25zTW9kZWw8R3JvdXBUeXBlLlRlbXBsYXRlPlxuXG5cdGNvbnN0cnVjdG9yKHZub2RlOiBWbm9kZTxTZXR0aW5nc1ZpZXdBdHRycz4pIHtcblx0XHRzdXBlcigpXG5cdFx0dGhpcy5sb2dpbnMgPSB2bm9kZS5hdHRycy5sb2dpbnNcblx0XHR0aGlzLl91c2VyRm9sZGVycyA9IFtcblx0XHRcdG5ldyBTZXR0aW5nc0ZvbGRlcihcblx0XHRcdFx0KCkgPT4gXCJsb2dpbl9sYWJlbFwiLFxuXHRcdFx0XHQoKSA9PiBCb290SWNvbnMuQ29udGFjdHMsXG5cdFx0XHRcdFwibG9naW5cIixcblx0XHRcdFx0KCkgPT4gbmV3IExvZ2luU2V0dGluZ3NWaWV3ZXIobG9jYXRvci5jcmVkZW50aWFsc1Byb3ZpZGVyLCBpc0FwcCgpID8gbG9jYXRvci5zeXN0ZW1GYWNhZGUgOiBudWxsKSxcblx0XHRcdFx0dW5kZWZpbmVkLFxuXHRcdFx0KSxcblx0XHRcdG5ldyBTZXR0aW5nc0ZvbGRlcihcblx0XHRcdFx0KCkgPT4gXCJlbWFpbF9sYWJlbFwiLFxuXHRcdFx0XHQoKSA9PiBCb290SWNvbnMuTWFpbCxcblx0XHRcdFx0XCJtYWlsXCIsXG5cdFx0XHRcdCgpID0+IG5ldyBNYWlsU2V0dGluZ3NWaWV3ZXIoKSxcblx0XHRcdFx0dW5kZWZpbmVkLFxuXHRcdFx0KSxcblx0XHRcdG5ldyBTZXR0aW5nc0ZvbGRlcihcblx0XHRcdFx0KCkgPT4gXCJjb250YWN0c19sYWJlbFwiLFxuXHRcdFx0XHQoKSA9PiBCb290SWNvbnMuQ29udGFjdHMsXG5cdFx0XHRcdFwiY29udGFjdHNcIixcblx0XHRcdFx0KCkgPT4gbmV3IENvbnRhY3RzU2V0dGluZ3NWaWV3ZXIoKSxcblx0XHRcdFx0dW5kZWZpbmVkLFxuXHRcdFx0KSxcblx0XHRcdG5ldyBTZXR0aW5nc0ZvbGRlcihcblx0XHRcdFx0KCkgPT4gXCJhcHBlYXJhbmNlU2V0dGluZ3NfbGFiZWxcIixcblx0XHRcdFx0KCkgPT4gSWNvbnMuUGFsZXR0ZSxcblx0XHRcdFx0XCJhcHBlYXJhbmNlXCIsXG5cdFx0XHRcdCgpID0+IG5ldyBBcHBlYXJhbmNlU2V0dGluZ3NWaWV3ZXIoKSxcblx0XHRcdFx0dW5kZWZpbmVkLFxuXHRcdFx0KSxcblx0XHRcdG5ldyBTZXR0aW5nc0ZvbGRlcihcblx0XHRcdFx0KCkgPT4gXCJub3RpZmljYXRpb25TZXR0aW5nc19hY3Rpb25cIixcblx0XHRcdFx0KCkgPT4gSWNvbnMuQmVsbCxcblx0XHRcdFx0XCJub3RpZmljYXRpb25zXCIsXG5cdFx0XHRcdCgpID0+IG5ldyBOb3RpZmljYXRpb25TZXR0aW5nc1ZpZXdlcigpLFxuXHRcdFx0XHR1bmRlZmluZWQsXG5cdFx0XHQpLFxuXHRcdF1cblxuXHRcdGlmIChpc0Rlc2t0b3AoKSkge1xuXHRcdFx0dGhpcy5fdXNlckZvbGRlcnMucHVzaChcblx0XHRcdFx0bmV3IFNldHRpbmdzRm9sZGVyKFxuXHRcdFx0XHRcdCgpID0+IFwiZGVza3RvcF9sYWJlbFwiLFxuXHRcdFx0XHRcdCgpID0+IEljb25zLkRlc2t0b3AsXG5cdFx0XHRcdFx0XCJkZXNrdG9wXCIsXG5cdFx0XHRcdFx0KCkgPT4ge1xuXHRcdFx0XHRcdFx0Y29uc3QgZGVza3RvcFNldHRpbmdzVmlld2VyID0gbmV3IERlc2t0b3BTZXR0aW5nc1ZpZXdlcigpXG5cdFx0XHRcdFx0XHRsb2NhdG9yLmluaXRpYWxpemVkLnRoZW4oKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRsb2NhdG9yLm5hdGl2ZS5zZXRBcHBVcGRhdGVMaXN0ZW5lcigoKSA9PiBkZXNrdG9wU2V0dGluZ3NWaWV3ZXIub25BcHBVcGRhdGVBdmFpbGFibGUoKSlcblx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0XHRyZXR1cm4gZGVza3RvcFNldHRpbmdzVmlld2VyXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHR1bmRlZmluZWQsXG5cdFx0XHRcdCksXG5cdFx0XHQpXG5cdFx0fVxuXG5cdFx0bWFpbExvY2F0b3IubWFpbGJveE1vZGVsLmdldE1haWxib3hEZXRhaWxzKCkudGhlbigobWFpbGJveGVzKSA9PiB7XG5cdFx0XHR0aGlzLl91c2VyRm9sZGVycy5wdXNoKFxuXHRcdFx0XHRuZXcgU2V0dGluZ3NGb2xkZXIoXG5cdFx0XHRcdFx0KCkgPT4gXCJtYWlsSW1wb3J0U2V0dGluZ3NfbGFiZWxcIixcblx0XHRcdFx0XHQoKSA9PiBJY29ucy5JbXBvcnQsXG5cdFx0XHRcdFx0XCJtYWlsSW1wb3J0XCIsXG5cdFx0XHRcdFx0KCkgPT4ge1xuXHRcdFx0XHRcdFx0aWYgKGlzRGVza3RvcCgpKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBuZXcgRGVza3RvcE1haWxJbXBvcnRTZXR0aW5nc1ZpZXdlcigoKSA9PiBtYWlsTG9jYXRvci5nZXRNYWlsSW1wb3J0ZXIoKSlcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBuZXcgV2ViTWFpbEltcG9ydFNldHRpbmdzVmlld2VyKClcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdHVuZGVmaW5lZCxcblx0XHRcdFx0KSxcblx0XHRcdClcblx0XHR9KVxuXG5cdFx0dGhpcy5fdXNlckZvbGRlcnMucHVzaChcblx0XHRcdG5ldyBTZXR0aW5nc0ZvbGRlcihcblx0XHRcdFx0KCkgPT4gXCJtYWlsRXhwb3J0U2V0dGluZ3NfbGFiZWxcIixcblx0XHRcdFx0KCkgPT4gSWNvbnMuRXhwb3J0LFxuXHRcdFx0XHRcIm1haWxFeHBvcnRcIixcblx0XHRcdFx0KCkgPT4gbmV3IE1haWxFeHBvcnRWaWV3ZXIoKSxcblx0XHRcdFx0dW5kZWZpbmVkLFxuXHRcdFx0KSxcblx0XHQpXG5cblx0XHR0aGlzLl9hZG1pbkZvbGRlcnMgPSBbXVxuXHRcdHRoaXMuX3RlbXBsYXRlRm9sZGVycyA9IFtdXG5cblx0XHR0aGlzLl9tYWtlVGVtcGxhdGVGb2xkZXJzKCkudGhlbigoZm9sZGVycykgPT4ge1xuXHRcdFx0dGhpcy5fdGVtcGxhdGVGb2xkZXJzID0gZm9sZGVyc1xuXHRcdFx0bS5yZWRyYXcoKVxuXHRcdH0pXG5cblx0XHR0aGlzLl9kdW1teVRlbXBsYXRlRm9sZGVyID0gbmV3IFNldHRpbmdzRm9sZGVyPHZvaWQ+KFxuXHRcdFx0KCkgPT4gXCJ0ZW1wbGF0ZUdyb3VwRGVmYXVsdE5hbWVfbGFiZWxcIixcblx0XHRcdCgpID0+IEljb25zLkxpc3RBbHQsXG5cdFx0XHR7XG5cdFx0XHRcdGZvbGRlcjogXCJ0ZW1wbGF0ZXNcIixcblx0XHRcdFx0aWQ6IFwiaW5pdFwiLFxuXHRcdFx0fSxcblx0XHRcdCgpID0+IHtcblx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHR2aWV3OiAoKSA9PiB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gbShEdW1teVRlbXBsYXRlTGlzdFZpZXcpXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRlbnRpdHlFdmVudHNSZWNlaXZlZDogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKCksXG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0XHR1bmRlZmluZWQsXG5cdFx0KVxuXHRcdHRoaXMuX2tub3dsZWRnZUJhc2VGb2xkZXJzID0gW11cblxuXHRcdHRoaXMuX21ha2VLbm93bGVkZ2VCYXNlRm9sZGVycygpLnRoZW4oKGZvbGRlcnMpID0+IHtcblx0XHRcdHRoaXMuX2tub3dsZWRnZUJhc2VGb2xkZXJzID0gZm9sZGVyc1xuXHRcdFx0bS5yZWRyYXcoKVxuXHRcdH0pXG5cblx0XHR0aGlzLl9zZWxlY3RlZEZvbGRlciA9IHRoaXMuX3VzZXJGb2xkZXJzWzBdXG5cdFx0dGhpcy5fdGVtcGxhdGVJbnZpdGF0aW9ucyA9IG5ldyBSZWNlaXZlZEdyb3VwSW52aXRhdGlvbnNNb2RlbChHcm91cFR5cGUuVGVtcGxhdGUsIGxvY2F0b3IuZXZlbnRDb250cm9sbGVyLCBsb2NhdG9yLmVudGl0eUNsaWVudCwgdGhpcy5sb2dpbnMpXG5cblx0XHR0aGlzLl90ZW1wbGF0ZUludml0YXRpb25zLmludml0YXRpb25zLm1hcCgoKSA9PiBtLnJlZHJhdygpKVxuXG5cdFx0dGhpcy5fdGVtcGxhdGVJbnZpdGF0aW9ucy5pbml0KClcblxuXHRcdHRoaXMuX3NldHRpbmdzRm9sZGVyc0NvbHVtbiA9IG5ldyBWaWV3Q29sdW1uKFxuXHRcdFx0e1xuXHRcdFx0XHRvbmJlZm9yZXJlbW92ZTogKCkgPT4ge1xuXHRcdFx0XHRcdHRoaXMuX3RlbXBsYXRlSW52aXRhdGlvbnMuZGlzcG9zZSgpXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHZpZXc6ICgpID0+IHtcblx0XHRcdFx0XHRjb25zdCBbb3duVGVtcGxhdGVzLCBzaGFyZWRUZW1wbGF0ZXNdID0gcGFydGl0aW9uKHRoaXMuX3RlbXBsYXRlRm9sZGVycywgKGZvbGRlcikgPT5cblx0XHRcdFx0XHRcdGlzU2hhcmVkR3JvdXBPd25lcihmb2xkZXIuZGF0YS5ncm91cCwgdGhpcy5sb2dpbnMuZ2V0VXNlckNvbnRyb2xsZXIoKS51c2VyKSxcblx0XHRcdFx0XHQpXG5cblx0XHRcdFx0XHRjb25zdCB0ZW1wbGF0ZUludml0YXRpb25zID0gdGhpcy5fdGVtcGxhdGVJbnZpdGF0aW9ucy5pbnZpdGF0aW9ucygpXG5cblx0XHRcdFx0XHRyZXR1cm4gbShGb2xkZXJDb2x1bW5WaWV3LCB7XG5cdFx0XHRcdFx0XHRkcmF3ZXI6IHZub2RlLmF0dHJzLmRyYXdlckF0dHJzLFxuXHRcdFx0XHRcdFx0YnV0dG9uOiBudWxsLFxuXHRcdFx0XHRcdFx0Y29udGVudDogbShcIi5mbGV4LmZsZXgtZ3Jvdy5jb2xcIiwgW1xuXHRcdFx0XHRcdFx0XHRtKFxuXHRcdFx0XHRcdFx0XHRcdFNpZGViYXJTZWN0aW9uLFxuXHRcdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHRcdG5hbWU6IFwidXNlclNldHRpbmdzX2xhYmVsXCIsXG5cdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XHRbXG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLl9yZW5kZXJTaWRlYmFyU2VjdGlvbkNoaWxkcmVuKHRoaXMuX3VzZXJGb2xkZXJzKSxcblx0XHRcdFx0XHRcdFx0XHRcdG93blRlbXBsYXRlcy5sZW5ndGggPiAwXG5cdFx0XHRcdFx0XHRcdFx0XHRcdD8gb3duVGVtcGxhdGVzLm1hcCgoZm9sZGVyKSA9PiB0aGlzLl9yZW5kZXJUZW1wbGF0ZUZvbGRlclJvdyhmb2xkZXIpKVxuXHRcdFx0XHRcdFx0XHRcdFx0XHQ6IG0oU2V0dGluZ3NGb2xkZXJSb3csIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdG1haW5CdXR0b25BdHRyczogdGhpcy5fY3JlYXRlU2V0dGluZ3NGb2xkZXJOYXZCdXR0b24odGhpcy5fZHVtbXlUZW1wbGF0ZUZvbGRlciksXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCAgfSksXG5cdFx0XHRcdFx0XHRcdFx0XHRzaGFyZWRUZW1wbGF0ZXMubWFwKChmb2xkZXIpID0+IHRoaXMuX3JlbmRlclRlbXBsYXRlRm9sZGVyUm93KGZvbGRlcikpLFxuXHRcdFx0XHRcdFx0XHRcdF0sXG5cdFx0XHRcdFx0XHRcdCksXG5cdFx0XHRcdFx0XHRcdHRoaXMubG9naW5zLmlzVXNlckxvZ2dlZEluKCkgJiYgdGhpcy5sb2dpbnMuZ2V0VXNlckNvbnRyb2xsZXIoKS5pc0dsb2JhbEFkbWluKClcblx0XHRcdFx0XHRcdFx0XHQ/IG0oXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFNpZGViYXJTZWN0aW9uLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0bmFtZTogXCJhZG1pblNldHRpbmdzX2xhYmVsXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRoaXMuX3JlbmRlclNpZGViYXJTZWN0aW9uQ2hpbGRyZW4odGhpcy5fYWRtaW5Gb2xkZXJzKSxcblx0XHRcdFx0XHRcdFx0XHQgIClcblx0XHRcdFx0XHRcdFx0XHQ6IG51bGwsXG5cdFx0XHRcdFx0XHRcdHRlbXBsYXRlSW52aXRhdGlvbnMubGVuZ3RoID4gMFxuXHRcdFx0XHRcdFx0XHRcdD8gbShcblx0XHRcdFx0XHRcdFx0XHRcdFx0U2lkZWJhclNlY3Rpb24sXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRuYW1lOiBcInRlbXBsYXRlR3JvdXBJbnZpdGF0aW9uc19sYWJlbFwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRcdFx0XHR0ZW1wbGF0ZUludml0YXRpb25zLm1hcCgoaW52aXRhdGlvbikgPT4gdGhpcy5fcmVuZGVyVGVtcGxhdGVJbnZpdGF0aW9uRm9sZGVyUm93KGludml0YXRpb24pKSxcblx0XHRcdFx0XHRcdFx0XHQgIClcblx0XHRcdFx0XHRcdFx0XHQ6IG51bGwsXG5cdFx0XHRcdFx0XHRcdHRoaXMuX2tub3dsZWRnZUJhc2VGb2xkZXJzLmxlbmd0aCA+IDBcblx0XHRcdFx0XHRcdFx0XHQ/IG0oXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFNpZGViYXJTZWN0aW9uLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0bmFtZTogXCJrbm93bGVkZ2ViYXNlX2xhYmVsXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRoaXMuX3JlbmRlclNpZGViYXJTZWN0aW9uQ2hpbGRyZW4odGhpcy5fa25vd2xlZGdlQmFzZUZvbGRlcnMpLFxuXHRcdFx0XHRcdFx0XHRcdCAgKVxuXHRcdFx0XHRcdFx0XHRcdDogbnVsbCxcblx0XHRcdFx0XHRcdFx0dGhpcy5fYm90dG9tU2VjdGlvbigpLFxuXHRcdFx0XHRcdFx0XSksXG5cdFx0XHRcdFx0XHRhcmlhTGFiZWw6IFwic2V0dGluZ3NfbGFiZWxcIixcblx0XHRcdFx0XHR9KVxuXHRcdFx0XHR9LFxuXHRcdFx0fSxcblx0XHRcdENvbHVtblR5cGUuRm9yZWdyb3VuZCxcblx0XHRcdHtcblx0XHRcdFx0bWluV2lkdGg6IHNpemUuZmlyc3RfY29sX21pbl93aWR0aCxcblx0XHRcdFx0bWF4V2lkdGg6IHNpemUuZmlyc3RfY29sX21heF93aWR0aCxcblx0XHRcdFx0aGVhZGVyQ2VudGVyOiBcInNldHRpbmdzX2xhYmVsXCIsXG5cdFx0XHR9LFxuXHRcdClcblx0XHR0aGlzLl9zZXR0aW5nc0NvbHVtbiA9IG5ldyBWaWV3Q29sdW1uKFxuXHRcdFx0e1xuXHRcdFx0XHQvLyB0aGUgQ1NTIGltcHJvdmVzIHRoZSBzaXR1YXRpb24gb24gZGV2aWNlcyB3aXRoIG5vdGNoZXMgKG5vIGNvbnRyb2wgZWxlbWVudHNcblx0XHRcdFx0Ly8gYXJlIGNvbmNlYWxlZCksIGJ1dCB0aGVyZSdzIHN0aWxsIHJvb20gZm9yIGltcHJvdmVtZW50IGZvciBzY3JvbGxiYXJzXG5cdFx0XHRcdHZpZXc6ICgpID0+XG5cdFx0XHRcdFx0bShCYWNrZ3JvdW5kQ29sdW1uTGF5b3V0LCB7XG5cdFx0XHRcdFx0XHRiYWNrZ3JvdW5kQ29sb3I6IHRoZW1lLm5hdmlnYXRpb25fYmcsXG5cdFx0XHRcdFx0XHRjb2x1bW5MYXlvdXQ6IG0oXG5cdFx0XHRcdFx0XHRcdFwiLm1sci1zYWZlLWluc2V0LmZpbGwtYWJzb2x1dGUuY29udGVudC1iZ1wiLFxuXHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0Y2xhc3M6IHN0eWxlcy5pc1VzaW5nQm90dG9tTmF2aWdhdGlvbigpID8gXCJcIiA6IFwiYm9yZGVyLXJhZGl1cy10b3AtbGVmdC1iaWdcIixcblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0bSh0aGlzLl9nZXRDdXJyZW50Vmlld2VyKCkhKSxcblx0XHRcdFx0XHRcdCksXG5cdFx0XHRcdFx0XHRtb2JpbGVIZWFkZXI6ICgpID0+XG5cdFx0XHRcdFx0XHRcdG0oTW9iaWxlSGVhZGVyLCB7XG5cdFx0XHRcdFx0XHRcdFx0Li4udm5vZGUuYXR0cnMuaGVhZGVyLFxuXHRcdFx0XHRcdFx0XHRcdGJhY2tBY3Rpb246ICgpID0+IHRoaXMudmlld1NsaWRlci5mb2N1c1ByZXZpb3VzQ29sdW1uKCksXG5cdFx0XHRcdFx0XHRcdFx0Y29sdW1uVHlwZTogXCJmaXJzdFwiLFxuXHRcdFx0XHRcdFx0XHRcdHRpdGxlOiB0aGlzLl9zZWxlY3RlZEZvbGRlci5uYW1lKCksXG5cdFx0XHRcdFx0XHRcdFx0YWN0aW9uczogW10sXG5cdFx0XHRcdFx0XHRcdFx0cHJpbWFyeUFjdGlvbjogKCkgPT4gbnVsbCxcblx0XHRcdFx0XHRcdFx0fSksXG5cdFx0XHRcdFx0XHRkZXNrdG9wVG9vbGJhcjogKCkgPT4gbnVsbCxcblx0XHRcdFx0XHR9KSxcblx0XHRcdH0sXG5cdFx0XHRDb2x1bW5UeXBlLkJhY2tncm91bmQsXG5cdFx0XHR7XG5cdFx0XHRcdG1pbldpZHRoOiA0MDAsXG5cdFx0XHRcdG1heFdpZHRoOiA2MDAsXG5cdFx0XHRcdGhlYWRlckNlbnRlcjogdGhpcy5fc2VsZWN0ZWRGb2xkZXIubmFtZSxcblx0XHRcdH0sXG5cdFx0KVxuXHRcdHRoaXMuX3NldHRpbmdzRGV0YWlsc0NvbHVtbiA9IG5ldyBWaWV3Q29sdW1uKFxuXHRcdFx0e1xuXHRcdFx0XHR2aWV3OiAoKSA9PlxuXHRcdFx0XHRcdG0oQmFja2dyb3VuZENvbHVtbkxheW91dCwge1xuXHRcdFx0XHRcdFx0YmFja2dyb3VuZENvbG9yOiB0aGVtZS5uYXZpZ2F0aW9uX2JnLFxuXHRcdFx0XHRcdFx0Y29sdW1uTGF5b3V0OiBtKFwiLm1sci1zYWZlLWluc2V0LmZpbGwtYWJzb2x1dGUuY29udGVudC1iZ1wiLCB0aGlzLmRldGFpbHNWaWV3ZXIgPyB0aGlzLmRldGFpbHNWaWV3ZXIucmVuZGVyVmlldygpIDogbShcIlwiKSksXG5cdFx0XHRcdFx0XHRtb2JpbGVIZWFkZXI6ICgpID0+XG5cdFx0XHRcdFx0XHRcdG0oTW9iaWxlSGVhZGVyLCB7XG5cdFx0XHRcdFx0XHRcdFx0Li4udm5vZGUuYXR0cnMuaGVhZGVyLFxuXHRcdFx0XHRcdFx0XHRcdGJhY2tBY3Rpb246ICgpID0+IHRoaXMudmlld1NsaWRlci5mb2N1c1ByZXZpb3VzQ29sdW1uKCksXG5cdFx0XHRcdFx0XHRcdFx0Y29sdW1uVHlwZTogXCJvdGhlclwiLFxuXHRcdFx0XHRcdFx0XHRcdHRpdGxlOiB0aGlzLl9zZWxlY3RlZEZvbGRlci5uYW1lKCksXG5cdFx0XHRcdFx0XHRcdFx0YWN0aW9uczogW10sXG5cdFx0XHRcdFx0XHRcdFx0cHJpbWFyeUFjdGlvbjogKCkgPT4gbnVsbCxcblx0XHRcdFx0XHRcdFx0fSksXG5cdFx0XHRcdFx0XHRkZXNrdG9wVG9vbGJhcjogKCkgPT4gbnVsbCxcblx0XHRcdFx0XHR9KSxcblx0XHRcdH0sXG5cdFx0XHRDb2x1bW5UeXBlLkJhY2tncm91bmQsXG5cdFx0XHR7XG5cdFx0XHRcdG1pbldpZHRoOiA1MDAsXG5cdFx0XHRcdG1heFdpZHRoOiAyNDAwLFxuXHRcdFx0XHRoZWFkZXJDZW50ZXI6IFwic2V0dGluZ3NfbGFiZWxcIixcblx0XHRcdH0sXG5cdFx0KVxuXHRcdHRoaXMudmlld1NsaWRlciA9IG5ldyBWaWV3U2xpZGVyKFt0aGlzLl9zZXR0aW5nc0ZvbGRlcnNDb2x1bW4sIHRoaXMuX3NldHRpbmdzQ29sdW1uLCB0aGlzLl9zZXR0aW5nc0RldGFpbHNDb2x1bW5dKVxuXG5cdFx0dGhpcy5fY3VzdG9tRG9tYWlucyA9IG5ldyBMYXp5TG9hZGVkKGFzeW5jICgpID0+IHtcblx0XHRcdGNvbnN0IGRvbWFpbkluZm9zID0gYXdhaXQgZ2V0QXZhaWxhYmxlRG9tYWlucyh0aGlzLmxvZ2lucywgdHJ1ZSlcblx0XHRcdHJldHVybiBkb21haW5JbmZvcy5tYXAoKGluZm8pID0+IGluZm8uZG9tYWluKVxuXHRcdH0pXG5cblx0XHR0aGlzLl9jdXN0b21Eb21haW5zLmdldEFzeW5jKCkudGhlbigoKSA9PiBtLnJlZHJhdygpKVxuXG5cdFx0dGhpcy5fdGFyZ2V0Rm9sZGVyID0gbS5yb3V0ZS5wYXJhbShcImZvbGRlclwiKVxuXHRcdHRoaXMuX3RhcmdldFJvdXRlID0gbS5yb3V0ZS5nZXQoKVxuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyBwb3B1bGF0ZUFkbWluRm9sZGVycygpIHtcblx0XHRhd2FpdCB0aGlzLnVwZGF0ZVNob3dCdXNpbmVzc1NldHRpbmdzKClcblx0XHRhd2FpdCB0aGlzLnVwZGF0ZVNob3dBZmZpbGlhdGVTZXR0aW5ncygpXG5cdFx0Y29uc3QgY3VycmVudFBsYW5UeXBlID0gYXdhaXQgdGhpcy5sb2dpbnMuZ2V0VXNlckNvbnRyb2xsZXIoKS5nZXRQbGFuVHlwZSgpXG5cdFx0Y29uc3QgaXNMZWdhY3lQbGFuID0gTGVnYWN5UGxhbnMuaW5jbHVkZXMoY3VycmVudFBsYW5UeXBlKVxuXG5cdFx0aWYgKGF3YWl0IHRoaXMubG9naW5zLmdldFVzZXJDb250cm9sbGVyKCkuY2FuSGF2ZVVzZXJzKCkpIHtcblx0XHRcdHRoaXMuX2FkbWluRm9sZGVycy5wdXNoKFxuXHRcdFx0XHRuZXcgU2V0dGluZ3NGb2xkZXIoXG5cdFx0XHRcdFx0KCkgPT4gXCJhZG1pblVzZXJMaXN0X2FjdGlvblwiLFxuXHRcdFx0XHRcdCgpID0+IEJvb3RJY29ucy5Db250YWN0cyxcblx0XHRcdFx0XHRcInVzZXJzXCIsXG5cdFx0XHRcdFx0KCkgPT5cblx0XHRcdFx0XHRcdG5ldyBVc2VyTGlzdFZpZXcoXG5cdFx0XHRcdFx0XHRcdCh2aWV3ZXIpID0+IHRoaXMucmVwbGFjZURldGFpbHNWaWV3ZXIodmlld2VyKSxcblx0XHRcdFx0XHRcdFx0KCkgPT4gdGhpcy5mb2N1c1NldHRpbmdzRGV0YWlsc0NvbHVtbigpLFxuXHRcdFx0XHRcdFx0XHQoKSA9PiAhaXNBcHAoKSAmJiB0aGlzLl9jdXN0b21Eb21haW5zLmlzTG9hZGVkKCkgJiYgdGhpcy5fY3VzdG9tRG9tYWlucy5nZXRMb2FkZWQoKS5sZW5ndGggPiAwLFxuXHRcdFx0XHRcdFx0XHQoKSA9PiBzaG93VXNlckltcG9ydERpYWxvZyh0aGlzLl9jdXN0b21Eb21haW5zLmdldExvYWRlZCgpKSxcblx0XHRcdFx0XHRcdFx0KCkgPT4gZXhwb3J0VXNlckNzdihsb2NhdG9yLmVudGl0eUNsaWVudCwgdGhpcy5sb2dpbnMsIGxvY2F0b3IuZmlsZUNvbnRyb2xsZXIsIGxvY2F0b3IuY291bnRlckZhY2FkZSksXG5cdFx0XHRcdFx0XHQpLFxuXHRcdFx0XHRcdHVuZGVmaW5lZCxcblx0XHRcdFx0KSxcblx0XHRcdClcblx0XHRcdGlmICghdGhpcy5sb2dpbnMuaXNFbmFibGVkKEZlYXR1cmVUeXBlLldoaXRlbGFiZWxDaGlsZCkpIHtcblx0XHRcdFx0dGhpcy5fYWRtaW5Gb2xkZXJzLnB1c2goXG5cdFx0XHRcdFx0bmV3IFNldHRpbmdzRm9sZGVyKFxuXHRcdFx0XHRcdFx0KCkgPT4gXCJzaGFyZWRNYWlsYm94ZXNfbGFiZWxcIixcblx0XHRcdFx0XHRcdCgpID0+IEljb25zLlBlb3BsZSxcblx0XHRcdFx0XHRcdFwiZ3JvdXBzXCIsXG5cdFx0XHRcdFx0XHQoKSA9PlxuXHRcdFx0XHRcdFx0XHRuZXcgR3JvdXBMaXN0Vmlldyhcblx0XHRcdFx0XHRcdFx0XHQodmlld2VyKSA9PiB0aGlzLnJlcGxhY2VEZXRhaWxzVmlld2VyKHZpZXdlciksXG5cdFx0XHRcdFx0XHRcdFx0KCkgPT4gdGhpcy5mb2N1c1NldHRpbmdzRGV0YWlsc0NvbHVtbigpLFxuXHRcdFx0XHRcdFx0XHQpLFxuXHRcdFx0XHRcdFx0dW5kZWZpbmVkLFxuXHRcdFx0XHRcdCksXG5cdFx0XHRcdClcblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAodGhpcy5sb2dpbnMuZ2V0VXNlckNvbnRyb2xsZXIoKS5pc0dsb2JhbEFkbWluKCkpIHtcblx0XHRcdHRoaXMuX2FkbWluRm9sZGVycy5wdXNoKFxuXHRcdFx0XHRuZXcgU2V0dGluZ3NGb2xkZXIoXG5cdFx0XHRcdFx0KCkgPT4gXCJnbG9iYWxTZXR0aW5nc19sYWJlbFwiLFxuXHRcdFx0XHRcdCgpID0+IEJvb3RJY29ucy5TZXR0aW5ncyxcblx0XHRcdFx0XHRcImdsb2JhbFwiLFxuXHRcdFx0XHRcdCgpID0+IG5ldyBHbG9iYWxTZXR0aW5nc1ZpZXdlcigpLFxuXHRcdFx0XHRcdHVuZGVmaW5lZCxcblx0XHRcdFx0KSxcblx0XHRcdClcblxuXHRcdFx0aWYgKCF0aGlzLmxvZ2lucy5pc0VuYWJsZWQoRmVhdHVyZVR5cGUuV2hpdGVsYWJlbENoaWxkKSAmJiAhaXNJT1NBcHAoKSkge1xuXHRcdFx0XHR0aGlzLl9hZG1pbkZvbGRlcnMucHVzaChcblx0XHRcdFx0XHRuZXcgU2V0dGluZ3NGb2xkZXIoXG5cdFx0XHRcdFx0XHQoKSA9PiBcIndoaXRlbGFiZWxfbGFiZWxcIixcblx0XHRcdFx0XHRcdCgpID0+IEljb25zLldhbmQsXG5cdFx0XHRcdFx0XHRcIndoaXRlbGFiZWxcIixcblx0XHRcdFx0XHRcdCgpID0+IG5ldyBXaGl0ZWxhYmVsU2V0dGluZ3NWaWV3ZXIobG9jYXRvci5lbnRpdHlDbGllbnQsIHRoaXMubG9naW5zKSxcblx0XHRcdFx0XHRcdHVuZGVmaW5lZCxcblx0XHRcdFx0XHQpLFxuXHRcdFx0XHQpXG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKCF0aGlzLmxvZ2lucy5pc0VuYWJsZWQoRmVhdHVyZVR5cGUuV2hpdGVsYWJlbENoaWxkKSkge1xuXHRcdFx0aWYgKHRoaXMubG9naW5zLmdldFVzZXJDb250cm9sbGVyKCkuaXNHbG9iYWxBZG1pbigpKSB7XG5cdFx0XHRcdHRoaXMuX2FkbWluRm9sZGVycy5wdXNoKFxuXHRcdFx0XHRcdG5ldyBTZXR0aW5nc0ZvbGRlcjx2b2lkPihcblx0XHRcdFx0XHRcdCgpID0+IFwiYWRtaW5TdWJzY3JpcHRpb25fYWN0aW9uXCIsXG5cdFx0XHRcdFx0XHQoKSA9PiBCb290SWNvbnMuUHJlbWl1bSxcblx0XHRcdFx0XHRcdFwic3Vic2NyaXB0aW9uXCIsXG5cdFx0XHRcdFx0XHQoKSA9PiBuZXcgU3Vic2NyaXB0aW9uVmlld2VyKGN1cnJlbnRQbGFuVHlwZSwgaXNJT1NBcHAoKSA/IGxvY2F0b3IubW9iaWxlUGF5bWVudHNGYWNhZGUgOiBudWxsKSxcblx0XHRcdFx0XHRcdHVuZGVmaW5lZCxcblx0XHRcdFx0XHQpLFxuXHRcdFx0XHQpXG5cblx0XHRcdFx0dGhpcy5fYWRtaW5Gb2xkZXJzLnB1c2goXG5cdFx0XHRcdFx0bmV3IFNldHRpbmdzRm9sZGVyPHZvaWQ+KFxuXHRcdFx0XHRcdFx0KCkgPT4gXCJhZG1pblBheW1lbnRfYWN0aW9uXCIsXG5cdFx0XHRcdFx0XHQoKSA9PiBJY29ucy5DcmVkaXRDYXJkLFxuXHRcdFx0XHRcdFx0XCJpbnZvaWNlXCIsXG5cdFx0XHRcdFx0XHQoKSA9PiBuZXcgUGF5bWVudFZpZXdlcigpLFxuXHRcdFx0XHRcdFx0dW5kZWZpbmVkLFxuXHRcdFx0XHRcdCksXG5cdFx0XHRcdClcblxuXHRcdFx0XHR0aGlzLl9hZG1pbkZvbGRlcnMucHVzaChcblx0XHRcdFx0XHRuZXcgU2V0dGluZ3NGb2xkZXIoXG5cdFx0XHRcdFx0XHQoKSA9PiBcInJlZmVycmFsU2V0dGluZ3NfbGFiZWxcIixcblx0XHRcdFx0XHRcdCgpID0+IEJvb3RJY29ucy5TaGFyZSxcblx0XHRcdFx0XHRcdFwicmVmZXJyYWxcIixcblx0XHRcdFx0XHRcdCgpID0+IG5ldyBSZWZlcnJhbFNldHRpbmdzVmlld2VyKCksXG5cdFx0XHRcdFx0XHR1bmRlZmluZWQsXG5cdFx0XHRcdFx0KS5zZXRJc1Zpc2libGVIYW5kbGVyKCgpID0+ICF0aGlzLnNob3dCdXNpbmVzc1NldHRpbmdzKCkpLFxuXHRcdFx0XHQpXG5cblx0XHRcdFx0dGhpcy5fYWRtaW5Gb2xkZXJzLnB1c2goXG5cdFx0XHRcdFx0bmV3IFNldHRpbmdzRm9sZGVyKFxuXHRcdFx0XHRcdFx0KCkgPT4gXCJhZmZpbGlhdGVTZXR0aW5nc19sYWJlbFwiLFxuXHRcdFx0XHRcdFx0KCkgPT4gQm9vdEljb25zLlNoYXJlLFxuXHRcdFx0XHRcdFx0XCJhZmZpbGlhdGVcIixcblx0XHRcdFx0XHRcdCgpID0+XG5cdFx0XHRcdFx0XHRcdG5ldyBBZmZpbGlhdGVTZXR0aW5nc1ZpZXdlcihcblx0XHRcdFx0XHRcdFx0XHQoKSA9PiB0aGlzLnZpZXdTbGlkZXIuZm9jdXNlZENvbHVtbiA9PT0gdGhpcy5fc2V0dGluZ3NEZXRhaWxzQ29sdW1uLFxuXHRcdFx0XHRcdFx0XHRcdCgpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRcdGlmICh0aGlzLnZpZXdTbGlkZXIuZm9jdXNlZENvbHVtbiAhPT0gdGhpcy5fc2V0dGluZ3NEZXRhaWxzQ29sdW1uKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucmVwbGFjZURldGFpbHNWaWV3ZXIobmV3IEFmZmlsaWF0ZUtwaXNWaWV3ZXIoKSlcblx0XHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5mb2N1c1NldHRpbmdzRGV0YWlsc0NvbHVtbigpXG5cdFx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnJlcGxhY2VEZXRhaWxzVmlld2VyKG51bGwpXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRoaXMudmlld1NsaWRlci5mb2N1cyh0aGlzLl9zZXR0aW5nc0NvbHVtbilcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHQpLFxuXHRcdFx0XHRcdFx0dW5kZWZpbmVkLFxuXHRcdFx0XHRcdCkuc2V0SXNWaXNpYmxlSGFuZGxlcigoKSA9PiB0aGlzLnNob3dBZmZpbGlhdGVTZXR0aW5ncyksXG5cdFx0XHRcdClcblx0XHRcdH1cblx0XHR9XG5cdFx0bS5yZWRyYXcoKVxuXHR9XG5cblx0cHJpdmF0ZSByZXBsYWNlRGV0YWlsc1ZpZXdlcih2aWV3ZXI6IFVwZGF0YWJsZVNldHRpbmdzRGV0YWlsc1ZpZXdlciB8IG51bGwpOiBVcGRhdGFibGVTZXR0aW5nc0RldGFpbHNWaWV3ZXIgfCBudWxsIHtcblx0XHRyZXR1cm4gKHRoaXMuZGV0YWlsc1ZpZXdlciA9IHZpZXdlcilcblx0fVxuXG5cdG9uY3JlYXRlKHZub2RlOiBWbm9kZTxTZXR0aW5nc1ZpZXdBdHRycz4pIHtcblx0XHRsb2NhdG9yLmV2ZW50Q29udHJvbGxlci5hZGRFbnRpdHlMaXN0ZW5lcih0aGlzLmVudGl0eUxpc3RlbmVyKVxuXHRcdHRoaXMucG9wdWxhdGVBZG1pbkZvbGRlcnMoKS50aGVuKCgpID0+IHtcblx0XHRcdC8vIFdlIGhhdmUgdG8gd2FpdCBmb3IgdGhlIGZvbGRlcnMgdG8gYmUgaW5pdGlhbGl6ZWQgYmVmb3JlIHNldHRpbmcgdGhlIFVSTCxcblx0XHRcdC8vIG90aGVyd2lzZSB3ZSB3b24ndCBmaW5kIHRoZSByZXF1ZXN0ZWQgZm9sZGVyIGFuZCB3aWxsIGp1c3QgcGljayB0aGUgZGVmYXVsdCBmb2xkZXJcblx0XHRcdGNvbnN0IHN0aWxsQXREZWZhdWx0VXJsID0gbS5yb3V0ZS5nZXQoKSA9PT0gdGhpcy5fdXNlckZvbGRlcnNbMF0udXJsXG5cdFx0XHRpZiAoc3RpbGxBdERlZmF1bHRVcmwpIHtcblx0XHRcdFx0dGhpcy5vbk5ld1VybCh7IGZvbGRlcjogdGhpcy5fdGFyZ2V0Rm9sZGVyIH0sIHRoaXMuX3RhcmdldFJvdXRlKVxuXHRcdFx0fVxuXHRcdH0pXG5cdH1cblxuXHRvbnJlbW92ZSh2bm9kZTogVm5vZGVET008U2V0dGluZ3NWaWV3QXR0cnM+KSB7XG5cdFx0bG9jYXRvci5ldmVudENvbnRyb2xsZXIucmVtb3ZlRW50aXR5TGlzdGVuZXIodGhpcy5lbnRpdHlMaXN0ZW5lcilcblx0fVxuXG5cdHByaXZhdGUgZW50aXR5TGlzdGVuZXIgPSAodXBkYXRlczogRW50aXR5VXBkYXRlRGF0YVtdLCBldmVudE93bmVyR3JvdXBJZDogSWQpID0+IHtcblx0XHRyZXR1cm4gdGhpcy5lbnRpdHlFdmVudHNSZWNlaXZlZCh1cGRhdGVzLCBldmVudE93bmVyR3JvdXBJZClcblx0fVxuXG5cdHZpZXcoeyBhdHRycyB9OiBWbm9kZTxTZXR0aW5nc1ZpZXdBdHRycz4pOiBDaGlsZHJlbiB7XG5cdFx0cmV0dXJuIG0oXG5cdFx0XHRcIiNzZXR0aW5ncy5tYWluLXZpZXdcIixcblx0XHRcdG0odGhpcy52aWV3U2xpZGVyLCB7XG5cdFx0XHRcdGhlYWRlcjogbShIZWFkZXIsIHtcblx0XHRcdFx0XHQuLi5hdHRycy5oZWFkZXIsXG5cdFx0XHRcdH0pLFxuXHRcdFx0XHRib3R0b21OYXY6IG0oQm90dG9tTmF2KSxcblx0XHRcdH0pLFxuXHRcdClcblx0fVxuXG5cdF9jcmVhdGVTZXR0aW5nc0ZvbGRlck5hdkJ1dHRvbihmb2xkZXI6IFNldHRpbmdzRm9sZGVyPHVua25vd24+KTogTmF2QnV0dG9uQXR0cnMge1xuXHRcdHJldHVybiB7XG5cdFx0XHRsYWJlbDogZm9sZGVyLm5hbWUoKSxcblx0XHRcdGljb246IGZvbGRlci5pY29uLFxuXHRcdFx0aHJlZjogZm9sZGVyLnVybCxcblx0XHRcdGNvbG9yczogTmF2QnV0dG9uQ29sb3IuTmF2LFxuXHRcdFx0Y2xpY2s6ICgpID0+IHRoaXMudmlld1NsaWRlci5mb2N1cyh0aGlzLl9zZXR0aW5nc0NvbHVtbiksXG5cdFx0XHRwZXJzaXN0ZW50QmFja2dyb3VuZDogdHJ1ZSxcblx0XHR9XG5cdH1cblxuXHRfcmVuZGVyVGVtcGxhdGVGb2xkZXJSb3coZm9sZGVyOiBTZXR0aW5nc0ZvbGRlcjxUZW1wbGF0ZUdyb3VwSW5zdGFuY2U+KTogQ2hpbGRyZW4ge1xuXHRcdGNvbnN0IGluc3RhbmNlID0gZm9sZGVyLmRhdGFcblx0XHRjb25zdCBpc0dyb3VwT3duZXIgPSBpc1NoYXJlZEdyb3VwT3duZXIoaW5zdGFuY2UuZ3JvdXAsIGdldEV0SWQodGhpcy5sb2dpbnMuZ2V0VXNlckNvbnRyb2xsZXIoKS51c2VyKSlcblx0XHRyZXR1cm4gbShTZXR0aW5nc0ZvbGRlclJvdywge1xuXHRcdFx0bWFpbkJ1dHRvbkF0dHJzOiB0aGlzLl9jcmVhdGVTZXR0aW5nc0ZvbGRlck5hdkJ1dHRvbihmb2xkZXIpLFxuXHRcdFx0ZXh0cmFCdXR0b246IG0oXG5cdFx0XHRcdEljb25CdXR0b24sXG5cdFx0XHRcdGNyZWF0ZU1vcmVBY3Rpb25CdXR0b25BdHRycygoKSA9PiBbXG5cdFx0XHRcdFx0aXNHcm91cE93bmVyXG5cdFx0XHRcdFx0XHQ/IHtcblx0XHRcdFx0XHRcdFx0XHRsYWJlbDogXCJkZWxldGVfYWN0aW9uXCIsXG5cdFx0XHRcdFx0XHRcdFx0Y2xpY2s6ICgpID0+IHRoaXMuX2RlbGV0ZVRlbXBsYXRlR3JvdXAoZm9sZGVyLmRhdGEpLFxuXHRcdFx0XHRcdFx0XHRcdGljb246IEljb25zLlRyYXNoLFxuXHRcdFx0XHRcdFx0ICB9XG5cdFx0XHRcdFx0XHQ6IHtcblx0XHRcdFx0XHRcdFx0XHRsYWJlbDogXCJsZWF2ZUdyb3VwX2FjdGlvblwiLFxuXHRcdFx0XHRcdFx0XHRcdGNsaWNrOiAoKSA9PiB0aGlzLl9sZWF2ZVRlbXBsYXRlR3JvdXAoZm9sZGVyLmRhdGEpLFxuXHRcdFx0XHRcdFx0XHRcdGljb246IEljb25zLlRyYXNoLFxuXHRcdFx0XHRcdFx0ICB9LFxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdGxhYmVsOiBcInNoYXJpbmdfbGFiZWxcIixcblx0XHRcdFx0XHRcdGNsaWNrOiAoKSA9PiBzaG93R3JvdXBTaGFyaW5nRGlhbG9nKGZvbGRlci5kYXRhLmdyb3VwSW5mbywgdHJ1ZSksXG5cdFx0XHRcdFx0XHRpY29uOiBJY29ucy5Db250YWN0SW1wb3J0LFxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0bGFiZWw6IFwicmVuYW1lX2FjdGlvblwiLFxuXHRcdFx0XHRcdFx0Y2xpY2s6ICgpID0+IHNob3dSZW5hbWVUZW1wbGF0ZUxpc3REaWFsb2coZm9sZGVyLmRhdGEpLFxuXHRcdFx0XHRcdFx0aWNvbjogSWNvbnMuRWRpdCxcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRdKSxcblx0XHRcdCksXG5cdFx0fSlcblx0fVxuXG5cdHByaXZhdGUgX2xlYXZlVGVtcGxhdGVHcm91cCh0ZW1wbGF0ZUluZm86IFRlbXBsYXRlR3JvdXBJbnN0YW5jZSkge1xuXHRcdHJldHVybiBnZXRDb25maXJtYXRpb24oXG5cdFx0XHRsYW5nLmdldFRyYW5zbGF0aW9uKFwiY29uZmlybUxlYXZlU2hhcmVkR3JvdXBfbXNnXCIsIHtcblx0XHRcdFx0XCJ7Z3JvdXBOYW1lfVwiOiBnZXRTaGFyZWRHcm91cE5hbWUodGVtcGxhdGVJbmZvLmdyb3VwSW5mbywgdGhpcy5sb2dpbnMuZ2V0VXNlckNvbnRyb2xsZXIoKSwgZmFsc2UpLFxuXHRcdFx0fSksXG5cdFx0KS5jb25maXJtZWQoKCkgPT4gbG9jYXRvci5ncm91cE1hbmFnZW1lbnRGYWNhZGUucmVtb3ZlVXNlckZyb21Hcm91cChnZXRFdElkKHRoaXMubG9naW5zLmdldFVzZXJDb250cm9sbGVyKCkudXNlciksIHRlbXBsYXRlSW5mby5ncm91cEluZm8uZ3JvdXApKVxuXHR9XG5cblx0cHJpdmF0ZSBfZGVsZXRlVGVtcGxhdGVHcm91cCh0ZW1wbGF0ZUluZm86IFRlbXBsYXRlR3JvdXBJbnN0YW5jZSkge1xuXHRcdHJldHVybiBnZXRDb25maXJtYXRpb24oXCJjb25maXJtRGVsZXRlVGVtcGxhdGVHcm91cF9tc2dcIikuY29uZmlybWVkKCgpID0+XG5cdFx0XHRzaG93UHJvZ3Jlc3NEaWFsb2coXG5cdFx0XHRcdFwicGxlYXNlV2FpdF9tc2dcIixcblx0XHRcdFx0bG9jYXRvci5zZXJ2aWNlRXhlY3V0b3IuZGVsZXRlKFxuXHRcdFx0XHRcdFRlbXBsYXRlR3JvdXBTZXJ2aWNlLFxuXHRcdFx0XHRcdGNyZWF0ZVVzZXJBcmVhR3JvdXBEZWxldGVEYXRhKHtcblx0XHRcdFx0XHRcdGdyb3VwOiB0ZW1wbGF0ZUluZm8uZ3JvdXBJbmZvLmdyb3VwLFxuXHRcdFx0XHRcdH0pLFxuXHRcdFx0XHQpLFxuXHRcdFx0KSxcblx0XHQpXG5cdH1cblxuXHRfcmVuZGVyVGVtcGxhdGVJbnZpdGF0aW9uRm9sZGVyUm93KGludml0YXRpb246IFJlY2VpdmVkR3JvdXBJbnZpdGF0aW9uKTogQ2hpbGRyZW4ge1xuXHRcdHJldHVybiBtKEdyb3VwSW52aXRhdGlvbkZvbGRlclJvdywge1xuXHRcdFx0aW52aXRhdGlvbjogaW52aXRhdGlvbixcblx0XHRcdGljb246IEJvb3RJY29ucy5NYWlsLFxuXHRcdH0pXG5cdH1cblxuXHRfcmVuZGVyU2lkZWJhclNlY3Rpb25DaGlsZHJlbihmb2xkZXJzOiBTZXR0aW5nc0ZvbGRlcjx1bmtub3duPltdKTogQ2hpbGRyZW4ge1xuXHRcdHJldHVybiBtKFxuXHRcdFx0XCJcIixcblx0XHRcdGZvbGRlcnNcblx0XHRcdFx0LmZpbHRlcigoZm9sZGVyKSA9PiBmb2xkZXIuaXNWaXNpYmxlKCkpXG5cdFx0XHRcdC5tYXAoKGZvbGRlcikgPT4ge1xuXHRcdFx0XHRcdGNvbnN0IGJ1dHRvbkF0dHJzID0gdGhpcy5fY3JlYXRlU2V0dGluZ3NGb2xkZXJOYXZCdXR0b24oZm9sZGVyKVxuXG5cdFx0XHRcdFx0cmV0dXJuIG0oU2V0dGluZ3NGb2xkZXJSb3csIHtcblx0XHRcdFx0XHRcdG1haW5CdXR0b25BdHRyczogYnV0dG9uQXR0cnMsXG5cdFx0XHRcdFx0fSlcblx0XHRcdFx0fSksXG5cdFx0KVxuXHR9XG5cblx0X2dldEN1cnJlbnRWaWV3ZXIoKTogVXBkYXRhYmxlU2V0dGluZ3NWaWV3ZXIgfCBudWxsIHtcblx0XHRpZiAoIXRoaXMuX2N1cnJlbnRWaWV3ZXIpIHtcblx0XHRcdHRoaXMuZGV0YWlsc1ZpZXdlciA9IG51bGxcblx0XHRcdHRoaXMuX2N1cnJlbnRWaWV3ZXIgPSB0aGlzLl9zZWxlY3RlZEZvbGRlci52aWV3ZXJDcmVhdG9yKClcblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcy5fY3VycmVudFZpZXdlclxuXHR9XG5cblx0LyoqXG5cdCAqIE5vdGlmaWVzIHRoZSBjdXJyZW50IHZpZXcgYWJvdXQgY2hhbmdlcyBvZiB0aGUgdXJsIHdpdGhpbiBpdHMgc2NvcGUuXG5cdCAqL1xuXHRvbk5ld1VybChhcmdzOiBSZWNvcmQ8c3RyaW5nLCBhbnk+LCByZXF1ZXN0ZWRQYXRoOiBzdHJpbmcpIHtcblx0XHRpZiAoIWFyZ3MuZm9sZGVyKSB7XG5cdFx0XHR0aGlzLl9zZXRVcmwodGhpcy5fdXNlckZvbGRlcnNbMF0udXJsKVxuXHRcdH0gZWxzZSBpZiAoYXJncy5mb2xkZXIgfHwgIW0ucm91dGUuZ2V0KCkuc3RhcnRzV2l0aChcIi9zZXR0aW5nc1wiKSkge1xuXHRcdFx0Ly8gZW5zdXJlIHRoYXQgY3VycmVudCB2aWV3ZXIgd2lsbCBiZSByZWluaXRpYWxpemVkXG5cdFx0XHRjb25zdCBmb2xkZXIgPSB0aGlzLl9hbGxTZXR0aW5nc0ZvbGRlcnMoKS5maW5kKChmb2xkZXIpID0+IGZvbGRlci51cmwgPT09IHJlcXVlc3RlZFBhdGgpXG5cblx0XHRcdGlmICghZm9sZGVyKSB7XG5cdFx0XHRcdHRoaXMuX3NldFVybCh0aGlzLl91c2VyRm9sZGVyc1swXS51cmwpXG5cdFx0XHR9IGVsc2UgaWYgKHRoaXMuX3NlbGVjdGVkRm9sZGVyLnBhdGggPT09IGZvbGRlci5wYXRoKSB7XG5cdFx0XHRcdC8vIGZvbGRlciBwYXRoIGhhcyBub3QgY2hhbmdlZFxuXHRcdFx0XHR0aGlzLl9zZWxlY3RlZEZvbGRlciA9IGZvbGRlciAvLyBpbnN0YW5jZSBvZiBTZXR0aW5nc0ZvbGRlciBtaWdodCBoYXZlIGJlZW4gY2hhbmdlZCBpbiBtZW1iZXJzaGlwIHVwZGF0ZSwgc28gcmVwbGFjZSB0aGlzIGluc3RhbmNlXG5cblx0XHRcdFx0bS5yZWRyYXcoKVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gZm9sZGVyIHBhdGggaGFzIGNoYW5nZWRcblx0XHRcdFx0Ly8gdG8gYXZvaWQgbWlzbGVhZGluZyBpbmZvcm1hdGlvbiwgc2V0IHRoZSB1cmwgdG8gdGhlIGZvbGRlcidzIHVybCwgc28gdGhlIGJyb3dzZXIgdXJsXG5cdFx0XHRcdC8vIGlzIGNoYW5nZWQgdG8gY29ycmVjdGx5IHJlcHJlc2VudHMgdGhlIGRpc3BsYXllZCBjb250ZW50XG5cdFx0XHRcdHRoaXMuX3NldFVybChmb2xkZXIudXJsKVxuXHRcdFx0XHR0aGlzLl9zZWxlY3RlZEZvbGRlciA9IGZvbGRlclxuXHRcdFx0XHR0aGlzLl9jdXJyZW50Vmlld2VyID0gbnVsbFxuXHRcdFx0XHR0aGlzLmRldGFpbHNWaWV3ZXIgPSBudWxsXG5cblx0XHRcdFx0Ly8gbWFrZSBzdXJlIHRoZSBjdXJyZW50Vmlld2VyIGlzIGF2YWlsYWJsZVxuXHRcdFx0XHR0aGlzLl9nZXRDdXJyZW50Vmlld2VyKClcblxuXHRcdFx0XHRtLnJlZHJhdygpXG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0X2dldFVzZXJPd25lZFRlbXBsYXRlU2V0dGluZ3NGb2xkZXIoKTogU2V0dGluZ3NGb2xkZXI8dW5rbm93bj4ge1xuXHRcdHJldHVybiB0aGlzLl90ZW1wbGF0ZUZvbGRlcnMuZmluZCgoZm9sZGVyKSA9PiBpc1NoYXJlZEdyb3VwT3duZXIoZm9sZGVyLmRhdGEuZ3JvdXAsIHRoaXMubG9naW5zLmdldFVzZXJDb250cm9sbGVyKCkudXNlcikpIHx8IHRoaXMuX2R1bW15VGVtcGxhdGVGb2xkZXJcblx0fVxuXG5cdF9hbGxTZXR0aW5nc0ZvbGRlcnMoKTogUmVhZG9ubHlBcnJheTxTZXR0aW5nc0ZvbGRlcjx1bmtub3duPj4ge1xuXHRcdGNvbnN0IGhhc093blRlbXBsYXRlcyA9IHRoaXMuX3RlbXBsYXRlRm9sZGVycy5zb21lKChmb2xkZXIpID0+IGlzU2hhcmVkR3JvdXBPd25lcihmb2xkZXIuZGF0YS5ncm91cCwgdGhpcy5sb2dpbnMuZ2V0VXNlckNvbnRyb2xsZXIoKS51c2VyKSlcblxuXHRcdHJldHVybiBbXG5cdFx0XHQuLi50aGlzLl91c2VyRm9sZGVycyxcblx0XHRcdC4uLnRoaXMuX2FkbWluRm9sZGVycyxcblx0XHRcdC4uLighaGFzT3duVGVtcGxhdGVzID8gW3RoaXMuX2R1bW15VGVtcGxhdGVGb2xkZXJdIDogW10pLFxuXHRcdFx0Li4udGhpcy5fdGVtcGxhdGVGb2xkZXJzLFxuXHRcdFx0Li4udGhpcy5fa25vd2xlZGdlQmFzZUZvbGRlcnMsXG5cdFx0XVxuXHR9XG5cblx0X3NldFVybCh1cmw6IHN0cmluZykge1xuXHRcdG0ucm91dGUuc2V0KHVybCArIGxvY2F0aW9uLmhhc2gpXG5cdH1cblxuXHRfaXNHbG9iYWxBZG1pbih1c2VyOiBVc2VyKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIHVzZXIubWVtYmVyc2hpcHMuc29tZSgobSkgPT4gbS5ncm91cFR5cGUgPT09IEdyb3VwVHlwZS5BZG1pbilcblx0fVxuXG5cdGZvY3VzU2V0dGluZ3NEZXRhaWxzQ29sdW1uKCkge1xuXHRcdHZvaWQgdGhpcy52aWV3U2xpZGVyLmZvY3VzKHRoaXMuX3NldHRpbmdzRGV0YWlsc0NvbHVtbilcblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgdXBkYXRlU2hvd0J1c2luZXNzU2V0dGluZ3MoKSB7XG5cdFx0dGhpcy5zaG93QnVzaW5lc3NTZXR0aW5ncygoYXdhaXQgdGhpcy5sb2dpbnMuZ2V0VXNlckNvbnRyb2xsZXIoKS5sb2FkQ3VzdG9tZXIoKSkuYnVzaW5lc3NVc2UgPT09IHRydWUpXG5cdH1cblxuXHRhc3luYyBlbnRpdHlFdmVudHNSZWNlaXZlZDxUPih1cGRhdGVzOiBSZWFkb25seUFycmF5PEVudGl0eVVwZGF0ZURhdGE+LCBldmVudE93bmVyR3JvdXBJZDogSWQpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRmb3IgKGNvbnN0IHVwZGF0ZSBvZiB1cGRhdGVzKSB7XG5cdFx0XHRpZiAoaXNVcGRhdGVGb3JUeXBlUmVmKEN1c3RvbWVyVHlwZVJlZiwgdXBkYXRlKSkge1xuXHRcdFx0XHRhd2FpdCB0aGlzLnVwZGF0ZVNob3dCdXNpbmVzc1NldHRpbmdzKClcblx0XHRcdH0gZWxzZSBpZiAodGhpcy5sb2dpbnMuZ2V0VXNlckNvbnRyb2xsZXIoKS5pc1VwZGF0ZUZvckxvZ2dlZEluVXNlckluc3RhbmNlKHVwZGF0ZSwgZXZlbnRPd25lckdyb3VwSWQpKSB7XG5cdFx0XHRcdGNvbnN0IHVzZXIgPSB0aGlzLmxvZ2lucy5nZXRVc2VyQ29udHJvbGxlcigpLnVzZXJcblxuXHRcdFx0XHQvLyB0aGUgdXNlciBhZG1pbiBzdGF0dXMgbWlnaHQgaGF2ZSBjaGFuZ2VkXG5cdFx0XHRcdGlmICghdGhpcy5faXNHbG9iYWxBZG1pbih1c2VyKSAmJiB0aGlzLl9jdXJyZW50Vmlld2VyICYmIHRoaXMuX2FkbWluRm9sZGVycy5zb21lKChmKSA9PiBmLmlzQWN0aXZlKCkpKSB7XG5cdFx0XHRcdFx0dGhpcy5fc2V0VXJsKHRoaXMuX3VzZXJGb2xkZXJzWzBdLnVybClcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIHRlbXBsYXRlIGdyb3VwIG1lbWJlcnNoaXBzIG1heSBoYXZlIGNoYW5nZWRcblx0XHRcdFx0aWYgKHRoaXMuX3RlbXBsYXRlRm9sZGVycy5sZW5ndGggIT09IHRoaXMubG9naW5zLmdldFVzZXJDb250cm9sbGVyKCkuZ2V0VGVtcGxhdGVNZW1iZXJzaGlwcygpLmxlbmd0aCkge1xuXHRcdFx0XHRcdGNvbnN0IHRlbXBsYXRlcyA9IGF3YWl0IHRoaXMucmVsb2FkVGVtcGxhdGVEYXRhKClcblx0XHRcdFx0XHRjb25zdCBjdXJyZW50Um91dGUgPSBtLnJvdXRlLmdldCgpXG5cblx0XHRcdFx0XHRpZiAoY3VycmVudFJvdXRlLnN0YXJ0c1dpdGgoU0VUVElOR1NfUFJFRklYKSkge1xuXHRcdFx0XHRcdFx0Y29uc3QgZm9sZGVyID0gbS5yb3V0ZS5wYXJhbShcImZvbGRlclwiKVxuXHRcdFx0XHRcdFx0aWYgKGZvbGRlciA9PT0gXCJ0ZW1wbGF0ZXNcIikge1xuXHRcdFx0XHRcdFx0XHRjb25zdCB0ZW1wbGF0ZUxpc3RJZCA9IG0ucm91dGUucGFyYW0oXCJpZFwiKVxuXHRcdFx0XHRcdFx0XHQvLyBXZSBtaWdodCBoYXZlIGxvc3QgdGhlIG1lbWJlcnNoaXAgb24gdGhlIHRlbXBsYXRlIGxpc3Rcblx0XHRcdFx0XHRcdFx0Y29uc3QgaGF2ZU9wZW5lZEZvbGRlciA9IHRlbXBsYXRlcy5zb21lKCh0KSA9PiB0LmlkID09PSB0ZW1wbGF0ZUxpc3RJZClcblxuXHRcdFx0XHRcdFx0XHQvLyBXaGVuIHVzZXIgZmlyc3QgY3JlYXRlcyBhIHRlbXBsYXRlIGdyb3VwIGZyb20gdGhlIGR1bW15IGxpc3QsIHdlIG5lZWQgdG8gc3dpdGNoIHRoZW0gdG9cblx0XHRcdFx0XHRcdFx0Ly8gdGhlIHZpZXdlciBmb3IgdGhlaXIgbmV3bHkgY3JlYXRlZCBsaXN0LlxuXHRcdFx0XHRcdFx0XHRpZiAodGhpcy5fZHVtbXlUZW1wbGF0ZUZvbGRlci51cmwgfHwgIWhhdmVPcGVuZWRGb2xkZXIpIHtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLl9zZXRVcmwodGhpcy5fZ2V0VXNlck93bmVkVGVtcGxhdGVTZXR0aW5nc0ZvbGRlcigpLnVybClcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRtLnJlZHJhdygpXG5cdFx0XHR9IGVsc2UgaWYgKGlzVXBkYXRlRm9yVHlwZVJlZihDdXN0b21lckluZm9UeXBlUmVmLCB1cGRhdGUpKSB7XG5cdFx0XHRcdHRoaXMuX2N1c3RvbURvbWFpbnMucmVzZXQoKVxuXHRcdFx0XHR0aGlzLl9hZG1pbkZvbGRlcnMubGVuZ3RoID0gMFxuXHRcdFx0XHQvLyBXaGVuIHN3aXRjaGluZyBhIHBsYW4gd2UgaGlkZS9zaG93IGNlcnRhaW4gYWRtaW4gc2V0dGluZ3MuXG5cdFx0XHRcdGF3YWl0IHRoaXMucG9wdWxhdGVBZG1pbkZvbGRlcnMoKVxuXG5cdFx0XHRcdGF3YWl0IHRoaXMuX2N1c3RvbURvbWFpbnMuZ2V0QXN5bmMoKVxuXHRcdFx0XHRtLnJlZHJhdygpXG5cdFx0XHR9IGVsc2UgaWYgKGlzVXBkYXRlRm9yVHlwZVJlZihVc2VyU2V0dGluZ3NHcm91cFJvb3RUeXBlUmVmLCB1cGRhdGUpKSB7XG5cdFx0XHRcdGF3YWl0IHRoaXMucmVsb2FkVGVtcGxhdGVEYXRhKClcblx0XHRcdFx0bS5yZWRyYXcoKVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGF3YWl0IHRoaXMuX2N1cnJlbnRWaWV3ZXI/LmVudGl0eUV2ZW50c1JlY2VpdmVkKHVwZGF0ZXMpXG5cblx0XHRhd2FpdCB0aGlzLmRldGFpbHNWaWV3ZXI/LmVudGl0eUV2ZW50c1JlY2VpdmVkKHVwZGF0ZXMpXG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIHJlbG9hZFRlbXBsYXRlRGF0YSgpOiBQcm9taXNlPFNldHRpbmdzRm9sZGVyPFRlbXBsYXRlR3JvdXBJbnN0YW5jZT5bXT4ge1xuXHRcdGNvbnN0IFt0ZW1wbGF0ZXMsIGtub3dsZWRnZUJhc2VzXSA9IGF3YWl0IFByb21pc2UuYWxsKFt0aGlzLl9tYWtlVGVtcGxhdGVGb2xkZXJzKCksIHRoaXMuX21ha2VLbm93bGVkZ2VCYXNlRm9sZGVycygpXSlcblx0XHR0aGlzLl90ZW1wbGF0ZUZvbGRlcnMgPSB0ZW1wbGF0ZXNcblx0XHR0aGlzLl9rbm93bGVkZ2VCYXNlRm9sZGVycyA9IGtub3dsZWRnZUJhc2VzXG5cdFx0cmV0dXJuIHRlbXBsYXRlc1xuXHR9XG5cblx0Z2V0Vmlld1NsaWRlcigpOiBWaWV3U2xpZGVyIHwgbnVsbCB7XG5cdFx0cmV0dXJuIHRoaXMudmlld1NsaWRlclxuXHR9XG5cblx0X2JvdHRvbVNlY3Rpb24oKTogQ2hpbGRyZW4ge1xuXHRcdGNvbnN0IGlzRmlyc3RQYXJ0eURvbWFpbiA9IGxvY2F0b3IuZG9tYWluQ29uZmlnUHJvdmlkZXIoKS5nZXRDdXJyZW50RG9tYWluQ29uZmlnKCkuZmlyc3RQYXJ0eURvbWFpblxuXG5cdFx0cmV0dXJuIG0oXCIucGIucHQtbC5mbGV4LW5vLXNocmluay5mbGV4LmNvbC5qdXN0aWZ5LWVuZC5nYXAtdnBhZFwiLCBbXG5cdFx0XHQvLyBTdXBwb3J0IGJ1dHRvblxuXHRcdFx0bShCYXNlQnV0dG9uLCB7XG5cdFx0XHRcdGNsYXNzOiBcImZsYXNoIGZsZXgganVzdGlmeS1jZW50ZXIgY2VudGVyLXZlcnRpY2FsbHkgcHQtcyBwYi1zIHBsci0ybCBib3JkZXItcmFkaXVzXCIsXG5cdFx0XHRcdHN0eWxlOiB7XG5cdFx0XHRcdFx0bWFyZ2luSW5saW5lOiBcImF1dG9cIixcblx0XHRcdFx0XHRib3JkZXI6IGAxcHggc29saWQgJHt0aGVtZS5uYXZpZ2F0aW9uX2J1dHRvbn1gLFxuXHRcdFx0XHRcdGNvbG9yOiB0aGVtZS5uYXZpZ2F0aW9uX2J1dHRvbixcblx0XHRcdFx0fSxcblx0XHRcdFx0bGFiZWw6IFwic3VwcG9ydE1lbnVfbGFiZWxcIixcblx0XHRcdFx0dGV4dDogbShcIi5wbC1tXCIsIGxhbmcuZ2V0VHJhbnNsYXRpb24oXCJzdXBwb3J0TWVudV9sYWJlbFwiKS50ZXh0KSxcblx0XHRcdFx0aWNvbjogbShJY29uLCB7XG5cdFx0XHRcdFx0aWNvbjogSWNvbnMuU3BlZWNoQnViYmxlRmlsbCxcblx0XHRcdFx0XHRzaXplOiBJY29uU2l6ZS5NZWRpdW0sXG5cdFx0XHRcdFx0Y2xhc3M6IFwiY2VudGVyLWhcIixcblx0XHRcdFx0XHRjb250YWluZXI6IFwiZGl2XCIsXG5cdFx0XHRcdFx0c3R5bGU6IHsgZmlsbDogdGhlbWUubmF2aWdhdGlvbl9idXR0b24gfSxcblx0XHRcdFx0fSksXG5cdFx0XHRcdG9uY2xpY2s6ICgpID0+IHZvaWQgc2hvd1N1cHBvcnREaWFsb2cobG9jYXRvci5sb2dpbnMpLFxuXHRcdFx0fSksXG5cdFx0XHQvLyBBYm91dCBidXR0b25cblx0XHRcdGlzRmlyc3RQYXJ0eURvbWFpbiA/IHRoaXMuX2Fib3V0VGhpc1NvZnR3YXJlTGluaygpIDogbnVsbCxcblx0XHRdKVxuXHR9XG5cblx0X2Fib3V0VGhpc1NvZnR3YXJlTGluaygpOiBDaGlsZHJlbiB7XG5cdFx0Y29uc3QgbGFiZWwgPSBsYW5nLmdldChcImFib3V0X2xhYmVsXCIpXG5cdFx0Y29uc3QgdmVyc2lvbkxhYmVsID0gYFR1dGEgdiR7ZW52LnZlcnNpb25OdW1iZXJ9YFxuXHRcdHJldHVybiBtKFxuXHRcdFx0XCJidXR0b24udGV4dC1jZW50ZXIuc21hbGwubm8tdGV4dC1kZWNvcmF0aW9uXCIsXG5cdFx0XHR7XG5cdFx0XHRcdHN0eWxlOiB7XG5cdFx0XHRcdFx0YmFja2dyb3VuZENvbG9yOiBcInRyYW5zcGFyZW50XCIsXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGhyZWY6IFwiI1wiLFxuXHRcdFx0XHRcImFyaWEtbGFiZWxcIjogbGFiZWwsXG5cdFx0XHRcdFwiYXJpYS1kZXNjcmlwdGlvblwiOiB2ZXJzaW9uTGFiZWwsXG5cdFx0XHRcdFwiYXJpYS1oYXNwb3B1cFwiOiBcImRpYWxvZ1wiLFxuXHRcdFx0XHRvbmNsaWNrOiAoKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy52aWV3U2xpZGVyLmZvY3VzTmV4dENvbHVtbigpXG5cdFx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHRcdFx0XHRjb25zdCBkaWFsb2cgPSBEaWFsb2cuc2hvd0FjdGlvbkRpYWxvZyh7XG5cdFx0XHRcdFx0XHRcdHRpdGxlOiBcImFib3V0X2xhYmVsXCIsXG5cdFx0XHRcdFx0XHRcdGNoaWxkOiAoKSA9PlxuXHRcdFx0XHRcdFx0XHRcdG0oQWJvdXREaWFsb2csIHtcblx0XHRcdFx0XHRcdFx0XHRcdG9uU2hvd1NldHVwV2l6YXJkOiAoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGRpYWxvZy5jbG9zZSgpXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGxvY2F0b3Iuc2hvd1NldHVwV2l6YXJkKClcblx0XHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0fSksXG5cdFx0XHRcdFx0XHRcdGFsbG93T2tXaXRoUmV0dXJuOiB0cnVlLFxuXHRcdFx0XHRcdFx0XHRva0FjdGlvbjogKGRpYWxvZzogRGlhbG9nKSA9PiBkaWFsb2cuY2xvc2UoKSxcblx0XHRcdFx0XHRcdFx0YWxsb3dDYW5jZWw6IGZhbHNlLFxuXHRcdFx0XHRcdFx0fSlcblx0XHRcdFx0XHR9LCAyMDApXG5cdFx0XHRcdH0sXG5cdFx0XHR9LFxuXHRcdFx0W1xuXHRcdFx0XHRtKFwiXCIsIHZlcnNpb25MYWJlbCksXG5cdFx0XHRcdG0oXG5cdFx0XHRcdFx0XCIuYlwiLFxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdHN0eWxlOiB7XG5cdFx0XHRcdFx0XHRcdGNvbG9yOiB0aGVtZS5uYXZpZ2F0aW9uX2J1dHRvbl9zZWxlY3RlZCxcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRsYWJlbCxcblx0XHRcdFx0KSxcblx0XHRcdF0sXG5cdFx0KVxuXHR9XG5cblx0YXN5bmMgX21ha2VUZW1wbGF0ZUZvbGRlcnMoKTogUHJvbWlzZTxBcnJheTxTZXR0aW5nc0ZvbGRlcjxUZW1wbGF0ZUdyb3VwSW5zdGFuY2U+Pj4ge1xuXHRcdGNvbnN0IHVzZXJDb250cm9sbGVyID0gdGhpcy5sb2dpbnMuZ2V0VXNlckNvbnRyb2xsZXIoKVxuXHRcdGNvbnN0IHRlbXBsYXRlTWVtYmVyc2hpcHMgPSB1c2VyQ29udHJvbGxlci5nZXRUZW1wbGF0ZU1lbWJlcnNoaXBzKClcblx0XHRyZXR1cm4gcHJvbWlzZU1hcChhd2FpdCBsb2FkVGVtcGxhdGVHcm91cEluc3RhbmNlcyh0ZW1wbGF0ZU1lbWJlcnNoaXBzLCBsb2NhdG9yLmVudGl0eUNsaWVudCksIChncm91cEluc3RhbmNlKSA9PiB7XG5cdFx0XHRjb25zdCBzaGFyZWRHcm91cE5hbWUgPSBnZXROdWxsYWJsZVNoYXJlZEdyb3VwTmFtZShncm91cEluc3RhbmNlLmdyb3VwSW5mbywgdXNlckNvbnRyb2xsZXIudXNlclNldHRpbmdzR3JvdXBSb290LCB0cnVlKVxuXHRcdFx0cmV0dXJuIG5ldyBTZXR0aW5nc0ZvbGRlcihcblx0XHRcdFx0KCkgPT4gKHNoYXJlZEdyb3VwTmFtZSA/IGxhbmcubWFrZVRyYW5zbGF0aW9uKFwidGVtcGxhdGVHcm91cERlZmF1bHROYW1lX2xhYmVsXCIsIHNoYXJlZEdyb3VwTmFtZSkgOiBcInRlbXBsYXRlR3JvdXBEZWZhdWx0TmFtZV9sYWJlbFwiKSxcblx0XHRcdFx0KCkgPT4gSWNvbnMuTGlzdEFsdCxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGZvbGRlcjogXCJ0ZW1wbGF0ZXNcIixcblx0XHRcdFx0XHRpZDogZ2V0RXRJZChncm91cEluc3RhbmNlLmdyb3VwKSxcblx0XHRcdFx0fSxcblx0XHRcdFx0KCkgPT5cblx0XHRcdFx0XHRuZXcgVGVtcGxhdGVMaXN0Vmlldyhcblx0XHRcdFx0XHRcdGdyb3VwSW5zdGFuY2UsXG5cdFx0XHRcdFx0XHRsb2NhdG9yLmVudGl0eUNsaWVudCxcblx0XHRcdFx0XHRcdHRoaXMubG9naW5zLFxuXHRcdFx0XHRcdFx0KHZpZXdlcikgPT4gdGhpcy5yZXBsYWNlRGV0YWlsc1ZpZXdlcih2aWV3ZXIpLFxuXHRcdFx0XHRcdFx0KCkgPT4gdGhpcy5mb2N1c1NldHRpbmdzRGV0YWlsc0NvbHVtbigpLFxuXHRcdFx0XHRcdCksXG5cdFx0XHRcdGdyb3VwSW5zdGFuY2UsXG5cdFx0XHQpXG5cdFx0fSlcblx0fVxuXG5cdGFzeW5jIF9tYWtlS25vd2xlZGdlQmFzZUZvbGRlcnMoKTogUHJvbWlzZTxBcnJheTxTZXR0aW5nc0ZvbGRlcjx2b2lkPj4+IHtcblx0XHRjb25zdCB1c2VyQ29udHJvbGxlciA9IHRoaXMubG9naW5zLmdldFVzZXJDb250cm9sbGVyKClcblx0XHRjb25zdCBjdXN0b21lciA9IGF3YWl0IHVzZXJDb250cm9sbGVyLmxvYWRDdXN0b21lcigpXG5cblx0XHRpZiAoaXNDdXN0b21pemF0aW9uRW5hYmxlZEZvckN1c3RvbWVyKGN1c3RvbWVyLCBGZWF0dXJlVHlwZS5Lbm93bGVkZ2VCYXNlKSkge1xuXHRcdFx0Y29uc3QgdGVtcGxhdGVNZW1iZXJzaGlwcyA9ICh0aGlzLmxvZ2lucy5nZXRVc2VyQ29udHJvbGxlcigpICYmIHRoaXMubG9naW5zLmdldFVzZXJDb250cm9sbGVyKCkuZ2V0VGVtcGxhdGVNZW1iZXJzaGlwcygpKSB8fCBbXVxuXHRcdFx0cmV0dXJuIHByb21pc2VNYXAoYXdhaXQgbG9hZFRlbXBsYXRlR3JvdXBJbnN0YW5jZXModGVtcGxhdGVNZW1iZXJzaGlwcywgbG9jYXRvci5lbnRpdHlDbGllbnQpLCAoZ3JvdXBJbnN0YW5jZSkgPT4ge1xuXHRcdFx0XHRjb25zdCBzaGFyZWRHcm91cE5hbWUgPSBnZXROdWxsYWJsZVNoYXJlZEdyb3VwTmFtZShncm91cEluc3RhbmNlLmdyb3VwSW5mbywgdXNlckNvbnRyb2xsZXIudXNlclNldHRpbmdzR3JvdXBSb290LCB0cnVlKVxuXHRcdFx0XHRyZXR1cm4gbmV3IFNldHRpbmdzRm9sZGVyKFxuXHRcdFx0XHRcdCgpID0+IChzaGFyZWRHcm91cE5hbWUgPyBsYW5nLm1ha2VUcmFuc2xhdGlvbihcInRlbXBsYXRlR3JvdXBEZWZhdWx0TmFtZV9sYWJlbFwiLCBzaGFyZWRHcm91cE5hbWUpIDogXCJ0ZW1wbGF0ZUdyb3VwRGVmYXVsdE5hbWVfbGFiZWxcIiksXG5cdFx0XHRcdFx0KCkgPT4gSWNvbnMuQm9vayxcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRmb2xkZXI6IFwia25vd2xlZGdlYmFzZVwiLFxuXHRcdFx0XHRcdFx0aWQ6IGdldEV0SWQoZ3JvdXBJbnN0YW5jZS5ncm91cCksXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHQoKSA9PlxuXHRcdFx0XHRcdFx0bmV3IEtub3dsZWRnZUJhc2VMaXN0Vmlldyhcblx0XHRcdFx0XHRcdFx0bG9jYXRvci5lbnRpdHlDbGllbnQsXG5cdFx0XHRcdFx0XHRcdHRoaXMubG9naW5zLFxuXHRcdFx0XHRcdFx0XHRncm91cEluc3RhbmNlLmdyb3VwUm9vdCxcblx0XHRcdFx0XHRcdFx0Z3JvdXBJbnN0YW5jZS5ncm91cCxcblx0XHRcdFx0XHRcdFx0KHZpZXdlcikgPT4gdGhpcy5yZXBsYWNlRGV0YWlsc1ZpZXdlcih2aWV3ZXIpLFxuXHRcdFx0XHRcdFx0XHQoKSA9PiB0aGlzLmZvY3VzU2V0dGluZ3NEZXRhaWxzQ29sdW1uKCksXG5cdFx0XHRcdFx0XHQpLFxuXHRcdFx0XHRcdHVuZGVmaW5lZCxcblx0XHRcdFx0KVxuXHRcdFx0fSlcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmV0dXJuIFtdXG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyB1cGRhdGVTaG93QWZmaWxpYXRlU2V0dGluZ3MoKSB7XG5cdFx0Y29uc3QgY3VzdG9tZXIgPSBhd2FpdCB0aGlzLmxvZ2lucy5nZXRVc2VyQ29udHJvbGxlcigpLmxvYWRDdXN0b21lcigpXG5cdFx0dGhpcy5zaG93QWZmaWxpYXRlU2V0dGluZ3MgPSBpc0N1c3RvbWl6YXRpb25FbmFibGVkRm9yQ3VzdG9tZXIoY3VzdG9tZXIsIEZlYXR1cmVUeXBlLkFmZmlsaWF0ZVBhcnRuZXIpXG5cdH1cbn1cblxuZnVuY3Rpb24gc2hvd1JlbmFtZVRlbXBsYXRlTGlzdERpYWxvZyhpbnN0YW5jZTogVGVtcGxhdGVHcm91cEluc3RhbmNlKSB7XG5cdGNvbnN0IGxvZ2lucyA9IGxvY2F0b3IubG9naW5zXG5cdGNvbnN0IG5hbWUgPSBzdHJlYW0oZ2V0U2hhcmVkR3JvdXBOYW1lKGluc3RhbmNlLmdyb3VwSW5mbywgbG9naW5zLmdldFVzZXJDb250cm9sbGVyKCksIHRydWUpKVxuXHREaWFsb2cuc2hvd0FjdGlvbkRpYWxvZyh7XG5cdFx0dGl0bGU6IFwicmVuYW1lVGVtcGxhdGVMaXN0X2xhYmVsXCIsXG5cdFx0YWxsb3dPa1dpdGhSZXR1cm46IHRydWUsXG5cdFx0Y2hpbGQ6IHtcblx0XHRcdHZpZXc6ICgpID0+XG5cdFx0XHRcdG0oVGV4dEZpZWxkLCB7XG5cdFx0XHRcdFx0dmFsdWU6IG5hbWUoKSxcblx0XHRcdFx0XHRvbmlucHV0OiBuYW1lLFxuXHRcdFx0XHRcdGxhYmVsOiBcInRlbXBsYXRlR3JvdXBOYW1lX2xhYmVsXCIsXG5cdFx0XHRcdH0pLFxuXHRcdH0sXG5cdFx0b2tBY3Rpb246IChkaWFsb2c6IERpYWxvZykgPT4ge1xuXHRcdFx0ZGlhbG9nLmNsb3NlKClcblx0XHRcdGNvbnN0IHsgdXNlclNldHRpbmdzR3JvdXBSb290IH0gPSBsb2dpbnMuZ2V0VXNlckNvbnRyb2xsZXIoKVxuXHRcdFx0Y29uc3QgZXhpc3RpbmdHcm91cFNldHRpbmdzID0gdXNlclNldHRpbmdzR3JvdXBSb290Lmdyb3VwU2V0dGluZ3MuZmluZCgoZ2MpID0+IGdjLmdyb3VwID09PSBpbnN0YW5jZS5ncm91cEluZm8uZ3JvdXApXG5cdFx0XHRjb25zdCBuZXdOYW1lID0gbmFtZSgpXG5cblx0XHRcdGlmIChleGlzdGluZ0dyb3VwU2V0dGluZ3MpIHtcblx0XHRcdFx0ZXhpc3RpbmdHcm91cFNldHRpbmdzLm5hbWUgPSBuZXdOYW1lXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjb25zdCBuZXdTZXR0aW5ncyA9IGNyZWF0ZUdyb3VwU2V0dGluZ3Moe1xuXHRcdFx0XHRcdGdyb3VwOiBnZXRFdElkKGluc3RhbmNlLmdyb3VwKSxcblx0XHRcdFx0XHRjb2xvcjogXCJcIixcblx0XHRcdFx0XHRuYW1lOiBuZXdOYW1lLFxuXHRcdFx0XHRcdGRlZmF1bHRBbGFybXNMaXN0OiBbXSxcblx0XHRcdFx0XHRzb3VyY2VVcmw6IG51bGwsXG5cdFx0XHRcdH0pXG5cdFx0XHRcdGxvZ2lucy5nZXRVc2VyQ29udHJvbGxlcigpLnVzZXJTZXR0aW5nc0dyb3VwUm9vdC5ncm91cFNldHRpbmdzLnB1c2gobmV3U2V0dGluZ3MpXG5cdFx0XHR9XG5cblx0XHRcdGxvY2F0b3IuZW50aXR5Q2xpZW50LnVwZGF0ZSh1c2VyU2V0dGluZ3NHcm91cFJvb3QpLnRoZW4oKCkgPT4ge1xuXHRcdFx0XHRpZiAoaXNTaGFyZWRHcm91cE93bmVyKGluc3RhbmNlLmdyb3VwLCBsb2dpbnMuZ2V0VXNlckNvbnRyb2xsZXIoKS51c2VyKSkge1xuXHRcdFx0XHRcdGluc3RhbmNlLmdyb3VwSW5mby5uYW1lID0gbmV3TmFtZVxuXHRcdFx0XHRcdGxvY2F0b3IuZW50aXR5Q2xpZW50LnVwZGF0ZShpbnN0YW5jZS5ncm91cEluZm8pXG5cdFx0XHRcdH1cblx0XHRcdH0pXG5cdFx0fSxcblx0fSlcbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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