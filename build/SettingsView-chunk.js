import { __toESM } from "./chunk-chunk.js";
import "./dist-chunk.js";
import { ProgrammingError } from "./ProgrammingError-chunk.js";
import { assertMainOrNode, isApp, isBrowser, isDesktop, isIOSApp, isOfflineStorageAvailable, isWebClient } from "./Env-chunk.js";
import { AppType, client } from "./ClientDetector-chunk.js";
import { mithril_default } from "./mithril-chunk.js";
import { DAY_IN_MILLIS, LazyLoaded, NBSP, assert, assertNotNull, asyncFind, capitalizeFirstLetter, clear, clone, contains, debounceStart, defer, delay, downcast, filterInt, first, getDayShifted, getFirstOrThrow, getStartOfDay, getStartOfNextDay, incrementDate, isEmpty, mapNullable, memoized, neverNull, noOp, ofClass, pMap, pad, partition, renderCsv, stringToUtf8Uint8Array, uint8ArrayToBase64, utf8Uint8ArrayToString } from "./dist2-chunk.js";
import { getThemeCustomizations } from "./WhitelabelCustomizations-chunk.js";
import { InfoLink, getLanguage, lang, languageByCode, languageCodeToTag, languageNative } from "./LanguageViewModel-chunk.js";
import { styles } from "./styles-chunk.js";
import { expandHexTriplet, getLightOrDarkTutaLogo, isValidColorCode, theme, themeOptions } from "./theme-chunk.js";
import { ALLOWED_IMAGE_FORMATS, BookingItemFeatureType, CertificateState, CertificateType, CloseEventBusOption, Const, CounterType, CustomDomainCheckResult, CustomDomainTypeCount, CustomDomainValidationResult, DEFAULT_FREE_MAIL_ADDRESS_SIGNUP_DOMAIN, DnsRecordType, DnsRecordValidation, EmailSignatureType, FeatureType, GroupType, HighestTierPlans, ImportStatus, InboxRuleType, Keys, LegacyPlans, MAX_LOGO_SIZE, NewPaidPlans, OFFLINE_STORAGE_DEFAULT_TIME_RANGE_DAYS, OUT_OF_OFFICE_SUBJECT_PREFIX, OperationType, OutOfOfficeNotificationMessageType, PlanType, PushServiceType, ReportMovedMailsType, SecondFactorType, SessionState, ShareCapability, SpamRuleFieldType, SpamRuleType, TUTA_MAIL_ADDRESS_DOMAINS, TimeFormat, WeekStart, assertEnumValue, getSpamRuleField } from "./TutanotaConstants-chunk.js";
import { keyManager } from "./KeyManager-chunk.js";
import "./WindowFacade-chunk.js";
import "./RootView-chunk.js";
import { px, size } from "./size-chunk.js";
import "./HtmlUtils-chunk.js";
import { DateTime } from "./luxon-chunk.js";
import { GENERATED_MAX_ID, GENERATED_MIN_ID, elementIdPart, generatedIdToTimestamp, getElementId, getEtId, isSameId, listIdPart, sortCompareByReverseId, timestampToGeneratedId } from "./EntityUtils-chunk.js";
import "./TypeModels-chunk.js";
import { EmailTemplateTypeRef, KnowledgeBaseEntryTypeRef, MailFolderTypeRef, MailboxPropertiesTypeRef, OutOfOfficeNotificationTypeRef, TemplateGroupRootTypeRef, TutanotaPropertiesTypeRef, UserSettingsGroupRootTypeRef, createGroupSettings, createMail, createMailAddress, createOutOfOfficeNotification, createOutOfOfficeNotificationMessage, createUserAreaGroupDeleteData } from "./TypeRefs-chunk.js";
import "./CommonCalendarUtils-chunk.js";
import "./TypeModels2-chunk.js";
import { AccountingInfoTypeRef, AuditLogEntryTypeRef, BookingTypeRef, CustomerInfoTypeRef, CustomerPropertiesTypeRef, CustomerServerPropertiesTypeRef, CustomerTypeRef, GroupInfoTypeRef, GroupMemberTypeRef, GroupTypeRef, PushIdentifierTypeRef, RejectedSenderTypeRef, SecondFactorTypeRef, SessionTypeRef, UserTypeRef, WhitelabelConfigTypeRef, createCustomDomainCheckGetIn, createDnsRecord, createEmailSenderListElement, createGroupInfo, createSecondFactor, createStringWrapper, createSurveyData } from "./TypeRefs2-chunk.js";
import "./ParserCombinator-chunk.js";
import { getStartOfTheWeekOffsetForUser } from "./CalendarUtils-chunk.js";
import "./ImportExportUtils-chunk.js";
import { isDomainName, isMailAddress } from "./FormatValidator-chunk.js";
import { require_stream } from "./stream-chunk.js";
import { ListAutoSelectBehavior, deviceConfig } from "./DeviceConfig-chunk.js";
import "./Logger-chunk.js";
import "./ErrorHandler-chunk.js";
import "./EntityFunctions-chunk.js";
import "./TypeModels3-chunk.js";
import "./ModelInfo-chunk.js";
import "./ErrorUtils-chunk.js";
import { BadRequestError, InvalidDataError, LimitReachedError, LockedError, NotAuthorizedError, NotFoundError, PayloadTooLargeError, PreconditionFailedError } from "./RestError-chunk.js";
import "./SetupMultipleError-chunk.js";
import "./OutOfSyncError-chunk.js";
import "./CancelledError-chunk.js";
import "./EventQueue-chunk.js";
import "./EntityRestClient-chunk.js";
import "./SuspensionError-chunk.js";
import "./LoginIncompleteError-chunk.js";
import "./CryptoError-chunk.js";
import "./RecipientsNotFoundError-chunk.js";
import "./DbError-chunk.js";
import { IndexingNotSupportedError } from "./QuotaExceededError-chunk.js";
import "./DeviceStorageUnavailableError-chunk.js";
import "./MailBodyTooLargeError-chunk.js";
import "./ImportError-chunk.js";
import "./WebauthnError-chunk.js";
import "./PermissionError-chunk.js";
import "./MessageDispatcher-chunk.js";
import "./WorkerProxy-chunk.js";
import { isUpdateFor, isUpdateForTypeRef } from "./EntityUpdateUtils-chunk.js";
import "./SessionType-chunk.js";
import { BrandingDomainService, CustomDomainCheckService } from "./Services-chunk.js";
import "./EntityClient-chunk.js";
import "./dist3-chunk.js";
import "./PageContextLoginListener-chunk.js";
import "./RestClient-chunk.js";
import "./BirthdayUtils-chunk.js";
import { TemplateGroupService } from "./Services2-chunk.js";
import "./FolderSystem-chunk.js";
import { compareGroupInfos, getEnabledMailAddressesForGroupInfo, getGroupInfoDisplayName, getUserGroupMemberships } from "./GroupUtils-chunk.js";
import "./MailChecks-chunk.js";
import { Button, ButtonType } from "./Button-chunk.js";
import { Icons } from "./Icons-chunk.js";
import "./DialogHeaderBar-chunk.js";
import "./CountryList-chunk.js";
import { Autocapitalize, Autocomplete, Dialog, DialogType, DropDownSelector, TextField, TextFieldType, attachDropdown, createDropdown, createMoreActionButtonAttrs, getConfirmation, ifAllowedTutaLinks } from "./Dialog-chunk.js";
import { BootIcons, Icon, IconSize, progressIcon } from "./Icon-chunk.js";
import "./AriaUtils-chunk.js";
import { ButtonSize, IconButton } from "./IconButton-chunk.js";
import "./CalendarEventWhenModel-chunk.js";
import { formatDate, formatDateTime, formatDateTimeFromYesterdayOn, formatDateWithMonth, formatShortMonthYear2Digit, formatStorageSize, getHourCycle } from "./Formatter-chunk.js";
import "./ProgressMonitor-chunk.js";
import "./Notifications-chunk.js";
import "./CalendarFacade-chunk.js";
import "./CalendarModel-chunk.js";
import { TemplateGroupPreconditionFailedReason, getDefaultGroupName, getSharedGroupName, hasCapabilityOnGroup, isSharedGroupOwner } from "./GroupUtils2-chunk.js";
import { locator } from "./CommonLocator-chunk.js";
import { UserError } from "./UserError-chunk.js";
import { getCleanedMailAddress, getDomainPart } from "./MailAddressParser-chunk.js";
import { createDataFile } from "./BlobUtils-chunk.js";
import "./FileUtils-chunk.js";
import { showProgressDialog } from "./ProgressDialog-chunk.js";
import { getMailAddressDisplayText, getMailboxName, insertInlineImageB64ClickHandler, showFileChooser } from "./SharedMailUtils-chunk.js";
import "./PasswordUtils-chunk.js";
import "./Recipient-chunk.js";
import "./ContactUtils-chunk.js";
import "./RecipientsModel-chunk.js";
import "./CalendarGuiUtils-chunk.js";
import { UpgradeRequiredError } from "./UpgradeRequiredError-chunk.js";
import "./ColorPickerModel-chunk.js";
import "./BannerButton-chunk.js";
import { showNotAvailableForFreeDialog, showPlanUpgradeRequiredDialog } from "./SubscriptionDialogs-chunk.js";
import { ExternalLink } from "./ExternalLink-chunk.js";
import { ToggleButton } from "./ToggleButton-chunk.js";
import { DatePicker } from "./DatePicker-chunk.js";
import "./MailRecipientsTextField-chunk.js";
import { ColumnEmptyMessageBox } from "./ColumnEmptyMessageBox-chunk.js";
import "./DateParser-chunk.js";
import { NavButton, NavButtonColor, isNavButtonSelected, isSelectedPrefix } from "./NavButton-chunk.js";
import "./InfoBanner-chunk.js";
import { showSnackBar } from "./SnackBar-chunk.js";
import "./Credentials-chunk.js";
import "./NotificationOverlay-chunk.js";
import { Checkbox } from "./Checkbox-chunk.js";
import { ExpanderButton, ExpanderPanel } from "./Expander-chunk.js";
import { copyToClipboard } from "./ClipboardUtils-chunk.js";
import "./Services4-chunk.js";
import "./BubbleButton-chunk.js";
import { clientInfoString, getLogAttachments } from "./ErrorReporter-chunk.js";
import { PasswordField } from "./PasswordField-chunk.js";
import { showRequestPasswordDialog } from "./PasswordRequestDialog-chunk.js";
import { showUserError } from "./ErrorHandlerImpl-chunk.js";
import "./InAppRatingDialog-chunk.js";
import { List, MultiselectMode, listSelectionKeyboardShortcuts, onlySingleSelection } from "./List-chunk.js";
import { SelectableRowContainer, setVisibility } from "./SelectableRowContainer-chunk.js";
import { SETTINGS_PREFIX } from "./RouteChange-chunk.js";
import "./ListModel-chunk.js";
import { ListElementListModel } from "./ListElementListModel-chunk.js";
import { getCustomMailDomains, getWhitelabelDomainInfo, isCustomizationEnabledForCustomer } from "./CustomerUtils-chunk.js";
import { BackgroundColumnLayout, ColumnType, FolderColumnView, Header, MobileHeader, SidebarSection, ViewColumn, ViewSlider } from "./MobileHeader-chunk.js";
import { ProgressBar, ProgressBarType, UiImportStatus, appIdToLoginUrl, getInboxRuleTypeName, mailLocator, validateWebauthnDisplayName } from "./mailLocator-chunk.js";
import { BaseTopLevelView } from "./LoginScreenHeader-chunk.js";
import { LoginButton, LoginButtonType } from "./LoginButton-chunk.js";
import "./ColorPickerView-chunk.js";
import "./CounterBadge-chunk.js";
import "./InfoIcon-chunk.js";
import { ColumnWidth, Table, createRowActions } from "./Table-chunk.js";
import "./GroupGuiUtils-chunk.js";
import { showGroupSharingDialog } from "./GroupSharingDialog-chunk.js";
import { GroupInvitationFolderRow } from "./GroupInvitationFolderRow-chunk.js";
import { ListColumnWrapper } from "./ListColumnWrapper-chunk.js";
import { HtmlEditor, HtmlEditorMode } from "./HtmlEditor-chunk.js";
import { htmlSanitizer } from "./HtmlSanitizer-chunk.js";
import { appendEmailSignature } from "./Signature-chunk.js";
import "./LoginUtils-chunk.js";
import "./AttachmentBubble-chunk.js";
import { KnowledgeBaseEntryView, createInitialTemplateListIfAllowed, knowledgeBaseSearch, newMailEditorFromTemplate } from "./MailEditor-chunk.js";
import "./MailGuiUtils-chunk.js";
import "./UsageTestModel-chunk.js";
import { getDefaultSenderFromUser, getFolderName, getIndentedFolderNameForDropdown, getPathToFolderString } from "./MailUtils-chunk.js";
import "./BrowserWebauthn-chunk.js";
import { PermissionType$1 as PermissionType } from "./PermissionType-chunk.js";
import "./CommonMailUtils-chunk.js";
import "./SearchUtils-chunk.js";
import "./FontIcons-chunk.js";
import { TEMPLATE_SHORTCUT_PREFIX, loadTemplateGroupInstances, searchInTemplates } from "./TemplatePopupModel-chunk.js";
import "./MailViewerViewModel-chunk.js";
import "./LoadingState-chunk.js";
import "./inlineImagesUtils-chunk.js";
import { BottomNav } from "./BottomNav-chunk.js";
import "./CommonFormatter-chunk.js";
import { DesktopConfigKey } from "./ConfigKeys-chunk.js";
import { CredentialEncryptionMode } from "./CredentialEncryptionMode-chunk.js";
import { formatActivateState, getDefaultNotificationLabel, loadOutOfOfficeNotification } from "./OutOfOfficeNotificationUtils-chunk.js";
import { PasswordForm, PasswordModel } from "./PasswordForm-chunk.js";
import { MoreInfoLink } from "./MoreInfoLink-chunk.js";
import { getReportMovedMailsType } from "./MailboxPropertiesUtils-chunk.js";
import { AppLockMethod } from "./AppLockMethod-chunk.js";
import "./RadioSelector-chunk.js";
import { showCredentialsEncryptionModeDialog } from "./SelectCredentialsEncryptionModeDialog-chunk.js";
import { ReferralLinkViewer, getReferralLink } from "./ReferralLinkViewer-chunk.js";
import { NotificationContentSelector } from "./NotificationContentSelector-chunk.js";
import "./NotificationPermissionsDialog-chunk.js";
import { getCurrentSpellcheckLanguageLabel, showSpellcheckLanguageDialog } from "./SpellcheckLanguageDialog-chunk.js";
import { WizardEventType, createWizardDialog, emitWizardEvent, wizardPageWrapper } from "./WizardDialog-chunk.js";
import "./SegmentControl-chunk.js";
import { getAvailableMatchingPlans, getAvailablePlansWithAutoResponder, getAvailablePlansWithTemplates, getAvailablePlansWithWhitelabel, isWhitelabelActive, toFeatureType } from "./SubscriptionUtils-chunk.js";
import { show$1 as show, showBuyOrSetNotificationEmailDialog } from "./EditNotificationEmailDialog-chunk.js";
import { showChangeOwnPasswordDialog, showChangeUserPasswordAsAdminDialog } from "./ChangePasswordDialogs-chunk.js";
import { showRecoverCodeDialogAfterPasswordVerification, showRecoverCodeDialogAfterPasswordVerificationAndInfoDialog } from "./RecoverCodeDialog-chunk.js";
import { getAvailableDomains } from "./MailAddressesUtils-chunk.js";
import { AddressStatus } from "./MailAddressTableModel-chunk.js";
import { ReceivedGroupInvitationsModel } from "./ReceivedGroupInvitationsModel-chunk.js";
import { PaymentInterval, asPaymentInterval, formatPrice, getPriceItem } from "./PriceUtils-chunk.js";
import { require_qrcode } from "./PurchaseGiftCardDialog-chunk.js";
import { PaymentViewer, SelectMailAddressForm, SettingsExpander, SubscriptionViewer, showUpgradeWizard } from "./SwitchSubscriptionDialog-chunk.js";
import "./MessageBox-chunk.js";
import { SURVEY_VERSION_NUMBER, showLeavingUserSurveyWizard } from "./LeavingUserSurveyWizard-chunk.js";
import "./Badge-chunk.js";
import { MailRow } from "./MailRow-chunk.js";
import { BaseSearchBar } from "./BaseSearchBar-chunk.js";
import { createInboxRuleTemplate, show$2 as show$1 } from "./AddInboxRuleDialog-chunk.js";
import { getSpamRuleFieldToName, getSpamRuleTypeNameMapping, showAddSpamRuleDialog } from "./AddSpamRuleDialog-chunk.js";
import { showKnowledgeBaseEditor } from "./KnowledgeBaseEditor-chunk.js";
import { getLanguageCode, showTemplateEditor } from "./TemplateEditor-chunk.js";

//#region src/common/settings/SettingsFolder.ts
assertMainOrNode();
var SettingsFolder = class {
	url;
	_isVisibleHandler;
	constructor(name, icon, path, viewerCreator, data) {
		this.name = name;
		this.icon = icon;
		this.path = path;
		this.viewerCreator = viewerCreator;
		this.data = data;
		this.url = typeof path === "string" ? `/settings/${encodeURIComponent(path)}` : `/settings/${encodeURIComponent(path.folder)}/${encodeURIComponent(path.id)}`;
		this._isVisibleHandler = () => true;
	}
	isActive() {
		return isSelectedPrefix(this.url);
	}
	isVisible() {
		return this._isVisibleHandler();
	}
	setIsVisibleHandler(isVisibleHandler) {
		this._isVisibleHandler = isVisibleHandler;
		return this;
	}
	get folder() {
		return typeof this.path === "string" ? null : this.path.folder;
	}
	get id() {
		return typeof this.path === "string" ? null : this.path.id;
	}
};

//#endregion
//#region src/common/settings/login/secondfactor/SecondFactorEditModel.ts
var import_qrcode = __toESM(require_qrcode(), 1);
let VerificationStatus = function(VerificationStatus$1) {
	VerificationStatus$1["Initial"] = "Initial";
	VerificationStatus$1["Progress"] = "Progress";
	VerificationStatus$1["Failed"] = "Failed";
	VerificationStatus$1["Success"] = "Success";
	return VerificationStatus$1;
}({});
const DEFAULT_U2F_NAME = "U2F";
const DEFAULT_TOTP_NAME = "TOTP";
let NameValidationStatus = function(NameValidationStatus$1) {
	NameValidationStatus$1[NameValidationStatus$1["Valid"] = 0] = "Valid";
	NameValidationStatus$1[NameValidationStatus$1["Invalid"] = 1] = "Invalid";
	return NameValidationStatus$1;
}({});
const SecondFactorTypeToNameTextId = Object.freeze({
	[SecondFactorType.totp]: "totpAuthenticator_label",
	[SecondFactorType.u2f]: "u2fSecurityKey_label",
	[SecondFactorType.webauthn]: "u2fSecurityKey_label"
});
var SecondFactorEditModel = class {
	totpCode = "";
	selectedType;
	name = "";
	nameValidationStatus = NameValidationStatus.Valid;
	verificationStatus = VerificationStatus.Initial;
	otpInfo;
	u2fRegistrationData = null;
	constructor(entityClient, user, webauthnClient, totpKeys, webauthnSupported, loginFacade, hostname, domainConfig, updateViewCallback, token) {
		this.entityClient = entityClient;
		this.user = user;
		this.webauthnClient = webauthnClient;
		this.totpKeys = totpKeys;
		this.webauthnSupported = webauthnSupported;
		this.loginFacade = loginFacade;
		this.hostname = hostname;
		this.domainConfig = domainConfig;
		this.updateViewCallback = updateViewCallback;
		this.token = token;
		this.selectedType = webauthnSupported ? SecondFactorType.webauthn : SecondFactorType.totp;
		this.setDefaultNameIfNeeded();
		this.otpInfo = new LazyLoaded(async () => {
			const url = await this.getOtpAuthUrl(this.totpKeys.readableKey);
			const totpQRCodeSvg = isApp() ? null : htmlSanitizer.sanitizeSVG(new import_qrcode.default({
				height: 150,
				width: 150,
				content: url,
				padding: 2,
				xmlDeclaration: false
			}).svg()).html;
			return {
				qrCodeSvg: totpQRCodeSvg,
				url
			};
		});
		this.otpInfo.getAsync().then(() => this.updateViewCallback());
	}
	/**
	* if the user cancels the second factor creation while it's already talking to webAuthn, we want to cancel that
	* process before closing the dialog.
	*/
	abort() {
		this.webauthnClient.abortCurrentOperation();
	}
	/**
	* validation message for use in dialog validators
	*/
	validationMessage() {
		return this.nameValidationStatus === NameValidationStatus.Valid ? null : "textTooLong_msg";
	}
	/**
	* get a list of supported second factor types
	*/
	getFactorTypesOptions() {
		const options = [];
		options.push(SecondFactorType.totp);
		if (this.webauthnSupported) options.push(SecondFactorType.webauthn);
		return options;
	}
	/**
	* call when the selected second factor type changes
	*/
	onTypeSelected(newValue) {
		this.selectedType = newValue;
		this.verificationStatus = newValue === SecondFactorType.webauthn ? VerificationStatus.Initial : VerificationStatus.Progress;
		this.setDefaultNameIfNeeded();
		this.updateNameValidation();
		if (newValue !== SecondFactorType.webauthn) this.webauthnClient.abortCurrentOperation();
	}
	/**
	* call when the display name of the second factor instance changes
	*/
	onNameChange(newValue) {
		this.name = newValue;
		this.updateNameValidation();
	}
	/**
	* call when the validation code for setting up TOTP changes
	*/
	async onTotpValueChange(newValue) {
		this.totpCode = newValue;
		let cleanedValue = newValue.replace(/ /g, "");
		if (cleanedValue.length === 6) {
			const expectedCode = Number(cleanedValue);
			this.verificationStatus = await this.tryCodes(expectedCode, this.totpKeys.key);
		} else this.verificationStatus = VerificationStatus.Progress;
		this.updateViewCallback();
	}
	/**
	* re-validates the input and makes the server calls to actually create a second factor
	* returns the user that the second factor was created in case any follow-up operations
	* are needed
	*/
	async save() {
		this.setDefaultNameIfNeeded();
		if (this.selectedType === SecondFactorType.webauthn) {
			if (this.verificationStatus === VerificationStatus.Progress) return null;
			try {
				this.u2fRegistrationData = await this.webauthnClient.register(this.user._id, this.name);
				this.verificationStatus = VerificationStatus.Success;
			} catch (e) {
				console.log("Webauthn registration failed: ", e);
				this.u2fRegistrationData = null;
				this.verificationStatus = VerificationStatus.Failed;
				return null;
			}
		}
		this.updateViewCallback();
		if (this.selectedType === SecondFactorType.u2f) throw new ProgrammingError(`invalid factor type: ${this.selectedType}`);
		const sf = createSecondFactor({
			_ownerGroup: this.user._ownerGroup,
			name: this.name,
			type: this.selectedType,
			otpSecret: null,
			u2f: null
		});
		if (this.selectedType === SecondFactorType.webauthn) if (this.verificationStatus !== VerificationStatus.Success) throw new UserError("unrecognizedU2fDevice_msg");
else sf.u2f = this.u2fRegistrationData;
else if (this.selectedType === SecondFactorType.totp) if (this.verificationStatus === VerificationStatus.Failed) throw new UserError("totpCodeWrong_msg");
else if (this.verificationStatus === VerificationStatus.Initial || this.verificationStatus === VerificationStatus.Progress) throw new UserError("totpCodeEnter_msg");
else sf.otpSecret = this.totpKeys.key;
		await this.entityClient.setup(assertNotNull(this.user.auth).secondFactors, sf, this.token ? { token: this.token } : undefined);
		return this.user;
	}
	/** see https://github.com/google/google-authenticator/wiki/Key-Uri-Format */
	async getOtpAuthUrl(secret) {
		const userGroupInfo = await this.entityClient.load(GroupInfoTypeRef, this.user.userGroup.groupInfo);
		const issuer = this.domainConfig.firstPartyDomain ? "Tutanota" : this.hostname;
		const account = encodeURI(issuer + ":" + neverNull(userGroupInfo.mailAddress));
		const url = new URL("otpauth://totp/" + account);
		url.searchParams.set("issuer", issuer);
		url.searchParams.set("secret", secret.replace(/ /g, ""));
		url.searchParams.set("algorithm", "SHA1");
		url.searchParams.set("digits", "6");
		url.searchParams.set("period", "30");
		return url.toString();
	}
	/**
	* re-check if the given display name is valid for the current second factor type
	*/
	updateNameValidation() {
		this.nameValidationStatus = this.selectedType !== SecondFactorType.webauthn || validateWebauthnDisplayName(this.name) ? NameValidationStatus.Valid : NameValidationStatus.Invalid;
	}
	/**
	* empty names sometimes lead to errors, so we make sure we have something semi-sensible set in the field.
	*/
	setDefaultNameIfNeeded() {
		const trimmed = this.name.trim();
		if (this.selectedType === SecondFactorType.webauthn && (trimmed === DEFAULT_TOTP_NAME || trimmed.length === 0)) this.name = DEFAULT_U2F_NAME;
else if (this.selectedType === SecondFactorType.totp && (trimmed === DEFAULT_U2F_NAME || trimmed.length === 0)) this.name = DEFAULT_TOTP_NAME;
	}
	/**
	* check if the given validation code is the current, next or last code for the TOTP
	*/
	async tryCodes(expectedCode, key) {
		const time = Math.floor(new Date().getTime() / 1e3 / 30);
		const number = await this.loginFacade.generateTotpCode(time, key);
		if (number === expectedCode) return VerificationStatus.Success;
		const number2 = await this.loginFacade.generateTotpCode(time - 1, key);
		if (number2 === expectedCode) return VerificationStatus.Success;
		const number3 = await this.loginFacade.generateTotpCode(time + 1, key);
		if (number3 === expectedCode) return VerificationStatus.Success;
		return VerificationStatus.Failed;
	}
};

//#endregion
//#region src/common/settings/login/secondfactor/SecondFactorEditDialog.ts
var SecondFactorEditDialog = class SecondFactorEditDialog {
	dialog;
	constructor(model) {
		this.model = model;
		this.dialog = Dialog.createActionDialog({
			title: "add_action",
			allowOkWithReturn: true,
			child: { view: () => this.render() },
			okAction: () => showProgressDialog("pleaseWait_msg", this.okAction()),
			allowCancel: true,
			okActionTextId: "save_action",
			cancelAction: () => this.model.abort(),
			validator: () => this.model.validationMessage()
		});
	}
	async okAction() {
		try {
			const user = await this.model.save();
			if (user != null) this.finalize(user);
		} catch (e) {
			if (e instanceof UserError) Dialog.message(lang.makeTranslation("error_msg", e.message));
else if (e instanceof NotAuthorizedError) {
				this.dialog.close();
				Dialog.message("contactFormSubmitError_msg");
				return;
			} else throw e;
		}
	}
	finalize(user) {
		this.dialog.close();
		showRecoverCodeDialogAfterPasswordVerificationAndInfoDialog(user);
	}
	static async loadAndShow(entityClient, lazyUser, token) {
		const dialog = await showProgressDialog("pleaseWait_msg", this.loadWebauthnClient(entityClient, lazyUser, token));
		dialog.dialog.show();
	}
	render() {
		const optionsItems = this.model.getFactorTypesOptions().map((o) => ({
			name: lang.get(SecondFactorTypeToNameTextId[o]),
			value: o
		}));
		const typeDropdownAttrs = {
			label: "type_label",
			selectedValue: this.model.selectedType,
			selectionChangedHandler: (newValue) => this.model.onTypeSelected(newValue),
			items: optionsItems,
			dropdownWidth: 300
		};
		const nameFieldAttrs = {
			label: "name_label",
			helpLabel: () => this.renderHelpLabel(),
			value: this.model.name,
			oninput: (value) => this.model.onNameChange(value)
		};
		return [
			mithril_default(DropDownSelector, typeDropdownAttrs),
			mithril_default(TextField, nameFieldAttrs),
			this.renderTypeSpecificFields()
		];
	}
	renderHelpLabel() {
		return this.model.nameValidationStatus === NameValidationStatus.Valid ? mithril_default("", lang.get("secondFactorNameInfo_msg")) : mithril_default(".b.content-accent-fg", lang.get("textTooLong_msg"));
	}
	renderTypeSpecificFields() {
		switch (this.model.selectedType) {
			case SecondFactorType.totp: return this.renderOtpFields();
			case SecondFactorType.webauthn: return this.renderU2FFields();
			default: throw new ProgrammingError(`Invalid 2fa type: ${this.model.selectedType}`);
		}
	}
	renderU2FFields() {
		return this.model.verificationStatus === VerificationStatus.Initial ? null : mithril_default("p.flex.items-center", [mithril_default(".mr-s", this.statusIcon()), mithril_default("", this.statusMessage())]);
	}
	renderOtpFields() {
		const copyButtonAttrs = {
			title: "copy_action",
			click: () => copyToClipboard(this.model.totpKeys.readableKey),
			icon: Icons.Clipboard,
			size: ButtonSize.Compact
		};
		return mithril_default(".mb", [
			mithril_default(TextField, {
				label: "totpSecret_label",
				helpLabel: () => lang.get(isApp() ? "totpTransferSecretApp_msg" : "totpTransferSecret_msg"),
				value: this.model.totpKeys.readableKey,
				injectionsRight: () => mithril_default(IconButton, copyButtonAttrs),
				isReadOnly: true
			}),
			isApp() ? mithril_default(".pt", mithril_default(LoginButton, {
				label: "addOpenOTPApp_action",
				onclick: () => this.openOtpLink()
			})) : this.renderOtpQrCode(),
			mithril_default(TextField, {
				label: "totpCode_label",
				value: this.model.totpCode,
				helpLabel: () => this.statusMessage(),
				autocompleteAs: Autocomplete.oneTimeCode,
				oninput: (newValue) => this.model.onTotpValueChange(newValue)
			})
		]);
	}
	renderOtpQrCode() {
		const otpInfo = this.model.otpInfo.getSync();
		if (otpInfo) {
			const qrCodeSvg = assertNotNull(otpInfo.qrCodeSvg);
			return mithril_default(".flex-center.pt", mithril_default.trust(qrCodeSvg));
		} else return null;
	}
	async openOtpLink() {
		const { url } = await this.model.otpInfo.getAsync();
		const successful = await locator.systemFacade.openLink(url);
		if (!successful) Dialog.message("noAppAvailable_msg");
	}
	static async loadWebauthnClient(entityClient, lazyUser, token) {
		const totpKeys = await locator.loginFacade.generateTotpSecret();
		const user = await lazyUser.getAsync();
		const webauthnSupported = await locator.webAuthn.isSupported();
		const model = new SecondFactorEditModel(entityClient, user, locator.webAuthn, totpKeys, webauthnSupported, locator.loginFacade, location.hostname, locator.domainConfigProvider().getCurrentDomainConfig(), mithril_default.redraw, token);
		return new SecondFactorEditDialog(model);
	}
	statusIcon() {
		switch (this.model.verificationStatus) {
			case VerificationStatus.Progress: return progressIcon();
			case VerificationStatus.Success: return mithril_default(Icon, {
				icon: Icons.Checkmark,
				size: IconSize.Medium,
				style: { fill: theme.content_accent }
			});
			case VerificationStatus.Failed: return mithril_default(Icon, {
				icon: Icons.Cancel,
				size: IconSize.Medium,
				style: { fill: theme.content_accent }
			});
			default: return null;
		}
	}
	statusMessage() {
		if (this.model.selectedType === SecondFactorType.webauthn) return this.model.verificationStatus === VerificationStatus.Success ? lang.get("registeredU2fDevice_msg") : lang.get("unrecognizedU2fDevice_msg");
else if (this.model.verificationStatus === VerificationStatus.Success) return lang.get("totpCodeConfirmed_msg");
else if (this.model.verificationStatus === VerificationStatus.Failed) return lang.get("totpCodeWrong_msg");
else return lang.get("totpCodeEnter_msg");
	}
};

//#endregion
//#region src/common/settings/login/secondfactor/SecondFactorsEditForm.ts
assertMainOrNode();
var SecondFactorsEditForm = class {
	_2FALineAttrs;
	constructor(user, domainConfigProvider, loginFacade, askForPassword, isDeactivated) {
		this.user = user;
		this.domainConfigProvider = domainConfigProvider;
		this.loginFacade = loginFacade;
		this.askForPassword = askForPassword;
		this.isDeactivated = isDeactivated;
		this._2FALineAttrs = [];
		this._updateSecondFactors();
		this.view = this.view.bind(this);
	}
	view() {
		const secondFactorTableAttrs = {
			columnHeading: ["name_label", "type_label"],
			columnWidths: [ColumnWidth.Largest, ColumnWidth.Largest],
			lines: this._2FALineAttrs,
			showActionButtonColumn: true,
			addButtonAttrs: {
				title: "addSecondFactor_action",
				click: () => {
					if (this.isDeactivated) Dialog.message("userAccountDeactivated_msg");
else if (this.askForPassword) this.showAddSecondFactorDialogWithPasswordCheck();
else this.showAddSecondFactorDialog();
				},
				icon: Icons.Add,
				size: ButtonSize.Compact
			}
		};
		return [
			mithril_default(".h4.mt-l", lang.get("secondFactorAuthentication_label")),
			mithril_default(Table, secondFactorTableAttrs),
			this.domainConfigProvider.getCurrentDomainConfig().firstPartyDomain ? [ifAllowedTutaLinks(locator.logins, InfoLink.SecondFactor, (link) => mithril_default(MoreInfoLink, {
				link,
				isSmall: true
			}))] : null
		];
	}
	async _updateSecondFactors() {
		const user = await this.user.getAsync();
		const factors = await locator.entityClient.loadAll(SecondFactorTypeRef, neverNull(user.auth).secondFactors);
		const loginDomains = new Set();
		for (const f of factors) {
			const isU2F = f.type === SecondFactorType.u2f || f.type === SecondFactorType.webauthn;
			if (isU2F) {
				const loginDomain = appIdToLoginUrl(assertNotNull(f.u2f).appId, this.domainConfigProvider);
				loginDomains.add(loginDomain);
			}
		}
		this._2FALineAttrs = factors.map((f) => {
			const removeButtonAttrs = {
				title: "remove_action",
				click: () => {
					if (this.isDeactivated) Dialog.message("userAccountDeactivated_msg");
else if (this.askForPassword) this.removeSecondFactorWithPasswordCheck(f);
else this.removeSecondFactor(f);
				},
				icon: Icons.Cancel,
				size: ButtonSize.Compact
			};
			const factorName = this.formatSecondFactorName(f, loginDomains);
			const type = assertEnumValue(SecondFactorType, f.type);
			return {
				cells: [factorName, lang.get(SecondFactorTypeToNameTextId[type])],
				actionButtonAttrs: locator.logins.getUserController().isGlobalAdmin() ? removeButtonAttrs : null
			};
		});
		mithril_default.redraw();
	}
	formatSecondFactorName(factor, loginDomains) {
		const isU2F = factor.type === SecondFactorType.u2f || factor.type === SecondFactorType.webauthn;
		const requiresDomainDisambiguation = isU2F && loginDomains.size > 1;
		if (requiresDomainDisambiguation) {
			const prefix = factor.name.length > 0 ? " - " : "";
			const loginUrlString = appIdToLoginUrl(neverNull(factor.u2f).appId, this.domainConfigProvider);
			const loginDomain = new URL(loginUrlString).hostname;
			return factor.name + prefix + loginDomain;
		} else return factor.name;
	}
	showAddSecondFactorDialogWithPasswordCheck() {
		const dialog = showRequestPasswordDialog({
			action: async (passphrase) => {
				try {
					const token = await this.loginFacade.getVerifierToken(passphrase);
					this.showAddSecondFactorDialog(token);
				} catch (e) {
					if (e instanceof NotAuthorizedError) return lang.get("invalidPassword_msg");
else throw e;
				}
				dialog.close();
				return "";
			},
			cancel: {
				textId: "cancel_action",
				action: noOp
			}
		});
	}
	showAddSecondFactorDialog(token) {
		SecondFactorEditDialog.loadAndShow(locator.entityClient, this.user, token);
	}
	removeSecondFactorWithPasswordCheck(secondFactorToRemove) {
		const dialog = showRequestPasswordDialog({
			action: async (passphrase) => {
				let token = undefined;
				try {
					token = await this.loginFacade.getVerifierToken(passphrase);
				} catch (e) {
					if (e instanceof NotAuthorizedError) return lang.get("invalidPassword_msg");
else throw e;
				}
				this.removeSecondFactor(secondFactorToRemove, token);
				dialog.close();
				return "";
			},
			messageText: lang.get("confirmDeleteSecondFactor_msg"),
			cancel: {
				textId: "cancel_action",
				action: noOp
			}
		});
	}
	removeSecondFactor(secondFactorToRemove, token) {
		try {
			let options = undefined;
			if (token) options = { extraHeaders: { token } };
			showProgressDialog("pleaseWait_msg", locator.entityClient.erase(secondFactorToRemove, options));
		} catch (e) {
			if (e instanceof NotFoundError) console.log("could not delete second factor (already deleted)");
else throw e;
		}
	}
	entityEventReceived(update) {
		if (isUpdateForTypeRef(SecondFactorTypeRef, update)) return this._updateSecondFactors();
else return Promise.resolve();
	}
};

//#endregion
//#region src/common/settings/login/LoginSettingsViewer.ts
var import_stream$13 = __toESM(require_stream(), 1);
assertMainOrNode();
var LoginSettingsViewer = class {
	_mailAddress = (0, import_stream$13.default)(neverNull(locator.logins.getUserController().userGroupInfo.mailAddress));
	_stars = (0, import_stream$13.default)("***");
	_closedSessionsExpanded = (0, import_stream$13.default)(false);
	_sessions = [];
	_secondFactorsForm = new SecondFactorsEditForm(new LazyLoaded(() => Promise.resolve(locator.logins.getUserController().user)), locator.domainConfigProvider(), locator.loginFacade, true, false);
	_usageTestModel;
	credentialEncryptionMode = null;
	appLockMethod = null;
	constructor(credentialsProvider, mobileSystemFacade) {
		this.credentialsProvider = credentialsProvider;
		this.mobileSystemFacade = mobileSystemFacade;
		this._usageTestModel = locator.usageTestModel;
		this._updateSessions();
		this.updateAppLockData();
	}
	async updateAppLockData() {
		if (isDesktop()) this.credentialEncryptionMode = await this.credentialsProvider.getCredentialEncryptionMode();
else if (this.mobileSystemFacade) this.appLockMethod = await this.mobileSystemFacade.getAppLockMethod();
		mithril_default.redraw();
	}
	view() {
		const mailAddressAttrs = {
			label: "mailAddress_label",
			value: this._mailAddress(),
			oninput: this._mailAddress,
			isReadOnly: true
		};
		const changePasswordButtonAttrs = {
			title: "changePassword_label",
			click: () => showChangeOwnPasswordDialog(),
			icon: Icons.Edit,
			size: ButtonSize.Compact
		};
		const passwordAttrs = {
			label: "password_label",
			value: this._stars(),
			oninput: this._stars,
			isReadOnly: true,
			injectionsRight: () => mithril_default(IconButton, changePasswordButtonAttrs)
		};
		const recoveryCodeDropdownButtonAttrs = attachDropdown({
			mainButtonAttrs: {
				title: "edit_action",
				icon: Icons.Edit,
				size: ButtonSize.Compact
			},
			childAttrs: () => [locator.logins.getUserController().user.auth?.recoverCode ? {
				label: "show_action",
				click: () => showRecoverCodeDialogAfterPasswordVerification("get")
			} : null, {
				label: neverNull(locator.logins.getUserController().user.auth).recoverCode ? "update_action" : "setUp_action",
				click: () => showRecoverCodeDialogAfterPasswordVerification("create")
			}],
			showDropdown: () => true
		});
		const recoveryCodeFieldAttrs = {
			label: "recoveryCode_label",
			helpLabel: () => {
				return ifAllowedTutaLinks(locator.logins, InfoLink.RecoverCode, (link) => [mithril_default(MoreInfoLink, { link })]);
			},
			value: this._stars(),
			oninput: this._stars,
			isReadOnly: true,
			injectionsRight: () => mithril_default(IconButton, recoveryCodeDropdownButtonAttrs)
		};
		const usageDataOptInAttrs = {
			label: "userUsageDataOptIn_label",
			items: [
				{
					name: lang.get("activated_label"),
					value: true
				},
				{
					name: lang.get("deactivated_label"),
					value: false
				},
				{
					name: lang.get("undecided_label"),
					value: null,
					selectable: false
				}
			],
			selectedValue: locator.logins.getUserController().userSettingsGroupRoot.usageDataOptedIn,
			selectionChangedHandler: (v) => {
				this._usageTestModel.setOptInDecision(assertNotNull(v));
			},
			helpLabel: () => {
				return ifAllowedTutaLinks(locator.logins, InfoLink.Usage, (link) => [mithril_default("span", lang.get("userUsageDataOptInInfo_msg") + " "), mithril_default(MoreInfoLink, { link })]);
			},
			dropdownWidth: 250
		};
		if (locator.logins.isUserLoggedIn()) {
			const user = locator.logins.getUserController();
			return mithril_default("", [mithril_default("#user-settings.fill-absolute.scroll.plr-l.pb-xl", [
				mithril_default(".h4.mt-l", lang.get("loginCredentials_label")),
				mithril_default(TextField, mailAddressAttrs),
				mithril_default(TextField, passwordAttrs),
				user.isGlobalAdmin() ? mithril_default(TextField, recoveryCodeFieldAttrs) : null,
				this.renderAppLockField(),
				mithril_default(this._secondFactorsForm),
				mithril_default(".h4.mt-l", lang.get("activeSessions_label")),
				this._renderActiveSessions(),
				mithril_default(".small", lang.get("sessionsInfo_msg")),
				mithril_default(".flex-space-between.items-center.mt-l.mb-s", [mithril_default(".h4", lang.get("closedSessions_label")), mithril_default(ExpanderButton, {
					label: "show_action",
					expanded: this._closedSessionsExpanded(),
					onExpandedChange: this._closedSessionsExpanded,
					showWarning: false
				})]),
				mithril_default(ExpanderPanel, { expanded: this._closedSessionsExpanded() }, this._renderClosedSessions()),
				mithril_default(".small", lang.get("sessionsWillBeDeleted_msg")),
				mithril_default(".small", lang.get("sessionsInfo_msg")),
				this._usageTestModel.isCustomerOptedOut() ? null : mithril_default("", [mithril_default(".h4.mt-l", lang.get("usageData_label")), mithril_default(DropDownSelector, usageDataOptInAttrs)])
			])]);
		} else return null;
	}
	renderAppLockField() {
		const mobileSystemFacade = this.mobileSystemFacade;
		if (mobileSystemFacade) {
			const onEdit = async () => {
				const { showAppLockMethodDialog } = await import("./SelectAppLockMethodDialog2-chunk.js");
				await showAppLockMethodDialog(mobileSystemFacade);
				await this.updateAppLockData();
			};
			return mithril_default(TextField, {
				label: "credentialsEncryptionMode_label",
				value: this.appLockMethodName(this.appLockMethod ?? AppLockMethod.None),
				isReadOnly: true,
				injectionsRight: () => mithril_default(IconButton, {
					title: "edit_action",
					icon: Icons.Edit,
					click: () => onEdit()
				})
			});
		} else if (isDesktop()) {
			const usedMode = this.credentialEncryptionMode ?? CredentialEncryptionMode.DEVICE_LOCK;
			return mithril_default(TextField, {
				label: "credentialsEncryptionMode_label",
				value: this.credentialsEncryptionModeName(usedMode),
				isReadOnly: true,
				injectionsRight: () => mithril_default(IconButton, {
					title: "edit_action",
					icon: Icons.Edit,
					click: () => showCredentialsEncryptionModeDialog(this.credentialsProvider).then(() => this.updateAppLockData())
				})
			});
		}
	}
	async _updateSessions() {
		const sessions = await locator.entityClient.loadAll(SessionTypeRef, neverNull(locator.logins.getUserController().user.auth).sessions);
		sessions.sort((s1, s2) => s2.lastAccessTime.getTime() - s1.lastAccessTime.getTime());
		this._sessions = sessions;
		mithril_default.redraw();
	}
	_renderActiveSessions() {
		return mithril_default(Table, {
			columnHeading: ["client_label"],
			columnWidths: [ColumnWidth.Largest],
			showActionButtonColumn: true,
			lines: this._sessions.filter((session) => session.state === SessionState.SESSION_STATE_ACTIVE).map((session) => {
				const thisSession = elementIdPart(locator.logins.getUserController().sessionId) === getElementId(session);
				return {
					cells: () => [{
						main: thisSession ? lang.get("thisClient_label") : session.clientIdentifier,
						info: [lang.get("lastAccessWithTime_label", { "{time}": formatDateTimeFromYesterdayOn(session.lastAccessTime) }), session.loginIpAddress ? session.loginIpAddress : ""],
						click: () => this.showActiveSessionInfoDialog(session, thisSession)
					}],
					actionButtonAttrs: thisSession ? null : {
						title: "closeSession_action",
						click: () => {
							this._closeSession(session);
						},
						icon: Icons.Cancel,
						size: ButtonSize.Compact
					}
				};
			})
		});
	}
	showActiveSessionInfoDialog(session, isThisSession) {
		const actionDialogProperties = {
			title: "details_label",
			child: { view: () => {
				return [
					mithril_default(TextField, {
						label: "client_label",
						value: isThisSession ? lang.get("thisClient_label") : session.clientIdentifier,
						isReadOnly: true
					}),
					mithril_default(TextField, {
						label: "lastAccess_label",
						value: `${formatDateTimeFromYesterdayOn(session.lastAccessTime)}`,
						isReadOnly: true
					}),
					mithril_default(TextField, {
						label: "IpAddress_label",
						value: session.loginIpAddress ? session.loginIpAddress : "",
						isReadOnly: true
					})
				];
			} },
			okAction: null,
			allowCancel: true,
			allowOkWithReturn: false,
			cancelActionTextId: "close_alt"
		};
		Dialog.showActionDialog(actionDialogProperties);
	}
	_closeSession(session) {
		locator.entityClient.erase(session).catch(ofClass(NotFoundError, () => {
			console.log(`session ${JSON.stringify(session._id)} already deleted`);
		}));
	}
	async entityEventsReceived(updates) {
		for (const update of updates) {
			if (isUpdateForTypeRef(SessionTypeRef, update)) await this._updateSessions();
else if (isUpdateForTypeRef(CustomerPropertiesTypeRef, update) || isUpdateForTypeRef(UserSettingsGroupRootTypeRef, update)) mithril_default.redraw();
			await this._secondFactorsForm.entityEventReceived(update);
		}
	}
	credentialsEncryptionModeName(credentialsEncryptionMode) {
		const mapping = {
			[CredentialEncryptionMode.DEVICE_LOCK]: "credentialsEncryptionModeDeviceLock_label",
			[CredentialEncryptionMode.SYSTEM_PASSWORD]: "credentialsEncryptionModeDeviceCredentials_label",
			[CredentialEncryptionMode.BIOMETRICS]: "credentialsEncryptionModeBiometrics_label",
			[CredentialEncryptionMode.APP_PASSWORD]: "credentialsEncryptionModeAppPassword_label"
		};
		return lang.get(mapping[credentialsEncryptionMode]);
	}
	appLockMethodName(appLockMethod) {
		const mapping = {
			[AppLockMethod.None]: "credentialsEncryptionModeDeviceLock_label",
			[AppLockMethod.SystemPassOrBiometrics]: "credentialsEncryptionModeDeviceCredentials_label",
			[AppLockMethod.Biometrics]: "credentialsEncryptionModeBiometrics_label"
		};
		return lang.get(mapping[appLockMethod]);
	}
	_renderClosedSessions() {
		const lines = this._sessions.filter((session) => session.state !== SessionState.SESSION_STATE_ACTIVE).map((session) => {
			return { cells: [
				session.clientIdentifier,
				formatDateTimeFromYesterdayOn(session.lastAccessTime),
				session.loginIpAddress ? session.loginIpAddress : ""
			] };
		});
		return mithril_default(Table, {
			columnHeading: [
				"client_label",
				"lastAccess_label",
				"IpAddress_label"
			],
			columnWidths: [
				ColumnWidth.Small,
				ColumnWidth.Largest,
				ColumnWidth.Small
			],
			showActionButtonColumn: true,
			lines
		});
	}
};

//#endregion
//#region src/mail-app/settings/LoadingUtils.ts
var GroupData = class {
	groupId;
	displayName;
	constructor(groupId, displayName) {
		this.groupId = groupId;
		this.displayName = displayName;
	}
};
function loadGroupDisplayName(groupId) {
	return locator.entityClient.load(GroupTypeRef, groupId).then((group) => {
		if (group.user && group.type !== GroupType.User) return locator.entityClient.load(UserTypeRef, group.user).then((user) => {
			return locator.entityClient.load(GroupInfoTypeRef, user.userGroup.groupInfo);
		});
else return locator.entityClient.load(GroupInfoTypeRef, group.groupInfo);
	}).then((groupInfo) => {
		return getGroupInfoDisplayName(groupInfo);
	});
}
async function loadEnabledTeamMailGroups(customer) {
	const infos = await locator.entityClient.loadAll(GroupInfoTypeRef, customer.teamGroups);
	return infos.filter((teamGroupInfo) => {
		if (teamGroupInfo.deleted) return false;
else return locator.entityClient.load(GroupTypeRef, teamGroupInfo.group).then((teamGroup) => teamGroup.type === GroupType.Mail);
	}).map((mailTeamGroupInfo) => new GroupData(mailTeamGroupInfo.group, getGroupInfoDisplayName(mailTeamGroupInfo)));
}
async function loadEnabledUserMailGroups(customer) {
	const groupInfos = await locator.entityClient.loadAll(GroupInfoTypeRef, customer.userGroups);
	return pMap(groupInfos.filter((g) => !g.deleted), async (userGroupInfo) => {
		const userGroup = await locator.entityClient.load(GroupTypeRef, userGroupInfo.group);
		const user = await locator.entityClient.load(UserTypeRef, neverNull(userGroup.user));
		return new GroupData(getUserGroupMemberships(user, GroupType.Mail)[0].group, getGroupInfoDisplayName(userGroupInfo));
	});
}

//#endregion
//#region src/mail-app/settings/DomainDnsStatus.ts
assertMainOrNode();
var DomainDnsStatus = class {
	status;
	domain;
	constructor(cleanDomainName, customerId) {
		this.domain = cleanDomainName;
		this.status = new LazyLoaded(() => {
			let data = createCustomDomainCheckGetIn({
				domain: cleanDomainName,
				customer: customerId ?? null
			});
			return locator.serviceExecutor.get(CustomDomainCheckService, data);
		});
	}
	getLoadedCustomDomainCheckGetOut() {
		return this.status.getLoaded();
	}
	/**
	* Only checks for the required records (MX and spf) to be fine.
	* We have this less strict check because one can already use the custom domain (with limitations) even if certain records like dmarc are not yet set properly.
	* We want to allow finishing the dialogs succesfully even if just these basic check pass.
	* @returns {boolean} true if records are fine.
	*/
	areRecordsFine() {
		if (!this.status.isLoaded() || this.status.getLoaded().checkResult !== CustomDomainCheckResult.CUSTOM_DOMAIN_CHECK_RESULT_OK) return false;
		const requiredMissingRecords = this.status.getLoaded().missingRecords.filter((r) => r.type === DnsRecordType.DNS_RECORD_TYPE_MX || r.type === DnsRecordType.DNS_RECORD_TYPE_TXT_SPF);
		return !requiredMissingRecords.length;
	}
	/**
	* Checks that ALL records are fine. Even the ones that are only recommended.
	* We need this check on top of areRecordsFine() because we want to display if some records are not yet set correctly even if the domain can already be used.
	* @returns {boolean} true if all records are fine.
	*/
	areAllRecordsFine() {
		return this.status.isLoaded() && this.status.getLoaded().checkResult === CustomDomainCheckResult.CUSTOM_DOMAIN_CHECK_RESULT_OK && this.status.getLoaded().missingRecords.length === 0 && this.status.getLoaded().invalidRecords.length === 0;
	}
	getDnsStatusInfo() {
		if (this.status.isLoaded()) {
			let result = this.status.getLoaded();
			if (result.checkResult === CustomDomainCheckResult.CUSTOM_DOMAIN_CHECK_RESULT_OK) {
				let mxOk = !result.missingRecords.some((r) => r.type === DnsRecordType.DNS_RECORD_TYPE_MX) && !result.invalidRecords.some((r) => r.type === DnsRecordType.DNS_RECORD_TYPE_MX);
				let spfOk = !result.missingRecords.some((r) => r.type === DnsRecordType.DNS_RECORD_TYPE_TXT_SPF) && !result.invalidRecords.some((r) => r.type === DnsRecordType.DNS_RECORD_TYPE_TXT_SPF);
				let dkimOk = !result.missingRecords.some((r) => r.type === DnsRecordType.DNS_RECORD_TYPE_CNAME_DKIM) && !result.invalidRecords.some((r) => r.type === DnsRecordType.DNS_RECORD_TYPE_CNAME_DKIM);
				let mtaStsOk = !result.missingRecords.some((r) => r.type === DnsRecordType.DNS_RECORD_TYPE_CNAME_MTA_STS) && !result.invalidRecords.some((r) => r.type === DnsRecordType.DNS_RECORD_TYPE_CNAME_MTA_STS);
				let dmarcWarn = result.missingRecords.find((r) => r.type === DnsRecordType.DNS_RECORD_TYPE_TXT_DMARC);
				let dmarcBad = result.invalidRecords.find((r) => r.type === DnsRecordType.DNS_RECORD_TYPE_TXT_DMARC);
				return "MX " + (mxOk ? DnsRecordValidation.OK : DnsRecordValidation.BAD) + ", SPF " + (spfOk ? DnsRecordValidation.OK : DnsRecordValidation.BAD) + ", MTA-STS " + (mtaStsOk ? DnsRecordValidation.OK : DnsRecordValidation.BAD) + ", DKIM " + (dkimOk ? DnsRecordValidation.OK : DnsRecordValidation.BAD) + ", DMARC " + (dmarcBad || dmarcWarn ? DnsRecordValidation.BAD : DnsRecordValidation.OK);
			} else return "DNS " + DnsRecordValidation.BAD;
		} else return lang.get("loading_msg");
	}
	loadCurrentStatus() {
		if (this.status.isLoaded()) return this.status.reload().then(noOp);
else return this.status.getAsync().then(noOp);
	}
};

//#endregion
//#region src/mail-app/settings/emaildomain/DnsRecordTable.ts
var ActualDnsRecordType = function(ActualDnsRecordType$1) {
	ActualDnsRecordType$1["MX"] = "MX";
	ActualDnsRecordType$1["TXT"] = "TXT";
	ActualDnsRecordType$1["CNAME"] = "CNAME";
	return ActualDnsRecordType$1;
}(ActualDnsRecordType || {});
const DnsRecordTable = Object.freeze({
	[DnsRecordType.DNS_RECORD_TYPE_MX]: ActualDnsRecordType.MX,
	[DnsRecordType.DNS_RECORD_TYPE_TXT_SPF]: ActualDnsRecordType.TXT,
	[DnsRecordType.DNS_RECORD_TYPE_CNAME_DKIM]: ActualDnsRecordType.CNAME,
	[DnsRecordType.DNS_RECORD_TYPE_TXT_DMARC]: ActualDnsRecordType.TXT,
	[DnsRecordType.DNS_RECORD_TYPE_CNAME_MTA_STS]: ActualDnsRecordType.CNAME,
	[DnsRecordType.DNS_RECORD_TYPE_TXT_VERIFY]: ActualDnsRecordType.TXT
});
function createDnsRecordTable(records) {
	return mithril_default(Table, {
		columnHeading: ["type_label", "dnsRecordHostOrName_label"],
		columnWidths: [ColumnWidth.Small, ColumnWidth.Largest],
		showActionButtonColumn: false,
		lines: records.map((r) => ({ cells: () => [{ main: DnsRecordTable[r.type] }, {
			main: r.subdomain ? r.subdomain : "@",
			info: [r.value]
		}] }))
	});
}

//#endregion
//#region src/mail-app/settings/emaildomain/VerifyDnsRecordsPage.ts
assertMainOrNode();
var VerifyDnsRecordsPage = class {
	oncreate(vnode) {
		const data = vnode.attrs.data;
		data.domainStatus = new DomainDnsStatus(data.domain());
		_updateDnsStatus(data.domainStatus);
	}
	view(vnode) {
		const a = vnode.attrs;
		return [
			mithril_default("h4.mt-l.text-center", lang.get("verifyDNSRecords_title")),
			mithril_default("p", lang.get("verifyDNSRecords_msg")),
			a.data.domainStatus.status.isLoaded() ? mithril_default("", [renderCheckResult(a.data.domainStatus), mithril_default(".flex-center.full-width.pt-l.mb-l", mithril_default(LoginButton, {
				label: "finish_action",
				class: "small-login-button",
				onclick: () => this._finishDialog(a.data, downcast(vnode)?.dom ?? null)
			}))]) : mithril_default("", [lang.get("loadingDNSRecords_msg"), mithril_default(".flex-center.full-width.pt-l.mb-l", mithril_default(Button, {
				type: ButtonType.Secondary,
				label: "refresh_action",
				click: () => _updateDnsStatus(a.data.domainStatus)
			}))])
		];
	}
	_finishDialog(data, dom) {
		const leaveUnfinishedDialogAttrs = {
			title: "quitSetup_title",
			child: { view: () => {
				return [mithril_default("p", lang.get("quitDNSSetup_msg"))];
			} },
			okAction: (dialog) => {
				dialog.close();
				emitWizardEvent(dom, WizardEventType.CLOSE_DIALOG);
			}
		};
		return _updateDnsStatus(data.domainStatus).then(() => {
			if (data.domainStatus.areRecordsFine()) emitWizardEvent(dom, WizardEventType.SHOW_NEXT_PAGE);
else Dialog.showActionDialog(leaveUnfinishedDialogAttrs);
		});
	}
};
function _updateDnsStatus(domainStatus) {
	return domainStatus.loadCurrentStatus().then(() => {
		mithril_default.redraw();
	});
}
function _getDisplayableRecordValue(record) {
	if (!record.value.endsWith(".") && (record.type === DnsRecordType.DNS_RECORD_TYPE_MX || record.type === DnsRecordType.DNS_RECORD_TYPE_CNAME_DKIM || record.type === DnsRecordType.DNS_RECORD_TYPE_CNAME_MTA_STS)) return record.value + ".";
	return record.value;
}
function createDnsRecordTableN(records, refreshButtonAttrs) {
	return mithril_default(Table, {
		columnHeading: [
			"type_label",
			"dnsRecordHostOrName_label",
			"dnsRecordValueOrPointsTo_label"
		],
		addButtonAttrs: refreshButtonAttrs,
		columnWidths: [
			ColumnWidth.Small,
			ColumnWidth.Small,
			ColumnWidth.Largest
		],
		showActionButtonColumn: true,
		lines: records.map((r) => {
			return { cells: () => [
				{ main: DnsRecordTable[r.record.type] },
				{ main: r.record.subdomain ? r.record.subdomain : "@" },
				{
					main: r.record.value,
					info: r.helpInfo
				}
			] };
		})
	});
}
function renderCheckResult(domainStatus, hideRefreshButton = false) {
	const checkReturn = domainStatus.getLoadedCustomDomainCheckGetOut();
	const { requiredRecords, missingRecords, invalidRecords } = checkReturn;
	const checkResult = assertEnumValue(CustomDomainCheckResult, checkReturn.checkResult);
	if (checkResult === CustomDomainCheckResult.CUSTOM_DOMAIN_CHECK_RESULT_OK) {
		const validatedRecords = requiredRecords.map((record) => {
			const displayableRecordValue = _getDisplayableRecordValue(record);
			const helpInfo = [];
			let validatedRecord = null;
			for (let missingRecord of findDnsRecordInList(record, missingRecords)) {
				validatedRecord = record;
				if (record.type === DnsRecordType.DNS_RECORD_TYPE_TXT_DMARC) helpInfo.push(`${DnsRecordValidation.BAD} ${lang.get("recommendedDNSValue_label")}: ${displayableRecordValue}`);
else helpInfo.push(`${DnsRecordValidation.BAD} ${lang.get("addDNSValue_label")}: ${displayableRecordValue}`);
			}
			for (let invalidRecord of findDnsRecordInList(record, invalidRecords)) {
				validatedRecord = record;
				helpInfo.push(`${DnsRecordValidation.BAD} ${lang.get("removeDNSValue_label")}: ${invalidRecord.value}`);
			}
			if (validatedRecord == null) {
				validatedRecord = record;
				helpInfo.push(`${DnsRecordValidation.OK} ${lang.get("correctDNSValue_label")}`);
			}
			validatedRecord.value = displayableRecordValue;
			return {
				record: validatedRecord,
				helpInfo
			};
		});
		return [
			mithril_default(".mt-m.mb-s", lang.get("setDnsRecords_msg")),
			createDnsRecordTableN(validatedRecords, hideRefreshButton ? null : {
				title: "refresh_action",
				icon: BootIcons.Progress,
				size: ButtonSize.Compact,
				click: () => _updateDnsStatus(domainStatus)
			}),
			mithril_default(MoreInfoLink, {
				link: InfoLink.DomainInfo,
				class: "mt-m",
				isSmall: true
			})
		];
	} else {
		const errorMessageMap = {
			[CustomDomainCheckResult.CUSTOM_DOMAIN_CHECK_RESULT_OK]: "emptyString_msg",
			[CustomDomainCheckResult.CUSTOM_DOMAIN_CHECK_RESULT_DNS_LOOKUP_FAILED]: "customDomainErrorDnsLookupFailure_msg",
			[CustomDomainCheckResult.CUSTOM_DOMAIN_CHECK_RESULT_DOMAIN_NOT_FOUND]: "customDomainErrorDomainNotFound_msg",
			[CustomDomainCheckResult.CUSTOM_DOMAIN_CHECK_RESULT_NAMESERVER_NOT_FOUND]: "customDomainErrorNameserverNotFound_msg"
		};
		return lang.get(errorMessageMap[checkResult]);
	}
}
function findDnsRecordInList(record, recordList) {
	return recordList.filter((r) => r.type === record.type && r.subdomain === record.subdomain);
}
var VerifyDnsRecordsPageAttrs = class {
	data;
	constructor(domainData) {
		this.data = domainData;
	}
	headerTitle() {
		return "domainSetup_title";
	}
	nextAction(showErrorDialog) {
		return Promise.resolve(true);
	}
	isSkipAvailable() {
		return false;
	}
	isEnabled() {
		return true;
	}
};

//#endregion
//#region src/mail-app/settings/CheckDomainDnsStatusDialog.ts
assertMainOrNode();
function showDnsCheckDialog(domainStatus) {
	let dialog = Dialog.showActionDialog({
		type: DialogType.EditLarger,
		title: "checkDnsRecords_action",
		okActionTextId: "checkAgain_action",
		cancelActionTextId: "close_alt",
		child: () => renderCheckResult(domainStatus, true),
		okAction: () => {
			domainStatus.loadCurrentStatus().then(() => {
				if (domainStatus.areRecordsFine()) dialog.close();
else mithril_default.redraw();
			});
		}
	});
}

//#endregion
//#region src/mail-app/settings/RejectedSendersInfoDialog.ts
function showRejectedSendersInfoDialog(rejectedSender) {
	const actionDialogProperties = {
		title: "details_label",
		child: { view: () => {
			return [
				mithril_default(TextField, {
					label: "emailSender_label",
					value: rejectedSender.senderMailAddress,
					isReadOnly: true
				}),
				mithril_default(TextField, {
					label: "mailServer_label",
					value: `${rejectedSender.senderHostname} (${rejectedSender.senderIp})`,
					isReadOnly: true
				}),
				mithril_default(TextField, {
					label: "emailRecipient_label",
					value: rejectedSender.recipientMailAddress,
					isReadOnly: true
				}),
				mithril_default(TextField, {
					label: "rejectReason_label",
					value: rejectedSender.reason,
					isReadOnly: true
				})
			];
		} },
		okAction: null,
		allowCancel: true,
		allowOkWithReturn: false,
		cancelActionTextId: "close_alt"
	};
	Dialog.showActionDialog(actionDialogProperties);
}

//#endregion
//#region src/common/settings/mailaddress/AddAliasDialog.ts
const FAILURE_USER_DISABLED = "mailaddressaliasservice.group_disabled";
function showAddAliasDialog(model, isNewPaidPlan) {
	model.getAvailableDomains().then((domains) => {
		const hasCustomDomains = domains.some((domain) => !TUTA_MAIL_ADDRESS_DOMAINS.includes(domain.domain));
		if (model.aliasCount && filterInt(model.aliasCount.usedAliases) >= filterInt(model.aliasCount.totalAliases)) {
			if (!(isNewPaidPlan && hasCustomDomains)) {
				model.handleTooManyAliases().catch(ofClass(UpgradeRequiredError, (e) => showPlanUpgradeRequiredDialog(e.plans, e.message)));
				return;
			}
		}
		let isVerificationBusy = false;
		let mailAddress;
		let formErrorId = "mailAddressNeutral_msg";
		let formDomain = getFirstOrThrow(domains);
		if (!isNewPaidPlan && !hasCustomDomains) formDomain = domains.find((domain) => domain.domain === DEFAULT_FREE_MAIL_ADDRESS_SIGNUP_DOMAIN) ?? formDomain;
		let senderName = model.defaultSenderName();
		const addEmailAliasOkAction = (dialog) => {
			if (isVerificationBusy) return;
			if (formErrorId) {
				Dialog.message(formErrorId);
				return;
			}
			addAlias(model, mailAddress, senderName);
			dialog.close();
		};
		Dialog.showActionDialog({
			title: "addEmailAlias_label",
			child: { view: () => {
				return [
					mithril_default(SelectMailAddressForm, {
						selectedDomain: formDomain,
						availableDomains: domains,
						onValidationResult: (email, validationResult) => {
							if (validationResult.isValid) {
								mailAddress = email;
								formErrorId = null;
							} else formErrorId = validationResult.errorId;
						},
						onBusyStateChanged: (isBusy) => isVerificationBusy = isBusy,
						onDomainChanged: (domain) => {
							if (!domain.isPaid || isNewPaidPlan) formDomain = domain;
else Dialog.confirm(lang.makeTranslation("confirm_msg", `${lang.get("paidEmailDomainLegacy_msg")}\n${lang.get("changePaidPlan_msg")}`)).then(async (confirmed) => {
								if (confirmed) isNewPaidPlan = await showPlanUpgradeRequiredDialog(NewPaidPlans);
							});
						}
					}),
					mithril_default(ExpanderPanel, { expanded: TUTA_MAIL_ADDRESS_DOMAINS.includes(formDomain.domain) }, mithril_default(".pt", lang.get("permanentAliasWarning_msg"))),
					mithril_default(TextField, {
						label: "mailName_label",
						value: senderName,
						autocompleteAs: Autocomplete.username,
						oninput: (name) => senderName = name
					})
				];
			} },
			allowOkWithReturn: true,
			okAction: addEmailAliasOkAction
		});
	});
}
async function addAlias(model, alias, senderName) {
	try {
		await showProgressDialog("pleaseWait_msg", model.addAlias(alias, senderName));
	} catch (error) {
		if (error instanceof InvalidDataError) Dialog.message("mailAddressNA_msg");
else if (error instanceof PreconditionFailedError) {
			let errorMsg = error.toString();
			if (error.data === FAILURE_USER_DISABLED) errorMsg = lang.get("addAliasUserDisabled_msg");
			return Dialog.message(lang.makeTranslation("confirm_msg", errorMsg));
		} else if (error instanceof UpgradeRequiredError) showPlanUpgradeRequiredDialog(error.plans, error.message);
else throw error;
	}
}

//#endregion
//#region src/common/settings/mailaddress/MailAddressTable.ts
assertMainOrNode();
var MailAddressTable = class {
	view({ attrs }) {
		const { model } = attrs;
		if (attrs.expanded) model.init();
		const addAliasButtonAttrs = model.userCanModifyAliases() ? {
			title: "addEmailAlias_label",
			click: () => this.onAddAlias(attrs),
			icon: Icons.Add,
			size: ButtonSize.Compact
		} : null;
		return [
			mithril_default(".flex-space-between.items-center.mt-l.mb-s", [mithril_default(".h4", lang.get("mailAddresses_label")), mithril_default(ExpanderButton, {
				label: "show_action",
				expanded: attrs.expanded,
				onExpandedChange: (v) => {
					attrs.onExpanded(v);
				}
			})]),
			mithril_default(ExpanderPanel, { expanded: attrs.expanded }, mithril_default(Table, {
				columnHeading: ["mailAddress_label", "state_label"],
				columnWidths: [ColumnWidth.Largest, ColumnWidth.Small],
				showActionButtonColumn: true,
				addButtonAttrs: addAliasButtonAttrs,
				lines: getAliasLineAttrs(attrs)
			})),
			model.aliasCount ? [mithril_default(".mt-s", lang.get("amountUsedAndActivatedOf_label", {
				"{used}": model.aliasCount.usedAliases,
				"{active}": model.aliasCount.enabledAliases,
				"{totalAmount}": model.aliasCount.totalAliases
			})), mithril_default(".small.mt-s", lang.get(model.aliasLimitIncludesCustomDomains() ? "mailAddressInfoLegacy_msg" : "mailAddressInfo_msg"))] : null
		];
	}
	async onAddAlias(attrs) {
		const userController = locator.logins.getUserController();
		if (userController.isFreeAccount()) showNotAvailableForFreeDialog();
else {
			const isNewPaidPlan = await userController.isNewPaidPlan();
			showAddAliasDialog(attrs.model, isNewPaidPlan);
		}
	}
};
function setNameDropdownButton(model, addressInfo) {
	return {
		label: "setSenderName_action",
		click: () => showSenderNameChangeDialog(model, addressInfo)
	};
}
function addressDropdownButtons(attrs, addressInfo) {
	switch (addressInfo.status) {
		case AddressStatus.Primary: return [setNameDropdownButton(attrs.model, addressInfo)];
		case AddressStatus.Alias: {
			const buttons = [setNameDropdownButton(attrs.model, addressInfo)];
			if (attrs.model.userCanModifyAliases()) buttons.push({
				label: "deactivate_action",
				click: () => {
					switchAliasStatus(addressInfo, attrs);
				}
			});
			return buttons;
		}
		case AddressStatus.DisabledAlias: return attrs.model.userCanModifyAliases() ? [{
			label: "activate_action",
			click: () => {
				switchAliasStatus(addressInfo, attrs);
			}
		}] : [];
		case AddressStatus.Custom: {
			const buttons = [setNameDropdownButton(attrs.model, addressInfo)];
			if (attrs.model.userCanModifyAliases()) buttons.push({
				label: "delete_action",
				click: () => {
					switchAliasStatus(addressInfo, attrs);
				}
			});
			return buttons;
		}
	}
}
function statusLabel(addressInfo) {
	switch (addressInfo.status) {
		case AddressStatus.Primary: return lang.get("primaryMailAddress_label");
		case AddressStatus.Alias:
		case AddressStatus.Custom: return lang.get("activated_label");
		case AddressStatus.DisabledAlias: return lang.get("deactivated_label");
	}
}
function getAliasLineAttrs(attrs) {
	return attrs.model.addresses().map((addressInfo) => {
		const dropdownButtons = addressDropdownButtons(attrs, addressInfo);
		const actionButtonAttrs = dropdownButtons.length === 0 ? null : attachDropdown({
			mainButtonAttrs: {
				title: "edit_action",
				icon: Icons.More,
				size: ButtonSize.Compact
			},
			showDropdown: () => true,
			width: 250,
			childAttrs: () => dropdownButtons
		});
		return {
			cells: () => [{
				main: addressInfo.address,
				info: [addressInfo.name]
			}, { main: statusLabel(addressInfo) }],
			actionButtonAttrs
		};
	});
}
async function switchAliasStatus(alias, attrs) {
	const deactivateOrDeleteAlias = alias.status !== AddressStatus.DisabledAlias;
	if (deactivateOrDeleteAlias) {
		const message = alias.status === AddressStatus.Custom ? "deleteAlias_msg" : "deactivateAlias_msg";
		const confirmed = await Dialog.confirm(lang.getTranslation(message, { "{1}": alias.address }));
		if (!confirmed) return;
	}
	const updateModel = attrs.model.setAliasStatus(alias.address, !deactivateOrDeleteAlias).catch(ofClass(LimitReachedError, () => attrs.model.handleTooManyAliases())).catch(ofClass(UpgradeRequiredError, (e) => showPlanUpgradeRequiredDialog(e.plans, e.message)));
	await showProgressDialog("pleaseWait_msg", updateModel);
}
function showSenderNameChangeDialog(model, alias) {
	Dialog.showTextInputDialog({
		title: "edit_action",
		label: "mailName_label",
		infoMsgId: lang.makeTranslation("alias_addr", alias.address),
		defaultValue: alias.name
	}).then((newName) => showProgressDialog("pleaseWait_msg", model.setAliasName(alias.address, newName)));
}

//#endregion
//#region src/mail-app/settings/emaildomain/AddEmailAddressesPage.ts
assertMainOrNode();
var AddEmailAddressesPage = class {
	oncreate({ attrs }) {
		attrs.data.editAliasFormAttrs.model.init();
	}
	onremove({ attrs }) {}
	view(vnode) {
		const a = vnode.attrs;
		const aliasesTableAttrs = {
			columnWidths: [ColumnWidth.Largest],
			showActionButtonColumn: true,
			addButtonAttrs: null,
			lines: getAliasLineAttrs(a.data.editAliasFormAttrs).map((row) => {
				return {
					actionButtonAttrs: row.actionButtonAttrs ?? null,
					cells: row.cells
				};
			})
		};
		let domainInfo = {
			domain: a.data.domain(),
			isPaid: false
		};
		const mailFormAttrs = {
			selectedDomain: domainInfo,
			availableDomains: [domainInfo],
			onValidationResult: (email, validationResult) => {
				if (validationResult.isValid) {
					a.mailAddress = email;
					a.errorMessageId = null;
				} else a.errorMessageId = validationResult.errorId;
			},
			onDomainChanged: (domain) => domainInfo = domain,
			onBusyStateChanged: (isBusy) => a.isMailVerificationBusy = isBusy,
			injectionsRightButtonAttrs: {
				title: "addEmailAlias_label",
				icon: Icons.Add,
				size: ButtonSize.Compact,
				click: () => vnode.attrs.addAliasFromInput().then(() => {
					mithril_default.redraw();
				})
			}
		};
		return mithril_default("", [
			mithril_default("h4.mt-l.text-center", lang.get("addCustomDomainAddresses_title")),
			mithril_default(".mt.mb", lang.get("addCustomDomainAddAdresses_msg")),
			mithril_default(SelectMailAddressForm, mailFormAttrs),
			locator.logins.getUserController().userGroupInfo.mailAddressAliases.length ? mithril_default(Table, aliasesTableAttrs) : null,
			mithril_default(".flex-center.full-width.pt-l.mb-l", mithril_default(LoginButton, {
				label: "next_action",
				class: "small-login-button",
				onclick: () => emitWizardEvent(vnode.dom, WizardEventType.SHOW_NEXT_PAGE)
			}))
		]);
	}
};
var AddEmailAddressesPageAttrs = class {
	data;
	mailAddress;
	errorMessageId;
	isMailVerificationBusy;
	constructor(domainData) {
		this.data = domainData;
		this.mailAddress = "";
		this.errorMessageId = "mailAddressNeutral_msg";
		this.isMailVerificationBusy = false;
	}
	headerTitle() {
		return "domainSetup_title";
	}
	nextAction(showErrorDialog) {
		if (this.isMailVerificationBusy) return Promise.resolve(false);
		if (showErrorDialog && this.errorMessageId) return this.addAliasFromInput();
		const checkMailAddresses = Promise.resolve().then(() => {
			const hasAliases = locator.logins.getUserController().userGroupInfo.mailAddressAliases.some((alias) => alias.mailAddress.endsWith(`@${this.data.domain()}`));
			if (hasAliases) return true;
else return locator.entityClient.load(CustomerTypeRef, neverNull(locator.logins.getUserController().user.customer)).then((customer) => locator.entityClient.loadAll(GroupInfoTypeRef, customer.userGroups)).then((allUserGroupInfos) => {
				return allUserGroupInfos.some((u) => neverNull(u.mailAddress).endsWith("@" + this.data.domain()) || u.mailAddressAliases.some((a) => neverNull(a.mailAddress).endsWith("@" + this.data.domain())));
			});
		});
		return showProgressDialog("pleaseWait_msg", checkMailAddresses).then((nextAllowed) => {
			if (showErrorDialog && !nextAllowed) Dialog.message("enforceAliasSetup_msg");
			return nextAllowed;
		});
	}
	isSkipAvailable() {
		return true;
	}
	isEnabled() {
		return true;
	}
	/**
	* Try to add an alias from input field and return true if it succeeded
	*/
	async addAliasFromInput() {
		const error = this.errorMessageId;
		if (error) {
			await Dialog.message(error);
			return false;
		} else {
			const mailAddressTableModel = this.data.editAliasFormAttrs.model;
			try {
				await showProgressDialog(
					"pleaseWait_msg",
					// Using default sender name for now
					mailAddressTableModel.addAlias(this.mailAddress, mailAddressTableModel.defaultSenderName())
);
				return true;
			} catch (e) {
				if (e instanceof InvalidDataError) await Dialog.message("mailAddressNA_msg");
else if (e instanceof LimitReachedError) {} else if (e instanceof UpgradeRequiredError) await showPlanUpgradeRequiredDialog(e.plans, e.message);
else throw e;
				return false;
			}
		}
	}
};

//#endregion
//#region src/mail-app/settings/emaildomain/VerifyOwnershipPage.ts
assertMainOrNode();
let CustomDomainFailureReasons = function(CustomDomainFailureReasons$1) {
	CustomDomainFailureReasons$1["LIMIT_REACHED"] = "customdomainservice.limit_reached";
	CustomDomainFailureReasons$1["DOMAIN_IN_USE"] = "customdomainservice.domain_in_use";
	return CustomDomainFailureReasons$1;
}({});
var VerifyOwnershipPage = class {
	dom;
	oncreate(vnode) {
		this.dom = vnode.dom;
		const { data } = vnode.attrs;
		locator.customerFacade.getDomainValidationRecord(data.domain()).then((recordValue) => {
			data.expectedVerificationRecord.value = recordValue;
			mithril_default.redraw();
		});
	}
	view(vnode) {
		const a = vnode.attrs;
		return [
			mithril_default("h4.mt-l.text-center", lang.get("verifyDomainOwnership_title")),
			mithril_default("p", lang.get("verifyDomainOwnershipExplanation_msg", { "{domain}": a.data.domain() })),
			mithril_default("p", lang.get("verifyOwnershipTXTrecord_msg")),
			createDnsRecordTable([vnode.attrs.data.expectedVerificationRecord]),
			mithril_default(".flex-center.full-width.pt-l.mb-l", mithril_default(LoginButton, {
				label: "next_action",
				class: "small-login-button",
				onclick: () => emitWizardEvent(this.dom, WizardEventType.SHOW_NEXT_PAGE)
			}))
		];
	}
};
var VerifyOwnershipPageAttrs = class {
	data;
	constructor(domainData) {
		this.data = domainData;
	}
	headerTitle() {
		return "domainSetup_title";
	}
	nextAction(showErrorDialog = true) {
		return showProgressDialog("pleaseWait_msg", locator.customerFacade.addDomain(this.data.domain()).then((result) => {
			const validationResult = assertEnumValue(CustomDomainValidationResult, result.validationResult);
			if (validationResult === CustomDomainValidationResult.CUSTOM_DOMAIN_VALIDATION_RESULT_OK) return null;
else if (validationResult === CustomDomainValidationResult.CUSTOM_DOMAIN_VALIDATION_RESULT_DOMAIN_NOT_AVAILABLE) {
				let customDomainInfos = getCustomMailDomains(this.data.customerInfo);
				if (customDomainInfos.some((domainInfo) => domainInfo.domain === this.data.domain())) return null;
				return () => lang.get("customDomainErrorDomainNotAvailable_msg");
			} else {
				const errorMessageMap = {
					[CustomDomainValidationResult.CUSTOM_DOMAIN_VALIDATION_RESULT_OK]: "emptyString_msg",
					[CustomDomainValidationResult.CUSTOM_DOMAIN_VALIDATION_RESULT_DNS_LOOKUP_FAILED]: "customDomainErrorDnsLookupFailure_msg",
					[CustomDomainValidationResult.CUSTOM_DOMAIN_VALIDATION_RESULT_DOMAIN_NOT_FOUND]: "customDomainErrorDomainNotFound_msg",
					[CustomDomainValidationResult.CUSTOM_DOMAIN_VALIDATION_RESULT_NAMESERVER_NOT_FOUND]: "customDomainErrorNameserverNotFound_msg",
					[CustomDomainValidationResult.CUSTOM_DOMAIN_VALIDATION_RESULT_DOMAIN_NOT_AVAILABLE]: "customDomainErrorDomainNotAvailable_msg",
					[CustomDomainValidationResult.CUSTOM_DOMAIN_VALIDATION_RESULT_VALIDATION_FAILED]: "customDomainErrorValidationFailed_msg"
				};
				return lang.makeTranslation("error_msg", lang.get(errorMessageMap[validationResult]) + (result.invalidDnsRecords.length > 0 ? " " + lang.get("customDomainErrorOtherTxtRecords_msg") + "\n" + result.invalidDnsRecords.map((r) => r.value).join("\n") : ""));
			}
		})).then((message) => {
			if (message) return showErrorDialog ? Dialog.message(downcast(message)).then(() => false) : false;
			return true;
		}).catch(ofClass(PreconditionFailedError, async (e) => {
			if (e.data === CustomDomainFailureReasons.LIMIT_REACHED) {
				const nbrOfCustomDomains = this.data.customerInfo.domainInfos.filter((domainInfo) => domainInfo.whitelabelConfig == null).length;
				const plans = await getAvailableMatchingPlans(locator.serviceExecutor, (config) => {
					if (config.customDomainType in CustomDomainTypeCount) {
						const planDomains = CustomDomainTypeCount[config.customDomainType];
						return planDomains === -1 || planDomains > nbrOfCustomDomains;
					}
					return false;
				});
				if (isEmpty(plans)) Dialog.message("tooManyCustomDomains_msg");
else showPlanUpgradeRequiredDialog(plans, "moreCustomDomainsRequired_msg");
			} else Dialog.message(lang.makeTranslation("error_msg", e.toString()));
			return false;
		}));
	}
	isSkipAvailable() {
		return false;
	}
	isEnabled() {
		return true;
	}
};

//#endregion
//#region src/mail-app/settings/emaildomain/EnterDomainPage.ts
assertMainOrNode();
var EnterDomainPage = class {
	dom = null;
	oncreate(vnode) {
		this.dom = vnode.dom;
	}
	view(vnode) {
		return mithril_default("", [
			mithril_default("h4.mt-l.text-center", lang.get("enterCustomDomain_title")),
			mithril_default(".mt", lang.get("enterDomainIntroduction_msg")),
			mithril_default(".mt", lang.get("enterDomainGetReady_msg")),
			mithril_default(TextField, {
				label: "customDomain_label",
				autocapitalize: Autocapitalize.none,
				value: vnode.attrs.data.domain(),
				oninput: vnode.attrs.data.domain,
				helpLabel: () => {
					const domain = vnode.attrs.data.domain();
					const errorMsg = validateDomain(domain);
					if (errorMsg) return lang.get(errorMsg);
else return lang.get("enterDomainFieldHelp_label", { "{domain}": domain.toLocaleLowerCase().trim() });
				}
			}),
			mithril_default(".flex-center.full-width.pt-l.mb-l", mithril_default(LoginButton, {
				label: "next_action",
				class: "small-login-button",
				onclick: () => emitWizardEvent(this.dom, WizardEventType.SHOW_NEXT_PAGE)
			}))
		]);
	}
};
function validateDomain(domain) {
	let cleanDomainName = domain.toLocaleLowerCase().trim();
	if (!cleanDomainName.length) return "customDomainNeutral_msg";
	if (!isDomainName(cleanDomainName)) return "customDomainInvalid_msg";
else return null;
}
var EnterDomainPageAttrs = class {
	data;
	constructor(domainData) {
		this.data = domainData;
	}
	headerTitle() {
		return "domainSetup_title";
	}
	nextAction(showErrorDialog = true) {
		const errorMsg = validateDomain(this.data.domain());
		if (errorMsg) return showErrorDialog ? Dialog.message(errorMsg).then(() => false) : Promise.resolve(false);
else return Promise.resolve(true);
	}
	isSkipAvailable() {
		return false;
	}
	isEnabled() {
		return true;
	}
};

//#endregion
//#region src/mail-app/settings/emaildomain/AddDomainWizard.ts
var import_stream$12 = __toESM(require_stream(), 1);
assertMainOrNode();
function showAddDomainWizard(domain, customerInfo, mailAddressTableModel) {
	let mailAddressTableExpanded = false;
	const domainData = {
		domain: (0, import_stream$12.default)(domain),
		customerInfo,
		expectedVerificationRecord: createDnsRecord({
			subdomain: null,
			type: DnsRecordType.DNS_RECORD_TYPE_TXT_SPF,
			value: ""
		}),
		editAliasFormAttrs: {
			model: mailAddressTableModel,
			expanded: mailAddressTableExpanded,
			onExpanded: (newExpanded) => mailAddressTableExpanded = newExpanded
		},
		domainStatus: new DomainDnsStatus(domain)
	};
	const wizardPages = [
		wizardPageWrapper(EnterDomainPage, new EnterDomainPageAttrs(domainData)),
		wizardPageWrapper(VerifyOwnershipPage, new VerifyOwnershipPageAttrs(domainData)),
		wizardPageWrapper(AddEmailAddressesPage, new AddEmailAddressesPageAttrs(domainData)),
		wizardPageWrapper(VerifyDnsRecordsPage, new VerifyDnsRecordsPageAttrs(domainData))
	];
	return new Promise((resolve) => {
		const wizardBuilder = createWizardDialog(domainData, wizardPages, () => {
			mailAddressTableModel.dispose();
			resolve();
			return Promise.resolve();
		}, DialogType.EditLarge);
		const wizard = wizardBuilder.dialog;
		const wizardAttrs = wizardBuilder.attrs;
		wizard.show();
		if (domain.length) {
			wizardAttrs.goToNextPageOrCloseWizard();
			wizardAttrs.goToNextPageOrCloseWizard();
			if (wizardAttrs.currentPage) wizardAttrs.currentPage.attrs.nextAction(false).then((ready) => {
				if (ready) wizardAttrs.goToNextPageOrCloseWizard();
			});
		}
	});
}

//#endregion
//#region src/common/settings/ExpandableTable.ts
var import_stream$11 = __toESM(require_stream(), 1);
var ExpandableTable = class {
	expanded;
	constructor() {
		this.expanded = (0, import_stream$11.default)(false);
	}
	view(vnode) {
		const { title, table, infoLinkId, infoMsg, expanded, onExpand } = vnode.attrs;
		return mithril_default(SettingsExpander, {
			title,
			infoLinkId,
			infoMsg,
			onExpand,
			expanded: expanded || this.expanded
		}, mithril_default(Table, table));
	}
};

//#endregion
//#region src/common/subscription/DeleteAccountDialog.ts
function showDeleteAccountDialog(surveyData = null) {
	let takeover = "";
	let password = "";
	const userId = getEtId(locator.logins.getUserController().user);
	Dialog.showActionDialog({
		title: "adminDeleteAccount_action",
		child: { view: () => mithril_default("#delete-account-dialog", [!(isIOSApp() && client.isCalendarApp()) ? mithril_default(TextField, {
			label: "targetAddress_label",
			value: takeover,
			type: TextFieldType.Email,
			oninput: (value) => takeover = value,
			helpLabel: () => lang.get("takeoverMailAddressInfo_msg")
		}) : null, mithril_default(PasswordField, {
			value: password,
			autocompleteAs: Autocomplete.currentPassword,
			oninput: (value) => password = value,
			status: {
				type: "neutral",
				text: "passwordEnterNeutral_msg"
			}
		})]) },
		okAction: async () => {
			const isDeleted = await deleteAccount(takeover, password, surveyData);
			if (isDeleted) {
				await locator.credentialsProvider.deleteByUserId(userId);
				mithril_default.route.set("/login", { noAutoLogin: true });
			}
		},
		allowCancel: true,
		okActionTextId: "delete_action"
	});
}
async function deleteAccount(takeover, password, surveyData = null) {
	const cleanedTakeover = takeover === "" ? "" : getCleanedMailAddress(takeover);
	if (cleanedTakeover === null) {
		await Dialog.message("mailAddressInvalid_msg");
		return false;
	} else {
		const message = lang.makeTranslation("confirm_msg", cleanedTakeover === "" ? lang.get("deleteAccountConfirm_msg") : lang.get("deleteAccountWithTakeoverConfirm_msg", { "{1}": cleanedTakeover }));
		const ok = await Dialog.confirm(message);
		if (!ok) return false;
		await locator.connectivityModel.close(CloseEventBusOption.Terminate);
		try {
			await locator.loginFacade.deleteAccount(password, neverNull(cleanedTakeover), surveyData);
			return true;
		} catch (e) {
			if (e instanceof PreconditionFailedError) await Dialog.message("passwordWrongInvalid_msg");
			if (e instanceof InvalidDataError) await Dialog.message("takeoverAccountInvalid_msg");
			if (e instanceof LockedError) await Dialog.message("operationStillActive_msg");
			return false;
		}
	}
}

//#endregion
//#region src/common/settings/AccountMaintenanceSettings.ts
var import_stream$10 = __toESM(require_stream(), 1);
var AccountMaintenanceSettings = class {
	requirePasswordUpdateAfterReset = false;
	saveIpAddress = false;
	usageDataExpanded = (0, import_stream$10.default)(false);
	deleteAccountExpanded = (0, import_stream$10.default)(false);
	auditLogLines = [];
	auditLogLoaded = false;
	customer = null;
	customerInfo = new LazyLoaded(() => locator.logins.getUserController().loadCustomerInfo());
	customerProperties = new LazyLoaded(() => locator.entityClient.load(CustomerTypeRef, neverNull(locator.logins.getUserController().user.customer)).then((customer) => locator.entityClient.load(CustomerPropertiesTypeRef, neverNull(customer.properties))));
	constructor(vnode) {
		vnode.attrs.customerServerProperties.map((props) => {
			this.requirePasswordUpdateAfterReset = props.requirePasswordUpdateAfterReset;
			this.saveIpAddress = props.saveEncryptedIpAddressInSession;
		});
		this.customerProperties.getAsync().then(mithril_default.redraw);
		vnode.attrs.setOnUpdateHandler((updates) => this.handleEventUpdates(updates));
		this.view = this.view.bind(this);
		this.updateAuditLog();
	}
	view({ attrs }) {
		const auditLogTableAttrs = {
			columnHeading: [
				"action_label",
				"modified_label",
				"time_label"
			],
			columnWidths: [
				ColumnWidth.Largest,
				ColumnWidth.Largest,
				ColumnWidth.Small
			],
			showActionButtonColumn: true,
			lines: this.auditLogLines,
			addButtonAttrs: {
				title: "refresh_action",
				click: () => showProgressDialog("loading_msg", this.updateAuditLog()).then(() => mithril_default.redraw()),
				icon: BootIcons.Progress,
				size: ButtonSize.Compact
			}
		};
		return [
			mithril_default(".mt-l", [
				mithril_default(".h4", lang.get("security_title")),
				mithril_default(DropDownSelector, {
					label: "saveEncryptedIpAddress_title",
					helpLabel: () => lang.get("saveEncryptedIpAddress_label"),
					selectedValue: this.saveIpAddress,
					selectionChangedHandler: (value) => {
						const newProps = Object.assign({}, attrs.customerServerProperties(), { saveEncryptedIpAddressInSession: value });
						locator.entityClient.update(newProps);
					},
					items: [{
						name: lang.get("yes_label"),
						value: true
					}, {
						name: lang.get("no_label"),
						value: false
					}],
					dropdownWidth: 250
				}),
				locator.logins.getUserController().isGlobalAdmin() ? mithril_default("", [locator.logins.getUserController().isPremiumAccount() ? mithril_default(DropDownSelector, {
					label: "enforcePasswordUpdate_title",
					helpLabel: () => lang.get("enforcePasswordUpdate_msg"),
					selectedValue: this.requirePasswordUpdateAfterReset,
					selectionChangedHandler: (value) => {
						const newProps = Object.assign({}, attrs.customerServerProperties(), { requirePasswordUpdateAfterReset: value });
						locator.entityClient.update(newProps);
					},
					items: [{
						name: lang.get("yes_label"),
						value: true
					}, {
						name: lang.get("no_label"),
						value: false
					}],
					dropdownWidth: 250
				}) : null, this.customer ? mithril_default(".mt-l", mithril_default(ExpandableTable, {
					title: "auditLog_title",
					table: auditLogTableAttrs,
					infoMsg: "auditLogInfo_msg",
					onExpand: () => {
						if (!this.auditLogLoaded) showProgressDialog("loading_msg", this.updateAuditLog()).then(() => mithril_default.redraw());
					}
				})) : null]) : null
			]),
			locator.logins.getUserController().isPremiumAccount() ? mithril_default(SettingsExpander, {
				title: "usageData_label",
				expanded: this.usageDataExpanded
			}, this.customerProperties.isLoaded() ? mithril_default(DropDownSelector, {
				label: "customerUsageDataOptOut_label",
				items: [{
					name: lang.get("customerUsageDataGloballyDeactivated_label"),
					value: true
				}, {
					name: lang.get("customerUsageDataGloballyPossible_label"),
					value: false
				}],
				selectedValue: this.customerProperties.getSync().usageDataOptedOut,
				selectionChangedHandler: (v) => {
					if (this.customerProperties.isLoaded()) {
						const customerProps = this.customerProperties.getSync();
						customerProps.usageDataOptedOut = v;
						locator.entityClient.update(customerProps);
					}
				},
				dropdownWidth: 250
			}) : null) : null,
			mithril_default(".mb-l", mithril_default(SettingsExpander, {
				title: "adminDeleteAccount_action",
				buttonText: "adminDeleteAccount_action",
				expanded: this.deleteAccountExpanded
			}, mithril_default(".flex-center", mithril_default("", { style: { width: "200px" } }, mithril_default(LoginButton, {
				label: "adminDeleteAccount_action",
				onclick: () => {
					const isPremium = locator.logins.getUserController().isPremiumAccount();
					showLeavingUserSurveyWizard(isPremium, false).then((reason) => {
						if (reason.submitted && reason.category && reason.reason) {
							const surveyData = createSurveyData({
								category: reason.category,
								details: reason.details,
								reason: reason.reason,
								version: SURVEY_VERSION_NUMBER
							});
							showDeleteAccountDialog(surveyData);
						} else showDeleteAccountDialog();
					});
				}
			})))))
		];
	}
	updateAuditLog() {
		return locator.logins.getUserController().loadCustomer().then((customer) => {
			this.customer = customer;
			return locator.entityClient.loadRange(AuditLogEntryTypeRef, neverNull(customer.auditLog).items, GENERATED_MAX_ID, 200, true).then((auditLog) => {
				this.auditLogLoaded = true;
				this.auditLogLines = auditLog.map((auditLogEntry) => {
					return {
						cells: [
							auditLogEntry.action,
							auditLogEntry.modifiedEntity,
							formatDateTimeFromYesterdayOn(auditLogEntry.date)
						],
						actionButtonAttrs: {
							title: "showMore_action",
							icon: Icons.More,
							click: () => this.showAuditLogDetails(auditLogEntry, customer),
							size: ButtonSize.Compact
						}
					};
				});
			}).finally(mithril_default.redraw);
		});
	}
	showAuditLogDetails(entry, customer) {
		let modifiedGroupInfo = (0, import_stream$10.default)();
		let groupInfo = (0, import_stream$10.default)();
		let groupInfoLoadingPromises = [];
		if (entry.modifiedGroupInfo) groupInfoLoadingPromises.push(locator.entityClient.load(GroupInfoTypeRef, entry.modifiedGroupInfo).then((gi) => {
			modifiedGroupInfo(gi);
		}).catch(ofClass(NotAuthorizedError, () => {})));
		if (entry.groupInfo) groupInfoLoadingPromises.push(locator.entityClient.load(GroupInfoTypeRef, entry.groupInfo).then((gi) => {
			groupInfo(gi);
		}).catch(ofClass(NotAuthorizedError, () => {})));
		Promise.all(groupInfoLoadingPromises).then(() => {
			const groupInfoValue = groupInfo();
			let dialog = Dialog.showActionDialog({
				title: "auditLog_title",
				child: { view: () => mithril_default("table.pt", [
					mithril_default("tr", [mithril_default("td", lang.get("action_label")), mithril_default("td.pl", entry.action)]),
					mithril_default("tr", [mithril_default("td", lang.get("actor_label")), mithril_default("td.pl", entry.actorMailAddress)]),
					mithril_default("tr", [mithril_default("td", lang.get("IpAddress_label")), mithril_default("td.pl", entry.actorIpAddress ? entry.actorIpAddress : "")]),
					mithril_default("tr", [mithril_default("td", lang.get("modified_label")), mithril_default("td.pl", modifiedGroupInfo() && this.getGroupInfoDisplayText(modifiedGroupInfo()) ? this.getGroupInfoDisplayText(modifiedGroupInfo()) : entry.modifiedEntity)]),
					groupInfoValue ? mithril_default("tr", [mithril_default("td", lang.get("group_label")), mithril_default("td.pl", customer.adminGroup === groupInfoValue.group ? lang.get("globalAdmin_label") : this.getGroupInfoDisplayText(groupInfoValue))]) : null,
					mithril_default("tr", [mithril_default("td", lang.get("time_label")), mithril_default("td.pl", formatDateTime(entry.date))])
				]) },
				allowOkWithReturn: true,
				okAction: () => dialog.close(),
				allowCancel: false
			});
		});
	}
	getGroupInfoDisplayText(groupInfo) {
		if (groupInfo.name && groupInfo.mailAddress) return groupInfo.name + " <" + groupInfo.mailAddress + ">";
else if (groupInfo.mailAddress) return groupInfo.mailAddress;
else return groupInfo.name;
	}
	handleEventUpdates(updates) {
		return pMap(updates, (update) => {
			if (isUpdateForTypeRef(AuditLogEntryTypeRef, update)) return this.updateAuditLog();
else if (isUpdateForTypeRef(CustomerPropertiesTypeRef, update)) {
				this.customerProperties.reset();
				this.customerProperties.getAsync().then(mithril_default.redraw);
			}
		}).then(noOp);
	}
};

//#endregion
//#region src/mail-app/settings/GlobalSettingsViewer.ts
var import_stream$9 = __toESM(require_stream(), 1);
assertMainOrNode();
const REJECTED_SENDERS_TO_LOAD_MS = 5 * DAY_IN_MILLIS;
const REJECTED_SENDERS_MAX_NUMBER = 100;
var GlobalSettingsViewer = class {
	props = (0, import_stream$9.default)();
	customer = null;
	customerInfo = new LazyLoaded(() => locator.logins.getUserController().loadCustomerInfo());
	accountMaintenanceUpdateNotifier = null;
	spamRuleLines = [];
	rejectedSenderLines = [];
	customDomainLines = [];
	/**
	* caches the current status for the custom email domains
	* map from domain name to status
	*/
	domainDnsStatus = {};
	customerProperties = new LazyLoaded(() => locator.entityClient.load(CustomerTypeRef, neverNull(locator.logins.getUserController().user.customer)).then((customer) => locator.entityClient.load(CustomerPropertiesTypeRef, neverNull(customer.properties))));
	constructor() {
		this.customerProperties.getAsync().then(mithril_default.redraw);
		this.updateCustomerServerProperties();
		this.view = this.view.bind(this);
		this.updateDomains();
	}
	view() {
		const spamRuleTableAttrs = {
			columnHeading: ["emailSender_label", "emailSenderRule_label"],
			columnWidths: [ColumnWidth.Largest, ColumnWidth.Small],
			showActionButtonColumn: true,
			addButtonAttrs: {
				title: "addSpamRule_action",
				click: () => showAddSpamRuleDialog(null),
				icon: Icons.Add,
				size: ButtonSize.Compact
			},
			lines: this.spamRuleLines
		};
		const rejectedSenderTableAttrs = {
			columnHeading: ["emailSender_label"],
			columnWidths: [ColumnWidth.Largest],
			showActionButtonColumn: true,
			addButtonAttrs: {
				title: "refresh_action",
				click: () => {
					this.updateRejectedSenderTable();
				},
				icon: BootIcons.Progress,
				size: ButtonSize.Compact
			},
			lines: this.rejectedSenderLines
		};
		const customDomainTableAttrs = {
			columnHeading: ["adminCustomDomain_label", "catchAllMailbox_label"],
			columnWidths: [ColumnWidth.Largest, ColumnWidth.Small],
			showActionButtonColumn: true,
			addButtonAttrs: {
				title: "addCustomDomain_action",
				click: async () => {
					const customerInfo = await this.customerInfo.getAsync();
					if (locator.logins.getUserController().isFreeAccount()) showNotAvailableForFreeDialog();
else {
						const mailAddressTableModel = await locator.mailAddressTableModelForOwnMailbox();
						await showAddDomainWizard("", customerInfo, mailAddressTableModel);
						this.updateDomains();
					}
				},
				icon: Icons.Add,
				size: ButtonSize.Compact
			},
			lines: this.customDomainLines
		};
		return [mithril_default("#global-settings.fill-absolute.scroll.plr-l", [
			mithril_default(ExpandableTable, {
				title: "adminSpam_action",
				table: spamRuleTableAttrs,
				infoMsg: "adminSpamRuleInfo_msg",
				infoLinkId: InfoLink.SpamRules
			}),
			mithril_default(ExpandableTable, {
				title: "rejectedEmails_label",
				table: rejectedSenderTableAttrs,
				infoMsg: "rejectedSenderListInfo_msg",
				onExpand: () => this.updateRejectedSenderTable()
			}),
			mithril_default(ExpandableTable, {
				title: "customEmailDomains_label",
				table: customDomainTableAttrs,
				infoMsg: "moreInfo_msg",
				infoLinkId: InfoLink.DomainInfo
			}),
			mithril_default(AccountMaintenanceSettings, {
				customerServerProperties: this.props,
				setOnUpdateHandler: (fn) => {
					this.accountMaintenanceUpdateNotifier = fn;
				}
			})
		])];
	}
	updateCustomerServerProperties() {
		return locator.customerFacade.loadCustomerServerProperties().then((props) => {
			this.props(props);
			const fieldToName = getSpamRuleFieldToName();
			this.spamRuleLines = props.emailSenderList.map((rule, index) => {
				return {
					cells: () => [{
						main: fieldToName[getSpamRuleField(rule)],
						info: [rule.value]
					}, { main: neverNull(getSpamRuleTypeNameMapping().find((t) => t.value === rule.type)).name }],
					actionButtonAttrs: createRowActions({
						getArray: () => props.emailSenderList,
						updateInstance: () => locator.entityClient.update(props).catch(ofClass(LockedError, noOp))
					}, rule, index, [{
						label: "edit_action",
						click: () => showAddSpamRuleDialog(rule)
					}])
				};
			});
			mithril_default.redraw();
		});
	}
	updateRejectedSenderTable() {
		const customer = this.customer;
		if (customer && customer.rejectedSenders) {
			const senderListId = customer.rejectedSenders.items;
			const startId = timestampToGeneratedId(Date.now() - REJECTED_SENDERS_TO_LOAD_MS);
			const loadingPromise = locator.entityClient.loadRange(RejectedSenderTypeRef, senderListId, startId, REJECTED_SENDERS_MAX_NUMBER, false).then((rejectedSenders) => {
				if (REJECTED_SENDERS_MAX_NUMBER === rejectedSenders.length) return locator.entityClient.loadRange(RejectedSenderTypeRef, senderListId, GENERATED_MAX_ID, REJECTED_SENDERS_MAX_NUMBER, true);
else return rejectedSenders.sort(sortCompareByReverseId);
			}).then((rejectedSenders) => {
				this.rejectedSenderLines = rejectedSenders.map((rejectedSender) => {
					const rejectDate = formatDateTime(new Date(generatedIdToTimestamp(getElementId(rejectedSender))));
					return {
						cells: () => {
							return [{
								main: rejectedSender.senderMailAddress,
								info: [`${rejectDate}, ${rejectedSender.senderHostname} (${rejectedSender.senderIp})`],
								click: () => showRejectedSendersInfoDialog(rejectedSender)
							}];
						},
						actionButtonAttrs: attachDropdown({
							mainButtonAttrs: {
								title: "showMore_action",
								icon: Icons.More,
								size: ButtonSize.Compact
							},
							childAttrs: () => [{
								label: "showRejectReason_action",
								click: () => showRejectedSendersInfoDialog(rejectedSender)
							}, {
								label: "addSpamRule_action",
								click: () => {
									const domainPart = getDomainPart(rejectedSender.senderMailAddress);
									showAddSpamRuleDialog(createEmailSenderListElement({
										value: domainPart ? domainPart : "",
										type: SpamRuleType.WHITELIST,
										field: SpamRuleFieldType.FROM,
										hashedValue: ""
									}));
								}
							}]
						})
					};
				});
			});
			showProgressDialog("loading_msg", loadingPromise).then(() => mithril_default.redraw());
		}
	}
	async updateDomains() {
		const customerInfo = await this.customerInfo.getAsync();
		let customDomainInfos = getCustomMailDomains(customerInfo);
		for (const domain of Object.keys(this.domainDnsStatus)) if (!customDomainInfos.some((di) => di.domain === domain)) delete this.domainDnsStatus[domain];
		return pMap(customDomainInfos, (domainInfo) => {
			if (!this.domainDnsStatus[domainInfo.domain]) {
				this.domainDnsStatus[domainInfo.domain] = new DomainDnsStatus(domainInfo.domain);
				this.domainDnsStatus[domainInfo.domain].loadCurrentStatus().then(() => {
					mithril_default.redraw();
				});
			}
			let domainDnsStatus = this.domainDnsStatus[domainInfo.domain];
			let p = Promise.resolve(lang.get("comboBoxSelectionNone_msg"));
			if (domainInfo.catchAllMailGroup) p = loadGroupDisplayName(domainInfo.catchAllMailGroup);
			return p.then((catchAllGroupName) => {
				return {
					cells: () => [{
						main: domainInfo.domain,
						info: [domainDnsStatus.getDnsStatusInfo()],
						click: domainDnsStatus.status.isLoaded() && !domainDnsStatus.areAllRecordsFine() ? () => {
							showDnsCheckDialog(domainDnsStatus);
						} : noOp
					}, { main: catchAllGroupName }],
					actionButtonAttrs: {
						title: "action_label",
						icon: Icons.More,
						size: ButtonSize.Compact,
						click: createDropdown({
							lazyButtons: () => {
								const buttons = [{
									label: "setCatchAllMailbox_action",
									click: () => this.editCatchAllMailbox(domainInfo)
								}, {
									label: "delete_action",
									click: () => this.deleteCustomDomain(domainInfo)
								}];
								if (domainDnsStatus.status.isLoaded() && !domainDnsStatus.areAllRecordsFine()) buttons.unshift({
									label: "resumeSetup_label",
									click: () => this.onResumeSetup(domainDnsStatus, customerInfo)
								});
								return buttons;
							},
							width: 260
						})
					}
				};
			});
		}).then((tableLines) => {
			this.customDomainLines = tableLines;
			mithril_default.redraw();
		});
	}
	async onResumeSetup(domainDnsStatus, customerInfo) {
		const mailAddressTableModel = await locator.mailAddressTableModelForOwnMailbox();
		showAddDomainWizard(domainDnsStatus.domain, customerInfo, mailAddressTableModel).then(() => {
			domainDnsStatus.loadCurrentStatus().then(() => mithril_default.redraw());
		});
	}
	async editCatchAllMailbox(domainInfo) {
		const groupDatas = await showProgressDialog("pleaseWait_msg", this.loadMailboxGroupDataAndCatchAllId(domainInfo));
		const initialValue = groupDatas.selected?.groupId ?? null;
		const selectedMailGroupId = await Dialog.showDropDownSelectionDialog("setCatchAllMailbox_action", "catchAllMailbox_label", null, [{
			name: lang.get("comboBoxSelectionNone_msg"),
			value: null
		}, ...groupDatas.available.map((groupData) => {
			return {
				name: groupData.displayName,
				value: groupData.groupId
			};
		})], initialValue, 250);
		return locator.customerFacade.setCatchAllGroup(domainInfo.domain, selectedMailGroupId);
	}
	async loadMailboxGroupDataAndCatchAllId(domainInfo) {
		const customer = await locator.logins.getUserController().loadCustomer();
		const teamMailGroups = await loadEnabledTeamMailGroups(customer);
		const userMailGroups = await loadEnabledUserMailGroups(customer);
		const allMailGroups = teamMailGroups.concat(userMailGroups);
		let catchAllMailGroupId = null;
		if (domainInfo.catchAllMailGroup) {
			const catchAllGroup = await locator.entityClient.load(GroupTypeRef, domainInfo.catchAllMailGroup);
			if (catchAllGroup.type === GroupType.User) {
				const user = await locator.entityClient.load(UserTypeRef, neverNull(catchAllGroup.user));
				catchAllMailGroupId = getUserGroupMemberships(user, GroupType.Mail)[0].group;
			} else catchAllMailGroupId = domainInfo.catchAllMailGroup;
		}
		return {
			available: allMailGroups,
			selected: allMailGroups.find((g) => g.groupId === catchAllMailGroupId) ?? null
		};
	}
	deleteCustomDomain(domainInfo) {
		Dialog.confirm(lang.getTranslation("confirmCustomDomainDeletion_msg", { "{domain}": domainInfo.domain })).then((confirmed) => {
			if (confirmed) locator.customerFacade.removeDomain(domainInfo.domain).catch(ofClass(PreconditionFailedError, () => {
				let registrationDomains = this.props() != null ? this.props().whitelabelRegistrationDomains.map((domainWrapper) => domainWrapper.value) : [];
				if (registrationDomains.indexOf(domainInfo.domain) !== -1) Dialog.message(lang.getTranslation("customDomainDeletePreconditionWhitelabelFailed_msg", { "{domainName}": domainInfo.domain }));
else Dialog.message(lang.getTranslation("customDomainDeletePreconditionFailed_msg", { "{domainName}": domainInfo.domain }));
			})).catch(ofClass(LockedError, () => Dialog.message("operationStillActive_msg")));
		});
	}
	entityEventsReceived(updates) {
		this.accountMaintenanceUpdateNotifier?.(updates);
		return pMap(updates, (update) => {
			if (isUpdateForTypeRef(CustomerServerPropertiesTypeRef, update) && update.operation === OperationType.UPDATE) return this.updateCustomerServerProperties();
else if (isUpdateForTypeRef(CustomerInfoTypeRef, update) && update.operation === OperationType.UPDATE) {
				this.customerInfo.reset();
				return this.updateDomains();
			} else if (isUpdateForTypeRef(CustomerPropertiesTypeRef, update)) {
				this.customerProperties.reset();
				this.customerProperties.getAsync().then(mithril_default.redraw);
			}
		}).then(noOp);
	}
};

//#endregion
//#region src/mail-app/settings/DesktopUpdateHelpLabel.ts
var DesktopUpdateHelpLabel = class {
	_waiting = false;
	_error = false;
	getActionLink({ updateAvailable, manualUpdate }) {
		if (this._waiting || this._error) return null;
		const onclick = async () => {
			if (updateAvailable()) manualUpdate();
else if (!this._waiting) {
				this._waiting = true;
				const [hasUpdate] = await Promise.all([manualUpdate(), delay(500)]);
				this._waiting = false;
				updateAvailable(hasUpdate);
				mithril_default.redraw();
			}
		};
		return mithril_default("span.text-break.pr-s", mithril_default("button.underline", {
			type: "button",
			href: "#",
			tabindex: "0",
			role: "button",
			onclick
		}, lang.get(updateAvailable() ? "installNow_action" : "checkAgain_action")));
	}
	getLabel(updateAvailable) {
		let ret = "";
		if (updateAvailable()) ret = lang.get("updateFound_label");
else if (this._error) ret = lang.get("serviceUnavailable_msg");
else if (this._waiting) ret = lang.get("checkingForUpdate_action");
else ret = lang.get("noUpdateAvailable_msg");
		return mithril_default("span.pr-s", ret + " ");
	}
	getIcon() {
		return this._waiting && !this._error ? mithril_default(Icon, {
			icon: BootIcons.Progress,
			class: "flex-center items-center icon-progress-tiny icon-progress"
		}) : null;
	}
	view(vnode) {
		return mithril_default(".flex.items-center", [
			this.getLabel(vnode.attrs.updateAvailable),
			this.getActionLink(vnode.attrs),
			this.getIcon()
		]);
	}
};

//#endregion
//#region src/mail-app/settings/DesktopSettingsViewer.ts
var import_stream$8 = __toESM(require_stream(), 1);
assertMainOrNode();
var DownloadLocationStrategy = function(DownloadLocationStrategy$1) {
	DownloadLocationStrategy$1[DownloadLocationStrategy$1["ALWAYS_ASK"] = 0] = "ALWAYS_ASK";
	DownloadLocationStrategy$1[DownloadLocationStrategy$1["CHOOSE_DIRECTORY"] = 1] = "CHOOSE_DIRECTORY";
	return DownloadLocationStrategy$1;
}(DownloadLocationStrategy || {});
var DesktopSettingsViewer = class {
	isDefaultMailtoHandler;
	defaultDownloadPath;
	runAsTrayApp;
	runOnStartup;
	spellCheckLang;
	isIntegrated;
	isAutoUpdateEnabled;
	showAutoUpdateOption;
	updateAvailable;
	mailExportMode;
	isPathDialogOpen = false;
	offlineStorageValue;
	constructor() {
		this.isDefaultMailtoHandler = (0, import_stream$8.default)(false);
		this.runAsTrayApp = (0, import_stream$8.default)(true);
		this.runOnStartup = (0, import_stream$8.default)(false);
		this.spellCheckLang = (0, import_stream$8.default)("");
		this.isIntegrated = (0, import_stream$8.default)(false);
		this.isAutoUpdateEnabled = (0, import_stream$8.default)(false);
		this.showAutoUpdateOption = true;
		this.updateAvailable = (0, import_stream$8.default)(false);
		this.mailExportMode = (0, import_stream$8.default)("msg");
		this.offlineStorageValue = (0, import_stream$8.default)(false);
	}
	oninit() {
		this.requestDesktopConfig();
	}
	view() {
		const setDefaultMailtoHandlerAttrs = {
			label: "defaultMailHandler_label",
			helpLabel: () => lang.get("defaultMailHandler_msg"),
			items: [{
				name: lang.get("unregistered_label"),
				value: false
			}, {
				name: lang.get("registered_label"),
				value: true
			}],
			selectedValue: this.isDefaultMailtoHandler(),
			selectionChangedHandler: (v) => {
				showProgressDialog("pleaseWait_msg", this.updateDefaultMailtoHandler(v)).then(() => {
					this.isDefaultMailtoHandler(v);
					mithril_default.redraw();
				});
			}
		};
		const setRunInBackgroundAttrs = {
			label: "runInBackground_action",
			helpLabel: () => {
				return ifAllowedTutaLinks(locator.logins, InfoLink.RunInBackground, (link) => [mithril_default("span", lang.get("runInBackground_msg") + " "), mithril_default(MoreInfoLink, { link })]);
			},
			items: [{
				name: lang.get("yes_label"),
				value: true
			}, {
				name: lang.get("no_label"),
				value: false
			}],
			selectedValue: this.runAsTrayApp(),
			selectionChangedHandler: (v) => {
				this.runAsTrayApp(v);
				this.setBooleanValue(DesktopConfigKey.runAsTrayApp, v);
			}
		};
		const setRunOnStartupAttrs = {
			label: "runOnStartup_action",
			items: [{
				name: lang.get("yes_label"),
				value: true
			}, {
				name: lang.get("no_label"),
				value: false
			}],
			selectedValue: this.runOnStartup(),
			selectionChangedHandler: (v) => {
				showProgressDialog("pleaseWait_msg", this.toggleAutoLaunchInNative(v)).then(() => {
					this.runOnStartup(v);
					mithril_default.redraw();
				});
			}
		};
		const editSpellcheckLanguageButtonAttrs = {
			title: "checkSpelling_action",
			click: () => showSpellcheckLanguageDialog().then((newLabel) => this.spellCheckLang(newLabel)),
			icon: Icons.Edit,
			size: ButtonSize.Compact
		};
		const spellcheckLanguageAttrs = {
			label: "checkSpelling_action",
			value: this.spellCheckLang(),
			oninput: this.spellCheckLang,
			isReadOnly: true,
			injectionsRight: () => mithril_default(IconButton, editSpellcheckLanguageButtonAttrs),
			helpLabel: () => lang.get("requiresNewWindow_msg")
		};
		const setDesktopIntegrationAttrs = {
			label: "desktopIntegration_label",
			items: [{
				name: lang.get("activated_label"),
				value: true
			}, {
				name: lang.get("deactivated_label"),
				value: false
			}],
			selectedValue: this.isIntegrated(),
			selectionChangedHandler: (v) => {
				showProgressDialog("pleaseWait_msg", this.updateDesktopIntegration(v)).then(() => {
					this.isIntegrated(v);
					mithril_default.redraw();
				}).catch((e) => Dialog.message("unknownError_msg", e.message));
			}
		};
		const setMailExportModeAttrs = {
			label: "mailExportMode_label",
			helpLabel: () => lang.get("mailExportModeHelp_msg"),
			items: [{
				name: "EML",
				value: "eml"
			}, {
				name: "MSG (Outlook)",
				value: "msg"
			}],
			selectedValue: this.mailExportMode(),
			selectionChangedHandler: (v) => {
				this.mailExportMode(v);
				this.setStringValue(DesktopConfigKey.mailExportMode, v);
			}
		};
		const updateHelpLabelAttrs = {
			updateAvailable: this.updateAvailable,
			manualUpdate: () => locator.desktopSettingsFacade.manualUpdate()
		};
		const setAutoUpdateAttrs = {
			label: "autoUpdate_label",
			helpLabel: () => mithril_default(DesktopUpdateHelpLabel, updateHelpLabelAttrs),
			items: [{
				name: lang.get("activated_label"),
				value: true
			}, {
				name: lang.get("deactivated_label"),
				value: false
			}],
			selectedValue: this.isAutoUpdateEnabled(),
			selectionChangedHandler: (v) => {
				this.isAutoUpdateEnabled(v);
				this.setBooleanValue(DesktopConfigKey.enableAutoUpdate, v);
			}
		};
		const changeDefaultDownloadPathAttrs = attachDropdown({
			mainButtonAttrs: {
				title: "edit_action",
				icon: Icons.Edit,
				size: ButtonSize.Compact
			},
			childAttrs: () => [{
				label: "alwaysAsk_action",
				click: () => this.setDefaultDownloadPath(DownloadLocationStrategy.ALWAYS_ASK)
			}, {
				label: "chooseDirectory_action",
				click: () => this.setDefaultDownloadPath(DownloadLocationStrategy.CHOOSE_DIRECTORY)
			}],
			showDropdown: () => !this.isPathDialogOpen,
			width: 200
		});
		const defaultDownloadPathAttrs = {
			label: "defaultDownloadPath_label",
			value: this.defaultDownloadPath(),
			oninput: this.defaultDownloadPath,
			injectionsRight: () => mithril_default(IconButton, changeDefaultDownloadPathAttrs),
			isReadOnly: true
		};
		return [mithril_default("#user-settings.fill-absolute.scroll.plr-l.pb-xl", [
			mithril_default(".h4.mt-l", lang.get("desktopSettings_label")),
			env.platformId === "darwin" ? null : mithril_default(TextField, spellcheckLanguageAttrs),
			env.platformId === "linux" ? null : mithril_default(DropDownSelector, setDefaultMailtoHandlerAttrs),
			env.platformId === "darwin" ? null : mithril_default(DropDownSelector, setRunInBackgroundAttrs),
			mithril_default(DropDownSelector, setRunOnStartupAttrs),
			mithril_default(TextField, defaultDownloadPathAttrs),
			mithril_default(DropDownSelector, setMailExportModeAttrs),
			env.platformId === "linux" ? mithril_default(DropDownSelector, setDesktopIntegrationAttrs) : null,
			this.showAutoUpdateOption ? mithril_default(DropDownSelector, setAutoUpdateAttrs) : null
		])];
	}
	toggleAutoLaunchInNative(enable) {
		return enable ? locator.desktopSettingsFacade.enableAutoLaunch() : locator.desktopSettingsFacade.disableAutoLaunch();
	}
	updateDefaultMailtoHandler(shouldBeDefaultMailtoHandler) {
		return shouldBeDefaultMailtoHandler ? locator.desktopSettingsFacade.registerMailto() : locator.desktopSettingsFacade.unregisterMailto();
	}
	updateDesktopIntegration(shouldIntegrate) {
		return shouldIntegrate ? locator.desktopSettingsFacade.integrateDesktop() : locator.desktopSettingsFacade.unIntegrateDesktop();
	}
	async requestDesktopConfig() {
		this.defaultDownloadPath = (0, import_stream$8.default)(lang.get("alwaysAsk_action"));
		const [integrationInfo, defaultDownloadPath, runAsTrayApp, showAutoUpdateOption, enableAutoUpdate, mailExportMode, spellcheckLabel] = await Promise.all([
			locator.desktopSettingsFacade.getIntegrationInfo(),
			locator.desktopSettingsFacade.getStringConfigValue(DesktopConfigKey.defaultDownloadPath),
			locator.desktopSettingsFacade.getBooleanConfigValue(DesktopConfigKey.runAsTrayApp),
			locator.desktopSettingsFacade.getBooleanConfigValue(DesktopConfigKey.showAutoUpdateOption),
			locator.desktopSettingsFacade.getBooleanConfigValue(DesktopConfigKey.enableAutoUpdate),
			locator.desktopSettingsFacade.getStringConfigValue(DesktopConfigKey.mailExportMode),
			getCurrentSpellcheckLanguageLabel()
		]);
		const { isMailtoHandler, isAutoLaunchEnabled, isIntegrated, isUpdateAvailable } = integrationInfo;
		this.isDefaultMailtoHandler(isMailtoHandler);
		this.defaultDownloadPath(defaultDownloadPath || lang.get("alwaysAsk_action"));
		this.runAsTrayApp(runAsTrayApp);
		this.runOnStartup(isAutoLaunchEnabled);
		this.isIntegrated(isIntegrated);
		this.showAutoUpdateOption = showAutoUpdateOption;
		this.isAutoUpdateEnabled(enableAutoUpdate);
		this.updateAvailable(isUpdateAvailable);
		this.mailExportMode(mailExportMode);
		this.spellCheckLang(spellcheckLabel);
		mithril_default.redraw();
	}
	async setBooleanValue(setting, value) {
		await locator.desktopSettingsFacade.setBooleanConfigValue(setting, value);
		mithril_default.redraw();
	}
	async setStringValue(setting, value) {
		await locator.desktopSettingsFacade.setStringConfigValue(setting, value);
		mithril_default.redraw();
	}
	async setDefaultDownloadPath(v) {
		this.isPathDialogOpen = true;
		let savePath;
		if (v === DownloadLocationStrategy.ALWAYS_ASK) savePath = null;
else savePath = await locator.fileApp.openFolderChooser();
		this.defaultDownloadPath(savePath ?? lang.get("alwaysAsk_action"));
		await this.setStringValue(DesktopConfigKey.defaultDownloadPath, savePath);
		this.isPathDialogOpen = false;
	}
	onAppUpdateAvailable() {
		this.updateAvailable(true);
		mithril_default.redraw();
	}
	entityEventsReceived = () => Promise.resolve();
};

//#endregion
//#region src/mail-app/settings/EditOutOfOfficeNotificationDialogModel.ts
var import_stream$7 = __toESM(require_stream(), 1);
let RecipientMessageType = function(RecipientMessageType$1) {
	RecipientMessageType$1[RecipientMessageType$1["EXTERNAL_TO_EVERYONE"] = 0] = "EXTERNAL_TO_EVERYONE";
	RecipientMessageType$1[RecipientMessageType$1["INTERNAL_AND_EXTERNAL"] = 1] = "INTERNAL_AND_EXTERNAL";
	RecipientMessageType$1[RecipientMessageType$1["INTERNAL_ONLY"] = 2] = "INTERNAL_ONLY";
	return RecipientMessageType$1;
}({});
const FAILURE_UPGRADE_REQUIRED = "outofoffice.not_available_on_current_plan";
var EditOutOfOfficeNotificationDialogModel = class {
	outOfOfficeNotification;
	enabled = (0, import_stream$7.default)(false);
	startDate = (0, import_stream$7.default)(new Date());
	endDate = (0, import_stream$7.default)(new Date());
	indefiniteTimeRange = (0, import_stream$7.default)(true);
	timeRangeEnabled = (0, import_stream$7.default)(false);
	organizationSubject = (0, import_stream$7.default)("");
	organizationMessage = (0, import_stream$7.default)("");
	defaultSubject = (0, import_stream$7.default)("");
	defaultMessage = (0, import_stream$7.default)("");
	recipientMessageTypes = (0, import_stream$7.default)(RecipientMessageType.EXTERNAL_TO_EVERYONE);
	_entityClient;
	_userController;
	_languageViewModel;
	constructor(outOfOfficeNotification, entityClient, userController, languageViewModel, serviceExecutor) {
		this.serviceExecutor = serviceExecutor;
		this._entityClient = entityClient;
		this._userController = userController;
		this._languageViewModel = languageViewModel;
		this._setDefaultMessages();
		if (!outOfOfficeNotification) {
			this.startDate(getStartOfDay(new Date()));
			this.outOfOfficeNotification = createOutOfOfficeNotification({
				notifications: [],
				enabled: false,
				endDate: null,
				startDate: null
			});
		} else {
			this.outOfOfficeNotification = outOfOfficeNotification;
			this.enabled(outOfOfficeNotification.enabled);
			let defaultEnabled = false;
			let organizationEnabled = false;
			for (const notification of outOfOfficeNotification.notifications) if (notification.type === OutOfOfficeNotificationMessageType.Default) {
				defaultEnabled = true;
				this.defaultSubject(notification.subject);
				this.defaultMessage(notification.message);
			} else if (notification.type === OutOfOfficeNotificationMessageType.InsideOrganization) {
				organizationEnabled = true;
				this.organizationSubject(notification.subject);
				this.organizationMessage(notification.message);
			}
			if (defaultEnabled && organizationEnabled) this.recipientMessageTypes(RecipientMessageType.INTERNAL_AND_EXTERNAL);
else if (organizationEnabled) this.recipientMessageTypes(RecipientMessageType.INTERNAL_ONLY);
else this.recipientMessageTypes(RecipientMessageType.EXTERNAL_TO_EVERYONE);
			if (outOfOfficeNotification.startDate) {
				this.startDate(outOfOfficeNotification.startDate);
				this.timeRangeEnabled(true);
				if (outOfOfficeNotification.endDate) {
					const shiftedEndDate = getDayShifted(outOfOfficeNotification.endDate, -1);
					this.endDate(shiftedEndDate);
					this.indefiniteTimeRange(false);
				} else this.indefiniteTimeRange(true);
			}
		}
	}
	_setDefaultMessages() {
		const templateSubject = this._languageViewModel.get("outOfOfficeDefaultSubject_msg");
		const templateMessage = appendEmailSignature(this._languageViewModel.get("outOfOfficeDefault_msg"), this._userController.props);
		this.organizationSubject(templateSubject);
		this.defaultSubject(templateSubject);
		this.defaultMessage(templateMessage);
		this.organizationMessage(templateMessage);
	}
	/**
	* Return OutOfOfficeNotification created from input data.
	* @throws UserError if time period is invalid
	* */
	getNotificationFromData() {
		let startDate = null;
		let endDate = null;
		if (this.timeRangeEnabled()) {
			startDate = this.startDate();
			if (!this.indefiniteTimeRange()) {
				endDate = getStartOfNextDay(this.endDate());
				if (startDate.getTime() > endDate.getTime() || endDate.getTime() < Date.now()) throw new UserError("invalidTimePeriod_msg");
			}
		}
		const notificationMessages = [];
		if (this.isDefaultMessageEnabled()) {
			const defaultNotification = createOutOfOfficeNotificationMessage({
				subject: this.defaultSubject().trim(),
				message: this.defaultMessage().trim(),
				type: OutOfOfficeNotificationMessageType.Default
			});
			notificationMessages.push(defaultNotification);
		}
		if (this.isOrganizationMessageEnabled()) {
			const organizationNotification = createOutOfOfficeNotificationMessage({
				subject: this.organizationSubject().trim(),
				message: this.organizationMessage().trim(),
				type: OutOfOfficeNotificationMessageType.InsideOrganization
			});
			notificationMessages.push(organizationNotification);
		}
		this.outOfOfficeNotification._ownerGroup = this._userController.getUserMailGroupMembership().group;
		this.outOfOfficeNotification.enabled = this.enabled();
		this.outOfOfficeNotification.startDate = startDate;
		this.outOfOfficeNotification.endDate = endDate;
		this.outOfOfficeNotification.notifications = notificationMessages;
		return this.outOfOfficeNotification;
	}
	isOrganizationMessageEnabled() {
		return this.recipientMessageTypes() === RecipientMessageType.INTERNAL_ONLY || this.recipientMessageTypes() === RecipientMessageType.INTERNAL_AND_EXTERNAL;
	}
	isDefaultMessageEnabled() {
		return this.recipientMessageTypes() === RecipientMessageType.EXTERNAL_TO_EVERYONE || this.recipientMessageTypes() === RecipientMessageType.INTERNAL_AND_EXTERNAL;
	}
	/**
	* @throws UserError
	* @throws UpgradeRequiredError
	*/
	saveOutOfOfficeNotification() {
		return Promise.resolve().then(() => this.getNotificationFromData()).then(async (sendableNotification) => {
			if (this._isNewNotification()) await this._entityClient.setup(null, sendableNotification);
else await this._entityClient.update(sendableNotification);
		}).catch(ofClass(InvalidDataError, (e) => {
			throw new UserError("outOfOfficeMessageInvalid_msg");
		})).catch(ofClass(PreconditionFailedError, async (e) => {
			if (e.data === FAILURE_UPGRADE_REQUIRED) throw new UpgradeRequiredError("upgradeRequired_msg", await getAvailablePlansWithAutoResponder());
else throw new UserError(lang.makeTranslation("error_msg", e.toString()));
		}));
	}
	_isNewNotification() {
		return !this.outOfOfficeNotification._id;
	}
};

//#endregion
//#region src/mail-app/settings/EditOutOfOfficeNotificationDialog.ts
function showEditOutOfOfficeNotificationDialog(outOfOfficeNotification) {
	const dialogModel = new EditOutOfOfficeNotificationDialogModel(outOfOfficeNotification, locator.entityClient, locator.logins.getUserController(), lang, locator.serviceExecutor);
	const organizationMessageEditor = new HtmlEditor("message_label").setMinHeight(100).showBorders().setValue(dialogModel.organizationMessage()).enableToolbar();
	const defaultMessageEditor = new HtmlEditor("message_label").setMinHeight(100).showBorders().setValue(dialogModel.defaultMessage()).enableToolbar();
	const saveOutOfOfficeNotification = () => {
		dialogModel.organizationMessage(organizationMessageEditor.getValue());
		dialogModel.defaultMessage(defaultMessageEditor.getValue());
		dialogModel.saveOutOfOfficeNotification().then(() => cancel()).catch(ofClass(UserError, (e) => showUserError(e))).catch(ofClass(UpgradeRequiredError, (e) => {
			showPlanUpgradeRequiredDialog(e.plans);
		}));
	};
	function cancel() {
		dialog.close();
	}
	const dialogHeaderAttrs = {
		left: [{
			label: "cancel_action",
			click: cancel,
			type: ButtonType.Secondary
		}],
		right: [{
			label: "save_action",
			click: saveOutOfOfficeNotification,
			type: ButtonType.Primary
		}],
		middle: "outOfOfficeNotification_title"
	};
	const dialog = Dialog.editDialog(dialogHeaderAttrs, EditOutOfOfficeNotificationDialog, {
		model: dialogModel,
		organizationMessageEditor,
		defaultMessageEditor
	}).addShortcut({
		key: Keys.ESC,
		exec: cancel,
		help: "close_alt"
	}).addShortcut({
		key: Keys.S,
		ctrlOrCmd: true,
		exec: saveOutOfOfficeNotification,
		help: "save_action"
	});
	dialog.show();
}
var EditOutOfOfficeNotificationDialog = class {
	view(vnode) {
		const { model, defaultMessageEditor, organizationMessageEditor } = vnode.attrs;
		const defaultEnabled = model.isDefaultMessageEnabled();
		const organizationEnabled = model.isOrganizationMessageEnabled();
		const startOfTheWeekOffset = getStartOfTheWeekOffsetForUser(locator.logins.getUserController().userSettingsGroupRoot);
		return [
			this.renderEnabled(model),
			this.renderRecipients(model),
			mithril_default(".mt.flex-start", mithril_default(Checkbox, {
				label: () => lang.get("outOfOfficeTimeRange_msg"),
				checked: model.timeRangeEnabled(),
				onChecked: model.timeRangeEnabled,
				helpLabel: "outOfOfficeTimeRangeHelp_msg"
			})),
			model.timeRangeEnabled() ? this.renderTimeRangeSelector(model, startOfTheWeekOffset) : null,
			mithril_default(".mt-l", lang.get("outOfOfficeUnencrypted_msg")),
			organizationEnabled ? this.renderOrganizations(model, organizationMessageEditor) : null,
			defaultEnabled ? this.renderDefault(organizationEnabled, model, defaultMessageEditor) : null,
			mithril_default(".pb", "")
		];
	}
	renderEnabled(model) {
		const statusItems = [{
			name: lang.get("deactivated_label"),
			value: false
		}, {
			name: lang.get("activated_label"),
			value: true
		}];
		return mithril_default(DropDownSelector, {
			label: "state_label",
			items: statusItems,
			selectedValue: model.enabled(),
			selectionChangedHandler: model.enabled
		});
	}
	renderDefault(organizationEnabled, model, defaultMessageEditor) {
		return [
			mithril_default(".h4.text-center.mt-l", getDefaultNotificationLabel(organizationEnabled)),
			mithril_default(TextField, {
				label: "subject_label",
				value: model.defaultSubject(),
				oninput: model.defaultSubject,
				injectionsLeft: () => mithril_default(".flex-no-grow-no-shrink-auto.pr-s", { style: {
					"line-height": px(24),
					opacity: "1"
				} }, OUT_OF_OFFICE_SUBJECT_PREFIX)
			}),
			mithril_default(defaultMessageEditor)
		];
	}
	renderOrganizations(model, organizationMessageEditor) {
		return [
			mithril_default(".h4.text-center.mt-l", lang.get("outOfOfficeInternal_msg")),
			mithril_default(TextField, {
				label: "subject_label",
				value: model.organizationSubject(),
				oninput: model.organizationSubject,
				injectionsLeft: () => mithril_default(".flex-no-grow-no-shrink-auto.pr-s", { style: {
					"line-height": px(24),
					opacity: "1"
				} }, OUT_OF_OFFICE_SUBJECT_PREFIX)
			}),
			mithril_default(organizationMessageEditor)
		];
	}
	renderRecipients(model) {
		const recipientItems = [
			{
				name: lang.get("everyone_label"),
				value: RecipientMessageType.EXTERNAL_TO_EVERYONE
			},
			{
				name: lang.get("insideOutside_label"),
				value: RecipientMessageType.INTERNAL_AND_EXTERNAL
			},
			{
				name: lang.get("insideOnly_label"),
				value: RecipientMessageType.INTERNAL_ONLY
			}
		];
		const recipientHelpLabel = () => {
			switch (model.recipientMessageTypes()) {
				case RecipientMessageType.EXTERNAL_TO_EVERYONE: return lang.get("outOfOfficeRecipientsEveryoneHelp_label");
				case RecipientMessageType.INTERNAL_AND_EXTERNAL: return lang.get("outOfOfficeRecipientsInternalExternalHelp_label");
				case RecipientMessageType.INTERNAL_ONLY: return lang.get("outOfOfficeRecipientsInternalOnlyHelp_label");
				default: return "";
			}
		};
		return mithril_default(DropDownSelector, {
			label: "outOfOfficeRecipients_label",
			items: recipientItems,
			selectedValue: model.recipientMessageTypes(),
			selectionChangedHandler: model.recipientMessageTypes,
			helpLabel: recipientHelpLabel
		});
	}
	renderTimeRangeSelector(model, startOfTheWeekOffset) {
		return mithril_default(".flex.col", [
			mithril_default(DatePicker, {
				date: model.startDate(),
				onDateSelected: model.startDate,
				label: "dateFrom_label",
				nullSelectionText: "emptyString_msg",
				startOfTheWeekOffset
			}),
			mithril_default(Checkbox, {
				label: () => lang.get("unlimited_label"),
				checked: model.indefiniteTimeRange(),
				onChecked: model.indefiniteTimeRange
			}),
			!model.indefiniteTimeRange() ? mithril_default(DatePicker, {
				date: model.endDate(),
				onDateSelected: model.endDate,
				label: "dateTo_label",
				nullSelectionText: "emptyString_msg",
				startOfTheWeekOffset
			}) : null
		]);
	}
};

//#endregion
//#region src/mail-app/settings/EditSignatureDialog.ts
assertMainOrNode();
const RECOMMENDED_SIGNATURE_SIZE_LIMIT = 15360;
function show$6(props) {
	import("./Signature2-chunk.js").then(({ getDefaultSignature }) => {
		const defaultSignature = getDefaultSignature();
		let currentCustomSignature = locator.logins.getUserController().props.customEmailSignature;
		if (currentCustomSignature === "" && !locator.logins.isEnabled(FeatureType.DisableDefaultSignature)) currentCustomSignature = defaultSignature;
		let selectedType = locator.logins.getUserController().props.emailSignatureType;
		const editor = new HtmlEditor("preview_label").showBorders().setMinHeight(200).setValue(getSignature(selectedType, defaultSignature, currentCustomSignature)).enableToolbar().setToolbarOptions({ imageButtonClickHandler: insertInlineImageB64ClickHandler }).setEnabled(selectedType === EmailSignatureType.EMAIL_SIGNATURE_TYPE_CUSTOM);
		const signatureTypes = getSignatureTypes(props);
		const form = { view: () => {
			return [mithril_default(DropDownSelector, {
				label: "userEmailSignature_label",
				items: signatureTypes,
				selectedValue: selectedType,
				selectionChangedHandler: (type) => {
					if (selectedType === EmailSignatureType.EMAIL_SIGNATURE_TYPE_CUSTOM) currentCustomSignature = editor.getValue();
					selectedType = type;
					editor.setValue(getSignature(type, defaultSignature, currentCustomSignature));
					editor.setEnabled(type === EmailSignatureType.EMAIL_SIGNATURE_TYPE_CUSTOM);
				}
			}), mithril_default(editor)];
		} };
		let editSignatureOkAction = (dialog) => {
			const props$1 = locator.logins.getUserController().props;
			const newType = selectedType;
			const newCustomValue = editor.getValue();
			const oldType = props$1.emailSignatureType;
			const oldCustomValue = props$1.customEmailSignature;
			const updateSignature = () => {
				props$1.emailSignatureType = newType;
				if (newType === EmailSignatureType.EMAIL_SIGNATURE_TYPE_CUSTOM) props$1.customEmailSignature = newCustomValue;
				const updatePromise = locator.entityClient.update(props$1);
				return showProgressDialog("pleaseWait_msg", updatePromise).then(() => dialog.close()).catch(ofClass(PayloadTooLargeError, () => {
					props$1.emailSignatureType = oldType;
					props$1.customEmailSignature = oldCustomValue;
					return Dialog.message("requestTooLarge_msg");
				}));
			};
			if (newType === oldType && (newType !== EmailSignatureType.EMAIL_SIGNATURE_TYPE_CUSTOM || newCustomValue === oldCustomValue)) return dialog.close();
else if (newType === EmailSignatureType.EMAIL_SIGNATURE_TYPE_CUSTOM && newCustomValue.length > RECOMMENDED_SIGNATURE_SIZE_LIMIT) {
				const signatureSizeKb = Math.floor(newCustomValue.length / 1024);
				const confirmLargeSignatureAttrs = {
					title: downcast("userEmailSignature_label"),
					child: { view: () => mithril_default("p", lang.get("largeSignature_msg", { "{1}": signatureSizeKb })) },
					okAction: (dialog$1) => {
						dialog$1.close();
						updateSignature();
					},
					allowOkWithReturn: true
				};
				Dialog.showActionDialog(confirmLargeSignatureAttrs);
			} else updateSignature();
		};
		Dialog.showActionDialog({
			title: "userEmailSignature_label",
			child: form,
			type: DialogType.EditLarge,
			okAction: editSignatureOkAction
		});
	});
}
function getSignatureTypes(props) {
	let signatureTypes = [{
		name: lang.get("emailSignatureTypeCustom_msg"),
		value: EmailSignatureType.EMAIL_SIGNATURE_TYPE_CUSTOM
	}, {
		name: lang.get("comboBoxSelectionNone_msg"),
		value: EmailSignatureType.EMAIL_SIGNATURE_TYPE_NONE
	}];
	if (!locator.logins.isEnabled(FeatureType.DisableDefaultSignature) || props.emailSignatureType === EmailSignatureType.EMAIL_SIGNATURE_TYPE_DEFAULT) signatureTypes.splice(0, 0, {
		name: lang.get("emailSignatureTypeDefault_msg"),
		value: EmailSignatureType.EMAIL_SIGNATURE_TYPE_DEFAULT
	});
	return signatureTypes;
}
function getSignature(type, defaultSignature, currentCustomSignature) {
	if (type === EmailSignatureType.EMAIL_SIGNATURE_TYPE_DEFAULT) return defaultSignature;
else if (type === EmailSignatureType.EMAIL_SIGNATURE_TYPE_CUSTOM) return currentCustomSignature;
else return "";
}
function getSignatureType(props) {
	return neverNull(getSignatureTypes(props).find((t) => t.value === props.emailSignatureType));
}

//#endregion
//#region src/mail-app/settings/OfflineStorageSettings.ts
var OfflineStorageSettingsModel = class {
	_isInitialized = false;
	isEnabled = null;
	timeRange = OFFLINE_STORAGE_DEFAULT_TIME_RANGE_DAYS;
	constructor(userController, deviceConfig$1) {
		this.userController = userController;
		this.deviceConfig = deviceConfig$1;
	}
	available() {
		return this._isInitialized && isOfflineStorageAvailable() && !!this.isEnabled;
	}
	assertAvailable() {
		assert(this.available(), "Not initialized or not available");
	}
	/**
	* get stored time range, will error out if offlineStorage isn't available.
	* if the user account is free, always returns the default time range and
	* resets the stored value if it's different from the default.
	*/
	getTimeRange() {
		this.assertAvailable();
		if (this.userController.isFreeAccount() && this.timeRange !== OFFLINE_STORAGE_DEFAULT_TIME_RANGE_DAYS) {
			this.setTimeRange(OFFLINE_STORAGE_DEFAULT_TIME_RANGE_DAYS).catch((e) => console.log("error while resetting storage time range:", e));
			this.timeRange = OFFLINE_STORAGE_DEFAULT_TIME_RANGE_DAYS;
			return OFFLINE_STORAGE_DEFAULT_TIME_RANGE_DAYS;
		}
		return this.timeRange;
	}
	async setTimeRange(days) {
		this.assertAvailable();
		await this.deviceConfig.setOfflineTimeRangeDays(this.userController.userId, days);
		this.timeRange = days;
	}
	async init() {
		this.isEnabled = isOfflineStorageAvailable();
		if (this.isEnabled) {
			const stored = this.deviceConfig.getOfflineTimeRangeDays(this.userController.userId);
			if (stored != null) this.timeRange = stored;
		}
		this._isInitialized = true;
	}
};

//#endregion
//#region src/mail-app/settings/MailSettingsViewer.ts
var import_stream$6 = __toESM(require_stream(), 1);
assertMainOrNode();
var MailSettingsViewer = class {
	_signature;
	_mailboxProperties;
	_reportMovedMails;
	_defaultSender;
	_defaultUnconfidential;
	_sendPlaintext;
	_noAutomaticContacts;
	_enableMailIndexing;
	_inboxRulesTableLines;
	_inboxRulesExpanded;
	_indexStateWatch;
	_outOfOfficeNotification;
	_outOfOfficeStatus;
	_storageFieldValue;
	customerInfo;
	mailAddressTableModel = null;
	mailAddressTableExpanded;
	offlineStorageSettings = new OfflineStorageSettingsModel(mailLocator.logins.getUserController(), deviceConfig);
	constructor() {
		this._defaultSender = getDefaultSenderFromUser(mailLocator.logins.getUserController());
		this._signature = (0, import_stream$6.default)(getSignatureType(mailLocator.logins.getUserController().props).name);
		this._reportMovedMails = getReportMovedMailsType(null);
		this._defaultUnconfidential = mailLocator.logins.getUserController().props.defaultUnconfidential;
		this._sendPlaintext = mailLocator.logins.getUserController().props.sendPlaintextOnly;
		this._noAutomaticContacts = mailLocator.logins.getUserController().props.noAutomaticContacts;
		this._enableMailIndexing = mailLocator.search.indexState().mailIndexEnabled;
		this._inboxRulesExpanded = (0, import_stream$6.default)(false);
		this.mailAddressTableExpanded = false;
		this._inboxRulesTableLines = (0, import_stream$6.default)([]);
		this._outOfOfficeStatus = (0, import_stream$6.default)(lang.get("deactivated_label"));
		this._indexStateWatch = null;
		mailLocator.mailAddressTableModelForOwnMailbox().then((model) => {
			this.mailAddressTableModel = model;
			mithril_default.redraw();
		});
		mithril_default.redraw();
		this._updateInboxRules(mailLocator.logins.getUserController().props);
		this._mailboxProperties = new LazyLoaded(async () => {
			const mailboxGroupRoot = await this.getMailboxGroupRoot();
			return mailLocator.mailboxModel.getMailboxProperties(mailboxGroupRoot);
		});
		this._updateMailboxPropertiesSettings();
		this._outOfOfficeNotification = new LazyLoaded(() => loadOutOfOfficeNotification(), null);
		this._outOfOfficeNotification.getAsync().then(() => this._updateOutOfOfficeNotification());
		this.customerInfo = null;
		this._storageFieldValue = (0, import_stream$6.default)("");
		this.offlineStorageSettings.init().then(() => mithril_default.redraw());
	}
	async oninit() {
		this.customerInfo = await mailLocator.logins.getUserController().loadCustomerInfo();
		this.updateStorageField(this.customerInfo).then(() => mithril_default.redraw());
	}
	async getMailboxGroupRoot() {
		const { mailboxGroupRoot } = await mailLocator.mailboxModel.getUserMailboxDetails();
		return mailboxGroupRoot;
	}
	async updateStorageField(customerInfo) {
		const user = mailLocator.logins.getUserController().user;
		const usedStorage = formatStorageSize(Number(await mailLocator.userManagementFacade.readUsedUserStorage(user)));
		const totalStorage = formatStorageSize(Number(customerInfo.perUserStorageCapacity) * Const.MEMORY_GB_FACTOR);
		this._storageFieldValue(lang.get("amountUsedOf_label", {
			"{amount}": usedStorage,
			"{totalAmount}": totalStorage
		}));
	}
	view() {
		this._defaultSender = getDefaultSenderFromUser(mailLocator.logins.getUserController());
		const defaultSenderAttrs = {
			label: "defaultSenderMailAddress_label",
			items: getEnabledMailAddressesForGroupInfo(mailLocator.logins.getUserController().userGroupInfo).sort().map((a) => ({
				name: a,
				value: a
			})),
			selectedValue: this._defaultSender,
			selectedValueDisplay: getMailAddressDisplayText(this.mailAddressTableModel?.addresses().find(({ address }) => address === this._defaultSender)?.name ?? "", this._defaultSender, false),
			selectionChangedHandler: (defaultSenderAddress) => {
				mailLocator.logins.getUserController().props.defaultSender = defaultSenderAddress;
				mailLocator.entityClient.update(mailLocator.logins.getUserController().props);
			},
			helpLabel: () => lang.get("defaultSenderMailAddressInfo_msg"),
			dropdownWidth: 300
		};
		const changeSignatureButtonAttrs = {
			title: "userEmailSignature_label",
			click: () => show$6(mailLocator.logins.getUserController().props),
			icon: Icons.Edit,
			size: ButtonSize.Compact
		};
		const signatureAttrs = {
			label: "userEmailSignature_label",
			value: this._signature(),
			oninput: this._signature,
			isReadOnly: true,
			injectionsRight: () => [mithril_default(IconButton, changeSignatureButtonAttrs)]
		};
		const editOutOfOfficeNotificationButtonAttrs = {
			title: "outOfOfficeNotification_title",
			click: () => {
				this._outOfOfficeNotification.getAsync().then((notification) => showEditOutOfOfficeNotificationDialog(notification));
			},
			icon: Icons.Edit,
			size: ButtonSize.Compact
		};
		const outOfOfficeAttrs = {
			label: "outOfOfficeNotification_title",
			value: this._outOfOfficeStatus(),
			oninput: this._outOfOfficeStatus,
			isReadOnly: true,
			injectionsRight: () => [mithril_default(IconButton, editOutOfOfficeNotificationButtonAttrs)]
		};
		const defaultUnconfidentialAttrs = {
			label: "defaultExternalDelivery_label",
			items: [{
				name: lang.get("confidential_action"),
				value: false
			}, {
				name: lang.get("nonConfidential_action"),
				value: true
			}],
			selectedValue: this._defaultUnconfidential,
			selectionChangedHandler: (v) => {
				mailLocator.logins.getUserController().props.defaultUnconfidential = v;
				mailLocator.entityClient.update(mailLocator.logins.getUserController().props);
			},
			helpLabel: () => lang.get("defaultExternalDeliveryInfo_msg"),
			dropdownWidth: 250
		};
		const sendPlaintextAttrs = {
			label: "externalFormatting_label",
			helpLabel: () => lang.get("externalFormattingInfo_msg"),
			items: [{
				name: lang.get("html_action"),
				value: false
			}, {
				name: lang.get("plaintext_action"),
				value: true
			}],
			selectedValue: this._sendPlaintext,
			selectionChangedHandler: (v) => {
				mailLocator.logins.getUserController().props.sendPlaintextOnly = v;
				mailLocator.entityClient.update(mailLocator.logins.getUserController().props);
			},
			dropdownWidth: 250
		};
		const enableMailIndexingAttrs = {
			label: "searchMailbox_label",
			helpLabel: () => lang.get("enableSearchMailbox_msg"),
			items: [{
				name: lang.get("activated_label"),
				value: true
			}, {
				name: lang.get("deactivated_label"),
				value: false
			}],
			selectedValue: this._enableMailIndexing,
			selectionChangedHandler: (mailIndexEnabled) => {
				if (mailIndexEnabled) showProgressDialog("pleaseWait_msg", mailLocator.indexerFacade.enableMailIndexing()).catch(ofClass(IndexingNotSupportedError, () => {
					Dialog.message(isApp() ? "searchDisabledApp_msg" : "searchDisabled_msg");
				}));
else showProgressDialog("pleaseWait_msg", mailLocator.indexerFacade.disableMailIndexing());
			},
			dropdownWidth: 250
		};
		const behaviorAfterMoveEmailAction = {
			label: "behaviorAfterMovingEmail_label",
			helpLabel: () => "",
			items: [
				{
					name: lang.get("showOlder_label"),
					value: ListAutoSelectBehavior.OLDER
				},
				{
					name: lang.get("showNewer_label"),
					value: ListAutoSelectBehavior.NEWER
				},
				{
					name: lang.get("showNone_label"),
					value: ListAutoSelectBehavior.NONE
				}
			],
			selectedValue: deviceConfig.getMailAutoSelectBehavior(),
			selectionChangedHandler: (behavior) => deviceConfig.setMailAutoSelectBehavior(behavior),
			dropdownWidth: 250
		};
		const reportMovedMailsAttrs = this.makeReportMovedMailsDropdownAttrs();
		const templateRule = createInboxRuleTemplate(InboxRuleType.RECIPIENT_TO_EQUALS, "");
		const addInboxRuleButtonAttrs = {
			title: "addInboxRule_action",
			click: () => mailLocator.mailboxModel.getUserMailboxDetails().then((mailboxDetails) => show$1(mailboxDetails, templateRule)),
			icon: Icons.Add,
			size: ButtonSize.Compact
		};
		const inboxRulesTableAttrs = {
			columnHeading: [
				"inboxRuleField_label",
				"inboxRuleValue_label",
				"inboxRuleTargetFolder_label"
			],
			columnWidths: [
				ColumnWidth.Small,
				ColumnWidth.Largest,
				ColumnWidth.Small
			],
			showActionButtonColumn: true,
			addButtonAttrs: addInboxRuleButtonAttrs,
			lines: this._inboxRulesTableLines()
		};
		const conversationViewDropdownAttrs = {
			label: "conversationViewPref_label",
			items: [{
				name: lang.get("showAllMailsInThread_label"),
				value: false
			}, {
				name: lang.get("showOnlySelectedMail_label"),
				value: true
			}],
			selectedValue: deviceConfig.getConversationViewShowOnlySelectedMail(),
			selectionChangedHandler: (arg) => {
				deviceConfig.setConversationViewShowOnlySelectedMail(arg);
			},
			dropdownWidth: 350
		};
		return [mithril_default("#user-settings.fill-absolute.scroll.plr-l.pb-xl", {
			role: "group",
			oncreate: () => {
				this._indexStateWatch = mailLocator.search.indexState.map((newValue) => {
					this._enableMailIndexing = newValue.mailIndexEnabled;
					mithril_default.redraw();
				});
			},
			onremove: () => {
				if (this._indexStateWatch) this._indexStateWatch.end(true);
			}
		}, [
			this.customerInfo != null && Number(this.customerInfo.perUserStorageCapacity) > 0 ? [mithril_default(".h4.mt-l", lang.get("storageCapacity_label")), mithril_default(TextField, {
				label: "storageCapacity_label",
				value: this._storageFieldValue(),
				oninput: this._storageFieldValue,
				isReadOnly: true
			})] : null,
			mithril_default(".h4.mt-l", lang.get("general_label")),
			mithril_default(DropDownSelector, conversationViewDropdownAttrs),
			mithril_default(DropDownSelector, enableMailIndexingAttrs),
			mithril_default(DropDownSelector, behaviorAfterMoveEmailAction),
			mithril_default(".h4.mt-l", lang.get("emailSending_label")),
			mithril_default(DropDownSelector, defaultSenderAttrs),
			mithril_default(TextField, signatureAttrs),
			mailLocator.logins.isEnabled(FeatureType.InternalCommunication) ? null : mithril_default(DropDownSelector, defaultUnconfidentialAttrs),
			mailLocator.logins.isEnabled(FeatureType.InternalCommunication) ? null : mithril_default(DropDownSelector, sendPlaintextAttrs),
			mithril_default(DropDownSelector, reportMovedMailsAttrs),
			mithril_default(TextField, outOfOfficeAttrs),
			this.renderLocalDataSection(),
			this.mailAddressTableModel ? mithril_default(MailAddressTable, {
				model: this.mailAddressTableModel,
				expanded: this.mailAddressTableExpanded,
				onExpanded: (newExpanded) => this.mailAddressTableExpanded = newExpanded
			}) : null,
			mailLocator.logins.isEnabled(FeatureType.InternalCommunication) ? null : [
				mithril_default(".flex-space-between.items-center.mt-l.mb-s", [mithril_default(".h4", lang.get("inboxRulesSettings_action")), mithril_default(ExpanderButton, {
					label: "showInboxRules_action",
					expanded: this._inboxRulesExpanded(),
					onExpandedChange: this._inboxRulesExpanded
				})]),
				mithril_default(ExpanderPanel, { expanded: this._inboxRulesExpanded() }, mithril_default(Table, inboxRulesTableAttrs)),
				mithril_default(".small", lang.get("nbrOfInboxRules_msg", { "{1}": mailLocator.logins.getUserController().props.inboxRules.length }))
			]
		])];
	}
	renderLocalDataSection() {
		if (!this.offlineStorageSettings.available()) return null;
		return [mithril_default(".h4.mt-l", lang.get("localDataSection_label")), mithril_default(TextField, {
			label: "emptyString_msg",
			class: "mt-negative-s",
			value: lang.get("storedDataTimeRange_label", { "{numDays}": this.offlineStorageSettings.getTimeRange() }),
			isReadOnly: true,
			injectionsRight: () => [mithril_default(IconButton, {
				title: "edit_action",
				click: () => this.onEditStoredDataTimeRangeClicked(),
				icon: Icons.Edit,
				size: ButtonSize.Compact
			})]
		})];
	}
	async onEditStoredDataTimeRangeClicked() {
		if (mailLocator.logins.getUserController().isFreeAccount()) showNotAvailableForFreeDialog();
else {
			await showEditStoredDataTimeRangeDialog(this.offlineStorageSettings);
			mithril_default.redraw();
		}
	}
	_updateTutanotaPropertiesSettings(props) {
		if (props.defaultSender) this._defaultSender = props.defaultSender;
		this._defaultUnconfidential = props.defaultUnconfidential;
		this._noAutomaticContacts = props.noAutomaticContacts;
		this._sendPlaintext = props.sendPlaintextOnly;
		this._signature(getSignatureType(props).name);
	}
	_updateMailboxPropertiesSettings() {
		this._mailboxProperties.getAsync().then((props) => {
			this._reportMovedMails = getReportMovedMailsType(props);
			mithril_default.redraw();
		});
	}
	_updateInboxRules(props) {
		mailLocator.mailboxModel.getUserMailboxDetails().then(async (mailboxDetails) => {
			this._inboxRulesTableLines(await pMap(props.inboxRules, async (rule, index) => {
				return {
					cells: [
						getInboxRuleTypeName(rule.type),
						rule.value,
						await this.getTextForTarget(mailboxDetails, rule.targetFolder)
					],
					actionButtonAttrs: createRowActions({
						getArray: () => props.inboxRules,
						updateInstance: () => mailLocator.entityClient.update(props).catch(ofClass(LockedError, noOp))
					}, rule, index, [{
						label: "edit_action",
						click: () => show$1(mailboxDetails, rule)
					}])
				};
			}));
			mithril_default.redraw();
		});
	}
	_updateOutOfOfficeNotification() {
		const notification = this._outOfOfficeNotification.getLoaded();
		this._outOfOfficeStatus(formatActivateState(notification));
		mithril_default.redraw();
	}
	async getTextForTarget(mailboxDetail, targetFolderId) {
		const folders = await mailLocator.mailModel.getMailboxFoldersForId(assertNotNull(mailboxDetail.mailbox.folders)._id);
		let folder = folders.getFolderById(elementIdPart(targetFolderId));
		if (folder) return getFolderName(folder);
else return lang.get("deletedFolder_label");
	}
	async entityEventsReceived(updates) {
		for (const update of updates) {
			const { operation } = update;
			if (isUpdateForTypeRef(TutanotaPropertiesTypeRef, update) && operation === OperationType.UPDATE) {
				const props = await mailLocator.entityClient.load(TutanotaPropertiesTypeRef, mailLocator.logins.getUserController().props._id);
				this._updateTutanotaPropertiesSettings(props);
				this._updateInboxRules(props);
			} else if (isUpdateForTypeRef(MailFolderTypeRef, update)) this._updateInboxRules(mailLocator.logins.getUserController().props);
else if (isUpdateForTypeRef(OutOfOfficeNotificationTypeRef, update)) this._outOfOfficeNotification.reload().then(() => this._updateOutOfOfficeNotification());
else if (isUpdateForTypeRef(MailboxPropertiesTypeRef, update)) this._mailboxProperties.reload().then(() => this._updateMailboxPropertiesSettings());
		}
		mithril_default.redraw();
	}
	makeReportMovedMailsDropdownAttrs() {
		return {
			label: "spamReports_label",
			helpLabel: () => lang.get("unencryptedTransmission_msg"),
			items: [
				{
					name: lang.get("alwaysAsk_action"),
					value: ReportMovedMailsType.ALWAYS_ASK
				},
				{
					name: lang.get("alwaysReport_action"),
					value: ReportMovedMailsType.AUTOMATICALLY_ONLY_SPAM
				},
				{
					name: lang.get("neverReport_action"),
					value: ReportMovedMailsType.NEVER
				}
			],
			selectedValue: this._reportMovedMails,
			selectionChangedHandler: async (reportMovedMails) => {
				const mailboxGroupRoot = await this.getMailboxGroupRoot();
				await mailLocator.mailModel.saveReportMovedMails(mailboxGroupRoot, reportMovedMails);
			},
			dropdownWidth: 250
		};
	}
};
async function showEditStoredDataTimeRangeDialog(settings) {
	const initialTimeRange = settings.getTimeRange();
	let timeRange = initialTimeRange;
	const newTimeRangeDeferred = defer();
	const dialog = Dialog.showActionDialog({
		title: "emptyString_msg",
		child: () => mithril_default(TextField, {
			label: lang.makeTranslation("days_label", capitalizeFirstLetter(lang.get("days_label"))),
			helpLabel: () => lang.get("storedDataTimeRangeHelpText_msg"),
			type: TextFieldType.Number,
			value: `${timeRange}`,
			oninput: (newValue) => {
				timeRange = Math.max(0, Number(newValue));
			}
		}),
		okAction: async () => {
			try {
				if (initialTimeRange !== timeRange) await settings.setTimeRange(timeRange);
			} finally {
				dialog.close();
			}
		}
	});
	return newTimeRangeDeferred.promise;
}

//#endregion
//#region src/common/subscription/BuyDialog.ts
assertMainOrNode();
async function showBuyDialog(params) {
	if (locator.logins.isEnabled(FeatureType.HideBuyDialogs)) return true;
	const priceChangeModel = await showProgressDialog("pleaseWait_msg", prepareDialog(params));
	if (priceChangeModel) return showDialog(priceChangeModel.getActionLabel(), () => mithril_default(ConfirmSubscriptionView, {
		priceChangeModel,
		count: params.count,
		freeAmount: params.freeAmount,
		bookingText: params.bookingText
	}));
else return false;
}
async function prepareDialog({ featureType, count, reactivate }) {
	const price = await locator.bookingFacade.getPrice(featureType, count, reactivate);
	const priceChangeModel = new PriceChangeModel(price, featureType);
	const customerInfo = await locator.logins.getUserController().loadCustomerInfo();
	const accountingInfo = await locator.entityClient.load(AccountingInfoTypeRef, customerInfo.accountingInfo).catch(ofClass(NotAuthorizedError, () => null));
	if (accountingInfo && accountingInfo.paymentMethod == null) {
		const confirm = await Dialog.confirm("enterPaymentDataFirst_msg");
		if (confirm) mithril_default.route.set("/settings/invoice");
		return null;
	} else return priceChangeModel;
}
function showDialog(okLabel, view) {
	return new Promise((resolve) => {
		let dialog;
		const doAction = (res) => {
			dialog.close();
			resolve(res);
		};
		dialog = Dialog.showActionDialog({
			okActionTextId: okLabel,
			title: "bookingSummary_label",
			child: () => view(),
			okAction: () => doAction(true),
			cancelAction: () => doAction(false),
			type: DialogType.EditSmall
		});
	});
}
var ConfirmSubscriptionView = class {
	view({ attrs }) {
		const { priceChangeModel, count, freeAmount } = attrs;
		const chargeDate = incrementDate(priceChangeModel.periodEndDate(), 1);
		return mithril_default("", [
			mithril_default(TextField, {
				label: "bookingOrder_label",
				value: lang.get(attrs.bookingText, { "{1}": Math.abs(count) }),
				type: TextFieldType.Area,
				isReadOnly: true
			}),
			priceChangeModel.isBuy() ? mithril_default(TextField, {
				label: "subscription_label",
				helpLabel: () => lang.get("nextChargeOn_label", { "{chargeDate}": formatDate(chargeDate) }),
				value: this.getSubscriptionText(priceChangeModel),
				isReadOnly: true
			}) : null,
			mithril_default(TextField, {
				label: "price_label",
				helpLabel: () => this.getPriceInfoText(priceChangeModel),
				value: this.getPriceText(priceChangeModel),
				isReadOnly: true
			})
		]);
	}
	getSubscriptionText(model) {
		if (model.isYearly()) return lang.get("pricing.yearly_label");
else return lang.get("pricing.monthly_label");
	}
	getPriceText(model) {
		let netGrossText = model.taxIncluded() ? lang.get("gross_label") : lang.get("net_label");
		let periodText = model.isYearly() ? lang.get("pricing.perYear_label") : lang.get("pricing.perMonth_label");
		const futurePriceNextPeriod = model.futurePrice;
		let currentPriceNextPeriod = model.currentPrice;
		if (model.isSinglePriceType()) {
			const priceDiff = futurePriceNextPeriod - currentPriceNextPeriod;
			return `${formatPrice(priceDiff, true)} ${periodText} (${netGrossText})`;
		} else return `${formatPrice(futurePriceNextPeriod, true)} ${periodText} (${netGrossText})`;
	}
	getPriceInfoText(model) {
		if (model.isUnbuy()) return lang.get("priceChangeValidFrom_label", { "{1}": formatDate(model.periodEndDate()) });
else if (model.addedPriceForCurrentPeriod() > 0) return lang.get("priceForCurrentAccountingPeriod_label", { "{1}": formatPrice(model.addedPriceForCurrentPeriod(), true) });
else return "";
	}
};
var PriceChangeModel = class {
	currentItem;
	futureItem;
	currentPrice;
	futurePrice;
	additionalFeatures;
	constructor(price, featureType) {
		this.price = price;
		this.featureType = featureType;
		this.currentItem = getPriceItem(price.currentPriceNextPeriod, featureType);
		this.futureItem = getPriceItem(price.futurePriceNextPeriod, featureType);
		this.currentPrice = this.getPriceFromPriceData(price.currentPriceNextPeriod, featureType);
		this.futurePrice = this.getPriceFromPriceData(price.futurePriceNextPeriod, featureType);
		if (this.featureType === BookingItemFeatureType.LegacyUsers) this.additionalFeatures = new Set([
			BookingItemFeatureType.Whitelabel,
			BookingItemFeatureType.Sharing,
			BookingItemFeatureType.Business
		].filter((f) => this.getFuturePrice(f) > 0));
else this.additionalFeatures = new Set();
	}
	getActionLabel() {
		if (!this.isPriceChange()) return "accept_action";
		if (this.isBuy()) return "buy_action";
		return "order_action";
	}
	isBuy() {
		return this.currentPrice < this.futurePrice;
	}
	isUnbuy() {
		return this.currentPrice > this.futurePrice;
	}
	isPriceChange() {
		return this.currentPrice !== this.futurePrice;
	}
	isSinglePriceType() {
		return this.anyItem().singleType;
	}
	getCurrentCount() {
		return filterInt(assertNotNull(this.currentItem).count);
	}
	getFutureCount() {
		return filterInt(assertNotNull(this.futureItem).count);
	}
	isYearly() {
		const period = assertNotNull(this.price.futurePriceNextPeriod ?? this.price.currentPriceNextPeriod);
		return asPaymentInterval(period.paymentInterval) === PaymentInterval.Yearly;
	}
	taxIncluded() {
		return assertNotNull(this.price.futurePriceNextPeriod).taxIncluded;
	}
	periodEndDate() {
		return new Date(this.price.periodEndDate);
	}
	addedPriceForCurrentPeriod() {
		return this.price.currentPeriodAddedPrice ? filterInt(this.price.currentPeriodAddedPrice) : 0;
	}
	anyItem() {
		return assertNotNull(this.futureItem ?? this.currentItem);
	}
	getFuturePrice(featureType) {
		return this.getPriceFromPriceData(this.price.futurePriceNextPeriod, featureType);
	}
	/**
	* Returns the price for the feature type from the price data if available, otherwise 0.
	*/
	getPriceFromPriceData(priceData, featureType) {
		let item = getPriceItem(priceData, featureType);
		let itemPrice = item ? Number(item.price) : 0;
		if (featureType === BookingItemFeatureType.LegacyUsers) {
			itemPrice += this.getPriceFromPriceData(priceData, BookingItemFeatureType.Whitelabel);
			itemPrice += this.getPriceFromPriceData(priceData, BookingItemFeatureType.Sharing);
			itemPrice += this.getPriceFromPriceData(priceData, BookingItemFeatureType.Business);
		}
		return itemPrice;
	}
};

//#endregion
//#region src/common/settings/groups/GroupDetailsView.ts
assertMainOrNode();
var GroupDetailsView = class {
	constructor(model) {
		this.model = model;
	}
	/**
	* render the header that tells us what type of group we have here
	* @private
	*/
	renderHeader() {
		return mithril_default(".h4.mt-l", getGroupTypeDisplayName(this.model.getGroupType()));
	}
	renderView() {
		return mithril_default("#user-viewer.fill-absolute.scroll.plr-l", [
			this.renderHeader(),
			this.renderCommonInfo(),
			this.renderMailGroupInfo()
		]);
	}
	/**
	* render the fields that are common to all group types
	* @private
	*/
	renderCommonInfo() {
		return [
			this.renderCreatedTextField(),
			this.renderNameField(),
			this.renderStatusSelector(),
			this.renderMembersTable()
		];
	}
	renderCreatedTextField() {
		return mithril_default(TextField, {
			label: "created_label",
			value: formatDateWithMonth(this.model.getCreationDate()),
			isReadOnly: true
		});
	}
	/**
	* render the information that only shared mailboxes have
	* @private
	*/
	renderMailGroupInfo() {
		return [
			this.renderUsedStorage(),
			mithril_default(TextField, {
				label: "mailAddress_label",
				value: this.model.getGroupMailAddress(),
				isReadOnly: true
			}),
			mithril_default(TextField, {
				label: "mailName_label",
				value: this.model.getGroupSenderName(),
				isReadOnly: true,
				injectionsRight: () => mithril_default(IconButton, {
					icon: Icons.Edit,
					title: "setSenderName_action",
					click: () => {
						this.showChangeSenderNameDialog();
					}
				})
			})
		];
	}
	renderStatusSelector() {
		const attrs = {
			label: "state_label",
			items: [{
				name: lang.get("activated_label"),
				value: false
			}, {
				name: lang.get("deactivated_label"),
				value: true
			}],
			selectedValue: !this.model.isGroupActive(),
			selectionChangedHandler: (deactivate) => this.onActivationStatusChanged(deactivate)
		};
		return mithril_default(DropDownSelector, attrs);
	}
	async onActivationStatusChanged(deactivate) {
		const buyParams = await showProgressDialog("pleaseWait_msg", this.model.validateGroupActivationStatus(deactivate));
		if (!buyParams) return;
		const confirmed = await showBuyDialog(buyParams);
		if (!confirmed) return;
		await showProgressDialog("pleaseWait_msg", this.model.executeGroupBuy(deactivate));
	}
	renderNameField() {
		return mithril_default(TextField, {
			label: "name_label",
			value: this.model.getGroupName(),
			isReadOnly: true,
			injectionsRight: () => mithril_default(IconButton, {
				title: "edit_action",
				click: () => this.showChangeNameDialog(),
				icon: Icons.Edit,
				size: ButtonSize.Compact
			})
		});
	}
	showChangeNameDialog() {
		Dialog.showProcessTextInputDialog({
			title: "edit_action",
			label: "name_label",
			defaultValue: this.model.getGroupName(),
			inputValidator: (newName) => this.model.validateGroupName(newName)
		}, (newName) => this.model.changeGroupName(newName));
	}
	showChangeSenderNameDialog() {
		Dialog.showProcessTextInputDialog({
			title: "edit_action",
			label: "name_label",
			defaultValue: this.model.getGroupSenderName()
		}, (newName) => this.model.changeGroupSenderName(newName));
	}
	renderUsedStorage() {
		const usedStorage = this.model.getUsedStorage();
		const formattedStorage = usedStorage ? formatStorageSize(usedStorage) : lang.get("loading_msg");
		return mithril_default(TextField, {
			label: "storageCapacityUsed_label",
			value: formattedStorage,
			isReadOnly: true
		});
	}
	async showAddMemberDialog() {
		const possibleMembers = await this.model.getPossibleMembers();
		if (possibleMembers.length === 0) return Dialog.message("noValidMembersToAdd_msg");
		let currentSelection = getFirstOrThrow(possibleMembers).value;
		const addUserToGroupOkAction = (dialog) => {
			showProgressDialog("pleaseWait_msg", this.model.addUserToGroup(currentSelection));
			dialog.close();
		};
		Dialog.showActionDialog({
			title: "addUserToGroup_label",
			child: { view: () => mithril_default(DropDownSelector, {
				label: "account_label",
				items: possibleMembers,
				selectedValue: currentSelection,
				selectionChangedHandler: (newSelected) => currentSelection = newSelected,
				dropdownWidth: 250
			}) },
			allowOkWithReturn: true,
			okAction: addUserToGroupOkAction
		});
	}
	async entityEventsReceived(updates) {
		return this.model.entityEventsReceived(updates);
	}
	renderMembersTable() {
		if (!this.model.isGroupActive()) return null;
		const addUserButtonAttrs = {
			title: "addUserToGroup_label",
			click: () => this.showAddMemberDialog(),
			icon: Icons.Add,
			size: ButtonSize.Compact
		};
		const lines = this.model.getMembersInfo().map((userGroupInfo) => {
			const removeButtonAttrs = {
				title: "remove_action",
				click: () => showProgressDialog("pleaseWait_msg", this.model.removeGroupMember(userGroupInfo)),
				icon: Icons.Cancel,
				size: ButtonSize.Compact
			};
			return {
				cells: [userGroupInfo.name, neverNull(userGroupInfo.mailAddress)],
				actionButtonAttrs: removeButtonAttrs
			};
		});
		const membersTableAttrs = {
			columnHeading: ["name_label", "mailAddress_label"],
			columnWidths: [ColumnWidth.Largest, ColumnWidth.Largest],
			showActionButtonColumn: true,
			addButtonAttrs: addUserButtonAttrs,
			lines
		};
		return [mithril_default(".h5.mt-l.mb-s", lang.get("groupMembers_label")), mithril_default(Table, membersTableAttrs)];
	}
};
function getGroupTypeDisplayName(groupType) {
	if (groupType == null) return "";
else if (groupType === GroupType.Mail) return lang.get("sharedMailbox_label");
else if (groupType === GroupType.User) return lang.get("userColumn_label");
else if (groupType === GroupType.Template) return lang.get("templateGroup_label");
else return groupType;
}

//#endregion
//#region src/common/settings/ImportUsersViewer.ts
const delayTime = 900;
const CSV_USER_FORMAT = "username;user@domain.com;password";
function checkAndImportUserData(userDetailsInputCsv, availableDomains) {
	let userData = csvToUserDetails(userDetailsInputCsv);
	if (!userData) {
		Dialog.message(lang.getTranslation("wrongUserCsvFormat_msg", { "{format}": CSV_USER_FORMAT }));
		return false;
	} else {
		const errorMessage = checkAndGetErrorMessage(userData, availableDomains);
		if (!errorMessage) {
			if (userData.length > 0) showBookingDialog(userData);
			return true;
		} else {
			Dialog.message(lang.makeTranslation("error_msg", errorMessage));
			return false;
		}
	}
}
/**
* Returns the user data from the given csv string or null if the scv string is not valid
*/
function csvToUserDetails(csvString) {
	let lines = csvString.replace("\r", "").split("\n").filter((l) => "" !== l.trim());
	let error = false;
	let userData = lines.map((a) => {
		let parts = a.trim().split(";");
		if (parts.length !== 3) {
			error = true;
			return null;
		} else return {
			username: parts[0],
			mailAddress: parts[1],
			password: parts[2]
		};
	});
	if (error) return null;
else return userData;
}
/**
* Check the user data for validity. Returns an error message for the first user with invalid data, otherwise null.
*/
function checkAndGetErrorMessage(userData, availableDomains) {
	if (userData.length === 0) return lang.get("noInputWasMade_msg");
else {
		let errorMessageArray = [];
		let errorMessage = null;
		userData.find((u, index) => {
			let mailAddress = u.mailAddress;
			let domain = u.mailAddress.split("@")[1].toLowerCase().trim();
			if (!isMailAddress(u.mailAddress, true)) errorMessageArray.push("mailAddressInvalid_msg");
			if (!contains(availableDomains, domain)) errorMessageArray.push("customDomainErrorDomainNotAvailable_msg");
			if (u.password.trim() === "") errorMessageArray.push("enterMissingPassword_msg");
			if (userData.some((otherUser) => otherUser.mailAddress === mailAddress && otherUser !== u)) errorMessageArray.push("duplicatedMailAddressInUserList_msg");
			if (errorMessageArray.length > 0) {
				errorMessage = errorMessageArray.map((e) => lang.get(e)).join("\n") + "\n" + lang.get("errorAtLine_msg", {
					"{index}": index + 1,
					"{error}": `"${u.username || ""};${u.mailAddress || ""};${u.password || ""}"`
				});
				return true;
			}
		});
		return errorMessage;
	}
}
async function showBookingDialog(userDetailsArray) {
	const userController = locator.logins.getUserController();
	const planType = await userController.getPlanType();
	const accepted = await showBuyDialog({
		featureType: await userController.isNewPaidPlan() ? toFeatureType(planType) : BookingItemFeatureType.LegacyUsers,
		bookingText: "bookingItemUsersIncluding_label",
		count: userDetailsArray.length,
		freeAmount: 0,
		reactivate: false
	});
	if (!accepted) return;
	let nbrOfCreatedUsers = 0;
	let notAvailableUsers = [];
	const operation = locator.operationProgressTracker.startNewOperation();
	await showProgressDialog(lang.getTranslation("createActionStatus_msg", {
		"{index}": nbrOfCreatedUsers,
		"{count}": userDetailsArray.length
	}), pMap(userDetailsArray, (user, userIndex) => {
		return createUserIfMailAddressAvailable(user, userIndex, userDetailsArray.length, operation.id).then((created) => {
			if (created) {
				nbrOfCreatedUsers++;
				mithril_default.redraw();
			} else notAvailableUsers.push(user);
		});
	}), operation.progress).catch(ofClass(PreconditionFailedError, () => Dialog.message("createUserFailed_msg"))).finally(() => operation.done);
	if (notAvailableUsers.length > 0) await Dialog.message(lang.makeTranslation("addressesAlreadyInUse_msg", lang.get("addressesAlreadyInUse_msg") + " " + notAvailableUsers.map((u) => u.mailAddress).join(", ")));
	await Dialog.message(lang.getTranslation("createdUsersCount_msg", { "{1}": nbrOfCreatedUsers }));
}
/**
* @returns True if the user was created, false if the email address is not available.
*/
function createUserIfMailAddressAvailable(user, index, overallNumberOfUsers, operationId) {
	let cleanMailAddress = user.mailAddress.trim().toLowerCase();
	return locator.mailAddressFacade.isMailAddressAvailable(cleanMailAddress).then(async (available) => {
		if (available) return locator.userManagementFacade.createUser(user.username ? user.username : "", cleanMailAddress, user.password, index, overallNumberOfUsers, operationId).then(() => {
			return delay(delayTime).then(() => true);
		});
else return delay(delayTime).then(() => false);
	});
}

//#endregion
//#region src/common/settings/UserViewer.ts
assertMainOrNode();
var UserViewer = class {
	user = new LazyLoaded(() => this.loadUser());
	customer = new LazyLoaded(() => this.loadCustomer());
	teamGroupInfos = new LazyLoaded(() => this.loadTeamGroupInfos());
	groupsTableAttrs = null;
	secondFactorsForm;
	usedStorage = null;
	mailAddressTableModel = null;
	mailAddressTableExpanded;
	constructor(userGroupInfo, isAdmin) {
		this.userGroupInfo = userGroupInfo;
		this.isAdmin = isAdmin;
		this.userGroupInfo = userGroupInfo;
		this.mailAddressTableExpanded = false;
		this.secondFactorsForm = new SecondFactorsEditForm(this.user, locator.domainConfigProvider(), locator.loginFacade, this.isAdmin, !!this.userGroupInfo.deleted);
		this.teamGroupInfos.getAsync().then(async (availableTeamGroupInfos) => {
			if (availableTeamGroupInfos.length > 0) {
				this.groupsTableAttrs = {
					columnHeading: ["name_label", "groupType_label"],
					columnWidths: [ColumnWidth.Largest, ColumnWidth.Small],
					showActionButtonColumn: true,
					addButtonAttrs: {
						title: "addGroup_label",
						icon: Icons.Add,
						click: () => this.showAddUserToGroupDialog()
					},
					lines: []
				};
				await this.updateGroups();
			}
		});
		this.user.getAsync().then(async (user) => {
			const mailMembership = await asyncFind(user.memberships, async (ship) => {
				return ship.groupType === GroupType.Mail && (await locator.entityClient.load(GroupTypeRef, ship.group)).user === user._id;
			});
			if (mailMembership == null) {
				console.error("User doesn't have a mailbox?", user._id);
				return;
			}
			this.mailAddressTableModel = this.isItMe() ? await locator.mailAddressTableModelForOwnMailbox() : await locator.mailAddressTableModelForAdmin(mailMembership.group, user._id, this.userGroupInfo);
			mithril_default.redraw();
		});
		this.updateUsedStorageAndAdminFlag();
	}
	renderView() {
		const changePasswordButtonAttrs = {
			title: "changePassword_label",
			click: () => this.changePassword(),
			icon: Icons.Edit,
			size: ButtonSize.Compact
		};
		const passwordFieldAttrs = {
			label: "password_label",
			value: "***",
			injectionsRight: () => [mithril_default(IconButton, changePasswordButtonAttrs)],
			isReadOnly: true
		};
		return mithril_default("#user-viewer.fill-absolute.scroll.plr-l.pb-floating", [
			mithril_default(".h4.mt-l", lang.get("userSettings_label")),
			mithril_default("", [
				mithril_default(TextField, {
					label: "mailAddress_label",
					value: this.userGroupInfo.mailAddress ?? "",
					isReadOnly: true
				}),
				mithril_default(TextField, {
					label: "created_label",
					value: formatDateWithMonth(this.userGroupInfo.created),
					isReadOnly: true
				}),
				mithril_default(TextField, {
					label: "storageCapacityUsed_label",
					value: this.usedStorage ? formatStorageSize(this.usedStorage) : lang.get("loading_msg"),
					isReadOnly: true
				})
			]),
			mithril_default("", [
				this.renderName(),
				mithril_default(TextField, passwordFieldAttrs),
				locator.logins.getUserController().isGlobalAdmin() ? this.renderAdminStatusSelector() : null,
				this.renderUserStatusSelector()
			]),
			mithril_default(this.secondFactorsForm),
			this.groupsTableAttrs ? mithril_default(".h4.mt-l.mb-s", lang.get("groups_label")) : null,
			this.groupsTableAttrs ? mithril_default(Table, this.groupsTableAttrs) : null,
			this.mailAddressTableModel ? mithril_default(MailAddressTable, {
				model: this.mailAddressTableModel,
				expanded: this.mailAddressTableExpanded,
				onExpanded: (newExpanded) => this.mailAddressTableExpanded = newExpanded
			}) : progressIcon()
		]);
	}
	renderName() {
		const name = this.userGroupInfo.name;
		return mithril_default(TextField, {
			label: "name_label",
			value: name,
			isReadOnly: true,
			injectionsRight: () => mithril_default(IconButton, {
				title: "edit_action",
				click: () => this.onChangeName(name),
				icon: Icons.Edit,
				size: ButtonSize.Compact
			})
		});
	}
	onChangeName(name) {
		Dialog.showProcessTextInputDialog({
			title: "edit_action",
			label: "name_label",
			defaultValue: name
		}, (newName) => {
			this.userGroupInfo.name = newName;
			return locator.entityClient.update(this.userGroupInfo);
		});
	}
	renderAdminStatusSelector() {
		return mithril_default(DropDownSelector, {
			label: "globalAdmin_label",
			items: [{
				name: lang.get("no_label"),
				value: false
			}, {
				name: lang.get("yes_label"),
				value: true
			}],
			selectedValue: this.isAdmin,
			selectionChangedHandler: (value) => {
				if (this.userGroupInfo.deleted) Dialog.message("userAccountDeactivated_msg");
else if (this.isItMe()) Dialog.message("removeOwnAdminFlagInfo_msg");
else if (this.userGroupInfo.localAdmin != null) Dialog.message("assignAdminRightsToLocallyAdministratedUserError_msg");
else showProgressDialog("pleaseWait_msg", this.user.getAsync().then((user) => locator.userManagementFacade.changeAdminFlag(user, value)).catch(ofClass(PreconditionFailedError, (e) => {
					if (e.data && e.data === "usergroup.pending-key-rotation") Dialog.message("makeAdminPendingUserGroupKeyRotationError_msg");
else throw e;
				})));
			}
		});
	}
	renderUserStatusSelector() {
		return mithril_default(DropDownSelector, {
			label: "state_label",
			items: [{
				name: lang.get("activated_label"),
				value: true
			}, {
				name: lang.get("deactivated_label"),
				value: false
			}],
			selectedValue: this.userGroupInfo.deleted == null,
			selectionChangedHandler: (activate) => {
				if (this.isAdmin) Dialog.message("deactivateOwnAccountInfo_msg");
else if (activate) this.restoreUser();
else this.deleteUser();
			}
		});
	}
	isItMe() {
		return isSameId(locator.logins.getUserController().userGroupInfo._id, this.userGroupInfo._id);
	}
	changePassword() {
		if (this.isItMe()) showChangeOwnPasswordDialog();
else if (this.isAdmin) Dialog.message("changeAdminPassword_msg");
else this.user.getAsync().then((user) => {
			showChangeUserPasswordAsAdminDialog(user);
		});
	}
	async updateGroups() {
		if (this.groupsTableAttrs) {
			const user = await this.user.getAsync();
			const customer = await this.customer.getAsync();
			this.groupsTableAttrs.lines = await pMap(this.getTeamMemberships(user, customer), async (m) => {
				const groupInfo = await locator.entityClient.load(GroupInfoTypeRef, m.groupInfo);
				return {
					cells: [getGroupInfoDisplayName(groupInfo), getGroupTypeDisplayName(neverNull(m.groupType))],
					actionButtonAttrs: {
						title: "remove_action",
						click: () => {
							showProgressDialog("pleaseWait_msg", locator.groupManagementFacade.removeUserFromGroup(user._id, groupInfo.group)).catch(ofClass(NotAuthorizedError, (e) => {
								Dialog.message("removeUserFromGroupNotAdministratedUserError_msg");
							}));
						},
						icon: Icons.Cancel
					}
				};
			}, { concurrency: 5 });
		}
	}
	async showAddUserToGroupDialog() {
		const user = await this.user.getAsync();
		if (this.userGroupInfo.deleted) Dialog.message("userAccountDeactivated_msg");
else {
			const globalAdmin = locator.logins.isGlobalAdminUserLoggedIn();
			const availableGroupInfos = this.teamGroupInfos.getLoaded().filter((g) => globalAdmin && !g.deleted && !user.memberships.some((m) => isSameId(m.groupInfo, g._id))).sort(compareGroupInfos);
			if (availableGroupInfos.length > 0) {
				const dropdownItems = availableGroupInfos.map((g) => ({
					name: getGroupInfoDisplayName(g),
					value: g
				}));
				let selectedGroupInfo = getFirstOrThrow(availableGroupInfos);
				Dialog.showActionDialog({
					title: "addUserToGroup_label",
					child: { view: () => mithril_default(DropDownSelector, {
						label: "group_label",
						items: dropdownItems,
						selectedValue: selectedGroupInfo,
						selectionChangedHandler: (selection) => selectedGroupInfo = selection,
						dropdownWidth: 250
					}) },
					allowOkWithReturn: true,
					okAction: (dialog) => {
						showProgressDialog("pleaseWait_msg", locator.groupManagementFacade.addUserToGroup(user, selectedGroupInfo.group));
						dialog.close();
					}
				});
			}
		}
	}
	async updateUsedStorageAndAdminFlag() {
		const user = await this.user.getAsync();
		this.isAdmin = this.isAdminUser(user);
		try {
			this.usedStorage = await locator.userManagementFacade.readUsedUserStorage(user);
			mithril_default.redraw();
		} catch (e) {
			if (!(e instanceof BadRequestError)) throw e;
		}
	}
	getTeamMemberships(user, customer) {
		return user.memberships.filter((m) => m.groupInfo[0] === customer.teamGroups);
	}
	isAdminUser(user) {
		return user.memberships.some((m) => m.groupType === GroupType.Admin);
	}
	async deleteUser() {
		const planType = await locator.logins.getUserController().getPlanType();
		const newPlan = await locator.logins.getUserController().isNewPaidPlan();
		const confirmed = await showBuyDialog({
			featureType: newPlan ? toFeatureType(planType) : BookingItemFeatureType.LegacyUsers,
			bookingText: "cancelUserAccounts_label",
			count: -1,
			freeAmount: 0,
			reactivate: false
		});
		if (confirmed) return locator.userManagementFacade.deleteUser(await this.user.getAsync(), false).catch(ofClass(PreconditionFailedError, () => Dialog.message("stillReferencedFromContactForm_msg")));
	}
	async restoreUser() {
		const planType = await locator.logins.getUserController().getPlanType();
		const newPlan = await locator.logins.getUserController().isNewPaidPlan();
		const confirmed = await showBuyDialog({
			featureType: newPlan ? toFeatureType(planType) : BookingItemFeatureType.LegacyUsers,
			bookingText: "bookingItemUsersIncluding_label",
			count: 1,
			freeAmount: 0,
			reactivate: true
		});
		if (confirmed) await locator.userManagementFacade.deleteUser(await this.user.getAsync(), true).catch(ofClass(PreconditionFailedError, () => Dialog.message("emailAddressInUse_msg")));
	}
	async entityEventsReceived(updates) {
		for (const update of updates) {
			const { instanceListId, instanceId, operation } = update;
			if (isUpdateForTypeRef(GroupInfoTypeRef, update) && operation === OperationType.UPDATE && isSameId(this.userGroupInfo._id, [neverNull(instanceListId), instanceId])) {
				this.userGroupInfo = await locator.entityClient.load(GroupInfoTypeRef, this.userGroupInfo._id);
				await this.updateUsedStorageAndAdminFlag();
				mithril_default.redraw();
			} else if (isUpdateForTypeRef(UserTypeRef, update) && operation === OperationType.UPDATE && this.user.isLoaded() && isSameId(this.user.getLoaded()._id, instanceId)) {
				this.user.reset();
				await this.updateUsedStorageAndAdminFlag();
				await this.updateGroups();
			}
			await this.secondFactorsForm.entityEventReceived(update);
		}
		mithril_default.redraw();
	}
	loadUser() {
		return locator.entityClient.load(GroupTypeRef, this.userGroupInfo.group).then((userGroup) => {
			return locator.entityClient.load(UserTypeRef, neverNull(userGroup.user));
		});
	}
	loadCustomer() {
		return locator.logins.getUserController().loadCustomer();
	}
	loadTeamGroupInfos() {
		return this.customer.getAsync().then((customer) => locator.entityClient.loadAll(GroupInfoTypeRef, customer.teamGroups));
	}
};
function showUserImportDialog(customDomains) {
	let editor = new HtmlEditor("enterAsCSV_msg").showBorders().setMode(HtmlEditorMode.HTML).setValue(CSV_USER_FORMAT).setMinHeight(200);
	let form = { view: () => {
		return [mithril_default(editor)];
	} };
	Dialog.showActionDialog({
		title: "importUsers_action",
		child: form,
		okAction: (csvDialog) => {
			let closeCsvDialog = checkAndImportUserData(editor.getValue(), customDomains);
			if (closeCsvDialog) csvDialog.close();
		}
	});
}

//#endregion
//#region src/common/settings/AddUserDialog.ts
assertMainOrNode();
async function show$5() {
	const availableDomains = await getAvailableDomains(locator.logins);
	const onNewPaidPlan = await locator.logins.getUserController().isNewPaidPlan();
	let emailAddress = null;
	let errorMsg = "mailAddressNeutral_msg";
	let isVerificationBusy = false;
	let userName = "";
	const passwordModel = new PasswordModel(locator.usageTestController, locator.logins, {
		checkOldPassword: false,
		enforceStrength: false,
		hideConfirmation: true
	});
	let selectedDomain = getFirstOrThrow(availableDomains);
	let form = { view: () => {
		return [
			mithril_default(TextField, {
				label: "name_label",
				helpLabel: () => lang.get("loginNameInfoAdmin_msg"),
				value: userName,
				oninput: (value) => userName = value
			}),
			mithril_default(SelectMailAddressForm, {
				selectedDomain,
				availableDomains,
				onDomainChanged: (domain) => {
					if (domain.isPaid && !onNewPaidPlan) showUpgradeWizard(locator.logins, NewPaidPlans, lang.makeTranslation("change_to_new_plan", `${lang.get("paidEmailDomainLegacy_msg")}\n${lang.get("changePaidPlan_msg")}`));
else selectedDomain = domain;
				},
				onValidationResult: (email, verificationResult) => {
					if (verificationResult.isValid) {
						emailAddress = email;
						errorMsg = null;
					} else errorMsg = verificationResult.errorId;
				},
				onBusyStateChanged: (isBusy) => {
					isVerificationBusy = isBusy;
				}
			}),
			mithril_default(PasswordForm, { model: passwordModel })
		];
	} };
	let addUserOkAction = async (dialog) => {
		if (isVerificationBusy) return;
		const passwordFormError = passwordModel.getErrorMessageId();
		if (errorMsg) {
			Dialog.message(errorMsg);
			return;
		} else if (passwordFormError) {
			Dialog.message(passwordFormError);
			return;
		}
		const userController = locator.logins.getUserController();
		const planType = await userController.getPlanType();
		const newPlan = await userController.isNewPaidPlan();
		showProgressDialog("pleaseWait_msg", showBuyDialog({
			featureType: newPlan ? toFeatureType(planType) : BookingItemFeatureType.LegacyUsers,
			bookingText: "bookingItemUsers_label",
			count: 1,
			freeAmount: 0,
			reactivate: false
		})).then(async (accepted) => {
			if (accepted) {
				const operation = locator.operationProgressTracker.startNewOperation();
				const p = locator.userManagementFacade.createUser(userName.trim(), assertNotNull(emailAddress), passwordModel.getNewPassword(), 0, 1, operation.id);
				showProgressDialog(lang.getTranslation("createActionStatus_msg", {
					"{index}": 0,
					"{count}": 1
				}), p, operation.progress).catch(ofClass(PreconditionFailedError, (e) => Dialog.message("createUserFailed_msg"))).then(() => dialog.close()).finally(() => operation.done());
			}
		});
	};
	Dialog.showActionDialog({
		title: "addUsers_action",
		child: form,
		okAction: addUserOkAction
	});
}

//#endregion
//#region src/common/settings/UserListView.ts
assertMainOrNode();
var UserListView = class {
	searchQuery = "";
	listModel;
	renderConfig = {
		createElement: (dom) => {
			const row = new UserRow((groupInfo) => this.isAdmin(groupInfo));
			mithril_default.render(dom, row.render());
			return row;
		},
		itemHeight: size.list_row_height,
		swipe: null,
		multiselectionAllowed: MultiselectMode.Disabled
	};
	listId;
	adminUserGroupInfoIds = [];
	listStateSubscription = null;
	listSelectionSubscription = null;
	constructor(updateDetailsViewer, focusDetailsViewer, canImportUsers, onImportUsers, onExportUsers) {
		this.updateDetailsViewer = updateDetailsViewer;
		this.focusDetailsViewer = focusDetailsViewer;
		this.canImportUsers = canImportUsers;
		this.onImportUsers = onImportUsers;
		this.onExportUsers = onExportUsers;
		this.listModel = this.makeListModel();
		this.listId = new LazyLoaded(async () => {
			const customer = await locator.logins.getUserController().loadCustomer();
			return customer.userGroups;
		});
		this.listModel.loadInitial();
		this.oncreate = this.oncreate.bind(this);
		this.onremove = this.onremove.bind(this);
		this.view = this.view.bind(this);
	}
	shortcuts = listSelectionKeyboardShortcuts(MultiselectMode.Disabled, () => this.listModel);
	oncreate() {
		keyManager.registerShortcuts(this.shortcuts);
	}
	view() {
		if (locator.logins.isEnabled(FeatureType.WhitelabelChild)) return null;
		return mithril_default(ListColumnWrapper, { headerContent: mithril_default(".flex.flex-space-between.center-vertically.plr-l", mithril_default(BaseSearchBar, {
			text: this.searchQuery,
			onInput: (text) => this.updateQuery(text),
			busy: false,
			onKeyDown: (e) => e.stopPropagation(),
			onClear: () => {
				this.searchQuery = "";
				this.listModel.reapplyFilter();
			},
			placeholder: lang.get("searchUsers_placeholder")
		}), mithril_default(".mr-negative-s", mithril_default(IconButton, {
			title: "addUsers_action",
			icon: Icons.Add,
			click: () => this.addButtonClicked()
		}), this.renderImportButton())) }, this.listModel.isEmptyAndDone() ? mithril_default(ColumnEmptyMessageBox, {
			color: theme.list_message_bg,
			icon: BootIcons.Contacts,
			message: "noEntries_msg"
		}) : mithril_default(List, {
			renderConfig: this.renderConfig,
			state: this.listModel.state,
			onLoadMore: () => this.listModel.loadMore(),
			onRetryLoading: () => this.listModel.retryLoading(),
			onStopLoading: () => this.listModel.stopLoading(),
			onSingleSelection: (item) => {
				this.listModel.onSingleSelection(item);
				this.focusDetailsViewer();
			},
			onSingleTogglingMultiselection: noOp,
			onRangeSelectionTowards: noOp
		}));
	}
	renderImportButton() {
		if (this.canImportUsers()) return mithril_default(IconButton, attachDropdown({
			mainButtonAttrs: {
				title: "more_label",
				icon: Icons.More
			},
			childAttrs: () => [{
				label: "importUsers_action",
				click: () => {
					this.onImportUsers();
				}
			}, {
				label: "exportUsers_action",
				click: () => {
					this.onExportUsers();
				}
			}]
		}));
else return null;
	}
	onremove() {
		keyManager.unregisterShortcuts(this.shortcuts);
		this.listStateSubscription?.end(true);
		this.listSelectionSubscription?.end(true);
	}
	async loadAdmins() {
		const adminGroupMembership = locator.logins.getUserController().user.memberships.find((gm) => gm.groupType === GroupType.Admin);
		if (adminGroupMembership == null) return;
		const members = await locator.entityClient.loadAll(GroupMemberTypeRef, adminGroupMembership.groupMember[0]);
		this.adminUserGroupInfoIds = members.map((adminGroupMember) => elementIdPart(adminGroupMember.userGroupInfo));
	}
	isAdmin(userGroupInfo) {
		return contains(this.adminUserGroupInfoIds, userGroupInfo._id[1]);
	}
	addButtonClicked() {
		show$5();
	}
	async entityEventsReceived(updates) {
		for (const update of updates) {
			const { instanceListId, instanceId, operation } = update;
			if (isUpdateForTypeRef(GroupInfoTypeRef, update) && this.listId.getSync() === instanceListId) await this.listModel.entityEventReceived(instanceListId, instanceId, operation);
else if (isUpdateFor(locator.logins.getUserController().user, update)) {
				await this.loadAdmins();
				this.listModel.reapplyFilter();
			}
			mithril_default.redraw();
		}
	}
	makeListModel() {
		const listModel = new ListElementListModel({
			sortCompare: compareGroupInfos,
			fetch: async (_lastFetchedEntity) => {
				await this.loadAdmins();
				const listId = await this.listId.getAsync();
				const allUserGroupInfos = await locator.entityClient.loadAll(GroupInfoTypeRef, listId);
				return {
					items: allUserGroupInfos,
					complete: true
				};
			},
			loadSingle: async (_listId, elementId) => {
				const listId = await this.listId.getAsync();
				try {
					return await locator.entityClient.load(GroupInfoTypeRef, [listId, elementId]);
				} catch (e) {
					if (e instanceof NotFoundError) return null;
else throw e;
				}
			},
			autoSelectBehavior: () => ListAutoSelectBehavior.OLDER
		});
		listModel.setFilter((gi) => this.groupFilter() && this.queryFilter(gi));
		this.listStateSubscription?.end(true);
		this.listStateSubscription = listModel.stateStream.map((state) => {
			mithril_default.redraw();
		});
		this.listSelectionSubscription?.end(true);
		this.listSelectionSubscription = listModel.differentItemsSelected.map((newSelection) => {
			let detailsViewer;
			if (newSelection.size === 0) detailsViewer = null;
else {
				const item = newSelection.values().next().value;
				detailsViewer = new UserViewer(item, this.isAdmin(item));
			}
			this.updateDetailsViewer(detailsViewer);
			mithril_default.redraw();
		});
		return listModel;
	}
	queryFilter(gi) {
		const lowercaseSearch = this.searchQuery.toLowerCase();
		return gi.name.toLowerCase().includes(lowercaseSearch) || !!gi.mailAddress && gi.mailAddress?.toLowerCase().includes(lowercaseSearch) || gi.mailAddressAliases.some((mai) => mai.mailAddress.toLowerCase().includes(lowercaseSearch));
	}
	groupFilter = () => {
		return locator.logins.getUserController().isGlobalAdmin();
	};
	updateQuery(query) {
		this.searchQuery = query;
		this.listModel.reapplyFilter();
	}
};
var UserRow = class {
	top = 0;
	domElement = null;
	entity = null;
	nameDom;
	addressDom;
	adminIconDom;
	deletedIconDom;
	selectionUpdater;
	constructor(isAdmin) {
		this.isAdmin = isAdmin;
	}
	update(groupInfo, selected) {
		this.entity = groupInfo;
		this.selectionUpdater(selected, false);
		this.nameDom.textContent = groupInfo.name;
		this.addressDom.textContent = groupInfo.mailAddress ? groupInfo.mailAddress : "";
		setVisibility(this.adminIconDom, this.isAdmin(groupInfo));
		setVisibility(this.deletedIconDom, groupInfo.deleted != null);
	}
	/**
	* Only the structure is managed by mithril. We set all contents on our own (see update) in order to avoid the vdom overhead (not negligible on mobiles)
	*/
	render() {
		return mithril_default(SelectableRowContainer, { onSelectedChangeRef: (updater) => this.selectionUpdater = updater }, mithril_default(".flex.col.flex-grow", [mithril_default(".badge-line-height", [mithril_default("", { oncreate: (vnode) => this.nameDom = vnode.dom })]), mithril_default(".flex-space-between.mt-xxs", [mithril_default(".smaller", { oncreate: (vnode) => this.addressDom = vnode.dom }), mithril_default(".icons.flex", [mithril_default(Icon, {
			icon: BootIcons.Settings,
			oncreate: (vnode) => this.adminIconDom = vnode.dom,
			class: "svg-list-accent-fg",
			style: { display: "none" }
		}), mithril_default(Icon, {
			icon: Icons.Trash,
			oncreate: (vnode) => this.deletedIconDom = vnode.dom,
			class: "svg-list-accent-fg",
			style: { display: "none" }
		})])])]));
	}
};

//#endregion
//#region src/mail-app/settings/groups/AddGroupDialog.ts
assertMainOrNode();
var AddGroupDialog = class {
	view(vnode) {
		const { availableGroupTypes, groupType, availableDomains, onEmailChanged, onBusyStateChanged, selectedDomain, onDomainChanged } = vnode.attrs;
		return [
			availableGroupTypes.length > 1 ? mithril_default(DropDownSelector, {
				label: "groupType_label",
				items: availableGroupTypes.map((t) => {
					return {
						name: getGroupTypeDisplayName(t),
						value: t
					};
				}),
				selectedValue: groupType,
				selectionChangedHandler: vnode.attrs.onGroupTypeChanged
			}) : null,
			mithril_default(TextField, {
				label: "name_label",
				value: vnode.attrs.name,
				oninput: vnode.attrs.onGroupNameChanged
			}),
			groupType === GroupType.Mail ? mithril_default("", [
				mithril_default(SelectMailAddressForm, {
					selectedDomain,
					availableDomains,
					onValidationResult: onEmailChanged,
					onBusyStateChanged,
					onDomainChanged
				}),
				mithril_default(".mt-m", ""),
				mithril_default(MoreInfoLink, {
					link: InfoLink.SharedMailboxes,
					isSmall: true
				})
			]) : mithril_default("")
		];
	}
};
var AddGroupDialogViewModel = class {
	groupName;
	mailAddress;
	groupTypes;
	errorMessageId;
	availableDomains;
	selectedDomain;
	groupType;
	isVerifactionBusy;
	_groupManagementFacade;
	constructor(availableDomains, groupManagementFacade) {
		this.availableDomains = availableDomains;
		this._groupManagementFacade = groupManagementFacade;
		this.groupTypes = this.getAvailableGroupTypes();
		this.groupType = getFirstOrThrow(this.groupTypes);
		this.groupName = "";
		this.mailAddress = "";
		this.errorMessageId = "mailAddressNeutral_msg";
		this.isVerifactionBusy = false;
		this.selectedDomain = getFirstOrThrow(availableDomains);
	}
	createMailGroup() {
		return this._groupManagementFacade.createMailGroup(this.groupName, this.mailAddress);
	}
	validateAddGroupInput() {
		if (this.groupType === GroupType.Mail) return this.errorMessageId;
else if (this.groupType === GroupType.Template || this.groupType === GroupType.MailingList && this.groupName.trim() === "") return "enterName_msg";
else return null;
	}
	getAvailableGroupTypes() {
		if (locator.logins.isEnabled(FeatureType.WhitelabelChild)) return [];
else return [GroupType.Mail];
	}
	onEmailChanged(email, validationResult) {
		this.errorMessageId = validationResult.errorId;
		if (validationResult.isValid) this.mailAddress = email;
	}
};
function show$4() {
	getAvailableDomains(locator.logins).then((availableDomains) => {
		const viewModel = new AddGroupDialogViewModel(availableDomains, locator.groupManagementFacade);
		if (viewModel.getAvailableGroupTypes().length === 0) return Dialog.message("selectionNotAvailable_msg");
		let addGroupOkAction = async (dialog) => {
			if (viewModel.isVerifactionBusy) return;
			const errorId = viewModel.validateAddGroupInput();
			if (errorId) {
				Dialog.message(errorId);
				return;
			}
			const userController = locator.logins.getUserController();
			const planType = await userController.getPlanType();
			const useLegacyBookingItem = await userController.useLegacyBookingItem();
			if (viewModel.groupType === GroupType.Mail) showProgressDialog("pleaseWait_msg", showBuyDialog({
				featureType: useLegacyBookingItem ? toFeatureType(planType) : BookingItemFeatureType.SharedMailGroup,
				bookingText: "sharedMailbox_label",
				count: 1,
				freeAmount: 0,
				reactivate: false
			}).then((accepted) => {
				if (accepted) {
					dialog.close();
					return viewModel.createMailGroup();
				}
			}));
else if (viewModel.groupType === GroupType.Template) addTemplateGroup(viewModel.groupName).then((success) => {
				if (success) dialog.close();
			});
		};
		Dialog.showActionDialog({
			title: viewModel.groupType == GroupType.Mail ? "createSharedMailbox_label" : "addGroup_label",
			child: () => mithril_default(AddGroupDialog, {
				selectedDomain: viewModel.selectedDomain,
				groupType: viewModel.groupType,
				availableDomains,
				availableGroupTypes: viewModel.groupTypes,
				name: viewModel.groupName,
				onGroupNameChanged: (newName) => viewModel.groupName = newName,
				onGroupTypeChanged: (newType) => viewModel.groupType = newType,
				onEmailChanged: (mailAddress, validationResult) => viewModel.onEmailChanged(mailAddress, validationResult),
				onBusyStateChanged: (isBusy) => viewModel.isVerifactionBusy = isBusy,
				onDomainChanged: (domain) => viewModel.selectedDomain = domain
			}),
			okAction: addGroupOkAction
		});
	});
}
/**
* @returns {Promise<boolean>} true if group was added, false otherwise
*/
function addTemplateGroup(name) {
	return showProgressDialog("pleaseWait_msg", locator.groupManagementFacade.createTemplateGroup(name).then(() => true).catch(ofClass(PreconditionFailedError, async (e) => {
		if (e.data === TemplateGroupPreconditionFailedReason.BUSINESS_FEATURE_REQUIRED || e.data === TemplateGroupPreconditionFailedReason.UNLIMITED_REQUIRED) {
			const plans = await getAvailablePlansWithTemplates();
			showPlanUpgradeRequiredDialog(plans);
		} else Dialog.message(lang.makeTranslation("confirm_msg", e.message));
		return false;
	})));
}

//#endregion
//#region src/mail-app/settings/groups/GroupDetailsModel.ts
var GroupDetailsModel = class {
	groupInfo;
	group;
	usedStorageInBytes;
	members;
	senderName;
	constructor(groupInfo, entityClient, updateViewCallback) {
		this.entityClient = entityClient;
		this.updateViewCallback = updateViewCallback;
		this.entityClient = entityClient;
		this.groupInfo = groupInfo;
		this.group = new LazyLoaded(() => this.entityClient.load(GroupTypeRef, this.groupInfo.group));
		this.group.getAsync().then(() => this.updateViewCallback());
		this.members = new LazyLoaded(async () => {
			const group = await this.group.getAsync();
			const groupMembers = await this.entityClient.loadRange(GroupMemberTypeRef, group.members, GENERATED_MIN_ID, 200, false);
			return pMap(groupMembers, (member) => this.entityClient.load(GroupInfoTypeRef, member.userGroupInfo));
		});
		this.updateMembers();
		if (this.groupInfo.groupType === GroupType.Mail) {
			this.senderName = new LazyLoaded(() => this.loadSenderName());
			this.updateSenderName();
		}
		this.updateUsedStorage();
	}
	isMailGroup() {
		return this.groupInfo.groupType === GroupType.Mail;
	}
	async loadSenderName() {
		const names = await locator.mailAddressFacade.getSenderNames(this.groupInfo.group);
		return getFirstOrThrow(Array.from(names.values()));
	}
	isGroupActive() {
		return this.groupInfo.deleted == null;
	}
	getGroupType() {
		return this.group.isLoaded() ? this.group.getLoaded().type : null;
	}
	getGroupName() {
		return this.groupInfo.name;
	}
	getUsedStorage() {
		return this.usedStorageInBytes;
	}
	getCreationDate() {
		return this.groupInfo.created;
	}
	getMembersInfo() {
		return this.members.isLoaded() ? this.members.getLoaded() : [];
	}
	getGroupMailAddress() {
		return this.groupInfo.mailAddress ?? "";
	}
	getGroupSenderName() {
		return this.senderName.isLoaded() ? this.senderName.getLoaded() : lang.get("loading_msg");
	}
	/**
	* remove the group of the given groupInfo from this group
	*/
	async removeGroupMember(userGroupInfo) {
		try {
			const userGroup = await this.entityClient.load(GroupTypeRef, userGroupInfo.group);
			return locator.groupManagementFacade.removeUserFromGroup(assertNotNull(userGroup.user), this.groupInfo.group);
		} catch (e) {
			if (!(e instanceof NotAuthorizedError)) throw e;
			throw new UserError("removeUserFromGroupNotAdministratedError_msg");
		}
	}
	async executeGroupBuy(deactivate) {
		const group = await this.group.getAsync();
		try {
			return await locator.groupManagementFacade.deactivateGroup(group, !deactivate);
		} catch (e) {
			if (!(e instanceof PreconditionFailedError)) throw e;
			if (!deactivate) throw new UserError("emailAddressInUse_msg");
else throw new UserError("stillReferencedFromContactForm_msg");
		}
	}
	changeGroupName(newName) {
		const newGroupInfo = createGroupInfo(this.groupInfo);
		newGroupInfo.name = newName;
		return this.entityClient.update(newGroupInfo);
	}
	async changeGroupSenderName(newName) {
		if (this.senderName.isLoaded() && this.senderName.getLoaded() === newName) return;
		const mailGroupId = await this.groupInfo.group;
		await locator.mailAddressFacade.setSenderName(mailGroupId, this.getGroupMailAddress(), newName);
		this.senderName.reset();
		this.senderName.getAsync();
		this.updateViewCallback();
	}
	validateGroupName(newName) {
		if (this.group.isLoaded() && this.group.getLoaded().type === GroupType.MailingList && newName.trim() === "") return "enterName_msg";
else return null;
	}
	/**
	* validate if the given deactivation/activation is valid for this group and return information about the item to book, if any
	* @param deactivate true if the group should be deactivated
	* @return the relevant BookingParams if the activation/deactivatian may go ahead, null otherwise (no action necessary)
	*/
	async validateGroupActivationStatus(deactivate) {
		if (deactivate !== this.isGroupActive()) {
			console.log("tried to set activation status to current status.");
			return null;
		}
		const members = await this.members.getAsync();
		if (deactivate && members.length > 0) throw new UserError("groupNotEmpty_msg");
else {
			const userController = locator.logins.getUserController();
			const planType = await userController.getPlanType();
			const useLegacyBookingItem = await userController.useLegacyBookingItem();
			const bookingItemType = useLegacyBookingItem ? toFeatureType(planType) : BookingItemFeatureType.SharedMailGroup;
			const bookingText = deactivate ? "cancelSharedMailbox_label" : "sharedMailbox_label";
			return {
				featureType: bookingItemType,
				bookingText,
				count: deactivate ? -1 : 1,
				freeAmount: 0,
				reactivate: !deactivate
			};
		}
	}
	async getPossibleMembers() {
		const customer = await this.entityClient.load(CustomerTypeRef, neverNull(locator.logins.getUserController().user.customer));
		const userGroupInfos = await this.entityClient.loadAll(GroupInfoTypeRef, customer.userGroups);
		let globalAdmin = locator.logins.isGlobalAdminUserLoggedIn();
		let availableUserGroupInfos = userGroupInfos.filter((userGroupInfo) => {
			if (!globalAdmin) return false;
else return !userGroupInfo.deleted && !this.members.getLoaded().some((m) => isSameId(m._id, userGroupInfo._id));
		});
		availableUserGroupInfos.sort(compareGroupInfos);
		return availableUserGroupInfos.map((g) => ({
			name: getGroupInfoDisplayName(g),
			value: g.group
		}));
	}
	async addUserToGroup(group) {
		const userGroup = await this.entityClient.load(GroupTypeRef, group);
		const user = await this.entityClient.load(UserTypeRef, neverNull(userGroup.user));
		return locator.groupManagementFacade.addUserToGroup(user, this.groupInfo.group);
	}
	async updateMembers() {
		this.members.reset();
		await this.members.getAsync();
		this.updateViewCallback();
	}
	async updateSenderName() {
		this.senderName.reset();
		await this.senderName.getAsync();
		this.updateViewCallback();
	}
	async updateUsedStorage() {
		if (this.isMailGroup()) try {
			this.usedStorageInBytes = await locator.groupManagementFacade.readUsedSharedMailGroupStorage(await this.group.getAsync());
		} catch (e) {
			if (!(e instanceof BadRequestError)) throw e;
		}
else this.usedStorageInBytes = 0;
		this.updateViewCallback();
	}
	async entityEventsReceived(updates) {
		await pMap(updates, async (update) => {
			const { instanceListId, instanceId, operation } = update;
			if (isUpdateForTypeRef(GroupInfoTypeRef, update) && operation === OperationType.UPDATE) {
				const updatedUserGroupInfo = await this.entityClient.load(GroupInfoTypeRef, this.groupInfo._id);
				if (isSameId(this.groupInfo._id, [assertNotNull(instanceListId, "got groupInfo update without instanceListId"), instanceId])) {
					this.groupInfo = updatedUserGroupInfo;
					return this.updateUsedStorage();
				} else return this.updateMembers();
			} else if (isUpdateForTypeRef(GroupMemberTypeRef, update) && this.group.isLoaded() && this.group.getLoaded().members === assertNotNull(instanceListId, "got a groupMember update without instanceListId")) return this.updateMembers();
else if (this.isMailGroup() && isUpdateForTypeRef(MailboxPropertiesTypeRef, update) && update.operation === OperationType.UPDATE) this.updateSenderName();
		});
	}
};

//#endregion
//#region src/mail-app/settings/groups/GroupListView.ts
assertMainOrNode();
var GroupListView = class {
	searchQuery = "";
	listModel;
	renderConfig = {
		itemHeight: size.list_row_height,
		multiselectionAllowed: MultiselectMode.Disabled,
		swipe: null,
		createElement: (dom) => {
			const groupRow = new GroupRow();
			mithril_default.render(dom, groupRow.render());
			return groupRow;
		}
	};
	listId;
	listStateSubscription = null;
	constructor(updateDetailsViewer, focusDetailsViewer) {
		this.updateDetailsViewer = updateDetailsViewer;
		this.focusDetailsViewer = focusDetailsViewer;
		this.listModel = this.makeListModel();
		this.listId = new LazyLoaded(() => {
			return locator.logins.getUserController().loadCustomer().then((customer) => {
				return customer.teamGroups;
			});
		});
		this.listModel.loadInitial();
		this.oncreate = this.oncreate.bind(this);
		this.onremove = this.onremove.bind(this);
		this.view = this.view.bind(this);
	}
	shortcuts = listSelectionKeyboardShortcuts(MultiselectMode.Disabled, () => this.listModel);
	oncreate() {
		keyManager.registerShortcuts(this.shortcuts);
	}
	view() {
		return mithril_default(ListColumnWrapper, { headerContent: mithril_default(".flex.flex-space-between.center-vertically.plr-l", mithril_default(BaseSearchBar, {
			text: this.searchQuery,
			onInput: (text) => this.updateQuery(text),
			busy: false,
			onKeyDown: (e) => e.stopPropagation(),
			onClear: () => {
				this.searchQuery = "";
				this.listModel.reapplyFilter();
			},
			placeholder: lang.get("searchMailboxes_placeholder")
		}), mithril_default(".mr-negative-s", mithril_default(IconButton, {
			title: "createSharedMailbox_label",
			icon: Icons.Add,
			click: () => this.addButtonClicked()
		}))) }, this.listModel.isEmptyAndDone() ? mithril_default(ColumnEmptyMessageBox, {
			color: theme.list_message_bg,
			icon: Icons.People,
			message: "noEntries_msg"
		}) : mithril_default(List, {
			renderConfig: this.renderConfig,
			state: this.listModel.state,
			onLoadMore: () => this.listModel.loadMore(),
			onRetryLoading: () => this.listModel.retryLoading(),
			onStopLoading: () => this.listModel.stopLoading(),
			onSingleSelection: (item) => {
				this.listModel.onSingleSelection(item);
				this.focusDetailsViewer();
			},
			onSingleTogglingMultiselection: noOp,
			onRangeSelectionTowards: noOp
		}));
	}
	onremove() {
		keyManager.unregisterShortcuts(this.shortcuts);
		this.listStateSubscription?.end(true);
	}
	async addButtonClicked() {
		if (await locator.logins.getUserController().isNewPaidPlan()) show$4();
else {
			const msg = lang.makeTranslation("upgrade_text", lang.get("newPaidPlanRequired_msg") + " " + lang.get("sharedMailboxesMultiUser_msg"));
			const wizard = await import("./UpgradeSubscriptionWizard-chunk.js");
			await wizard.showUpgradeWizard(locator.logins, NewPaidPlans, msg);
		}
	}
	async entityEventsReceived(updates) {
		for (const update of updates) {
			const { instanceListId, instanceId, operation } = update;
			if (isUpdateForTypeRef(GroupInfoTypeRef, update) && this.listId.getSync() === instanceListId) await this.listModel.entityEventReceived(instanceListId, instanceId, operation);
else if (isUpdateForTypeRef(GroupMemberTypeRef, update)) this.listModel.reapplyFilter();
			mithril_default.redraw();
		}
	}
	makeListModel() {
		const listModel = new ListElementListModel({
			sortCompare: compareGroupInfos,
			fetch: async (_lastFetchedEntity, _count) => {
				const listId = await this.listId.getAsync();
				const allGroupInfos = await locator.entityClient.loadAll(GroupInfoTypeRef, listId);
				return {
					items: allGroupInfos,
					complete: true
				};
			},
			loadSingle: async (_listId, elementId) => {
				const listId = await this.listId.getAsync();
				try {
					return await locator.entityClient.load(GroupInfoTypeRef, [listId, elementId]);
				} catch (e) {
					if (e instanceof NotFoundError) return null;
else throw e;
				}
			},
			autoSelectBehavior: () => ListAutoSelectBehavior.OLDER
		});
		listModel.setFilter((item) => this.groupFilter() && this.queryFilter(item));
		this.listStateSubscription?.end(true);
		this.listStateSubscription = listModel.stateStream.map((state) => {
			this.onSelectionChanged(onlySingleSelection(state));
			mithril_default.redraw();
		});
		return listModel;
	}
	onSelectionChanged = memoized((item) => {
		if (item) {
			const newSelectionModel = new GroupDetailsModel(item, locator.entityClient, mithril_default.redraw);
			const detailsViewer = item == null ? null : new GroupDetailsView(newSelectionModel);
			this.updateDetailsViewer(detailsViewer);
		}
	});
	queryFilter(gi) {
		const lowercaseSearch = this.searchQuery.toLowerCase();
		return gi.name.toLowerCase().includes(lowercaseSearch) || !!gi.mailAddress && gi.mailAddress?.toLowerCase().includes(lowercaseSearch);
	}
	groupFilter = () => {
		return locator.logins.getUserController().isGlobalAdmin();
	};
	updateQuery(query) {
		this.searchQuery = query;
		this.listModel.reapplyFilter();
	}
};
var GroupRow = class {
	top = 0;
	domElement = null;
	entity = null;
	nameDom;
	addressDom;
	deletedIconDom;
	localAdminIconDom;
	mailIconDom;
	selectionUpdater;
	constructor() {}
	update(groupInfo, selected) {
		this.entity = groupInfo;
		this.selectionUpdater(selected, false);
		this.nameDom.textContent = groupInfo.name;
		this.addressDom.textContent = groupInfo.mailAddress ?? "";
		setVisibility(this.deletedIconDom, groupInfo.deleted != null);
		if (groupInfo.mailAddress) {
			this.localAdminIconDom.style.display = "none";
			this.mailIconDom.style.display = "";
		} else {
			this.localAdminIconDom.style.display = "";
			this.mailIconDom.style.display = "none";
		}
	}
	/**
	* Only the structure is managed by mithril. We set all contents on our own (see update) in order to avoid the vdom overhead (not negligible on mobiles)
	*/
	render() {
		return mithril_default(SelectableRowContainer, { onSelectedChangeRef: (updater) => this.selectionUpdater = updater }, mithril_default(".flex.col.flex-grow", [mithril_default(".badge-line-height", [mithril_default("", { oncreate: (vnode) => this.nameDom = vnode.dom })]), mithril_default(".flex-space-between.mt-xxs", [mithril_default(".smaller", { oncreate: (vnode) => this.addressDom = vnode.dom }), mithril_default(".icons.flex", [
			mithril_default(Icon, {
				icon: Icons.Trash,
				oncreate: (vnode) => this.deletedIconDom = vnode.dom,
				class: "svg-list-accent-fg",
				style: { display: "none" }
			}),
			mithril_default(Icon, {
				icon: BootIcons.Settings,
				oncreate: (vnode) => this.localAdminIconDom = vnode.dom,
				class: "svg-list-accent-fg",
				style: { display: "none" }
			}),
			mithril_default(Icon, {
				icon: BootIcons.Mail,
				oncreate: (vnode) => this.mailIconDom = vnode.dom,
				class: "svg-list-accent-fg",
				style: { display: "none" }
			})
		])])]));
	}
};

//#endregion
//#region src/common/settings/SetDomainCertificateDialog.ts
var import_stream$5 = __toESM(require_stream(), 1);
assertMainOrNode();
function orderWhitelabelCertificate(domain, dialog) {
	showProgressDialog("pleaseWait_msg", locator.customerFacade.orderWhitelabelCertificate(domain).then(() => {
		dialog.close();
	}).catch(ofClass(InvalidDataError, (e) => {
		Dialog.message("certificateError_msg");
	})).catch(ofClass(LockedError, (e) => Dialog.message("operationStillActive_msg"))).catch(ofClass(PreconditionFailedError, (e) => {
		switch (e.data) {
			case "lock.locked":
				Dialog.message("operationStillActive_msg");
				break;
			case "domain.invalid_cname":
				Dialog.message("invalidCnameRecord_msg");
				break;
			case "domain.not_a_subdomain":
				Dialog.message("notASubdomain_msg");
				break;
			case "domain.invalid":
			case "domain.exists":
				Dialog.message("customDomainErrorDomainNotAvailable_msg");
				break;
			default: throw e;
		}
	})));
}
function show$3(customerInfo) {
	const whitelabelDomainInfo = getWhitelabelDomainInfo(customerInfo);
	const domain = whitelabelDomainInfo ? (0, import_stream$5.default)(whitelabelDomainInfo.domain) : (0, import_stream$5.default)("");
	let form = { view: () => {
		return mithril_default(TextField, {
			label: "whitelabelDomain_label",
			value: domain(),
			oninput: domain,
			isReadOnly: whitelabelDomainInfo ? true : false
		});
	} };
	let dialog = Dialog.showActionDialog({
		title: "whitelabelDomain_label",
		child: form,
		okAction: () => {
			const domainAllLowercase = domain().trim().toLowerCase();
			if (!isDomainName(domainAllLowercase) || domainAllLowercase.split(".").length < 3) Dialog.message("notASubdomain_msg");
else if (customerInfo.domainInfos.some((di) => !di.whitelabelConfig && di.domain === domainAllLowercase)) Dialog.message("customDomainErrorDomainNotAvailable_msg");
else orderWhitelabelCertificate(domainAllLowercase, dialog);
		}
	});
}

//#endregion
//#region src/common/settings/whitelabel/WhitelabelBrandingDomainSettings.ts
const FAILURE_LOCKED = "lock.locked";
const FAILURE_CONTACT_FORM_ACTIVE = "domain.contact_form_active";
var WhitelabelBrandingDomainSettings = class {
	view(vnode) {
		const { customerInfo, certificateInfo, whitelabelDomain, isWhitelabelFeatureEnabled } = vnode.attrs;
		return mithril_default(TextField, {
			label: "whitelabelDomain_label",
			value: whitelabelDomain ? whitelabelDomain : lang.get("deactivated_label"),
			helpLabel: this.renderWhitelabelInfo(certificateInfo),
			isReadOnly: true,
			injectionsRight: () => mithril_default(".ml-between-s", [whitelabelDomain ? this.renderDeactivateButton(whitelabelDomain) : null, customerInfo ? this._renderEditButton(customerInfo, certificateInfo, isWhitelabelFeatureEnabled) : null])
		});
	}
	renderDeactivateButton(whitelabelDomain) {
		return mithril_default(IconButton, {
			title: "deactivate_action",
			click: () => this.deactivate(whitelabelDomain),
			icon: Icons.Cancel,
			size: ButtonSize.Compact
		});
	}
	async deactivate(whitelabelDomain) {
		if (await Dialog.confirm("confirmDeactivateWhitelabelDomain_msg")) try {
			return await showProgressDialog("pleaseWait_msg", locator.customerFacade.deleteCertificate(whitelabelDomain));
		} catch (e) {
			if (e instanceof PreconditionFailedError) {
				if (e.data === FAILURE_LOCKED) return await Dialog.message("operationStillActive_msg");
else if (e.data === FAILURE_CONTACT_FORM_ACTIVE) return await Dialog.message(lang.getTranslation("domainStillHasContactForms_msg", { "{domain}": whitelabelDomain }));
			}
			throw e;
		}
	}
	_renderEditButton(customerInfo, certificateInfo, isWhitelabelFeatureEnabled) {
		return mithril_default(IconButton, {
			title: "edit_action",
			click: () => this.edit(isWhitelabelFeatureEnabled, customerInfo),
			icon: Icons.Edit,
			size: ButtonSize.Compact
		});
	}
	async edit(isWhitelabelFeatureEnabled, customerInfo) {
		if (locator.logins.getUserController().isFreeAccount()) showNotAvailableForFreeDialog([PlanType.Unlimited]);
else {
			if (!isWhitelabelFeatureEnabled) {
				const plansWithWhitelabel = await getAvailablePlansWithWhitelabel();
				isWhitelabelFeatureEnabled = await showPlanUpgradeRequiredDialog(plansWithWhitelabel);
			}
			if (isWhitelabelFeatureEnabled) show$3(customerInfo);
		}
	}
	renderWhitelabelInfo(certificateInfo) {
		let components;
		if (certificateInfo) switch (certificateInfo.state) {
			case CertificateState.VALID:
				components = [lang.get("certificateExpiryDate_label", { "{date}": formatDateTime(neverNull(certificateInfo.expiryDate)) }), this.certificateTypeString(certificateInfo)];
				break;
			case CertificateState.VALIDATING:
				components = [lang.get("certificateStateProcessing_label")];
				break;
			case CertificateState.INVALID:
				components = [lang.get("certificateStateInvalid_label")];
				break;
			default: components = [lang.get("emptyString_msg")];
		}
else components = [lang.get("emptyString_msg")];
		return () => mithril_default(".flex", components.map((c) => mithril_default(".pr-s", c)));
	}
	certificateTypeString(certificateInfo) {
		switch (certificateInfo.type) {
			case CertificateType.LETS_ENCRYPT: return lang.get("certificateTypeAutomatic_label");
			case CertificateType.MANUAL: return lang.get("certificateTypeManual_label");
			default: return lang.get("emptyString_msg");
		}
	}
};

//#endregion
//#region src/common/settings/whitelabel/CustomColorEditorPreview.ts
const BUTTON_WIDTH = 270;
var CustomColorEditorPreview = class {
	_mailRow;
	_mailRow2;
	toggleSelected = false;
	constructor() {
		this._mailRow = new MailRow(false, () => [], noOp);
		this._mailRow2 = new MailRow(false, () => [], noOp);
	}
	view() {
		return mithril_default(".editor-border.mt-l.flex.col", { style: { alignItems: "center" } }, [
			mithril_default(".pt", { style: { width: px(BUTTON_WIDTH) } }, mithril_default(LoginButton, {
				label: isApp() || isDesktop() ? "addAccount_action" : "login_action",
				onclick: noOp
			})),
			mithril_default(".pt", [mithril_default(Button, {
				label: lang.makeTranslation("secondary", "Secondary"),
				click: noOp,
				type: ButtonType.Secondary
			}), mithril_default(Button, {
				label: lang.makeTranslation("primary", "Primary"),
				click: noOp,
				type: ButtonType.Primary
			})]),
			mithril_default(".pt", [mithril_default(IconButton, {
				title: lang.makeTranslation("icon_button", "Icon button"),
				icon: Icons.Folder,
				click: noOp
			}), mithril_default(ToggleButton, {
				title: lang.makeTranslation("toggle_button", "Toggle button"),
				icon: this.toggleSelected ? Icons.Lock : Icons.Unlock,
				toggled: this.toggleSelected,
				onToggled: () => this.toggleSelected = !this.toggleSelected
			})]),
			mithril_default(".pt", this.renderPreviewMailRow())
		]);
	}
	renderPreviewMailRow() {
		const mailTemplate = {
			receivedDate: new Date(),
			attachments: [],
			state: "2",
			mailDetails: null,
			authStatus: null,
			encryptionAuthStatus: null,
			method: "0",
			bucketKey: null,
			conversationEntry: ["listId", "conversationId"],
			differentEnvelopeSender: null,
			firstRecipient: null,
			listUnsubscribe: false,
			mailDetailsDraft: null,
			movedTime: null,
			phishingStatus: "0",
			recipientCount: "0",
			sets: []
		};
		const mail = createMail({
			sender: createMailAddress({
				address: "m.mustermann@example.com",
				name: "Max Mustermann",
				contact: null
			}),
			subject: "Mail 1",
			unread: false,
			replyType: "0",
			confidential: true,
			...mailTemplate
		});
		const mail2 = createMail({
			sender: createMailAddress({
				address: "m.mustermann@example.com",
				name: "Max Mustermann",
				contact: null
			}),
			subject: "Mail 2",
			unread: true,
			replyType: "1",
			confidential: false,
			...mailTemplate
		});
		return mithril_default(".rel", { style: {
			width: px(size.second_col_max_width),
			height: px(size.list_row_height * 2)
		} }, [mithril_default(".list-row.pl.pr-l.odd-row", { oncreate: (vnode) => {
			this._mailRow.domElement = vnode.dom;
			requestAnimationFrame(() => this._mailRow.update(mail, false, false));
		} }, this._mailRow.render()), mithril_default(".list-row.pl.pr-l", {
			oncreate: (vnode) => {
				this._mailRow2.domElement = vnode.dom;
				requestAnimationFrame(() => this._mailRow2.update(mail2, true, false));
			},
			style: { top: px(size.list_row_height) }
		}, this._mailRow2.render())]);
	}
};

//#endregion
//#region src/common/settings/whitelabel/CustomColorEditor.ts
var import_stream$4 = __toESM(require_stream(), 1);
const COLOR_PICKER_WIDTH = 400;
const ADVANCED_TEXTFIELD_WIDTH = 344;
const CATEGORY_WIDTH = 750;
var CustomColorEditor = class {
	_colorPickerDom = null;
	_advancedSettingsEnabled;
	constructor() {
		this._advancedSettingsEnabled = (0, import_stream$4.default)(false);
	}
	view(vnode) {
		const { model } = vnode.attrs;
		const simpleColorPickerAttrs = {
			label: "accentColor_label",
			value: vnode.attrs.model.accentColor,
			injectionsRight: () => renderColorPicker((inputEvent) => {
				vnode.attrs.model.changeAccentColor(downcast(inputEvent.target).value);
				mithril_default.redraw();
			}, vnode.attrs.model.accentColor, ({ dom }) => this._colorPickerDom = dom),
			maxWidth: COLOR_PICKER_WIDTH,
			isReadOnly: true
		};
		return mithril_default("", [mithril_default("", [mithril_default(".flex", [mithril_default(".flex-grow", mithril_default(TextField, simpleColorPickerAttrs)), mithril_default(".ml-s.flex-grow", mithril_default(DropDownSelector, {
			label: "baseTheme_label",
			items: [{
				name: lang.get("light_label"),
				value: "light"
			}, {
				name: lang.get("dark_label"),
				value: "dark"
			}],
			selectedValue: vnode.attrs.model.baseThemeId,
			selectionChangedHandler: (v) => {
				vnode.attrs.model.changeBaseTheme(v);
			}
		}))]), mithril_default(CustomColorEditorPreview)]), mithril_default("", [mithril_default(ExpanderButton, {
			label: "advanced_label",
			expanded: this._advancedSettingsEnabled(),
			onExpandedChange: this._advancedSettingsEnabled
		}), mithril_default(ExpanderPanel, { expanded: this._advancedSettingsEnabled() }, [mithril_default(".small.mt", lang.get("customColorsInfo_msg")), mithril_default(".flex.flex-column", [Object.entries(this._getGroupedColors(model.customColors)).map(([name, colors]) => {
			return mithril_default("", [mithril_default(".h4.mt-l", capitalizeFirstLetterOfString(name)), mithril_default(".editor-border.text-break.wrapping-row", { style: { maxWidth: px(CATEGORY_WIDTH) } }, [colors.map((c) => renderCustomColorField(model, c))])]);
		})])])])]);
	}
	/**
	*
	*/
	_getGroupedColors(colors) {
		const groupedColors = {
			content: [],
			header: [],
			navigation: [],
			other: []
		};
		for (const color of colors) if (color.name.startsWith("content") || color.name.startsWith("list")) groupedColors.content.push(color);
else if (color.name.startsWith("header")) groupedColors.header.push(color);
else if (color.name.startsWith("navigation")) groupedColors.navigation.push(color);
else groupedColors.other.push(color);
		return groupedColors;
	}
};
function renderCustomColorField(model, { name, value, defaultValue, valid }) {
	return mithril_default("", { style: { maxWidth: px(ADVANCED_TEXTFIELD_WIDTH) } }, [mithril_default(TextField, {
		label: lang.makeTranslation(name, name),
		value,
		injectionsRight: () => renderColorPicker((event) => model.addCustomization(name, downcast(event.target).value), processColorInputValue(value)),
		oninput: (val) => {
			model.addCustomization(name, val);
		}
	}), renderDefaultColorLine(defaultValue, valid)]);
}
function renderColorPicker(onInput, value, oncreate) {
	return mithril_default("input.color-picker.mb-xs", {
		type: "color",
		value,
		oninput: onInput,
		oncreate
	});
}
function renderDefaultColorLine(defaultColor, valid) {
	if (valid) return mithril_default(".small.flex-space-between", [mithril_default("", lang.get("defaultColor_label", { "{1}": defaultColor })), mithril_default("", { style: {
		width: "100px",
		height: "10px",
		"margin-top": "2px",
		"background-color": defaultColor
	} })]);
else return mithril_default(".small", lang.get("invalidInputFormat_msg"));
}
/**
* If the provided value is a 3-digit hex string, it expands it to a 6-digit one (#RGB #RRGGBB)
* Otherwise, it returns the provided value
*/
function processColorInputValue(value) {
	const isHexTriplet = /^#[0-9a-fA-F][0-9a-fA-F][0-9a-fA-F]$/.test(value);
	if (isHexTriplet) {
		const withoutHash = value.slice(1);
		return "#" + expandHexTriplet(withoutHash);
	} else return value;
}
function capitalizeFirstLetterOfString(string) {
	return string.charAt(0).toUpperCase() + string.slice(1);
}

//#endregion
//#region src/common/settings/whitelabel/EditCustomColorsDialog.ts
assertMainOrNode();
function show$2(model) {
	model.init();
	model.builtTheme.map(() => mithril_default.redraw());
	const form = { view: () => {
		return mithril_default(".pb", [mithril_default(CustomColorEditor, { model })]);
	} };
	const cancelAction = () => {
		model.resetActiveClientTheme().then(() => dialog.close());
	};
	const okAction = async () => {
		if (await model.save()) dialog.close();
else return Dialog.message("correctValues_msg");
	};
	let actionBarAttrs = {
		left: [{
			label: "cancel_action",
			click: cancelAction,
			type: ButtonType.Secondary
		}],
		right: [{
			label: "ok_action",
			click: okAction,
			type: ButtonType.Primary
		}],
		middle: "customColors_label"
	};
	let dialog = Dialog.largeDialog(actionBarAttrs, form).addShortcut({
		key: Keys.ESC,
		exec: cancelAction,
		help: "close_alt"
	}).setCloseHandler(cancelAction).show();
}

//#endregion
//#region src/common/settings/whitelabel/CustomColorsEditorViewModel.ts
var import_stream$3 = __toESM(require_stream(), 1);
assertMainOrNode();
var CustomColorsEditorViewModel = class {
	_customizations;
	_whitelabelConfig;
	_whitelabelDomainInfo;
	_accentColor;
	_baseTheme;
	_themeController;
	_entityClient;
	_loginController;
	_themeBeforePreview;
	builtTheme;
	constructor(currentTheme, themeCustomizations, whitelabelConfig, whitelabelDomainInfo, themeController, entityClient, loginController) {
		this._themeBeforePreview = Object.freeze(currentTheme);
		this._customizations = clone(themeCustomizations);
		this._whitelabelDomainInfo = whitelabelDomainInfo;
		this._whitelabelConfig = whitelabelConfig;
		this._themeController = themeController;
		this._entityClient = entityClient;
		this._loginController = loginController;
		this.builtTheme = (0, import_stream$3.default)();
		const baseThemeId = themeCustomizations.base ?? "light";
		const accentColor = themeCustomizations.content_accent ?? this._themeController.getDefaultTheme().content_accent;
		this.changeBaseTheme(baseThemeId);
		this.changeAccentColor(accentColor);
	}
	init() {
		this._applyEditedTheme();
	}
	get customColors() {
		const base = this._themeController.getBaseTheme(this.baseThemeId);
		return Object.keys(base).map((key) => key).filter((name) => !this._shallBeExcluded(name)).map((key) => key).sort((a, b) => a.localeCompare(b)).map((key) => {
			const value = this._customizations[key] ?? "";
			const defaultValue = base[key];
			return {
				name: key,
				value,
				defaultValue: assertNotNull(defaultValue),
				valid: this._isValidColorValue(value)
			};
		});
	}
	get accentColor() {
		return this._accentColor;
	}
	get customizations() {
		return this._customizations;
	}
	get baseThemeId() {
		return this._baseTheme;
	}
	getDefaultColor(colorName) {
		return assertNotNull(this._themeController.getBaseTheme(this.baseThemeId)[colorName]);
	}
	changeAccentColor(accentColor) {
		this._accentColor = accentColor;
		this.addCustomization("list_accent_fg", accentColor);
		this.addCustomization("content_accent", accentColor);
		this.addCustomization("content_button_selected", accentColor);
		this.addCustomization("navigation_button_selected", accentColor);
		this.addCustomization("header_button_selected", accentColor);
		this._applyEditedTheme();
	}
	changeBaseTheme(baseThemeId) {
		this._baseTheme = baseThemeId;
		this.addCustomization("base", baseThemeId);
		this._applyEditedTheme();
	}
	/**
	* Try to save changes. if there are invalid color values in the theme doesn't save and returns false, else saves and returns true
	*/
	async save() {
		const colors = Object.keys(this.customizations).filter((name) => name !== "logo" && name !== "themeId" && name !== "base");
		for (let i = 0; i < colors.length; i++) if (!this._isValidColorValue(this.customizations[colors[i]] ?? "")) return false;
		this.addCustomization("themeId", this._whitelabelDomainInfo.domain);
		this._whitelabelConfig.jsonTheme = JSON.stringify(this.customizations);
		await this._entityClient.update(this._whitelabelConfig);
		if (!this._loginController.isWhitelabel()) await this.resetActiveClientTheme();
		return true;
	}
	async resetActiveClientTheme() {
		await this._themeController.applyCustomizations(downcast(Object.assign({}, { base: null }, this._themeBeforePreview)), false);
	}
	addCustomization(nameOfKey, colorValue) {
		this.customizations[nameOfKey] = colorValue;
		this._applyEditedTheme();
	}
	_isValidColorValue(colorValue) {
		return isValidColorCode(colorValue.trim()) || colorValue.trim() === "";
	}
	/**
	* These values shall be excluded when rendering the advanced TextFields
	* @return boolean, true iff provided parameter 'name' shall be excluded
	*/
	_shallBeExcluded(name) {
		const excludedColors = [
			"logo",
			"themeId",
			"base",
			"list_accent_fg",
			"content_button_selected",
			"navigation_button_selected",
			"header_button_selected",
			"content_accent",
			"content_accent_cyber_monday",
			"content_bg_cyber_monday",
			"content_border_cyber_monday"
		];
		return excludedColors.includes(name);
	}
	_applyEditedTheme = debounceStart(100, () => {
		this._removeEmptyCustomizations();
		this._themeController.applyCustomizations(this._filterAndReturnCustomizations(), false);
	});
	_removeEmptyCustomizations() {
		this._customizations = downcast(Object.fromEntries(Object.entries(this.customizations).filter(([k, v]) => v !== "")));
	}
	/**
	*  filters out all invalid color values from ThemeCustomizations whilst keeping logo, base and themeId
	*/
	_filterAndReturnCustomizations() {
		const colorValues = Object.entries(this.customizations).filter(([n, v]) => n !== "themeId" && n !== "base" && n !== "logo");
		const filteredColorValues = colorValues.filter(([n, v]) => this._isValidColorValue(downcast(v)));
		for (const [n, v] of Object.entries(this.customizations)) if (n === "themeId" || n === "base" || n === "logo") filteredColorValues.push([n, v]);
		return downcast(Object.fromEntries(filteredColorValues));
	}
};

//#endregion
//#region src/common/settings/whitelabel/WhitelabelThemeSettings.ts
var WhitelabelThemeSettings = class {
	view(vnode) {
		const { whitelabelData } = vnode.attrs;
		return [this.renderCustomColorsField(whitelabelData), this.renderCustomLogoField(whitelabelData)];
	}
	renderCustomColorsField(data) {
		return mithril_default(TextField, {
			label: "customColors_label",
			value: this.areCustomColorsDefined(data?.customTheme ?? null) ? lang.get("activated_label") : lang.get("deactivated_label"),
			isReadOnly: true,
			injectionsRight: () => data ? this.renderCustomColorsFieldButtons(data) : null
		});
	}
	renderCustomColorsFieldButtons(whitelabelData) {
		return [this.areCustomColorsDefined(whitelabelData.customTheme) ? mithril_default(IconButton, {
			title: "deactivate_action",
			click: () => this.deactivateCustomColors(whitelabelData),
			icon: Icons.Cancel,
			size: ButtonSize.Compact
		}) : null, mithril_default(IconButton, {
			title: "edit_action",
			click: () => this.showCustomColorsDialog(whitelabelData),
			icon: Icons.Edit,
			size: ButtonSize.Compact
		})];
	}
	async deactivateCustomColors({ customTheme, whitelabelConfig, whitelabelDomainInfo }) {
		const confirmed = await Dialog.confirm("confirmDeactivateCustomColors_msg");
		if (confirmed) {
			for (const key of Object.keys(customTheme)) if (key !== "logo") delete downcast(customTheme)[key];
			this.saveCustomTheme(customTheme, whitelabelConfig, whitelabelDomainInfo);
			if (locator.logins.isWhitelabel()) await locator.themeController.applyCustomizations(customTheme);
		}
	}
	renderCustomLogoField(data) {
		const customLogoTextfieldAttrs = {
			label: "customLogo_label",
			helpLabel: () => lang.get("customLogoInfo_msg"),
			value: lang.get(data?.customTheme.logo != null ? "activated_label" : "deactivated_label"),
			isReadOnly: true,
			injectionsRight: () => data ? this.renderCustomLogoFieldButtons(data) : null
		};
		return mithril_default(TextField, customLogoTextfieldAttrs);
	}
	renderCustomLogoFieldButtons(whitelabelData) {
		return [whitelabelData.customTheme.logo ? mithril_default(IconButton, {
			title: "deactivate_action",
			click: async () => {
				await this.deactivateCustomLogo(whitelabelData);
			},
			icon: Icons.Cancel,
			size: ButtonSize.Compact
		}) : null, mithril_default(IconButton, {
			title: "edit_action",
			click: () => this.editCustomLogo(whitelabelData),
			icon: Icons.Edit,
			size: ButtonSize.Compact
		})];
	}
	async editCustomLogo({ customTheme, whitelabelConfig, whitelabelDomainInfo }) {
		const files = await showFileChooser(false);
		let extension = files[0].name.toLowerCase().substring(files[0].name.lastIndexOf(".") + 1);
		if (files[0].size > MAX_LOGO_SIZE || !contains(ALLOWED_IMAGE_FORMATS, extension)) Dialog.message("customLogoInfo_msg");
else {
			let imageData;
			if (extension === "svg") imageData = utf8Uint8ArrayToString(files[0].data);
else {
				const ext = extension === "jpeg" ? "jpg" : extension;
				const b64 = uint8ArrayToBase64(files[0].data);
				imageData = `<img src="data:image/${ext};base64,${b64}">`;
			}
			customTheme.logo = imageData;
			this.saveCustomTheme(customTheme, whitelabelConfig, whitelabelDomainInfo);
			if (locator.logins.isWhitelabel()) await locator.themeController.applyCustomizations(customTheme);
		}
	}
	async deactivateCustomLogo({ customTheme, whitelabelConfig, whitelabelDomainInfo }) {
		const confirmed = await Dialog.confirm("confirmDeactivateCustomLogo_msg");
		if (confirmed) {
			delete customTheme.logo;
			this.saveCustomTheme(customTheme, whitelabelConfig, whitelabelDomainInfo);
			if (locator.logins.isWhitelabel()) await locator.themeController.applyCustomizations(customTheme);
		}
	}
	async showCustomColorsDialog({ customTheme, whitelabelConfig, whitelabelDomainInfo }) {
		const currentTheme = locator.themeController.getCurrentTheme();
		const viewModel = new CustomColorsEditorViewModel(currentTheme, customTheme, whitelabelConfig, assertNotNull(whitelabelDomainInfo), locator.themeController, locator.entityClient, locator.logins);
		show$2(viewModel);
	}
	areCustomColorsDefined(theme$1) {
		if (theme$1) return Object.keys(theme$1).some((key) => key !== "logo" && theme$1?.[key]);
else return false;
	}
	saveCustomTheme(customTheme, whitelabelConfig, whitelabelDomainInfo) {
		whitelabelConfig.jsonTheme = JSON.stringify(customTheme);
		locator.entityClient.update(whitelabelConfig);
		customTheme.themeId = whitelabelDomainInfo.domain;
	}
};

//#endregion
//#region src/common/settings/whitelabel/WhitelabelImprintAndPrivacySettings.ts
var WhitelabelImprintAndPrivacySettings = class {
	view(vnode) {
		const { privacyStatementUrl, onPrivacyStatementUrlChanged, imprintUrl, onImprintUrlChanged } = vnode.attrs;
		return [this.renderWhitelabelImprintSetting(imprintUrl, onImprintUrlChanged), this.renderPrivacyPolicySetting(privacyStatementUrl, onPrivacyStatementUrlChanged)];
	}
	renderPrivacyPolicySetting(privacyStatementUrl, onPrivacyStatementUrlChanged) {
		return mithril_default(TextField, {
			label: "privacyPolicyUrl_label",
			value: privacyStatementUrl,
			isReadOnly: true,
			injectionsRight: () => onPrivacyStatementUrlChanged ? mithril_default(IconButton, {
				title: "edit_action",
				click: () => this.editPrivacyStatementUrl(privacyStatementUrl, onPrivacyStatementUrlChanged),
				icon: Icons.Edit,
				size: ButtonSize.Compact
			}) : null
		});
	}
	editPrivacyStatementUrl(privacyStatementUrl, onPrivacyStatementUrlChanged) {
		let dialog = Dialog.showActionDialog({
			title: "privacyLink_label",
			child: { view: () => mithril_default(TextField, {
				label: "privacyPolicyUrl_label",
				value: privacyStatementUrl,
				type: TextFieldType.Url,
				oninput: (value) => privacyStatementUrl = value.trim()
			}) },
			allowOkWithReturn: true,
			okAction: (ok) => {
				if (ok) {
					onPrivacyStatementUrlChanged(privacyStatementUrl);
					dialog.close();
				}
			}
		});
		return privacyStatementUrl;
	}
	renderWhitelabelImprintSetting(imprintUrl, onImprintUrlChanged) {
		return mithril_default(TextField, {
			label: "imprintUrl_label",
			value: imprintUrl,
			isReadOnly: true,
			injectionsRight: () => onImprintUrlChanged ? mithril_default(IconButton, {
				title: "edit_action",
				click: () => this.showEditImprintDialog(imprintUrl, onImprintUrlChanged),
				icon: Icons.Edit,
				size: ButtonSize.Compact
			}) : null
		});
	}
	showEditImprintDialog(imprintUrl, onImprintUrlChanged) {
		const dialog = Dialog.showActionDialog({
			title: "imprintUrl_label",
			child: { view: () => mithril_default(TextField, {
				label: "imprintUrl_label",
				value: imprintUrl,
				type: TextFieldType.Url,
				oninput: (value) => imprintUrl = value.trim()
			}) },
			allowOkWithReturn: true,
			okAction: (ok) => {
				if (ok) {
					onImprintUrlChanged(imprintUrl);
					dialog.close();
				}
			}
		});
		return imprintUrl;
	}
};

//#endregion
//#region src/common/settings/whitelabel/WhitelabelRegistrationSettings.ts
var WhitelabelRegistrationSettings = class {
	constructor(vnode) {}
	view(vnode) {
		const { currentRegistrationDomain, possibleRegistrationDomains, onRegistrationDomainSelected, whitelabelCode, onWhitelabelCodeChanged } = vnode.attrs;
		return mithril_default("", [this._renderRegistrationDomain(currentRegistrationDomain, possibleRegistrationDomains, onRegistrationDomainSelected), this._renderWhitelabelCodeField(whitelabelCode, onWhitelabelCodeChanged)]);
	}
	_renderRegistrationDomain(currentRegistrationDomain, possibleRegistrationDomains, onRegistrationDomainSelected) {
		return mithril_default(DropDownSelector, {
			label: "whitelabelRegistrationEmailDomain_label",
			selectedValue: currentRegistrationDomain,
			items: possibleRegistrationDomains,
			selectionChangedHandler: onRegistrationDomainSelected ? (selectedValue) => {
				onRegistrationDomainSelected(selectedValue);
			} : null,
			disabled: !onRegistrationDomainSelected
		});
	}
	_renderWhitelabelCodeField(whitelabelCode, onWhitelabelCodeChanged) {
		return mithril_default(TextField, {
			label: "whitelabelRegistrationCode_label",
			value: whitelabelCode,
			isReadOnly: true,
			injectionsRight: () => onWhitelabelCodeChanged ? mithril_default(IconButton, {
				title: "edit_action",
				click: () => this.editRegistrationCode(whitelabelCode, onWhitelabelCodeChanged),
				icon: Icons.Edit,
				size: ButtonSize.Compact
			}) : null
		});
	}
	editRegistrationCode(whitelabelCode, onWhitelabelCodeChanged) {
		Dialog.showTextInputDialog({
			title: "edit_action",
			label: "whitelabelRegistrationCode_label",
			defaultValue: whitelabelCode
		}).then((newCode) => {
			onWhitelabelCodeChanged(newCode);
		});
	}
};

//#endregion
//#region src/common/settings/whitelabel/WhitelabelCustomMetaTagsSettings.ts
var WhitelabelCustomMetaTagsSettings = class {
	view(vnode) {
		const { metaTags, onMetaTagsChanged } = vnode.attrs;
		const customMetaTagsDefined = metaTags.length > 0;
		return mithril_default(TextField, {
			label: "customMetaTags_label",
			value: customMetaTagsDefined ? lang.get("activated_label") : lang.get("deactivated_label"),
			isReadOnly: true,
			injectionsRight: () => onMetaTagsChanged ? mithril_default(IconButton, {
				title: "edit_action",
				click: () => this.showEditMetaTagsDialog(metaTags, onMetaTagsChanged),
				icon: Icons.Edit,
				size: ButtonSize.Compact
			}) : null
		});
	}
	showEditMetaTagsDialog(metaTags, onMetaTagsChanged) {
		let dialog = Dialog.showActionDialog({
			title: "customMetaTags_label",
			child: { view: () => mithril_default(TextField, {
				label: "customMetaTags_label",
				value: metaTags,
				type: TextFieldType.Area,
				oninput: (value) => {
					metaTags = value;
				}
			}) },
			okAction: (ok) => {
				if (ok) {
					onMetaTagsChanged(metaTags);
					dialog.close();
				}
			}
		});
	}
};

//#endregion
//#region src/common/settings/whitelabel/WhitelabelStatusSettings.ts
var WhitelabelStatusSettings = class {
	view({ attrs }) {
		const { isWhitelabelActive: isWhitelabelActive$1 } = attrs;
		return mithril_default(TextField, {
			label: "state_label",
			value: isWhitelabelActive$1 ? lang.get("active_label") : lang.get("deactivated_label"),
			isReadOnly: true,
			injectionsRight: () => isWhitelabelActive$1 ? null : this.renderEnable()
		});
	}
	renderEnable() {
		return mithril_default(IconButton, {
			title: "whitelabelDomain_label",
			click: async () => {
				const plansWithWhitelabel = await getAvailablePlansWithWhitelabel();
				showPlanUpgradeRequiredDialog(plansWithWhitelabel);
			},
			icon: Icons.Edit,
			size: ButtonSize.Compact
		});
	}
};

//#endregion
//#region src/common/settings/whitelabel/WhitelabelNotificationEmailSettings.ts
var import_stream$2 = __toESM(require_stream(), 1);
var WhitelabelNotificationEmailSettings = class {
	_notificationEmailsExpanded;
	constructor(vnode) {
		this._notificationEmailsExpanded = (0, import_stream$2.default)(false);
	}
	view(vnode) {
		const { onAddTemplate, onEditTemplate, onRemoveTemplate, notificationMailTemplates } = vnode.attrs;
		return this._renderNotificationEmailSettings(notificationMailTemplates, onAddTemplate, onEditTemplate, onRemoveTemplate);
	}
	_renderNotificationEmailSettings(notificationMailTemplates, onAddTemplate, onEditTemplate, onRemoveTemplate) {
		return [
			mithril_default(".flex-space-between.items-center.mt-l.mb-s", [mithril_default(".h4", lang.get("customNotificationEmails_label")), mithril_default(ExpanderButton, {
				label: "show_action",
				expanded: this._notificationEmailsExpanded(),
				onExpandedChange: this._notificationEmailsExpanded
			})]),
			mithril_default(ExpanderPanel, { expanded: this._notificationEmailsExpanded() }, mithril_default(Table, {
				columnHeading: ["language_label", "subject_label"],
				columnWidths: [ColumnWidth.Largest, ColumnWidth.Largest],
				showActionButtonColumn: true,
				addButtonAttrs: {
					title: "add_action",
					click: () => {
						onAddTemplate();
					},
					icon: Icons.Add,
					size: ButtonSize.Compact
				},
				lines: notificationMailTemplates.map((template) => {
					const languageCode = downcast(template.language);
					const langName = lang.get(languageByCode[languageCode].textId);
					return {
						cells: [langName, template.subject],
						actionButtonAttrs: attachDropdown({
							mainButtonAttrs: {
								title: "edit_action",
								icon: Icons.Edit,
								size: ButtonSize.Compact
							},
							childAttrs: () => [{
								label: "edit_action",
								click: () => onEditTemplate(template)
							}, {
								label: "remove_action",
								click: () => onRemoveTemplate(template)
							}]
						})
					};
				})
			})),
			mithril_default(".small", lang.get("customNotificationEmailsHelp_msg"))
		];
	}
};

//#endregion
//#region src/common/settings/whitelabel/WhitelabelGermanLanguageFileSettings.ts
var WhitelabelGermanLanguageFileSettings = class {
	constructor(vnode) {}
	view(vnode) {
		const { customGermanLanguageFile, onGermanLanguageFileChanged } = vnode.attrs;
		return this._renderDefaultGermanLanguageFileSettings(customGermanLanguageFile, onGermanLanguageFileChanged);
	}
	_renderDefaultGermanLanguageFileSettings(customGermanLanguageFile, onGermanLanguageFileChanged) {
		const items = [{
			name: "Deutsch (Du)",
			value: "de"
		}, {
			name: "Deutsch (Sie)",
			value: "de_sie"
		}];
		const selectedValue = customGermanLanguageFile ?? items[0].value;
		const defaultGermanLanguageFileDropDownAttrs = {
			label: "germanLanguageFile_label",
			items,
			selectedValue,
			selectionChangedHandler: onGermanLanguageFileChanged
		};
		return mithril_default(DropDownSelector, defaultGermanLanguageFileDropDownAttrs);
	}
};

//#endregion
//#region src/common/settings/whitelabel/WhitelabelSettingsViewer.ts
assertMainOrNode();
var WhitelabelSettingsViewer = class {
	_whitelabelConfig = null;
	_certificateInfo = null;
	_whitelabelDomainInfo = null;
	_customJsonTheme = null;
	_customer;
	_customerInfo;
	_planConfig;
	_customerProperties;
	_lastBooking;
	_entityClient;
	_logins;
	constructor(entityClient, logins) {
		this.view = this.view.bind(this);
		this._entityClient = entityClient;
		this._logins = logins;
		this._customer = new LazyLoaded(() => locator.logins.getUserController().loadCustomer());
		this._customerInfo = new LazyLoaded(() => locator.logins.getUserController().loadCustomerInfo());
		this._planConfig = new LazyLoaded(() => locator.logins.getUserController().getPlanConfig());
		this._customerProperties = new LazyLoaded(() => this._customer.getAsync().then((customer) => locator.entityClient.load(CustomerPropertiesTypeRef, neverNull(customer.properties))));
		this._lastBooking = null;
		this._updateFields();
	}
	view() {
		const brandingDomainConfig = this._renderBrandingDomainConfig();
		return mithril_default("#global-settings.fill-absolute.scroll.plr-l", brandingDomainConfig ? [
			mithril_default(".h4.mt-l", lang.get("whitelabel_label")),
			mithril_default(".small", lang.get("whitelabelDomainLinkInfo_msg") + " "),
			mithril_default("small.text-break", [mithril_default(`a[href=${InfoLink.Whitelabel}][target=_blank]`, InfoLink.Whitelabel)]),
			this._renderWhitelabelStatusSettings(),
			this._renderNotificationEmailSettings(),
			mithril_default(".h4.mt-l", lang.get("whitelabelDomain_label")),
			brandingDomainConfig,
			this._renderThemeSettings(),
			this._renderCustomMetaTagsSettings(),
			this._renderImprintAndPrivacySettings(),
			this._renderDefaultGermanLanguageFileSettings(),
			this._renderWhitelabelRegistrationSettings(),
			mithril_default(".mb-l")
		] : [mithril_default(".flex-center.items-center.button-height.mt-l", progressIcon())]);
	}
	_renderImprintAndPrivacySettings() {
		const whitelabelConfig = this._whitelabelConfig;
		const privacyStatementUrl = whitelabelConfig?.privacyStatementUrl ?? "";
		let onPrivacyStatementUrlChanged = null;
		if (whitelabelConfig) onPrivacyStatementUrlChanged = (privacyStatementUrl$1) => {
			whitelabelConfig.privacyStatementUrl = privacyStatementUrl$1;
			this._entityClient.update(whitelabelConfig);
		};
		const imprintUrl = whitelabelConfig?.imprintUrl ?? "";
		let onImprintUrlChanged = null;
		if (whitelabelConfig) onImprintUrlChanged = (imprintUrl$1) => {
			whitelabelConfig.imprintUrl = imprintUrl$1;
			this._entityClient.update(whitelabelConfig);
		};
		return mithril_default(WhitelabelImprintAndPrivacySettings, {
			privacyStatementUrl,
			onPrivacyStatementUrlChanged,
			imprintUrl,
			onImprintUrlChanged
		});
	}
	_renderThemeSettings() {
		const customTheme = this._customJsonTheme;
		const whitelabelConfig = this._whitelabelConfig;
		const whitelabelDomainInfo = this._whitelabelDomainInfo;
		const whitelabelThemeSettingsAttrs = { whitelabelData: whitelabelConfig && whitelabelDomainInfo && customTheme ? {
			customTheme,
			whitelabelConfig,
			whitelabelDomainInfo
		} : null };
		return mithril_default(WhitelabelThemeSettings, whitelabelThemeSettingsAttrs);
	}
	_renderWhitelabelRegistrationSettings() {
		if (!this._isWhitelabelRegistrationVisible()) return null;
		const possibleRegistrationDomains = [{
			name: lang.get("deactivated_label"),
			value: null
		}].concat(getCustomMailDomains(this._customerInfo.getLoaded()).map((d) => {
			return {
				name: d.domain,
				value: d.domain
			};
		}));
		let onRegistrationDomainSelected = noOp;
		let currentRegistrationDomain = null;
		if (this._whitelabelConfig) {
			onRegistrationDomainSelected = (domain) => {
				clear(neverNull(this._whitelabelConfig).whitelabelRegistrationDomains);
				if (domain) {
					const domainWrapper = createStringWrapper({ value: domain });
					neverNull(this._whitelabelConfig).whitelabelRegistrationDomains.push(domainWrapper);
				}
				this._entityClient.update(neverNull(this._whitelabelConfig));
			};
			if (this._whitelabelConfig.whitelabelRegistrationDomains.length > 0) currentRegistrationDomain = this._whitelabelConfig.whitelabelRegistrationDomains[0].value;
		}
		const whitelabelCode = this._whitelabelConfig ? this._whitelabelConfig.whitelabelCode : "";
		let onWhitelabelCodeChanged = noOp;
		if (this._whitelabelConfig) onWhitelabelCodeChanged = (code) => {
			neverNull(this._whitelabelConfig).whitelabelCode = code;
			this._entityClient.update(neverNull(this._whitelabelConfig));
		};
		return mithril_default(WhitelabelRegistrationSettings, {
			whitelabelCode,
			onWhitelabelCodeChanged,
			possibleRegistrationDomains,
			currentRegistrationDomain,
			onRegistrationDomainSelected
		});
	}
	_renderDefaultGermanLanguageFileSettings() {
		if (!this._whitelabelConfig) return null;
		if (lang.code !== "de" && lang.code !== "de_sie") return null;
		const customGermanLanguageFile = downcast(this._whitelabelConfig.germanLanguageCode);
		const onGermanLanguageFileChanged = (languageFile) => {
			if (languageFile) {
				neverNull(this._whitelabelConfig).germanLanguageCode = languageFile;
				this._entityClient.update(neverNull(this._whitelabelConfig));
				lang.setLanguage({
					code: languageFile,
					languageTag: lang.languageTag
				});
			}
		};
		const whitelabelGermanLanguageFileSettingsAttrs = {
			customGermanLanguageFile,
			onGermanLanguageFileChanged
		};
		return mithril_default(WhitelabelGermanLanguageFileSettings, whitelabelGermanLanguageFileSettingsAttrs);
	}
	_renderCustomMetaTagsSettings() {
		let metaTags = "";
		let onMetaTagsChanged = null;
		if (this._whitelabelConfig) {
			metaTags = this._whitelabelConfig.metaTags;
			onMetaTagsChanged = (metaTags$1) => {
				neverNull(this._whitelabelConfig).metaTags = metaTags$1;
				this._entityClient.update(neverNull(this._whitelabelConfig));
			};
		}
		const whitelabelCustomMetaTagsSettingsAttrs = {
			metaTags,
			onMetaTagsChanged
		};
		return mithril_default(WhitelabelCustomMetaTagsSettings, whitelabelCustomMetaTagsSettingsAttrs);
	}
	_renderWhitelabelStatusSettings() {
		const planConfig = this._planConfig.getSync();
		if (planConfig == null) return null;
		const whitelabelActive = isWhitelabelActive(this._lastBooking, planConfig);
		const whitelabelStatusSettingsAttrs = { isWhitelabelActive: whitelabelActive };
		return mithril_default(WhitelabelStatusSettings, whitelabelStatusSettingsAttrs);
	}
	_renderBrandingDomainConfig() {
		const customerInfo = this._customerInfo.getSync();
		const planConfig = this._planConfig.getSync();
		if (!customerInfo || !planConfig) return null;
		const certificateInfo = this._certificateInfo;
		const isWhitelabelFeatureEnabled = isWhitelabelActive(this._lastBooking, planConfig);
		const whitelabelDomain = this._whitelabelDomainInfo ? this._whitelabelDomainInfo.domain : "";
		const whitelabelBrandingDomainSettingsAttrs = {
			customerInfo,
			isWhitelabelFeatureEnabled,
			certificateInfo,
			whitelabelDomain
		};
		return mithril_default(WhitelabelBrandingDomainSettings, whitelabelBrandingDomainSettingsAttrs);
	}
	_isWhitelabelRegistrationVisible() {
		return this._customer.isLoaded() && this._customer.getLoaded().customizations.some((c) => c.feature === FeatureType.WhitelabelParent) && this._customerInfo.isLoaded() && getWhitelabelDomainInfo(this._customerInfo.getLoaded()) != null;
	}
	_tryLoadWhitelabelConfig(domainInfo) {
		if (domainInfo && domainInfo.whitelabelConfig) return Promise.all([locator.entityClient.load(WhitelabelConfigTypeRef, domainInfo.whitelabelConfig), locator.serviceExecutor.get(BrandingDomainService, null).then((response) => neverNull(response.certificateInfo))]).then(([whitelabelConfig, certificateInfo]) => ({
			whitelabelConfig,
			certificateInfo
		}));
else return Promise.resolve(null);
	}
	async _updateFields() {
		await this._planConfig.getAsync();
		const customerInfo = await this._customerInfo.getAsync();
		this._whitelabelDomainInfo = getWhitelabelDomainInfo(customerInfo);
		const data = await this._tryLoadWhitelabelConfig(this._whitelabelDomainInfo);
		this._whitelabelConfig = data?.whitelabelConfig ?? null;
		this._certificateInfo = data?.certificateInfo ?? null;
		return locator.entityClient.loadRange(BookingTypeRef, neverNull(customerInfo.bookings).items, GENERATED_MAX_ID, 1, true).then((bookings) => {
			this._lastBooking = bookings.length === 1 ? bookings[0] : null;
			this._customJsonTheme = this._whitelabelConfig ? getThemeCustomizations(this._whitelabelConfig) : null;
			mithril_default.redraw();
			this._customerProperties.getAsync().then(mithril_default.redraw);
		});
	}
	_renderNotificationEmailSettings() {
		const customerProperties = this._customerProperties.getSync();
		if (!customerProperties) return null;
		const notificationMailTemplates = customerProperties.notificationMailTemplates;
		const onAddTemplate = () => {
			showBuyOrSetNotificationEmailDialog(this._lastBooking, this._customerProperties);
		};
		const onEditTemplate = (template) => {
			show(template, this._customerProperties);
		};
		const onRemoveTemplate = (template) => {
			this._removeNotificationMailTemplate(template);
		};
		const whitelabelNotificationEmailSettingsAttrs = {
			notificationMailTemplates,
			onAddTemplate,
			onEditTemplate,
			onRemoveTemplate
		};
		return mithril_default(WhitelabelNotificationEmailSettings, whitelabelNotificationEmailSettingsAttrs);
	}
	_removeNotificationMailTemplate(template) {
		showProgressDialog("pleaseWait_msg", this._customerProperties.getAsync().then((customerProps) => {
			const index = customerProps.notificationMailTemplates.findIndex((t) => t.language === template.language);
			if (index !== -1) {
				customerProps.notificationMailTemplates.splice(index, 1);
				this._entityClient.update(customerProps);
			}
		}));
	}
	entityEventsReceived(updates) {
		return pMap(updates, (update) => {
			if (isUpdateForTypeRef(CustomerTypeRef, update) && update.operation === OperationType.UPDATE) {
				this._customer.reset();
				return this._customer.getAsync().then(() => mithril_default.redraw());
			} else if (isUpdateForTypeRef(CustomerInfoTypeRef, update) && update.operation === OperationType.UPDATE) {
				this._customerInfo.reset();
				return this._updateFields();
			} else if (isUpdateForTypeRef(WhitelabelConfigTypeRef, update) && update.operation === OperationType.UPDATE) return this._updateFields();
else if (isUpdateForTypeRef(CustomerPropertiesTypeRef, update) && update.operation === OperationType.UPDATE) {
				this._customerProperties.reset();
				return this._updateFields();
			} else if (isUpdateForTypeRef(BookingTypeRef, update)) return this._updateFields();
		}).then(noOp);
	}
};

//#endregion
//#region src/common/settings/AppearanceSettingsViewer.ts
var AppearanceSettingsViewer = class {
	_customThemes = null;
	oncreate() {
		locator.themeController.getCustomThemes().then((themes) => {
			this._customThemes = themes;
			mithril_default.redraw();
		});
	}
	view() {
		const actualLanguageItems = languageNative.map((language) => {
			return {
				name: language.textName,
				value: language.code
			};
		}).sort((l1, l2) => l1.name.localeCompare(l2.name));
		const languageItems = actualLanguageItems.concat({
			name: lang.get("automatic_label"),
			value: null
		});
		const languageDropDownAttrs = {
			label: "language_label",
			items: languageItems,
			selectedValue: deviceConfig.getLanguage() || null,
			selectionChangedHandler: async (value) => {
				deviceConfig.setLanguage(value);
				const newLanguage = value ? {
					code: value,
					languageTag: languageCodeToTag(value)
				} : getLanguage();
				await lang.setLanguage(newLanguage);
				if (isDesktop()) await locator.desktopSettingsFacade.changeLanguage(newLanguage.code, newLanguage.languageTag);
				styles.updateStyle("main");
				mithril_default.redraw();
			}
		};
		const userSettingsGroupRoot = locator.logins.getUserController().userSettingsGroupRoot;
		const hourFormatDropDownAttrs = {
			label: "timeFormat_label",
			items: [{
				name: lang.get("timeFormatTwentyFourHour_label"),
				value: TimeFormat.TWENTY_FOUR_HOURS
			}, {
				name: lang.get("timeFormatTwelveHour_label"),
				value: TimeFormat.TWELVE_HOURS
			}],
			selectedValue: downcast(userSettingsGroupRoot.timeFormat),
			selectionChangedHandler: (value) => {
				userSettingsGroupRoot.timeFormat = value;
				locator.entityClient.update(userSettingsGroupRoot);
			}
		};
		const weekdayFormat = new Intl.DateTimeFormat(lang.languageTag, { weekday: "long" });
		const calcDate = new Date();
		const sundayName = weekdayFormat.format(incrementDate(calcDate, -calcDate.getDay()));
		const mondayName = weekdayFormat.format(incrementDate(calcDate, 1));
		const saturdayName = weekdayFormat.format(incrementDate(calcDate, 5));
		const weekStartDropDownAttrs = {
			label: "weekStart_label",
			items: [
				{
					name: mondayName,
					value: WeekStart.MONDAY
				},
				{
					name: saturdayName,
					value: WeekStart.SATURDAY
				},
				{
					name: sundayName,
					value: WeekStart.SUNDAY
				}
			],
			selectedValue: downcast(userSettingsGroupRoot.startOfTheWeek),
			selectionChangedHandler: (value) => {
				userSettingsGroupRoot.startOfTheWeek = value;
				locator.entityClient.update(userSettingsGroupRoot);
			}
		};
		return mithril_default(".fill-absolute.scroll.plr-l.pb-xl", [
			mithril_default(".h4.mt-l", lang.get("settingsForDevice_label")),
			mithril_default(DropDownSelector, languageDropDownAttrs),
			this._renderThemeSelector(),
			mithril_default(".h4.mt-l", lang.get("userSettings_label")),
			mithril_default(DropDownSelector, hourFormatDropDownAttrs),
			mithril_default(DropDownSelector, weekStartDropDownAttrs)
		]);
	}
	_renderThemeSelector() {
		if (!locator.themeController.shouldAllowChangingTheme() || this._customThemes == null) return null;
		const customOptions = this._customThemes.map((themeId) => {
			return {
				name: themeId,
				value: themeId
			};
		});
		const themeDropDownAttrs = {
			label: "switchColorTheme_action",
			items: [...themeOptions(client.isCalendarApp()).map(({ name, value }) => ({
				name: lang.get(name),
				value
			})), ...customOptions],
			selectedValue: locator.themeController.themePreference,
			selectionChangedHandler: (value) => locator.themeController.setThemePreference(value),
			dropdownWidth: 300
		};
		return mithril_default(DropDownSelector, themeDropDownAttrs);
	}
	entityEventsReceived(updates) {
		return pMap(updates, (update) => {
			if (isUpdateForTypeRef(UserSettingsGroupRootTypeRef, update)) return locator.entityClient.load(UserSettingsGroupRootTypeRef, update.instanceId).then((settings) => {
				lang.updateFormats({ hourCycle: getHourCycle(settings) });
				mithril_default.redraw();
			});
		}).then(noOp);
	}
};

//#endregion
//#region src/mail-app/settings/KnowledgeBaseListView.ts
assertMainOrNode();
var KnowledgeBaseListView = class {
	searchQuery = "";
	resultItemIds = [];
	listModel;
	listStateSubscription = null;
	renderConfig = {
		itemHeight: size.list_row_height,
		multiselectionAllowed: MultiselectMode.Disabled,
		swipe: null,
		createElement: (dom) => {
			const knowledgebaseRow = new KnowledgeBaseRow();
			mithril_default.render(dom, knowledgebaseRow.render());
			return knowledgebaseRow;
		}
	};
	shortcuts = listSelectionKeyboardShortcuts(MultiselectMode.Disabled, () => this.listModel);
	constructor(entityClient, logins, templateGroupRoot, templateGroup, updateDetailsViewer, focusDetailsViewer) {
		this.entityClient = entityClient;
		this.logins = logins;
		this.templateGroupRoot = templateGroupRoot;
		this.templateGroup = templateGroup;
		this.updateDetailsViewer = updateDetailsViewer;
		this.focusDetailsViewer = focusDetailsViewer;
		this.listModel = this.makeListModel();
		this.listModel.loadInitial();
		this.view = this.view.bind(this);
		this.oncreate = this.oncreate.bind(this);
		this.onremove = this.onremove.bind(this);
	}
	oncreate() {
		keyManager.registerShortcuts(this.shortcuts);
	}
	onremove() {
		keyManager.unregisterShortcuts(this.shortcuts);
	}
	makeListModel() {
		const listModel = new ListElementListModel({
			sortCompare: (a, b) => {
				const titleA = a.title.toUpperCase();
				const titleB = b.title.toUpperCase();
				return titleA < titleB ? -1 : titleA > titleB ? 1 : 0;
			},
			fetch: async (_lastFetchedEntity, _count) => {
				const allEntries = await this.entityClient.loadAll(KnowledgeBaseEntryTypeRef, this.getListId());
				return {
					items: allEntries,
					complete: true
				};
			},
			loadSingle: (_listId, elementId) => {
				return this.entityClient.load(KnowledgeBaseEntryTypeRef, [this.getListId(), elementId]);
			},
			autoSelectBehavior: () => ListAutoSelectBehavior.OLDER
		});
		listModel.setFilter((item) => this.queryFilter(item));
		this.listStateSubscription?.end(true);
		this.listStateSubscription = listModel.stateStream.map((state) => {
			this.onSelectionChanged(onlySingleSelection(state));
			mithril_default.redraw();
		});
		return listModel;
	}
	view() {
		return mithril_default(ListColumnWrapper, { headerContent: mithril_default(".flex.flex-space-between.center-vertically.plr-l", mithril_default(BaseSearchBar, {
			text: this.searchQuery,
			onInput: (text) => this.updateQuery(text),
			busy: false,
			onKeyDown: (e) => e.stopPropagation(),
			onClear: () => {
				this.searchQuery = "";
				this.resultItemIds = [];
				this.listModel.reapplyFilter();
			},
			placeholder: lang.get("searchKnowledgebase_placeholder")
		}), this.userCanEdit() ? mithril_default(".mr-negative-s", mithril_default(IconButton, {
			title: "addEntry_label",
			icon: Icons.Add,
			click: () => {
				showKnowledgeBaseEditor(null, this.templateGroupRoot);
			}
		})) : null) }, this.listModel.isEmptyAndDone() ? mithril_default(ColumnEmptyMessageBox, {
			color: theme.list_message_bg,
			icon: Icons.Book,
			message: "noEntries_msg"
		}) : mithril_default(List, {
			renderConfig: this.renderConfig,
			state: this.listModel.state,
			onLoadMore: () => this.listModel.loadMore(),
			onRetryLoading: () => this.listModel.retryLoading(),
			onStopLoading: () => this.listModel.stopLoading(),
			onSingleSelection: (item) => {
				this.listModel.onSingleSelection(item);
				this.focusDetailsViewer();
			},
			onSingleTogglingMultiselection: noOp,
			onRangeSelectionTowards: noOp
		}));
	}
	async entityEventsReceived(updates) {
		for (const update of updates) if (isUpdateForTypeRef(KnowledgeBaseEntryTypeRef, update) && isSameId(this.getListId(), update.instanceListId)) await this.listModel.entityEventReceived(update.instanceListId, update.instanceId, update.operation);
		this.updateQuery(this.searchQuery);
		mithril_default.redraw();
	}
	onSelectionChanged = memoized((item) => {
		const detailsViewer = item == null ? null : new KnowledgeBaseSettingsDetailsViewer(item, !this.userCanEdit());
		this.updateDetailsViewer(detailsViewer);
	});
	queryFilter(item) {
		return this.searchQuery === "" ? true : this.resultItemIds.includes(item._id);
	}
	updateQuery(query) {
		this.searchQuery = query;
		this.resultItemIds = knowledgeBaseSearch(this.searchQuery, this.listModel.getUnfilteredAsArray()).map((item) => item._id);
		this.listModel.reapplyFilter();
	}
	userCanEdit() {
		return hasCapabilityOnGroup(this.logins.getUserController().user, this.templateGroup, ShareCapability.Write);
	}
	getListId() {
		return this.templateGroupRoot.knowledgeBase;
	}
};
var KnowledgeBaseRow = class {
	top = 0;
	domElement = null;
	entity = null;
	entryTitleDom;
	selectionUpdater;
	update(entry, selected) {
		this.entity = entry;
		this.selectionUpdater(selected, false);
		this.entryTitleDom.textContent = entry.title;
	}
	render() {
		return mithril_default(SelectableRowContainer, { onSelectedChangeRef: (updater) => this.selectionUpdater = updater }, mithril_default(".flex.col", [mithril_default(".text-ellipsis.badge-line-height", { oncreate: (vnode) => this.entryTitleDom = vnode.dom }), mithril_default(".smaller.mt-xxs", NBSP)]));
	}
};
var KnowledgeBaseSettingsDetailsViewer = class {
	constructor(entry, readonly) {
		this.entry = entry;
		this.readonly = readonly;
	}
	renderView() {
		return mithril_default(".plr-l", mithril_default(KnowledgeBaseEntryView, {
			entry: this.entry,
			onTemplateSelected: (templateId) => mithril_default.route.set(`/settings/templates/${listIdPart(templateId)}}`),
			readonly: this.readonly
		}));
	}
	entityEventsReceived(updates) {
		return Promise.resolve();
	}
};

//#endregion
//#region src/mail-app/settings/DummyTemplateListView.ts
var DummyTemplateListView = class {
	searchQuery = "";
	view(vnode) {
		return mithril_default(ListColumnWrapper, { headerContent: mithril_default(".flex.flex-space-between.center-vertically.plr-l", mithril_default(BaseSearchBar, {
			text: this.searchQuery,
			onInput: (text) => this.searchQuery = text,
			busy: false,
			onKeyDown: (e) => e.stopPropagation(),
			onClear: () => {
				this.searchQuery = "";
			},
			placeholder: lang.get("searchTemplates_placeholder")
		}), mithril_default(".mr-negative-s", mithril_default(IconButton, {
			title: "addTemplate_label",
			icon: Icons.Add,
			click: () => {
				createInitialTemplateListIfAllowed().then((groupRoot) => {
					if (groupRoot) showTemplateEditor(null, groupRoot);
				});
			}
		}))) }, mithril_default(".fill-absolute.overflow-hidden", mithril_default(ColumnEmptyMessageBox, {
			color: theme.list_message_bg,
			icon: Icons.ListAlt,
			message: "noEntries_msg"
		})));
	}
};

//#endregion
//#region src/common/settings/SettingsFolderRow.ts
var SettingsFolderRow = class {
	view(vnode) {
		const { mainButtonAttrs, extraButton } = vnode.attrs;
		const isSelected = isNavButtonSelected(mainButtonAttrs);
		const selector = `.folder-row.flex-start.pl-button.pr-m${isSelected ? ".row-selected" : ""}`;
		return mithril_default(selector, [mithril_default(NavButton, mainButtonAttrs), extraButton && isSelected ? extraButton : null]);
	}
};

//#endregion
//#region src/common/settings/UserDataExporter.ts
const CSV_MIMETYPE = "text/csv";
const USER_CSV_FILENAME = "users.csv";
async function exportUserCsv(entityClient, logins, fileController, counterFacade) {
	const data = await loadUserExportData(entityClient, logins, counterFacade);
	const csv = renderCsv([
		"name",
		"mail address",
		"date created",
		"date deleted",
		"storage used (in bytes)",
		"aliases"
	], data.map((user) => [
		user.name,
		user.mailAddress,
		formatDate$1(user.created),
		mapNullable(user.deleted, formatDate$1) ?? "",
		`${user.usedStorage}`,
		user.aliases.join(" ")
	]));
	const dataFile = createDataFile(USER_CSV_FILENAME, CSV_MIMETYPE, stringToUtf8Uint8Array(csv));
	await fileController.saveDataFile(dataFile);
}
function formatDate$1(date) {
	return `${date.getFullYear()}-${pad(date.getMonth() + 1, 2)}-${pad(date.getDate(), 2)}`;
}
async function loadUserExportData(entityClient, logins, counterFacade) {
	const { user } = logins.getUserController();
	const { userGroups } = await entityClient.load(CustomerTypeRef, assertNotNull(user.customer));
	const groupsAdministeredByUser = await entityClient.loadAll(GroupInfoTypeRef, userGroups);
	const usedCustomerStorageCounterValues = await counterFacade.readAllCustomerCounterValues(CounterType.UserStorageLegacy, neverNull(user.customer));
	return pMap(groupsAdministeredByUser, async (info) => {
		const group = await entityClient.load(GroupTypeRef, info.group);
		const userStorageCounterValue = usedCustomerStorageCounterValues.find((counterValue) => counterValue.counterId === group.storageCounter);
		const usedStorage = userStorageCounterValue != null ? Number(userStorageCounterValue.value) : 0;
		return {
			name: info.name,
			mailAddress: info.mailAddress ?? "",
			created: info.created,
			deleted: info.deleted,
			usedStorage,
			aliases: info.mailAddressAliases.map((alias) => alias.mailAddress)
		};
	});
}

//#endregion
//#region src/common/settings/ReferralSettingsViewer.ts
var ReferralSettingsViewer = class {
	referralLink = "";
	constructor() {
		this.refreshReferralLink();
	}
	view() {
		return mithril_default(".mt-l.plr-l.pb-xl", mithril_default(ReferralLinkViewer, { referralLink: this.referralLink }));
	}
	async entityEventsReceived(updates) {}
	refreshReferralLink() {
		getReferralLink(locator.logins.getUserController()).then((link) => {
			this.referralLink = link;
			mithril_default.redraw();
		});
	}
};

//#endregion
//#region src/common/settings/AboutDialog.ts
var AboutDialog = class {
	view(vnode) {
		return mithril_default(".flex.col", [
			mithril_default(".center.mt", "Powered by"),
			mithril_default(
				".center",
				// Our logo must be padded but at least a certain amount.
				// This might be a bit more than needed but it's safe.
				{ style: { margin: px(size.vpad_xl) } },
				mithril_default.trust(getLightOrDarkTutaLogo(client.isCalendarApp()))
),
			mithril_default(".flex.justify-center.flex-wrap", [mithril_default(ExternalLink, {
				href: InfoLink.HomePage,
				text: "Website",
				isCompanySite: true,
				specialType: "me",
				class: "mlr mt"
			}), mithril_default(ExternalLink, {
				href: "https://github.com/tutao/tutanota/releases",
				text: "Releases",
				isCompanySite: false,
				class: "mlr mt"
			})]),
			mithril_default(".flex.justify-center.selectable.flex-wrap", [
				mithril_default("p.center.mt.mlr", `v${env.versionNumber}`),
				mithril_default("p.text-center.mlr", "GPL-v3"),
				mithril_default("p", "© 2024 Tutao GmbH")
			]),
			this._sendLogsLink(),
			isApp() ? mithril_default("", mithril_default(Button, {
				label: "showWelcomeDialog_action",
				type: ButtonType.Primary,
				click: vnode.attrs.onShowSetupWizard
			})) : null
		]);
	}
	_sendLogsLink() {
		return mithril_default(".mt", mithril_default(Button, {
			label: "sendLogs_action",
			click: () => this._sendDeviceLogs(),
			type: ButtonType.Primary
		}));
	}
	async _sendDeviceLogs() {
		const timestamp = new Date();
		const attachments = await getLogAttachments(timestamp);
		const mailboxDetails = await locator.mailboxModel.getUserMailboxDetails();
		let { message, type, client: client$1 } = clientInfoString(timestamp, true);
		message = message.split("\n").filter(Boolean).map((l) => `<div>${l}<br></div>`).join("");
		try {
			const editor = await newMailEditorFromTemplate(mailboxDetails, {}, `Device logs v${env.versionNumber} - ${type} - ${client$1}`, message, attachments, true);
			editor.show();
		} catch (e) {
			if (e instanceof UserError) await showUserError(e);
else throw e;
		}
	}
};

//#endregion
//#region src/common/gui/base/ActionBar.ts
assertMainOrNode();
var ActionBar = class {
	view(vnode) {
		return mithril_default(".action-bar.flex-end.items-center.ml-between-s", vnode.attrs.buttons.map((b) => mithril_default(IconButton, b)));
	}
};

//#endregion
//#region src/mail-app/settings/TemplateDetailsViewer.ts
var TemplateDetailsViewer = class {
	sanitizedContents;
	constructor(template, entityClient, isReadOnly) {
		this.template = template;
		this.entityClient = entityClient;
		this.isReadOnly = isReadOnly;
		this.sanitizedContents = template.contents.map((emailTemplateContent) => ({
			text: htmlSanitizer.sanitizeHTML(emailTemplateContent.text, {
				blockExternalContent: false,
				allowRelativeLinks: true
			}).html,
			languageCodeTextId: languageByCode[getLanguageCode(emailTemplateContent)].textId
		}));
	}
	renderView = () => {
		return mithril_default("#user-viewer.fill-absolute.scroll.plr-l.pb-floating", [this.renderTitleLine(), this.renderContent()]);
	};
	renderTitleLine() {
		return mithril_default(".flex.mt-l.center-vertically", [mithril_default(".h4.text-ellipsis", this.template.title), !this.isReadOnly() ? mithril_default(ActionBar, { buttons: [{
			title: "edit_action",
			icon: Icons.Edit,
			click: () => this.editTemplate()
		}, {
			title: "remove_action",
			icon: Icons.Trash,
			click: () => this.deleteTemplate()
		}] }) : null]);
	}
	renderContent() {
		return mithril_default("", [mithril_default(TextField, {
			label: "shortcut_label",
			value: TEMPLATE_SHORTCUT_PREFIX + assertNotNull(this.template.tag, "template without tag!"),
			isReadOnly: true
		}), this.sanitizedContents.map(({ text, languageCodeTextId }) => {
			return mithril_default(".flex.flex-column", [mithril_default(".h4.mt-l", lang.get(languageCodeTextId)), mithril_default(".editor-border.text-break", mithril_default.trust(text))]);
		})]);
	}
	async deleteTemplate() {
		if (!await Dialog.confirm("deleteTemplate_msg")) return;
		await this.entityClient.erase(this.template);
	}
	async editTemplate() {
		const { template } = this;
		const groupRoot = await locator.entityClient.load(TemplateGroupRootTypeRef, assertNotNull(template._ownerGroup, "template without ownerGroup!"));
		showTemplateEditor(template, groupRoot);
	}
	entityEventsReceived(updates) {
		return Promise.resolve();
	}
};

//#endregion
//#region src/mail-app/settings/TemplateListView.ts
assertMainOrNode();
var TemplateListView = class {
	searchQuery = "";
	resultItemIds = [];
	listModel;
	listStateSubscription = null;
	renderConfig = {
		itemHeight: size.list_row_height,
		multiselectionAllowed: MultiselectMode.Disabled,
		swipe: null,
		createElement: (dom) => {
			const templateRow = new TemplateRow();
			mithril_default.render(dom, templateRow.render());
			return templateRow;
		}
	};
	shortcuts = listSelectionKeyboardShortcuts(MultiselectMode.Disabled, () => this.listModel);
	constructor(groupInstance, entityClient, logins, updateDetailsViewer, focusDetailsViewer) {
		this.groupInstance = groupInstance;
		this.entityClient = entityClient;
		this.logins = logins;
		this.updateDetailsViewer = updateDetailsViewer;
		this.focusDetailsViewer = focusDetailsViewer;
		this.listModel = this.makeListModel();
		this.listModel.loadInitial();
		this.view = this.view.bind(this);
		this.oncreate = this.oncreate.bind(this);
		this.onremove = this.onremove.bind(this);
	}
	oncreate() {
		keyManager.registerShortcuts(this.shortcuts);
	}
	onremove() {
		keyManager.unregisterShortcuts(this.shortcuts);
	}
	makeListModel() {
		const listModel = new ListElementListModel({
			sortCompare: (a, b) => {
				const titleA = a.title.toUpperCase();
				const titleB = b.title.toUpperCase();
				return titleA < titleB ? -1 : titleA > titleB ? 1 : 0;
			},
			fetch: async (_lastFetchedEntity, _count) => {
				const allEntries = await this.entityClient.loadAll(EmailTemplateTypeRef, this.templateListId());
				return {
					items: allEntries,
					complete: true
				};
			},
			loadSingle: (_listId, elementId) => {
				return this.entityClient.load(EmailTemplateTypeRef, [this.templateListId(), elementId]);
			},
			autoSelectBehavior: () => ListAutoSelectBehavior.OLDER
		});
		listModel.setFilter((item) => this.queryFilter(item));
		this.listStateSubscription?.end(true);
		this.listStateSubscription = listModel.stateStream.map((state) => {
			this.onSelectionChanged(onlySingleSelection(state));
			mithril_default.redraw();
		});
		return listModel;
	}
	view() {
		return mithril_default(ListColumnWrapper, { headerContent: mithril_default(".flex.flex-space-between.center-vertically.plr-l", mithril_default(BaseSearchBar, {
			text: this.searchQuery,
			onInput: (text) => this.updateQuery(text),
			busy: false,
			onKeyDown: (e) => e.stopPropagation(),
			onClear: () => {
				this.searchQuery = "";
				this.resultItemIds = [];
				this.listModel.reapplyFilter();
			},
			placeholder: lang.get("searchTemplates_placeholder")
		}), this.userCanEdit() ? mithril_default(".mr-negative-s", mithril_default(IconButton, {
			title: "addTemplate_label",
			icon: Icons.Add,
			click: () => {
				showTemplateEditor(null, this.groupInstance.groupRoot);
			}
		})) : null) }, this.listModel.isEmptyAndDone() ? mithril_default(ColumnEmptyMessageBox, {
			color: theme.list_message_bg,
			icon: Icons.ListAlt,
			message: "noEntries_msg"
		}) : mithril_default(List, {
			renderConfig: this.renderConfig,
			state: this.listModel.state,
			onLoadMore: () => this.listModel.loadMore(),
			onRetryLoading: () => this.listModel.retryLoading(),
			onStopLoading: () => this.listModel.stopLoading(),
			onSingleSelection: (item) => {
				this.listModel.onSingleSelection(item);
				this.focusDetailsViewer();
			},
			onSingleTogglingMultiselection: noOp,
			onRangeSelectionTowards: noOp
		}));
	}
	async entityEventsReceived(updates) {
		for (const update of updates) {
			const { instanceListId, instanceId, operation } = update;
			if (isUpdateForTypeRef(EmailTemplateTypeRef, update) && isSameId(this.templateListId(), instanceListId)) await this.listModel.entityEventReceived(instanceListId, instanceId, operation);
		}
		this.updateQuery(this.searchQuery);
		mithril_default.redraw();
	}
	onSelectionChanged = memoized((item) => {
		const detailsViewer = item == null ? null : new TemplateDetailsViewer(item, this.entityClient, () => !this.userCanEdit());
		this.updateDetailsViewer(detailsViewer);
	});
	queryFilter(item) {
		return this.searchQuery === "" ? true : this.resultItemIds.includes(item._id);
	}
	updateQuery(query) {
		this.searchQuery = query;
		this.resultItemIds = searchInTemplates(this.searchQuery, this.listModel.getUnfilteredAsArray()).map((item) => item._id);
		this.listModel.reapplyFilter();
	}
	userCanEdit() {
		return hasCapabilityOnGroup(this.logins.getUserController().user, this.groupInstance.group, ShareCapability.Write);
	}
	templateListId() {
		return this.groupInstance.groupRoot.templates;
	}
};
var TemplateRow = class {
	top = 0;
	domElement = null;
	entity = null;
	selectionUpdater;
	titleDom;
	idDom;
	constructor() {}
	update(template, selected) {
		this.entity = template;
		this.selectionUpdater(selected, false);
		this.titleDom.textContent = template.title;
		this.idDom.textContent = TEMPLATE_SHORTCUT_PREFIX + template.tag;
	}
	render() {
		return mithril_default(SelectableRowContainer, { onSelectedChangeRef: (updater) => this.selectionUpdater = updater }, mithril_default(".flex.col", [mithril_default("", [mithril_default(".text-ellipsis.badge-line-height", { oncreate: (vnode) => this.titleDom = vnode.dom })]), mithril_default(".smaller.mt-xxs", { oncreate: (vnode) => this.idDom = vnode.dom })]));
	}
};

//#endregion
//#region src/mail-app/settings/ContactsSettingsViewer.ts
assertMainOrNode();
var ContactsSettingsViewer = class {
	noAutomaticContacts = false;
	constructor() {
		this.noAutomaticContacts = locator.logins.getUserController().props.noAutomaticContacts;
	}
	view() {
		return [mithril_default(".fill-absolute.scroll.plr-l.pb-xl", { role: "group" }, [
			mithril_default(".h4.mt-l", lang.get("contactsManagement_label")),
			this.renderImportContactsButton(),
			locator.logins.isEnabled(FeatureType.DisableContacts) ? null : this.renderAutoCreateContactsPreference(),
			this.renderContactsSyncDropdown()
		])];
	}
	renderAutoCreateContactsPreference() {
		return mithril_default(DropDownSelector, {
			label: "createContacts_label",
			helpLabel: () => lang.get("createContactsForRecipients_action"),
			items: [{
				name: lang.get("activated_label"),
				value: false
			}, {
				name: lang.get("deactivated_label"),
				value: true
			}],
			selectedValue: this.noAutomaticContacts,
			selectionChangedHandler: (v) => {
				locator.logins.getUserController().props.noAutomaticContacts = v;
				locator.entityClient.update(locator.logins.getUserController().props);
			},
			dropdownWidth: 250
		});
	}
	renderImportContactsButton() {
		if (!isApp()) return null;
		return mithril_default(".flex.flex-space-between.items-center", [lang.get("importFromContactBook_label"), mithril_default(Button, {
			label: "import_action",
			click: () => this.importContactsFromDevice(),
			type: ButtonType.Primary
		})]);
	}
	renderContactsSyncDropdown() {
		if (!isApp()) return null;
		return mithril_default(DropDownSelector, {
			label: "contactsSynchronization_label",
			helpLabel: () => lang.get("contactsSynchronizationWarning_msg"),
			items: [{
				name: lang.get("activated_label"),
				value: true
			}, {
				name: lang.get("deactivated_label"),
				value: false
			}],
			selectedValue: mailLocator.nativeContactsSyncManager().isEnabled(),
			selectionChangedHandler: async (contactSyncEnabled) => {
				await this.onContactSyncSelectionChanged(contactSyncEnabled);
			},
			dropdownWidth: 250
		});
	}
	async onContactSyncSelectionChanged(contactSyncEnabled) {
		assert(isApp(), "isApp");
		const syncManager = mailLocator.nativeContactsSyncManager();
		if (!contactSyncEnabled) syncManager.disableSync();
else {
			const canSync = await syncManager.canSync();
			if (!canSync) return;
			await syncManager.enableSync();
			const isSyncAllowed = await syncManager.syncContacts();
			if (!isSyncAllowed) this.handleContactsSynchronizationFail();
			mithril_default.redraw();
		}
	}
	updateTutaPropertiesSettings(props) {
		this.noAutomaticContacts = props.noAutomaticContacts;
	}
	async entityEventsReceived(updates) {
		for (const update of updates) {
			const { operation } = update;
			if (isUpdateForTypeRef(TutanotaPropertiesTypeRef, update) && operation === OperationType.UPDATE) {
				const props = await locator.entityClient.load(TutanotaPropertiesTypeRef, locator.logins.getUserController().props._id);
				this.updateTutaPropertiesSettings(props);
			}
		}
		mithril_default.redraw();
	}
	handleContactsSynchronizationFail() {
		mailLocator.nativeContactsSyncManager()?.disableSync();
		this.showContactsPermissionDialog();
	}
	async showContactsPermissionDialog() {
		await Dialog.message("allowContactReadWrite_msg");
		await locator.systemFacade.goToSettings();
	}
	async importContactsFromDevice() {
		const importer = await mailLocator.contactImporter();
		await importer.importContactsFromDeviceSafely();
	}
};

//#endregion
//#region src/common/settings/NotificationTargetsList.ts
var NotificationTargetsList = class {
	view(vnode) {
		return mithril_default("", [
			mithril_default(".flex-space-between.items-center.mt-s.mb-s", [mithril_default(".h5", lang.get("notificationTargets_label")), mithril_default(ExpanderButton, {
				label: "show_action",
				expanded: vnode.attrs.onExpandedChange(),
				onExpandedChange: vnode.attrs.onExpandedChange
			})]),
			mithril_default(ExpanderPanel, { expanded: vnode.attrs.onExpandedChange() }, mithril_default(".flex.flex-column.items-end.mb", [vnode.attrs.rowAdd, ...vnode.attrs.rows])),
			mithril_default(".small", lang.get("pushIdentifierInfoMessage_msg"))
		]);
	}
};

//#endregion
//#region src/common/settings/IdentifierRow.ts
var IdentifierRow = class {
	view(vnode) {
		const dropdownAttrs = attachDropdown({
			mainButtonAttrs: {
				title: "edit_action",
				icon: Icons.More,
				size: ButtonSize.Compact
			},
			childAttrs: () => [{
				label: vnode.attrs.disabled ? "activate_action" : "deactivate_action",
				click: vnode.attrs.disableClicked
			}, {
				label: "delete_action",
				click: vnode.attrs.removeClicked
			}]
		});
		return mithril_default(".flex.flex-column.full-width", [mithril_default(".flex.items-center.selectable", [
			mithril_default("span" + (vnode.attrs.current ? ".b" : ""), vnode.attrs.name),
			vnode.attrs.disabled ? mithril_default(".mlr", `(${lang.get("notificationsDisabled_label")})`) : null,
			mithril_default(".flex-grow"),
			mithril_default(IconButton, dropdownAttrs)
		]), this.renderIdentifier(vnode.attrs)]);
	}
	renderIdentifier({ identifier, formatIdentifier }) {
		const identifierText = formatIdentifier ? neverNull(identifier.match(/.{2}/g)).map((el, i) => mithril_default("span.pr-s" + (i % 2 === 0 ? ".b" : ""), el)) : identifier;
		return mithril_default(".text-break.small.monospace.mt-negative-hpad-button.selectable", identifierText);
	}
};

//#endregion
//#region src/mail-app/settings/NotificationSettingsViewer.ts
var import_stream$1 = __toESM(require_stream(), 1);
var NotificationSettingsViewer = class {
	currentIdentifier = null;
	extendedNotificationMode = null;
	expanded;
	user;
	identifiers;
	hasNotificationPermission = true;
	receiveCalendarNotifications = true;
	constructor() {
		this.expanded = (0, import_stream$1.default)(false);
		this.identifiers = [];
		this.user = locator.logins.getUserController().user;
		this.loadPushIdentifiers();
		if (isApp() || isDesktop()) {
			const promises = [locator.pushService.getExtendedNotificationMode()];
			if (isApp()) promises.push(locator.systemPermissionHandler.hasPermission(PermissionType.Notification), locator.pushService.getReceiveCalendarNotificationConfig());
			Promise.all(promises).then(([extendedNotificationMode, hasPermission, canReceiveCalendarNotifications]) => {
				this.extendedNotificationMode = extendedNotificationMode;
				if (isApp()) {
					if (this.hasNotificationPermission !== hasPermission) this.hasNotificationPermission = hasPermission;
					if (this.receiveCalendarNotifications !== canReceiveCalendarNotifications) this.receiveCalendarNotifications = canReceiveCalendarNotifications;
				}
				mithril_default.redraw();
			});
		}
	}
	togglePushIdentifier(identifier) {
		identifier.disabled = !identifier.disabled;
		locator.entityClient.update(identifier).then(() => mithril_default.redraw);
		if (!isBrowser() && identifier.identifier === this.currentIdentifier) if (identifier.disabled) locator.pushService.invalidateAlarmsForUser(this.user._id);
else locator.pushService.reRegister();
	}
	view() {
		const rowAdd = mithril_default(".full-width.flex-space-between.items-center.mb-s", [lang.get("emailPushNotification_action"), mithril_default(IconButton, {
			title: "emailPushNotification_action",
			click: () => this.showAddEmailNotificationDialog(),
			icon: Icons.Add,
			size: ButtonSize.Compact
		})]);
		const rows = this.identifiers.map((identifier) => {
			const isCurrentDevice = (isApp() || isDesktop()) && identifier.identifier === this.currentIdentifier;
			return mithril_default(IdentifierRow, {
				name: this.identifierDisplayName(isCurrentDevice, identifier.pushServiceType, identifier.displayName),
				disabled: identifier.disabled,
				identifier: identifier.identifier,
				current: isCurrentDevice,
				removeClicked: () => {
					locator.entityClient.erase(identifier).catch(ofClass(NotFoundError, noOp));
				},
				formatIdentifier: identifier.pushServiceType !== PushServiceType.EMAIL,
				disableClicked: () => this.togglePushIdentifier(identifier)
			});
		}).sort((l, r) => +r.attrs.current - +l.attrs.current);
		return mithril_default(".fill-absolute.scroll.plr-l.pb-xl", [mithril_default(".flex.col", [
			mithril_default(".flex-space-between.items-center.mt-l.mb-s", [mithril_default(".h4", lang.get("notificationSettings_action"))]),
			this.extendedNotificationMode ? mithril_default(NotificationContentSelector, {
				extendedNotificationMode: this.extendedNotificationMode,
				onChange: (value) => {
					locator.pushService.setExtendedNotificationMode(value);
					this.extendedNotificationMode = value;
					this.hasNotificationPermission = true;
				}
			}) : null,
			isApp() ? this.renderCalendarNotificationsDropdown() : null,
			mithril_default(NotificationTargetsList, {
				rows,
				rowAdd,
				onExpandedChange: this.expanded
			})
		])]);
	}
	renderCalendarNotificationsDropdown() {
		return mithril_default(DropDownSelector, {
			label: "receiveCalendarNotifications_label",
			items: [{
				name: lang.get("activated_label"),
				value: true
			}, {
				name: lang.get("deactivated_label"),
				value: false
			}],
			selectedValue: this.receiveCalendarNotifications,
			selectionChangedHandler: async (value) => {
				if (this.receiveCalendarNotifications !== value) {
					locator.pushService.setReceiveCalendarNotificationConfig(value);
					this.receiveCalendarNotifications = value;
					if (value) await locator.pushService.reRegister();
else await locator.pushService.invalidateAlarmsForUser(this.user._id);
				}
			},
			disabled: !this.hasNotificationPermission,
			selectedValueDisplay: !this.hasNotificationPermission ? lang.get("deactivated_label") : undefined
		});
	}
	async showAddEmailNotificationDialog() {
		const dialog = await mailLocator.addNotificationEmailDialog();
		dialog.show();
	}
	identifierDisplayName(current, type, displayName) {
		if (current) return lang.get("pushIdentifierCurrentDevice_label");
else if (displayName) return displayName;
else return [
			"Android FCM",
			"iOS",
			lang.get("adminEmailSettings_action"),
			"Android Tutanota"
		][Number(type)];
	}
	async loadPushIdentifiers() {
		this.currentIdentifier = this.getCurrentIdentifier();
		const list = this.user.pushIdentifierList;
		if (list) {
			this.identifiers = (await locator.entityClient.loadAll(PushIdentifierTypeRef, list.list)).filter((identifier) => identifier.app === AppType.Mail || identifier.app === AppType.Integrated);
			mithril_default.redraw();
		}
	}
	getCurrentIdentifier() {
		if (isApp() || isDesktop()) {
			const identifier = mailLocator.pushService.getLoadedPushIdentifier()?.identifier;
			return identifier ? identifier : null;
		}
		return null;
	}
	async entityEventsReceived(updates) {
		for (let update of updates) if (isUpdateForTypeRef(PushIdentifierTypeRef, update)) await this.loadPushIdentifiers();
	}
};

//#endregion
//#region src/common/settings/AffiliateSettingsViewer.ts
var AffiliateSettingsViewer = class {
	affiliateViewModel = new LazyLoaded(async () => await mailLocator.affiliateViewModel());
	domainConfig = locator.domainConfigProvider().getCurrentDomainConfig();
	constructor(getIsShowingKpis, toggleKpiColumn) {
		this.getIsShowingKpis = getIsShowingKpis;
		this.toggleKpiColumn = toggleKpiColumn;
	}
	oninit() {
		this.affiliateViewModel.getAsync().then((avm) => avm.load().finally(mithril_default.redraw));
	}
	view() {
		if (this.affiliateViewModel.isLoaded()) {
			const avm = this.affiliateViewModel.getSync();
			if (avm.isLoading) return mithril_default(ListColumnWrapper, mithril_default("p", "Loading..."));
			if (avm.data === null) return mithril_default(ListColumnWrapper, mithril_default("p", "Error"));
			const shareUrl = `${this.domainConfig.websiteBaseUrl}?t-src=${avm.data.promotionId}`;
			return mithril_default(ListColumnWrapper, mithril_default("section.fill-absolute.scroll.plr-l", mithril_default("h4.mt-l", lang.get("affiliateSettings_label")), mithril_default(TextField, {
				isReadOnly: true,
				label: "referralLink_label",
				value: shareUrl,
				injectionsRight: () => mithril_default(IconButton, {
					title: "copy_action",
					click: () => this.onCopyButtonClick(shareUrl),
					icon: Icons.Copy,
					size: ButtonSize.Compact
				})
			}), mithril_default(TextField, {
				isReadOnly: true,
				label: "affiliateSettingsAccumulated_label",
				helpLabel: () => lang.get("affiliateSettingsAccumulated_msg"),
				value: formatPrice(Number(avm.data.accumulatedCommission), true)
			}), mithril_default(TextField, {
				isReadOnly: true,
				label: "affiliateSettingsCredited_label",
				helpLabel: () => lang.get("affiliateSettingsCredited_msg"),
				value: formatPrice(Number(avm.data.creditedCommission), true)
			}), mithril_default(".flex.center-horizontally.mt-m", mithril_default(Button, {
				label: this.getIsShowingKpis() ? "affiliateSettingsHideKpis_label" : "affiliateSettingsShowKpis_label",
				type: ButtonType.Secondary,
				click: () => this.toggleKpiColumn()
			}))));
		} else return mithril_default("");
	}
	onCopyButtonClick(shareUrl) {
		copyToClipboard(shareUrl).then(() => {
			showSnackBar({
				message: "linkCopied_msg",
				button: {
					label: "close_alt",
					click: () => {}
				}
			});
		});
	}
	async entityEventsReceived(updates) {}
};

//#endregion
//#region src/common/settings/AffiliateKpisViewer.ts
var AffiliateKpisViewer = class {
	affiliateViewModel = new LazyLoaded(async () => await mailLocator.affiliateViewModel());
	renderView() {
		return mithril_default(ListColumnWrapper, mithril_default(".flex.flex-column.fill-absolute.plr-l", mithril_default("h4.mt-l", "KPIs"), mithril_default(".overflow-auto.pt-s", { style: { height: "100%" } }, mithril_default("", { style: { minWidth: "800px" } }, mithril_default(Table, {
			columnHeading: [
				{ label: "month_label" },
				{
					label: "affiliateSettingsNewFree_label",
					helpText: "affiliateSettingsNewFree_msg"
				},
				{
					label: "affiliateSettingsNewPaid_label",
					helpText: "affiliateSettingsNewPaid_msg"
				},
				{
					label: "affiliateSettingsTotalFree_label",
					helpText: "affiliateSettingsTotalFree_msg"
				},
				{
					label: "affiliateSettingsTotalPaid_label",
					helpText: "affiliateSettingsTotalPaid_msg"
				},
				{
					label: "affiliateSettingsCommission_label",
					helpText: "affiliateSettingsCommission_msg"
				}
			],
			columnWidths: [
				ColumnWidth.Largest,
				ColumnWidth.Largest,
				ColumnWidth.Largest,
				ColumnWidth.Largest,
				ColumnWidth.Largest,
				ColumnWidth.Largest
			],
			showActionButtonColumn: false,
			addButtonAttrs: null,
			lines: this.renderRows()
		})))));
	}
	renderRows() {
		if (this.affiliateViewModel.isLoaded()) {
			const avm = this.affiliateViewModel.getSync();
			return (avm.data?.kpis ?? []).slice().sort((a, b) => Number(b.monthTimestamp) - Number(a.monthTimestamp)).map((month) => {
				const date = DateTime.fromJSDate(new Date(Number(month.monthTimestamp))).minus({ day: 3 }).toJSDate();
				return { cells: [
					formatShortMonthYear2Digit(date),
					month.newFree,
					month.newPaid,
					month.totalFree,
					month.totalPaid,
					formatPrice(Number(month.commission), true)
				] };
			});
		} else {
			this.affiliateViewModel.getAsync().then(() => mithril_default.redraw());
			return [];
		}
	}
	entityEventsReceived(updates) {
		return Promise.resolve();
	}
};

//#endregion
//#region src/mail-app/settings/DesktopMailImportSettingsViewer.ts
var DesktopMailImportSettingsViewer = class {
	isImportHistoryExpanded = true;
	importStatePoolHandle;
	constructor(mailImporter) {
		this.mailImporter = mailImporter;
	}
	async oninit() {
		await this.mailImporter().initImportMailStates();
	}
	onbeforeremove() {
		clearInterval(this.importStatePoolHandle);
	}
	view() {
		return mithril_default(".fill-absolute.scroll.plr-l.pb-xl", [
			mithril_default(".h4.mt-l", lang.get("mailImportSettings_label")),
			this.renderTargetFolderControls(),
			!this.mailImporter().shouldRenderImportStatus() ? this.renderStartNewImportControls() : null,
			this.mailImporter().shouldRenderImportStatus() ? this.renderImportStatus() : null,
			this.renderImportHistory()
		]);
	}
	async onImportButtonClick(dom) {
		const currentPlanType = await mailLocator.logins.getUserController().getPlanType();
		const isHighestTierPlan = HighestTierPlans.includes(currentPlanType);
		if (!isHighestTierPlan) {
			showNotAvailableForFreeDialog([PlanType.Legend, PlanType.Unlimited]).then();
			return;
		}
		const allowedExtensions = ["eml", "mbox"];
		const filePaths = await mailLocator.fileApp.openFileChooser(dom.getBoundingClientRect(), allowedExtensions, true);
		await this.mailImporter().onStartBtnClick(filePaths.map((fp) => fp.location));
	}
	renderTargetFolderControls() {
		let folders = this.mailImporter().foldersForMailbox;
		if (folders) {
			const loadingMsg = lang.get("loading_msg");
			const emptyLabel = mithril_default("br");
			const selectedTargetFolder = this.mailImporter().selectedTargetFolder;
			const selectedTargetFolderPath = selectedTargetFolder ? getPathToFolderString(folders, selectedTargetFolder) : "";
			const isNotSubfolder = selectedTargetFolder ? selectedTargetFolderPath == getFolderName(selectedTargetFolder) : false;
			const helpLabel = selectedTargetFolder ? isNotSubfolder ? emptyLabel : selectedTargetFolderPath : emptyLabel;
			let targetFolders = folders.getIndentedList().map((folderInfo) => {
				return {
					name: getIndentedFolderNameForDropdown(folderInfo),
					value: folderInfo.folder
				};
			});
			return mithril_default(DropDownSelector, {
				label: "mailImportTargetFolder_label",
				items: targetFolders,
				disabled: this.mailImporter().shouldRenderImportStatus(),
				selectedValue: selectedTargetFolder,
				selectedValueDisplay: selectedTargetFolder ? getFolderName(selectedTargetFolder) : loadingMsg,
				selectionChangedHandler: (newFolder) => this.mailImporter().selectedTargetFolder = newFolder,
				helpLabel: () => helpLabel
			});
		} else return null;
	}
	renderStartNewImportControls() {
		return [mithril_default(".flex-start.mt-m", this.renderImportInfoText()), mithril_default(".flex-start.mt-s", mithril_default(LoginButton, {
			type: LoginButtonType.FlexWidth,
			label: "import_action",
			onclick: (_, dom) => this.onImportButtonClick(dom)
		}))];
	}
	renderImportInfoText() {
		return [mithril_default(".small", lang.get("mailImportInfoText_label"))];
	}
	renderImportStatus() {
		const processedMailsCountLabel = mithril_default(".flex-start.p.small", lang.get("mailImportStateProcessedMailsTotalMails_label", {
			"{processedMails}": this.mailImporter().getProcessedMailsCount(),
			"{totalMails}": this.mailImporter().getTotalMailsCount()
		}));
		const resumeMailImportIconButtonAttrs = {
			title: "resumeMailImport_action",
			icon: Icons.Play,
			click: () => this.mailImporter().onResumeBtnClick(),
			size: ButtonSize.Normal,
			disabled: this.mailImporter().shouldDisableResumeButton()
		};
		const pauseMailImportIconButtonAttrs = {
			title: "pauseMailImport_action",
			icon: Icons.Pause,
			click: () => {
				this.mailImporter().onPauseBtnClick();
			},
			size: ButtonSize.Normal,
			disabled: this.mailImporter().shouldDisablePauseButton()
		};
		const cancelMailImportIconButtonAttrs = {
			title: "cancelMailImport_action",
			icon: Icons.Cancel,
			click: () => {
				this.mailImporter().onCancelBtnClick();
			},
			size: ButtonSize.Normal,
			disabled: this.mailImporter().shouldDisableCancelButton()
		};
		let buttonControls = [];
		if (this.mailImporter().shouldRenderPauseButton()) buttonControls.push(mithril_default(IconButton, pauseMailImportIconButtonAttrs));
		if (this.mailImporter().shouldRenderResumeButton()) buttonControls.push(mithril_default(IconButton, resumeMailImportIconButtonAttrs));
		if (this.mailImporter().shouldRenderCancelButton()) buttonControls.push(mithril_default(IconButton, cancelMailImportIconButtonAttrs));
		return [[mithril_default(".flex-space-between.p.small.mt-m", getReadableUiImportStatus(assertNotNull(this.mailImporter().getUiStatus())), this.mailImporter().shouldRenderProcessedMails() ? processedMailsCountLabel : null)], [mithril_default(".flex-space-between.border-radius-big.mt-s.rel.nav-bg.full-width", this.renderMailImportProgressBar(), ...buttonControls)]];
	}
	renderMailImportProgressBar() {
		return mithril_default(".rel.border-radius-big.full-width", mithril_default(ProgressBar, {
			progress: this.mailImporter().getProgress() / 100,
			type: ProgressBarType.Large
		}));
	}
	renderImportHistory() {
		return [mithril_default(".flex-space-between.items-center.mt-l.mb-s", [mithril_default(".h4", lang.get("mailImportHistory_label")), mithril_default(ExpanderButton, {
			label: "show_action",
			expanded: this.isImportHistoryExpanded,
			onExpandedChange: () => {
				this.isImportHistoryExpanded = !this.isImportHistoryExpanded;
			}
		})]), mithril_default(ExpanderPanel, { expanded: this.isImportHistoryExpanded }, mithril_default(Table, {
			columnHeading: ["mailImportHistoryTableHeading_label"],
			columnWidths: [ColumnWidth.Small, ColumnWidth.Largest],
			showActionButtonColumn: true,
			lines: this.makeMailImportHistoryTableLines()
		}))];
	}
	/**
	* Parses the importMailStates into displayable table lines.
	* @returns array of the parsed table lines.
	*/
	makeMailImportHistoryTableLines() {
		let folders = this.mailImporter().foldersForMailbox?.getIndentedList();
		if (folders) return this.mailImporter().getFinalisedImports().sort(sortCompareByReverseId).map((im) => {
			const targetFolderId = im.targetFolder;
			const displayTargetFolder = folders.find((f) => isSameId(f.folder._id, targetFolderId));
			return { cells: () => [{
				main: lang.get("mailImportHistoryTableRowTitle_label", {
					"{status}": getReadableImportStatus(parseInt(im.status)),
					"{folder}": displayTargetFolder ? getFolderName(displayTargetFolder.folder) : lang.get("mailImportHistoryTableRowFolderDeleted_label")
				}),
				info: [lang.get("mailImportHistoryTableRowSubtitle_label", {
					"{date}": formatDate(new Date(generatedIdToTimestamp(elementIdPart(im._id)))),
					"{successfulMails}": im.successfulMails,
					"{failedMails}": im.failedMails
				})]
			}] };
		});
else return [];
	}
	async entityEventsReceived(updates) {}
};
function getReadableUiImportStatus(uiStatus) {
	return lang.get(getUiImportStatusTranslationKey(uiStatus));
}
function getUiImportStatusTranslationKey(uiStatus) {
	switch (uiStatus) {
		case UiImportStatus.Starting: return "mailImportStatusStarting_label";
		case UiImportStatus.Resuming: return "mailImportStatusResuming_label";
		case UiImportStatus.Running: return "mailImportStatusRunning_label";
		case UiImportStatus.Pausing: return "mailImportStatusPausing_label";
		case UiImportStatus.Paused: return "mailImportStatusPaused_label";
		case UiImportStatus.Cancelling: return "mailImportStatusCancelling_label";
	}
}
function getReadableImportStatus(importStatus) {
	return lang.get(getImportStatusTranslationKey(importStatus));
}
function getImportStatusTranslationKey(importStatus) {
	switch (importStatus) {
		case ImportStatus.Running: return "mailImportStatusRunning_label";
		case ImportStatus.Paused: return "mailImportStatusPaused_label";
		case ImportStatus.Canceled: return "mailImportStatusCanceled_label";
		case ImportStatus.Finished: return "mailImportStatusFinished_label";
	}
}

//#endregion
//#region src/mail-app/settings/WebMailImportSettingsViewer.ts
var WebMailImportSettingsViewer = class {
	constructor() {}
	view() {
		return mithril_default(".fill-absolute.scroll.plr-l.pb-xl", [mithril_default(".h4.mt-l", lang.get("mailImportSettings_label")), this.renderNoImportOnWebText()]);
	}
	renderNoImportOnWebText() {
		return [mithril_default(".flex-column.mt", mithril_default(".p", lang.get("mailImportNoImportOnWeb_label")), mithril_default(".flex-start.mt-l", mithril_default(LoginButton, {
			type: LoginButtonType.FlexWidth,
			label: "mailImportDownloadDesktopClient_label",
			onclick: () => {
				const desktopClientDownloadUri = "https://tuta.com#download";
				if (isWebClient()) open(desktopClientDownloadUri);
else mailLocator.systemFacade.openLink(desktopClientDownloadUri);
			}
		})), mithril_default(".flex-v-center.full-width.mt-xl", mithril_default("img", {
			src: `${window.tutao.appState.prefixWithoutFile}/images/mail-import/email-import-webapp.svg`,
			alt: "",
			rel: "noreferrer",
			loading: "lazy",
			decoding: "async",
			class: "settings-illustration-large"
		})))];
	}
	async entityEventsReceived(updates) {}
};

//#endregion
//#region src/mail-app/settings/MailExportSettings.ts
var MailExportSettings = class {
	selectedMailbox = null;
	controllerSubscription = null;
	isExportHistoryExpanded = false;
	oncreate(vnode) {
		this.controllerSubscription = vnode.attrs.mailExportController.state.map(mithril_default.redraw);
	}
	onremove() {
		if (this.controllerSubscription) {
			this.controllerSubscription.end();
			this.controllerSubscription = null;
		}
	}
	view(vnode) {
		const { mailboxDetails } = vnode.attrs;
		this.selectedMailbox = this.selectedMailbox ?? first(mailboxDetails);
		const state = vnode.attrs.mailExportController.state();
		const emptyLabel = mithril_default("br");
		return [mithril_default(DropDownSelector, {
			label: "mailboxToExport_label",
			items: mailboxDetails.map((mailboxDetail) => {
				return {
					name: getMailboxName(mailLocator.logins, mailboxDetail),
					value: mailboxDetail
				};
			}),
			selectedValue: this.selectedMailbox,
			selectionChangedHandler: (selectedMailbox) => {
				this.selectedMailbox = selectedMailbox;
			},
			dropdownWidth: 300,
			disabled: state.type === "exporting",
			helpLabel: () => emptyLabel
		}), this.renderState(vnode.attrs.mailExportController)];
	}
	renderState(controller) {
		const state = controller.state();
		switch (state.type) {
			case "exporting": return [mithril_default(".flex-start.mt-m.small", lang.get("exportingEmails_label", { "{count}": state.exportedMails })), mithril_default(".flex-space-between.border-radius-big.mt-s.rel.nav-bg.full-width.center-vertically", [mithril_default(Icon, {
				icon: BootIcons.Progress,
				class: "flex-center items-center icon-progress-tiny icon-progress ml-s",
				size: IconSize.Medium
			}), mithril_default(IconButton, {
				title: "cancel_action",
				icon: Icons.Cancel,
				click: () => {
					controller.cancelExport();
				},
				size: ButtonSize.Normal
			})])];
			case "idle": return [mithril_default(".flex-start.mt-m", this.renderExportInfoText()), mithril_default(".flex-start.mt-s", mithril_default(LoginButton, {
				type: LoginButtonType.FlexWidth,
				label: "export_action",
				onclick: () => {
					if (this.selectedMailbox) controller.startExport(this.selectedMailbox);
				}
			}))];
			case "error": return [mithril_default(".flex-space-between.items-center.mt.mb-s", [mithril_default("small.noselect", state.message), mithril_default(Button, {
				label: "retry_action",
				click: () => {
					controller.cancelExport();
					if (this.selectedMailbox) controller.startExport(this.selectedMailbox);
				},
				type: ButtonType.Secondary
			})])];
			case "finished": return [mithril_default("small.noselect", lang.get("exportFinished_label")), mithril_default(".flex-start.mt-s", mithril_default(LoginButton, {
				type: LoginButtonType.FlexWidth,
				label: "open_action",
				onclick: () => this.onOpenClicked(controller)
			}))];
			case "locked": return [mithril_default(".flex-space-between.items-center.mt.mb-s.button-height", [mithril_default("small.noselect", `${lang.get("exportRunningElsewhere_label")} ${lang.get("pleaseWait_msg")}`)])];
		}
	}
	async onOpenClicked(controller) {
		await controller.openExportDirectory();
		await controller.cancelExport();
	}
	renderExportInfoText() {
		return [mithril_default(".small", lang.get("mailExportInfoText_label"))];
	}
};

//#endregion
//#region src/mail-app/settings/MailExportViewer.ts
assertMainOrNode();
var MailExportViewer = class {
	mailExportController = null;
	constructor() {
		this.view = this.view.bind(this);
		if (isDesktop()) mailLocator.mailExportController().then((controller) => {
			this.mailExportController = controller;
			mithril_default.redraw();
		});
	}
	view() {
		return [mithril_default(".fill-absolute.scroll.plr-l.pb-xl", mithril_default(".h4.mt-l", lang.get("mailExportSettings_label")), isDesktop() ? this.renderMailExportSettings() : this.renderExportOnlyOnDesktopText())];
	}
	renderMailExportSettings() {
		return this.mailExportController != null ? mithril_default(MailExportSettings, {
			mailboxDetails: mailLocator.mailboxModel.mailboxDetails(),
			logins: mailLocator.logins,
			mailExportController: this.mailExportController
		}) : null;
	}
	renderExportOnlyOnDesktopText() {
		return [mithril_default(".flex-column.mt", mithril_default(".p", lang.get("mailExportOnlyOnDesktop_label")), mithril_default(".flex-start.mt-l", mithril_default(LoginButton, {
			type: LoginButtonType.FlexWidth,
			label: "downloadDesktopClient_label",
			onclick: () => {
				const desktopClientDownloadUri = "https://tuta.com#download";
				if (isWebClient()) open(desktopClientDownloadUri);
else mailLocator.systemFacade.openLink(desktopClientDownloadUri);
			}
		})), mithril_default(".flex-v-center.full-width.mt-xl", mithril_default("img", {
			src: `${window.tutao.appState.prefixWithoutFile}/images/mail-import/email-import-webapp.svg`,
			alt: "",
			rel: "noreferrer",
			loading: "lazy",
			decoding: "async",
			class: "settings-illustration-large"
		})))];
	}
	async entityEventsReceived() {
		return Promise.resolve();
	}
};

//#endregion
//#region src/mail-app/settings/SettingsView.ts
var import_stream = __toESM(require_stream(), 1);
assertMainOrNode();
var SettingsView = class extends BaseTopLevelView {
	viewSlider;
	_settingsFoldersColumn;
	_settingsColumn;
	_settingsDetailsColumn;
	_userFolders;
	_adminFolders;
	logins;
	_templateFolders;
	_dummyTemplateFolder;
	_knowledgeBaseFolders;
	_selectedFolder;
	_currentViewer = null;
	showBusinessSettings = (0, import_stream.default)(false);
	showAffiliateSettings = false;
	_targetFolder;
	_targetRoute;
	detailsViewer = null;
	_customDomains;
	_templateInvitations;
	constructor(vnode) {
		super();
		this.logins = vnode.attrs.logins;
		this._userFolders = [
			new SettingsFolder("login_label", () => BootIcons.Contacts, "login", () => new LoginSettingsViewer(locator.credentialsProvider, isApp() ? locator.systemFacade : null), undefined),
			new SettingsFolder("email_label", () => BootIcons.Mail, "mail", () => new MailSettingsViewer(), undefined),
			new SettingsFolder("contacts_label", () => BootIcons.Contacts, "contacts", () => new ContactsSettingsViewer(), undefined),
			new SettingsFolder("appearanceSettings_label", () => Icons.Palette, "appearance", () => new AppearanceSettingsViewer(), undefined),
			new SettingsFolder("notificationSettings_action", () => Icons.Bell, "notifications", () => new NotificationSettingsViewer(), undefined)
		];
		if (isDesktop()) this._userFolders.push(new SettingsFolder("desktop_label", () => Icons.Desktop, "desktop", () => {
			const desktopSettingsViewer = new DesktopSettingsViewer();
			locator.initialized.then(() => {
				locator.native.setAppUpdateListener(() => desktopSettingsViewer.onAppUpdateAvailable());
			});
			return desktopSettingsViewer;
		}, undefined));
		mailLocator.mailboxModel.getMailboxDetails().then((mailboxes) => {
			if (first(mailboxes)?.mailbox.currentMailBag != null) this._userFolders.push(new SettingsFolder("mailImportSettings_label", () => Icons.Import, "mailImport", () => {
				if (isDesktop()) return new DesktopMailImportSettingsViewer(() => mailLocator.getMailImporter());
else return new WebMailImportSettingsViewer();
			}, undefined));
		});
		this._userFolders.push(new SettingsFolder("mailExportSettings_label", () => Icons.Export, "mailExport", () => new MailExportViewer(), undefined));
		this._adminFolders = [];
		this._templateFolders = [];
		this._makeTemplateFolders().then((folders) => {
			this._templateFolders = folders;
			mithril_default.redraw();
		});
		this._dummyTemplateFolder = new SettingsFolder(lang.makeTranslation("group_name", getDefaultGroupName(GroupType.Template)), () => Icons.ListAlt, {
			folder: "templates",
			id: "init"
		}, () => {
			return {
				view: () => {
					return mithril_default(DummyTemplateListView);
				},
				entityEventsReceived: () => Promise.resolve()
			};
		}, undefined);
		this._knowledgeBaseFolders = [];
		this._makeKnowledgeBaseFolders().then((folders) => {
			this._knowledgeBaseFolders = folders;
			mithril_default.redraw();
		});
		this._selectedFolder = this._userFolders[0];
		this._templateInvitations = new ReceivedGroupInvitationsModel(GroupType.Template, locator.eventController, locator.entityClient, this.logins);
		this._templateInvitations.invitations.map(() => mithril_default.redraw());
		this._templateInvitations.init();
		this._settingsFoldersColumn = new ViewColumn({
			onbeforeremove: () => {
				this._templateInvitations.dispose();
			},
			view: () => {
				const [ownTemplates, sharedTemplates] = partition(this._templateFolders, (folder) => isSharedGroupOwner(folder.data.group, this.logins.getUserController().user));
				const templateInvitations = this._templateInvitations.invitations();
				return mithril_default(FolderColumnView, {
					drawer: vnode.attrs.drawerAttrs,
					button: null,
					content: mithril_default(".flex.flex-grow.col", [
						mithril_default(SidebarSection, { name: "userSettings_label" }, [
							this._renderSidebarSectionChildren(this._userFolders),
							ownTemplates.length > 0 ? ownTemplates.map((folder) => this._renderTemplateFolderRow(folder)) : mithril_default(SettingsFolderRow, { mainButtonAttrs: this._createSettingsFolderNavButton(this._dummyTemplateFolder) }),
							sharedTemplates.map((folder) => this._renderTemplateFolderRow(folder))
						]),
						this.logins.isUserLoggedIn() && this.logins.getUserController().isGlobalAdmin() ? mithril_default(SidebarSection, { name: "adminSettings_label" }, this._renderSidebarSectionChildren(this._adminFolders)) : null,
						templateInvitations.length > 0 ? mithril_default(SidebarSection, { name: "templateGroupInvitations_label" }, templateInvitations.map((invitation) => this._renderTemplateInvitationFolderRow(invitation))) : null,
						this._knowledgeBaseFolders.length > 0 ? mithril_default(SidebarSection, { name: "knowledgebase_label" }, this._renderSidebarSectionChildren(this._knowledgeBaseFolders)) : null,
						locator.domainConfigProvider().getCurrentDomainConfig().firstPartyDomain ? this._aboutThisSoftwareLink() : null
					]),
					ariaLabel: "settings_label"
				});
			}
		}, ColumnType.Foreground, {
			minWidth: size.first_col_min_width,
			maxWidth: size.first_col_max_width,
			headerCenter: "settings_label"
		});
		this._settingsColumn = new ViewColumn({ view: () => mithril_default(BackgroundColumnLayout, {
			backgroundColor: theme.navigation_bg,
			columnLayout: mithril_default(".mlr-safe-inset.fill-absolute.content-bg", { class: styles.isUsingBottomNavigation() ? "" : "border-radius-top-left-big" }, mithril_default(this._getCurrentViewer())),
			mobileHeader: () => mithril_default(MobileHeader, {
				...vnode.attrs.header,
				backAction: () => this.viewSlider.focusPreviousColumn(),
				columnType: "first",
				title: this._selectedFolder.name,
				actions: [],
				primaryAction: () => null
			}),
			desktopToolbar: () => null
		}) }, ColumnType.Background, {
			minWidth: 400,
			maxWidth: 600,
			headerCenter: this._selectedFolder.name
		});
		this._settingsDetailsColumn = new ViewColumn({ view: () => mithril_default(BackgroundColumnLayout, {
			backgroundColor: theme.navigation_bg,
			columnLayout: mithril_default(".mlr-safe-inset.fill-absolute.content-bg", this.detailsViewer ? this.detailsViewer.renderView() : mithril_default("")),
			mobileHeader: () => mithril_default(MobileHeader, {
				...vnode.attrs.header,
				backAction: () => this.viewSlider.focusPreviousColumn(),
				columnType: "other",
				title: this._selectedFolder.name,
				actions: [],
				primaryAction: () => null
			}),
			desktopToolbar: () => null
		}) }, ColumnType.Background, {
			minWidth: 500,
			maxWidth: 2400,
			headerCenter: "settings_label"
		});
		this.viewSlider = new ViewSlider([
			this._settingsFoldersColumn,
			this._settingsColumn,
			this._settingsDetailsColumn
		]);
		this._customDomains = new LazyLoaded(async () => {
			const domainInfos = await getAvailableDomains(this.logins, true);
			return domainInfos.map((info) => info.domain);
		});
		this._customDomains.getAsync().then(() => mithril_default.redraw());
		this._targetFolder = mithril_default.route.param("folder");
		this._targetRoute = mithril_default.route.get();
	}
	async populateAdminFolders() {
		await this.updateShowBusinessSettings();
		await this.updateShowAffiliateSettings();
		const currentPlanType = await this.logins.getUserController().getPlanType();
		const isLegacyPlan = LegacyPlans.includes(currentPlanType);
		if (await this.logins.getUserController().canHaveUsers()) {
			this._adminFolders.push(new SettingsFolder("adminUserList_action", () => BootIcons.Contacts, "users", () => new UserListView((viewer) => this.replaceDetailsViewer(viewer), () => this.focusSettingsDetailsColumn(), () => !isApp() && this._customDomains.isLoaded() && this._customDomains.getLoaded().length > 0, () => showUserImportDialog(this._customDomains.getLoaded()), () => exportUserCsv(locator.entityClient, this.logins, locator.fileController, locator.counterFacade)), undefined));
			if (!this.logins.isEnabled(FeatureType.WhitelabelChild)) this._adminFolders.push(new SettingsFolder("sharedMailboxes_label", () => Icons.People, "groups", () => new GroupListView((viewer) => this.replaceDetailsViewer(viewer), () => this.focusSettingsDetailsColumn()), undefined));
		}
		if (this.logins.getUserController().isGlobalAdmin()) {
			this._adminFolders.push(new SettingsFolder("globalSettings_label", () => BootIcons.Settings, "global", () => new GlobalSettingsViewer(), undefined));
			if (!this.logins.isEnabled(FeatureType.WhitelabelChild) && !isIOSApp()) this._adminFolders.push(new SettingsFolder("whitelabel_label", () => Icons.Wand, "whitelabel", () => new WhitelabelSettingsViewer(locator.entityClient, this.logins), undefined));
		}
		if (!this.logins.isEnabled(FeatureType.WhitelabelChild)) {
			if (this.logins.getUserController().isGlobalAdmin()) {
				this._adminFolders.push(new SettingsFolder("adminSubscription_action", () => BootIcons.Premium, "subscription", () => new SubscriptionViewer(currentPlanType, isIOSApp() ? locator.mobilePaymentsFacade : null), undefined));
				this._adminFolders.push(new SettingsFolder("adminPayment_action", () => Icons.CreditCard, "invoice", () => new PaymentViewer(), undefined));
				this._adminFolders.push(new SettingsFolder("referralSettings_label", () => BootIcons.Share, "referral", () => new ReferralSettingsViewer(), undefined).setIsVisibleHandler(() => !this.showBusinessSettings()));
				this._adminFolders.push(new SettingsFolder("affiliateSettings_label", () => BootIcons.Share, "affiliate", () => new AffiliateSettingsViewer(() => this.viewSlider.focusedColumn === this._settingsDetailsColumn, () => {
					if (this.viewSlider.focusedColumn !== this._settingsDetailsColumn) {
						this.replaceDetailsViewer(new AffiliateKpisViewer());
						this.focusSettingsDetailsColumn();
					} else {
						this.replaceDetailsViewer(null);
						this.viewSlider.focus(this._settingsColumn);
					}
				}), undefined).setIsVisibleHandler(() => this.showAffiliateSettings));
			}
		}
		mithril_default.redraw();
	}
	replaceDetailsViewer(viewer) {
		return this.detailsViewer = viewer;
	}
	oncreate(vnode) {
		locator.eventController.addEntityListener(this.entityListener);
		this.populateAdminFolders().then(() => {
			const stillAtDefaultUrl = mithril_default.route.get() === this._userFolders[0].url;
			if (stillAtDefaultUrl) this.onNewUrl({ folder: this._targetFolder }, this._targetRoute);
		});
	}
	onremove(vnode) {
		locator.eventController.removeEntityListener(this.entityListener);
	}
	entityListener = (updates, eventOwnerGroupId) => {
		return this.entityEventsReceived(updates, eventOwnerGroupId);
	};
	view({ attrs }) {
		return mithril_default("#settings.main-view", mithril_default(this.viewSlider, {
			header: mithril_default(Header, { ...attrs.header }),
			bottomNav: mithril_default(BottomNav)
		}));
	}
	_createSettingsFolderNavButton(folder) {
		return {
			label: folder.name,
			icon: folder.icon,
			href: folder.url,
			colors: NavButtonColor.Nav,
			click: () => this.viewSlider.focus(this._settingsColumn),
			persistentBackground: true
		};
	}
	_renderTemplateFolderRow(folder) {
		const instance = folder.data;
		const isGroupOwner = isSharedGroupOwner(instance.group, getEtId(this.logins.getUserController().user));
		return mithril_default(SettingsFolderRow, {
			mainButtonAttrs: this._createSettingsFolderNavButton(folder),
			extraButton: mithril_default(IconButton, createMoreActionButtonAttrs(() => [
				isGroupOwner ? {
					label: "delete_action",
					click: () => this._deleteTemplateGroup(folder.data),
					icon: Icons.Trash
				} : {
					label: "leaveGroup_action",
					click: () => this._leaveTemplateGroup(folder.data),
					icon: Icons.Trash
				},
				{
					label: "sharing_label",
					click: () => showGroupSharingDialog(folder.data.groupInfo, true),
					icon: Icons.ContactImport
				},
				{
					label: "rename_action",
					click: () => showRenameTemplateListDialog(folder.data),
					icon: Icons.Edit
				}
			]))
		});
	}
	_leaveTemplateGroup(templateInfo) {
		return getConfirmation(lang.getTranslation("confirmLeaveSharedGroup_msg", { "{groupName}": getSharedGroupName(templateInfo.groupInfo, this.logins.getUserController(), false) })).confirmed(() => locator.groupManagementFacade.removeUserFromGroup(getEtId(this.logins.getUserController().user), templateInfo.groupInfo.group));
	}
	_deleteTemplateGroup(templateInfo) {
		return getConfirmation("confirmDeleteTemplateGroup_msg").confirmed(() => showProgressDialog("pleaseWait_msg", locator.serviceExecutor.delete(TemplateGroupService, createUserAreaGroupDeleteData({ group: templateInfo.groupInfo.group }))));
	}
	_renderTemplateInvitationFolderRow(invitation) {
		return mithril_default(GroupInvitationFolderRow, {
			invitation,
			icon: BootIcons.Mail
		});
	}
	_renderSidebarSectionChildren(folders) {
		return mithril_default("", folders.filter((folder) => folder.isVisible()).map((folder) => {
			const buttonAttrs = this._createSettingsFolderNavButton(folder);
			return mithril_default(SettingsFolderRow, { mainButtonAttrs: buttonAttrs });
		}));
	}
	_getCurrentViewer() {
		if (!this._currentViewer) {
			this.detailsViewer = null;
			this._currentViewer = this._selectedFolder.viewerCreator();
		}
		return this._currentViewer;
	}
	/**
	* Notifies the current view about changes of the url within its scope.
	*/
	onNewUrl(args, requestedPath) {
		if (!args.folder) this._setUrl(this._userFolders[0].url);
else if (args.folder || !mithril_default.route.get().startsWith("/settings")) {
			const folder = this._allSettingsFolders().find((folder$1) => folder$1.url === requestedPath);
			if (!folder) this._setUrl(this._userFolders[0].url);
else if (this._selectedFolder.path === folder.path) {
				this._selectedFolder = folder;
				mithril_default.redraw();
			} else {
				this._setUrl(folder.url);
				this._selectedFolder = folder;
				this._currentViewer = null;
				this.detailsViewer = null;
				this._getCurrentViewer();
				mithril_default.redraw();
			}
		}
	}
	_getUserOwnedTemplateSettingsFolder() {
		return this._templateFolders.find((folder) => isSharedGroupOwner(folder.data.group, this.logins.getUserController().user)) || this._dummyTemplateFolder;
	}
	_allSettingsFolders() {
		const hasOwnTemplates = this._templateFolders.some((folder) => isSharedGroupOwner(folder.data.group, this.logins.getUserController().user));
		return [
			...this._userFolders,
			...this._adminFolders,
			...!hasOwnTemplates ? [this._dummyTemplateFolder] : [],
			...this._templateFolders,
			...this._knowledgeBaseFolders
		];
	}
	_setUrl(url) {
		mithril_default.route.set(url + location.hash);
	}
	_isGlobalAdmin(user) {
		return user.memberships.some((m) => m.groupType === GroupType.Admin);
	}
	focusSettingsDetailsColumn() {
		void this.viewSlider.focus(this._settingsDetailsColumn);
	}
	async updateShowBusinessSettings() {
		this.showBusinessSettings((await this.logins.getUserController().loadCustomer()).businessUse === true);
	}
	async entityEventsReceived(updates, eventOwnerGroupId) {
		for (const update of updates) if (isUpdateForTypeRef(CustomerTypeRef, update)) await this.updateShowBusinessSettings();
else if (this.logins.getUserController().isUpdateForLoggedInUserInstance(update, eventOwnerGroupId)) {
			const user = this.logins.getUserController().user;
			if (!this._isGlobalAdmin(user) && this._currentViewer && this._adminFolders.some((f) => f.isActive())) this._setUrl(this._userFolders[0].url);
			if (this._templateFolders.length !== this.logins.getUserController().getTemplateMemberships().length) {
				const [templates, knowledgeBases] = await Promise.all([this._makeTemplateFolders(), this._makeKnowledgeBaseFolders()]);
				this._templateFolders = templates;
				this._knowledgeBaseFolders = knowledgeBases;
				const currentRoute = mithril_default.route.get();
				if (currentRoute.startsWith(SETTINGS_PREFIX)) {
					const folder = mithril_default.route.param("folder");
					if (folder === "templates") {
						const templateListId = mithril_default.route.param("id");
						const haveOpenedFolder = templates.some((t) => t.id === templateListId);
						if (this._dummyTemplateFolder.url || !haveOpenedFolder) this._setUrl(this._getUserOwnedTemplateSettingsFolder().url);
					}
				}
			}
			mithril_default.redraw();
		} else if (isUpdateForTypeRef(CustomerInfoTypeRef, update)) {
			this._customDomains.reset();
			this._adminFolders.length = 0;
			await this.populateAdminFolders();
			await this._customDomains.getAsync();
			mithril_default.redraw();
		}
		await this._currentViewer?.entityEventsReceived(updates);
		await this.detailsViewer?.entityEventsReceived(updates);
	}
	getViewSlider() {
		return this.viewSlider;
	}
	_aboutThisSoftwareLink() {
		const label = lang.get("about_label");
		const versionLabel = `Tuta v${env.versionNumber}`;
		return mithril_default(".pb.pt-l.flex-no-shrink.flex.col.justify-end", [mithril_default("button.text-center.small.no-text-decoration", {
			style: { backgroundColor: "transparent" },
			href: "#",
			"aria-label": label,
			"aria-description": versionLabel,
			"aria-haspopup": "dialog",
			onclick: () => {
				this.viewSlider.focusNextColumn();
				setTimeout(() => {
					const dialog = Dialog.showActionDialog({
						title: "about_label",
						child: () => mithril_default(AboutDialog, { onShowSetupWizard: () => {
							dialog.close();
							locator.showSetupWizard();
						} }),
						allowOkWithReturn: true,
						okAction: (dialog$1) => dialog$1.close(),
						allowCancel: false
					});
				}, 200);
			}
		}, [mithril_default("", versionLabel), mithril_default(".b", { style: { color: theme.navigation_button_selected } }, label)])]);
	}
	async _makeTemplateFolders() {
		const userController = this.logins.getUserController();
		const templateMemberships = userController.getTemplateMemberships();
		return pMap(await loadTemplateGroupInstances(templateMemberships, locator.entityClient), (groupInstance) => new SettingsFolder(lang.makeTranslation("group_name", getSharedGroupName(groupInstance.groupInfo, userController, true)), () => Icons.ListAlt, {
			folder: "templates",
			id: getEtId(groupInstance.group)
		}, () => new TemplateListView(groupInstance, locator.entityClient, this.logins, (viewer) => this.replaceDetailsViewer(viewer), () => this.focusSettingsDetailsColumn()), groupInstance));
	}
	async _makeKnowledgeBaseFolders() {
		const userController = this.logins.getUserController();
		const customer = await userController.loadCustomer();
		if (isCustomizationEnabledForCustomer(customer, FeatureType.KnowledgeBase)) {
			const templateMemberships = this.logins.getUserController() && this.logins.getUserController().getTemplateMemberships() || [];
			return pMap(await loadTemplateGroupInstances(templateMemberships, locator.entityClient), (groupInstance) => new SettingsFolder(lang.makeTranslation("group_name", getSharedGroupName(groupInstance.groupInfo, userController, true)), () => Icons.Book, {
				folder: "knowledgebase",
				id: getEtId(groupInstance.group)
			}, () => new KnowledgeBaseListView(locator.entityClient, this.logins, groupInstance.groupRoot, groupInstance.group, (viewer) => this.replaceDetailsViewer(viewer), () => this.focusSettingsDetailsColumn()), undefined));
		} else return [];
	}
	async updateShowAffiliateSettings() {
		const customer = await this.logins.getUserController().loadCustomer();
		this.showAffiliateSettings = isCustomizationEnabledForCustomer(customer, FeatureType.AffiliatePartner);
	}
};
function showRenameTemplateListDialog(instance) {
	const logins = locator.logins;
	const name = (0, import_stream.default)(getSharedGroupName(instance.groupInfo, logins.getUserController(), true));
	Dialog.showActionDialog({
		title: "renameTemplateList_label",
		allowOkWithReturn: true,
		child: { view: () => mithril_default(TextField, {
			value: name(),
			oninput: name,
			label: "templateGroupName_label"
		}) },
		okAction: (dialog) => {
			dialog.close();
			const { userSettingsGroupRoot } = logins.getUserController();
			const existingGroupSettings = userSettingsGroupRoot.groupSettings.find((gc) => gc.group === instance.groupInfo.group);
			const newName = name();
			if (existingGroupSettings) existingGroupSettings.name = newName;
else {
				const newSettings = createGroupSettings({
					group: getEtId(instance.group),
					color: "",
					name: newName,
					defaultAlarmsList: [],
					sourceUrl: null
				});
				logins.getUserController().userSettingsGroupRoot.groupSettings.push(newSettings);
			}
			locator.entityClient.update(userSettingsGroupRoot).then(() => {
				if (isSharedGroupOwner(instance.group, logins.getUserController().user)) {
					instance.groupInfo.name = newName;
					locator.entityClient.update(instance.groupInfo);
				}
			});
		}
	});
}

//#endregion
export { SettingsView };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU2V0dGluZ3NWaWV3LWNodW5rLmpzIiwibmFtZXMiOlsibmFtZTogTWF5YmVUcmFuc2xhdGlvbiIsImljb246IGxhenlJY29uIiwicGF0aDogU2V0dGluZ3NGb2xkZXJQYXRoIiwidmlld2VyQ3JlYXRvcjogbGF6eTxVcGRhdGFibGVTZXR0aW5nc1ZpZXdlcj4iLCJkYXRhOiBUIiwiaXNWaXNpYmxlSGFuZGxlcjogbGF6eTxib29sZWFuPiIsIlNlY29uZEZhY3RvclR5cGVUb05hbWVUZXh0SWQ6IFJlY29yZDxTZWNvbmRGYWN0b3JUeXBlLCBUcmFuc2xhdGlvbktleT4iLCJlbnRpdHlDbGllbnQ6IEVudGl0eUNsaWVudCIsInVzZXI6IFVzZXIiLCJ3ZWJhdXRobkNsaWVudDogV2ViYXV0aG5DbGllbnQiLCJ0b3RwS2V5czogVG90cFNlY3JldCIsIndlYmF1dGhuU3VwcG9ydGVkOiBib29sZWFuIiwibG9naW5GYWNhZGU6IExvZ2luRmFjYWRlIiwiaG9zdG5hbWU6IHN0cmluZyIsImRvbWFpbkNvbmZpZzogRG9tYWluQ29uZmlnIiwidXBkYXRlVmlld0NhbGxiYWNrOiAoKSA9PiB2b2lkIiwidG9rZW4/OiBzdHJpbmciLCJRUkNvZGUiLCJvcHRpb25zOiBBcnJheTxTZWNvbmRGYWN0b3JUeXBlPiIsIm5ld1ZhbHVlOiBTZWNvbmRGYWN0b3JUeXBlIiwibmV3VmFsdWU6IHN0cmluZyIsInNlY3JldDogc3RyaW5nIiwiZXhwZWN0ZWRDb2RlOiBudW1iZXIiLCJrZXk6IFVpbnQ4QXJyYXkiLCJtb2RlbDogU2Vjb25kRmFjdG9yRWRpdE1vZGVsIiwidXNlcjogVXNlciIsImVudGl0eUNsaWVudDogRW50aXR5Q2xpZW50IiwibGF6eVVzZXI6IExhenlMb2FkZWQ8VXNlcj4iLCJ0b2tlbj86IHN0cmluZyIsImRpYWxvZzogU2Vjb25kRmFjdG9yRWRpdERpYWxvZyIsInR5cGVEcm9wZG93bkF0dHJzOiBEcm9wRG93blNlbGVjdG9yQXR0cnM8U2Vjb25kRmFjdG9yVHlwZT4iLCJuYW1lRmllbGRBdHRyczogVGV4dEZpZWxkQXR0cnMiLCJjb3B5QnV0dG9uQXR0cnM6IEljb25CdXR0b25BdHRycyIsIm0iLCJ1c2VyOiBMYXp5TG9hZGVkPFVzZXI+IiwiZG9tYWluQ29uZmlnUHJvdmlkZXI6IERvbWFpbkNvbmZpZ1Byb3ZpZGVyIiwibG9naW5GYWNhZGU6IExvZ2luRmFjYWRlIiwiYXNrRm9yUGFzc3dvcmQ6IGJvb2xlYW4iLCJpc0RlYWN0aXZhdGVkOiBib29sZWFuIiwic2Vjb25kRmFjdG9yVGFibGVBdHRyczogVGFibGVBdHRycyIsInJlbW92ZUJ1dHRvbkF0dHJzOiBJY29uQnV0dG9uQXR0cnMiLCJmYWN0b3I6IFNlY29uZEZhY3RvciIsImxvZ2luRG9tYWluczogUmVhZG9ubHlTZXQ8c3RyaW5nPiIsInRva2VuPzogc3RyaW5nIiwic2Vjb25kRmFjdG9yVG9SZW1vdmU6IFNlY29uZEZhY3RvciIsInVwZGF0ZTogRW50aXR5VXBkYXRlRGF0YSIsImNyZWRlbnRpYWxzUHJvdmlkZXI6IENyZWRlbnRpYWxzUHJvdmlkZXIiLCJtb2JpbGVTeXN0ZW1GYWNhZGU6IE1vYmlsZVN5c3RlbUZhY2FkZSB8IG51bGwiLCJtYWlsQWRkcmVzc0F0dHJzOiBUZXh0RmllbGRBdHRycyIsImNoYW5nZVBhc3N3b3JkQnV0dG9uQXR0cnM6IEljb25CdXR0b25BdHRycyIsInBhc3N3b3JkQXR0cnM6IFRleHRGaWVsZEF0dHJzIiwicmVjb3ZlcnlDb2RlRHJvcGRvd25CdXR0b25BdHRyczogSWNvbkJ1dHRvbkF0dHJzIiwicmVjb3ZlcnlDb2RlRmllbGRBdHRyczogVGV4dEZpZWxkQXR0cnMiLCJ1c2FnZURhdGFPcHRJbkF0dHJzOiBEcm9wRG93blNlbGVjdG9yQXR0cnM8Ym9vbGVhbiB8IG51bGw+Iiwic2Vzc2lvbjogU2Vzc2lvbiIsImlzVGhpc1Nlc3Npb246IGJvb2xlYW4iLCJ1cGRhdGVzOiBSZWFkb25seUFycmF5PEVudGl0eVVwZGF0ZURhdGE+IiwiY3JlZGVudGlhbHNFbmNyeXB0aW9uTW9kZTogQ3JlZGVudGlhbEVuY3J5cHRpb25Nb2RlIiwiYXBwTG9ja01ldGhvZDogQXBwTG9ja01ldGhvZCIsImdyb3VwSWQ6IElkIiwiZGlzcGxheU5hbWU6IHN0cmluZyIsImN1c3RvbWVyOiBDdXN0b21lciIsImNsZWFuRG9tYWluTmFtZTogc3RyaW5nIiwiY3VzdG9tZXJJZD86IElkIiwiRG5zUmVjb3JkVGFibGU6IFJlY29yZDxEbnNSZWNvcmRUeXBlLCBBY3R1YWxEbnNSZWNvcmRUeXBlPiIsInJlY29yZHM6IERuc1JlY29yZFtdIiwidm5vZGU6IFZub2RlRE9NPFdpemFyZFBhZ2VBdHRyczxBZGREb21haW5EYXRhPj4iLCJ2bm9kZTogVm5vZGU8V2l6YXJkUGFnZUF0dHJzPEFkZERvbWFpbkRhdGE+PiIsImRhdGE6IEFkZERvbWFpbkRhdGEiLCJkb206IEhUTUxFbGVtZW50IHwgbnVsbCIsImxlYXZlVW5maW5pc2hlZERpYWxvZ0F0dHJzOiBBY3Rpb25EaWFsb2dQcm9wcyIsImRpYWxvZzogRGlhbG9nIiwiZG9tYWluU3RhdHVzOiBEb21haW5EbnNTdGF0dXMiLCJyZWNvcmQ6IERuc1JlY29yZCIsInJlY29yZHM6IFZhbGlkYXRlZERuU1JlY29yZFtdIiwicmVmcmVzaEJ1dHRvbkF0dHJzOiBJY29uQnV0dG9uQXR0cnMgfCBudWxsIiwiaGlkZVJlZnJlc2hCdXR0b246IGJvb2xlYW4iLCJoZWxwSW5mbzogc3RyaW5nW10iLCJ2YWxpZGF0ZWRSZWNvcmQ6IERuc1JlY29yZCB8IG51bGwiLCJlcnJvck1lc3NhZ2VNYXA6IFJlY29yZDxDdXN0b21Eb21haW5DaGVja1Jlc3VsdCwgVHJhbnNsYXRpb25LZXk+IiwicmVjb3JkTGlzdDogQXJyYXk8RG5zUmVjb3JkPiIsImRvbWFpbkRhdGE6IEFkZERvbWFpbkRhdGEiLCJzaG93RXJyb3JEaWFsb2c6IGJvb2xlYW4iLCJkb21haW5TdGF0dXM6IERvbWFpbkRuc1N0YXR1cyIsInJlamVjdGVkU2VuZGVyOiBSZWplY3RlZFNlbmRlciIsIm1vZGVsOiBNYWlsQWRkcmVzc1RhYmxlTW9kZWwiLCJpc05ld1BhaWRQbGFuOiBib29sZWFuIiwibWFpbEFkZHJlc3M6IHN0cmluZyIsImZvcm1FcnJvcklkOiBUcmFuc2xhdGlvbktleSB8IG51bGwiLCJkaWFsb2c6IERpYWxvZyIsImFsaWFzOiBzdHJpbmciLCJzZW5kZXJOYW1lOiBzdHJpbmciLCJhZGRBbGlhc0J1dHRvbkF0dHJzOiBJY29uQnV0dG9uQXR0cnMgfCBudWxsIiwiYXR0cnM6IE1haWxBZGRyZXNzVGFibGVBdHRycyIsIm1vZGVsOiBNYWlsQWRkcmVzc1RhYmxlTW9kZWwiLCJhZGRyZXNzSW5mbzogQWRkcmVzc0luZm8iLCJhY3Rpb25CdXR0b25BdHRyczogSWNvbkJ1dHRvbkF0dHJzIHwgbnVsbCIsImFsaWFzOiBBZGRyZXNzSW5mbyIsIm1lc3NhZ2U6IFRyYW5zbGF0aW9uS2V5IiwiYWxpYXM6IHsgYWRkcmVzczogc3RyaW5nOyBuYW1lOiBzdHJpbmcgfSIsInZub2RlOiBWbm9kZTxBZGRFbWFpbEFkZHJlc3Nlc1BhZ2VBdHRycz4iLCJhbGlhc2VzVGFibGVBdHRyczogVGFibGVBdHRycyIsIm1haWxGb3JtQXR0cnM6IFNlbGVjdE1haWxBZGRyZXNzRm9ybUF0dHJzIiwiZG9tYWluRGF0YTogQWRkRG9tYWluRGF0YSIsInNob3dFcnJvckRpYWxvZzogYm9vbGVhbiIsInZub2RlOiBWbm9kZURPTTxXaXphcmRQYWdlQXR0cnM8QWRkRG9tYWluRGF0YT4+Iiwidm5vZGU6IFZub2RlPFdpemFyZFBhZ2VBdHRyczxBZGREb21haW5EYXRhPj4iLCJkb21haW5EYXRhOiBBZGREb21haW5EYXRhIiwic2hvd0Vycm9yRGlhbG9nOiBib29sZWFuIiwiZXJyb3JNZXNzYWdlTWFwOiBSZWNvcmQ8Q3VzdG9tRG9tYWluVmFsaWRhdGlvblJlc3VsdCwgVHJhbnNsYXRpb25LZXk+Iiwidm5vZGU6IFZub2RlRE9NPFdpemFyZFBhZ2VBdHRyczxBZGREb21haW5EYXRhPj4iLCJ2bm9kZTogVm5vZGU8V2l6YXJkUGFnZUF0dHJzPEFkZERvbWFpbkRhdGE+PiIsImRvbWFpbjogc3RyaW5nIiwiZG9tYWluRGF0YTogQWRkRG9tYWluRGF0YSIsInNob3dFcnJvckRpYWxvZzogYm9vbGVhbiIsImRvbWFpbjogc3RyaW5nIiwiY3VzdG9tZXJJbmZvOiBDdXN0b21lckluZm8iLCJtYWlsQWRkcmVzc1RhYmxlTW9kZWw6IE1haWxBZGRyZXNzVGFibGVNb2RlbCIsIm1haWxBZGRyZXNzVGFibGVFeHBhbmRlZDogYm9vbGVhbiIsImRvbWFpbkRhdGE6IEFkZERvbWFpbkRhdGEiLCJ2bm9kZTogVm5vZGU8RXhwYW5kYWJsZVRhYmxlQXR0cnM+Iiwic3VydmV5RGF0YTogU3VydmV5RGF0YSB8IG51bGwiLCJ0YWtlb3Zlcjogc3RyaW5nIiwicGFzc3dvcmQ6IHN0cmluZyIsInZub2RlOiBWbm9kZTxBY2NvdW50TWFpbnRlbmFuY2VTZXR0aW5nc0F0dHJzPiIsIm0iLCJ1cGRhdGVzOiBFbnRpdHlVcGRhdGVEYXRhW10iLCJhdWRpdExvZ1RhYmxlQXR0cnM6IFRhYmxlQXR0cnMiLCJuZXdQcm9wczogQ3VzdG9tZXJTZXJ2ZXJQcm9wZXJ0aWVzIiwiZW50cnk6IEF1ZGl0TG9nRW50cnkiLCJjdXN0b21lcjogQ3VzdG9tZXIiLCJtb2RpZmllZEdyb3VwSW5mbzogU3RyZWFtPEdyb3VwSW5mbz4iLCJncm91cEluZm9Mb2FkaW5nUHJvbWlzZXM6IFByb21pc2U8dW5rbm93bj5bXSIsImdyb3VwSW5mbzogR3JvdXBJbmZvIiwidXBkYXRlczogUmVhZG9ubHlBcnJheTxFbnRpdHlVcGRhdGVEYXRhPiIsIm0iLCJzcGFtUnVsZVRhYmxlQXR0cnM6IFRhYmxlQXR0cnMiLCJyZWplY3RlZFNlbmRlclRhYmxlQXR0cnM6IFRhYmxlQXR0cnMiLCJjdXN0b21Eb21haW5UYWJsZUF0dHJzOiBUYWJsZUF0dHJzIiwiZm46IEFjY291bnRNYWludGVuYW5jZVVwZGF0ZU5vdGlmaWVyIiwiYnV0dG9uczogRHJvcGRvd25DaGlsZEF0dHJzW10iLCJkb21haW5EbnNTdGF0dXM6IERvbWFpbkRuc1N0YXR1cyIsImN1c3RvbWVySW5mbzogYW55IiwiZG9tYWluSW5mbzogRG9tYWluSW5mbyIsImNhdGNoQWxsTWFpbEdyb3VwSWQ6IElkIHwgbnVsbCIsInVwZGF0ZXM6IFJlYWRvbmx5QXJyYXk8RW50aXR5VXBkYXRlRGF0YT4iLCJ1cGRhdGVBdmFpbGFibGU6IFN0cmVhbTxib29sZWFuPiIsInZub2RlOiBWbm9kZTxVcGRhdGVIZWxwTGFiZWxBdHRycz4iLCJzZXREZWZhdWx0TWFpbHRvSGFuZGxlckF0dHJzOiBEcm9wRG93blNlbGVjdG9yQXR0cnM8Ym9vbGVhbj4iLCJzZXRSdW5JbkJhY2tncm91bmRBdHRyczogRHJvcERvd25TZWxlY3RvckF0dHJzPGJvb2xlYW4+Iiwic2V0UnVuT25TdGFydHVwQXR0cnM6IERyb3BEb3duU2VsZWN0b3JBdHRyczxib29sZWFuPiIsImVkaXRTcGVsbGNoZWNrTGFuZ3VhZ2VCdXR0b25BdHRyczogSWNvbkJ1dHRvbkF0dHJzIiwic3BlbGxjaGVja0xhbmd1YWdlQXR0cnM6IFRleHRGaWVsZEF0dHJzIiwic2V0RGVza3RvcEludGVncmF0aW9uQXR0cnM6IERyb3BEb3duU2VsZWN0b3JBdHRyczxib29sZWFuPiIsInNldE1haWxFeHBvcnRNb2RlQXR0cnM6IERyb3BEb3duU2VsZWN0b3JBdHRyczxNYWlsRXhwb3J0TW9kZT4iLCJ1cGRhdGVIZWxwTGFiZWxBdHRyczogVXBkYXRlSGVscExhYmVsQXR0cnMiLCJzZXRBdXRvVXBkYXRlQXR0cnM6IERyb3BEb3duU2VsZWN0b3JBdHRyczxib29sZWFuPiIsImNoYW5nZURlZmF1bHREb3dubG9hZFBhdGhBdHRyczogSWNvbkJ1dHRvbkF0dHJzIiwiZGVmYXVsdERvd25sb2FkUGF0aEF0dHJzOiBUZXh0RmllbGRBdHRycyIsImVuYWJsZTogYm9vbGVhbiIsInNob3VsZEJlRGVmYXVsdE1haWx0b0hhbmRsZXI6IGJvb2xlYW4iLCJzaG91bGRJbnRlZ3JhdGU6IGJvb2xlYW4iLCJzZXR0aW5nOiBEZXNrdG9wQ29uZmlnS2V5IiwidmFsdWU6IGJvb2xlYW4iLCJ2YWx1ZTogc3RyaW5nIHwgbnVsbCIsInY6IERvd25sb2FkTG9jYXRpb25TdHJhdGVneSIsInNhdmVQYXRoOiBzdHJpbmcgfCBudWxsIiwib3V0T2ZPZmZpY2VOb3RpZmljYXRpb246IE91dE9mT2ZmaWNlTm90aWZpY2F0aW9uIHwgbnVsbCIsImVudGl0eUNsaWVudDogRW50aXR5Q2xpZW50IiwidXNlckNvbnRyb2xsZXI6IFVzZXJDb250cm9sbGVyIiwibGFuZ3VhZ2VWaWV3TW9kZWw6IExhbmd1YWdlVmlld01vZGVsIiwic2VydmljZUV4ZWN1dG9yOiBJU2VydmljZUV4ZWN1dG9yIiwic3RhcnREYXRlOiBEYXRlIHwgbnVsbCIsImVuZERhdGU6IERhdGUgfCBudWxsIiwibm90aWZpY2F0aW9uTWVzc2FnZXM6IE91dE9mT2ZmaWNlTm90aWZpY2F0aW9uTWVzc2FnZVtdIiwiZGVmYXVsdE5vdGlmaWNhdGlvbjogT3V0T2ZPZmZpY2VOb3RpZmljYXRpb25NZXNzYWdlIiwib3JnYW5pemF0aW9uTm90aWZpY2F0aW9uOiBPdXRPZk9mZmljZU5vdGlmaWNhdGlvbk1lc3NhZ2UiLCJvdXRPZk9mZmljZU5vdGlmaWNhdGlvbjogT3V0T2ZPZmZpY2VOb3RpZmljYXRpb24gfCBudWxsIiwiZGlhbG9nSGVhZGVyQXR0cnM6IERpYWxvZ0hlYWRlckJhckF0dHJzIiwidm5vZGU6IFZub2RlPEVkaXRPdXRPZk9mZmljZU5vdGlmaWNhdGlvbkRpYWxvZ0F0dHJzPiIsIm1vZGVsOiBFZGl0T3V0T2ZPZmZpY2VOb3RpZmljYXRpb25EaWFsb2dNb2RlbCIsIm9yZ2FuaXphdGlvbkVuYWJsZWQ6IGJvb2xlYW4iLCJkZWZhdWx0TWVzc2FnZUVkaXRvcjogSHRtbEVkaXRvciIsIm9yZ2FuaXphdGlvbk1lc3NhZ2VFZGl0b3I6IEh0bWxFZGl0b3IiLCJyZWNpcGllbnRIZWxwTGFiZWw6IGxhenk8c3RyaW5nPiIsInN0YXJ0T2ZUaGVXZWVrT2Zmc2V0OiBudW1iZXIiLCJzaG93IiwicHJvcHM6IFR1dGFub3RhUHJvcGVydGllcyIsInR5cGU6IEVtYWlsU2lnbmF0dXJlVHlwZSIsImRpYWxvZzogRGlhbG9nIiwicHJvcHMiLCJ0eXBlOiBzdHJpbmciLCJkZWZhdWx0U2lnbmF0dXJlOiBzdHJpbmciLCJjdXJyZW50Q3VzdG9tU2lnbmF0dXJlOiBzdHJpbmciLCJ1c2VyQ29udHJvbGxlcjogVXNlckNvbnRyb2xsZXIiLCJkZXZpY2VDb25maWc6IERldmljZUNvbmZpZyIsImRheXM6IG51bWJlciIsImN1c3RvbWVySW5mbzogQ3VzdG9tZXJJbmZvIiwiZGVmYXVsdFNlbmRlckF0dHJzOiBEcm9wRG93blNlbGVjdG9yQXR0cnM8c3RyaW5nPiIsImNoYW5nZVNpZ25hdHVyZUJ1dHRvbkF0dHJzOiBJY29uQnV0dG9uQXR0cnMiLCJzaWduYXR1cmVBdHRyczogVGV4dEZpZWxkQXR0cnMiLCJlZGl0T3V0T2ZPZmZpY2VOb3RpZmljYXRpb25CdXR0b25BdHRyczogSWNvbkJ1dHRvbkF0dHJzIiwib3V0T2ZPZmZpY2VBdHRyczogVGV4dEZpZWxkQXR0cnMiLCJkZWZhdWx0VW5jb25maWRlbnRpYWxBdHRyczogRHJvcERvd25TZWxlY3RvckF0dHJzPGJvb2xlYW4+Iiwic2VuZFBsYWludGV4dEF0dHJzOiBEcm9wRG93blNlbGVjdG9yQXR0cnM8Ym9vbGVhbj4iLCJlbmFibGVNYWlsSW5kZXhpbmdBdHRyczogRHJvcERvd25TZWxlY3RvckF0dHJzPGJvb2xlYW4+IiwiYmVoYXZpb3JBZnRlck1vdmVFbWFpbEFjdGlvbjogRHJvcERvd25TZWxlY3RvckF0dHJzPExpc3RBdXRvU2VsZWN0QmVoYXZpb3I+IiwiYWRkSW5ib3hSdWxlQnV0dG9uQXR0cnM6IEljb25CdXR0b25BdHRycyIsImluYm94UnVsZXNUYWJsZUF0dHJzOiBUYWJsZUF0dHJzIiwiY29udmVyc2F0aW9uVmlld0Ryb3Bkb3duQXR0cnM6IERyb3BEb3duU2VsZWN0b3JBdHRyczxib29sZWFuPiIsImFyZzogYm9vbGVhbiIsInByb3BzOiBUdXRhbm90YVByb3BlcnRpZXMiLCJtYWlsYm94RGV0YWlsOiBNYWlsYm94RGV0YWlsIiwidGFyZ2V0Rm9sZGVySWQ6IElkVHVwbGUiLCJ1cGRhdGVzOiBSZWFkb25seUFycmF5PEVudGl0eVVwZGF0ZURhdGE+Iiwic2V0dGluZ3M6IE9mZmxpbmVTdG9yYWdlU2V0dGluZ3NNb2RlbCIsInBhcmFtczogQm9va2luZ1BhcmFtcyIsIm9rTGFiZWw6IFRyYW5zbGF0aW9uS2V5IiwidmlldzogKCkgPT4gQ2hpbGRyZW4iLCJkaWFsb2c6IERpYWxvZyIsInJlczogYm9vbGVhbiIsIm1vZGVsOiBQcmljZUNoYW5nZU1vZGVsIiwicHJpY2U6IFByaWNlU2VydmljZVJldHVybiIsImZlYXR1cmVUeXBlOiBCb29raW5nSXRlbUZlYXR1cmVUeXBlIiwicHJpY2VEYXRhOiBQcmljZURhdGEgfCBudWxsIiwiZmVhdHVyZVR5cGU6IE51bWJlclN0cmluZyIsIm1vZGVsOiBHcm91cERldGFpbHNNb2RlbCIsImF0dHJzOiBEcm9wRG93blNlbGVjdG9yQXR0cnM8Ym9vbGVhbj4iLCJkZWFjdGl2YXRlOiBib29sZWFuIiwiZGlhbG9nOiBEaWFsb2ciLCJuZXdTZWxlY3RlZDogSWQiLCJ1cGRhdGVzOiBSZWFkb25seUFycmF5PEVudGl0eVVwZGF0ZURhdGE+IiwiYWRkVXNlckJ1dHRvbkF0dHJzOiBJY29uQnV0dG9uQXR0cnMiLCJsaW5lczogVGFibGVMaW5lQXR0cnNbXSIsInJlbW92ZUJ1dHRvbkF0dHJzOiBJY29uQnV0dG9uQXR0cnMiLCJtZW1iZXJzVGFibGVBdHRyczogVGFibGVBdHRycyIsImdyb3VwVHlwZTogTnVtYmVyU3RyaW5nIHwgbnVsbCIsInVzZXJEZXRhaWxzSW5wdXRDc3Y6IHN0cmluZyIsImF2YWlsYWJsZURvbWFpbnM6IHN0cmluZ1tdIiwiY3N2U3RyaW5nOiBzdHJpbmciLCJ1c2VyRGF0YTogVXNlckltcG9ydERldGFpbHNbXSIsImVycm9yTWVzc2FnZUFycmF5OiBUcmFuc2xhdGlvbktleVtdIiwiZXJyb3JNZXNzYWdlOiBzdHJpbmcgfCBudWxsIiwidXNlckRldGFpbHNBcnJheTogVXNlckltcG9ydERldGFpbHNbXSIsIm5vdEF2YWlsYWJsZVVzZXJzOiBVc2VySW1wb3J0RGV0YWlsc1tdIiwidXNlcjogVXNlckltcG9ydERldGFpbHMiLCJpbmRleDogbnVtYmVyIiwib3ZlcmFsbE51bWJlck9mVXNlcnM6IG51bWJlciIsIm9wZXJhdGlvbklkOiBPcGVyYXRpb25JZCIsInVzZXJHcm91cEluZm86IEdyb3VwSW5mbyIsImlzQWRtaW46IGJvb2xlYW4iLCJjaGFuZ2VQYXNzd29yZEJ1dHRvbkF0dHJzOiBJY29uQnV0dG9uQXR0cnMiLCJuYW1lOiBzdHJpbmciLCJ2YWx1ZTogYm9vbGVhbiIsImFjdGl2YXRlOiBib29sZWFuIiwic2VsZWN0aW9uOiBHcm91cEluZm8iLCJkaWFsb2c6IERpYWxvZyIsInVzZXI6IFVzZXIiLCJjdXN0b21lcjogQ3VzdG9tZXIiLCJ1cGRhdGVzOiBSZWFkb25seUFycmF5PEVudGl0eVVwZGF0ZURhdGE+IiwiY3VzdG9tRG9tYWluczogc3RyaW5nW10iLCJFZGl0b3IiLCJzaG93IiwiZW1haWxBZGRyZXNzOiBzdHJpbmcgfCBudWxsIiwiZXJyb3JNc2c6IE1heWJlVHJhbnNsYXRpb24gfCBudWxsIiwiZGlhbG9nOiBEaWFsb2ciLCJ1cGRhdGVEZXRhaWxzVmlld2VyOiAodmlld2VyOiBVc2VyVmlld2VyIHwgbnVsbCkgPT4gdW5rbm93biIsImZvY3VzRGV0YWlsc1ZpZXdlcjogKCkgPT4gdW5rbm93biIsImNhbkltcG9ydFVzZXJzOiAoKSA9PiBib29sZWFuIiwib25JbXBvcnRVc2VyczogKCkgPT4gdW5rbm93biIsIm9uRXhwb3J0VXNlcnM6ICgpID0+IHVua25vd24iLCJpdGVtOiBHcm91cEluZm8iLCJ1c2VyR3JvdXBJbmZvOiBHcm91cEluZm8iLCJ1cGRhdGVzOiBSZWFkb25seUFycmF5PEVudGl0eVVwZGF0ZURhdGE+IiwiX2xpc3RJZDogSWQiLCJlbGVtZW50SWQ6IElkIiwiZGV0YWlsc1ZpZXdlcjogVXNlclZpZXdlciB8IG51bGwiLCJnaTogR3JvdXBJbmZvIiwicXVlcnk6IHN0cmluZyIsImlzQWRtaW46IChncm91cEluZm86IEdyb3VwSW5mbykgPT4gYm9vbGVhbiIsImdyb3VwSW5mbzogR3JvdXBJbmZvIiwic2VsZWN0ZWQ6IGJvb2xlYW4iLCJ2bm9kZTogVm5vZGU8QWRkR3JvdXBEaWFsb2dBdHRycz4iLCJhdmFpbGFibGVEb21haW5zOiBBcnJheTxFbWFpbERvbWFpbkRhdGE+IiwiZ3JvdXBNYW5hZ2VtZW50RmFjYWRlOiBHcm91cE1hbmFnZW1lbnRGYWNhZGUiLCJlbWFpbDogc3RyaW5nIiwidmFsaWRhdGlvblJlc3VsdDogVmFsaWRhdGlvblJlc3VsdCIsInNob3ciLCJkaWFsb2c6IERpYWxvZyIsIm5hbWU6IHN0cmluZyIsImdyb3VwSW5mbzogR3JvdXBJbmZvIiwiZW50aXR5Q2xpZW50OiBFbnRpdHlDbGllbnQiLCJ1cGRhdGVWaWV3Q2FsbGJhY2s6ICgpID0+IHZvaWQiLCJ1c2VyR3JvdXBJbmZvOiBHcm91cEluZm8iLCJkZWFjdGl2YXRlOiBib29sZWFuIiwibmV3TmFtZTogc3RyaW5nIiwibmV3R3JvdXBJbmZvOiBHcm91cEluZm8iLCJib29raW5nVGV4dDogVHJhbnNsYXRpb25LZXkiLCJncm91cDogSWQiLCJ1cGRhdGVzOiBSZWFkb25seUFycmF5PEVudGl0eVVwZGF0ZURhdGE+IiwidXBkYXRlRGV0YWlsc1ZpZXdlcjogKHZpZXdlcjogR3JvdXBEZXRhaWxzVmlldyB8IG51bGwpID0+IHVua25vd24iLCJmb2N1c0RldGFpbHNWaWV3ZXI6ICgpID0+IHVua25vd24iLCJpdGVtOiBHcm91cEluZm8iLCJ1cGRhdGVzOiBSZWFkb25seUFycmF5PEVudGl0eVVwZGF0ZURhdGE+IiwiX2xpc3RJZDogSWQiLCJlbGVtZW50SWQ6IElkIiwiaXRlbTogR3JvdXBJbmZvIHwgbnVsbCIsIm0iLCJnaTogR3JvdXBJbmZvIiwicXVlcnk6IHN0cmluZyIsImdyb3VwSW5mbzogR3JvdXBJbmZvIiwic2VsZWN0ZWQ6IGJvb2xlYW4iLCJkb21haW46IHN0cmluZyIsImRpYWxvZzogRGlhbG9nIiwic2hvdyIsImN1c3RvbWVySW5mbzogQ3VzdG9tZXJJbmZvIiwidm5vZGU6IFZub2RlPFdoaXRlbGFiZWxCcmFuZGluZ0RvbWFpblNldHRpbmdzQXR0cnM+Iiwid2hpdGVsYWJlbERvbWFpbjogc3RyaW5nIiwiY3VzdG9tZXJJbmZvOiBDdXN0b21lckluZm8iLCJjZXJ0aWZpY2F0ZUluZm86IENlcnRpZmljYXRlSW5mbyB8IG51bGwiLCJpc1doaXRlbGFiZWxGZWF0dXJlRW5hYmxlZDogYm9vbGVhbiIsImNvbXBvbmVudHM6IEFycmF5PHN0cmluZz4iLCJjZXJ0aWZpY2F0ZUluZm86IENlcnRpZmljYXRlSW5mbyIsInZub2RlOiBWbm9kZTxTaW1wbGVDdXN0b21Db2xvckVkaXRvckF0dHJzPiIsInNpbXBsZUNvbG9yUGlja2VyQXR0cnM6IFRleHRGaWVsZEF0dHJzIiwidjogQmFzZVRoZW1lSWQiLCJjb2xvcnM6IFJlYWRvbmx5QXJyYXk8Q3VzdG9tQ29sb3I+IiwiZ3JvdXBlZENvbG9yczogQ29sb3JDYXRlZ29yaWVzIiwibW9kZWw6IEN1c3RvbUNvbG9yc0VkaXRvclZpZXdNb2RlbCIsIm9uSW5wdXQ6IChhcmcwOiBFdmVudCkgPT4gdW5rbm93biIsInZhbHVlOiBzdHJpbmciLCJvbmNyZWF0ZT86ICh2bm9kZTogVm5vZGVET008dm9pZD4pID0+IHZvaWQiLCJkZWZhdWx0Q29sb3I6IHN0cmluZyIsInZhbGlkOiBib29sZWFuIiwic3RyaW5nOiBzdHJpbmciLCJzaG93IiwibW9kZWw6IEN1c3RvbUNvbG9yc0VkaXRvclZpZXdNb2RlbCIsImFjdGlvbkJhckF0dHJzOiBEaWFsb2dIZWFkZXJCYXJBdHRycyIsImN1cnJlbnRUaGVtZTogVGhlbWUiLCJ0aGVtZUN1c3RvbWl6YXRpb25zOiBUaGVtZUN1c3RvbWl6YXRpb25zIiwid2hpdGVsYWJlbENvbmZpZzogV2hpdGVsYWJlbENvbmZpZyIsIndoaXRlbGFiZWxEb21haW5JbmZvOiBEb21haW5JbmZvIiwidGhlbWVDb250cm9sbGVyOiBUaGVtZUNvbnRyb2xsZXIiLCJlbnRpdHlDbGllbnQ6IEVudGl0eUNsaWVudCIsImxvZ2luQ29udHJvbGxlcjogTG9naW5Db250cm9sbGVyIiwiY29sb3JOYW1lOiBUaGVtZUtleSIsImFjY2VudENvbG9yOiBzdHJpbmciLCJiYXNlVGhlbWVJZDogQmFzZVRoZW1lSWQiLCJuYW1lT2ZLZXk6IEN1c3RvbWl6YXRpb25LZXkiLCJjb2xvclZhbHVlOiBzdHJpbmciLCJuYW1lOiBDdXN0b21pemF0aW9uS2V5Iiwidm5vZGU6IFZub2RlPFdoaXRlbGFiZWxUaGVtZVNldHRpbmdzQXR0cnM+IiwiZGF0YTogV2hpdGVsYWJlbERhdGEgfCBudWxsIiwid2hpdGVsYWJlbERhdGE6IFdoaXRlbGFiZWxEYXRhIiwiY3VzdG9tTG9nb1RleHRmaWVsZEF0dHJzOiBUZXh0RmllbGRBdHRycyIsImltYWdlRGF0YTogc3RyaW5nIiwidGhlbWU6IFRoZW1lQ3VzdG9taXphdGlvbnMgfCBudWxsIiwidGhlbWUiLCJjdXN0b21UaGVtZTogVGhlbWVDdXN0b21pemF0aW9ucyIsIndoaXRlbGFiZWxDb25maWc6IFdoaXRlbGFiZWxDb25maWciLCJ3aGl0ZWxhYmVsRG9tYWluSW5mbzogRG9tYWluSW5mbyIsInZub2RlOiBWbm9kZTxXaGl0ZWxhYmVsSW1wcmludEFuZFByaXZhY3lTZXR0aW5nc0F0dHJzPiIsInByaXZhY3lTdGF0ZW1lbnRVcmw6IHN0cmluZyIsIm9uUHJpdmFjeVN0YXRlbWVudFVybENoYW5nZWQ6ICgoYXJnMDogc3RyaW5nKSA9PiB1bmtub3duKSB8IG51bGwiLCJvblByaXZhY3lTdGF0ZW1lbnRVcmxDaGFuZ2VkOiAoYXJnMDogc3RyaW5nKSA9PiB1bmtub3duIiwiaW1wcmludFVybDogc3RyaW5nIiwib25JbXByaW50VXJsQ2hhbmdlZDogKChpbXByaW50VXJsOiBzdHJpbmcpID0+IHVua25vd24pIHwgbnVsbCIsIm9uSW1wcmludFVybENoYW5nZWQ6IChpbXByaW50VXJsOiBzdHJpbmcpID0+IHVua25vd24iLCJ2bm9kZTogVm5vZGU8V2hpdGVsYWJlbFJlZ2lzdHJhdGlvblNldHRpbmdzQXR0cnM+IiwiY3VycmVudFJlZ2lzdHJhdGlvbkRvbWFpbjogc3RyaW5nIHwgbnVsbCIsInBvc3NpYmxlUmVnaXN0cmF0aW9uRG9tYWluczogU2VsZWN0b3JJdGVtTGlzdDxzdHJpbmcgfCBudWxsPiIsIm9uUmVnaXN0cmF0aW9uRG9tYWluU2VsZWN0ZWQ6IChhcmcwOiBzdHJpbmcgfCBudWxsKSA9PiB1bmtub3duIiwic2VsZWN0ZWRWYWx1ZTogc3RyaW5nIHwgbnVsbCIsIndoaXRlbGFiZWxDb2RlOiBzdHJpbmciLCJvbldoaXRlbGFiZWxDb2RlQ2hhbmdlZDogKChhcmcwOiBzdHJpbmcpID0+IHVua25vd24pIHwgbnVsbCIsIm9uV2hpdGVsYWJlbENvZGVDaGFuZ2VkOiAoYXJnMDogc3RyaW5nKSA9PiB1bmtub3duIiwidm5vZGU6IFZub2RlPFdoaXRlbGFiZWxDdXN0b21NZXRhVGFnc1NldHRpbmdzQXR0cnM+IiwibWV0YVRhZ3M6IHN0cmluZyIsIm9uTWV0YVRhZ3NDaGFuZ2VkOiAodGFnczogc3RyaW5nKSA9PiB1bmtub3duIiwidmFsdWU6IHN0cmluZyIsImlzV2hpdGVsYWJlbEFjdGl2ZSIsInZub2RlOiBWbm9kZTxXaGl0ZWxhYmVsTm90aWZpY2F0aW9uRW1haWxTZXR0aW5nc0F0dHJzPiIsIm5vdGlmaWNhdGlvbk1haWxUZW1wbGF0ZXM6IEFycmF5PE5vdGlmaWNhdGlvbk1haWxUZW1wbGF0ZT4iLCJvbkFkZFRlbXBsYXRlOiAoKSA9PiB1bmtub3duIiwib25FZGl0VGVtcGxhdGU6IChhcmcwOiBOb3RpZmljYXRpb25NYWlsVGVtcGxhdGUpID0+IHVua25vd24iLCJvblJlbW92ZVRlbXBsYXRlOiAoYXJnMDogTm90aWZpY2F0aW9uTWFpbFRlbXBsYXRlKSA9PiB1bmtub3duIiwibGFuZ3VhZ2VDb2RlOiBMYW5ndWFnZUNvZGUiLCJ2bm9kZTogVm5vZGU8V2hpdGVsYWJlbEdlcm1hbkxhbmd1YWdlRmlsZVNldHRpbmdzQXR0cnM+IiwiY3VzdG9tR2VybWFuTGFuZ3VhZ2VGaWxlOiBHZXJtYW5MYW5ndWFnZUNvZGUgfCBudWxsIiwib25HZXJtYW5MYW5ndWFnZUZpbGVDaGFuZ2VkOiAoYXJnMDogR2VybWFuTGFuZ3VhZ2VDb2RlKSA9PiB1bmtub3duIiwiaXRlbXM6IFNlbGVjdG9ySXRlbUxpc3Q8R2VybWFuTGFuZ3VhZ2VDb2RlPiIsInNlbGVjdGVkVmFsdWU6IEdlcm1hbkxhbmd1YWdlQ29kZSIsImRlZmF1bHRHZXJtYW5MYW5ndWFnZUZpbGVEcm9wRG93bkF0dHJzOiBEcm9wRG93blNlbGVjdG9yQXR0cnM8R2VybWFuTGFuZ3VhZ2VDb2RlPiIsImVudGl0eUNsaWVudDogRW50aXR5Q2xpZW50IiwibG9naW5zOiBMb2dpbkNvbnRyb2xsZXIiLCJvblByaXZhY3lTdGF0ZW1lbnRVcmxDaGFuZ2VkOiAoKF86IHN0cmluZykgPT4gdm9pZCkgfCBudWxsIiwicHJpdmFjeVN0YXRlbWVudFVybCIsIm9uSW1wcmludFVybENoYW5nZWQ6ICgoXzogc3RyaW5nKSA9PiB2b2lkKSB8IG51bGwiLCJpbXByaW50VXJsIiwicG9zc2libGVSZWdpc3RyYXRpb25Eb21haW5zOiBTZWxlY3Rvckl0ZW1MaXN0PHN0cmluZyB8IG51bGw+Iiwib25SZWdpc3RyYXRpb25Eb21haW5TZWxlY3RlZDogV2hpdGVsYWJlbFJlZ2lzdHJhdGlvblNldHRpbmdzQXR0cnNbXCJvblJlZ2lzdHJhdGlvbkRvbWFpblNlbGVjdGVkXCJdIiwiY3VycmVudFJlZ2lzdHJhdGlvbkRvbWFpbjogc3RyaW5nIHwgbnVsbCIsIm9uV2hpdGVsYWJlbENvZGVDaGFuZ2VkOiAoXzogc3RyaW5nKSA9PiB2b2lkIiwiY3VzdG9tR2VybWFuTGFuZ3VhZ2VGaWxlOiBHZXJtYW5MYW5ndWFnZUNvZGUgfCBudWxsIiwibGFuZ3VhZ2VGaWxlOiBHZXJtYW5MYW5ndWFnZUNvZGUiLCJvbk1ldGFUYWdzQ2hhbmdlZDogV2hpdGVsYWJlbEN1c3RvbU1ldGFUYWdzU2V0dGluZ3NBdHRyc1tcIm9uTWV0YVRhZ3NDaGFuZ2VkXCJdIHwgbnVsbCIsIm1ldGFUYWdzIiwiZG9tYWluSW5mbzogRG9tYWluSW5mbyB8IG51bGwiLCJtIiwidGVtcGxhdGU6IE5vdGlmaWNhdGlvbk1haWxUZW1wbGF0ZSIsInVwZGF0ZXM6IFJlYWRvbmx5QXJyYXk8RW50aXR5VXBkYXRlRGF0YT4iLCJhY3R1YWxMYW5ndWFnZUl0ZW1zOiBTZWxlY3Rvckl0ZW1MaXN0PExhbmd1YWdlQ29kZSB8IG51bGw+IiwibGFuZ3VhZ2VJdGVtczogU2VsZWN0b3JJdGVtTGlzdDxMYW5ndWFnZUNvZGUgfCBudWxsPiIsImxhbmd1YWdlRHJvcERvd25BdHRyczogRHJvcERvd25TZWxlY3RvckF0dHJzPExhbmd1YWdlQ29kZSB8IG51bGw+IiwiaG91ckZvcm1hdERyb3BEb3duQXR0cnM6IERyb3BEb3duU2VsZWN0b3JBdHRyczxUaW1lRm9ybWF0PiIsIndlZWtTdGFydERyb3BEb3duQXR0cnM6IERyb3BEb3duU2VsZWN0b3JBdHRyczxXZWVrU3RhcnQ+IiwidGhlbWVEcm9wRG93bkF0dHJzOiBEcm9wRG93blNlbGVjdG9yQXR0cnM8VGhlbWVQcmVmZXJlbmNlPiIsInVwZGF0ZXM6IFJlYWRvbmx5QXJyYXk8RW50aXR5VXBkYXRlRGF0YT4iLCJlbnRpdHlDbGllbnQ6IEVudGl0eUNsaWVudCIsImxvZ2luczogTG9naW5Db250cm9sbGVyIiwidGVtcGxhdGVHcm91cFJvb3Q6IFRlbXBsYXRlR3JvdXBSb290IiwidGVtcGxhdGVHcm91cDogR3JvdXAiLCJ1cGRhdGVEZXRhaWxzVmlld2VyOiAodmlld2VyOiBLbm93bGVkZ2VCYXNlU2V0dGluZ3NEZXRhaWxzVmlld2VyIHwgbnVsbCkgPT4gdW5rbm93biIsImZvY3VzRGV0YWlsc1ZpZXdlcjogKCkgPT4gdW5rbm93biIsImE6IEtub3dsZWRnZUJhc2VFbnRyeSIsImI6IEtub3dsZWRnZUJhc2VFbnRyeSIsIl9saXN0SWQ6IElkIiwiZWxlbWVudElkOiBJZCIsIml0ZW06IEtub3dsZWRnZUJhc2VFbnRyeSIsInVwZGF0ZXM6IFJlYWRvbmx5QXJyYXk8RW50aXR5VXBkYXRlRGF0YT4iLCJpdGVtOiBLbm93bGVkZ2VCYXNlRW50cnkgfCBudWxsIiwicXVlcnk6IHN0cmluZyIsImVudHJ5OiBLbm93bGVkZ2VCYXNlRW50cnkiLCJzZWxlY3RlZDogYm9vbGVhbiIsInJlYWRvbmx5OiBib29sZWFuIiwidm5vZGU6IFZub2RlPER1bW15VGVtcGxhdGVMaXN0Vmlld0F0dHJzPiIsInZub2RlOiBWbm9kZTxTZXR0aW5nc0ZvbGRlclJvd0F0dHJzPiIsImVudGl0eUNsaWVudDogRW50aXR5Q2xpZW50IiwibG9naW5zOiBMb2dpbkNvbnRyb2xsZXIiLCJmaWxlQ29udHJvbGxlcjogRmlsZUNvbnRyb2xsZXIiLCJjb3VudGVyRmFjYWRlOiBDb3VudGVyRmFjYWRlIiwiZm9ybWF0RGF0ZSIsImRhdGU6IERhdGUiLCJ1cGRhdGVzOiBSZWFkb25seUFycmF5PEVudGl0eVVwZGF0ZURhdGE+Iiwidm5vZGU6IFZub2RlPEFib3V0RGlhbG9nQXR0cnM+IiwiY2xpZW50Iiwidm5vZGU6IFZub2RlPEFjdGlvbkJhckF0dHJzPiIsInRlbXBsYXRlOiBFbWFpbFRlbXBsYXRlIiwiZW50aXR5Q2xpZW50OiBFbnRpdHlDbGllbnQiLCJpc1JlYWRPbmx5OiBsYXp5PGJvb2xlYW4+IiwidXBkYXRlczogUmVhZG9ubHlBcnJheTxFbnRpdHlVcGRhdGVEYXRhPiIsImdyb3VwSW5zdGFuY2U6IFRlbXBsYXRlR3JvdXBJbnN0YW5jZSIsImVudGl0eUNsaWVudDogRW50aXR5Q2xpZW50IiwibG9naW5zOiBMb2dpbkNvbnRyb2xsZXIiLCJ1cGRhdGVEZXRhaWxzVmlld2VyOiAodmlld2VyOiBUZW1wbGF0ZURldGFpbHNWaWV3ZXIgfCBudWxsKSA9PiB1bmtub3duIiwiZm9jdXNEZXRhaWxzVmlld2VyOiAoKSA9PiB1bmtub3duIiwiYTogRW1haWxUZW1wbGF0ZSIsImI6IEVtYWlsVGVtcGxhdGUiLCJfbGlzdElkOiBJZCIsImVsZW1lbnRJZDogSWQiLCJpdGVtOiBFbWFpbFRlbXBsYXRlIiwidXBkYXRlczogUmVhZG9ubHlBcnJheTxFbnRpdHlVcGRhdGVEYXRhPiIsIml0ZW06IEVtYWlsVGVtcGxhdGUgfCBudWxsIiwicXVlcnk6IHN0cmluZyIsInRlbXBsYXRlOiBFbWFpbFRlbXBsYXRlIiwic2VsZWN0ZWQ6IGJvb2xlYW4iLCJjb250YWN0U3luY0VuYWJsZWQ6IGJvb2xlYW4iLCJwcm9wczogVHV0YW5vdGFQcm9wZXJ0aWVzIiwidXBkYXRlczogUmVhZG9ubHlBcnJheTxFbnRpdHlVcGRhdGVEYXRhPiIsInZub2RlOiBWbm9kZTxOb3RpZmljYXRpb25UYXJnZXRzTGlzdEF0dHJzPiIsInZub2RlOiBWbm9kZTxJZGVudGlmaWVyUm93QXR0cnM+IiwicHJvbWlzZXM6IFByb21pc2U8YW55PltdIiwiaWRlbnRpZmllcjogUHVzaElkZW50aWZpZXIiLCJtIiwidmFsdWU6IEV4dGVuZGVkTm90aWZpY2F0aW9uTW9kZSIsImN1cnJlbnQ6IGJvb2xlYW4iLCJ0eXBlOiBOdW1iZXJTdHJpbmciLCJkaXNwbGF5TmFtZTogc3RyaW5nIiwidXBkYXRlczogcmVhZG9ubHkgRW50aXR5VXBkYXRlRGF0YVtdIiwiZ2V0SXNTaG93aW5nS3BpczogKCkgPT4gYm9vbGVhbiIsInRvZ2dsZUtwaUNvbHVtbjogKCkgPT4gdW5rbm93biIsIm0iLCJzaGFyZVVybDogc3RyaW5nIiwidXBkYXRlczogUmVhZG9ubHlBcnJheTxFbnRpdHlVcGRhdGVEYXRhPiIsInVwZGF0ZXM6IHJlYWRvbmx5IEVudGl0eVVwZGF0ZURhdGFbXSIsIm1haWxJbXBvcnRlcjogbGF6eTxNYWlsSW1wb3J0ZXI+IiwiZG9tOiBIVE1MRWxlbWVudCIsInRhcmdldEZvbGRlcnM6IFNlbGVjdG9ySXRlbUxpc3Q8TWFpbEZvbGRlciB8IG51bGw+IiwiZm9sZGVySW5mbzogSW5kZW50ZWRGb2xkZXIiLCJuZXdGb2xkZXI6IE1haWxGb2xkZXIgfCBudWxsIiwicmVzdW1lTWFpbEltcG9ydEljb25CdXR0b25BdHRyczogSWNvbkJ1dHRvbkF0dHJzIiwicGF1c2VNYWlsSW1wb3J0SWNvbkJ1dHRvbkF0dHJzOiBJY29uQnV0dG9uQXR0cnMiLCJjYW5jZWxNYWlsSW1wb3J0SWNvbkJ1dHRvbkF0dHJzOiBJY29uQnV0dG9uQXR0cnMiLCJ1cGRhdGVzOiBSZWFkb25seUFycmF5PEVudGl0eVVwZGF0ZURhdGE+IiwidWlTdGF0dXM6IFVpSW1wb3J0U3RhdHVzIiwiaW1wb3J0U3RhdHVzOiBJbXBvcnRTdGF0dXMiLCJ1cGRhdGVzOiBSZWFkb25seUFycmF5PEVudGl0eVVwZGF0ZURhdGE+Iiwidm5vZGU6IFZub2RlPE1haWxFeHBvcnRTZXR0aW5nc0F0dHJzPiIsIm0iLCJjb250cm9sbGVyOiBNYWlsRXhwb3J0Q29udHJvbGxlciIsInZub2RlOiBWbm9kZTxTZXR0aW5nc1ZpZXdBdHRycz4iLCJ2aWV3ZXI6IFVwZGF0YWJsZVNldHRpbmdzRGV0YWlsc1ZpZXdlciB8IG51bGwiLCJ2bm9kZTogVm5vZGVET008U2V0dGluZ3NWaWV3QXR0cnM+IiwidXBkYXRlczogRW50aXR5VXBkYXRlRGF0YVtdIiwiZXZlbnRPd25lckdyb3VwSWQ6IElkIiwiZm9sZGVyOiBTZXR0aW5nc0ZvbGRlcjx1bmtub3duPiIsImZvbGRlcjogU2V0dGluZ3NGb2xkZXI8VGVtcGxhdGVHcm91cEluc3RhbmNlPiIsInRlbXBsYXRlSW5mbzogVGVtcGxhdGVHcm91cEluc3RhbmNlIiwiaW52aXRhdGlvbjogUmVjZWl2ZWRHcm91cEludml0YXRpb24iLCJmb2xkZXJzOiBTZXR0aW5nc0ZvbGRlcjx1bmtub3duPltdIiwiYXJnczogUmVjb3JkPHN0cmluZywgYW55PiIsInJlcXVlc3RlZFBhdGg6IHN0cmluZyIsImZvbGRlciIsInVybDogc3RyaW5nIiwidXNlcjogVXNlciIsInVwZGF0ZXM6IFJlYWRvbmx5QXJyYXk8RW50aXR5VXBkYXRlRGF0YT4iLCJkaWFsb2c6IERpYWxvZyIsImluc3RhbmNlOiBUZW1wbGF0ZUdyb3VwSW5zdGFuY2UiXSwic291cmNlcyI6WyIuLi9zcmMvY29tbW9uL3NldHRpbmdzL1NldHRpbmdzRm9sZGVyLnRzIiwiLi4vc3JjL2NvbW1vbi9zZXR0aW5ncy9sb2dpbi9zZWNvbmRmYWN0b3IvU2Vjb25kRmFjdG9yRWRpdE1vZGVsLnRzIiwiLi4vc3JjL2NvbW1vbi9zZXR0aW5ncy9sb2dpbi9zZWNvbmRmYWN0b3IvU2Vjb25kRmFjdG9yRWRpdERpYWxvZy50cyIsIi4uL3NyYy9jb21tb24vc2V0dGluZ3MvbG9naW4vc2Vjb25kZmFjdG9yL1NlY29uZEZhY3RvcnNFZGl0Rm9ybS50cyIsIi4uL3NyYy9jb21tb24vc2V0dGluZ3MvbG9naW4vTG9naW5TZXR0aW5nc1ZpZXdlci50cyIsIi4uL3NyYy9tYWlsLWFwcC9zZXR0aW5ncy9Mb2FkaW5nVXRpbHMudHMiLCIuLi9zcmMvbWFpbC1hcHAvc2V0dGluZ3MvRG9tYWluRG5zU3RhdHVzLnRzIiwiLi4vc3JjL21haWwtYXBwL3NldHRpbmdzL2VtYWlsZG9tYWluL0Ruc1JlY29yZFRhYmxlLnRzIiwiLi4vc3JjL21haWwtYXBwL3NldHRpbmdzL2VtYWlsZG9tYWluL1ZlcmlmeURuc1JlY29yZHNQYWdlLnRzIiwiLi4vc3JjL21haWwtYXBwL3NldHRpbmdzL0NoZWNrRG9tYWluRG5zU3RhdHVzRGlhbG9nLnRzIiwiLi4vc3JjL21haWwtYXBwL3NldHRpbmdzL1JlamVjdGVkU2VuZGVyc0luZm9EaWFsb2cudHMiLCIuLi9zcmMvY29tbW9uL3NldHRpbmdzL21haWxhZGRyZXNzL0FkZEFsaWFzRGlhbG9nLnRzIiwiLi4vc3JjL2NvbW1vbi9zZXR0aW5ncy9tYWlsYWRkcmVzcy9NYWlsQWRkcmVzc1RhYmxlLnRzIiwiLi4vc3JjL21haWwtYXBwL3NldHRpbmdzL2VtYWlsZG9tYWluL0FkZEVtYWlsQWRkcmVzc2VzUGFnZS50cyIsIi4uL3NyYy9tYWlsLWFwcC9zZXR0aW5ncy9lbWFpbGRvbWFpbi9WZXJpZnlPd25lcnNoaXBQYWdlLnRzIiwiLi4vc3JjL21haWwtYXBwL3NldHRpbmdzL2VtYWlsZG9tYWluL0VudGVyRG9tYWluUGFnZS50cyIsIi4uL3NyYy9tYWlsLWFwcC9zZXR0aW5ncy9lbWFpbGRvbWFpbi9BZGREb21haW5XaXphcmQudHMiLCIuLi9zcmMvY29tbW9uL3NldHRpbmdzL0V4cGFuZGFibGVUYWJsZS50cyIsIi4uL3NyYy9jb21tb24vc3Vic2NyaXB0aW9uL0RlbGV0ZUFjY291bnREaWFsb2cudHMiLCIuLi9zcmMvY29tbW9uL3NldHRpbmdzL0FjY291bnRNYWludGVuYW5jZVNldHRpbmdzLnRzIiwiLi4vc3JjL21haWwtYXBwL3NldHRpbmdzL0dsb2JhbFNldHRpbmdzVmlld2VyLnRzIiwiLi4vc3JjL21haWwtYXBwL3NldHRpbmdzL0Rlc2t0b3BVcGRhdGVIZWxwTGFiZWwudHMiLCIuLi9zcmMvbWFpbC1hcHAvc2V0dGluZ3MvRGVza3RvcFNldHRpbmdzVmlld2VyLnRzIiwiLi4vc3JjL21haWwtYXBwL3NldHRpbmdzL0VkaXRPdXRPZk9mZmljZU5vdGlmaWNhdGlvbkRpYWxvZ01vZGVsLnRzIiwiLi4vc3JjL21haWwtYXBwL3NldHRpbmdzL0VkaXRPdXRPZk9mZmljZU5vdGlmaWNhdGlvbkRpYWxvZy50cyIsIi4uL3NyYy9tYWlsLWFwcC9zZXR0aW5ncy9FZGl0U2lnbmF0dXJlRGlhbG9nLnRzIiwiLi4vc3JjL21haWwtYXBwL3NldHRpbmdzL09mZmxpbmVTdG9yYWdlU2V0dGluZ3MudHMiLCIuLi9zcmMvbWFpbC1hcHAvc2V0dGluZ3MvTWFpbFNldHRpbmdzVmlld2VyLnRzIiwiLi4vc3JjL2NvbW1vbi9zdWJzY3JpcHRpb24vQnV5RGlhbG9nLnRzIiwiLi4vc3JjL2NvbW1vbi9zZXR0aW5ncy9ncm91cHMvR3JvdXBEZXRhaWxzVmlldy50cyIsIi4uL3NyYy9jb21tb24vc2V0dGluZ3MvSW1wb3J0VXNlcnNWaWV3ZXIudHMiLCIuLi9zcmMvY29tbW9uL3NldHRpbmdzL1VzZXJWaWV3ZXIudHMiLCIuLi9zcmMvY29tbW9uL3NldHRpbmdzL0FkZFVzZXJEaWFsb2cudHMiLCIuLi9zcmMvY29tbW9uL3NldHRpbmdzL1VzZXJMaXN0Vmlldy50cyIsIi4uL3NyYy9tYWlsLWFwcC9zZXR0aW5ncy9ncm91cHMvQWRkR3JvdXBEaWFsb2cudHMiLCIuLi9zcmMvbWFpbC1hcHAvc2V0dGluZ3MvZ3JvdXBzL0dyb3VwRGV0YWlsc01vZGVsLnRzIiwiLi4vc3JjL21haWwtYXBwL3NldHRpbmdzL2dyb3Vwcy9Hcm91cExpc3RWaWV3LnRzIiwiLi4vc3JjL2NvbW1vbi9zZXR0aW5ncy9TZXREb21haW5DZXJ0aWZpY2F0ZURpYWxvZy50cyIsIi4uL3NyYy9jb21tb24vc2V0dGluZ3Mvd2hpdGVsYWJlbC9XaGl0ZWxhYmVsQnJhbmRpbmdEb21haW5TZXR0aW5ncy50cyIsIi4uL3NyYy9jb21tb24vc2V0dGluZ3Mvd2hpdGVsYWJlbC9DdXN0b21Db2xvckVkaXRvclByZXZpZXcudHMiLCIuLi9zcmMvY29tbW9uL3NldHRpbmdzL3doaXRlbGFiZWwvQ3VzdG9tQ29sb3JFZGl0b3IudHMiLCIuLi9zcmMvY29tbW9uL3NldHRpbmdzL3doaXRlbGFiZWwvRWRpdEN1c3RvbUNvbG9yc0RpYWxvZy50cyIsIi4uL3NyYy9jb21tb24vc2V0dGluZ3Mvd2hpdGVsYWJlbC9DdXN0b21Db2xvcnNFZGl0b3JWaWV3TW9kZWwudHMiLCIuLi9zcmMvY29tbW9uL3NldHRpbmdzL3doaXRlbGFiZWwvV2hpdGVsYWJlbFRoZW1lU2V0dGluZ3MudHMiLCIuLi9zcmMvY29tbW9uL3NldHRpbmdzL3doaXRlbGFiZWwvV2hpdGVsYWJlbEltcHJpbnRBbmRQcml2YWN5U2V0dGluZ3MudHMiLCIuLi9zcmMvY29tbW9uL3NldHRpbmdzL3doaXRlbGFiZWwvV2hpdGVsYWJlbFJlZ2lzdHJhdGlvblNldHRpbmdzLnRzIiwiLi4vc3JjL2NvbW1vbi9zZXR0aW5ncy93aGl0ZWxhYmVsL1doaXRlbGFiZWxDdXN0b21NZXRhVGFnc1NldHRpbmdzLnRzIiwiLi4vc3JjL2NvbW1vbi9zZXR0aW5ncy93aGl0ZWxhYmVsL1doaXRlbGFiZWxTdGF0dXNTZXR0aW5ncy50cyIsIi4uL3NyYy9jb21tb24vc2V0dGluZ3Mvd2hpdGVsYWJlbC9XaGl0ZWxhYmVsTm90aWZpY2F0aW9uRW1haWxTZXR0aW5ncy50cyIsIi4uL3NyYy9jb21tb24vc2V0dGluZ3Mvd2hpdGVsYWJlbC9XaGl0ZWxhYmVsR2VybWFuTGFuZ3VhZ2VGaWxlU2V0dGluZ3MudHMiLCIuLi9zcmMvY29tbW9uL3NldHRpbmdzL3doaXRlbGFiZWwvV2hpdGVsYWJlbFNldHRpbmdzVmlld2VyLnRzIiwiLi4vc3JjL2NvbW1vbi9zZXR0aW5ncy9BcHBlYXJhbmNlU2V0dGluZ3NWaWV3ZXIudHMiLCIuLi9zcmMvbWFpbC1hcHAvc2V0dGluZ3MvS25vd2xlZGdlQmFzZUxpc3RWaWV3LnRzIiwiLi4vc3JjL21haWwtYXBwL3NldHRpbmdzL0R1bW15VGVtcGxhdGVMaXN0Vmlldy50cyIsIi4uL3NyYy9jb21tb24vc2V0dGluZ3MvU2V0dGluZ3NGb2xkZXJSb3cudHMiLCIuLi9zcmMvY29tbW9uL3NldHRpbmdzL1VzZXJEYXRhRXhwb3J0ZXIudHMiLCIuLi9zcmMvY29tbW9uL3NldHRpbmdzL1JlZmVycmFsU2V0dGluZ3NWaWV3ZXIudHMiLCIuLi9zcmMvY29tbW9uL3NldHRpbmdzL0Fib3V0RGlhbG9nLnRzIiwiLi4vc3JjL2NvbW1vbi9ndWkvYmFzZS9BY3Rpb25CYXIudHMiLCIuLi9zcmMvbWFpbC1hcHAvc2V0dGluZ3MvVGVtcGxhdGVEZXRhaWxzVmlld2VyLnRzIiwiLi4vc3JjL21haWwtYXBwL3NldHRpbmdzL1RlbXBsYXRlTGlzdFZpZXcudHMiLCIuLi9zcmMvbWFpbC1hcHAvc2V0dGluZ3MvQ29udGFjdHNTZXR0aW5nc1ZpZXdlci50cyIsIi4uL3NyYy9jb21tb24vc2V0dGluZ3MvTm90aWZpY2F0aW9uVGFyZ2V0c0xpc3QudHMiLCIuLi9zcmMvY29tbW9uL3NldHRpbmdzL0lkZW50aWZpZXJSb3cudHMiLCIuLi9zcmMvbWFpbC1hcHAvc2V0dGluZ3MvTm90aWZpY2F0aW9uU2V0dGluZ3NWaWV3ZXIudHMiLCIuLi9zcmMvY29tbW9uL3NldHRpbmdzL0FmZmlsaWF0ZVNldHRpbmdzVmlld2VyLnRzIiwiLi4vc3JjL2NvbW1vbi9zZXR0aW5ncy9BZmZpbGlhdGVLcGlzVmlld2VyLnRzIiwiLi4vc3JjL21haWwtYXBwL3NldHRpbmdzL0Rlc2t0b3BNYWlsSW1wb3J0U2V0dGluZ3NWaWV3ZXIudHMiLCIuLi9zcmMvbWFpbC1hcHAvc2V0dGluZ3MvV2ViTWFpbEltcG9ydFNldHRpbmdzVmlld2VyLnRzIiwiLi4vc3JjL21haWwtYXBwL3NldHRpbmdzL01haWxFeHBvcnRTZXR0aW5ncy50cyIsIi4uL3NyYy9tYWlsLWFwcC9zZXR0aW5ncy9NYWlsRXhwb3J0Vmlld2VyLnRzIiwiLi4vc3JjL21haWwtYXBwL3NldHRpbmdzL1NldHRpbmdzVmlldy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IGxhenlJY29uIH0gZnJvbSBcIi4uL2d1aS9iYXNlL0ljb24uanNcIlxuaW1wb3J0IHR5cGUgeyBUcmFuc2xhdGlvbktleSwgTWF5YmVUcmFuc2xhdGlvbiB9IGZyb20gXCIuLi9taXNjL0xhbmd1YWdlVmlld01vZGVsLmpzXCJcbmltcG9ydCB7IGlzU2VsZWN0ZWRQcmVmaXggfSBmcm9tIFwiLi4vZ3VpL2Jhc2UvTmF2QnV0dG9uLmpzXCJcbmltcG9ydCB0eXBlIHsgbGF6eSB9IGZyb20gXCJAdHV0YW8vdHV0YW5vdGEtdXRpbHNcIlxuaW1wb3J0IHsgYXNzZXJ0TWFpbk9yTm9kZSB9IGZyb20gXCIuLi9hcGkvY29tbW9uL0Vudi5qc1wiXG5pbXBvcnQgeyBVcGRhdGFibGVTZXR0aW5nc1ZpZXdlciB9IGZyb20gXCIuL0ludGVyZmFjZXMuanNcIlxuXG5hc3NlcnRNYWluT3JOb2RlKClcblxudHlwZSBTZXR0aW5nc0ZvbGRlclBhdGggPSBzdHJpbmcgfCB7IGZvbGRlcjogc3RyaW5nOyBpZDogc3RyaW5nIH1cblxuZXhwb3J0IGNsYXNzIFNldHRpbmdzRm9sZGVyPFQ+IHtcblx0cmVhZG9ubHkgdXJsOiBzdHJpbmdcblxuXHRwcml2YXRlIF9pc1Zpc2libGVIYW5kbGVyOiBsYXp5PGJvb2xlYW4+XG5cblx0Y29uc3RydWN0b3IoXG5cdFx0cmVhZG9ubHkgbmFtZTogTWF5YmVUcmFuc2xhdGlvbixcblx0XHRyZWFkb25seSBpY29uOiBsYXp5SWNvbixcblx0XHRyZWFkb25seSBwYXRoOiBTZXR0aW5nc0ZvbGRlclBhdGgsXG5cdFx0cmVhZG9ubHkgdmlld2VyQ3JlYXRvcjogbGF6eTxVcGRhdGFibGVTZXR0aW5nc1ZpZXdlcj4sXG5cdFx0cmVhZG9ubHkgZGF0YTogVCxcblx0KSB7XG5cdFx0dGhpcy51cmwgPVxuXHRcdFx0dHlwZW9mIHBhdGggPT09IFwic3RyaW5nXCIgPyBgL3NldHRpbmdzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KHBhdGgpfWAgOiBgL3NldHRpbmdzLyR7ZW5jb2RlVVJJQ29tcG9uZW50KHBhdGguZm9sZGVyKX0vJHtlbmNvZGVVUklDb21wb25lbnQocGF0aC5pZCl9YFxuXG5cdFx0dGhpcy5faXNWaXNpYmxlSGFuZGxlciA9ICgpID0+IHRydWVcblx0fVxuXG5cdGlzQWN0aXZlKCk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiBpc1NlbGVjdGVkUHJlZml4KHRoaXMudXJsKVxuXHR9XG5cblx0aXNWaXNpYmxlKCk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiB0aGlzLl9pc1Zpc2libGVIYW5kbGVyKClcblx0fVxuXG5cdHNldElzVmlzaWJsZUhhbmRsZXIoaXNWaXNpYmxlSGFuZGxlcjogbGF6eTxib29sZWFuPik6IHRoaXMge1xuXHRcdHRoaXMuX2lzVmlzaWJsZUhhbmRsZXIgPSBpc1Zpc2libGVIYW5kbGVyXG5cdFx0cmV0dXJuIHRoaXNcblx0fVxuXG5cdGdldCBmb2xkZXIoKTogc3RyaW5nIHwgbnVsbCB7XG5cdFx0cmV0dXJuIHR5cGVvZiB0aGlzLnBhdGggPT09IFwic3RyaW5nXCIgPyBudWxsIDogdGhpcy5wYXRoLmZvbGRlclxuXHR9XG5cblx0Z2V0IGlkKCk6IHN0cmluZyB8IG51bGwge1xuXHRcdHJldHVybiB0eXBlb2YgdGhpcy5wYXRoID09PSBcInN0cmluZ1wiID8gbnVsbCA6IHRoaXMucGF0aC5pZFxuXHR9XG59XG4iLCJpbXBvcnQgeyBFbnRpdHlDbGllbnQgfSBmcm9tIFwiLi4vLi4vLi4vYXBpL2NvbW1vbi9FbnRpdHlDbGllbnQuanNcIlxuaW1wb3J0IHsgY3JlYXRlU2Vjb25kRmFjdG9yLCBHcm91cEluZm9UeXBlUmVmLCBVMmZSZWdpc3RlcmVkRGV2aWNlLCBVc2VyIH0gZnJvbSBcIi4uLy4uLy4uL2FwaS9lbnRpdGllcy9zeXMvVHlwZVJlZnMuanNcIlxuaW1wb3J0IHsgdmFsaWRhdGVXZWJhdXRobkRpc3BsYXlOYW1lLCBXZWJhdXRobkNsaWVudCB9IGZyb20gXCIuLi8uLi8uLi9taXNjLzJmYS93ZWJhdXRobi9XZWJhdXRobkNsaWVudC5qc1wiXG5pbXBvcnQgeyBUb3RwU2VjcmV0IH0gZnJvbSBcIkB0dXRhby90dXRhbm90YS1jcnlwdG9cIlxuaW1wb3J0IHsgYXNzZXJ0Tm90TnVsbCwgTGF6eUxvYWRlZCwgbmV2ZXJOdWxsIH0gZnJvbSBcIkB0dXRhby90dXRhbm90YS11dGlsc1wiXG5pbXBvcnQgeyBpc0FwcCB9IGZyb20gXCIuLi8uLi8uLi9hcGkvY29tbW9uL0Vudi5qc1wiXG5pbXBvcnQgeyBMYW5ndWFnZVZpZXdNb2RlbCwgVHJhbnNsYXRpb25LZXkgfSBmcm9tIFwiLi4vLi4vLi4vbWlzYy9MYW5ndWFnZVZpZXdNb2RlbC5qc1wiXG5pbXBvcnQgeyBTZWNvbmRGYWN0b3JUeXBlIH0gZnJvbSBcIi4uLy4uLy4uL2FwaS9jb21tb24vVHV0YW5vdGFDb25zdGFudHMuanNcIlxuaW1wb3J0IHsgUHJvZ3JhbW1pbmdFcnJvciB9IGZyb20gXCIuLi8uLi8uLi9hcGkvY29tbW9uL2Vycm9yL1Byb2dyYW1taW5nRXJyb3IuanNcIlxuaW1wb3J0IHsgTG9naW5GYWNhZGUgfSBmcm9tIFwiLi4vLi4vLi4vYXBpL3dvcmtlci9mYWNhZGVzL0xvZ2luRmFjYWRlLmpzXCJcbmltcG9ydCB7IFVzZXJFcnJvciB9IGZyb20gXCIuLi8uLi8uLi9hcGkvbWFpbi9Vc2VyRXJyb3IuanNcIlxuaW1wb3J0IHsgaHRtbFNhbml0aXplciB9IGZyb20gXCIuLi8uLi8uLi9taXNjL0h0bWxTYW5pdGl6ZXIuanNcIlxuaW1wb3J0IFFSQ29kZSBmcm9tIFwicXJjb2RlLXN2Z1wiXG5cbmV4cG9ydCBjb25zdCBlbnVtIFZlcmlmaWNhdGlvblN0YXR1cyB7XG5cdEluaXRpYWwgPSBcIkluaXRpYWxcIixcblx0UHJvZ3Jlc3MgPSBcIlByb2dyZXNzXCIsXG5cdEZhaWxlZCA9IFwiRmFpbGVkXCIsXG5cdFN1Y2Nlc3MgPSBcIlN1Y2Nlc3NcIixcbn1cblxuZXhwb3J0IGNvbnN0IERFRkFVTFRfVTJGX05BTUUgPSBcIlUyRlwiXG5leHBvcnQgY29uc3QgREVGQVVMVF9UT1RQX05BTUUgPSBcIlRPVFBcIlxuXG5leHBvcnQgZW51bSBOYW1lVmFsaWRhdGlvblN0YXR1cyB7XG5cdFZhbGlkLFxuXHRJbnZhbGlkLFxufVxuXG5leHBvcnQgY29uc3QgU2Vjb25kRmFjdG9yVHlwZVRvTmFtZVRleHRJZDogUmVjb3JkPFNlY29uZEZhY3RvclR5cGUsIFRyYW5zbGF0aW9uS2V5PiA9IE9iamVjdC5mcmVlemUoe1xuXHRbU2Vjb25kRmFjdG9yVHlwZS50b3RwXTogXCJ0b3RwQXV0aGVudGljYXRvcl9sYWJlbFwiLFxuXHRbU2Vjb25kRmFjdG9yVHlwZS51MmZdOiBcInUyZlNlY3VyaXR5S2V5X2xhYmVsXCIsXG5cdFtTZWNvbmRGYWN0b3JUeXBlLndlYmF1dGhuXTogXCJ1MmZTZWN1cml0eUtleV9sYWJlbFwiLFxufSlcblxuZXhwb3J0IGNsYXNzIFNlY29uZEZhY3RvckVkaXRNb2RlbCB7XG5cdHRvdHBDb2RlOiBzdHJpbmcgPSBcIlwiXG5cdHNlbGVjdGVkVHlwZTogU2Vjb25kRmFjdG9yVHlwZVxuXHRuYW1lOiBzdHJpbmcgPSBcIlwiXG5cdG5hbWVWYWxpZGF0aW9uU3RhdHVzOiBOYW1lVmFsaWRhdGlvblN0YXR1cyA9IE5hbWVWYWxpZGF0aW9uU3RhdHVzLlZhbGlkXG5cdHZlcmlmaWNhdGlvblN0YXR1czogVmVyaWZpY2F0aW9uU3RhdHVzID0gVmVyaWZpY2F0aW9uU3RhdHVzLkluaXRpYWxcblx0cmVhZG9ubHkgb3RwSW5mbzogTGF6eUxvYWRlZDx7XG5cdFx0cXJDb2RlU3ZnOiBzdHJpbmcgfCBudWxsXG5cdFx0dXJsOiBzdHJpbmdcblx0fT5cblx0cHJpdmF0ZSB1MmZSZWdpc3RyYXRpb25EYXRhOiBVMmZSZWdpc3RlcmVkRGV2aWNlIHwgbnVsbCA9IG51bGxcblxuXHRjb25zdHJ1Y3Rvcihcblx0XHRwcml2YXRlIHJlYWRvbmx5IGVudGl0eUNsaWVudDogRW50aXR5Q2xpZW50LFxuXHRcdHByaXZhdGUgcmVhZG9ubHkgdXNlcjogVXNlcixcblx0XHRwcml2YXRlIHJlYWRvbmx5IHdlYmF1dGhuQ2xpZW50OiBXZWJhdXRobkNsaWVudCxcblx0XHRyZWFkb25seSB0b3RwS2V5czogVG90cFNlY3JldCxcblx0XHRwcml2YXRlIHJlYWRvbmx5IHdlYmF1dGhuU3VwcG9ydGVkOiBib29sZWFuLFxuXHRcdHByaXZhdGUgcmVhZG9ubHkgbG9naW5GYWNhZGU6IExvZ2luRmFjYWRlLFxuXHRcdHByaXZhdGUgcmVhZG9ubHkgaG9zdG5hbWU6IHN0cmluZyxcblx0XHRwcml2YXRlIHJlYWRvbmx5IGRvbWFpbkNvbmZpZzogRG9tYWluQ29uZmlnLFxuXHRcdHByaXZhdGUgcmVhZG9ubHkgdXBkYXRlVmlld0NhbGxiYWNrOiAoKSA9PiB2b2lkLFxuXHRcdHByaXZhdGUgcmVhZG9ubHkgdG9rZW4/OiBzdHJpbmcsXG5cdCkge1xuXHRcdHRoaXMuc2VsZWN0ZWRUeXBlID0gd2ViYXV0aG5TdXBwb3J0ZWQgPyBTZWNvbmRGYWN0b3JUeXBlLndlYmF1dGhuIDogU2Vjb25kRmFjdG9yVHlwZS50b3RwXG5cdFx0dGhpcy5zZXREZWZhdWx0TmFtZUlmTmVlZGVkKClcblx0XHR0aGlzLm90cEluZm8gPSBuZXcgTGF6eUxvYWRlZChhc3luYyAoKSA9PiB7XG5cdFx0XHRjb25zdCB1cmwgPSBhd2FpdCB0aGlzLmdldE90cEF1dGhVcmwodGhpcy50b3RwS2V5cy5yZWFkYWJsZUtleSlcblxuXHRcdFx0Y29uc3QgdG90cFFSQ29kZVN2ZyA9IGlzQXBwKClcblx0XHRcdFx0PyBudWxsXG5cdFx0XHRcdDogaHRtbFNhbml0aXplci5zYW5pdGl6ZVNWRyhcblx0XHRcdFx0XHRcdG5ldyBRUkNvZGUoe1xuXHRcdFx0XHRcdFx0XHRoZWlnaHQ6IDE1MCxcblx0XHRcdFx0XHRcdFx0d2lkdGg6IDE1MCxcblx0XHRcdFx0XHRcdFx0Y29udGVudDogdXJsLFxuXHRcdFx0XHRcdFx0XHRwYWRkaW5nOiAyLFxuXHRcdFx0XHRcdFx0XHQvLyBXZSBkb24ndCB3YW50IDx4bWw+IGFyb3VuZCB0aGUgY29udGVudCwgd2UgYWN0dWFsbHkgZW5mb3JjZSA8c3ZnPiBuYW1lc3BhY2UsIGFuZCB3ZSB3YW50IGl0IHRvIGJlIHBhcnNlZCBhcyBzdWNoLlxuXHRcdFx0XHRcdFx0XHR4bWxEZWNsYXJhdGlvbjogZmFsc2UsXG5cdFx0XHRcdFx0XHR9KS5zdmcoKSxcblx0XHRcdFx0ICApLmh0bWxcblxuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0cXJDb2RlU3ZnOiB0b3RwUVJDb2RlU3ZnLFxuXHRcdFx0XHR1cmwsXG5cdFx0XHR9XG5cdFx0fSlcblxuXHRcdHRoaXMub3RwSW5mby5nZXRBc3luYygpLnRoZW4oKCkgPT4gdGhpcy51cGRhdGVWaWV3Q2FsbGJhY2soKSlcblx0fVxuXG5cdC8qKlxuXHQgKiBpZiB0aGUgdXNlciBjYW5jZWxzIHRoZSBzZWNvbmQgZmFjdG9yIGNyZWF0aW9uIHdoaWxlIGl0J3MgYWxyZWFkeSB0YWxraW5nIHRvIHdlYkF1dGhuLCB3ZSB3YW50IHRvIGNhbmNlbCB0aGF0XG5cdCAqIHByb2Nlc3MgYmVmb3JlIGNsb3NpbmcgdGhlIGRpYWxvZy5cblx0ICovXG5cdGFib3J0KCkge1xuXHRcdC8vIG5vaW5zcGVjdGlvbiBKU0lnbm9yZWRQcm9taXNlRnJvbUNhbGxcblx0XHR0aGlzLndlYmF1dGhuQ2xpZW50LmFib3J0Q3VycmVudE9wZXJhdGlvbigpXG5cdH1cblxuXHQvKipcblx0ICogdmFsaWRhdGlvbiBtZXNzYWdlIGZvciB1c2UgaW4gZGlhbG9nIHZhbGlkYXRvcnNcblx0ICovXG5cdHZhbGlkYXRpb25NZXNzYWdlKCk6IFRyYW5zbGF0aW9uS2V5IHwgbnVsbCB7XG5cdFx0cmV0dXJuIHRoaXMubmFtZVZhbGlkYXRpb25TdGF0dXMgPT09IE5hbWVWYWxpZGF0aW9uU3RhdHVzLlZhbGlkID8gbnVsbCA6IFwidGV4dFRvb0xvbmdfbXNnXCJcblx0fVxuXG5cdC8qKlxuXHQgKiBnZXQgYSBsaXN0IG9mIHN1cHBvcnRlZCBzZWNvbmQgZmFjdG9yIHR5cGVzXG5cdCAqL1xuXHRnZXRGYWN0b3JUeXBlc09wdGlvbnMoKTogQXJyYXk8U2Vjb25kRmFjdG9yVHlwZT4ge1xuXHRcdGNvbnN0IG9wdGlvbnM6IEFycmF5PFNlY29uZEZhY3RvclR5cGU+ID0gW11cblx0XHRvcHRpb25zLnB1c2goU2Vjb25kRmFjdG9yVHlwZS50b3RwKVxuXG5cdFx0aWYgKHRoaXMud2ViYXV0aG5TdXBwb3J0ZWQpIHtcblx0XHRcdG9wdGlvbnMucHVzaChTZWNvbmRGYWN0b3JUeXBlLndlYmF1dGhuKVxuXHRcdH1cblx0XHRyZXR1cm4gb3B0aW9uc1xuXHR9XG5cblx0LyoqXG5cdCAqIGNhbGwgd2hlbiB0aGUgc2VsZWN0ZWQgc2Vjb25kIGZhY3RvciB0eXBlIGNoYW5nZXNcblx0ICovXG5cdG9uVHlwZVNlbGVjdGVkKG5ld1ZhbHVlOiBTZWNvbmRGYWN0b3JUeXBlKSB7XG5cdFx0dGhpcy5zZWxlY3RlZFR5cGUgPSBuZXdWYWx1ZVxuXHRcdHRoaXMudmVyaWZpY2F0aW9uU3RhdHVzID0gbmV3VmFsdWUgPT09IFNlY29uZEZhY3RvclR5cGUud2ViYXV0aG4gPyBWZXJpZmljYXRpb25TdGF0dXMuSW5pdGlhbCA6IFZlcmlmaWNhdGlvblN0YXR1cy5Qcm9ncmVzc1xuXG5cdFx0dGhpcy5zZXREZWZhdWx0TmFtZUlmTmVlZGVkKClcblx0XHR0aGlzLnVwZGF0ZU5hbWVWYWxpZGF0aW9uKClcblxuXHRcdGlmIChuZXdWYWx1ZSAhPT0gU2Vjb25kRmFjdG9yVHlwZS53ZWJhdXRobikge1xuXHRcdFx0Ly8gbm9pbnNwZWN0aW9uIEpTSWdub3JlZFByb21pc2VGcm9tQ2FsbFxuXHRcdFx0dGhpcy53ZWJhdXRobkNsaWVudC5hYm9ydEN1cnJlbnRPcGVyYXRpb24oKVxuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBjYWxsIHdoZW4gdGhlIGRpc3BsYXkgbmFtZSBvZiB0aGUgc2Vjb25kIGZhY3RvciBpbnN0YW5jZSBjaGFuZ2VzXG5cdCAqL1xuXHRvbk5hbWVDaGFuZ2UobmV3VmFsdWU6IHN0cmluZyk6IHZvaWQge1xuXHRcdHRoaXMubmFtZSA9IG5ld1ZhbHVlXG5cdFx0dGhpcy51cGRhdGVOYW1lVmFsaWRhdGlvbigpXG5cdH1cblxuXHQvKipcblx0ICogY2FsbCB3aGVuIHRoZSB2YWxpZGF0aW9uIGNvZGUgZm9yIHNldHRpbmcgdXAgVE9UUCBjaGFuZ2VzXG5cdCAqL1xuXHRhc3luYyBvblRvdHBWYWx1ZUNoYW5nZShuZXdWYWx1ZTogc3RyaW5nKSB7XG5cdFx0dGhpcy50b3RwQ29kZSA9IG5ld1ZhbHVlXG5cdFx0bGV0IGNsZWFuZWRWYWx1ZSA9IG5ld1ZhbHVlLnJlcGxhY2UoLyAvZywgXCJcIilcblxuXHRcdGlmIChjbGVhbmVkVmFsdWUubGVuZ3RoID09PSA2KSB7XG5cdFx0XHRjb25zdCBleHBlY3RlZENvZGUgPSBOdW1iZXIoY2xlYW5lZFZhbHVlKVxuXHRcdFx0dGhpcy52ZXJpZmljYXRpb25TdGF0dXMgPSBhd2FpdCB0aGlzLnRyeUNvZGVzKGV4cGVjdGVkQ29kZSwgdGhpcy50b3RwS2V5cy5rZXkpXG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMudmVyaWZpY2F0aW9uU3RhdHVzID0gVmVyaWZpY2F0aW9uU3RhdHVzLlByb2dyZXNzXG5cdFx0fVxuXHRcdHRoaXMudXBkYXRlVmlld0NhbGxiYWNrKClcblx0fVxuXG5cdC8qKlxuXHQgKiByZS12YWxpZGF0ZXMgdGhlIGlucHV0IGFuZCBtYWtlcyB0aGUgc2VydmVyIGNhbGxzIHRvIGFjdHVhbGx5IGNyZWF0ZSBhIHNlY29uZCBmYWN0b3Jcblx0ICogcmV0dXJucyB0aGUgdXNlciB0aGF0IHRoZSBzZWNvbmQgZmFjdG9yIHdhcyBjcmVhdGVkIGluIGNhc2UgYW55IGZvbGxvdy11cCBvcGVyYXRpb25zXG5cdCAqIGFyZSBuZWVkZWRcblx0ICovXG5cdGFzeW5jIHNhdmUoKTogUHJvbWlzZTxVc2VyIHwgbnVsbD4ge1xuXHRcdHRoaXMuc2V0RGVmYXVsdE5hbWVJZk5lZWRlZCgpXG5cdFx0aWYgKHRoaXMuc2VsZWN0ZWRUeXBlID09PSBTZWNvbmRGYWN0b3JUeXBlLndlYmF1dGhuKSB7XG5cdFx0XHQvLyBQcmV2ZW50IHN0YXJ0aW5nIGluIHBhcmFsbGVsXG5cdFx0XHRpZiAodGhpcy52ZXJpZmljYXRpb25TdGF0dXMgPT09IFZlcmlmaWNhdGlvblN0YXR1cy5Qcm9ncmVzcykge1xuXHRcdFx0XHRyZXR1cm4gbnVsbFxuXHRcdFx0fVxuXG5cdFx0XHR0cnkge1xuXHRcdFx0XHR0aGlzLnUyZlJlZ2lzdHJhdGlvbkRhdGEgPSBhd2FpdCB0aGlzLndlYmF1dGhuQ2xpZW50LnJlZ2lzdGVyKHRoaXMudXNlci5faWQsIHRoaXMubmFtZSlcblx0XHRcdFx0dGhpcy52ZXJpZmljYXRpb25TdGF0dXMgPSBWZXJpZmljYXRpb25TdGF0dXMuU3VjY2Vzc1xuXHRcdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0XHRjb25zb2xlLmxvZyhcIldlYmF1dGhuIHJlZ2lzdHJhdGlvbiBmYWlsZWQ6IFwiLCBlKVxuXHRcdFx0XHR0aGlzLnUyZlJlZ2lzdHJhdGlvbkRhdGEgPSBudWxsXG5cdFx0XHRcdHRoaXMudmVyaWZpY2F0aW9uU3RhdHVzID0gVmVyaWZpY2F0aW9uU3RhdHVzLkZhaWxlZFxuXHRcdFx0XHRyZXR1cm4gbnVsbFxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHRoaXMudXBkYXRlVmlld0NhbGxiYWNrKClcblxuXHRcdGlmICh0aGlzLnNlbGVjdGVkVHlwZSA9PT0gU2Vjb25kRmFjdG9yVHlwZS51MmYpIHtcblx0XHRcdHRocm93IG5ldyBQcm9ncmFtbWluZ0Vycm9yKGBpbnZhbGlkIGZhY3RvciB0eXBlOiAke3RoaXMuc2VsZWN0ZWRUeXBlfWApXG5cdFx0fVxuXG5cdFx0Y29uc3Qgc2YgPSBjcmVhdGVTZWNvbmRGYWN0b3Ioe1xuXHRcdFx0X293bmVyR3JvdXA6IHRoaXMudXNlci5fb3duZXJHcm91cCEsXG5cdFx0XHRuYW1lOiB0aGlzLm5hbWUsXG5cdFx0XHR0eXBlOiB0aGlzLnNlbGVjdGVkVHlwZSxcblx0XHRcdG90cFNlY3JldDogbnVsbCxcblx0XHRcdHUyZjogbnVsbCxcblx0XHR9KVxuXG5cdFx0aWYgKHRoaXMuc2VsZWN0ZWRUeXBlID09PSBTZWNvbmRGYWN0b3JUeXBlLndlYmF1dGhuKSB7XG5cdFx0XHRpZiAodGhpcy52ZXJpZmljYXRpb25TdGF0dXMgIT09IFZlcmlmaWNhdGlvblN0YXR1cy5TdWNjZXNzKSB7XG5cdFx0XHRcdHRocm93IG5ldyBVc2VyRXJyb3IoXCJ1bnJlY29nbml6ZWRVMmZEZXZpY2VfbXNnXCIpXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRzZi51MmYgPSB0aGlzLnUyZlJlZ2lzdHJhdGlvbkRhdGFcblx0XHRcdH1cblx0XHR9IGVsc2UgaWYgKHRoaXMuc2VsZWN0ZWRUeXBlID09PSBTZWNvbmRGYWN0b3JUeXBlLnRvdHApIHtcblx0XHRcdGlmICh0aGlzLnZlcmlmaWNhdGlvblN0YXR1cyA9PT0gVmVyaWZpY2F0aW9uU3RhdHVzLkZhaWxlZCkge1xuXHRcdFx0XHR0aHJvdyBuZXcgVXNlckVycm9yKFwidG90cENvZGVXcm9uZ19tc2dcIilcblx0XHRcdH0gZWxzZSBpZiAodGhpcy52ZXJpZmljYXRpb25TdGF0dXMgPT09IFZlcmlmaWNhdGlvblN0YXR1cy5Jbml0aWFsIHx8IHRoaXMudmVyaWZpY2F0aW9uU3RhdHVzID09PSBWZXJpZmljYXRpb25TdGF0dXMuUHJvZ3Jlc3MpIHtcblx0XHRcdFx0dGhyb3cgbmV3IFVzZXJFcnJvcihcInRvdHBDb2RlRW50ZXJfbXNnXCIpXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRzZi5vdHBTZWNyZXQgPSB0aGlzLnRvdHBLZXlzLmtleVxuXHRcdFx0fVxuXHRcdH1cblx0XHRhd2FpdCB0aGlzLmVudGl0eUNsaWVudC5zZXR1cChhc3NlcnROb3ROdWxsKHRoaXMudXNlci5hdXRoKS5zZWNvbmRGYWN0b3JzLCBzZiwgdGhpcy50b2tlbiA/IHsgdG9rZW46IHRoaXMudG9rZW4gfSA6IHVuZGVmaW5lZClcblx0XHRyZXR1cm4gdGhpcy51c2VyXG5cdH1cblxuXHQvKiogc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9nb29nbGUvZ29vZ2xlLWF1dGhlbnRpY2F0b3Ivd2lraS9LZXktVXJpLUZvcm1hdCAqL1xuXHRwcml2YXRlIGFzeW5jIGdldE90cEF1dGhVcmwoc2VjcmV0OiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuXHRcdGNvbnN0IHVzZXJHcm91cEluZm8gPSBhd2FpdCB0aGlzLmVudGl0eUNsaWVudC5sb2FkKEdyb3VwSW5mb1R5cGVSZWYsIHRoaXMudXNlci51c2VyR3JvdXAuZ3JvdXBJbmZvKVxuXHRcdGNvbnN0IGlzc3VlciA9IHRoaXMuZG9tYWluQ29uZmlnLmZpcnN0UGFydHlEb21haW4gPyBcIlR1dGFub3RhXCIgOiB0aGlzLmhvc3RuYW1lXG5cdFx0Y29uc3QgYWNjb3VudCA9IGVuY29kZVVSSShpc3N1ZXIgKyBcIjpcIiArIG5ldmVyTnVsbCh1c2VyR3JvdXBJbmZvLm1haWxBZGRyZXNzKSlcblx0XHRjb25zdCB1cmwgPSBuZXcgVVJMKFwib3RwYXV0aDovL3RvdHAvXCIgKyBhY2NvdW50KVxuXHRcdHVybC5zZWFyY2hQYXJhbXMuc2V0KFwiaXNzdWVyXCIsIGlzc3Vlcilcblx0XHR1cmwuc2VhcmNoUGFyYW1zLnNldChcInNlY3JldFwiLCBzZWNyZXQucmVwbGFjZSgvIC9nLCBcIlwiKSlcblx0XHR1cmwuc2VhcmNoUGFyYW1zLnNldChcImFsZ29yaXRobVwiLCBcIlNIQTFcIilcblx0XHR1cmwuc2VhcmNoUGFyYW1zLnNldChcImRpZ2l0c1wiLCBcIjZcIilcblx0XHR1cmwuc2VhcmNoUGFyYW1zLnNldChcInBlcmlvZFwiLCBcIjMwXCIpXG5cdFx0cmV0dXJuIHVybC50b1N0cmluZygpXG5cdH1cblxuXHQvKipcblx0ICogcmUtY2hlY2sgaWYgdGhlIGdpdmVuIGRpc3BsYXkgbmFtZSBpcyB2YWxpZCBmb3IgdGhlIGN1cnJlbnQgc2Vjb25kIGZhY3RvciB0eXBlXG5cdCAqL1xuXHRwcml2YXRlIHVwZGF0ZU5hbWVWYWxpZGF0aW9uKCk6IHZvaWQge1xuXHRcdHRoaXMubmFtZVZhbGlkYXRpb25TdGF0dXMgPVxuXHRcdFx0dGhpcy5zZWxlY3RlZFR5cGUgIT09IFNlY29uZEZhY3RvclR5cGUud2ViYXV0aG4gfHwgdmFsaWRhdGVXZWJhdXRobkRpc3BsYXlOYW1lKHRoaXMubmFtZSlcblx0XHRcdFx0PyBOYW1lVmFsaWRhdGlvblN0YXR1cy5WYWxpZFxuXHRcdFx0XHQ6IE5hbWVWYWxpZGF0aW9uU3RhdHVzLkludmFsaWRcblx0fVxuXG5cdC8qKlxuXHQgKiBlbXB0eSBuYW1lcyBzb21ldGltZXMgbGVhZCB0byBlcnJvcnMsIHNvIHdlIG1ha2Ugc3VyZSB3ZSBoYXZlIHNvbWV0aGluZyBzZW1pLXNlbnNpYmxlIHNldCBpbiB0aGUgZmllbGQuXG5cdCAqL1xuXHRwcml2YXRlIHNldERlZmF1bHROYW1lSWZOZWVkZWQoKSB7XG5cdFx0Y29uc3QgdHJpbW1lZCA9IHRoaXMubmFtZS50cmltKClcblx0XHRpZiAodGhpcy5zZWxlY3RlZFR5cGUgPT09IFNlY29uZEZhY3RvclR5cGUud2ViYXV0aG4gJiYgKHRyaW1tZWQgPT09IERFRkFVTFRfVE9UUF9OQU1FIHx8IHRyaW1tZWQubGVuZ3RoID09PSAwKSkge1xuXHRcdFx0dGhpcy5uYW1lID0gREVGQVVMVF9VMkZfTkFNRVxuXHRcdH0gZWxzZSBpZiAodGhpcy5zZWxlY3RlZFR5cGUgPT09IFNlY29uZEZhY3RvclR5cGUudG90cCAmJiAodHJpbW1lZCA9PT0gREVGQVVMVF9VMkZfTkFNRSB8fCB0cmltbWVkLmxlbmd0aCA9PT0gMCkpIHtcblx0XHRcdHRoaXMubmFtZSA9IERFRkFVTFRfVE9UUF9OQU1FXG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIGNoZWNrIGlmIHRoZSBnaXZlbiB2YWxpZGF0aW9uIGNvZGUgaXMgdGhlIGN1cnJlbnQsIG5leHQgb3IgbGFzdCBjb2RlIGZvciB0aGUgVE9UUFxuXHQgKi9cblx0cHJpdmF0ZSBhc3luYyB0cnlDb2RlcyhleHBlY3RlZENvZGU6IG51bWJlciwga2V5OiBVaW50OEFycmF5KTogUHJvbWlzZTxWZXJpZmljYXRpb25TdGF0dXM+IHtcblx0XHRjb25zdCB0aW1lID0gTWF0aC5mbG9vcihuZXcgRGF0ZSgpLmdldFRpbWUoKSAvIDEwMDAgLyAzMClcblx0XHQvLyBXZSB0cnkgb3V0IDMgY29kZXM6IGN1cnJlbnQgbWludXRlLCAzMCBzZWNvbmRzIGJlZm9yZSBhbmQgMzAgc2Vjb25kcyBhZnRlci5cblx0XHQvLyBJZiBhdCBsZWFzdCBvbmUgb2YgdGhlbSB3b3Jrcywgd2UgYWNjZXB0IGl0LlxuXHRcdGNvbnN0IG51bWJlciA9IGF3YWl0IHRoaXMubG9naW5GYWNhZGUuZ2VuZXJhdGVUb3RwQ29kZSh0aW1lLCBrZXkpXG5cblx0XHRpZiAobnVtYmVyID09PSBleHBlY3RlZENvZGUpIHtcblx0XHRcdHJldHVybiBWZXJpZmljYXRpb25TdGF0dXMuU3VjY2Vzc1xuXHRcdH1cblxuXHRcdGNvbnN0IG51bWJlcjIgPSBhd2FpdCB0aGlzLmxvZ2luRmFjYWRlLmdlbmVyYXRlVG90cENvZGUodGltZSAtIDEsIGtleSlcblxuXHRcdGlmIChudW1iZXIyID09PSBleHBlY3RlZENvZGUpIHtcblx0XHRcdHJldHVybiBWZXJpZmljYXRpb25TdGF0dXMuU3VjY2Vzc1xuXHRcdH1cblxuXHRcdGNvbnN0IG51bWJlcjMgPSBhd2FpdCB0aGlzLmxvZ2luRmFjYWRlLmdlbmVyYXRlVG90cENvZGUodGltZSArIDEsIGtleSlcblxuXHRcdGlmIChudW1iZXIzID09PSBleHBlY3RlZENvZGUpIHtcblx0XHRcdHJldHVybiBWZXJpZmljYXRpb25TdGF0dXMuU3VjY2Vzc1xuXHRcdH1cblxuXHRcdHJldHVybiBWZXJpZmljYXRpb25TdGF0dXMuRmFpbGVkXG5cdH1cbn1cbiIsImltcG9ydCB7IHNob3dQcm9ncmVzc0RpYWxvZyB9IGZyb20gXCIuLi8uLi8uLi9ndWkvZGlhbG9ncy9Qcm9ncmVzc0RpYWxvZy5qc1wiXG5pbXBvcnQgeyBTZWNvbmRGYWN0b3JUeXBlIH0gZnJvbSBcIi4uLy4uLy4uL2FwaS9jb21tb24vVHV0YW5vdGFDb25zdGFudHMuanNcIlxuaW1wb3J0IHR5cGUgeyBEcm9wRG93blNlbGVjdG9yQXR0cnMgfSBmcm9tIFwiLi4vLi4vLi4vZ3VpL2Jhc2UvRHJvcERvd25TZWxlY3Rvci5qc1wiXG5pbXBvcnQgeyBEcm9wRG93blNlbGVjdG9yIH0gZnJvbSBcIi4uLy4uLy4uL2d1aS9iYXNlL0Ryb3BEb3duU2VsZWN0b3IuanNcIlxuaW1wb3J0IHsgbGFuZyB9IGZyb20gXCIuLi8uLi8uLi9taXNjL0xhbmd1YWdlVmlld01vZGVsLmpzXCJcbmltcG9ydCB0eXBlIHsgVGV4dEZpZWxkQXR0cnMgfSBmcm9tIFwiLi4vLi4vLi4vZ3VpL2Jhc2UvVGV4dEZpZWxkLmpzXCJcbmltcG9ydCB7IEF1dG9jb21wbGV0ZSwgVGV4dEZpZWxkIH0gZnJvbSBcIi4uLy4uLy4uL2d1aS9iYXNlL1RleHRGaWVsZC5qc1wiXG5pbXBvcnQgeyBpc0FwcCB9IGZyb20gXCIuLi8uLi8uLi9hcGkvY29tbW9uL0Vudi5qc1wiXG5pbXBvcnQgbSwgeyBDaGlsZHJlbiB9IGZyb20gXCJtaXRocmlsXCJcbmltcG9ydCB7IGNvcHlUb0NsaXBib2FyZCB9IGZyb20gXCIuLi8uLi8uLi9taXNjL0NsaXBib2FyZFV0aWxzLmpzXCJcbmltcG9ydCB7IEljb25zIH0gZnJvbSBcIi4uLy4uLy4uL2d1aS9iYXNlL2ljb25zL0ljb25zLmpzXCJcbmltcG9ydCB7IERpYWxvZyB9IGZyb20gXCIuLi8uLi8uLi9ndWkvYmFzZS9EaWFsb2cuanNcIlxuaW1wb3J0IHsgSWNvbiwgSWNvblNpemUsIHByb2dyZXNzSWNvbiB9IGZyb20gXCIuLi8uLi8uLi9ndWkvYmFzZS9JY29uLmpzXCJcbmltcG9ydCB7IHRoZW1lIH0gZnJvbSBcIi4uLy4uLy4uL2d1aS90aGVtZS5qc1wiXG5pbXBvcnQgdHlwZSB7IFVzZXIgfSBmcm9tIFwiLi4vLi4vLi4vYXBpL2VudGl0aWVzL3N5cy9UeXBlUmVmcy5qc1wiXG5pbXBvcnQgeyBhc3NlcnROb3ROdWxsLCBMYXp5TG9hZGVkIH0gZnJvbSBcIkB0dXRhby90dXRhbm90YS11dGlsc1wiXG5pbXBvcnQgeyBsb2NhdG9yIH0gZnJvbSBcIi4uLy4uLy4uL2FwaS9tYWluL0NvbW1vbkxvY2F0b3IuanNcIlxuaW1wb3J0ICogYXMgUmVjb3ZlckNvZGVEaWFsb2cgZnJvbSBcIi4uL1JlY292ZXJDb2RlRGlhbG9nLmpzXCJcbmltcG9ydCB7IEVudGl0eUNsaWVudCB9IGZyb20gXCIuLi8uLi8uLi9hcGkvY29tbW9uL0VudGl0eUNsaWVudC5qc1wiXG5pbXBvcnQgeyBQcm9ncmFtbWluZ0Vycm9yIH0gZnJvbSBcIi4uLy4uLy4uL2FwaS9jb21tb24vZXJyb3IvUHJvZ3JhbW1pbmdFcnJvci5qc1wiXG5pbXBvcnQgeyBJY29uQnV0dG9uLCBJY29uQnV0dG9uQXR0cnMgfSBmcm9tIFwiLi4vLi4vLi4vZ3VpL2Jhc2UvSWNvbkJ1dHRvbi5qc1wiXG5pbXBvcnQgeyBCdXR0b25TaXplIH0gZnJvbSBcIi4uLy4uLy4uL2d1aS9iYXNlL0J1dHRvblNpemUuanNcIlxuaW1wb3J0IHsgTmFtZVZhbGlkYXRpb25TdGF0dXMsIFNlY29uZEZhY3RvckVkaXRNb2RlbCwgU2Vjb25kRmFjdG9yVHlwZVRvTmFtZVRleHRJZCwgVmVyaWZpY2F0aW9uU3RhdHVzIH0gZnJvbSBcIi4vU2Vjb25kRmFjdG9yRWRpdE1vZGVsLmpzXCJcbmltcG9ydCB7IFVzZXJFcnJvciB9IGZyb20gXCIuLi8uLi8uLi9hcGkvbWFpbi9Vc2VyRXJyb3IuanNcIlxuaW1wb3J0IHsgTG9naW5CdXR0b24gfSBmcm9tIFwiLi4vLi4vLi4vZ3VpL2Jhc2UvYnV0dG9ucy9Mb2dpbkJ1dHRvbi5qc1wiXG5pbXBvcnQgeyBOb3RBdXRob3JpemVkRXJyb3IgfSBmcm9tIFwiLi4vLi4vLi4vYXBpL2NvbW1vbi9lcnJvci9SZXN0RXJyb3JcIlxuXG5leHBvcnQgY2xhc3MgU2Vjb25kRmFjdG9yRWRpdERpYWxvZyB7XG5cdHByaXZhdGUgcmVhZG9ubHkgZGlhbG9nOiBEaWFsb2dcblxuXHRjb25zdHJ1Y3Rvcihwcml2YXRlIHJlYWRvbmx5IG1vZGVsOiBTZWNvbmRGYWN0b3JFZGl0TW9kZWwpIHtcblx0XHR0aGlzLmRpYWxvZyA9IERpYWxvZy5jcmVhdGVBY3Rpb25EaWFsb2coe1xuXHRcdFx0dGl0bGU6IFwiYWRkX2FjdGlvblwiLFxuXHRcdFx0YWxsb3dPa1dpdGhSZXR1cm46IHRydWUsXG5cdFx0XHRjaGlsZDoge1xuXHRcdFx0XHR2aWV3OiAoKSA9PiB0aGlzLnJlbmRlcigpLFxuXHRcdFx0fSxcblx0XHRcdG9rQWN0aW9uOiAoKSA9PiBzaG93UHJvZ3Jlc3NEaWFsb2coXCJwbGVhc2VXYWl0X21zZ1wiLCB0aGlzLm9rQWN0aW9uKCkpLFxuXHRcdFx0YWxsb3dDYW5jZWw6IHRydWUsXG5cdFx0XHRva0FjdGlvblRleHRJZDogXCJzYXZlX2FjdGlvblwiLFxuXHRcdFx0Y2FuY2VsQWN0aW9uOiAoKSA9PiB0aGlzLm1vZGVsLmFib3J0KCksXG5cdFx0XHR2YWxpZGF0b3I6ICgpID0+IHRoaXMubW9kZWwudmFsaWRhdGlvbk1lc3NhZ2UoKSxcblx0XHR9KVxuXHR9XG5cblx0YXN5bmMgb2tBY3Rpb24oKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0dHJ5IHtcblx0XHRcdGNvbnN0IHVzZXIgPSBhd2FpdCB0aGlzLm1vZGVsLnNhdmUoKVxuXHRcdFx0aWYgKHVzZXIgIT0gbnVsbCkgdGhpcy5maW5hbGl6ZSh1c2VyKVxuXHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdGlmIChlIGluc3RhbmNlb2YgVXNlckVycm9yKSB7XG5cdFx0XHRcdC8vIG5vaW5zcGVjdGlvbiBFUzZNaXNzaW5nQXdhaXRcblx0XHRcdFx0RGlhbG9nLm1lc3NhZ2UobGFuZy5tYWtlVHJhbnNsYXRpb24oXCJlcnJvcl9tc2dcIiwgZS5tZXNzYWdlKSlcblx0XHRcdH0gZWxzZSBpZiAoZSBpbnN0YW5jZW9mIE5vdEF1dGhvcml6ZWRFcnJvcikge1xuXHRcdFx0XHR0aGlzLmRpYWxvZy5jbG9zZSgpXG5cdFx0XHRcdERpYWxvZy5tZXNzYWdlKFwiY29udGFjdEZvcm1TdWJtaXRFcnJvcl9tc2dcIilcblx0XHRcdFx0cmV0dXJuXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0aHJvdyBlXG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0ZmluYWxpemUodXNlcjogVXNlcik6IHZvaWQge1xuXHRcdHRoaXMuZGlhbG9nLmNsb3NlKClcblx0XHRSZWNvdmVyQ29kZURpYWxvZy5zaG93UmVjb3ZlckNvZGVEaWFsb2dBZnRlclBhc3N3b3JkVmVyaWZpY2F0aW9uQW5kSW5mb0RpYWxvZyh1c2VyKVxuXHR9XG5cblx0c3RhdGljIGFzeW5jIGxvYWRBbmRTaG93KGVudGl0eUNsaWVudDogRW50aXR5Q2xpZW50LCBsYXp5VXNlcjogTGF6eUxvYWRlZDxVc2VyPiwgdG9rZW4/OiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRjb25zdCBkaWFsb2c6IFNlY29uZEZhY3RvckVkaXREaWFsb2cgPSBhd2FpdCBzaG93UHJvZ3Jlc3NEaWFsb2coXCJwbGVhc2VXYWl0X21zZ1wiLCB0aGlzLmxvYWRXZWJhdXRobkNsaWVudChlbnRpdHlDbGllbnQsIGxhenlVc2VyLCB0b2tlbikpXG5cdFx0ZGlhbG9nLmRpYWxvZy5zaG93KClcblx0fVxuXG5cdHByaXZhdGUgcmVuZGVyKCk6IENoaWxkcmVuIHtcblx0XHRjb25zdCBvcHRpb25zSXRlbXMgPSB0aGlzLm1vZGVsLmdldEZhY3RvclR5cGVzT3B0aW9ucygpLm1hcCgobykgPT4gKHtcblx0XHRcdG5hbWU6IGxhbmcuZ2V0KFNlY29uZEZhY3RvclR5cGVUb05hbWVUZXh0SWRbb10pLFxuXHRcdFx0dmFsdWU6IG8sXG5cdFx0fSkpXG5cblx0XHRjb25zdCB0eXBlRHJvcGRvd25BdHRyczogRHJvcERvd25TZWxlY3RvckF0dHJzPFNlY29uZEZhY3RvclR5cGU+ID0ge1xuXHRcdFx0bGFiZWw6IFwidHlwZV9sYWJlbFwiLFxuXHRcdFx0c2VsZWN0ZWRWYWx1ZTogdGhpcy5tb2RlbC5zZWxlY3RlZFR5cGUsXG5cdFx0XHRzZWxlY3Rpb25DaGFuZ2VkSGFuZGxlcjogKG5ld1ZhbHVlKSA9PiB0aGlzLm1vZGVsLm9uVHlwZVNlbGVjdGVkKG5ld1ZhbHVlKSxcblx0XHRcdGl0ZW1zOiBvcHRpb25zSXRlbXMsXG5cdFx0XHRkcm9wZG93bldpZHRoOiAzMDAsXG5cdFx0fVxuXHRcdGNvbnN0IG5hbWVGaWVsZEF0dHJzOiBUZXh0RmllbGRBdHRycyA9IHtcblx0XHRcdGxhYmVsOiBcIm5hbWVfbGFiZWxcIixcblx0XHRcdGhlbHBMYWJlbDogKCkgPT4gdGhpcy5yZW5kZXJIZWxwTGFiZWwoKSxcblx0XHRcdHZhbHVlOiB0aGlzLm1vZGVsLm5hbWUsXG5cdFx0XHRvbmlucHV0OiAodmFsdWUpID0+IHRoaXMubW9kZWwub25OYW1lQ2hhbmdlKHZhbHVlKSxcblx0XHR9XG5cdFx0cmV0dXJuIFttKERyb3BEb3duU2VsZWN0b3IsIHR5cGVEcm9wZG93bkF0dHJzKSwgbShUZXh0RmllbGQsIG5hbWVGaWVsZEF0dHJzKSwgdGhpcy5yZW5kZXJUeXBlU3BlY2lmaWNGaWVsZHMoKV1cblx0fVxuXG5cdHByaXZhdGUgcmVuZGVySGVscExhYmVsKCk6IENoaWxkcmVuIHtcblx0XHRyZXR1cm4gdGhpcy5tb2RlbC5uYW1lVmFsaWRhdGlvblN0YXR1cyA9PT0gTmFtZVZhbGlkYXRpb25TdGF0dXMuVmFsaWRcblx0XHRcdD8gbShcIlwiLCBsYW5nLmdldChcInNlY29uZEZhY3Rvck5hbWVJbmZvX21zZ1wiKSlcblx0XHRcdDogbShcIi5iLmNvbnRlbnQtYWNjZW50LWZnXCIsIGxhbmcuZ2V0KFwidGV4dFRvb0xvbmdfbXNnXCIpKVxuXHR9XG5cblx0cHJpdmF0ZSByZW5kZXJUeXBlU3BlY2lmaWNGaWVsZHMoKTogQ2hpbGRyZW4ge1xuXHRcdHN3aXRjaCAodGhpcy5tb2RlbC5zZWxlY3RlZFR5cGUpIHtcblx0XHRcdGNhc2UgU2Vjb25kRmFjdG9yVHlwZS50b3RwOlxuXHRcdFx0XHRyZXR1cm4gdGhpcy5yZW5kZXJPdHBGaWVsZHMoKVxuXG5cdFx0XHRjYXNlIFNlY29uZEZhY3RvclR5cGUud2ViYXV0aG46XG5cdFx0XHRcdHJldHVybiB0aGlzLnJlbmRlclUyRkZpZWxkcygpXG5cblx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdHRocm93IG5ldyBQcm9ncmFtbWluZ0Vycm9yKGBJbnZhbGlkIDJmYSB0eXBlOiAke3RoaXMubW9kZWwuc2VsZWN0ZWRUeXBlfWApXG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSByZW5kZXJVMkZGaWVsZHMoKTogQ2hpbGRyZW4ge1xuXHRcdHJldHVybiB0aGlzLm1vZGVsLnZlcmlmaWNhdGlvblN0YXR1cyA9PT0gVmVyaWZpY2F0aW9uU3RhdHVzLkluaXRpYWxcblx0XHRcdD8gbnVsbFxuXHRcdFx0OiBtKFwicC5mbGV4Lml0ZW1zLWNlbnRlclwiLCBbbShcIi5tci1zXCIsIHRoaXMuc3RhdHVzSWNvbigpKSwgbShcIlwiLCB0aGlzLnN0YXR1c01lc3NhZ2UoKSldKVxuXHR9XG5cblx0cHJpdmF0ZSByZW5kZXJPdHBGaWVsZHMoKTogQ2hpbGRyZW4ge1xuXHRcdGNvbnN0IGNvcHlCdXR0b25BdHRyczogSWNvbkJ1dHRvbkF0dHJzID0ge1xuXHRcdFx0dGl0bGU6IFwiY29weV9hY3Rpb25cIixcblx0XHRcdGNsaWNrOiAoKSA9PiBjb3B5VG9DbGlwYm9hcmQodGhpcy5tb2RlbC50b3RwS2V5cy5yZWFkYWJsZUtleSksXG5cdFx0XHRpY29uOiBJY29ucy5DbGlwYm9hcmQsXG5cdFx0XHRzaXplOiBCdXR0b25TaXplLkNvbXBhY3QsXG5cdFx0fVxuXHRcdHJldHVybiBtKFwiLm1iXCIsIFtcblx0XHRcdG0oVGV4dEZpZWxkLCB7XG5cdFx0XHRcdGxhYmVsOiBcInRvdHBTZWNyZXRfbGFiZWxcIixcblx0XHRcdFx0aGVscExhYmVsOiAoKSA9PiBsYW5nLmdldChpc0FwcCgpID8gXCJ0b3RwVHJhbnNmZXJTZWNyZXRBcHBfbXNnXCIgOiBcInRvdHBUcmFuc2ZlclNlY3JldF9tc2dcIiksXG5cdFx0XHRcdHZhbHVlOiB0aGlzLm1vZGVsLnRvdHBLZXlzLnJlYWRhYmxlS2V5LFxuXHRcdFx0XHRpbmplY3Rpb25zUmlnaHQ6ICgpID0+IG0oSWNvbkJ1dHRvbiwgY29weUJ1dHRvbkF0dHJzKSxcblx0XHRcdFx0aXNSZWFkT25seTogdHJ1ZSxcblx0XHRcdH0pLFxuXHRcdFx0aXNBcHAoKVxuXHRcdFx0XHQ/IG0oXG5cdFx0XHRcdFx0XHRcIi5wdFwiLFxuXHRcdFx0XHRcdFx0bShMb2dpbkJ1dHRvbiwge1xuXHRcdFx0XHRcdFx0XHRsYWJlbDogXCJhZGRPcGVuT1RQQXBwX2FjdGlvblwiLFxuXHRcdFx0XHRcdFx0XHRvbmNsaWNrOiAoKSA9PiB0aGlzLm9wZW5PdHBMaW5rKCksXG5cdFx0XHRcdFx0XHR9KSxcblx0XHRcdFx0ICApXG5cdFx0XHRcdDogdGhpcy5yZW5kZXJPdHBRckNvZGUoKSxcblx0XHRcdG0oVGV4dEZpZWxkLCB7XG5cdFx0XHRcdGxhYmVsOiBcInRvdHBDb2RlX2xhYmVsXCIsXG5cdFx0XHRcdHZhbHVlOiB0aGlzLm1vZGVsLnRvdHBDb2RlLFxuXHRcdFx0XHRoZWxwTGFiZWw6ICgpID0+IHRoaXMuc3RhdHVzTWVzc2FnZSgpLFxuXHRcdFx0XHRhdXRvY29tcGxldGVBczogQXV0b2NvbXBsZXRlLm9uZVRpbWVDb2RlLFxuXHRcdFx0XHRvbmlucHV0OiAobmV3VmFsdWUpID0+IHRoaXMubW9kZWwub25Ub3RwVmFsdWVDaGFuZ2UobmV3VmFsdWUpLFxuXHRcdFx0fSksXG5cdFx0XSlcblx0fVxuXG5cdHByaXZhdGUgcmVuZGVyT3RwUXJDb2RlKCk6IENoaWxkcmVuIHtcblx0XHRjb25zdCBvdHBJbmZvID0gdGhpcy5tb2RlbC5vdHBJbmZvLmdldFN5bmMoKVxuXG5cdFx0aWYgKG90cEluZm8pIHtcblx0XHRcdGNvbnN0IHFyQ29kZVN2ZyA9IGFzc2VydE5vdE51bGwob3RwSW5mby5xckNvZGVTdmcpXG5cdFx0XHQvLyBzYW5pdGl6ZWQgaW4gdGhlIG1vZGVsXG5cdFx0XHRyZXR1cm4gbShcIi5mbGV4LWNlbnRlci5wdFwiLCBtLnRydXN0KHFyQ29kZVN2ZykpXG5cdFx0fSBlbHNlIHtcblx0XHRcdHJldHVybiBudWxsXG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyBvcGVuT3RwTGluaygpIHtcblx0XHRjb25zdCB7IHVybCB9ID0gYXdhaXQgdGhpcy5tb2RlbC5vdHBJbmZvLmdldEFzeW5jKClcblx0XHRjb25zdCBzdWNjZXNzZnVsID0gYXdhaXQgbG9jYXRvci5zeXN0ZW1GYWNhZGUub3BlbkxpbmsodXJsKVxuXG5cdFx0aWYgKCFzdWNjZXNzZnVsKSB7XG5cdFx0XHQvLyBub2luc3BlY3Rpb24gRVM2TWlzc2luZ0F3YWl0XG5cdFx0XHREaWFsb2cubWVzc2FnZShcIm5vQXBwQXZhaWxhYmxlX21zZ1wiKVxuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgc3RhdGljIGFzeW5jIGxvYWRXZWJhdXRobkNsaWVudChlbnRpdHlDbGllbnQ6IEVudGl0eUNsaWVudCwgbGF6eVVzZXI6IExhenlMb2FkZWQ8VXNlcj4sIHRva2VuPzogc3RyaW5nKTogUHJvbWlzZTxTZWNvbmRGYWN0b3JFZGl0RGlhbG9nPiB7XG5cdFx0Y29uc3QgdG90cEtleXMgPSBhd2FpdCBsb2NhdG9yLmxvZ2luRmFjYWRlLmdlbmVyYXRlVG90cFNlY3JldCgpXG5cdFx0Y29uc3QgdXNlciA9IGF3YWl0IGxhenlVc2VyLmdldEFzeW5jKClcblx0XHRjb25zdCB3ZWJhdXRoblN1cHBvcnRlZCA9IGF3YWl0IGxvY2F0b3Iud2ViQXV0aG4uaXNTdXBwb3J0ZWQoKVxuXHRcdGNvbnN0IG1vZGVsID0gbmV3IFNlY29uZEZhY3RvckVkaXRNb2RlbChcblx0XHRcdGVudGl0eUNsaWVudCxcblx0XHRcdHVzZXIsXG5cdFx0XHRsb2NhdG9yLndlYkF1dGhuLFxuXHRcdFx0dG90cEtleXMsXG5cdFx0XHR3ZWJhdXRoblN1cHBvcnRlZCxcblx0XHRcdGxvY2F0b3IubG9naW5GYWNhZGUsXG5cdFx0XHRsb2NhdGlvbi5ob3N0bmFtZSxcblx0XHRcdGxvY2F0b3IuZG9tYWluQ29uZmlnUHJvdmlkZXIoKS5nZXRDdXJyZW50RG9tYWluQ29uZmlnKCksXG5cdFx0XHRtLnJlZHJhdyxcblx0XHRcdHRva2VuLFxuXHRcdClcblx0XHRyZXR1cm4gbmV3IFNlY29uZEZhY3RvckVkaXREaWFsb2cobW9kZWwpXG5cdH1cblxuXHRwcml2YXRlIHN0YXR1c0ljb24oKTogQ2hpbGRyZW4ge1xuXHRcdHN3aXRjaCAodGhpcy5tb2RlbC52ZXJpZmljYXRpb25TdGF0dXMpIHtcblx0XHRcdGNhc2UgVmVyaWZpY2F0aW9uU3RhdHVzLlByb2dyZXNzOlxuXHRcdFx0XHRyZXR1cm4gcHJvZ3Jlc3NJY29uKClcblxuXHRcdFx0Y2FzZSBWZXJpZmljYXRpb25TdGF0dXMuU3VjY2Vzczpcblx0XHRcdFx0cmV0dXJuIG0oSWNvbiwge1xuXHRcdFx0XHRcdGljb246IEljb25zLkNoZWNrbWFyayxcblx0XHRcdFx0XHRzaXplOiBJY29uU2l6ZS5NZWRpdW0sXG5cdFx0XHRcdFx0c3R5bGU6IHtcblx0XHRcdFx0XHRcdGZpbGw6IHRoZW1lLmNvbnRlbnRfYWNjZW50LFxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdH0pXG5cblx0XHRcdGNhc2UgVmVyaWZpY2F0aW9uU3RhdHVzLkZhaWxlZDpcblx0XHRcdFx0cmV0dXJuIG0oSWNvbiwge1xuXHRcdFx0XHRcdGljb246IEljb25zLkNhbmNlbCxcblx0XHRcdFx0XHRzaXplOiBJY29uU2l6ZS5NZWRpdW0sXG5cdFx0XHRcdFx0c3R5bGU6IHtcblx0XHRcdFx0XHRcdGZpbGw6IHRoZW1lLmNvbnRlbnRfYWNjZW50LFxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdH0pXG5cblx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdHJldHVybiBudWxsXG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBzdGF0dXNNZXNzYWdlKCk6IHN0cmluZyB7XG5cdFx0aWYgKHRoaXMubW9kZWwuc2VsZWN0ZWRUeXBlID09PSBTZWNvbmRGYWN0b3JUeXBlLndlYmF1dGhuKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5tb2RlbC52ZXJpZmljYXRpb25TdGF0dXMgPT09IFZlcmlmaWNhdGlvblN0YXR1cy5TdWNjZXNzID8gbGFuZy5nZXQoXCJyZWdpc3RlcmVkVTJmRGV2aWNlX21zZ1wiKSA6IGxhbmcuZ2V0KFwidW5yZWNvZ25pemVkVTJmRGV2aWNlX21zZ1wiKVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRpZiAodGhpcy5tb2RlbC52ZXJpZmljYXRpb25TdGF0dXMgPT09IFZlcmlmaWNhdGlvblN0YXR1cy5TdWNjZXNzKSB7XG5cdFx0XHRcdHJldHVybiBsYW5nLmdldChcInRvdHBDb2RlQ29uZmlybWVkX21zZ1wiKVxuXHRcdFx0fSBlbHNlIGlmICh0aGlzLm1vZGVsLnZlcmlmaWNhdGlvblN0YXR1cyA9PT0gVmVyaWZpY2F0aW9uU3RhdHVzLkZhaWxlZCkge1xuXHRcdFx0XHRyZXR1cm4gbGFuZy5nZXQoXCJ0b3RwQ29kZVdyb25nX21zZ1wiKVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmV0dXJuIGxhbmcuZ2V0KFwidG90cENvZGVFbnRlcl9tc2dcIilcblx0XHRcdH1cblx0XHR9XG5cdH1cbn1cbiIsImltcG9ydCBtLCB7IENoaWxkcmVuIH0gZnJvbSBcIm1pdGhyaWxcIlxuaW1wb3J0IHsgYXNzZXJ0TWFpbk9yTm9kZSB9IGZyb20gXCIuLi8uLi8uLi9hcGkvY29tbW9uL0Vudi5qc1wiXG5pbXBvcnQgdHlwZSB7IFNlY29uZEZhY3RvciwgVXNlciB9IGZyb20gXCIuLi8uLi8uLi9hcGkvZW50aXRpZXMvc3lzL1R5cGVSZWZzLmpzXCJcbmltcG9ydCB7IFNlY29uZEZhY3RvclR5cGVSZWYgfSBmcm9tIFwiLi4vLi4vLi4vYXBpL2VudGl0aWVzL3N5cy9UeXBlUmVmcy5qc1wiXG5pbXBvcnQgeyBhc3NlcnROb3ROdWxsLCBMYXp5TG9hZGVkLCBuZXZlck51bGwsIG5vT3AgfSBmcm9tIFwiQHR1dGFvL3R1dGFub3RhLXV0aWxzXCJcbmltcG9ydCB7IEljb25zIH0gZnJvbSBcIi4uLy4uLy4uL2d1aS9iYXNlL2ljb25zL0ljb25zLmpzXCJcbmltcG9ydCB7IEluZm9MaW5rLCBsYW5nIH0gZnJvbSBcIi4uLy4uLy4uL21pc2MvTGFuZ3VhZ2VWaWV3TW9kZWwuanNcIlxuaW1wb3J0IHsgYXNzZXJ0RW51bVZhbHVlLCBTZWNvbmRGYWN0b3JUeXBlIH0gZnJvbSBcIi4uLy4uLy4uL2FwaS9jb21tb24vVHV0YW5vdGFDb25zdGFudHMuanNcIlxuaW1wb3J0IHR5cGUgeyBUYWJsZUF0dHJzLCBUYWJsZUxpbmVBdHRycyB9IGZyb20gXCIuLi8uLi8uLi9ndWkvYmFzZS9UYWJsZS5qc1wiXG5pbXBvcnQgeyBDb2x1bW5XaWR0aCwgVGFibGUgfSBmcm9tIFwiLi4vLi4vLi4vZ3VpL2Jhc2UvVGFibGUuanNcIlxuaW1wb3J0IHsgTm90QXV0aG9yaXplZEVycm9yLCBOb3RGb3VuZEVycm9yIH0gZnJvbSBcIi4uLy4uLy4uL2FwaS9jb21tb24vZXJyb3IvUmVzdEVycm9yLmpzXCJcbmltcG9ydCB7IGlmQWxsb3dlZFR1dGFMaW5rcyB9IGZyb20gXCIuLi8uLi8uLi9ndWkvYmFzZS9HdWlVdGlscy5qc1wiXG5pbXBvcnQgeyBsb2NhdG9yIH0gZnJvbSBcIi4uLy4uLy4uL2FwaS9tYWluL0NvbW1vbkxvY2F0b3IuanNcIlxuaW1wb3J0IHsgU2Vjb25kRmFjdG9yRWRpdERpYWxvZyB9IGZyb20gXCIuL1NlY29uZEZhY3RvckVkaXREaWFsb2cuanNcIlxuaW1wb3J0IHsgU2Vjb25kRmFjdG9yVHlwZVRvTmFtZVRleHRJZCB9IGZyb20gXCIuL1NlY29uZEZhY3RvckVkaXRNb2RlbC5qc1wiXG5pbXBvcnQgeyBJY29uQnV0dG9uQXR0cnMgfSBmcm9tIFwiLi4vLi4vLi4vZ3VpL2Jhc2UvSWNvbkJ1dHRvbi5qc1wiXG5pbXBvcnQgeyBCdXR0b25TaXplIH0gZnJvbSBcIi4uLy4uLy4uL2d1aS9iYXNlL0J1dHRvblNpemUuanNcIlxuaW1wb3J0IHsgYXBwSWRUb0xvZ2luVXJsIH0gZnJvbSBcIi4uLy4uLy4uL21pc2MvMmZhL1NlY29uZEZhY3RvclV0aWxzLmpzXCJcbmltcG9ydCB7IERvbWFpbkNvbmZpZ1Byb3ZpZGVyIH0gZnJvbSBcIi4uLy4uLy4uL2FwaS9jb21tb24vRG9tYWluQ29uZmlnUHJvdmlkZXIuanNcIlxuaW1wb3J0IHsgRW50aXR5VXBkYXRlRGF0YSwgaXNVcGRhdGVGb3JUeXBlUmVmIH0gZnJvbSBcIi4uLy4uLy4uL2FwaS9jb21tb24vdXRpbHMvRW50aXR5VXBkYXRlVXRpbHMuanNcIlxuaW1wb3J0IHsgTW9yZUluZm9MaW5rIH0gZnJvbSBcIi4uLy4uLy4uL21pc2MvbmV3cy9Nb3JlSW5mb0xpbmsuanNcIlxuaW1wb3J0IHsgc2hvd1JlcXVlc3RQYXNzd29yZERpYWxvZyB9IGZyb20gXCIuLi8uLi8uLi9taXNjL3Bhc3N3b3Jkcy9QYXNzd29yZFJlcXVlc3REaWFsb2dcIlxuaW1wb3J0IHsgTG9naW5GYWNhZGUgfSBmcm9tIFwiLi4vLi4vLi4vYXBpL3dvcmtlci9mYWNhZGVzL0xvZ2luRmFjYWRlXCJcbmltcG9ydCB7IHNob3dQcm9ncmVzc0RpYWxvZyB9IGZyb20gXCIuLi8uLi8uLi9ndWkvZGlhbG9ncy9Qcm9ncmVzc0RpYWxvZ1wiXG5pbXBvcnQgeyBEaWFsb2cgfSBmcm9tIFwiLi4vLi4vLi4vZ3VpL2Jhc2UvRGlhbG9nXCJcblxuYXNzZXJ0TWFpbk9yTm9kZSgpXG5cbmV4cG9ydCBjbGFzcyBTZWNvbmRGYWN0b3JzRWRpdEZvcm0ge1xuXHRfMkZBTGluZUF0dHJzOiBUYWJsZUxpbmVBdHRyc1tdXG5cblx0Y29uc3RydWN0b3IoXG5cdFx0cHJpdmF0ZSByZWFkb25seSB1c2VyOiBMYXp5TG9hZGVkPFVzZXI+LFxuXHRcdHByaXZhdGUgcmVhZG9ubHkgZG9tYWluQ29uZmlnUHJvdmlkZXI6IERvbWFpbkNvbmZpZ1Byb3ZpZGVyLFxuXHRcdHByaXZhdGUgcmVhZG9ubHkgbG9naW5GYWNhZGU6IExvZ2luRmFjYWRlLFxuXHRcdHByaXZhdGUgYXNrRm9yUGFzc3dvcmQ6IGJvb2xlYW4sXG5cdFx0cHJpdmF0ZSBpc0RlYWN0aXZhdGVkOiBib29sZWFuLFxuXHQpIHtcblx0XHR0aGlzLl8yRkFMaW5lQXR0cnMgPSBbXVxuXG5cdFx0dGhpcy5fdXBkYXRlU2Vjb25kRmFjdG9ycygpXG5cblx0XHR0aGlzLnZpZXcgPSB0aGlzLnZpZXcuYmluZCh0aGlzKVxuXHR9XG5cblx0dmlldygpOiBDaGlsZHJlbiB7XG5cdFx0Y29uc3Qgc2Vjb25kRmFjdG9yVGFibGVBdHRyczogVGFibGVBdHRycyA9IHtcblx0XHRcdGNvbHVtbkhlYWRpbmc6IFtcIm5hbWVfbGFiZWxcIiwgXCJ0eXBlX2xhYmVsXCJdLFxuXHRcdFx0Y29sdW1uV2lkdGhzOiBbQ29sdW1uV2lkdGguTGFyZ2VzdCwgQ29sdW1uV2lkdGguTGFyZ2VzdF0sXG5cdFx0XHRsaW5lczogdGhpcy5fMkZBTGluZUF0dHJzLFxuXHRcdFx0c2hvd0FjdGlvbkJ1dHRvbkNvbHVtbjogdHJ1ZSxcblx0XHRcdGFkZEJ1dHRvbkF0dHJzOiB7XG5cdFx0XHRcdHRpdGxlOiBcImFkZFNlY29uZEZhY3Rvcl9hY3Rpb25cIixcblx0XHRcdFx0Y2xpY2s6ICgpID0+IHtcblx0XHRcdFx0XHRpZiAodGhpcy5pc0RlYWN0aXZhdGVkKSB7XG5cdFx0XHRcdFx0XHREaWFsb2cubWVzc2FnZShcInVzZXJBY2NvdW50RGVhY3RpdmF0ZWRfbXNnXCIpXG5cdFx0XHRcdFx0fSBlbHNlIGlmICh0aGlzLmFza0ZvclBhc3N3b3JkKSB7XG5cdFx0XHRcdFx0XHR0aGlzLnNob3dBZGRTZWNvbmRGYWN0b3JEaWFsb2dXaXRoUGFzc3dvcmRDaGVjaygpXG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHRoaXMuc2hvd0FkZFNlY29uZEZhY3RvckRpYWxvZygpXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LFxuXHRcdFx0XHRpY29uOiBJY29ucy5BZGQsXG5cdFx0XHRcdHNpemU6IEJ1dHRvblNpemUuQ29tcGFjdCxcblx0XHRcdH0sXG5cdFx0fVxuXHRcdHJldHVybiBbXG5cdFx0XHRtKFwiLmg0Lm10LWxcIiwgbGFuZy5nZXQoXCJzZWNvbmRGYWN0b3JBdXRoZW50aWNhdGlvbl9sYWJlbFwiKSksXG5cdFx0XHRtKFRhYmxlLCBzZWNvbmRGYWN0b3JUYWJsZUF0dHJzKSxcblx0XHRcdHRoaXMuZG9tYWluQ29uZmlnUHJvdmlkZXIuZ2V0Q3VycmVudERvbWFpbkNvbmZpZygpLmZpcnN0UGFydHlEb21haW5cblx0XHRcdFx0PyBbXG5cdFx0XHRcdFx0XHRpZkFsbG93ZWRUdXRhTGlua3MobG9jYXRvci5sb2dpbnMsIEluZm9MaW5rLlNlY29uZEZhY3RvciwgKGxpbmspID0+XG5cdFx0XHRcdFx0XHRcdG0oTW9yZUluZm9MaW5rLCB7XG5cdFx0XHRcdFx0XHRcdFx0bGluazogbGluayxcblx0XHRcdFx0XHRcdFx0XHRpc1NtYWxsOiB0cnVlLFxuXHRcdFx0XHRcdFx0XHR9KSxcblx0XHRcdFx0XHRcdCksXG5cdFx0XHRcdCAgXVxuXHRcdFx0XHQ6IG51bGwsXG5cdFx0XVxuXHR9XG5cblx0YXN5bmMgX3VwZGF0ZVNlY29uZEZhY3RvcnMoKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0Y29uc3QgdXNlciA9IGF3YWl0IHRoaXMudXNlci5nZXRBc3luYygpXG5cdFx0Y29uc3QgZmFjdG9ycyA9IGF3YWl0IGxvY2F0b3IuZW50aXR5Q2xpZW50LmxvYWRBbGwoU2Vjb25kRmFjdG9yVHlwZVJlZiwgbmV2ZXJOdWxsKHVzZXIuYXV0aCkuc2Vjb25kRmFjdG9ycylcblx0XHQvLyBJZiB3ZSBoYXZlIGtleXMgcmVnaXN0ZXJlZCBvbiBtdWx0aXBsZSBkb21haW5zIChyZWFkOiB3aGl0ZWxhYmVsKSB0aGVuIHdlIGRpc3BsYXkgZG9tYWluIGZvciBlYWNoXG5cdFx0Y29uc3QgbG9naW5Eb21haW5zID0gbmV3IFNldDxzdHJpbmc+KClcblxuXHRcdGZvciAoY29uc3QgZiBvZiBmYWN0b3JzKSB7XG5cdFx0XHRjb25zdCBpc1UyRiA9IGYudHlwZSA9PT0gU2Vjb25kRmFjdG9yVHlwZS51MmYgfHwgZi50eXBlID09PSBTZWNvbmRGYWN0b3JUeXBlLndlYmF1dGhuXG5cblx0XHRcdGlmIChpc1UyRikge1xuXHRcdFx0XHRjb25zdCBsb2dpbkRvbWFpbiA9IGFwcElkVG9Mb2dpblVybChhc3NlcnROb3ROdWxsKGYudTJmKS5hcHBJZCwgdGhpcy5kb21haW5Db25maWdQcm92aWRlcilcblx0XHRcdFx0bG9naW5Eb21haW5zLmFkZChsb2dpbkRvbWFpbilcblx0XHRcdH1cblx0XHR9XG5cblx0XHR0aGlzLl8yRkFMaW5lQXR0cnMgPSBmYWN0b3JzLm1hcCgoZikgPT4ge1xuXHRcdFx0Y29uc3QgcmVtb3ZlQnV0dG9uQXR0cnM6IEljb25CdXR0b25BdHRycyA9IHtcblx0XHRcdFx0dGl0bGU6IFwicmVtb3ZlX2FjdGlvblwiLFxuXHRcdFx0XHRjbGljazogKCkgPT4ge1xuXHRcdFx0XHRcdGlmICh0aGlzLmlzRGVhY3RpdmF0ZWQpIHtcblx0XHRcdFx0XHRcdERpYWxvZy5tZXNzYWdlKFwidXNlckFjY291bnREZWFjdGl2YXRlZF9tc2dcIilcblx0XHRcdFx0XHR9IGVsc2UgaWYgKHRoaXMuYXNrRm9yUGFzc3dvcmQpIHtcblx0XHRcdFx0XHRcdHRoaXMucmVtb3ZlU2Vjb25kRmFjdG9yV2l0aFBhc3N3b3JkQ2hlY2soZilcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0dGhpcy5yZW1vdmVTZWNvbmRGYWN0b3IoZilcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGljb246IEljb25zLkNhbmNlbCxcblx0XHRcdFx0c2l6ZTogQnV0dG9uU2l6ZS5Db21wYWN0LFxuXHRcdFx0fVxuXG5cdFx0XHRjb25zdCBmYWN0b3JOYW1lID0gdGhpcy5mb3JtYXRTZWNvbmRGYWN0b3JOYW1lKGYsIGxvZ2luRG9tYWlucylcblx0XHRcdGNvbnN0IHR5cGUgPSBhc3NlcnRFbnVtVmFsdWUoU2Vjb25kRmFjdG9yVHlwZSwgZi50eXBlKVxuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0Y2VsbHM6IFtmYWN0b3JOYW1lLCBsYW5nLmdldChTZWNvbmRGYWN0b3JUeXBlVG9OYW1lVGV4dElkW3R5cGVdKV0sXG5cdFx0XHRcdGFjdGlvbkJ1dHRvbkF0dHJzOiBsb2NhdG9yLmxvZ2lucy5nZXRVc2VyQ29udHJvbGxlcigpLmlzR2xvYmFsQWRtaW4oKSA/IHJlbW92ZUJ1dHRvbkF0dHJzIDogbnVsbCxcblx0XHRcdH1cblx0XHR9KVxuXHRcdG0ucmVkcmF3KClcblx0fVxuXG5cdHByaXZhdGUgZm9ybWF0U2Vjb25kRmFjdG9yTmFtZShmYWN0b3I6IFNlY29uZEZhY3RvciwgbG9naW5Eb21haW5zOiBSZWFkb25seVNldDxzdHJpbmc+KTogc3RyaW5nIHtcblx0XHRjb25zdCBpc1UyRiA9IGZhY3Rvci50eXBlID09PSBTZWNvbmRGYWN0b3JUeXBlLnUyZiB8fCBmYWN0b3IudHlwZSA9PT0gU2Vjb25kRmFjdG9yVHlwZS53ZWJhdXRoblxuXHRcdC8vIHdlIG9ubHkgc2hvdyB0aGUgZG9tYWlucyB3aGVuIHdlIGhhdmUga2V5cyByZWdpc3RlcmVkIGZvciBkaWZmZXJlbnQgZG9tYWluc1xuXHRcdGNvbnN0IHJlcXVpcmVzRG9tYWluRGlzYW1iaWd1YXRpb24gPSBpc1UyRiAmJiBsb2dpbkRvbWFpbnMuc2l6ZSA+IDFcblxuXHRcdGlmIChyZXF1aXJlc0RvbWFpbkRpc2FtYmlndWF0aW9uKSB7XG5cdFx0XHRjb25zdCBwcmVmaXggPSBmYWN0b3IubmFtZS5sZW5ndGggPiAwID8gXCIgLSBcIiA6IFwiXCJcblx0XHRcdGNvbnN0IGxvZ2luVXJsU3RyaW5nID0gYXBwSWRUb0xvZ2luVXJsKG5ldmVyTnVsbChmYWN0b3IudTJmKS5hcHBJZCwgdGhpcy5kb21haW5Db25maWdQcm92aWRlcilcblx0XHRcdGNvbnN0IGxvZ2luRG9tYWluID0gbmV3IFVSTChsb2dpblVybFN0cmluZykuaG9zdG5hbWVcblx0XHRcdHJldHVybiBmYWN0b3IubmFtZSArIHByZWZpeCArIGxvZ2luRG9tYWluXG5cdFx0fSBlbHNlIHtcblx0XHRcdHJldHVybiBmYWN0b3IubmFtZVxuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgc2hvd0FkZFNlY29uZEZhY3RvckRpYWxvZ1dpdGhQYXNzd29yZENoZWNrKCkge1xuXHRcdGNvbnN0IGRpYWxvZyA9IHNob3dSZXF1ZXN0UGFzc3dvcmREaWFsb2coe1xuXHRcdFx0YWN0aW9uOiBhc3luYyAocGFzc3BocmFzZSkgPT4ge1xuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdGNvbnN0IHRva2VuID0gYXdhaXQgdGhpcy5sb2dpbkZhY2FkZS5nZXRWZXJpZmllclRva2VuKHBhc3NwaHJhc2UpXG5cdFx0XHRcdFx0dGhpcy5zaG93QWRkU2Vjb25kRmFjdG9yRGlhbG9nKHRva2VuKVxuXHRcdFx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRcdFx0aWYgKGUgaW5zdGFuY2VvZiBOb3RBdXRob3JpemVkRXJyb3IpIHtcblx0XHRcdFx0XHRcdHJldHVybiBsYW5nLmdldChcImludmFsaWRQYXNzd29yZF9tc2dcIilcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0dGhyb3cgZVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRkaWFsb2cuY2xvc2UoKVxuXHRcdFx0XHRyZXR1cm4gXCJcIlxuXHRcdFx0fSxcblx0XHRcdGNhbmNlbDoge1xuXHRcdFx0XHR0ZXh0SWQ6IFwiY2FuY2VsX2FjdGlvblwiLFxuXHRcdFx0XHRhY3Rpb246IG5vT3AsXG5cdFx0XHR9LFxuXHRcdH0pXG5cdH1cblxuXHRwcml2YXRlIHNob3dBZGRTZWNvbmRGYWN0b3JEaWFsb2codG9rZW4/OiBzdHJpbmcpIHtcblx0XHRTZWNvbmRGYWN0b3JFZGl0RGlhbG9nLmxvYWRBbmRTaG93KGxvY2F0b3IuZW50aXR5Q2xpZW50LCB0aGlzLnVzZXIsIHRva2VuKVxuXHR9XG5cblx0cHJpdmF0ZSByZW1vdmVTZWNvbmRGYWN0b3JXaXRoUGFzc3dvcmRDaGVjayhzZWNvbmRGYWN0b3JUb1JlbW92ZTogU2Vjb25kRmFjdG9yKSB7XG5cdFx0Y29uc3QgZGlhbG9nID0gc2hvd1JlcXVlc3RQYXNzd29yZERpYWxvZyh7XG5cdFx0XHRhY3Rpb246IGFzeW5jIChwYXNzcGhyYXNlKSA9PiB7XG5cdFx0XHRcdGxldCB0b2tlbiA9IHVuZGVmaW5lZFxuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdHRva2VuID0gYXdhaXQgdGhpcy5sb2dpbkZhY2FkZS5nZXRWZXJpZmllclRva2VuKHBhc3NwaHJhc2UpXG5cdFx0XHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdFx0XHRpZiAoZSBpbnN0YW5jZW9mIE5vdEF1dGhvcml6ZWRFcnJvcikge1xuXHRcdFx0XHRcdFx0cmV0dXJuIGxhbmcuZ2V0KFwiaW52YWxpZFBhc3N3b3JkX21zZ1wiKVxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHR0aHJvdyBlXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdHRoaXMucmVtb3ZlU2Vjb25kRmFjdG9yKHNlY29uZEZhY3RvclRvUmVtb3ZlLCB0b2tlbilcblx0XHRcdFx0ZGlhbG9nLmNsb3NlKClcblx0XHRcdFx0cmV0dXJuIFwiXCJcblx0XHRcdH0sXG5cdFx0XHRtZXNzYWdlVGV4dDogbGFuZy5nZXQoXCJjb25maXJtRGVsZXRlU2Vjb25kRmFjdG9yX21zZ1wiKSxcblx0XHRcdGNhbmNlbDoge1xuXHRcdFx0XHR0ZXh0SWQ6IFwiY2FuY2VsX2FjdGlvblwiLFxuXHRcdFx0XHRhY3Rpb246IG5vT3AsXG5cdFx0XHR9LFxuXHRcdH0pXG5cdH1cblxuXHRwcml2YXRlIHJlbW92ZVNlY29uZEZhY3RvcihzZWNvbmRGYWN0b3JUb1JlbW92ZTogU2Vjb25kRmFjdG9yLCB0b2tlbj86IHN0cmluZykge1xuXHRcdHRyeSB7XG5cdFx0XHRsZXQgb3B0aW9ucyA9IHVuZGVmaW5lZFxuXHRcdFx0aWYgKHRva2VuKSB7XG5cdFx0XHRcdG9wdGlvbnMgPSB7IGV4dHJhSGVhZGVyczogeyB0b2tlbiB9IH1cblx0XHRcdH1cblx0XHRcdHNob3dQcm9ncmVzc0RpYWxvZyhcInBsZWFzZVdhaXRfbXNnXCIsIGxvY2F0b3IuZW50aXR5Q2xpZW50LmVyYXNlKHNlY29uZEZhY3RvclRvUmVtb3ZlLCBvcHRpb25zKSlcblx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRpZiAoZSBpbnN0YW5jZW9mIE5vdEZvdW5kRXJyb3IpIHtcblx0XHRcdFx0Y29uc29sZS5sb2coXCJjb3VsZCBub3QgZGVsZXRlIHNlY29uZCBmYWN0b3IgKGFscmVhZHkgZGVsZXRlZClcIilcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRocm93IGVcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRlbnRpdHlFdmVudFJlY2VpdmVkKHVwZGF0ZTogRW50aXR5VXBkYXRlRGF0YSk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGlmIChpc1VwZGF0ZUZvclR5cGVSZWYoU2Vjb25kRmFjdG9yVHlwZVJlZiwgdXBkYXRlKSkge1xuXHRcdFx0cmV0dXJuIHRoaXMuX3VwZGF0ZVNlY29uZEZhY3RvcnMoKVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKClcblx0XHR9XG5cdH1cbn1cbiIsImltcG9ydCBtLCB7IENoaWxkcmVuIH0gZnJvbSBcIm1pdGhyaWxcIlxuaW1wb3J0IHN0cmVhbSBmcm9tIFwibWl0aHJpbC9zdHJlYW1cIlxuaW1wb3J0IHR5cGUgeyBUZXh0RmllbGRBdHRycyB9IGZyb20gXCIuLi8uLi9ndWkvYmFzZS9UZXh0RmllbGQuanNcIlxuaW1wb3J0IHsgVGV4dEZpZWxkIH0gZnJvbSBcIi4uLy4uL2d1aS9iYXNlL1RleHRGaWVsZC5qc1wiXG5pbXBvcnQgeyBJbmZvTGluaywgbGFuZyB9IGZyb20gXCIuLi8uLi9taXNjL0xhbmd1YWdlVmlld01vZGVsLmpzXCJcbmltcG9ydCB7IEljb25zIH0gZnJvbSBcIi4uLy4uL2d1aS9iYXNlL2ljb25zL0ljb25zLmpzXCJcbmltcG9ydCB7IEN1c3RvbWVyUHJvcGVydGllc1R5cGVSZWYsIFNlc3Npb24sIFNlc3Npb25UeXBlUmVmIH0gZnJvbSBcIi4uLy4uL2FwaS9lbnRpdGllcy9zeXMvVHlwZVJlZnMuanNcIlxuaW1wb3J0IHsgYXNzZXJ0Tm90TnVsbCwgTGF6eUxvYWRlZCwgbmV2ZXJOdWxsLCBvZkNsYXNzIH0gZnJvbSBcIkB0dXRhby90dXRhbm90YS11dGlsc1wiXG5pbXBvcnQgeyBmb3JtYXREYXRlVGltZUZyb21ZZXN0ZXJkYXlPbiB9IGZyb20gXCIuLi8uLi9taXNjL0Zvcm1hdHRlci5qc1wiXG5pbXBvcnQgeyBTZXNzaW9uU3RhdGUgfSBmcm9tIFwiLi4vLi4vYXBpL2NvbW1vbi9UdXRhbm90YUNvbnN0YW50cy5qc1wiXG5pbXBvcnQgeyBTZWNvbmRGYWN0b3JzRWRpdEZvcm0gfSBmcm9tIFwiLi9zZWNvbmRmYWN0b3IvU2Vjb25kRmFjdG9yc0VkaXRGb3JtLmpzXCJcblxuaW1wb3J0IHsgTm90Rm91bmRFcnJvciB9IGZyb20gXCIuLi8uLi9hcGkvY29tbW9uL2Vycm9yL1Jlc3RFcnJvci5qc1wiXG5pbXBvcnQgKiBhcyBSZWNvdmVyQ29kZURpYWxvZyBmcm9tIFwiLi9SZWNvdmVyQ29kZURpYWxvZy5qc1wiXG5pbXBvcnQgeyBhdHRhY2hEcm9wZG93biB9IGZyb20gXCIuLi8uLi9ndWkvYmFzZS9Ecm9wZG93bi5qc1wiXG5pbXBvcnQgeyBFeHBhbmRlckJ1dHRvbiwgRXhwYW5kZXJQYW5lbCB9IGZyb20gXCIuLi8uLi9ndWkvYmFzZS9FeHBhbmRlci5qc1wiXG5pbXBvcnQgeyBDb2x1bW5XaWR0aCwgVGFibGUgfSBmcm9tIFwiLi4vLi4vZ3VpL2Jhc2UvVGFibGUuanNcIlxuaW1wb3J0IHsgaWZBbGxvd2VkVHV0YUxpbmtzIH0gZnJvbSBcIi4uLy4uL2d1aS9iYXNlL0d1aVV0aWxzLmpzXCJcbmltcG9ydCB7IENyZWRlbnRpYWxFbmNyeXB0aW9uTW9kZSB9IGZyb20gXCIuLi8uLi9taXNjL2NyZWRlbnRpYWxzL0NyZWRlbnRpYWxFbmNyeXB0aW9uTW9kZS5qc1wiXG5pbXBvcnQgeyBDcmVkZW50aWFsc1Byb3ZpZGVyIH0gZnJvbSBcIi4uLy4uL21pc2MvY3JlZGVudGlhbHMvQ3JlZGVudGlhbHNQcm92aWRlci5qc1wiXG5pbXBvcnQgeyBzaG93Q3JlZGVudGlhbHNFbmNyeXB0aW9uTW9kZURpYWxvZyB9IGZyb20gXCIuLi8uLi9ndWkvZGlhbG9ncy9TZWxlY3RDcmVkZW50aWFsc0VuY3J5cHRpb25Nb2RlRGlhbG9nLmpzXCJcbmltcG9ydCB7IGFzc2VydE1haW5Pck5vZGUsIGlzRGVza3RvcCB9IGZyb20gXCIuLi8uLi9hcGkvY29tbW9uL0Vudi5qc1wiXG5pbXBvcnQgeyBsb2NhdG9yIH0gZnJvbSBcIi4uLy4uL2FwaS9tYWluL0NvbW1vbkxvY2F0b3IuanNcIlxuaW1wb3J0IHsgZWxlbWVudElkUGFydCwgZ2V0RWxlbWVudElkIH0gZnJvbSBcIi4uLy4uL2FwaS9jb21tb24vdXRpbHMvRW50aXR5VXRpbHMuanNcIlxuaW1wb3J0IHsgc2hvd0NoYW5nZU93blBhc3N3b3JkRGlhbG9nIH0gZnJvbSBcIi4vQ2hhbmdlUGFzc3dvcmREaWFsb2dzLmpzXCJcbmltcG9ydCB7IEljb25CdXR0b24sIEljb25CdXR0b25BdHRycyB9IGZyb20gXCIuLi8uLi9ndWkvYmFzZS9JY29uQnV0dG9uLmpzXCJcbmltcG9ydCB7IEJ1dHRvblNpemUgfSBmcm9tIFwiLi4vLi4vZ3VpL2Jhc2UvQnV0dG9uU2l6ZS5qc1wiXG5pbXBvcnQgeyBEcm9wRG93blNlbGVjdG9yLCBEcm9wRG93blNlbGVjdG9yQXR0cnMgfSBmcm9tIFwiLi4vLi4vZ3VpL2Jhc2UvRHJvcERvd25TZWxlY3Rvci5qc1wiXG5pbXBvcnQgeyBVc2FnZVRlc3RNb2RlbCB9IGZyb20gXCIuLi8uLi9taXNjL1VzYWdlVGVzdE1vZGVsLmpzXCJcbmltcG9ydCB7IFVzZXJTZXR0aW5nc0dyb3VwUm9vdFR5cGVSZWYgfSBmcm9tIFwiLi4vLi4vYXBpL2VudGl0aWVzL3R1dGFub3RhL1R5cGVSZWZzLmpzXCJcbmltcG9ydCB7IEVudGl0eVVwZGF0ZURhdGEsIGlzVXBkYXRlRm9yVHlwZVJlZiB9IGZyb20gXCIuLi8uLi9hcGkvY29tbW9uL3V0aWxzL0VudGl0eVVwZGF0ZVV0aWxzLmpzXCJcbmltcG9ydCB7IERpYWxvZyB9IGZyb20gXCIuLi8uLi9ndWkvYmFzZS9EaWFsb2cuanNcIlxuaW1wb3J0IHsgTW9yZUluZm9MaW5rIH0gZnJvbSBcIi4uLy4uL21pc2MvbmV3cy9Nb3JlSW5mb0xpbmsuanNcIlxuaW1wb3J0IHsgQXBwTG9ja01ldGhvZCB9IGZyb20gXCIuLi8uLi9uYXRpdmUvY29tbW9uL2dlbmVyYXRlZGlwYy9BcHBMb2NrTWV0aG9kLmpzXCJcbmltcG9ydCB7IE1vYmlsZVN5c3RlbUZhY2FkZSB9IGZyb20gXCIuLi8uLi9uYXRpdmUvY29tbW9uL2dlbmVyYXRlZGlwYy9Nb2JpbGVTeXN0ZW1GYWNhZGUuanNcIlxuaW1wb3J0IHsgVXBkYXRhYmxlU2V0dGluZ3NWaWV3ZXIgfSBmcm9tIFwiLi4vSW50ZXJmYWNlcy5qc1wiXG5cbmFzc2VydE1haW5Pck5vZGUoKVxuXG5leHBvcnQgY2xhc3MgTG9naW5TZXR0aW5nc1ZpZXdlciBpbXBsZW1lbnRzIFVwZGF0YWJsZVNldHRpbmdzVmlld2VyIHtcblx0cHJpdmF0ZSByZWFkb25seSBfbWFpbEFkZHJlc3MgPSBzdHJlYW0obmV2ZXJOdWxsKGxvY2F0b3IubG9naW5zLmdldFVzZXJDb250cm9sbGVyKCkudXNlckdyb3VwSW5mby5tYWlsQWRkcmVzcykpXG5cdHByaXZhdGUgcmVhZG9ubHkgX3N0YXJzID0gc3RyZWFtKFwiKioqXCIpXG5cdHByaXZhdGUgcmVhZG9ubHkgX2Nsb3NlZFNlc3Npb25zRXhwYW5kZWQgPSBzdHJlYW0oZmFsc2UpXG5cdHByaXZhdGUgX3Nlc3Npb25zOiBTZXNzaW9uW10gPSBbXVxuXHRwcml2YXRlIHJlYWRvbmx5IF9zZWNvbmRGYWN0b3JzRm9ybSA9IG5ldyBTZWNvbmRGYWN0b3JzRWRpdEZvcm0oXG5cdFx0bmV3IExhenlMb2FkZWQoKCkgPT4gUHJvbWlzZS5yZXNvbHZlKGxvY2F0b3IubG9naW5zLmdldFVzZXJDb250cm9sbGVyKCkudXNlcikpLFxuXHRcdGxvY2F0b3IuZG9tYWluQ29uZmlnUHJvdmlkZXIoKSxcblx0XHRsb2NhdG9yLmxvZ2luRmFjYWRlLFxuXHRcdHRydWUsXG5cdFx0ZmFsc2UsXG5cdClcblx0cHJpdmF0ZSByZWFkb25seSBfdXNhZ2VUZXN0TW9kZWw6IFVzYWdlVGVzdE1vZGVsXG5cdHByaXZhdGUgY3JlZGVudGlhbEVuY3J5cHRpb25Nb2RlOiBDcmVkZW50aWFsRW5jcnlwdGlvbk1vZGUgfCBudWxsID0gbnVsbFxuXHRwcml2YXRlIGFwcExvY2tNZXRob2Q6IEFwcExvY2tNZXRob2QgfCBudWxsID0gbnVsbFxuXG5cdGNvbnN0cnVjdG9yKHByaXZhdGUgcmVhZG9ubHkgY3JlZGVudGlhbHNQcm92aWRlcjogQ3JlZGVudGlhbHNQcm92aWRlciwgcHJpdmF0ZSByZWFkb25seSBtb2JpbGVTeXN0ZW1GYWNhZGU6IE1vYmlsZVN5c3RlbUZhY2FkZSB8IG51bGwpIHtcblx0XHR0aGlzLl91c2FnZVRlc3RNb2RlbCA9IGxvY2F0b3IudXNhZ2VUZXN0TW9kZWxcblxuXHRcdHRoaXMuX3VwZGF0ZVNlc3Npb25zKClcblx0XHR0aGlzLnVwZGF0ZUFwcExvY2tEYXRhKClcblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgdXBkYXRlQXBwTG9ja0RhdGEoKSB7XG5cdFx0aWYgKGlzRGVza3RvcCgpKSB7XG5cdFx0XHR0aGlzLmNyZWRlbnRpYWxFbmNyeXB0aW9uTW9kZSA9IGF3YWl0IHRoaXMuY3JlZGVudGlhbHNQcm92aWRlci5nZXRDcmVkZW50aWFsRW5jcnlwdGlvbk1vZGUoKVxuXHRcdH0gZWxzZSBpZiAodGhpcy5tb2JpbGVTeXN0ZW1GYWNhZGUpIHtcblx0XHRcdHRoaXMuYXBwTG9ja01ldGhvZCA9IGF3YWl0IHRoaXMubW9iaWxlU3lzdGVtRmFjYWRlLmdldEFwcExvY2tNZXRob2QoKVxuXHRcdH1cblx0XHRtLnJlZHJhdygpXG5cdH1cblxuXHR2aWV3KCk6IENoaWxkcmVuIHtcblx0XHRjb25zdCBtYWlsQWRkcmVzc0F0dHJzOiBUZXh0RmllbGRBdHRycyA9IHtcblx0XHRcdGxhYmVsOiBcIm1haWxBZGRyZXNzX2xhYmVsXCIsXG5cdFx0XHR2YWx1ZTogdGhpcy5fbWFpbEFkZHJlc3MoKSxcblx0XHRcdG9uaW5wdXQ6IHRoaXMuX21haWxBZGRyZXNzLFxuXHRcdFx0aXNSZWFkT25seTogdHJ1ZSxcblx0XHR9XG5cdFx0Y29uc3QgY2hhbmdlUGFzc3dvcmRCdXR0b25BdHRyczogSWNvbkJ1dHRvbkF0dHJzID0ge1xuXHRcdFx0dGl0bGU6IFwiY2hhbmdlUGFzc3dvcmRfbGFiZWxcIixcblx0XHRcdGNsaWNrOiAoKSA9PiBzaG93Q2hhbmdlT3duUGFzc3dvcmREaWFsb2coKSxcblx0XHRcdGljb246IEljb25zLkVkaXQsXG5cdFx0XHRzaXplOiBCdXR0b25TaXplLkNvbXBhY3QsXG5cdFx0fVxuXHRcdGNvbnN0IHBhc3N3b3JkQXR0cnM6IFRleHRGaWVsZEF0dHJzID0ge1xuXHRcdFx0bGFiZWw6IFwicGFzc3dvcmRfbGFiZWxcIixcblx0XHRcdHZhbHVlOiB0aGlzLl9zdGFycygpLFxuXHRcdFx0b25pbnB1dDogdGhpcy5fc3RhcnMsXG5cdFx0XHRpc1JlYWRPbmx5OiB0cnVlLFxuXHRcdFx0aW5qZWN0aW9uc1JpZ2h0OiAoKSA9PiBtKEljb25CdXR0b24sIGNoYW5nZVBhc3N3b3JkQnV0dG9uQXR0cnMpLFxuXHRcdH1cblx0XHRjb25zdCByZWNvdmVyeUNvZGVEcm9wZG93bkJ1dHRvbkF0dHJzOiBJY29uQnV0dG9uQXR0cnMgPSBhdHRhY2hEcm9wZG93bih7XG5cdFx0XHRtYWluQnV0dG9uQXR0cnM6IHtcblx0XHRcdFx0dGl0bGU6IFwiZWRpdF9hY3Rpb25cIixcblx0XHRcdFx0aWNvbjogSWNvbnMuRWRpdCxcblx0XHRcdFx0c2l6ZTogQnV0dG9uU2l6ZS5Db21wYWN0LFxuXHRcdFx0fSxcblx0XHRcdGNoaWxkQXR0cnM6ICgpID0+IFtcblx0XHRcdFx0bG9jYXRvci5sb2dpbnMuZ2V0VXNlckNvbnRyb2xsZXIoKS51c2VyLmF1dGg/LnJlY292ZXJDb2RlXG5cdFx0XHRcdFx0PyB7XG5cdFx0XHRcdFx0XHRcdGxhYmVsOiBcInNob3dfYWN0aW9uXCIsXG5cdFx0XHRcdFx0XHRcdGNsaWNrOiAoKSA9PiBSZWNvdmVyQ29kZURpYWxvZy5zaG93UmVjb3ZlckNvZGVEaWFsb2dBZnRlclBhc3N3b3JkVmVyaWZpY2F0aW9uKFwiZ2V0XCIpLFxuXHRcdFx0XHRcdCAgfVxuXHRcdFx0XHRcdDogbnVsbCxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGxhYmVsOiBuZXZlck51bGwobG9jYXRvci5sb2dpbnMuZ2V0VXNlckNvbnRyb2xsZXIoKS51c2VyLmF1dGgpLnJlY292ZXJDb2RlID8gXCJ1cGRhdGVfYWN0aW9uXCIgOiBcInNldFVwX2FjdGlvblwiLFxuXHRcdFx0XHRcdGNsaWNrOiAoKSA9PiBSZWNvdmVyQ29kZURpYWxvZy5zaG93UmVjb3ZlckNvZGVEaWFsb2dBZnRlclBhc3N3b3JkVmVyaWZpY2F0aW9uKFwiY3JlYXRlXCIpLFxuXHRcdFx0XHR9LFxuXHRcdFx0XSxcblx0XHRcdHNob3dEcm9wZG93bjogKCkgPT4gdHJ1ZSxcblx0XHR9KVxuXHRcdGNvbnN0IHJlY292ZXJ5Q29kZUZpZWxkQXR0cnM6IFRleHRGaWVsZEF0dHJzID0ge1xuXHRcdFx0bGFiZWw6IFwicmVjb3ZlcnlDb2RlX2xhYmVsXCIsXG5cdFx0XHRoZWxwTGFiZWw6ICgpID0+IHtcblx0XHRcdFx0cmV0dXJuIGlmQWxsb3dlZFR1dGFMaW5rcyhsb2NhdG9yLmxvZ2lucywgSW5mb0xpbmsuUmVjb3ZlckNvZGUsIChsaW5rKSA9PiBbbShNb3JlSW5mb0xpbmssIHsgbGluazogbGluayB9KV0pXG5cdFx0XHR9LFxuXHRcdFx0dmFsdWU6IHRoaXMuX3N0YXJzKCksXG5cdFx0XHRvbmlucHV0OiB0aGlzLl9zdGFycyxcblx0XHRcdGlzUmVhZE9ubHk6IHRydWUsXG5cdFx0XHRpbmplY3Rpb25zUmlnaHQ6ICgpID0+IG0oSWNvbkJ1dHRvbiwgcmVjb3ZlcnlDb2RlRHJvcGRvd25CdXR0b25BdHRycyksXG5cdFx0fVxuXHRcdGNvbnN0IHVzYWdlRGF0YU9wdEluQXR0cnM6IERyb3BEb3duU2VsZWN0b3JBdHRyczxib29sZWFuIHwgbnVsbD4gPSB7XG5cdFx0XHRsYWJlbDogXCJ1c2VyVXNhZ2VEYXRhT3B0SW5fbGFiZWxcIixcblx0XHRcdGl0ZW1zOiBbXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRuYW1lOiBsYW5nLmdldChcImFjdGl2YXRlZF9sYWJlbFwiKSxcblx0XHRcdFx0XHR2YWx1ZTogdHJ1ZSxcblx0XHRcdFx0fSxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdG5hbWU6IGxhbmcuZ2V0KFwiZGVhY3RpdmF0ZWRfbGFiZWxcIiksXG5cdFx0XHRcdFx0dmFsdWU6IGZhbHNlLFxuXHRcdFx0XHR9LFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0bmFtZTogbGFuZy5nZXQoXCJ1bmRlY2lkZWRfbGFiZWxcIiksXG5cdFx0XHRcdFx0dmFsdWU6IG51bGwsXG5cdFx0XHRcdFx0c2VsZWN0YWJsZTogZmFsc2UsXG5cdFx0XHRcdH0sXG5cdFx0XHRdLFxuXHRcdFx0c2VsZWN0ZWRWYWx1ZTogbG9jYXRvci5sb2dpbnMuZ2V0VXNlckNvbnRyb2xsZXIoKS51c2VyU2V0dGluZ3NHcm91cFJvb3QudXNhZ2VEYXRhT3B0ZWRJbixcblx0XHRcdHNlbGVjdGlvbkNoYW5nZWRIYW5kbGVyOiAodikgPT4ge1xuXHRcdFx0XHR0aGlzLl91c2FnZVRlc3RNb2RlbC5zZXRPcHRJbkRlY2lzaW9uKGFzc2VydE5vdE51bGwodikpXG5cdFx0XHR9LFxuXHRcdFx0aGVscExhYmVsOiAoKSA9PiB7XG5cdFx0XHRcdHJldHVybiBpZkFsbG93ZWRUdXRhTGlua3MobG9jYXRvci5sb2dpbnMsIEluZm9MaW5rLlVzYWdlLCAobGluaykgPT4gW1xuXHRcdFx0XHRcdG0oXCJzcGFuXCIsIGxhbmcuZ2V0KFwidXNlclVzYWdlRGF0YU9wdEluSW5mb19tc2dcIikgKyBcIiBcIiksXG5cdFx0XHRcdFx0bShNb3JlSW5mb0xpbmssIHsgbGluazogbGluayB9KSxcblx0XHRcdFx0XSlcblx0XHRcdH0sXG5cdFx0XHRkcm9wZG93bldpZHRoOiAyNTAsXG5cdFx0fVxuXG5cdFx0Ly8gTWlnaHQgYmUgbm90IHRoZXJlIHdoZW4gd2UgYXJlIGxvZ2dpbmcgb3V0XG5cdFx0aWYgKGxvY2F0b3IubG9naW5zLmlzVXNlckxvZ2dlZEluKCkpIHtcblx0XHRcdGNvbnN0IHVzZXIgPSBsb2NhdG9yLmxvZ2lucy5nZXRVc2VyQ29udHJvbGxlcigpXG5cdFx0XHRyZXR1cm4gbShcIlwiLCBbXG5cdFx0XHRcdG0oXCIjdXNlci1zZXR0aW5ncy5maWxsLWFic29sdXRlLnNjcm9sbC5wbHItbC5wYi14bFwiLCBbXG5cdFx0XHRcdFx0bShcIi5oNC5tdC1sXCIsIGxhbmcuZ2V0KFwibG9naW5DcmVkZW50aWFsc19sYWJlbFwiKSksXG5cdFx0XHRcdFx0bShUZXh0RmllbGQsIG1haWxBZGRyZXNzQXR0cnMpLFxuXHRcdFx0XHRcdG0oVGV4dEZpZWxkLCBwYXNzd29yZEF0dHJzKSxcblx0XHRcdFx0XHR1c2VyLmlzR2xvYmFsQWRtaW4oKSA/IG0oVGV4dEZpZWxkLCByZWNvdmVyeUNvZGVGaWVsZEF0dHJzKSA6IG51bGwsXG5cdFx0XHRcdFx0dGhpcy5yZW5kZXJBcHBMb2NrRmllbGQoKSxcblx0XHRcdFx0XHRtKHRoaXMuX3NlY29uZEZhY3RvcnNGb3JtKSxcblx0XHRcdFx0XHRtKFwiLmg0Lm10LWxcIiwgbGFuZy5nZXQoXCJhY3RpdmVTZXNzaW9uc19sYWJlbFwiKSksXG5cdFx0XHRcdFx0dGhpcy5fcmVuZGVyQWN0aXZlU2Vzc2lvbnMoKSxcblx0XHRcdFx0XHRtKFwiLnNtYWxsXCIsIGxhbmcuZ2V0KFwic2Vzc2lvbnNJbmZvX21zZ1wiKSksXG5cdFx0XHRcdFx0bShcIi5mbGV4LXNwYWNlLWJldHdlZW4uaXRlbXMtY2VudGVyLm10LWwubWItc1wiLCBbXG5cdFx0XHRcdFx0XHRtKFwiLmg0XCIsIGxhbmcuZ2V0KFwiY2xvc2VkU2Vzc2lvbnNfbGFiZWxcIikpLFxuXHRcdFx0XHRcdFx0bShFeHBhbmRlckJ1dHRvbiwge1xuXHRcdFx0XHRcdFx0XHRsYWJlbDogXCJzaG93X2FjdGlvblwiLFxuXHRcdFx0XHRcdFx0XHRleHBhbmRlZDogdGhpcy5fY2xvc2VkU2Vzc2lvbnNFeHBhbmRlZCgpLFxuXHRcdFx0XHRcdFx0XHRvbkV4cGFuZGVkQ2hhbmdlOiB0aGlzLl9jbG9zZWRTZXNzaW9uc0V4cGFuZGVkLFxuXHRcdFx0XHRcdFx0XHRzaG93V2FybmluZzogZmFsc2UsXG5cdFx0XHRcdFx0XHR9KSxcblx0XHRcdFx0XHRdKSxcblx0XHRcdFx0XHRtKFxuXHRcdFx0XHRcdFx0RXhwYW5kZXJQYW5lbCxcblx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0ZXhwYW5kZWQ6IHRoaXMuX2Nsb3NlZFNlc3Npb25zRXhwYW5kZWQoKSxcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHR0aGlzLl9yZW5kZXJDbG9zZWRTZXNzaW9ucygpLFxuXHRcdFx0XHRcdCksXG5cdFx0XHRcdFx0bShcIi5zbWFsbFwiLCBsYW5nLmdldChcInNlc3Npb25zV2lsbEJlRGVsZXRlZF9tc2dcIikpLFxuXHRcdFx0XHRcdG0oXCIuc21hbGxcIiwgbGFuZy5nZXQoXCJzZXNzaW9uc0luZm9fbXNnXCIpKSxcblx0XHRcdFx0XHR0aGlzLl91c2FnZVRlc3RNb2RlbC5pc0N1c3RvbWVyT3B0ZWRPdXQoKVxuXHRcdFx0XHRcdFx0PyBudWxsXG5cdFx0XHRcdFx0XHQ6IG0oXCJcIiwgW20oXCIuaDQubXQtbFwiLCBsYW5nLmdldChcInVzYWdlRGF0YV9sYWJlbFwiKSksIG0oRHJvcERvd25TZWxlY3RvciwgdXNhZ2VEYXRhT3B0SW5BdHRycyldKSxcblx0XHRcdFx0XSksXG5cdFx0XHRdKVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZXR1cm4gbnVsbFxuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgcmVuZGVyQXBwTG9ja0ZpZWxkKCk6IENoaWxkcmVuIHtcblx0XHRjb25zdCBtb2JpbGVTeXN0ZW1GYWNhZGUgPSB0aGlzLm1vYmlsZVN5c3RlbUZhY2FkZVxuXG5cdFx0Ly8gT24gbW9iaWxlIHdlIGRpc3BsYXkgYXBwIGxvY2sgZGlhbG9nLCBvbiBkZXNrdG9wIGNyZWRlbnRpYWwgZW5jcnlwdGlvbiBkaWFsb2cuIFRoZXkgYXJlIHNpbWlsYXIgYnV0IGRpZmZlcmVudC5cblx0XHRpZiAobW9iaWxlU3lzdGVtRmFjYWRlKSB7XG5cdFx0XHRjb25zdCBvbkVkaXQgPSBhc3luYyAoKSA9PiB7XG5cdFx0XHRcdGNvbnN0IHsgc2hvd0FwcExvY2tNZXRob2REaWFsb2cgfSA9IGF3YWl0IGltcG9ydChcIi4uLy4uL25hdGl2ZS9tYWluL1NlbGVjdEFwcExvY2tNZXRob2REaWFsb2cuanNcIilcblx0XHRcdFx0YXdhaXQgc2hvd0FwcExvY2tNZXRob2REaWFsb2cobW9iaWxlU3lzdGVtRmFjYWRlKVxuXHRcdFx0XHRhd2FpdCB0aGlzLnVwZGF0ZUFwcExvY2tEYXRhKClcblx0XHRcdH1cblx0XHRcdHJldHVybiBtKFRleHRGaWVsZCwge1xuXHRcdFx0XHRsYWJlbDogXCJjcmVkZW50aWFsc0VuY3J5cHRpb25Nb2RlX2xhYmVsXCIsXG5cdFx0XHRcdHZhbHVlOiB0aGlzLmFwcExvY2tNZXRob2ROYW1lKHRoaXMuYXBwTG9ja01ldGhvZCA/PyBBcHBMb2NrTWV0aG9kLk5vbmUpLFxuXHRcdFx0XHRpc1JlYWRPbmx5OiB0cnVlLFxuXHRcdFx0XHRpbmplY3Rpb25zUmlnaHQ6ICgpID0+XG5cdFx0XHRcdFx0bShJY29uQnV0dG9uLCB7XG5cdFx0XHRcdFx0XHR0aXRsZTogXCJlZGl0X2FjdGlvblwiLFxuXHRcdFx0XHRcdFx0aWNvbjogSWNvbnMuRWRpdCxcblx0XHRcdFx0XHRcdGNsaWNrOiAoKSA9PiBvbkVkaXQoKSxcblx0XHRcdFx0XHR9KSxcblx0XHRcdH0pXG5cdFx0fSBlbHNlIGlmIChpc0Rlc2t0b3AoKSkge1xuXHRcdFx0Y29uc3QgdXNlZE1vZGUgPSB0aGlzLmNyZWRlbnRpYWxFbmNyeXB0aW9uTW9kZSA/PyBDcmVkZW50aWFsRW5jcnlwdGlvbk1vZGUuREVWSUNFX0xPQ0tcblxuXHRcdFx0cmV0dXJuIG0oVGV4dEZpZWxkLCB7XG5cdFx0XHRcdGxhYmVsOiBcImNyZWRlbnRpYWxzRW5jcnlwdGlvbk1vZGVfbGFiZWxcIixcblx0XHRcdFx0dmFsdWU6IHRoaXMuY3JlZGVudGlhbHNFbmNyeXB0aW9uTW9kZU5hbWUodXNlZE1vZGUpLFxuXHRcdFx0XHRpc1JlYWRPbmx5OiB0cnVlLFxuXHRcdFx0XHRpbmplY3Rpb25zUmlnaHQ6ICgpID0+XG5cdFx0XHRcdFx0bShJY29uQnV0dG9uLCB7XG5cdFx0XHRcdFx0XHR0aXRsZTogXCJlZGl0X2FjdGlvblwiLFxuXHRcdFx0XHRcdFx0aWNvbjogSWNvbnMuRWRpdCxcblx0XHRcdFx0XHRcdGNsaWNrOiAoKSA9PiBzaG93Q3JlZGVudGlhbHNFbmNyeXB0aW9uTW9kZURpYWxvZyh0aGlzLmNyZWRlbnRpYWxzUHJvdmlkZXIpLnRoZW4oKCkgPT4gdGhpcy51cGRhdGVBcHBMb2NrRGF0YSgpKSxcblx0XHRcdFx0XHR9KSxcblx0XHRcdH0pXG5cdFx0fVxuXHR9XG5cblx0YXN5bmMgX3VwZGF0ZVNlc3Npb25zKCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGNvbnN0IHNlc3Npb25zID0gYXdhaXQgbG9jYXRvci5lbnRpdHlDbGllbnQubG9hZEFsbChTZXNzaW9uVHlwZVJlZiwgbmV2ZXJOdWxsKGxvY2F0b3IubG9naW5zLmdldFVzZXJDb250cm9sbGVyKCkudXNlci5hdXRoKS5zZXNzaW9ucylcblx0XHRzZXNzaW9ucy5zb3J0KChzMSwgczIpID0+IHMyLmxhc3RBY2Nlc3NUaW1lLmdldFRpbWUoKSAtIHMxLmxhc3RBY2Nlc3NUaW1lLmdldFRpbWUoKSlcblx0XHR0aGlzLl9zZXNzaW9ucyA9IHNlc3Npb25zXG5cdFx0bS5yZWRyYXcoKVxuXHR9XG5cblx0cHJpdmF0ZSBfcmVuZGVyQWN0aXZlU2Vzc2lvbnMoKTogQ2hpbGRyZW4ge1xuXHRcdHJldHVybiBtKFRhYmxlLCB7XG5cdFx0XHRjb2x1bW5IZWFkaW5nOiBbXCJjbGllbnRfbGFiZWxcIl0sXG5cdFx0XHRjb2x1bW5XaWR0aHM6IFtDb2x1bW5XaWR0aC5MYXJnZXN0XSxcblx0XHRcdHNob3dBY3Rpb25CdXR0b25Db2x1bW46IHRydWUsXG5cdFx0XHRsaW5lczogdGhpcy5fc2Vzc2lvbnNcblx0XHRcdFx0LmZpbHRlcigoc2Vzc2lvbikgPT4gc2Vzc2lvbi5zdGF0ZSA9PT0gU2Vzc2lvblN0YXRlLlNFU1NJT05fU1RBVEVfQUNUSVZFKVxuXHRcdFx0XHQubWFwKChzZXNzaW9uKSA9PiB7XG5cdFx0XHRcdFx0Y29uc3QgdGhpc1Nlc3Npb24gPSBlbGVtZW50SWRQYXJ0KGxvY2F0b3IubG9naW5zLmdldFVzZXJDb250cm9sbGVyKCkuc2Vzc2lvbklkKSA9PT0gZ2V0RWxlbWVudElkKHNlc3Npb24pXG5cblx0XHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdFx0Y2VsbHM6ICgpID0+IFtcblx0XHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRcdG1haW46IHRoaXNTZXNzaW9uID8gbGFuZy5nZXQoXCJ0aGlzQ2xpZW50X2xhYmVsXCIpIDogc2Vzc2lvbi5jbGllbnRJZGVudGlmaWVyLFxuXHRcdFx0XHRcdFx0XHRcdGluZm86IFtcblx0XHRcdFx0XHRcdFx0XHRcdGxhbmcuZ2V0KFwibGFzdEFjY2Vzc1dpdGhUaW1lX2xhYmVsXCIsIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XCJ7dGltZX1cIjogZm9ybWF0RGF0ZVRpbWVGcm9tWWVzdGVyZGF5T24oc2Vzc2lvbi5sYXN0QWNjZXNzVGltZSksXG5cdFx0XHRcdFx0XHRcdFx0XHR9KSxcblx0XHRcdFx0XHRcdFx0XHRcdHNlc3Npb24ubG9naW5JcEFkZHJlc3MgPyBzZXNzaW9uLmxvZ2luSXBBZGRyZXNzIDogXCJcIixcblx0XHRcdFx0XHRcdFx0XHRdLFxuXHRcdFx0XHRcdFx0XHRcdGNsaWNrOiAoKSA9PiB0aGlzLnNob3dBY3RpdmVTZXNzaW9uSW5mb0RpYWxvZyhzZXNzaW9uLCB0aGlzU2Vzc2lvbiksXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRdLFxuXHRcdFx0XHRcdFx0YWN0aW9uQnV0dG9uQXR0cnM6IHRoaXNTZXNzaW9uXG5cdFx0XHRcdFx0XHRcdD8gbnVsbFxuXHRcdFx0XHRcdFx0XHQ6ICh7XG5cdFx0XHRcdFx0XHRcdFx0XHR0aXRsZTogXCJjbG9zZVNlc3Npb25fYWN0aW9uXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRjbGljazogKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR0aGlzLl9jbG9zZVNlc3Npb24oc2Vzc2lvbilcblx0XHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0XHRpY29uOiBJY29ucy5DYW5jZWwsXG5cdFx0XHRcdFx0XHRcdFx0XHRzaXplOiBCdXR0b25TaXplLkNvbXBhY3QsXG5cdFx0XHRcdFx0XHRcdCAgfSBhcyBjb25zdCksXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KSxcblx0XHR9KVxuXHR9XG5cblx0cHJpdmF0ZSBzaG93QWN0aXZlU2Vzc2lvbkluZm9EaWFsb2coc2Vzc2lvbjogU2Vzc2lvbiwgaXNUaGlzU2Vzc2lvbjogYm9vbGVhbikge1xuXHRcdGNvbnN0IGFjdGlvbkRpYWxvZ1Byb3BlcnRpZXMgPSB7XG5cdFx0XHR0aXRsZTogXCJkZXRhaWxzX2xhYmVsXCIsXG5cdFx0XHRjaGlsZDoge1xuXHRcdFx0XHR2aWV3OiAoKSA9PiB7XG5cdFx0XHRcdFx0cmV0dXJuIFtcblx0XHRcdFx0XHRcdG0oVGV4dEZpZWxkLCB7XG5cdFx0XHRcdFx0XHRcdGxhYmVsOiBcImNsaWVudF9sYWJlbFwiLFxuXHRcdFx0XHRcdFx0XHR2YWx1ZTogaXNUaGlzU2Vzc2lvbiA/IGxhbmcuZ2V0KFwidGhpc0NsaWVudF9sYWJlbFwiKSA6IHNlc3Npb24uY2xpZW50SWRlbnRpZmllcixcblx0XHRcdFx0XHRcdFx0aXNSZWFkT25seTogdHJ1ZSxcblx0XHRcdFx0XHRcdH0pLFxuXHRcdFx0XHRcdFx0bShUZXh0RmllbGQsIHtcblx0XHRcdFx0XHRcdFx0bGFiZWw6IFwibGFzdEFjY2Vzc19sYWJlbFwiLFxuXHRcdFx0XHRcdFx0XHR2YWx1ZTogYCR7Zm9ybWF0RGF0ZVRpbWVGcm9tWWVzdGVyZGF5T24oc2Vzc2lvbi5sYXN0QWNjZXNzVGltZSl9YCxcblx0XHRcdFx0XHRcdFx0aXNSZWFkT25seTogdHJ1ZSxcblx0XHRcdFx0XHRcdH0pLFxuXHRcdFx0XHRcdFx0bShUZXh0RmllbGQsIHtcblx0XHRcdFx0XHRcdFx0bGFiZWw6IFwiSXBBZGRyZXNzX2xhYmVsXCIsXG5cdFx0XHRcdFx0XHRcdHZhbHVlOiBzZXNzaW9uLmxvZ2luSXBBZGRyZXNzID8gc2Vzc2lvbi5sb2dpbklwQWRkcmVzcyA6IFwiXCIsXG5cdFx0XHRcdFx0XHRcdGlzUmVhZE9ubHk6IHRydWUsXG5cdFx0XHRcdFx0XHR9KSxcblx0XHRcdFx0XHRdXG5cdFx0XHRcdH0sXG5cdFx0XHR9LFxuXHRcdFx0b2tBY3Rpb246IG51bGwsXG5cdFx0XHRhbGxvd0NhbmNlbDogdHJ1ZSxcblx0XHRcdGFsbG93T2tXaXRoUmV0dXJuOiBmYWxzZSxcblx0XHRcdGNhbmNlbEFjdGlvblRleHRJZDogXCJjbG9zZV9hbHRcIixcblx0XHR9IGFzIGNvbnN0XG5cdFx0RGlhbG9nLnNob3dBY3Rpb25EaWFsb2coYWN0aW9uRGlhbG9nUHJvcGVydGllcylcblx0fVxuXG5cdHByaXZhdGUgX2Nsb3NlU2Vzc2lvbihzZXNzaW9uOiBTZXNzaW9uKSB7XG5cdFx0bG9jYXRvci5lbnRpdHlDbGllbnQuZXJhc2Uoc2Vzc2lvbikuY2F0Y2goXG5cdFx0XHRvZkNsYXNzKE5vdEZvdW5kRXJyb3IsICgpID0+IHtcblx0XHRcdFx0Y29uc29sZS5sb2coYHNlc3Npb24gJHtKU09OLnN0cmluZ2lmeShzZXNzaW9uLl9pZCl9IGFscmVhZHkgZGVsZXRlZGApXG5cdFx0XHR9KSxcblx0XHQpXG5cdH1cblxuXHRhc3luYyBlbnRpdHlFdmVudHNSZWNlaXZlZCh1cGRhdGVzOiBSZWFkb25seUFycmF5PEVudGl0eVVwZGF0ZURhdGE+KTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0Zm9yIChjb25zdCB1cGRhdGUgb2YgdXBkYXRlcykge1xuXHRcdFx0aWYgKGlzVXBkYXRlRm9yVHlwZVJlZihTZXNzaW9uVHlwZVJlZiwgdXBkYXRlKSkge1xuXHRcdFx0XHRhd2FpdCB0aGlzLl91cGRhdGVTZXNzaW9ucygpXG5cdFx0XHR9IGVsc2UgaWYgKGlzVXBkYXRlRm9yVHlwZVJlZihDdXN0b21lclByb3BlcnRpZXNUeXBlUmVmLCB1cGRhdGUpIHx8IGlzVXBkYXRlRm9yVHlwZVJlZihVc2VyU2V0dGluZ3NHcm91cFJvb3RUeXBlUmVmLCB1cGRhdGUpKSB7XG5cdFx0XHRcdG0ucmVkcmF3KClcblx0XHRcdH1cblxuXHRcdFx0YXdhaXQgdGhpcy5fc2Vjb25kRmFjdG9yc0Zvcm0uZW50aXR5RXZlbnRSZWNlaXZlZCh1cGRhdGUpXG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBjcmVkZW50aWFsc0VuY3J5cHRpb25Nb2RlTmFtZShjcmVkZW50aWFsc0VuY3J5cHRpb25Nb2RlOiBDcmVkZW50aWFsRW5jcnlwdGlvbk1vZGUpOiBzdHJpbmcge1xuXHRcdGNvbnN0IG1hcHBpbmcgPSB7XG5cdFx0XHRbQ3JlZGVudGlhbEVuY3J5cHRpb25Nb2RlLkRFVklDRV9MT0NLXTogXCJjcmVkZW50aWFsc0VuY3J5cHRpb25Nb2RlRGV2aWNlTG9ja19sYWJlbFwiLFxuXHRcdFx0W0NyZWRlbnRpYWxFbmNyeXB0aW9uTW9kZS5TWVNURU1fUEFTU1dPUkRdOiBcImNyZWRlbnRpYWxzRW5jcnlwdGlvbk1vZGVEZXZpY2VDcmVkZW50aWFsc19sYWJlbFwiLFxuXHRcdFx0W0NyZWRlbnRpYWxFbmNyeXB0aW9uTW9kZS5CSU9NRVRSSUNTXTogXCJjcmVkZW50aWFsc0VuY3J5cHRpb25Nb2RlQmlvbWV0cmljc19sYWJlbFwiLFxuXHRcdFx0W0NyZWRlbnRpYWxFbmNyeXB0aW9uTW9kZS5BUFBfUEFTU1dPUkRdOiBcImNyZWRlbnRpYWxzRW5jcnlwdGlvbk1vZGVBcHBQYXNzd29yZF9sYWJlbFwiLFxuXHRcdH0gYXMgY29uc3Rcblx0XHRyZXR1cm4gbGFuZy5nZXQobWFwcGluZ1tjcmVkZW50aWFsc0VuY3J5cHRpb25Nb2RlXSlcblx0fVxuXG5cdHByaXZhdGUgYXBwTG9ja01ldGhvZE5hbWUoYXBwTG9ja01ldGhvZDogQXBwTG9ja01ldGhvZCk6IHN0cmluZyB7XG5cdFx0Y29uc3QgbWFwcGluZyA9IHtcblx0XHRcdFtBcHBMb2NrTWV0aG9kLk5vbmVdOiBcImNyZWRlbnRpYWxzRW5jcnlwdGlvbk1vZGVEZXZpY2VMb2NrX2xhYmVsXCIsXG5cdFx0XHRbQXBwTG9ja01ldGhvZC5TeXN0ZW1QYXNzT3JCaW9tZXRyaWNzXTogXCJjcmVkZW50aWFsc0VuY3J5cHRpb25Nb2RlRGV2aWNlQ3JlZGVudGlhbHNfbGFiZWxcIixcblx0XHRcdFtBcHBMb2NrTWV0aG9kLkJpb21ldHJpY3NdOiBcImNyZWRlbnRpYWxzRW5jcnlwdGlvbk1vZGVCaW9tZXRyaWNzX2xhYmVsXCIsXG5cdFx0fSBhcyBjb25zdFxuXHRcdHJldHVybiBsYW5nLmdldChtYXBwaW5nW2FwcExvY2tNZXRob2RdKVxuXHR9XG5cblx0cHJpdmF0ZSBfcmVuZGVyQ2xvc2VkU2Vzc2lvbnMoKTogQ2hpbGRyZW4ge1xuXHRcdGNvbnN0IGxpbmVzID0gdGhpcy5fc2Vzc2lvbnNcblx0XHRcdC5maWx0ZXIoKHNlc3Npb24pID0+IHNlc3Npb24uc3RhdGUgIT09IFNlc3Npb25TdGF0ZS5TRVNTSU9OX1NUQVRFX0FDVElWRSlcblx0XHRcdC5tYXAoKHNlc3Npb24pID0+IHtcblx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRjZWxsczogW1xuXHRcdFx0XHRcdFx0c2Vzc2lvbi5jbGllbnRJZGVudGlmaWVyLFxuXHRcdFx0XHRcdFx0Zm9ybWF0RGF0ZVRpbWVGcm9tWWVzdGVyZGF5T24oc2Vzc2lvbi5sYXN0QWNjZXNzVGltZSksXG5cdFx0XHRcdFx0XHRzZXNzaW9uLmxvZ2luSXBBZGRyZXNzID8gc2Vzc2lvbi5sb2dpbklwQWRkcmVzcyA6IFwiXCIsXG5cdFx0XHRcdFx0XSxcblx0XHRcdFx0fVxuXHRcdFx0fSlcblx0XHRyZXR1cm4gbShUYWJsZSwge1xuXHRcdFx0Y29sdW1uSGVhZGluZzogW1wiY2xpZW50X2xhYmVsXCIsIFwibGFzdEFjY2Vzc19sYWJlbFwiLCBcIklwQWRkcmVzc19sYWJlbFwiXSxcblx0XHRcdGNvbHVtbldpZHRoczogW0NvbHVtbldpZHRoLlNtYWxsLCBDb2x1bW5XaWR0aC5MYXJnZXN0LCBDb2x1bW5XaWR0aC5TbWFsbF0sXG5cdFx0XHRzaG93QWN0aW9uQnV0dG9uQ29sdW1uOiB0cnVlLFxuXHRcdFx0bGluZXM6IGxpbmVzLFxuXHRcdH0pXG5cdH1cbn1cbiIsImltcG9ydCB0eXBlIHsgQ3VzdG9tZXIgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2FwaS9lbnRpdGllcy9zeXMvVHlwZVJlZnMuanNcIlxuaW1wb3J0IHsgR3JvdXBJbmZvVHlwZVJlZiwgR3JvdXBUeXBlUmVmLCBVc2VyVHlwZVJlZiB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL2VudGl0aWVzL3N5cy9UeXBlUmVmcy5qc1wiXG5pbXBvcnQgeyBuZXZlck51bGwsIHByb21pc2VNYXAgfSBmcm9tIFwiQHR1dGFvL3R1dGFub3RhLXV0aWxzXCJcbmltcG9ydCB7IEdyb3VwVHlwZSB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL2NvbW1vbi9UdXRhbm90YUNvbnN0YW50c1wiXG5pbXBvcnQgeyBnZXRHcm91cEluZm9EaXNwbGF5TmFtZSwgZ2V0VXNlckdyb3VwTWVtYmVyc2hpcHMgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2FwaS9jb21tb24vdXRpbHMvR3JvdXBVdGlsc1wiXG5pbXBvcnQgeyBsb2NhdG9yIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9hcGkvbWFpbi9Db21tb25Mb2NhdG9yXCJcblxuLyoqXG4gKiBBcyB1c2VycyBwZXJzb25hbCBtYWlsIGdyb3VwIGluZm9zIGRvIG5vdCBjb250YWluIG5hbWUgYW5kIG1haWwgYWRkcmVzcyB3ZSB1c2UgdGhpcyB3cmFwcGVyIHRvIHN0b3JlIGdyb3VwIGlkcyB0b2dldGhlciB3aXRoIG5hbWUgYW5kIG1haWwgYWRkcmVzcy5cbiAqL1xuZXhwb3J0IGNsYXNzIEdyb3VwRGF0YSB7XG5cdGdyb3VwSWQ6IElkXG5cdGRpc3BsYXlOYW1lOiBzdHJpbmdcblxuXHRjb25zdHJ1Y3Rvcihncm91cElkOiBJZCwgZGlzcGxheU5hbWU6IHN0cmluZykge1xuXHRcdHRoaXMuZ3JvdXBJZCA9IGdyb3VwSWRcblx0XHR0aGlzLmRpc3BsYXlOYW1lID0gZGlzcGxheU5hbWVcblx0fVxufVxuXG5leHBvcnQgZnVuY3Rpb24gbG9hZEdyb3VwRGlzcGxheU5hbWUoZ3JvdXBJZDogSWQpOiBQcm9taXNlPElkPiB7XG5cdHJldHVybiBsb2NhdG9yLmVudGl0eUNsaWVudFxuXHRcdC5sb2FkKEdyb3VwVHlwZVJlZiwgZ3JvdXBJZClcblx0XHQudGhlbigoZ3JvdXApID0+IHtcblx0XHRcdGlmIChncm91cC51c2VyICYmIGdyb3VwLnR5cGUgIT09IEdyb3VwVHlwZS5Vc2VyKSB7XG5cdFx0XHRcdC8vIHRoZSB1c2VycyBwZXJzb25hbCBtYWlsIGdyb3VwIGRvZXMgbm90IGhhdmUgYSBuYW1lLCBzbyBzaG93IHRoZSB1c2VyIG5hbWVcblx0XHRcdFx0cmV0dXJuIGxvY2F0b3IuZW50aXR5Q2xpZW50LmxvYWQoVXNlclR5cGVSZWYsIGdyb3VwLnVzZXIpLnRoZW4oKHVzZXIpID0+IHtcblx0XHRcdFx0XHRyZXR1cm4gbG9jYXRvci5lbnRpdHlDbGllbnQubG9hZChHcm91cEluZm9UeXBlUmVmLCB1c2VyLnVzZXJHcm91cC5ncm91cEluZm8pXG5cdFx0XHRcdH0pXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRyZXR1cm4gbG9jYXRvci5lbnRpdHlDbGllbnQubG9hZChHcm91cEluZm9UeXBlUmVmLCBncm91cC5ncm91cEluZm8pXG5cdFx0XHR9XG5cdFx0fSlcblx0XHQudGhlbigoZ3JvdXBJbmZvKSA9PiB7XG5cdFx0XHRyZXR1cm4gZ2V0R3JvdXBJbmZvRGlzcGxheU5hbWUoZ3JvdXBJbmZvKVxuXHRcdH0pXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsb2FkRW5hYmxlZFRlYW1NYWlsR3JvdXBzKGN1c3RvbWVyOiBDdXN0b21lcik6IFByb21pc2U8R3JvdXBEYXRhW10+IHtcblx0Y29uc3QgaW5mb3MgPSBhd2FpdCBsb2NhdG9yLmVudGl0eUNsaWVudC5sb2FkQWxsKEdyb3VwSW5mb1R5cGVSZWYsIGN1c3RvbWVyLnRlYW1Hcm91cHMpXG5cdHJldHVybiBpbmZvc1xuXHRcdC5maWx0ZXIoKHRlYW1Hcm91cEluZm8pID0+IHtcblx0XHRcdGlmICh0ZWFtR3JvdXBJbmZvLmRlbGV0ZWQpIHtcblx0XHRcdFx0cmV0dXJuIGZhbHNlXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRyZXR1cm4gbG9jYXRvci5lbnRpdHlDbGllbnQubG9hZChHcm91cFR5cGVSZWYsIHRlYW1Hcm91cEluZm8uZ3JvdXApLnRoZW4oKHRlYW1Hcm91cCkgPT4gdGVhbUdyb3VwLnR5cGUgPT09IEdyb3VwVHlwZS5NYWlsKVxuXHRcdFx0fVxuXHRcdH0pXG5cdFx0Lm1hcCgobWFpbFRlYW1Hcm91cEluZm8pID0+IG5ldyBHcm91cERhdGEobWFpbFRlYW1Hcm91cEluZm8uZ3JvdXAsIGdldEdyb3VwSW5mb0Rpc3BsYXlOYW1lKG1haWxUZWFtR3JvdXBJbmZvKSkpXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsb2FkRW5hYmxlZFVzZXJNYWlsR3JvdXBzKGN1c3RvbWVyOiBDdXN0b21lcik6IFByb21pc2U8R3JvdXBEYXRhW10+IHtcblx0Y29uc3QgZ3JvdXBJbmZvcyA9IGF3YWl0IGxvY2F0b3IuZW50aXR5Q2xpZW50LmxvYWRBbGwoR3JvdXBJbmZvVHlwZVJlZiwgY3VzdG9tZXIudXNlckdyb3Vwcylcblx0cmV0dXJuIHByb21pc2VNYXAoXG5cdFx0Z3JvdXBJbmZvcy5maWx0ZXIoKGcpID0+ICFnLmRlbGV0ZWQpLFxuXHRcdGFzeW5jICh1c2VyR3JvdXBJbmZvKSA9PiB7XG5cdFx0XHRjb25zdCB1c2VyR3JvdXAgPSBhd2FpdCBsb2NhdG9yLmVudGl0eUNsaWVudC5sb2FkKEdyb3VwVHlwZVJlZiwgdXNlckdyb3VwSW5mby5ncm91cClcblx0XHRcdGNvbnN0IHVzZXIgPSBhd2FpdCBsb2NhdG9yLmVudGl0eUNsaWVudC5sb2FkKFVzZXJUeXBlUmVmLCBuZXZlck51bGwodXNlckdyb3VwLnVzZXIpKVxuXHRcdFx0cmV0dXJuIG5ldyBHcm91cERhdGEoZ2V0VXNlckdyb3VwTWVtYmVyc2hpcHModXNlciwgR3JvdXBUeXBlLk1haWwpWzBdLmdyb3VwLCBnZXRHcm91cEluZm9EaXNwbGF5TmFtZSh1c2VyR3JvdXBJbmZvKSlcblx0XHR9LFxuXHQpXG59XG4iLCJpbXBvcnQgeyBjcmVhdGVDdXN0b21Eb21haW5DaGVja0dldEluIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9hcGkvZW50aXRpZXMvc3lzL1R5cGVSZWZzLmpzXCJcbmltcG9ydCB0eXBlIHsgQ3VzdG9tRG9tYWluQ2hlY2tHZXRPdXQgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2FwaS9lbnRpdGllcy9zeXMvVHlwZVJlZnMuanNcIlxuaW1wb3J0IHsgQ3VzdG9tRG9tYWluQ2hlY2tSZXN1bHQsIERuc1JlY29yZFR5cGUsIERuc1JlY29yZFZhbGlkYXRpb24gfSBmcm9tIFwiLi4vLi4vY29tbW9uL2FwaS9jb21tb24vVHV0YW5vdGFDb25zdGFudHNcIlxuaW1wb3J0IHsgTGF6eUxvYWRlZCwgbm9PcCB9IGZyb20gXCJAdHV0YW8vdHV0YW5vdGEtdXRpbHNcIlxuaW1wb3J0IHsgbGFuZyB9IGZyb20gXCIuLi8uLi9jb21tb24vbWlzYy9MYW5ndWFnZVZpZXdNb2RlbFwiXG5pbXBvcnQgeyBhc3NlcnRNYWluT3JOb2RlIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9hcGkvY29tbW9uL0VudlwiXG5pbXBvcnQgeyBsb2NhdG9yIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9hcGkvbWFpbi9Db21tb25Mb2NhdG9yXCJcbmltcG9ydCB7IEN1c3RvbURvbWFpbkNoZWNrU2VydmljZSB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL2VudGl0aWVzL3N5cy9TZXJ2aWNlc1wiXG5cbmFzc2VydE1haW5Pck5vZGUoKVxuXG5leHBvcnQgY2xhc3MgRG9tYWluRG5zU3RhdHVzIHtcblx0c3RhdHVzOiBMYXp5TG9hZGVkPEN1c3RvbURvbWFpbkNoZWNrR2V0T3V0PlxuXHRkb21haW46IHN0cmluZ1xuXG5cdGNvbnN0cnVjdG9yKGNsZWFuRG9tYWluTmFtZTogc3RyaW5nLCBjdXN0b21lcklkPzogSWQpIHtcblx0XHR0aGlzLmRvbWFpbiA9IGNsZWFuRG9tYWluTmFtZVxuXHRcdHRoaXMuc3RhdHVzID0gbmV3IExhenlMb2FkZWQoKCkgPT4ge1xuXHRcdFx0bGV0IGRhdGEgPSBjcmVhdGVDdXN0b21Eb21haW5DaGVja0dldEluKHtcblx0XHRcdFx0ZG9tYWluOiBjbGVhbkRvbWFpbk5hbWUsXG5cdFx0XHRcdGN1c3RvbWVyOiBjdXN0b21lcklkID8/IG51bGwsXG5cdFx0XHR9KVxuXHRcdFx0cmV0dXJuIGxvY2F0b3Iuc2VydmljZUV4ZWN1dG9yLmdldChDdXN0b21Eb21haW5DaGVja1NlcnZpY2UsIGRhdGEpXG5cdFx0fSlcblx0fVxuXG5cdGdldExvYWRlZEN1c3RvbURvbWFpbkNoZWNrR2V0T3V0KCk6IEN1c3RvbURvbWFpbkNoZWNrR2V0T3V0IHtcblx0XHRyZXR1cm4gdGhpcy5zdGF0dXMuZ2V0TG9hZGVkKClcblx0fVxuXG5cdC8qKlxuXHQgKiBPbmx5IGNoZWNrcyBmb3IgdGhlIHJlcXVpcmVkIHJlY29yZHMgKE1YIGFuZCBzcGYpIHRvIGJlIGZpbmUuXG5cdCAqIFdlIGhhdmUgdGhpcyBsZXNzIHN0cmljdCBjaGVjayBiZWNhdXNlIG9uZSBjYW4gYWxyZWFkeSB1c2UgdGhlIGN1c3RvbSBkb21haW4gKHdpdGggbGltaXRhdGlvbnMpIGV2ZW4gaWYgY2VydGFpbiByZWNvcmRzIGxpa2UgZG1hcmMgYXJlIG5vdCB5ZXQgc2V0IHByb3Blcmx5LlxuXHQgKiBXZSB3YW50IHRvIGFsbG93IGZpbmlzaGluZyB0aGUgZGlhbG9ncyBzdWNjZXNmdWxseSBldmVuIGlmIGp1c3QgdGhlc2UgYmFzaWMgY2hlY2sgcGFzcy5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IHRydWUgaWYgcmVjb3JkcyBhcmUgZmluZS5cblx0ICovXG5cdGFyZVJlY29yZHNGaW5lKCk6IGJvb2xlYW4ge1xuXHRcdGlmICghdGhpcy5zdGF0dXMuaXNMb2FkZWQoKSB8fCB0aGlzLnN0YXR1cy5nZXRMb2FkZWQoKS5jaGVja1Jlc3VsdCAhPT0gQ3VzdG9tRG9tYWluQ2hlY2tSZXN1bHQuQ1VTVE9NX0RPTUFJTl9DSEVDS19SRVNVTFRfT0spIHtcblx0XHRcdHJldHVybiBmYWxzZVxuXHRcdH1cblxuXHRcdGNvbnN0IHJlcXVpcmVkTWlzc2luZ1JlY29yZHMgPSB0aGlzLnN0YXR1c1xuXHRcdFx0LmdldExvYWRlZCgpXG5cdFx0XHQubWlzc2luZ1JlY29yZHMuZmlsdGVyKChyKSA9PiByLnR5cGUgPT09IERuc1JlY29yZFR5cGUuRE5TX1JFQ09SRF9UWVBFX01YIHx8IHIudHlwZSA9PT0gRG5zUmVjb3JkVHlwZS5ETlNfUkVDT1JEX1RZUEVfVFhUX1NQRilcblx0XHRyZXR1cm4gIXJlcXVpcmVkTWlzc2luZ1JlY29yZHMubGVuZ3RoXG5cdH1cblxuXHQvKipcblx0ICogQ2hlY2tzIHRoYXQgQUxMIHJlY29yZHMgYXJlIGZpbmUuIEV2ZW4gdGhlIG9uZXMgdGhhdCBhcmUgb25seSByZWNvbW1lbmRlZC5cblx0ICogV2UgbmVlZCB0aGlzIGNoZWNrIG9uIHRvcCBvZiBhcmVSZWNvcmRzRmluZSgpIGJlY2F1c2Ugd2Ugd2FudCB0byBkaXNwbGF5IGlmIHNvbWUgcmVjb3JkcyBhcmUgbm90IHlldCBzZXQgY29ycmVjdGx5IGV2ZW4gaWYgdGhlIGRvbWFpbiBjYW4gYWxyZWFkeSBiZSB1c2VkLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gdHJ1ZSBpZiBhbGwgcmVjb3JkcyBhcmUgZmluZS5cblx0ICovXG5cdGFyZUFsbFJlY29yZHNGaW5lKCk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiAoXG5cdFx0XHR0aGlzLnN0YXR1cy5pc0xvYWRlZCgpICYmXG5cdFx0XHR0aGlzLnN0YXR1cy5nZXRMb2FkZWQoKS5jaGVja1Jlc3VsdCA9PT0gQ3VzdG9tRG9tYWluQ2hlY2tSZXN1bHQuQ1VTVE9NX0RPTUFJTl9DSEVDS19SRVNVTFRfT0sgJiZcblx0XHRcdHRoaXMuc3RhdHVzLmdldExvYWRlZCgpLm1pc3NpbmdSZWNvcmRzLmxlbmd0aCA9PT0gMCAmJlxuXHRcdFx0dGhpcy5zdGF0dXMuZ2V0TG9hZGVkKCkuaW52YWxpZFJlY29yZHMubGVuZ3RoID09PSAwXG5cdFx0KVxuXHR9XG5cblx0Z2V0RG5zU3RhdHVzSW5mbygpOiBzdHJpbmcge1xuXHRcdGlmICh0aGlzLnN0YXR1cy5pc0xvYWRlZCgpKSB7XG5cdFx0XHRsZXQgcmVzdWx0ID0gdGhpcy5zdGF0dXMuZ2V0TG9hZGVkKClcblxuXHRcdFx0aWYgKHJlc3VsdC5jaGVja1Jlc3VsdCA9PT0gQ3VzdG9tRG9tYWluQ2hlY2tSZXN1bHQuQ1VTVE9NX0RPTUFJTl9DSEVDS19SRVNVTFRfT0spIHtcblx0XHRcdFx0bGV0IG14T2sgPVxuXHRcdFx0XHRcdCFyZXN1bHQubWlzc2luZ1JlY29yZHMuc29tZSgocikgPT4gci50eXBlID09PSBEbnNSZWNvcmRUeXBlLkROU19SRUNPUkRfVFlQRV9NWCkgJiZcblx0XHRcdFx0XHQhcmVzdWx0LmludmFsaWRSZWNvcmRzLnNvbWUoKHIpID0+IHIudHlwZSA9PT0gRG5zUmVjb3JkVHlwZS5ETlNfUkVDT1JEX1RZUEVfTVgpXG5cdFx0XHRcdGxldCBzcGZPayA9XG5cdFx0XHRcdFx0IXJlc3VsdC5taXNzaW5nUmVjb3Jkcy5zb21lKChyKSA9PiByLnR5cGUgPT09IERuc1JlY29yZFR5cGUuRE5TX1JFQ09SRF9UWVBFX1RYVF9TUEYpICYmXG5cdFx0XHRcdFx0IXJlc3VsdC5pbnZhbGlkUmVjb3Jkcy5zb21lKChyKSA9PiByLnR5cGUgPT09IERuc1JlY29yZFR5cGUuRE5TX1JFQ09SRF9UWVBFX1RYVF9TUEYpXG5cdFx0XHRcdGxldCBka2ltT2sgPVxuXHRcdFx0XHRcdCFyZXN1bHQubWlzc2luZ1JlY29yZHMuc29tZSgocikgPT4gci50eXBlID09PSBEbnNSZWNvcmRUeXBlLkROU19SRUNPUkRfVFlQRV9DTkFNRV9ES0lNKSAmJlxuXHRcdFx0XHRcdCFyZXN1bHQuaW52YWxpZFJlY29yZHMuc29tZSgocikgPT4gci50eXBlID09PSBEbnNSZWNvcmRUeXBlLkROU19SRUNPUkRfVFlQRV9DTkFNRV9ES0lNKVxuXHRcdFx0XHRsZXQgbXRhU3RzT2sgPVxuXHRcdFx0XHRcdCFyZXN1bHQubWlzc2luZ1JlY29yZHMuc29tZSgocikgPT4gci50eXBlID09PSBEbnNSZWNvcmRUeXBlLkROU19SRUNPUkRfVFlQRV9DTkFNRV9NVEFfU1RTKSAmJlxuXHRcdFx0XHRcdCFyZXN1bHQuaW52YWxpZFJlY29yZHMuc29tZSgocikgPT4gci50eXBlID09PSBEbnNSZWNvcmRUeXBlLkROU19SRUNPUkRfVFlQRV9DTkFNRV9NVEFfU1RTKVxuXHRcdFx0XHRsZXQgZG1hcmNXYXJuID0gcmVzdWx0Lm1pc3NpbmdSZWNvcmRzLmZpbmQoKHIpID0+IHIudHlwZSA9PT0gRG5zUmVjb3JkVHlwZS5ETlNfUkVDT1JEX1RZUEVfVFhUX0RNQVJDKVxuXHRcdFx0XHRsZXQgZG1hcmNCYWQgPSByZXN1bHQuaW52YWxpZFJlY29yZHMuZmluZCgocikgPT4gci50eXBlID09PSBEbnNSZWNvcmRUeXBlLkROU19SRUNPUkRfVFlQRV9UWFRfRE1BUkMpXG5cdFx0XHRcdHJldHVybiAoXG5cdFx0XHRcdFx0XCJNWCBcIiArXG5cdFx0XHRcdFx0KG14T2sgPyBEbnNSZWNvcmRWYWxpZGF0aW9uLk9LIDogRG5zUmVjb3JkVmFsaWRhdGlvbi5CQUQpICtcblx0XHRcdFx0XHRcIiwgU1BGIFwiICtcblx0XHRcdFx0XHQoc3BmT2sgPyBEbnNSZWNvcmRWYWxpZGF0aW9uLk9LIDogRG5zUmVjb3JkVmFsaWRhdGlvbi5CQUQpICtcblx0XHRcdFx0XHRcIiwgTVRBLVNUUyBcIiArXG5cdFx0XHRcdFx0KG10YVN0c09rID8gRG5zUmVjb3JkVmFsaWRhdGlvbi5PSyA6IERuc1JlY29yZFZhbGlkYXRpb24uQkFEKSArXG5cdFx0XHRcdFx0XCIsIERLSU0gXCIgK1xuXHRcdFx0XHRcdChka2ltT2sgPyBEbnNSZWNvcmRWYWxpZGF0aW9uLk9LIDogRG5zUmVjb3JkVmFsaWRhdGlvbi5CQUQpICtcblx0XHRcdFx0XHRcIiwgRE1BUkMgXCIgK1xuXHRcdFx0XHRcdChkbWFyY0JhZCB8fCBkbWFyY1dhcm4gPyBEbnNSZWNvcmRWYWxpZGF0aW9uLkJBRCA6IERuc1JlY29yZFZhbGlkYXRpb24uT0spXG5cdFx0XHRcdClcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHJldHVybiBcIkROUyBcIiArIERuc1JlY29yZFZhbGlkYXRpb24uQkFEXG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJldHVybiBsYW5nLmdldChcImxvYWRpbmdfbXNnXCIpXG5cdFx0fVxuXHR9XG5cblx0bG9hZEN1cnJlbnRTdGF0dXMoKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0aWYgKHRoaXMuc3RhdHVzLmlzTG9hZGVkKCkpIHtcblx0XHRcdC8vIGtlZXAgdGhlIG9sZCBzdGF0dXMgYXMgbG9uZyBhcyBjaGVja2luZyBhZ2FpblxuXHRcdFx0cmV0dXJuIHRoaXMuc3RhdHVzLnJlbG9hZCgpLnRoZW4obm9PcClcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmV0dXJuIHRoaXMuc3RhdHVzLmdldEFzeW5jKCkudGhlbihub09wKVxuXHRcdH1cblx0fVxufVxuIiwiaW1wb3J0IHsgRG5zUmVjb3JkVHlwZSB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vYXBpL2NvbW1vbi9UdXRhbm90YUNvbnN0YW50cy5qc1wiXG5pbXBvcnQgeyBEbnNSZWNvcmQgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2FwaS9lbnRpdGllcy9zeXMvVHlwZVJlZnMuanNcIlxuaW1wb3J0IG0sIHsgQ2hpbGRyZW4gfSBmcm9tIFwibWl0aHJpbFwiXG5pbXBvcnQgeyBDb2x1bW5XaWR0aCwgVGFibGUgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2d1aS9iYXNlL1RhYmxlLmpzXCJcblxuY29uc3QgZW51bSBBY3R1YWxEbnNSZWNvcmRUeXBlIHtcblx0TVggPSBcIk1YXCIsXG5cdFRYVCA9IFwiVFhUXCIsXG5cdENOQU1FID0gXCJDTkFNRVwiLFxufVxuXG5leHBvcnQgY29uc3QgRG5zUmVjb3JkVGFibGU6IFJlY29yZDxEbnNSZWNvcmRUeXBlLCBBY3R1YWxEbnNSZWNvcmRUeXBlPiA9IE9iamVjdC5mcmVlemUoe1xuXHRbRG5zUmVjb3JkVHlwZS5ETlNfUkVDT1JEX1RZUEVfTVhdOiBBY3R1YWxEbnNSZWNvcmRUeXBlLk1YLFxuXHRbRG5zUmVjb3JkVHlwZS5ETlNfUkVDT1JEX1RZUEVfVFhUX1NQRl06IEFjdHVhbERuc1JlY29yZFR5cGUuVFhULFxuXHRbRG5zUmVjb3JkVHlwZS5ETlNfUkVDT1JEX1RZUEVfQ05BTUVfREtJTV06IEFjdHVhbERuc1JlY29yZFR5cGUuQ05BTUUsXG5cdFtEbnNSZWNvcmRUeXBlLkROU19SRUNPUkRfVFlQRV9UWFRfRE1BUkNdOiBBY3R1YWxEbnNSZWNvcmRUeXBlLlRYVCxcblx0W0Ruc1JlY29yZFR5cGUuRE5TX1JFQ09SRF9UWVBFX0NOQU1FX01UQV9TVFNdOiBBY3R1YWxEbnNSZWNvcmRUeXBlLkNOQU1FLFxuXHRbRG5zUmVjb3JkVHlwZS5ETlNfUkVDT1JEX1RZUEVfVFhUX1ZFUklGWV06IEFjdHVhbERuc1JlY29yZFR5cGUuVFhULFxufSlcblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZURuc1JlY29yZFRhYmxlKHJlY29yZHM6IERuc1JlY29yZFtdKTogQ2hpbGRyZW4ge1xuXHRyZXR1cm4gbShUYWJsZSwge1xuXHRcdGNvbHVtbkhlYWRpbmc6IFtcInR5cGVfbGFiZWxcIiwgXCJkbnNSZWNvcmRIb3N0T3JOYW1lX2xhYmVsXCJdLFxuXHRcdGNvbHVtbldpZHRoczogW0NvbHVtbldpZHRoLlNtYWxsLCBDb2x1bW5XaWR0aC5MYXJnZXN0XSxcblx0XHRzaG93QWN0aW9uQnV0dG9uQ29sdW1uOiBmYWxzZSxcblx0XHRsaW5lczogcmVjb3Jkcy5tYXAoKHIpID0+ICh7XG5cdFx0XHRjZWxsczogKCkgPT4gW3sgbWFpbjogRG5zUmVjb3JkVGFibGVbci50eXBlIGFzIERuc1JlY29yZFR5cGVdIH0sIHsgbWFpbjogci5zdWJkb21haW4gPyByLnN1YmRvbWFpbiA6IFwiQFwiLCBpbmZvOiBbci52YWx1ZV0gfV0sXG5cdFx0fSkpLFxuXHR9KVxufVxuIiwiaW1wb3J0IHsgRG9tYWluRG5zU3RhdHVzIH0gZnJvbSBcIi4uL0RvbWFpbkRuc1N0YXR1c1wiXG5pbXBvcnQgbSwgeyBDaGlsZHJlbiwgVm5vZGUsIFZub2RlRE9NIH0gZnJvbSBcIm1pdGhyaWxcIlxuaW1wb3J0IHsgYXNzZXJ0RW51bVZhbHVlLCBDdXN0b21Eb21haW5DaGVja1Jlc3VsdCwgRG5zUmVjb3JkVHlwZSwgRG5zUmVjb3JkVmFsaWRhdGlvbiB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vYXBpL2NvbW1vbi9UdXRhbm90YUNvbnN0YW50c1wiXG5pbXBvcnQgeyBJbmZvTGluaywgbGFuZywgVHJhbnNsYXRpb25LZXkgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL21pc2MvTGFuZ3VhZ2VWaWV3TW9kZWxcIlxuaW1wb3J0IHR5cGUgeyBBZGREb21haW5EYXRhLCBWYWxpZGF0ZWREblNSZWNvcmQgfSBmcm9tIFwiLi9BZGREb21haW5XaXphcmRcIlxuaW1wb3J0IHsgQWN0aW9uRGlhbG9nUHJvcHMsIERpYWxvZyB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZ3VpL2Jhc2UvRGlhbG9nXCJcbmltcG9ydCB0eXBlIHsgV2l6YXJkUGFnZUF0dHJzIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9ndWkvYmFzZS9XaXphcmREaWFsb2cuanNcIlxuaW1wb3J0IHsgZW1pdFdpemFyZEV2ZW50LCBXaXphcmRFdmVudFR5cGUsIFdpemFyZFBhZ2VOIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9ndWkvYmFzZS9XaXphcmREaWFsb2cuanNcIlxuaW1wb3J0IHsgQnV0dG9uLCBCdXR0b25UeXBlIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9ndWkvYmFzZS9CdXR0b24uanNcIlxuaW1wb3J0IHR5cGUgeyBEbnNSZWNvcmQgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2FwaS9lbnRpdGllcy9zeXMvVHlwZVJlZnMuanNcIlxuaW1wb3J0IHsgQm9vdEljb25zIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9ndWkvYmFzZS9pY29ucy9Cb290SWNvbnNcIlxuaW1wb3J0IHsgYXNzZXJ0TWFpbk9yTm9kZSB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vYXBpL2NvbW1vbi9FbnZcIlxuaW1wb3J0IHsgZG93bmNhc3QgfSBmcm9tIFwiQHR1dGFvL3R1dGFub3RhLXV0aWxzXCJcbmltcG9ydCB7IEJ1dHRvblNpemUgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2d1aS9iYXNlL0J1dHRvblNpemUuanNcIlxuaW1wb3J0IHsgSWNvbkJ1dHRvbkF0dHJzIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9ndWkvYmFzZS9JY29uQnV0dG9uLmpzXCJcbmltcG9ydCB7IENvbHVtbldpZHRoLCBUYWJsZSB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZ3VpL2Jhc2UvVGFibGUuanNcIlxuaW1wb3J0IHsgRG5zUmVjb3JkVGFibGUgfSBmcm9tIFwiLi9EbnNSZWNvcmRUYWJsZS5qc1wiXG5pbXBvcnQgeyBMb2dpbkJ1dHRvbiB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZ3VpL2Jhc2UvYnV0dG9ucy9Mb2dpbkJ1dHRvbi5qc1wiXG5pbXBvcnQgeyBNb3JlSW5mb0xpbmsgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL21pc2MvbmV3cy9Nb3JlSW5mb0xpbmsuanNcIlxuXG5hc3NlcnRNYWluT3JOb2RlKClcblxuLyoqIFdpemFyZCBwYWdlIHdoaWNoIGNhbiB2ZXJpZnkgRE5TIHJlY29yZHMgZm9yIGN1c3RvbSBlbWFpbCBkb21haW4uICovXG5leHBvcnQgY2xhc3MgVmVyaWZ5RG5zUmVjb3Jkc1BhZ2UgaW1wbGVtZW50cyBXaXphcmRQYWdlTjxBZGREb21haW5EYXRhPiB7XG5cdG9uY3JlYXRlKHZub2RlOiBWbm9kZURPTTxXaXphcmRQYWdlQXR0cnM8QWRkRG9tYWluRGF0YT4+KSB7XG5cdFx0Y29uc3QgZGF0YSA9IHZub2RlLmF0dHJzLmRhdGFcblx0XHRkYXRhLmRvbWFpblN0YXR1cyA9IG5ldyBEb21haW5EbnNTdGF0dXMoZGF0YS5kb21haW4oKSlcblxuXHRcdF91cGRhdGVEbnNTdGF0dXMoZGF0YS5kb21haW5TdGF0dXMpXG5cdH1cblxuXHR2aWV3KHZub2RlOiBWbm9kZTxXaXphcmRQYWdlQXR0cnM8QWRkRG9tYWluRGF0YT4+KSB7XG5cdFx0Y29uc3QgYSA9IHZub2RlLmF0dHJzXG5cdFx0cmV0dXJuIFtcblx0XHRcdG0oXCJoNC5tdC1sLnRleHQtY2VudGVyXCIsIGxhbmcuZ2V0KFwidmVyaWZ5RE5TUmVjb3Jkc190aXRsZVwiKSksXG5cdFx0XHRtKFwicFwiLCBsYW5nLmdldChcInZlcmlmeUROU1JlY29yZHNfbXNnXCIpKSxcblx0XHRcdGEuZGF0YS5kb21haW5TdGF0dXMuc3RhdHVzLmlzTG9hZGVkKClcblx0XHRcdFx0PyBtKFwiXCIsIFtcblx0XHRcdFx0XHRcdHJlbmRlckNoZWNrUmVzdWx0KGEuZGF0YS5kb21haW5TdGF0dXMpLFxuXHRcdFx0XHRcdFx0bShcblx0XHRcdFx0XHRcdFx0XCIuZmxleC1jZW50ZXIuZnVsbC13aWR0aC5wdC1sLm1iLWxcIixcblx0XHRcdFx0XHRcdFx0bShMb2dpbkJ1dHRvbiwge1xuXHRcdFx0XHRcdFx0XHRcdGxhYmVsOiBcImZpbmlzaF9hY3Rpb25cIixcblx0XHRcdFx0XHRcdFx0XHRjbGFzczogXCJzbWFsbC1sb2dpbi1idXR0b25cIixcblx0XHRcdFx0XHRcdFx0XHQvLyBXZSBjaGVjayBpZiBhbGwgRE5TIHJlY29yZHMgYXJlIHNldCBjb3JyZWN0bHkgYW5kIGxldCB0aGUgdXNlciBjb25maXJtIGJlZm9yZSBsZWF2aW5nIGlmIG5vdFxuXHRcdFx0XHRcdFx0XHRcdG9uY2xpY2s6ICgpID0+IHRoaXMuX2ZpbmlzaERpYWxvZyhhLmRhdGEsIChkb3duY2FzdDxWbm9kZURPTT4odm5vZGUpPy5kb20gYXMgSFRNTEVsZW1lbnQgfCBudWxsKSA/PyBudWxsKSxcblx0XHRcdFx0XHRcdFx0fSksXG5cdFx0XHRcdFx0XHQpLFxuXHRcdFx0XHQgIF0pXG5cdFx0XHRcdDogbShcIlwiLCBbXG5cdFx0XHRcdFx0XHRsYW5nLmdldChcImxvYWRpbmdETlNSZWNvcmRzX21zZ1wiKSxcblx0XHRcdFx0XHRcdG0oXG5cdFx0XHRcdFx0XHRcdFwiLmZsZXgtY2VudGVyLmZ1bGwtd2lkdGgucHQtbC5tYi1sXCIsXG5cdFx0XHRcdFx0XHRcdG0oQnV0dG9uLCB7XG5cdFx0XHRcdFx0XHRcdFx0dHlwZTogQnV0dG9uVHlwZS5TZWNvbmRhcnksXG5cdFx0XHRcdFx0XHRcdFx0bGFiZWw6IFwicmVmcmVzaF9hY3Rpb25cIixcblx0XHRcdFx0XHRcdFx0XHRjbGljazogKCkgPT4gX3VwZGF0ZURuc1N0YXR1cyhhLmRhdGEuZG9tYWluU3RhdHVzKSxcblx0XHRcdFx0XHRcdFx0fSksXG5cdFx0XHRcdFx0XHQpLFxuXHRcdFx0XHQgIF0pLFxuXHRcdF1cblx0fVxuXG5cdF9maW5pc2hEaWFsb2coZGF0YTogQWRkRG9tYWluRGF0YSwgZG9tOiBIVE1MRWxlbWVudCB8IG51bGwpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRjb25zdCBsZWF2ZVVuZmluaXNoZWREaWFsb2dBdHRyczogQWN0aW9uRGlhbG9nUHJvcHMgPSB7XG5cdFx0XHR0aXRsZTogXCJxdWl0U2V0dXBfdGl0bGVcIixcblx0XHRcdGNoaWxkOiB7XG5cdFx0XHRcdHZpZXc6ICgpID0+IHtcblx0XHRcdFx0XHRyZXR1cm4gW20oXCJwXCIsIGxhbmcuZ2V0KFwicXVpdEROU1NldHVwX21zZ1wiKSldXG5cdFx0XHRcdH0sXG5cdFx0XHR9LFxuXHRcdFx0b2tBY3Rpb246IChkaWFsb2c6IERpYWxvZykgPT4ge1xuXHRcdFx0XHRkaWFsb2cuY2xvc2UoKVxuXHRcdFx0XHRlbWl0V2l6YXJkRXZlbnQoZG9tLCBXaXphcmRFdmVudFR5cGUuQ0xPU0VfRElBTE9HKVxuXHRcdFx0fSxcblx0XHR9XG5cdFx0cmV0dXJuIF91cGRhdGVEbnNTdGF0dXMoZGF0YS5kb21haW5TdGF0dXMpLnRoZW4oKCkgPT4ge1xuXHRcdFx0aWYgKGRhdGEuZG9tYWluU3RhdHVzLmFyZVJlY29yZHNGaW5lKCkpIHtcblx0XHRcdFx0ZW1pdFdpemFyZEV2ZW50KGRvbSwgV2l6YXJkRXZlbnRUeXBlLlNIT1dfTkVYVF9QQUdFKSAvLyBUaGUgd2l6YXJkIHdpbGwgY2xvc2UgdGhlIGRpYWxvZyBhcyB0aGlzIGlzIHRoZSBsYXN0IHBhZ2Vcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdERpYWxvZy5zaG93QWN0aW9uRGlhbG9nKGxlYXZlVW5maW5pc2hlZERpYWxvZ0F0dHJzKVxuXHRcdFx0fVxuXHRcdH0pXG5cdH1cbn1cblxuZnVuY3Rpb24gX3VwZGF0ZURuc1N0YXR1cyhkb21haW5TdGF0dXM6IERvbWFpbkRuc1N0YXR1cyk6IFByb21pc2U8dm9pZD4ge1xuXHRyZXR1cm4gZG9tYWluU3RhdHVzLmxvYWRDdXJyZW50U3RhdHVzKCkudGhlbigoKSA9PiB7XG5cdFx0bS5yZWRyYXcoKVxuXHR9KVxufVxuXG5mdW5jdGlvbiBfZ2V0RGlzcGxheWFibGVSZWNvcmRWYWx1ZShyZWNvcmQ6IERuc1JlY29yZCk6IHN0cmluZyB7XG5cdGlmIChcblx0XHQhcmVjb3JkLnZhbHVlLmVuZHNXaXRoKFwiLlwiKSAmJlxuXHRcdChyZWNvcmQudHlwZSA9PT0gRG5zUmVjb3JkVHlwZS5ETlNfUkVDT1JEX1RZUEVfTVggfHxcblx0XHRcdHJlY29yZC50eXBlID09PSBEbnNSZWNvcmRUeXBlLkROU19SRUNPUkRfVFlQRV9DTkFNRV9ES0lNIHx8XG5cdFx0XHRyZWNvcmQudHlwZSA9PT0gRG5zUmVjb3JkVHlwZS5ETlNfUkVDT1JEX1RZUEVfQ05BTUVfTVRBX1NUUylcblx0KSB7XG5cdFx0cmV0dXJuIHJlY29yZC52YWx1ZSArIFwiLlwiXG5cdH1cblxuXHRyZXR1cm4gcmVjb3JkLnZhbHVlXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVEbnNSZWNvcmRUYWJsZU4ocmVjb3JkczogVmFsaWRhdGVkRG5TUmVjb3JkW10sIHJlZnJlc2hCdXR0b25BdHRyczogSWNvbkJ1dHRvbkF0dHJzIHwgbnVsbCk6IENoaWxkcmVuIHtcblx0cmV0dXJuIG0oVGFibGUsIHtcblx0XHRjb2x1bW5IZWFkaW5nOiBbXCJ0eXBlX2xhYmVsXCIsIFwiZG5zUmVjb3JkSG9zdE9yTmFtZV9sYWJlbFwiLCBcImRuc1JlY29yZFZhbHVlT3JQb2ludHNUb19sYWJlbFwiXSxcblx0XHRhZGRCdXR0b25BdHRyczogcmVmcmVzaEJ1dHRvbkF0dHJzLFxuXHRcdGNvbHVtbldpZHRoczogW0NvbHVtbldpZHRoLlNtYWxsLCBDb2x1bW5XaWR0aC5TbWFsbCwgQ29sdW1uV2lkdGguTGFyZ2VzdF0sXG5cdFx0c2hvd0FjdGlvbkJ1dHRvbkNvbHVtbjogdHJ1ZSxcblx0XHRsaW5lczogcmVjb3Jkcy5tYXAoKHIpID0+IHtcblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdGNlbGxzOiAoKSA9PiBbXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0bWFpbjogRG5zUmVjb3JkVGFibGVbci5yZWNvcmQudHlwZSBhcyBEbnNSZWNvcmRUeXBlXSxcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdG1haW46IHIucmVjb3JkLnN1YmRvbWFpbiA/IHIucmVjb3JkLnN1YmRvbWFpbiA6IFwiQFwiLFxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0bWFpbjogci5yZWNvcmQudmFsdWUsXG5cdFx0XHRcdFx0XHRpbmZvOiByLmhlbHBJbmZvLFxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdF0sXG5cdFx0XHR9XG5cdFx0fSksXG5cdH0pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZW5kZXJDaGVja1Jlc3VsdChkb21haW5TdGF0dXM6IERvbWFpbkRuc1N0YXR1cywgaGlkZVJlZnJlc2hCdXR0b246IGJvb2xlYW4gPSBmYWxzZSk6IENoaWxkcmVuIHtcblx0Y29uc3QgY2hlY2tSZXR1cm4gPSBkb21haW5TdGF0dXMuZ2V0TG9hZGVkQ3VzdG9tRG9tYWluQ2hlY2tHZXRPdXQoKVxuXHRjb25zdCB7IHJlcXVpcmVkUmVjb3JkcywgbWlzc2luZ1JlY29yZHMsIGludmFsaWRSZWNvcmRzIH0gPSBjaGVja1JldHVyblxuXHRjb25zdCBjaGVja1Jlc3VsdCA9IGFzc2VydEVudW1WYWx1ZShDdXN0b21Eb21haW5DaGVja1Jlc3VsdCwgY2hlY2tSZXR1cm4uY2hlY2tSZXN1bHQpXG5cblx0aWYgKGNoZWNrUmVzdWx0ID09PSBDdXN0b21Eb21haW5DaGVja1Jlc3VsdC5DVVNUT01fRE9NQUlOX0NIRUNLX1JFU1VMVF9PSykge1xuXHRcdGNvbnN0IHZhbGlkYXRlZFJlY29yZHMgPSByZXF1aXJlZFJlY29yZHMubWFwKChyZWNvcmQpID0+IHtcblx0XHRcdGNvbnN0IGRpc3BsYXlhYmxlUmVjb3JkVmFsdWUgPSBfZ2V0RGlzcGxheWFibGVSZWNvcmRWYWx1ZShyZWNvcmQpXG5cblx0XHRcdGNvbnN0IGhlbHBJbmZvOiBzdHJpbmdbXSA9IFtdXG5cdFx0XHRsZXQgdmFsaWRhdGVkUmVjb3JkOiBEbnNSZWNvcmQgfCBudWxsID0gbnVsbFxuXG5cdFx0XHRmb3IgKGxldCBtaXNzaW5nUmVjb3JkIG9mIGZpbmREbnNSZWNvcmRJbkxpc3QocmVjb3JkLCBtaXNzaW5nUmVjb3JkcykpIHtcblx0XHRcdFx0dmFsaWRhdGVkUmVjb3JkID0gcmVjb3JkXG5cblx0XHRcdFx0aWYgKHJlY29yZC50eXBlID09PSBEbnNSZWNvcmRUeXBlLkROU19SRUNPUkRfVFlQRV9UWFRfRE1BUkMpIHtcblx0XHRcdFx0XHRoZWxwSW5mby5wdXNoKGAke0Ruc1JlY29yZFZhbGlkYXRpb24uQkFEfSAke2xhbmcuZ2V0KFwicmVjb21tZW5kZWRETlNWYWx1ZV9sYWJlbFwiKX06ICR7ZGlzcGxheWFibGVSZWNvcmRWYWx1ZX1gKVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGhlbHBJbmZvLnB1c2goYCR7RG5zUmVjb3JkVmFsaWRhdGlvbi5CQUR9ICR7bGFuZy5nZXQoXCJhZGRETlNWYWx1ZV9sYWJlbFwiKX06ICR7ZGlzcGxheWFibGVSZWNvcmRWYWx1ZX1gKVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGZvciAobGV0IGludmFsaWRSZWNvcmQgb2YgZmluZERuc1JlY29yZEluTGlzdChyZWNvcmQsIGludmFsaWRSZWNvcmRzKSkge1xuXHRcdFx0XHR2YWxpZGF0ZWRSZWNvcmQgPSByZWNvcmRcblx0XHRcdFx0Ly8gaGVyZSB3ZSB3YW50IHRvIGRpc3BsYXkgdGhlIGluY29ycmVjdCB2YWx1ZSFcblx0XHRcdFx0aGVscEluZm8ucHVzaChgJHtEbnNSZWNvcmRWYWxpZGF0aW9uLkJBRH0gJHtsYW5nLmdldChcInJlbW92ZUROU1ZhbHVlX2xhYmVsXCIpfTogJHtpbnZhbGlkUmVjb3JkLnZhbHVlfWApXG5cdFx0XHR9XG5cblx0XHRcdGlmICh2YWxpZGF0ZWRSZWNvcmQgPT0gbnVsbCkge1xuXHRcdFx0XHR2YWxpZGF0ZWRSZWNvcmQgPSByZWNvcmRcblx0XHRcdFx0aGVscEluZm8ucHVzaChgJHtEbnNSZWNvcmRWYWxpZGF0aW9uLk9LfSAke2xhbmcuZ2V0KFwiY29ycmVjdEROU1ZhbHVlX2xhYmVsXCIpfWApXG5cdFx0XHR9XG5cblx0XHRcdHZhbGlkYXRlZFJlY29yZC52YWx1ZSA9IGRpc3BsYXlhYmxlUmVjb3JkVmFsdWVcblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdHJlY29yZDogdmFsaWRhdGVkUmVjb3JkLFxuXHRcdFx0XHRoZWxwSW5mbyxcblx0XHRcdH1cblx0XHR9KVxuXHRcdHJldHVybiBbXG5cdFx0XHRtKFwiLm10LW0ubWItc1wiLCBsYW5nLmdldChcInNldERuc1JlY29yZHNfbXNnXCIpKSxcblx0XHRcdGNyZWF0ZURuc1JlY29yZFRhYmxlTihcblx0XHRcdFx0dmFsaWRhdGVkUmVjb3Jkcyxcblx0XHRcdFx0aGlkZVJlZnJlc2hCdXR0b25cblx0XHRcdFx0XHQ/IG51bGxcblx0XHRcdFx0XHQ6IHtcblx0XHRcdFx0XHRcdFx0dGl0bGU6IFwicmVmcmVzaF9hY3Rpb25cIixcblx0XHRcdFx0XHRcdFx0aWNvbjogQm9vdEljb25zLlByb2dyZXNzLFxuXHRcdFx0XHRcdFx0XHRzaXplOiBCdXR0b25TaXplLkNvbXBhY3QsXG5cdFx0XHRcdFx0XHRcdGNsaWNrOiAoKSA9PiBfdXBkYXRlRG5zU3RhdHVzKGRvbWFpblN0YXR1cyksXG5cdFx0XHRcdFx0ICB9LFxuXHRcdFx0KSxcblx0XHRcdG0oTW9yZUluZm9MaW5rLCB7IGxpbms6IEluZm9MaW5rLkRvbWFpbkluZm8sIGNsYXNzOiBcIm10LW1cIiwgaXNTbWFsbDogdHJ1ZSB9KSxcblx0XHRdXG5cdH0gZWxzZSB7XG5cdFx0Y29uc3QgZXJyb3JNZXNzYWdlTWFwOiBSZWNvcmQ8Q3VzdG9tRG9tYWluQ2hlY2tSZXN1bHQsIFRyYW5zbGF0aW9uS2V5PiA9IHtcblx0XHRcdFtDdXN0b21Eb21haW5DaGVja1Jlc3VsdC5DVVNUT01fRE9NQUlOX0NIRUNLX1JFU1VMVF9PS106IFwiZW1wdHlTdHJpbmdfbXNnXCIsXG5cdFx0XHRbQ3VzdG9tRG9tYWluQ2hlY2tSZXN1bHQuQ1VTVE9NX0RPTUFJTl9DSEVDS19SRVNVTFRfRE5TX0xPT0tVUF9GQUlMRURdOiBcImN1c3RvbURvbWFpbkVycm9yRG5zTG9va3VwRmFpbHVyZV9tc2dcIixcblx0XHRcdFtDdXN0b21Eb21haW5DaGVja1Jlc3VsdC5DVVNUT01fRE9NQUlOX0NIRUNLX1JFU1VMVF9ET01BSU5fTk9UX0ZPVU5EXTogXCJjdXN0b21Eb21haW5FcnJvckRvbWFpbk5vdEZvdW5kX21zZ1wiLFxuXHRcdFx0W0N1c3RvbURvbWFpbkNoZWNrUmVzdWx0LkNVU1RPTV9ET01BSU5fQ0hFQ0tfUkVTVUxUX05BTUVTRVJWRVJfTk9UX0ZPVU5EXTogXCJjdXN0b21Eb21haW5FcnJvck5hbWVzZXJ2ZXJOb3RGb3VuZF9tc2dcIixcblx0XHR9XG5cdFx0cmV0dXJuIGxhbmcuZ2V0KGVycm9yTWVzc2FnZU1hcFtjaGVja1Jlc3VsdF0pXG5cdH1cbn1cblxuZnVuY3Rpb24gZmluZERuc1JlY29yZEluTGlzdChyZWNvcmQ6IERuc1JlY29yZCwgcmVjb3JkTGlzdDogQXJyYXk8RG5zUmVjb3JkPik6IEFycmF5PERuc1JlY29yZD4ge1xuXHRyZXR1cm4gcmVjb3JkTGlzdC5maWx0ZXIoKHIpID0+IHIudHlwZSA9PT0gcmVjb3JkLnR5cGUgJiYgci5zdWJkb21haW4gPT09IHJlY29yZC5zdWJkb21haW4pXG59XG5cbmV4cG9ydCBjbGFzcyBWZXJpZnlEbnNSZWNvcmRzUGFnZUF0dHJzIGltcGxlbWVudHMgV2l6YXJkUGFnZUF0dHJzPEFkZERvbWFpbkRhdGE+IHtcblx0ZGF0YTogQWRkRG9tYWluRGF0YVxuXG5cdGNvbnN0cnVjdG9yKGRvbWFpbkRhdGE6IEFkZERvbWFpbkRhdGEpIHtcblx0XHR0aGlzLmRhdGEgPSBkb21haW5EYXRhXG5cdH1cblxuXHRoZWFkZXJUaXRsZSgpOiBUcmFuc2xhdGlvbktleSB7XG5cdFx0cmV0dXJuIFwiZG9tYWluU2V0dXBfdGl0bGVcIlxuXHR9XG5cblx0bmV4dEFjdGlvbihzaG93RXJyb3JEaWFsb2c6IGJvb2xlYW4pOiBQcm9taXNlPGJvb2xlYW4+IHtcblx0XHQvLyBObyBuZWVkIHRvIGRvIGFueXRoaW5nLCBhcyB3ZSBhcmUgbGVhdmluZyB0aGUgd2l6YXJkXG5cdFx0Ly8gVGhlIGd1aSBjb21wb25lbnQgd2lsbCBkaXNwbGF5IGEgY29uZmlybWF0aW9uIGRpYWxvZyBpZiBETlMgY29uZmlndXJhdGlvbiBpcyBub3Qgb2suXG5cdFx0Ly8gU28gaXQgaXMgb2sgbm90IHRvIGhhdmUgdGhpcyBkaWFsb2cgd2hlbiBjYWxsZWQgZnJvbSBlbHNld2hlcmUuXG5cdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZSh0cnVlKVxuXHR9XG5cblx0aXNTa2lwQXZhaWxhYmxlKCk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiBmYWxzZVxuXHR9XG5cblx0aXNFbmFibGVkKCk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiB0cnVlXG5cdH1cbn1cbiIsImltcG9ydCBtIGZyb20gXCJtaXRocmlsXCJcbmltcG9ydCB7IGxhbmcgfSBmcm9tIFwiLi4vLi4vY29tbW9uL21pc2MvTGFuZ3VhZ2VWaWV3TW9kZWxcIlxuaW1wb3J0IHsgRGlhbG9nLCBEaWFsb2dUeXBlIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvYmFzZS9EaWFsb2dcIlxuaW1wb3J0IHsgRG9tYWluRG5zU3RhdHVzIH0gZnJvbSBcIi4vRG9tYWluRG5zU3RhdHVzXCJcbmltcG9ydCB7IHJlbmRlckNoZWNrUmVzdWx0IH0gZnJvbSBcIi4vZW1haWxkb21haW4vVmVyaWZ5RG5zUmVjb3Jkc1BhZ2VcIlxuaW1wb3J0IHsgYXNzZXJ0TWFpbk9yTm9kZSB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL2NvbW1vbi9FbnZcIlxuXG5hc3NlcnRNYWluT3JOb2RlKClcblxuLyoqXG4gKiBAcHJlIGRvbWFpblN0YXR1cy5zdGF0dXMuaXNMb2FkZWQoKSA9PSB0cnVlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzaG93RG5zQ2hlY2tEaWFsb2coZG9tYWluU3RhdHVzOiBEb21haW5EbnNTdGF0dXMpIHtcblx0bGV0IGRpYWxvZyA9IERpYWxvZy5zaG93QWN0aW9uRGlhbG9nKHtcblx0XHR0eXBlOiBEaWFsb2dUeXBlLkVkaXRMYXJnZXIsXG5cdFx0dGl0bGU6IFwiY2hlY2tEbnNSZWNvcmRzX2FjdGlvblwiLFxuXHRcdG9rQWN0aW9uVGV4dElkOiBcImNoZWNrQWdhaW5fYWN0aW9uXCIsXG5cdFx0Y2FuY2VsQWN0aW9uVGV4dElkOiBcImNsb3NlX2FsdFwiLFxuXHRcdGNoaWxkOiAoKSA9PiByZW5kZXJDaGVja1Jlc3VsdChkb21haW5TdGF0dXMsIHRydWUpLFxuXHRcdG9rQWN0aW9uOiAoKSA9PiB7XG5cdFx0XHRkb21haW5TdGF0dXMubG9hZEN1cnJlbnRTdGF0dXMoKS50aGVuKCgpID0+IHtcblx0XHRcdFx0aWYgKGRvbWFpblN0YXR1cy5hcmVSZWNvcmRzRmluZSgpKSB7XG5cdFx0XHRcdFx0ZGlhbG9nLmNsb3NlKClcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRtLnJlZHJhdygpXG5cdFx0XHRcdH1cblx0XHRcdH0pXG5cdFx0fSxcblx0fSlcbn1cbiIsImltcG9ydCBtIGZyb20gXCJtaXRocmlsXCJcbmltcG9ydCB0eXBlIHsgUmVqZWN0ZWRTZW5kZXIgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2FwaS9lbnRpdGllcy9zeXMvVHlwZVJlZnMuanNcIlxuaW1wb3J0IHsgVGV4dEZpZWxkIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvYmFzZS9UZXh0RmllbGQuanNcIlxuaW1wb3J0IHN0cmVhbSBmcm9tIFwibWl0aHJpbC9zdHJlYW1cIlxuaW1wb3J0IHsgRGlhbG9nIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvYmFzZS9EaWFsb2dcIlxuaW1wb3J0IHsgbGFuZyB9IGZyb20gXCIuLi8uLi9jb21tb24vbWlzYy9MYW5ndWFnZVZpZXdNb2RlbFwiXG5cbi8qXG5sYWJlbDogVHJhbnNsYXRpb25LZXkgfCBsYXp5PHN0cmluZz4sXG5cdHZhbHVlOiBTdHJlYW08c3RyaW5nPixcblx0cHJldmVudEF1dG9maWxsPzogYm9vbGVhbixcblx0dHlwZT86IFRleHRGaWVsZFR5cGUsXG5cdGhlbHBMYWJlbD86ID9sYXp5PENoaWxkcmVuPixcblx0YWxpZ25SaWdodD86IGJvb2xlYW4sXG5cdGluamVjdGlvbnNMZWZ0PzogbGF6eTxDaGlsZHJlbj4sIC8vIG9ubHkgdXNlZCBieSB0aGUgQnViYmxlVGV4dEZpZWxkIHRvIGRpc3BsYXkgYnViYmxlc1xuXHRpbmplY3Rpb25zUmlnaHQ/OiBsYXp5PENoaWxkcmVuPixcblx0a2V5SGFuZGxlcj86IGtleUhhbmRsZXIsIC8vIGludGVyY2VwdG9yIHVzZWQgYnkgdGhlIEJ1YmJsZVRleHRGaWVsZCB0byByZWFjdCBvbiBjZXJ0YWluIGtleXNcblx0b25mb2N1cz86IChkb206IEhUTUxFbGVtZW50LCBpbnB1dDogSFRNTElucHV0RWxlbWVudCkgPT4gbWl4ZWQsXG5cdG9uYmx1cj86IEZ1bmN0aW9uLFxuXHRtYXhXaWR0aD86IG51bWJlcixcblx0Y2xhc3M/OiBzdHJpbmcsXG4qL1xuZXhwb3J0IGZ1bmN0aW9uIHNob3dSZWplY3RlZFNlbmRlcnNJbmZvRGlhbG9nKHJlamVjdGVkU2VuZGVyOiBSZWplY3RlZFNlbmRlcikge1xuXHRjb25zdCBhY3Rpb25EaWFsb2dQcm9wZXJ0aWVzID0ge1xuXHRcdHRpdGxlOiBcImRldGFpbHNfbGFiZWxcIixcblx0XHRjaGlsZDoge1xuXHRcdFx0dmlldzogKCkgPT4ge1xuXHRcdFx0XHRyZXR1cm4gW1xuXHRcdFx0XHRcdG0oVGV4dEZpZWxkLCB7XG5cdFx0XHRcdFx0XHRsYWJlbDogXCJlbWFpbFNlbmRlcl9sYWJlbFwiLFxuXHRcdFx0XHRcdFx0dmFsdWU6IHJlamVjdGVkU2VuZGVyLnNlbmRlck1haWxBZGRyZXNzLFxuXHRcdFx0XHRcdFx0aXNSZWFkT25seTogdHJ1ZSxcblx0XHRcdFx0XHR9KSxcblx0XHRcdFx0XHRtKFRleHRGaWVsZCwge1xuXHRcdFx0XHRcdFx0bGFiZWw6IFwibWFpbFNlcnZlcl9sYWJlbFwiLFxuXHRcdFx0XHRcdFx0dmFsdWU6IGAke3JlamVjdGVkU2VuZGVyLnNlbmRlckhvc3RuYW1lfSAoJHtyZWplY3RlZFNlbmRlci5zZW5kZXJJcH0pYCxcblx0XHRcdFx0XHRcdGlzUmVhZE9ubHk6IHRydWUsXG5cdFx0XHRcdFx0fSksXG5cdFx0XHRcdFx0bShUZXh0RmllbGQsIHtcblx0XHRcdFx0XHRcdGxhYmVsOiBcImVtYWlsUmVjaXBpZW50X2xhYmVsXCIsXG5cdFx0XHRcdFx0XHR2YWx1ZTogcmVqZWN0ZWRTZW5kZXIucmVjaXBpZW50TWFpbEFkZHJlc3MsXG5cdFx0XHRcdFx0XHRpc1JlYWRPbmx5OiB0cnVlLFxuXHRcdFx0XHRcdH0pLFxuXHRcdFx0XHRcdG0oVGV4dEZpZWxkLCB7XG5cdFx0XHRcdFx0XHRsYWJlbDogXCJyZWplY3RSZWFzb25fbGFiZWxcIixcblx0XHRcdFx0XHRcdHZhbHVlOiByZWplY3RlZFNlbmRlci5yZWFzb24sXG5cdFx0XHRcdFx0XHRpc1JlYWRPbmx5OiB0cnVlLFxuXHRcdFx0XHRcdH0pLFxuXHRcdFx0XHRdXG5cdFx0XHR9LFxuXHRcdH0sXG5cdFx0b2tBY3Rpb246IG51bGwsXG5cdFx0YWxsb3dDYW5jZWw6IHRydWUsXG5cdFx0YWxsb3dPa1dpdGhSZXR1cm46IGZhbHNlLFxuXHRcdGNhbmNlbEFjdGlvblRleHRJZDogXCJjbG9zZV9hbHRcIixcblx0fSBhcyBjb25zdFxuXHREaWFsb2cuc2hvd0FjdGlvbkRpYWxvZyhhY3Rpb25EaWFsb2dQcm9wZXJ0aWVzKVxufVxuIiwiaW1wb3J0IHsgbGFuZywgVHJhbnNsYXRpb25LZXkgfSBmcm9tIFwiLi4vLi4vbWlzYy9MYW5ndWFnZVZpZXdNb2RlbC5qc1wiXG5pbXBvcnQgeyBEaWFsb2cgfSBmcm9tIFwiLi4vLi4vZ3VpL2Jhc2UvRGlhbG9nLmpzXCJcbmltcG9ydCB7IERFRkFVTFRfRlJFRV9NQUlMX0FERFJFU1NfU0lHTlVQX0RPTUFJTiwgTmV3UGFpZFBsYW5zLCBUVVRBX01BSUxfQUREUkVTU19ET01BSU5TIH0gZnJvbSBcIi4uLy4uL2FwaS9jb21tb24vVHV0YW5vdGFDb25zdGFudHMuanNcIlxuaW1wb3J0IG0gZnJvbSBcIm1pdGhyaWxcIlxuaW1wb3J0IHsgU2VsZWN0TWFpbEFkZHJlc3NGb3JtIH0gZnJvbSBcIi4uL1NlbGVjdE1haWxBZGRyZXNzRm9ybS5qc1wiXG5pbXBvcnQgeyBFeHBhbmRlclBhbmVsIH0gZnJvbSBcIi4uLy4uL2d1aS9iYXNlL0V4cGFuZGVyLmpzXCJcbmltcG9ydCB7IGZpbHRlckludCwgZ2V0Rmlyc3RPclRocm93LCBvZkNsYXNzIH0gZnJvbSBcIkB0dXRhby90dXRhbm90YS11dGlsc1wiXG5pbXBvcnQgeyBzaG93UHJvZ3Jlc3NEaWFsb2cgfSBmcm9tIFwiLi4vLi4vZ3VpL2RpYWxvZ3MvUHJvZ3Jlc3NEaWFsb2cuanNcIlxuaW1wb3J0IHsgSW52YWxpZERhdGFFcnJvciwgUHJlY29uZGl0aW9uRmFpbGVkRXJyb3IgfSBmcm9tIFwiLi4vLi4vYXBpL2NvbW1vbi9lcnJvci9SZXN0RXJyb3IuanNcIlxuaW1wb3J0IHsgTWFpbEFkZHJlc3NUYWJsZU1vZGVsIH0gZnJvbSBcIi4vTWFpbEFkZHJlc3NUYWJsZU1vZGVsLmpzXCJcbmltcG9ydCB7IEF1dG9jb21wbGV0ZSwgVGV4dEZpZWxkIH0gZnJvbSBcIi4uLy4uL2d1aS9iYXNlL1RleHRGaWVsZC5qc1wiXG5pbXBvcnQgeyBVcGdyYWRlUmVxdWlyZWRFcnJvciB9IGZyb20gXCIuLi8uLi9hcGkvbWFpbi9VcGdyYWRlUmVxdWlyZWRFcnJvci5qc1wiXG5pbXBvcnQgeyBzaG93UGxhblVwZ3JhZGVSZXF1aXJlZERpYWxvZyB9IGZyb20gXCIuLi8uLi9taXNjL1N1YnNjcmlwdGlvbkRpYWxvZ3MuanNcIlxuXG5jb25zdCBGQUlMVVJFX1VTRVJfRElTQUJMRUQgPSBcIm1haWxhZGRyZXNzYWxpYXNzZXJ2aWNlLmdyb3VwX2Rpc2FibGVkXCJcblxuZXhwb3J0IGZ1bmN0aW9uIHNob3dBZGRBbGlhc0RpYWxvZyhtb2RlbDogTWFpbEFkZHJlc3NUYWJsZU1vZGVsLCBpc05ld1BhaWRQbGFuOiBib29sZWFuKSB7XG5cdG1vZGVsLmdldEF2YWlsYWJsZURvbWFpbnMoKS50aGVuKChkb21haW5zKSA9PiB7XG5cdFx0Y29uc3QgaGFzQ3VzdG9tRG9tYWlucyA9IGRvbWFpbnMuc29tZSgoZG9tYWluKSA9PiAhVFVUQV9NQUlMX0FERFJFU1NfRE9NQUlOUy5pbmNsdWRlcyhkb21haW4uZG9tYWluKSlcblx0XHRpZiAobW9kZWwuYWxpYXNDb3VudCAmJiBmaWx0ZXJJbnQobW9kZWwuYWxpYXNDb3VudC51c2VkQWxpYXNlcykgPj0gZmlsdGVySW50KG1vZGVsLmFsaWFzQ291bnQudG90YWxBbGlhc2VzKSkge1xuXHRcdFx0aWYgKCEoaXNOZXdQYWlkUGxhbiAmJiBoYXNDdXN0b21Eb21haW5zKSkge1xuXHRcdFx0XHRtb2RlbC5oYW5kbGVUb29NYW55QWxpYXNlcygpLmNhdGNoKG9mQ2xhc3MoVXBncmFkZVJlcXVpcmVkRXJyb3IsIChlKSA9PiBzaG93UGxhblVwZ3JhZGVSZXF1aXJlZERpYWxvZyhlLnBsYW5zLCBlLm1lc3NhZ2UpKSlcblx0XHRcdFx0cmV0dXJuXG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0bGV0IGlzVmVyaWZpY2F0aW9uQnVzeSA9IGZhbHNlXG5cdFx0bGV0IG1haWxBZGRyZXNzOiBzdHJpbmdcblx0XHRsZXQgZm9ybUVycm9ySWQ6IFRyYW5zbGF0aW9uS2V5IHwgbnVsbCA9IFwibWFpbEFkZHJlc3NOZXV0cmFsX21zZ1wiXG5cdFx0bGV0IGZvcm1Eb21haW4gPSBnZXRGaXJzdE9yVGhyb3coZG9tYWlucylcblx0XHRpZiAoIWlzTmV3UGFpZFBsYW4gJiYgIWhhc0N1c3RvbURvbWFpbnMpIHtcblx0XHRcdGZvcm1Eb21haW4gPSBkb21haW5zLmZpbmQoKGRvbWFpbikgPT4gZG9tYWluLmRvbWFpbiA9PT0gREVGQVVMVF9GUkVFX01BSUxfQUREUkVTU19TSUdOVVBfRE9NQUlOKSA/PyBmb3JtRG9tYWluXG5cdFx0fVxuXHRcdGxldCBzZW5kZXJOYW1lID0gbW9kZWwuZGVmYXVsdFNlbmRlck5hbWUoKVxuXG5cdFx0Y29uc3QgYWRkRW1haWxBbGlhc09rQWN0aW9uID0gKGRpYWxvZzogRGlhbG9nKSA9PiB7XG5cdFx0XHRpZiAoaXNWZXJpZmljYXRpb25CdXN5KSByZXR1cm5cblxuXHRcdFx0aWYgKGZvcm1FcnJvcklkKSB7XG5cdFx0XHRcdERpYWxvZy5tZXNzYWdlKGZvcm1FcnJvcklkKVxuXHRcdFx0XHRyZXR1cm5cblx0XHRcdH1cblxuXHRcdFx0YWRkQWxpYXMobW9kZWwsIG1haWxBZGRyZXNzLCBzZW5kZXJOYW1lKVxuXHRcdFx0Ly8gY2xvc2UgdGhlIGFkZCBhbGlhcyBkaWFsb2cgaW1tZWRpYXRlbHlcblx0XHRcdGRpYWxvZy5jbG9zZSgpXG5cdFx0fVxuXG5cdFx0RGlhbG9nLnNob3dBY3Rpb25EaWFsb2coe1xuXHRcdFx0dGl0bGU6IFwiYWRkRW1haWxBbGlhc19sYWJlbFwiLFxuXHRcdFx0Y2hpbGQ6IHtcblx0XHRcdFx0dmlldzogKCkgPT4ge1xuXHRcdFx0XHRcdHJldHVybiBbXG5cdFx0XHRcdFx0XHRtKFNlbGVjdE1haWxBZGRyZXNzRm9ybSwge1xuXHRcdFx0XHRcdFx0XHRzZWxlY3RlZERvbWFpbjogZm9ybURvbWFpbixcblx0XHRcdFx0XHRcdFx0YXZhaWxhYmxlRG9tYWluczogZG9tYWlucyxcblx0XHRcdFx0XHRcdFx0b25WYWxpZGF0aW9uUmVzdWx0OiAoZW1haWwsIHZhbGlkYXRpb25SZXN1bHQpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRpZiAodmFsaWRhdGlvblJlc3VsdC5pc1ZhbGlkKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRtYWlsQWRkcmVzcyA9IGVtYWlsXG5cdFx0XHRcdFx0XHRcdFx0XHRmb3JtRXJyb3JJZCA9IG51bGxcblx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdFx0Zm9ybUVycm9ySWQgPSB2YWxpZGF0aW9uUmVzdWx0LmVycm9ySWRcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdG9uQnVzeVN0YXRlQ2hhbmdlZDogKGlzQnVzeSkgPT4gKGlzVmVyaWZpY2F0aW9uQnVzeSA9IGlzQnVzeSksXG5cdFx0XHRcdFx0XHRcdG9uRG9tYWluQ2hhbmdlZDogKGRvbWFpbikgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdGlmICghZG9tYWluLmlzUGFpZCB8fCBpc05ld1BhaWRQbGFuKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRmb3JtRG9tYWluID0gZG9tYWluXG5cdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRcdERpYWxvZy5jb25maXJtKFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRsYW5nLm1ha2VUcmFuc2xhdGlvbihcImNvbmZpcm1fbXNnXCIsIGAke2xhbmcuZ2V0KFwicGFpZEVtYWlsRG9tYWluTGVnYWN5X21zZ1wiKX1cXG4ke2xhbmcuZ2V0KFwiY2hhbmdlUGFpZFBsYW5fbXNnXCIpfWApLFxuXHRcdFx0XHRcdFx0XHRcdFx0KS50aGVuKGFzeW5jIChjb25maXJtZWQpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKGNvbmZpcm1lZCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlzTmV3UGFpZFBsYW4gPSBhd2FpdCBzaG93UGxhblVwZ3JhZGVSZXF1aXJlZERpYWxvZyhOZXdQYWlkUGxhbnMpXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0fSksXG5cdFx0XHRcdFx0XHRtKFxuXHRcdFx0XHRcdFx0XHRFeHBhbmRlclBhbmVsLFxuXHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0ZXhwYW5kZWQ6IFRVVEFfTUFJTF9BRERSRVNTX0RPTUFJTlMuaW5jbHVkZXMoZm9ybURvbWFpbi5kb21haW4pLFxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRtKFwiLnB0XCIsIGxhbmcuZ2V0KFwicGVybWFuZW50QWxpYXNXYXJuaW5nX21zZ1wiKSksXG5cdFx0XHRcdFx0XHQpLFxuXHRcdFx0XHRcdFx0bShUZXh0RmllbGQsIHtcblx0XHRcdFx0XHRcdFx0bGFiZWw6IFwibWFpbE5hbWVfbGFiZWxcIixcblx0XHRcdFx0XHRcdFx0dmFsdWU6IHNlbmRlck5hbWUsXG5cdFx0XHRcdFx0XHRcdGF1dG9jb21wbGV0ZUFzOiBBdXRvY29tcGxldGUudXNlcm5hbWUsXG5cdFx0XHRcdFx0XHRcdG9uaW5wdXQ6IChuYW1lKSA9PiAoc2VuZGVyTmFtZSA9IG5hbWUpLFxuXHRcdFx0XHRcdFx0fSksXG5cdFx0XHRcdFx0XVxuXHRcdFx0XHR9LFxuXHRcdFx0fSxcblx0XHRcdGFsbG93T2tXaXRoUmV0dXJuOiB0cnVlLFxuXHRcdFx0b2tBY3Rpb246IGFkZEVtYWlsQWxpYXNPa0FjdGlvbixcblx0XHR9KVxuXHR9KVxufVxuXG5hc3luYyBmdW5jdGlvbiBhZGRBbGlhcyhtb2RlbDogTWFpbEFkZHJlc3NUYWJsZU1vZGVsLCBhbGlhczogc3RyaW5nLCBzZW5kZXJOYW1lOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcblx0dHJ5IHtcblx0XHRhd2FpdCBzaG93UHJvZ3Jlc3NEaWFsb2coXCJwbGVhc2VXYWl0X21zZ1wiLCBtb2RlbC5hZGRBbGlhcyhhbGlhcywgc2VuZGVyTmFtZSkpXG5cdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0aWYgKGVycm9yIGluc3RhbmNlb2YgSW52YWxpZERhdGFFcnJvcikge1xuXHRcdFx0RGlhbG9nLm1lc3NhZ2UoXCJtYWlsQWRkcmVzc05BX21zZ1wiKVxuXHRcdH0gZWxzZSBpZiAoZXJyb3IgaW5zdGFuY2VvZiBQcmVjb25kaXRpb25GYWlsZWRFcnJvcikge1xuXHRcdFx0bGV0IGVycm9yTXNnID0gZXJyb3IudG9TdHJpbmcoKVxuXG5cdFx0XHRpZiAoZXJyb3IuZGF0YSA9PT0gRkFJTFVSRV9VU0VSX0RJU0FCTEVEKSB7XG5cdFx0XHRcdGVycm9yTXNnID0gbGFuZy5nZXQoXCJhZGRBbGlhc1VzZXJEaXNhYmxlZF9tc2dcIilcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIERpYWxvZy5tZXNzYWdlKGxhbmcubWFrZVRyYW5zbGF0aW9uKFwiY29uZmlybV9tc2dcIiwgZXJyb3JNc2cpKVxuXHRcdH0gZWxzZSBpZiAoZXJyb3IgaW5zdGFuY2VvZiBVcGdyYWRlUmVxdWlyZWRFcnJvcikge1xuXHRcdFx0c2hvd1BsYW5VcGdyYWRlUmVxdWlyZWREaWFsb2coZXJyb3IucGxhbnMsIGVycm9yLm1lc3NhZ2UpXG5cdFx0fSBlbHNlIHtcblx0XHRcdHRocm93IGVycm9yXG5cdFx0fVxuXHR9XG59XG4iLCJpbXBvcnQgbSwgeyBDaGlsZHJlbiwgQ29tcG9uZW50LCBWbm9kZSB9IGZyb20gXCJtaXRocmlsXCJcbmltcG9ydCB7IERpYWxvZyB9IGZyb20gXCIuLi8uLi9ndWkvYmFzZS9EaWFsb2cuanNcIlxuaW1wb3J0IHR5cGUgeyBUYWJsZUxpbmVBdHRycyB9IGZyb20gXCIuLi8uLi9ndWkvYmFzZS9UYWJsZS5qc1wiXG5pbXBvcnQgeyBDb2x1bW5XaWR0aCwgVGFibGUgfSBmcm9tIFwiLi4vLi4vZ3VpL2Jhc2UvVGFibGUuanNcIlxuaW1wb3J0IHsgbGFuZywgVHJhbnNsYXRpb25LZXkgfSBmcm9tIFwiLi4vLi4vbWlzYy9MYW5ndWFnZVZpZXdNb2RlbC5qc1wiXG5pbXBvcnQgeyBMaW1pdFJlYWNoZWRFcnJvciB9IGZyb20gXCIuLi8uLi9hcGkvY29tbW9uL2Vycm9yL1Jlc3RFcnJvci5qc1wiXG5pbXBvcnQgeyBvZkNsYXNzIH0gZnJvbSBcIkB0dXRhby90dXRhbm90YS11dGlsc1wiXG5pbXBvcnQgeyBJY29ucyB9IGZyb20gXCIuLi8uLi9ndWkvYmFzZS9pY29ucy9JY29ucy5qc1wiXG5pbXBvcnQgeyBzaG93UHJvZ3Jlc3NEaWFsb2cgfSBmcm9tIFwiLi4vLi4vZ3VpL2RpYWxvZ3MvUHJvZ3Jlc3NEaWFsb2cuanNcIlxuaW1wb3J0IHsgRXhwYW5kZXJCdXR0b24sIEV4cGFuZGVyUGFuZWwgfSBmcm9tIFwiLi4vLi4vZ3VpL2Jhc2UvRXhwYW5kZXIuanNcIlxuaW1wb3J0IHsgYXR0YWNoRHJvcGRvd24sIERyb3Bkb3duQnV0dG9uQXR0cnMgfSBmcm9tIFwiLi4vLi4vZ3VpL2Jhc2UvRHJvcGRvd24uanNcIlxuaW1wb3J0IHsgc2hvd05vdEF2YWlsYWJsZUZvckZyZWVEaWFsb2csIHNob3dQbGFuVXBncmFkZVJlcXVpcmVkRGlhbG9nIH0gZnJvbSBcIi4uLy4uL21pc2MvU3Vic2NyaXB0aW9uRGlhbG9ncy5qc1wiXG5pbXBvcnQgeyBhc3NlcnRNYWluT3JOb2RlIH0gZnJvbSBcIi4uLy4uL2FwaS9jb21tb24vRW52LmpzXCJcbmltcG9ydCB7IEljb25CdXR0b25BdHRycyB9IGZyb20gXCIuLi8uLi9ndWkvYmFzZS9JY29uQnV0dG9uLmpzXCJcbmltcG9ydCB7IEJ1dHRvblNpemUgfSBmcm9tIFwiLi4vLi4vZ3VpL2Jhc2UvQnV0dG9uU2l6ZS5qc1wiXG5pbXBvcnQgeyBBZGRyZXNzSW5mbywgQWRkcmVzc1N0YXR1cywgTWFpbEFkZHJlc3NUYWJsZU1vZGVsIH0gZnJvbSBcIi4vTWFpbEFkZHJlc3NUYWJsZU1vZGVsLmpzXCJcbmltcG9ydCB7IHNob3dBZGRBbGlhc0RpYWxvZyB9IGZyb20gXCIuL0FkZEFsaWFzRGlhbG9nLmpzXCJcbmltcG9ydCB7IGxvY2F0b3IgfSBmcm9tIFwiLi4vLi4vYXBpL21haW4vQ29tbW9uTG9jYXRvci5qc1wiXG5pbXBvcnQgeyBVcGdyYWRlUmVxdWlyZWRFcnJvciB9IGZyb20gXCIuLi8uLi9hcGkvbWFpbi9VcGdyYWRlUmVxdWlyZWRFcnJvci5qc1wiXG5cbmFzc2VydE1haW5Pck5vZGUoKVxuXG5leHBvcnQgdHlwZSBNYWlsQWRkcmVzc1RhYmxlQXR0cnMgPSB7XG5cdG1vZGVsOiBNYWlsQWRkcmVzc1RhYmxlTW9kZWxcblx0ZXhwYW5kZWQ6IGJvb2xlYW5cblx0b25FeHBhbmRlZDogKGV4cGFuZGVkOiBib29sZWFuKSA9PiB1bmtub3duXG59XG5cbi8qKiBTaG93cyBhIHRhYmxlIHdpdGggYWxsIGFsaWFzZXMgYW5kIGFiaWxpdHkgdG8gZW5hYmxlL2Rpc2FibGUgdGhlbSwgYWRkIG1vcmUgYW5kIHNldCBuYW1lcy4gKi9cbmV4cG9ydCBjbGFzcyBNYWlsQWRkcmVzc1RhYmxlIGltcGxlbWVudHMgQ29tcG9uZW50PE1haWxBZGRyZXNzVGFibGVBdHRycz4ge1xuXHR2aWV3KHsgYXR0cnMgfTogVm5vZGU8TWFpbEFkZHJlc3NUYWJsZUF0dHJzPik6IENoaWxkcmVuIHtcblx0XHRjb25zdCB7IG1vZGVsIH0gPSBhdHRyc1xuXHRcdC8vIElmIHRoZSB0YWJsZSBpcyBleHBhbmRlZCB3ZSBuZWVkIHRvIGluaXQgdGhlIG1vZGVsLlxuXHRcdC8vIEl0IGlzIG5vLW9wIHRvIGluaXQgbXVsdGlwbGUgdGltZXMgc28gaXQncyBzYWZlLlxuXHRcdGlmIChhdHRycy5leHBhbmRlZCkge1xuXHRcdFx0bW9kZWwuaW5pdCgpXG5cdFx0fVxuXHRcdGNvbnN0IGFkZEFsaWFzQnV0dG9uQXR0cnM6IEljb25CdXR0b25BdHRycyB8IG51bGwgPSBtb2RlbC51c2VyQ2FuTW9kaWZ5QWxpYXNlcygpXG5cdFx0XHQ/IHtcblx0XHRcdFx0XHR0aXRsZTogXCJhZGRFbWFpbEFsaWFzX2xhYmVsXCIsXG5cdFx0XHRcdFx0Y2xpY2s6ICgpID0+IHRoaXMub25BZGRBbGlhcyhhdHRycyksXG5cdFx0XHRcdFx0aWNvbjogSWNvbnMuQWRkLFxuXHRcdFx0XHRcdHNpemU6IEJ1dHRvblNpemUuQ29tcGFjdCxcblx0XHRcdCAgfVxuXHRcdFx0OiBudWxsXG5cdFx0cmV0dXJuIFtcblx0XHRcdG0oXCIuZmxleC1zcGFjZS1iZXR3ZWVuLml0ZW1zLWNlbnRlci5tdC1sLm1iLXNcIiwgW1xuXHRcdFx0XHRtKFwiLmg0XCIsIGxhbmcuZ2V0KFwibWFpbEFkZHJlc3Nlc19sYWJlbFwiKSksXG5cdFx0XHRcdG0oRXhwYW5kZXJCdXR0b24sIHtcblx0XHRcdFx0XHRsYWJlbDogXCJzaG93X2FjdGlvblwiLFxuXHRcdFx0XHRcdGV4cGFuZGVkOiBhdHRycy5leHBhbmRlZCxcblx0XHRcdFx0XHRvbkV4cGFuZGVkQ2hhbmdlOiAodikgPT4ge1xuXHRcdFx0XHRcdFx0YXR0cnMub25FeHBhbmRlZCh2KVxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdH0pLFxuXHRcdFx0XSksXG5cdFx0XHRtKFxuXHRcdFx0XHRFeHBhbmRlclBhbmVsLFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0ZXhwYW5kZWQ6IGF0dHJzLmV4cGFuZGVkLFxuXHRcdFx0XHR9LFxuXHRcdFx0XHRtKFRhYmxlLCB7XG5cdFx0XHRcdFx0Y29sdW1uSGVhZGluZzogW1wibWFpbEFkZHJlc3NfbGFiZWxcIiwgXCJzdGF0ZV9sYWJlbFwiXSxcblx0XHRcdFx0XHRjb2x1bW5XaWR0aHM6IFtDb2x1bW5XaWR0aC5MYXJnZXN0LCBDb2x1bW5XaWR0aC5TbWFsbF0sXG5cdFx0XHRcdFx0c2hvd0FjdGlvbkJ1dHRvbkNvbHVtbjogdHJ1ZSxcblx0XHRcdFx0XHRhZGRCdXR0b25BdHRyczogYWRkQWxpYXNCdXR0b25BdHRycyxcblx0XHRcdFx0XHRsaW5lczogZ2V0QWxpYXNMaW5lQXR0cnMoYXR0cnMpLFxuXHRcdFx0XHR9KSxcblx0XHRcdCksXG5cdFx0XHRtb2RlbC5hbGlhc0NvdW50XG5cdFx0XHRcdD8gW1xuXHRcdFx0XHRcdFx0bShcblx0XHRcdFx0XHRcdFx0XCIubXQtc1wiLFxuXHRcdFx0XHRcdFx0XHRsYW5nLmdldChcImFtb3VudFVzZWRBbmRBY3RpdmF0ZWRPZl9sYWJlbFwiLCB7XG5cdFx0XHRcdFx0XHRcdFx0XCJ7dXNlZH1cIjogbW9kZWwuYWxpYXNDb3VudC51c2VkQWxpYXNlcyxcblx0XHRcdFx0XHRcdFx0XHRcInthY3RpdmV9XCI6IG1vZGVsLmFsaWFzQ291bnQuZW5hYmxlZEFsaWFzZXMsXG5cdFx0XHRcdFx0XHRcdFx0XCJ7dG90YWxBbW91bnR9XCI6IG1vZGVsLmFsaWFzQ291bnQudG90YWxBbGlhc2VzLFxuXHRcdFx0XHRcdFx0XHR9KSxcblx0XHRcdFx0XHRcdCksXG5cdFx0XHRcdFx0XHRtKFwiLnNtYWxsLm10LXNcIiwgbGFuZy5nZXQobW9kZWwuYWxpYXNMaW1pdEluY2x1ZGVzQ3VzdG9tRG9tYWlucygpID8gXCJtYWlsQWRkcmVzc0luZm9MZWdhY3lfbXNnXCIgOiBcIm1haWxBZGRyZXNzSW5mb19tc2dcIikpLFxuXHRcdFx0XHQgIF1cblx0XHRcdFx0OiBudWxsLFxuXHRcdF1cblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgb25BZGRBbGlhcyhhdHRyczogTWFpbEFkZHJlc3NUYWJsZUF0dHJzKSB7XG5cdFx0Y29uc3QgdXNlckNvbnRyb2xsZXIgPSBsb2NhdG9yLmxvZ2lucy5nZXRVc2VyQ29udHJvbGxlcigpXG5cdFx0aWYgKHVzZXJDb250cm9sbGVyLmlzRnJlZUFjY291bnQoKSkge1xuXHRcdFx0c2hvd05vdEF2YWlsYWJsZUZvckZyZWVEaWFsb2coKVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRjb25zdCBpc05ld1BhaWRQbGFuID0gYXdhaXQgdXNlckNvbnRyb2xsZXIuaXNOZXdQYWlkUGxhbigpXG5cdFx0XHRzaG93QWRkQWxpYXNEaWFsb2coYXR0cnMubW9kZWwsIGlzTmV3UGFpZFBsYW4pXG5cdFx0fVxuXHR9XG59XG5cbmZ1bmN0aW9uIHNldE5hbWVEcm9wZG93bkJ1dHRvbihtb2RlbDogTWFpbEFkZHJlc3NUYWJsZU1vZGVsLCBhZGRyZXNzSW5mbzogQWRkcmVzc0luZm8pOiBEcm9wZG93bkJ1dHRvbkF0dHJzIHtcblx0cmV0dXJuIHtcblx0XHRsYWJlbDogXCJzZXRTZW5kZXJOYW1lX2FjdGlvblwiLFxuXHRcdGNsaWNrOiAoKSA9PiBzaG93U2VuZGVyTmFtZUNoYW5nZURpYWxvZyhtb2RlbCwgYWRkcmVzc0luZm8pLFxuXHR9XG59XG5cbmZ1bmN0aW9uIGFkZHJlc3NEcm9wZG93bkJ1dHRvbnMoYXR0cnM6IE1haWxBZGRyZXNzVGFibGVBdHRycywgYWRkcmVzc0luZm86IEFkZHJlc3NJbmZvKTogRHJvcGRvd25CdXR0b25BdHRyc1tdIHtcblx0c3dpdGNoIChhZGRyZXNzSW5mby5zdGF0dXMpIHtcblx0XHRjYXNlIEFkZHJlc3NTdGF0dXMuUHJpbWFyeTpcblx0XHRcdHJldHVybiBbc2V0TmFtZURyb3Bkb3duQnV0dG9uKGF0dHJzLm1vZGVsLCBhZGRyZXNzSW5mbyldXG5cdFx0Y2FzZSBBZGRyZXNzU3RhdHVzLkFsaWFzOiB7XG5cdFx0XHRjb25zdCBidXR0b25zID0gW3NldE5hbWVEcm9wZG93bkJ1dHRvbihhdHRycy5tb2RlbCwgYWRkcmVzc0luZm8pXVxuXHRcdFx0aWYgKGF0dHJzLm1vZGVsLnVzZXJDYW5Nb2RpZnlBbGlhc2VzKCkpIHtcblx0XHRcdFx0YnV0dG9ucy5wdXNoKHtcblx0XHRcdFx0XHRsYWJlbDogXCJkZWFjdGl2YXRlX2FjdGlvblwiLFxuXHRcdFx0XHRcdGNsaWNrOiAoKSA9PiB7XG5cdFx0XHRcdFx0XHRzd2l0Y2hBbGlhc1N0YXR1cyhhZGRyZXNzSW5mbywgYXR0cnMpXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0fSlcblx0XHRcdH1cblx0XHRcdHJldHVybiBidXR0b25zXG5cdFx0fVxuXHRcdGNhc2UgQWRkcmVzc1N0YXR1cy5EaXNhYmxlZEFsaWFzOiB7XG5cdFx0XHRyZXR1cm4gYXR0cnMubW9kZWwudXNlckNhbk1vZGlmeUFsaWFzZXMoKVxuXHRcdFx0XHQ/IFtcblx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0bGFiZWw6IFwiYWN0aXZhdGVfYWN0aW9uXCIsXG5cdFx0XHRcdFx0XHRcdGNsaWNrOiAoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0c3dpdGNoQWxpYXNTdGF0dXMoYWRkcmVzc0luZm8sIGF0dHJzKVxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0ICBdXG5cdFx0XHRcdDogW11cblx0XHR9XG5cdFx0Y2FzZSBBZGRyZXNzU3RhdHVzLkN1c3RvbToge1xuXHRcdFx0Y29uc3QgYnV0dG9ucyA9IFtzZXROYW1lRHJvcGRvd25CdXR0b24oYXR0cnMubW9kZWwsIGFkZHJlc3NJbmZvKV1cblx0XHRcdGlmIChhdHRycy5tb2RlbC51c2VyQ2FuTW9kaWZ5QWxpYXNlcygpKSB7XG5cdFx0XHRcdGJ1dHRvbnMucHVzaCh7XG5cdFx0XHRcdFx0bGFiZWw6IFwiZGVsZXRlX2FjdGlvblwiLFxuXHRcdFx0XHRcdGNsaWNrOiAoKSA9PiB7XG5cdFx0XHRcdFx0XHRzd2l0Y2hBbGlhc1N0YXR1cyhhZGRyZXNzSW5mbywgYXR0cnMpXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0fSlcblx0XHRcdH1cblx0XHRcdHJldHVybiBidXR0b25zXG5cdFx0fVxuXHR9XG59XG5cbmZ1bmN0aW9uIHN0YXR1c0xhYmVsKGFkZHJlc3NJbmZvOiBBZGRyZXNzSW5mbyk6IHN0cmluZyB7XG5cdHN3aXRjaCAoYWRkcmVzc0luZm8uc3RhdHVzKSB7XG5cdFx0Y2FzZSBBZGRyZXNzU3RhdHVzLlByaW1hcnk6XG5cdFx0XHRyZXR1cm4gbGFuZy5nZXQoXCJwcmltYXJ5TWFpbEFkZHJlc3NfbGFiZWxcIilcblx0XHRjYXNlIEFkZHJlc3NTdGF0dXMuQWxpYXM6XG5cdFx0Y2FzZSBBZGRyZXNzU3RhdHVzLkN1c3RvbTpcblx0XHRcdHJldHVybiBsYW5nLmdldChcImFjdGl2YXRlZF9sYWJlbFwiKVxuXHRcdGNhc2UgQWRkcmVzc1N0YXR1cy5EaXNhYmxlZEFsaWFzOlxuXHRcdFx0cmV0dXJuIGxhbmcuZ2V0KFwiZGVhY3RpdmF0ZWRfbGFiZWxcIilcblx0fVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0QWxpYXNMaW5lQXR0cnMoYXR0cnM6IE1haWxBZGRyZXNzVGFibGVBdHRycyk6IEFycmF5PFRhYmxlTGluZUF0dHJzPiB7XG5cdHJldHVybiBhdHRycy5tb2RlbC5hZGRyZXNzZXMoKS5tYXAoKGFkZHJlc3NJbmZvKSA9PiB7XG5cdFx0Y29uc3QgZHJvcGRvd25CdXR0b25zID0gYWRkcmVzc0Ryb3Bkb3duQnV0dG9ucyhhdHRycywgYWRkcmVzc0luZm8pXG5cdFx0Ly8gZG8gbm90IGRpc3BsYXkgdGhlIFwibW9yZVwiIGJ1dHRvbiBpZiB0aGVyZSBhcmUgbm8gYXZhaWxhYmxlIGFjdGlvbnNcblx0XHRjb25zdCBhY3Rpb25CdXR0b25BdHRyczogSWNvbkJ1dHRvbkF0dHJzIHwgbnVsbCA9XG5cdFx0XHRkcm9wZG93bkJ1dHRvbnMubGVuZ3RoID09PSAwXG5cdFx0XHRcdD8gbnVsbFxuXHRcdFx0XHQ6IGF0dGFjaERyb3Bkb3duKHtcblx0XHRcdFx0XHRcdG1haW5CdXR0b25BdHRyczoge1xuXHRcdFx0XHRcdFx0XHR0aXRsZTogXCJlZGl0X2FjdGlvblwiLFxuXHRcdFx0XHRcdFx0XHRpY29uOiBJY29ucy5Nb3JlLFxuXHRcdFx0XHRcdFx0XHRzaXplOiBCdXR0b25TaXplLkNvbXBhY3QsXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0c2hvd0Ryb3Bkb3duOiAoKSA9PiB0cnVlLFxuXHRcdFx0XHRcdFx0d2lkdGg6IDI1MCxcblx0XHRcdFx0XHRcdGNoaWxkQXR0cnM6ICgpID0+IGRyb3Bkb3duQnV0dG9ucyxcblx0XHRcdFx0ICB9KVxuXHRcdHJldHVybiB7XG5cdFx0XHRjZWxsczogKCkgPT4gW3sgbWFpbjogYWRkcmVzc0luZm8uYWRkcmVzcywgaW5mbzogW2FkZHJlc3NJbmZvLm5hbWVdIH0sIHsgbWFpbjogc3RhdHVzTGFiZWwoYWRkcmVzc0luZm8pIH1dLFxuXHRcdFx0YWN0aW9uQnV0dG9uQXR0cnM6IGFjdGlvbkJ1dHRvbkF0dHJzLFxuXHRcdH1cblx0fSlcbn1cblxuYXN5bmMgZnVuY3Rpb24gc3dpdGNoQWxpYXNTdGF0dXMoYWxpYXM6IEFkZHJlc3NJbmZvLCBhdHRyczogTWFpbEFkZHJlc3NUYWJsZUF0dHJzKSB7XG5cdGNvbnN0IGRlYWN0aXZhdGVPckRlbGV0ZUFsaWFzID0gYWxpYXMuc3RhdHVzICE9PSBBZGRyZXNzU3RhdHVzLkRpc2FibGVkQWxpYXNcblx0aWYgKGRlYWN0aXZhdGVPckRlbGV0ZUFsaWFzKSB7XG5cdFx0Ly8gYWxpYXMgZnJvbSBjdXN0b20gZG9tYWlucyB3aWxsIGJlIGRlbGV0ZWQuIFR1dGFub3RhIGFsaWFzZXMgd2lsbCBiZSBkZWFjdGl2YXRlZFxuXHRcdGNvbnN0IG1lc3NhZ2U6IFRyYW5zbGF0aW9uS2V5ID0gYWxpYXMuc3RhdHVzID09PSBBZGRyZXNzU3RhdHVzLkN1c3RvbSA/IFwiZGVsZXRlQWxpYXNfbXNnXCIgOiBcImRlYWN0aXZhdGVBbGlhc19tc2dcIlxuXHRcdGNvbnN0IGNvbmZpcm1lZCA9IGF3YWl0IERpYWxvZy5jb25maXJtKFxuXHRcdFx0bGFuZy5nZXRUcmFuc2xhdGlvbihtZXNzYWdlLCB7XG5cdFx0XHRcdFwiezF9XCI6IGFsaWFzLmFkZHJlc3MsXG5cdFx0XHR9KSxcblx0XHQpXG5cdFx0aWYgKCFjb25maXJtZWQpIHtcblx0XHRcdHJldHVyblxuXHRcdH1cblx0fVxuXG5cdGNvbnN0IHVwZGF0ZU1vZGVsID0gYXR0cnMubW9kZWxcblx0XHQuc2V0QWxpYXNTdGF0dXMoYWxpYXMuYWRkcmVzcywgIWRlYWN0aXZhdGVPckRlbGV0ZUFsaWFzKVxuXHRcdC5jYXRjaChvZkNsYXNzKExpbWl0UmVhY2hlZEVycm9yLCAoKSA9PiBhdHRycy5tb2RlbC5oYW5kbGVUb29NYW55QWxpYXNlcygpKSlcblx0XHQuY2F0Y2gob2ZDbGFzcyhVcGdyYWRlUmVxdWlyZWRFcnJvciwgKGUpID0+IHNob3dQbGFuVXBncmFkZVJlcXVpcmVkRGlhbG9nKGUucGxhbnMsIGUubWVzc2FnZSkpKVxuXHRhd2FpdCBzaG93UHJvZ3Jlc3NEaWFsb2coXCJwbGVhc2VXYWl0X21zZ1wiLCB1cGRhdGVNb2RlbClcbn1cblxuZnVuY3Rpb24gc2hvd1NlbmRlck5hbWVDaGFuZ2VEaWFsb2cobW9kZWw6IE1haWxBZGRyZXNzVGFibGVNb2RlbCwgYWxpYXM6IHsgYWRkcmVzczogc3RyaW5nOyBuYW1lOiBzdHJpbmcgfSkge1xuXHREaWFsb2cuc2hvd1RleHRJbnB1dERpYWxvZyh7XG5cdFx0dGl0bGU6IFwiZWRpdF9hY3Rpb25cIixcblx0XHRsYWJlbDogXCJtYWlsTmFtZV9sYWJlbFwiLFxuXHRcdGluZm9Nc2dJZDogbGFuZy5tYWtlVHJhbnNsYXRpb24oXCJhbGlhc19hZGRyXCIsIGFsaWFzLmFkZHJlc3MpLFxuXHRcdGRlZmF1bHRWYWx1ZTogYWxpYXMubmFtZSxcblx0fSkudGhlbigobmV3TmFtZSkgPT4gc2hvd1Byb2dyZXNzRGlhbG9nKFwicGxlYXNlV2FpdF9tc2dcIiwgbW9kZWwuc2V0QWxpYXNOYW1lKGFsaWFzLmFkZHJlc3MsIG5ld05hbWUpKSlcbn1cbiIsImltcG9ydCB7IFNlbGVjdE1haWxBZGRyZXNzRm9ybSwgU2VsZWN0TWFpbEFkZHJlc3NGb3JtQXR0cnMgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL3NldHRpbmdzL1NlbGVjdE1haWxBZGRyZXNzRm9ybS5qc1wiXG5pbXBvcnQgbSwgeyBDaGlsZHJlbiwgQ29tcG9uZW50LCBWbm9kZSwgVm5vZGVET00gfSBmcm9tIFwibWl0aHJpbFwiXG5pbXBvcnQgeyBnZXRBbGlhc0xpbmVBdHRycyB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vc2V0dGluZ3MvbWFpbGFkZHJlc3MvTWFpbEFkZHJlc3NUYWJsZS5qc1wiXG5pbXBvcnQgdHlwZSB7IEFkZERvbWFpbkRhdGEgfSBmcm9tIFwiLi9BZGREb21haW5XaXphcmRcIlxuaW1wb3J0IHsgQ3VzdG9tZXJUeXBlUmVmLCBHcm91cEluZm9UeXBlUmVmIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9hcGkvZW50aXRpZXMvc3lzL1R5cGVSZWZzLmpzXCJcbmltcG9ydCB7IG5ldmVyTnVsbCB9IGZyb20gXCJAdHV0YW8vdHV0YW5vdGEtdXRpbHNcIlxuaW1wb3J0IHsgRGlhbG9nIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9ndWkvYmFzZS9EaWFsb2dcIlxuaW1wb3J0IHsgbG9jYXRvciB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vYXBpL21haW4vQ29tbW9uTG9jYXRvclwiXG5pbXBvcnQgdHlwZSB7IFRyYW5zbGF0aW9uS2V5IH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9taXNjL0xhbmd1YWdlVmlld01vZGVsXCJcbmltcG9ydCB7IGxhbmcgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL21pc2MvTGFuZ3VhZ2VWaWV3TW9kZWxcIlxuaW1wb3J0IHR5cGUgeyBUYWJsZUF0dHJzIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9ndWkvYmFzZS9UYWJsZS5qc1wiXG5pbXBvcnQgeyBDb2x1bW5XaWR0aCwgVGFibGUgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2d1aS9iYXNlL1RhYmxlLmpzXCJcbmltcG9ydCB0eXBlIHsgV2l6YXJkUGFnZUF0dHJzIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9ndWkvYmFzZS9XaXphcmREaWFsb2cuanNcIlxuaW1wb3J0IHsgZW1pdFdpemFyZEV2ZW50LCBXaXphcmRFdmVudFR5cGUgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2d1aS9iYXNlL1dpemFyZERpYWxvZy5qc1wiXG5pbXBvcnQgeyBzaG93UHJvZ3Jlc3NEaWFsb2cgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2d1aS9kaWFsb2dzL1Byb2dyZXNzRGlhbG9nXCJcbmltcG9ydCB7IEludmFsaWREYXRhRXJyb3IsIExpbWl0UmVhY2hlZEVycm9yIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9hcGkvY29tbW9uL2Vycm9yL1Jlc3RFcnJvclwiXG5pbXBvcnQgeyBhc3NlcnRNYWluT3JOb2RlIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9hcGkvY29tbW9uL0VudlwiXG5pbXBvcnQgeyBJY29ucyB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZ3VpL2Jhc2UvaWNvbnMvSWNvbnNcIlxuaW1wb3J0IHsgQnV0dG9uU2l6ZSB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZ3VpL2Jhc2UvQnV0dG9uU2l6ZS5qc1wiXG5pbXBvcnQgeyBVcGdyYWRlUmVxdWlyZWRFcnJvciB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vYXBpL21haW4vVXBncmFkZVJlcXVpcmVkRXJyb3IuanNcIlxuaW1wb3J0IHsgc2hvd1BsYW5VcGdyYWRlUmVxdWlyZWREaWFsb2cgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL21pc2MvU3Vic2NyaXB0aW9uRGlhbG9ncy5qc1wiXG5pbXBvcnQgeyBMb2dpbkJ1dHRvbiB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZ3VpL2Jhc2UvYnV0dG9ucy9Mb2dpbkJ1dHRvbi5qc1wiXG5cbmFzc2VydE1haW5Pck5vZGUoKVxuXG4vKipcbiAqIFBhcnQgb2YgdGhlIGN1c3RvbSBkb21haW4gd2l6YXJkIHdoZXJlIHVzZXIgY2FuIGFkZCBtYWlsIGFkZHJlc3NlcyBmb3IgdGhlIG5ldyBkb21haW4uXG4gKi9cbmV4cG9ydCBjbGFzcyBBZGRFbWFpbEFkZHJlc3Nlc1BhZ2UgaW1wbGVtZW50cyBDb21wb25lbnQ8QWRkRW1haWxBZGRyZXNzZXNQYWdlQXR0cnM+IHtcblx0b25jcmVhdGUoeyBhdHRycyB9OiBWbm9kZURPTTxBZGRFbWFpbEFkZHJlc3Nlc1BhZ2VBdHRycz4pIHtcblx0XHRhdHRycy5kYXRhLmVkaXRBbGlhc0Zvcm1BdHRycy5tb2RlbC5pbml0KClcblx0fVxuXG5cdG9ucmVtb3ZlKHsgYXR0cnMgfTogVm5vZGU8QWRkRW1haWxBZGRyZXNzZXNQYWdlQXR0cnM+KSB7XG5cdFx0Ly8gTWFpbEFkZHJlc3NUYWJsZU1vZGVsLmRpc3Bvc2UgaXMgaGFuZGxlZCBieSB0aGUgQWRkRG9tYWluV2l6YXJkIGNsb3NlIGFjdGlvbiBpbiBvcmRlciB0byBhbGxvdyBnb2luZyBiYWNrIGFuZCBmb3J0aCBuYXZpZ2F0aW9uIHdpdGhpbiB0aGUgd2l6YXJkIGRpYWxvZy5cblx0fVxuXG5cdHZpZXcodm5vZGU6IFZub2RlPEFkZEVtYWlsQWRkcmVzc2VzUGFnZUF0dHJzPik6IENoaWxkcmVuIHtcblx0XHRjb25zdCBhID0gdm5vZGUuYXR0cnNcblx0XHRjb25zdCBhbGlhc2VzVGFibGVBdHRyczogVGFibGVBdHRycyA9IHtcblx0XHRcdGNvbHVtbldpZHRoczogW0NvbHVtbldpZHRoLkxhcmdlc3RdLFxuXHRcdFx0c2hvd0FjdGlvbkJ1dHRvbkNvbHVtbjogdHJ1ZSxcblx0XHRcdGFkZEJ1dHRvbkF0dHJzOiBudWxsLFxuXHRcdFx0bGluZXM6IGdldEFsaWFzTGluZUF0dHJzKGEuZGF0YS5lZGl0QWxpYXNGb3JtQXR0cnMpLm1hcCgocm93KSA9PiB7XG5cdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0YWN0aW9uQnV0dG9uQXR0cnM6IHJvdy5hY3Rpb25CdXR0b25BdHRycyA/PyBudWxsLFxuXHRcdFx0XHRcdGNlbGxzOiByb3cuY2VsbHMsXG5cdFx0XHRcdH1cblx0XHRcdH0pLFxuXHRcdH1cblx0XHRsZXQgZG9tYWluSW5mbyA9IHsgZG9tYWluOiBhLmRhdGEuZG9tYWluKCksIGlzUGFpZDogZmFsc2UgfVxuXHRcdGNvbnN0IG1haWxGb3JtQXR0cnM6IFNlbGVjdE1haWxBZGRyZXNzRm9ybUF0dHJzID0ge1xuXHRcdFx0c2VsZWN0ZWREb21haW46IGRvbWFpbkluZm8sXG5cdFx0XHQvLyBpdCBpcyBhIGN1c3RvbSBkb21haW4gc28gaXQncyBub3QgYSBzcGVjaWFsIG9uZVxuXHRcdFx0YXZhaWxhYmxlRG9tYWluczogW2RvbWFpbkluZm9dLFxuXHRcdFx0b25WYWxpZGF0aW9uUmVzdWx0OiAoZW1haWwsIHZhbGlkYXRpb25SZXN1bHQpID0+IHtcblx0XHRcdFx0aWYgKHZhbGlkYXRpb25SZXN1bHQuaXNWYWxpZCkge1xuXHRcdFx0XHRcdGEubWFpbEFkZHJlc3MgPSBlbWFpbFxuXHRcdFx0XHRcdGEuZXJyb3JNZXNzYWdlSWQgPSBudWxsXG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0YS5lcnJvck1lc3NhZ2VJZCA9IHZhbGlkYXRpb25SZXN1bHQuZXJyb3JJZFxuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdFx0b25Eb21haW5DaGFuZ2VkOiAoZG9tYWluKSA9PiAoZG9tYWluSW5mbyA9IGRvbWFpbiksXG5cdFx0XHRvbkJ1c3lTdGF0ZUNoYW5nZWQ6IChpc0J1c3kpID0+IChhLmlzTWFpbFZlcmlmaWNhdGlvbkJ1c3kgPSBpc0J1c3kpLFxuXHRcdFx0aW5qZWN0aW9uc1JpZ2h0QnV0dG9uQXR0cnM6IHtcblx0XHRcdFx0dGl0bGU6IFwiYWRkRW1haWxBbGlhc19sYWJlbFwiLFxuXHRcdFx0XHRpY29uOiBJY29ucy5BZGQsXG5cdFx0XHRcdHNpemU6IEJ1dHRvblNpemUuQ29tcGFjdCxcblx0XHRcdFx0Y2xpY2s6ICgpID0+XG5cdFx0XHRcdFx0dm5vZGUuYXR0cnMuYWRkQWxpYXNGcm9tSW5wdXQoKS50aGVuKCgpID0+IHtcblx0XHRcdFx0XHRcdG0ucmVkcmF3KClcblx0XHRcdFx0XHR9KSxcblx0XHRcdH0sXG5cdFx0fVxuXHRcdHJldHVybiBtKFwiXCIsIFtcblx0XHRcdG0oXCJoNC5tdC1sLnRleHQtY2VudGVyXCIsIGxhbmcuZ2V0KFwiYWRkQ3VzdG9tRG9tYWluQWRkcmVzc2VzX3RpdGxlXCIpKSxcblx0XHRcdG0oXCIubXQubWJcIiwgbGFuZy5nZXQoXCJhZGRDdXN0b21Eb21haW5BZGRBZHJlc3Nlc19tc2dcIikpLFxuXHRcdFx0bShTZWxlY3RNYWlsQWRkcmVzc0Zvcm0sIG1haWxGb3JtQXR0cnMpLFxuXHRcdFx0bG9jYXRvci5sb2dpbnMuZ2V0VXNlckNvbnRyb2xsZXIoKS51c2VyR3JvdXBJbmZvLm1haWxBZGRyZXNzQWxpYXNlcy5sZW5ndGggPyBtKFRhYmxlLCBhbGlhc2VzVGFibGVBdHRycykgOiBudWxsLFxuXHRcdFx0bShcblx0XHRcdFx0XCIuZmxleC1jZW50ZXIuZnVsbC13aWR0aC5wdC1sLm1iLWxcIixcblx0XHRcdFx0bShMb2dpbkJ1dHRvbiwge1xuXHRcdFx0XHRcdGxhYmVsOiBcIm5leHRfYWN0aW9uXCIsXG5cdFx0XHRcdFx0Y2xhc3M6IFwic21hbGwtbG9naW4tYnV0dG9uXCIsXG5cdFx0XHRcdFx0b25jbGljazogKCkgPT4gZW1pdFdpemFyZEV2ZW50KCh2bm9kZSBhcyBWbm9kZURPTTxBZGRFbWFpbEFkZHJlc3Nlc1BhZ2VBdHRycz4pLmRvbSBhcyBIVE1MRWxlbWVudCwgV2l6YXJkRXZlbnRUeXBlLlNIT1dfTkVYVF9QQUdFKSxcblx0XHRcdFx0fSksXG5cdFx0XHQpLFxuXHRcdF0pXG5cdH1cbn1cblxuZXhwb3J0IGNsYXNzIEFkZEVtYWlsQWRkcmVzc2VzUGFnZUF0dHJzIGltcGxlbWVudHMgV2l6YXJkUGFnZUF0dHJzPEFkZERvbWFpbkRhdGE+IHtcblx0ZGF0YTogQWRkRG9tYWluRGF0YVxuXHRtYWlsQWRkcmVzczogc3RyaW5nXG5cdGVycm9yTWVzc2FnZUlkOiBUcmFuc2xhdGlvbktleSB8IG51bGxcblx0aXNNYWlsVmVyaWZpY2F0aW9uQnVzeTogYm9vbGVhblxuXG5cdGNvbnN0cnVjdG9yKGRvbWFpbkRhdGE6IEFkZERvbWFpbkRhdGEpIHtcblx0XHR0aGlzLmRhdGEgPSBkb21haW5EYXRhXG5cdFx0dGhpcy5tYWlsQWRkcmVzcyA9IFwiXCJcblx0XHR0aGlzLmVycm9yTWVzc2FnZUlkID0gXCJtYWlsQWRkcmVzc05ldXRyYWxfbXNnXCIgLy8gd2UgbmVlZCB0byBzZXQgdGhpcyBtZXNzYWdlIGlkIHRvIHByZXZlbnQgdGhhdCBhbiBlbXB0eSBpbnB1dCBpcyBpbml0aWFsbHkgcmVnYXJkZWQgYXMgdmFsaWRcblx0XHR0aGlzLmlzTWFpbFZlcmlmaWNhdGlvbkJ1c3kgPSBmYWxzZVxuXHR9XG5cblx0aGVhZGVyVGl0bGUoKTogVHJhbnNsYXRpb25LZXkge1xuXHRcdHJldHVybiBcImRvbWFpblNldHVwX3RpdGxlXCJcblx0fVxuXG5cdG5leHRBY3Rpb24oc2hvd0Vycm9yRGlhbG9nOiBib29sZWFuKTogUHJvbWlzZTxib29sZWFuPiB7XG5cdFx0aWYgKHRoaXMuaXNNYWlsVmVyaWZpY2F0aW9uQnVzeSkgcmV0dXJuIFByb21pc2UucmVzb2x2ZShmYWxzZSlcblxuXHRcdC8vV2UgdHJ5IHRvIGFkZCBhbiBhbGlhcyBmcm9tIHRoZSBpbnB1dCBmaWVsZCwgaWYgaXQgaXMgbm90IGVtcHR5IGFuZCBlcnJvciBkaWFsb2dzIGFyZSBhbGxvd2VkXG5cdFx0aWYgKHNob3dFcnJvckRpYWxvZyAmJiB0aGlzLmVycm9yTWVzc2FnZUlkKSB7XG5cdFx0XHQvL1dlIGFscmVhZHkgc2hvd2VkIG9uZSBlcnJvciBkaWFsb2cgaWYgZmFpbGluZyB0byBhZGQgYW4gYWxpYXMgZnJvbSB0aGUgaW5wdXQgZmllbGQuXG5cdFx0XHQvL1RoZSB1c2VyIGhhcyB0byBjbGVhbiB0aGUgaW5wdXQgZmllbGQgdXAgYmVmb3JlIHByb2NlZWRpbmcgdG8gdGhlIG5leHQgcGFnZSAoZXZlbiBpZiB0aGVyZSBpcyBhbHJlYWR5IGFuIGFsaWFzKVxuXHRcdFx0Ly9XZSBhcmUgZG9uZSBpZiB3ZSBzdWNjZWVkZWQgdG8gYWRkIHRoZSBhbGlhc1xuXHRcdFx0cmV0dXJuIHRoaXMuYWRkQWxpYXNGcm9tSW5wdXQoKVxuXHRcdH1cblxuXHRcdC8vT3RoZXJ3aXNlIHdlIGNoZWNrIHRoYXQgdGhlcmUgaXMgZWl0aGVyIGFuIGFsaWFzIG9yIGEgdXNlciAob3IgYW4gYWxpYXMgZm9yIHNvbWUgb3RoZXIgdXNlcikgZGVmaW5lZCBmb3IgdGhlIGN1c3RvbSBkb21haW4gcmVnYXJkbGVzcyBvZiBhY3RpdmF0aW9uIHN0YXR1c1xuXHRcdGNvbnN0IGNoZWNrTWFpbEFkZHJlc3NlcyA9IFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKCkgPT4ge1xuXHRcdFx0Y29uc3QgaGFzQWxpYXNlcyA9IGxvY2F0b3IubG9naW5zXG5cdFx0XHRcdC5nZXRVc2VyQ29udHJvbGxlcigpXG5cdFx0XHRcdC51c2VyR3JvdXBJbmZvLm1haWxBZGRyZXNzQWxpYXNlcy5zb21lKChhbGlhcykgPT4gYWxpYXMubWFpbEFkZHJlc3MuZW5kc1dpdGgoYEAke3RoaXMuZGF0YS5kb21haW4oKX1gKSlcblxuXHRcdFx0aWYgKGhhc0FsaWFzZXMpIHtcblx0XHRcdFx0cmV0dXJuIHRydWVcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHJldHVybiBsb2NhdG9yLmVudGl0eUNsaWVudFxuXHRcdFx0XHRcdC5sb2FkKEN1c3RvbWVyVHlwZVJlZiwgbmV2ZXJOdWxsKGxvY2F0b3IubG9naW5zLmdldFVzZXJDb250cm9sbGVyKCkudXNlci5jdXN0b21lcikpXG5cdFx0XHRcdFx0LnRoZW4oKGN1c3RvbWVyKSA9PiBsb2NhdG9yLmVudGl0eUNsaWVudC5sb2FkQWxsKEdyb3VwSW5mb1R5cGVSZWYsIGN1c3RvbWVyLnVzZXJHcm91cHMpKVxuXHRcdFx0XHRcdC50aGVuKChhbGxVc2VyR3JvdXBJbmZvcykgPT4ge1xuXHRcdFx0XHRcdFx0cmV0dXJuIGFsbFVzZXJHcm91cEluZm9zLnNvbWUoXG5cdFx0XHRcdFx0XHRcdCh1KSA9PlxuXHRcdFx0XHRcdFx0XHRcdG5ldmVyTnVsbCh1Lm1haWxBZGRyZXNzKS5lbmRzV2l0aChcIkBcIiArIHRoaXMuZGF0YS5kb21haW4oKSkgfHxcblx0XHRcdFx0XHRcdFx0XHR1Lm1haWxBZGRyZXNzQWxpYXNlcy5zb21lKChhKSA9PiBuZXZlck51bGwoYS5tYWlsQWRkcmVzcykuZW5kc1dpdGgoXCJAXCIgKyB0aGlzLmRhdGEuZG9tYWluKCkpKSxcblx0XHRcdFx0XHRcdClcblx0XHRcdFx0XHR9KVxuXHRcdFx0fVxuXHRcdH0pXG5cdFx0cmV0dXJuIHNob3dQcm9ncmVzc0RpYWxvZyhcInBsZWFzZVdhaXRfbXNnXCIsIGNoZWNrTWFpbEFkZHJlc3NlcykudGhlbigobmV4dEFsbG93ZWQpID0+IHtcblx0XHRcdGlmIChzaG93RXJyb3JEaWFsb2cgJiYgIW5leHRBbGxvd2VkKSBEaWFsb2cubWVzc2FnZShcImVuZm9yY2VBbGlhc1NldHVwX21zZ1wiKVxuXHRcdFx0cmV0dXJuIG5leHRBbGxvd2VkXG5cdFx0fSlcblx0fVxuXG5cdGlzU2tpcEF2YWlsYWJsZSgpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gdHJ1ZVxuXHR9XG5cblx0aXNFbmFibGVkKCk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiB0cnVlXG5cdH1cblxuXHQvKipcblx0ICogVHJ5IHRvIGFkZCBhbiBhbGlhcyBmcm9tIGlucHV0IGZpZWxkIGFuZCByZXR1cm4gdHJ1ZSBpZiBpdCBzdWNjZWVkZWRcblx0ICovXG5cdGFzeW5jIGFkZEFsaWFzRnJvbUlucHV0KCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuXHRcdGNvbnN0IGVycm9yID0gdGhpcy5lcnJvck1lc3NhZ2VJZFxuXG5cdFx0aWYgKGVycm9yKSB7XG5cdFx0XHRhd2FpdCBEaWFsb2cubWVzc2FnZShlcnJvcilcblx0XHRcdHJldHVybiBmYWxzZVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRjb25zdCBtYWlsQWRkcmVzc1RhYmxlTW9kZWwgPSB0aGlzLmRhdGEuZWRpdEFsaWFzRm9ybUF0dHJzLm1vZGVsXG5cdFx0XHR0cnkge1xuXHRcdFx0XHRhd2FpdCBzaG93UHJvZ3Jlc3NEaWFsb2coXG5cdFx0XHRcdFx0XCJwbGVhc2VXYWl0X21zZ1wiLFxuXHRcdFx0XHRcdC8vIFVzaW5nIGRlZmF1bHQgc2VuZGVyIG5hbWUgZm9yIG5vd1xuXHRcdFx0XHRcdG1haWxBZGRyZXNzVGFibGVNb2RlbC5hZGRBbGlhcyh0aGlzLm1haWxBZGRyZXNzLCBtYWlsQWRkcmVzc1RhYmxlTW9kZWwuZGVmYXVsdFNlbmRlck5hbWUoKSksXG5cdFx0XHRcdClcblx0XHRcdFx0cmV0dXJuIHRydWVcblx0XHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdFx0aWYgKGUgaW5zdGFuY2VvZiBJbnZhbGlkRGF0YUVycm9yKSB7XG5cdFx0XHRcdFx0YXdhaXQgRGlhbG9nLm1lc3NhZ2UoXCJtYWlsQWRkcmVzc05BX21zZ1wiKVxuXHRcdFx0XHR9IGVsc2UgaWYgKGUgaW5zdGFuY2VvZiBMaW1pdFJlYWNoZWRFcnJvcikge1xuXHRcdFx0XHRcdC8vIGlnbm9yZVxuXHRcdFx0XHR9IGVsc2UgaWYgKGUgaW5zdGFuY2VvZiBVcGdyYWRlUmVxdWlyZWRFcnJvcikge1xuXHRcdFx0XHRcdGF3YWl0IHNob3dQbGFuVXBncmFkZVJlcXVpcmVkRGlhbG9nKGUucGxhbnMsIGUubWVzc2FnZSlcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHR0aHJvdyBlXG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIGZhbHNlXG5cdFx0XHR9XG5cdFx0fVxuXHR9XG59XG4iLCJpbXBvcnQgeyBhc3NlcnRFbnVtVmFsdWUsIEN1c3RvbURvbWFpblR5cGUsIEN1c3RvbURvbWFpblR5cGVDb3VudCwgQ3VzdG9tRG9tYWluVmFsaWRhdGlvblJlc3VsdCB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vYXBpL2NvbW1vbi9UdXRhbm90YUNvbnN0YW50c1wiXG5pbXBvcnQgbSwgeyBDaGlsZHJlbiwgVm5vZGUsIFZub2RlRE9NIH0gZnJvbSBcIm1pdGhyaWxcIlxuaW1wb3J0IHR5cGUgeyBBZGREb21haW5EYXRhIH0gZnJvbSBcIi4vQWRkRG9tYWluV2l6YXJkXCJcbmltcG9ydCB7IHNob3dQcm9ncmVzc0RpYWxvZyB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZ3VpL2RpYWxvZ3MvUHJvZ3Jlc3NEaWFsb2dcIlxuaW1wb3J0IHsgbGFuZywgVHJhbnNsYXRpb25LZXkgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL21pc2MvTGFuZ3VhZ2VWaWV3TW9kZWxcIlxuaW1wb3J0IHsgRGlhbG9nIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9ndWkvYmFzZS9EaWFsb2dcIlxuaW1wb3J0IHR5cGUgeyBXaXphcmRQYWdlQXR0cnMsIFdpemFyZFBhZ2VOIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9ndWkvYmFzZS9XaXphcmREaWFsb2cuanNcIlxuaW1wb3J0IHsgZW1pdFdpemFyZEV2ZW50LCBXaXphcmRFdmVudFR5cGUgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2d1aS9iYXNlL1dpemFyZERpYWxvZy5qc1wiXG5pbXBvcnQgeyBQcmVjb25kaXRpb25GYWlsZWRFcnJvciB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vYXBpL2NvbW1vbi9lcnJvci9SZXN0RXJyb3IuanNcIlxuaW1wb3J0IHsgc2hvd1BsYW5VcGdyYWRlUmVxdWlyZWREaWFsb2cgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL21pc2MvU3Vic2NyaXB0aW9uRGlhbG9ncy5qc1wiXG5pbXBvcnQgeyBkb3duY2FzdCwgaXNFbXB0eSwgb2ZDbGFzcyB9IGZyb20gXCJAdHV0YW8vdHV0YW5vdGEtdXRpbHNcIlxuaW1wb3J0IHsgbG9jYXRvciB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vYXBpL21haW4vQ29tbW9uTG9jYXRvclwiXG5pbXBvcnQgeyBhc3NlcnRNYWluT3JOb2RlIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9hcGkvY29tbW9uL0VudlwiXG5pbXBvcnQgeyBjcmVhdGVEbnNSZWNvcmRUYWJsZSB9IGZyb20gXCIuL0Ruc1JlY29yZFRhYmxlLmpzXCJcbmltcG9ydCB7IGdldEF2YWlsYWJsZU1hdGNoaW5nUGxhbnMgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL3N1YnNjcmlwdGlvbi9TdWJzY3JpcHRpb25VdGlscy5qc1wiXG5pbXBvcnQgeyBnZXRDdXN0b21NYWlsRG9tYWlucyB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vYXBpL2NvbW1vbi91dGlscy9DdXN0b21lclV0aWxzLmpzXCJcbmltcG9ydCB7IExvZ2luQnV0dG9uIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9ndWkvYmFzZS9idXR0b25zL0xvZ2luQnV0dG9uLmpzXCJcblxuYXNzZXJ0TWFpbk9yTm9kZSgpXG5cbmV4cG9ydCBlbnVtIEN1c3RvbURvbWFpbkZhaWx1cmVSZWFzb25zIHtcblx0TElNSVRfUkVBQ0hFRCA9IFwiY3VzdG9tZG9tYWluc2VydmljZS5saW1pdF9yZWFjaGVkXCIsXG5cdERPTUFJTl9JTl9VU0UgPSBcImN1c3RvbWRvbWFpbnNlcnZpY2UuZG9tYWluX2luX3VzZVwiLFxufVxuXG5leHBvcnQgY2xhc3MgVmVyaWZ5T3duZXJzaGlwUGFnZSBpbXBsZW1lbnRzIFdpemFyZFBhZ2VOPEFkZERvbWFpbkRhdGE+IHtcblx0cHJpdmF0ZSBkb20hOiBIVE1MRWxlbWVudFxuXG5cdG9uY3JlYXRlKHZub2RlOiBWbm9kZURPTTxXaXphcmRQYWdlQXR0cnM8QWRkRG9tYWluRGF0YT4+KSB7XG5cdFx0dGhpcy5kb20gPSB2bm9kZS5kb20gYXMgSFRNTEVsZW1lbnRcblx0XHQvLyBXZSBleHBlY3QgdGhhdCB0aGUgcGFnZSBpcyBjcmVhdGVkIGFnYWluIGVhY2ggdGltZSB3aGVuIGRvbWFpbiBpcyBjaGFuZ2VkIHNvIHdlIG9ubHkgbmVlZCB0byBsb2FkIGl0IGluIG9uY3JlYXRlLlxuXHRcdGNvbnN0IHsgZGF0YSB9ID0gdm5vZGUuYXR0cnNcblx0XHRsb2NhdG9yLmN1c3RvbWVyRmFjYWRlLmdldERvbWFpblZhbGlkYXRpb25SZWNvcmQoZGF0YS5kb21haW4oKSkudGhlbigocmVjb3JkVmFsdWUpID0+IHtcblx0XHRcdGRhdGEuZXhwZWN0ZWRWZXJpZmljYXRpb25SZWNvcmQudmFsdWUgPSByZWNvcmRWYWx1ZVxuXHRcdFx0bS5yZWRyYXcoKVxuXHRcdH0pXG5cdH1cblxuXHR2aWV3KHZub2RlOiBWbm9kZTxXaXphcmRQYWdlQXR0cnM8QWRkRG9tYWluRGF0YT4+KTogQ2hpbGRyZW4ge1xuXHRcdGNvbnN0IGEgPSB2bm9kZS5hdHRyc1xuXHRcdHJldHVybiBbXG5cdFx0XHRtKFwiaDQubXQtbC50ZXh0LWNlbnRlclwiLCBsYW5nLmdldChcInZlcmlmeURvbWFpbk93bmVyc2hpcF90aXRsZVwiKSksXG5cdFx0XHRtKFxuXHRcdFx0XHRcInBcIixcblx0XHRcdFx0bGFuZy5nZXQoXCJ2ZXJpZnlEb21haW5Pd25lcnNoaXBFeHBsYW5hdGlvbl9tc2dcIiwge1xuXHRcdFx0XHRcdFwie2RvbWFpbn1cIjogYS5kYXRhLmRvbWFpbigpLFxuXHRcdFx0XHR9KSxcblx0XHRcdCksXG5cdFx0XHRtKFwicFwiLCBsYW5nLmdldChcInZlcmlmeU93bmVyc2hpcFRYVHJlY29yZF9tc2dcIikpLFxuXHRcdFx0Y3JlYXRlRG5zUmVjb3JkVGFibGUoW3Zub2RlLmF0dHJzLmRhdGEuZXhwZWN0ZWRWZXJpZmljYXRpb25SZWNvcmRdKSxcblx0XHRcdG0oXG5cdFx0XHRcdFwiLmZsZXgtY2VudGVyLmZ1bGwtd2lkdGgucHQtbC5tYi1sXCIsXG5cdFx0XHRcdG0oTG9naW5CdXR0b24sIHtcblx0XHRcdFx0XHRsYWJlbDogXCJuZXh0X2FjdGlvblwiLFxuXHRcdFx0XHRcdGNsYXNzOiBcInNtYWxsLWxvZ2luLWJ1dHRvblwiLFxuXHRcdFx0XHRcdG9uY2xpY2s6ICgpID0+IGVtaXRXaXphcmRFdmVudCh0aGlzLmRvbSwgV2l6YXJkRXZlbnRUeXBlLlNIT1dfTkVYVF9QQUdFKSxcblx0XHRcdFx0fSksXG5cdFx0XHQpLFxuXHRcdF1cblx0fVxufVxuXG5leHBvcnQgY2xhc3MgVmVyaWZ5T3duZXJzaGlwUGFnZUF0dHJzIGltcGxlbWVudHMgV2l6YXJkUGFnZUF0dHJzPEFkZERvbWFpbkRhdGE+IHtcblx0ZGF0YTogQWRkRG9tYWluRGF0YVxuXG5cdGNvbnN0cnVjdG9yKGRvbWFpbkRhdGE6IEFkZERvbWFpbkRhdGEpIHtcblx0XHR0aGlzLmRhdGEgPSBkb21haW5EYXRhXG5cdH1cblxuXHRoZWFkZXJUaXRsZSgpOiBUcmFuc2xhdGlvbktleSB7XG5cdFx0cmV0dXJuIFwiZG9tYWluU2V0dXBfdGl0bGVcIlxuXHR9XG5cblx0bmV4dEFjdGlvbihzaG93RXJyb3JEaWFsb2c6IGJvb2xlYW4gPSB0cnVlKTogUHJvbWlzZTxib29sZWFuPiB7XG5cdFx0cmV0dXJuIHNob3dQcm9ncmVzc0RpYWxvZyhcblx0XHRcdFwicGxlYXNlV2FpdF9tc2dcIixcblx0XHRcdGxvY2F0b3IuY3VzdG9tZXJGYWNhZGUuYWRkRG9tYWluKHRoaXMuZGF0YS5kb21haW4oKSkudGhlbigocmVzdWx0KSA9PiB7XG5cdFx0XHRcdGNvbnN0IHZhbGlkYXRpb25SZXN1bHQgPSBhc3NlcnRFbnVtVmFsdWUoQ3VzdG9tRG9tYWluVmFsaWRhdGlvblJlc3VsdCwgcmVzdWx0LnZhbGlkYXRpb25SZXN1bHQpXG5cdFx0XHRcdGlmICh2YWxpZGF0aW9uUmVzdWx0ID09PSBDdXN0b21Eb21haW5WYWxpZGF0aW9uUmVzdWx0LkNVU1RPTV9ET01BSU5fVkFMSURBVElPTl9SRVNVTFRfT0spIHtcblx0XHRcdFx0XHRyZXR1cm4gbnVsbFxuXHRcdFx0XHR9IGVsc2UgaWYgKHZhbGlkYXRpb25SZXN1bHQgPT09IEN1c3RvbURvbWFpblZhbGlkYXRpb25SZXN1bHQuQ1VTVE9NX0RPTUFJTl9WQUxJREFUSU9OX1JFU1VMVF9ET01BSU5fTk9UX0FWQUlMQUJMRSkge1xuXHRcdFx0XHRcdGxldCBjdXN0b21Eb21haW5JbmZvcyA9IGdldEN1c3RvbU1haWxEb21haW5zKHRoaXMuZGF0YS5jdXN0b21lckluZm8pXG5cblx0XHRcdFx0XHQvL2RvbWFpbiBpcyBhbHJlYWR5IGFzc2lnbmVkIHRvIHRoaXMgYWNjb3VudFxuXHRcdFx0XHRcdGlmIChjdXN0b21Eb21haW5JbmZvcy5zb21lKChkb21haW5JbmZvKSA9PiBkb21haW5JbmZvLmRvbWFpbiA9PT0gdGhpcy5kYXRhLmRvbWFpbigpKSkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIG51bGxcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRyZXR1cm4gKCkgPT4gbGFuZy5nZXQoXCJjdXN0b21Eb21haW5FcnJvckRvbWFpbk5vdEF2YWlsYWJsZV9tc2dcIilcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRjb25zdCBlcnJvck1lc3NhZ2VNYXA6IFJlY29yZDxDdXN0b21Eb21haW5WYWxpZGF0aW9uUmVzdWx0LCBUcmFuc2xhdGlvbktleT4gPSB7XG5cdFx0XHRcdFx0XHRbQ3VzdG9tRG9tYWluVmFsaWRhdGlvblJlc3VsdC5DVVNUT01fRE9NQUlOX1ZBTElEQVRJT05fUkVTVUxUX09LXTogXCJlbXB0eVN0cmluZ19tc2dcIixcblx0XHRcdFx0XHRcdFtDdXN0b21Eb21haW5WYWxpZGF0aW9uUmVzdWx0LkNVU1RPTV9ET01BSU5fVkFMSURBVElPTl9SRVNVTFRfRE5TX0xPT0tVUF9GQUlMRURdOiBcImN1c3RvbURvbWFpbkVycm9yRG5zTG9va3VwRmFpbHVyZV9tc2dcIixcblx0XHRcdFx0XHRcdFtDdXN0b21Eb21haW5WYWxpZGF0aW9uUmVzdWx0LkNVU1RPTV9ET01BSU5fVkFMSURBVElPTl9SRVNVTFRfRE9NQUlOX05PVF9GT1VORF06IFwiY3VzdG9tRG9tYWluRXJyb3JEb21haW5Ob3RGb3VuZF9tc2dcIixcblx0XHRcdFx0XHRcdFtDdXN0b21Eb21haW5WYWxpZGF0aW9uUmVzdWx0LkNVU1RPTV9ET01BSU5fVkFMSURBVElPTl9SRVNVTFRfTkFNRVNFUlZFUl9OT1RfRk9VTkRdOiBcImN1c3RvbURvbWFpbkVycm9yTmFtZXNlcnZlck5vdEZvdW5kX21zZ1wiLFxuXHRcdFx0XHRcdFx0W0N1c3RvbURvbWFpblZhbGlkYXRpb25SZXN1bHQuQ1VTVE9NX0RPTUFJTl9WQUxJREFUSU9OX1JFU1VMVF9ET01BSU5fTk9UX0FWQUlMQUJMRV06IFwiY3VzdG9tRG9tYWluRXJyb3JEb21haW5Ob3RBdmFpbGFibGVfbXNnXCIsXG5cdFx0XHRcdFx0XHRbQ3VzdG9tRG9tYWluVmFsaWRhdGlvblJlc3VsdC5DVVNUT01fRE9NQUlOX1ZBTElEQVRJT05fUkVTVUxUX1ZBTElEQVRJT05fRkFJTEVEXTogXCJjdXN0b21Eb21haW5FcnJvclZhbGlkYXRpb25GYWlsZWRfbXNnXCIsXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiBsYW5nLm1ha2VUcmFuc2xhdGlvbihcblx0XHRcdFx0XHRcdFwiZXJyb3JfbXNnXCIsXG5cdFx0XHRcdFx0XHRsYW5nLmdldChlcnJvck1lc3NhZ2VNYXBbdmFsaWRhdGlvblJlc3VsdF0pICsgLy9UT0RPIGNvcnJlY3QgdG8gdXNlPyBjdXN0b21Eb21haW5FcnJvck90aGVyVHh0UmVjb3Jkc19tc2dcblx0XHRcdFx0XHRcdFx0KHJlc3VsdC5pbnZhbGlkRG5zUmVjb3Jkcy5sZW5ndGggPiAwXG5cdFx0XHRcdFx0XHRcdFx0PyBcIiBcIiArIGxhbmcuZ2V0KFwiY3VzdG9tRG9tYWluRXJyb3JPdGhlclR4dFJlY29yZHNfbXNnXCIpICsgXCJcXG5cIiArIHJlc3VsdC5pbnZhbGlkRG5zUmVjb3Jkcy5tYXAoKHIpID0+IHIudmFsdWUpLmpvaW4oXCJcXG5cIilcblx0XHRcdFx0XHRcdFx0XHQ6IFwiXCIpLFxuXHRcdFx0XHRcdClcblx0XHRcdFx0fVxuXHRcdFx0fSksXG5cdFx0KVxuXHRcdFx0LnRoZW4oKG1lc3NhZ2UpID0+IHtcblx0XHRcdFx0aWYgKG1lc3NhZ2UpIHtcblx0XHRcdFx0XHRyZXR1cm4gc2hvd0Vycm9yRGlhbG9nID8gRGlhbG9nLm1lc3NhZ2UoZG93bmNhc3QobWVzc2FnZSkpLnRoZW4oKCkgPT4gZmFsc2UpIDogZmFsc2Vcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiB0cnVlXG5cdFx0XHR9KVxuXHRcdFx0LmNhdGNoKFxuXHRcdFx0XHRvZkNsYXNzKFByZWNvbmRpdGlvbkZhaWxlZEVycm9yLCBhc3luYyAoZSkgPT4ge1xuXHRcdFx0XHRcdGlmIChlLmRhdGEgPT09IEN1c3RvbURvbWFpbkZhaWx1cmVSZWFzb25zLkxJTUlUX1JFQUNIRUQpIHtcblx0XHRcdFx0XHRcdGNvbnN0IG5ick9mQ3VzdG9tRG9tYWlucyA9IHRoaXMuZGF0YS5jdXN0b21lckluZm8uZG9tYWluSW5mb3MuZmlsdGVyKChkb21haW5JbmZvKSA9PiBkb21haW5JbmZvLndoaXRlbGFiZWxDb25maWcgPT0gbnVsbCkubGVuZ3RoXG5cdFx0XHRcdFx0XHRjb25zdCBwbGFucyA9IGF3YWl0IGdldEF2YWlsYWJsZU1hdGNoaW5nUGxhbnMobG9jYXRvci5zZXJ2aWNlRXhlY3V0b3IsIChjb25maWcpID0+IHtcblx0XHRcdFx0XHRcdFx0aWYgKGNvbmZpZy5jdXN0b21Eb21haW5UeXBlIGluIEN1c3RvbURvbWFpblR5cGVDb3VudCkge1xuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IHBsYW5Eb21haW5zID0gQ3VzdG9tRG9tYWluVHlwZUNvdW50W2NvbmZpZy5jdXN0b21Eb21haW5UeXBlIGFzIEN1c3RvbURvbWFpblR5cGVdXG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuIHBsYW5Eb21haW5zID09PSAtMSB8fCBwbGFuRG9tYWlucyA+IG5ick9mQ3VzdG9tRG9tYWluc1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdHJldHVybiBmYWxzZVxuXHRcdFx0XHRcdFx0fSlcblxuXHRcdFx0XHRcdFx0aWYgKGlzRW1wdHkocGxhbnMpKSB7XG5cdFx0XHRcdFx0XHRcdC8vIHNob3VsZG4ndCBoYXBwZW4gd2hpbGUgd2UgaGF2ZSB0aGUgVW5saW1pdGVkIHBsYW4uLi5cblx0XHRcdFx0XHRcdFx0RGlhbG9nLm1lc3NhZ2UoXCJ0b29NYW55Q3VzdG9tRG9tYWluc19tc2dcIilcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdC8vIGlnbm9yZSBwcm9taXNlLiBhbHdheXMgcmV0dXJuIGZhbHNlIHRvIG5vdCBzd2l0Y2ggdG8gbmV4dCBwYWdlLlxuXHRcdFx0XHRcdFx0XHRzaG93UGxhblVwZ3JhZGVSZXF1aXJlZERpYWxvZyhwbGFucywgXCJtb3JlQ3VzdG9tRG9tYWluc1JlcXVpcmVkX21zZ1wiKVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHREaWFsb2cubWVzc2FnZShsYW5nLm1ha2VUcmFuc2xhdGlvbihcImVycm9yX21zZ1wiLCBlLnRvU3RyaW5nKCkpKVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZXR1cm4gZmFsc2Vcblx0XHRcdFx0fSksXG5cdFx0XHQpXG5cdH1cblxuXHRpc1NraXBBdmFpbGFibGUoKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIGZhbHNlXG5cdH1cblxuXHRpc0VuYWJsZWQoKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIHRydWVcblx0fVxufVxuIiwiaW1wb3J0IG0sIHsgQ2hpbGRyZW4sIFZub2RlLCBWbm9kZURPTSB9IGZyb20gXCJtaXRocmlsXCJcbmltcG9ydCB7IEF1dG9jYXBpdGFsaXplLCBUZXh0RmllbGQgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2d1aS9iYXNlL1RleHRGaWVsZC5qc1wiXG5pbXBvcnQgeyBpc0RvbWFpbk5hbWUgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL21pc2MvRm9ybWF0VmFsaWRhdG9yXCJcbmltcG9ydCB7IERpYWxvZyB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZ3VpL2Jhc2UvRGlhbG9nXCJcbmltcG9ydCB0eXBlIHsgQWRkRG9tYWluRGF0YSB9IGZyb20gXCIuL0FkZERvbWFpbldpemFyZFwiXG5pbXBvcnQgdHlwZSB7IFRyYW5zbGF0aW9uS2V5IH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9taXNjL0xhbmd1YWdlVmlld01vZGVsXCJcbmltcG9ydCB7IGxhbmcgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL21pc2MvTGFuZ3VhZ2VWaWV3TW9kZWxcIlxuaW1wb3J0IHR5cGUgeyBXaXphcmRQYWdlQXR0cnMsIFdpemFyZFBhZ2VOIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9ndWkvYmFzZS9XaXphcmREaWFsb2cuanNcIlxuaW1wb3J0IHsgZW1pdFdpemFyZEV2ZW50LCBXaXphcmRFdmVudFR5cGUgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2d1aS9iYXNlL1dpemFyZERpYWxvZy5qc1wiXG5pbXBvcnQgeyBhc3NlcnRNYWluT3JOb2RlIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9hcGkvY29tbW9uL0VudlwiXG5pbXBvcnQgeyBMb2dpbkJ1dHRvbiB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZ3VpL2Jhc2UvYnV0dG9ucy9Mb2dpbkJ1dHRvbi5qc1wiXG5cbmFzc2VydE1haW5Pck5vZGUoKVxuXG5leHBvcnQgY2xhc3MgRW50ZXJEb21haW5QYWdlIGltcGxlbWVudHMgV2l6YXJkUGFnZU48QWRkRG9tYWluRGF0YT4ge1xuXHRwcml2YXRlIGRvbTogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbFxuXG5cdG9uY3JlYXRlKHZub2RlOiBWbm9kZURPTTxXaXphcmRQYWdlQXR0cnM8QWRkRG9tYWluRGF0YT4+KSB7XG5cdFx0dGhpcy5kb20gPSB2bm9kZS5kb20gYXMgSFRNTEVsZW1lbnRcblx0fVxuXG5cdHZpZXcodm5vZGU6IFZub2RlPFdpemFyZFBhZ2VBdHRyczxBZGREb21haW5EYXRhPj4pOiBDaGlsZHJlbiB7XG5cdFx0cmV0dXJuIG0oXCJcIiwgW1xuXHRcdFx0bShcImg0Lm10LWwudGV4dC1jZW50ZXJcIiwgbGFuZy5nZXQoXCJlbnRlckN1c3RvbURvbWFpbl90aXRsZVwiKSksXG5cdFx0XHRtKFwiLm10XCIsIGxhbmcuZ2V0KFwiZW50ZXJEb21haW5JbnRyb2R1Y3Rpb25fbXNnXCIpKSxcblx0XHRcdG0oXCIubXRcIiwgbGFuZy5nZXQoXCJlbnRlckRvbWFpbkdldFJlYWR5X21zZ1wiKSksXG5cdFx0XHRtKFRleHRGaWVsZCwge1xuXHRcdFx0XHRsYWJlbDogXCJjdXN0b21Eb21haW5fbGFiZWxcIixcblx0XHRcdFx0YXV0b2NhcGl0YWxpemU6IEF1dG9jYXBpdGFsaXplLm5vbmUsXG5cdFx0XHRcdHZhbHVlOiB2bm9kZS5hdHRycy5kYXRhLmRvbWFpbigpLFxuXHRcdFx0XHRvbmlucHV0OiB2bm9kZS5hdHRycy5kYXRhLmRvbWFpbixcblx0XHRcdFx0aGVscExhYmVsOiAoKSA9PiB7XG5cdFx0XHRcdFx0Y29uc3QgZG9tYWluID0gdm5vZGUuYXR0cnMuZGF0YS5kb21haW4oKVxuXHRcdFx0XHRcdGNvbnN0IGVycm9yTXNnID0gdmFsaWRhdGVEb21haW4oZG9tYWluKVxuXG5cdFx0XHRcdFx0aWYgKGVycm9yTXNnKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gbGFuZy5nZXQoZXJyb3JNc2cpXG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHJldHVybiBsYW5nLmdldChcImVudGVyRG9tYWluRmllbGRIZWxwX2xhYmVsXCIsIHtcblx0XHRcdFx0XHRcdFx0XCJ7ZG9tYWlufVwiOiBkb21haW4udG9Mb2NhbGVMb3dlckNhc2UoKS50cmltKCksXG5cdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSxcblx0XHRcdH0pLFxuXHRcdFx0bShcblx0XHRcdFx0XCIuZmxleC1jZW50ZXIuZnVsbC13aWR0aC5wdC1sLm1iLWxcIixcblx0XHRcdFx0bShMb2dpbkJ1dHRvbiwge1xuXHRcdFx0XHRcdGxhYmVsOiBcIm5leHRfYWN0aW9uXCIsXG5cdFx0XHRcdFx0Y2xhc3M6IFwic21hbGwtbG9naW4tYnV0dG9uXCIsXG5cdFx0XHRcdFx0b25jbGljazogKCkgPT4gZW1pdFdpemFyZEV2ZW50KHRoaXMuZG9tIGFzIEhUTUxFbGVtZW50LCBXaXphcmRFdmVudFR5cGUuU0hPV19ORVhUX1BBR0UpLFxuXHRcdFx0XHR9KSxcblx0XHRcdCksXG5cdFx0XSlcblx0fVxufVxuXG5mdW5jdGlvbiB2YWxpZGF0ZURvbWFpbihkb21haW46IHN0cmluZyk6IFRyYW5zbGF0aW9uS2V5IHwgbnVsbCB7XG5cdGxldCBjbGVhbkRvbWFpbk5hbWUgPSBkb21haW4udG9Mb2NhbGVMb3dlckNhc2UoKS50cmltKClcblxuXHRpZiAoIWNsZWFuRG9tYWluTmFtZS5sZW5ndGgpIHtcblx0XHRyZXR1cm4gXCJjdXN0b21Eb21haW5OZXV0cmFsX21zZ1wiXG5cdH1cblxuXHRpZiAoIWlzRG9tYWluTmFtZShjbGVhbkRvbWFpbk5hbWUpKSB7XG5cdFx0cmV0dXJuIFwiY3VzdG9tRG9tYWluSW52YWxpZF9tc2dcIlxuXHR9IGVsc2Uge1xuXHRcdHJldHVybiBudWxsXG5cdH1cbn1cblxuZXhwb3J0IGNsYXNzIEVudGVyRG9tYWluUGFnZUF0dHJzIGltcGxlbWVudHMgV2l6YXJkUGFnZUF0dHJzPEFkZERvbWFpbkRhdGE+IHtcblx0ZGF0YTogQWRkRG9tYWluRGF0YVxuXG5cdGNvbnN0cnVjdG9yKGRvbWFpbkRhdGE6IEFkZERvbWFpbkRhdGEpIHtcblx0XHR0aGlzLmRhdGEgPSBkb21haW5EYXRhXG5cdH1cblxuXHRoZWFkZXJUaXRsZSgpOiBUcmFuc2xhdGlvbktleSB7XG5cdFx0cmV0dXJuIFwiZG9tYWluU2V0dXBfdGl0bGVcIlxuXHR9XG5cblx0bmV4dEFjdGlvbihzaG93RXJyb3JEaWFsb2c6IGJvb2xlYW4gPSB0cnVlKTogUHJvbWlzZTxib29sZWFuPiB7XG5cdFx0Y29uc3QgZXJyb3JNc2cgPSB2YWxpZGF0ZURvbWFpbih0aGlzLmRhdGEuZG9tYWluKCkpXG5cblx0XHRpZiAoZXJyb3JNc2cpIHtcblx0XHRcdHJldHVybiBzaG93RXJyb3JEaWFsb2cgPyBEaWFsb2cubWVzc2FnZShlcnJvck1zZykudGhlbigoKSA9PiBmYWxzZSkgOiBQcm9taXNlLnJlc29sdmUoZmFsc2UpXG5cdFx0fSBlbHNlIHtcblx0XHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUodHJ1ZSlcblx0XHR9XG5cdH1cblxuXHRpc1NraXBBdmFpbGFibGUoKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIGZhbHNlXG5cdH1cblxuXHRpc0VuYWJsZWQoKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIHRydWVcblx0fVxufVxuIiwiaW1wb3J0IHN0cmVhbSBmcm9tIFwibWl0aHJpbC9zdHJlYW1cIlxuaW1wb3J0IFN0cmVhbSBmcm9tIFwibWl0aHJpbC9zdHJlYW1cIlxuaW1wb3J0IHR5cGUgeyBDdXN0b21lckluZm8sIERuc1JlY29yZCB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vYXBpL2VudGl0aWVzL3N5cy9UeXBlUmVmcy5qc1wiXG5pbXBvcnQgeyBjcmVhdGVEbnNSZWNvcmQgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2FwaS9lbnRpdGllcy9zeXMvVHlwZVJlZnMuanNcIlxuaW1wb3J0IHsgRG5zUmVjb3JkVHlwZSB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vYXBpL2NvbW1vbi9UdXRhbm90YUNvbnN0YW50c1wiXG5pbXBvcnQgdHlwZSB7IE1haWxBZGRyZXNzVGFibGVBdHRycyB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vc2V0dGluZ3MvbWFpbGFkZHJlc3MvTWFpbEFkZHJlc3NUYWJsZS5qc1wiXG5pbXBvcnQgeyBBZGRFbWFpbEFkZHJlc3Nlc1BhZ2UsIEFkZEVtYWlsQWRkcmVzc2VzUGFnZUF0dHJzIH0gZnJvbSBcIi4vQWRkRW1haWxBZGRyZXNzZXNQYWdlXCJcbmltcG9ydCB7IERvbWFpbkRuc1N0YXR1cyB9IGZyb20gXCIuLi9Eb21haW5EbnNTdGF0dXNcIlxuaW1wb3J0IHsgVmVyaWZ5T3duZXJzaGlwUGFnZSwgVmVyaWZ5T3duZXJzaGlwUGFnZUF0dHJzIH0gZnJvbSBcIi4vVmVyaWZ5T3duZXJzaGlwUGFnZVwiXG5pbXBvcnQgeyBWZXJpZnlEbnNSZWNvcmRzUGFnZSwgVmVyaWZ5RG5zUmVjb3Jkc1BhZ2VBdHRycyB9IGZyb20gXCIuL1ZlcmlmeURuc1JlY29yZHNQYWdlXCJcbmltcG9ydCB7IEVudGVyRG9tYWluUGFnZSwgRW50ZXJEb21haW5QYWdlQXR0cnMgfSBmcm9tIFwiLi9FbnRlckRvbWFpblBhZ2VcIlxuaW1wb3J0IHsgY3JlYXRlV2l6YXJkRGlhbG9nLCB3aXphcmRQYWdlV3JhcHBlciB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZ3VpL2Jhc2UvV2l6YXJkRGlhbG9nLmpzXCJcbmltcG9ydCB7IGFzc2VydE1haW5Pck5vZGUgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2FwaS9jb21tb24vRW52XCJcbmltcG9ydCB7IE1haWxBZGRyZXNzVGFibGVNb2RlbCB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vc2V0dGluZ3MvbWFpbGFkZHJlc3MvTWFpbEFkZHJlc3NUYWJsZU1vZGVsLmpzXCJcbmltcG9ydCB7IERpYWxvZ1R5cGUgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2d1aS9iYXNlL0RpYWxvZy5qc1wiXG5cbmFzc2VydE1haW5Pck5vZGUoKVxuZXhwb3J0IHR5cGUgQWRkRG9tYWluRGF0YSA9IHtcblx0ZG9tYWluOiBTdHJlYW08c3RyaW5nPlxuXHRjdXN0b21lckluZm86IEN1c3RvbWVySW5mb1xuXHRleHBlY3RlZFZlcmlmaWNhdGlvblJlY29yZDogRG5zUmVjb3JkXG5cdGVkaXRBbGlhc0Zvcm1BdHRyczogTWFpbEFkZHJlc3NUYWJsZUF0dHJzXG5cdGRvbWFpblN0YXR1czogRG9tYWluRG5zU3RhdHVzXG59XG5cbi8qKiBTaG93cyBhIHdpemFyZCBmb3IgYWRkaW5nIGEgY3VzdG9tIGVtYWlsIGRvbWFpbi4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzaG93QWRkRG9tYWluV2l6YXJkKGRvbWFpbjogc3RyaW5nLCBjdXN0b21lckluZm86IEN1c3RvbWVySW5mbywgbWFpbEFkZHJlc3NUYWJsZU1vZGVsOiBNYWlsQWRkcmVzc1RhYmxlTW9kZWwpOiBQcm9taXNlPHZvaWQ+IHtcblx0bGV0IG1haWxBZGRyZXNzVGFibGVFeHBhbmRlZDogYm9vbGVhbiA9IGZhbHNlXG5cblx0Y29uc3QgZG9tYWluRGF0YTogQWRkRG9tYWluRGF0YSA9IHtcblx0XHRkb21haW46IHN0cmVhbShkb21haW4pLFxuXHRcdGN1c3RvbWVySW5mbzogY3VzdG9tZXJJbmZvLFxuXHRcdC8vIHdpbGwgYmUgZmlsbGVkIG9uY3JlYXRlIGJ5IHRoZSBwYWdlXG5cdFx0Ly8gbm90IGFjdHVhbGx5IHNwZiwgYnV0IHRoZSB0eXBlIFRYVCBvbmx5IG1hdHRlcnMgaGVyZVxuXHRcdGV4cGVjdGVkVmVyaWZpY2F0aW9uUmVjb3JkOiBjcmVhdGVEbnNSZWNvcmQoeyBzdWJkb21haW46IG51bGwsIHR5cGU6IERuc1JlY29yZFR5cGUuRE5TX1JFQ09SRF9UWVBFX1RYVF9TUEYsIHZhbHVlOiBcIlwiIH0pLFxuXHRcdGVkaXRBbGlhc0Zvcm1BdHRyczoge1xuXHRcdFx0bW9kZWw6IG1haWxBZGRyZXNzVGFibGVNb2RlbCxcblx0XHRcdGV4cGFuZGVkOiBtYWlsQWRkcmVzc1RhYmxlRXhwYW5kZWQsXG5cdFx0XHRvbkV4cGFuZGVkOiAobmV3RXhwYW5kZWQpID0+IChtYWlsQWRkcmVzc1RhYmxlRXhwYW5kZWQgPSBuZXdFeHBhbmRlZCksXG5cdFx0fSxcblx0XHRkb21haW5TdGF0dXM6IG5ldyBEb21haW5EbnNTdGF0dXMoZG9tYWluKSxcblx0fVxuXG5cdGNvbnN0IHdpemFyZFBhZ2VzID0gW1xuXHRcdHdpemFyZFBhZ2VXcmFwcGVyKEVudGVyRG9tYWluUGFnZSwgbmV3IEVudGVyRG9tYWluUGFnZUF0dHJzKGRvbWFpbkRhdGEpKSxcblx0XHR3aXphcmRQYWdlV3JhcHBlcihWZXJpZnlPd25lcnNoaXBQYWdlLCBuZXcgVmVyaWZ5T3duZXJzaGlwUGFnZUF0dHJzKGRvbWFpbkRhdGEpKSxcblx0XHR3aXphcmRQYWdlV3JhcHBlcihBZGRFbWFpbEFkZHJlc3Nlc1BhZ2UsIG5ldyBBZGRFbWFpbEFkZHJlc3Nlc1BhZ2VBdHRycyhkb21haW5EYXRhKSksXG5cdFx0d2l6YXJkUGFnZVdyYXBwZXIoVmVyaWZ5RG5zUmVjb3Jkc1BhZ2UsIG5ldyBWZXJpZnlEbnNSZWNvcmRzUGFnZUF0dHJzKGRvbWFpbkRhdGEpKSxcblx0XVxuXHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcblx0XHRjb25zdCB3aXphcmRCdWlsZGVyID0gY3JlYXRlV2l6YXJkRGlhbG9nKFxuXHRcdFx0ZG9tYWluRGF0YSxcblx0XHRcdHdpemFyZFBhZ2VzLFxuXHRcdFx0KCkgPT4ge1xuXHRcdFx0XHRtYWlsQWRkcmVzc1RhYmxlTW9kZWwuZGlzcG9zZSgpXG5cdFx0XHRcdHJlc29sdmUoKVxuXHRcdFx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKClcblx0XHRcdH0sXG5cdFx0XHREaWFsb2dUeXBlLkVkaXRMYXJnZSxcblx0XHQpXG5cdFx0Y29uc3Qgd2l6YXJkID0gd2l6YXJkQnVpbGRlci5kaWFsb2dcblx0XHRjb25zdCB3aXphcmRBdHRycyA9IHdpemFyZEJ1aWxkZXIuYXR0cnNcblx0XHR3aXphcmQuc2hvdygpXG5cblx0XHQvLyB3ZSBjYW4gc2tpcCB0aGUgbmV4dCB0d28gcGFnZXMgYmVjYXVzZSB3ZSBhc3N1bWUgdGhhdCB0aGUgZG9tYWluIGlzIGFscmVhZHkgYXNzaWduZWQgaWYgaXQgd2FzIHBhc3NlZCB0byB0aGUgd2l6YXJkXG5cdFx0aWYgKGRvbWFpbi5sZW5ndGgpIHtcblx0XHRcdHdpemFyZEF0dHJzLmdvVG9OZXh0UGFnZU9yQ2xvc2VXaXphcmQoKVxuXHRcdFx0d2l6YXJkQXR0cnMuZ29Ub05leHRQYWdlT3JDbG9zZVdpemFyZCgpXG5cblx0XHRcdGlmICh3aXphcmRBdHRycy5jdXJyZW50UGFnZSkge1xuXHRcdFx0XHQvLyBza2lwIGFkZCBlbWFpbCBhZGRyZXNzIHBhZ2UgaWYgYW4gZW1haWwgYWRkcmVzcyBoYXMgYmVlbiBhc3NpZ25lZFxuXHRcdFx0XHR3aXphcmRBdHRycy5jdXJyZW50UGFnZS5hdHRycy5uZXh0QWN0aW9uKGZhbHNlKS50aGVuKChyZWFkeSkgPT4ge1xuXHRcdFx0XHRcdGlmIChyZWFkeSkgd2l6YXJkQXR0cnMuZ29Ub05leHRQYWdlT3JDbG9zZVdpemFyZCgpXG5cdFx0XHRcdH0pXG5cdFx0XHR9XG5cdFx0fVxuXHR9KVxufVxuXG5leHBvcnQgdHlwZSBWYWxpZGF0ZWREblNSZWNvcmQgPSB7XG5cdHJlY29yZDogRG5zUmVjb3JkXG5cdGhlbHBJbmZvOiBzdHJpbmdbXVxufVxuIiwiaW1wb3J0IG0sIHsgQ2hpbGRyZW4sIENvbXBvbmVudCwgVm5vZGUgfSBmcm9tIFwibWl0aHJpbFwiXG5pbXBvcnQgc3RyZWFtIGZyb20gXCJtaXRocmlsL3N0cmVhbVwiXG5pbXBvcnQgdHlwZSB7IEluZm9MaW5rLCBUcmFuc2xhdGlvbktleSwgTWF5YmVUcmFuc2xhdGlvbiB9IGZyb20gXCIuLi9taXNjL0xhbmd1YWdlVmlld01vZGVsLmpzXCJcbmltcG9ydCB0eXBlIHsgVGFibGVBdHRycyB9IGZyb20gXCIuLi9ndWkvYmFzZS9UYWJsZS5qc1wiXG5pbXBvcnQgeyBUYWJsZSB9IGZyb20gXCIuLi9ndWkvYmFzZS9UYWJsZS5qc1wiXG5pbXBvcnQgeyBTZXR0aW5nc0V4cGFuZGVyIH0gZnJvbSBcIi4vU2V0dGluZ3NFeHBhbmRlci5qc1wiXG5pbXBvcnQgdHlwZSB7IGxhenkgfSBmcm9tIFwiQHR1dGFvL3R1dGFub3RhLXV0aWxzXCJcbmltcG9ydCBTdHJlYW0gZnJvbSBcIm1pdGhyaWwvc3RyZWFtXCJcblxudHlwZSBFeHBhbmRhYmxlVGFibGVBdHRycyA9IHtcblx0dGl0bGU6IE1heWJlVHJhbnNsYXRpb25cblx0dGFibGU6IFRhYmxlQXR0cnNcblx0aW5mb01zZzogTWF5YmVUcmFuc2xhdGlvblxuXHRpbmZvTGlua0lkPzogSW5mb0xpbmtcblx0Ly8gRXhwYW5kYWJsZVRhYmxlIHVzZXMgaW50ZXJuYWwgc3RhdGUgd2hlbmV2ZXIgdGhpcyBpc24ndCBwYXNzZWQgaW5cblx0ZXhwYW5kZWQ/OiBTdHJlYW08Ym9vbGVhbj5cblx0b25FeHBhbmQ/OiAoKSA9PiB2b2lkXG59XG5cbmV4cG9ydCBjbGFzcyBFeHBhbmRhYmxlVGFibGUgaW1wbGVtZW50cyBDb21wb25lbnQ8RXhwYW5kYWJsZVRhYmxlQXR0cnM+IHtcblx0ZXhwYW5kZWQ6IFN0cmVhbTxib29sZWFuPlxuXG5cdGNvbnN0cnVjdG9yKCkge1xuXHRcdHRoaXMuZXhwYW5kZWQgPSBzdHJlYW08Ym9vbGVhbj4oZmFsc2UpXG5cdH1cblxuXHR2aWV3KHZub2RlOiBWbm9kZTxFeHBhbmRhYmxlVGFibGVBdHRycz4pOiBDaGlsZHJlbiB7XG5cdFx0Y29uc3QgeyB0aXRsZSwgdGFibGUsIGluZm9MaW5rSWQsIGluZm9Nc2csIGV4cGFuZGVkLCBvbkV4cGFuZCB9ID0gdm5vZGUuYXR0cnNcblx0XHRyZXR1cm4gbShcblx0XHRcdFNldHRpbmdzRXhwYW5kZXIsXG5cdFx0XHR7XG5cdFx0XHRcdHRpdGxlLFxuXHRcdFx0XHRpbmZvTGlua0lkLFxuXHRcdFx0XHRpbmZvTXNnLFxuXHRcdFx0XHRvbkV4cGFuZCxcblx0XHRcdFx0ZXhwYW5kZWQ6IGV4cGFuZGVkIHx8IHRoaXMuZXhwYW5kZWQsXG5cdFx0XHR9LFxuXHRcdFx0bShUYWJsZSwgdGFibGUpLFxuXHRcdClcblx0fVxufVxuIiwiaW1wb3J0IG0gZnJvbSBcIm1pdGhyaWxcIlxuaW1wb3J0IHsgRGlhbG9nIH0gZnJvbSBcIi4uL2d1aS9iYXNlL0RpYWxvZ1wiXG5pbXBvcnQgeyBsYW5nIH0gZnJvbSBcIi4uL21pc2MvTGFuZ3VhZ2VWaWV3TW9kZWxcIlxuaW1wb3J0IHsgSW52YWxpZERhdGFFcnJvciwgTG9ja2VkRXJyb3IsIFByZWNvbmRpdGlvbkZhaWxlZEVycm9yIH0gZnJvbSBcIi4uL2FwaS9jb21tb24vZXJyb3IvUmVzdEVycm9yXCJcbmltcG9ydCB7IEF1dG9jb21wbGV0ZSwgVGV4dEZpZWxkLCBUZXh0RmllbGRUeXBlIH0gZnJvbSBcIi4uL2d1aS9iYXNlL1RleHRGaWVsZC5qc1wiXG5pbXBvcnQgeyBuZXZlck51bGwgfSBmcm9tIFwiQHR1dGFvL3R1dGFub3RhLXV0aWxzXCJcbmltcG9ydCB7IGdldENsZWFuZWRNYWlsQWRkcmVzcyB9IGZyb20gXCIuLi9taXNjL3BhcnNpbmcvTWFpbEFkZHJlc3NQYXJzZXJcIlxuaW1wb3J0IHsgbG9jYXRvciB9IGZyb20gXCIuLi9hcGkvbWFpbi9Db21tb25Mb2NhdG9yXCJcbmltcG9ydCB7IGdldEV0SWQgfSBmcm9tIFwiLi4vYXBpL2NvbW1vbi91dGlscy9FbnRpdHlVdGlsc1wiXG5pbXBvcnQgeyBDbG9zZUV2ZW50QnVzT3B0aW9uIH0gZnJvbSBcIi4uL2FwaS9jb21tb24vVHV0YW5vdGFDb25zdGFudHMuanNcIlxuaW1wb3J0IHsgU3VydmV5RGF0YSB9IGZyb20gXCIuLi9hcGkvZW50aXRpZXMvc3lzL1R5cGVSZWZzLmpzXCJcbmltcG9ydCB7IFBhc3N3b3JkRmllbGQgfSBmcm9tIFwiLi4vbWlzYy9wYXNzd29yZHMvUGFzc3dvcmRGaWVsZC5qc1wiXG5pbXBvcnQgeyBpc0lPU0FwcCB9IGZyb20gXCIuLi9hcGkvY29tbW9uL0Vudi5qc1wiXG5pbXBvcnQgeyBjbGllbnQgfSBmcm9tIFwiLi4vbWlzYy9DbGllbnREZXRlY3RvclwiXG5cbmV4cG9ydCBmdW5jdGlvbiBzaG93RGVsZXRlQWNjb3VudERpYWxvZyhzdXJ2ZXlEYXRhOiBTdXJ2ZXlEYXRhIHwgbnVsbCA9IG51bGwpIHtcblx0bGV0IHRha2VvdmVyID0gXCJcIlxuXHRsZXQgcGFzc3dvcmQgPSBcIlwiXG5cdGNvbnN0IHVzZXJJZCA9IGdldEV0SWQobG9jYXRvci5sb2dpbnMuZ2V0VXNlckNvbnRyb2xsZXIoKS51c2VyKVxuXG5cdERpYWxvZy5zaG93QWN0aW9uRGlhbG9nKHtcblx0XHR0aXRsZTogXCJhZG1pbkRlbGV0ZUFjY291bnRfYWN0aW9uXCIsXG5cdFx0Y2hpbGQ6IHtcblx0XHRcdHZpZXc6ICgpID0+XG5cdFx0XHRcdG0oXCIjZGVsZXRlLWFjY291bnQtZGlhbG9nXCIsIFtcblx0XHRcdFx0XHQhKGlzSU9TQXBwKCkgJiYgY2xpZW50LmlzQ2FsZW5kYXJBcHAoKSlcblx0XHRcdFx0XHRcdD8gbShUZXh0RmllbGQsIHtcblx0XHRcdFx0XHRcdFx0XHRsYWJlbDogXCJ0YXJnZXRBZGRyZXNzX2xhYmVsXCIsXG5cdFx0XHRcdFx0XHRcdFx0dmFsdWU6IHRha2VvdmVyLFxuXHRcdFx0XHRcdFx0XHRcdHR5cGU6IFRleHRGaWVsZFR5cGUuRW1haWwsXG5cdFx0XHRcdFx0XHRcdFx0b25pbnB1dDogKHZhbHVlKSA9PiAodGFrZW92ZXIgPSB2YWx1ZSksXG5cdFx0XHRcdFx0XHRcdFx0aGVscExhYmVsOiAoKSA9PiBsYW5nLmdldChcInRha2VvdmVyTWFpbEFkZHJlc3NJbmZvX21zZ1wiKSxcblx0XHRcdFx0XHRcdCAgfSlcblx0XHRcdFx0XHRcdDogbnVsbCxcblx0XHRcdFx0XHRtKFBhc3N3b3JkRmllbGQsIHtcblx0XHRcdFx0XHRcdHZhbHVlOiBwYXNzd29yZCxcblx0XHRcdFx0XHRcdGF1dG9jb21wbGV0ZUFzOiBBdXRvY29tcGxldGUuY3VycmVudFBhc3N3b3JkLFxuXHRcdFx0XHRcdFx0b25pbnB1dDogKHZhbHVlKSA9PiAocGFzc3dvcmQgPSB2YWx1ZSksXG5cdFx0XHRcdFx0XHRzdGF0dXM6IHtcblx0XHRcdFx0XHRcdFx0dHlwZTogXCJuZXV0cmFsXCIsXG5cdFx0XHRcdFx0XHRcdHRleHQ6IFwicGFzc3dvcmRFbnRlck5ldXRyYWxfbXNnXCIsXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdH0pLFxuXHRcdFx0XHRdKSxcblx0XHR9LFxuXHRcdG9rQWN0aW9uOiBhc3luYyAoKSA9PiB7XG5cdFx0XHRjb25zdCBpc0RlbGV0ZWQgPSBhd2FpdCBkZWxldGVBY2NvdW50KHRha2VvdmVyLCBwYXNzd29yZCwgc3VydmV5RGF0YSlcblx0XHRcdGlmIChpc0RlbGV0ZWQpIHtcblx0XHRcdFx0YXdhaXQgbG9jYXRvci5jcmVkZW50aWFsc1Byb3ZpZGVyLmRlbGV0ZUJ5VXNlcklkKHVzZXJJZClcblx0XHRcdFx0bS5yb3V0ZS5zZXQoXCIvbG9naW5cIiwgeyBub0F1dG9Mb2dpbjogdHJ1ZSB9KVxuXHRcdFx0fVxuXHRcdH0sXG5cdFx0YWxsb3dDYW5jZWw6IHRydWUsXG5cdFx0b2tBY3Rpb25UZXh0SWQ6IFwiZGVsZXRlX2FjdGlvblwiLFxuXHR9KVxufVxuXG5hc3luYyBmdW5jdGlvbiBkZWxldGVBY2NvdW50KHRha2VvdmVyOiBzdHJpbmcsIHBhc3N3b3JkOiBzdHJpbmcsIHN1cnZleURhdGE6IFN1cnZleURhdGEgfCBudWxsID0gbnVsbCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuXHRjb25zdCBjbGVhbmVkVGFrZW92ZXIgPSB0YWtlb3ZlciA9PT0gXCJcIiA/IFwiXCIgOiBnZXRDbGVhbmVkTWFpbEFkZHJlc3ModGFrZW92ZXIpXG5cblx0aWYgKGNsZWFuZWRUYWtlb3ZlciA9PT0gbnVsbCkge1xuXHRcdGF3YWl0IERpYWxvZy5tZXNzYWdlKFwibWFpbEFkZHJlc3NJbnZhbGlkX21zZ1wiKVxuXHRcdHJldHVybiBmYWxzZVxuXHR9IGVsc2Uge1xuXHRcdGNvbnN0IG1lc3NhZ2UgPSBsYW5nLm1ha2VUcmFuc2xhdGlvbihcblx0XHRcdFwiY29uZmlybV9tc2dcIixcblx0XHRcdGNsZWFuZWRUYWtlb3ZlciA9PT0gXCJcIlxuXHRcdFx0XHQ/IGxhbmcuZ2V0KFwiZGVsZXRlQWNjb3VudENvbmZpcm1fbXNnXCIpXG5cdFx0XHRcdDogbGFuZy5nZXQoXCJkZWxldGVBY2NvdW50V2l0aFRha2VvdmVyQ29uZmlybV9tc2dcIiwge1xuXHRcdFx0XHRcdFx0XCJ7MX1cIjogY2xlYW5lZFRha2VvdmVyLFxuXHRcdFx0XHQgIH0pLFxuXHRcdClcblxuXHRcdGNvbnN0IG9rID0gYXdhaXQgRGlhbG9nLmNvbmZpcm0obWVzc2FnZSlcblx0XHRpZiAoIW9rKSByZXR1cm4gZmFsc2Vcblx0XHQvLyB0aGlzIGlzIG5lY2Vzc2FyeSB0byBwcmV2ZW50IHVzIGZyb20gYXBwbHlpbmcgd2Vic29ja2V0IGV2ZW50cyB0byBhbiBhbHJlYWR5IGRlbGV0ZWQvY2xvc2VkIG9mZmxpbmUgREJcblx0XHQvLyB3aGljaCBpcyBhbiBpbW1lZGlhdGUgY3Jhc2ggb24gaW9zXG5cdFx0YXdhaXQgbG9jYXRvci5jb25uZWN0aXZpdHlNb2RlbC5jbG9zZShDbG9zZUV2ZW50QnVzT3B0aW9uLlRlcm1pbmF0ZSlcblx0XHR0cnkge1xuXHRcdFx0YXdhaXQgbG9jYXRvci5sb2dpbkZhY2FkZS5kZWxldGVBY2NvdW50KHBhc3N3b3JkLCBuZXZlck51bGwoY2xlYW5lZFRha2VvdmVyKSwgc3VydmV5RGF0YSlcblx0XHRcdHJldHVybiB0cnVlXG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0aWYgKGUgaW5zdGFuY2VvZiBQcmVjb25kaXRpb25GYWlsZWRFcnJvcikgYXdhaXQgRGlhbG9nLm1lc3NhZ2UoXCJwYXNzd29yZFdyb25nSW52YWxpZF9tc2dcIilcblx0XHRcdGlmIChlIGluc3RhbmNlb2YgSW52YWxpZERhdGFFcnJvcikgYXdhaXQgRGlhbG9nLm1lc3NhZ2UoXCJ0YWtlb3ZlckFjY291bnRJbnZhbGlkX21zZ1wiKVxuXHRcdFx0aWYgKGUgaW5zdGFuY2VvZiBMb2NrZWRFcnJvcikgYXdhaXQgRGlhbG9nLm1lc3NhZ2UoXCJvcGVyYXRpb25TdGlsbEFjdGl2ZV9tc2dcIilcblx0XHRcdHJldHVybiBmYWxzZVxuXHRcdH1cblx0fVxufVxuIiwiaW1wb3J0IG0sIHsgQ29tcG9uZW50LCBWbm9kZSB9IGZyb20gXCJtaXRocmlsXCJcbmltcG9ydCB7IGxhbmcgfSBmcm9tIFwiLi4vbWlzYy9MYW5ndWFnZVZpZXdNb2RlbC5qc1wiXG5pbXBvcnQgeyBEcm9wRG93blNlbGVjdG9yIH0gZnJvbSBcIi4uL2d1aS9iYXNlL0Ryb3BEb3duU2VsZWN0b3IuanNcIlxuaW1wb3J0IHtcblx0QXVkaXRMb2dFbnRyeSxcblx0QXVkaXRMb2dFbnRyeVR5cGVSZWYsXG5cdGNyZWF0ZVN1cnZleURhdGEsXG5cdEN1c3RvbWVyLFxuXHRDdXN0b21lckluZm8sXG5cdEN1c3RvbWVyUHJvcGVydGllc1R5cGVSZWYsXG5cdEN1c3RvbWVyU2VydmVyUHJvcGVydGllcyxcblx0Q3VzdG9tZXJUeXBlUmVmLFxuXHRHcm91cEluZm8sXG5cdEdyb3VwSW5mb1R5cGVSZWYsXG59IGZyb20gXCIuLi9hcGkvZW50aXRpZXMvc3lzL1R5cGVSZWZzLmpzXCJcbmltcG9ydCB7IEV4cGFuZGFibGVUYWJsZSB9IGZyb20gXCIuL0V4cGFuZGFibGVUYWJsZS5qc1wiXG5pbXBvcnQgeyBzaG93UHJvZ3Jlc3NEaWFsb2cgfSBmcm9tIFwiLi4vZ3VpL2RpYWxvZ3MvUHJvZ3Jlc3NEaWFsb2cuanNcIlxuaW1wb3J0IHsgU2V0dGluZ3NFeHBhbmRlciB9IGZyb20gXCIuL1NldHRpbmdzRXhwYW5kZXIuanNcIlxuaW1wb3J0IHsgTG9naW5CdXR0b24gfSBmcm9tIFwiLi4vZ3VpL2Jhc2UvYnV0dG9ucy9Mb2dpbkJ1dHRvbi5qc1wiXG5pbXBvcnQgeyBzaG93TGVhdmluZ1VzZXJTdXJ2ZXlXaXphcmQgfSBmcm9tIFwiLi4vc3Vic2NyaXB0aW9uL0xlYXZpbmdVc2VyU3VydmV5V2l6YXJkLmpzXCJcbmltcG9ydCB7IFNVUlZFWV9WRVJTSU9OX05VTUJFUiB9IGZyb20gXCIuLi9zdWJzY3JpcHRpb24vTGVhdmluZ1VzZXJTdXJ2ZXlDb25zdGFudHMuanNcIlxuaW1wb3J0IHsgc2hvd0RlbGV0ZUFjY291bnREaWFsb2cgfSBmcm9tIFwiLi4vc3Vic2NyaXB0aW9uL0RlbGV0ZUFjY291bnREaWFsb2cuanNcIlxuaW1wb3J0IHN0cmVhbSBmcm9tIFwibWl0aHJpbC9zdHJlYW1cIlxuaW1wb3J0IFN0cmVhbSBmcm9tIFwibWl0aHJpbC9zdHJlYW1cIlxuaW1wb3J0IHsgQ29sdW1uV2lkdGgsIFRhYmxlQXR0cnMsIFRhYmxlTGluZUF0dHJzIH0gZnJvbSBcIi4uL2d1aS9iYXNlL1RhYmxlLmpzXCJcbmltcG9ydCB7IExhenlMb2FkZWQsIG5ldmVyTnVsbCwgbm9PcCwgb2ZDbGFzcywgcHJvbWlzZU1hcCB9IGZyb20gXCJAdHV0YW8vdHV0YW5vdGEtdXRpbHNcIlxuaW1wb3J0IHsgQm9vdEljb25zIH0gZnJvbSBcIi4uL2d1aS9iYXNlL2ljb25zL0Jvb3RJY29ucy5qc1wiXG5pbXBvcnQgeyBCdXR0b25TaXplIH0gZnJvbSBcIi4uL2d1aS9iYXNlL0J1dHRvblNpemUuanNcIlxuaW1wb3J0IHsgR0VORVJBVEVEX01BWF9JRCB9IGZyb20gXCIuLi9hcGkvY29tbW9uL3V0aWxzL0VudGl0eVV0aWxzLmpzXCJcbmltcG9ydCB7IGZvcm1hdERhdGVUaW1lLCBmb3JtYXREYXRlVGltZUZyb21ZZXN0ZXJkYXlPbiB9IGZyb20gXCIuLi9taXNjL0Zvcm1hdHRlci5qc1wiXG5pbXBvcnQgeyBJY29ucyB9IGZyb20gXCIuLi9ndWkvYmFzZS9pY29ucy9JY29ucy5qc1wiXG5pbXBvcnQgeyBOb3RBdXRob3JpemVkRXJyb3IgfSBmcm9tIFwiLi4vYXBpL2NvbW1vbi9lcnJvci9SZXN0RXJyb3IuanNcIlxuaW1wb3J0IHsgRGlhbG9nIH0gZnJvbSBcIi4uL2d1aS9iYXNlL0RpYWxvZy5qc1wiXG5pbXBvcnQgeyBFbnRpdHlVcGRhdGVEYXRhLCBpc1VwZGF0ZUZvclR5cGVSZWYgfSBmcm9tIFwiLi4vYXBpL2NvbW1vbi91dGlscy9FbnRpdHlVcGRhdGVVdGlscy5qc1wiXG5pbXBvcnQgeyBsb2NhdG9yIH0gZnJvbSBcIi4uL2FwaS9tYWluL0NvbW1vbkxvY2F0b3IuanNcIlxuXG5leHBvcnQgdHlwZSBBY2NvdW50TWFpbnRlbmFuY2VVcGRhdGVOb3RpZmllciA9ICh1cGRhdGVzOiBSZWFkb25seUFycmF5PEVudGl0eVVwZGF0ZURhdGE+KSA9PiB2b2lkXG5cbmV4cG9ydCBpbnRlcmZhY2UgQWNjb3VudE1haW50ZW5hbmNlU2V0dGluZ3NBdHRycyB7XG5cdGN1c3RvbWVyU2VydmVyUHJvcGVydGllczogc3RyZWFtPFJlYWRvbmx5PEN1c3RvbWVyU2VydmVyUHJvcGVydGllcz4+XG5cdHNldE9uVXBkYXRlSGFuZGxlcjogKGZuOiBBY2NvdW50TWFpbnRlbmFuY2VVcGRhdGVOb3RpZmllcikgPT4gdm9pZFxufVxuXG5leHBvcnQgY2xhc3MgQWNjb3VudE1haW50ZW5hbmNlU2V0dGluZ3MgaW1wbGVtZW50cyBDb21wb25lbnQ8QWNjb3VudE1haW50ZW5hbmNlU2V0dGluZ3NBdHRycz4ge1xuXHRwcml2YXRlIHJlcXVpcmVQYXNzd29yZFVwZGF0ZUFmdGVyUmVzZXQgPSBmYWxzZVxuXHRwcml2YXRlIHNhdmVJcEFkZHJlc3MgPSBmYWxzZVxuXHRwcml2YXRlIHJlYWRvbmx5IHVzYWdlRGF0YUV4cGFuZGVkID0gc3RyZWFtKGZhbHNlKVxuXHRwcml2YXRlIHJlYWRvbmx5IGRlbGV0ZUFjY291bnRFeHBhbmRlZCA9IHN0cmVhbShmYWxzZSlcblx0cHJpdmF0ZSBhdWRpdExvZ0xpbmVzOiBSZWFkb25seUFycmF5PFRhYmxlTGluZUF0dHJzPiA9IFtdXG5cdHByaXZhdGUgYXVkaXRMb2dMb2FkZWQgPSBmYWxzZVxuXG5cdHByaXZhdGUgY3VzdG9tZXI6IEN1c3RvbWVyIHwgbnVsbCA9IG51bGxcblx0cHJpdmF0ZSByZWFkb25seSBjdXN0b21lckluZm8gPSBuZXcgTGF6eUxvYWRlZDxDdXN0b21lckluZm8+KCgpID0+IGxvY2F0b3IubG9naW5zLmdldFVzZXJDb250cm9sbGVyKCkubG9hZEN1c3RvbWVySW5mbygpKVxuXHRwcml2YXRlIHJlYWRvbmx5IGN1c3RvbWVyUHJvcGVydGllcyA9IG5ldyBMYXp5TG9hZGVkKCgpID0+XG5cdFx0bG9jYXRvci5lbnRpdHlDbGllbnRcblx0XHRcdC5sb2FkKEN1c3RvbWVyVHlwZVJlZiwgbmV2ZXJOdWxsKGxvY2F0b3IubG9naW5zLmdldFVzZXJDb250cm9sbGVyKCkudXNlci5jdXN0b21lcikpXG5cdFx0XHQudGhlbigoY3VzdG9tZXIpID0+IGxvY2F0b3IuZW50aXR5Q2xpZW50LmxvYWQoQ3VzdG9tZXJQcm9wZXJ0aWVzVHlwZVJlZiwgbmV2ZXJOdWxsKGN1c3RvbWVyLnByb3BlcnRpZXMpKSksXG5cdClcblxuXHRjb25zdHJ1Y3Rvcih2bm9kZTogVm5vZGU8QWNjb3VudE1haW50ZW5hbmNlU2V0dGluZ3NBdHRycz4pIHtcblx0XHR2bm9kZS5hdHRycy5jdXN0b21lclNlcnZlclByb3BlcnRpZXMubWFwKChwcm9wcykgPT4ge1xuXHRcdFx0dGhpcy5yZXF1aXJlUGFzc3dvcmRVcGRhdGVBZnRlclJlc2V0ID0gcHJvcHMucmVxdWlyZVBhc3N3b3JkVXBkYXRlQWZ0ZXJSZXNldFxuXHRcdFx0dGhpcy5zYXZlSXBBZGRyZXNzID0gcHJvcHMuc2F2ZUVuY3J5cHRlZElwQWRkcmVzc0luU2Vzc2lvblxuXHRcdH0pXG5cblx0XHR0aGlzLmN1c3RvbWVyUHJvcGVydGllcy5nZXRBc3luYygpLnRoZW4obS5yZWRyYXcpXG5cdFx0dm5vZGUuYXR0cnMuc2V0T25VcGRhdGVIYW5kbGVyKCh1cGRhdGVzOiBFbnRpdHlVcGRhdGVEYXRhW10pID0+IHRoaXMuaGFuZGxlRXZlbnRVcGRhdGVzKHVwZGF0ZXMpKVxuXHRcdHRoaXMudmlldyA9IHRoaXMudmlldy5iaW5kKHRoaXMpXG5cdFx0dGhpcy51cGRhdGVBdWRpdExvZygpXG5cdH1cblxuXHR2aWV3KHsgYXR0cnMgfTogVm5vZGU8QWNjb3VudE1haW50ZW5hbmNlU2V0dGluZ3NBdHRycz4pIHtcblx0XHRjb25zdCBhdWRpdExvZ1RhYmxlQXR0cnM6IFRhYmxlQXR0cnMgPSB7XG5cdFx0XHRjb2x1bW5IZWFkaW5nOiBbXCJhY3Rpb25fbGFiZWxcIiwgXCJtb2RpZmllZF9sYWJlbFwiLCBcInRpbWVfbGFiZWxcIl0sXG5cdFx0XHRjb2x1bW5XaWR0aHM6IFtDb2x1bW5XaWR0aC5MYXJnZXN0LCBDb2x1bW5XaWR0aC5MYXJnZXN0LCBDb2x1bW5XaWR0aC5TbWFsbF0sXG5cdFx0XHRzaG93QWN0aW9uQnV0dG9uQ29sdW1uOiB0cnVlLFxuXHRcdFx0bGluZXM6IHRoaXMuYXVkaXRMb2dMaW5lcyxcblx0XHRcdGFkZEJ1dHRvbkF0dHJzOiB7XG5cdFx0XHRcdHRpdGxlOiBcInJlZnJlc2hfYWN0aW9uXCIsXG5cdFx0XHRcdGNsaWNrOiAoKSA9PiBzaG93UHJvZ3Jlc3NEaWFsb2coXCJsb2FkaW5nX21zZ1wiLCB0aGlzLnVwZGF0ZUF1ZGl0TG9nKCkpLnRoZW4oKCkgPT4gbS5yZWRyYXcoKSksXG5cdFx0XHRcdGljb246IEJvb3RJY29ucy5Qcm9ncmVzcyxcblx0XHRcdFx0c2l6ZTogQnV0dG9uU2l6ZS5Db21wYWN0LFxuXHRcdFx0fSxcblx0XHR9XG5cblx0XHRyZXR1cm4gW1xuXHRcdFx0bShcIi5tdC1sXCIsIFtcblx0XHRcdFx0bShcIi5oNFwiLCBsYW5nLmdldChcInNlY3VyaXR5X3RpdGxlXCIpKSxcblx0XHRcdFx0bShEcm9wRG93blNlbGVjdG9yLCB7XG5cdFx0XHRcdFx0bGFiZWw6IFwic2F2ZUVuY3J5cHRlZElwQWRkcmVzc190aXRsZVwiLFxuXHRcdFx0XHRcdGhlbHBMYWJlbDogKCkgPT4gbGFuZy5nZXQoXCJzYXZlRW5jcnlwdGVkSXBBZGRyZXNzX2xhYmVsXCIpLFxuXHRcdFx0XHRcdHNlbGVjdGVkVmFsdWU6IHRoaXMuc2F2ZUlwQWRkcmVzcyxcblx0XHRcdFx0XHRzZWxlY3Rpb25DaGFuZ2VkSGFuZGxlcjogKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHRjb25zdCBuZXdQcm9wcyA9IE9iamVjdC5hc3NpZ24oe30sIGF0dHJzLmN1c3RvbWVyU2VydmVyUHJvcGVydGllcygpLCB7XG5cdFx0XHRcdFx0XHRcdHNhdmVFbmNyeXB0ZWRJcEFkZHJlc3NJblNlc3Npb246IHZhbHVlLFxuXHRcdFx0XHRcdFx0fSlcblx0XHRcdFx0XHRcdGxvY2F0b3IuZW50aXR5Q2xpZW50LnVwZGF0ZShuZXdQcm9wcylcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdGl0ZW1zOiBbXG5cdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdG5hbWU6IGxhbmcuZ2V0KFwieWVzX2xhYmVsXCIpLFxuXHRcdFx0XHRcdFx0XHR2YWx1ZTogdHJ1ZSxcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdG5hbWU6IGxhbmcuZ2V0KFwibm9fbGFiZWxcIiksXG5cdFx0XHRcdFx0XHRcdHZhbHVlOiBmYWxzZSxcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XSxcblx0XHRcdFx0XHRkcm9wZG93bldpZHRoOiAyNTAsXG5cdFx0XHRcdH0pLFxuXHRcdFx0XHRsb2NhdG9yLmxvZ2lucy5nZXRVc2VyQ29udHJvbGxlcigpLmlzR2xvYmFsQWRtaW4oKVxuXHRcdFx0XHRcdD8gbShcIlwiLCBbXG5cdFx0XHRcdFx0XHRcdGxvY2F0b3IubG9naW5zLmdldFVzZXJDb250cm9sbGVyKCkuaXNQcmVtaXVtQWNjb3VudCgpXG5cdFx0XHRcdFx0XHRcdFx0PyBtKERyb3BEb3duU2VsZWN0b3IsIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0bGFiZWw6IFwiZW5mb3JjZVBhc3N3b3JkVXBkYXRlX3RpdGxlXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGhlbHBMYWJlbDogKCkgPT4gbGFuZy5nZXQoXCJlbmZvcmNlUGFzc3dvcmRVcGRhdGVfbXNnXCIpLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRzZWxlY3RlZFZhbHVlOiB0aGlzLnJlcXVpcmVQYXNzd29yZFVwZGF0ZUFmdGVyUmVzZXQsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHNlbGVjdGlvbkNoYW5nZWRIYW5kbGVyOiAodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjb25zdCBuZXdQcm9wczogQ3VzdG9tZXJTZXJ2ZXJQcm9wZXJ0aWVzID0gT2JqZWN0LmFzc2lnbih7fSwgYXR0cnMuY3VzdG9tZXJTZXJ2ZXJQcm9wZXJ0aWVzKCksIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHJlcXVpcmVQYXNzd29yZFVwZGF0ZUFmdGVyUmVzZXQ6IHZhbHVlLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0bG9jYXRvci5lbnRpdHlDbGllbnQudXBkYXRlKG5ld1Byb3BzKVxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRpdGVtczogW1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdG5hbWU6IGxhbmcuZ2V0KFwieWVzX2xhYmVsXCIpLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dmFsdWU6IHRydWUsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRuYW1lOiBsYW5nLmdldChcIm5vX2xhYmVsXCIpLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dmFsdWU6IGZhbHNlLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0XHRcdF0sXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGRyb3Bkb3duV2lkdGg6IDI1MCxcblx0XHRcdFx0XHRcdFx0XHQgIH0pXG5cdFx0XHRcdFx0XHRcdFx0OiBudWxsLFxuXHRcdFx0XHRcdFx0XHR0aGlzLmN1c3RvbWVyXG5cdFx0XHRcdFx0XHRcdFx0PyBtKFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcIi5tdC1sXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdG0oRXhwYW5kYWJsZVRhYmxlLCB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dGl0bGU6IFwiYXVkaXRMb2dfdGl0bGVcIixcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0YWJsZTogYXVkaXRMb2dUYWJsZUF0dHJzLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGluZm9Nc2c6IFwiYXVkaXRMb2dJbmZvX21zZ1wiLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdG9uRXhwYW5kOiAoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBpZiB0aGUgdXNlciBkaWQgbm90IGxvYWQgdGhpcyB3aGVuIHRoZSB2aWV3IHdhcyBjcmVhdGVkIChpLmUuIGR1ZSB0byBhIGxvc3QgY29ubmVjdGlvbiksIGF0dGVtcHQgdG8gcmVsb2FkIGl0XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoIXRoaXMuYXVkaXRMb2dMb2FkZWQpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0c2hvd1Byb2dyZXNzRGlhbG9nKFwibG9hZGluZ19tc2dcIiwgdGhpcy51cGRhdGVBdWRpdExvZygpKS50aGVuKCgpID0+IG0ucmVkcmF3KCkpXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0fSksXG5cdFx0XHRcdFx0XHRcdFx0ICApXG5cdFx0XHRcdFx0XHRcdFx0OiBudWxsLFxuXHRcdFx0XHRcdCAgXSlcblx0XHRcdFx0XHQ6IG51bGwsXG5cdFx0XHRdKSxcblx0XHRcdGxvY2F0b3IubG9naW5zLmdldFVzZXJDb250cm9sbGVyKCkuaXNQcmVtaXVtQWNjb3VudCgpXG5cdFx0XHRcdD8gbShcblx0XHRcdFx0XHRcdFNldHRpbmdzRXhwYW5kZXIsXG5cdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdHRpdGxlOiBcInVzYWdlRGF0YV9sYWJlbFwiLFxuXHRcdFx0XHRcdFx0XHRleHBhbmRlZDogdGhpcy51c2FnZURhdGFFeHBhbmRlZCxcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHR0aGlzLmN1c3RvbWVyUHJvcGVydGllcy5pc0xvYWRlZCgpXG5cdFx0XHRcdFx0XHRcdD8gbShEcm9wRG93blNlbGVjdG9yLCB7XG5cdFx0XHRcdFx0XHRcdFx0XHRsYWJlbDogXCJjdXN0b21lclVzYWdlRGF0YU9wdE91dF9sYWJlbFwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0aXRlbXM6IFtcblx0XHRcdFx0XHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdG5hbWU6IGxhbmcuZ2V0KFwiY3VzdG9tZXJVc2FnZURhdGFHbG9iYWxseURlYWN0aXZhdGVkX2xhYmVsXCIpLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHZhbHVlOiB0cnVlLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0bmFtZTogbGFuZy5nZXQoXCJjdXN0b21lclVzYWdlRGF0YUdsb2JhbGx5UG9zc2libGVfbGFiZWxcIiksXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dmFsdWU6IGZhbHNlLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRcdFx0XSxcblx0XHRcdFx0XHRcdFx0XHRcdHNlbGVjdGVkVmFsdWU6IHRoaXMuY3VzdG9tZXJQcm9wZXJ0aWVzLmdldFN5bmMoKSEudXNhZ2VEYXRhT3B0ZWRPdXQsXG5cdFx0XHRcdFx0XHRcdFx0XHRzZWxlY3Rpb25DaGFuZ2VkSGFuZGxlcjogKHYpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKHRoaXMuY3VzdG9tZXJQcm9wZXJ0aWVzLmlzTG9hZGVkKCkpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjb25zdCBjdXN0b21lclByb3BzID0gdGhpcy5jdXN0b21lclByb3BlcnRpZXMuZ2V0U3luYygpIVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGN1c3RvbWVyUHJvcHMudXNhZ2VEYXRhT3B0ZWRPdXQgPSB2IGFzIGJvb2xlYW5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRsb2NhdG9yLmVudGl0eUNsaWVudC51cGRhdGUoY3VzdG9tZXJQcm9wcylcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XHRcdGRyb3Bkb3duV2lkdGg6IDI1MCxcblx0XHRcdFx0XHRcdFx0ICB9KVxuXHRcdFx0XHRcdFx0XHQ6IG51bGwsXG5cdFx0XHRcdCAgKVxuXHRcdFx0XHQ6IG51bGwsXG5cdFx0XHRtKFxuXHRcdFx0XHRcIi5tYi1sXCIsXG5cdFx0XHRcdG0oXG5cdFx0XHRcdFx0U2V0dGluZ3NFeHBhbmRlcixcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHR0aXRsZTogXCJhZG1pbkRlbGV0ZUFjY291bnRfYWN0aW9uXCIsXG5cdFx0XHRcdFx0XHRidXR0b25UZXh0OiBcImFkbWluRGVsZXRlQWNjb3VudF9hY3Rpb25cIixcblx0XHRcdFx0XHRcdGV4cGFuZGVkOiB0aGlzLmRlbGV0ZUFjY291bnRFeHBhbmRlZCxcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdG0oXG5cdFx0XHRcdFx0XHRcIi5mbGV4LWNlbnRlclwiLFxuXHRcdFx0XHRcdFx0bShcblx0XHRcdFx0XHRcdFx0XCJcIixcblx0XHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRcdHN0eWxlOiB7XG5cdFx0XHRcdFx0XHRcdFx0XHR3aWR0aDogXCIyMDBweFwiLFxuXHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdG0oTG9naW5CdXR0b24sIHtcblx0XHRcdFx0XHRcdFx0XHRsYWJlbDogXCJhZG1pbkRlbGV0ZUFjY291bnRfYWN0aW9uXCIsXG5cdFx0XHRcdFx0XHRcdFx0b25jbGljazogKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdFx0Y29uc3QgaXNQcmVtaXVtID0gbG9jYXRvci5sb2dpbnMuZ2V0VXNlckNvbnRyb2xsZXIoKS5pc1ByZW1pdW1BY2NvdW50KClcblx0XHRcdFx0XHRcdFx0XHRcdHNob3dMZWF2aW5nVXNlclN1cnZleVdpemFyZChpc1ByZW1pdW0sIGZhbHNlKS50aGVuKChyZWFzb24pID0+IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKHJlYXNvbi5zdWJtaXR0ZWQgJiYgcmVhc29uLmNhdGVnb3J5ICYmIHJlYXNvbi5yZWFzb24pIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjb25zdCBzdXJ2ZXlEYXRhID0gY3JlYXRlU3VydmV5RGF0YSh7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjYXRlZ29yeTogcmVhc29uLmNhdGVnb3J5LFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZGV0YWlsczogcmVhc29uLmRldGFpbHMsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZWFzb246IHJlYXNvbi5yZWFzb24sXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR2ZXJzaW9uOiBTVVJWRVlfVkVSU0lPTl9OVU1CRVIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0fSlcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzaG93RGVsZXRlQWNjb3VudERpYWxvZyhzdXJ2ZXlEYXRhKVxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHNob3dEZWxldGVBY2NvdW50RGlhbG9nKClcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0fSlcblx0XHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHR9KSxcblx0XHRcdFx0XHRcdCksXG5cdFx0XHRcdFx0KSxcblx0XHRcdFx0KSxcblx0XHRcdCksXG5cdFx0XVxuXHR9XG5cblx0cHJpdmF0ZSB1cGRhdGVBdWRpdExvZygpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRyZXR1cm4gbG9jYXRvci5sb2dpbnNcblx0XHRcdC5nZXRVc2VyQ29udHJvbGxlcigpXG5cdFx0XHQubG9hZEN1c3RvbWVyKClcblx0XHRcdC50aGVuKChjdXN0b21lcikgPT4ge1xuXHRcdFx0XHR0aGlzLmN1c3RvbWVyID0gY3VzdG9tZXJcblxuXHRcdFx0XHRyZXR1cm4gbG9jYXRvci5lbnRpdHlDbGllbnRcblx0XHRcdFx0XHQubG9hZFJhbmdlKEF1ZGl0TG9nRW50cnlUeXBlUmVmLCBuZXZlck51bGwoY3VzdG9tZXIuYXVkaXRMb2cpLml0ZW1zLCBHRU5FUkFURURfTUFYX0lELCAyMDAsIHRydWUpXG5cdFx0XHRcdFx0LnRoZW4oKGF1ZGl0TG9nKSA9PiB7XG5cdFx0XHRcdFx0XHR0aGlzLmF1ZGl0TG9nTG9hZGVkID0gdHJ1ZSAvLyBpbmRpY2F0ZSB0aGF0IHdlIGRvIG5vdCBuZWVkIHRvIHJlbG9hZCB0aGUgbGlzdCBhZ2FpbiB3aGVuIHdlIGV4cGFuZFxuXHRcdFx0XHRcdFx0dGhpcy5hdWRpdExvZ0xpbmVzID0gYXVkaXRMb2cubWFwKChhdWRpdExvZ0VudHJ5KSA9PiB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0XHRcdFx0Y2VsbHM6IFthdWRpdExvZ0VudHJ5LmFjdGlvbiwgYXVkaXRMb2dFbnRyeS5tb2RpZmllZEVudGl0eSwgZm9ybWF0RGF0ZVRpbWVGcm9tWWVzdGVyZGF5T24oYXVkaXRMb2dFbnRyeS5kYXRlKV0sXG5cdFx0XHRcdFx0XHRcdFx0YWN0aW9uQnV0dG9uQXR0cnM6IHtcblx0XHRcdFx0XHRcdFx0XHRcdHRpdGxlOiBcInNob3dNb3JlX2FjdGlvblwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0aWNvbjogSWNvbnMuTW9yZSxcblx0XHRcdFx0XHRcdFx0XHRcdGNsaWNrOiAoKSA9PiB0aGlzLnNob3dBdWRpdExvZ0RldGFpbHMoYXVkaXRMb2dFbnRyeSwgY3VzdG9tZXIpLFxuXHRcdFx0XHRcdFx0XHRcdFx0c2l6ZTogQnV0dG9uU2l6ZS5Db21wYWN0LFxuXHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0fSlcblx0XHRcdFx0XHQuZmluYWxseShtLnJlZHJhdylcblx0XHRcdH0pXG5cdH1cblxuXHRwcml2YXRlIHNob3dBdWRpdExvZ0RldGFpbHMoZW50cnk6IEF1ZGl0TG9nRW50cnksIGN1c3RvbWVyOiBDdXN0b21lcikge1xuXHRcdGxldCBtb2RpZmllZEdyb3VwSW5mbzogU3RyZWFtPEdyb3VwSW5mbz4gPSBzdHJlYW0oKVxuXHRcdGxldCBncm91cEluZm8gPSBzdHJlYW08R3JvdXBJbmZvPigpXG5cdFx0bGV0IGdyb3VwSW5mb0xvYWRpbmdQcm9taXNlczogUHJvbWlzZTx1bmtub3duPltdID0gW11cblxuXHRcdGlmIChlbnRyeS5tb2RpZmllZEdyb3VwSW5mbykge1xuXHRcdFx0Z3JvdXBJbmZvTG9hZGluZ1Byb21pc2VzLnB1c2goXG5cdFx0XHRcdGxvY2F0b3IuZW50aXR5Q2xpZW50XG5cdFx0XHRcdFx0LmxvYWQoR3JvdXBJbmZvVHlwZVJlZiwgZW50cnkubW9kaWZpZWRHcm91cEluZm8pXG5cdFx0XHRcdFx0LnRoZW4oKGdpKSA9PiB7XG5cdFx0XHRcdFx0XHRtb2RpZmllZEdyb3VwSW5mbyhnaSlcblx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdC5jYXRjaChcblx0XHRcdFx0XHRcdG9mQ2xhc3MoTm90QXV0aG9yaXplZEVycm9yLCAoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdC8vIElmIHRoZSBhZG1pbiBpcyByZW1vdmVkIGZyb20gdGhlIGZyZWUgZ3JvdXAsIGhlIGRvZXMgbm90IGhhdmUgdGhlIHBlcm1pc3Npb24gdG8gYWNjZXNzIHRoZSBncm91cGluZm8gb2YgdGhhdCBncm91cCBhbnltb3JlXG5cdFx0XHRcdFx0XHR9KSxcblx0XHRcdFx0XHQpLFxuXHRcdFx0KVxuXHRcdH1cblxuXHRcdGlmIChlbnRyeS5ncm91cEluZm8pIHtcblx0XHRcdGdyb3VwSW5mb0xvYWRpbmdQcm9taXNlcy5wdXNoKFxuXHRcdFx0XHRsb2NhdG9yLmVudGl0eUNsaWVudFxuXHRcdFx0XHRcdC5sb2FkKEdyb3VwSW5mb1R5cGVSZWYsIGVudHJ5Lmdyb3VwSW5mbylcblx0XHRcdFx0XHQudGhlbigoZ2kpID0+IHtcblx0XHRcdFx0XHRcdGdyb3VwSW5mbyhnaSlcblx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdC5jYXRjaChcblx0XHRcdFx0XHRcdG9mQ2xhc3MoTm90QXV0aG9yaXplZEVycm9yLCAoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdC8vIElmIHRoZSBhZG1pbiBpcyByZW1vdmVkIGZyb20gdGhlIGZyZWUgZ3JvdXAsIGhlIGRvZXMgbm90IGhhdmUgdGhlIHBlcm1pc3Npb24gdG8gYWNjZXNzIHRoZSBncm91cGluZm8gb2YgdGhhdCBncm91cCBhbnltb3JlXG5cdFx0XHRcdFx0XHR9KSxcblx0XHRcdFx0XHQpLFxuXHRcdFx0KVxuXHRcdH1cblxuXHRcdFByb21pc2UuYWxsKGdyb3VwSW5mb0xvYWRpbmdQcm9taXNlcykudGhlbigoKSA9PiB7XG5cdFx0XHRjb25zdCBncm91cEluZm9WYWx1ZSA9IGdyb3VwSW5mbygpXG5cdFx0XHRsZXQgZGlhbG9nID0gRGlhbG9nLnNob3dBY3Rpb25EaWFsb2coe1xuXHRcdFx0XHR0aXRsZTogXCJhdWRpdExvZ190aXRsZVwiLFxuXHRcdFx0XHRjaGlsZDoge1xuXHRcdFx0XHRcdHZpZXc6ICgpID0+XG5cdFx0XHRcdFx0XHRtKFwidGFibGUucHRcIiwgW1xuXHRcdFx0XHRcdFx0XHRtKFwidHJcIiwgW20oXCJ0ZFwiLCBsYW5nLmdldChcImFjdGlvbl9sYWJlbFwiKSksIG0oXCJ0ZC5wbFwiLCBlbnRyeS5hY3Rpb24pXSksXG5cdFx0XHRcdFx0XHRcdG0oXCJ0clwiLCBbbShcInRkXCIsIGxhbmcuZ2V0KFwiYWN0b3JfbGFiZWxcIikpLCBtKFwidGQucGxcIiwgZW50cnkuYWN0b3JNYWlsQWRkcmVzcyldKSxcblx0XHRcdFx0XHRcdFx0bShcInRyXCIsIFttKFwidGRcIiwgbGFuZy5nZXQoXCJJcEFkZHJlc3NfbGFiZWxcIikpLCBtKFwidGQucGxcIiwgZW50cnkuYWN0b3JJcEFkZHJlc3MgPyBlbnRyeS5hY3RvcklwQWRkcmVzcyA6IFwiXCIpXSksXG5cdFx0XHRcdFx0XHRcdG0oXCJ0clwiLCBbXG5cdFx0XHRcdFx0XHRcdFx0bShcInRkXCIsIGxhbmcuZ2V0KFwibW9kaWZpZWRfbGFiZWxcIikpLFxuXHRcdFx0XHRcdFx0XHRcdG0oXG5cdFx0XHRcdFx0XHRcdFx0XHRcInRkLnBsXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRtb2RpZmllZEdyb3VwSW5mbygpICYmIHRoaXMuZ2V0R3JvdXBJbmZvRGlzcGxheVRleHQobW9kaWZpZWRHcm91cEluZm8oKSlcblx0XHRcdFx0XHRcdFx0XHRcdFx0PyB0aGlzLmdldEdyb3VwSW5mb0Rpc3BsYXlUZXh0KG1vZGlmaWVkR3JvdXBJbmZvKCkpXG5cdFx0XHRcdFx0XHRcdFx0XHRcdDogZW50cnkubW9kaWZpZWRFbnRpdHksXG5cdFx0XHRcdFx0XHRcdFx0KSxcblx0XHRcdFx0XHRcdFx0XSksXG5cdFx0XHRcdFx0XHRcdGdyb3VwSW5mb1ZhbHVlXG5cdFx0XHRcdFx0XHRcdFx0PyBtKFwidHJcIiwgW1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRtKFwidGRcIiwgbGFuZy5nZXQoXCJncm91cF9sYWJlbFwiKSksXG5cdFx0XHRcdFx0XHRcdFx0XHRcdG0oXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XCJ0ZC5wbFwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGN1c3RvbWVyLmFkbWluR3JvdXAgPT09IGdyb3VwSW5mb1ZhbHVlLmdyb3VwXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQ/IGxhbmcuZ2V0KFwiZ2xvYmFsQWRtaW5fbGFiZWxcIilcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdDogdGhpcy5nZXRHcm91cEluZm9EaXNwbGF5VGV4dChncm91cEluZm9WYWx1ZSksXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCksXG5cdFx0XHRcdFx0XHRcdFx0ICBdKVxuXHRcdFx0XHRcdFx0XHRcdDogbnVsbCxcblx0XHRcdFx0XHRcdFx0bShcInRyXCIsIFttKFwidGRcIiwgbGFuZy5nZXQoXCJ0aW1lX2xhYmVsXCIpKSwgbShcInRkLnBsXCIsIGZvcm1hdERhdGVUaW1lKGVudHJ5LmRhdGUpKV0pLFxuXHRcdFx0XHRcdFx0XSksXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGFsbG93T2tXaXRoUmV0dXJuOiB0cnVlLFxuXHRcdFx0XHRva0FjdGlvbjogKCkgPT4gZGlhbG9nLmNsb3NlKCksXG5cdFx0XHRcdGFsbG93Q2FuY2VsOiBmYWxzZSxcblx0XHRcdH0pXG5cdFx0fSlcblx0fVxuXG5cdHByaXZhdGUgZ2V0R3JvdXBJbmZvRGlzcGxheVRleHQoZ3JvdXBJbmZvOiBHcm91cEluZm8pOiBzdHJpbmcge1xuXHRcdGlmIChncm91cEluZm8ubmFtZSAmJiBncm91cEluZm8ubWFpbEFkZHJlc3MpIHtcblx0XHRcdHJldHVybiBncm91cEluZm8ubmFtZSArIFwiIDxcIiArIGdyb3VwSW5mby5tYWlsQWRkcmVzcyArIFwiPlwiXG5cdFx0fSBlbHNlIGlmIChncm91cEluZm8ubWFpbEFkZHJlc3MpIHtcblx0XHRcdHJldHVybiBncm91cEluZm8ubWFpbEFkZHJlc3Ncblx0XHR9IGVsc2Uge1xuXHRcdFx0cmV0dXJuIGdyb3VwSW5mby5uYW1lXG5cdFx0fVxuXHR9XG5cblx0aGFuZGxlRXZlbnRVcGRhdGVzKHVwZGF0ZXM6IFJlYWRvbmx5QXJyYXk8RW50aXR5VXBkYXRlRGF0YT4pOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRyZXR1cm4gcHJvbWlzZU1hcCh1cGRhdGVzLCAodXBkYXRlKSA9PiB7XG5cdFx0XHRpZiAoaXNVcGRhdGVGb3JUeXBlUmVmKEF1ZGl0TG9nRW50cnlUeXBlUmVmLCB1cGRhdGUpKSB7XG5cdFx0XHRcdHJldHVybiB0aGlzLnVwZGF0ZUF1ZGl0TG9nKClcblx0XHRcdH0gZWxzZSBpZiAoaXNVcGRhdGVGb3JUeXBlUmVmKEN1c3RvbWVyUHJvcGVydGllc1R5cGVSZWYsIHVwZGF0ZSkpIHtcblx0XHRcdFx0dGhpcy5jdXN0b21lclByb3BlcnRpZXMucmVzZXQoKVxuXHRcdFx0XHR0aGlzLmN1c3RvbWVyUHJvcGVydGllcy5nZXRBc3luYygpLnRoZW4obS5yZWRyYXcpXG5cdFx0XHR9XG5cdFx0fSkudGhlbihub09wKVxuXHR9XG59XG4iLCJpbXBvcnQgbSwgeyBDaGlsZHJlbiB9IGZyb20gXCJtaXRocmlsXCJcbmltcG9ydCB7IERBWV9JTl9NSUxMSVMsIExhenlMb2FkZWQsIG5ldmVyTnVsbCwgbm9PcCwgb2ZDbGFzcywgcHJvbWlzZU1hcCB9IGZyb20gXCJAdHV0YW8vdHV0YW5vdGEtdXRpbHNcIlxuaW1wb3J0IHsgSW5mb0xpbmssIGxhbmcgfSBmcm9tIFwiLi4vLi4vY29tbW9uL21pc2MvTGFuZ3VhZ2VWaWV3TW9kZWxcIlxuaW1wb3J0IHsgZ2V0U3BhbVJ1bGVGaWVsZFRvTmFtZSwgZ2V0U3BhbVJ1bGVUeXBlTmFtZU1hcHBpbmcsIHNob3dBZGRTcGFtUnVsZURpYWxvZyB9IGZyb20gXCIuL0FkZFNwYW1SdWxlRGlhbG9nXCJcbmltcG9ydCB7IGdldFNwYW1SdWxlRmllbGQsIEdyb3VwVHlwZSwgT3BlcmF0aW9uVHlwZSwgU3BhbVJ1bGVGaWVsZFR5cGUsIFNwYW1SdWxlVHlwZSB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL2NvbW1vbi9UdXRhbm90YUNvbnN0YW50c1wiXG5pbXBvcnQge1xuXHRjcmVhdGVFbWFpbFNlbmRlckxpc3RFbGVtZW50LFxuXHRDdXN0b21lcixcblx0Q3VzdG9tZXJJbmZvLFxuXHRDdXN0b21lckluZm9UeXBlUmVmLFxuXHRDdXN0b21lclByb3BlcnRpZXNUeXBlUmVmLFxuXHRDdXN0b21lclNlcnZlclByb3BlcnRpZXMsXG5cdEN1c3RvbWVyU2VydmVyUHJvcGVydGllc1R5cGVSZWYsXG5cdEN1c3RvbWVyVHlwZVJlZixcblx0RG9tYWluSW5mbyxcblx0R3JvdXBUeXBlUmVmLFxuXHRSZWplY3RlZFNlbmRlclR5cGVSZWYsXG5cdFVzZXJUeXBlUmVmLFxufSBmcm9tIFwiLi4vLi4vY29tbW9uL2FwaS9lbnRpdGllcy9zeXMvVHlwZVJlZnMuanNcIlxuaW1wb3J0IHN0cmVhbSBmcm9tIFwibWl0aHJpbC9zdHJlYW1cIlxuaW1wb3J0IHsgZm9ybWF0RGF0ZVRpbWUgfSBmcm9tIFwiLi4vLi4vY29tbW9uL21pc2MvRm9ybWF0dGVyXCJcbmltcG9ydCB7IERpYWxvZyB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL2Jhc2UvRGlhbG9nXCJcbmltcG9ydCB7IExvY2tlZEVycm9yLCBQcmVjb25kaXRpb25GYWlsZWRFcnJvciB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL2NvbW1vbi9lcnJvci9SZXN0RXJyb3JcIlxuaW1wb3J0IHsgR3JvdXBEYXRhLCBsb2FkRW5hYmxlZFRlYW1NYWlsR3JvdXBzLCBsb2FkRW5hYmxlZFVzZXJNYWlsR3JvdXBzLCBsb2FkR3JvdXBEaXNwbGF5TmFtZSB9IGZyb20gXCIuL0xvYWRpbmdVdGlsc1wiXG5pbXBvcnQgeyBJY29ucyB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL2Jhc2UvaWNvbnMvSWNvbnNcIlxuaW1wb3J0IHsgc2hvd1Byb2dyZXNzRGlhbG9nIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvZGlhbG9ncy9Qcm9ncmVzc0RpYWxvZ1wiXG5pbXBvcnQgdHlwZSB7IFRhYmxlQXR0cnMsIFRhYmxlTGluZUF0dHJzIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvYmFzZS9UYWJsZS5qc1wiXG5pbXBvcnQgeyBDb2x1bW5XaWR0aCwgY3JlYXRlUm93QWN0aW9ucyB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL2Jhc2UvVGFibGUuanNcIlxuaW1wb3J0IHsgYXR0YWNoRHJvcGRvd24sIGNyZWF0ZURyb3Bkb3duLCBEcm9wZG93bkNoaWxkQXR0cnMgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2d1aS9iYXNlL0Ryb3Bkb3duLmpzXCJcbmltcG9ydCB7IERvbWFpbkRuc1N0YXR1cyB9IGZyb20gXCIuL0RvbWFpbkRuc1N0YXR1c1wiXG5pbXBvcnQgeyBzaG93RG5zQ2hlY2tEaWFsb2cgfSBmcm9tIFwiLi9DaGVja0RvbWFpbkRuc1N0YXR1c0RpYWxvZ1wiXG5pbXBvcnQgeyBCb290SWNvbnMgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2d1aS9iYXNlL2ljb25zL0Jvb3RJY29uc1wiXG5pbXBvcnQge1xuXHRHRU5FUkFURURfTUFYX0lELFxuXHRnZW5lcmF0ZWRJZFRvVGltZXN0YW1wLFxuXHRnZXRFbGVtZW50SWQsXG5cdHNvcnRDb21wYXJlQnlSZXZlcnNlSWQsXG5cdHRpbWVzdGFtcFRvR2VuZXJhdGVkSWQsXG59IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL2NvbW1vbi91dGlscy9FbnRpdHlVdGlsc1wiXG5pbXBvcnQgeyBzaG93UmVqZWN0ZWRTZW5kZXJzSW5mb0RpYWxvZyB9IGZyb20gXCIuL1JlamVjdGVkU2VuZGVyc0luZm9EaWFsb2dcIlxuaW1wb3J0IHsgc2hvd0FkZERvbWFpbldpemFyZCB9IGZyb20gXCIuL2VtYWlsZG9tYWluL0FkZERvbWFpbldpemFyZFwiXG5pbXBvcnQgeyBnZXRVc2VyR3JvdXBNZW1iZXJzaGlwcyB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL2NvbW1vbi91dGlscy9Hcm91cFV0aWxzXCJcbmltcG9ydCB7IHNob3dOb3RBdmFpbGFibGVGb3JGcmVlRGlhbG9nIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9taXNjL1N1YnNjcmlwdGlvbkRpYWxvZ3NcIlxuaW1wb3J0IHsgZ2V0RG9tYWluUGFydCB9IGZyb20gXCIuLi8uLi9jb21tb24vbWlzYy9wYXJzaW5nL01haWxBZGRyZXNzUGFyc2VyXCJcbmltcG9ydCB7IGxvY2F0b3IgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2FwaS9tYWluL0NvbW1vbkxvY2F0b3JcIlxuaW1wb3J0IHsgYXNzZXJ0TWFpbk9yTm9kZSB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL2NvbW1vbi9FbnZcIlxuaW1wb3J0IHsgQnV0dG9uU2l6ZSB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL2Jhc2UvQnV0dG9uU2l6ZS5qc1wiXG5pbXBvcnQgeyBnZXRDdXN0b21NYWlsRG9tYWlucyB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL2NvbW1vbi91dGlscy9DdXN0b21lclV0aWxzLmpzXCJcbmltcG9ydCB7IEVudGl0eVVwZGF0ZURhdGEsIGlzVXBkYXRlRm9yVHlwZVJlZiB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL2NvbW1vbi91dGlscy9FbnRpdHlVcGRhdGVVdGlscy5qc1wiXG5pbXBvcnQgeyBBY2NvdW50TWFpbnRlbmFuY2VTZXR0aW5ncywgQWNjb3VudE1haW50ZW5hbmNlVXBkYXRlTm90aWZpZXIgfSBmcm9tIFwiLi4vLi4vY29tbW9uL3NldHRpbmdzL0FjY291bnRNYWludGVuYW5jZVNldHRpbmdzLmpzXCJcbmltcG9ydCB0eXBlIHsgVXBkYXRhYmxlU2V0dGluZ3NWaWV3ZXIgfSBmcm9tIFwiLi4vLi4vY29tbW9uL3NldHRpbmdzL0ludGVyZmFjZXMuanNcIlxuaW1wb3J0IHsgRXhwYW5kYWJsZVRhYmxlIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9zZXR0aW5ncy9FeHBhbmRhYmxlVGFibGUuanNcIlxuXG5hc3NlcnRNYWluT3JOb2RlKClcbi8vIE51bWJlciBvZiBkYXlzIGZvciB0aGF0IHdlIGxvYWQgcmVqZWN0ZWQgc2VuZGVyc1xuY29uc3QgUkVKRUNURURfU0VOREVSU19UT19MT0FEX01TID0gNSAqIERBWV9JTl9NSUxMSVNcbi8vIE1heCBudW1iZXIgb2YgcmVqZWN0ZWQgc2VuZGVyIGVudHJpZXMgdGhhdCB3ZSBkaXNwbGF5IGluIHRoZSB1aVxuY29uc3QgUkVKRUNURURfU0VOREVSU19NQVhfTlVNQkVSID0gMTAwXG5cbmV4cG9ydCBjbGFzcyBHbG9iYWxTZXR0aW5nc1ZpZXdlciBpbXBsZW1lbnRzIFVwZGF0YWJsZVNldHRpbmdzVmlld2VyIHtcblx0cHJpdmF0ZSByZWFkb25seSBwcm9wcyA9IHN0cmVhbTxSZWFkb25seTxDdXN0b21lclNlcnZlclByb3BlcnRpZXM+PigpXG5cdHByaXZhdGUgY3VzdG9tZXI6IEN1c3RvbWVyIHwgbnVsbCA9IG51bGxcblx0cHJpdmF0ZSByZWFkb25seSBjdXN0b21lckluZm8gPSBuZXcgTGF6eUxvYWRlZDxDdXN0b21lckluZm8+KCgpID0+IGxvY2F0b3IubG9naW5zLmdldFVzZXJDb250cm9sbGVyKCkubG9hZEN1c3RvbWVySW5mbygpKVxuXG5cdHByaXZhdGUgYWNjb3VudE1haW50ZW5hbmNlVXBkYXRlTm90aWZpZXI6IEFjY291bnRNYWludGVuYW5jZVVwZGF0ZU5vdGlmaWVyIHwgbnVsbCA9IG51bGxcblxuXHRwcml2YXRlIHNwYW1SdWxlTGluZXM6IFJlYWRvbmx5QXJyYXk8VGFibGVMaW5lQXR0cnM+ID0gW11cblx0cHJpdmF0ZSByZWplY3RlZFNlbmRlckxpbmVzOiBSZWFkb25seUFycmF5PFRhYmxlTGluZUF0dHJzPiA9IFtdXG5cdHByaXZhdGUgY3VzdG9tRG9tYWluTGluZXM6IFJlYWRvbmx5QXJyYXk8VGFibGVMaW5lQXR0cnM+ID0gW11cblxuXHQvKipcblx0ICogY2FjaGVzIHRoZSBjdXJyZW50IHN0YXR1cyBmb3IgdGhlIGN1c3RvbSBlbWFpbCBkb21haW5zXG5cdCAqIG1hcCBmcm9tIGRvbWFpbiBuYW1lIHRvIHN0YXR1c1xuXHQgKi9cblx0cHJpdmF0ZSByZWFkb25seSBkb21haW5EbnNTdGF0dXM6IFJlY29yZDxzdHJpbmcsIERvbWFpbkRuc1N0YXR1cz4gPSB7fVxuXHRwcml2YXRlIHJlYWRvbmx5IGN1c3RvbWVyUHJvcGVydGllcyA9IG5ldyBMYXp5TG9hZGVkKCgpID0+XG5cdFx0bG9jYXRvci5lbnRpdHlDbGllbnRcblx0XHRcdC5sb2FkKEN1c3RvbWVyVHlwZVJlZiwgbmV2ZXJOdWxsKGxvY2F0b3IubG9naW5zLmdldFVzZXJDb250cm9sbGVyKCkudXNlci5jdXN0b21lcikpXG5cdFx0XHQudGhlbigoY3VzdG9tZXIpID0+IGxvY2F0b3IuZW50aXR5Q2xpZW50LmxvYWQoQ3VzdG9tZXJQcm9wZXJ0aWVzVHlwZVJlZiwgbmV2ZXJOdWxsKGN1c3RvbWVyLnByb3BlcnRpZXMpKSksXG5cdClcblxuXHRjb25zdHJ1Y3RvcigpIHtcblx0XHR0aGlzLmN1c3RvbWVyUHJvcGVydGllcy5nZXRBc3luYygpLnRoZW4obS5yZWRyYXcpXG5cdFx0dGhpcy51cGRhdGVDdXN0b21lclNlcnZlclByb3BlcnRpZXMoKVxuXHRcdHRoaXMudmlldyA9IHRoaXMudmlldy5iaW5kKHRoaXMpXG5cdFx0dGhpcy51cGRhdGVEb21haW5zKClcblx0fVxuXG5cdHZpZXcoKTogQ2hpbGRyZW4ge1xuXHRcdGNvbnN0IHNwYW1SdWxlVGFibGVBdHRyczogVGFibGVBdHRycyA9IHtcblx0XHRcdGNvbHVtbkhlYWRpbmc6IFtcImVtYWlsU2VuZGVyX2xhYmVsXCIsIFwiZW1haWxTZW5kZXJSdWxlX2xhYmVsXCJdLFxuXHRcdFx0Y29sdW1uV2lkdGhzOiBbQ29sdW1uV2lkdGguTGFyZ2VzdCwgQ29sdW1uV2lkdGguU21hbGxdLFxuXHRcdFx0c2hvd0FjdGlvbkJ1dHRvbkNvbHVtbjogdHJ1ZSxcblx0XHRcdGFkZEJ1dHRvbkF0dHJzOiB7XG5cdFx0XHRcdHRpdGxlOiBcImFkZFNwYW1SdWxlX2FjdGlvblwiLFxuXHRcdFx0XHRjbGljazogKCkgPT4gc2hvd0FkZFNwYW1SdWxlRGlhbG9nKG51bGwpLFxuXHRcdFx0XHRpY29uOiBJY29ucy5BZGQsXG5cdFx0XHRcdHNpemU6IEJ1dHRvblNpemUuQ29tcGFjdCxcblx0XHRcdH0sXG5cdFx0XHRsaW5lczogdGhpcy5zcGFtUnVsZUxpbmVzLFxuXHRcdH1cblx0XHRjb25zdCByZWplY3RlZFNlbmRlclRhYmxlQXR0cnM6IFRhYmxlQXR0cnMgPSB7XG5cdFx0XHRjb2x1bW5IZWFkaW5nOiBbXCJlbWFpbFNlbmRlcl9sYWJlbFwiXSxcblx0XHRcdGNvbHVtbldpZHRoczogW0NvbHVtbldpZHRoLkxhcmdlc3RdLFxuXHRcdFx0c2hvd0FjdGlvbkJ1dHRvbkNvbHVtbjogdHJ1ZSxcblx0XHRcdGFkZEJ1dHRvbkF0dHJzOiB7XG5cdFx0XHRcdHRpdGxlOiBcInJlZnJlc2hfYWN0aW9uXCIsXG5cdFx0XHRcdGNsaWNrOiAoKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy51cGRhdGVSZWplY3RlZFNlbmRlclRhYmxlKClcblx0XHRcdFx0fSxcblx0XHRcdFx0aWNvbjogQm9vdEljb25zLlByb2dyZXNzLFxuXHRcdFx0XHRzaXplOiBCdXR0b25TaXplLkNvbXBhY3QsXG5cdFx0XHR9LFxuXHRcdFx0bGluZXM6IHRoaXMucmVqZWN0ZWRTZW5kZXJMaW5lcyxcblx0XHR9XG5cdFx0Y29uc3QgY3VzdG9tRG9tYWluVGFibGVBdHRyczogVGFibGVBdHRycyA9IHtcblx0XHRcdGNvbHVtbkhlYWRpbmc6IFtcImFkbWluQ3VzdG9tRG9tYWluX2xhYmVsXCIsIFwiY2F0Y2hBbGxNYWlsYm94X2xhYmVsXCJdLFxuXHRcdFx0Y29sdW1uV2lkdGhzOiBbQ29sdW1uV2lkdGguTGFyZ2VzdCwgQ29sdW1uV2lkdGguU21hbGxdLFxuXHRcdFx0c2hvd0FjdGlvbkJ1dHRvbkNvbHVtbjogdHJ1ZSxcblx0XHRcdGFkZEJ1dHRvbkF0dHJzOiB7XG5cdFx0XHRcdHRpdGxlOiBcImFkZEN1c3RvbURvbWFpbl9hY3Rpb25cIixcblx0XHRcdFx0Y2xpY2s6IGFzeW5jICgpID0+IHtcblx0XHRcdFx0XHRjb25zdCBjdXN0b21lckluZm8gPSBhd2FpdCB0aGlzLmN1c3RvbWVySW5mby5nZXRBc3luYygpXG5cdFx0XHRcdFx0aWYgKGxvY2F0b3IubG9naW5zLmdldFVzZXJDb250cm9sbGVyKCkuaXNGcmVlQWNjb3VudCgpKSB7XG5cdFx0XHRcdFx0XHRzaG93Tm90QXZhaWxhYmxlRm9yRnJlZURpYWxvZygpXG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGNvbnN0IG1haWxBZGRyZXNzVGFibGVNb2RlbCA9IGF3YWl0IGxvY2F0b3IubWFpbEFkZHJlc3NUYWJsZU1vZGVsRm9yT3duTWFpbGJveCgpXG5cdFx0XHRcdFx0XHRhd2FpdCBzaG93QWRkRG9tYWluV2l6YXJkKFwiXCIsIGN1c3RvbWVySW5mbywgbWFpbEFkZHJlc3NUYWJsZU1vZGVsKVxuXHRcdFx0XHRcdFx0dGhpcy51cGRhdGVEb21haW5zKClcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGljb246IEljb25zLkFkZCxcblx0XHRcdFx0c2l6ZTogQnV0dG9uU2l6ZS5Db21wYWN0LFxuXHRcdFx0fSxcblx0XHRcdGxpbmVzOiB0aGlzLmN1c3RvbURvbWFpbkxpbmVzLFxuXHRcdH1cblxuXHRcdHJldHVybiBbXG5cdFx0XHRtKFwiI2dsb2JhbC1zZXR0aW5ncy5maWxsLWFic29sdXRlLnNjcm9sbC5wbHItbFwiLCBbXG5cdFx0XHRcdG0oRXhwYW5kYWJsZVRhYmxlLCB7XG5cdFx0XHRcdFx0dGl0bGU6IFwiYWRtaW5TcGFtX2FjdGlvblwiLFxuXHRcdFx0XHRcdHRhYmxlOiBzcGFtUnVsZVRhYmxlQXR0cnMsXG5cdFx0XHRcdFx0aW5mb01zZzogXCJhZG1pblNwYW1SdWxlSW5mb19tc2dcIixcblx0XHRcdFx0XHRpbmZvTGlua0lkOiBJbmZvTGluay5TcGFtUnVsZXMsXG5cdFx0XHRcdH0pLFxuXHRcdFx0XHRtKEV4cGFuZGFibGVUYWJsZSwge1xuXHRcdFx0XHRcdHRpdGxlOiBcInJlamVjdGVkRW1haWxzX2xhYmVsXCIsXG5cdFx0XHRcdFx0dGFibGU6IHJlamVjdGVkU2VuZGVyVGFibGVBdHRycyxcblx0XHRcdFx0XHRpbmZvTXNnOiBcInJlamVjdGVkU2VuZGVyTGlzdEluZm9fbXNnXCIsXG5cdFx0XHRcdFx0b25FeHBhbmQ6ICgpID0+IHRoaXMudXBkYXRlUmVqZWN0ZWRTZW5kZXJUYWJsZSgpLFxuXHRcdFx0XHR9KSxcblx0XHRcdFx0bShFeHBhbmRhYmxlVGFibGUsIHtcblx0XHRcdFx0XHR0aXRsZTogXCJjdXN0b21FbWFpbERvbWFpbnNfbGFiZWxcIixcblx0XHRcdFx0XHR0YWJsZTogY3VzdG9tRG9tYWluVGFibGVBdHRycyxcblx0XHRcdFx0XHRpbmZvTXNnOiBcIm1vcmVJbmZvX21zZ1wiLFxuXHRcdFx0XHRcdGluZm9MaW5rSWQ6IEluZm9MaW5rLkRvbWFpbkluZm8sXG5cdFx0XHRcdH0pLFxuXHRcdFx0XHRtKEFjY291bnRNYWludGVuYW5jZVNldHRpbmdzLCB7XG5cdFx0XHRcdFx0Y3VzdG9tZXJTZXJ2ZXJQcm9wZXJ0aWVzOiB0aGlzLnByb3BzLFxuXHRcdFx0XHRcdHNldE9uVXBkYXRlSGFuZGxlcjogKGZuOiBBY2NvdW50TWFpbnRlbmFuY2VVcGRhdGVOb3RpZmllcikgPT4ge1xuXHRcdFx0XHRcdFx0dGhpcy5hY2NvdW50TWFpbnRlbmFuY2VVcGRhdGVOb3RpZmllciA9IGZuXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0fSksXG5cdFx0XHRdKSxcblx0XHRdXG5cdH1cblxuXHRwcml2YXRlIHVwZGF0ZUN1c3RvbWVyU2VydmVyUHJvcGVydGllcygpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRyZXR1cm4gbG9jYXRvci5jdXN0b21lckZhY2FkZS5sb2FkQ3VzdG9tZXJTZXJ2ZXJQcm9wZXJ0aWVzKCkudGhlbigocHJvcHMpID0+IHtcblx0XHRcdHRoaXMucHJvcHMocHJvcHMpXG5cblx0XHRcdGNvbnN0IGZpZWxkVG9OYW1lID0gZ2V0U3BhbVJ1bGVGaWVsZFRvTmFtZSgpXG5cblx0XHRcdHRoaXMuc3BhbVJ1bGVMaW5lcyA9IHByb3BzLmVtYWlsU2VuZGVyTGlzdC5tYXAoKHJ1bGUsIGluZGV4KSA9PiB7XG5cdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0Y2VsbHM6ICgpID0+IFtcblx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0bWFpbjogZmllbGRUb05hbWVbZ2V0U3BhbVJ1bGVGaWVsZChydWxlKV0sXG5cdFx0XHRcdFx0XHRcdGluZm86IFtydWxlLnZhbHVlXSxcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdG1haW46IG5ldmVyTnVsbChnZXRTcGFtUnVsZVR5cGVOYW1lTWFwcGluZygpLmZpbmQoKHQpID0+IHQudmFsdWUgPT09IHJ1bGUudHlwZSkpLm5hbWUsXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdF0sXG5cdFx0XHRcdFx0YWN0aW9uQnV0dG9uQXR0cnM6IGNyZWF0ZVJvd0FjdGlvbnMoXG5cdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdGdldEFycmF5OiAoKSA9PiBwcm9wcy5lbWFpbFNlbmRlckxpc3QsXG5cdFx0XHRcdFx0XHRcdHVwZGF0ZUluc3RhbmNlOiAoKSA9PiBsb2NhdG9yLmVudGl0eUNsaWVudC51cGRhdGUocHJvcHMpLmNhdGNoKG9mQ2xhc3MoTG9ja2VkRXJyb3IsIG5vT3ApKSxcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRydWxlLFxuXHRcdFx0XHRcdFx0aW5kZXgsXG5cdFx0XHRcdFx0XHRbXG5cdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHRsYWJlbDogXCJlZGl0X2FjdGlvblwiLFxuXHRcdFx0XHRcdFx0XHRcdGNsaWNrOiAoKSA9PiBzaG93QWRkU3BhbVJ1bGVEaWFsb2cocnVsZSksXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRdLFxuXHRcdFx0XHRcdCksXG5cdFx0XHRcdH1cblx0XHRcdH0pXG5cblx0XHRcdG0ucmVkcmF3KClcblx0XHR9KVxuXHR9XG5cblx0cHJpdmF0ZSB1cGRhdGVSZWplY3RlZFNlbmRlclRhYmxlKCk6IHZvaWQge1xuXHRcdGNvbnN0IGN1c3RvbWVyID0gdGhpcy5jdXN0b21lclxuXG5cdFx0aWYgKGN1c3RvbWVyICYmIGN1c3RvbWVyLnJlamVjdGVkU2VuZGVycykge1xuXHRcdFx0Ly8gUmVqZWN0ZWQgc2VuZGVycyBhcmUgd3JpdHRlbiB3aXRoIFRUTCBmb3Igc2V2ZW4gZGF5cy5cblx0XHRcdC8vIFdlIGhhdmUgdG8gYXZvaWQgdGhhdCB3ZSBsb2FkIHRvbyBtYW55IChhbHJlYWR5IGRlbGV0ZWQpIHJlamVjdGVkIHNlbmRlcnMgZm9ybSB0aGUgcGFzdC5cblx0XHRcdC8vIEZpcnN0IHdlIGxvYWQgUkVKRUNURURfU0VOREVSU19NQVhfTlVNQkVSIGl0ZW1zIHN0YXJ0aW5nIGZyb20gdGhlIHBhc3QgdGltZXN0YW1wIGludG8gdGhlIGZ1dHVyZS4gSWYgdGhlcmUgYXJlXG5cdFx0XHQvLyBtb3JlIGVudHJpZXMgYXZhaWxhYmxlIHdlIGNhbiBzYWZlbHkgbG9hZCBSRUpFQ1RFRF9TRU5ERVJTX01BWF9OVU1CRVIgZnJvbSBHRU5FUkFURURfTUFYX0lEIGluIHJldmVyc2Ugb3JkZXIuXG5cdFx0XHQvLyBPdGhlcndpc2Ugd2Ugd2lsbCBqdXN0IHVzZSB3aGF0IGhhcyBiZWVuIHJldHVybmVkIGluIHRoZSBmaXJzdCByZXF1ZXN0LlxuXHRcdFx0Y29uc3Qgc2VuZGVyTGlzdElkID0gY3VzdG9tZXIucmVqZWN0ZWRTZW5kZXJzLml0ZW1zXG5cdFx0XHRjb25zdCBzdGFydElkID0gdGltZXN0YW1wVG9HZW5lcmF0ZWRJZChEYXRlLm5vdygpIC0gUkVKRUNURURfU0VOREVSU19UT19MT0FEX01TKVxuXHRcdFx0Y29uc3QgbG9hZGluZ1Byb21pc2UgPSBsb2NhdG9yLmVudGl0eUNsaWVudFxuXHRcdFx0XHQubG9hZFJhbmdlKFJlamVjdGVkU2VuZGVyVHlwZVJlZiwgc2VuZGVyTGlzdElkLCBzdGFydElkLCBSRUpFQ1RFRF9TRU5ERVJTX01BWF9OVU1CRVIsIGZhbHNlKVxuXHRcdFx0XHQudGhlbigocmVqZWN0ZWRTZW5kZXJzKSA9PiB7XG5cdFx0XHRcdFx0aWYgKFJFSkVDVEVEX1NFTkRFUlNfTUFYX05VTUJFUiA9PT0gcmVqZWN0ZWRTZW5kZXJzLmxlbmd0aCkge1xuXHRcdFx0XHRcdFx0Ly8gVGhlcmUgYXJlIG1vcmUgZW50cmllcyBhdmFpbGFibGUsIHdlIG5lZWQgdG8gbG9hZCBmcm9tIEdFTkVSQVRFRF9NQVhfSUQuXG5cdFx0XHRcdFx0XHQvLyB3ZSBkb24ndCBuZWVkIHRvIHNvcnQgaGVyZSBiZWNhdXNlIHdlIGxvYWQgaW4gcmV2ZXJzZSBkaXJlY3Rpb25cblx0XHRcdFx0XHRcdHJldHVybiBsb2NhdG9yLmVudGl0eUNsaWVudC5sb2FkUmFuZ2UoUmVqZWN0ZWRTZW5kZXJUeXBlUmVmLCBzZW5kZXJMaXN0SWQsIEdFTkVSQVRFRF9NQVhfSUQsIFJFSkVDVEVEX1NFTkRFUlNfTUFYX05VTUJFUiwgdHJ1ZSlcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0Ly8gZW5zdXJlIHRoYXQgcmVqZWN0ZWQgc2VuZGVycyBhcmUgc29ydGVkIGluIGRlc2NlbmRpbmcgb3JkZXJcblx0XHRcdFx0XHRcdHJldHVybiByZWplY3RlZFNlbmRlcnMuc29ydChzb3J0Q29tcGFyZUJ5UmV2ZXJzZUlkKVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSlcblx0XHRcdFx0LnRoZW4oKHJlamVjdGVkU2VuZGVycykgPT4ge1xuXHRcdFx0XHRcdHRoaXMucmVqZWN0ZWRTZW5kZXJMaW5lcyA9IHJlamVjdGVkU2VuZGVycy5tYXAoKHJlamVjdGVkU2VuZGVyKSA9PiB7XG5cdFx0XHRcdFx0XHRjb25zdCByZWplY3REYXRlID0gZm9ybWF0RGF0ZVRpbWUobmV3IERhdGUoZ2VuZXJhdGVkSWRUb1RpbWVzdGFtcChnZXRFbGVtZW50SWQocmVqZWN0ZWRTZW5kZXIpKSkpXG5cdFx0XHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdFx0XHRjZWxsczogKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdHJldHVybiBbXG5cdFx0XHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdG1haW46IHJlamVjdGVkU2VuZGVyLnNlbmRlck1haWxBZGRyZXNzLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRpbmZvOiBbYCR7cmVqZWN0RGF0ZX0sICR7cmVqZWN0ZWRTZW5kZXIuc2VuZGVySG9zdG5hbWV9ICgke3JlamVjdGVkU2VuZGVyLnNlbmRlcklwfSlgXSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y2xpY2s6ICgpID0+IHNob3dSZWplY3RlZFNlbmRlcnNJbmZvRGlhbG9nKHJlamVjdGVkU2VuZGVyKSxcblx0XHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0XVxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRhY3Rpb25CdXR0b25BdHRyczogYXR0YWNoRHJvcGRvd24oe1xuXHRcdFx0XHRcdFx0XHRcdG1haW5CdXR0b25BdHRyczoge1xuXHRcdFx0XHRcdFx0XHRcdFx0dGl0bGU6IFwic2hvd01vcmVfYWN0aW9uXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRpY29uOiBJY29ucy5Nb3JlLFxuXHRcdFx0XHRcdFx0XHRcdFx0c2l6ZTogQnV0dG9uU2l6ZS5Db21wYWN0LFxuXHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0Y2hpbGRBdHRyczogKCkgPT4gW1xuXHRcdFx0XHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRsYWJlbDogXCJzaG93UmVqZWN0UmVhc29uX2FjdGlvblwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRjbGljazogKCkgPT4gc2hvd1JlamVjdGVkU2VuZGVyc0luZm9EaWFsb2cocmVqZWN0ZWRTZW5kZXIpLFxuXHRcdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0bGFiZWw6IFwiYWRkU3BhbVJ1bGVfYWN0aW9uXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNsaWNrOiAoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y29uc3QgZG9tYWluUGFydCA9IGdldERvbWFpblBhcnQocmVqZWN0ZWRTZW5kZXIuc2VuZGVyTWFpbEFkZHJlc3MpXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0c2hvd0FkZFNwYW1SdWxlRGlhbG9nKFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y3JlYXRlRW1haWxTZW5kZXJMaXN0RWxlbWVudCh7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHZhbHVlOiBkb21haW5QYXJ0ID8gZG9tYWluUGFydCA6IFwiXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHR5cGU6IFNwYW1SdWxlVHlwZS5XSElURUxJU1QsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGZpZWxkOiBTcGFtUnVsZUZpZWxkVHlwZS5GUk9NLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRoYXNoZWRWYWx1ZTogXCJcIixcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0pLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdClcblx0XHRcdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0XSxcblx0XHRcdFx0XHRcdFx0fSksXG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSlcblx0XHRcdFx0fSlcblx0XHRcdHNob3dQcm9ncmVzc0RpYWxvZyhcImxvYWRpbmdfbXNnXCIsIGxvYWRpbmdQcm9taXNlKS50aGVuKCgpID0+IG0ucmVkcmF3KCkpXG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyB1cGRhdGVEb21haW5zKCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGNvbnN0IGN1c3RvbWVySW5mbyA9IGF3YWl0IHRoaXMuY3VzdG9tZXJJbmZvLmdldEFzeW5jKClcblx0XHRsZXQgY3VzdG9tRG9tYWluSW5mb3MgPSBnZXRDdXN0b21NYWlsRG9tYWlucyhjdXN0b21lckluZm8pXG5cdFx0Ly8gcmVtb3ZlIGRucyBzdGF0dXMgaW5zdGFuY2VzIGZvciBhbGwgcmVtb3ZlZCBkb21haW5zXG5cdFx0Zm9yIChjb25zdCBkb21haW4gb2YgT2JqZWN0LmtleXModGhpcy5kb21haW5EbnNTdGF0dXMpKSB7XG5cdFx0XHRpZiAoIWN1c3RvbURvbWFpbkluZm9zLnNvbWUoKGRpKSA9PiBkaS5kb21haW4gPT09IGRvbWFpbikpIHtcblx0XHRcdFx0ZGVsZXRlIHRoaXMuZG9tYWluRG5zU3RhdHVzW2RvbWFpbl1cblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIHByb21pc2VNYXAoY3VzdG9tRG9tYWluSW5mb3MsIChkb21haW5JbmZvKSA9PiB7XG5cdFx0XHQvLyBjcmVhdGUgZG5zIHN0YXR1cyBpbnN0YW5jZXMgZm9yIGFsbCBuZXcgZG9tYWluc1xuXHRcdFx0aWYgKCF0aGlzLmRvbWFpbkRuc1N0YXR1c1tkb21haW5JbmZvLmRvbWFpbl0pIHtcblx0XHRcdFx0dGhpcy5kb21haW5EbnNTdGF0dXNbZG9tYWluSW5mby5kb21haW5dID0gbmV3IERvbWFpbkRuc1N0YXR1cyhkb21haW5JbmZvLmRvbWFpbilcblxuXHRcdFx0XHR0aGlzLmRvbWFpbkRuc1N0YXR1c1tkb21haW5JbmZvLmRvbWFpbl0ubG9hZEN1cnJlbnRTdGF0dXMoKS50aGVuKCgpID0+IHtcblx0XHRcdFx0XHRtLnJlZHJhdygpXG5cdFx0XHRcdH0pXG5cdFx0XHR9XG5cblx0XHRcdGxldCBkb21haW5EbnNTdGF0dXMgPSB0aGlzLmRvbWFpbkRuc1N0YXR1c1tkb21haW5JbmZvLmRvbWFpbl1cblx0XHRcdGxldCBwID0gUHJvbWlzZS5yZXNvbHZlKGxhbmcuZ2V0KFwiY29tYm9Cb3hTZWxlY3Rpb25Ob25lX21zZ1wiKSlcblxuXHRcdFx0aWYgKGRvbWFpbkluZm8uY2F0Y2hBbGxNYWlsR3JvdXApIHtcblx0XHRcdFx0cCA9IGxvYWRHcm91cERpc3BsYXlOYW1lKGRvbWFpbkluZm8uY2F0Y2hBbGxNYWlsR3JvdXApXG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBwLnRoZW4oKGNhdGNoQWxsR3JvdXBOYW1lKSA9PiB7XG5cdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0Y2VsbHM6ICgpID0+IFtcblx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0bWFpbjogZG9tYWluSW5mby5kb21haW4sXG5cdFx0XHRcdFx0XHRcdGluZm86IFtkb21haW5EbnNTdGF0dXMuZ2V0RG5zU3RhdHVzSW5mbygpXSxcblx0XHRcdFx0XHRcdFx0Y2xpY2s6XG5cdFx0XHRcdFx0XHRcdFx0ZG9tYWluRG5zU3RhdHVzLnN0YXR1cy5pc0xvYWRlZCgpICYmICFkb21haW5EbnNTdGF0dXMuYXJlQWxsUmVjb3Jkc0ZpbmUoKVxuXHRcdFx0XHRcdFx0XHRcdFx0PyAoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0c2hvd0Ruc0NoZWNrRGlhbG9nKGRvbWFpbkRuc1N0YXR1cylcblx0XHRcdFx0XHRcdFx0XHRcdCAgfVxuXHRcdFx0XHRcdFx0XHRcdFx0OiBub09wLFxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0bWFpbjogY2F0Y2hBbGxHcm91cE5hbWUsXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdF0sXG5cdFx0XHRcdFx0YWN0aW9uQnV0dG9uQXR0cnM6IHtcblx0XHRcdFx0XHRcdHRpdGxlOiBcImFjdGlvbl9sYWJlbFwiIGFzIGNvbnN0LFxuXHRcdFx0XHRcdFx0aWNvbjogSWNvbnMuTW9yZSxcblx0XHRcdFx0XHRcdHNpemU6IEJ1dHRvblNpemUuQ29tcGFjdCxcblx0XHRcdFx0XHRcdGNsaWNrOiBjcmVhdGVEcm9wZG93bih7XG5cdFx0XHRcdFx0XHRcdGxhenlCdXR0b25zOiAoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgYnV0dG9uczogRHJvcGRvd25DaGlsZEF0dHJzW10gPSBbXG5cdFx0XHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGxhYmVsOiBcInNldENhdGNoQWxsTWFpbGJveF9hY3Rpb25cIixcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y2xpY2s6ICgpID0+IHRoaXMuZWRpdENhdGNoQWxsTWFpbGJveChkb21haW5JbmZvKSxcblx0XHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGxhYmVsOiBcImRlbGV0ZV9hY3Rpb25cIixcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y2xpY2s6ICgpID0+IHRoaXMuZGVsZXRlQ3VzdG9tRG9tYWluKGRvbWFpbkluZm8pLFxuXHRcdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XHRdXG5cblx0XHRcdFx0XHRcdFx0XHRpZiAoZG9tYWluRG5zU3RhdHVzLnN0YXR1cy5pc0xvYWRlZCgpICYmICFkb21haW5EbnNTdGF0dXMuYXJlQWxsUmVjb3Jkc0ZpbmUoKSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0YnV0dG9ucy51bnNoaWZ0KHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0bGFiZWw6IFwicmVzdW1lU2V0dXBfbGFiZWxcIixcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y2xpY2s6ICgpID0+IHRoaXMub25SZXN1bWVTZXR1cChkb21haW5EbnNTdGF0dXMsIGN1c3RvbWVySW5mbyksXG5cdFx0XHRcdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gYnV0dG9uc1xuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHR3aWR0aDogMjYwLFxuXHRcdFx0XHRcdFx0fSksXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0fVxuXHRcdFx0fSlcblx0XHR9KS50aGVuKCh0YWJsZUxpbmVzKSA9PiB7XG5cdFx0XHR0aGlzLmN1c3RvbURvbWFpbkxpbmVzID0gdGFibGVMaW5lc1xuXG5cdFx0XHRtLnJlZHJhdygpXG5cdFx0fSlcblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgb25SZXN1bWVTZXR1cChkb21haW5EbnNTdGF0dXM6IERvbWFpbkRuc1N0YXR1cywgY3VzdG9tZXJJbmZvOiBhbnkpIHtcblx0XHQvLyBBc3N1bWluZyB1c2VyIG1haWxib3ggZm9yIG5vd1xuXHRcdGNvbnN0IG1haWxBZGRyZXNzVGFibGVNb2RlbCA9IGF3YWl0IGxvY2F0b3IubWFpbEFkZHJlc3NUYWJsZU1vZGVsRm9yT3duTWFpbGJveCgpXG5cdFx0c2hvd0FkZERvbWFpbldpemFyZChkb21haW5EbnNTdGF0dXMuZG9tYWluLCBjdXN0b21lckluZm8sIG1haWxBZGRyZXNzVGFibGVNb2RlbCkudGhlbigoKSA9PiB7XG5cdFx0XHRkb21haW5EbnNTdGF0dXMubG9hZEN1cnJlbnRTdGF0dXMoKS50aGVuKCgpID0+IG0ucmVkcmF3KCkpXG5cdFx0fSlcblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgZWRpdENhdGNoQWxsTWFpbGJveChkb21haW5JbmZvOiBEb21haW5JbmZvKSB7XG5cdFx0Y29uc3QgZ3JvdXBEYXRhcyA9IGF3YWl0IHNob3dQcm9ncmVzc0RpYWxvZyhcInBsZWFzZVdhaXRfbXNnXCIsIHRoaXMubG9hZE1haWxib3hHcm91cERhdGFBbmRDYXRjaEFsbElkKGRvbWFpbkluZm8pKVxuXHRcdGNvbnN0IGluaXRpYWxWYWx1ZSA9IGdyb3VwRGF0YXMuc2VsZWN0ZWQ/Lmdyb3VwSWQgPz8gbnVsbFxuXHRcdGNvbnN0IHNlbGVjdGVkTWFpbEdyb3VwSWQgPSBhd2FpdCBEaWFsb2cuc2hvd0Ryb3BEb3duU2VsZWN0aW9uRGlhbG9nKFxuXHRcdFx0XCJzZXRDYXRjaEFsbE1haWxib3hfYWN0aW9uXCIsXG5cdFx0XHRcImNhdGNoQWxsTWFpbGJveF9sYWJlbFwiLFxuXHRcdFx0bnVsbCxcblx0XHRcdFtcblx0XHRcdFx0e1xuXHRcdFx0XHRcdG5hbWU6IGxhbmcuZ2V0KFwiY29tYm9Cb3hTZWxlY3Rpb25Ob25lX21zZ1wiKSxcblx0XHRcdFx0XHR2YWx1ZTogbnVsbCxcblx0XHRcdFx0fSxcblx0XHRcdFx0Li4uZ3JvdXBEYXRhcy5hdmFpbGFibGUubWFwKChncm91cERhdGEpID0+IHtcblx0XHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdFx0bmFtZTogZ3JvdXBEYXRhLmRpc3BsYXlOYW1lLFxuXHRcdFx0XHRcdFx0dmFsdWU6IGdyb3VwRGF0YS5ncm91cElkLFxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSksXG5cdFx0XHRdLFxuXHRcdFx0aW5pdGlhbFZhbHVlLFxuXHRcdFx0MjUwLFxuXHRcdClcblx0XHRyZXR1cm4gbG9jYXRvci5jdXN0b21lckZhY2FkZS5zZXRDYXRjaEFsbEdyb3VwKGRvbWFpbkluZm8uZG9tYWluLCBzZWxlY3RlZE1haWxHcm91cElkKVxuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyBsb2FkTWFpbGJveEdyb3VwRGF0YUFuZENhdGNoQWxsSWQoZG9tYWluSW5mbzogRG9tYWluSW5mbyk6IFByb21pc2U8e1xuXHRcdGF2YWlsYWJsZTogQXJyYXk8R3JvdXBEYXRhPlxuXHRcdHNlbGVjdGVkOiBHcm91cERhdGEgfCBudWxsXG5cdH0+IHtcblx0XHRjb25zdCBjdXN0b21lciA9IGF3YWl0IGxvY2F0b3IubG9naW5zLmdldFVzZXJDb250cm9sbGVyKCkubG9hZEN1c3RvbWVyKClcblx0XHRjb25zdCB0ZWFtTWFpbEdyb3VwcyA9IGF3YWl0IGxvYWRFbmFibGVkVGVhbU1haWxHcm91cHMoY3VzdG9tZXIpXG5cdFx0Y29uc3QgdXNlck1haWxHcm91cHMgPSBhd2FpdCBsb2FkRW5hYmxlZFVzZXJNYWlsR3JvdXBzKGN1c3RvbWVyKVxuXHRcdGNvbnN0IGFsbE1haWxHcm91cHMgPSB0ZWFtTWFpbEdyb3Vwcy5jb25jYXQodXNlck1haWxHcm91cHMpXG5cdFx0bGV0IGNhdGNoQWxsTWFpbEdyb3VwSWQ6IElkIHwgbnVsbCA9IG51bGxcblx0XHRpZiAoZG9tYWluSW5mby5jYXRjaEFsbE1haWxHcm91cCkge1xuXHRcdFx0Y29uc3QgY2F0Y2hBbGxHcm91cCA9IGF3YWl0IGxvY2F0b3IuZW50aXR5Q2xpZW50LmxvYWQoR3JvdXBUeXBlUmVmLCBkb21haW5JbmZvLmNhdGNoQWxsTWFpbEdyb3VwKVxuXHRcdFx0aWYgKGNhdGNoQWxsR3JvdXAudHlwZSA9PT0gR3JvdXBUeXBlLlVzZXIpIHtcblx0XHRcdFx0Ly8gdGhlIGNhdGNoIGFsbCBncm91cCBtYXkgYmUgYSB1c2VyIGdyb3VwLCBzbyBsb2FkIHRoZSBtYWlsIGdyb3VwIGluIHRoYXQgY2FzZVxuXHRcdFx0XHRjb25zdCB1c2VyID0gYXdhaXQgbG9jYXRvci5lbnRpdHlDbGllbnQubG9hZChVc2VyVHlwZVJlZiwgbmV2ZXJOdWxsKGNhdGNoQWxsR3JvdXAudXNlcikpXG5cdFx0XHRcdGNhdGNoQWxsTWFpbEdyb3VwSWQgPSBnZXRVc2VyR3JvdXBNZW1iZXJzaGlwcyh1c2VyLCBHcm91cFR5cGUuTWFpbClbMF0uZ3JvdXAgLy8gdGhlIGZpcnN0IGlzIHRoZSB1c2VycyBwZXJzb25hbCBtYWlsIGdyb3VwXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjYXRjaEFsbE1haWxHcm91cElkID0gZG9tYWluSW5mby5jYXRjaEFsbE1haWxHcm91cFxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiB7XG5cdFx0XHRhdmFpbGFibGU6IGFsbE1haWxHcm91cHMsXG5cdFx0XHRzZWxlY3RlZDogYWxsTWFpbEdyb3Vwcy5maW5kKChnKSA9PiBnLmdyb3VwSWQgPT09IGNhdGNoQWxsTWFpbEdyb3VwSWQpID8/IG51bGwsXG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBkZWxldGVDdXN0b21Eb21haW4oZG9tYWluSW5mbzogRG9tYWluSW5mbykge1xuXHRcdERpYWxvZy5jb25maXJtKFxuXHRcdFx0bGFuZy5nZXRUcmFuc2xhdGlvbihcImNvbmZpcm1DdXN0b21Eb21haW5EZWxldGlvbl9tc2dcIiwge1xuXHRcdFx0XHRcIntkb21haW59XCI6IGRvbWFpbkluZm8uZG9tYWluLFxuXHRcdFx0fSksXG5cdFx0KS50aGVuKChjb25maXJtZWQpID0+IHtcblx0XHRcdGlmIChjb25maXJtZWQpIHtcblx0XHRcdFx0bG9jYXRvci5jdXN0b21lckZhY2FkZVxuXHRcdFx0XHRcdC5yZW1vdmVEb21haW4oZG9tYWluSW5mby5kb21haW4pXG5cdFx0XHRcdFx0LmNhdGNoKFxuXHRcdFx0XHRcdFx0b2ZDbGFzcyhQcmVjb25kaXRpb25GYWlsZWRFcnJvciwgKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRsZXQgcmVnaXN0cmF0aW9uRG9tYWlucyA9XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5wcm9wcygpICE9IG51bGwgPyB0aGlzLnByb3BzKCkud2hpdGVsYWJlbFJlZ2lzdHJhdGlvbkRvbWFpbnMubWFwKChkb21haW5XcmFwcGVyKSA9PiBkb21haW5XcmFwcGVyLnZhbHVlKSA6IFtdXG5cblx0XHRcdFx0XHRcdFx0aWYgKHJlZ2lzdHJhdGlvbkRvbWFpbnMuaW5kZXhPZihkb21haW5JbmZvLmRvbWFpbikgIT09IC0xKSB7XG5cdFx0XHRcdFx0XHRcdFx0RGlhbG9nLm1lc3NhZ2UoXG5cdFx0XHRcdFx0XHRcdFx0XHRsYW5nLmdldFRyYW5zbGF0aW9uKFwiY3VzdG9tRG9tYWluRGVsZXRlUHJlY29uZGl0aW9uV2hpdGVsYWJlbEZhaWxlZF9tc2dcIiwge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcIntkb21haW5OYW1lfVwiOiBkb21haW5JbmZvLmRvbWFpbixcblx0XHRcdFx0XHRcdFx0XHRcdH0pLFxuXHRcdFx0XHRcdFx0XHRcdClcblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHREaWFsb2cubWVzc2FnZShcblx0XHRcdFx0XHRcdFx0XHRcdGxhbmcuZ2V0VHJhbnNsYXRpb24oXCJjdXN0b21Eb21haW5EZWxldGVQcmVjb25kaXRpb25GYWlsZWRfbXNnXCIsIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XCJ7ZG9tYWluTmFtZX1cIjogZG9tYWluSW5mby5kb21haW4sXG5cdFx0XHRcdFx0XHRcdFx0XHR9KSxcblx0XHRcdFx0XHRcdFx0XHQpXG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0pLFxuXHRcdFx0XHRcdClcblx0XHRcdFx0XHQuY2F0Y2gob2ZDbGFzcyhMb2NrZWRFcnJvciwgKCkgPT4gRGlhbG9nLm1lc3NhZ2UoXCJvcGVyYXRpb25TdGlsbEFjdGl2ZV9tc2dcIikpKVxuXHRcdFx0fVxuXHRcdH0pXG5cdH1cblxuXHRlbnRpdHlFdmVudHNSZWNlaXZlZCh1cGRhdGVzOiBSZWFkb25seUFycmF5PEVudGl0eVVwZGF0ZURhdGE+KTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0dGhpcy5hY2NvdW50TWFpbnRlbmFuY2VVcGRhdGVOb3RpZmllcj8uKHVwZGF0ZXMpXG5cblx0XHRyZXR1cm4gcHJvbWlzZU1hcCh1cGRhdGVzLCAodXBkYXRlKSA9PiB7XG5cdFx0XHRpZiAoaXNVcGRhdGVGb3JUeXBlUmVmKEN1c3RvbWVyU2VydmVyUHJvcGVydGllc1R5cGVSZWYsIHVwZGF0ZSkgJiYgdXBkYXRlLm9wZXJhdGlvbiA9PT0gT3BlcmF0aW9uVHlwZS5VUERBVEUpIHtcblx0XHRcdFx0cmV0dXJuIHRoaXMudXBkYXRlQ3VzdG9tZXJTZXJ2ZXJQcm9wZXJ0aWVzKClcblx0XHRcdH0gZWxzZSBpZiAoaXNVcGRhdGVGb3JUeXBlUmVmKEN1c3RvbWVySW5mb1R5cGVSZWYsIHVwZGF0ZSkgJiYgdXBkYXRlLm9wZXJhdGlvbiA9PT0gT3BlcmF0aW9uVHlwZS5VUERBVEUpIHtcblx0XHRcdFx0dGhpcy5jdXN0b21lckluZm8ucmVzZXQoKVxuXG5cdFx0XHRcdHJldHVybiB0aGlzLnVwZGF0ZURvbWFpbnMoKVxuXHRcdFx0fSBlbHNlIGlmIChpc1VwZGF0ZUZvclR5cGVSZWYoQ3VzdG9tZXJQcm9wZXJ0aWVzVHlwZVJlZiwgdXBkYXRlKSkge1xuXHRcdFx0XHR0aGlzLmN1c3RvbWVyUHJvcGVydGllcy5yZXNldCgpXG5cdFx0XHRcdHRoaXMuY3VzdG9tZXJQcm9wZXJ0aWVzLmdldEFzeW5jKCkudGhlbihtLnJlZHJhdylcblx0XHRcdH1cblx0XHR9KS50aGVuKG5vT3ApXG5cdH1cbn1cbiIsImltcG9ydCBtLCB7IENoaWxkLCBDaGlsZHJlbiwgVm5vZGUgfSBmcm9tIFwibWl0aHJpbFwiXG5pbXBvcnQgeyBJY29uIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvYmFzZS9JY29uXCJcbmltcG9ydCB7IGxhbmcgfSBmcm9tIFwiLi4vLi4vY29tbW9uL21pc2MvTGFuZ3VhZ2VWaWV3TW9kZWxcIlxuaW1wb3J0IHsgQm9vdEljb25zIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvYmFzZS9pY29ucy9Cb290SWNvbnNcIlxuaW1wb3J0IHsgZGVsYXkgfSBmcm9tIFwiQHR1dGFvL3R1dGFub3RhLXV0aWxzXCJcbmltcG9ydCBTdHJlYW0gZnJvbSBcIm1pdGhyaWwvc3RyZWFtXCJcblxuZXhwb3J0IHR5cGUgVXBkYXRlSGVscExhYmVsQXR0cnMgPSB7XG5cdHVwZGF0ZUF2YWlsYWJsZTogU3RyZWFtPGJvb2xlYW4+XG5cdG1hbnVhbFVwZGF0ZSgpOiBQcm9taXNlPGJvb2xlYW4+XG59XG5cbmV4cG9ydCBjbGFzcyBEZXNrdG9wVXBkYXRlSGVscExhYmVsIHtcblx0cHJpdmF0ZSBfd2FpdGluZzogYm9vbGVhbiA9IGZhbHNlXG5cdHByaXZhdGUgX2Vycm9yOiBib29sZWFuID0gZmFsc2VcblxuXHRnZXRBY3Rpb25MaW5rKHsgdXBkYXRlQXZhaWxhYmxlLCBtYW51YWxVcGRhdGUgfTogVXBkYXRlSGVscExhYmVsQXR0cnMpOiBDaGlsZCB7XG5cdFx0aWYgKHRoaXMuX3dhaXRpbmcgfHwgdGhpcy5fZXJyb3IpIHJldHVybiBudWxsXG5cblx0XHRjb25zdCBvbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuXHRcdFx0aWYgKHVwZGF0ZUF2YWlsYWJsZSgpKSB7XG5cdFx0XHRcdC8vIGluc3RhbGwgbm93IChyZXN0YXJ0cyB0aGUgYXBwKVxuXHRcdFx0XHRtYW51YWxVcGRhdGUoKVxuXHRcdFx0fSBlbHNlIGlmICghdGhpcy5fd2FpdGluZykge1xuXHRcdFx0XHQvLyBubyB1cGRhdGUgYXZhaWxhYmxlICYgbm90IGN1cnJlbnRseSB3YWl0aW5nIGZvciBjaGVjayByZXN1bHQgLT4gY2hlY2sgZm9yIHVwZGF0ZSBhZ2FpblxuXHRcdFx0XHR0aGlzLl93YWl0aW5nID0gdHJ1ZVxuXHRcdFx0XHRjb25zdCBbaGFzVXBkYXRlXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcblx0XHRcdFx0XHRtYW51YWxVcGRhdGUoKSwgLy8gbWFrZSBzdXJlIHRoZXJlJ3MgYXQgbGVhc3Qgc29tZSBkZWxheVxuXHRcdFx0XHRcdC8vIGluc3RhbnQgcmVzcG9uc2UgdGVuZHMgdG8gbWFrZSB1c2VycyBuZXJ2b3VzXG5cdFx0XHRcdFx0ZGVsYXkoNTAwKSxcblx0XHRcdFx0XSlcblx0XHRcdFx0dGhpcy5fd2FpdGluZyA9IGZhbHNlXG5cdFx0XHRcdHVwZGF0ZUF2YWlsYWJsZShoYXNVcGRhdGUpXG5cdFx0XHRcdG0ucmVkcmF3KClcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gbShcblx0XHRcdFwic3Bhbi50ZXh0LWJyZWFrLnByLXNcIixcblx0XHRcdG0oXG5cdFx0XHRcdFwiYnV0dG9uLnVuZGVybGluZVwiLFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dHlwZTogXCJidXR0b25cIixcblx0XHRcdFx0XHRocmVmOiBcIiNcIixcblx0XHRcdFx0XHR0YWJpbmRleDogXCIwXCIsXG5cdFx0XHRcdFx0cm9sZTogXCJidXR0b25cIixcblx0XHRcdFx0XHRvbmNsaWNrLFxuXHRcdFx0XHR9LFxuXHRcdFx0XHRsYW5nLmdldCh1cGRhdGVBdmFpbGFibGUoKSA/IFwiaW5zdGFsbE5vd19hY3Rpb25cIiA6IFwiY2hlY2tBZ2Fpbl9hY3Rpb25cIiksXG5cdFx0XHQpLFxuXHRcdClcblx0fVxuXG5cdGdldExhYmVsKHVwZGF0ZUF2YWlsYWJsZTogU3RyZWFtPGJvb2xlYW4+KTogQ2hpbGQge1xuXHRcdGxldCByZXQgPSBcIlwiXG5cblx0XHRpZiAodXBkYXRlQXZhaWxhYmxlKCkpIHtcblx0XHRcdHJldCA9IGxhbmcuZ2V0KFwidXBkYXRlRm91bmRfbGFiZWxcIilcblx0XHR9IGVsc2UgaWYgKHRoaXMuX2Vycm9yKSB7XG5cdFx0XHRyZXQgPSBsYW5nLmdldChcInNlcnZpY2VVbmF2YWlsYWJsZV9tc2dcIilcblx0XHR9IGVsc2UgaWYgKHRoaXMuX3dhaXRpbmcpIHtcblx0XHRcdHJldCA9IGxhbmcuZ2V0KFwiY2hlY2tpbmdGb3JVcGRhdGVfYWN0aW9uXCIpXG5cdFx0fSBlbHNlIHtcblx0XHRcdHJldCA9IGxhbmcuZ2V0KFwibm9VcGRhdGVBdmFpbGFibGVfbXNnXCIpXG5cdFx0fVxuXG5cdFx0cmV0dXJuIG0oXCJzcGFuLnByLXNcIiwgcmV0ICsgXCIgXCIpXG5cdH1cblxuXHRnZXRJY29uKCk6IENoaWxkIHtcblx0XHRyZXR1cm4gdGhpcy5fd2FpdGluZyAmJiAhdGhpcy5fZXJyb3Jcblx0XHRcdD8gbShJY29uLCB7XG5cdFx0XHRcdFx0aWNvbjogQm9vdEljb25zLlByb2dyZXNzLFxuXHRcdFx0XHRcdGNsYXNzOiBcImZsZXgtY2VudGVyIGl0ZW1zLWNlbnRlciBpY29uLXByb2dyZXNzLXRpbnkgaWNvbi1wcm9ncmVzc1wiLFxuXHRcdFx0ICB9KVxuXHRcdFx0OiBudWxsXG5cdH1cblxuXHR2aWV3KHZub2RlOiBWbm9kZTxVcGRhdGVIZWxwTGFiZWxBdHRycz4pOiBDaGlsZHJlbiB7XG5cdFx0cmV0dXJuIG0oXCIuZmxleC5pdGVtcy1jZW50ZXJcIiwgW3RoaXMuZ2V0TGFiZWwodm5vZGUuYXR0cnMudXBkYXRlQXZhaWxhYmxlKSwgdGhpcy5nZXRBY3Rpb25MaW5rKHZub2RlLmF0dHJzKSwgdGhpcy5nZXRJY29uKCldKVxuXHR9XG59XG4iLCJpbXBvcnQgbSwgeyBDaGlsZHJlbiB9IGZyb20gXCJtaXRocmlsXCJcbmltcG9ydCB7IEluZm9MaW5rLCBsYW5nIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9taXNjL0xhbmd1YWdlVmlld01vZGVsXCJcbmltcG9ydCBzdHJlYW0gZnJvbSBcIm1pdGhyaWwvc3RyZWFtXCJcbmltcG9ydCBTdHJlYW0gZnJvbSBcIm1pdGhyaWwvc3RyZWFtXCJcbmltcG9ydCB7IHNob3dQcm9ncmVzc0RpYWxvZyB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL2RpYWxvZ3MvUHJvZ3Jlc3NEaWFsb2dcIlxuaW1wb3J0IHsgSWNvbnMgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2d1aS9iYXNlL2ljb25zL0ljb25zXCJcbmltcG9ydCB0eXBlIHsgVGV4dEZpZWxkQXR0cnMgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2d1aS9iYXNlL1RleHRGaWVsZC5qc1wiXG5pbXBvcnQgeyBUZXh0RmllbGQgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2d1aS9iYXNlL1RleHRGaWVsZC5qc1wiXG5pbXBvcnQgeyBhdHRhY2hEcm9wZG93biB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL2Jhc2UvRHJvcGRvd24uanNcIlxuaW1wb3J0IHR5cGUgeyBEcm9wRG93blNlbGVjdG9yQXR0cnMgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2d1aS9iYXNlL0Ryb3BEb3duU2VsZWN0b3IuanNcIlxuaW1wb3J0IHsgRHJvcERvd25TZWxlY3RvciB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL2Jhc2UvRHJvcERvd25TZWxlY3Rvci5qc1wiXG5pbXBvcnQgeyBEaWFsb2cgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2d1aS9iYXNlL0RpYWxvZ1wiXG5pbXBvcnQgdHlwZSB7IFVwZGF0ZUhlbHBMYWJlbEF0dHJzIH0gZnJvbSBcIi4vRGVza3RvcFVwZGF0ZUhlbHBMYWJlbFwiXG5pbXBvcnQgeyBEZXNrdG9wVXBkYXRlSGVscExhYmVsIH0gZnJvbSBcIi4vRGVza3RvcFVwZGF0ZUhlbHBMYWJlbFwiXG5pbXBvcnQgeyBEZXNrdG9wQ29uZmlnS2V5IH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9kZXNrdG9wL2NvbmZpZy9Db25maWdLZXlzXCJcbmltcG9ydCB7IGdldEN1cnJlbnRTcGVsbGNoZWNrTGFuZ3VhZ2VMYWJlbCwgc2hvd1NwZWxsY2hlY2tMYW5ndWFnZURpYWxvZyB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL2RpYWxvZ3MvU3BlbGxjaGVja0xhbmd1YWdlRGlhbG9nXCJcbmltcG9ydCB7IGlmQWxsb3dlZFR1dGFMaW5rcyB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL2Jhc2UvR3VpVXRpbHNcIlxuaW1wb3J0IHsgYXNzZXJ0TWFpbk9yTm9kZSB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL2NvbW1vbi9FbnZcIlxuaW1wb3J0IHsgbG9jYXRvciB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL21haW4vQ29tbW9uTG9jYXRvclwiXG5pbXBvcnQgeyBJY29uQnV0dG9uLCBJY29uQnV0dG9uQXR0cnMgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2d1aS9iYXNlL0ljb25CdXR0b24uanNcIlxuaW1wb3J0IHsgQnV0dG9uU2l6ZSB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL2Jhc2UvQnV0dG9uU2l6ZS5qc1wiXG5pbXBvcnQgeyBNb3JlSW5mb0xpbmsgfSBmcm9tIFwiLi4vLi4vY29tbW9uL21pc2MvbmV3cy9Nb3JlSW5mb0xpbmsuanNcIlxuaW1wb3J0IHsgVXBkYXRhYmxlU2V0dGluZ3NWaWV3ZXIgfSBmcm9tIFwiLi4vLi4vY29tbW9uL3NldHRpbmdzL0ludGVyZmFjZXMuanNcIlxuaW1wb3J0IHsgTWFpbEV4cG9ydE1vZGUgfSBmcm9tIFwiLi4vLi4vY29tbW9uL21haWxGdW5jdGlvbmFsaXR5L1NoYXJlZE1haWxVdGlscy5qc1wiXG5cbmFzc2VydE1haW5Pck5vZGUoKVxuXG5lbnVtIERvd25sb2FkTG9jYXRpb25TdHJhdGVneSB7XG5cdEFMV0FZU19BU0ssXG5cdENIT09TRV9ESVJFQ1RPUlksXG59XG5cbmV4cG9ydCBjbGFzcyBEZXNrdG9wU2V0dGluZ3NWaWV3ZXIgaW1wbGVtZW50cyBVcGRhdGFibGVTZXR0aW5nc1ZpZXdlciB7XG5cdHByaXZhdGUgcmVhZG9ubHkgaXNEZWZhdWx0TWFpbHRvSGFuZGxlcjogU3RyZWFtPGJvb2xlYW4gfCBudWxsPlxuXHRwcml2YXRlIGRlZmF1bHREb3dubG9hZFBhdGghOiBTdHJlYW08c3RyaW5nPlxuXHRwcml2YXRlIHJlYWRvbmx5IHJ1bkFzVHJheUFwcDogU3RyZWFtPGJvb2xlYW4gfCBudWxsPlxuXHRwcml2YXRlIHJlYWRvbmx5IHJ1bk9uU3RhcnR1cDogU3RyZWFtPGJvb2xlYW4gfCBudWxsPlxuXHRwcml2YXRlIHJlYWRvbmx5IHNwZWxsQ2hlY2tMYW5nOiBTdHJlYW08c3RyaW5nPlxuXHRwcml2YXRlIHJlYWRvbmx5IGlzSW50ZWdyYXRlZDogU3RyZWFtPGJvb2xlYW4gfCBudWxsPlxuXHRwcml2YXRlIHJlYWRvbmx5IGlzQXV0b1VwZGF0ZUVuYWJsZWQ6IFN0cmVhbTxib29sZWFuIHwgbnVsbD5cblx0cHJpdmF0ZSBzaG93QXV0b1VwZGF0ZU9wdGlvbjogYm9vbGVhblxuXHRwcml2YXRlIHJlYWRvbmx5IHVwZGF0ZUF2YWlsYWJsZTogU3RyZWFtPGJvb2xlYW4+XG5cdHByaXZhdGUgcmVhZG9ubHkgbWFpbEV4cG9ydE1vZGU6IFN0cmVhbTxNYWlsRXhwb3J0TW9kZT5cblx0cHJpdmF0ZSBpc1BhdGhEaWFsb2dPcGVuOiBib29sZWFuID0gZmFsc2Vcblx0cHJpdmF0ZSBvZmZsaW5lU3RvcmFnZVZhbHVlOiBTdHJlYW08Ym9vbGVhbj5cblxuXHRjb25zdHJ1Y3RvcigpIHtcblx0XHR0aGlzLmlzRGVmYXVsdE1haWx0b0hhbmRsZXIgPSBzdHJlYW08Ym9vbGVhbiB8IG51bGw+KGZhbHNlKVxuXHRcdHRoaXMucnVuQXNUcmF5QXBwID0gc3RyZWFtPGJvb2xlYW4gfCBudWxsPih0cnVlKVxuXHRcdHRoaXMucnVuT25TdGFydHVwID0gc3RyZWFtPGJvb2xlYW4gfCBudWxsPihmYWxzZSlcblx0XHR0aGlzLnNwZWxsQ2hlY2tMYW5nID0gc3RyZWFtKFwiXCIpXG5cdFx0dGhpcy5pc0ludGVncmF0ZWQgPSBzdHJlYW08Ym9vbGVhbiB8IG51bGw+KGZhbHNlKVxuXHRcdHRoaXMuaXNBdXRvVXBkYXRlRW5hYmxlZCA9IHN0cmVhbTxib29sZWFuIHwgbnVsbD4oZmFsc2UpXG5cdFx0dGhpcy5zaG93QXV0b1VwZGF0ZU9wdGlvbiA9IHRydWVcblx0XHR0aGlzLnVwZGF0ZUF2YWlsYWJsZSA9IHN0cmVhbTxib29sZWFuPihmYWxzZSlcblx0XHR0aGlzLm1haWxFeHBvcnRNb2RlID0gc3RyZWFtPE1haWxFeHBvcnRNb2RlPihcIm1zZ1wiKSAvLyBtc2cgaXMganVzdCBhIGR1bW15IHZhbHVlIGhlcmUsIGl0IHdpbGwgYmUgb3ZlcndyaXR0ZW4gaW4gcmVxdWVzdERlc2t0b3BDb25maWdcblx0XHR0aGlzLm9mZmxpbmVTdG9yYWdlVmFsdWUgPSBzdHJlYW08Ym9vbGVhbj4oZmFsc2UpXG5cdH1cblxuXHRvbmluaXQoKSB7XG5cdFx0dGhpcy5yZXF1ZXN0RGVza3RvcENvbmZpZygpXG5cdH1cblxuXHR2aWV3KCk6IENoaWxkcmVuIHtcblx0XHRjb25zdCBzZXREZWZhdWx0TWFpbHRvSGFuZGxlckF0dHJzOiBEcm9wRG93blNlbGVjdG9yQXR0cnM8Ym9vbGVhbj4gPSB7XG5cdFx0XHRsYWJlbDogXCJkZWZhdWx0TWFpbEhhbmRsZXJfbGFiZWxcIixcblx0XHRcdGhlbHBMYWJlbDogKCkgPT4gbGFuZy5nZXQoXCJkZWZhdWx0TWFpbEhhbmRsZXJfbXNnXCIpLFxuXHRcdFx0aXRlbXM6IFtcblx0XHRcdFx0e1xuXHRcdFx0XHRcdG5hbWU6IGxhbmcuZ2V0KFwidW5yZWdpc3RlcmVkX2xhYmVsXCIpLFxuXHRcdFx0XHRcdHZhbHVlOiBmYWxzZSxcblx0XHRcdFx0fSxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdG5hbWU6IGxhbmcuZ2V0KFwicmVnaXN0ZXJlZF9sYWJlbFwiKSxcblx0XHRcdFx0XHR2YWx1ZTogdHJ1ZSxcblx0XHRcdFx0fSxcblx0XHRcdF0sXG5cdFx0XHRzZWxlY3RlZFZhbHVlOiB0aGlzLmlzRGVmYXVsdE1haWx0b0hhbmRsZXIoKSxcblx0XHRcdHNlbGVjdGlvbkNoYW5nZWRIYW5kbGVyOiAodikgPT4ge1xuXHRcdFx0XHRzaG93UHJvZ3Jlc3NEaWFsb2coXCJwbGVhc2VXYWl0X21zZ1wiLCB0aGlzLnVwZGF0ZURlZmF1bHRNYWlsdG9IYW5kbGVyKHYpKS50aGVuKCgpID0+IHtcblx0XHRcdFx0XHR0aGlzLmlzRGVmYXVsdE1haWx0b0hhbmRsZXIodilcblxuXHRcdFx0XHRcdG0ucmVkcmF3KClcblx0XHRcdFx0fSlcblx0XHRcdH0sXG5cdFx0fVxuXHRcdGNvbnN0IHNldFJ1bkluQmFja2dyb3VuZEF0dHJzOiBEcm9wRG93blNlbGVjdG9yQXR0cnM8Ym9vbGVhbj4gPSB7XG5cdFx0XHRsYWJlbDogXCJydW5JbkJhY2tncm91bmRfYWN0aW9uXCIsXG5cdFx0XHRoZWxwTGFiZWw6ICgpID0+IHtcblx0XHRcdFx0cmV0dXJuIGlmQWxsb3dlZFR1dGFMaW5rcyhsb2NhdG9yLmxvZ2lucywgSW5mb0xpbmsuUnVuSW5CYWNrZ3JvdW5kLCAobGluaykgPT4gW1xuXHRcdFx0XHRcdG0oXCJzcGFuXCIsIGxhbmcuZ2V0KFwicnVuSW5CYWNrZ3JvdW5kX21zZ1wiKSArIFwiIFwiKSxcblx0XHRcdFx0XHRtKE1vcmVJbmZvTGluaywgeyBsaW5rOiBsaW5rIH0pLFxuXHRcdFx0XHRdKVxuXHRcdFx0fSxcblx0XHRcdGl0ZW1zOiBbXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRuYW1lOiBsYW5nLmdldChcInllc19sYWJlbFwiKSxcblx0XHRcdFx0XHR2YWx1ZTogdHJ1ZSxcblx0XHRcdFx0fSxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdG5hbWU6IGxhbmcuZ2V0KFwibm9fbGFiZWxcIiksXG5cdFx0XHRcdFx0dmFsdWU6IGZhbHNlLFxuXHRcdFx0XHR9LFxuXHRcdFx0XSxcblx0XHRcdHNlbGVjdGVkVmFsdWU6IHRoaXMucnVuQXNUcmF5QXBwKCksXG5cdFx0XHRzZWxlY3Rpb25DaGFuZ2VkSGFuZGxlcjogKHYpID0+IHtcblx0XHRcdFx0dGhpcy5ydW5Bc1RyYXlBcHAodilcblxuXHRcdFx0XHR0aGlzLnNldEJvb2xlYW5WYWx1ZShEZXNrdG9wQ29uZmlnS2V5LnJ1bkFzVHJheUFwcCwgdilcblx0XHRcdH0sXG5cdFx0fVxuXHRcdGNvbnN0IHNldFJ1bk9uU3RhcnR1cEF0dHJzOiBEcm9wRG93blNlbGVjdG9yQXR0cnM8Ym9vbGVhbj4gPSB7XG5cdFx0XHRsYWJlbDogXCJydW5PblN0YXJ0dXBfYWN0aW9uXCIsXG5cdFx0XHRpdGVtczogW1xuXHRcdFx0XHR7XG5cdFx0XHRcdFx0bmFtZTogbGFuZy5nZXQoXCJ5ZXNfbGFiZWxcIiksXG5cdFx0XHRcdFx0dmFsdWU6IHRydWUsXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRuYW1lOiBsYW5nLmdldChcIm5vX2xhYmVsXCIpLFxuXHRcdFx0XHRcdHZhbHVlOiBmYWxzZSxcblx0XHRcdFx0fSxcblx0XHRcdF0sXG5cdFx0XHRzZWxlY3RlZFZhbHVlOiB0aGlzLnJ1bk9uU3RhcnR1cCgpLFxuXHRcdFx0c2VsZWN0aW9uQ2hhbmdlZEhhbmRsZXI6ICh2KSA9PiB7XG5cdFx0XHRcdC8vIHRoaXMgbWF5IHRha2UgYSB3aGlsZVxuXHRcdFx0XHRzaG93UHJvZ3Jlc3NEaWFsb2coXCJwbGVhc2VXYWl0X21zZ1wiLCB0aGlzLnRvZ2dsZUF1dG9MYXVuY2hJbk5hdGl2ZSh2KSkudGhlbigoKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5ydW5PblN0YXJ0dXAodilcblxuXHRcdFx0XHRcdG0ucmVkcmF3KClcblx0XHRcdFx0fSlcblx0XHRcdH0sXG5cdFx0fVxuXHRcdGNvbnN0IGVkaXRTcGVsbGNoZWNrTGFuZ3VhZ2VCdXR0b25BdHRyczogSWNvbkJ1dHRvbkF0dHJzID0ge1xuXHRcdFx0dGl0bGU6IFwiY2hlY2tTcGVsbGluZ19hY3Rpb25cIixcblx0XHRcdGNsaWNrOiAoKSA9PiBzaG93U3BlbGxjaGVja0xhbmd1YWdlRGlhbG9nKCkudGhlbigobmV3TGFiZWwpID0+IHRoaXMuc3BlbGxDaGVja0xhbmcobmV3TGFiZWwpKSxcblx0XHRcdGljb246IEljb25zLkVkaXQsXG5cdFx0XHRzaXplOiBCdXR0b25TaXplLkNvbXBhY3QsXG5cdFx0fVxuXHRcdGNvbnN0IHNwZWxsY2hlY2tMYW5ndWFnZUF0dHJzOiBUZXh0RmllbGRBdHRycyA9IHtcblx0XHRcdGxhYmVsOiBcImNoZWNrU3BlbGxpbmdfYWN0aW9uXCIsXG5cdFx0XHR2YWx1ZTogdGhpcy5zcGVsbENoZWNrTGFuZygpLFxuXHRcdFx0b25pbnB1dDogdGhpcy5zcGVsbENoZWNrTGFuZyxcblx0XHRcdGlzUmVhZE9ubHk6IHRydWUsXG5cdFx0XHRpbmplY3Rpb25zUmlnaHQ6ICgpID0+IG0oSWNvbkJ1dHRvbiwgZWRpdFNwZWxsY2hlY2tMYW5ndWFnZUJ1dHRvbkF0dHJzKSxcblx0XHRcdGhlbHBMYWJlbDogKCkgPT4gbGFuZy5nZXQoXCJyZXF1aXJlc05ld1dpbmRvd19tc2dcIiksXG5cdFx0fVxuXHRcdGNvbnN0IHNldERlc2t0b3BJbnRlZ3JhdGlvbkF0dHJzOiBEcm9wRG93blNlbGVjdG9yQXR0cnM8Ym9vbGVhbj4gPSB7XG5cdFx0XHRsYWJlbDogXCJkZXNrdG9wSW50ZWdyYXRpb25fbGFiZWxcIixcblx0XHRcdGl0ZW1zOiBbXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRuYW1lOiBsYW5nLmdldChcImFjdGl2YXRlZF9sYWJlbFwiKSxcblx0XHRcdFx0XHR2YWx1ZTogdHJ1ZSxcblx0XHRcdFx0fSxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdG5hbWU6IGxhbmcuZ2V0KFwiZGVhY3RpdmF0ZWRfbGFiZWxcIiksXG5cdFx0XHRcdFx0dmFsdWU6IGZhbHNlLFxuXHRcdFx0XHR9LFxuXHRcdFx0XSxcblx0XHRcdHNlbGVjdGVkVmFsdWU6IHRoaXMuaXNJbnRlZ3JhdGVkKCksXG5cdFx0XHRzZWxlY3Rpb25DaGFuZ2VkSGFuZGxlcjogKHYpID0+IHtcblx0XHRcdFx0c2hvd1Byb2dyZXNzRGlhbG9nKFwicGxlYXNlV2FpdF9tc2dcIiwgdGhpcy51cGRhdGVEZXNrdG9wSW50ZWdyYXRpb24odikpXG5cdFx0XHRcdFx0LnRoZW4oKCkgPT4ge1xuXHRcdFx0XHRcdFx0dGhpcy5pc0ludGVncmF0ZWQodilcblxuXHRcdFx0XHRcdFx0bS5yZWRyYXcoKVxuXHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0LmNhdGNoKChlKSA9PiBEaWFsb2cubWVzc2FnZShcInVua25vd25FcnJvcl9tc2dcIiwgZS5tZXNzYWdlKSlcblx0XHRcdH0sXG5cdFx0fVxuXHRcdGNvbnN0IHNldE1haWxFeHBvcnRNb2RlQXR0cnM6IERyb3BEb3duU2VsZWN0b3JBdHRyczxNYWlsRXhwb3J0TW9kZT4gPSB7XG5cdFx0XHRsYWJlbDogXCJtYWlsRXhwb3J0TW9kZV9sYWJlbFwiLFxuXHRcdFx0aGVscExhYmVsOiAoKSA9PiBsYW5nLmdldChcIm1haWxFeHBvcnRNb2RlSGVscF9tc2dcIiksXG5cdFx0XHRpdGVtczogW1xuXHRcdFx0XHR7XG5cdFx0XHRcdFx0bmFtZTogXCJFTUxcIixcblx0XHRcdFx0XHR2YWx1ZTogXCJlbWxcIixcblx0XHRcdFx0fSxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdG5hbWU6IFwiTVNHIChPdXRsb29rKVwiLFxuXHRcdFx0XHRcdHZhbHVlOiBcIm1zZ1wiLFxuXHRcdFx0XHR9LFxuXHRcdFx0XSxcblx0XHRcdHNlbGVjdGVkVmFsdWU6IHRoaXMubWFpbEV4cG9ydE1vZGUoKSxcblx0XHRcdHNlbGVjdGlvbkNoYW5nZWRIYW5kbGVyOiAodikgPT4ge1xuXHRcdFx0XHR0aGlzLm1haWxFeHBvcnRNb2RlKHYpXG5cblx0XHRcdFx0dGhpcy5zZXRTdHJpbmdWYWx1ZShEZXNrdG9wQ29uZmlnS2V5Lm1haWxFeHBvcnRNb2RlLCB2KVxuXHRcdFx0fSxcblx0XHR9XG5cdFx0Y29uc3QgdXBkYXRlSGVscExhYmVsQXR0cnM6IFVwZGF0ZUhlbHBMYWJlbEF0dHJzID0ge1xuXHRcdFx0dXBkYXRlQXZhaWxhYmxlOiB0aGlzLnVwZGF0ZUF2YWlsYWJsZSxcblx0XHRcdG1hbnVhbFVwZGF0ZTogKCkgPT4gbG9jYXRvci5kZXNrdG9wU2V0dGluZ3NGYWNhZGUubWFudWFsVXBkYXRlKCksXG5cdFx0fVxuXHRcdGNvbnN0IHNldEF1dG9VcGRhdGVBdHRyczogRHJvcERvd25TZWxlY3RvckF0dHJzPGJvb2xlYW4+ID0ge1xuXHRcdFx0bGFiZWw6IFwiYXV0b1VwZGF0ZV9sYWJlbFwiLFxuXHRcdFx0aGVscExhYmVsOiAoKSA9PiBtKERlc2t0b3BVcGRhdGVIZWxwTGFiZWwsIHVwZGF0ZUhlbHBMYWJlbEF0dHJzKSxcblx0XHRcdGl0ZW1zOiBbXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRuYW1lOiBsYW5nLmdldChcImFjdGl2YXRlZF9sYWJlbFwiKSxcblx0XHRcdFx0XHR2YWx1ZTogdHJ1ZSxcblx0XHRcdFx0fSxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdG5hbWU6IGxhbmcuZ2V0KFwiZGVhY3RpdmF0ZWRfbGFiZWxcIiksXG5cdFx0XHRcdFx0dmFsdWU6IGZhbHNlLFxuXHRcdFx0XHR9LFxuXHRcdFx0XSxcblx0XHRcdHNlbGVjdGVkVmFsdWU6IHRoaXMuaXNBdXRvVXBkYXRlRW5hYmxlZCgpLFxuXHRcdFx0c2VsZWN0aW9uQ2hhbmdlZEhhbmRsZXI6ICh2KSA9PiB7XG5cdFx0XHRcdHRoaXMuaXNBdXRvVXBkYXRlRW5hYmxlZCh2KVxuXG5cdFx0XHRcdHRoaXMuc2V0Qm9vbGVhblZhbHVlKERlc2t0b3BDb25maWdLZXkuZW5hYmxlQXV0b1VwZGF0ZSwgdilcblx0XHRcdH0sXG5cdFx0fVxuXHRcdGNvbnN0IGNoYW5nZURlZmF1bHREb3dubG9hZFBhdGhBdHRyczogSWNvbkJ1dHRvbkF0dHJzID0gYXR0YWNoRHJvcGRvd24oe1xuXHRcdFx0bWFpbkJ1dHRvbkF0dHJzOiB7XG5cdFx0XHRcdHRpdGxlOiBcImVkaXRfYWN0aW9uXCIsXG5cdFx0XHRcdGljb246IEljb25zLkVkaXQsXG5cdFx0XHRcdHNpemU6IEJ1dHRvblNpemUuQ29tcGFjdCxcblx0XHRcdH0sXG5cdFx0XHRjaGlsZEF0dHJzOiAoKSA9PiBbXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRsYWJlbDogXCJhbHdheXNBc2tfYWN0aW9uXCIsXG5cdFx0XHRcdFx0Y2xpY2s6ICgpID0+IHRoaXMuc2V0RGVmYXVsdERvd25sb2FkUGF0aChEb3dubG9hZExvY2F0aW9uU3RyYXRlZ3kuQUxXQVlTX0FTSyksXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRsYWJlbDogXCJjaG9vc2VEaXJlY3RvcnlfYWN0aW9uXCIsXG5cdFx0XHRcdFx0Y2xpY2s6ICgpID0+IHRoaXMuc2V0RGVmYXVsdERvd25sb2FkUGF0aChEb3dubG9hZExvY2F0aW9uU3RyYXRlZ3kuQ0hPT1NFX0RJUkVDVE9SWSksXG5cdFx0XHRcdH0sXG5cdFx0XHRdLFxuXHRcdFx0c2hvd0Ryb3Bkb3duOiAoKSA9PiAhdGhpcy5pc1BhdGhEaWFsb2dPcGVuLFxuXHRcdFx0d2lkdGg6IDIwMCxcblx0XHR9KVxuXHRcdGNvbnN0IGRlZmF1bHREb3dubG9hZFBhdGhBdHRyczogVGV4dEZpZWxkQXR0cnMgPSB7XG5cdFx0XHRsYWJlbDogXCJkZWZhdWx0RG93bmxvYWRQYXRoX2xhYmVsXCIsXG5cdFx0XHR2YWx1ZTogdGhpcy5kZWZhdWx0RG93bmxvYWRQYXRoKCksXG5cdFx0XHRvbmlucHV0OiB0aGlzLmRlZmF1bHREb3dubG9hZFBhdGgsXG5cdFx0XHRpbmplY3Rpb25zUmlnaHQ6ICgpID0+IG0oSWNvbkJ1dHRvbiwgY2hhbmdlRGVmYXVsdERvd25sb2FkUGF0aEF0dHJzKSxcblx0XHRcdGlzUmVhZE9ubHk6IHRydWUsXG5cdFx0fVxuXG5cdFx0cmV0dXJuIFtcblx0XHRcdG0oXCIjdXNlci1zZXR0aW5ncy5maWxsLWFic29sdXRlLnNjcm9sbC5wbHItbC5wYi14bFwiLCBbXG5cdFx0XHRcdG0oXCIuaDQubXQtbFwiLCBsYW5nLmdldChcImRlc2t0b3BTZXR0aW5nc19sYWJlbFwiKSksXG5cdFx0XHRcdC8vIHNwZWxsIGNoZWNrIGlzIGRvbmUgdmlhIE9TIG9uIG1hY1xuXHRcdFx0XHRlbnYucGxhdGZvcm1JZCA9PT0gXCJkYXJ3aW5cIiA/IG51bGwgOiBtKFRleHRGaWVsZCwgc3BlbGxjaGVja0xhbmd1YWdlQXR0cnMpLFxuXHRcdFx0XHQvLyBzZXR0aW5nIHByb3RvY29sIGhhbmRsZXIgdmlhIEVsZWN0cm9uIGRvZXMgbm90IHdvcmsgb24gTGludXhcblx0XHRcdFx0ZW52LnBsYXRmb3JtSWQgPT09IFwibGludXhcIiA/IG51bGwgOiBtKERyb3BEb3duU2VsZWN0b3IsIHNldERlZmF1bHRNYWlsdG9IYW5kbGVyQXR0cnMpLFxuXHRcdFx0XHQvLyBtYWMgZG9lc24ndCByZWFsbHkgaGF2ZSBydW4gaW4gYmFja2dyb3VuZCwgeW91IGNhbiBqdXN0IGNsb3NlIGEgd2luZG93XG5cdFx0XHRcdGVudi5wbGF0Zm9ybUlkID09PSBcImRhcndpblwiID8gbnVsbCA6IG0oRHJvcERvd25TZWxlY3Rvciwgc2V0UnVuSW5CYWNrZ3JvdW5kQXR0cnMpLFxuXHRcdFx0XHRtKERyb3BEb3duU2VsZWN0b3IsIHNldFJ1bk9uU3RhcnR1cEF0dHJzKSxcblx0XHRcdFx0bShUZXh0RmllbGQsIGRlZmF1bHREb3dubG9hZFBhdGhBdHRycyksXG5cdFx0XHRcdG0oRHJvcERvd25TZWxlY3Rvciwgc2V0TWFpbEV4cG9ydE1vZGVBdHRycyksXG5cdFx0XHRcdC8vIEFwcEltYWdlIGlzIGtpbmQgb2YgYSBwb3J0YWJsZSBpbnN0YWxsIHNvIHdlIG9wdGlvbmFsbHkgYWRkIGRlc2t0b3AgaWNvbnMgZXRjXG5cdFx0XHRcdGVudi5wbGF0Zm9ybUlkID09PSBcImxpbnV4XCIgPyBtKERyb3BEb3duU2VsZWN0b3IsIHNldERlc2t0b3BJbnRlZ3JhdGlvbkF0dHJzKSA6IG51bGwsXG5cdFx0XHRcdHRoaXMuc2hvd0F1dG9VcGRhdGVPcHRpb24gPyBtKERyb3BEb3duU2VsZWN0b3IsIHNldEF1dG9VcGRhdGVBdHRycykgOiBudWxsLFxuXHRcdFx0XSksXG5cdFx0XVxuXHR9XG5cblx0cHJpdmF0ZSB0b2dnbGVBdXRvTGF1bmNoSW5OYXRpdmUoZW5hYmxlOiBib29sZWFuKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0cmV0dXJuIGVuYWJsZSA/IGxvY2F0b3IuZGVza3RvcFNldHRpbmdzRmFjYWRlLmVuYWJsZUF1dG9MYXVuY2goKSA6IGxvY2F0b3IuZGVza3RvcFNldHRpbmdzRmFjYWRlLmRpc2FibGVBdXRvTGF1bmNoKClcblx0fVxuXG5cdHByaXZhdGUgdXBkYXRlRGVmYXVsdE1haWx0b0hhbmRsZXIoc2hvdWxkQmVEZWZhdWx0TWFpbHRvSGFuZGxlcjogYm9vbGVhbik6IFByb21pc2U8dm9pZD4ge1xuXHRcdHJldHVybiBzaG91bGRCZURlZmF1bHRNYWlsdG9IYW5kbGVyID8gbG9jYXRvci5kZXNrdG9wU2V0dGluZ3NGYWNhZGUucmVnaXN0ZXJNYWlsdG8oKSA6IGxvY2F0b3IuZGVza3RvcFNldHRpbmdzRmFjYWRlLnVucmVnaXN0ZXJNYWlsdG8oKVxuXHR9XG5cblx0cHJpdmF0ZSB1cGRhdGVEZXNrdG9wSW50ZWdyYXRpb24oc2hvdWxkSW50ZWdyYXRlOiBib29sZWFuKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0cmV0dXJuIHNob3VsZEludGVncmF0ZSA/IGxvY2F0b3IuZGVza3RvcFNldHRpbmdzRmFjYWRlLmludGVncmF0ZURlc2t0b3AoKSA6IGxvY2F0b3IuZGVza3RvcFNldHRpbmdzRmFjYWRlLnVuSW50ZWdyYXRlRGVza3RvcCgpXG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIHJlcXVlc3REZXNrdG9wQ29uZmlnKCkge1xuXHRcdHRoaXMuZGVmYXVsdERvd25sb2FkUGF0aCA9IHN0cmVhbShsYW5nLmdldChcImFsd2F5c0Fza19hY3Rpb25cIikpXG5cdFx0Y29uc3QgW2ludGVncmF0aW9uSW5mbywgZGVmYXVsdERvd25sb2FkUGF0aCwgcnVuQXNUcmF5QXBwLCBzaG93QXV0b1VwZGF0ZU9wdGlvbiwgZW5hYmxlQXV0b1VwZGF0ZSwgbWFpbEV4cG9ydE1vZGUsIHNwZWxsY2hlY2tMYWJlbF0gPSBhd2FpdCBQcm9taXNlLmFsbChcblx0XHRcdFtcblx0XHRcdFx0bG9jYXRvci5kZXNrdG9wU2V0dGluZ3NGYWNhZGUuZ2V0SW50ZWdyYXRpb25JbmZvKCksXG5cdFx0XHRcdGxvY2F0b3IuZGVza3RvcFNldHRpbmdzRmFjYWRlLmdldFN0cmluZ0NvbmZpZ1ZhbHVlKERlc2t0b3BDb25maWdLZXkuZGVmYXVsdERvd25sb2FkUGF0aCksXG5cdFx0XHRcdGxvY2F0b3IuZGVza3RvcFNldHRpbmdzRmFjYWRlLmdldEJvb2xlYW5Db25maWdWYWx1ZShEZXNrdG9wQ29uZmlnS2V5LnJ1bkFzVHJheUFwcCksXG5cdFx0XHRcdGxvY2F0b3IuZGVza3RvcFNldHRpbmdzRmFjYWRlLmdldEJvb2xlYW5Db25maWdWYWx1ZShEZXNrdG9wQ29uZmlnS2V5LnNob3dBdXRvVXBkYXRlT3B0aW9uKSxcblx0XHRcdFx0bG9jYXRvci5kZXNrdG9wU2V0dGluZ3NGYWNhZGUuZ2V0Qm9vbGVhbkNvbmZpZ1ZhbHVlKERlc2t0b3BDb25maWdLZXkuZW5hYmxlQXV0b1VwZGF0ZSksXG5cdFx0XHRcdGxvY2F0b3IuZGVza3RvcFNldHRpbmdzRmFjYWRlLmdldFN0cmluZ0NvbmZpZ1ZhbHVlKERlc2t0b3BDb25maWdLZXkubWFpbEV4cG9ydE1vZGUpLFxuXHRcdFx0XHRnZXRDdXJyZW50U3BlbGxjaGVja0xhbmd1YWdlTGFiZWwoKSxcblx0XHRcdF0sXG5cdFx0KVxuXHRcdGNvbnN0IHsgaXNNYWlsdG9IYW5kbGVyLCBpc0F1dG9MYXVuY2hFbmFibGVkLCBpc0ludGVncmF0ZWQsIGlzVXBkYXRlQXZhaWxhYmxlIH0gPSBpbnRlZ3JhdGlvbkluZm9cblxuXHRcdHRoaXMuaXNEZWZhdWx0TWFpbHRvSGFuZGxlcihpc01haWx0b0hhbmRsZXIpXG5cblx0XHR0aGlzLmRlZmF1bHREb3dubG9hZFBhdGgoZGVmYXVsdERvd25sb2FkUGF0aCB8fCBsYW5nLmdldChcImFsd2F5c0Fza19hY3Rpb25cIikpXG5cblx0XHR0aGlzLnJ1bkFzVHJheUFwcChydW5Bc1RyYXlBcHApXG5cblx0XHR0aGlzLnJ1bk9uU3RhcnR1cChpc0F1dG9MYXVuY2hFbmFibGVkKVxuXG5cdFx0dGhpcy5pc0ludGVncmF0ZWQoaXNJbnRlZ3JhdGVkKVxuXG5cdFx0dGhpcy5zaG93QXV0b1VwZGF0ZU9wdGlvbiA9IHNob3dBdXRvVXBkYXRlT3B0aW9uXG5cblx0XHR0aGlzLmlzQXV0b1VwZGF0ZUVuYWJsZWQoZW5hYmxlQXV0b1VwZGF0ZSlcblxuXHRcdHRoaXMudXBkYXRlQXZhaWxhYmxlKGlzVXBkYXRlQXZhaWxhYmxlKVxuXG5cdFx0dGhpcy5tYWlsRXhwb3J0TW9kZShtYWlsRXhwb3J0TW9kZSBhcyBNYWlsRXhwb3J0TW9kZSlcblxuXHRcdHRoaXMuc3BlbGxDaGVja0xhbmcoc3BlbGxjaGVja0xhYmVsKVxuXG5cdFx0bS5yZWRyYXcoKVxuXHR9XG5cblx0YXN5bmMgc2V0Qm9vbGVhblZhbHVlKHNldHRpbmc6IERlc2t0b3BDb25maWdLZXksIHZhbHVlOiBib29sZWFuKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0YXdhaXQgbG9jYXRvci5kZXNrdG9wU2V0dGluZ3NGYWNhZGUuc2V0Qm9vbGVhbkNvbmZpZ1ZhbHVlKHNldHRpbmcsIHZhbHVlKVxuXHRcdG0ucmVkcmF3KClcblx0fVxuXG5cdGFzeW5jIHNldFN0cmluZ1ZhbHVlKHNldHRpbmc6IERlc2t0b3BDb25maWdLZXksIHZhbHVlOiBzdHJpbmcgfCBudWxsKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0YXdhaXQgbG9jYXRvci5kZXNrdG9wU2V0dGluZ3NGYWNhZGUuc2V0U3RyaW5nQ29uZmlnVmFsdWUoc2V0dGluZywgdmFsdWUpXG5cdFx0bS5yZWRyYXcoKVxuXHR9XG5cblx0YXN5bmMgc2V0RGVmYXVsdERvd25sb2FkUGF0aCh2OiBEb3dubG9hZExvY2F0aW9uU3RyYXRlZ3kpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHR0aGlzLmlzUGF0aERpYWxvZ09wZW4gPSB0cnVlXG5cblx0XHRsZXQgc2F2ZVBhdGg6IHN0cmluZyB8IG51bGxcblx0XHRpZiAodiA9PT0gRG93bmxvYWRMb2NhdGlvblN0cmF0ZWd5LkFMV0FZU19BU0spIHtcblx0XHRcdHNhdmVQYXRoID0gbnVsbFxuXHRcdH0gZWxzZSB7XG5cdFx0XHRzYXZlUGF0aCA9IGF3YWl0IGxvY2F0b3IuZmlsZUFwcC5vcGVuRm9sZGVyQ2hvb3NlcigpXG5cdFx0fVxuXG5cdFx0dGhpcy5kZWZhdWx0RG93bmxvYWRQYXRoKHNhdmVQYXRoID8/IGxhbmcuZ2V0KFwiYWx3YXlzQXNrX2FjdGlvblwiKSlcblxuXHRcdGF3YWl0IHRoaXMuc2V0U3RyaW5nVmFsdWUoRGVza3RvcENvbmZpZ0tleS5kZWZhdWx0RG93bmxvYWRQYXRoLCBzYXZlUGF0aClcblx0XHR0aGlzLmlzUGF0aERpYWxvZ09wZW4gPSBmYWxzZVxuXHR9XG5cblx0b25BcHBVcGRhdGVBdmFpbGFibGUoKTogdm9pZCB7XG5cdFx0dGhpcy51cGRhdGVBdmFpbGFibGUodHJ1ZSlcblxuXHRcdG0ucmVkcmF3KClcblx0fVxuXG5cdC8vIHRoaXMgaXMgYWxsIGxvY2FsIGZvciBub3dcblx0ZW50aXR5RXZlbnRzUmVjZWl2ZWQ6ICgpID0+IFByb21pc2U8dm9pZD4gPSAoKSA9PiBQcm9taXNlLnJlc29sdmUoKVxufVxuIiwiaW1wb3J0IHR5cGUgeyBPdXRPZk9mZmljZU5vdGlmaWNhdGlvbiwgT3V0T2ZPZmZpY2VOb3RpZmljYXRpb25NZXNzYWdlIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9hcGkvZW50aXRpZXMvdHV0YW5vdGEvVHlwZVJlZnMuanNcIlxuaW1wb3J0IHsgY3JlYXRlT3V0T2ZPZmZpY2VOb3RpZmljYXRpb24sIGNyZWF0ZU91dE9mT2ZmaWNlTm90aWZpY2F0aW9uTWVzc2FnZSB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL2VudGl0aWVzL3R1dGFub3RhL1R5cGVSZWZzLmpzXCJcbmltcG9ydCBzdHJlYW0gZnJvbSBcIm1pdGhyaWwvc3RyZWFtXCJcbmltcG9ydCBTdHJlYW0gZnJvbSBcIm1pdGhyaWwvc3RyZWFtXCJcbmltcG9ydCB7IGdldERheVNoaWZ0ZWQsIGdldFN0YXJ0T2ZEYXksIGdldFN0YXJ0T2ZOZXh0RGF5LCBvZkNsYXNzIH0gZnJvbSBcIkB0dXRhby90dXRhbm90YS11dGlsc1wiXG5pbXBvcnQgeyBPdXRPZk9mZmljZU5vdGlmaWNhdGlvbk1lc3NhZ2VUeXBlIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9hcGkvY29tbW9uL1R1dGFub3RhQ29uc3RhbnRzXCJcbmltcG9ydCB7IEludmFsaWREYXRhRXJyb3IsIFByZWNvbmRpdGlvbkZhaWxlZEVycm9yIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9hcGkvY29tbW9uL2Vycm9yL1Jlc3RFcnJvclwiXG5pbXBvcnQgdHlwZSB7IEVudGl0eUNsaWVudCB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL2NvbW1vbi9FbnRpdHlDbGllbnRcIlxuaW1wb3J0IHsgbGFuZywgTGFuZ3VhZ2VWaWV3TW9kZWwgfSBmcm9tIFwiLi4vLi4vY29tbW9uL21pc2MvTGFuZ3VhZ2VWaWV3TW9kZWxcIlxuaW1wb3J0IHR5cGUgeyBVc2VyQ29udHJvbGxlciB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL21haW4vVXNlckNvbnRyb2xsZXJcIlxuaW1wb3J0IHsgYXBwZW5kRW1haWxTaWduYXR1cmUgfSBmcm9tIFwiLi4vbWFpbC9zaWduYXR1cmUvU2lnbmF0dXJlXCJcbmltcG9ydCB7IFVzZXJFcnJvciB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL21haW4vVXNlckVycm9yXCJcbmltcG9ydCB7IFVwZ3JhZGVSZXF1aXJlZEVycm9yIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9hcGkvbWFpbi9VcGdyYWRlUmVxdWlyZWRFcnJvci5qc1wiXG5pbXBvcnQgeyBJU2VydmljZUV4ZWN1dG9yIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9hcGkvY29tbW9uL1NlcnZpY2VSZXF1ZXN0LmpzXCJcblxuaW1wb3J0IHsgZ2V0QXZhaWxhYmxlUGxhbnNXaXRoQXV0b1Jlc3BvbmRlciB9IGZyb20gXCIuLi8uLi9jb21tb24vc3Vic2NyaXB0aW9uL1N1YnNjcmlwdGlvblV0aWxzLmpzXCJcblxuZXhwb3J0IGNvbnN0IGVudW0gUmVjaXBpZW50TWVzc2FnZVR5cGUge1xuXHRFWFRFUk5BTF9UT19FVkVSWU9ORSA9IDAsXG5cdElOVEVSTkFMX0FORF9FWFRFUk5BTCA9IDEsXG5cdElOVEVSTkFMX09OTFkgPSAyLFxufVxuXG5jb25zdCBGQUlMVVJFX1VQR1JBREVfUkVRVUlSRUQgPSBcIm91dG9mb2ZmaWNlLm5vdF9hdmFpbGFibGVfb25fY3VycmVudF9wbGFuXCJcblxuZXhwb3J0IGNsYXNzIEVkaXRPdXRPZk9mZmljZU5vdGlmaWNhdGlvbkRpYWxvZ01vZGVsIHtcblx0b3V0T2ZPZmZpY2VOb3RpZmljYXRpb246IE91dE9mT2ZmaWNlTm90aWZpY2F0aW9uXG5cdGVuYWJsZWQ6IFN0cmVhbTxib29sZWFuPiA9IHN0cmVhbTxib29sZWFuPihmYWxzZSlcblx0c3RhcnREYXRlOiBTdHJlYW08RGF0ZT4gPSBzdHJlYW0obmV3IERhdGUoKSlcblx0ZW5kRGF0ZTogU3RyZWFtPERhdGU+ID0gc3RyZWFtKG5ldyBEYXRlKCkpXG5cdGluZGVmaW5pdGVUaW1lUmFuZ2U6IFN0cmVhbTxib29sZWFuPiA9IHN0cmVhbTxib29sZWFuPih0cnVlKVxuXHR0aW1lUmFuZ2VFbmFibGVkOiBTdHJlYW08Ym9vbGVhbj4gPSBzdHJlYW08Ym9vbGVhbj4oZmFsc2UpXG5cdG9yZ2FuaXphdGlvblN1YmplY3Q6IFN0cmVhbTxzdHJpbmc+ID0gc3RyZWFtKFwiXCIpXG5cdG9yZ2FuaXphdGlvbk1lc3NhZ2U6IFN0cmVhbTxzdHJpbmc+ID0gc3RyZWFtKFwiXCIpXG5cdGRlZmF1bHRTdWJqZWN0OiBTdHJlYW08c3RyaW5nPiA9IHN0cmVhbShcIlwiKVxuXHRkZWZhdWx0TWVzc2FnZTogU3RyZWFtPHN0cmluZz4gPSBzdHJlYW0oXCJcIilcblx0cmVjaXBpZW50TWVzc2FnZVR5cGVzOiBTdHJlYW08UmVjaXBpZW50TWVzc2FnZVR5cGU+ID0gc3RyZWFtPFJlY2lwaWVudE1lc3NhZ2VUeXBlPihSZWNpcGllbnRNZXNzYWdlVHlwZS5FWFRFUk5BTF9UT19FVkVSWU9ORSlcblx0X2VudGl0eUNsaWVudDogRW50aXR5Q2xpZW50XG5cdF91c2VyQ29udHJvbGxlcjogVXNlckNvbnRyb2xsZXJcblx0X2xhbmd1YWdlVmlld01vZGVsOiBMYW5ndWFnZVZpZXdNb2RlbFxuXG5cdGNvbnN0cnVjdG9yKFxuXHRcdG91dE9mT2ZmaWNlTm90aWZpY2F0aW9uOiBPdXRPZk9mZmljZU5vdGlmaWNhdGlvbiB8IG51bGwsXG5cdFx0ZW50aXR5Q2xpZW50OiBFbnRpdHlDbGllbnQsXG5cdFx0dXNlckNvbnRyb2xsZXI6IFVzZXJDb250cm9sbGVyLFxuXHRcdGxhbmd1YWdlVmlld01vZGVsOiBMYW5ndWFnZVZpZXdNb2RlbCxcblx0XHRyZWFkb25seSBzZXJ2aWNlRXhlY3V0b3I6IElTZXJ2aWNlRXhlY3V0b3IsXG5cdCkge1xuXHRcdHRoaXMuX2VudGl0eUNsaWVudCA9IGVudGl0eUNsaWVudFxuXHRcdHRoaXMuX3VzZXJDb250cm9sbGVyID0gdXNlckNvbnRyb2xsZXJcblx0XHR0aGlzLl9sYW5ndWFnZVZpZXdNb2RlbCA9IGxhbmd1YWdlVmlld01vZGVsXG5cblx0XHR0aGlzLl9zZXREZWZhdWx0TWVzc2FnZXMoKVxuXG5cdFx0aWYgKCFvdXRPZk9mZmljZU5vdGlmaWNhdGlvbikge1xuXHRcdFx0dGhpcy5zdGFydERhdGUoZ2V0U3RhcnRPZkRheShuZXcgRGF0ZSgpKSlcblx0XHRcdHRoaXMub3V0T2ZPZmZpY2VOb3RpZmljYXRpb24gPSBjcmVhdGVPdXRPZk9mZmljZU5vdGlmaWNhdGlvbih7XG5cdFx0XHRcdG5vdGlmaWNhdGlvbnM6IFtdLFxuXHRcdFx0XHRlbmFibGVkOiBmYWxzZSxcblx0XHRcdFx0ZW5kRGF0ZTogbnVsbCxcblx0XHRcdFx0c3RhcnREYXRlOiBudWxsLFxuXHRcdFx0fSlcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhpcy5vdXRPZk9mZmljZU5vdGlmaWNhdGlvbiA9IG91dE9mT2ZmaWNlTm90aWZpY2F0aW9uXG5cdFx0XHR0aGlzLmVuYWJsZWQob3V0T2ZPZmZpY2VOb3RpZmljYXRpb24uZW5hYmxlZClcblx0XHRcdGxldCBkZWZhdWx0RW5hYmxlZCA9IGZhbHNlXG5cdFx0XHRsZXQgb3JnYW5pemF0aW9uRW5hYmxlZCA9IGZhbHNlXG5cdFx0XHRmb3IgKGNvbnN0IG5vdGlmaWNhdGlvbiBvZiBvdXRPZk9mZmljZU5vdGlmaWNhdGlvbi5ub3RpZmljYXRpb25zKSB7XG5cdFx0XHRcdGlmIChub3RpZmljYXRpb24udHlwZSA9PT0gT3V0T2ZPZmZpY2VOb3RpZmljYXRpb25NZXNzYWdlVHlwZS5EZWZhdWx0KSB7XG5cdFx0XHRcdFx0ZGVmYXVsdEVuYWJsZWQgPSB0cnVlXG5cdFx0XHRcdFx0dGhpcy5kZWZhdWx0U3ViamVjdChub3RpZmljYXRpb24uc3ViamVjdClcblx0XHRcdFx0XHR0aGlzLmRlZmF1bHRNZXNzYWdlKG5vdGlmaWNhdGlvbi5tZXNzYWdlKVxuXHRcdFx0XHR9IGVsc2UgaWYgKG5vdGlmaWNhdGlvbi50eXBlID09PSBPdXRPZk9mZmljZU5vdGlmaWNhdGlvbk1lc3NhZ2VUeXBlLkluc2lkZU9yZ2FuaXphdGlvbikge1xuXHRcdFx0XHRcdG9yZ2FuaXphdGlvbkVuYWJsZWQgPSB0cnVlXG5cdFx0XHRcdFx0dGhpcy5vcmdhbml6YXRpb25TdWJqZWN0KG5vdGlmaWNhdGlvbi5zdWJqZWN0KVxuXHRcdFx0XHRcdHRoaXMub3JnYW5pemF0aW9uTWVzc2FnZShub3RpZmljYXRpb24ubWVzc2FnZSlcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRpZiAoZGVmYXVsdEVuYWJsZWQgJiYgb3JnYW5pemF0aW9uRW5hYmxlZCkge1xuXHRcdFx0XHR0aGlzLnJlY2lwaWVudE1lc3NhZ2VUeXBlcyhSZWNpcGllbnRNZXNzYWdlVHlwZS5JTlRFUk5BTF9BTkRfRVhURVJOQUwpXG5cdFx0XHR9IGVsc2UgaWYgKG9yZ2FuaXphdGlvbkVuYWJsZWQpIHtcblx0XHRcdFx0dGhpcy5yZWNpcGllbnRNZXNzYWdlVHlwZXMoUmVjaXBpZW50TWVzc2FnZVR5cGUuSU5URVJOQUxfT05MWSlcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRoaXMucmVjaXBpZW50TWVzc2FnZVR5cGVzKFJlY2lwaWVudE1lc3NhZ2VUeXBlLkVYVEVSTkFMX1RPX0VWRVJZT05FKVxuXHRcdFx0fVxuXG5cdFx0XHRpZiAob3V0T2ZPZmZpY2VOb3RpZmljYXRpb24uc3RhcnREYXRlKSB7XG5cdFx0XHRcdHRoaXMuc3RhcnREYXRlKG91dE9mT2ZmaWNlTm90aWZpY2F0aW9uLnN0YXJ0RGF0ZSlcblx0XHRcdFx0dGhpcy50aW1lUmFuZ2VFbmFibGVkKHRydWUpXG5cblx0XHRcdFx0Ly8gZW5kIGRhdGVzIGFyZSBzdG9yZWQgYXMgdGhlIGJlZ2lubmluZyBvZiB0aGUgZm9sbG93aW5nIGRhdGUuIFdlIHN1YnRyYWN0IG9uZSBkYXkgdG8gc2hvdyB0aGUgY29ycmVjdCBkYXRlIHRvIHRoZSB1c2VyLlxuXHRcdFx0XHRpZiAob3V0T2ZPZmZpY2VOb3RpZmljYXRpb24uZW5kRGF0ZSkge1xuXHRcdFx0XHRcdGNvbnN0IHNoaWZ0ZWRFbmREYXRlID0gZ2V0RGF5U2hpZnRlZChvdXRPZk9mZmljZU5vdGlmaWNhdGlvbi5lbmREYXRlLCAtMSlcblx0XHRcdFx0XHR0aGlzLmVuZERhdGUoc2hpZnRlZEVuZERhdGUpXG5cdFx0XHRcdFx0dGhpcy5pbmRlZmluaXRlVGltZVJhbmdlKGZhbHNlKVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHRoaXMuaW5kZWZpbml0ZVRpbWVSYW5nZSh0cnVlKVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0X3NldERlZmF1bHRNZXNzYWdlcygpIHtcblx0XHRjb25zdCB0ZW1wbGF0ZVN1YmplY3QgPSB0aGlzLl9sYW5ndWFnZVZpZXdNb2RlbC5nZXQoXCJvdXRPZk9mZmljZURlZmF1bHRTdWJqZWN0X21zZ1wiKVxuXG5cdFx0Y29uc3QgdGVtcGxhdGVNZXNzYWdlID0gYXBwZW5kRW1haWxTaWduYXR1cmUodGhpcy5fbGFuZ3VhZ2VWaWV3TW9kZWwuZ2V0KFwib3V0T2ZPZmZpY2VEZWZhdWx0X21zZ1wiKSwgdGhpcy5fdXNlckNvbnRyb2xsZXIucHJvcHMpXG5cdFx0dGhpcy5vcmdhbml6YXRpb25TdWJqZWN0KHRlbXBsYXRlU3ViamVjdClcblx0XHR0aGlzLmRlZmF1bHRTdWJqZWN0KHRlbXBsYXRlU3ViamVjdClcblx0XHR0aGlzLmRlZmF1bHRNZXNzYWdlKHRlbXBsYXRlTWVzc2FnZSlcblx0XHR0aGlzLm9yZ2FuaXphdGlvbk1lc3NhZ2UodGVtcGxhdGVNZXNzYWdlKVxuXHR9XG5cblx0LyoqXG5cdCAqIFJldHVybiBPdXRPZk9mZmljZU5vdGlmaWNhdGlvbiBjcmVhdGVkIGZyb20gaW5wdXQgZGF0YS5cblx0ICogQHRocm93cyBVc2VyRXJyb3IgaWYgdGltZSBwZXJpb2QgaXMgaW52YWxpZFxuXHQgKiAqL1xuXHRnZXROb3RpZmljYXRpb25Gcm9tRGF0YSgpOiBPdXRPZk9mZmljZU5vdGlmaWNhdGlvbiB7XG5cdFx0bGV0IHN0YXJ0RGF0ZTogRGF0ZSB8IG51bGwgPSBudWxsXG5cdFx0bGV0IGVuZERhdGU6IERhdGUgfCBudWxsID0gbnVsbFxuXG5cdFx0Ly8gV2UgdXNlIHRoZSBsYXN0IHNlY29uZCBvZiB0aGUgZGF5IGFzIGVuZCB0aW1lIHRvIG1ha2Ugc3VyZSBub3RpZmljYXRpb25zIGFyZSBzdGlsbCBzZW5kIGR1cmluZyB0aGlzIGRheS5cblx0XHQvLyBXZSB1c2UgdGhlIGxvY2FsIHRpbWUgZm9yIGRhdGUgcGlja2luZyBhbmQgY29udmVydCBpdCB0byBVVEMgYmVjYXVzZSB0aGUgc2VydmVyIGV4cGVjdHMgdXRjIGRhdGVzXG5cdFx0aWYgKHRoaXMudGltZVJhbmdlRW5hYmxlZCgpKSB7XG5cdFx0XHRzdGFydERhdGUgPSB0aGlzLnN0YXJ0RGF0ZSgpXG5cblx0XHRcdGlmICghdGhpcy5pbmRlZmluaXRlVGltZVJhbmdlKCkpIHtcblx0XHRcdFx0ZW5kRGF0ZSA9IGdldFN0YXJ0T2ZOZXh0RGF5KHRoaXMuZW5kRGF0ZSgpKVxuXG5cdFx0XHRcdGlmIChzdGFydERhdGUuZ2V0VGltZSgpID4gZW5kRGF0ZS5nZXRUaW1lKCkgfHwgZW5kRGF0ZS5nZXRUaW1lKCkgPCBEYXRlLm5vdygpKSB7XG5cdFx0XHRcdFx0dGhyb3cgbmV3IFVzZXJFcnJvcihcImludmFsaWRUaW1lUGVyaW9kX21zZ1wiKVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Y29uc3Qgbm90aWZpY2F0aW9uTWVzc2FnZXM6IE91dE9mT2ZmaWNlTm90aWZpY2F0aW9uTWVzc2FnZVtdID0gW11cblxuXHRcdGlmICh0aGlzLmlzRGVmYXVsdE1lc3NhZ2VFbmFibGVkKCkpIHtcblx0XHRcdGNvbnN0IGRlZmF1bHROb3RpZmljYXRpb246IE91dE9mT2ZmaWNlTm90aWZpY2F0aW9uTWVzc2FnZSA9IGNyZWF0ZU91dE9mT2ZmaWNlTm90aWZpY2F0aW9uTWVzc2FnZSh7XG5cdFx0XHRcdHN1YmplY3Q6IHRoaXMuZGVmYXVsdFN1YmplY3QoKS50cmltKCksXG5cdFx0XHRcdG1lc3NhZ2U6IHRoaXMuZGVmYXVsdE1lc3NhZ2UoKS50cmltKCksXG5cdFx0XHRcdHR5cGU6IE91dE9mT2ZmaWNlTm90aWZpY2F0aW9uTWVzc2FnZVR5cGUuRGVmYXVsdCxcblx0XHRcdH0pXG5cdFx0XHRub3RpZmljYXRpb25NZXNzYWdlcy5wdXNoKGRlZmF1bHROb3RpZmljYXRpb24pXG5cdFx0fVxuXG5cdFx0aWYgKHRoaXMuaXNPcmdhbml6YXRpb25NZXNzYWdlRW5hYmxlZCgpKSB7XG5cdFx0XHRjb25zdCBvcmdhbml6YXRpb25Ob3RpZmljYXRpb246IE91dE9mT2ZmaWNlTm90aWZpY2F0aW9uTWVzc2FnZSA9IGNyZWF0ZU91dE9mT2ZmaWNlTm90aWZpY2F0aW9uTWVzc2FnZSh7XG5cdFx0XHRcdHN1YmplY3Q6IHRoaXMub3JnYW5pemF0aW9uU3ViamVjdCgpLnRyaW0oKSxcblx0XHRcdFx0bWVzc2FnZTogdGhpcy5vcmdhbml6YXRpb25NZXNzYWdlKCkudHJpbSgpLFxuXHRcdFx0XHR0eXBlOiBPdXRPZk9mZmljZU5vdGlmaWNhdGlvbk1lc3NhZ2VUeXBlLkluc2lkZU9yZ2FuaXphdGlvbixcblx0XHRcdH0pXG5cdFx0XHRub3RpZmljYXRpb25NZXNzYWdlcy5wdXNoKG9yZ2FuaXphdGlvbk5vdGlmaWNhdGlvbilcblx0XHR9XG5cblx0XHR0aGlzLm91dE9mT2ZmaWNlTm90aWZpY2F0aW9uLl9vd25lckdyb3VwID0gdGhpcy5fdXNlckNvbnRyb2xsZXIuZ2V0VXNlck1haWxHcm91cE1lbWJlcnNoaXAoKS5ncm91cFxuXHRcdHRoaXMub3V0T2ZPZmZpY2VOb3RpZmljYXRpb24uZW5hYmxlZCA9IHRoaXMuZW5hYmxlZCgpXG5cdFx0dGhpcy5vdXRPZk9mZmljZU5vdGlmaWNhdGlvbi5zdGFydERhdGUgPSBzdGFydERhdGVcblx0XHR0aGlzLm91dE9mT2ZmaWNlTm90aWZpY2F0aW9uLmVuZERhdGUgPSBlbmREYXRlXG5cdFx0dGhpcy5vdXRPZk9mZmljZU5vdGlmaWNhdGlvbi5ub3RpZmljYXRpb25zID0gbm90aWZpY2F0aW9uTWVzc2FnZXNcblx0XHRyZXR1cm4gdGhpcy5vdXRPZk9mZmljZU5vdGlmaWNhdGlvblxuXHR9XG5cblx0aXNPcmdhbml6YXRpb25NZXNzYWdlRW5hYmxlZCgpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gKFxuXHRcdFx0dGhpcy5yZWNpcGllbnRNZXNzYWdlVHlwZXMoKSA9PT0gUmVjaXBpZW50TWVzc2FnZVR5cGUuSU5URVJOQUxfT05MWSB8fCB0aGlzLnJlY2lwaWVudE1lc3NhZ2VUeXBlcygpID09PSBSZWNpcGllbnRNZXNzYWdlVHlwZS5JTlRFUk5BTF9BTkRfRVhURVJOQUxcblx0XHQpXG5cdH1cblxuXHRpc0RlZmF1bHRNZXNzYWdlRW5hYmxlZCgpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gKFxuXHRcdFx0dGhpcy5yZWNpcGllbnRNZXNzYWdlVHlwZXMoKSA9PT0gUmVjaXBpZW50TWVzc2FnZVR5cGUuRVhURVJOQUxfVE9fRVZFUllPTkUgfHxcblx0XHRcdHRoaXMucmVjaXBpZW50TWVzc2FnZVR5cGVzKCkgPT09IFJlY2lwaWVudE1lc3NhZ2VUeXBlLklOVEVSTkFMX0FORF9FWFRFUk5BTFxuXHRcdClcblx0fVxuXG5cdC8qKlxuXHQgKiBAdGhyb3dzIFVzZXJFcnJvclxuXHQgKiBAdGhyb3dzIFVwZ3JhZGVSZXF1aXJlZEVycm9yXG5cdCAqL1xuXHRzYXZlT3V0T2ZPZmZpY2VOb3RpZmljYXRpb24oKTogUHJvbWlzZTxhbnk+IHtcblx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKClcblx0XHRcdC50aGVuKCgpID0+IHRoaXMuZ2V0Tm90aWZpY2F0aW9uRnJvbURhdGEoKSlcblx0XHRcdC50aGVuKGFzeW5jIChzZW5kYWJsZU5vdGlmaWNhdGlvbikgPT4ge1xuXHRcdFx0XHQvLyBFcnJvciBtZXNzYWdlcyBhcmUgYWxyZWFkeSBzaG93biBpZiBzZW5kYWJsZU5vdGlmaWNhdGlvbiBpcyBudWxsLiBXZSBkbyBub3QgY2xvc2UgdGhlIGRpYWxvZy5cblx0XHRcdFx0aWYgKHRoaXMuX2lzTmV3Tm90aWZpY2F0aW9uKCkpIHtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLl9lbnRpdHlDbGllbnQuc2V0dXAobnVsbCwgc2VuZGFibGVOb3RpZmljYXRpb24pXG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5fZW50aXR5Q2xpZW50LnVwZGF0ZShzZW5kYWJsZU5vdGlmaWNhdGlvbilcblx0XHRcdFx0fVxuXHRcdFx0fSlcblx0XHRcdC5jYXRjaChcblx0XHRcdFx0b2ZDbGFzcyhJbnZhbGlkRGF0YUVycm9yLCAoZSkgPT4ge1xuXHRcdFx0XHRcdHRocm93IG5ldyBVc2VyRXJyb3IoXCJvdXRPZk9mZmljZU1lc3NhZ2VJbnZhbGlkX21zZ1wiKVxuXHRcdFx0XHR9KSxcblx0XHRcdClcblx0XHRcdC5jYXRjaChcblx0XHRcdFx0b2ZDbGFzcyhQcmVjb25kaXRpb25GYWlsZWRFcnJvciwgYXN5bmMgKGUpID0+IHtcblx0XHRcdFx0XHRpZiAoZS5kYXRhID09PSBGQUlMVVJFX1VQR1JBREVfUkVRVUlSRUQpIHtcblx0XHRcdFx0XHRcdHRocm93IG5ldyBVcGdyYWRlUmVxdWlyZWRFcnJvcihcInVwZ3JhZGVSZXF1aXJlZF9tc2dcIiwgYXdhaXQgZ2V0QXZhaWxhYmxlUGxhbnNXaXRoQXV0b1Jlc3BvbmRlcigpKVxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHR0aHJvdyBuZXcgVXNlckVycm9yKGxhbmcubWFrZVRyYW5zbGF0aW9uKFwiZXJyb3JfbXNnXCIsIGUudG9TdHJpbmcoKSkpXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KSxcblx0XHRcdClcblx0fVxuXG5cdF9pc05ld05vdGlmaWNhdGlvbigpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gIXRoaXMub3V0T2ZPZmZpY2VOb3RpZmljYXRpb24uX2lkXG5cdH1cbn1cbiIsImltcG9ydCBtLCB7IENoaWxkcmVuLCBDb21wb25lbnQsIFZub2RlIH0gZnJvbSBcIm1pdGhyaWxcIlxuaW1wb3J0IHsgRGlhbG9nIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvYmFzZS9EaWFsb2dcIlxuaW1wb3J0IHsgZ2V0U3RhcnRPZlRoZVdlZWtPZmZzZXRGb3JVc2VyIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9jYWxlbmRhci9kYXRlL0NhbGVuZGFyVXRpbHNcIlxuaW1wb3J0IHR5cGUgeyBPdXRPZk9mZmljZU5vdGlmaWNhdGlvbiB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL2VudGl0aWVzL3R1dGFub3RhL1R5cGVSZWZzLmpzXCJcbmltcG9ydCB7IFRleHRGaWVsZCB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL2Jhc2UvVGV4dEZpZWxkLmpzXCJcbmltcG9ydCB7IGxhbmcgfSBmcm9tIFwiLi4vLi4vY29tbW9uL21pc2MvTGFuZ3VhZ2VWaWV3TW9kZWxcIlxuaW1wb3J0IHsgS2V5cywgT1VUX09GX09GRklDRV9TVUJKRUNUX1BSRUZJWCB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL2NvbW1vbi9UdXRhbm90YUNvbnN0YW50c1wiXG5pbXBvcnQgeyBDaGVja2JveCB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL2Jhc2UvQ2hlY2tib3guanNcIlxuaW1wb3J0IHsgcHggfSBmcm9tIFwiLi4vLi4vY29tbW9uL2d1aS9zaXplXCJcbmltcG9ydCB7IEJ1dHRvblR5cGUgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2d1aS9iYXNlL0J1dHRvbi5qc1wiXG5pbXBvcnQgeyBnZXREZWZhdWx0Tm90aWZpY2F0aW9uTGFiZWwgfSBmcm9tIFwiLi4vLi4vY29tbW9uL21pc2MvT3V0T2ZPZmZpY2VOb3RpZmljYXRpb25VdGlsc1wiXG5pbXBvcnQgeyBzaG93UGxhblVwZ3JhZGVSZXF1aXJlZERpYWxvZyB9IGZyb20gXCIuLi8uLi9jb21tb24vbWlzYy9TdWJzY3JpcHRpb25EaWFsb2dzXCJcbmltcG9ydCB7IERyb3BEb3duU2VsZWN0b3IgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2d1aS9iYXNlL0Ryb3BEb3duU2VsZWN0b3IuanNcIlxuaW1wb3J0IHsgc2hvd1VzZXJFcnJvciB9IGZyb20gXCIuLi8uLi9jb21tb24vbWlzYy9FcnJvckhhbmRsZXJJbXBsXCJcbmltcG9ydCB7IGxvY2F0b3IgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2FwaS9tYWluL0NvbW1vbkxvY2F0b3JcIlxuaW1wb3J0IHsgRWRpdE91dE9mT2ZmaWNlTm90aWZpY2F0aW9uRGlhbG9nTW9kZWwsIFJlY2lwaWVudE1lc3NhZ2VUeXBlIH0gZnJvbSBcIi4vRWRpdE91dE9mT2ZmaWNlTm90aWZpY2F0aW9uRGlhbG9nTW9kZWxcIlxuaW1wb3J0IHsgSHRtbEVkaXRvciB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL2VkaXRvci9IdG1sRWRpdG9yXCJcbmltcG9ydCB7IFVzZXJFcnJvciB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL21haW4vVXNlckVycm9yXCJcbmltcG9ydCB7IERhdGVQaWNrZXIgfSBmcm9tIFwiLi4vLi4vY2FsZW5kYXItYXBwL2NhbGVuZGFyL2d1aS9waWNrZXJzL0RhdGVQaWNrZXJcIlxuaW1wb3J0IHR5cGUgeyBsYXp5IH0gZnJvbSBcIkB0dXRhby90dXRhbm90YS11dGlsc1wiXG5pbXBvcnQgeyBvZkNsYXNzIH0gZnJvbSBcIkB0dXRhby90dXRhbm90YS11dGlsc1wiXG5pbXBvcnQgeyBEaWFsb2dIZWFkZXJCYXJBdHRycyB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL2Jhc2UvRGlhbG9nSGVhZGVyQmFyXCJcbmltcG9ydCB7IFVwZ3JhZGVSZXF1aXJlZEVycm9yIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9hcGkvbWFpbi9VcGdyYWRlUmVxdWlyZWRFcnJvci5qc1wiXG5cbmV4cG9ydCBmdW5jdGlvbiBzaG93RWRpdE91dE9mT2ZmaWNlTm90aWZpY2F0aW9uRGlhbG9nKG91dE9mT2ZmaWNlTm90aWZpY2F0aW9uOiBPdXRPZk9mZmljZU5vdGlmaWNhdGlvbiB8IG51bGwpIHtcblx0Y29uc3QgZGlhbG9nTW9kZWwgPSBuZXcgRWRpdE91dE9mT2ZmaWNlTm90aWZpY2F0aW9uRGlhbG9nTW9kZWwoXG5cdFx0b3V0T2ZPZmZpY2VOb3RpZmljYXRpb24sXG5cdFx0bG9jYXRvci5lbnRpdHlDbGllbnQsXG5cdFx0bG9jYXRvci5sb2dpbnMuZ2V0VXNlckNvbnRyb2xsZXIoKSxcblx0XHRsYW5nLFxuXHRcdGxvY2F0b3Iuc2VydmljZUV4ZWN1dG9yLFxuXHQpXG5cdGNvbnN0IG9yZ2FuaXphdGlvbk1lc3NhZ2VFZGl0b3IgPSBuZXcgSHRtbEVkaXRvcihcIm1lc3NhZ2VfbGFiZWxcIilcblx0XHQuc2V0TWluSGVpZ2h0KDEwMClcblx0XHQuc2hvd0JvcmRlcnMoKVxuXHRcdC5zZXRWYWx1ZShkaWFsb2dNb2RlbC5vcmdhbml6YXRpb25NZXNzYWdlKCkpXG5cdFx0LmVuYWJsZVRvb2xiYXIoKVxuXHRjb25zdCBkZWZhdWx0TWVzc2FnZUVkaXRvciA9IG5ldyBIdG1sRWRpdG9yKFwibWVzc2FnZV9sYWJlbFwiKS5zZXRNaW5IZWlnaHQoMTAwKS5zaG93Qm9yZGVycygpLnNldFZhbHVlKGRpYWxvZ01vZGVsLmRlZmF1bHRNZXNzYWdlKCkpLmVuYWJsZVRvb2xiYXIoKVxuXG5cdGNvbnN0IHNhdmVPdXRPZk9mZmljZU5vdGlmaWNhdGlvbiA9ICgpID0+IHtcblx0XHRkaWFsb2dNb2RlbC5vcmdhbml6YXRpb25NZXNzYWdlKG9yZ2FuaXphdGlvbk1lc3NhZ2VFZGl0b3IuZ2V0VmFsdWUoKSlcblx0XHRkaWFsb2dNb2RlbC5kZWZhdWx0TWVzc2FnZShkZWZhdWx0TWVzc2FnZUVkaXRvci5nZXRWYWx1ZSgpKVxuXHRcdGRpYWxvZ01vZGVsXG5cdFx0XHQuc2F2ZU91dE9mT2ZmaWNlTm90aWZpY2F0aW9uKClcblx0XHRcdC50aGVuKCgpID0+IGNhbmNlbCgpKVxuXHRcdFx0LmNhdGNoKG9mQ2xhc3MoVXNlckVycm9yLCAoZSkgPT4gc2hvd1VzZXJFcnJvcihlKSkpXG5cdFx0XHQuY2F0Y2goXG5cdFx0XHRcdG9mQ2xhc3MoVXBncmFkZVJlcXVpcmVkRXJyb3IsIChlKSA9PiB7XG5cdFx0XHRcdFx0c2hvd1BsYW5VcGdyYWRlUmVxdWlyZWREaWFsb2coZS5wbGFucylcblx0XHRcdFx0fSksXG5cdFx0XHQpXG5cdH1cblxuXHRmdW5jdGlvbiBjYW5jZWwoKSB7XG5cdFx0ZGlhbG9nLmNsb3NlKClcblx0fVxuXG5cdGNvbnN0IGRpYWxvZ0hlYWRlckF0dHJzOiBEaWFsb2dIZWFkZXJCYXJBdHRycyA9IHtcblx0XHRsZWZ0OiBbXG5cdFx0XHR7XG5cdFx0XHRcdGxhYmVsOiBcImNhbmNlbF9hY3Rpb25cIixcblx0XHRcdFx0Y2xpY2s6IGNhbmNlbCxcblx0XHRcdFx0dHlwZTogQnV0dG9uVHlwZS5TZWNvbmRhcnksXG5cdFx0XHR9LFxuXHRcdF0sXG5cdFx0cmlnaHQ6IFtcblx0XHRcdHtcblx0XHRcdFx0bGFiZWw6IFwic2F2ZV9hY3Rpb25cIixcblx0XHRcdFx0Y2xpY2s6IHNhdmVPdXRPZk9mZmljZU5vdGlmaWNhdGlvbixcblx0XHRcdFx0dHlwZTogQnV0dG9uVHlwZS5QcmltYXJ5LFxuXHRcdFx0fSxcblx0XHRdLFxuXHRcdG1pZGRsZTogXCJvdXRPZk9mZmljZU5vdGlmaWNhdGlvbl90aXRsZVwiLFxuXHR9XG5cdGNvbnN0IGRpYWxvZyA9IERpYWxvZy5lZGl0RGlhbG9nKGRpYWxvZ0hlYWRlckF0dHJzLCBFZGl0T3V0T2ZPZmZpY2VOb3RpZmljYXRpb25EaWFsb2csIHtcblx0XHRtb2RlbDogZGlhbG9nTW9kZWwsXG5cdFx0b3JnYW5pemF0aW9uTWVzc2FnZUVkaXRvcixcblx0XHRkZWZhdWx0TWVzc2FnZUVkaXRvcixcblx0fSlcblx0XHQuYWRkU2hvcnRjdXQoe1xuXHRcdFx0a2V5OiBLZXlzLkVTQyxcblx0XHRcdGV4ZWM6IGNhbmNlbCxcblx0XHRcdGhlbHA6IFwiY2xvc2VfYWx0XCIsXG5cdFx0fSlcblx0XHQuYWRkU2hvcnRjdXQoe1xuXHRcdFx0a2V5OiBLZXlzLlMsXG5cdFx0XHRjdHJsT3JDbWQ6IHRydWUsXG5cdFx0XHRleGVjOiBzYXZlT3V0T2ZPZmZpY2VOb3RpZmljYXRpb24sXG5cdFx0XHRoZWxwOiBcInNhdmVfYWN0aW9uXCIsXG5cdFx0fSlcblx0ZGlhbG9nLnNob3coKVxufVxuXG50eXBlIEVkaXRPdXRPZk9mZmljZU5vdGlmaWNhdGlvbkRpYWxvZ0F0dHJzID0ge1xuXHRtb2RlbDogRWRpdE91dE9mT2ZmaWNlTm90aWZpY2F0aW9uRGlhbG9nTW9kZWxcblx0ZGVmYXVsdE1lc3NhZ2VFZGl0b3I6IEh0bWxFZGl0b3Jcblx0b3JnYW5pemF0aW9uTWVzc2FnZUVkaXRvcjogSHRtbEVkaXRvclxufVxuXG5jbGFzcyBFZGl0T3V0T2ZPZmZpY2VOb3RpZmljYXRpb25EaWFsb2cgaW1wbGVtZW50cyBDb21wb25lbnQ8RWRpdE91dE9mT2ZmaWNlTm90aWZpY2F0aW9uRGlhbG9nQXR0cnM+IHtcblx0dmlldyh2bm9kZTogVm5vZGU8RWRpdE91dE9mT2ZmaWNlTm90aWZpY2F0aW9uRGlhbG9nQXR0cnM+KTogQ2hpbGRyZW4ge1xuXHRcdGNvbnN0IHsgbW9kZWwsIGRlZmF1bHRNZXNzYWdlRWRpdG9yLCBvcmdhbml6YXRpb25NZXNzYWdlRWRpdG9yIH0gPSB2bm9kZS5hdHRyc1xuXHRcdGNvbnN0IGRlZmF1bHRFbmFibGVkID0gbW9kZWwuaXNEZWZhdWx0TWVzc2FnZUVuYWJsZWQoKVxuXHRcdGNvbnN0IG9yZ2FuaXphdGlvbkVuYWJsZWQgPSBtb2RlbC5pc09yZ2FuaXphdGlvbk1lc3NhZ2VFbmFibGVkKClcblx0XHRjb25zdCBzdGFydE9mVGhlV2Vla09mZnNldCA9IGdldFN0YXJ0T2ZUaGVXZWVrT2Zmc2V0Rm9yVXNlcihsb2NhdG9yLmxvZ2lucy5nZXRVc2VyQ29udHJvbGxlcigpLnVzZXJTZXR0aW5nc0dyb3VwUm9vdClcblx0XHRyZXR1cm4gW1xuXHRcdFx0dGhpcy5yZW5kZXJFbmFibGVkKG1vZGVsKSxcblx0XHRcdHRoaXMucmVuZGVyUmVjaXBpZW50cyhtb2RlbCksXG5cdFx0XHRtKFxuXHRcdFx0XHRcIi5tdC5mbGV4LXN0YXJ0XCIsXG5cdFx0XHRcdG0oQ2hlY2tib3gsIHtcblx0XHRcdFx0XHRsYWJlbDogKCkgPT4gbGFuZy5nZXQoXCJvdXRPZk9mZmljZVRpbWVSYW5nZV9tc2dcIiksXG5cdFx0XHRcdFx0Y2hlY2tlZDogbW9kZWwudGltZVJhbmdlRW5hYmxlZCgpLFxuXHRcdFx0XHRcdG9uQ2hlY2tlZDogbW9kZWwudGltZVJhbmdlRW5hYmxlZCxcblx0XHRcdFx0XHRoZWxwTGFiZWw6IFwib3V0T2ZPZmZpY2VUaW1lUmFuZ2VIZWxwX21zZ1wiLFxuXHRcdFx0XHR9KSxcblx0XHRcdCksXG5cdFx0XHRtb2RlbC50aW1lUmFuZ2VFbmFibGVkKCkgPyB0aGlzLnJlbmRlclRpbWVSYW5nZVNlbGVjdG9yKG1vZGVsLCBzdGFydE9mVGhlV2Vla09mZnNldCkgOiBudWxsLFxuXHRcdFx0bShcIi5tdC1sXCIsIGxhbmcuZ2V0KFwib3V0T2ZPZmZpY2VVbmVuY3J5cHRlZF9tc2dcIikpLFxuXHRcdFx0b3JnYW5pemF0aW9uRW5hYmxlZCA/IHRoaXMucmVuZGVyT3JnYW5pemF0aW9ucyhtb2RlbCwgb3JnYW5pemF0aW9uTWVzc2FnZUVkaXRvcikgOiBudWxsLFxuXHRcdFx0ZGVmYXVsdEVuYWJsZWQgPyB0aGlzLnJlbmRlckRlZmF1bHQob3JnYW5pemF0aW9uRW5hYmxlZCwgbW9kZWwsIGRlZmF1bHRNZXNzYWdlRWRpdG9yKSA6IG51bGwsXG5cdFx0XHRtKFwiLnBiXCIsIFwiXCIpLFxuXHRcdF1cblx0fVxuXG5cdHByaXZhdGUgcmVuZGVyRW5hYmxlZChtb2RlbDogRWRpdE91dE9mT2ZmaWNlTm90aWZpY2F0aW9uRGlhbG9nTW9kZWwpIHtcblx0XHRjb25zdCBzdGF0dXNJdGVtcyA9IFtcblx0XHRcdHsgbmFtZTogbGFuZy5nZXQoXCJkZWFjdGl2YXRlZF9sYWJlbFwiKSwgdmFsdWU6IGZhbHNlIH0sXG5cdFx0XHR7IG5hbWU6IGxhbmcuZ2V0KFwiYWN0aXZhdGVkX2xhYmVsXCIpLCB2YWx1ZTogdHJ1ZSB9LFxuXHRcdF1cblx0XHRyZXR1cm4gbShEcm9wRG93blNlbGVjdG9yLCB7XG5cdFx0XHRsYWJlbDogXCJzdGF0ZV9sYWJlbFwiLFxuXHRcdFx0aXRlbXM6IHN0YXR1c0l0ZW1zLFxuXHRcdFx0c2VsZWN0ZWRWYWx1ZTogbW9kZWwuZW5hYmxlZCgpLFxuXHRcdFx0c2VsZWN0aW9uQ2hhbmdlZEhhbmRsZXI6IG1vZGVsLmVuYWJsZWQsXG5cdFx0fSlcblx0fVxuXG5cdHByaXZhdGUgcmVuZGVyRGVmYXVsdChvcmdhbml6YXRpb25FbmFibGVkOiBib29sZWFuLCBtb2RlbDogRWRpdE91dE9mT2ZmaWNlTm90aWZpY2F0aW9uRGlhbG9nTW9kZWwsIGRlZmF1bHRNZXNzYWdlRWRpdG9yOiBIdG1sRWRpdG9yKSB7XG5cdFx0cmV0dXJuIFtcblx0XHRcdG0oXCIuaDQudGV4dC1jZW50ZXIubXQtbFwiLCBnZXREZWZhdWx0Tm90aWZpY2F0aW9uTGFiZWwob3JnYW5pemF0aW9uRW5hYmxlZCkpLFxuXHRcdFx0bShUZXh0RmllbGQsIHtcblx0XHRcdFx0bGFiZWw6IFwic3ViamVjdF9sYWJlbFwiLFxuXHRcdFx0XHR2YWx1ZTogbW9kZWwuZGVmYXVsdFN1YmplY3QoKSxcblx0XHRcdFx0b25pbnB1dDogbW9kZWwuZGVmYXVsdFN1YmplY3QsXG5cdFx0XHRcdGluamVjdGlvbnNMZWZ0OiAoKSA9PlxuXHRcdFx0XHRcdG0oXG5cdFx0XHRcdFx0XHRcIi5mbGV4LW5vLWdyb3ctbm8tc2hyaW5rLWF1dG8ucHItc1wiLFxuXHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRzdHlsZToge1xuXHRcdFx0XHRcdFx0XHRcdFwibGluZS1oZWlnaHRcIjogcHgoMjQpLFxuXHRcdFx0XHRcdFx0XHRcdG9wYWNpdHk6IFwiMVwiLFxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdE9VVF9PRl9PRkZJQ0VfU1VCSkVDVF9QUkVGSVgsXG5cdFx0XHRcdFx0KSxcblx0XHRcdH0pLFxuXHRcdFx0bShkZWZhdWx0TWVzc2FnZUVkaXRvciksXG5cdFx0XVxuXHR9XG5cblx0cHJpdmF0ZSByZW5kZXJPcmdhbml6YXRpb25zKG1vZGVsOiBFZGl0T3V0T2ZPZmZpY2VOb3RpZmljYXRpb25EaWFsb2dNb2RlbCwgb3JnYW5pemF0aW9uTWVzc2FnZUVkaXRvcjogSHRtbEVkaXRvcikge1xuXHRcdHJldHVybiBbXG5cdFx0XHRtKFwiLmg0LnRleHQtY2VudGVyLm10LWxcIiwgbGFuZy5nZXQoXCJvdXRPZk9mZmljZUludGVybmFsX21zZ1wiKSksXG5cdFx0XHRtKFRleHRGaWVsZCwge1xuXHRcdFx0XHRsYWJlbDogXCJzdWJqZWN0X2xhYmVsXCIsXG5cdFx0XHRcdHZhbHVlOiBtb2RlbC5vcmdhbml6YXRpb25TdWJqZWN0KCksXG5cdFx0XHRcdG9uaW5wdXQ6IG1vZGVsLm9yZ2FuaXphdGlvblN1YmplY3QsXG5cdFx0XHRcdGluamVjdGlvbnNMZWZ0OiAoKSA9PlxuXHRcdFx0XHRcdG0oXG5cdFx0XHRcdFx0XHRcIi5mbGV4LW5vLWdyb3ctbm8tc2hyaW5rLWF1dG8ucHItc1wiLFxuXHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRzdHlsZToge1xuXHRcdFx0XHRcdFx0XHRcdFwibGluZS1oZWlnaHRcIjogcHgoMjQpLFxuXHRcdFx0XHRcdFx0XHRcdG9wYWNpdHk6IFwiMVwiLFxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdE9VVF9PRl9PRkZJQ0VfU1VCSkVDVF9QUkVGSVgsXG5cdFx0XHRcdFx0KSxcblx0XHRcdH0pLFxuXHRcdFx0bShvcmdhbml6YXRpb25NZXNzYWdlRWRpdG9yKSxcblx0XHRdXG5cdH1cblxuXHRwcml2YXRlIHJlbmRlclJlY2lwaWVudHMobW9kZWw6IEVkaXRPdXRPZk9mZmljZU5vdGlmaWNhdGlvbkRpYWxvZ01vZGVsKSB7XG5cdFx0Y29uc3QgcmVjaXBpZW50SXRlbXMgPSBbXG5cdFx0XHR7IG5hbWU6IGxhbmcuZ2V0KFwiZXZlcnlvbmVfbGFiZWxcIiksIHZhbHVlOiBSZWNpcGllbnRNZXNzYWdlVHlwZS5FWFRFUk5BTF9UT19FVkVSWU9ORSB9LFxuXHRcdFx0eyBuYW1lOiBsYW5nLmdldChcImluc2lkZU91dHNpZGVfbGFiZWxcIiksIHZhbHVlOiBSZWNpcGllbnRNZXNzYWdlVHlwZS5JTlRFUk5BTF9BTkRfRVhURVJOQUwgfSxcblx0XHRcdHsgbmFtZTogbGFuZy5nZXQoXCJpbnNpZGVPbmx5X2xhYmVsXCIpLCB2YWx1ZTogUmVjaXBpZW50TWVzc2FnZVR5cGUuSU5URVJOQUxfT05MWSB9LFxuXHRcdF1cblx0XHRjb25zdCByZWNpcGllbnRIZWxwTGFiZWw6IGxhenk8c3RyaW5nPiA9ICgpID0+IHtcblx0XHRcdHN3aXRjaCAobW9kZWwucmVjaXBpZW50TWVzc2FnZVR5cGVzKCkpIHtcblx0XHRcdFx0Y2FzZSBSZWNpcGllbnRNZXNzYWdlVHlwZS5FWFRFUk5BTF9UT19FVkVSWU9ORTpcblx0XHRcdFx0XHRyZXR1cm4gbGFuZy5nZXQoXCJvdXRPZk9mZmljZVJlY2lwaWVudHNFdmVyeW9uZUhlbHBfbGFiZWxcIilcblxuXHRcdFx0XHRjYXNlIFJlY2lwaWVudE1lc3NhZ2VUeXBlLklOVEVSTkFMX0FORF9FWFRFUk5BTDpcblx0XHRcdFx0XHRyZXR1cm4gbGFuZy5nZXQoXCJvdXRPZk9mZmljZVJlY2lwaWVudHNJbnRlcm5hbEV4dGVybmFsSGVscF9sYWJlbFwiKVxuXG5cdFx0XHRcdGNhc2UgUmVjaXBpZW50TWVzc2FnZVR5cGUuSU5URVJOQUxfT05MWTpcblx0XHRcdFx0XHRyZXR1cm4gbGFuZy5nZXQoXCJvdXRPZk9mZmljZVJlY2lwaWVudHNJbnRlcm5hbE9ubHlIZWxwX2xhYmVsXCIpXG5cblx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHRyZXR1cm4gXCJcIlxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBtKERyb3BEb3duU2VsZWN0b3IsIHtcblx0XHRcdGxhYmVsOiBcIm91dE9mT2ZmaWNlUmVjaXBpZW50c19sYWJlbFwiLFxuXHRcdFx0aXRlbXM6IHJlY2lwaWVudEl0ZW1zLFxuXHRcdFx0c2VsZWN0ZWRWYWx1ZTogbW9kZWwucmVjaXBpZW50TWVzc2FnZVR5cGVzKCksXG5cdFx0XHRzZWxlY3Rpb25DaGFuZ2VkSGFuZGxlcjogbW9kZWwucmVjaXBpZW50TWVzc2FnZVR5cGVzLFxuXHRcdFx0aGVscExhYmVsOiByZWNpcGllbnRIZWxwTGFiZWwsXG5cdFx0fSlcblx0fVxuXG5cdHByaXZhdGUgcmVuZGVyVGltZVJhbmdlU2VsZWN0b3IobW9kZWw6IEVkaXRPdXRPZk9mZmljZU5vdGlmaWNhdGlvbkRpYWxvZ01vZGVsLCBzdGFydE9mVGhlV2Vla09mZnNldDogbnVtYmVyKTogQ2hpbGRyZW4ge1xuXHRcdHJldHVybiBtKFwiLmZsZXguY29sXCIsIFtcblx0XHRcdG0oRGF0ZVBpY2tlciwge1xuXHRcdFx0XHRkYXRlOiBtb2RlbC5zdGFydERhdGUoKSxcblx0XHRcdFx0b25EYXRlU2VsZWN0ZWQ6IG1vZGVsLnN0YXJ0RGF0ZSxcblx0XHRcdFx0bGFiZWw6IFwiZGF0ZUZyb21fbGFiZWxcIixcblx0XHRcdFx0bnVsbFNlbGVjdGlvblRleHQ6IFwiZW1wdHlTdHJpbmdfbXNnXCIsXG5cdFx0XHRcdHN0YXJ0T2ZUaGVXZWVrT2Zmc2V0LFxuXHRcdFx0fSksXG5cdFx0XHRtKENoZWNrYm94LCB7XG5cdFx0XHRcdGxhYmVsOiAoKSA9PiBsYW5nLmdldChcInVubGltaXRlZF9sYWJlbFwiKSxcblx0XHRcdFx0Y2hlY2tlZDogbW9kZWwuaW5kZWZpbml0ZVRpbWVSYW5nZSgpLFxuXHRcdFx0XHRvbkNoZWNrZWQ6IG1vZGVsLmluZGVmaW5pdGVUaW1lUmFuZ2UsXG5cdFx0XHR9KSxcblx0XHRcdCFtb2RlbC5pbmRlZmluaXRlVGltZVJhbmdlKClcblx0XHRcdFx0PyBtKERhdGVQaWNrZXIsIHtcblx0XHRcdFx0XHRcdGRhdGU6IG1vZGVsLmVuZERhdGUoKSxcblx0XHRcdFx0XHRcdG9uRGF0ZVNlbGVjdGVkOiBtb2RlbC5lbmREYXRlLFxuXHRcdFx0XHRcdFx0bGFiZWw6IFwiZGF0ZVRvX2xhYmVsXCIsXG5cdFx0XHRcdFx0XHRudWxsU2VsZWN0aW9uVGV4dDogXCJlbXB0eVN0cmluZ19tc2dcIixcblx0XHRcdFx0XHRcdHN0YXJ0T2ZUaGVXZWVrT2Zmc2V0LFxuXHRcdFx0XHQgIH0pXG5cdFx0XHRcdDogbnVsbCxcblx0XHRdKVxuXHR9XG59XG4iLCJpbXBvcnQgbSBmcm9tIFwibWl0aHJpbFwiXG5pbXBvcnQgeyBEaWFsb2csIERpYWxvZ1R5cGUgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2d1aS9iYXNlL0RpYWxvZ1wiXG5pbXBvcnQgeyBsYW5nLCBNYXliZVRyYW5zbGF0aW9uIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9taXNjL0xhbmd1YWdlVmlld01vZGVsXCJcbmltcG9ydCB7IEVtYWlsU2lnbmF0dXJlVHlwZSwgRmVhdHVyZVR5cGUgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2FwaS9jb21tb24vVHV0YW5vdGFDb25zdGFudHNcIlxuaW1wb3J0IHsgSHRtbEVkaXRvciB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL2VkaXRvci9IdG1sRWRpdG9yXCJcbmltcG9ydCB0eXBlIHsgVHV0YW5vdGFQcm9wZXJ0aWVzIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9hcGkvZW50aXRpZXMvdHV0YW5vdGEvVHlwZVJlZnMuanNcIlxuaW1wb3J0IHsgUGF5bG9hZFRvb0xhcmdlRXJyb3IgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2FwaS9jb21tb24vZXJyb3IvUmVzdEVycm9yXCJcbmltcG9ydCB7IHNob3dQcm9ncmVzc0RpYWxvZyB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL2RpYWxvZ3MvUHJvZ3Jlc3NEaWFsb2dcIlxuaW1wb3J0IHsgZG93bmNhc3QsIG5ldmVyTnVsbCwgb2ZDbGFzcyB9IGZyb20gXCJAdHV0YW8vdHV0YW5vdGEtdXRpbHNcIlxuaW1wb3J0IHsgbG9jYXRvciB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL21haW4vQ29tbW9uTG9jYXRvclwiXG5pbXBvcnQgeyBhc3NlcnRNYWluT3JOb2RlIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9hcGkvY29tbW9uL0VudlwiXG5pbXBvcnQgeyBEcm9wRG93blNlbGVjdG9yIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvYmFzZS9Ecm9wRG93blNlbGVjdG9yLmpzXCJcbmltcG9ydCB7IGluc2VydElubGluZUltYWdlQjY0Q2xpY2tIYW5kbGVyIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9tYWlsRnVuY3Rpb25hbGl0eS9TaGFyZWRNYWlsVXRpbHMuanNcIlxuXG5hc3NlcnRNYWluT3JOb2RlKClcbi8vIHNpZ25hdHVyZXMgY2FuIGJlY29tZSBsYXJnZSwgZm9yIGV4YW1wbGUgaWYgdGhleSBpbmNsdWRlIGEgYmFzZTY0IGVtYmVkZGVkIGltYWdlLiB3ZSBhc2sgZm9yIGNvbmZpcm1hdGlvbiBpbiBzdWNoIGNhc2VzXG5jb25zdCBSRUNPTU1FTkRFRF9TSUdOQVRVUkVfU0laRV9MSU1JVCA9IDE1ICogMTAyNFxuXG5leHBvcnQgZnVuY3Rpb24gc2hvdyhwcm9wczogVHV0YW5vdGFQcm9wZXJ0aWVzKSB7XG5cdGltcG9ydChcIi4uL21haWwvc2lnbmF0dXJlL1NpZ25hdHVyZVwiKS50aGVuKCh7IGdldERlZmF1bHRTaWduYXR1cmUgfSkgPT4ge1xuXHRcdGNvbnN0IGRlZmF1bHRTaWduYXR1cmUgPSBnZXREZWZhdWx0U2lnbmF0dXJlKClcblx0XHRsZXQgY3VycmVudEN1c3RvbVNpZ25hdHVyZSA9IGxvY2F0b3IubG9naW5zLmdldFVzZXJDb250cm9sbGVyKCkucHJvcHMuY3VzdG9tRW1haWxTaWduYXR1cmVcblxuXHRcdGlmIChjdXJyZW50Q3VzdG9tU2lnbmF0dXJlID09PSBcIlwiICYmICFsb2NhdG9yLmxvZ2lucy5pc0VuYWJsZWQoRmVhdHVyZVR5cGUuRGlzYWJsZURlZmF1bHRTaWduYXR1cmUpKSB7XG5cdFx0XHRjdXJyZW50Q3VzdG9tU2lnbmF0dXJlID0gZGVmYXVsdFNpZ25hdHVyZVxuXHRcdH1cblxuXHRcdGxldCBzZWxlY3RlZFR5cGUgPSBsb2NhdG9yLmxvZ2lucy5nZXRVc2VyQ29udHJvbGxlcigpLnByb3BzLmVtYWlsU2lnbmF0dXJlVHlwZSBhcyBFbWFpbFNpZ25hdHVyZVR5cGVcblx0XHRjb25zdCBlZGl0b3IgPSBuZXcgSHRtbEVkaXRvcihcInByZXZpZXdfbGFiZWxcIilcblx0XHRcdC5zaG93Qm9yZGVycygpXG5cdFx0XHQuc2V0TWluSGVpZ2h0KDIwMClcblx0XHRcdC5zZXRWYWx1ZShnZXRTaWduYXR1cmUoc2VsZWN0ZWRUeXBlLCBkZWZhdWx0U2lnbmF0dXJlLCBjdXJyZW50Q3VzdG9tU2lnbmF0dXJlKSlcblx0XHRcdC5lbmFibGVUb29sYmFyKClcblx0XHRcdC5zZXRUb29sYmFyT3B0aW9ucyh7XG5cdFx0XHRcdGltYWdlQnV0dG9uQ2xpY2tIYW5kbGVyOiBpbnNlcnRJbmxpbmVJbWFnZUI2NENsaWNrSGFuZGxlcixcblx0XHRcdH0pXG5cdFx0XHQuc2V0RW5hYmxlZChzZWxlY3RlZFR5cGUgPT09IEVtYWlsU2lnbmF0dXJlVHlwZS5FTUFJTF9TSUdOQVRVUkVfVFlQRV9DVVNUT00pXG5cblx0XHRjb25zdCBzaWduYXR1cmVUeXBlcyA9IGdldFNpZ25hdHVyZVR5cGVzKHByb3BzKVxuXG5cdFx0Y29uc3QgZm9ybSA9IHtcblx0XHRcdHZpZXc6ICgpID0+IHtcblx0XHRcdFx0cmV0dXJuIFtcblx0XHRcdFx0XHRtKERyb3BEb3duU2VsZWN0b3IsIHtcblx0XHRcdFx0XHRcdGxhYmVsOiBcInVzZXJFbWFpbFNpZ25hdHVyZV9sYWJlbFwiLFxuXHRcdFx0XHRcdFx0aXRlbXM6IHNpZ25hdHVyZVR5cGVzLFxuXHRcdFx0XHRcdFx0c2VsZWN0ZWRWYWx1ZTogc2VsZWN0ZWRUeXBlLFxuXHRcdFx0XHRcdFx0c2VsZWN0aW9uQ2hhbmdlZEhhbmRsZXI6ICh0eXBlOiBFbWFpbFNpZ25hdHVyZVR5cGUpID0+IHtcblx0XHRcdFx0XHRcdFx0aWYgKHNlbGVjdGVkVHlwZSA9PT0gRW1haWxTaWduYXR1cmVUeXBlLkVNQUlMX1NJR05BVFVSRV9UWVBFX0NVU1RPTSkge1xuXHRcdFx0XHRcdFx0XHRcdGN1cnJlbnRDdXN0b21TaWduYXR1cmUgPSBlZGl0b3IuZ2V0VmFsdWUoKVxuXHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0c2VsZWN0ZWRUeXBlID0gdHlwZVxuXHRcdFx0XHRcdFx0XHRlZGl0b3Iuc2V0VmFsdWUoZ2V0U2lnbmF0dXJlKHR5cGUsIGRlZmF1bHRTaWduYXR1cmUsIGN1cnJlbnRDdXN0b21TaWduYXR1cmUpKVxuXHRcdFx0XHRcdFx0XHRlZGl0b3Iuc2V0RW5hYmxlZCh0eXBlID09PSBFbWFpbFNpZ25hdHVyZVR5cGUuRU1BSUxfU0lHTkFUVVJFX1RZUEVfQ1VTVE9NKVxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHR9KSxcblx0XHRcdFx0XHRtKGVkaXRvciksXG5cdFx0XHRcdF1cblx0XHRcdH0sXG5cdFx0fVxuXG5cdFx0bGV0IGVkaXRTaWduYXR1cmVPa0FjdGlvbiA9IChkaWFsb2c6IERpYWxvZykgPT4ge1xuXHRcdFx0Y29uc3QgcHJvcHMgPSBsb2NhdG9yLmxvZ2lucy5nZXRVc2VyQ29udHJvbGxlcigpLnByb3BzXG5cdFx0XHRjb25zdCBuZXdUeXBlID0gc2VsZWN0ZWRUeXBlXG5cdFx0XHRjb25zdCBuZXdDdXN0b21WYWx1ZSA9IGVkaXRvci5nZXRWYWx1ZSgpXG5cdFx0XHRjb25zdCBvbGRUeXBlID0gcHJvcHMuZW1haWxTaWduYXR1cmVUeXBlXG5cdFx0XHRjb25zdCBvbGRDdXN0b21WYWx1ZSA9IHByb3BzLmN1c3RvbUVtYWlsU2lnbmF0dXJlXG5cblx0XHRcdGNvbnN0IHVwZGF0ZVNpZ25hdHVyZSA9ICgpID0+IHtcblx0XHRcdFx0cHJvcHMuZW1haWxTaWduYXR1cmVUeXBlID0gbmV3VHlwZVxuXG5cdFx0XHRcdGlmIChuZXdUeXBlID09PSBFbWFpbFNpZ25hdHVyZVR5cGUuRU1BSUxfU0lHTkFUVVJFX1RZUEVfQ1VTVE9NKSB7XG5cdFx0XHRcdFx0cHJvcHMuY3VzdG9tRW1haWxTaWduYXR1cmUgPSBuZXdDdXN0b21WYWx1ZVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Y29uc3QgdXBkYXRlUHJvbWlzZSA9IGxvY2F0b3IuZW50aXR5Q2xpZW50LnVwZGF0ZShwcm9wcylcblx0XHRcdFx0cmV0dXJuIHNob3dQcm9ncmVzc0RpYWxvZyhcInBsZWFzZVdhaXRfbXNnXCIsIHVwZGF0ZVByb21pc2UpXG5cdFx0XHRcdFx0LnRoZW4oKCkgPT4gZGlhbG9nLmNsb3NlKCkpXG5cdFx0XHRcdFx0LmNhdGNoKFxuXHRcdFx0XHRcdFx0b2ZDbGFzcyhQYXlsb2FkVG9vTGFyZ2VFcnJvciwgKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRwcm9wcy5lbWFpbFNpZ25hdHVyZVR5cGUgPSBvbGRUeXBlXG5cdFx0XHRcdFx0XHRcdHByb3BzLmN1c3RvbUVtYWlsU2lnbmF0dXJlID0gb2xkQ3VzdG9tVmFsdWVcblx0XHRcdFx0XHRcdFx0cmV0dXJuIERpYWxvZy5tZXNzYWdlKFwicmVxdWVzdFRvb0xhcmdlX21zZ1wiKVxuXHRcdFx0XHRcdFx0fSksXG5cdFx0XHRcdFx0KVxuXHRcdFx0fVxuXG5cdFx0XHRpZiAobmV3VHlwZSA9PT0gb2xkVHlwZSAmJiAobmV3VHlwZSAhPT0gRW1haWxTaWduYXR1cmVUeXBlLkVNQUlMX1NJR05BVFVSRV9UWVBFX0NVU1RPTSB8fCBuZXdDdXN0b21WYWx1ZSA9PT0gb2xkQ3VzdG9tVmFsdWUpKSB7XG5cdFx0XHRcdHJldHVybiBkaWFsb2cuY2xvc2UoKVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0aWYgKG5ld1R5cGUgPT09IEVtYWlsU2lnbmF0dXJlVHlwZS5FTUFJTF9TSUdOQVRVUkVfVFlQRV9DVVNUT00gJiYgbmV3Q3VzdG9tVmFsdWUubGVuZ3RoID4gUkVDT01NRU5ERURfU0lHTkFUVVJFX1NJWkVfTElNSVQpIHtcblx0XHRcdFx0XHRjb25zdCBzaWduYXR1cmVTaXplS2IgPSBNYXRoLmZsb29yKG5ld0N1c3RvbVZhbHVlLmxlbmd0aCAvIDEwMjQpXG5cdFx0XHRcdFx0Y29uc3QgY29uZmlybUxhcmdlU2lnbmF0dXJlQXR0cnMgPSB7XG5cdFx0XHRcdFx0XHR0aXRsZTogZG93bmNhc3QoXCJ1c2VyRW1haWxTaWduYXR1cmVfbGFiZWxcIiksXG5cdFx0XHRcdFx0XHRjaGlsZDoge1xuXHRcdFx0XHRcdFx0XHR2aWV3OiAoKSA9PlxuXHRcdFx0XHRcdFx0XHRcdG0oXG5cdFx0XHRcdFx0XHRcdFx0XHRcInBcIixcblx0XHRcdFx0XHRcdFx0XHRcdGxhbmcuZ2V0KFwibGFyZ2VTaWduYXR1cmVfbXNnXCIsIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XCJ7MX1cIjogc2lnbmF0dXJlU2l6ZUtiLFxuXHRcdFx0XHRcdFx0XHRcdFx0fSksXG5cdFx0XHRcdFx0XHRcdFx0KSxcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRva0FjdGlvbjogKGRpYWxvZzogRGlhbG9nKSA9PiB7XG5cdFx0XHRcdFx0XHRcdGRpYWxvZy5jbG9zZSgpXG5cdFx0XHRcdFx0XHRcdHVwZGF0ZVNpZ25hdHVyZSgpXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0YWxsb3dPa1dpdGhSZXR1cm46IHRydWUsXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdERpYWxvZy5zaG93QWN0aW9uRGlhbG9nKGNvbmZpcm1MYXJnZVNpZ25hdHVyZUF0dHJzKVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHVwZGF0ZVNpZ25hdHVyZSgpXG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHREaWFsb2cuc2hvd0FjdGlvbkRpYWxvZyh7XG5cdFx0XHR0aXRsZTogXCJ1c2VyRW1haWxTaWduYXR1cmVfbGFiZWxcIixcblx0XHRcdGNoaWxkOiBmb3JtLFxuXHRcdFx0dHlwZTogRGlhbG9nVHlwZS5FZGl0TGFyZ2UsXG5cdFx0XHRva0FjdGlvbjogZWRpdFNpZ25hdHVyZU9rQWN0aW9uLFxuXHRcdH0pXG5cdH0pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRTaWduYXR1cmVUeXBlcyhwcm9wczogVHV0YW5vdGFQcm9wZXJ0aWVzKToge1xuXHRuYW1lOiBzdHJpbmdcblx0dmFsdWU6IHN0cmluZ1xufVtdIHtcblx0bGV0IHNpZ25hdHVyZVR5cGVzID0gW1xuXHRcdHtcblx0XHRcdG5hbWU6IGxhbmcuZ2V0KFwiZW1haWxTaWduYXR1cmVUeXBlQ3VzdG9tX21zZ1wiKSxcblx0XHRcdHZhbHVlOiBFbWFpbFNpZ25hdHVyZVR5cGUuRU1BSUxfU0lHTkFUVVJFX1RZUEVfQ1VTVE9NLFxuXHRcdH0sXG5cdFx0e1xuXHRcdFx0bmFtZTogbGFuZy5nZXQoXCJjb21ib0JveFNlbGVjdGlvbk5vbmVfbXNnXCIpLFxuXHRcdFx0dmFsdWU6IEVtYWlsU2lnbmF0dXJlVHlwZS5FTUFJTF9TSUdOQVRVUkVfVFlQRV9OT05FLFxuXHRcdH0sXG5cdF1cblxuXHRpZiAoIWxvY2F0b3IubG9naW5zLmlzRW5hYmxlZChGZWF0dXJlVHlwZS5EaXNhYmxlRGVmYXVsdFNpZ25hdHVyZSkgfHwgcHJvcHMuZW1haWxTaWduYXR1cmVUeXBlID09PSBFbWFpbFNpZ25hdHVyZVR5cGUuRU1BSUxfU0lHTkFUVVJFX1RZUEVfREVGQVVMVCkge1xuXHRcdHNpZ25hdHVyZVR5cGVzLnNwbGljZSgwLCAwLCB7XG5cdFx0XHRuYW1lOiBsYW5nLmdldChcImVtYWlsU2lnbmF0dXJlVHlwZURlZmF1bHRfbXNnXCIpLFxuXHRcdFx0dmFsdWU6IEVtYWlsU2lnbmF0dXJlVHlwZS5FTUFJTF9TSUdOQVRVUkVfVFlQRV9ERUZBVUxULFxuXHRcdH0pXG5cdH1cblxuXHRyZXR1cm4gc2lnbmF0dXJlVHlwZXNcbn1cblxuZnVuY3Rpb24gZ2V0U2lnbmF0dXJlKHR5cGU6IHN0cmluZywgZGVmYXVsdFNpZ25hdHVyZTogc3RyaW5nLCBjdXJyZW50Q3VzdG9tU2lnbmF0dXJlOiBzdHJpbmcpOiBzdHJpbmcge1xuXHRpZiAodHlwZSA9PT0gRW1haWxTaWduYXR1cmVUeXBlLkVNQUlMX1NJR05BVFVSRV9UWVBFX0RFRkFVTFQpIHtcblx0XHRyZXR1cm4gZGVmYXVsdFNpZ25hdHVyZVxuXHR9IGVsc2UgaWYgKHR5cGUgPT09IEVtYWlsU2lnbmF0dXJlVHlwZS5FTUFJTF9TSUdOQVRVUkVfVFlQRV9DVVNUT00pIHtcblx0XHRyZXR1cm4gY3VycmVudEN1c3RvbVNpZ25hdHVyZVxuXHR9IGVsc2Uge1xuXHRcdHJldHVybiBcIlwiXG5cdH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFNpZ25hdHVyZVR5cGUocHJvcHM6IFR1dGFub3RhUHJvcGVydGllcyk6IHtcblx0bmFtZTogc3RyaW5nXG5cdHZhbHVlOiBzdHJpbmdcbn0ge1xuXHRyZXR1cm4gbmV2ZXJOdWxsKGdldFNpZ25hdHVyZVR5cGVzKHByb3BzKS5maW5kKCh0KSA9PiB0LnZhbHVlID09PSBwcm9wcy5lbWFpbFNpZ25hdHVyZVR5cGUpKVxufVxuIiwiaW1wb3J0IHsgT0ZGTElORV9TVE9SQUdFX0RFRkFVTFRfVElNRV9SQU5HRV9EQVlTIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9hcGkvY29tbW9uL1R1dGFub3RhQ29uc3RhbnRzLmpzXCJcbmltcG9ydCB7IGlzT2ZmbGluZVN0b3JhZ2VBdmFpbGFibGUgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2FwaS9jb21tb24vRW52LmpzXCJcbmltcG9ydCB7IGFzc2VydCB9IGZyb20gXCJAdHV0YW8vdHV0YW5vdGEtdXRpbHNcIlxuaW1wb3J0IHsgVXNlckNvbnRyb2xsZXIgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2FwaS9tYWluL1VzZXJDb250cm9sbGVyXCJcbmltcG9ydCB7IERldmljZUNvbmZpZyB9IGZyb20gXCIuLi8uLi9jb21tb24vbWlzYy9EZXZpY2VDb25maWdcIlxuXG4vKipcbiAqIEEgbW9kZWwgZm9yIGhhbmRsaW5nIG9mZmxpbmUgc3RvcmFnZSBjb25maWd1cmF0aW9uXG4gKiBBY2Nlc3Npbmcgc2V0dGVycyBhbmQgZ2V0dGVycyB3aWxsIHRocm93IGlmIHlvdSBhcmUgbm90IGluIGEgY29udGV4dCB3aGVyZSBhbiBvZmZsaW5lIGRhdGFiYXNlIGlzIGF2YWlsYWJsZVxuICogU29tZSBsb2dpYyBpcyBkdXBsaWNhdGVkIGZyb20gT2ZmbGluZVN0b3JhZ2VcbiAqL1xuZXhwb3J0IGNsYXNzIE9mZmxpbmVTdG9yYWdlU2V0dGluZ3NNb2RlbCB7XG5cdHByaXZhdGUgX2lzSW5pdGlhbGl6ZWQgPSBmYWxzZVxuXHRwcml2YXRlIGlzRW5hYmxlZDogYm9vbGVhbiB8IG51bGwgPSBudWxsXG5cblx0Ly8gdGhlIGRlZmF1bHQgdmFsdWUgd2lsbCBuZXZlciBhY3R1YWxseSBiZSB1c2VkXG5cdHByaXZhdGUgdGltZVJhbmdlID0gT0ZGTElORV9TVE9SQUdFX0RFRkFVTFRfVElNRV9SQU5HRV9EQVlTXG5cblx0Ly8gTmF0aXZlIGludGVyZmFjZXMgYXJlIGxhenkgdG8gYWxsb3cgdXMgdG8gdW5jb25kaXRpb25hbGx5IGNvbnN0cnVjdCB0aGUgU2V0dGluZ3NNb2RlbFxuXHQvLyBJZiB3ZSBhcmUgbm90IGluIGEgbmF0aXZlIGNvbnRleHQsIHRoZW4gdGhleSBzaG91bGQgbmV2ZXIgYmUgYWNjZXNzZWRcblx0Y29uc3RydWN0b3IocHJpdmF0ZSByZWFkb25seSB1c2VyQ29udHJvbGxlcjogVXNlckNvbnRyb2xsZXIsIHByaXZhdGUgcmVhZG9ubHkgZGV2aWNlQ29uZmlnOiBEZXZpY2VDb25maWcpIHt9XG5cblx0YXZhaWxhYmxlKCk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiB0aGlzLl9pc0luaXRpYWxpemVkICYmIGlzT2ZmbGluZVN0b3JhZ2VBdmFpbGFibGUoKSAmJiAhIXRoaXMuaXNFbmFibGVkXG5cdH1cblxuXHRwcml2YXRlIGFzc2VydEF2YWlsYWJsZSgpIHtcblx0XHRhc3NlcnQodGhpcy5hdmFpbGFibGUoKSwgXCJOb3QgaW5pdGlhbGl6ZWQgb3Igbm90IGF2YWlsYWJsZVwiKVxuXHR9XG5cblx0LyoqXG5cdCAqIGdldCBzdG9yZWQgdGltZSByYW5nZSwgd2lsbCBlcnJvciBvdXQgaWYgb2ZmbGluZVN0b3JhZ2UgaXNuJ3QgYXZhaWxhYmxlLlxuXHQgKiBpZiB0aGUgdXNlciBhY2NvdW50IGlzIGZyZWUsIGFsd2F5cyByZXR1cm5zIHRoZSBkZWZhdWx0IHRpbWUgcmFuZ2UgYW5kXG5cdCAqIHJlc2V0cyB0aGUgc3RvcmVkIHZhbHVlIGlmIGl0J3MgZGlmZmVyZW50IGZyb20gdGhlIGRlZmF1bHQuXG5cdCAqL1xuXHRnZXRUaW1lUmFuZ2UoKTogbnVtYmVyIHtcblx0XHR0aGlzLmFzc2VydEF2YWlsYWJsZSgpXG5cdFx0aWYgKHRoaXMudXNlckNvbnRyb2xsZXIuaXNGcmVlQWNjb3VudCgpICYmIHRoaXMudGltZVJhbmdlICE9PSBPRkZMSU5FX1NUT1JBR0VfREVGQVVMVF9USU1FX1JBTkdFX0RBWVMpIHtcblx0XHRcdHRoaXMuc2V0VGltZVJhbmdlKE9GRkxJTkVfU1RPUkFHRV9ERUZBVUxUX1RJTUVfUkFOR0VfREFZUykuY2F0Y2goKGUpID0+IGNvbnNvbGUubG9nKFwiZXJyb3Igd2hpbGUgcmVzZXR0aW5nIHN0b3JhZ2UgdGltZSByYW5nZTpcIiwgZSkpXG5cdFx0XHR0aGlzLnRpbWVSYW5nZSA9IE9GRkxJTkVfU1RPUkFHRV9ERUZBVUxUX1RJTUVfUkFOR0VfREFZU1xuXHRcdFx0cmV0dXJuIE9GRkxJTkVfU1RPUkFHRV9ERUZBVUxUX1RJTUVfUkFOR0VfREFZU1xuXHRcdH1cblx0XHRyZXR1cm4gdGhpcy50aW1lUmFuZ2Vcblx0fVxuXG5cdGFzeW5jIHNldFRpbWVSYW5nZShkYXlzOiBudW1iZXIpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHR0aGlzLmFzc2VydEF2YWlsYWJsZSgpXG5cdFx0YXdhaXQgdGhpcy5kZXZpY2VDb25maWcuc2V0T2ZmbGluZVRpbWVSYW5nZURheXModGhpcy51c2VyQ29udHJvbGxlci51c2VySWQsIGRheXMpXG5cdFx0dGhpcy50aW1lUmFuZ2UgPSBkYXlzXG5cdH1cblxuXHRhc3luYyBpbml0KCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdHRoaXMuaXNFbmFibGVkID0gaXNPZmZsaW5lU3RvcmFnZUF2YWlsYWJsZSgpXG5cblx0XHRpZiAodGhpcy5pc0VuYWJsZWQpIHtcblx0XHRcdGNvbnN0IHN0b3JlZCA9IHRoaXMuZGV2aWNlQ29uZmlnLmdldE9mZmxpbmVUaW1lUmFuZ2VEYXlzKHRoaXMudXNlckNvbnRyb2xsZXIudXNlcklkKVxuXHRcdFx0aWYgKHN0b3JlZCAhPSBudWxsKSB7XG5cdFx0XHRcdHRoaXMudGltZVJhbmdlID0gc3RvcmVkXG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0dGhpcy5faXNJbml0aWFsaXplZCA9IHRydWVcblx0fVxufVxuIiwiaW1wb3J0IG0sIHsgQ2hpbGRyZW4gfSBmcm9tIFwibWl0aHJpbFwiXG5pbXBvcnQgeyBhc3NlcnRNYWluT3JOb2RlLCBpc0FwcCB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL2NvbW1vbi9FbnZcIlxuaW1wb3J0IHsgbGFuZyB9IGZyb20gXCIuLi8uLi9jb21tb24vbWlzYy9MYW5ndWFnZVZpZXdNb2RlbFwiXG5pbXBvcnQgdHlwZSB7IE1haWxib3hHcm91cFJvb3QsIE1haWxib3hQcm9wZXJ0aWVzLCBPdXRPZk9mZmljZU5vdGlmaWNhdGlvbiwgVHV0YW5vdGFQcm9wZXJ0aWVzIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9hcGkvZW50aXRpZXMvdHV0YW5vdGEvVHlwZVJlZnMuanNcIlxuaW1wb3J0IHtcblx0TWFpbGJveFByb3BlcnRpZXNUeXBlUmVmLFxuXHRNYWlsRm9sZGVyVHlwZVJlZixcblx0T3V0T2ZPZmZpY2VOb3RpZmljYXRpb25UeXBlUmVmLFxuXHRUdXRhbm90YVByb3BlcnRpZXNUeXBlUmVmLFxufSBmcm9tIFwiLi4vLi4vY29tbW9uL2FwaS9lbnRpdGllcy90dXRhbm90YS9UeXBlUmVmcy5qc1wiXG5pbXBvcnQgeyBDb25zdCwgRmVhdHVyZVR5cGUsIEluYm94UnVsZVR5cGUsIE9wZXJhdGlvblR5cGUsIFJlcG9ydE1vdmVkTWFpbHNUeXBlIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9hcGkvY29tbW9uL1R1dGFub3RhQ29uc3RhbnRzXCJcbmltcG9ydCB7IGFzc2VydE5vdE51bGwsIGNhcGl0YWxpemVGaXJzdExldHRlciwgZGVmZXIsIExhenlMb2FkZWQsIG5vT3AsIG9mQ2xhc3MsIHByb21pc2VNYXAgfSBmcm9tIFwiQHR1dGFvL3R1dGFub3RhLXV0aWxzXCJcbmltcG9ydCB7IGdldEluYm94UnVsZVR5cGVOYW1lIH0gZnJvbSBcIi4uL21haWwvbW9kZWwvSW5ib3hSdWxlSGFuZGxlclwiXG5pbXBvcnQgeyBNYWlsQWRkcmVzc1RhYmxlIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9zZXR0aW5ncy9tYWlsYWRkcmVzcy9NYWlsQWRkcmVzc1RhYmxlLmpzXCJcbmltcG9ydCB7IERpYWxvZyB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL2Jhc2UvRGlhbG9nXCJcbmltcG9ydCB7IEljb25zIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvYmFzZS9pY29ucy9JY29uc1wiXG5pbXBvcnQgeyBzaG93UHJvZ3Jlc3NEaWFsb2cgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2d1aS9kaWFsb2dzL1Byb2dyZXNzRGlhbG9nXCJcbmltcG9ydCB0eXBlIHsgTWFpbGJveERldGFpbCB9IGZyb20gXCIuLi8uLi9jb21tb24vbWFpbEZ1bmN0aW9uYWxpdHkvTWFpbGJveE1vZGVsLmpzXCJcbmltcG9ydCBzdHJlYW0gZnJvbSBcIm1pdGhyaWwvc3RyZWFtXCJcbmltcG9ydCBTdHJlYW0gZnJvbSBcIm1pdGhyaWwvc3RyZWFtXCJcblxuaW1wb3J0IHR5cGUgeyBEcm9wRG93blNlbGVjdG9yQXR0cnMgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2d1aS9iYXNlL0Ryb3BEb3duU2VsZWN0b3IuanNcIlxuaW1wb3J0IHsgRHJvcERvd25TZWxlY3RvciB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL2Jhc2UvRHJvcERvd25TZWxlY3Rvci5qc1wiXG5pbXBvcnQgdHlwZSB7IFRleHRGaWVsZEF0dHJzIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvYmFzZS9UZXh0RmllbGQuanNcIlxuaW1wb3J0IHsgVGV4dEZpZWxkLCBUZXh0RmllbGRUeXBlIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvYmFzZS9UZXh0RmllbGQuanNcIlxuaW1wb3J0IHR5cGUgeyBUYWJsZUF0dHJzLCBUYWJsZUxpbmVBdHRycyB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL2Jhc2UvVGFibGUuanNcIlxuaW1wb3J0IHsgQ29sdW1uV2lkdGgsIGNyZWF0ZVJvd0FjdGlvbnMsIFRhYmxlIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvYmFzZS9UYWJsZS5qc1wiXG5pbXBvcnQgKiBhcyBBZGRJbmJveFJ1bGVEaWFsb2cgZnJvbSBcIi4vQWRkSW5ib3hSdWxlRGlhbG9nXCJcbmltcG9ydCB7IGNyZWF0ZUluYm94UnVsZVRlbXBsYXRlIH0gZnJvbSBcIi4vQWRkSW5ib3hSdWxlRGlhbG9nXCJcbmltcG9ydCB7IEV4cGFuZGVyQnV0dG9uLCBFeHBhbmRlclBhbmVsIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvYmFzZS9FeHBhbmRlclwiXG5pbXBvcnQgeyBJbmRleGluZ05vdFN1cHBvcnRlZEVycm9yIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9hcGkvY29tbW9uL2Vycm9yL0luZGV4aW5nTm90U3VwcG9ydGVkRXJyb3JcIlxuaW1wb3J0IHsgTG9ja2VkRXJyb3IgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2FwaS9jb21tb24vZXJyb3IvUmVzdEVycm9yXCJcbmltcG9ydCB7IHNob3dFZGl0T3V0T2ZPZmZpY2VOb3RpZmljYXRpb25EaWFsb2cgfSBmcm9tIFwiLi9FZGl0T3V0T2ZPZmZpY2VOb3RpZmljYXRpb25EaWFsb2dcIlxuaW1wb3J0IHsgZm9ybWF0QWN0aXZhdGVTdGF0ZSwgbG9hZE91dE9mT2ZmaWNlTm90aWZpY2F0aW9uIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9taXNjL091dE9mT2ZmaWNlTm90aWZpY2F0aW9uVXRpbHNcIlxuaW1wb3J0IHsgZ2V0U2lnbmF0dXJlVHlwZSwgc2hvdyBhcyBzaG93RWRpdFNpZ25hdHVyZURpYWxvZyB9IGZyb20gXCIuL0VkaXRTaWduYXR1cmVEaWFsb2dcIlxuaW1wb3J0IHsgT2ZmbGluZVN0b3JhZ2VTZXR0aW5nc01vZGVsIH0gZnJvbSBcIi4vT2ZmbGluZVN0b3JhZ2VTZXR0aW5nc1wiXG5pbXBvcnQgeyBzaG93Tm90QXZhaWxhYmxlRm9yRnJlZURpYWxvZyB9IGZyb20gXCIuLi8uLi9jb21tb24vbWlzYy9TdWJzY3JpcHRpb25EaWFsb2dzXCJcbmltcG9ydCB7IGRldmljZUNvbmZpZywgTGlzdEF1dG9TZWxlY3RCZWhhdmlvciB9IGZyb20gXCIuLi8uLi9jb21tb24vbWlzYy9EZXZpY2VDb25maWdcIlxuaW1wb3J0IHsgSWNvbkJ1dHRvbiwgSWNvbkJ1dHRvbkF0dHJzIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvYmFzZS9JY29uQnV0dG9uLmpzXCJcbmltcG9ydCB7IEJ1dHRvblNpemUgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2d1aS9iYXNlL0J1dHRvblNpemUuanNcIlxuaW1wb3J0IHsgZ2V0UmVwb3J0TW92ZWRNYWlsc1R5cGUgfSBmcm9tIFwiLi4vLi4vY29tbW9uL21pc2MvTWFpbGJveFByb3BlcnRpZXNVdGlscy5qc1wiXG5pbXBvcnQgeyBNYWlsQWRkcmVzc1RhYmxlTW9kZWwgfSBmcm9tIFwiLi4vLi4vY29tbW9uL3NldHRpbmdzL21haWxhZGRyZXNzL01haWxBZGRyZXNzVGFibGVNb2RlbC5qc1wiXG5pbXBvcnQgeyBnZXRFbmFibGVkTWFpbEFkZHJlc3Nlc0Zvckdyb3VwSW5mbyB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL2NvbW1vbi91dGlscy9Hcm91cFV0aWxzLmpzXCJcbmltcG9ydCB7IGZvcm1hdFN0b3JhZ2VTaXplIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9taXNjL0Zvcm1hdHRlci5qc1wiXG5pbXBvcnQgeyBDdXN0b21lckluZm8gfSBmcm9tIFwiLi4vLi4vY29tbW9uL2FwaS9lbnRpdGllcy9zeXMvVHlwZVJlZnMuanNcIlxuaW1wb3J0IHsgRW50aXR5VXBkYXRlRGF0YSwgaXNVcGRhdGVGb3JUeXBlUmVmIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9hcGkvY29tbW9uL3V0aWxzL0VudGl0eVVwZGF0ZVV0aWxzLmpzXCJcbmltcG9ydCB7IGdldE1haWxBZGRyZXNzRGlzcGxheVRleHQgfSBmcm9tIFwiLi4vLi4vY29tbW9uL21haWxGdW5jdGlvbmFsaXR5L1NoYXJlZE1haWxVdGlscy5qc1wiXG5pbXBvcnQgeyBVcGRhdGFibGVTZXR0aW5nc1ZpZXdlciB9IGZyb20gXCIuLi8uLi9jb21tb24vc2V0dGluZ3MvSW50ZXJmYWNlcy5qc1wiXG5pbXBvcnQgeyBtYWlsTG9jYXRvciB9IGZyb20gXCIuLi9tYWlsTG9jYXRvci5qc1wiXG5pbXBvcnQgeyBnZXREZWZhdWx0U2VuZGVyRnJvbVVzZXIsIGdldEZvbGRlck5hbWUgfSBmcm9tIFwiLi4vbWFpbC9tb2RlbC9NYWlsVXRpbHMuanNcIlxuaW1wb3J0IHsgZWxlbWVudElkUGFydCB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL2NvbW1vbi91dGlscy9FbnRpdHlVdGlscy5qc1wiXG5cbmFzc2VydE1haW5Pck5vZGUoKVxuXG5leHBvcnQgY2xhc3MgTWFpbFNldHRpbmdzVmlld2VyIGltcGxlbWVudHMgVXBkYXRhYmxlU2V0dGluZ3NWaWV3ZXIge1xuXHRfc2lnbmF0dXJlOiBTdHJlYW08c3RyaW5nPlxuXHRfbWFpbGJveFByb3BlcnRpZXM6IExhenlMb2FkZWQ8TWFpbGJveFByb3BlcnRpZXM+XG5cdF9yZXBvcnRNb3ZlZE1haWxzOiBSZXBvcnRNb3ZlZE1haWxzVHlwZVxuXHRfZGVmYXVsdFNlbmRlcjogc3RyaW5nXG5cdF9kZWZhdWx0VW5jb25maWRlbnRpYWw6IGJvb2xlYW4gfCBudWxsXG5cdF9zZW5kUGxhaW50ZXh0OiBib29sZWFuIHwgbnVsbFxuXHRfbm9BdXRvbWF0aWNDb250YWN0czogYm9vbGVhbiB8IG51bGxcblx0X2VuYWJsZU1haWxJbmRleGluZzogYm9vbGVhbiB8IG51bGxcblx0X2luYm94UnVsZXNUYWJsZUxpbmVzOiBTdHJlYW08QXJyYXk8VGFibGVMaW5lQXR0cnM+PlxuXHRfaW5ib3hSdWxlc0V4cGFuZGVkOiBTdHJlYW08Ym9vbGVhbj5cblx0X2luZGV4U3RhdGVXYXRjaDogU3RyZWFtPGFueT4gfCBudWxsXG5cdF9vdXRPZk9mZmljZU5vdGlmaWNhdGlvbjogTGF6eUxvYWRlZDxPdXRPZk9mZmljZU5vdGlmaWNhdGlvbiB8IG51bGw+XG5cdF9vdXRPZk9mZmljZVN0YXR1czogU3RyZWFtPHN0cmluZz4gLy8gc3RvcmVzIHRoZSBzdGF0dXMgbGFiZWwsIGJhc2VkIG9uIHdoZXRoZXIgdGhlIG5vdGlmaWNhdGlvbiBpcy8gb3Igd2lsbCByZWFsbHkgYmUgYWN0aXZhdGVkIChjaGVja2luZyBzdGFydCB0aW1lLyBlbmQgdGltZSlcblx0cHJpdmF0ZSBfc3RvcmFnZUZpZWxkVmFsdWU6IFN0cmVhbTxzdHJpbmc+XG5cdHByaXZhdGUgY3VzdG9tZXJJbmZvOiBDdXN0b21lckluZm8gfCBudWxsXG5cdHByaXZhdGUgbWFpbEFkZHJlc3NUYWJsZU1vZGVsOiBNYWlsQWRkcmVzc1RhYmxlTW9kZWwgfCBudWxsID0gbnVsbFxuXHRwcml2YXRlIG1haWxBZGRyZXNzVGFibGVFeHBhbmRlZDogYm9vbGVhblxuXHRwcml2YXRlIG9mZmxpbmVTdG9yYWdlU2V0dGluZ3MgPSBuZXcgT2ZmbGluZVN0b3JhZ2VTZXR0aW5nc01vZGVsKG1haWxMb2NhdG9yLmxvZ2lucy5nZXRVc2VyQ29udHJvbGxlcigpLCBkZXZpY2VDb25maWcpXG5cblx0Y29uc3RydWN0b3IoKSB7XG5cdFx0dGhpcy5fZGVmYXVsdFNlbmRlciA9IGdldERlZmF1bHRTZW5kZXJGcm9tVXNlcihtYWlsTG9jYXRvci5sb2dpbnMuZ2V0VXNlckNvbnRyb2xsZXIoKSlcblx0XHR0aGlzLl9zaWduYXR1cmUgPSBzdHJlYW0oZ2V0U2lnbmF0dXJlVHlwZShtYWlsTG9jYXRvci5sb2dpbnMuZ2V0VXNlckNvbnRyb2xsZXIoKS5wcm9wcykubmFtZSlcblx0XHR0aGlzLl9yZXBvcnRNb3ZlZE1haWxzID0gZ2V0UmVwb3J0TW92ZWRNYWlsc1R5cGUobnVsbCkgLy8gbG9hZGVkIGxhdGVyXG5cblx0XHR0aGlzLl9kZWZhdWx0VW5jb25maWRlbnRpYWwgPSBtYWlsTG9jYXRvci5sb2dpbnMuZ2V0VXNlckNvbnRyb2xsZXIoKS5wcm9wcy5kZWZhdWx0VW5jb25maWRlbnRpYWxcblx0XHR0aGlzLl9zZW5kUGxhaW50ZXh0ID0gbWFpbExvY2F0b3IubG9naW5zLmdldFVzZXJDb250cm9sbGVyKCkucHJvcHMuc2VuZFBsYWludGV4dE9ubHlcblx0XHR0aGlzLl9ub0F1dG9tYXRpY0NvbnRhY3RzID0gbWFpbExvY2F0b3IubG9naW5zLmdldFVzZXJDb250cm9sbGVyKCkucHJvcHMubm9BdXRvbWF0aWNDb250YWN0c1xuXHRcdHRoaXMuX2VuYWJsZU1haWxJbmRleGluZyA9IG1haWxMb2NhdG9yLnNlYXJjaC5pbmRleFN0YXRlKCkubWFpbEluZGV4RW5hYmxlZFxuXHRcdHRoaXMuX2luYm94UnVsZXNFeHBhbmRlZCA9IHN0cmVhbTxib29sZWFuPihmYWxzZSlcblx0XHR0aGlzLm1haWxBZGRyZXNzVGFibGVFeHBhbmRlZCA9IGZhbHNlXG5cdFx0dGhpcy5faW5ib3hSdWxlc1RhYmxlTGluZXMgPSBzdHJlYW08QXJyYXk8VGFibGVMaW5lQXR0cnM+PihbXSlcblx0XHR0aGlzLl9vdXRPZk9mZmljZVN0YXR1cyA9IHN0cmVhbShsYW5nLmdldChcImRlYWN0aXZhdGVkX2xhYmVsXCIpKVxuXHRcdHRoaXMuX2luZGV4U3RhdGVXYXRjaCA9IG51bGxcblx0XHQvLyBub3JtYWxseSB3ZSB3b3VsZCBtYXliZSBsaWtlIHRvIGdldCBpdCBhcyBhbiBhcmd1bWVudCBidXQgdGhlc2Ugdmlld2VycyBhcmUgY3JlYXRlZCBpbiBhbiBvZGQgd2F5XG5cdFx0bWFpbExvY2F0b3IubWFpbEFkZHJlc3NUYWJsZU1vZGVsRm9yT3duTWFpbGJveCgpLnRoZW4oKG1vZGVsKSA9PiB7XG5cdFx0XHR0aGlzLm1haWxBZGRyZXNzVGFibGVNb2RlbCA9IG1vZGVsXG5cdFx0XHRtLnJlZHJhdygpXG5cdFx0fSlcblx0XHRtLnJlZHJhdygpXG5cblx0XHR0aGlzLl91cGRhdGVJbmJveFJ1bGVzKG1haWxMb2NhdG9yLmxvZ2lucy5nZXRVc2VyQ29udHJvbGxlcigpLnByb3BzKVxuXG5cdFx0dGhpcy5fbWFpbGJveFByb3BlcnRpZXMgPSBuZXcgTGF6eUxvYWRlZChhc3luYyAoKSA9PiB7XG5cdFx0XHRjb25zdCBtYWlsYm94R3JvdXBSb290ID0gYXdhaXQgdGhpcy5nZXRNYWlsYm94R3JvdXBSb290KClcblx0XHRcdHJldHVybiBtYWlsTG9jYXRvci5tYWlsYm94TW9kZWwuZ2V0TWFpbGJveFByb3BlcnRpZXMobWFpbGJveEdyb3VwUm9vdClcblx0XHR9KVxuXG5cdFx0dGhpcy5fdXBkYXRlTWFpbGJveFByb3BlcnRpZXNTZXR0aW5ncygpXG5cblx0XHR0aGlzLl9vdXRPZk9mZmljZU5vdGlmaWNhdGlvbiA9IG5ldyBMYXp5TG9hZGVkKCgpID0+IGxvYWRPdXRPZk9mZmljZU5vdGlmaWNhdGlvbigpLCBudWxsKVxuXG5cdFx0dGhpcy5fb3V0T2ZPZmZpY2VOb3RpZmljYXRpb24uZ2V0QXN5bmMoKS50aGVuKCgpID0+IHRoaXMuX3VwZGF0ZU91dE9mT2ZmaWNlTm90aWZpY2F0aW9uKCkpXG5cblx0XHR0aGlzLmN1c3RvbWVySW5mbyA9IG51bGxcblx0XHR0aGlzLl9zdG9yYWdlRmllbGRWYWx1ZSA9IHN0cmVhbShcIlwiKVxuXG5cdFx0dGhpcy5vZmZsaW5lU3RvcmFnZVNldHRpbmdzLmluaXQoKS50aGVuKCgpID0+IG0ucmVkcmF3KCkpXG5cdH1cblxuXHRhc3luYyBvbmluaXQoKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0dGhpcy5jdXN0b21lckluZm8gPSBhd2FpdCBtYWlsTG9jYXRvci5sb2dpbnMuZ2V0VXNlckNvbnRyb2xsZXIoKS5sb2FkQ3VzdG9tZXJJbmZvKClcblx0XHR0aGlzLnVwZGF0ZVN0b3JhZ2VGaWVsZCh0aGlzLmN1c3RvbWVySW5mbykudGhlbigoKSA9PiBtLnJlZHJhdygpKVxuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyBnZXRNYWlsYm94R3JvdXBSb290KCk6IFByb21pc2U8TWFpbGJveEdyb3VwUm9vdD4ge1xuXHRcdC8vIEZvciBub3cgd2UgYXNzdW1lIHVzZXIgbWFpbGJveCwgaW4gdGhlIGZ1dHVyZSB3ZSBzaG91bGQgc3BlY2lmeSB3aGljaCBtYWlsYm94IHdlIGFyZSBjb25maWd1cmluZ1xuXHRcdGNvbnN0IHsgbWFpbGJveEdyb3VwUm9vdCB9ID0gYXdhaXQgbWFpbExvY2F0b3IubWFpbGJveE1vZGVsLmdldFVzZXJNYWlsYm94RGV0YWlscygpXG5cdFx0cmV0dXJuIG1haWxib3hHcm91cFJvb3Rcblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgdXBkYXRlU3RvcmFnZUZpZWxkKGN1c3RvbWVySW5mbzogQ3VzdG9tZXJJbmZvKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0Y29uc3QgdXNlciA9IG1haWxMb2NhdG9yLmxvZ2lucy5nZXRVc2VyQ29udHJvbGxlcigpLnVzZXJcblx0XHRjb25zdCB1c2VkU3RvcmFnZSA9IGZvcm1hdFN0b3JhZ2VTaXplKE51bWJlcihhd2FpdCBtYWlsTG9jYXRvci51c2VyTWFuYWdlbWVudEZhY2FkZS5yZWFkVXNlZFVzZXJTdG9yYWdlKHVzZXIpKSlcblx0XHRjb25zdCB0b3RhbFN0b3JhZ2UgPSBmb3JtYXRTdG9yYWdlU2l6ZShOdW1iZXIoY3VzdG9tZXJJbmZvLnBlclVzZXJTdG9yYWdlQ2FwYWNpdHkpICogQ29uc3QuTUVNT1JZX0dCX0ZBQ1RPUilcblx0XHR0aGlzLl9zdG9yYWdlRmllbGRWYWx1ZShcblx0XHRcdGxhbmcuZ2V0KFwiYW1vdW50VXNlZE9mX2xhYmVsXCIsIHtcblx0XHRcdFx0XCJ7YW1vdW50fVwiOiB1c2VkU3RvcmFnZSxcblx0XHRcdFx0XCJ7dG90YWxBbW91bnR9XCI6IHRvdGFsU3RvcmFnZSxcblx0XHRcdH0pLFxuXHRcdClcblx0fVxuXG5cdHZpZXcoKTogQ2hpbGRyZW4ge1xuXHRcdHRoaXMuX2RlZmF1bHRTZW5kZXIgPSBnZXREZWZhdWx0U2VuZGVyRnJvbVVzZXIobWFpbExvY2F0b3IubG9naW5zLmdldFVzZXJDb250cm9sbGVyKCkpXG5cdFx0Y29uc3QgZGVmYXVsdFNlbmRlckF0dHJzOiBEcm9wRG93blNlbGVjdG9yQXR0cnM8c3RyaW5nPiA9IHtcblx0XHRcdGxhYmVsOiBcImRlZmF1bHRTZW5kZXJNYWlsQWRkcmVzc19sYWJlbFwiLFxuXHRcdFx0aXRlbXM6IGdldEVuYWJsZWRNYWlsQWRkcmVzc2VzRm9yR3JvdXBJbmZvKG1haWxMb2NhdG9yLmxvZ2lucy5nZXRVc2VyQ29udHJvbGxlcigpLnVzZXJHcm91cEluZm8pXG5cdFx0XHRcdC5zb3J0KClcblx0XHRcdFx0Lm1hcCgoYSkgPT4gKHtcblx0XHRcdFx0XHRuYW1lOiBhLFxuXHRcdFx0XHRcdHZhbHVlOiBhLFxuXHRcdFx0XHR9KSksXG5cdFx0XHRzZWxlY3RlZFZhbHVlOiB0aGlzLl9kZWZhdWx0U2VuZGVyLFxuXHRcdFx0c2VsZWN0ZWRWYWx1ZURpc3BsYXk6IGdldE1haWxBZGRyZXNzRGlzcGxheVRleHQoXG5cdFx0XHRcdHRoaXMubWFpbEFkZHJlc3NUYWJsZU1vZGVsPy5hZGRyZXNzZXMoKS5maW5kKCh7IGFkZHJlc3MgfSkgPT4gYWRkcmVzcyA9PT0gdGhpcy5fZGVmYXVsdFNlbmRlcik/Lm5hbWUgPz8gXCJcIixcblx0XHRcdFx0dGhpcy5fZGVmYXVsdFNlbmRlcixcblx0XHRcdFx0ZmFsc2UsXG5cdFx0XHQpLFxuXHRcdFx0c2VsZWN0aW9uQ2hhbmdlZEhhbmRsZXI6IChkZWZhdWx0U2VuZGVyQWRkcmVzcykgPT4ge1xuXHRcdFx0XHRtYWlsTG9jYXRvci5sb2dpbnMuZ2V0VXNlckNvbnRyb2xsZXIoKS5wcm9wcy5kZWZhdWx0U2VuZGVyID0gZGVmYXVsdFNlbmRlckFkZHJlc3Ncblx0XHRcdFx0bWFpbExvY2F0b3IuZW50aXR5Q2xpZW50LnVwZGF0ZShtYWlsTG9jYXRvci5sb2dpbnMuZ2V0VXNlckNvbnRyb2xsZXIoKS5wcm9wcylcblx0XHRcdH0sXG5cdFx0XHRoZWxwTGFiZWw6ICgpID0+IGxhbmcuZ2V0KFwiZGVmYXVsdFNlbmRlck1haWxBZGRyZXNzSW5mb19tc2dcIiksXG5cdFx0XHRkcm9wZG93bldpZHRoOiAzMDAsXG5cdFx0fVxuXG5cdFx0Y29uc3QgY2hhbmdlU2lnbmF0dXJlQnV0dG9uQXR0cnM6IEljb25CdXR0b25BdHRycyA9IHtcblx0XHRcdHRpdGxlOiBcInVzZXJFbWFpbFNpZ25hdHVyZV9sYWJlbFwiLFxuXHRcdFx0Y2xpY2s6ICgpID0+IHNob3dFZGl0U2lnbmF0dXJlRGlhbG9nKG1haWxMb2NhdG9yLmxvZ2lucy5nZXRVc2VyQ29udHJvbGxlcigpLnByb3BzKSxcblx0XHRcdGljb246IEljb25zLkVkaXQsXG5cdFx0XHRzaXplOiBCdXR0b25TaXplLkNvbXBhY3QsXG5cdFx0fVxuXHRcdGNvbnN0IHNpZ25hdHVyZUF0dHJzOiBUZXh0RmllbGRBdHRycyA9IHtcblx0XHRcdGxhYmVsOiBcInVzZXJFbWFpbFNpZ25hdHVyZV9sYWJlbFwiLFxuXHRcdFx0dmFsdWU6IHRoaXMuX3NpZ25hdHVyZSgpLFxuXHRcdFx0b25pbnB1dDogdGhpcy5fc2lnbmF0dXJlLFxuXHRcdFx0aXNSZWFkT25seTogdHJ1ZSxcblx0XHRcdGluamVjdGlvbnNSaWdodDogKCkgPT4gW20oSWNvbkJ1dHRvbiwgY2hhbmdlU2lnbmF0dXJlQnV0dG9uQXR0cnMpXSxcblx0XHR9XG5cblx0XHRjb25zdCBlZGl0T3V0T2ZPZmZpY2VOb3RpZmljYXRpb25CdXR0b25BdHRyczogSWNvbkJ1dHRvbkF0dHJzID0ge1xuXHRcdFx0dGl0bGU6IFwib3V0T2ZPZmZpY2VOb3RpZmljYXRpb25fdGl0bGVcIixcblx0XHRcdGNsaWNrOiAoKSA9PiB7XG5cdFx0XHRcdHRoaXMuX291dE9mT2ZmaWNlTm90aWZpY2F0aW9uLmdldEFzeW5jKCkudGhlbigobm90aWZpY2F0aW9uKSA9PiBzaG93RWRpdE91dE9mT2ZmaWNlTm90aWZpY2F0aW9uRGlhbG9nKG5vdGlmaWNhdGlvbikpXG5cdFx0XHR9LFxuXHRcdFx0aWNvbjogSWNvbnMuRWRpdCxcblx0XHRcdHNpemU6IEJ1dHRvblNpemUuQ29tcGFjdCxcblx0XHR9XG5cblx0XHRjb25zdCBvdXRPZk9mZmljZUF0dHJzOiBUZXh0RmllbGRBdHRycyA9IHtcblx0XHRcdGxhYmVsOiBcIm91dE9mT2ZmaWNlTm90aWZpY2F0aW9uX3RpdGxlXCIsXG5cdFx0XHR2YWx1ZTogdGhpcy5fb3V0T2ZPZmZpY2VTdGF0dXMoKSxcblx0XHRcdG9uaW5wdXQ6IHRoaXMuX291dE9mT2ZmaWNlU3RhdHVzLFxuXHRcdFx0aXNSZWFkT25seTogdHJ1ZSxcblx0XHRcdGluamVjdGlvbnNSaWdodDogKCkgPT4gW20oSWNvbkJ1dHRvbiwgZWRpdE91dE9mT2ZmaWNlTm90aWZpY2F0aW9uQnV0dG9uQXR0cnMpXSxcblx0XHR9XG5cblx0XHRjb25zdCBkZWZhdWx0VW5jb25maWRlbnRpYWxBdHRyczogRHJvcERvd25TZWxlY3RvckF0dHJzPGJvb2xlYW4+ID0ge1xuXHRcdFx0bGFiZWw6IFwiZGVmYXVsdEV4dGVybmFsRGVsaXZlcnlfbGFiZWxcIixcblx0XHRcdGl0ZW1zOiBbXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRuYW1lOiBsYW5nLmdldChcImNvbmZpZGVudGlhbF9hY3Rpb25cIiksXG5cdFx0XHRcdFx0dmFsdWU6IGZhbHNlLFxuXHRcdFx0XHR9LFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0bmFtZTogbGFuZy5nZXQoXCJub25Db25maWRlbnRpYWxfYWN0aW9uXCIpLFxuXHRcdFx0XHRcdHZhbHVlOiB0cnVlLFxuXHRcdFx0XHR9LFxuXHRcdFx0XSxcblx0XHRcdHNlbGVjdGVkVmFsdWU6IHRoaXMuX2RlZmF1bHRVbmNvbmZpZGVudGlhbCxcblx0XHRcdHNlbGVjdGlvbkNoYW5nZWRIYW5kbGVyOiAodikgPT4ge1xuXHRcdFx0XHRtYWlsTG9jYXRvci5sb2dpbnMuZ2V0VXNlckNvbnRyb2xsZXIoKS5wcm9wcy5kZWZhdWx0VW5jb25maWRlbnRpYWwgPSB2XG5cdFx0XHRcdG1haWxMb2NhdG9yLmVudGl0eUNsaWVudC51cGRhdGUobWFpbExvY2F0b3IubG9naW5zLmdldFVzZXJDb250cm9sbGVyKCkucHJvcHMpXG5cdFx0XHR9LFxuXHRcdFx0aGVscExhYmVsOiAoKSA9PiBsYW5nLmdldChcImRlZmF1bHRFeHRlcm5hbERlbGl2ZXJ5SW5mb19tc2dcIiksXG5cdFx0XHRkcm9wZG93bldpZHRoOiAyNTAsXG5cdFx0fVxuXHRcdGNvbnN0IHNlbmRQbGFpbnRleHRBdHRyczogRHJvcERvd25TZWxlY3RvckF0dHJzPGJvb2xlYW4+ID0ge1xuXHRcdFx0bGFiZWw6IFwiZXh0ZXJuYWxGb3JtYXR0aW5nX2xhYmVsXCIsXG5cdFx0XHRoZWxwTGFiZWw6ICgpID0+IGxhbmcuZ2V0KFwiZXh0ZXJuYWxGb3JtYXR0aW5nSW5mb19tc2dcIiksXG5cdFx0XHRpdGVtczogW1xuXHRcdFx0XHR7XG5cdFx0XHRcdFx0bmFtZTogbGFuZy5nZXQoXCJodG1sX2FjdGlvblwiKSxcblx0XHRcdFx0XHR2YWx1ZTogZmFsc2UsXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRuYW1lOiBsYW5nLmdldChcInBsYWludGV4dF9hY3Rpb25cIiksXG5cdFx0XHRcdFx0dmFsdWU6IHRydWUsXG5cdFx0XHRcdH0sXG5cdFx0XHRdLFxuXHRcdFx0c2VsZWN0ZWRWYWx1ZTogdGhpcy5fc2VuZFBsYWludGV4dCxcblx0XHRcdHNlbGVjdGlvbkNoYW5nZWRIYW5kbGVyOiAodikgPT4ge1xuXHRcdFx0XHRtYWlsTG9jYXRvci5sb2dpbnMuZ2V0VXNlckNvbnRyb2xsZXIoKS5wcm9wcy5zZW5kUGxhaW50ZXh0T25seSA9IHZcblx0XHRcdFx0bWFpbExvY2F0b3IuZW50aXR5Q2xpZW50LnVwZGF0ZShtYWlsTG9jYXRvci5sb2dpbnMuZ2V0VXNlckNvbnRyb2xsZXIoKS5wcm9wcylcblx0XHRcdH0sXG5cdFx0XHRkcm9wZG93bldpZHRoOiAyNTAsXG5cdFx0fVxuXHRcdGNvbnN0IGVuYWJsZU1haWxJbmRleGluZ0F0dHJzOiBEcm9wRG93blNlbGVjdG9yQXR0cnM8Ym9vbGVhbj4gPSB7XG5cdFx0XHRsYWJlbDogXCJzZWFyY2hNYWlsYm94X2xhYmVsXCIsXG5cdFx0XHRoZWxwTGFiZWw6ICgpID0+IGxhbmcuZ2V0KFwiZW5hYmxlU2VhcmNoTWFpbGJveF9tc2dcIiksXG5cdFx0XHRpdGVtczogW1xuXHRcdFx0XHR7XG5cdFx0XHRcdFx0bmFtZTogbGFuZy5nZXQoXCJhY3RpdmF0ZWRfbGFiZWxcIiksXG5cdFx0XHRcdFx0dmFsdWU6IHRydWUsXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRuYW1lOiBsYW5nLmdldChcImRlYWN0aXZhdGVkX2xhYmVsXCIpLFxuXHRcdFx0XHRcdHZhbHVlOiBmYWxzZSxcblx0XHRcdFx0fSxcblx0XHRcdF0sXG5cdFx0XHRzZWxlY3RlZFZhbHVlOiB0aGlzLl9lbmFibGVNYWlsSW5kZXhpbmcsXG5cdFx0XHRzZWxlY3Rpb25DaGFuZ2VkSGFuZGxlcjogKG1haWxJbmRleEVuYWJsZWQpID0+IHtcblx0XHRcdFx0aWYgKG1haWxJbmRleEVuYWJsZWQpIHtcblx0XHRcdFx0XHRzaG93UHJvZ3Jlc3NEaWFsb2coXCJwbGVhc2VXYWl0X21zZ1wiLCBtYWlsTG9jYXRvci5pbmRleGVyRmFjYWRlLmVuYWJsZU1haWxJbmRleGluZygpKS5jYXRjaChcblx0XHRcdFx0XHRcdG9mQ2xhc3MoSW5kZXhpbmdOb3RTdXBwb3J0ZWRFcnJvciwgKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHREaWFsb2cubWVzc2FnZShpc0FwcCgpID8gXCJzZWFyY2hEaXNhYmxlZEFwcF9tc2dcIiA6IFwic2VhcmNoRGlzYWJsZWRfbXNnXCIpXG5cdFx0XHRcdFx0XHR9KSxcblx0XHRcdFx0XHQpXG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0c2hvd1Byb2dyZXNzRGlhbG9nKFwicGxlYXNlV2FpdF9tc2dcIiwgbWFpbExvY2F0b3IuaW5kZXhlckZhY2FkZS5kaXNhYmxlTWFpbEluZGV4aW5nKCkpXG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0XHRkcm9wZG93bldpZHRoOiAyNTAsXG5cdFx0fVxuXHRcdGNvbnN0IGJlaGF2aW9yQWZ0ZXJNb3ZlRW1haWxBY3Rpb246IERyb3BEb3duU2VsZWN0b3JBdHRyczxMaXN0QXV0b1NlbGVjdEJlaGF2aW9yPiA9IHtcblx0XHRcdGxhYmVsOiBcImJlaGF2aW9yQWZ0ZXJNb3ZpbmdFbWFpbF9sYWJlbFwiLFxuXHRcdFx0aGVscExhYmVsOiAoKSA9PiBcIlwiLFxuXHRcdFx0aXRlbXM6IFtcblx0XHRcdFx0e1xuXHRcdFx0XHRcdG5hbWU6IGxhbmcuZ2V0KFwic2hvd09sZGVyX2xhYmVsXCIpLFxuXHRcdFx0XHRcdHZhbHVlOiBMaXN0QXV0b1NlbGVjdEJlaGF2aW9yLk9MREVSLFxuXHRcdFx0XHR9LFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0bmFtZTogbGFuZy5nZXQoXCJzaG93TmV3ZXJfbGFiZWxcIiksXG5cdFx0XHRcdFx0dmFsdWU6IExpc3RBdXRvU2VsZWN0QmVoYXZpb3IuTkVXRVIsXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRuYW1lOiBsYW5nLmdldChcInNob3dOb25lX2xhYmVsXCIpLFxuXHRcdFx0XHRcdHZhbHVlOiBMaXN0QXV0b1NlbGVjdEJlaGF2aW9yLk5PTkUsXG5cdFx0XHRcdH0sXG5cdFx0XHRdLFxuXHRcdFx0c2VsZWN0ZWRWYWx1ZTogZGV2aWNlQ29uZmlnLmdldE1haWxBdXRvU2VsZWN0QmVoYXZpb3IoKSxcblx0XHRcdHNlbGVjdGlvbkNoYW5nZWRIYW5kbGVyOiAoYmVoYXZpb3IpID0+IGRldmljZUNvbmZpZy5zZXRNYWlsQXV0b1NlbGVjdEJlaGF2aW9yKGJlaGF2aW9yKSxcblx0XHRcdGRyb3Bkb3duV2lkdGg6IDI1MCxcblx0XHR9XG5cdFx0Y29uc3QgcmVwb3J0TW92ZWRNYWlsc0F0dHJzID0gdGhpcy5tYWtlUmVwb3J0TW92ZWRNYWlsc0Ryb3Bkb3duQXR0cnMoKVxuXHRcdGNvbnN0IHRlbXBsYXRlUnVsZSA9IGNyZWF0ZUluYm94UnVsZVRlbXBsYXRlKEluYm94UnVsZVR5cGUuUkVDSVBJRU5UX1RPX0VRVUFMUywgXCJcIilcblx0XHRjb25zdCBhZGRJbmJveFJ1bGVCdXR0b25BdHRyczogSWNvbkJ1dHRvbkF0dHJzID0ge1xuXHRcdFx0dGl0bGU6IFwiYWRkSW5ib3hSdWxlX2FjdGlvblwiLFxuXHRcdFx0Y2xpY2s6ICgpID0+IG1haWxMb2NhdG9yLm1haWxib3hNb2RlbC5nZXRVc2VyTWFpbGJveERldGFpbHMoKS50aGVuKChtYWlsYm94RGV0YWlscykgPT4gQWRkSW5ib3hSdWxlRGlhbG9nLnNob3cobWFpbGJveERldGFpbHMsIHRlbXBsYXRlUnVsZSkpLFxuXHRcdFx0aWNvbjogSWNvbnMuQWRkLFxuXHRcdFx0c2l6ZTogQnV0dG9uU2l6ZS5Db21wYWN0LFxuXHRcdH1cblx0XHRjb25zdCBpbmJveFJ1bGVzVGFibGVBdHRyczogVGFibGVBdHRycyA9IHtcblx0XHRcdGNvbHVtbkhlYWRpbmc6IFtcImluYm94UnVsZUZpZWxkX2xhYmVsXCIsIFwiaW5ib3hSdWxlVmFsdWVfbGFiZWxcIiwgXCJpbmJveFJ1bGVUYXJnZXRGb2xkZXJfbGFiZWxcIl0sXG5cdFx0XHRjb2x1bW5XaWR0aHM6IFtDb2x1bW5XaWR0aC5TbWFsbCwgQ29sdW1uV2lkdGguTGFyZ2VzdCwgQ29sdW1uV2lkdGguU21hbGxdLFxuXHRcdFx0c2hvd0FjdGlvbkJ1dHRvbkNvbHVtbjogdHJ1ZSxcblx0XHRcdGFkZEJ1dHRvbkF0dHJzOiBhZGRJbmJveFJ1bGVCdXR0b25BdHRycyxcblx0XHRcdGxpbmVzOiB0aGlzLl9pbmJveFJ1bGVzVGFibGVMaW5lcygpLFxuXHRcdH1cblx0XHRjb25zdCBjb252ZXJzYXRpb25WaWV3RHJvcGRvd25BdHRyczogRHJvcERvd25TZWxlY3RvckF0dHJzPGJvb2xlYW4+ID0ge1xuXHRcdFx0bGFiZWw6IFwiY29udmVyc2F0aW9uVmlld1ByZWZfbGFiZWxcIixcblx0XHRcdC8vIHNob3cgYWxsIG1lYW5zIFwiZmFsc2VcIiBiZWNhdXNlIHRoZSBwcmVmIGlzIHRvIFwiZGlzYWJsZVwiIGl0LCBidXRcblx0XHRcdC8vIHdlIGRpc2FibGVkIGl0IGFzIFwiZW5hYmxlZFwiXG5cdFx0XHRpdGVtczogW1xuXHRcdFx0XHR7IG5hbWU6IGxhbmcuZ2V0KFwic2hvd0FsbE1haWxzSW5UaHJlYWRfbGFiZWxcIiksIHZhbHVlOiBmYWxzZSB9LFxuXHRcdFx0XHR7IG5hbWU6IGxhbmcuZ2V0KFwic2hvd09ubHlTZWxlY3RlZE1haWxfbGFiZWxcIiksIHZhbHVlOiB0cnVlIH0sXG5cdFx0XHRdLFxuXHRcdFx0c2VsZWN0ZWRWYWx1ZTogZGV2aWNlQ29uZmlnLmdldENvbnZlcnNhdGlvblZpZXdTaG93T25seVNlbGVjdGVkTWFpbCgpLFxuXHRcdFx0c2VsZWN0aW9uQ2hhbmdlZEhhbmRsZXI6IChhcmc6IGJvb2xlYW4pID0+IHtcblx0XHRcdFx0ZGV2aWNlQ29uZmlnLnNldENvbnZlcnNhdGlvblZpZXdTaG93T25seVNlbGVjdGVkTWFpbChhcmcpXG5cdFx0XHR9LFxuXHRcdFx0ZHJvcGRvd25XaWR0aDogMzUwLFxuXHRcdH1cblx0XHRyZXR1cm4gW1xuXHRcdFx0bShcblx0XHRcdFx0XCIjdXNlci1zZXR0aW5ncy5maWxsLWFic29sdXRlLnNjcm9sbC5wbHItbC5wYi14bFwiLFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0cm9sZTogXCJncm91cFwiLFxuXHRcdFx0XHRcdG9uY3JlYXRlOiAoKSA9PiB7XG5cdFx0XHRcdFx0XHR0aGlzLl9pbmRleFN0YXRlV2F0Y2ggPSBtYWlsTG9jYXRvci5zZWFyY2guaW5kZXhTdGF0ZS5tYXAoKG5ld1ZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHRcdHRoaXMuX2VuYWJsZU1haWxJbmRleGluZyA9IG5ld1ZhbHVlLm1haWxJbmRleEVuYWJsZWRcblxuXHRcdFx0XHRcdFx0XHRtLnJlZHJhdygpXG5cdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0b25yZW1vdmU6ICgpID0+IHtcblx0XHRcdFx0XHRcdGlmICh0aGlzLl9pbmRleFN0YXRlV2F0Y2gpIHtcblx0XHRcdFx0XHRcdFx0dGhpcy5faW5kZXhTdGF0ZVdhdGNoLmVuZCh0cnVlKVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdH0sXG5cdFx0XHRcdFtcblx0XHRcdFx0XHR0aGlzLmN1c3RvbWVySW5mbyAhPSBudWxsICYmIE51bWJlcih0aGlzLmN1c3RvbWVySW5mby5wZXJVc2VyU3RvcmFnZUNhcGFjaXR5KSA+IDBcblx0XHRcdFx0XHRcdD8gW1xuXHRcdFx0XHRcdFx0XHRcdG0oXCIuaDQubXQtbFwiLCBsYW5nLmdldChcInN0b3JhZ2VDYXBhY2l0eV9sYWJlbFwiKSksXG5cdFx0XHRcdFx0XHRcdFx0bShUZXh0RmllbGQsIHtcblx0XHRcdFx0XHRcdFx0XHRcdGxhYmVsOiBcInN0b3JhZ2VDYXBhY2l0eV9sYWJlbFwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0dmFsdWU6IHRoaXMuX3N0b3JhZ2VGaWVsZFZhbHVlKCksXG5cdFx0XHRcdFx0XHRcdFx0XHRvbmlucHV0OiB0aGlzLl9zdG9yYWdlRmllbGRWYWx1ZSxcblx0XHRcdFx0XHRcdFx0XHRcdGlzUmVhZE9ubHk6IHRydWUsXG5cdFx0XHRcdFx0XHRcdFx0fSksXG5cdFx0XHRcdFx0XHQgIF1cblx0XHRcdFx0XHRcdDogbnVsbCxcblx0XHRcdFx0XHRtKFwiLmg0Lm10LWxcIiwgbGFuZy5nZXQoXCJnZW5lcmFsX2xhYmVsXCIpKSxcblx0XHRcdFx0XHRtKERyb3BEb3duU2VsZWN0b3IsIGNvbnZlcnNhdGlvblZpZXdEcm9wZG93bkF0dHJzKSxcblx0XHRcdFx0XHRtKERyb3BEb3duU2VsZWN0b3IsIGVuYWJsZU1haWxJbmRleGluZ0F0dHJzKSxcblx0XHRcdFx0XHRtKERyb3BEb3duU2VsZWN0b3IsIGJlaGF2aW9yQWZ0ZXJNb3ZlRW1haWxBY3Rpb24pLFxuXHRcdFx0XHRcdG0oXCIuaDQubXQtbFwiLCBsYW5nLmdldChcImVtYWlsU2VuZGluZ19sYWJlbFwiKSksXG5cdFx0XHRcdFx0bShEcm9wRG93blNlbGVjdG9yLCBkZWZhdWx0U2VuZGVyQXR0cnMpLFxuXHRcdFx0XHRcdG0oVGV4dEZpZWxkLCBzaWduYXR1cmVBdHRycyksXG5cdFx0XHRcdFx0bWFpbExvY2F0b3IubG9naW5zLmlzRW5hYmxlZChGZWF0dXJlVHlwZS5JbnRlcm5hbENvbW11bmljYXRpb24pID8gbnVsbCA6IG0oRHJvcERvd25TZWxlY3RvciwgZGVmYXVsdFVuY29uZmlkZW50aWFsQXR0cnMpLFxuXHRcdFx0XHRcdG1haWxMb2NhdG9yLmxvZ2lucy5pc0VuYWJsZWQoRmVhdHVyZVR5cGUuSW50ZXJuYWxDb21tdW5pY2F0aW9uKSA/IG51bGwgOiBtKERyb3BEb3duU2VsZWN0b3IsIHNlbmRQbGFpbnRleHRBdHRycyksXG5cdFx0XHRcdFx0bShEcm9wRG93blNlbGVjdG9yLCByZXBvcnRNb3ZlZE1haWxzQXR0cnMpLFxuXHRcdFx0XHRcdG0oVGV4dEZpZWxkLCBvdXRPZk9mZmljZUF0dHJzKSxcblx0XHRcdFx0XHR0aGlzLnJlbmRlckxvY2FsRGF0YVNlY3Rpb24oKSxcblx0XHRcdFx0XHR0aGlzLm1haWxBZGRyZXNzVGFibGVNb2RlbFxuXHRcdFx0XHRcdFx0PyBtKE1haWxBZGRyZXNzVGFibGUsIHtcblx0XHRcdFx0XHRcdFx0XHRtb2RlbDogdGhpcy5tYWlsQWRkcmVzc1RhYmxlTW9kZWwsXG5cdFx0XHRcdFx0XHRcdFx0ZXhwYW5kZWQ6IHRoaXMubWFpbEFkZHJlc3NUYWJsZUV4cGFuZGVkLFxuXHRcdFx0XHRcdFx0XHRcdG9uRXhwYW5kZWQ6IChuZXdFeHBhbmRlZCkgPT4gKHRoaXMubWFpbEFkZHJlc3NUYWJsZUV4cGFuZGVkID0gbmV3RXhwYW5kZWQpLFxuXHRcdFx0XHRcdFx0ICB9KVxuXHRcdFx0XHRcdFx0OiBudWxsLFxuXHRcdFx0XHRcdG1haWxMb2NhdG9yLmxvZ2lucy5pc0VuYWJsZWQoRmVhdHVyZVR5cGUuSW50ZXJuYWxDb21tdW5pY2F0aW9uKVxuXHRcdFx0XHRcdFx0PyBudWxsXG5cdFx0XHRcdFx0XHQ6IFtcblx0XHRcdFx0XHRcdFx0XHRtKFwiLmZsZXgtc3BhY2UtYmV0d2Vlbi5pdGVtcy1jZW50ZXIubXQtbC5tYi1zXCIsIFtcblx0XHRcdFx0XHRcdFx0XHRcdG0oXCIuaDRcIiwgbGFuZy5nZXQoXCJpbmJveFJ1bGVzU2V0dGluZ3NfYWN0aW9uXCIpKSxcblx0XHRcdFx0XHRcdFx0XHRcdG0oRXhwYW5kZXJCdXR0b24sIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0bGFiZWw6IFwic2hvd0luYm94UnVsZXNfYWN0aW9uXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGV4cGFuZGVkOiB0aGlzLl9pbmJveFJ1bGVzRXhwYW5kZWQoKSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0b25FeHBhbmRlZENoYW5nZTogdGhpcy5faW5ib3hSdWxlc0V4cGFuZGVkLFxuXHRcdFx0XHRcdFx0XHRcdFx0fSksXG5cdFx0XHRcdFx0XHRcdFx0XSksXG5cdFx0XHRcdFx0XHRcdFx0bShcblx0XHRcdFx0XHRcdFx0XHRcdEV4cGFuZGVyUGFuZWwsXG5cdFx0XHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGV4cGFuZGVkOiB0aGlzLl9pbmJveFJ1bGVzRXhwYW5kZWQoKSxcblx0XHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0XHRtKFRhYmxlLCBpbmJveFJ1bGVzVGFibGVBdHRycyksXG5cdFx0XHRcdFx0XHRcdFx0KSxcblx0XHRcdFx0XHRcdFx0XHRtKFxuXHRcdFx0XHRcdFx0XHRcdFx0XCIuc21hbGxcIixcblx0XHRcdFx0XHRcdFx0XHRcdGxhbmcuZ2V0KFwibmJyT2ZJbmJveFJ1bGVzX21zZ1wiLCB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFwiezF9XCI6IG1haWxMb2NhdG9yLmxvZ2lucy5nZXRVc2VyQ29udHJvbGxlcigpLnByb3BzLmluYm94UnVsZXMubGVuZ3RoLFxuXHRcdFx0XHRcdFx0XHRcdFx0fSksXG5cdFx0XHRcdFx0XHRcdFx0KSxcblx0XHRcdFx0XHRcdCAgXSxcblx0XHRcdFx0XSxcblx0XHRcdCksXG5cdFx0XVxuXHR9XG5cblx0cHJpdmF0ZSByZW5kZXJMb2NhbERhdGFTZWN0aW9uKCk6IENoaWxkcmVuIHtcblx0XHRpZiAoIXRoaXMub2ZmbGluZVN0b3JhZ2VTZXR0aW5ncy5hdmFpbGFibGUoKSkge1xuXHRcdFx0cmV0dXJuIG51bGxcblx0XHR9XG5cblx0XHRyZXR1cm4gW1xuXHRcdFx0bShcIi5oNC5tdC1sXCIsIGxhbmcuZ2V0KFwibG9jYWxEYXRhU2VjdGlvbl9sYWJlbFwiKSksXG5cdFx0XHRtKFRleHRGaWVsZCwge1xuXHRcdFx0XHRsYWJlbDogXCJlbXB0eVN0cmluZ19tc2dcIixcblx0XHRcdFx0Ly8gTmVnYXRpdmUgdXBwZXIgbWFyZ2luIHRvIG1ha2UgdXAgZm9yIG5vIGxhYmVsXG5cdFx0XHRcdGNsYXNzOiBcIm10LW5lZ2F0aXZlLXNcIixcblx0XHRcdFx0dmFsdWU6IGxhbmcuZ2V0KFwic3RvcmVkRGF0YVRpbWVSYW5nZV9sYWJlbFwiLCB7IFwie251bURheXN9XCI6IHRoaXMub2ZmbGluZVN0b3JhZ2VTZXR0aW5ncy5nZXRUaW1lUmFuZ2UoKSB9KSxcblx0XHRcdFx0aXNSZWFkT25seTogdHJ1ZSxcblx0XHRcdFx0aW5qZWN0aW9uc1JpZ2h0OiAoKSA9PiBbXG5cdFx0XHRcdFx0bShJY29uQnV0dG9uLCB7XG5cdFx0XHRcdFx0XHR0aXRsZTogXCJlZGl0X2FjdGlvblwiLFxuXHRcdFx0XHRcdFx0Y2xpY2s6ICgpID0+IHRoaXMub25FZGl0U3RvcmVkRGF0YVRpbWVSYW5nZUNsaWNrZWQoKSxcblx0XHRcdFx0XHRcdGljb246IEljb25zLkVkaXQsXG5cdFx0XHRcdFx0XHRzaXplOiBCdXR0b25TaXplLkNvbXBhY3QsXG5cdFx0XHRcdFx0fSksXG5cdFx0XHRcdF0sXG5cdFx0XHR9KSxcblx0XHRdXG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIG9uRWRpdFN0b3JlZERhdGFUaW1lUmFuZ2VDbGlja2VkKCkge1xuXHRcdGlmIChtYWlsTG9jYXRvci5sb2dpbnMuZ2V0VXNlckNvbnRyb2xsZXIoKS5pc0ZyZWVBY2NvdW50KCkpIHtcblx0XHRcdHNob3dOb3RBdmFpbGFibGVGb3JGcmVlRGlhbG9nKClcblx0XHR9IGVsc2Uge1xuXHRcdFx0YXdhaXQgc2hvd0VkaXRTdG9yZWREYXRhVGltZVJhbmdlRGlhbG9nKHRoaXMub2ZmbGluZVN0b3JhZ2VTZXR0aW5ncylcblx0XHRcdG0ucmVkcmF3KClcblx0XHR9XG5cdH1cblxuXHRfdXBkYXRlVHV0YW5vdGFQcm9wZXJ0aWVzU2V0dGluZ3MocHJvcHM6IFR1dGFub3RhUHJvcGVydGllcykge1xuXHRcdGlmIChwcm9wcy5kZWZhdWx0U2VuZGVyKSB7XG5cdFx0XHR0aGlzLl9kZWZhdWx0U2VuZGVyID0gcHJvcHMuZGVmYXVsdFNlbmRlclxuXHRcdH1cblxuXHRcdHRoaXMuX2RlZmF1bHRVbmNvbmZpZGVudGlhbCA9IHByb3BzLmRlZmF1bHRVbmNvbmZpZGVudGlhbFxuXG5cdFx0dGhpcy5fbm9BdXRvbWF0aWNDb250YWN0cyA9IHByb3BzLm5vQXV0b21hdGljQ29udGFjdHNcblxuXHRcdHRoaXMuX3NlbmRQbGFpbnRleHQgPSBwcm9wcy5zZW5kUGxhaW50ZXh0T25seVxuXG5cdFx0dGhpcy5fc2lnbmF0dXJlKGdldFNpZ25hdHVyZVR5cGUocHJvcHMpLm5hbWUpXG5cdH1cblxuXHRfdXBkYXRlTWFpbGJveFByb3BlcnRpZXNTZXR0aW5ncygpIHtcblx0XHR0aGlzLl9tYWlsYm94UHJvcGVydGllcy5nZXRBc3luYygpLnRoZW4oKHByb3BzKSA9PiB7XG5cdFx0XHR0aGlzLl9yZXBvcnRNb3ZlZE1haWxzID0gZ2V0UmVwb3J0TW92ZWRNYWlsc1R5cGUocHJvcHMpXG5cblx0XHRcdG0ucmVkcmF3KClcblx0XHR9KVxuXHR9XG5cblx0X3VwZGF0ZUluYm94UnVsZXMocHJvcHM6IFR1dGFub3RhUHJvcGVydGllcyk6IHZvaWQge1xuXHRcdG1haWxMb2NhdG9yLm1haWxib3hNb2RlbC5nZXRVc2VyTWFpbGJveERldGFpbHMoKS50aGVuKGFzeW5jIChtYWlsYm94RGV0YWlscykgPT4ge1xuXHRcdFx0dGhpcy5faW5ib3hSdWxlc1RhYmxlTGluZXMoXG5cdFx0XHRcdGF3YWl0IHByb21pc2VNYXAocHJvcHMuaW5ib3hSdWxlcywgYXN5bmMgKHJ1bGUsIGluZGV4KSA9PiB7XG5cdFx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRcdGNlbGxzOiBbZ2V0SW5ib3hSdWxlVHlwZU5hbWUocnVsZS50eXBlKSwgcnVsZS52YWx1ZSwgYXdhaXQgdGhpcy5nZXRUZXh0Rm9yVGFyZ2V0KG1haWxib3hEZXRhaWxzLCBydWxlLnRhcmdldEZvbGRlcildLFxuXHRcdFx0XHRcdFx0YWN0aW9uQnV0dG9uQXR0cnM6IGNyZWF0ZVJvd0FjdGlvbnMoXG5cdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHRnZXRBcnJheTogKCkgPT4gcHJvcHMuaW5ib3hSdWxlcyxcblx0XHRcdFx0XHRcdFx0XHR1cGRhdGVJbnN0YW5jZTogKCkgPT4gbWFpbExvY2F0b3IuZW50aXR5Q2xpZW50LnVwZGF0ZShwcm9wcykuY2F0Y2gob2ZDbGFzcyhMb2NrZWRFcnJvciwgbm9PcCkpLFxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRydWxlLFxuXHRcdFx0XHRcdFx0XHRpbmRleCxcblx0XHRcdFx0XHRcdFx0W1xuXHRcdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHRcdGxhYmVsOiBcImVkaXRfYWN0aW9uXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRjbGljazogKCkgPT4gQWRkSW5ib3hSdWxlRGlhbG9nLnNob3cobWFpbGJveERldGFpbHMsIHJ1bGUpLFxuXHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdF0sXG5cdFx0XHRcdFx0XHQpLFxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSksXG5cdFx0XHQpXG5cblx0XHRcdG0ucmVkcmF3KClcblx0XHR9KVxuXHR9XG5cblx0X3VwZGF0ZU91dE9mT2ZmaWNlTm90aWZpY2F0aW9uKCk6IHZvaWQge1xuXHRcdGNvbnN0IG5vdGlmaWNhdGlvbiA9IHRoaXMuX291dE9mT2ZmaWNlTm90aWZpY2F0aW9uLmdldExvYWRlZCgpXG5cblx0XHR0aGlzLl9vdXRPZk9mZmljZVN0YXR1cyhmb3JtYXRBY3RpdmF0ZVN0YXRlKG5vdGlmaWNhdGlvbikpXG5cblx0XHRtLnJlZHJhdygpXG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIGdldFRleHRGb3JUYXJnZXQobWFpbGJveERldGFpbDogTWFpbGJveERldGFpbCwgdGFyZ2V0Rm9sZGVySWQ6IElkVHVwbGUpOiBQcm9taXNlPHN0cmluZz4ge1xuXHRcdGNvbnN0IGZvbGRlcnMgPSBhd2FpdCBtYWlsTG9jYXRvci5tYWlsTW9kZWwuZ2V0TWFpbGJveEZvbGRlcnNGb3JJZChhc3NlcnROb3ROdWxsKG1haWxib3hEZXRhaWwubWFpbGJveC5mb2xkZXJzKS5faWQpXG5cdFx0bGV0IGZvbGRlciA9IGZvbGRlcnMuZ2V0Rm9sZGVyQnlJZChlbGVtZW50SWRQYXJ0KHRhcmdldEZvbGRlcklkKSlcblxuXHRcdGlmIChmb2xkZXIpIHtcblx0XHRcdHJldHVybiBnZXRGb2xkZXJOYW1lKGZvbGRlcilcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmV0dXJuIGxhbmcuZ2V0KFwiZGVsZXRlZEZvbGRlcl9sYWJlbFwiKVxuXHRcdH1cblx0fVxuXG5cdGFzeW5jIGVudGl0eUV2ZW50c1JlY2VpdmVkKHVwZGF0ZXM6IFJlYWRvbmx5QXJyYXk8RW50aXR5VXBkYXRlRGF0YT4pOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRmb3IgKGNvbnN0IHVwZGF0ZSBvZiB1cGRhdGVzKSB7XG5cdFx0XHRjb25zdCB7IG9wZXJhdGlvbiB9ID0gdXBkYXRlXG5cdFx0XHRpZiAoaXNVcGRhdGVGb3JUeXBlUmVmKFR1dGFub3RhUHJvcGVydGllc1R5cGVSZWYsIHVwZGF0ZSkgJiYgb3BlcmF0aW9uID09PSBPcGVyYXRpb25UeXBlLlVQREFURSkge1xuXHRcdFx0XHRjb25zdCBwcm9wcyA9IGF3YWl0IG1haWxMb2NhdG9yLmVudGl0eUNsaWVudC5sb2FkKFR1dGFub3RhUHJvcGVydGllc1R5cGVSZWYsIG1haWxMb2NhdG9yLmxvZ2lucy5nZXRVc2VyQ29udHJvbGxlcigpLnByb3BzLl9pZClcblx0XHRcdFx0dGhpcy5fdXBkYXRlVHV0YW5vdGFQcm9wZXJ0aWVzU2V0dGluZ3MocHJvcHMpXG5cdFx0XHRcdHRoaXMuX3VwZGF0ZUluYm94UnVsZXMocHJvcHMpXG5cdFx0XHR9IGVsc2UgaWYgKGlzVXBkYXRlRm9yVHlwZVJlZihNYWlsRm9sZGVyVHlwZVJlZiwgdXBkYXRlKSkge1xuXHRcdFx0XHR0aGlzLl91cGRhdGVJbmJveFJ1bGVzKG1haWxMb2NhdG9yLmxvZ2lucy5nZXRVc2VyQ29udHJvbGxlcigpLnByb3BzKVxuXHRcdFx0fSBlbHNlIGlmIChpc1VwZGF0ZUZvclR5cGVSZWYoT3V0T2ZPZmZpY2VOb3RpZmljYXRpb25UeXBlUmVmLCB1cGRhdGUpKSB7XG5cdFx0XHRcdHRoaXMuX291dE9mT2ZmaWNlTm90aWZpY2F0aW9uLnJlbG9hZCgpLnRoZW4oKCkgPT4gdGhpcy5fdXBkYXRlT3V0T2ZPZmZpY2VOb3RpZmljYXRpb24oKSlcblx0XHRcdH0gZWxzZSBpZiAoaXNVcGRhdGVGb3JUeXBlUmVmKE1haWxib3hQcm9wZXJ0aWVzVHlwZVJlZiwgdXBkYXRlKSkge1xuXHRcdFx0XHR0aGlzLl9tYWlsYm94UHJvcGVydGllcy5yZWxvYWQoKS50aGVuKCgpID0+IHRoaXMuX3VwZGF0ZU1haWxib3hQcm9wZXJ0aWVzU2V0dGluZ3MoKSlcblx0XHRcdH1cblx0XHR9XG5cdFx0bS5yZWRyYXcoKVxuXHR9XG5cblx0bWFrZVJlcG9ydE1vdmVkTWFpbHNEcm9wZG93bkF0dHJzKCk6IERyb3BEb3duU2VsZWN0b3JBdHRyczxSZXBvcnRNb3ZlZE1haWxzVHlwZT4ge1xuXHRcdHJldHVybiB7XG5cdFx0XHRsYWJlbDogXCJzcGFtUmVwb3J0c19sYWJlbFwiLFxuXHRcdFx0aGVscExhYmVsOiAoKSA9PiBsYW5nLmdldChcInVuZW5jcnlwdGVkVHJhbnNtaXNzaW9uX21zZ1wiKSxcblx0XHRcdGl0ZW1zOiBbXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRuYW1lOiBsYW5nLmdldChcImFsd2F5c0Fza19hY3Rpb25cIiksXG5cdFx0XHRcdFx0dmFsdWU6IFJlcG9ydE1vdmVkTWFpbHNUeXBlLkFMV0FZU19BU0ssXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRuYW1lOiBsYW5nLmdldChcImFsd2F5c1JlcG9ydF9hY3Rpb25cIiksXG5cdFx0XHRcdFx0dmFsdWU6IFJlcG9ydE1vdmVkTWFpbHNUeXBlLkFVVE9NQVRJQ0FMTFlfT05MWV9TUEFNLFxuXHRcdFx0XHR9LFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0bmFtZTogbGFuZy5nZXQoXCJuZXZlclJlcG9ydF9hY3Rpb25cIiksXG5cdFx0XHRcdFx0dmFsdWU6IFJlcG9ydE1vdmVkTWFpbHNUeXBlLk5FVkVSLFxuXHRcdFx0XHR9LFxuXHRcdFx0XSxcblx0XHRcdHNlbGVjdGVkVmFsdWU6IHRoaXMuX3JlcG9ydE1vdmVkTWFpbHMsXG5cdFx0XHRzZWxlY3Rpb25DaGFuZ2VkSGFuZGxlcjogYXN5bmMgKHJlcG9ydE1vdmVkTWFpbHMpID0+IHtcblx0XHRcdFx0Y29uc3QgbWFpbGJveEdyb3VwUm9vdCA9IGF3YWl0IHRoaXMuZ2V0TWFpbGJveEdyb3VwUm9vdCgpXG5cdFx0XHRcdGF3YWl0IG1haWxMb2NhdG9yLm1haWxNb2RlbC5zYXZlUmVwb3J0TW92ZWRNYWlscyhtYWlsYm94R3JvdXBSb290LCByZXBvcnRNb3ZlZE1haWxzKVxuXHRcdFx0fSxcblx0XHRcdGRyb3Bkb3duV2lkdGg6IDI1MCxcblx0XHR9XG5cdH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gc2hvd0VkaXRTdG9yZWREYXRhVGltZVJhbmdlRGlhbG9nKHNldHRpbmdzOiBPZmZsaW5lU3RvcmFnZVNldHRpbmdzTW9kZWwpIHtcblx0Y29uc3QgaW5pdGlhbFRpbWVSYW5nZSA9IHNldHRpbmdzLmdldFRpbWVSYW5nZSgpXG5cdGxldCB0aW1lUmFuZ2UgPSBpbml0aWFsVGltZVJhbmdlXG5cblx0Y29uc3QgbmV3VGltZVJhbmdlRGVmZXJyZWQgPSBkZWZlcjxudW1iZXI+KClcblx0Y29uc3QgZGlhbG9nID0gRGlhbG9nLnNob3dBY3Rpb25EaWFsb2coe1xuXHRcdHRpdGxlOiBcImVtcHR5U3RyaW5nX21zZ1wiLFxuXHRcdGNoaWxkOiAoKSA9PlxuXHRcdFx0bShUZXh0RmllbGQsIHtcblx0XHRcdFx0bGFiZWw6IGxhbmcubWFrZVRyYW5zbGF0aW9uKFwiZGF5c19sYWJlbFwiLCBjYXBpdGFsaXplRmlyc3RMZXR0ZXIobGFuZy5nZXQoXCJkYXlzX2xhYmVsXCIpKSksXG5cdFx0XHRcdGhlbHBMYWJlbDogKCkgPT4gbGFuZy5nZXQoXCJzdG9yZWREYXRhVGltZVJhbmdlSGVscFRleHRfbXNnXCIpLFxuXHRcdFx0XHR0eXBlOiBUZXh0RmllbGRUeXBlLk51bWJlcixcblx0XHRcdFx0dmFsdWU6IGAke3RpbWVSYW5nZX1gLFxuXHRcdFx0XHRvbmlucHV0OiAobmV3VmFsdWUpID0+IHtcblx0XHRcdFx0XHR0aW1lUmFuZ2UgPSBNYXRoLm1heCgwLCBOdW1iZXIobmV3VmFsdWUpKVxuXHRcdFx0XHR9LFxuXHRcdFx0fSksXG5cdFx0b2tBY3Rpb246IGFzeW5jICgpID0+IHtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGlmIChpbml0aWFsVGltZVJhbmdlICE9PSB0aW1lUmFuZ2UpIHtcblx0XHRcdFx0XHRhd2FpdCBzZXR0aW5ncy5zZXRUaW1lUmFuZ2UodGltZVJhbmdlKVxuXHRcdFx0XHR9XG5cdFx0XHR9IGZpbmFsbHkge1xuXHRcdFx0XHRkaWFsb2cuY2xvc2UoKVxuXHRcdFx0fVxuXHRcdH0sXG5cdH0pXG5cblx0cmV0dXJuIG5ld1RpbWVSYW5nZURlZmVycmVkLnByb21pc2Vcbn1cbiIsImltcG9ydCBtLCB7IENoaWxkcmVuLCBDb21wb25lbnQsIFZub2RlIH0gZnJvbSBcIm1pdGhyaWxcIlxuaW1wb3J0IHsgYXNzZXJ0Tm90TnVsbCwgZmlsdGVySW50LCBpbmNyZW1lbnREYXRlLCBvZkNsYXNzIH0gZnJvbSBcIkB0dXRhby90dXRhbm90YS11dGlsc1wiXG5pbXBvcnQgeyBUZXh0RmllbGQsIFRleHRGaWVsZFR5cGUgfSBmcm9tIFwiLi4vZ3VpL2Jhc2UvVGV4dEZpZWxkLmpzXCJcbmltcG9ydCB7IERpYWxvZywgRGlhbG9nVHlwZSB9IGZyb20gXCIuLi9ndWkvYmFzZS9EaWFsb2cuanNcIlxuaW1wb3J0IHsgbGFuZywgVHJhbnNsYXRpb25LZXkgfSBmcm9tIFwiLi4vbWlzYy9MYW5ndWFnZVZpZXdNb2RlbC5qc1wiXG5pbXBvcnQgeyBCb29raW5nSXRlbUZlYXR1cmVUeXBlLCBGZWF0dXJlVHlwZSB9IGZyb20gXCIuLi9hcGkvY29tbW9uL1R1dGFub3RhQ29uc3RhbnRzLmpzXCJcbmltcG9ydCB7IGZvcm1hdERhdGUgfSBmcm9tIFwiLi4vbWlzYy9Gb3JtYXR0ZXIuanNcIlxuaW1wb3J0IHR5cGUgeyBQcmljZURhdGEsIFByaWNlU2VydmljZVJldHVybiB9IGZyb20gXCIuLi9hcGkvZW50aXRpZXMvc3lzL1R5cGVSZWZzLmpzXCJcbmltcG9ydCB7IEFjY291bnRpbmdJbmZvVHlwZVJlZiwgUHJpY2VJdGVtRGF0YSB9IGZyb20gXCIuLi9hcGkvZW50aXRpZXMvc3lzL1R5cGVSZWZzLmpzXCJcbmltcG9ydCB7IE5vdEF1dGhvcml6ZWRFcnJvciB9IGZyb20gXCIuLi9hcGkvY29tbW9uL2Vycm9yL1Jlc3RFcnJvci5qc1wiXG5pbXBvcnQgeyBhc1BheW1lbnRJbnRlcnZhbCwgZm9ybWF0UHJpY2UsIGdldFByaWNlSXRlbSwgUGF5bWVudEludGVydmFsIH0gZnJvbSBcIi4vUHJpY2VVdGlscy5qc1wiXG5pbXBvcnQgeyBzaG93UHJvZ3Jlc3NEaWFsb2cgfSBmcm9tIFwiLi4vZ3VpL2RpYWxvZ3MvUHJvZ3Jlc3NEaWFsb2cuanNcIlxuaW1wb3J0IHsgbG9jYXRvciB9IGZyb20gXCIuLi9hcGkvbWFpbi9Db21tb25Mb2NhdG9yLmpzXCJcbmltcG9ydCB7IGFzc2VydE1haW5Pck5vZGUgfSBmcm9tIFwiLi4vYXBpL2NvbW1vbi9FbnYuanNcIlxuXG5hc3NlcnRNYWluT3JOb2RlKClcblxuZXhwb3J0IGludGVyZmFjZSBCb29raW5nUGFyYW1zIHtcblx0ZmVhdHVyZVR5cGU6IEJvb2tpbmdJdGVtRmVhdHVyZVR5cGVcblx0Ym9va2luZ1RleHQ6IFRyYW5zbGF0aW9uS2V5XG5cdGNvdW50OiBudW1iZXJcblx0ZnJlZUFtb3VudDogbnVtYmVyXG5cdHJlYWN0aXZhdGU6IGJvb2xlYW5cbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIG9yZGVyIGlzIGFjY2VwdGVkIGJ5IHRoZSB1c2VyLCBmYWxzZSBvdGhlcndpc2UuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzaG93QnV5RGlhbG9nKHBhcmFtczogQm9va2luZ1BhcmFtcyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuXHRpZiAobG9jYXRvci5sb2dpbnMuaXNFbmFibGVkKEZlYXR1cmVUeXBlLkhpZGVCdXlEaWFsb2dzKSkge1xuXHRcdHJldHVybiB0cnVlXG5cdH1cblx0Y29uc3QgcHJpY2VDaGFuZ2VNb2RlbCA9IGF3YWl0IHNob3dQcm9ncmVzc0RpYWxvZyhcInBsZWFzZVdhaXRfbXNnXCIsIHByZXBhcmVEaWFsb2cocGFyYW1zKSlcblx0aWYgKHByaWNlQ2hhbmdlTW9kZWwpIHtcblx0XHRyZXR1cm4gc2hvd0RpYWxvZyhwcmljZUNoYW5nZU1vZGVsLmdldEFjdGlvbkxhYmVsKCksICgpID0+XG5cdFx0XHRtKENvbmZpcm1TdWJzY3JpcHRpb25WaWV3LCB7IHByaWNlQ2hhbmdlTW9kZWwsIGNvdW50OiBwYXJhbXMuY291bnQsIGZyZWVBbW91bnQ6IHBhcmFtcy5mcmVlQW1vdW50LCBib29raW5nVGV4dDogcGFyYW1zLmJvb2tpbmdUZXh0IH0pLFxuXHRcdClcblx0fSBlbHNlIHtcblx0XHRyZXR1cm4gZmFsc2Vcblx0fVxufVxuXG5hc3luYyBmdW5jdGlvbiBwcmVwYXJlRGlhbG9nKHsgZmVhdHVyZVR5cGUsIGNvdW50LCByZWFjdGl2YXRlIH06IEJvb2tpbmdQYXJhbXMpOiBQcm9taXNlPFByaWNlQ2hhbmdlTW9kZWwgfCBudWxsPiB7XG5cdGNvbnN0IHByaWNlID0gYXdhaXQgbG9jYXRvci5ib29raW5nRmFjYWRlLmdldFByaWNlKGZlYXR1cmVUeXBlLCBjb3VudCwgcmVhY3RpdmF0ZSlcblx0Y29uc3QgcHJpY2VDaGFuZ2VNb2RlbCA9IG5ldyBQcmljZUNoYW5nZU1vZGVsKHByaWNlLCBmZWF0dXJlVHlwZSlcblx0Y29uc3QgY3VzdG9tZXJJbmZvID0gYXdhaXQgbG9jYXRvci5sb2dpbnMuZ2V0VXNlckNvbnRyb2xsZXIoKS5sb2FkQ3VzdG9tZXJJbmZvKClcblx0Y29uc3QgYWNjb3VudGluZ0luZm8gPSBhd2FpdCBsb2NhdG9yLmVudGl0eUNsaWVudC5sb2FkKEFjY291bnRpbmdJbmZvVHlwZVJlZiwgY3VzdG9tZXJJbmZvLmFjY291bnRpbmdJbmZvKS5jYXRjaChvZkNsYXNzKE5vdEF1dGhvcml6ZWRFcnJvciwgKCkgPT4gbnVsbCkpXG5cdGlmIChhY2NvdW50aW5nSW5mbyAmJiBhY2NvdW50aW5nSW5mby5wYXltZW50TWV0aG9kID09IG51bGwpIHtcblx0XHRjb25zdCBjb25maXJtID0gYXdhaXQgRGlhbG9nLmNvbmZpcm0oXCJlbnRlclBheW1lbnREYXRhRmlyc3RfbXNnXCIpXG5cdFx0aWYgKGNvbmZpcm0pIHtcblx0XHRcdG0ucm91dGUuc2V0KFwiL3NldHRpbmdzL2ludm9pY2VcIilcblx0XHR9XG5cblx0XHRyZXR1cm4gbnVsbFxuXHR9IGVsc2Uge1xuXHRcdHJldHVybiBwcmljZUNoYW5nZU1vZGVsXG5cdH1cbn1cblxuZnVuY3Rpb24gc2hvd0RpYWxvZyhva0xhYmVsOiBUcmFuc2xhdGlvbktleSwgdmlldzogKCkgPT4gQ2hpbGRyZW4pIHtcblx0cmV0dXJuIG5ldyBQcm9taXNlPGJvb2xlYW4+KChyZXNvbHZlKSA9PiB7XG5cdFx0bGV0IGRpYWxvZzogRGlhbG9nXG5cblx0XHRjb25zdCBkb0FjdGlvbiA9IChyZXM6IGJvb2xlYW4pID0+IHtcblx0XHRcdGRpYWxvZy5jbG9zZSgpXG5cdFx0XHRyZXNvbHZlKHJlcylcblx0XHR9XG5cblx0XHRkaWFsb2cgPSBEaWFsb2cuc2hvd0FjdGlvbkRpYWxvZyh7XG5cdFx0XHRva0FjdGlvblRleHRJZDogb2tMYWJlbCxcblx0XHRcdHRpdGxlOiBcImJvb2tpbmdTdW1tYXJ5X2xhYmVsXCIsXG5cdFx0XHRjaGlsZDogKCkgPT4gdmlldygpLFxuXHRcdFx0b2tBY3Rpb246ICgpID0+IGRvQWN0aW9uKHRydWUpLFxuXHRcdFx0Y2FuY2VsQWN0aW9uOiAoKSA9PiBkb0FjdGlvbihmYWxzZSksXG5cdFx0XHR0eXBlOiBEaWFsb2dUeXBlLkVkaXRTbWFsbCxcblx0XHR9KVxuXHR9KVxufVxuXG5pbnRlcmZhY2UgQ29uZmlybUF0dHJzIHtcblx0cHJpY2VDaGFuZ2VNb2RlbDogUHJpY2VDaGFuZ2VNb2RlbFxuXHRjb3VudDogbnVtYmVyXG5cdGZyZWVBbW91bnQ6IG51bWJlclxuXHRib29raW5nVGV4dDogVHJhbnNsYXRpb25LZXlcbn1cblxuY2xhc3MgQ29uZmlybVN1YnNjcmlwdGlvblZpZXcgaW1wbGVtZW50cyBDb21wb25lbnQ8Q29uZmlybUF0dHJzPiB7XG5cdHZpZXcoeyBhdHRycyB9OiBWbm9kZTxDb25maXJtQXR0cnM+KTogQ2hpbGRyZW4ge1xuXHRcdGNvbnN0IHsgcHJpY2VDaGFuZ2VNb2RlbCwgY291bnQsIGZyZWVBbW91bnQgfSA9IGF0dHJzXG5cdFx0Y29uc3QgY2hhcmdlRGF0ZSA9IGluY3JlbWVudERhdGUocHJpY2VDaGFuZ2VNb2RlbC5wZXJpb2RFbmREYXRlKCksIDEpXG5cblx0XHRyZXR1cm4gbShcIlwiLCBbXG5cdFx0XHRtKFRleHRGaWVsZCwge1xuXHRcdFx0XHRsYWJlbDogXCJib29raW5nT3JkZXJfbGFiZWxcIixcblx0XHRcdFx0dmFsdWU6IGxhbmcuZ2V0KGF0dHJzLmJvb2tpbmdUZXh0LCB7XG5cdFx0XHRcdFx0XCJ7MX1cIjogTWF0aC5hYnMoY291bnQpLFxuXHRcdFx0XHR9KSxcblx0XHRcdFx0dHlwZTogVGV4dEZpZWxkVHlwZS5BcmVhLFxuXHRcdFx0XHRpc1JlYWRPbmx5OiB0cnVlLFxuXHRcdFx0fSksXG5cdFx0XHRwcmljZUNoYW5nZU1vZGVsLmlzQnV5KClcblx0XHRcdFx0PyBtKFRleHRGaWVsZCwge1xuXHRcdFx0XHRcdFx0bGFiZWw6IFwic3Vic2NyaXB0aW9uX2xhYmVsXCIsXG5cdFx0XHRcdFx0XHRoZWxwTGFiZWw6ICgpID0+IGxhbmcuZ2V0KFwibmV4dENoYXJnZU9uX2xhYmVsXCIsIHsgXCJ7Y2hhcmdlRGF0ZX1cIjogZm9ybWF0RGF0ZShjaGFyZ2VEYXRlKSB9KSxcblx0XHRcdFx0XHRcdHZhbHVlOiB0aGlzLmdldFN1YnNjcmlwdGlvblRleHQocHJpY2VDaGFuZ2VNb2RlbCksXG5cdFx0XHRcdFx0XHRpc1JlYWRPbmx5OiB0cnVlLFxuXHRcdFx0XHQgIH0pXG5cdFx0XHRcdDogbnVsbCxcblx0XHRcdG0oVGV4dEZpZWxkLCB7XG5cdFx0XHRcdGxhYmVsOiBcInByaWNlX2xhYmVsXCIsXG5cdFx0XHRcdGhlbHBMYWJlbDogKCkgPT4gdGhpcy5nZXRQcmljZUluZm9UZXh0KHByaWNlQ2hhbmdlTW9kZWwpLFxuXHRcdFx0XHR2YWx1ZTogdGhpcy5nZXRQcmljZVRleHQocHJpY2VDaGFuZ2VNb2RlbCksXG5cdFx0XHRcdGlzUmVhZE9ubHk6IHRydWUsXG5cdFx0XHR9KSxcblx0XHRdKVxuXHR9XG5cblx0cHJpdmF0ZSBnZXRTdWJzY3JpcHRpb25UZXh0KG1vZGVsOiBQcmljZUNoYW5nZU1vZGVsKTogc3RyaW5nIHtcblx0XHRpZiAobW9kZWwuaXNZZWFybHkoKSkge1xuXHRcdFx0cmV0dXJuIGxhbmcuZ2V0KFwicHJpY2luZy55ZWFybHlfbGFiZWxcIilcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmV0dXJuIGxhbmcuZ2V0KFwicHJpY2luZy5tb250aGx5X2xhYmVsXCIpXG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBnZXRQcmljZVRleHQobW9kZWw6IFByaWNlQ2hhbmdlTW9kZWwpOiBzdHJpbmcge1xuXHRcdGxldCBuZXRHcm9zc1RleHQgPSBtb2RlbC50YXhJbmNsdWRlZCgpID8gbGFuZy5nZXQoXCJncm9zc19sYWJlbFwiKSA6IGxhbmcuZ2V0KFwibmV0X2xhYmVsXCIpXG5cdFx0bGV0IHBlcmlvZFRleHQgPSBtb2RlbC5pc1llYXJseSgpID8gbGFuZy5nZXQoXCJwcmljaW5nLnBlclllYXJfbGFiZWxcIikgOiBsYW5nLmdldChcInByaWNpbmcucGVyTW9udGhfbGFiZWxcIilcblxuXHRcdGNvbnN0IGZ1dHVyZVByaWNlTmV4dFBlcmlvZCA9IG1vZGVsLmZ1dHVyZVByaWNlXG5cdFx0bGV0IGN1cnJlbnRQcmljZU5leHRQZXJpb2QgPSBtb2RlbC5jdXJyZW50UHJpY2VcblxuXHRcdGlmIChtb2RlbC5pc1NpbmdsZVByaWNlVHlwZSgpKSB7XG5cdFx0XHRjb25zdCBwcmljZURpZmYgPSBmdXR1cmVQcmljZU5leHRQZXJpb2QgLSBjdXJyZW50UHJpY2VOZXh0UGVyaW9kXG5cdFx0XHRyZXR1cm4gYCR7Zm9ybWF0UHJpY2UocHJpY2VEaWZmLCB0cnVlKX0gJHtwZXJpb2RUZXh0fSAoJHtuZXRHcm9zc1RleHR9KWBcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmV0dXJuIGAke2Zvcm1hdFByaWNlKGZ1dHVyZVByaWNlTmV4dFBlcmlvZCwgdHJ1ZSl9ICR7cGVyaW9kVGV4dH0gKCR7bmV0R3Jvc3NUZXh0fSlgXG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBnZXRQcmljZUluZm9UZXh0KG1vZGVsOiBQcmljZUNoYW5nZU1vZGVsKTogc3RyaW5nIHtcblx0XHRpZiAobW9kZWwuaXNVbmJ1eSgpKSB7XG5cdFx0XHRyZXR1cm4gbGFuZy5nZXQoXCJwcmljZUNoYW5nZVZhbGlkRnJvbV9sYWJlbFwiLCB7XG5cdFx0XHRcdFwiezF9XCI6IGZvcm1hdERhdGUobW9kZWwucGVyaW9kRW5kRGF0ZSgpKSxcblx0XHRcdH0pXG5cdFx0fSBlbHNlIGlmIChtb2RlbC5hZGRlZFByaWNlRm9yQ3VycmVudFBlcmlvZCgpID4gMCkge1xuXHRcdFx0cmV0dXJuIGxhbmcuZ2V0KFwicHJpY2VGb3JDdXJyZW50QWNjb3VudGluZ1BlcmlvZF9sYWJlbFwiLCB7XG5cdFx0XHRcdFwiezF9XCI6IGZvcm1hdFByaWNlKG1vZGVsLmFkZGVkUHJpY2VGb3JDdXJyZW50UGVyaW9kKCksIHRydWUpLFxuXHRcdFx0fSlcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmV0dXJuIFwiXCJcblx0XHR9XG5cdH1cbn1cblxuY2xhc3MgUHJpY2VDaGFuZ2VNb2RlbCB7XG5cdHJlYWRvbmx5IGN1cnJlbnRJdGVtOiBQcmljZUl0ZW1EYXRhIHwgbnVsbFxuXHRyZWFkb25seSBmdXR1cmVJdGVtOiBQcmljZUl0ZW1EYXRhIHwgbnVsbFxuXHRyZWFkb25seSBjdXJyZW50UHJpY2U6IG51bWJlclxuXHRyZWFkb25seSBmdXR1cmVQcmljZTogbnVtYmVyXG5cdHJlYWRvbmx5IGFkZGl0aW9uYWxGZWF0dXJlczogUmVhZG9ubHlTZXQ8Qm9va2luZ0l0ZW1GZWF0dXJlVHlwZT5cblxuXHRjb25zdHJ1Y3Rvcihwcml2YXRlIHJlYWRvbmx5IHByaWNlOiBQcmljZVNlcnZpY2VSZXR1cm4sIHJlYWRvbmx5IGZlYXR1cmVUeXBlOiBCb29raW5nSXRlbUZlYXR1cmVUeXBlKSB7XG5cdFx0dGhpcy5jdXJyZW50SXRlbSA9IGdldFByaWNlSXRlbShwcmljZS5jdXJyZW50UHJpY2VOZXh0UGVyaW9kLCBmZWF0dXJlVHlwZSlcblx0XHR0aGlzLmZ1dHVyZUl0ZW0gPSBnZXRQcmljZUl0ZW0ocHJpY2UuZnV0dXJlUHJpY2VOZXh0UGVyaW9kLCBmZWF0dXJlVHlwZSlcblx0XHR0aGlzLmN1cnJlbnRQcmljZSA9IHRoaXMuZ2V0UHJpY2VGcm9tUHJpY2VEYXRhKHByaWNlLmN1cnJlbnRQcmljZU5leHRQZXJpb2QsIGZlYXR1cmVUeXBlKVxuXHRcdHRoaXMuZnV0dXJlUHJpY2UgPSB0aGlzLmdldFByaWNlRnJvbVByaWNlRGF0YShwcmljZS5mdXR1cmVQcmljZU5leHRQZXJpb2QsIGZlYXR1cmVUeXBlKVxuXG5cdFx0aWYgKHRoaXMuZmVhdHVyZVR5cGUgPT09IEJvb2tpbmdJdGVtRmVhdHVyZVR5cGUuTGVnYWN5VXNlcnMpIHtcblx0XHRcdHRoaXMuYWRkaXRpb25hbEZlYXR1cmVzID0gbmV3IFNldChcblx0XHRcdFx0W0Jvb2tpbmdJdGVtRmVhdHVyZVR5cGUuV2hpdGVsYWJlbCwgQm9va2luZ0l0ZW1GZWF0dXJlVHlwZS5TaGFyaW5nLCBCb29raW5nSXRlbUZlYXR1cmVUeXBlLkJ1c2luZXNzXS5maWx0ZXIoKGYpID0+IHRoaXMuZ2V0RnV0dXJlUHJpY2UoZikgPiAwKSxcblx0XHRcdClcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhpcy5hZGRpdGlvbmFsRmVhdHVyZXMgPSBuZXcgU2V0KClcblx0XHR9XG5cdH1cblxuXHRnZXRBY3Rpb25MYWJlbCgpOiBUcmFuc2xhdGlvbktleSB7XG5cdFx0aWYgKCF0aGlzLmlzUHJpY2VDaGFuZ2UoKSkge1xuXHRcdFx0cmV0dXJuIFwiYWNjZXB0X2FjdGlvblwiXG5cdFx0fVxuXHRcdGlmICh0aGlzLmlzQnV5KCkpIHtcblx0XHRcdHJldHVybiBcImJ1eV9hY3Rpb25cIlxuXHRcdH1cblx0XHRyZXR1cm4gXCJvcmRlcl9hY3Rpb25cIlxuXHR9XG5cblx0aXNCdXkoKSB7XG5cdFx0cmV0dXJuIHRoaXMuY3VycmVudFByaWNlIDwgdGhpcy5mdXR1cmVQcmljZVxuXHR9XG5cblx0aXNVbmJ1eSgpIHtcblx0XHRyZXR1cm4gdGhpcy5jdXJyZW50UHJpY2UgPiB0aGlzLmZ1dHVyZVByaWNlXG5cdH1cblxuXHRpc1ByaWNlQ2hhbmdlKCkge1xuXHRcdHJldHVybiB0aGlzLmN1cnJlbnRQcmljZSAhPT0gdGhpcy5mdXR1cmVQcmljZVxuXHR9XG5cblx0aXNTaW5nbGVQcmljZVR5cGUoKSB7XG5cdFx0cmV0dXJuIHRoaXMuYW55SXRlbSgpLnNpbmdsZVR5cGVcblx0fVxuXG5cdGdldEN1cnJlbnRDb3VudCgpOiBudW1iZXIge1xuXHRcdHJldHVybiBmaWx0ZXJJbnQoYXNzZXJ0Tm90TnVsbCh0aGlzLmN1cnJlbnRJdGVtKS5jb3VudClcblx0fVxuXG5cdGdldEZ1dHVyZUNvdW50KCk6IG51bWJlciB7XG5cdFx0cmV0dXJuIGZpbHRlckludChhc3NlcnROb3ROdWxsKHRoaXMuZnV0dXJlSXRlbSkuY291bnQpXG5cdH1cblxuXHRpc1llYXJseSgpOiBib29sZWFuIHtcblx0XHRjb25zdCBwZXJpb2QgPSBhc3NlcnROb3ROdWxsKHRoaXMucHJpY2UuZnV0dXJlUHJpY2VOZXh0UGVyaW9kID8/IHRoaXMucHJpY2UuY3VycmVudFByaWNlTmV4dFBlcmlvZClcblx0XHRyZXR1cm4gYXNQYXltZW50SW50ZXJ2YWwocGVyaW9kLnBheW1lbnRJbnRlcnZhbCkgPT09IFBheW1lbnRJbnRlcnZhbC5ZZWFybHlcblx0fVxuXG5cdHRheEluY2x1ZGVkKCk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiBhc3NlcnROb3ROdWxsKHRoaXMucHJpY2UuZnV0dXJlUHJpY2VOZXh0UGVyaW9kKS50YXhJbmNsdWRlZFxuXHR9XG5cblx0cGVyaW9kRW5kRGF0ZSgpOiBEYXRlIHtcblx0XHQvLyByZXR1cm4gYSBjb3B5IHRvIHByZXZlbnQgdGhlIGRhdGUgZnJvbSBiZWluZyBjaGFuZ2VkIGJ5IHRoZSBjYWxsZXJcblx0XHRyZXR1cm4gbmV3IERhdGUodGhpcy5wcmljZS5wZXJpb2RFbmREYXRlKVxuXHR9XG5cblx0YWRkZWRQcmljZUZvckN1cnJlbnRQZXJpb2QoKTogbnVtYmVyIHtcblx0XHRyZXR1cm4gdGhpcy5wcmljZS5jdXJyZW50UGVyaW9kQWRkZWRQcmljZSA/IGZpbHRlckludCh0aGlzLnByaWNlLmN1cnJlbnRQZXJpb2RBZGRlZFByaWNlKSA6IDBcblx0fVxuXG5cdHByaXZhdGUgYW55SXRlbSgpIHtcblx0XHRyZXR1cm4gYXNzZXJ0Tm90TnVsbCh0aGlzLmZ1dHVyZUl0ZW0gPz8gdGhpcy5jdXJyZW50SXRlbSlcblx0fVxuXG5cdHByaXZhdGUgZ2V0RnV0dXJlUHJpY2UoZmVhdHVyZVR5cGU6IEJvb2tpbmdJdGVtRmVhdHVyZVR5cGUpIHtcblx0XHRyZXR1cm4gdGhpcy5nZXRQcmljZUZyb21QcmljZURhdGEodGhpcy5wcmljZS5mdXR1cmVQcmljZU5leHRQZXJpb2QsIGZlYXR1cmVUeXBlKVxuXHR9XG5cblx0LyoqXG5cdCAqIFJldHVybnMgdGhlIHByaWNlIGZvciB0aGUgZmVhdHVyZSB0eXBlIGZyb20gdGhlIHByaWNlIGRhdGEgaWYgYXZhaWxhYmxlLCBvdGhlcndpc2UgMC5cblx0ICovXG5cdHByaXZhdGUgZ2V0UHJpY2VGcm9tUHJpY2VEYXRhKHByaWNlRGF0YTogUHJpY2VEYXRhIHwgbnVsbCwgZmVhdHVyZVR5cGU6IE51bWJlclN0cmluZyk6IG51bWJlciB7XG5cdFx0bGV0IGl0ZW0gPSBnZXRQcmljZUl0ZW0ocHJpY2VEYXRhLCBmZWF0dXJlVHlwZSlcblx0XHRsZXQgaXRlbVByaWNlID0gaXRlbSA/IE51bWJlcihpdGVtLnByaWNlKSA6IDBcblxuXHRcdGlmIChmZWF0dXJlVHlwZSA9PT0gQm9va2luZ0l0ZW1GZWF0dXJlVHlwZS5MZWdhY3lVc2Vycykge1xuXHRcdFx0aXRlbVByaWNlICs9IHRoaXMuZ2V0UHJpY2VGcm9tUHJpY2VEYXRhKHByaWNlRGF0YSwgQm9va2luZ0l0ZW1GZWF0dXJlVHlwZS5XaGl0ZWxhYmVsKVxuXHRcdFx0aXRlbVByaWNlICs9IHRoaXMuZ2V0UHJpY2VGcm9tUHJpY2VEYXRhKHByaWNlRGF0YSwgQm9va2luZ0l0ZW1GZWF0dXJlVHlwZS5TaGFyaW5nKVxuXHRcdFx0aXRlbVByaWNlICs9IHRoaXMuZ2V0UHJpY2VGcm9tUHJpY2VEYXRhKHByaWNlRGF0YSwgQm9va2luZ0l0ZW1GZWF0dXJlVHlwZS5CdXNpbmVzcylcblx0XHR9XG5cblx0XHRyZXR1cm4gaXRlbVByaWNlXG5cdH1cbn1cbiIsImltcG9ydCBtLCB7IENoaWxkQXJyYXksIENoaWxkcmVuIH0gZnJvbSBcIm1pdGhyaWxcIlxuaW1wb3J0IHsgRGlhbG9nIH0gZnJvbSBcIi4uLy4uL2d1aS9iYXNlL0RpYWxvZy5qc1wiXG5pbXBvcnQgeyBmb3JtYXREYXRlV2l0aE1vbnRoLCBmb3JtYXRTdG9yYWdlU2l6ZSB9IGZyb20gXCIuLi8uLi9taXNjL0Zvcm1hdHRlci5qc1wiXG5pbXBvcnQgeyBsYW5nIH0gZnJvbSBcIi4uLy4uL21pc2MvTGFuZ3VhZ2VWaWV3TW9kZWwuanNcIlxuaW1wb3J0IHsgZ2V0Rmlyc3RPclRocm93LCBuZXZlck51bGwgfSBmcm9tIFwiQHR1dGFvL3R1dGFub3RhLXV0aWxzXCJcbmltcG9ydCB7IEdyb3VwVHlwZSB9IGZyb20gXCIuLi8uLi9hcGkvY29tbW9uL1R1dGFub3RhQ29uc3RhbnRzLmpzXCJcbmltcG9ydCB0eXBlIHsgVGFibGVBdHRycyB9IGZyb20gXCIuLi8uLi9ndWkvYmFzZS9UYWJsZS5qc1wiXG5pbXBvcnQgeyBDb2x1bW5XaWR0aCwgVGFibGUsIFRhYmxlTGluZUF0dHJzIH0gZnJvbSBcIi4uLy4uL2d1aS9iYXNlL1RhYmxlLmpzXCJcbmltcG9ydCB7IEljb25zIH0gZnJvbSBcIi4uLy4uL2d1aS9iYXNlL2ljb25zL0ljb25zLmpzXCJcbmltcG9ydCB7IHNob3dQcm9ncmVzc0RpYWxvZyB9IGZyb20gXCIuLi8uLi9ndWkvZGlhbG9ncy9Qcm9ncmVzc0RpYWxvZy5qc1wiXG5pbXBvcnQgeyBUZXh0RmllbGQgfSBmcm9tIFwiLi4vLi4vZ3VpL2Jhc2UvVGV4dEZpZWxkLmpzXCJcbmltcG9ydCB0eXBlIHsgRHJvcERvd25TZWxlY3RvckF0dHJzIH0gZnJvbSBcIi4uLy4uL2d1aS9iYXNlL0Ryb3BEb3duU2VsZWN0b3IuanNcIlxuaW1wb3J0IHsgRHJvcERvd25TZWxlY3RvciB9IGZyb20gXCIuLi8uLi9ndWkvYmFzZS9Ecm9wRG93blNlbGVjdG9yLmpzXCJcbmltcG9ydCB7IGFzc2VydE1haW5Pck5vZGUgfSBmcm9tIFwiLi4vLi4vYXBpL2NvbW1vbi9FbnYuanNcIlxuaW1wb3J0IHsgSWNvbkJ1dHRvbiwgSWNvbkJ1dHRvbkF0dHJzIH0gZnJvbSBcIi4uLy4uL2d1aS9iYXNlL0ljb25CdXR0b24uanNcIlxuaW1wb3J0IHsgQnV0dG9uU2l6ZSB9IGZyb20gXCIuLi8uLi9ndWkvYmFzZS9CdXR0b25TaXplLmpzXCJcbmltcG9ydCB7IEdyb3VwRGV0YWlsc01vZGVsIH0gZnJvbSBcIi4uLy4uLy4uL21haWwtYXBwL3NldHRpbmdzL2dyb3Vwcy9Hcm91cERldGFpbHNNb2RlbC5qc1wiXG5pbXBvcnQgeyBzaG93QnV5RGlhbG9nIH0gZnJvbSBcIi4uLy4uL3N1YnNjcmlwdGlvbi9CdXlEaWFsb2cuanNcIlxuaW1wb3J0IHsgRW50aXR5VXBkYXRlRGF0YSB9IGZyb20gXCIuLi8uLi9hcGkvY29tbW9uL3V0aWxzL0VudGl0eVVwZGF0ZVV0aWxzLmpzXCJcbmltcG9ydCB7IFVwZGF0YWJsZVNldHRpbmdzRGV0YWlsc1ZpZXdlciB9IGZyb20gXCIuLi9JbnRlcmZhY2VzLmpzXCJcblxuYXNzZXJ0TWFpbk9yTm9kZSgpXG5cbmV4cG9ydCBjbGFzcyBHcm91cERldGFpbHNWaWV3IGltcGxlbWVudHMgVXBkYXRhYmxlU2V0dGluZ3NEZXRhaWxzVmlld2VyIHtcblx0Y29uc3RydWN0b3IocHJpdmF0ZSByZWFkb25seSBtb2RlbDogR3JvdXBEZXRhaWxzTW9kZWwpIHt9XG5cblx0LyoqXG5cdCAqIHJlbmRlciB0aGUgaGVhZGVyIHRoYXQgdGVsbHMgdXMgd2hhdCB0eXBlIG9mIGdyb3VwIHdlIGhhdmUgaGVyZVxuXHQgKiBAcHJpdmF0ZVxuXHQgKi9cblx0cHJpdmF0ZSByZW5kZXJIZWFkZXIoKTogQ2hpbGRyZW4ge1xuXHRcdHJldHVybiBtKFwiLmg0Lm10LWxcIiwgZ2V0R3JvdXBUeXBlRGlzcGxheU5hbWUodGhpcy5tb2RlbC5nZXRHcm91cFR5cGUoKSkpXG5cdH1cblxuXHRyZW5kZXJWaWV3KCk6IENoaWxkcmVuIHtcblx0XHRyZXR1cm4gbShcIiN1c2VyLXZpZXdlci5maWxsLWFic29sdXRlLnNjcm9sbC5wbHItbFwiLCBbdGhpcy5yZW5kZXJIZWFkZXIoKSwgdGhpcy5yZW5kZXJDb21tb25JbmZvKCksIHRoaXMucmVuZGVyTWFpbEdyb3VwSW5mbygpXSlcblx0fVxuXG5cdC8qKlxuXHQgKiByZW5kZXIgdGhlIGZpZWxkcyB0aGF0IGFyZSBjb21tb24gdG8gYWxsIGdyb3VwIHR5cGVzXG5cdCAqIEBwcml2YXRlXG5cdCAqL1xuXHRwcml2YXRlIHJlbmRlckNvbW1vbkluZm8oKTogQ2hpbGRBcnJheSB7XG5cdFx0cmV0dXJuIFt0aGlzLnJlbmRlckNyZWF0ZWRUZXh0RmllbGQoKSwgdGhpcy5yZW5kZXJOYW1lRmllbGQoKSwgdGhpcy5yZW5kZXJTdGF0dXNTZWxlY3RvcigpLCB0aGlzLnJlbmRlck1lbWJlcnNUYWJsZSgpXVxuXHR9XG5cblx0cHJpdmF0ZSByZW5kZXJDcmVhdGVkVGV4dEZpZWxkKCk6IENoaWxkcmVuIHtcblx0XHRyZXR1cm4gbShUZXh0RmllbGQsIHsgbGFiZWw6IFwiY3JlYXRlZF9sYWJlbFwiLCB2YWx1ZTogZm9ybWF0RGF0ZVdpdGhNb250aCh0aGlzLm1vZGVsLmdldENyZWF0aW9uRGF0ZSgpKSwgaXNSZWFkT25seTogdHJ1ZSB9KVxuXHR9XG5cblx0LyoqXG5cdCAqIHJlbmRlciB0aGUgaW5mb3JtYXRpb24gdGhhdCBvbmx5IHNoYXJlZCBtYWlsYm94ZXMgaGF2ZVxuXHQgKiBAcHJpdmF0ZVxuXHQgKi9cblx0cHJpdmF0ZSByZW5kZXJNYWlsR3JvdXBJbmZvKCk6IENoaWxkQXJyYXkge1xuXHRcdHJldHVybiBbXG5cdFx0XHR0aGlzLnJlbmRlclVzZWRTdG9yYWdlKCksXG5cdFx0XHRtKFRleHRGaWVsZCwge1xuXHRcdFx0XHRsYWJlbDogXCJtYWlsQWRkcmVzc19sYWJlbFwiLFxuXHRcdFx0XHR2YWx1ZTogdGhpcy5tb2RlbC5nZXRHcm91cE1haWxBZGRyZXNzKCksXG5cdFx0XHRcdGlzUmVhZE9ubHk6IHRydWUsXG5cdFx0XHR9KSxcblx0XHRcdG0oVGV4dEZpZWxkLCB7XG5cdFx0XHRcdGxhYmVsOiBcIm1haWxOYW1lX2xhYmVsXCIsXG5cdFx0XHRcdHZhbHVlOiB0aGlzLm1vZGVsLmdldEdyb3VwU2VuZGVyTmFtZSgpLFxuXHRcdFx0XHRpc1JlYWRPbmx5OiB0cnVlLFxuXHRcdFx0XHRpbmplY3Rpb25zUmlnaHQ6ICgpID0+XG5cdFx0XHRcdFx0bShJY29uQnV0dG9uLCB7XG5cdFx0XHRcdFx0XHRpY29uOiBJY29ucy5FZGl0LFxuXHRcdFx0XHRcdFx0dGl0bGU6IFwic2V0U2VuZGVyTmFtZV9hY3Rpb25cIixcblx0XHRcdFx0XHRcdGNsaWNrOiAoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdHRoaXMuc2hvd0NoYW5nZVNlbmRlck5hbWVEaWFsb2coKVxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHR9KSxcblx0XHRcdH0pLFxuXHRcdF1cblx0fVxuXG5cdHByaXZhdGUgcmVuZGVyU3RhdHVzU2VsZWN0b3IoKTogQ2hpbGRyZW4ge1xuXHRcdGNvbnN0IGF0dHJzOiBEcm9wRG93blNlbGVjdG9yQXR0cnM8Ym9vbGVhbj4gPSB7XG5cdFx0XHRsYWJlbDogXCJzdGF0ZV9sYWJlbFwiLFxuXHRcdFx0aXRlbXM6IFtcblx0XHRcdFx0e1xuXHRcdFx0XHRcdG5hbWU6IGxhbmcuZ2V0KFwiYWN0aXZhdGVkX2xhYmVsXCIpLFxuXHRcdFx0XHRcdHZhbHVlOiBmYWxzZSxcblx0XHRcdFx0fSxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdG5hbWU6IGxhbmcuZ2V0KFwiZGVhY3RpdmF0ZWRfbGFiZWxcIiksXG5cdFx0XHRcdFx0dmFsdWU6IHRydWUsXG5cdFx0XHRcdH0sXG5cdFx0XHRdLFxuXHRcdFx0c2VsZWN0ZWRWYWx1ZTogIXRoaXMubW9kZWwuaXNHcm91cEFjdGl2ZSgpLFxuXHRcdFx0c2VsZWN0aW9uQ2hhbmdlZEhhbmRsZXI6IChkZWFjdGl2YXRlKSA9PiB0aGlzLm9uQWN0aXZhdGlvblN0YXR1c0NoYW5nZWQoZGVhY3RpdmF0ZSksXG5cdFx0fVxuXHRcdHJldHVybiBtKERyb3BEb3duU2VsZWN0b3IsIGF0dHJzKVxuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyBvbkFjdGl2YXRpb25TdGF0dXNDaGFuZ2VkKGRlYWN0aXZhdGU6IGJvb2xlYW4pOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRjb25zdCBidXlQYXJhbXMgPSBhd2FpdCBzaG93UHJvZ3Jlc3NEaWFsb2coXCJwbGVhc2VXYWl0X21zZ1wiLCB0aGlzLm1vZGVsLnZhbGlkYXRlR3JvdXBBY3RpdmF0aW9uU3RhdHVzKGRlYWN0aXZhdGUpKVxuXHRcdGlmICghYnV5UGFyYW1zKSByZXR1cm5cblx0XHRjb25zdCBjb25maXJtZWQgPSBhd2FpdCBzaG93QnV5RGlhbG9nKGJ1eVBhcmFtcylcblx0XHRpZiAoIWNvbmZpcm1lZCkgcmV0dXJuXG5cdFx0YXdhaXQgc2hvd1Byb2dyZXNzRGlhbG9nKFwicGxlYXNlV2FpdF9tc2dcIiwgdGhpcy5tb2RlbC5leGVjdXRlR3JvdXBCdXkoZGVhY3RpdmF0ZSkpXG5cdH1cblxuXHRwcml2YXRlIHJlbmRlck5hbWVGaWVsZCgpOiBDaGlsZHJlbiB7XG5cdFx0cmV0dXJuIG0oVGV4dEZpZWxkLCB7XG5cdFx0XHRsYWJlbDogXCJuYW1lX2xhYmVsXCIsXG5cdFx0XHR2YWx1ZTogdGhpcy5tb2RlbC5nZXRHcm91cE5hbWUoKSxcblx0XHRcdGlzUmVhZE9ubHk6IHRydWUsXG5cdFx0XHRpbmplY3Rpb25zUmlnaHQ6ICgpID0+XG5cdFx0XHRcdG0oSWNvbkJ1dHRvbiwge1xuXHRcdFx0XHRcdHRpdGxlOiBcImVkaXRfYWN0aW9uXCIsXG5cdFx0XHRcdFx0Y2xpY2s6ICgpID0+IHRoaXMuc2hvd0NoYW5nZU5hbWVEaWFsb2coKSxcblx0XHRcdFx0XHRpY29uOiBJY29ucy5FZGl0LFxuXHRcdFx0XHRcdHNpemU6IEJ1dHRvblNpemUuQ29tcGFjdCxcblx0XHRcdFx0fSksXG5cdFx0fSlcblx0fVxuXG5cdHByaXZhdGUgc2hvd0NoYW5nZU5hbWVEaWFsb2coKTogdm9pZCB7XG5cdFx0RGlhbG9nLnNob3dQcm9jZXNzVGV4dElucHV0RGlhbG9nKFxuXHRcdFx0e1xuXHRcdFx0XHR0aXRsZTogXCJlZGl0X2FjdGlvblwiLFxuXHRcdFx0XHRsYWJlbDogXCJuYW1lX2xhYmVsXCIsXG5cdFx0XHRcdGRlZmF1bHRWYWx1ZTogdGhpcy5tb2RlbC5nZXRHcm91cE5hbWUoKSxcblx0XHRcdFx0aW5wdXRWYWxpZGF0b3I6IChuZXdOYW1lKSA9PiB0aGlzLm1vZGVsLnZhbGlkYXRlR3JvdXBOYW1lKG5ld05hbWUpLFxuXHRcdFx0fSxcblx0XHRcdChuZXdOYW1lKSA9PiB0aGlzLm1vZGVsLmNoYW5nZUdyb3VwTmFtZShuZXdOYW1lKSxcblx0XHQpXG5cdH1cblxuXHRwcml2YXRlIHNob3dDaGFuZ2VTZW5kZXJOYW1lRGlhbG9nKCk6IHZvaWQge1xuXHRcdERpYWxvZy5zaG93UHJvY2Vzc1RleHRJbnB1dERpYWxvZyhcblx0XHRcdHtcblx0XHRcdFx0dGl0bGU6IFwiZWRpdF9hY3Rpb25cIixcblx0XHRcdFx0bGFiZWw6IFwibmFtZV9sYWJlbFwiLFxuXHRcdFx0XHRkZWZhdWx0VmFsdWU6IHRoaXMubW9kZWwuZ2V0R3JvdXBTZW5kZXJOYW1lKCksXG5cdFx0XHR9LFxuXHRcdFx0KG5ld05hbWUpID0+IHRoaXMubW9kZWwuY2hhbmdlR3JvdXBTZW5kZXJOYW1lKG5ld05hbWUpLFxuXHRcdClcblx0fVxuXG5cdHByaXZhdGUgcmVuZGVyVXNlZFN0b3JhZ2UoKTogQ2hpbGRyZW4ge1xuXHRcdGNvbnN0IHVzZWRTdG9yYWdlID0gdGhpcy5tb2RlbC5nZXRVc2VkU3RvcmFnZSgpXG5cdFx0Y29uc3QgZm9ybWF0dGVkU3RvcmFnZSA9IHVzZWRTdG9yYWdlID8gZm9ybWF0U3RvcmFnZVNpemUodXNlZFN0b3JhZ2UpIDogbGFuZy5nZXQoXCJsb2FkaW5nX21zZ1wiKVxuXG5cdFx0cmV0dXJuIG0oVGV4dEZpZWxkLCB7XG5cdFx0XHRsYWJlbDogXCJzdG9yYWdlQ2FwYWNpdHlVc2VkX2xhYmVsXCIsXG5cdFx0XHR2YWx1ZTogZm9ybWF0dGVkU3RvcmFnZSxcblx0XHRcdGlzUmVhZE9ubHk6IHRydWUsXG5cdFx0fSlcblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgc2hvd0FkZE1lbWJlckRpYWxvZygpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRjb25zdCBwb3NzaWJsZU1lbWJlcnMgPSBhd2FpdCB0aGlzLm1vZGVsLmdldFBvc3NpYmxlTWVtYmVycygpXG5cdFx0aWYgKHBvc3NpYmxlTWVtYmVycy5sZW5ndGggPT09IDApIHtcblx0XHRcdHJldHVybiBEaWFsb2cubWVzc2FnZShcIm5vVmFsaWRNZW1iZXJzVG9BZGRfbXNnXCIpXG5cdFx0fVxuXHRcdGxldCBjdXJyZW50U2VsZWN0aW9uID0gZ2V0Rmlyc3RPclRocm93KHBvc3NpYmxlTWVtYmVycykudmFsdWVcblxuXHRcdGNvbnN0IGFkZFVzZXJUb0dyb3VwT2tBY3Rpb24gPSAoZGlhbG9nOiBEaWFsb2cpID0+IHtcblx0XHRcdC8vIG5vaW5zcGVjdGlvbiBKU0lnbm9yZWRQcm9taXNlRnJvbUNhbGxcblx0XHRcdHNob3dQcm9ncmVzc0RpYWxvZyhcInBsZWFzZVdhaXRfbXNnXCIsIHRoaXMubW9kZWwuYWRkVXNlclRvR3JvdXAoY3VycmVudFNlbGVjdGlvbikpXG5cdFx0XHRkaWFsb2cuY2xvc2UoKVxuXHRcdH1cblxuXHRcdERpYWxvZy5zaG93QWN0aW9uRGlhbG9nKHtcblx0XHRcdHRpdGxlOiBcImFkZFVzZXJUb0dyb3VwX2xhYmVsXCIsXG5cdFx0XHRjaGlsZDoge1xuXHRcdFx0XHR2aWV3OiAoKSA9PlxuXHRcdFx0XHRcdG0oRHJvcERvd25TZWxlY3Rvciwge1xuXHRcdFx0XHRcdFx0bGFiZWw6IFwiYWNjb3VudF9sYWJlbFwiLFxuXHRcdFx0XHRcdFx0aXRlbXM6IHBvc3NpYmxlTWVtYmVycyxcblx0XHRcdFx0XHRcdHNlbGVjdGVkVmFsdWU6IGN1cnJlbnRTZWxlY3Rpb24sXG5cdFx0XHRcdFx0XHRzZWxlY3Rpb25DaGFuZ2VkSGFuZGxlcjogKG5ld1NlbGVjdGVkOiBJZCkgPT4gKGN1cnJlbnRTZWxlY3Rpb24gPSBuZXdTZWxlY3RlZCksXG5cdFx0XHRcdFx0XHRkcm9wZG93bldpZHRoOiAyNTAsXG5cdFx0XHRcdFx0fSksXG5cdFx0XHR9LFxuXHRcdFx0YWxsb3dPa1dpdGhSZXR1cm46IHRydWUsXG5cdFx0XHRva0FjdGlvbjogYWRkVXNlclRvR3JvdXBPa0FjdGlvbixcblx0XHR9KVxuXHR9XG5cblx0YXN5bmMgZW50aXR5RXZlbnRzUmVjZWl2ZWQodXBkYXRlczogUmVhZG9ubHlBcnJheTxFbnRpdHlVcGRhdGVEYXRhPik6IFByb21pc2U8dm9pZD4ge1xuXHRcdHJldHVybiB0aGlzLm1vZGVsLmVudGl0eUV2ZW50c1JlY2VpdmVkKHVwZGF0ZXMpXG5cdH1cblxuXHRwcml2YXRlIHJlbmRlck1lbWJlcnNUYWJsZSgpOiBDaGlsZHJlbiB7XG5cdFx0aWYgKCF0aGlzLm1vZGVsLmlzR3JvdXBBY3RpdmUoKSkgcmV0dXJuIG51bGxcblxuXHRcdGNvbnN0IGFkZFVzZXJCdXR0b25BdHRyczogSWNvbkJ1dHRvbkF0dHJzID0ge1xuXHRcdFx0dGl0bGU6IFwiYWRkVXNlclRvR3JvdXBfbGFiZWxcIixcblx0XHRcdGNsaWNrOiAoKSA9PiB0aGlzLnNob3dBZGRNZW1iZXJEaWFsb2coKSxcblx0XHRcdGljb246IEljb25zLkFkZCxcblx0XHRcdHNpemU6IEJ1dHRvblNpemUuQ29tcGFjdCxcblx0XHR9IGFzIGNvbnN0XG5cblx0XHRjb25zdCBsaW5lczogVGFibGVMaW5lQXR0cnNbXSA9IHRoaXMubW9kZWwuZ2V0TWVtYmVyc0luZm8oKS5tYXAoKHVzZXJHcm91cEluZm8pID0+IHtcblx0XHRcdGNvbnN0IHJlbW92ZUJ1dHRvbkF0dHJzOiBJY29uQnV0dG9uQXR0cnMgPSB7XG5cdFx0XHRcdHRpdGxlOiBcInJlbW92ZV9hY3Rpb25cIixcblx0XHRcdFx0Y2xpY2s6ICgpID0+IHNob3dQcm9ncmVzc0RpYWxvZyhcInBsZWFzZVdhaXRfbXNnXCIsIHRoaXMubW9kZWwucmVtb3ZlR3JvdXBNZW1iZXIodXNlckdyb3VwSW5mbykpLFxuXHRcdFx0XHRpY29uOiBJY29ucy5DYW5jZWwsXG5cdFx0XHRcdHNpemU6IEJ1dHRvblNpemUuQ29tcGFjdCxcblx0XHRcdH1cblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdGNlbGxzOiBbdXNlckdyb3VwSW5mby5uYW1lLCBuZXZlck51bGwodXNlckdyb3VwSW5mby5tYWlsQWRkcmVzcyldLFxuXHRcdFx0XHRhY3Rpb25CdXR0b25BdHRyczogcmVtb3ZlQnV0dG9uQXR0cnMsXG5cdFx0XHR9XG5cdFx0fSlcblxuXHRcdGNvbnN0IG1lbWJlcnNUYWJsZUF0dHJzOiBUYWJsZUF0dHJzID0ge1xuXHRcdFx0Y29sdW1uSGVhZGluZzogW1wibmFtZV9sYWJlbFwiLCBcIm1haWxBZGRyZXNzX2xhYmVsXCJdLFxuXHRcdFx0Y29sdW1uV2lkdGhzOiBbQ29sdW1uV2lkdGguTGFyZ2VzdCwgQ29sdW1uV2lkdGguTGFyZ2VzdF0sXG5cdFx0XHRzaG93QWN0aW9uQnV0dG9uQ29sdW1uOiB0cnVlLFxuXHRcdFx0YWRkQnV0dG9uQXR0cnM6IGFkZFVzZXJCdXR0b25BdHRycyxcblx0XHRcdGxpbmVzLFxuXHRcdH1cblxuXHRcdHJldHVybiBbbShcIi5oNS5tdC1sLm1iLXNcIiwgbGFuZy5nZXQoXCJncm91cE1lbWJlcnNfbGFiZWxcIikpLCBtKFRhYmxlLCBtZW1iZXJzVGFibGVBdHRycyldXG5cdH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEdyb3VwVHlwZURpc3BsYXlOYW1lKGdyb3VwVHlwZTogTnVtYmVyU3RyaW5nIHwgbnVsbCk6IHN0cmluZyB7XG5cdGlmIChncm91cFR5cGUgPT0gbnVsbCkge1xuXHRcdHJldHVybiBcIlwiXG5cdH0gZWxzZSBpZiAoZ3JvdXBUeXBlID09PSBHcm91cFR5cGUuTWFpbCkge1xuXHRcdHJldHVybiBsYW5nLmdldChcInNoYXJlZE1haWxib3hfbGFiZWxcIilcblx0fSBlbHNlIGlmIChncm91cFR5cGUgPT09IEdyb3VwVHlwZS5Vc2VyKSB7XG5cdFx0cmV0dXJuIGxhbmcuZ2V0KFwidXNlckNvbHVtbl9sYWJlbFwiKVxuXHR9IGVsc2UgaWYgKGdyb3VwVHlwZSA9PT0gR3JvdXBUeXBlLlRlbXBsYXRlKSB7XG5cdFx0cmV0dXJuIGxhbmcuZ2V0KFwidGVtcGxhdGVHcm91cF9sYWJlbFwiKVxuXHR9IGVsc2Uge1xuXHRcdHJldHVybiBncm91cFR5cGUgLy8ganVzdCBmb3IgdGVzdGluZ1xuXHR9XG59XG4iLCJpbXBvcnQgbSBmcm9tIFwibWl0aHJpbFwiXG5pbXBvcnQgeyBEaWFsb2cgfSBmcm9tIFwiLi4vZ3VpL2Jhc2UvRGlhbG9nLmpzXCJcbmltcG9ydCB7IGxhbmcsIFRyYW5zbGF0aW9uS2V5IH0gZnJvbSBcIi4uL21pc2MvTGFuZ3VhZ2VWaWV3TW9kZWwuanNcIlxuaW1wb3J0IHsgaXNNYWlsQWRkcmVzcyB9IGZyb20gXCIuLi9taXNjL0Zvcm1hdFZhbGlkYXRvci5qc1wiXG5pbXBvcnQgeyBCb29raW5nSXRlbUZlYXR1cmVUeXBlIH0gZnJvbSBcIi4uL2FwaS9jb21tb24vVHV0YW5vdGFDb25zdGFudHMuanNcIlxuaW1wb3J0IHsgY29udGFpbnMsIGRlbGF5LCBvZkNsYXNzLCBwcm9taXNlTWFwIH0gZnJvbSBcIkB0dXRhby90dXRhbm90YS11dGlsc1wiXG5pbXBvcnQgeyBQcmVjb25kaXRpb25GYWlsZWRFcnJvciB9IGZyb20gXCIuLi9hcGkvY29tbW9uL2Vycm9yL1Jlc3RFcnJvci5qc1wiXG5pbXBvcnQgeyBzaG93QnV5RGlhbG9nIH0gZnJvbSBcIi4uL3N1YnNjcmlwdGlvbi9CdXlEaWFsb2cuanNcIlxuaW1wb3J0IHsgbG9jYXRvciB9IGZyb20gXCIuLi9hcGkvbWFpbi9Db21tb25Mb2NhdG9yLmpzXCJcbmltcG9ydCB7IHNob3dQcm9ncmVzc0RpYWxvZyB9IGZyb20gXCIuLi9ndWkvZGlhbG9ncy9Qcm9ncmVzc0RpYWxvZy5qc1wiXG5pbXBvcnQgeyBPcGVyYXRpb25JZCB9IGZyb20gXCIuLi9hcGkvbWFpbi9PcGVyYXRpb25Qcm9ncmVzc1RyYWNrZXIuanNcIlxuaW1wb3J0IHsgdG9GZWF0dXJlVHlwZSB9IGZyb20gXCIuLi9zdWJzY3JpcHRpb24vU3Vic2NyaXB0aW9uVXRpbHMuanNcIlxuXG5jb25zdCBkZWxheVRpbWUgPSA5MDBcbnR5cGUgVXNlckltcG9ydERldGFpbHMgPSB7XG5cdHVzZXJuYW1lOiBzdHJpbmcgfCBudWxsXG5cdG1haWxBZGRyZXNzOiBzdHJpbmdcblx0cGFzc3dvcmQ6IHN0cmluZ1xufVxuZXhwb3J0IGNvbnN0IENTVl9VU0VSX0ZPUk1BVCA9IFwidXNlcm5hbWU7dXNlckBkb21haW4uY29tO3Bhc3N3b3JkXCJcblxuZXhwb3J0IGZ1bmN0aW9uIGNoZWNrQW5kSW1wb3J0VXNlckRhdGEodXNlckRldGFpbHNJbnB1dENzdjogc3RyaW5nLCBhdmFpbGFibGVEb21haW5zOiBzdHJpbmdbXSk6IGJvb2xlYW4ge1xuXHRsZXQgdXNlckRhdGEgPSBjc3ZUb1VzZXJEZXRhaWxzKHVzZXJEZXRhaWxzSW5wdXRDc3YpXG5cblx0aWYgKCF1c2VyRGF0YSkge1xuXHRcdERpYWxvZy5tZXNzYWdlKFxuXHRcdFx0bGFuZy5nZXRUcmFuc2xhdGlvbihcIndyb25nVXNlckNzdkZvcm1hdF9tc2dcIiwge1xuXHRcdFx0XHRcIntmb3JtYXR9XCI6IENTVl9VU0VSX0ZPUk1BVCxcblx0XHRcdH0pLFxuXHRcdClcblx0XHRyZXR1cm4gZmFsc2Vcblx0fSBlbHNlIHtcblx0XHRjb25zdCBlcnJvck1lc3NhZ2UgPSBjaGVja0FuZEdldEVycm9yTWVzc2FnZSh1c2VyRGF0YSwgYXZhaWxhYmxlRG9tYWlucylcblxuXHRcdGlmICghZXJyb3JNZXNzYWdlKSB7XG5cdFx0XHRpZiAodXNlckRhdGEubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRzaG93Qm9va2luZ0RpYWxvZyh1c2VyRGF0YSlcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIHRydWVcblx0XHR9IGVsc2Uge1xuXHRcdFx0RGlhbG9nLm1lc3NhZ2UobGFuZy5tYWtlVHJhbnNsYXRpb24oXCJlcnJvcl9tc2dcIiwgZXJyb3JNZXNzYWdlKSlcblx0XHRcdHJldHVybiBmYWxzZVxuXHRcdH1cblx0fVxufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIHVzZXIgZGF0YSBmcm9tIHRoZSBnaXZlbiBjc3Ygc3RyaW5nIG9yIG51bGwgaWYgdGhlIHNjdiBzdHJpbmcgaXMgbm90IHZhbGlkXG4gKi9cbmZ1bmN0aW9uIGNzdlRvVXNlckRldGFpbHMoY3N2U3RyaW5nOiBzdHJpbmcpOiBVc2VySW1wb3J0RGV0YWlsc1tdIHwgbnVsbCB7XG5cdGxldCBsaW5lcyA9IGNzdlN0cmluZ1xuXHRcdC5yZXBsYWNlKFwiXFxyXCIsIFwiXCIpXG5cdFx0LnNwbGl0KFwiXFxuXCIpXG5cdFx0LmZpbHRlcigobCkgPT4gXCJcIiAhPT0gbC50cmltKCkpXG5cdGxldCBlcnJvciA9IGZhbHNlXG5cdGxldCB1c2VyRGF0YSA9IGxpbmVzLm1hcCgoYSkgPT4ge1xuXHRcdGxldCBwYXJ0cyA9IGEudHJpbSgpLnNwbGl0KFwiO1wiKVxuXG5cdFx0aWYgKHBhcnRzLmxlbmd0aCAhPT0gMykge1xuXHRcdFx0ZXJyb3IgPSB0cnVlXG5cdFx0XHRyZXR1cm4gbnVsbFxuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHR1c2VybmFtZTogcGFydHNbMF0sXG5cdFx0XHRcdG1haWxBZGRyZXNzOiBwYXJ0c1sxXSxcblx0XHRcdFx0cGFzc3dvcmQ6IHBhcnRzWzJdLFxuXHRcdFx0fVxuXHRcdH1cblx0fSlcblxuXHRpZiAoZXJyb3IpIHtcblx0XHRyZXR1cm4gbnVsbFxuXHR9IGVsc2Uge1xuXHRcdHJldHVybiB1c2VyRGF0YSBhcyBhbnlcblx0fVxufVxuXG4vKipcbiAqIENoZWNrIHRoZSB1c2VyIGRhdGEgZm9yIHZhbGlkaXR5LiBSZXR1cm5zIGFuIGVycm9yIG1lc3NhZ2UgZm9yIHRoZSBmaXJzdCB1c2VyIHdpdGggaW52YWxpZCBkYXRhLCBvdGhlcndpc2UgbnVsbC5cbiAqL1xuZnVuY3Rpb24gY2hlY2tBbmRHZXRFcnJvck1lc3NhZ2UodXNlckRhdGE6IFVzZXJJbXBvcnREZXRhaWxzW10sIGF2YWlsYWJsZURvbWFpbnM6IHN0cmluZ1tdKTogc3RyaW5nIHwgbnVsbCB7XG5cdGlmICh1c2VyRGF0YS5sZW5ndGggPT09IDApIHtcblx0XHRyZXR1cm4gbGFuZy5nZXQoXCJub0lucHV0V2FzTWFkZV9tc2dcIilcblx0fSBlbHNlIHtcblx0XHRsZXQgZXJyb3JNZXNzYWdlQXJyYXk6IFRyYW5zbGF0aW9uS2V5W10gPSBbXVxuXHRcdGxldCBlcnJvck1lc3NhZ2U6IHN0cmluZyB8IG51bGwgPSBudWxsXG5cdFx0dXNlckRhdGEuZmluZCgodSwgaW5kZXgpID0+IHtcblx0XHRcdGxldCBtYWlsQWRkcmVzcyA9IHUubWFpbEFkZHJlc3Ncblx0XHRcdGxldCBkb21haW4gPSB1Lm1haWxBZGRyZXNzLnNwbGl0KFwiQFwiKVsxXS50b0xvd2VyQ2FzZSgpLnRyaW0oKVxuXG5cdFx0XHRpZiAoIWlzTWFpbEFkZHJlc3ModS5tYWlsQWRkcmVzcywgdHJ1ZSkpIHtcblx0XHRcdFx0ZXJyb3JNZXNzYWdlQXJyYXkucHVzaChcIm1haWxBZGRyZXNzSW52YWxpZF9tc2dcIilcblx0XHRcdH1cblxuXHRcdFx0aWYgKCFjb250YWlucyhhdmFpbGFibGVEb21haW5zLCBkb21haW4pKSB7XG5cdFx0XHRcdGVycm9yTWVzc2FnZUFycmF5LnB1c2goXCJjdXN0b21Eb21haW5FcnJvckRvbWFpbk5vdEF2YWlsYWJsZV9tc2dcIilcblx0XHRcdH1cblxuXHRcdFx0aWYgKHUucGFzc3dvcmQudHJpbSgpID09PSBcIlwiKSB7XG5cdFx0XHRcdGVycm9yTWVzc2FnZUFycmF5LnB1c2goXCJlbnRlck1pc3NpbmdQYXNzd29yZF9tc2dcIilcblx0XHRcdH1cblxuXHRcdFx0aWYgKHVzZXJEYXRhLnNvbWUoKG90aGVyVXNlcikgPT4gb3RoZXJVc2VyLm1haWxBZGRyZXNzID09PSBtYWlsQWRkcmVzcyAmJiBvdGhlclVzZXIgIT09IHUpKSB7XG5cdFx0XHRcdGVycm9yTWVzc2FnZUFycmF5LnB1c2goXCJkdXBsaWNhdGVkTWFpbEFkZHJlc3NJblVzZXJMaXN0X21zZ1wiKVxuXHRcdFx0fVxuXG5cdFx0XHQvLyBjcmVhdGUgZXJyb3IgbXNnIGZyb20gYWxsIGVycm9ycyBmb3IgdGhpcyB1c2VyXG5cdFx0XHRpZiAoZXJyb3JNZXNzYWdlQXJyYXkubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRlcnJvck1lc3NhZ2UgPVxuXHRcdFx0XHRcdGVycm9yTWVzc2FnZUFycmF5Lm1hcCgoZSkgPT4gbGFuZy5nZXQoZSkpLmpvaW4oXCJcXG5cIikgK1xuXHRcdFx0XHRcdFwiXFxuXCIgK1xuXHRcdFx0XHRcdGxhbmcuZ2V0KFwiZXJyb3JBdExpbmVfbXNnXCIsIHtcblx0XHRcdFx0XHRcdFwie2luZGV4fVwiOiBpbmRleCArIDEsXG5cdFx0XHRcdFx0XHRcIntlcnJvcn1cIjogYFwiJHt1LnVzZXJuYW1lIHx8IFwiXCJ9OyR7dS5tYWlsQWRkcmVzcyB8fCBcIlwifTske3UucGFzc3dvcmQgfHwgXCJcIn1cImAsXG5cdFx0XHRcdFx0fSlcblx0XHRcdFx0cmV0dXJuIHRydWVcblx0XHRcdH1cblx0XHR9KVxuXHRcdHJldHVybiBlcnJvck1lc3NhZ2Vcblx0fVxufVxuXG5hc3luYyBmdW5jdGlvbiBzaG93Qm9va2luZ0RpYWxvZyh1c2VyRGV0YWlsc0FycmF5OiBVc2VySW1wb3J0RGV0YWlsc1tdKSB7XG5cdC8vIFdlIHNlbmQgaW5kZXggdG8gd29ya2VyIGFuZCB0aGVuIHdvcmtlciBjYWxjdWxhdGVzIHRoZSBwcm9ncmVzcyBiYXNlZCBvbiB0aGUgaW5kZXggb2YgdGhlIHVzZXJcblx0Y29uc3QgdXNlckNvbnRyb2xsZXIgPSBsb2NhdG9yLmxvZ2lucy5nZXRVc2VyQ29udHJvbGxlcigpXG5cdGNvbnN0IHBsYW5UeXBlID0gYXdhaXQgdXNlckNvbnRyb2xsZXIuZ2V0UGxhblR5cGUoKVxuXG5cdGNvbnN0IGFjY2VwdGVkID0gYXdhaXQgc2hvd0J1eURpYWxvZyh7XG5cdFx0ZmVhdHVyZVR5cGU6IChhd2FpdCB1c2VyQ29udHJvbGxlci5pc05ld1BhaWRQbGFuKCkpID8gdG9GZWF0dXJlVHlwZShwbGFuVHlwZSkgOiBCb29raW5nSXRlbUZlYXR1cmVUeXBlLkxlZ2FjeVVzZXJzLFxuXHRcdGJvb2tpbmdUZXh0OiBcImJvb2tpbmdJdGVtVXNlcnNJbmNsdWRpbmdfbGFiZWxcIixcblx0XHRjb3VudDogdXNlckRldGFpbHNBcnJheS5sZW5ndGgsXG5cdFx0ZnJlZUFtb3VudDogMCxcblx0XHRyZWFjdGl2YXRlOiBmYWxzZSxcblx0fSlcblx0aWYgKCFhY2NlcHRlZCkge1xuXHRcdHJldHVyblxuXHR9XG5cdGxldCBuYnJPZkNyZWF0ZWRVc2VycyA9IDBcblx0bGV0IG5vdEF2YWlsYWJsZVVzZXJzOiBVc2VySW1wb3J0RGV0YWlsc1tdID0gW11cblx0Y29uc3Qgb3BlcmF0aW9uID0gbG9jYXRvci5vcGVyYXRpb25Qcm9ncmVzc1RyYWNrZXIuc3RhcnROZXdPcGVyYXRpb24oKVxuXHRhd2FpdCBzaG93UHJvZ3Jlc3NEaWFsb2coXG5cdFx0bGFuZy5nZXRUcmFuc2xhdGlvbihcImNyZWF0ZUFjdGlvblN0YXR1c19tc2dcIiwge1xuXHRcdFx0XCJ7aW5kZXh9XCI6IG5ick9mQ3JlYXRlZFVzZXJzLFxuXHRcdFx0XCJ7Y291bnR9XCI6IHVzZXJEZXRhaWxzQXJyYXkubGVuZ3RoLFxuXHRcdH0pLFxuXHRcdHByb21pc2VNYXAodXNlckRldGFpbHNBcnJheSwgKHVzZXIsIHVzZXJJbmRleCkgPT4ge1xuXHRcdFx0cmV0dXJuIGNyZWF0ZVVzZXJJZk1haWxBZGRyZXNzQXZhaWxhYmxlKHVzZXIsIHVzZXJJbmRleCwgdXNlckRldGFpbHNBcnJheS5sZW5ndGgsIG9wZXJhdGlvbi5pZCkudGhlbigoY3JlYXRlZCkgPT4ge1xuXHRcdFx0XHRpZiAoY3JlYXRlZCkge1xuXHRcdFx0XHRcdG5ick9mQ3JlYXRlZFVzZXJzKytcblx0XHRcdFx0XHRtLnJlZHJhdygpXG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0bm90QXZhaWxhYmxlVXNlcnMucHVzaCh1c2VyKVxuXHRcdFx0XHR9XG5cdFx0XHR9KVxuXHRcdH0pLFxuXHRcdG9wZXJhdGlvbi5wcm9ncmVzcyxcblx0KVxuXHRcdC5jYXRjaChvZkNsYXNzKFByZWNvbmRpdGlvbkZhaWxlZEVycm9yLCAoKSA9PiBEaWFsb2cubWVzc2FnZShcImNyZWF0ZVVzZXJGYWlsZWRfbXNnXCIpKSlcblx0XHQuZmluYWxseSgoKSA9PiBvcGVyYXRpb24uZG9uZSlcblxuXHRpZiAobm90QXZhaWxhYmxlVXNlcnMubGVuZ3RoID4gMCkge1xuXHRcdGF3YWl0IERpYWxvZy5tZXNzYWdlKFxuXHRcdFx0bGFuZy5tYWtlVHJhbnNsYXRpb24oXG5cdFx0XHRcdFwiYWRkcmVzc2VzQWxyZWFkeUluVXNlX21zZ1wiLFxuXHRcdFx0XHRsYW5nLmdldChcImFkZHJlc3Nlc0FscmVhZHlJblVzZV9tc2dcIikgKyBcIiBcIiArIG5vdEF2YWlsYWJsZVVzZXJzLm1hcCgodSkgPT4gdS5tYWlsQWRkcmVzcykuam9pbihcIiwgXCIpLFxuXHRcdFx0KSxcblx0XHQpXG5cdH1cblxuXHRhd2FpdCBEaWFsb2cubWVzc2FnZShcblx0XHRsYW5nLmdldFRyYW5zbGF0aW9uKFwiY3JlYXRlZFVzZXJzQ291bnRfbXNnXCIsIHtcblx0XHRcdFwiezF9XCI6IG5ick9mQ3JlYXRlZFVzZXJzLFxuXHRcdH0pLFxuXHQpXG59XG5cbi8qKlxuICogQHJldHVybnMgVHJ1ZSBpZiB0aGUgdXNlciB3YXMgY3JlYXRlZCwgZmFsc2UgaWYgdGhlIGVtYWlsIGFkZHJlc3MgaXMgbm90IGF2YWlsYWJsZS5cbiAqL1xuZnVuY3Rpb24gY3JlYXRlVXNlcklmTWFpbEFkZHJlc3NBdmFpbGFibGUodXNlcjogVXNlckltcG9ydERldGFpbHMsIGluZGV4OiBudW1iZXIsIG92ZXJhbGxOdW1iZXJPZlVzZXJzOiBudW1iZXIsIG9wZXJhdGlvbklkOiBPcGVyYXRpb25JZCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuXHRsZXQgY2xlYW5NYWlsQWRkcmVzcyA9IHVzZXIubWFpbEFkZHJlc3MudHJpbSgpLnRvTG93ZXJDYXNlKClcblx0cmV0dXJuIGxvY2F0b3IubWFpbEFkZHJlc3NGYWNhZGUuaXNNYWlsQWRkcmVzc0F2YWlsYWJsZShjbGVhbk1haWxBZGRyZXNzKS50aGVuKGFzeW5jIChhdmFpbGFibGUpID0+IHtcblx0XHRpZiAoYXZhaWxhYmxlKSB7XG5cdFx0XHQvLyB3ZSBkb24ndCB1c2UgaXQgY3VycmVudGx5XG5cblx0XHRcdHJldHVybiBsb2NhdG9yLnVzZXJNYW5hZ2VtZW50RmFjYWRlXG5cdFx0XHRcdC5jcmVhdGVVc2VyKHVzZXIudXNlcm5hbWUgPyB1c2VyLnVzZXJuYW1lIDogXCJcIiwgY2xlYW5NYWlsQWRkcmVzcywgdXNlci5wYXNzd29yZCwgaW5kZXgsIG92ZXJhbGxOdW1iZXJPZlVzZXJzLCBvcGVyYXRpb25JZClcblx0XHRcdFx0LnRoZW4oKCkgPT4ge1xuXHRcdFx0XHRcdC8vIGRlbGF5IGlzIG5lZWRlZCBzbyB0aGF0IHRoZXJlIGFyZSBub3QgdG9vIG1hbnkgcmVxdWVzdHMgZnJvbSBpc01haWxBZGRyZXNzQXZhaWxhYmxlIHNlcnZpY2UgaWYgdXNlcnMgYXIgbm90IGF2YWlsYWJsZSAoYXJlIG5vdCBjcmVhdGVkKVxuXHRcdFx0XHRcdHJldHVybiBkZWxheShkZWxheVRpbWUpLnRoZW4oKCkgPT4gdHJ1ZSlcblx0XHRcdFx0fSlcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmV0dXJuIGRlbGF5KGRlbGF5VGltZSkudGhlbigoKSA9PiBmYWxzZSlcblx0XHR9XG5cdH0pXG59XG4iLCJpbXBvcnQgbSwgeyBDaGlsZHJlbiB9IGZyb20gXCJtaXRocmlsXCJcbmltcG9ydCB7IGFzc2VydE1haW5Pck5vZGUgfSBmcm9tIFwiLi4vYXBpL2NvbW1vbi9FbnYuanNcIlxuaW1wb3J0IHsgRGlhbG9nIH0gZnJvbSBcIi4uL2d1aS9iYXNlL0RpYWxvZy5qc1wiXG5pbXBvcnQgeyBmb3JtYXREYXRlV2l0aE1vbnRoLCBmb3JtYXRTdG9yYWdlU2l6ZSB9IGZyb20gXCIuLi9taXNjL0Zvcm1hdHRlci5qc1wiXG5pbXBvcnQgeyBsYW5nIH0gZnJvbSBcIi4uL21pc2MvTGFuZ3VhZ2VWaWV3TW9kZWwuanNcIlxuaW1wb3J0IHR5cGUgeyBDdXN0b21lciwgR3JvdXBJbmZvLCBHcm91cE1lbWJlcnNoaXAsIFVzZXIgfSBmcm9tIFwiLi4vYXBpL2VudGl0aWVzL3N5cy9UeXBlUmVmcy5qc1wiXG5pbXBvcnQgeyBHcm91cEluZm9UeXBlUmVmLCBHcm91cFR5cGVSZWYsIFVzZXJUeXBlUmVmIH0gZnJvbSBcIi4uL2FwaS9lbnRpdGllcy9zeXMvVHlwZVJlZnMuanNcIlxuaW1wb3J0IHsgYXN5bmNGaW5kLCBnZXRGaXJzdE9yVGhyb3csIExhenlMb2FkZWQsIG5ldmVyTnVsbCwgb2ZDbGFzcywgcHJvbWlzZU1hcCB9IGZyb20gXCJAdHV0YW8vdHV0YW5vdGEtdXRpbHNcIlxuaW1wb3J0IHsgQm9va2luZ0l0ZW1GZWF0dXJlVHlwZSwgR3JvdXBUeXBlLCBPcGVyYXRpb25UeXBlIH0gZnJvbSBcIi4uL2FwaS9jb21tb24vVHV0YW5vdGFDb25zdGFudHMuanNcIlxuaW1wb3J0IHsgQmFkUmVxdWVzdEVycm9yLCBOb3RBdXRob3JpemVkRXJyb3IsIFByZWNvbmRpdGlvbkZhaWxlZEVycm9yIH0gZnJvbSBcIi4uL2FwaS9jb21tb24vZXJyb3IvUmVzdEVycm9yLmpzXCJcbmltcG9ydCB7IENvbHVtbldpZHRoLCBUYWJsZSwgVGFibGVBdHRycyB9IGZyb20gXCIuLi9ndWkvYmFzZS9UYWJsZS5qc1wiXG5pbXBvcnQgeyBnZXRHcm91cFR5cGVEaXNwbGF5TmFtZSB9IGZyb20gXCIuL2dyb3Vwcy9Hcm91cERldGFpbHNWaWV3LmpzXCJcbmltcG9ydCB7IEljb25zIH0gZnJvbSBcIi4uL2d1aS9iYXNlL2ljb25zL0ljb25zLmpzXCJcbmltcG9ydCB7IFNlY29uZEZhY3RvcnNFZGl0Rm9ybSB9IGZyb20gXCIuL2xvZ2luL3NlY29uZGZhY3Rvci9TZWNvbmRGYWN0b3JzRWRpdEZvcm0uanNcIlxuaW1wb3J0IHsgc2hvd1Byb2dyZXNzRGlhbG9nIH0gZnJvbSBcIi4uL2d1aS9kaWFsb2dzL1Byb2dyZXNzRGlhbG9nLmpzXCJcblxuaW1wb3J0IHsgSHRtbEVkaXRvciBhcyBFZGl0b3IsIEh0bWxFZGl0b3JNb2RlIH0gZnJvbSBcIi4uL2d1aS9lZGl0b3IvSHRtbEVkaXRvci5qc1wiXG5pbXBvcnQgeyBjaGVja0FuZEltcG9ydFVzZXJEYXRhLCBDU1ZfVVNFUl9GT1JNQVQgfSBmcm9tIFwiLi9JbXBvcnRVc2Vyc1ZpZXdlci5qc1wiXG5pbXBvcnQgeyBNYWlsQWRkcmVzc1RhYmxlIH0gZnJvbSBcIi4vbWFpbGFkZHJlc3MvTWFpbEFkZHJlc3NUYWJsZS5qc1wiXG5pbXBvcnQgeyBjb21wYXJlR3JvdXBJbmZvcywgZ2V0R3JvdXBJbmZvRGlzcGxheU5hbWUgfSBmcm9tIFwiLi4vYXBpL2NvbW1vbi91dGlscy9Hcm91cFV0aWxzLmpzXCJcbmltcG9ydCB7IGlzU2FtZUlkIH0gZnJvbSBcIi4uL2FwaS9jb21tb24vdXRpbHMvRW50aXR5VXRpbHMuanNcIlxuaW1wb3J0IHsgc2hvd0J1eURpYWxvZyB9IGZyb20gXCIuLi9zdWJzY3JpcHRpb24vQnV5RGlhbG9nLmpzXCJcbmltcG9ydCB7IFRleHRGaWVsZCB9IGZyb20gXCIuLi9ndWkvYmFzZS9UZXh0RmllbGQuanNcIlxuaW1wb3J0IHsgbG9jYXRvciB9IGZyb20gXCIuLi9hcGkvbWFpbi9Db21tb25Mb2NhdG9yLmpzXCJcbmltcG9ydCB7IERyb3BEb3duU2VsZWN0b3IgfSBmcm9tIFwiLi4vZ3VpL2Jhc2UvRHJvcERvd25TZWxlY3Rvci5qc1wiXG5pbXBvcnQgeyBzaG93Q2hhbmdlT3duUGFzc3dvcmREaWFsb2csIHNob3dDaGFuZ2VVc2VyUGFzc3dvcmRBc0FkbWluRGlhbG9nIH0gZnJvbSBcIi4vbG9naW4vQ2hhbmdlUGFzc3dvcmREaWFsb2dzLmpzXCJcbmltcG9ydCB7IEljb25CdXR0b24sIEljb25CdXR0b25BdHRycyB9IGZyb20gXCIuLi9ndWkvYmFzZS9JY29uQnV0dG9uLmpzXCJcbmltcG9ydCB7IEJ1dHRvblNpemUgfSBmcm9tIFwiLi4vZ3VpL2Jhc2UvQnV0dG9uU2l6ZS5qc1wiXG5pbXBvcnQgeyBNYWlsQWRkcmVzc1RhYmxlTW9kZWwgfSBmcm9tIFwiLi9tYWlsYWRkcmVzcy9NYWlsQWRkcmVzc1RhYmxlTW9kZWwuanNcIlxuaW1wb3J0IHsgcHJvZ3Jlc3NJY29uIH0gZnJvbSBcIi4uL2d1aS9iYXNlL0ljb24uanNcIlxuaW1wb3J0IHsgdG9GZWF0dXJlVHlwZSB9IGZyb20gXCIuLi9zdWJzY3JpcHRpb24vU3Vic2NyaXB0aW9uVXRpbHMuanNcIlxuaW1wb3J0IHsgRW50aXR5VXBkYXRlRGF0YSwgaXNVcGRhdGVGb3JUeXBlUmVmIH0gZnJvbSBcIi4uL2FwaS9jb21tb24vdXRpbHMvRW50aXR5VXBkYXRlVXRpbHMuanNcIlxuaW1wb3J0IHsgVXBkYXRhYmxlU2V0dGluZ3NEZXRhaWxzVmlld2VyIH0gZnJvbSBcIi4vSW50ZXJmYWNlcy5qc1wiXG5cbmFzc2VydE1haW5Pck5vZGUoKVxuXG5leHBvcnQgY2xhc3MgVXNlclZpZXdlciBpbXBsZW1lbnRzIFVwZGF0YWJsZVNldHRpbmdzRGV0YWlsc1ZpZXdlciB7XG5cdHByaXZhdGUgcmVhZG9ubHkgdXNlcjogTGF6eUxvYWRlZDxVc2VyPiA9IG5ldyBMYXp5TG9hZGVkKCgpID0+IHRoaXMubG9hZFVzZXIoKSlcblx0cHJpdmF0ZSByZWFkb25seSBjdXN0b21lciA9IG5ldyBMYXp5TG9hZGVkKCgpID0+IHRoaXMubG9hZEN1c3RvbWVyKCkpXG5cdHByaXZhdGUgcmVhZG9ubHkgdGVhbUdyb3VwSW5mb3MgPSBuZXcgTGF6eUxvYWRlZCgoKSA9PiB0aGlzLmxvYWRUZWFtR3JvdXBJbmZvcygpKVxuXHRwcml2YXRlIGdyb3Vwc1RhYmxlQXR0cnM6IFRhYmxlQXR0cnMgfCBudWxsID0gbnVsbFxuXHRwcml2YXRlIHJlYWRvbmx5IHNlY29uZEZhY3RvcnNGb3JtOiBTZWNvbmRGYWN0b3JzRWRpdEZvcm1cblx0cHJpdmF0ZSB1c2VkU3RvcmFnZTogbnVtYmVyIHwgbnVsbCA9IG51bGxcblx0cHJpdmF0ZSBtYWlsQWRkcmVzc1RhYmxlTW9kZWw6IE1haWxBZGRyZXNzVGFibGVNb2RlbCB8IG51bGwgPSBudWxsXG5cdHByaXZhdGUgbWFpbEFkZHJlc3NUYWJsZUV4cGFuZGVkOiBib29sZWFuXG5cblx0Y29uc3RydWN0b3IocHVibGljIHVzZXJHcm91cEluZm86IEdyb3VwSW5mbywgcHJpdmF0ZSBpc0FkbWluOiBib29sZWFuKSB7XG5cdFx0dGhpcy51c2VyR3JvdXBJbmZvID0gdXNlckdyb3VwSW5mb1xuXG5cdFx0dGhpcy5tYWlsQWRkcmVzc1RhYmxlRXhwYW5kZWQgPSBmYWxzZVxuXG5cdFx0dGhpcy5zZWNvbmRGYWN0b3JzRm9ybSA9IG5ldyBTZWNvbmRGYWN0b3JzRWRpdEZvcm0oXG5cdFx0XHR0aGlzLnVzZXIsXG5cdFx0XHRsb2NhdG9yLmRvbWFpbkNvbmZpZ1Byb3ZpZGVyKCksXG5cdFx0XHRsb2NhdG9yLmxvZ2luRmFjYWRlLFxuXHRcdFx0dGhpcy5pc0FkbWluLFxuXHRcdFx0ISF0aGlzLnVzZXJHcm91cEluZm8uZGVsZXRlZCxcblx0XHQpXG5cblx0XHR0aGlzLnRlYW1Hcm91cEluZm9zLmdldEFzeW5jKCkudGhlbihhc3luYyAoYXZhaWxhYmxlVGVhbUdyb3VwSW5mb3MpID0+IHtcblx0XHRcdGlmIChhdmFpbGFibGVUZWFtR3JvdXBJbmZvcy5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdHRoaXMuZ3JvdXBzVGFibGVBdHRycyA9IHtcblx0XHRcdFx0XHRjb2x1bW5IZWFkaW5nOiBbXCJuYW1lX2xhYmVsXCIsIFwiZ3JvdXBUeXBlX2xhYmVsXCJdLFxuXHRcdFx0XHRcdGNvbHVtbldpZHRoczogW0NvbHVtbldpZHRoLkxhcmdlc3QsIENvbHVtbldpZHRoLlNtYWxsXSxcblx0XHRcdFx0XHRzaG93QWN0aW9uQnV0dG9uQ29sdW1uOiB0cnVlLFxuXHRcdFx0XHRcdGFkZEJ1dHRvbkF0dHJzOiB7XG5cdFx0XHRcdFx0XHR0aXRsZTogXCJhZGRHcm91cF9sYWJlbFwiLFxuXHRcdFx0XHRcdFx0aWNvbjogSWNvbnMuQWRkLFxuXHRcdFx0XHRcdFx0Y2xpY2s6ICgpID0+IHRoaXMuc2hvd0FkZFVzZXJUb0dyb3VwRGlhbG9nKCksXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRsaW5lczogW10sXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRhd2FpdCB0aGlzLnVwZGF0ZUdyb3VwcygpXG5cdFx0XHR9XG5cdFx0fSlcblxuXHRcdHRoaXMudXNlci5nZXRBc3luYygpLnRoZW4oYXN5bmMgKHVzZXIpID0+IHtcblx0XHRcdGNvbnN0IG1haWxNZW1iZXJzaGlwID0gYXdhaXQgYXN5bmNGaW5kKHVzZXIubWVtYmVyc2hpcHMsIGFzeW5jIChzaGlwKSA9PiB7XG5cdFx0XHRcdHJldHVybiBzaGlwLmdyb3VwVHlwZSA9PT0gR3JvdXBUeXBlLk1haWwgJiYgKGF3YWl0IGxvY2F0b3IuZW50aXR5Q2xpZW50LmxvYWQoR3JvdXBUeXBlUmVmLCBzaGlwLmdyb3VwKSkudXNlciA9PT0gdXNlci5faWRcblx0XHRcdH0pXG5cdFx0XHRpZiAobWFpbE1lbWJlcnNoaXAgPT0gbnVsbCkge1xuXHRcdFx0XHRjb25zb2xlLmVycm9yKFwiVXNlciBkb2Vzbid0IGhhdmUgYSBtYWlsYm94P1wiLCB1c2VyLl9pZClcblx0XHRcdFx0cmV0dXJuXG5cdFx0XHR9XG5cdFx0XHR0aGlzLm1haWxBZGRyZXNzVGFibGVNb2RlbCA9IHRoaXMuaXNJdE1lKClcblx0XHRcdFx0PyBhd2FpdCBsb2NhdG9yLm1haWxBZGRyZXNzVGFibGVNb2RlbEZvck93bk1haWxib3goKVxuXHRcdFx0XHQ6IGF3YWl0IGxvY2F0b3IubWFpbEFkZHJlc3NUYWJsZU1vZGVsRm9yQWRtaW4obWFpbE1lbWJlcnNoaXAuZ3JvdXAsIHVzZXIuX2lkLCB0aGlzLnVzZXJHcm91cEluZm8pXG5cdFx0XHRtLnJlZHJhdygpXG5cdFx0fSlcblxuXHRcdHRoaXMudXBkYXRlVXNlZFN0b3JhZ2VBbmRBZG1pbkZsYWcoKVxuXHR9XG5cblx0cmVuZGVyVmlldygpOiBDaGlsZHJlbiB7XG5cdFx0Y29uc3QgY2hhbmdlUGFzc3dvcmRCdXR0b25BdHRyczogSWNvbkJ1dHRvbkF0dHJzID0ge1xuXHRcdFx0dGl0bGU6IFwiY2hhbmdlUGFzc3dvcmRfbGFiZWxcIixcblx0XHRcdGNsaWNrOiAoKSA9PiB0aGlzLmNoYW5nZVBhc3N3b3JkKCksXG5cdFx0XHRpY29uOiBJY29ucy5FZGl0LFxuXHRcdFx0c2l6ZTogQnV0dG9uU2l6ZS5Db21wYWN0LFxuXHRcdH0gYXMgY29uc3Rcblx0XHRjb25zdCBwYXNzd29yZEZpZWxkQXR0cnMgPSB7XG5cdFx0XHRsYWJlbDogXCJwYXNzd29yZF9sYWJlbFwiLFxuXHRcdFx0dmFsdWU6IFwiKioqXCIsXG5cdFx0XHRpbmplY3Rpb25zUmlnaHQ6ICgpID0+IFttKEljb25CdXR0b24sIGNoYW5nZVBhc3N3b3JkQnV0dG9uQXR0cnMpXSxcblx0XHRcdGlzUmVhZE9ubHk6IHRydWUsXG5cdFx0fSBhcyBjb25zdFxuXHRcdHJldHVybiBtKFwiI3VzZXItdmlld2VyLmZpbGwtYWJzb2x1dGUuc2Nyb2xsLnBsci1sLnBiLWZsb2F0aW5nXCIsIFtcblx0XHRcdG0oXCIuaDQubXQtbFwiLCBsYW5nLmdldChcInVzZXJTZXR0aW5nc19sYWJlbFwiKSksXG5cdFx0XHRtKFwiXCIsIFtcblx0XHRcdFx0bShUZXh0RmllbGQsIHtcblx0XHRcdFx0XHRsYWJlbDogXCJtYWlsQWRkcmVzc19sYWJlbFwiLFxuXHRcdFx0XHRcdHZhbHVlOiB0aGlzLnVzZXJHcm91cEluZm8ubWFpbEFkZHJlc3MgPz8gXCJcIixcblx0XHRcdFx0XHRpc1JlYWRPbmx5OiB0cnVlLFxuXHRcdFx0XHR9KSxcblx0XHRcdFx0bShUZXh0RmllbGQsIHtcblx0XHRcdFx0XHRsYWJlbDogXCJjcmVhdGVkX2xhYmVsXCIsXG5cdFx0XHRcdFx0dmFsdWU6IGZvcm1hdERhdGVXaXRoTW9udGgodGhpcy51c2VyR3JvdXBJbmZvLmNyZWF0ZWQpLFxuXHRcdFx0XHRcdGlzUmVhZE9ubHk6IHRydWUsXG5cdFx0XHRcdH0pLFxuXHRcdFx0XHRtKFRleHRGaWVsZCwge1xuXHRcdFx0XHRcdGxhYmVsOiBcInN0b3JhZ2VDYXBhY2l0eVVzZWRfbGFiZWxcIixcblx0XHRcdFx0XHR2YWx1ZTogdGhpcy51c2VkU3RvcmFnZSA/IGZvcm1hdFN0b3JhZ2VTaXplKHRoaXMudXNlZFN0b3JhZ2UpIDogbGFuZy5nZXQoXCJsb2FkaW5nX21zZ1wiKSxcblx0XHRcdFx0XHRpc1JlYWRPbmx5OiB0cnVlLFxuXHRcdFx0XHR9IGFzIGNvbnN0KSxcblx0XHRcdF0pLFxuXHRcdFx0bShcIlwiLCBbXG5cdFx0XHRcdHRoaXMucmVuZGVyTmFtZSgpLFxuXHRcdFx0XHRtKFRleHRGaWVsZCwgcGFzc3dvcmRGaWVsZEF0dHJzKSxcblx0XHRcdFx0bG9jYXRvci5sb2dpbnMuZ2V0VXNlckNvbnRyb2xsZXIoKS5pc0dsb2JhbEFkbWluKCkgPyB0aGlzLnJlbmRlckFkbWluU3RhdHVzU2VsZWN0b3IoKSA6IG51bGwsXG5cdFx0XHRcdHRoaXMucmVuZGVyVXNlclN0YXR1c1NlbGVjdG9yKCksXG5cdFx0XHRdKSxcblx0XHRcdG0odGhpcy5zZWNvbmRGYWN0b3JzRm9ybSksXG5cdFx0XHR0aGlzLmdyb3Vwc1RhYmxlQXR0cnMgPyBtKFwiLmg0Lm10LWwubWItc1wiLCBsYW5nLmdldChcImdyb3Vwc19sYWJlbFwiKSkgOiBudWxsLFxuXHRcdFx0dGhpcy5ncm91cHNUYWJsZUF0dHJzID8gbShUYWJsZSwgdGhpcy5ncm91cHNUYWJsZUF0dHJzKSA6IG51bGwsXG5cdFx0XHR0aGlzLm1haWxBZGRyZXNzVGFibGVNb2RlbFxuXHRcdFx0XHQ/IG0oTWFpbEFkZHJlc3NUYWJsZSwge1xuXHRcdFx0XHRcdFx0bW9kZWw6IHRoaXMubWFpbEFkZHJlc3NUYWJsZU1vZGVsLFxuXHRcdFx0XHRcdFx0ZXhwYW5kZWQ6IHRoaXMubWFpbEFkZHJlc3NUYWJsZUV4cGFuZGVkLFxuXHRcdFx0XHRcdFx0b25FeHBhbmRlZDogKG5ld0V4cGFuZGVkKSA9PiAodGhpcy5tYWlsQWRkcmVzc1RhYmxlRXhwYW5kZWQgPSBuZXdFeHBhbmRlZCksXG5cdFx0XHRcdCAgfSlcblx0XHRcdFx0OiBwcm9ncmVzc0ljb24oKSxcblx0XHRdKVxuXHR9XG5cblx0cHJpdmF0ZSByZW5kZXJOYW1lKCk6IENoaWxkcmVuIHtcblx0XHRjb25zdCBuYW1lID0gdGhpcy51c2VyR3JvdXBJbmZvLm5hbWVcblx0XHRyZXR1cm4gbShUZXh0RmllbGQsIHtcblx0XHRcdGxhYmVsOiBcIm5hbWVfbGFiZWxcIixcblx0XHRcdHZhbHVlOiBuYW1lLFxuXHRcdFx0aXNSZWFkT25seTogdHJ1ZSxcblx0XHRcdGluamVjdGlvbnNSaWdodDogKCkgPT5cblx0XHRcdFx0bShJY29uQnV0dG9uLCB7XG5cdFx0XHRcdFx0dGl0bGU6IFwiZWRpdF9hY3Rpb25cIixcblx0XHRcdFx0XHRjbGljazogKCkgPT4gdGhpcy5vbkNoYW5nZU5hbWUobmFtZSksXG5cdFx0XHRcdFx0aWNvbjogSWNvbnMuRWRpdCxcblx0XHRcdFx0XHRzaXplOiBCdXR0b25TaXplLkNvbXBhY3QsXG5cdFx0XHRcdH0pLFxuXHRcdH0pXG5cdH1cblxuXHRwcml2YXRlIG9uQ2hhbmdlTmFtZShuYW1lOiBzdHJpbmcpIHtcblx0XHREaWFsb2cuc2hvd1Byb2Nlc3NUZXh0SW5wdXREaWFsb2coXG5cdFx0XHR7XG5cdFx0XHRcdHRpdGxlOiBcImVkaXRfYWN0aW9uXCIsXG5cdFx0XHRcdGxhYmVsOiBcIm5hbWVfbGFiZWxcIixcblx0XHRcdFx0ZGVmYXVsdFZhbHVlOiBuYW1lLFxuXHRcdFx0fSxcblx0XHRcdChuZXdOYW1lKSA9PiB7XG5cdFx0XHRcdHRoaXMudXNlckdyb3VwSW5mby5uYW1lID0gbmV3TmFtZVxuXHRcdFx0XHRyZXR1cm4gbG9jYXRvci5lbnRpdHlDbGllbnQudXBkYXRlKHRoaXMudXNlckdyb3VwSW5mbylcblx0XHRcdH0sXG5cdFx0KVxuXHR9XG5cblx0cHJpdmF0ZSByZW5kZXJBZG1pblN0YXR1c1NlbGVjdG9yKCk6IENoaWxkcmVuIHtcblx0XHRyZXR1cm4gbShEcm9wRG93blNlbGVjdG9yLCB7XG5cdFx0XHRsYWJlbDogXCJnbG9iYWxBZG1pbl9sYWJlbFwiLFxuXHRcdFx0aXRlbXM6IFtcblx0XHRcdFx0e1xuXHRcdFx0XHRcdG5hbWU6IGxhbmcuZ2V0KFwibm9fbGFiZWxcIiksXG5cdFx0XHRcdFx0dmFsdWU6IGZhbHNlLFxuXHRcdFx0XHR9LFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0bmFtZTogbGFuZy5nZXQoXCJ5ZXNfbGFiZWxcIiksXG5cdFx0XHRcdFx0dmFsdWU6IHRydWUsXG5cdFx0XHRcdH0sXG5cdFx0XHRdLFxuXHRcdFx0c2VsZWN0ZWRWYWx1ZTogdGhpcy5pc0FkbWluLFxuXHRcdFx0c2VsZWN0aW9uQ2hhbmdlZEhhbmRsZXI6ICh2YWx1ZTogYm9vbGVhbikgPT4ge1xuXHRcdFx0XHRpZiAodGhpcy51c2VyR3JvdXBJbmZvLmRlbGV0ZWQpIHtcblx0XHRcdFx0XHREaWFsb2cubWVzc2FnZShcInVzZXJBY2NvdW50RGVhY3RpdmF0ZWRfbXNnXCIpXG5cdFx0XHRcdH0gZWxzZSBpZiAodGhpcy5pc0l0TWUoKSkge1xuXHRcdFx0XHRcdERpYWxvZy5tZXNzYWdlKFwicmVtb3ZlT3duQWRtaW5GbGFnSW5mb19tc2dcIilcblx0XHRcdFx0fSBlbHNlIGlmICh0aGlzLnVzZXJHcm91cEluZm8ubG9jYWxBZG1pbiAhPSBudWxsKSB7XG5cdFx0XHRcdFx0RGlhbG9nLm1lc3NhZ2UoXCJhc3NpZ25BZG1pblJpZ2h0c1RvTG9jYWxseUFkbWluaXN0cmF0ZWRVc2VyRXJyb3JfbXNnXCIpXG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0c2hvd1Byb2dyZXNzRGlhbG9nKFxuXHRcdFx0XHRcdFx0XCJwbGVhc2VXYWl0X21zZ1wiLFxuXHRcdFx0XHRcdFx0dGhpcy51c2VyXG5cdFx0XHRcdFx0XHRcdC5nZXRBc3luYygpXG5cdFx0XHRcdFx0XHRcdC50aGVuKCh1c2VyKSA9PiBsb2NhdG9yLnVzZXJNYW5hZ2VtZW50RmFjYWRlLmNoYW5nZUFkbWluRmxhZyh1c2VyLCB2YWx1ZSkpXG5cdFx0XHRcdFx0XHRcdC5jYXRjaChcblx0XHRcdFx0XHRcdFx0XHRvZkNsYXNzKFByZWNvbmRpdGlvbkZhaWxlZEVycm9yLCAoZSkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKGUuZGF0YSAmJiBlLmRhdGEgPT09IFwidXNlcmdyb3VwLnBlbmRpbmcta2V5LXJvdGF0aW9uXCIpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0RGlhbG9nLm1lc3NhZ2UoXCJtYWtlQWRtaW5QZW5kaW5nVXNlckdyb3VwS2V5Um90YXRpb25FcnJvcl9tc2dcIilcblx0XHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRocm93IGVcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR9KSxcblx0XHRcdFx0XHRcdFx0KSxcblx0XHRcdFx0XHQpXG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0fSlcblx0fVxuXG5cdHByaXZhdGUgcmVuZGVyVXNlclN0YXR1c1NlbGVjdG9yKCk6IENoaWxkcmVuIHtcblx0XHRyZXR1cm4gbShEcm9wRG93blNlbGVjdG9yLCB7XG5cdFx0XHRsYWJlbDogXCJzdGF0ZV9sYWJlbFwiLFxuXHRcdFx0aXRlbXM6IFtcblx0XHRcdFx0e1xuXHRcdFx0XHRcdG5hbWU6IGxhbmcuZ2V0KFwiYWN0aXZhdGVkX2xhYmVsXCIpLFxuXHRcdFx0XHRcdHZhbHVlOiB0cnVlLFxuXHRcdFx0XHR9LFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0bmFtZTogbGFuZy5nZXQoXCJkZWFjdGl2YXRlZF9sYWJlbFwiKSxcblx0XHRcdFx0XHR2YWx1ZTogZmFsc2UsXG5cdFx0XHRcdH0sXG5cdFx0XHRdLFxuXHRcdFx0c2VsZWN0ZWRWYWx1ZTogdGhpcy51c2VyR3JvdXBJbmZvLmRlbGV0ZWQgPT0gbnVsbCxcblx0XHRcdHNlbGVjdGlvbkNoYW5nZWRIYW5kbGVyOiAoYWN0aXZhdGU6IGJvb2xlYW4pID0+IHtcblx0XHRcdFx0aWYgKHRoaXMuaXNBZG1pbikge1xuXHRcdFx0XHRcdERpYWxvZy5tZXNzYWdlKFwiZGVhY3RpdmF0ZU93bkFjY291bnRJbmZvX21zZ1wiKVxuXHRcdFx0XHR9IGVsc2UgaWYgKGFjdGl2YXRlKSB7XG5cdFx0XHRcdFx0dGhpcy5yZXN0b3JlVXNlcigpXG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0dGhpcy5kZWxldGVVc2VyKClcblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHR9KVxuXHR9XG5cblx0cHJpdmF0ZSBpc0l0TWUoKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIGlzU2FtZUlkKGxvY2F0b3IubG9naW5zLmdldFVzZXJDb250cm9sbGVyKCkudXNlckdyb3VwSW5mby5faWQsIHRoaXMudXNlckdyb3VwSW5mby5faWQpXG5cdH1cblxuXHRwcml2YXRlIGNoYW5nZVBhc3N3b3JkKCk6IHZvaWQge1xuXHRcdGlmICh0aGlzLmlzSXRNZSgpKSB7XG5cdFx0XHRzaG93Q2hhbmdlT3duUGFzc3dvcmREaWFsb2coKVxuXHRcdH0gZWxzZSBpZiAodGhpcy5pc0FkbWluKSB7XG5cdFx0XHREaWFsb2cubWVzc2FnZShcImNoYW5nZUFkbWluUGFzc3dvcmRfbXNnXCIpXG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMudXNlci5nZXRBc3luYygpLnRoZW4oKHVzZXIpID0+IHtcblx0XHRcdFx0c2hvd0NoYW5nZVVzZXJQYXNzd29yZEFzQWRtaW5EaWFsb2codXNlcilcblx0XHRcdH0pXG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyB1cGRhdGVHcm91cHMoKSB7XG5cdFx0aWYgKHRoaXMuZ3JvdXBzVGFibGVBdHRycykge1xuXHRcdFx0Y29uc3QgdXNlciA9IGF3YWl0IHRoaXMudXNlci5nZXRBc3luYygpXG5cdFx0XHRjb25zdCBjdXN0b21lciA9IGF3YWl0IHRoaXMuY3VzdG9tZXIuZ2V0QXN5bmMoKVxuXHRcdFx0dGhpcy5ncm91cHNUYWJsZUF0dHJzLmxpbmVzID0gYXdhaXQgcHJvbWlzZU1hcChcblx0XHRcdFx0dGhpcy5nZXRUZWFtTWVtYmVyc2hpcHModXNlciwgY3VzdG9tZXIpLFxuXHRcdFx0XHRhc3luYyAobSkgPT4ge1xuXHRcdFx0XHRcdGNvbnN0IGdyb3VwSW5mbyA9IGF3YWl0IGxvY2F0b3IuZW50aXR5Q2xpZW50LmxvYWQoR3JvdXBJbmZvVHlwZVJlZiwgbS5ncm91cEluZm8pXG5cdFx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRcdGNlbGxzOiBbZ2V0R3JvdXBJbmZvRGlzcGxheU5hbWUoZ3JvdXBJbmZvKSwgZ2V0R3JvdXBUeXBlRGlzcGxheU5hbWUobmV2ZXJOdWxsKG0uZ3JvdXBUeXBlKSldLFxuXHRcdFx0XHRcdFx0YWN0aW9uQnV0dG9uQXR0cnM6IHtcblx0XHRcdFx0XHRcdFx0dGl0bGU6IFwicmVtb3ZlX2FjdGlvblwiLFxuXHRcdFx0XHRcdFx0XHRjbGljazogKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdHNob3dQcm9ncmVzc0RpYWxvZyhcInBsZWFzZVdhaXRfbXNnXCIsIGxvY2F0b3IuZ3JvdXBNYW5hZ2VtZW50RmFjYWRlLnJlbW92ZVVzZXJGcm9tR3JvdXAodXNlci5faWQsIGdyb3VwSW5mby5ncm91cCkpLmNhdGNoKFxuXHRcdFx0XHRcdFx0XHRcdFx0b2ZDbGFzcyhOb3RBdXRob3JpemVkRXJyb3IsIChlKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdERpYWxvZy5tZXNzYWdlKFwicmVtb3ZlVXNlckZyb21Hcm91cE5vdEFkbWluaXN0cmF0ZWRVc2VyRXJyb3JfbXNnXCIpXG5cdFx0XHRcdFx0XHRcdFx0XHR9KSxcblx0XHRcdFx0XHRcdFx0XHQpXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdGljb246IEljb25zLkNhbmNlbCxcblx0XHRcdFx0XHRcdH0gYXMgY29uc3QsXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uY3VycmVuY3k6IDUsXG5cdFx0XHRcdH0sXG5cdFx0XHQpXG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyBzaG93QWRkVXNlclRvR3JvdXBEaWFsb2coKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0Y29uc3QgdXNlciA9IGF3YWl0IHRoaXMudXNlci5nZXRBc3luYygpXG5cdFx0aWYgKHRoaXMudXNlckdyb3VwSW5mby5kZWxldGVkKSB7XG5cdFx0XHREaWFsb2cubWVzc2FnZShcInVzZXJBY2NvdW50RGVhY3RpdmF0ZWRfbXNnXCIpXG5cdFx0fSBlbHNlIHtcblx0XHRcdGNvbnN0IGdsb2JhbEFkbWluID0gbG9jYXRvci5sb2dpbnMuaXNHbG9iYWxBZG1pblVzZXJMb2dnZWRJbigpXG5cblx0XHRcdGNvbnN0IGF2YWlsYWJsZUdyb3VwSW5mb3MgPSB0aGlzLnRlYW1Hcm91cEluZm9zXG5cdFx0XHRcdC5nZXRMb2FkZWQoKVxuXHRcdFx0XHQuZmlsdGVyKFxuXHRcdFx0XHRcdChnKSA9PlxuXHRcdFx0XHRcdFx0Ly8gZ2xvYmFsIGFkbWlucyBtYXkgYWRkIGFsbCBncm91cHNcblx0XHRcdFx0XHRcdGdsb2JhbEFkbWluICYmXG5cdFx0XHRcdFx0XHQvLyBjYW4ndCBhZGQgZGVsZXRlZCBncm91cHNcblx0XHRcdFx0XHRcdCFnLmRlbGV0ZWQgJiZcblx0XHRcdFx0XHRcdC8vIGNhbid0IGFkZCBpZiB0aGUgdXNlciBpcyBhbHJlYWR5IGluIHRoZSBncm91cFxuXHRcdFx0XHRcdFx0IXVzZXIubWVtYmVyc2hpcHMuc29tZSgobSkgPT4gaXNTYW1lSWQobS5ncm91cEluZm8sIGcuX2lkKSksXG5cdFx0XHRcdClcblx0XHRcdFx0LnNvcnQoY29tcGFyZUdyb3VwSW5mb3MpXG5cblx0XHRcdGlmIChhdmFpbGFibGVHcm91cEluZm9zLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0Y29uc3QgZHJvcGRvd25JdGVtcyA9IGF2YWlsYWJsZUdyb3VwSW5mb3MubWFwKChnKSA9PiAoe1xuXHRcdFx0XHRcdG5hbWU6IGdldEdyb3VwSW5mb0Rpc3BsYXlOYW1lKGcpLFxuXHRcdFx0XHRcdHZhbHVlOiBnLFxuXHRcdFx0XHR9KSlcblxuXHRcdFx0XHRsZXQgc2VsZWN0ZWRHcm91cEluZm8gPSBnZXRGaXJzdE9yVGhyb3coYXZhaWxhYmxlR3JvdXBJbmZvcylcblx0XHRcdFx0RGlhbG9nLnNob3dBY3Rpb25EaWFsb2coe1xuXHRcdFx0XHRcdHRpdGxlOiBcImFkZFVzZXJUb0dyb3VwX2xhYmVsXCIsXG5cdFx0XHRcdFx0Y2hpbGQ6IHtcblx0XHRcdFx0XHRcdHZpZXc6ICgpID0+XG5cdFx0XHRcdFx0XHRcdG0oRHJvcERvd25TZWxlY3Rvciwge1xuXHRcdFx0XHRcdFx0XHRcdGxhYmVsOiBcImdyb3VwX2xhYmVsXCIsXG5cdFx0XHRcdFx0XHRcdFx0aXRlbXM6IGRyb3Bkb3duSXRlbXMsXG5cdFx0XHRcdFx0XHRcdFx0c2VsZWN0ZWRWYWx1ZTogc2VsZWN0ZWRHcm91cEluZm8sXG5cdFx0XHRcdFx0XHRcdFx0c2VsZWN0aW9uQ2hhbmdlZEhhbmRsZXI6IChzZWxlY3Rpb246IEdyb3VwSW5mbykgPT4gKHNlbGVjdGVkR3JvdXBJbmZvID0gc2VsZWN0aW9uKSxcblx0XHRcdFx0XHRcdFx0XHRkcm9wZG93bldpZHRoOiAyNTAsXG5cdFx0XHRcdFx0XHRcdH0pLFxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0YWxsb3dPa1dpdGhSZXR1cm46IHRydWUsXG5cdFx0XHRcdFx0b2tBY3Rpb246IChkaWFsb2c6IERpYWxvZykgPT4ge1xuXHRcdFx0XHRcdFx0c2hvd1Byb2dyZXNzRGlhbG9nKFwicGxlYXNlV2FpdF9tc2dcIiwgbG9jYXRvci5ncm91cE1hbmFnZW1lbnRGYWNhZGUuYWRkVXNlclRvR3JvdXAodXNlciwgc2VsZWN0ZWRHcm91cEluZm8uZ3JvdXApKVxuXHRcdFx0XHRcdFx0ZGlhbG9nLmNsb3NlKClcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHR9KVxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgdXBkYXRlVXNlZFN0b3JhZ2VBbmRBZG1pbkZsYWcoKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0Y29uc3QgdXNlciA9IGF3YWl0IHRoaXMudXNlci5nZXRBc3luYygpXG5cdFx0dGhpcy5pc0FkbWluID0gdGhpcy5pc0FkbWluVXNlcih1c2VyKVxuXHRcdHRyeSB7XG5cdFx0XHR0aGlzLnVzZWRTdG9yYWdlID0gYXdhaXQgbG9jYXRvci51c2VyTWFuYWdlbWVudEZhY2FkZS5yZWFkVXNlZFVzZXJTdG9yYWdlKHVzZXIpXG5cdFx0XHRtLnJlZHJhdygpXG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0Ly8gbWF5IGhhcHBlbiBpZiB0aGUgdXNlciBnZXRzIHRoZSBhZG1pbiBmbGFnIHJlbW92ZWQsIHNvIGlnbm9yZSBpdFxuXHRcdFx0aWYgKCEoZSBpbnN0YW5jZW9mIEJhZFJlcXVlc3RFcnJvcikpIHtcblx0XHRcdFx0dGhyb3cgZVxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgZ2V0VGVhbU1lbWJlcnNoaXBzKHVzZXI6IFVzZXIsIGN1c3RvbWVyOiBDdXN0b21lcik6IEdyb3VwTWVtYmVyc2hpcFtdIHtcblx0XHRyZXR1cm4gdXNlci5tZW1iZXJzaGlwcy5maWx0ZXIoKG0pID0+IG0uZ3JvdXBJbmZvWzBdID09PSBjdXN0b21lci50ZWFtR3JvdXBzKVxuXHR9XG5cblx0cHJpdmF0ZSBpc0FkbWluVXNlcih1c2VyOiBVc2VyKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIHVzZXIubWVtYmVyc2hpcHMuc29tZSgobSkgPT4gbS5ncm91cFR5cGUgPT09IEdyb3VwVHlwZS5BZG1pbilcblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgZGVsZXRlVXNlcigpIHtcblx0XHRjb25zdCBwbGFuVHlwZSA9IGF3YWl0IGxvY2F0b3IubG9naW5zLmdldFVzZXJDb250cm9sbGVyKCkuZ2V0UGxhblR5cGUoKVxuXHRcdGNvbnN0IG5ld1BsYW4gPSBhd2FpdCBsb2NhdG9yLmxvZ2lucy5nZXRVc2VyQ29udHJvbGxlcigpLmlzTmV3UGFpZFBsYW4oKVxuXG5cdFx0Y29uc3QgY29uZmlybWVkID0gYXdhaXQgc2hvd0J1eURpYWxvZyh7XG5cdFx0XHRmZWF0dXJlVHlwZTogbmV3UGxhbiA/IHRvRmVhdHVyZVR5cGUocGxhblR5cGUpIDogQm9va2luZ0l0ZW1GZWF0dXJlVHlwZS5MZWdhY3lVc2Vycyxcblx0XHRcdGJvb2tpbmdUZXh0OiBcImNhbmNlbFVzZXJBY2NvdW50c19sYWJlbFwiLFxuXHRcdFx0Y291bnQ6IC0xLFxuXHRcdFx0ZnJlZUFtb3VudDogMCxcblx0XHRcdHJlYWN0aXZhdGU6IGZhbHNlLFxuXHRcdH0pXG5cdFx0aWYgKGNvbmZpcm1lZCkge1xuXHRcdFx0cmV0dXJuIGxvY2F0b3IudXNlck1hbmFnZW1lbnRGYWNhZGVcblx0XHRcdFx0LmRlbGV0ZVVzZXIoYXdhaXQgdGhpcy51c2VyLmdldEFzeW5jKCksIGZhbHNlKVxuXHRcdFx0XHQuY2F0Y2gob2ZDbGFzcyhQcmVjb25kaXRpb25GYWlsZWRFcnJvciwgKCkgPT4gRGlhbG9nLm1lc3NhZ2UoXCJzdGlsbFJlZmVyZW5jZWRGcm9tQ29udGFjdEZvcm1fbXNnXCIpKSlcblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIHJlc3RvcmVVc2VyKCkge1xuXHRcdGNvbnN0IHBsYW5UeXBlID0gYXdhaXQgbG9jYXRvci5sb2dpbnMuZ2V0VXNlckNvbnRyb2xsZXIoKS5nZXRQbGFuVHlwZSgpXG5cdFx0Y29uc3QgbmV3UGxhbiA9IGF3YWl0IGxvY2F0b3IubG9naW5zLmdldFVzZXJDb250cm9sbGVyKCkuaXNOZXdQYWlkUGxhbigpXG5cdFx0Y29uc3QgY29uZmlybWVkID0gYXdhaXQgc2hvd0J1eURpYWxvZyh7XG5cdFx0XHRmZWF0dXJlVHlwZTogbmV3UGxhbiA/IHRvRmVhdHVyZVR5cGUocGxhblR5cGUpIDogQm9va2luZ0l0ZW1GZWF0dXJlVHlwZS5MZWdhY3lVc2Vycyxcblx0XHRcdGJvb2tpbmdUZXh0OiBcImJvb2tpbmdJdGVtVXNlcnNJbmNsdWRpbmdfbGFiZWxcIixcblx0XHRcdGNvdW50OiAxLFxuXHRcdFx0ZnJlZUFtb3VudDogMCxcblx0XHRcdHJlYWN0aXZhdGU6IHRydWUsXG5cdFx0fSlcblx0XHRpZiAoY29uZmlybWVkKSB7XG5cdFx0XHRhd2FpdCBsb2NhdG9yLnVzZXJNYW5hZ2VtZW50RmFjYWRlXG5cdFx0XHRcdC5kZWxldGVVc2VyKGF3YWl0IHRoaXMudXNlci5nZXRBc3luYygpLCB0cnVlKVxuXHRcdFx0XHQuY2F0Y2gob2ZDbGFzcyhQcmVjb25kaXRpb25GYWlsZWRFcnJvciwgKCkgPT4gRGlhbG9nLm1lc3NhZ2UoXCJlbWFpbEFkZHJlc3NJblVzZV9tc2dcIikpKVxuXHRcdH1cblx0fVxuXG5cdGFzeW5jIGVudGl0eUV2ZW50c1JlY2VpdmVkKHVwZGF0ZXM6IFJlYWRvbmx5QXJyYXk8RW50aXR5VXBkYXRlRGF0YT4pIHtcblx0XHRmb3IgKGNvbnN0IHVwZGF0ZSBvZiB1cGRhdGVzKSB7XG5cdFx0XHRjb25zdCB7IGluc3RhbmNlTGlzdElkLCBpbnN0YW5jZUlkLCBvcGVyYXRpb24gfSA9IHVwZGF0ZVxuXHRcdFx0aWYgKFxuXHRcdFx0XHRpc1VwZGF0ZUZvclR5cGVSZWYoR3JvdXBJbmZvVHlwZVJlZiwgdXBkYXRlKSAmJlxuXHRcdFx0XHRvcGVyYXRpb24gPT09IE9wZXJhdGlvblR5cGUuVVBEQVRFICYmXG5cdFx0XHRcdGlzU2FtZUlkKHRoaXMudXNlckdyb3VwSW5mby5faWQsIFtuZXZlck51bGwoaW5zdGFuY2VMaXN0SWQpLCBpbnN0YW5jZUlkXSlcblx0XHRcdCkge1xuXHRcdFx0XHR0aGlzLnVzZXJHcm91cEluZm8gPSBhd2FpdCBsb2NhdG9yLmVudGl0eUNsaWVudC5sb2FkKEdyb3VwSW5mb1R5cGVSZWYsIHRoaXMudXNlckdyb3VwSW5mby5faWQpXG5cdFx0XHRcdGF3YWl0IHRoaXMudXBkYXRlVXNlZFN0b3JhZ2VBbmRBZG1pbkZsYWcoKVxuXHRcdFx0XHRtLnJlZHJhdygpXG5cdFx0XHR9IGVsc2UgaWYgKFxuXHRcdFx0XHRpc1VwZGF0ZUZvclR5cGVSZWYoVXNlclR5cGVSZWYsIHVwZGF0ZSkgJiZcblx0XHRcdFx0b3BlcmF0aW9uID09PSBPcGVyYXRpb25UeXBlLlVQREFURSAmJlxuXHRcdFx0XHR0aGlzLnVzZXIuaXNMb2FkZWQoKSAmJlxuXHRcdFx0XHRpc1NhbWVJZCh0aGlzLnVzZXIuZ2V0TG9hZGVkKCkuX2lkLCBpbnN0YW5jZUlkKVxuXHRcdFx0KSB7XG5cdFx0XHRcdHRoaXMudXNlci5yZXNldCgpXG5cdFx0XHRcdGF3YWl0IHRoaXMudXBkYXRlVXNlZFN0b3JhZ2VBbmRBZG1pbkZsYWcoKVxuXHRcdFx0XHRhd2FpdCB0aGlzLnVwZGF0ZUdyb3VwcygpXG5cdFx0XHR9XG5cdFx0XHRhd2FpdCB0aGlzLnNlY29uZEZhY3RvcnNGb3JtLmVudGl0eUV2ZW50UmVjZWl2ZWQodXBkYXRlKVxuXHRcdH1cblx0XHRtLnJlZHJhdygpXG5cdH1cblxuXHRwcml2YXRlIGxvYWRVc2VyKCk6IFByb21pc2U8VXNlcj4ge1xuXHRcdHJldHVybiBsb2NhdG9yLmVudGl0eUNsaWVudC5sb2FkKEdyb3VwVHlwZVJlZiwgdGhpcy51c2VyR3JvdXBJbmZvLmdyb3VwKS50aGVuKCh1c2VyR3JvdXApID0+IHtcblx0XHRcdHJldHVybiBsb2NhdG9yLmVudGl0eUNsaWVudC5sb2FkKFVzZXJUeXBlUmVmLCBuZXZlck51bGwodXNlckdyb3VwLnVzZXIpKVxuXHRcdH0pXG5cdH1cblxuXHRwcml2YXRlIGxvYWRDdXN0b21lcigpOiBQcm9taXNlPEN1c3RvbWVyPiB7XG5cdFx0cmV0dXJuIGxvY2F0b3IubG9naW5zLmdldFVzZXJDb250cm9sbGVyKCkubG9hZEN1c3RvbWVyKClcblx0fVxuXG5cdHByaXZhdGUgbG9hZFRlYW1Hcm91cEluZm9zKCk6IFByb21pc2U8QXJyYXk8R3JvdXBJbmZvPj4ge1xuXHRcdHJldHVybiB0aGlzLmN1c3RvbWVyLmdldEFzeW5jKCkudGhlbigoY3VzdG9tZXIpID0+IGxvY2F0b3IuZW50aXR5Q2xpZW50LmxvYWRBbGwoR3JvdXBJbmZvVHlwZVJlZiwgY3VzdG9tZXIudGVhbUdyb3VwcykpXG5cdH1cbn1cblxuLyoqXG4gKiBTaG93IGVkaXRvciBmb3IgYWRkaW5nIHRoZSBjc3YgdmFsdWVzIG9mIHRoZSB1c2Vycy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNob3dVc2VySW1wb3J0RGlhbG9nKGN1c3RvbURvbWFpbnM6IHN0cmluZ1tdKSB7XG5cdGxldCBlZGl0b3IgPSBuZXcgRWRpdG9yKFwiZW50ZXJBc0NTVl9tc2dcIikuc2hvd0JvcmRlcnMoKS5zZXRNb2RlKEh0bWxFZGl0b3JNb2RlLkhUTUwpLnNldFZhbHVlKENTVl9VU0VSX0ZPUk1BVCkuc2V0TWluSGVpZ2h0KDIwMClcblx0bGV0IGZvcm0gPSB7XG5cdFx0dmlldzogKCkgPT4ge1xuXHRcdFx0cmV0dXJuIFttKGVkaXRvcildXG5cdFx0fSxcblx0fVxuXHREaWFsb2cuc2hvd0FjdGlvbkRpYWxvZyh7XG5cdFx0dGl0bGU6IFwiaW1wb3J0VXNlcnNfYWN0aW9uXCIsXG5cdFx0Y2hpbGQ6IGZvcm0sXG5cdFx0b2tBY3Rpb246IChjc3ZEaWFsb2cpID0+IHtcblx0XHRcdGxldCBjbG9zZUNzdkRpYWxvZyA9IGNoZWNrQW5kSW1wb3J0VXNlckRhdGEoZWRpdG9yLmdldFZhbHVlKCksIGN1c3RvbURvbWFpbnMpXG5cdFx0XHRpZiAoY2xvc2VDc3ZEaWFsb2cpIHtcblx0XHRcdFx0Y3N2RGlhbG9nLmNsb3NlKClcblx0XHRcdH1cblx0XHR9LFxuXHR9KVxufVxuIiwiaW1wb3J0IG0gZnJvbSBcIm1pdGhyaWxcIlxuaW1wb3J0IHsgbGFuZywgVHJhbnNsYXRpb25LZXksIE1heWJlVHJhbnNsYXRpb24gfSBmcm9tIFwiLi4vbWlzYy9MYW5ndWFnZVZpZXdNb2RlbC5qc1wiXG5pbXBvcnQgeyBCb29raW5nSXRlbUZlYXR1cmVUeXBlLCBOZXdQYWlkUGxhbnMgfSBmcm9tIFwiLi4vYXBpL2NvbW1vbi9UdXRhbm90YUNvbnN0YW50cy5qc1wiXG5pbXBvcnQgeyBEaWFsb2cgfSBmcm9tIFwiLi4vZ3VpL2Jhc2UvRGlhbG9nLmpzXCJcbmltcG9ydCB7IFBhc3N3b3JkRm9ybSwgUGFzc3dvcmRNb2RlbCB9IGZyb20gXCIuL1Bhc3N3b3JkRm9ybS5qc1wiXG5pbXBvcnQgeyBTZWxlY3RNYWlsQWRkcmVzc0Zvcm0gfSBmcm9tIFwiLi9TZWxlY3RNYWlsQWRkcmVzc0Zvcm0uanNcIlxuaW1wb3J0IHsgYXNzZXJ0Tm90TnVsbCwgZ2V0Rmlyc3RPclRocm93LCBvZkNsYXNzIH0gZnJvbSBcIkB0dXRhby90dXRhbm90YS11dGlsc1wiXG5pbXBvcnQgeyBzaG93UHJvZ3Jlc3NEaWFsb2cgfSBmcm9tIFwiLi4vZ3VpL2RpYWxvZ3MvUHJvZ3Jlc3NEaWFsb2cuanNcIlxuaW1wb3J0IHsgUHJlY29uZGl0aW9uRmFpbGVkRXJyb3IgfSBmcm9tIFwiLi4vYXBpL2NvbW1vbi9lcnJvci9SZXN0RXJyb3IuanNcIlxuaW1wb3J0IHsgc2hvd0J1eURpYWxvZyB9IGZyb20gXCIuLi9zdWJzY3JpcHRpb24vQnV5RGlhbG9nLmpzXCJcbmltcG9ydCB7IFRleHRGaWVsZCB9IGZyb20gXCIuLi9ndWkvYmFzZS9UZXh0RmllbGQuanNcIlxuaW1wb3J0IHsgbG9jYXRvciB9IGZyb20gXCIuLi9hcGkvbWFpbi9Db21tb25Mb2NhdG9yLmpzXCJcbmltcG9ydCB7IGFzc2VydE1haW5Pck5vZGUgfSBmcm9tIFwiLi4vYXBpL2NvbW1vbi9FbnYuanNcIlxuaW1wb3J0IHsgZ2V0QXZhaWxhYmxlRG9tYWlucyB9IGZyb20gXCIuL21haWxhZGRyZXNzL01haWxBZGRyZXNzZXNVdGlscy5qc1wiXG5pbXBvcnQgeyB0b0ZlYXR1cmVUeXBlIH0gZnJvbSBcIi4uL3N1YnNjcmlwdGlvbi9TdWJzY3JpcHRpb25VdGlscy5qc1wiXG5pbXBvcnQgeyBzaG93VXBncmFkZVdpemFyZCB9IGZyb20gXCIuLi9zdWJzY3JpcHRpb24vVXBncmFkZVN1YnNjcmlwdGlvbldpemFyZC5qc1wiXG5cbmFzc2VydE1haW5Pck5vZGUoKVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2hvdygpOiBQcm9taXNlPHZvaWQ+IHtcblx0Y29uc3QgYXZhaWxhYmxlRG9tYWlucyA9IGF3YWl0IGdldEF2YWlsYWJsZURvbWFpbnMobG9jYXRvci5sb2dpbnMpXG5cdGNvbnN0IG9uTmV3UGFpZFBsYW4gPSBhd2FpdCBsb2NhdG9yLmxvZ2lucy5nZXRVc2VyQ29udHJvbGxlcigpLmlzTmV3UGFpZFBsYW4oKVxuXHRsZXQgZW1haWxBZGRyZXNzOiBzdHJpbmcgfCBudWxsID0gbnVsbFxuXHRsZXQgZXJyb3JNc2c6IE1heWJlVHJhbnNsYXRpb24gfCBudWxsID0gXCJtYWlsQWRkcmVzc05ldXRyYWxfbXNnXCJcblx0bGV0IGlzVmVyaWZpY2F0aW9uQnVzeSA9IGZhbHNlXG5cdGxldCB1c2VyTmFtZSA9IFwiXCJcblx0Y29uc3QgcGFzc3dvcmRNb2RlbCA9IG5ldyBQYXNzd29yZE1vZGVsKGxvY2F0b3IudXNhZ2VUZXN0Q29udHJvbGxlciwgbG9jYXRvci5sb2dpbnMsIHtcblx0XHRjaGVja09sZFBhc3N3b3JkOiBmYWxzZSxcblx0XHRlbmZvcmNlU3RyZW5ndGg6IGZhbHNlLFxuXHRcdGhpZGVDb25maXJtYXRpb246IHRydWUsXG5cdH0pXG5cdGxldCBzZWxlY3RlZERvbWFpbiA9IGdldEZpcnN0T3JUaHJvdyhhdmFpbGFibGVEb21haW5zKVxuXHRsZXQgZm9ybSA9IHtcblx0XHR2aWV3OiAoKSA9PiB7XG5cdFx0XHRyZXR1cm4gW1xuXHRcdFx0XHRtKFRleHRGaWVsZCwge1xuXHRcdFx0XHRcdGxhYmVsOiBcIm5hbWVfbGFiZWxcIixcblx0XHRcdFx0XHRoZWxwTGFiZWw6ICgpID0+IGxhbmcuZ2V0KFwibG9naW5OYW1lSW5mb0FkbWluX21zZ1wiKSxcblx0XHRcdFx0XHR2YWx1ZTogdXNlck5hbWUsXG5cdFx0XHRcdFx0b25pbnB1dDogKHZhbHVlKSA9PiAodXNlck5hbWUgPSB2YWx1ZSksXG5cdFx0XHRcdH0pLFxuXHRcdFx0XHRtKFNlbGVjdE1haWxBZGRyZXNzRm9ybSwge1xuXHRcdFx0XHRcdHNlbGVjdGVkRG9tYWluLFxuXHRcdFx0XHRcdGF2YWlsYWJsZURvbWFpbnMsXG5cdFx0XHRcdFx0b25Eb21haW5DaGFuZ2VkOiAoZG9tYWluKSA9PiB7XG5cdFx0XHRcdFx0XHRpZiAoZG9tYWluLmlzUGFpZCAmJiAhb25OZXdQYWlkUGxhbikge1xuXHRcdFx0XHRcdFx0XHRzaG93VXBncmFkZVdpemFyZChcblx0XHRcdFx0XHRcdFx0XHRsb2NhdG9yLmxvZ2lucyxcblx0XHRcdFx0XHRcdFx0XHROZXdQYWlkUGxhbnMsXG5cdFx0XHRcdFx0XHRcdFx0bGFuZy5tYWtlVHJhbnNsYXRpb24oXCJjaGFuZ2VfdG9fbmV3X3BsYW5cIiwgYCR7bGFuZy5nZXQoXCJwYWlkRW1haWxEb21haW5MZWdhY3lfbXNnXCIpfVxcbiR7bGFuZy5nZXQoXCJjaGFuZ2VQYWlkUGxhbl9tc2dcIil9YCksXG5cdFx0XHRcdFx0XHRcdClcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdHNlbGVjdGVkRG9tYWluID0gZG9tYWluXG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRvblZhbGlkYXRpb25SZXN1bHQ6IChlbWFpbCwgdmVyaWZpY2F0aW9uUmVzdWx0KSA9PiB7XG5cdFx0XHRcdFx0XHRpZiAodmVyaWZpY2F0aW9uUmVzdWx0LmlzVmFsaWQpIHtcblx0XHRcdFx0XHRcdFx0ZW1haWxBZGRyZXNzID0gZW1haWxcblx0XHRcdFx0XHRcdFx0ZXJyb3JNc2cgPSBudWxsXG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRlcnJvck1zZyA9IHZlcmlmaWNhdGlvblJlc3VsdC5lcnJvcklkXG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRvbkJ1c3lTdGF0ZUNoYW5nZWQ6IChpc0J1c3kpID0+IHtcblx0XHRcdFx0XHRcdGlzVmVyaWZpY2F0aW9uQnVzeSA9IGlzQnVzeVxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdH0pLFxuXHRcdFx0XHRtKFBhc3N3b3JkRm9ybSwgeyBtb2RlbDogcGFzc3dvcmRNb2RlbCB9KSxcblx0XHRcdF1cblx0XHR9LFxuXHR9XG5cblx0bGV0IGFkZFVzZXJPa0FjdGlvbiA9IGFzeW5jIChkaWFsb2c6IERpYWxvZykgPT4ge1xuXHRcdGlmIChpc1ZlcmlmaWNhdGlvbkJ1c3kpIHJldHVyblxuXHRcdGNvbnN0IHBhc3N3b3JkRm9ybUVycm9yID0gcGFzc3dvcmRNb2RlbC5nZXRFcnJvck1lc3NhZ2VJZCgpXG5cblx0XHRpZiAoZXJyb3JNc2cpIHtcblx0XHRcdERpYWxvZy5tZXNzYWdlKGVycm9yTXNnIGFzIFRyYW5zbGF0aW9uS2V5KVxuXHRcdFx0cmV0dXJuXG5cdFx0fSBlbHNlIGlmIChwYXNzd29yZEZvcm1FcnJvcikge1xuXHRcdFx0RGlhbG9nLm1lc3NhZ2UocGFzc3dvcmRGb3JtRXJyb3IpXG5cdFx0XHRyZXR1cm5cblx0XHR9XG5cblx0XHRjb25zdCB1c2VyQ29udHJvbGxlciA9IGxvY2F0b3IubG9naW5zLmdldFVzZXJDb250cm9sbGVyKClcblx0XHRjb25zdCBwbGFuVHlwZSA9IGF3YWl0IHVzZXJDb250cm9sbGVyLmdldFBsYW5UeXBlKClcblx0XHRjb25zdCBuZXdQbGFuID0gYXdhaXQgdXNlckNvbnRyb2xsZXIuaXNOZXdQYWlkUGxhbigpXG5cblx0XHRzaG93UHJvZ3Jlc3NEaWFsb2coXG5cdFx0XHRcInBsZWFzZVdhaXRfbXNnXCIsXG5cdFx0XHRzaG93QnV5RGlhbG9nKHtcblx0XHRcdFx0ZmVhdHVyZVR5cGU6IG5ld1BsYW4gPyB0b0ZlYXR1cmVUeXBlKHBsYW5UeXBlKSA6IEJvb2tpbmdJdGVtRmVhdHVyZVR5cGUuTGVnYWN5VXNlcnMsXG5cdFx0XHRcdGJvb2tpbmdUZXh0OiBcImJvb2tpbmdJdGVtVXNlcnNfbGFiZWxcIixcblx0XHRcdFx0Y291bnQ6IDEsXG5cdFx0XHRcdGZyZWVBbW91bnQ6IDAsXG5cdFx0XHRcdHJlYWN0aXZhdGU6IGZhbHNlLFxuXHRcdFx0fSksXG5cdFx0KS50aGVuKGFzeW5jIChhY2NlcHRlZCkgPT4ge1xuXHRcdFx0aWYgKGFjY2VwdGVkKSB7XG5cdFx0XHRcdGNvbnN0IG9wZXJhdGlvbiA9IGxvY2F0b3Iub3BlcmF0aW9uUHJvZ3Jlc3NUcmFja2VyLnN0YXJ0TmV3T3BlcmF0aW9uKClcblx0XHRcdFx0Y29uc3QgcCA9IGxvY2F0b3IudXNlck1hbmFnZW1lbnRGYWNhZGUuY3JlYXRlVXNlcihcblx0XHRcdFx0XHR1c2VyTmFtZS50cmltKCksXG5cdFx0XHRcdFx0YXNzZXJ0Tm90TnVsbChlbWFpbEFkZHJlc3MpLFxuXHRcdFx0XHRcdHBhc3N3b3JkTW9kZWwuZ2V0TmV3UGFzc3dvcmQoKSxcblx0XHRcdFx0XHQwLFxuXHRcdFx0XHRcdDEsXG5cdFx0XHRcdFx0b3BlcmF0aW9uLmlkLFxuXHRcdFx0XHQpXG5cdFx0XHRcdHNob3dQcm9ncmVzc0RpYWxvZyhcblx0XHRcdFx0XHRsYW5nLmdldFRyYW5zbGF0aW9uKFwiY3JlYXRlQWN0aW9uU3RhdHVzX21zZ1wiLCB7XG5cdFx0XHRcdFx0XHRcIntpbmRleH1cIjogMCxcblx0XHRcdFx0XHRcdFwie2NvdW50fVwiOiAxLFxuXHRcdFx0XHRcdH0pLFxuXHRcdFx0XHRcdHAsXG5cdFx0XHRcdFx0b3BlcmF0aW9uLnByb2dyZXNzLFxuXHRcdFx0XHQpXG5cdFx0XHRcdFx0LmNhdGNoKG9mQ2xhc3MoUHJlY29uZGl0aW9uRmFpbGVkRXJyb3IsIChlKSA9PiBEaWFsb2cubWVzc2FnZShcImNyZWF0ZVVzZXJGYWlsZWRfbXNnXCIpKSlcblx0XHRcdFx0XHQudGhlbigoKSA9PiBkaWFsb2cuY2xvc2UoKSlcblx0XHRcdFx0XHQuZmluYWxseSgoKSA9PiBvcGVyYXRpb24uZG9uZSgpKVxuXHRcdFx0fVxuXHRcdH0pXG5cdH1cblxuXHREaWFsb2cuc2hvd0FjdGlvbkRpYWxvZyh7XG5cdFx0dGl0bGU6IFwiYWRkVXNlcnNfYWN0aW9uXCIsXG5cdFx0Y2hpbGQ6IGZvcm0sXG5cdFx0b2tBY3Rpb246IGFkZFVzZXJPa0FjdGlvbixcblx0fSlcbn1cbiIsImltcG9ydCBtLCB7IENoaWxkcmVuIH0gZnJvbSBcIm1pdGhyaWxcIlxuaW1wb3J0IHsgTm90Rm91bmRFcnJvciB9IGZyb20gXCIuLi9hcGkvY29tbW9uL2Vycm9yL1Jlc3RFcnJvci5qc1wiXG5pbXBvcnQgeyBzaXplIH0gZnJvbSBcIi4uL2d1aS9zaXplLmpzXCJcbmltcG9ydCB0eXBlIHsgR3JvdXBJbmZvIH0gZnJvbSBcIi4uL2FwaS9lbnRpdGllcy9zeXMvVHlwZVJlZnMuanNcIlxuaW1wb3J0IHsgR3JvdXBJbmZvVHlwZVJlZiwgR3JvdXBNZW1iZXJUeXBlUmVmIH0gZnJvbSBcIi4uL2FwaS9lbnRpdGllcy9zeXMvVHlwZVJlZnMuanNcIlxuaW1wb3J0IHsgY29udGFpbnMsIExhenlMb2FkZWQsIG5vT3AgfSBmcm9tIFwiQHR1dGFvL3R1dGFub3RhLXV0aWxzXCJcbmltcG9ydCB7IFVzZXJWaWV3ZXIgfSBmcm9tIFwiLi9Vc2VyVmlld2VyLmpzXCJcbmltcG9ydCB7IEZlYXR1cmVUeXBlLCBHcm91cFR5cGUgfSBmcm9tIFwiLi4vYXBpL2NvbW1vbi9UdXRhbm90YUNvbnN0YW50cy5qc1wiXG5pbXBvcnQgeyBJY29uIH0gZnJvbSBcIi4uL2d1aS9iYXNlL0ljb24uanNcIlxuaW1wb3J0IHsgSWNvbnMgfSBmcm9tIFwiLi4vZ3VpL2Jhc2UvaWNvbnMvSWNvbnMuanNcIlxuaW1wb3J0IHsgQm9vdEljb25zIH0gZnJvbSBcIi4uL2d1aS9iYXNlL2ljb25zL0Jvb3RJY29ucy5qc1wiXG5cbmltcG9ydCB7IGNvbXBhcmVHcm91cEluZm9zIH0gZnJvbSBcIi4uL2FwaS9jb21tb24vdXRpbHMvR3JvdXBVdGlscy5qc1wiXG5pbXBvcnQgeyBlbGVtZW50SWRQYXJ0IH0gZnJvbSBcIi4uL2FwaS9jb21tb24vdXRpbHMvRW50aXR5VXRpbHMuanNcIlxuaW1wb3J0IHsgTGlzdENvbHVtbldyYXBwZXIgfSBmcm9tIFwiLi4vZ3VpL0xpc3RDb2x1bW5XcmFwcGVyLmpzXCJcbmltcG9ydCB7IGFzc2VydE1haW5Pck5vZGUgfSBmcm9tIFwiLi4vYXBpL2NvbW1vbi9FbnYuanNcIlxuaW1wb3J0IHsgbG9jYXRvciB9IGZyb20gXCIuLi9hcGkvbWFpbi9Db21tb25Mb2NhdG9yLmpzXCJcbmltcG9ydCBTdHJlYW0gZnJvbSBcIm1pdGhyaWwvc3RyZWFtXCJcbmltcG9ydCAqIGFzIEFkZFVzZXJEaWFsb2cgZnJvbSBcIi4vQWRkVXNlckRpYWxvZy5qc1wiXG5pbXBvcnQgeyBTZWxlY3RhYmxlUm93Q29udGFpbmVyLCBTZWxlY3RhYmxlUm93U2VsZWN0ZWRTZXR0ZXIsIHNldFZpc2liaWxpdHkgfSBmcm9tIFwiLi4vZ3VpL1NlbGVjdGFibGVSb3dDb250YWluZXIuanNcIlxuaW1wb3J0IHsgTGlzdCwgTGlzdEF0dHJzLCBNdWx0aXNlbGVjdE1vZGUsIFJlbmRlckNvbmZpZyB9IGZyb20gXCIuLi9ndWkvYmFzZS9MaXN0LmpzXCJcbmltcG9ydCB7IGxpc3RTZWxlY3Rpb25LZXlib2FyZFNob3J0Y3V0cywgVmlydHVhbFJvdyB9IGZyb20gXCIuLi9ndWkvYmFzZS9MaXN0VXRpbHMuanNcIlxuaW1wb3J0IENvbHVtbkVtcHR5TWVzc2FnZUJveCBmcm9tIFwiLi4vZ3VpL2Jhc2UvQ29sdW1uRW1wdHlNZXNzYWdlQm94LmpzXCJcbmltcG9ydCB7IHRoZW1lIH0gZnJvbSBcIi4uL2d1aS90aGVtZS5qc1wiXG5pbXBvcnQgeyBCYXNlU2VhcmNoQmFyLCBCYXNlU2VhcmNoQmFyQXR0cnMgfSBmcm9tIFwiLi4vZ3VpL2Jhc2UvQmFzZVNlYXJjaEJhci5qc1wiXG5pbXBvcnQgeyBJY29uQnV0dG9uIH0gZnJvbSBcIi4uL2d1aS9iYXNlL0ljb25CdXR0b24uanNcIlxuaW1wb3J0IHsgYXR0YWNoRHJvcGRvd24gfSBmcm9tIFwiLi4vZ3VpL2Jhc2UvRHJvcGRvd24uanNcIlxuaW1wb3J0IHsgbGFuZyB9IGZyb20gXCIuLi9taXNjL0xhbmd1YWdlVmlld01vZGVsLmpzXCJcbmltcG9ydCB7IGtleU1hbmFnZXIgfSBmcm9tIFwiLi4vbWlzYy9LZXlNYW5hZ2VyLmpzXCJcbmltcG9ydCB7IEVudGl0eVVwZGF0ZURhdGEsIGlzVXBkYXRlRm9yLCBpc1VwZGF0ZUZvclR5cGVSZWYgfSBmcm9tIFwiLi4vYXBpL2NvbW1vbi91dGlscy9FbnRpdHlVcGRhdGVVdGlscy5qc1wiXG5pbXBvcnQgeyBMaXN0QXV0b1NlbGVjdEJlaGF2aW9yIH0gZnJvbSBcIi4uL21pc2MvRGV2aWNlQ29uZmlnLmpzXCJcbmltcG9ydCB7IFVwZGF0YWJsZVNldHRpbmdzVmlld2VyIH0gZnJvbSBcIi4vSW50ZXJmYWNlcy5qc1wiXG5pbXBvcnQgeyBMaXN0RWxlbWVudExpc3RNb2RlbCB9IGZyb20gXCIuLi9taXNjL0xpc3RFbGVtZW50TGlzdE1vZGVsXCJcblxuYXNzZXJ0TWFpbk9yTm9kZSgpXG5cbi8qKlxuICogRGlzcGxheXMgYSBsaXN0IHdpdGggdXNlcnMgdGhhdCBhcmUgYXZhaWxhYmxlIHRvIG1hbmFnZSBieSB0aGUgY3VycmVudCB1c2VyLlxuICogR2xvYmFsIGFkbWlucyBzZWUgYWxsIHVzZXJzLlxuICogTG9jYWwgYWRtaW5zIHNlZSBvbmx5IHRoZWlyIGFzc2lnbmVkIHVzZXJzLlxuICovXG5leHBvcnQgY2xhc3MgVXNlckxpc3RWaWV3IGltcGxlbWVudHMgVXBkYXRhYmxlU2V0dGluZ3NWaWV3ZXIge1xuXHRwcml2YXRlIHNlYXJjaFF1ZXJ5OiBzdHJpbmcgPSBcIlwiXG5cdHByaXZhdGUgbGlzdE1vZGVsOiBMaXN0RWxlbWVudExpc3RNb2RlbDxHcm91cEluZm8+XG5cdHByaXZhdGUgcmVhZG9ubHkgcmVuZGVyQ29uZmlnOiBSZW5kZXJDb25maWc8R3JvdXBJbmZvLCBVc2VyUm93PiA9IHtcblx0XHRjcmVhdGVFbGVtZW50OiAoZG9tKSA9PiB7XG5cdFx0XHRjb25zdCByb3cgPSBuZXcgVXNlclJvdygoZ3JvdXBJbmZvKSA9PiB0aGlzLmlzQWRtaW4oZ3JvdXBJbmZvKSlcblx0XHRcdG0ucmVuZGVyKGRvbSwgcm93LnJlbmRlcigpKVxuXHRcdFx0cmV0dXJuIHJvd1xuXHRcdH0sXG5cdFx0aXRlbUhlaWdodDogc2l6ZS5saXN0X3Jvd19oZWlnaHQsXG5cdFx0c3dpcGU6IG51bGwsXG5cdFx0bXVsdGlzZWxlY3Rpb25BbGxvd2VkOiBNdWx0aXNlbGVjdE1vZGUuRGlzYWJsZWQsXG5cdH1cblxuXHRwcml2YXRlIHJlYWRvbmx5IGxpc3RJZDogTGF6eUxvYWRlZDxJZD5cblx0cHJpdmF0ZSBhZG1pblVzZXJHcm91cEluZm9JZHM6IElkW10gPSBbXVxuXHRwcml2YXRlIGxpc3RTdGF0ZVN1YnNjcmlwdGlvbjogU3RyZWFtPHVua25vd24+IHwgbnVsbCA9IG51bGxcblx0cHJpdmF0ZSBsaXN0U2VsZWN0aW9uU3Vic2NyaXB0aW9uOiBTdHJlYW08dW5rbm93bj4gfCBudWxsID0gbnVsbFxuXG5cdGNvbnN0cnVjdG9yKFxuXHRcdHByaXZhdGUgcmVhZG9ubHkgdXBkYXRlRGV0YWlsc1ZpZXdlcjogKHZpZXdlcjogVXNlclZpZXdlciB8IG51bGwpID0+IHVua25vd24sXG5cdFx0cHJpdmF0ZSByZWFkb25seSBmb2N1c0RldGFpbHNWaWV3ZXI6ICgpID0+IHVua25vd24sXG5cdFx0cHJpdmF0ZSByZWFkb25seSBjYW5JbXBvcnRVc2VyczogKCkgPT4gYm9vbGVhbixcblx0XHRwcml2YXRlIHJlYWRvbmx5IG9uSW1wb3J0VXNlcnM6ICgpID0+IHVua25vd24sXG5cdFx0cHJpdmF0ZSByZWFkb25seSBvbkV4cG9ydFVzZXJzOiAoKSA9PiB1bmtub3duLFxuXHQpIHtcblx0XHQvLyBkb2luZyBpdCBhZnRlciBcIm9uU2VsZWN0aW9uQ2hhbmdlZFwiIGlzIGluaXRpYWxpemVkXG5cdFx0dGhpcy5saXN0TW9kZWwgPSB0aGlzLm1ha2VMaXN0TW9kZWwoKVxuXHRcdHRoaXMubGlzdElkID0gbmV3IExhenlMb2FkZWQoYXN5bmMgKCkgPT4ge1xuXHRcdFx0Y29uc3QgY3VzdG9tZXIgPSBhd2FpdCBsb2NhdG9yLmxvZ2lucy5nZXRVc2VyQ29udHJvbGxlcigpLmxvYWRDdXN0b21lcigpXG5cdFx0XHRyZXR1cm4gY3VzdG9tZXIudXNlckdyb3Vwc1xuXHRcdH0pXG5cblx0XHR0aGlzLmxpc3RNb2RlbC5sb2FkSW5pdGlhbCgpXG5cblx0XHR0aGlzLm9uY3JlYXRlID0gdGhpcy5vbmNyZWF0ZS5iaW5kKHRoaXMpXG5cdFx0dGhpcy5vbnJlbW92ZSA9IHRoaXMub25yZW1vdmUuYmluZCh0aGlzKVxuXHRcdHRoaXMudmlldyA9IHRoaXMudmlldy5iaW5kKHRoaXMpXG5cdH1cblxuXHRwcml2YXRlIHJlYWRvbmx5IHNob3J0Y3V0cyA9IGxpc3RTZWxlY3Rpb25LZXlib2FyZFNob3J0Y3V0cyhNdWx0aXNlbGVjdE1vZGUuRGlzYWJsZWQsICgpID0+IHRoaXMubGlzdE1vZGVsKVxuXG5cdG9uY3JlYXRlKCkge1xuXHRcdGtleU1hbmFnZXIucmVnaXN0ZXJTaG9ydGN1dHModGhpcy5zaG9ydGN1dHMpXG5cdH1cblxuXHR2aWV3KCk6IENoaWxkcmVuIHtcblx0XHRpZiAobG9jYXRvci5sb2dpbnMuaXNFbmFibGVkKEZlYXR1cmVUeXBlLldoaXRlbGFiZWxDaGlsZCkpIHtcblx0XHRcdHJldHVybiBudWxsXG5cdFx0fVxuXG5cdFx0cmV0dXJuIG0oXG5cdFx0XHRMaXN0Q29sdW1uV3JhcHBlcixcblx0XHRcdHtcblx0XHRcdFx0aGVhZGVyQ29udGVudDogbShcblx0XHRcdFx0XHRcIi5mbGV4LmZsZXgtc3BhY2UtYmV0d2Vlbi5jZW50ZXItdmVydGljYWxseS5wbHItbFwiLFxuXHRcdFx0XHRcdG0oQmFzZVNlYXJjaEJhciwge1xuXHRcdFx0XHRcdFx0dGV4dDogdGhpcy5zZWFyY2hRdWVyeSxcblx0XHRcdFx0XHRcdG9uSW5wdXQ6ICh0ZXh0KSA9PiB0aGlzLnVwZGF0ZVF1ZXJ5KHRleHQpLFxuXHRcdFx0XHRcdFx0YnVzeTogZmFsc2UsXG5cdFx0XHRcdFx0XHRvbktleURvd246IChlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpLFxuXHRcdFx0XHRcdFx0b25DbGVhcjogKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHR0aGlzLnNlYXJjaFF1ZXJ5ID0gXCJcIlxuXHRcdFx0XHRcdFx0XHR0aGlzLmxpc3RNb2RlbC5yZWFwcGx5RmlsdGVyKClcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRwbGFjZWhvbGRlcjogbGFuZy5nZXQoXCJzZWFyY2hVc2Vyc19wbGFjZWhvbGRlclwiKSxcblx0XHRcdFx0XHR9IHNhdGlzZmllcyBCYXNlU2VhcmNoQmFyQXR0cnMpLFxuXHRcdFx0XHRcdG0oXG5cdFx0XHRcdFx0XHRcIi5tci1uZWdhdGl2ZS1zXCIsXG5cdFx0XHRcdFx0XHRtKEljb25CdXR0b24sIHtcblx0XHRcdFx0XHRcdFx0dGl0bGU6IFwiYWRkVXNlcnNfYWN0aW9uXCIsXG5cdFx0XHRcdFx0XHRcdGljb246IEljb25zLkFkZCxcblx0XHRcdFx0XHRcdFx0Y2xpY2s6ICgpID0+IHRoaXMuYWRkQnV0dG9uQ2xpY2tlZCgpLFxuXHRcdFx0XHRcdFx0fSksXG5cdFx0XHRcdFx0XHR0aGlzLnJlbmRlckltcG9ydEJ1dHRvbigpLFxuXHRcdFx0XHRcdCksXG5cdFx0XHRcdCksXG5cdFx0XHR9LFxuXHRcdFx0dGhpcy5saXN0TW9kZWwuaXNFbXB0eUFuZERvbmUoKVxuXHRcdFx0XHQ/IG0oQ29sdW1uRW1wdHlNZXNzYWdlQm94LCB7XG5cdFx0XHRcdFx0XHRjb2xvcjogdGhlbWUubGlzdF9tZXNzYWdlX2JnLFxuXHRcdFx0XHRcdFx0aWNvbjogQm9vdEljb25zLkNvbnRhY3RzLFxuXHRcdFx0XHRcdFx0bWVzc2FnZTogXCJub0VudHJpZXNfbXNnXCIsXG5cdFx0XHRcdCAgfSlcblx0XHRcdFx0OiBtKExpc3QsIHtcblx0XHRcdFx0XHRcdHJlbmRlckNvbmZpZzogdGhpcy5yZW5kZXJDb25maWcsXG5cdFx0XHRcdFx0XHRzdGF0ZTogdGhpcy5saXN0TW9kZWwuc3RhdGUsXG5cdFx0XHRcdFx0XHRvbkxvYWRNb3JlOiAoKSA9PiB0aGlzLmxpc3RNb2RlbC5sb2FkTW9yZSgpLFxuXHRcdFx0XHRcdFx0b25SZXRyeUxvYWRpbmc6ICgpID0+IHRoaXMubGlzdE1vZGVsLnJldHJ5TG9hZGluZygpLFxuXHRcdFx0XHRcdFx0b25TdG9wTG9hZGluZzogKCkgPT4gdGhpcy5saXN0TW9kZWwuc3RvcExvYWRpbmcoKSxcblx0XHRcdFx0XHRcdG9uU2luZ2xlU2VsZWN0aW9uOiAoaXRlbTogR3JvdXBJbmZvKSA9PiB7XG5cdFx0XHRcdFx0XHRcdHRoaXMubGlzdE1vZGVsLm9uU2luZ2xlU2VsZWN0aW9uKGl0ZW0pXG5cdFx0XHRcdFx0XHRcdHRoaXMuZm9jdXNEZXRhaWxzVmlld2VyKClcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRvblNpbmdsZVRvZ2dsaW5nTXVsdGlzZWxlY3Rpb246IG5vT3AsXG5cdFx0XHRcdFx0XHRvblJhbmdlU2VsZWN0aW9uVG93YXJkczogbm9PcCxcblx0XHRcdFx0ICB9IHNhdGlzZmllcyBMaXN0QXR0cnM8R3JvdXBJbmZvLCBVc2VyUm93PiksXG5cdFx0KVxuXHR9XG5cblx0cHJpdmF0ZSByZW5kZXJJbXBvcnRCdXR0b24oKSB7XG5cdFx0aWYgKHRoaXMuY2FuSW1wb3J0VXNlcnMoKSkge1xuXHRcdFx0cmV0dXJuIG0oXG5cdFx0XHRcdEljb25CdXR0b24sXG5cdFx0XHRcdGF0dGFjaERyb3Bkb3duKHtcblx0XHRcdFx0XHRtYWluQnV0dG9uQXR0cnM6IHtcblx0XHRcdFx0XHRcdHRpdGxlOiBcIm1vcmVfbGFiZWxcIixcblx0XHRcdFx0XHRcdGljb246IEljb25zLk1vcmUsXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRjaGlsZEF0dHJzOiAoKSA9PiBbXG5cdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdGxhYmVsOiBcImltcG9ydFVzZXJzX2FjdGlvblwiLFxuXHRcdFx0XHRcdFx0XHRjbGljazogKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdHRoaXMub25JbXBvcnRVc2VycygpXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRsYWJlbDogXCJleHBvcnRVc2Vyc19hY3Rpb25cIixcblx0XHRcdFx0XHRcdFx0Y2xpY2s6ICgpID0+IHtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLm9uRXhwb3J0VXNlcnMoKVxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRdLFxuXHRcdFx0XHR9KSxcblx0XHRcdClcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmV0dXJuIG51bGxcblx0XHR9XG5cdH1cblxuXHRvbnJlbW92ZSgpIHtcblx0XHRrZXlNYW5hZ2VyLnVucmVnaXN0ZXJTaG9ydGN1dHModGhpcy5zaG9ydGN1dHMpXG5cblx0XHR0aGlzLmxpc3RTdGF0ZVN1YnNjcmlwdGlvbj8uZW5kKHRydWUpXG5cdFx0dGhpcy5saXN0U2VsZWN0aW9uU3Vic2NyaXB0aW9uPy5lbmQodHJ1ZSlcblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgbG9hZEFkbWlucygpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRjb25zdCBhZG1pbkdyb3VwTWVtYmVyc2hpcCA9IGxvY2F0b3IubG9naW5zLmdldFVzZXJDb250cm9sbGVyKCkudXNlci5tZW1iZXJzaGlwcy5maW5kKChnbSkgPT4gZ20uZ3JvdXBUeXBlID09PSBHcm91cFR5cGUuQWRtaW4pXG5cdFx0aWYgKGFkbWluR3JvdXBNZW1iZXJzaGlwID09IG51bGwpIHtcblx0XHRcdHJldHVyblxuXHRcdH1cblx0XHRjb25zdCBtZW1iZXJzID0gYXdhaXQgbG9jYXRvci5lbnRpdHlDbGllbnQubG9hZEFsbChHcm91cE1lbWJlclR5cGVSZWYsIGFkbWluR3JvdXBNZW1iZXJzaGlwLmdyb3VwTWVtYmVyWzBdKVxuXHRcdHRoaXMuYWRtaW5Vc2VyR3JvdXBJbmZvSWRzID0gbWVtYmVycy5tYXAoKGFkbWluR3JvdXBNZW1iZXIpID0+IGVsZW1lbnRJZFBhcnQoYWRtaW5Hcm91cE1lbWJlci51c2VyR3JvdXBJbmZvKSlcblx0fVxuXG5cdHByaXZhdGUgaXNBZG1pbih1c2VyR3JvdXBJbmZvOiBHcm91cEluZm8pOiBib29sZWFuIHtcblx0XHRyZXR1cm4gY29udGFpbnModGhpcy5hZG1pblVzZXJHcm91cEluZm9JZHMsIHVzZXJHcm91cEluZm8uX2lkWzFdKVxuXHR9XG5cblx0cHJpdmF0ZSBhZGRCdXR0b25DbGlja2VkKCkge1xuXHRcdEFkZFVzZXJEaWFsb2cuc2hvdygpXG5cdH1cblxuXHRhc3luYyBlbnRpdHlFdmVudHNSZWNlaXZlZDxUPih1cGRhdGVzOiBSZWFkb25seUFycmF5PEVudGl0eVVwZGF0ZURhdGE+KTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0Zm9yIChjb25zdCB1cGRhdGUgb2YgdXBkYXRlcykge1xuXHRcdFx0Y29uc3QgeyBpbnN0YW5jZUxpc3RJZCwgaW5zdGFuY2VJZCwgb3BlcmF0aW9uIH0gPSB1cGRhdGVcblxuXHRcdFx0aWYgKGlzVXBkYXRlRm9yVHlwZVJlZihHcm91cEluZm9UeXBlUmVmLCB1cGRhdGUpICYmIHRoaXMubGlzdElkLmdldFN5bmMoKSA9PT0gaW5zdGFuY2VMaXN0SWQpIHtcblx0XHRcdFx0YXdhaXQgdGhpcy5saXN0TW9kZWwuZW50aXR5RXZlbnRSZWNlaXZlZChpbnN0YW5jZUxpc3RJZCwgaW5zdGFuY2VJZCwgb3BlcmF0aW9uKVxuXHRcdFx0fSBlbHNlIGlmIChpc1VwZGF0ZUZvcihsb2NhdG9yLmxvZ2lucy5nZXRVc2VyQ29udHJvbGxlcigpLnVzZXIsIHVwZGF0ZSkpIHtcblx0XHRcdFx0YXdhaXQgdGhpcy5sb2FkQWRtaW5zKClcblx0XHRcdFx0dGhpcy5saXN0TW9kZWwucmVhcHBseUZpbHRlcigpXG5cdFx0XHR9XG5cdFx0XHRtLnJlZHJhdygpXG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBtYWtlTGlzdE1vZGVsKCk6IExpc3RFbGVtZW50TGlzdE1vZGVsPEdyb3VwSW5mbz4ge1xuXHRcdGNvbnN0IGxpc3RNb2RlbCA9IG5ldyBMaXN0RWxlbWVudExpc3RNb2RlbDxHcm91cEluZm8+KHtcblx0XHRcdHNvcnRDb21wYXJlOiBjb21wYXJlR3JvdXBJbmZvcyxcblx0XHRcdGZldGNoOiBhc3luYyAoX2xhc3RGZXRjaGVkRW50aXR5KSA9PiB7XG5cdFx0XHRcdGF3YWl0IHRoaXMubG9hZEFkbWlucygpXG5cdFx0XHRcdGNvbnN0IGxpc3RJZCA9IGF3YWl0IHRoaXMubGlzdElkLmdldEFzeW5jKClcblx0XHRcdFx0Y29uc3QgYWxsVXNlckdyb3VwSW5mb3MgPSBhd2FpdCBsb2NhdG9yLmVudGl0eUNsaWVudC5sb2FkQWxsKEdyb3VwSW5mb1R5cGVSZWYsIGxpc3RJZClcblxuXHRcdFx0XHRyZXR1cm4geyBpdGVtczogYWxsVXNlckdyb3VwSW5mb3MsIGNvbXBsZXRlOiB0cnVlIH1cblx0XHRcdH0sXG5cdFx0XHRsb2FkU2luZ2xlOiBhc3luYyAoX2xpc3RJZDogSWQsIGVsZW1lbnRJZDogSWQpID0+IHtcblx0XHRcdFx0Y29uc3QgbGlzdElkID0gYXdhaXQgdGhpcy5saXN0SWQuZ2V0QXN5bmMoKVxuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdHJldHVybiBhd2FpdCBsb2NhdG9yLmVudGl0eUNsaWVudC5sb2FkPEdyb3VwSW5mbz4oR3JvdXBJbmZvVHlwZVJlZiwgW2xpc3RJZCwgZWxlbWVudElkXSlcblx0XHRcdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0XHRcdGlmIChlIGluc3RhbmNlb2YgTm90Rm91bmRFcnJvcikge1xuXHRcdFx0XHRcdFx0Ly8gd2UgcmV0dXJuIG51bGwgaWYgdGhlIEdyb3VwSW5mbyBkb2VzIG5vdCBleGlzdFxuXHRcdFx0XHRcdFx0cmV0dXJuIG51bGxcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0dGhyb3cgZVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHRcdGF1dG9TZWxlY3RCZWhhdmlvcjogKCkgPT4gTGlzdEF1dG9TZWxlY3RCZWhhdmlvci5PTERFUixcblx0XHR9KVxuXG5cdFx0bGlzdE1vZGVsLnNldEZpbHRlcigoZ2kpID0+IHRoaXMuZ3JvdXBGaWx0ZXIoKSAmJiB0aGlzLnF1ZXJ5RmlsdGVyKGdpKSlcblxuXHRcdHRoaXMubGlzdFN0YXRlU3Vic2NyaXB0aW9uPy5lbmQodHJ1ZSlcblx0XHR0aGlzLmxpc3RTdGF0ZVN1YnNjcmlwdGlvbiA9IGxpc3RNb2RlbC5zdGF0ZVN0cmVhbS5tYXAoKHN0YXRlKSA9PiB7XG5cdFx0XHRtLnJlZHJhdygpXG5cdFx0fSlcblxuXHRcdHRoaXMubGlzdFNlbGVjdGlvblN1YnNjcmlwdGlvbj8uZW5kKHRydWUpXG5cdFx0dGhpcy5saXN0U2VsZWN0aW9uU3Vic2NyaXB0aW9uID0gbGlzdE1vZGVsLmRpZmZlcmVudEl0ZW1zU2VsZWN0ZWQubWFwKChuZXdTZWxlY3Rpb24pID0+IHtcblx0XHRcdGxldCBkZXRhaWxzVmlld2VyOiBVc2VyVmlld2VyIHwgbnVsbFxuXHRcdFx0aWYgKG5ld1NlbGVjdGlvbi5zaXplID09PSAwKSB7XG5cdFx0XHRcdGRldGFpbHNWaWV3ZXIgPSBudWxsXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjb25zdCBpdGVtID0gbmV3U2VsZWN0aW9uLnZhbHVlcygpLm5leHQoKS52YWx1ZVxuXHRcdFx0XHRkZXRhaWxzVmlld2VyID0gbmV3IFVzZXJWaWV3ZXIoaXRlbSwgdGhpcy5pc0FkbWluKGl0ZW0pKVxuXHRcdFx0fVxuXHRcdFx0dGhpcy51cGRhdGVEZXRhaWxzVmlld2VyKGRldGFpbHNWaWV3ZXIpXG5cdFx0XHRtLnJlZHJhdygpXG5cdFx0fSlcblx0XHRyZXR1cm4gbGlzdE1vZGVsXG5cdH1cblxuXHRwcml2YXRlIHF1ZXJ5RmlsdGVyKGdpOiBHcm91cEluZm8pIHtcblx0XHRjb25zdCBsb3dlcmNhc2VTZWFyY2ggPSB0aGlzLnNlYXJjaFF1ZXJ5LnRvTG93ZXJDYXNlKClcblx0XHRyZXR1cm4gKFxuXHRcdFx0Z2kubmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGxvd2VyY2FzZVNlYXJjaCkgfHxcblx0XHRcdCghIWdpLm1haWxBZGRyZXNzICYmIGdpLm1haWxBZGRyZXNzPy50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGxvd2VyY2FzZVNlYXJjaCkpIHx8XG5cdFx0XHRnaS5tYWlsQWRkcmVzc0FsaWFzZXMuc29tZSgobWFpKSA9PiBtYWkubWFpbEFkZHJlc3MudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhsb3dlcmNhc2VTZWFyY2gpKVxuXHRcdClcblx0fVxuXG5cdHByaXZhdGUgZ3JvdXBGaWx0ZXIgPSAoKSA9PiB7XG5cdFx0cmV0dXJuIGxvY2F0b3IubG9naW5zLmdldFVzZXJDb250cm9sbGVyKCkuaXNHbG9iYWxBZG1pbigpXG5cdH1cblxuXHRwcml2YXRlIHVwZGF0ZVF1ZXJ5KHF1ZXJ5OiBzdHJpbmcpIHtcblx0XHR0aGlzLnNlYXJjaFF1ZXJ5ID0gcXVlcnlcblx0XHR0aGlzLmxpc3RNb2RlbC5yZWFwcGx5RmlsdGVyKClcblx0fVxufVxuXG5leHBvcnQgY2xhc3MgVXNlclJvdyBpbXBsZW1lbnRzIFZpcnR1YWxSb3c8R3JvdXBJbmZvPiB7XG5cdHRvcDogbnVtYmVyID0gMFxuXHRkb21FbGVtZW50OiBIVE1MRWxlbWVudCB8IG51bGwgPSBudWxsIC8vIHNldCBmcm9tIExpc3Rcblx0ZW50aXR5OiBHcm91cEluZm8gfCBudWxsID0gbnVsbFxuXHRwcml2YXRlIG5hbWVEb20hOiBIVE1MRWxlbWVudFxuXHRwcml2YXRlIGFkZHJlc3NEb20hOiBIVE1MRWxlbWVudFxuXHRwcml2YXRlIGFkbWluSWNvbkRvbSE6IEhUTUxFbGVtZW50XG5cdHByaXZhdGUgZGVsZXRlZEljb25Eb20hOiBIVE1MRWxlbWVudFxuXHRwcml2YXRlIHNlbGVjdGlvblVwZGF0ZXIhOiBTZWxlY3RhYmxlUm93U2VsZWN0ZWRTZXR0ZXJcblxuXHRjb25zdHJ1Y3Rvcihwcml2YXRlIHJlYWRvbmx5IGlzQWRtaW46IChncm91cEluZm86IEdyb3VwSW5mbykgPT4gYm9vbGVhbikge31cblxuXHR1cGRhdGUoZ3JvdXBJbmZvOiBHcm91cEluZm8sIHNlbGVjdGVkOiBib29sZWFuKTogdm9pZCB7XG5cdFx0dGhpcy5lbnRpdHkgPSBncm91cEluZm9cblxuXHRcdHRoaXMuc2VsZWN0aW9uVXBkYXRlcihzZWxlY3RlZCwgZmFsc2UpXG5cblx0XHR0aGlzLm5hbWVEb20udGV4dENvbnRlbnQgPSBncm91cEluZm8ubmFtZVxuXHRcdHRoaXMuYWRkcmVzc0RvbS50ZXh0Q29udGVudCA9IGdyb3VwSW5mby5tYWlsQWRkcmVzcyA/IGdyb3VwSW5mby5tYWlsQWRkcmVzcyA6IFwiXCJcblxuXHRcdHNldFZpc2liaWxpdHkodGhpcy5hZG1pbkljb25Eb20sIHRoaXMuaXNBZG1pbihncm91cEluZm8pKVxuXHRcdHNldFZpc2liaWxpdHkodGhpcy5kZWxldGVkSWNvbkRvbSwgZ3JvdXBJbmZvLmRlbGV0ZWQgIT0gbnVsbClcblx0fVxuXG5cdC8qKlxuXHQgKiBPbmx5IHRoZSBzdHJ1Y3R1cmUgaXMgbWFuYWdlZCBieSBtaXRocmlsLiBXZSBzZXQgYWxsIGNvbnRlbnRzIG9uIG91ciBvd24gKHNlZSB1cGRhdGUpIGluIG9yZGVyIHRvIGF2b2lkIHRoZSB2ZG9tIG92ZXJoZWFkIChub3QgbmVnbGlnaWJsZSBvbiBtb2JpbGVzKVxuXHQgKi9cblx0cmVuZGVyKCk6IENoaWxkcmVuIHtcblx0XHRyZXR1cm4gbShcblx0XHRcdFNlbGVjdGFibGVSb3dDb250YWluZXIsXG5cdFx0XHR7XG5cdFx0XHRcdG9uU2VsZWN0ZWRDaGFuZ2VSZWY6ICh1cGRhdGVyKSA9PiAodGhpcy5zZWxlY3Rpb25VcGRhdGVyID0gdXBkYXRlciksXG5cdFx0XHR9LFxuXHRcdFx0bShcIi5mbGV4LmNvbC5mbGV4LWdyb3dcIiwgW1xuXHRcdFx0XHRtKFwiLmJhZGdlLWxpbmUtaGVpZ2h0XCIsIFtcblx0XHRcdFx0XHRtKFwiXCIsIHtcblx0XHRcdFx0XHRcdG9uY3JlYXRlOiAodm5vZGUpID0+ICh0aGlzLm5hbWVEb20gPSB2bm9kZS5kb20gYXMgSFRNTEVsZW1lbnQpLFxuXHRcdFx0XHRcdH0pLFxuXHRcdFx0XHRdKSxcblx0XHRcdFx0bShcIi5mbGV4LXNwYWNlLWJldHdlZW4ubXQteHhzXCIsIFtcblx0XHRcdFx0XHRtKFwiLnNtYWxsZXJcIiwge1xuXHRcdFx0XHRcdFx0b25jcmVhdGU6ICh2bm9kZSkgPT4gKHRoaXMuYWRkcmVzc0RvbSA9IHZub2RlLmRvbSBhcyBIVE1MRWxlbWVudCksXG5cdFx0XHRcdFx0fSksXG5cdFx0XHRcdFx0bShcIi5pY29ucy5mbGV4XCIsIFtcblx0XHRcdFx0XHRcdG0oSWNvbiwge1xuXHRcdFx0XHRcdFx0XHRpY29uOiBCb290SWNvbnMuU2V0dGluZ3MsXG5cdFx0XHRcdFx0XHRcdG9uY3JlYXRlOiAodm5vZGUpID0+ICh0aGlzLmFkbWluSWNvbkRvbSA9IHZub2RlLmRvbSBhcyBIVE1MRWxlbWVudCksXG5cdFx0XHRcdFx0XHRcdGNsYXNzOiBcInN2Zy1saXN0LWFjY2VudC1mZ1wiLFxuXHRcdFx0XHRcdFx0XHRzdHlsZToge1xuXHRcdFx0XHRcdFx0XHRcdGRpc3BsYXk6IFwibm9uZVwiLFxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0fSksXG5cdFx0XHRcdFx0XHRtKEljb24sIHtcblx0XHRcdFx0XHRcdFx0aWNvbjogSWNvbnMuVHJhc2gsXG5cdFx0XHRcdFx0XHRcdG9uY3JlYXRlOiAodm5vZGUpID0+ICh0aGlzLmRlbGV0ZWRJY29uRG9tID0gdm5vZGUuZG9tIGFzIEhUTUxFbGVtZW50KSxcblx0XHRcdFx0XHRcdFx0Y2xhc3M6IFwic3ZnLWxpc3QtYWNjZW50LWZnXCIsXG5cdFx0XHRcdFx0XHRcdHN0eWxlOiB7XG5cdFx0XHRcdFx0XHRcdFx0ZGlzcGxheTogXCJub25lXCIsXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHR9KSxcblx0XHRcdFx0XHRdKSxcblx0XHRcdFx0XSksXG5cdFx0XHRdKSxcblx0XHQpXG5cdH1cbn1cbiIsImltcG9ydCBtLCB7IENoaWxkcmVuLCBDb21wb25lbnQsIFZub2RlIH0gZnJvbSBcIm1pdGhyaWxcIlxuaW1wb3J0IHsgQm9va2luZ0l0ZW1GZWF0dXJlVHlwZSwgRmVhdHVyZVR5cGUsIEdyb3VwVHlwZSB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vYXBpL2NvbW1vbi9UdXRhbm90YUNvbnN0YW50cy5qc1wiXG5pbXBvcnQgeyBEaWFsb2cgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2d1aS9iYXNlL0RpYWxvZy5qc1wiXG5pbXBvcnQgdHlwZSB7IFZhbGlkYXRpb25SZXN1bHQgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL3NldHRpbmdzL1NlbGVjdE1haWxBZGRyZXNzRm9ybS5qc1wiXG5pbXBvcnQgeyBTZWxlY3RNYWlsQWRkcmVzc0Zvcm0gfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL3NldHRpbmdzL1NlbGVjdE1haWxBZGRyZXNzRm9ybS5qc1wiXG5pbXBvcnQgeyBnZXRHcm91cFR5cGVEaXNwbGF5TmFtZSB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vc2V0dGluZ3MvZ3JvdXBzL0dyb3VwRGV0YWlsc1ZpZXcuanNcIlxuaW1wb3J0IHsgc2hvd1Byb2dyZXNzRGlhbG9nIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9ndWkvZGlhbG9ncy9Qcm9ncmVzc0RpYWxvZy5qc1wiXG5pbXBvcnQgeyBJbmZvTGluaywgbGFuZywgVHJhbnNsYXRpb25LZXkgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL21pc2MvTGFuZ3VhZ2VWaWV3TW9kZWwuanNcIlxuaW1wb3J0IHsgc2hvd0J1eURpYWxvZyB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vc3Vic2NyaXB0aW9uL0J1eURpYWxvZy5qc1wiXG5pbXBvcnQgeyBQcmVjb25kaXRpb25GYWlsZWRFcnJvciB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vYXBpL2NvbW1vbi9lcnJvci9SZXN0RXJyb3IuanNcIlxuaW1wb3J0IHsgc2hvd1BsYW5VcGdyYWRlUmVxdWlyZWREaWFsb2cgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL21pc2MvU3Vic2NyaXB0aW9uRGlhbG9ncy5qc1wiXG5pbXBvcnQgeyBUZW1wbGF0ZUdyb3VwUHJlY29uZGl0aW9uRmFpbGVkUmVhc29uIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9zaGFyaW5nL0dyb3VwVXRpbHMuanNcIlxuaW1wb3J0IHsgRHJvcERvd25TZWxlY3RvciB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZ3VpL2Jhc2UvRHJvcERvd25TZWxlY3Rvci5qc1wiXG5pbXBvcnQgeyBUZXh0RmllbGQgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2d1aS9iYXNlL1RleHRGaWVsZC5qc1wiXG5pbXBvcnQgeyBnZXRGaXJzdE9yVGhyb3csIG9mQ2xhc3MgfSBmcm9tIFwiQHR1dGFvL3R1dGFub3RhLXV0aWxzXCJcbmltcG9ydCB0eXBlIHsgR3JvdXBNYW5hZ2VtZW50RmFjYWRlIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9hcGkvd29ya2VyL2ZhY2FkZXMvbGF6eS9Hcm91cE1hbmFnZW1lbnRGYWNhZGUuanNcIlxuaW1wb3J0IHsgbG9jYXRvciB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vYXBpL21haW4vQ29tbW9uTG9jYXRvci5qc1wiXG5pbXBvcnQgeyBhc3NlcnRNYWluT3JOb2RlIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9hcGkvY29tbW9uL0Vudi5qc1wiXG5pbXBvcnQgeyBFbWFpbERvbWFpbkRhdGEsIGdldEF2YWlsYWJsZURvbWFpbnMgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL3NldHRpbmdzL21haWxhZGRyZXNzL01haWxBZGRyZXNzZXNVdGlscy5qc1wiXG5pbXBvcnQgeyBnZXRBdmFpbGFibGVQbGFuc1dpdGhUZW1wbGF0ZXMsIHRvRmVhdHVyZVR5cGUgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL3N1YnNjcmlwdGlvbi9TdWJzY3JpcHRpb25VdGlscy5qc1wiXG5pbXBvcnQgeyBNb3JlSW5mb0xpbmsgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL21pc2MvbmV3cy9Nb3JlSW5mb0xpbmsuanNcIlxuXG5hc3NlcnRNYWluT3JOb2RlKClcblxuZXhwb3J0IHR5cGUgQWRkR3JvdXBEaWFsb2dBdHRycyA9IHtcblx0Z3JvdXBUeXBlOiBHcm91cFR5cGVcblx0c2VsZWN0ZWREb21haW46IEVtYWlsRG9tYWluRGF0YVxuXHRhdmFpbGFibGVEb21haW5zOiBBcnJheTxFbWFpbERvbWFpbkRhdGE+XG5cdGF2YWlsYWJsZUdyb3VwVHlwZXM6IEFycmF5PEdyb3VwVHlwZT5cblx0bmFtZTogc3RyaW5nXG5cdG9uR3JvdXBOYW1lQ2hhbmdlZDogKG5hbWU6IHN0cmluZykgPT4gdW5rbm93blxuXHRvbkdyb3VwVHlwZUNoYW5nZWQ6ICh0eXBlOiBHcm91cFR5cGUpID0+IHVua25vd25cblx0b25FbWFpbENoYW5nZWQ6IChlbWFpbEFkZHJlc3M6IHN0cmluZywgdmFsaWRhdGlvblJlc3VsdDogVmFsaWRhdGlvblJlc3VsdCkgPT4gdW5rbm93blxuXHRvbkJ1c3lTdGF0ZUNoYW5nZWQ6IChidXN5OiBib29sZWFuKSA9PiB1bmtub3duXG5cdG9uRG9tYWluQ2hhbmdlZDogKGRvbWFpbjogRW1haWxEb21haW5EYXRhKSA9PiB1bmtub3duXG59XG5cbmV4cG9ydCBjbGFzcyBBZGRHcm91cERpYWxvZyBpbXBsZW1lbnRzIENvbXBvbmVudDxBZGRHcm91cERpYWxvZ0F0dHJzPiB7XG5cdHZpZXcodm5vZGU6IFZub2RlPEFkZEdyb3VwRGlhbG9nQXR0cnM+KTogQ2hpbGRyZW4ge1xuXHRcdGNvbnN0IHsgYXZhaWxhYmxlR3JvdXBUeXBlcywgZ3JvdXBUeXBlLCBhdmFpbGFibGVEb21haW5zLCBvbkVtYWlsQ2hhbmdlZCwgb25CdXN5U3RhdGVDaGFuZ2VkLCBzZWxlY3RlZERvbWFpbiwgb25Eb21haW5DaGFuZ2VkIH0gPSB2bm9kZS5hdHRyc1xuXHRcdHJldHVybiBbXG5cdFx0XHRhdmFpbGFibGVHcm91cFR5cGVzLmxlbmd0aCA+IDFcblx0XHRcdFx0PyBtKERyb3BEb3duU2VsZWN0b3IsIHtcblx0XHRcdFx0XHRcdGxhYmVsOiBcImdyb3VwVHlwZV9sYWJlbFwiLFxuXHRcdFx0XHRcdFx0aXRlbXM6IGF2YWlsYWJsZUdyb3VwVHlwZXMubWFwKCh0KSA9PiB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0XHRcdFx0bmFtZTogZ2V0R3JvdXBUeXBlRGlzcGxheU5hbWUodCksXG5cdFx0XHRcdFx0XHRcdFx0dmFsdWU6IHQsXG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0pLFxuXHRcdFx0XHRcdFx0c2VsZWN0ZWRWYWx1ZTogZ3JvdXBUeXBlLFxuXHRcdFx0XHRcdFx0c2VsZWN0aW9uQ2hhbmdlZEhhbmRsZXI6IHZub2RlLmF0dHJzLm9uR3JvdXBUeXBlQ2hhbmdlZCxcblx0XHRcdFx0ICB9KVxuXHRcdFx0XHQ6IG51bGwsXG5cdFx0XHRtKFRleHRGaWVsZCwge1xuXHRcdFx0XHRsYWJlbDogXCJuYW1lX2xhYmVsXCIsXG5cdFx0XHRcdHZhbHVlOiB2bm9kZS5hdHRycy5uYW1lLFxuXHRcdFx0XHRvbmlucHV0OiB2bm9kZS5hdHRycy5vbkdyb3VwTmFtZUNoYW5nZWQsXG5cdFx0XHR9KSxcblx0XHRcdGdyb3VwVHlwZSA9PT0gR3JvdXBUeXBlLk1haWxcblx0XHRcdFx0PyBtKFwiXCIsIFtcblx0XHRcdFx0XHRcdG0oU2VsZWN0TWFpbEFkZHJlc3NGb3JtLCB7XG5cdFx0XHRcdFx0XHRcdHNlbGVjdGVkRG9tYWluLFxuXHRcdFx0XHRcdFx0XHRhdmFpbGFibGVEb21haW5zLFxuXHRcdFx0XHRcdFx0XHRvblZhbGlkYXRpb25SZXN1bHQ6IG9uRW1haWxDaGFuZ2VkLFxuXHRcdFx0XHRcdFx0XHRvbkJ1c3lTdGF0ZUNoYW5nZWQsXG5cdFx0XHRcdFx0XHRcdG9uRG9tYWluQ2hhbmdlZCxcblx0XHRcdFx0XHRcdH0pLFxuXHRcdFx0XHRcdFx0bShcIi5tdC1tXCIsIFwiXCIpLFxuXHRcdFx0XHRcdFx0bShNb3JlSW5mb0xpbmssIHsgbGluazogSW5mb0xpbmsuU2hhcmVkTWFpbGJveGVzLCBpc1NtYWxsOiB0cnVlIH0pLFxuXHRcdFx0XHQgIF0pXG5cdFx0XHRcdDogbShcIlwiKSxcblx0XHRdXG5cdH1cbn1cblxuZXhwb3J0IGNsYXNzIEFkZEdyb3VwRGlhbG9nVmlld01vZGVsIHtcblx0Z3JvdXBOYW1lOiBzdHJpbmdcblx0bWFpbEFkZHJlc3M6IHN0cmluZ1xuXHRncm91cFR5cGVzOiBBcnJheTxHcm91cFR5cGU+XG5cdGVycm9yTWVzc2FnZUlkOiBUcmFuc2xhdGlvbktleSB8IG51bGxcblx0YXZhaWxhYmxlRG9tYWluczogQXJyYXk8RW1haWxEb21haW5EYXRhPlxuXHRzZWxlY3RlZERvbWFpbjogRW1haWxEb21haW5EYXRhXG5cdGdyb3VwVHlwZTogR3JvdXBUeXBlXG5cdGlzVmVyaWZhY3Rpb25CdXN5OiBib29sZWFuXG5cdF9ncm91cE1hbmFnZW1lbnRGYWNhZGU6IEdyb3VwTWFuYWdlbWVudEZhY2FkZVxuXG5cdGNvbnN0cnVjdG9yKGF2YWlsYWJsZURvbWFpbnM6IEFycmF5PEVtYWlsRG9tYWluRGF0YT4sIGdyb3VwTWFuYWdlbWVudEZhY2FkZTogR3JvdXBNYW5hZ2VtZW50RmFjYWRlKSB7XG5cdFx0dGhpcy5hdmFpbGFibGVEb21haW5zID0gYXZhaWxhYmxlRG9tYWluc1xuXHRcdHRoaXMuX2dyb3VwTWFuYWdlbWVudEZhY2FkZSA9IGdyb3VwTWFuYWdlbWVudEZhY2FkZVxuXHRcdHRoaXMuZ3JvdXBUeXBlcyA9IHRoaXMuZ2V0QXZhaWxhYmxlR3JvdXBUeXBlcygpXG5cdFx0dGhpcy5ncm91cFR5cGUgPSBnZXRGaXJzdE9yVGhyb3codGhpcy5ncm91cFR5cGVzKVxuXHRcdHRoaXMuZ3JvdXBOYW1lID0gXCJcIlxuXHRcdHRoaXMubWFpbEFkZHJlc3MgPSBcIlwiXG5cdFx0dGhpcy5lcnJvck1lc3NhZ2VJZCA9IFwibWFpbEFkZHJlc3NOZXV0cmFsX21zZ1wiXG5cdFx0dGhpcy5pc1ZlcmlmYWN0aW9uQnVzeSA9IGZhbHNlXG5cblx0XHR0aGlzLnNlbGVjdGVkRG9tYWluID0gZ2V0Rmlyc3RPclRocm93KGF2YWlsYWJsZURvbWFpbnMpXG5cdH1cblxuXHRjcmVhdGVNYWlsR3JvdXAoKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0cmV0dXJuIHRoaXMuX2dyb3VwTWFuYWdlbWVudEZhY2FkZS5jcmVhdGVNYWlsR3JvdXAodGhpcy5ncm91cE5hbWUsIHRoaXMubWFpbEFkZHJlc3MpXG5cdH1cblxuXHR2YWxpZGF0ZUFkZEdyb3VwSW5wdXQoKTogVHJhbnNsYXRpb25LZXkgfCBudWxsIHtcblx0XHRpZiAodGhpcy5ncm91cFR5cGUgPT09IEdyb3VwVHlwZS5NYWlsKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5lcnJvck1lc3NhZ2VJZFxuXHRcdH0gZWxzZSBpZiAodGhpcy5ncm91cFR5cGUgPT09IEdyb3VwVHlwZS5UZW1wbGF0ZSB8fCAodGhpcy5ncm91cFR5cGUgPT09IEdyb3VwVHlwZS5NYWlsaW5nTGlzdCAmJiB0aGlzLmdyb3VwTmFtZS50cmltKCkgPT09IFwiXCIpKSB7XG5cdFx0XHRyZXR1cm4gXCJlbnRlck5hbWVfbXNnXCJcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmV0dXJuIG51bGxcblx0XHR9XG5cdH1cblxuXHRnZXRBdmFpbGFibGVHcm91cFR5cGVzKCk6IEdyb3VwVHlwZVtdIHtcblx0XHRpZiAobG9jYXRvci5sb2dpbnMuaXNFbmFibGVkKEZlYXR1cmVUeXBlLldoaXRlbGFiZWxDaGlsZCkpIHtcblx0XHRcdHJldHVybiBbXVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZXR1cm4gW0dyb3VwVHlwZS5NYWlsXVxuXHRcdH1cblx0fVxuXG5cdG9uRW1haWxDaGFuZ2VkKGVtYWlsOiBzdHJpbmcsIHZhbGlkYXRpb25SZXN1bHQ6IFZhbGlkYXRpb25SZXN1bHQpIHtcblx0XHR0aGlzLmVycm9yTWVzc2FnZUlkID0gdmFsaWRhdGlvblJlc3VsdC5lcnJvcklkXG5cblx0XHRpZiAodmFsaWRhdGlvblJlc3VsdC5pc1ZhbGlkKSB7XG5cdFx0XHR0aGlzLm1haWxBZGRyZXNzID0gZW1haWxcblx0XHR9XG5cdH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNob3coKTogdm9pZCB7XG5cdGdldEF2YWlsYWJsZURvbWFpbnMobG9jYXRvci5sb2dpbnMpLnRoZW4oKGF2YWlsYWJsZURvbWFpbnMpID0+IHtcblx0XHRjb25zdCB2aWV3TW9kZWwgPSBuZXcgQWRkR3JvdXBEaWFsb2dWaWV3TW9kZWwoYXZhaWxhYmxlRG9tYWlucywgbG9jYXRvci5ncm91cE1hbmFnZW1lbnRGYWNhZGUpXG5cdFx0aWYgKHZpZXdNb2RlbC5nZXRBdmFpbGFibGVHcm91cFR5cGVzKCkubGVuZ3RoID09PSAwKSByZXR1cm4gRGlhbG9nLm1lc3NhZ2UoXCJzZWxlY3Rpb25Ob3RBdmFpbGFibGVfbXNnXCIpXG5cblx0XHRsZXQgYWRkR3JvdXBPa0FjdGlvbiA9IGFzeW5jIChkaWFsb2c6IERpYWxvZykgPT4ge1xuXHRcdFx0aWYgKHZpZXdNb2RlbC5pc1ZlcmlmYWN0aW9uQnVzeSkgcmV0dXJuXG5cdFx0XHRjb25zdCBlcnJvcklkID0gdmlld01vZGVsLnZhbGlkYXRlQWRkR3JvdXBJbnB1dCgpXG5cblx0XHRcdGlmIChlcnJvcklkKSB7XG5cdFx0XHRcdERpYWxvZy5tZXNzYWdlKGVycm9ySWQpXG5cdFx0XHRcdHJldHVyblxuXHRcdFx0fVxuXG5cdFx0XHRjb25zdCB1c2VyQ29udHJvbGxlciA9IGxvY2F0b3IubG9naW5zLmdldFVzZXJDb250cm9sbGVyKClcblx0XHRcdGNvbnN0IHBsYW5UeXBlID0gYXdhaXQgdXNlckNvbnRyb2xsZXIuZ2V0UGxhblR5cGUoKVxuXHRcdFx0Y29uc3QgdXNlTGVnYWN5Qm9va2luZ0l0ZW0gPSBhd2FpdCB1c2VyQ29udHJvbGxlci51c2VMZWdhY3lCb29raW5nSXRlbSgpXG5cblx0XHRcdGlmICh2aWV3TW9kZWwuZ3JvdXBUeXBlID09PSBHcm91cFR5cGUuTWFpbCkge1xuXHRcdFx0XHRzaG93UHJvZ3Jlc3NEaWFsb2coXG5cdFx0XHRcdFx0XCJwbGVhc2VXYWl0X21zZ1wiLFxuXHRcdFx0XHRcdHNob3dCdXlEaWFsb2coe1xuXHRcdFx0XHRcdFx0ZmVhdHVyZVR5cGU6IHVzZUxlZ2FjeUJvb2tpbmdJdGVtID8gdG9GZWF0dXJlVHlwZShwbGFuVHlwZSkgOiBCb29raW5nSXRlbUZlYXR1cmVUeXBlLlNoYXJlZE1haWxHcm91cCxcblx0XHRcdFx0XHRcdGJvb2tpbmdUZXh0OiBcInNoYXJlZE1haWxib3hfbGFiZWxcIixcblx0XHRcdFx0XHRcdGNvdW50OiAxLFxuXHRcdFx0XHRcdFx0ZnJlZUFtb3VudDogMCxcblx0XHRcdFx0XHRcdHJlYWN0aXZhdGU6IGZhbHNlLFxuXHRcdFx0XHRcdH0pLnRoZW4oKGFjY2VwdGVkKSA9PiB7XG5cdFx0XHRcdFx0XHRpZiAoYWNjZXB0ZWQpIHtcblx0XHRcdFx0XHRcdFx0ZGlhbG9nLmNsb3NlKClcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHZpZXdNb2RlbC5jcmVhdGVNYWlsR3JvdXAoKVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0pLFxuXHRcdFx0XHQpXG5cdFx0XHR9IGVsc2UgaWYgKHZpZXdNb2RlbC5ncm91cFR5cGUgPT09IEdyb3VwVHlwZS5UZW1wbGF0ZSkge1xuXHRcdFx0XHRhZGRUZW1wbGF0ZUdyb3VwKHZpZXdNb2RlbC5ncm91cE5hbWUpLnRoZW4oKHN1Y2Nlc3MpID0+IHtcblx0XHRcdFx0XHRpZiAoc3VjY2Vzcykge1xuXHRcdFx0XHRcdFx0ZGlhbG9nLmNsb3NlKClcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pXG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0RGlhbG9nLnNob3dBY3Rpb25EaWFsb2coe1xuXHRcdFx0dGl0bGU6IHZpZXdNb2RlbC5ncm91cFR5cGUgPT0gR3JvdXBUeXBlLk1haWwgPyBcImNyZWF0ZVNoYXJlZE1haWxib3hfbGFiZWxcIiA6IFwiYWRkR3JvdXBfbGFiZWxcIixcblx0XHRcdGNoaWxkOiAoKSA9PlxuXHRcdFx0XHRtKEFkZEdyb3VwRGlhbG9nLCB7XG5cdFx0XHRcdFx0c2VsZWN0ZWREb21haW46IHZpZXdNb2RlbC5zZWxlY3RlZERvbWFpbixcblx0XHRcdFx0XHRncm91cFR5cGU6IHZpZXdNb2RlbC5ncm91cFR5cGUsXG5cdFx0XHRcdFx0YXZhaWxhYmxlRG9tYWluczogYXZhaWxhYmxlRG9tYWlucyxcblx0XHRcdFx0XHRhdmFpbGFibGVHcm91cFR5cGVzOiB2aWV3TW9kZWwuZ3JvdXBUeXBlcyxcblx0XHRcdFx0XHRuYW1lOiB2aWV3TW9kZWwuZ3JvdXBOYW1lLFxuXHRcdFx0XHRcdG9uR3JvdXBOYW1lQ2hhbmdlZDogKG5ld05hbWUpID0+ICh2aWV3TW9kZWwuZ3JvdXBOYW1lID0gbmV3TmFtZSksXG5cdFx0XHRcdFx0b25Hcm91cFR5cGVDaGFuZ2VkOiAobmV3VHlwZSkgPT4gKHZpZXdNb2RlbC5ncm91cFR5cGUgPSBuZXdUeXBlKSxcblx0XHRcdFx0XHRvbkVtYWlsQ2hhbmdlZDogKG1haWxBZGRyZXNzLCB2YWxpZGF0aW9uUmVzdWx0KSA9PiB2aWV3TW9kZWwub25FbWFpbENoYW5nZWQobWFpbEFkZHJlc3MsIHZhbGlkYXRpb25SZXN1bHQpLFxuXHRcdFx0XHRcdG9uQnVzeVN0YXRlQ2hhbmdlZDogKGlzQnVzeSkgPT4gKHZpZXdNb2RlbC5pc1ZlcmlmYWN0aW9uQnVzeSA9IGlzQnVzeSksXG5cdFx0XHRcdFx0b25Eb21haW5DaGFuZ2VkOiAoZG9tYWluKSA9PiAodmlld01vZGVsLnNlbGVjdGVkRG9tYWluID0gZG9tYWluKSxcblx0XHRcdFx0fSksXG5cdFx0XHRva0FjdGlvbjogYWRkR3JvdXBPa0FjdGlvbixcblx0XHR9KVxuXHR9KVxufVxuXG4vKipcbiAqIEByZXR1cm5zIHtQcm9taXNlPGJvb2xlYW4+fSB0cnVlIGlmIGdyb3VwIHdhcyBhZGRlZCwgZmFsc2Ugb3RoZXJ3aXNlXG4gKi9cbmZ1bmN0aW9uIGFkZFRlbXBsYXRlR3JvdXAobmFtZTogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG5cdHJldHVybiBzaG93UHJvZ3Jlc3NEaWFsb2coXG5cdFx0XCJwbGVhc2VXYWl0X21zZ1wiLFxuXHRcdGxvY2F0b3IuZ3JvdXBNYW5hZ2VtZW50RmFjYWRlXG5cdFx0XHQuY3JlYXRlVGVtcGxhdGVHcm91cChuYW1lKVxuXHRcdFx0LnRoZW4oKCkgPT4gdHJ1ZSlcblx0XHRcdC5jYXRjaChcblx0XHRcdFx0b2ZDbGFzcyhQcmVjb25kaXRpb25GYWlsZWRFcnJvciwgYXN5bmMgKGUpID0+IHtcblx0XHRcdFx0XHRpZiAoXG5cdFx0XHRcdFx0XHRlLmRhdGEgPT09IFRlbXBsYXRlR3JvdXBQcmVjb25kaXRpb25GYWlsZWRSZWFzb24uQlVTSU5FU1NfRkVBVFVSRV9SRVFVSVJFRCB8fFxuXHRcdFx0XHRcdFx0ZS5kYXRhID09PSBUZW1wbGF0ZUdyb3VwUHJlY29uZGl0aW9uRmFpbGVkUmVhc29uLlVOTElNSVRFRF9SRVFVSVJFRFxuXHRcdFx0XHRcdCkge1xuXHRcdFx0XHRcdFx0Y29uc3QgcGxhbnMgPSBhd2FpdCBnZXRBdmFpbGFibGVQbGFuc1dpdGhUZW1wbGF0ZXMoKVxuXHRcdFx0XHRcdFx0c2hvd1BsYW5VcGdyYWRlUmVxdWlyZWREaWFsb2cocGxhbnMpXG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdERpYWxvZy5tZXNzYWdlKGxhbmcubWFrZVRyYW5zbGF0aW9uKFwiY29uZmlybV9tc2dcIiwgZS5tZXNzYWdlKSlcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRyZXR1cm4gZmFsc2Vcblx0XHRcdFx0fSksXG5cdFx0XHQpLFxuXHQpXG59XG4iLCJpbXBvcnQge1xuXHRjcmVhdGVHcm91cEluZm8sXG5cdEN1c3RvbWVyVHlwZVJlZixcblx0R3JvdXAsXG5cdEdyb3VwSW5mbyxcblx0R3JvdXBJbmZvVHlwZVJlZixcblx0R3JvdXBNZW1iZXJUeXBlUmVmLFxuXHRHcm91cFR5cGVSZWYsXG5cdFVzZXJUeXBlUmVmLFxufSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2FwaS9lbnRpdGllcy9zeXMvVHlwZVJlZnMuanNcIlxuaW1wb3J0IHsgYXNzZXJ0Tm90TnVsbCwgZ2V0Rmlyc3RPclRocm93LCBMYXp5TG9hZGVkLCBuZXZlck51bGwsIHByb21pc2VNYXAgfSBmcm9tIFwiQHR1dGFvL3R1dGFub3RhLXV0aWxzXCJcbmltcG9ydCB7IEVudGl0eUNsaWVudCB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vYXBpL2NvbW1vbi9FbnRpdHlDbGllbnQuanNcIlxuaW1wb3J0IHsgR0VORVJBVEVEX01JTl9JRCwgaXNTYW1lSWQgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2FwaS9jb21tb24vdXRpbHMvRW50aXR5VXRpbHMuanNcIlxuaW1wb3J0IHsgQm9va2luZ0l0ZW1GZWF0dXJlVHlwZSwgR3JvdXBUeXBlLCBPcGVyYXRpb25UeXBlIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9hcGkvY29tbW9uL1R1dGFub3RhQ29uc3RhbnRzLmpzXCJcbmltcG9ydCB7IGxhbmcsIFRyYW5zbGF0aW9uS2V5IH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9taXNjL0xhbmd1YWdlVmlld01vZGVsLmpzXCJcbmltcG9ydCB7IHN0cmluZ1ZhbGlkYXRvciB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZ3VpL2Jhc2UvRGlhbG9nLmpzXCJcbmltcG9ydCB7IGxvY2F0b3IgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2FwaS9tYWluL0NvbW1vbkxvY2F0b3IuanNcIlxuaW1wb3J0IHsgQmFkUmVxdWVzdEVycm9yLCBOb3RBdXRob3JpemVkRXJyb3IsIFByZWNvbmRpdGlvbkZhaWxlZEVycm9yIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9hcGkvY29tbW9uL2Vycm9yL1Jlc3RFcnJvci5qc1wiXG5pbXBvcnQgeyBjb21wYXJlR3JvdXBJbmZvcywgZ2V0R3JvdXBJbmZvRGlzcGxheU5hbWUgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2FwaS9jb21tb24vdXRpbHMvR3JvdXBVdGlscy5qc1wiXG5pbXBvcnQgeyBNYWlsYm94UHJvcGVydGllc1R5cGVSZWYgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2FwaS9lbnRpdGllcy90dXRhbm90YS9UeXBlUmVmcy5qc1wiXG5pbXBvcnQgeyBVc2VyRXJyb3IgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2FwaS9tYWluL1VzZXJFcnJvci5qc1wiXG5pbXBvcnQgeyBCb29raW5nUGFyYW1zIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9zdWJzY3JpcHRpb24vQnV5RGlhbG9nLmpzXCJcbmltcG9ydCB7IHRvRmVhdHVyZVR5cGUgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL3N1YnNjcmlwdGlvbi9TdWJzY3JpcHRpb25VdGlscy5qc1wiXG5pbXBvcnQgeyBFbnRpdHlVcGRhdGVEYXRhLCBpc1VwZGF0ZUZvclR5cGVSZWYgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2FwaS9jb21tb24vdXRpbHMvRW50aXR5VXBkYXRlVXRpbHMuanNcIlxuXG5leHBvcnQgY2xhc3MgR3JvdXBEZXRhaWxzTW9kZWwge1xuXHRncm91cEluZm86IEdyb3VwSW5mb1xuXHRwcml2YXRlIHJlYWRvbmx5IGdyb3VwOiBMYXp5TG9hZGVkPEdyb3VwPlxuXHRwcml2YXRlIHVzZWRTdG9yYWdlSW5CeXRlcyE6IG51bWJlclxuXHRwcml2YXRlIHJlYWRvbmx5IG1lbWJlcnM6IExhenlMb2FkZWQ8QXJyYXk8R3JvdXBJbmZvPj5cblxuXHRwcml2YXRlIHNlbmRlck5hbWUhOiBMYXp5TG9hZGVkPHN0cmluZz5cblxuXHRjb25zdHJ1Y3Rvcihncm91cEluZm86IEdyb3VwSW5mbywgcHJpdmF0ZSByZWFkb25seSBlbnRpdHlDbGllbnQ6IEVudGl0eUNsaWVudCwgcHJpdmF0ZSByZWFkb25seSB1cGRhdGVWaWV3Q2FsbGJhY2s6ICgpID0+IHZvaWQpIHtcblx0XHR0aGlzLmVudGl0eUNsaWVudCA9IGVudGl0eUNsaWVudFxuXHRcdHRoaXMuZ3JvdXBJbmZvID0gZ3JvdXBJbmZvXG5cdFx0dGhpcy5ncm91cCA9IG5ldyBMYXp5TG9hZGVkKCgpID0+IHRoaXMuZW50aXR5Q2xpZW50LmxvYWQoR3JvdXBUeXBlUmVmLCB0aGlzLmdyb3VwSW5mby5ncm91cCkpXG5cblx0XHR0aGlzLmdyb3VwLmdldEFzeW5jKCkudGhlbigoKSA9PiB0aGlzLnVwZGF0ZVZpZXdDYWxsYmFjaygpKVxuXG5cdFx0dGhpcy5tZW1iZXJzID0gbmV3IExhenlMb2FkZWQoYXN5bmMgKCkgPT4ge1xuXHRcdFx0Y29uc3QgZ3JvdXAgPSBhd2FpdCB0aGlzLmdyb3VwLmdldEFzeW5jKClcblx0XHRcdC8vIGxvYWQgb25seSB1cCB0byAyMDAgbWVtYmVycyB0byBhdm9pZCB0b28gbG9uZyBsb2FkaW5nLCBsaWtlIGZvciBhY2NvdW50IGdyb3Vwc1xuXHRcdFx0Y29uc3QgZ3JvdXBNZW1iZXJzID0gYXdhaXQgdGhpcy5lbnRpdHlDbGllbnQubG9hZFJhbmdlKEdyb3VwTWVtYmVyVHlwZVJlZiwgZ3JvdXAubWVtYmVycywgR0VORVJBVEVEX01JTl9JRCwgMjAwLCBmYWxzZSlcblx0XHRcdHJldHVybiBwcm9taXNlTWFwKGdyb3VwTWVtYmVycywgKG1lbWJlcikgPT4gdGhpcy5lbnRpdHlDbGllbnQubG9hZChHcm91cEluZm9UeXBlUmVmLCBtZW1iZXIudXNlckdyb3VwSW5mbykpXG5cdFx0fSlcblxuXHRcdC8vIG5vaW5zcGVjdGlvbiBKU0lnbm9yZWRQcm9taXNlRnJvbUNhbGxcblx0XHR0aGlzLnVwZGF0ZU1lbWJlcnMoKVxuXG5cdFx0aWYgKHRoaXMuZ3JvdXBJbmZvLmdyb3VwVHlwZSA9PT0gR3JvdXBUeXBlLk1haWwpIHtcblx0XHRcdHRoaXMuc2VuZGVyTmFtZSA9IG5ldyBMYXp5TG9hZGVkPHN0cmluZz4oKCkgPT4gdGhpcy5sb2FkU2VuZGVyTmFtZSgpKVxuXHRcdFx0Ly8gbm9pbnNwZWN0aW9uIEpTSWdub3JlZFByb21pc2VGcm9tQ2FsbFxuXHRcdFx0dGhpcy51cGRhdGVTZW5kZXJOYW1lKClcblx0XHR9XG5cblx0XHQvLyBub2luc3BlY3Rpb24gSlNJZ25vcmVkUHJvbWlzZUZyb21DYWxsXG5cdFx0dGhpcy51cGRhdGVVc2VkU3RvcmFnZSgpXG5cdH1cblxuXHRpc01haWxHcm91cCgpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gdGhpcy5ncm91cEluZm8uZ3JvdXBUeXBlID09PSBHcm91cFR5cGUuTWFpbFxuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyBsb2FkU2VuZGVyTmFtZSgpOiBQcm9taXNlPHN0cmluZz4ge1xuXHRcdGNvbnN0IG5hbWVzID0gYXdhaXQgbG9jYXRvci5tYWlsQWRkcmVzc0ZhY2FkZS5nZXRTZW5kZXJOYW1lcyh0aGlzLmdyb3VwSW5mby5ncm91cClcblx0XHRyZXR1cm4gZ2V0Rmlyc3RPclRocm93KEFycmF5LmZyb20obmFtZXMudmFsdWVzKCkpKVxuXHR9XG5cblx0aXNHcm91cEFjdGl2ZSgpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gdGhpcy5ncm91cEluZm8uZGVsZXRlZCA9PSBudWxsXG5cdH1cblxuXHRnZXRHcm91cFR5cGUoKTogc3RyaW5nIHwgbnVsbCB7XG5cdFx0cmV0dXJuIHRoaXMuZ3JvdXAuaXNMb2FkZWQoKSA/IHRoaXMuZ3JvdXAuZ2V0TG9hZGVkKCkudHlwZSA6IG51bGxcblx0fVxuXG5cdGdldEdyb3VwTmFtZSgpOiBzdHJpbmcge1xuXHRcdHJldHVybiB0aGlzLmdyb3VwSW5mby5uYW1lXG5cdH1cblxuXHRnZXRVc2VkU3RvcmFnZSgpOiBudW1iZXIgfCBudWxsIHtcblx0XHRyZXR1cm4gdGhpcy51c2VkU3RvcmFnZUluQnl0ZXNcblx0fVxuXG5cdGdldENyZWF0aW9uRGF0ZSgpOiBEYXRlIHtcblx0XHRyZXR1cm4gdGhpcy5ncm91cEluZm8uY3JlYXRlZFxuXHR9XG5cblx0Z2V0TWVtYmVyc0luZm8oKTogQXJyYXk8R3JvdXBJbmZvPiB7XG5cdFx0cmV0dXJuIHRoaXMubWVtYmVycy5pc0xvYWRlZCgpID8gdGhpcy5tZW1iZXJzLmdldExvYWRlZCgpIDogW11cblx0fVxuXG5cdGdldEdyb3VwTWFpbEFkZHJlc3MoKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gdGhpcy5ncm91cEluZm8ubWFpbEFkZHJlc3MgPz8gXCJcIlxuXHR9XG5cblx0Z2V0R3JvdXBTZW5kZXJOYW1lKCk6IHN0cmluZyB7XG5cdFx0cmV0dXJuIHRoaXMuc2VuZGVyTmFtZS5pc0xvYWRlZCgpID8gdGhpcy5zZW5kZXJOYW1lLmdldExvYWRlZCgpIDogbGFuZy5nZXQoXCJsb2FkaW5nX21zZ1wiKVxuXHR9XG5cblx0LyoqXG5cdCAqIHJlbW92ZSB0aGUgZ3JvdXAgb2YgdGhlIGdpdmVuIGdyb3VwSW5mbyBmcm9tIHRoaXMgZ3JvdXBcblx0ICovXG5cdGFzeW5jIHJlbW92ZUdyb3VwTWVtYmVyKHVzZXJHcm91cEluZm86IEdyb3VwSW5mbyk6IFByb21pc2U8dm9pZD4ge1xuXHRcdHRyeSB7XG5cdFx0XHRjb25zdCB1c2VyR3JvdXAgPSBhd2FpdCB0aGlzLmVudGl0eUNsaWVudC5sb2FkKEdyb3VwVHlwZVJlZiwgdXNlckdyb3VwSW5mby5ncm91cClcblx0XHRcdHJldHVybiBsb2NhdG9yLmdyb3VwTWFuYWdlbWVudEZhY2FkZS5yZW1vdmVVc2VyRnJvbUdyb3VwKGFzc2VydE5vdE51bGwodXNlckdyb3VwLnVzZXIpLCB0aGlzLmdyb3VwSW5mby5ncm91cClcblx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRpZiAoIShlIGluc3RhbmNlb2YgTm90QXV0aG9yaXplZEVycm9yKSkgdGhyb3cgZVxuXHRcdFx0dGhyb3cgbmV3IFVzZXJFcnJvcihcInJlbW92ZVVzZXJGcm9tR3JvdXBOb3RBZG1pbmlzdHJhdGVkRXJyb3JfbXNnXCIpXG5cdFx0fVxuXHR9XG5cblx0YXN5bmMgZXhlY3V0ZUdyb3VwQnV5KGRlYWN0aXZhdGU6IGJvb2xlYW4pOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRjb25zdCBncm91cCA9IGF3YWl0IHRoaXMuZ3JvdXAuZ2V0QXN5bmMoKVxuXHRcdHRyeSB7XG5cdFx0XHRyZXR1cm4gYXdhaXQgbG9jYXRvci5ncm91cE1hbmFnZW1lbnRGYWNhZGUuZGVhY3RpdmF0ZUdyb3VwKGdyb3VwLCAhZGVhY3RpdmF0ZSlcblx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRpZiAoIShlIGluc3RhbmNlb2YgUHJlY29uZGl0aW9uRmFpbGVkRXJyb3IpKSB0aHJvdyBlXG5cdFx0XHRpZiAoIWRlYWN0aXZhdGUpIHtcblx0XHRcdFx0dGhyb3cgbmV3IFVzZXJFcnJvcihcImVtYWlsQWRkcmVzc0luVXNlX21zZ1wiKVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGhyb3cgbmV3IFVzZXJFcnJvcihcInN0aWxsUmVmZXJlbmNlZEZyb21Db250YWN0Rm9ybV9tc2dcIilcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRjaGFuZ2VHcm91cE5hbWUobmV3TmFtZTogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0Y29uc3QgbmV3R3JvdXBJbmZvOiBHcm91cEluZm8gPSBjcmVhdGVHcm91cEluZm8odGhpcy5ncm91cEluZm8pXG5cdFx0bmV3R3JvdXBJbmZvLm5hbWUgPSBuZXdOYW1lXG5cdFx0cmV0dXJuIHRoaXMuZW50aXR5Q2xpZW50LnVwZGF0ZShuZXdHcm91cEluZm8pXG5cdH1cblxuXHRhc3luYyBjaGFuZ2VHcm91cFNlbmRlck5hbWUobmV3TmFtZTogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0aWYgKHRoaXMuc2VuZGVyTmFtZS5pc0xvYWRlZCgpICYmIHRoaXMuc2VuZGVyTmFtZS5nZXRMb2FkZWQoKSA9PT0gbmV3TmFtZSkgcmV0dXJuXG5cdFx0Y29uc3QgbWFpbEdyb3VwSWQgPSBhd2FpdCB0aGlzLmdyb3VwSW5mby5ncm91cFxuXHRcdGF3YWl0IGxvY2F0b3IubWFpbEFkZHJlc3NGYWNhZGUuc2V0U2VuZGVyTmFtZShtYWlsR3JvdXBJZCwgdGhpcy5nZXRHcm91cE1haWxBZGRyZXNzKCksIG5ld05hbWUpXG5cblx0XHQvLyB3ZSBtYXkgbm90IGJlIGEgbWVtYmVyIG9mIHRoZSBncm91cCBhbmQgdGhlcmVmb3JlIHdvbid0IG5lY2Vzc2FyaWx5IHJlY2VpdmUgdXBkYXRlc1xuXHRcdC8vIGZvciB1cGRhdGVkIG1haWxib3ggcHJvcGVydGllcy5cblx0XHR0aGlzLnNlbmRlck5hbWUucmVzZXQoKVxuXHRcdC8vIG5vaW5zcGVjdGlvbiBFUzZNaXNzaW5nQXdhaXRcblx0XHR0aGlzLnNlbmRlck5hbWUuZ2V0QXN5bmMoKVxuXHRcdHRoaXMudXBkYXRlVmlld0NhbGxiYWNrKClcblx0fVxuXG5cdHZhbGlkYXRlR3JvdXBOYW1lKG5ld05hbWU6IHN0cmluZyk6IFJldHVyblR5cGU8c3RyaW5nVmFsaWRhdG9yPiB7XG5cdFx0aWYgKHRoaXMuZ3JvdXAuaXNMb2FkZWQoKSAmJiB0aGlzLmdyb3VwLmdldExvYWRlZCgpLnR5cGUgPT09IEdyb3VwVHlwZS5NYWlsaW5nTGlzdCAmJiBuZXdOYW1lLnRyaW0oKSA9PT0gXCJcIikge1xuXHRcdFx0cmV0dXJuIFwiZW50ZXJOYW1lX21zZ1wiXG5cdFx0fSBlbHNlIHtcblx0XHRcdHJldHVybiBudWxsXG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIHZhbGlkYXRlIGlmIHRoZSBnaXZlbiBkZWFjdGl2YXRpb24vYWN0aXZhdGlvbiBpcyB2YWxpZCBmb3IgdGhpcyBncm91cCBhbmQgcmV0dXJuIGluZm9ybWF0aW9uIGFib3V0IHRoZSBpdGVtIHRvIGJvb2ssIGlmIGFueVxuXHQgKiBAcGFyYW0gZGVhY3RpdmF0ZSB0cnVlIGlmIHRoZSBncm91cCBzaG91bGQgYmUgZGVhY3RpdmF0ZWRcblx0ICogQHJldHVybiB0aGUgcmVsZXZhbnQgQm9va2luZ1BhcmFtcyBpZiB0aGUgYWN0aXZhdGlvbi9kZWFjdGl2YXRpYW4gbWF5IGdvIGFoZWFkLCBudWxsIG90aGVyd2lzZSAobm8gYWN0aW9uIG5lY2Vzc2FyeSlcblx0ICovXG5cdGFzeW5jIHZhbGlkYXRlR3JvdXBBY3RpdmF0aW9uU3RhdHVzKGRlYWN0aXZhdGU6IGJvb2xlYW4pOiBQcm9taXNlPEJvb2tpbmdQYXJhbXMgfCBudWxsPiB7XG5cdFx0aWYgKGRlYWN0aXZhdGUgIT09IHRoaXMuaXNHcm91cEFjdGl2ZSgpKSB7XG5cdFx0XHRjb25zb2xlLmxvZyhcInRyaWVkIHRvIHNldCBhY3RpdmF0aW9uIHN0YXR1cyB0byBjdXJyZW50IHN0YXR1cy5cIilcblx0XHRcdHJldHVybiBudWxsXG5cdFx0fVxuXHRcdGNvbnN0IG1lbWJlcnMgPSBhd2FpdCB0aGlzLm1lbWJlcnMuZ2V0QXN5bmMoKVxuXHRcdGlmIChkZWFjdGl2YXRlICYmIG1lbWJlcnMubGVuZ3RoID4gMCkge1xuXHRcdFx0dGhyb3cgbmV3IFVzZXJFcnJvcihcImdyb3VwTm90RW1wdHlfbXNnXCIpXG5cdFx0fSBlbHNlIHtcblx0XHRcdGNvbnN0IHVzZXJDb250cm9sbGVyID0gbG9jYXRvci5sb2dpbnMuZ2V0VXNlckNvbnRyb2xsZXIoKVxuXHRcdFx0Y29uc3QgcGxhblR5cGUgPSBhd2FpdCB1c2VyQ29udHJvbGxlci5nZXRQbGFuVHlwZSgpXG5cdFx0XHRjb25zdCB1c2VMZWdhY3lCb29raW5nSXRlbSA9IGF3YWl0IHVzZXJDb250cm9sbGVyLnVzZUxlZ2FjeUJvb2tpbmdJdGVtKClcblxuXHRcdFx0Y29uc3QgYm9va2luZ0l0ZW1UeXBlID0gdXNlTGVnYWN5Qm9va2luZ0l0ZW0gPyB0b0ZlYXR1cmVUeXBlKHBsYW5UeXBlKSA6IEJvb2tpbmdJdGVtRmVhdHVyZVR5cGUuU2hhcmVkTWFpbEdyb3VwXG5cdFx0XHRjb25zdCBib29raW5nVGV4dDogVHJhbnNsYXRpb25LZXkgPSBkZWFjdGl2YXRlID8gXCJjYW5jZWxTaGFyZWRNYWlsYm94X2xhYmVsXCIgOiBcInNoYXJlZE1haWxib3hfbGFiZWxcIlxuXG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRmZWF0dXJlVHlwZTogYm9va2luZ0l0ZW1UeXBlLFxuXHRcdFx0XHRib29raW5nVGV4dDogYm9va2luZ1RleHQsXG5cdFx0XHRcdGNvdW50OiBkZWFjdGl2YXRlID8gLTEgOiAxLFxuXHRcdFx0XHRmcmVlQW1vdW50OiAwLFxuXHRcdFx0XHRyZWFjdGl2YXRlOiAhZGVhY3RpdmF0ZSxcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRhc3luYyBnZXRQb3NzaWJsZU1lbWJlcnMoKTogUHJvbWlzZTxBcnJheTx7IG5hbWU6IHN0cmluZzsgdmFsdWU6IElkIH0+PiB7XG5cdFx0Y29uc3QgY3VzdG9tZXIgPSBhd2FpdCB0aGlzLmVudGl0eUNsaWVudC5sb2FkKEN1c3RvbWVyVHlwZVJlZiwgbmV2ZXJOdWxsKGxvY2F0b3IubG9naW5zLmdldFVzZXJDb250cm9sbGVyKCkudXNlci5jdXN0b21lcikpXG5cdFx0Y29uc3QgdXNlckdyb3VwSW5mb3MgPSBhd2FpdCB0aGlzLmVudGl0eUNsaWVudC5sb2FkQWxsKEdyb3VwSW5mb1R5cGVSZWYsIGN1c3RvbWVyLnVzZXJHcm91cHMpXG5cdFx0Ly8gcmVtb3ZlIGFsbCB1c2VycyB0aGF0IGFyZSBhbHJlYWR5IG1lbWJlclxuXHRcdGxldCBnbG9iYWxBZG1pbiA9IGxvY2F0b3IubG9naW5zLmlzR2xvYmFsQWRtaW5Vc2VyTG9nZ2VkSW4oKVxuXHRcdGxldCBhdmFpbGFibGVVc2VyR3JvdXBJbmZvcyA9IHVzZXJHcm91cEluZm9zLmZpbHRlcigodXNlckdyb3VwSW5mbykgPT4ge1xuXHRcdFx0aWYgKFxuXHRcdFx0XHQhZ2xvYmFsQWRtaW4gLy8gaWYgd2UgYXJlIG5vdCBhICBnbG9iYWwgYWRtaW4gd2UgbWF5IG5vdCBhZGQgYW55b25lLCBkb24ndCBmaWx0ZXJcblx0XHRcdCkge1xuXHRcdFx0XHRyZXR1cm4gZmFsc2Vcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vIG9ubHkgc2hvdyB1c2VycyB0aGF0IGFyZSBub3QgZGVsZXRlZCBhbmQgbm90IGFscmVhZHkgaW4gdGhlIGdyb3VwLlxuXHRcdFx0XHRyZXR1cm4gIXVzZXJHcm91cEluZm8uZGVsZXRlZCAmJiAhdGhpcy5tZW1iZXJzLmdldExvYWRlZCgpLnNvbWUoKG0pID0+IGlzU2FtZUlkKG0uX2lkLCB1c2VyR3JvdXBJbmZvLl9pZCkpXG5cdFx0XHR9XG5cdFx0fSlcblxuXHRcdGF2YWlsYWJsZVVzZXJHcm91cEluZm9zLnNvcnQoY29tcGFyZUdyb3VwSW5mb3MpXG5cdFx0cmV0dXJuIGF2YWlsYWJsZVVzZXJHcm91cEluZm9zLm1hcCgoZykgPT4gKHsgbmFtZTogZ2V0R3JvdXBJbmZvRGlzcGxheU5hbWUoZyksIHZhbHVlOiBnLmdyb3VwIH0pKVxuXHR9XG5cblx0YXN5bmMgYWRkVXNlclRvR3JvdXAoZ3JvdXA6IElkKTogUHJvbWlzZTxhbnk+IHtcblx0XHRjb25zdCB1c2VyR3JvdXAgPSBhd2FpdCB0aGlzLmVudGl0eUNsaWVudC5sb2FkKEdyb3VwVHlwZVJlZiwgZ3JvdXApXG5cdFx0Y29uc3QgdXNlciA9IGF3YWl0IHRoaXMuZW50aXR5Q2xpZW50LmxvYWQoVXNlclR5cGVSZWYsIG5ldmVyTnVsbCh1c2VyR3JvdXAudXNlcikpXG5cdFx0cmV0dXJuIGxvY2F0b3IuZ3JvdXBNYW5hZ2VtZW50RmFjYWRlLmFkZFVzZXJUb0dyb3VwKHVzZXIsIHRoaXMuZ3JvdXBJbmZvLmdyb3VwKVxuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyB1cGRhdGVNZW1iZXJzKCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdHRoaXMubWVtYmVycy5yZXNldCgpXG5cdFx0YXdhaXQgdGhpcy5tZW1iZXJzLmdldEFzeW5jKClcblx0XHR0aGlzLnVwZGF0ZVZpZXdDYWxsYmFjaygpXG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIHVwZGF0ZVNlbmRlck5hbWUoKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0dGhpcy5zZW5kZXJOYW1lLnJlc2V0KClcblx0XHRhd2FpdCB0aGlzLnNlbmRlck5hbWUuZ2V0QXN5bmMoKVxuXHRcdHRoaXMudXBkYXRlVmlld0NhbGxiYWNrKClcblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgdXBkYXRlVXNlZFN0b3JhZ2UoKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0aWYgKHRoaXMuaXNNYWlsR3JvdXAoKSkge1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0dGhpcy51c2VkU3RvcmFnZUluQnl0ZXMgPSBhd2FpdCBsb2NhdG9yLmdyb3VwTWFuYWdlbWVudEZhY2FkZS5yZWFkVXNlZFNoYXJlZE1haWxHcm91cFN0b3JhZ2UoYXdhaXQgdGhpcy5ncm91cC5nZXRBc3luYygpKVxuXHRcdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0XHRpZiAoIShlIGluc3RhbmNlb2YgQmFkUmVxdWVzdEVycm9yKSkgdGhyb3cgZVxuXHRcdFx0XHQvLyBtYXkgaGFwcGVuIGlmIHRoZSB1c2VyIGdldHMgdGhlIGFkbWluIGZsYWcgcmVtb3ZlZFxuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLnVzZWRTdG9yYWdlSW5CeXRlcyA9IDBcblx0XHR9XG5cblx0XHR0aGlzLnVwZGF0ZVZpZXdDYWxsYmFjaygpXG5cdH1cblxuXHRhc3luYyBlbnRpdHlFdmVudHNSZWNlaXZlZCh1cGRhdGVzOiBSZWFkb25seUFycmF5PEVudGl0eVVwZGF0ZURhdGE+KTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0YXdhaXQgcHJvbWlzZU1hcCh1cGRhdGVzLCBhc3luYyAodXBkYXRlKSA9PiB7XG5cdFx0XHRjb25zdCB7IGluc3RhbmNlTGlzdElkLCBpbnN0YW5jZUlkLCBvcGVyYXRpb24gfSA9IHVwZGF0ZVxuXG5cdFx0XHRpZiAoaXNVcGRhdGVGb3JUeXBlUmVmKEdyb3VwSW5mb1R5cGVSZWYsIHVwZGF0ZSkgJiYgb3BlcmF0aW9uID09PSBPcGVyYXRpb25UeXBlLlVQREFURSkge1xuXHRcdFx0XHRjb25zdCB1cGRhdGVkVXNlckdyb3VwSW5mbyA9IGF3YWl0IHRoaXMuZW50aXR5Q2xpZW50LmxvYWQoR3JvdXBJbmZvVHlwZVJlZiwgdGhpcy5ncm91cEluZm8uX2lkKVxuXHRcdFx0XHRpZiAoaXNTYW1lSWQodGhpcy5ncm91cEluZm8uX2lkLCBbYXNzZXJ0Tm90TnVsbChpbnN0YW5jZUxpc3RJZCwgXCJnb3QgZ3JvdXBJbmZvIHVwZGF0ZSB3aXRob3V0IGluc3RhbmNlTGlzdElkXCIpLCBpbnN0YW5jZUlkXSkpIHtcblx0XHRcdFx0XHR0aGlzLmdyb3VwSW5mbyA9IHVwZGF0ZWRVc2VyR3JvdXBJbmZvXG5cdFx0XHRcdFx0cmV0dXJuIHRoaXMudXBkYXRlVXNlZFN0b3JhZ2UoKVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdC8vIGEgbWVtYmVyIG5hbWUgbWF5IGhhdmUgY2hhbmdlZFxuXHRcdFx0XHRcdHJldHVybiB0aGlzLnVwZGF0ZU1lbWJlcnMoKVxuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2UgaWYgKFxuXHRcdFx0XHRpc1VwZGF0ZUZvclR5cGVSZWYoR3JvdXBNZW1iZXJUeXBlUmVmLCB1cGRhdGUpICYmXG5cdFx0XHRcdHRoaXMuZ3JvdXAuaXNMb2FkZWQoKSAmJlxuXHRcdFx0XHR0aGlzLmdyb3VwLmdldExvYWRlZCgpLm1lbWJlcnMgPT09IGFzc2VydE5vdE51bGwoaW5zdGFuY2VMaXN0SWQsIFwiZ290IGEgZ3JvdXBNZW1iZXIgdXBkYXRlIHdpdGhvdXQgaW5zdGFuY2VMaXN0SWRcIilcblx0XHRcdCkge1xuXHRcdFx0XHQvLyB0aGUgbWVtYmVycyBoYXZlIGNoYW5nZWRcblx0XHRcdFx0cmV0dXJuIHRoaXMudXBkYXRlTWVtYmVycygpXG5cdFx0XHR9IGVsc2UgaWYgKHRoaXMuaXNNYWlsR3JvdXAoKSAmJiBpc1VwZGF0ZUZvclR5cGVSZWYoTWFpbGJveFByb3BlcnRpZXNUeXBlUmVmLCB1cGRhdGUpICYmIHVwZGF0ZS5vcGVyYXRpb24gPT09IE9wZXJhdGlvblR5cGUuVVBEQVRFKSB7XG5cdFx0XHRcdC8vIHRoZSBzZW5kZXIgbmFtZSBiZWxvbmdpbmcgdG8gdGhpcyBncm91cCBtYXkgaGF2ZSBjaGFuZ2VkLlxuXHRcdFx0XHQvLyBub2luc3BlY3Rpb24gRVM2TWlzc2luZ0F3YWl0XG5cdFx0XHRcdHRoaXMudXBkYXRlU2VuZGVyTmFtZSgpXG5cdFx0XHR9XG5cdFx0fSlcblx0fVxufVxuIiwiaW1wb3J0IG0sIHsgQ2hpbGRyZW4gfSBmcm9tIFwibWl0aHJpbFwiXG5pbXBvcnQgdHlwZSB7IEdyb3VwSW5mbyB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vYXBpL2VudGl0aWVzL3N5cy9UeXBlUmVmcy5qc1wiXG5pbXBvcnQgeyBHcm91cEluZm9UeXBlUmVmLCBHcm91cE1lbWJlclR5cGVSZWYgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2FwaS9lbnRpdGllcy9zeXMvVHlwZVJlZnMuanNcIlxuaW1wb3J0IHsgTGF6eUxvYWRlZCwgbWVtb2l6ZWQsIG5vT3AgfSBmcm9tIFwiQHR1dGFvL3R1dGFub3RhLXV0aWxzXCJcbmltcG9ydCB7IEdyb3VwRGV0YWlsc1ZpZXcgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL3NldHRpbmdzL2dyb3Vwcy9Hcm91cERldGFpbHNWaWV3LmpzXCJcbmltcG9ydCAqIGFzIEFkZEdyb3VwRGlhbG9nIGZyb20gXCIuL0FkZEdyb3VwRGlhbG9nLmpzXCJcbmltcG9ydCB7IEljb24gfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2d1aS9iYXNlL0ljb24uanNcIlxuaW1wb3J0IHsgSWNvbnMgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2d1aS9iYXNlL2ljb25zL0ljb25zLmpzXCJcbmltcG9ydCB7IEJvb3RJY29ucyB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZ3VpL2Jhc2UvaWNvbnMvQm9vdEljb25zLmpzXCJcbmltcG9ydCB7IGxvY2F0b3IgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2FwaS9tYWluL0NvbW1vbkxvY2F0b3IuanNcIlxuaW1wb3J0IHsgTGlzdENvbHVtbldyYXBwZXIgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2d1aS9MaXN0Q29sdW1uV3JhcHBlci5qc1wiXG5pbXBvcnQgeyBhc3NlcnRNYWluT3JOb2RlIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9hcGkvY29tbW9uL0Vudi5qc1wiXG5pbXBvcnQgeyBHcm91cERldGFpbHNNb2RlbCB9IGZyb20gXCIuL0dyb3VwRGV0YWlsc01vZGVsLmpzXCJcbmltcG9ydCB7IFNlbGVjdGFibGVSb3dDb250YWluZXIsIFNlbGVjdGFibGVSb3dTZWxlY3RlZFNldHRlciwgc2V0VmlzaWJpbGl0eSB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZ3VpL1NlbGVjdGFibGVSb3dDb250YWluZXIuanNcIlxuaW1wb3J0IFN0cmVhbSBmcm9tIFwibWl0aHJpbC9zdHJlYW1cIlxuaW1wb3J0IHsgTGlzdCwgTGlzdEF0dHJzLCBNdWx0aXNlbGVjdE1vZGUsIFJlbmRlckNvbmZpZyB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZ3VpL2Jhc2UvTGlzdC5qc1wiXG5pbXBvcnQgeyBzaXplIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9ndWkvc2l6ZS5qc1wiXG5pbXBvcnQgeyBMaXN0RWxlbWVudExpc3RNb2RlbCB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vbWlzYy9MaXN0RWxlbWVudExpc3RNb2RlbC5qc1wiXG5pbXBvcnQgeyBjb21wYXJlR3JvdXBJbmZvcyB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vYXBpL2NvbW1vbi91dGlscy9Hcm91cFV0aWxzLmpzXCJcbmltcG9ydCB7IE5vdEZvdW5kRXJyb3IgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2FwaS9jb21tb24vZXJyb3IvUmVzdEVycm9yLmpzXCJcbmltcG9ydCB7IGxpc3RTZWxlY3Rpb25LZXlib2FyZFNob3J0Y3V0cywgb25seVNpbmdsZVNlbGVjdGlvbiwgVmlydHVhbFJvdyB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZ3VpL2Jhc2UvTGlzdFV0aWxzLmpzXCJcbmltcG9ydCB7IGtleU1hbmFnZXIgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL21pc2MvS2V5TWFuYWdlci5qc1wiXG5pbXBvcnQgeyBCYXNlU2VhcmNoQmFyLCBCYXNlU2VhcmNoQmFyQXR0cnMgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2d1aS9iYXNlL0Jhc2VTZWFyY2hCYXIuanNcIlxuaW1wb3J0IHsgbGFuZyB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vbWlzYy9MYW5ndWFnZVZpZXdNb2RlbC5qc1wiXG5pbXBvcnQgQ29sdW1uRW1wdHlNZXNzYWdlQm94IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZ3VpL2Jhc2UvQ29sdW1uRW1wdHlNZXNzYWdlQm94LmpzXCJcbmltcG9ydCB7IHRoZW1lIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9ndWkvdGhlbWUuanNcIlxuaW1wb3J0IHsgSWNvbkJ1dHRvbiB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vZ3VpL2Jhc2UvSWNvbkJ1dHRvbi5qc1wiXG5pbXBvcnQgeyBOZXdQYWlkUGxhbnMgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2FwaS9jb21tb24vVHV0YW5vdGFDb25zdGFudHMuanNcIlxuaW1wb3J0IHsgRW50aXR5VXBkYXRlRGF0YSwgaXNVcGRhdGVGb3JUeXBlUmVmIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9hcGkvY29tbW9uL3V0aWxzL0VudGl0eVVwZGF0ZVV0aWxzLmpzXCJcbmltcG9ydCB7IExpc3RBdXRvU2VsZWN0QmVoYXZpb3IgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL21pc2MvRGV2aWNlQ29uZmlnLmpzXCJcbmltcG9ydCB7IFVwZGF0YWJsZVNldHRpbmdzVmlld2VyIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9zZXR0aW5ncy9JbnRlcmZhY2VzLmpzXCJcblxuYXNzZXJ0TWFpbk9yTm9kZSgpXG5jb25zdCBjbGFzc05hbWUgPSBcImdyb3VwLWxpc3RcIlxuXG5leHBvcnQgY2xhc3MgR3JvdXBMaXN0VmlldyBpbXBsZW1lbnRzIFVwZGF0YWJsZVNldHRpbmdzVmlld2VyIHtcblx0cHJpdmF0ZSBzZWFyY2hRdWVyeTogc3RyaW5nID0gXCJcIlxuXHRwcml2YXRlIGxpc3RNb2RlbDogTGlzdEVsZW1lbnRMaXN0TW9kZWw8R3JvdXBJbmZvPlxuXHRwcml2YXRlIHJlYWRvbmx5IHJlbmRlckNvbmZpZzogUmVuZGVyQ29uZmlnPEdyb3VwSW5mbywgR3JvdXBSb3c+ID0ge1xuXHRcdGl0ZW1IZWlnaHQ6IHNpemUubGlzdF9yb3dfaGVpZ2h0LFxuXHRcdG11bHRpc2VsZWN0aW9uQWxsb3dlZDogTXVsdGlzZWxlY3RNb2RlLkRpc2FibGVkLFxuXHRcdHN3aXBlOiBudWxsLFxuXHRcdGNyZWF0ZUVsZW1lbnQ6IChkb20pID0+IHtcblx0XHRcdGNvbnN0IGdyb3VwUm93ID0gbmV3IEdyb3VwUm93KClcblx0XHRcdG0ucmVuZGVyKGRvbSwgZ3JvdXBSb3cucmVuZGVyKCkpXG5cdFx0XHRyZXR1cm4gZ3JvdXBSb3dcblx0XHR9LFxuXHR9XG5cblx0cHJpdmF0ZSBsaXN0SWQ6IExhenlMb2FkZWQ8SWQ+XG5cdHByaXZhdGUgbGlzdFN0YXRlU3Vic2NyaXB0aW9uOiBTdHJlYW08dW5rbm93bj4gfCBudWxsID0gbnVsbFxuXG5cdGNvbnN0cnVjdG9yKHByaXZhdGUgcmVhZG9ubHkgdXBkYXRlRGV0YWlsc1ZpZXdlcjogKHZpZXdlcjogR3JvdXBEZXRhaWxzVmlldyB8IG51bGwpID0+IHVua25vd24sIHByaXZhdGUgcmVhZG9ubHkgZm9jdXNEZXRhaWxzVmlld2VyOiAoKSA9PiB1bmtub3duKSB7XG5cdFx0dGhpcy5saXN0TW9kZWwgPSB0aGlzLm1ha2VMaXN0TW9kZWwoKVxuXHRcdHRoaXMubGlzdElkID0gbmV3IExhenlMb2FkZWQoKCkgPT4ge1xuXHRcdFx0cmV0dXJuIGxvY2F0b3IubG9naW5zXG5cdFx0XHRcdC5nZXRVc2VyQ29udHJvbGxlcigpXG5cdFx0XHRcdC5sb2FkQ3VzdG9tZXIoKVxuXHRcdFx0XHQudGhlbigoY3VzdG9tZXIpID0+IHtcblx0XHRcdFx0XHRyZXR1cm4gY3VzdG9tZXIudGVhbUdyb3Vwc1xuXHRcdFx0XHR9KVxuXHRcdH0pXG5cblx0XHR0aGlzLmxpc3RNb2RlbC5sb2FkSW5pdGlhbCgpXG5cblx0XHR0aGlzLm9uY3JlYXRlID0gdGhpcy5vbmNyZWF0ZS5iaW5kKHRoaXMpXG5cdFx0dGhpcy5vbnJlbW92ZSA9IHRoaXMub25yZW1vdmUuYmluZCh0aGlzKVxuXHRcdHRoaXMudmlldyA9IHRoaXMudmlldy5iaW5kKHRoaXMpXG5cdH1cblxuXHRwcml2YXRlIHJlYWRvbmx5IHNob3J0Y3V0cyA9IGxpc3RTZWxlY3Rpb25LZXlib2FyZFNob3J0Y3V0cyhNdWx0aXNlbGVjdE1vZGUuRGlzYWJsZWQsICgpID0+IHRoaXMubGlzdE1vZGVsKVxuXG5cdG9uY3JlYXRlKCkge1xuXHRcdGtleU1hbmFnZXIucmVnaXN0ZXJTaG9ydGN1dHModGhpcy5zaG9ydGN1dHMpXG5cdH1cblxuXHR2aWV3KCk6IENoaWxkcmVuIHtcblx0XHRyZXR1cm4gbShcblx0XHRcdExpc3RDb2x1bW5XcmFwcGVyLFxuXHRcdFx0e1xuXHRcdFx0XHRoZWFkZXJDb250ZW50OiBtKFxuXHRcdFx0XHRcdFwiLmZsZXguZmxleC1zcGFjZS1iZXR3ZWVuLmNlbnRlci12ZXJ0aWNhbGx5LnBsci1sXCIsXG5cdFx0XHRcdFx0bShCYXNlU2VhcmNoQmFyLCB7XG5cdFx0XHRcdFx0XHR0ZXh0OiB0aGlzLnNlYXJjaFF1ZXJ5LFxuXHRcdFx0XHRcdFx0b25JbnB1dDogKHRleHQpID0+IHRoaXMudXBkYXRlUXVlcnkodGV4dCksXG5cdFx0XHRcdFx0XHRidXN5OiBmYWxzZSxcblx0XHRcdFx0XHRcdG9uS2V5RG93bjogKGUpID0+IGUuc3RvcFByb3BhZ2F0aW9uKCksXG5cdFx0XHRcdFx0XHRvbkNsZWFyOiAoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdHRoaXMuc2VhcmNoUXVlcnkgPSBcIlwiXG5cdFx0XHRcdFx0XHRcdHRoaXMubGlzdE1vZGVsLnJlYXBwbHlGaWx0ZXIoKVxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdHBsYWNlaG9sZGVyOiBsYW5nLmdldChcInNlYXJjaE1haWxib3hlc19wbGFjZWhvbGRlclwiKSxcblx0XHRcdFx0XHR9IHNhdGlzZmllcyBCYXNlU2VhcmNoQmFyQXR0cnMpLFxuXHRcdFx0XHRcdG0oXG5cdFx0XHRcdFx0XHRcIi5tci1uZWdhdGl2ZS1zXCIsXG5cdFx0XHRcdFx0XHRtKEljb25CdXR0b24sIHtcblx0XHRcdFx0XHRcdFx0dGl0bGU6IFwiY3JlYXRlU2hhcmVkTWFpbGJveF9sYWJlbFwiLFxuXHRcdFx0XHRcdFx0XHRpY29uOiBJY29ucy5BZGQsXG5cdFx0XHRcdFx0XHRcdGNsaWNrOiAoKSA9PiB0aGlzLmFkZEJ1dHRvbkNsaWNrZWQoKSxcblx0XHRcdFx0XHRcdH0pLFxuXHRcdFx0XHRcdCksXG5cdFx0XHRcdCksXG5cdFx0XHR9LFxuXHRcdFx0dGhpcy5saXN0TW9kZWwuaXNFbXB0eUFuZERvbmUoKVxuXHRcdFx0XHQ/IG0oQ29sdW1uRW1wdHlNZXNzYWdlQm94LCB7XG5cdFx0XHRcdFx0XHRjb2xvcjogdGhlbWUubGlzdF9tZXNzYWdlX2JnLFxuXHRcdFx0XHRcdFx0aWNvbjogSWNvbnMuUGVvcGxlLFxuXHRcdFx0XHRcdFx0bWVzc2FnZTogXCJub0VudHJpZXNfbXNnXCIsXG5cdFx0XHRcdCAgfSlcblx0XHRcdFx0OiBtKExpc3QsIHtcblx0XHRcdFx0XHRcdHJlbmRlckNvbmZpZzogdGhpcy5yZW5kZXJDb25maWcsXG5cdFx0XHRcdFx0XHRzdGF0ZTogdGhpcy5saXN0TW9kZWwuc3RhdGUsXG5cdFx0XHRcdFx0XHRvbkxvYWRNb3JlOiAoKSA9PiB0aGlzLmxpc3RNb2RlbC5sb2FkTW9yZSgpLFxuXHRcdFx0XHRcdFx0b25SZXRyeUxvYWRpbmc6ICgpID0+IHRoaXMubGlzdE1vZGVsLnJldHJ5TG9hZGluZygpLFxuXHRcdFx0XHRcdFx0b25TdG9wTG9hZGluZzogKCkgPT4gdGhpcy5saXN0TW9kZWwuc3RvcExvYWRpbmcoKSxcblx0XHRcdFx0XHRcdG9uU2luZ2xlU2VsZWN0aW9uOiAoaXRlbTogR3JvdXBJbmZvKSA9PiB7XG5cdFx0XHRcdFx0XHRcdHRoaXMubGlzdE1vZGVsLm9uU2luZ2xlU2VsZWN0aW9uKGl0ZW0pXG5cdFx0XHRcdFx0XHRcdHRoaXMuZm9jdXNEZXRhaWxzVmlld2VyKClcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRvblNpbmdsZVRvZ2dsaW5nTXVsdGlzZWxlY3Rpb246IG5vT3AsXG5cdFx0XHRcdFx0XHRvblJhbmdlU2VsZWN0aW9uVG93YXJkczogbm9PcCxcblx0XHRcdFx0ICB9IHNhdGlzZmllcyBMaXN0QXR0cnM8R3JvdXBJbmZvLCBHcm91cFJvdz4pLFxuXHRcdClcblx0fVxuXG5cdG9ucmVtb3ZlKCkge1xuXHRcdGtleU1hbmFnZXIudW5yZWdpc3RlclNob3J0Y3V0cyh0aGlzLnNob3J0Y3V0cylcblxuXHRcdHRoaXMubGlzdFN0YXRlU3Vic2NyaXB0aW9uPy5lbmQodHJ1ZSlcblx0fVxuXG5cdGFzeW5jIGFkZEJ1dHRvbkNsaWNrZWQoKSB7XG5cdFx0aWYgKGF3YWl0IGxvY2F0b3IubG9naW5zLmdldFVzZXJDb250cm9sbGVyKCkuaXNOZXdQYWlkUGxhbigpKSB7XG5cdFx0XHRBZGRHcm91cERpYWxvZy5zaG93KClcblx0XHR9IGVsc2Uge1xuXHRcdFx0Y29uc3QgbXNnID0gbGFuZy5tYWtlVHJhbnNsYXRpb24oXCJ1cGdyYWRlX3RleHRcIiwgbGFuZy5nZXQoXCJuZXdQYWlkUGxhblJlcXVpcmVkX21zZ1wiKSArIFwiIFwiICsgbGFuZy5nZXQoXCJzaGFyZWRNYWlsYm94ZXNNdWx0aVVzZXJfbXNnXCIpKVxuXHRcdFx0Y29uc3Qgd2l6YXJkID0gYXdhaXQgaW1wb3J0KFwiLi4vLi4vLi4vY29tbW9uL3N1YnNjcmlwdGlvbi9VcGdyYWRlU3Vic2NyaXB0aW9uV2l6YXJkXCIpXG5cdFx0XHRhd2FpdCB3aXphcmQuc2hvd1VwZ3JhZGVXaXphcmQobG9jYXRvci5sb2dpbnMsIE5ld1BhaWRQbGFucywgbXNnKVxuXHRcdH1cblx0fVxuXG5cdGFzeW5jIGVudGl0eUV2ZW50c1JlY2VpdmVkKHVwZGF0ZXM6IFJlYWRvbmx5QXJyYXk8RW50aXR5VXBkYXRlRGF0YT4pOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRmb3IgKGNvbnN0IHVwZGF0ZSBvZiB1cGRhdGVzKSB7XG5cdFx0XHRjb25zdCB7IGluc3RhbmNlTGlzdElkLCBpbnN0YW5jZUlkLCBvcGVyYXRpb24gfSA9IHVwZGF0ZVxuXG5cdFx0XHRpZiAoaXNVcGRhdGVGb3JUeXBlUmVmKEdyb3VwSW5mb1R5cGVSZWYsIHVwZGF0ZSkgJiYgdGhpcy5saXN0SWQuZ2V0U3luYygpID09PSBpbnN0YW5jZUxpc3RJZCkge1xuXHRcdFx0XHRhd2FpdCB0aGlzLmxpc3RNb2RlbC5lbnRpdHlFdmVudFJlY2VpdmVkKGluc3RhbmNlTGlzdElkLCBpbnN0YW5jZUlkLCBvcGVyYXRpb24pXG5cdFx0XHR9IGVsc2UgaWYgKGlzVXBkYXRlRm9yVHlwZVJlZihHcm91cE1lbWJlclR5cGVSZWYsIHVwZGF0ZSkpIHtcblx0XHRcdFx0dGhpcy5saXN0TW9kZWwucmVhcHBseUZpbHRlcigpXG5cdFx0XHR9XG5cblx0XHRcdG0ucmVkcmF3KClcblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIG1ha2VMaXN0TW9kZWwoKTogTGlzdEVsZW1lbnRMaXN0TW9kZWw8R3JvdXBJbmZvPiB7XG5cdFx0Y29uc3QgbGlzdE1vZGVsID0gbmV3IExpc3RFbGVtZW50TGlzdE1vZGVsPEdyb3VwSW5mbz4oe1xuXHRcdFx0c29ydENvbXBhcmU6IGNvbXBhcmVHcm91cEluZm9zLFxuXHRcdFx0ZmV0Y2g6IGFzeW5jIChfbGFzdEZldGNoZWRFbnRpdHksIF9jb3VudCkgPT4ge1xuXHRcdFx0XHQvLyBsb2FkIGFsbCBlbnRyaWVzIGF0IG9uY2UgdG8gYXBwbHkgY3VzdG9tIHNvcnQgb3JkZXJcblx0XHRcdFx0Y29uc3QgbGlzdElkID0gYXdhaXQgdGhpcy5saXN0SWQuZ2V0QXN5bmMoKVxuXHRcdFx0XHRjb25zdCBhbGxHcm91cEluZm9zID0gYXdhaXQgbG9jYXRvci5lbnRpdHlDbGllbnQubG9hZEFsbChHcm91cEluZm9UeXBlUmVmLCBsaXN0SWQpXG5cblx0XHRcdFx0cmV0dXJuIHsgaXRlbXM6IGFsbEdyb3VwSW5mb3MsIGNvbXBsZXRlOiB0cnVlIH1cblx0XHRcdH0sXG5cdFx0XHRsb2FkU2luZ2xlOiBhc3luYyAoX2xpc3RJZDogSWQsIGVsZW1lbnRJZDogSWQpID0+IHtcblx0XHRcdFx0Y29uc3QgbGlzdElkID0gYXdhaXQgdGhpcy5saXN0SWQuZ2V0QXN5bmMoKVxuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdHJldHVybiBhd2FpdCBsb2NhdG9yLmVudGl0eUNsaWVudC5sb2FkPEdyb3VwSW5mbz4oR3JvdXBJbmZvVHlwZVJlZiwgW2xpc3RJZCwgZWxlbWVudElkXSlcblx0XHRcdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0XHRcdGlmIChlIGluc3RhbmNlb2YgTm90Rm91bmRFcnJvcikge1xuXHRcdFx0XHRcdFx0Ly8gd2UgcmV0dXJuIG51bGwgaWYgdGhlIEdyb3VwSW5mbyBkb2VzIG5vdCBleGlzdFxuXHRcdFx0XHRcdFx0cmV0dXJuIG51bGxcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0dGhyb3cgZVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHRcdGF1dG9TZWxlY3RCZWhhdmlvcjogKCkgPT4gTGlzdEF1dG9TZWxlY3RCZWhhdmlvci5PTERFUixcblx0XHR9KVxuXG5cdFx0bGlzdE1vZGVsLnNldEZpbHRlcigoaXRlbTogR3JvdXBJbmZvKSA9PiB0aGlzLmdyb3VwRmlsdGVyKCkgJiYgdGhpcy5xdWVyeUZpbHRlcihpdGVtKSlcblxuXHRcdHRoaXMubGlzdFN0YXRlU3Vic2NyaXB0aW9uPy5lbmQodHJ1ZSlcblx0XHR0aGlzLmxpc3RTdGF0ZVN1YnNjcmlwdGlvbiA9IGxpc3RNb2RlbC5zdGF0ZVN0cmVhbS5tYXAoKHN0YXRlKSA9PiB7XG5cdFx0XHR0aGlzLm9uU2VsZWN0aW9uQ2hhbmdlZChvbmx5U2luZ2xlU2VsZWN0aW9uKHN0YXRlKSlcblx0XHRcdG0ucmVkcmF3KClcblx0XHR9KVxuXG5cdFx0cmV0dXJuIGxpc3RNb2RlbFxuXHR9XG5cblx0cHJpdmF0ZSByZWFkb25seSBvblNlbGVjdGlvbkNoYW5nZWQgPSBtZW1vaXplZCgoaXRlbTogR3JvdXBJbmZvIHwgbnVsbCkgPT4ge1xuXHRcdGlmIChpdGVtKSB7XG5cdFx0XHRjb25zdCBuZXdTZWxlY3Rpb25Nb2RlbCA9IG5ldyBHcm91cERldGFpbHNNb2RlbChpdGVtLCBsb2NhdG9yLmVudGl0eUNsaWVudCwgbS5yZWRyYXcpXG5cdFx0XHRjb25zdCBkZXRhaWxzVmlld2VyID0gaXRlbSA9PSBudWxsID8gbnVsbCA6IG5ldyBHcm91cERldGFpbHNWaWV3KG5ld1NlbGVjdGlvbk1vZGVsKVxuXHRcdFx0dGhpcy51cGRhdGVEZXRhaWxzVmlld2VyKGRldGFpbHNWaWV3ZXIpXG5cdFx0fVxuXHR9KVxuXG5cdHByaXZhdGUgcXVlcnlGaWx0ZXIoZ2k6IEdyb3VwSW5mbykge1xuXHRcdGNvbnN0IGxvd2VyY2FzZVNlYXJjaCA9IHRoaXMuc2VhcmNoUXVlcnkudG9Mb3dlckNhc2UoKVxuXHRcdHJldHVybiBnaS5uYW1lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMobG93ZXJjYXNlU2VhcmNoKSB8fCAoISFnaS5tYWlsQWRkcmVzcyAmJiBnaS5tYWlsQWRkcmVzcz8udG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhsb3dlcmNhc2VTZWFyY2gpKVxuXHR9XG5cblx0cHJpdmF0ZSBncm91cEZpbHRlciA9ICgpID0+IHtcblx0XHRyZXR1cm4gbG9jYXRvci5sb2dpbnMuZ2V0VXNlckNvbnRyb2xsZXIoKS5pc0dsb2JhbEFkbWluKClcblx0fVxuXG5cdHByaXZhdGUgdXBkYXRlUXVlcnkocXVlcnk6IHN0cmluZykge1xuXHRcdHRoaXMuc2VhcmNoUXVlcnkgPSBxdWVyeVxuXHRcdHRoaXMubGlzdE1vZGVsLnJlYXBwbHlGaWx0ZXIoKVxuXHR9XG59XG5cbmV4cG9ydCBjbGFzcyBHcm91cFJvdyBpbXBsZW1lbnRzIFZpcnR1YWxSb3c8R3JvdXBJbmZvPiB7XG5cdHRvcDogbnVtYmVyID0gMFxuXHRkb21FbGVtZW50OiBIVE1MRWxlbWVudCB8IG51bGwgPSBudWxsIC8vIHNldCBmcm9tIExpc3Rcblx0ZW50aXR5OiBHcm91cEluZm8gfCBudWxsID0gbnVsbFxuXHRwcml2YXRlIG5hbWVEb20hOiBIVE1MRWxlbWVudFxuXHRwcml2YXRlIGFkZHJlc3NEb20hOiBIVE1MRWxlbWVudFxuXHRwcml2YXRlIGRlbGV0ZWRJY29uRG9tITogSFRNTEVsZW1lbnRcblx0cHJpdmF0ZSBsb2NhbEFkbWluSWNvbkRvbSE6IEhUTUxFbGVtZW50XG5cdHByaXZhdGUgbWFpbEljb25Eb20hOiBIVE1MRWxlbWVudFxuXHRwcml2YXRlIHNlbGVjdGlvblVwZGF0ZXIhOiBTZWxlY3RhYmxlUm93U2VsZWN0ZWRTZXR0ZXJcblxuXHRjb25zdHJ1Y3RvcigpIHt9XG5cblx0dXBkYXRlKGdyb3VwSW5mbzogR3JvdXBJbmZvLCBzZWxlY3RlZDogYm9vbGVhbik6IHZvaWQge1xuXHRcdHRoaXMuZW50aXR5ID0gZ3JvdXBJbmZvXG5cblx0XHR0aGlzLnNlbGVjdGlvblVwZGF0ZXIoc2VsZWN0ZWQsIGZhbHNlKVxuXG5cdFx0dGhpcy5uYW1lRG9tLnRleHRDb250ZW50ID0gZ3JvdXBJbmZvLm5hbWVcblx0XHR0aGlzLmFkZHJlc3NEb20udGV4dENvbnRlbnQgPSBncm91cEluZm8ubWFpbEFkZHJlc3MgPz8gXCJcIlxuXHRcdHNldFZpc2liaWxpdHkodGhpcy5kZWxldGVkSWNvbkRvbSwgZ3JvdXBJbmZvLmRlbGV0ZWQgIT0gbnVsbClcblxuXHRcdC8vIG1haWwgZ3JvdXAgb3IgbG9jYWwgYWRtaW4gZ3JvdXBcblx0XHRpZiAoZ3JvdXBJbmZvLm1haWxBZGRyZXNzKSB7XG5cdFx0XHR0aGlzLmxvY2FsQWRtaW5JY29uRG9tLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIlxuXHRcdFx0dGhpcy5tYWlsSWNvbkRvbS5zdHlsZS5kaXNwbGF5ID0gXCJcIlxuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLmxvY2FsQWRtaW5JY29uRG9tLnN0eWxlLmRpc3BsYXkgPSBcIlwiXG5cdFx0XHR0aGlzLm1haWxJY29uRG9tLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIlxuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBPbmx5IHRoZSBzdHJ1Y3R1cmUgaXMgbWFuYWdlZCBieSBtaXRocmlsLiBXZSBzZXQgYWxsIGNvbnRlbnRzIG9uIG91ciBvd24gKHNlZSB1cGRhdGUpIGluIG9yZGVyIHRvIGF2b2lkIHRoZSB2ZG9tIG92ZXJoZWFkIChub3QgbmVnbGlnaWJsZSBvbiBtb2JpbGVzKVxuXHQgKi9cblx0cmVuZGVyKCk6IENoaWxkcmVuIHtcblx0XHRyZXR1cm4gbShcblx0XHRcdFNlbGVjdGFibGVSb3dDb250YWluZXIsXG5cdFx0XHR7XG5cdFx0XHRcdG9uU2VsZWN0ZWRDaGFuZ2VSZWY6ICh1cGRhdGVyKSA9PiAodGhpcy5zZWxlY3Rpb25VcGRhdGVyID0gdXBkYXRlciksXG5cdFx0XHR9LFxuXHRcdFx0bShcIi5mbGV4LmNvbC5mbGV4LWdyb3dcIiwgW1xuXHRcdFx0XHRtKFwiLmJhZGdlLWxpbmUtaGVpZ2h0XCIsIFtcblx0XHRcdFx0XHRtKFwiXCIsIHtcblx0XHRcdFx0XHRcdG9uY3JlYXRlOiAodm5vZGUpID0+ICh0aGlzLm5hbWVEb20gPSB2bm9kZS5kb20gYXMgSFRNTEVsZW1lbnQpLFxuXHRcdFx0XHRcdH0pLFxuXHRcdFx0XHRdKSxcblx0XHRcdFx0bShcIi5mbGV4LXNwYWNlLWJldHdlZW4ubXQteHhzXCIsIFtcblx0XHRcdFx0XHRtKFwiLnNtYWxsZXJcIiwge1xuXHRcdFx0XHRcdFx0b25jcmVhdGU6ICh2bm9kZSkgPT4gKHRoaXMuYWRkcmVzc0RvbSA9IHZub2RlLmRvbSBhcyBIVE1MRWxlbWVudCksXG5cdFx0XHRcdFx0fSksXG5cdFx0XHRcdFx0bShcIi5pY29ucy5mbGV4XCIsIFtcblx0XHRcdFx0XHRcdG0oSWNvbiwge1xuXHRcdFx0XHRcdFx0XHRpY29uOiBJY29ucy5UcmFzaCxcblx0XHRcdFx0XHRcdFx0b25jcmVhdGU6ICh2bm9kZSkgPT4gKHRoaXMuZGVsZXRlZEljb25Eb20gPSB2bm9kZS5kb20gYXMgSFRNTEVsZW1lbnQpLFxuXHRcdFx0XHRcdFx0XHRjbGFzczogXCJzdmctbGlzdC1hY2NlbnQtZmdcIixcblx0XHRcdFx0XHRcdFx0c3R5bGU6IHtcblx0XHRcdFx0XHRcdFx0XHRkaXNwbGF5OiBcIm5vbmVcIixcblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdH0pLFxuXHRcdFx0XHRcdFx0bShJY29uLCB7XG5cdFx0XHRcdFx0XHRcdGljb246IEJvb3RJY29ucy5TZXR0aW5ncyxcblx0XHRcdFx0XHRcdFx0b25jcmVhdGU6ICh2bm9kZSkgPT4gKHRoaXMubG9jYWxBZG1pbkljb25Eb20gPSB2bm9kZS5kb20gYXMgSFRNTEVsZW1lbnQpLFxuXHRcdFx0XHRcdFx0XHRjbGFzczogXCJzdmctbGlzdC1hY2NlbnQtZmdcIixcblx0XHRcdFx0XHRcdFx0c3R5bGU6IHtcblx0XHRcdFx0XHRcdFx0XHRkaXNwbGF5OiBcIm5vbmVcIixcblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdH0pLFxuXHRcdFx0XHRcdFx0bShJY29uLCB7XG5cdFx0XHRcdFx0XHRcdGljb246IEJvb3RJY29ucy5NYWlsLFxuXHRcdFx0XHRcdFx0XHRvbmNyZWF0ZTogKHZub2RlKSA9PiAodGhpcy5tYWlsSWNvbkRvbSA9IHZub2RlLmRvbSBhcyBIVE1MRWxlbWVudCksXG5cdFx0XHRcdFx0XHRcdGNsYXNzOiBcInN2Zy1saXN0LWFjY2VudC1mZ1wiLFxuXHRcdFx0XHRcdFx0XHRzdHlsZToge1xuXHRcdFx0XHRcdFx0XHRcdGRpc3BsYXk6IFwibm9uZVwiLFxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0fSksXG5cdFx0XHRcdFx0XSksXG5cdFx0XHRcdF0pLFxuXHRcdFx0XSksXG5cdFx0KVxuXHR9XG59XG4iLCJpbXBvcnQgbSBmcm9tIFwibWl0aHJpbFwiXG5pbXBvcnQgeyBsYW5nIH0gZnJvbSBcIi4uL21pc2MvTGFuZ3VhZ2VWaWV3TW9kZWwuanNcIlxuaW1wb3J0IHsgRGlhbG9nIH0gZnJvbSBcIi4uL2d1aS9iYXNlL0RpYWxvZy5qc1wiXG5pbXBvcnQgeyBJbnZhbGlkRGF0YUVycm9yLCBMb2NrZWRFcnJvciwgUHJlY29uZGl0aW9uRmFpbGVkRXJyb3IgfSBmcm9tIFwiLi4vYXBpL2NvbW1vbi9lcnJvci9SZXN0RXJyb3IuanNcIlxuaW1wb3J0IHsgc2hvd1Byb2dyZXNzRGlhbG9nIH0gZnJvbSBcIi4uL2d1aS9kaWFsb2dzL1Byb2dyZXNzRGlhbG9nLmpzXCJcbmltcG9ydCB7IGlzRG9tYWluTmFtZSB9IGZyb20gXCIuLi9taXNjL0Zvcm1hdFZhbGlkYXRvci5qc1wiXG5pbXBvcnQgc3RyZWFtIGZyb20gXCJtaXRocmlsL3N0cmVhbVwiXG5pbXBvcnQgdHlwZSB7IEN1c3RvbWVySW5mbyB9IGZyb20gXCIuLi9hcGkvZW50aXRpZXMvc3lzL1R5cGVSZWZzLmpzXCJcbmltcG9ydCB7IFRleHRGaWVsZCB9IGZyb20gXCIuLi9ndWkvYmFzZS9UZXh0RmllbGQuanNcIlxuaW1wb3J0IHsgb2ZDbGFzcyB9IGZyb20gXCJAdHV0YW8vdHV0YW5vdGEtdXRpbHNcIlxuaW1wb3J0IHsgbG9jYXRvciB9IGZyb20gXCIuLi9hcGkvbWFpbi9Db21tb25Mb2NhdG9yLmpzXCJcbmltcG9ydCB7IGFzc2VydE1haW5Pck5vZGUgfSBmcm9tIFwiLi4vYXBpL2NvbW1vbi9FbnYuanNcIlxuaW1wb3J0IHsgZ2V0V2hpdGVsYWJlbERvbWFpbkluZm8gfSBmcm9tIFwiLi4vYXBpL2NvbW1vbi91dGlscy9DdXN0b21lclV0aWxzLmpzXCJcblxuYXNzZXJ0TWFpbk9yTm9kZSgpXG5cbmZ1bmN0aW9uIG9yZGVyV2hpdGVsYWJlbENlcnRpZmljYXRlKGRvbWFpbjogc3RyaW5nLCBkaWFsb2c6IERpYWxvZykge1xuXHRzaG93UHJvZ3Jlc3NEaWFsb2coXG5cdFx0XCJwbGVhc2VXYWl0X21zZ1wiLFxuXHRcdGxvY2F0b3IuY3VzdG9tZXJGYWNhZGVcblx0XHRcdC5vcmRlcldoaXRlbGFiZWxDZXJ0aWZpY2F0ZShkb21haW4pXG5cdFx0XHQudGhlbigoKSA9PiB7XG5cdFx0XHRcdGRpYWxvZy5jbG9zZSgpXG5cdFx0XHR9KVxuXHRcdFx0LmNhdGNoKFxuXHRcdFx0XHRvZkNsYXNzKEludmFsaWREYXRhRXJyb3IsIChlKSA9PiB7XG5cdFx0XHRcdFx0RGlhbG9nLm1lc3NhZ2UoXCJjZXJ0aWZpY2F0ZUVycm9yX21zZ1wiKVxuXHRcdFx0XHR9KSxcblx0XHRcdClcblx0XHRcdC5jYXRjaChvZkNsYXNzKExvY2tlZEVycm9yLCAoZSkgPT4gRGlhbG9nLm1lc3NhZ2UoXCJvcGVyYXRpb25TdGlsbEFjdGl2ZV9tc2dcIikpKVxuXHRcdFx0LmNhdGNoKFxuXHRcdFx0XHRvZkNsYXNzKFByZWNvbmRpdGlvbkZhaWxlZEVycm9yLCAoZSkgPT4ge1xuXHRcdFx0XHRcdHN3aXRjaCAoZS5kYXRhKSB7XG5cdFx0XHRcdFx0XHRjYXNlIFwibG9jay5sb2NrZWRcIjpcblx0XHRcdFx0XHRcdFx0RGlhbG9nLm1lc3NhZ2UoXCJvcGVyYXRpb25TdGlsbEFjdGl2ZV9tc2dcIilcblx0XHRcdFx0XHRcdFx0YnJlYWtcblxuXHRcdFx0XHRcdFx0Y2FzZSBcImRvbWFpbi5pbnZhbGlkX2NuYW1lXCI6XG5cdFx0XHRcdFx0XHRcdERpYWxvZy5tZXNzYWdlKFwiaW52YWxpZENuYW1lUmVjb3JkX21zZ1wiKVxuXHRcdFx0XHRcdFx0XHRicmVha1xuXG5cdFx0XHRcdFx0XHRjYXNlIFwiZG9tYWluLm5vdF9hX3N1YmRvbWFpblwiOlxuXHRcdFx0XHRcdFx0XHREaWFsb2cubWVzc2FnZShcIm5vdEFTdWJkb21haW5fbXNnXCIpXG5cdFx0XHRcdFx0XHRcdGJyZWFrXG5cblx0XHRcdFx0XHRcdGNhc2UgXCJkb21haW4uaW52YWxpZFwiOlxuXHRcdFx0XHRcdFx0Y2FzZSBcImRvbWFpbi5leGlzdHNcIjpcblx0XHRcdFx0XHRcdFx0RGlhbG9nLm1lc3NhZ2UoXCJjdXN0b21Eb21haW5FcnJvckRvbWFpbk5vdEF2YWlsYWJsZV9tc2dcIilcblx0XHRcdFx0XHRcdFx0YnJlYWtcblxuXHRcdFx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHRcdFx0dGhyb3cgZVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSksXG5cdFx0XHQpLFxuXHQpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzaG93KGN1c3RvbWVySW5mbzogQ3VzdG9tZXJJbmZvKTogdm9pZCB7XG5cdC8vIG9ubHkgc2hvdyBhIGRyb3Bkb3duIGlmIGEgZG9tYWluIGlzIGFscmVhZHkgc2VsZWN0ZWQgZm9yIHR1dGFub3RhIGxvZ2luIG9yIGlmIHRoZXJlIGlzIGV4YWN0bHkgb25lIGRvbWFpbiBhdmFpbGFibGVcblx0Y29uc3Qgd2hpdGVsYWJlbERvbWFpbkluZm8gPSBnZXRXaGl0ZWxhYmVsRG9tYWluSW5mbyhjdXN0b21lckluZm8pXG5cdGNvbnN0IGRvbWFpbiA9IHdoaXRlbGFiZWxEb21haW5JbmZvID8gc3RyZWFtKHdoaXRlbGFiZWxEb21haW5JbmZvLmRvbWFpbikgOiBzdHJlYW0oXCJcIilcblx0bGV0IGZvcm0gPSB7XG5cdFx0dmlldzogKCkgPT4ge1xuXHRcdFx0cmV0dXJuIG0oVGV4dEZpZWxkLCB7XG5cdFx0XHRcdGxhYmVsOiBcIndoaXRlbGFiZWxEb21haW5fbGFiZWxcIixcblx0XHRcdFx0dmFsdWU6IGRvbWFpbigpLFxuXHRcdFx0XHRvbmlucHV0OiBkb21haW4sXG5cdFx0XHRcdGlzUmVhZE9ubHk6IHdoaXRlbGFiZWxEb21haW5JbmZvID8gdHJ1ZSA6IGZhbHNlLFxuXHRcdFx0fSlcblx0XHR9LFxuXHR9XG5cdGxldCBkaWFsb2cgPSBEaWFsb2cuc2hvd0FjdGlvbkRpYWxvZyh7XG5cdFx0dGl0bGU6IFwid2hpdGVsYWJlbERvbWFpbl9sYWJlbFwiLFxuXHRcdGNoaWxkOiBmb3JtLFxuXHRcdG9rQWN0aW9uOiAoKSA9PiB7XG5cdFx0XHRjb25zdCBkb21haW5BbGxMb3dlcmNhc2UgPSBkb21haW4oKS50cmltKCkudG9Mb3dlckNhc2UoKVxuXG5cdFx0XHRpZiAoIWlzRG9tYWluTmFtZShkb21haW5BbGxMb3dlcmNhc2UpIHx8IGRvbWFpbkFsbExvd2VyY2FzZS5zcGxpdChcIi5cIikubGVuZ3RoIDwgMykge1xuXHRcdFx0XHREaWFsb2cubWVzc2FnZShcIm5vdEFTdWJkb21haW5fbXNnXCIpXG5cdFx0XHR9IGVsc2UgaWYgKGN1c3RvbWVySW5mby5kb21haW5JbmZvcy5zb21lKChkaSkgPT4gIWRpLndoaXRlbGFiZWxDb25maWcgJiYgZGkuZG9tYWluID09PSBkb21haW5BbGxMb3dlcmNhc2UpKSB7XG5cdFx0XHRcdERpYWxvZy5tZXNzYWdlKFwiY3VzdG9tRG9tYWluRXJyb3JEb21haW5Ob3RBdmFpbGFibGVfbXNnXCIpXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRvcmRlcldoaXRlbGFiZWxDZXJ0aWZpY2F0ZShkb21haW5BbGxMb3dlcmNhc2UsIGRpYWxvZylcblx0XHRcdH1cblx0XHR9LFxuXHR9KVxufVxuIiwiaW1wb3J0IHsgVGV4dEZpZWxkIH0gZnJvbSBcIi4uLy4uL2d1aS9iYXNlL1RleHRGaWVsZC5qc1wiXG5pbXBvcnQgeyBEaWFsb2cgfSBmcm9tIFwiLi4vLi4vZ3VpL2Jhc2UvRGlhbG9nXCJcbmltcG9ydCB7IHNob3dQcm9ncmVzc0RpYWxvZyB9IGZyb20gXCIuLi8uLi9ndWkvZGlhbG9ncy9Qcm9ncmVzc0RpYWxvZ1wiXG5pbXBvcnQgeyBuZXZlck51bGwgfSBmcm9tIFwiQHR1dGFvL3R1dGFub3RhLXV0aWxzXCJcbmltcG9ydCB7IFByZWNvbmRpdGlvbkZhaWxlZEVycm9yIH0gZnJvbSBcIi4uLy4uL2FwaS9jb21tb24vZXJyb3IvUmVzdEVycm9yXCJcbmltcG9ydCB7IEljb25zIH0gZnJvbSBcIi4uLy4uL2d1aS9iYXNlL2ljb25zL0ljb25zXCJcbmltcG9ydCB7IHNob3dOb3RBdmFpbGFibGVGb3JGcmVlRGlhbG9nLCBzaG93UGxhblVwZ3JhZGVSZXF1aXJlZERpYWxvZyB9IGZyb20gXCIuLi8uLi9taXNjL1N1YnNjcmlwdGlvbkRpYWxvZ3NcIlxuaW1wb3J0ICogYXMgU2V0Q3VzdG9tRG9tYWluQ2VydGlmaWNhdGVEaWFsb2cgZnJvbSBcIi4uL1NldERvbWFpbkNlcnRpZmljYXRlRGlhbG9nLmpzXCJcbmltcG9ydCB7IGxhbmcgfSBmcm9tIFwiLi4vLi4vbWlzYy9MYW5ndWFnZVZpZXdNb2RlbFwiXG5pbXBvcnQgbSwgeyBDaGlsZHJlbiwgQ29tcG9uZW50LCBWbm9kZSB9IGZyb20gXCJtaXRocmlsXCJcbmltcG9ydCB0eXBlIHsgQ2VydGlmaWNhdGVJbmZvLCBDdXN0b21lckluZm8gfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2FwaS9lbnRpdGllcy9zeXMvVHlwZVJlZnMuanNcIlxuaW1wb3J0IHsgQ2VydGlmaWNhdGVTdGF0ZSwgQ2VydGlmaWNhdGVUeXBlLCBQbGFuVHlwZSB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vYXBpL2NvbW1vbi9UdXRhbm90YUNvbnN0YW50c1wiXG5pbXBvcnQgeyBmb3JtYXREYXRlVGltZSB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vbWlzYy9Gb3JtYXR0ZXJcIlxuaW1wb3J0IHsgbG9jYXRvciB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vYXBpL21haW4vQ29tbW9uTG9jYXRvclwiXG5pbXBvcnQgeyBJY29uQnV0dG9uIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9ndWkvYmFzZS9JY29uQnV0dG9uLmpzXCJcbmltcG9ydCB7IEJ1dHRvblNpemUgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2d1aS9iYXNlL0J1dHRvblNpemUuanNcIlxuaW1wb3J0IHsgUHJvZ3JhbW1pbmdFcnJvciB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vYXBpL2NvbW1vbi9lcnJvci9Qcm9ncmFtbWluZ0Vycm9yLmpzXCJcbmltcG9ydCB7IGdldEF2YWlsYWJsZVBsYW5zV2l0aFdoaXRlbGFiZWwgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL3N1YnNjcmlwdGlvbi9TdWJzY3JpcHRpb25VdGlscy5qc1wiXG5cbmV4cG9ydCB0eXBlIFdoaXRlbGFiZWxCcmFuZGluZ0RvbWFpblNldHRpbmdzQXR0cnMgPSB7XG5cdGN1c3RvbWVySW5mbzogQ3VzdG9tZXJJbmZvXG5cdGlzV2hpdGVsYWJlbEZlYXR1cmVFbmFibGVkOiBib29sZWFuXG5cdGNlcnRpZmljYXRlSW5mbzogQ2VydGlmaWNhdGVJbmZvIHwgbnVsbFxuXHR3aGl0ZWxhYmVsRG9tYWluOiBzdHJpbmdcbn1cblxuY29uc3QgRkFJTFVSRV9MT0NLRUQgPSBcImxvY2subG9ja2VkXCJcbmNvbnN0IEZBSUxVUkVfQ09OVEFDVF9GT1JNX0FDVElWRSA9IFwiZG9tYWluLmNvbnRhY3RfZm9ybV9hY3RpdmVcIlxuXG5leHBvcnQgY2xhc3MgV2hpdGVsYWJlbEJyYW5kaW5nRG9tYWluU2V0dGluZ3MgaW1wbGVtZW50cyBDb21wb25lbnQ8V2hpdGVsYWJlbEJyYW5kaW5nRG9tYWluU2V0dGluZ3NBdHRycz4ge1xuXHR2aWV3KHZub2RlOiBWbm9kZTxXaGl0ZWxhYmVsQnJhbmRpbmdEb21haW5TZXR0aW5nc0F0dHJzPik6IENoaWxkcmVuIHtcblx0XHRjb25zdCB7IGN1c3RvbWVySW5mbywgY2VydGlmaWNhdGVJbmZvLCB3aGl0ZWxhYmVsRG9tYWluLCBpc1doaXRlbGFiZWxGZWF0dXJlRW5hYmxlZCB9ID0gdm5vZGUuYXR0cnNcblx0XHRyZXR1cm4gbShUZXh0RmllbGQsIHtcblx0XHRcdGxhYmVsOiBcIndoaXRlbGFiZWxEb21haW5fbGFiZWxcIixcblx0XHRcdHZhbHVlOiB3aGl0ZWxhYmVsRG9tYWluID8gd2hpdGVsYWJlbERvbWFpbiA6IGxhbmcuZ2V0KFwiZGVhY3RpdmF0ZWRfbGFiZWxcIiksXG5cdFx0XHRoZWxwTGFiZWw6IHRoaXMucmVuZGVyV2hpdGVsYWJlbEluZm8oY2VydGlmaWNhdGVJbmZvKSxcblx0XHRcdGlzUmVhZE9ubHk6IHRydWUsXG5cdFx0XHRpbmplY3Rpb25zUmlnaHQ6ICgpID0+XG5cdFx0XHRcdG0oXCIubWwtYmV0d2Vlbi1zXCIsIFtcblx0XHRcdFx0XHR3aGl0ZWxhYmVsRG9tYWluID8gdGhpcy5yZW5kZXJEZWFjdGl2YXRlQnV0dG9uKHdoaXRlbGFiZWxEb21haW4pIDogbnVsbCxcblx0XHRcdFx0XHRjdXN0b21lckluZm8gPyB0aGlzLl9yZW5kZXJFZGl0QnV0dG9uKGN1c3RvbWVySW5mbywgY2VydGlmaWNhdGVJbmZvLCBpc1doaXRlbGFiZWxGZWF0dXJlRW5hYmxlZCkgOiBudWxsLFxuXHRcdFx0XHRdKSxcblx0XHR9KVxuXHR9XG5cblx0cHJpdmF0ZSByZW5kZXJEZWFjdGl2YXRlQnV0dG9uKHdoaXRlbGFiZWxEb21haW46IHN0cmluZyk6IENoaWxkcmVuIHtcblx0XHRyZXR1cm4gbShJY29uQnV0dG9uLCB7XG5cdFx0XHR0aXRsZTogXCJkZWFjdGl2YXRlX2FjdGlvblwiLFxuXHRcdFx0Y2xpY2s6ICgpID0+IHRoaXMuZGVhY3RpdmF0ZSh3aGl0ZWxhYmVsRG9tYWluKSxcblx0XHRcdGljb246IEljb25zLkNhbmNlbCxcblx0XHRcdHNpemU6IEJ1dHRvblNpemUuQ29tcGFjdCxcblx0XHR9KVxuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyBkZWFjdGl2YXRlKHdoaXRlbGFiZWxEb21haW46IHN0cmluZykge1xuXHRcdGlmIChhd2FpdCBEaWFsb2cuY29uZmlybShcImNvbmZpcm1EZWFjdGl2YXRlV2hpdGVsYWJlbERvbWFpbl9tc2dcIikpIHtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdHJldHVybiBhd2FpdCBzaG93UHJvZ3Jlc3NEaWFsb2coXCJwbGVhc2VXYWl0X21zZ1wiLCBsb2NhdG9yLmN1c3RvbWVyRmFjYWRlLmRlbGV0ZUNlcnRpZmljYXRlKHdoaXRlbGFiZWxEb21haW4pKVxuXHRcdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0XHRpZiAoZSBpbnN0YW5jZW9mIFByZWNvbmRpdGlvbkZhaWxlZEVycm9yKSB7XG5cdFx0XHRcdFx0aWYgKGUuZGF0YSA9PT0gRkFJTFVSRV9MT0NLRUQpIHtcblx0XHRcdFx0XHRcdHJldHVybiBhd2FpdCBEaWFsb2cubWVzc2FnZShcIm9wZXJhdGlvblN0aWxsQWN0aXZlX21zZ1wiKVxuXHRcdFx0XHRcdH0gZWxzZSBpZiAoZS5kYXRhID09PSBGQUlMVVJFX0NPTlRBQ1RfRk9STV9BQ1RJVkUpIHtcblx0XHRcdFx0XHRcdHJldHVybiBhd2FpdCBEaWFsb2cubWVzc2FnZShsYW5nLmdldFRyYW5zbGF0aW9uKFwiZG9tYWluU3RpbGxIYXNDb250YWN0Rm9ybXNfbXNnXCIsIHsgXCJ7ZG9tYWlufVwiOiB3aGl0ZWxhYmVsRG9tYWluIH0pKVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHR0aHJvdyBlXG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0X3JlbmRlckVkaXRCdXR0b24oY3VzdG9tZXJJbmZvOiBDdXN0b21lckluZm8sIGNlcnRpZmljYXRlSW5mbzogQ2VydGlmaWNhdGVJbmZvIHwgbnVsbCwgaXNXaGl0ZWxhYmVsRmVhdHVyZUVuYWJsZWQ6IGJvb2xlYW4pOiBDaGlsZHJlbiB7XG5cdFx0cmV0dXJuIG0oSWNvbkJ1dHRvbiwge1xuXHRcdFx0dGl0bGU6IFwiZWRpdF9hY3Rpb25cIixcblx0XHRcdGNsaWNrOiAoKSA9PiB0aGlzLmVkaXQoaXNXaGl0ZWxhYmVsRmVhdHVyZUVuYWJsZWQsIGN1c3RvbWVySW5mbyksXG5cdFx0XHRpY29uOiBJY29ucy5FZGl0LFxuXHRcdFx0c2l6ZTogQnV0dG9uU2l6ZS5Db21wYWN0LFxuXHRcdH0pXG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIGVkaXQoaXNXaGl0ZWxhYmVsRmVhdHVyZUVuYWJsZWQ6IGJvb2xlYW4sIGN1c3RvbWVySW5mbzogQ3VzdG9tZXJJbmZvKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0aWYgKGxvY2F0b3IubG9naW5zLmdldFVzZXJDb250cm9sbGVyKCkuaXNGcmVlQWNjb3VudCgpKSB7XG5cdFx0XHRzaG93Tm90QXZhaWxhYmxlRm9yRnJlZURpYWxvZyhbUGxhblR5cGUuVW5saW1pdGVkXSlcblx0XHR9IGVsc2Uge1xuXHRcdFx0aWYgKCFpc1doaXRlbGFiZWxGZWF0dXJlRW5hYmxlZCkge1xuXHRcdFx0XHRjb25zdCBwbGFuc1dpdGhXaGl0ZWxhYmVsID0gYXdhaXQgZ2V0QXZhaWxhYmxlUGxhbnNXaXRoV2hpdGVsYWJlbCgpXG5cdFx0XHRcdGlzV2hpdGVsYWJlbEZlYXR1cmVFbmFibGVkID0gYXdhaXQgc2hvd1BsYW5VcGdyYWRlUmVxdWlyZWREaWFsb2cocGxhbnNXaXRoV2hpdGVsYWJlbClcblx0XHRcdH1cblx0XHRcdGlmIChpc1doaXRlbGFiZWxGZWF0dXJlRW5hYmxlZCkge1xuXHRcdFx0XHRTZXRDdXN0b21Eb21haW5DZXJ0aWZpY2F0ZURpYWxvZy5zaG93KGN1c3RvbWVySW5mbylcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIHJlbmRlcldoaXRlbGFiZWxJbmZvKGNlcnRpZmljYXRlSW5mbzogQ2VydGlmaWNhdGVJbmZvIHwgbnVsbCk6ICgpID0+IENoaWxkcmVuIHtcblx0XHRsZXQgY29tcG9uZW50czogQXJyYXk8c3RyaW5nPlxuXG5cdFx0aWYgKGNlcnRpZmljYXRlSW5mbykge1xuXHRcdFx0c3dpdGNoIChjZXJ0aWZpY2F0ZUluZm8uc3RhdGUpIHtcblx0XHRcdFx0Y2FzZSBDZXJ0aWZpY2F0ZVN0YXRlLlZBTElEOlxuXHRcdFx0XHRcdGNvbXBvbmVudHMgPSBbXG5cdFx0XHRcdFx0XHRsYW5nLmdldChcImNlcnRpZmljYXRlRXhwaXJ5RGF0ZV9sYWJlbFwiLCB7XG5cdFx0XHRcdFx0XHRcdFwie2RhdGV9XCI6IGZvcm1hdERhdGVUaW1lKG5ldmVyTnVsbChjZXJ0aWZpY2F0ZUluZm8uZXhwaXJ5RGF0ZSkpLFxuXHRcdFx0XHRcdFx0fSksXG5cdFx0XHRcdFx0XHR0aGlzLmNlcnRpZmljYXRlVHlwZVN0cmluZyhjZXJ0aWZpY2F0ZUluZm8pLFxuXHRcdFx0XHRcdF1cblx0XHRcdFx0XHRicmVha1xuXG5cdFx0XHRcdGNhc2UgQ2VydGlmaWNhdGVTdGF0ZS5WQUxJREFUSU5HOlxuXHRcdFx0XHRcdGNvbXBvbmVudHMgPSBbbGFuZy5nZXQoXCJjZXJ0aWZpY2F0ZVN0YXRlUHJvY2Vzc2luZ19sYWJlbFwiKV1cblx0XHRcdFx0XHRicmVha1xuXG5cdFx0XHRcdGNhc2UgQ2VydGlmaWNhdGVTdGF0ZS5JTlZBTElEOlxuXHRcdFx0XHRcdGNvbXBvbmVudHMgPSBbbGFuZy5nZXQoXCJjZXJ0aWZpY2F0ZVN0YXRlSW52YWxpZF9sYWJlbFwiKV1cblx0XHRcdFx0XHRicmVha1xuXG5cdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0Y29tcG9uZW50cyA9IFtsYW5nLmdldChcImVtcHR5U3RyaW5nX21zZ1wiKV1cblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0Y29tcG9uZW50cyA9IFtsYW5nLmdldChcImVtcHR5U3RyaW5nX21zZ1wiKV1cblx0XHR9XG5cblx0XHRyZXR1cm4gKCkgPT5cblx0XHRcdG0oXG5cdFx0XHRcdFwiLmZsZXhcIixcblx0XHRcdFx0Y29tcG9uZW50cy5tYXAoKGMpID0+IG0oXCIucHItc1wiLCBjKSksXG5cdFx0XHQpXG5cdH1cblxuXHRwcml2YXRlIGNlcnRpZmljYXRlVHlwZVN0cmluZyhjZXJ0aWZpY2F0ZUluZm86IENlcnRpZmljYXRlSW5mbyk6IHN0cmluZyB7XG5cdFx0c3dpdGNoIChjZXJ0aWZpY2F0ZUluZm8udHlwZSkge1xuXHRcdFx0Y2FzZSBDZXJ0aWZpY2F0ZVR5cGUuTEVUU19FTkNSWVBUOlxuXHRcdFx0XHRyZXR1cm4gbGFuZy5nZXQoXCJjZXJ0aWZpY2F0ZVR5cGVBdXRvbWF0aWNfbGFiZWxcIilcblxuXHRcdFx0Y2FzZSBDZXJ0aWZpY2F0ZVR5cGUuTUFOVUFMOlxuXHRcdFx0XHRyZXR1cm4gbGFuZy5nZXQoXCJjZXJ0aWZpY2F0ZVR5cGVNYW51YWxfbGFiZWxcIilcblxuXHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0cmV0dXJuIGxhbmcuZ2V0KFwiZW1wdHlTdHJpbmdfbXNnXCIpXG5cdFx0fVxuXHR9XG59XG4iLCJpbXBvcnQgbSwgeyBDaGlsZHJlbiwgQ29tcG9uZW50IH0gZnJvbSBcIm1pdGhyaWxcIlxuaW1wb3J0IHsgcHgsIHNpemUgfSBmcm9tIFwiLi4vLi4vZ3VpL3NpemVcIlxuaW1wb3J0IHsgQnV0dG9uLCBCdXR0b25UeXBlIH0gZnJvbSBcIi4uLy4uL2d1aS9iYXNlL0J1dHRvbi5qc1wiXG5pbXBvcnQgeyBjcmVhdGVNYWlsLCBjcmVhdGVNYWlsQWRkcmVzcywgTWFpbCB9IGZyb20gXCIuLi8uLi9hcGkvZW50aXRpZXMvdHV0YW5vdGEvVHlwZVJlZnMuanNcIlxuaW1wb3J0IHsgTWFpbFJvdyB9IGZyb20gXCIuLi8uLi8uLi9tYWlsLWFwcC9tYWlsL3ZpZXcvTWFpbFJvd1wiXG5pbXBvcnQgeyBub09wIH0gZnJvbSBcIkB0dXRhby90dXRhbm90YS11dGlsc1wiXG5pbXBvcnQgeyBJY29uQnV0dG9uIH0gZnJvbSBcIi4uLy4uL2d1aS9iYXNlL0ljb25CdXR0b24uanNcIlxuaW1wb3J0IHsgSWNvbnMgfSBmcm9tIFwiLi4vLi4vZ3VpL2Jhc2UvaWNvbnMvSWNvbnMuanNcIlxuaW1wb3J0IHsgVG9nZ2xlQnV0dG9uIH0gZnJvbSBcIi4uLy4uL2d1aS9iYXNlL2J1dHRvbnMvVG9nZ2xlQnV0dG9uLmpzXCJcbmltcG9ydCB7IGlzQXBwLCBpc0Rlc2t0b3AgfSBmcm9tIFwiLi4vLi4vYXBpL2NvbW1vbi9FbnYuanNcIlxuaW1wb3J0IHsgTG9naW5CdXR0b24gfSBmcm9tIFwiLi4vLi4vZ3VpL2Jhc2UvYnV0dG9ucy9Mb2dpbkJ1dHRvbi5qc1wiXG5pbXBvcnQgeyBsYW5nIH0gZnJvbSBcIi4uLy4uL21pc2MvTGFuZ3VhZ2VWaWV3TW9kZWwuanNcIlxuXG5leHBvcnQgY29uc3QgQlVUVE9OX1dJRFRIID0gMjcwXG5cbmV4cG9ydCBjbGFzcyBDdXN0b21Db2xvckVkaXRvclByZXZpZXcgaW1wbGVtZW50cyBDb21wb25lbnQge1xuXHRfbWFpbFJvdzogTWFpbFJvd1xuXHRfbWFpbFJvdzI6IE1haWxSb3dcblx0cHJpdmF0ZSB0b2dnbGVTZWxlY3RlZDogYm9vbGVhbiA9IGZhbHNlXG5cblx0Y29uc3RydWN0b3IoKSB7XG5cdFx0dGhpcy5fbWFpbFJvdyA9IG5ldyBNYWlsUm93KGZhbHNlLCAoKSA9PiBbXSwgbm9PcClcblx0XHR0aGlzLl9tYWlsUm93MiA9IG5ldyBNYWlsUm93KGZhbHNlLCAoKSA9PiBbXSwgbm9PcClcblx0fVxuXG5cdHZpZXcoKTogQ2hpbGRyZW4ge1xuXHRcdHJldHVybiBtKFxuXHRcdFx0XCIuZWRpdG9yLWJvcmRlci5tdC1sLmZsZXguY29sXCIsXG5cdFx0XHR7XG5cdFx0XHRcdHN0eWxlOiB7XG5cdFx0XHRcdFx0YWxpZ25JdGVtczogXCJjZW50ZXJcIixcblx0XHRcdFx0fSxcblx0XHRcdH0sXG5cdFx0XHRbXG5cdFx0XHRcdG0oXG5cdFx0XHRcdFx0XCIucHRcIixcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRzdHlsZToge1xuXHRcdFx0XHRcdFx0XHR3aWR0aDogcHgoQlVUVE9OX1dJRFRIKSxcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRtKExvZ2luQnV0dG9uLCB7XG5cdFx0XHRcdFx0XHRsYWJlbDogaXNBcHAoKSB8fCBpc0Rlc2t0b3AoKSA/IFwiYWRkQWNjb3VudF9hY3Rpb25cIiA6IFwibG9naW5fYWN0aW9uXCIsXG5cdFx0XHRcdFx0XHRvbmNsaWNrOiBub09wLFxuXHRcdFx0XHRcdH0pLFxuXHRcdFx0XHQpLFxuXHRcdFx0XHRtKFwiLnB0XCIsIFtcblx0XHRcdFx0XHRtKEJ1dHRvbiwge1xuXHRcdFx0XHRcdFx0bGFiZWw6IGxhbmcubWFrZVRyYW5zbGF0aW9uKFwic2Vjb25kYXJ5XCIsIFwiU2Vjb25kYXJ5XCIpLFxuXHRcdFx0XHRcdFx0Y2xpY2s6IG5vT3AsXG5cdFx0XHRcdFx0XHR0eXBlOiBCdXR0b25UeXBlLlNlY29uZGFyeSxcblx0XHRcdFx0XHR9KSxcblx0XHRcdFx0XHRtKEJ1dHRvbiwge1xuXHRcdFx0XHRcdFx0bGFiZWw6IGxhbmcubWFrZVRyYW5zbGF0aW9uKFwicHJpbWFyeVwiLCBcIlByaW1hcnlcIiksXG5cdFx0XHRcdFx0XHRjbGljazogbm9PcCxcblx0XHRcdFx0XHRcdHR5cGU6IEJ1dHRvblR5cGUuUHJpbWFyeSxcblx0XHRcdFx0XHR9KSxcblx0XHRcdFx0XSksXG5cdFx0XHRcdG0oXCIucHRcIiwgW1xuXHRcdFx0XHRcdG0oSWNvbkJ1dHRvbiwge1xuXHRcdFx0XHRcdFx0dGl0bGU6IGxhbmcubWFrZVRyYW5zbGF0aW9uKFwiaWNvbl9idXR0b25cIiwgXCJJY29uIGJ1dHRvblwiKSxcblx0XHRcdFx0XHRcdGljb246IEljb25zLkZvbGRlcixcblx0XHRcdFx0XHRcdGNsaWNrOiBub09wLFxuXHRcdFx0XHRcdH0pLFxuXHRcdFx0XHRcdG0oVG9nZ2xlQnV0dG9uLCB7XG5cdFx0XHRcdFx0XHR0aXRsZTogbGFuZy5tYWtlVHJhbnNsYXRpb24oXCJ0b2dnbGVfYnV0dG9uXCIsIFwiVG9nZ2xlIGJ1dHRvblwiKSxcblx0XHRcdFx0XHRcdGljb246IHRoaXMudG9nZ2xlU2VsZWN0ZWQgPyBJY29ucy5Mb2NrIDogSWNvbnMuVW5sb2NrLFxuXHRcdFx0XHRcdFx0dG9nZ2xlZDogdGhpcy50b2dnbGVTZWxlY3RlZCxcblx0XHRcdFx0XHRcdG9uVG9nZ2xlZDogKCkgPT4gKHRoaXMudG9nZ2xlU2VsZWN0ZWQgPSAhdGhpcy50b2dnbGVTZWxlY3RlZCksXG5cdFx0XHRcdFx0fSksXG5cdFx0XHRcdF0pLFxuXHRcdFx0XHRtKFwiLnB0XCIsIHRoaXMucmVuZGVyUHJldmlld01haWxSb3coKSksXG5cdFx0XHRdLFxuXHRcdClcblx0fVxuXG5cdHJlbmRlclByZXZpZXdNYWlsUm93KCk6IENoaWxkcmVuIHtcblx0XHRjb25zdCBtYWlsVGVtcGxhdGUgPSB7XG5cdFx0XHRyZWNlaXZlZERhdGU6IG5ldyBEYXRlKCksXG5cdFx0XHRhdHRhY2htZW50czogW10sXG5cdFx0XHRzdGF0ZTogXCIyXCIsXG5cdFx0XHRtYWlsRGV0YWlsczogbnVsbCxcblx0XHRcdGF1dGhTdGF0dXM6IG51bGwsXG5cdFx0XHRlbmNyeXB0aW9uQXV0aFN0YXR1czogbnVsbCxcblx0XHRcdG1ldGhvZDogXCIwXCIsXG5cdFx0XHRidWNrZXRLZXk6IG51bGwsXG5cdFx0XHRjb252ZXJzYXRpb25FbnRyeTogW1wibGlzdElkXCIsIFwiY29udmVyc2F0aW9uSWRcIl0sXG5cdFx0XHRkaWZmZXJlbnRFbnZlbG9wZVNlbmRlcjogbnVsbCxcblx0XHRcdGZpcnN0UmVjaXBpZW50OiBudWxsLFxuXHRcdFx0bGlzdFVuc3Vic2NyaWJlOiBmYWxzZSxcblx0XHRcdG1haWxEZXRhaWxzRHJhZnQ6IG51bGwsXG5cdFx0XHRtb3ZlZFRpbWU6IG51bGwsXG5cdFx0XHRwaGlzaGluZ1N0YXR1czogXCIwXCIsXG5cdFx0XHRyZWNpcGllbnRDb3VudDogXCIwXCIsXG5cdFx0XHRzZXRzOiBbXSxcblx0XHR9IHNhdGlzZmllcyBQYXJ0aWFsPE1haWw+XG5cdFx0Y29uc3QgbWFpbCA9IGNyZWF0ZU1haWwoe1xuXHRcdFx0c2VuZGVyOiBjcmVhdGVNYWlsQWRkcmVzcyh7XG5cdFx0XHRcdGFkZHJlc3M6IFwibS5tdXN0ZXJtYW5uQGV4YW1wbGUuY29tXCIsXG5cdFx0XHRcdG5hbWU6IFwiTWF4IE11c3Rlcm1hbm5cIixcblx0XHRcdFx0Y29udGFjdDogbnVsbCxcblx0XHRcdH0pLFxuXHRcdFx0c3ViamVjdDogXCJNYWlsIDFcIixcblx0XHRcdHVucmVhZDogZmFsc2UsXG5cdFx0XHRyZXBseVR5cGU6IFwiMFwiLFxuXHRcdFx0Y29uZmlkZW50aWFsOiB0cnVlLFxuXHRcdFx0Li4ubWFpbFRlbXBsYXRlLFxuXHRcdH0pXG5cdFx0Y29uc3QgbWFpbDIgPSBjcmVhdGVNYWlsKHtcblx0XHRcdHNlbmRlcjogY3JlYXRlTWFpbEFkZHJlc3Moe1xuXHRcdFx0XHRhZGRyZXNzOiBcIm0ubXVzdGVybWFubkBleGFtcGxlLmNvbVwiLFxuXHRcdFx0XHRuYW1lOiBcIk1heCBNdXN0ZXJtYW5uXCIsXG5cdFx0XHRcdGNvbnRhY3Q6IG51bGwsXG5cdFx0XHR9KSxcblx0XHRcdHN1YmplY3Q6IFwiTWFpbCAyXCIsXG5cdFx0XHR1bnJlYWQ6IHRydWUsXG5cdFx0XHRyZXBseVR5cGU6IFwiMVwiLFxuXHRcdFx0Y29uZmlkZW50aWFsOiBmYWxzZSxcblx0XHRcdC4uLm1haWxUZW1wbGF0ZSxcblx0XHR9KVxuXHRcdHJldHVybiBtKFxuXHRcdFx0XCIucmVsXCIsXG5cdFx0XHR7XG5cdFx0XHRcdHN0eWxlOiB7XG5cdFx0XHRcdFx0d2lkdGg6IHB4KHNpemUuc2Vjb25kX2NvbF9tYXhfd2lkdGgpLFxuXHRcdFx0XHRcdGhlaWdodDogcHgoc2l6ZS5saXN0X3Jvd19oZWlnaHQgKiAyKSxcblx0XHRcdFx0fSxcblx0XHRcdH0sXG5cdFx0XHRbXG5cdFx0XHRcdG0oXG5cdFx0XHRcdFx0XCIubGlzdC1yb3cucGwucHItbC5vZGQtcm93XCIsXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0b25jcmVhdGU6ICh2bm9kZSkgPT4ge1xuXHRcdFx0XHRcdFx0XHR0aGlzLl9tYWlsUm93LmRvbUVsZW1lbnQgPSB2bm9kZS5kb20gYXMgSFRNTEVsZW1lbnRcblx0XHRcdFx0XHRcdFx0cmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHRoaXMuX21haWxSb3cudXBkYXRlKG1haWwsIGZhbHNlLCBmYWxzZSkpXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0dGhpcy5fbWFpbFJvdy5yZW5kZXIoKSxcblx0XHRcdFx0KSxcblx0XHRcdFx0bShcblx0XHRcdFx0XHRcIi5saXN0LXJvdy5wbC5wci1sXCIsXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0b25jcmVhdGU6ICh2bm9kZSkgPT4ge1xuXHRcdFx0XHRcdFx0XHR0aGlzLl9tYWlsUm93Mi5kb21FbGVtZW50ID0gdm5vZGUuZG9tIGFzIEhUTUxFbGVtZW50XG5cdFx0XHRcdFx0XHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB0aGlzLl9tYWlsUm93Mi51cGRhdGUobWFpbDIsIHRydWUsIGZhbHNlKSlcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRzdHlsZToge1xuXHRcdFx0XHRcdFx0XHR0b3A6IHB4KHNpemUubGlzdF9yb3dfaGVpZ2h0KSxcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHR0aGlzLl9tYWlsUm93Mi5yZW5kZXIoKSxcblx0XHRcdFx0KSxcblx0XHRcdF0sXG5cdFx0KVxuXHR9XG59XG4iLCJpbXBvcnQgbSwgeyBDaGlsZCwgQ2hpbGRyZW4sIENvbXBvbmVudCwgVm5vZGUsIFZub2RlRE9NIH0gZnJvbSBcIm1pdGhyaWxcIlxuaW1wb3J0IHR5cGUgeyBUZXh0RmllbGRBdHRycyB9IGZyb20gXCIuLi8uLi9ndWkvYmFzZS9UZXh0RmllbGQuanNcIlxuaW1wb3J0IHsgVGV4dEZpZWxkIH0gZnJvbSBcIi4uLy4uL2d1aS9iYXNlL1RleHRGaWVsZC5qc1wiXG5pbXBvcnQgc3RyZWFtIGZyb20gXCJtaXRocmlsL3N0cmVhbVwiXG5pbXBvcnQgU3RyZWFtIGZyb20gXCJtaXRocmlsL3N0cmVhbVwiXG5pbXBvcnQgeyBEcm9wRG93blNlbGVjdG9yIH0gZnJvbSBcIi4uLy4uL2d1aS9iYXNlL0Ryb3BEb3duU2VsZWN0b3IuanNcIlxuaW1wb3J0IHsgbGFuZyB9IGZyb20gXCIuLi8uLi9taXNjL0xhbmd1YWdlVmlld01vZGVsXCJcbmltcG9ydCB0eXBlIHsgQ3VzdG9tQ29sb3IgfSBmcm9tIFwiLi9DdXN0b21Db2xvcnNFZGl0b3JWaWV3TW9kZWxcIlxuaW1wb3J0IHsgQ3VzdG9tQ29sb3JzRWRpdG9yVmlld01vZGVsIH0gZnJvbSBcIi4vQ3VzdG9tQ29sb3JzRWRpdG9yVmlld01vZGVsXCJcbmltcG9ydCB7IEV4cGFuZGVyQnV0dG9uLCBFeHBhbmRlclBhbmVsIH0gZnJvbSBcIi4uLy4uL2d1aS9iYXNlL0V4cGFuZGVyXCJcbmltcG9ydCB7IEN1c3RvbUNvbG9yRWRpdG9yUHJldmlldyB9IGZyb20gXCIuL0N1c3RvbUNvbG9yRWRpdG9yUHJldmlld1wiXG5pbXBvcnQgeyBkb3duY2FzdCB9IGZyb20gXCJAdHV0YW8vdHV0YW5vdGEtdXRpbHNcIlxuaW1wb3J0IHsgZXhwYW5kSGV4VHJpcGxldCB9IGZyb20gXCIuLi8uLi9ndWkvYmFzZS9Db2xvclwiXG5pbXBvcnQgeyBweCB9IGZyb20gXCIuLi8uLi9ndWkvc2l6ZVwiXG5pbXBvcnQgeyBCYXNlVGhlbWVJZCB9IGZyb20gXCIuLi8uLi9ndWkvdGhlbWVcIlxuXG5leHBvcnQgdHlwZSBTaW1wbGVDdXN0b21Db2xvckVkaXRvckF0dHJzID0ge1xuXHRtb2RlbDogQ3VzdG9tQ29sb3JzRWRpdG9yVmlld01vZGVsXG59XG5leHBvcnQgdHlwZSBDb2xvckNhdGVnb3JpZXMgPSB7XG5cdGNvbnRlbnQ6IEFycmF5PEN1c3RvbUNvbG9yPlxuXHRoZWFkZXI6IEFycmF5PEN1c3RvbUNvbG9yPlxuXHRuYXZpZ2F0aW9uOiBBcnJheTxDdXN0b21Db2xvcj5cblx0b3RoZXI6IEFycmF5PEN1c3RvbUNvbG9yPlxufVxuZXhwb3J0IGNvbnN0IENPTE9SX1BJQ0tFUl9XSURUSCA9IDQwMFxuZXhwb3J0IGNvbnN0IEFEVkFOQ0VEX1RFWFRGSUVMRF9XSURUSCA9IDM0NFxuZXhwb3J0IGNvbnN0IENBVEVHT1JZX1dJRFRIID0gNzUwXG5cbi8qKlxuICogIEVkaXRvciB0aGF0IHNpbXBsaWZpZXMgdGhlIGV4aXN0aW5nIHdoaXRlbGFiZWwgZWRpdG9yLCBhbGxvd2luZyBmb3IgZWFzeSBjaGFuZ2VzIHRvIGFjY2VudCBjb2xvciBhbmQgYmFzZSB0aGVtZSwgYWxzbyBzaG93aW5nIGEgcHJldmlld1xuICovXG5leHBvcnQgY2xhc3MgQ3VzdG9tQ29sb3JFZGl0b3IgaW1wbGVtZW50cyBDb21wb25lbnQ8U2ltcGxlQ3VzdG9tQ29sb3JFZGl0b3JBdHRycz4ge1xuXHRwcml2YXRlIF9jb2xvclBpY2tlckRvbTogSFRNTElucHV0RWxlbWVudCB8IG51bGwgPSBudWxsXG5cdHByaXZhdGUgcmVhZG9ubHkgX2FkdmFuY2VkU2V0dGluZ3NFbmFibGVkOiBTdHJlYW08Ym9vbGVhbj5cblxuXHRjb25zdHJ1Y3RvcigpIHtcblx0XHR0aGlzLl9hZHZhbmNlZFNldHRpbmdzRW5hYmxlZCA9IHN0cmVhbTxib29sZWFuPihmYWxzZSlcblx0fVxuXG5cdHZpZXcodm5vZGU6IFZub2RlPFNpbXBsZUN1c3RvbUNvbG9yRWRpdG9yQXR0cnM+KTogQ2hpbGRyZW4ge1xuXHRcdGNvbnN0IHsgbW9kZWwgfSA9IHZub2RlLmF0dHJzXG5cdFx0Y29uc3Qgc2ltcGxlQ29sb3JQaWNrZXJBdHRyczogVGV4dEZpZWxkQXR0cnMgPSB7XG5cdFx0XHRsYWJlbDogXCJhY2NlbnRDb2xvcl9sYWJlbFwiLFxuXHRcdFx0dmFsdWU6IHZub2RlLmF0dHJzLm1vZGVsLmFjY2VudENvbG9yLFxuXHRcdFx0aW5qZWN0aW9uc1JpZ2h0OiAoKSA9PlxuXHRcdFx0XHRyZW5kZXJDb2xvclBpY2tlcihcblx0XHRcdFx0XHQoaW5wdXRFdmVudCkgPT4ge1xuXHRcdFx0XHRcdFx0dm5vZGUuYXR0cnMubW9kZWwuY2hhbmdlQWNjZW50Q29sb3IoZG93bmNhc3Q8SFRNTElucHV0RWxlbWVudD4oaW5wdXRFdmVudC50YXJnZXQpLnZhbHVlKVxuXHRcdFx0XHRcdFx0bS5yZWRyYXcoKVxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0dm5vZGUuYXR0cnMubW9kZWwuYWNjZW50Q29sb3IsXG5cdFx0XHRcdFx0KHsgZG9tIH0pID0+ICh0aGlzLl9jb2xvclBpY2tlckRvbSA9IGRvbSBhcyBIVE1MSW5wdXRFbGVtZW50KSxcblx0XHRcdFx0KSxcblx0XHRcdG1heFdpZHRoOiBDT0xPUl9QSUNLRVJfV0lEVEgsXG5cdFx0XHRpc1JlYWRPbmx5OiB0cnVlLFxuXHRcdH1cblxuXHRcdC8qXG5cdEN1cnJlbnRseTpcblx0XHRCdXR0b246XG5cdFx0Q29udGVudDpcblx0XHRFbGV2YXRlZDpcblx0XHRIZWFkZXI6XG5cdFx0TGlzdDpcblx0XHRNb2RhbDpcblx0XHROYXZpZ2F0aW9uOlxuXHRcdFRoZW46XG5cdFx0Q29udGVudDogQ29udGVudCwgTGlzdFxuXHRcdEhlYWRlcjogSGVhZGVyXG5cdFx0TmF2aWdhdGlvbjogTmF2aWdhdGlvblxuXHRcdE90aGVyOiBCdXR0b24sIEVsZXZhdGVkLCBNb2RhbFxuXHQgKi9cblx0XHRyZXR1cm4gbShcIlwiLCBbXG5cdFx0XHRtKFwiXCIsIFtcblx0XHRcdFx0bShcIi5mbGV4XCIsIFtcblx0XHRcdFx0XHRtKFwiLmZsZXgtZ3Jvd1wiLCBtKFRleHRGaWVsZCwgc2ltcGxlQ29sb3JQaWNrZXJBdHRycykpLFxuXHRcdFx0XHRcdG0oXG5cdFx0XHRcdFx0XHRcIi5tbC1zLmZsZXgtZ3Jvd1wiLFxuXHRcdFx0XHRcdFx0bShEcm9wRG93blNlbGVjdG9yLCB7XG5cdFx0XHRcdFx0XHRcdGxhYmVsOiBcImJhc2VUaGVtZV9sYWJlbFwiLFxuXHRcdFx0XHRcdFx0XHRpdGVtczogW1xuXHRcdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHRcdG5hbWU6IGxhbmcuZ2V0KFwibGlnaHRfbGFiZWxcIiksXG5cdFx0XHRcdFx0XHRcdFx0XHR2YWx1ZTogXCJsaWdodFwiLFxuXHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRcdFx0bmFtZTogbGFuZy5nZXQoXCJkYXJrX2xhYmVsXCIpLFxuXHRcdFx0XHRcdFx0XHRcdFx0dmFsdWU6IFwiZGFya1wiLFxuXHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdF0sXG5cdFx0XHRcdFx0XHRcdHNlbGVjdGVkVmFsdWU6IHZub2RlLmF0dHJzLm1vZGVsLmJhc2VUaGVtZUlkLFxuXHRcdFx0XHRcdFx0XHRzZWxlY3Rpb25DaGFuZ2VkSGFuZGxlcjogKHY6IEJhc2VUaGVtZUlkKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0dm5vZGUuYXR0cnMubW9kZWwuY2hhbmdlQmFzZVRoZW1lKHYpXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHR9KSxcblx0XHRcdFx0XHQpLFxuXHRcdFx0XHRdKSxcblx0XHRcdFx0bShDdXN0b21Db2xvckVkaXRvclByZXZpZXcpLFxuXHRcdFx0XSksXG5cdFx0XHRtKFwiXCIsIFtcblx0XHRcdFx0bShFeHBhbmRlckJ1dHRvbiwge1xuXHRcdFx0XHRcdGxhYmVsOiBcImFkdmFuY2VkX2xhYmVsXCIsXG5cdFx0XHRcdFx0ZXhwYW5kZWQ6IHRoaXMuX2FkdmFuY2VkU2V0dGluZ3NFbmFibGVkKCksXG5cdFx0XHRcdFx0b25FeHBhbmRlZENoYW5nZTogdGhpcy5fYWR2YW5jZWRTZXR0aW5nc0VuYWJsZWQsXG5cdFx0XHRcdH0pLFxuXHRcdFx0XHRtKFxuXHRcdFx0XHRcdEV4cGFuZGVyUGFuZWwsXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0ZXhwYW5kZWQ6IHRoaXMuX2FkdmFuY2VkU2V0dGluZ3NFbmFibGVkKCksXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRbXG5cdFx0XHRcdFx0XHRtKFwiLnNtYWxsLm10XCIsIGxhbmcuZ2V0KFwiY3VzdG9tQ29sb3JzSW5mb19tc2dcIikpLFxuXHRcdFx0XHRcdFx0bShcIi5mbGV4LmZsZXgtY29sdW1uXCIsIFtcblx0XHRcdFx0XHRcdFx0T2JqZWN0LmVudHJpZXModGhpcy5fZ2V0R3JvdXBlZENvbG9ycyhtb2RlbC5jdXN0b21Db2xvcnMpKS5tYXAoKFtuYW1lLCBjb2xvcnNdKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuIG0oXCJcIiwgW1xuXHRcdFx0XHRcdFx0XHRcdFx0bShcIi5oNC5tdC1sXCIsIGNhcGl0YWxpemVGaXJzdExldHRlck9mU3RyaW5nKG5hbWUpKSxcblx0XHRcdFx0XHRcdFx0XHRcdG0oXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFwiLmVkaXRvci1ib3JkZXIudGV4dC1icmVhay53cmFwcGluZy1yb3dcIixcblx0XHRcdFx0XHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHN0eWxlOiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRtYXhXaWR0aDogcHgoQ0FURUdPUllfV0lEVEgpLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFtjb2xvcnMubWFwKChjKSA9PiByZW5kZXJDdXN0b21Db2xvckZpZWxkKG1vZGVsLCBjKSldLFxuXHRcdFx0XHRcdFx0XHRcdFx0KSxcblx0XHRcdFx0XHRcdFx0XHRdKVxuXHRcdFx0XHRcdFx0XHR9KSxcblx0XHRcdFx0XHRcdF0pLFxuXHRcdFx0XHRcdF0sXG5cdFx0XHRcdCksXG5cdFx0XHRdKSxcblx0XHRdKVxuXHR9XG5cblx0LyoqXG5cdCAqXG5cdCAqL1xuXHRfZ2V0R3JvdXBlZENvbG9ycyhjb2xvcnM6IFJlYWRvbmx5QXJyYXk8Q3VzdG9tQ29sb3I+KTogQ29sb3JDYXRlZ29yaWVzIHtcblx0XHRjb25zdCBncm91cGVkQ29sb3JzOiBDb2xvckNhdGVnb3JpZXMgPSB7XG5cdFx0XHRjb250ZW50OiBbXSxcblx0XHRcdGhlYWRlcjogW10sXG5cdFx0XHRuYXZpZ2F0aW9uOiBbXSxcblx0XHRcdG90aGVyOiBbXSxcblx0XHR9XG5cblx0XHRmb3IgKGNvbnN0IGNvbG9yIG9mIGNvbG9ycykge1xuXHRcdFx0aWYgKGNvbG9yLm5hbWUuc3RhcnRzV2l0aChcImNvbnRlbnRcIikgfHwgY29sb3IubmFtZS5zdGFydHNXaXRoKFwibGlzdFwiKSkge1xuXHRcdFx0XHRncm91cGVkQ29sb3JzLmNvbnRlbnQucHVzaChjb2xvcilcblx0XHRcdH0gZWxzZSBpZiAoY29sb3IubmFtZS5zdGFydHNXaXRoKFwiaGVhZGVyXCIpKSB7XG5cdFx0XHRcdGdyb3VwZWRDb2xvcnMuaGVhZGVyLnB1c2goY29sb3IpXG5cdFx0XHR9IGVsc2UgaWYgKGNvbG9yLm5hbWUuc3RhcnRzV2l0aChcIm5hdmlnYXRpb25cIikpIHtcblx0XHRcdFx0Z3JvdXBlZENvbG9ycy5uYXZpZ2F0aW9uLnB1c2goY29sb3IpXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRncm91cGVkQ29sb3JzLm90aGVyLnB1c2goY29sb3IpXG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGdyb3VwZWRDb2xvcnNcblx0fVxufVxuXG5mdW5jdGlvbiByZW5kZXJDdXN0b21Db2xvckZpZWxkKG1vZGVsOiBDdXN0b21Db2xvcnNFZGl0b3JWaWV3TW9kZWwsIHsgbmFtZSwgdmFsdWUsIGRlZmF1bHRWYWx1ZSwgdmFsaWQgfTogQ3VzdG9tQ29sb3IpOiBDaGlsZCB7XG5cdHJldHVybiBtKFxuXHRcdFwiXCIsXG5cdFx0e1xuXHRcdFx0c3R5bGU6IHtcblx0XHRcdFx0bWF4V2lkdGg6IHB4KEFEVkFOQ0VEX1RFWFRGSUVMRF9XSURUSCksXG5cdFx0XHR9LFxuXHRcdH0sXG5cdFx0W1xuXHRcdFx0bShUZXh0RmllbGQsIHtcblx0XHRcdFx0bGFiZWw6IGxhbmcubWFrZVRyYW5zbGF0aW9uKG5hbWUsIG5hbWUpLFxuXHRcdFx0XHR2YWx1ZTogdmFsdWUsXG5cdFx0XHRcdGluamVjdGlvbnNSaWdodDogKCkgPT5cblx0XHRcdFx0XHRyZW5kZXJDb2xvclBpY2tlcigoZXZlbnQpID0+IG1vZGVsLmFkZEN1c3RvbWl6YXRpb24obmFtZSwgZG93bmNhc3Q8SFRNTElucHV0RWxlbWVudD4oZXZlbnQudGFyZ2V0KS52YWx1ZSksIHByb2Nlc3NDb2xvcklucHV0VmFsdWUodmFsdWUpKSxcblx0XHRcdFx0b25pbnB1dDogKHZhbCkgPT4ge1xuXHRcdFx0XHRcdG1vZGVsLmFkZEN1c3RvbWl6YXRpb24obmFtZSwgdmFsKVxuXHRcdFx0XHR9LFxuXHRcdFx0fSksXG5cdFx0XHRyZW5kZXJEZWZhdWx0Q29sb3JMaW5lKGRlZmF1bHRWYWx1ZSwgdmFsaWQpLFxuXHRcdF0sXG5cdClcbn1cblxuZnVuY3Rpb24gcmVuZGVyQ29sb3JQaWNrZXIob25JbnB1dDogKGFyZzA6IEV2ZW50KSA9PiB1bmtub3duLCB2YWx1ZTogc3RyaW5nLCBvbmNyZWF0ZT86ICh2bm9kZTogVm5vZGVET008dm9pZD4pID0+IHZvaWQpOiBDaGlsZCB7XG5cdHJldHVybiBtKFwiaW5wdXQuY29sb3ItcGlja2VyLm1iLXhzXCIsIHtcblx0XHR0eXBlOiBcImNvbG9yXCIsXG5cdFx0dmFsdWU6IHZhbHVlLFxuXHRcdG9uaW5wdXQ6IG9uSW5wdXQsXG5cdFx0b25jcmVhdGUsXG5cdH0pXG59XG5cbmZ1bmN0aW9uIHJlbmRlckRlZmF1bHRDb2xvckxpbmUoZGVmYXVsdENvbG9yOiBzdHJpbmcsIHZhbGlkOiBib29sZWFuKTogQ2hpbGQge1xuXHRpZiAodmFsaWQpIHtcblx0XHRyZXR1cm4gbShcIi5zbWFsbC5mbGV4LXNwYWNlLWJldHdlZW5cIiwgW1xuXHRcdFx0bShcblx0XHRcdFx0XCJcIixcblx0XHRcdFx0bGFuZy5nZXQoXCJkZWZhdWx0Q29sb3JfbGFiZWxcIiwge1xuXHRcdFx0XHRcdFwiezF9XCI6IGRlZmF1bHRDb2xvcixcblx0XHRcdFx0fSksXG5cdFx0XHQpLFxuXHRcdFx0bShcIlwiLCB7XG5cdFx0XHRcdHN0eWxlOiB7XG5cdFx0XHRcdFx0d2lkdGg6IFwiMTAwcHhcIixcblx0XHRcdFx0XHRoZWlnaHQ6IFwiMTBweFwiLFxuXHRcdFx0XHRcdFwibWFyZ2luLXRvcFwiOiBcIjJweFwiLFxuXHRcdFx0XHRcdFwiYmFja2dyb3VuZC1jb2xvclwiOiBkZWZhdWx0Q29sb3IsXG5cdFx0XHRcdH0sXG5cdFx0XHR9KSxcblx0XHRdKVxuXHR9IGVsc2Uge1xuXHRcdHJldHVybiBtKFwiLnNtYWxsXCIsIGxhbmcuZ2V0KFwiaW52YWxpZElucHV0Rm9ybWF0X21zZ1wiKSlcblx0fVxufVxuXG4vKipcbiAqIElmIHRoZSBwcm92aWRlZCB2YWx1ZSBpcyBhIDMtZGlnaXQgaGV4IHN0cmluZywgaXQgZXhwYW5kcyBpdCB0byBhIDYtZGlnaXQgb25lICgjUkdCICNSUkdHQkIpXG4gKiBPdGhlcndpc2UsIGl0IHJldHVybnMgdGhlIHByb3ZpZGVkIHZhbHVlXG4gKi9cbmZ1bmN0aW9uIHByb2Nlc3NDb2xvcklucHV0VmFsdWUodmFsdWU6IHN0cmluZykge1xuXHRjb25zdCBpc0hleFRyaXBsZXQgPSAvXiNbMC05YS1mQS1GXVswLTlhLWZBLUZdWzAtOWEtZkEtRl0kLy50ZXN0KHZhbHVlKVxuXG5cdGlmIChpc0hleFRyaXBsZXQpIHtcblx0XHRjb25zdCB3aXRob3V0SGFzaCA9IHZhbHVlLnNsaWNlKDEpXG5cdFx0cmV0dXJuIFwiI1wiICsgZXhwYW5kSGV4VHJpcGxldCh3aXRob3V0SGFzaClcblx0fSBlbHNlIHtcblx0XHRyZXR1cm4gdmFsdWVcblx0fVxufVxuXG5mdW5jdGlvbiBjYXBpdGFsaXplRmlyc3RMZXR0ZXJPZlN0cmluZyhzdHJpbmc6IHN0cmluZyk6IHN0cmluZyB7XG5cdHJldHVybiBzdHJpbmcuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzdHJpbmcuc2xpY2UoMSlcbn1cbiIsImltcG9ydCBtIGZyb20gXCJtaXRocmlsXCJcbmltcG9ydCB7IGxhbmcgfSBmcm9tIFwiLi4vLi4vbWlzYy9MYW5ndWFnZVZpZXdNb2RlbFwiXG5pbXBvcnQgeyBhc3NlcnRNYWluT3JOb2RlIH0gZnJvbSBcIi4uLy4uL2FwaS9jb21tb24vRW52XCJcbmltcG9ydCB7IERpYWxvZyB9IGZyb20gXCIuLi8uLi9ndWkvYmFzZS9EaWFsb2dcIlxuaW1wb3J0IHsgQnV0dG9uVHlwZSB9IGZyb20gXCIuLi8uLi9ndWkvYmFzZS9CdXR0b24uanNcIlxuaW1wb3J0IHR5cGUgeyBEaWFsb2dIZWFkZXJCYXJBdHRycyB9IGZyb20gXCIuLi8uLi9ndWkvYmFzZS9EaWFsb2dIZWFkZXJCYXJcIlxuaW1wb3J0IHsgS2V5cyB9IGZyb20gXCIuLi8uLi9hcGkvY29tbW9uL1R1dGFub3RhQ29uc3RhbnRzXCJcbmltcG9ydCB7IEN1c3RvbUNvbG9yRWRpdG9yIH0gZnJvbSBcIi4vQ3VzdG9tQ29sb3JFZGl0b3JcIlxuaW1wb3J0IHsgQ3VzdG9tQ29sb3JzRWRpdG9yVmlld01vZGVsIH0gZnJvbSBcIi4vQ3VzdG9tQ29sb3JzRWRpdG9yVmlld01vZGVsXCJcblxuYXNzZXJ0TWFpbk9yTm9kZSgpXG5cbmV4cG9ydCBmdW5jdGlvbiBzaG93KG1vZGVsOiBDdXN0b21Db2xvcnNFZGl0b3JWaWV3TW9kZWwpIHtcblx0bW9kZWwuaW5pdCgpXG5cdG1vZGVsLmJ1aWx0VGhlbWUubWFwKCgpID0+IG0ucmVkcmF3KCkpXG5cdGNvbnN0IGZvcm0gPSB7XG5cdFx0dmlldzogKCkgPT4ge1xuXHRcdFx0cmV0dXJuIG0oXCIucGJcIiwgW1xuXHRcdFx0XHRtKEN1c3RvbUNvbG9yRWRpdG9yLCB7XG5cdFx0XHRcdFx0bW9kZWw6IG1vZGVsLFxuXHRcdFx0XHR9KSxcblx0XHRcdF0pXG5cdFx0fSxcblx0fVxuXG5cdGNvbnN0IGNhbmNlbEFjdGlvbiA9ICgpID0+IHtcblx0XHRtb2RlbC5yZXNldEFjdGl2ZUNsaWVudFRoZW1lKCkudGhlbigoKSA9PiBkaWFsb2cuY2xvc2UoKSlcblx0fVxuXG5cdGNvbnN0IG9rQWN0aW9uID0gYXN5bmMgKCkgPT4ge1xuXHRcdGlmIChhd2FpdCBtb2RlbC5zYXZlKCkpIHtcblx0XHRcdGRpYWxvZy5jbG9zZSgpXG5cdFx0fSBlbHNlIHtcblx0XHRcdHJldHVybiBEaWFsb2cubWVzc2FnZShcImNvcnJlY3RWYWx1ZXNfbXNnXCIpXG5cdFx0fVxuXHR9XG5cblx0bGV0IGFjdGlvbkJhckF0dHJzOiBEaWFsb2dIZWFkZXJCYXJBdHRycyA9IHtcblx0XHRsZWZ0OiBbXG5cdFx0XHR7XG5cdFx0XHRcdGxhYmVsOiBcImNhbmNlbF9hY3Rpb25cIixcblx0XHRcdFx0Y2xpY2s6IGNhbmNlbEFjdGlvbixcblx0XHRcdFx0dHlwZTogQnV0dG9uVHlwZS5TZWNvbmRhcnksXG5cdFx0XHR9LFxuXHRcdF0sXG5cdFx0cmlnaHQ6IFtcblx0XHRcdHtcblx0XHRcdFx0bGFiZWw6IFwib2tfYWN0aW9uXCIsXG5cdFx0XHRcdGNsaWNrOiBva0FjdGlvbixcblx0XHRcdFx0dHlwZTogQnV0dG9uVHlwZS5QcmltYXJ5LFxuXHRcdFx0fSxcblx0XHRdLFxuXHRcdG1pZGRsZTogXCJjdXN0b21Db2xvcnNfbGFiZWxcIixcblx0fVxuXHRsZXQgZGlhbG9nID0gRGlhbG9nLmxhcmdlRGlhbG9nKGFjdGlvbkJhckF0dHJzLCBmb3JtKVxuXHRcdC5hZGRTaG9ydGN1dCh7XG5cdFx0XHRrZXk6IEtleXMuRVNDLFxuXHRcdFx0ZXhlYzogY2FuY2VsQWN0aW9uLFxuXHRcdFx0aGVscDogXCJjbG9zZV9hbHRcIixcblx0XHR9KVxuXHRcdC5zZXRDbG9zZUhhbmRsZXIoY2FuY2VsQWN0aW9uKVxuXHRcdC5zaG93KClcbn1cbiIsImltcG9ydCB7IGFzc2VydE1haW5Pck5vZGUgfSBmcm9tIFwiLi4vLi4vYXBpL2NvbW1vbi9FbnZcIlxuaW1wb3J0IHR5cGUgeyBCYXNlVGhlbWVJZCwgVGhlbWUgfSBmcm9tIFwiLi4vLi4vZ3VpL3RoZW1lXCJcbmltcG9ydCB7IGFzc2VydE5vdE51bGwsIGNsb25lLCBkZWJvdW5jZVN0YXJ0LCBkb3duY2FzdCB9IGZyb20gXCJAdHV0YW8vdHV0YW5vdGEtdXRpbHNcIlxuaW1wb3J0IHR5cGUgeyBEb21haW5JbmZvLCBXaGl0ZWxhYmVsQ29uZmlnIH0gZnJvbSBcIi4uLy4uL2FwaS9lbnRpdGllcy9zeXMvVHlwZVJlZnMuanNcIlxuaW1wb3J0IHsgaXNWYWxpZENvbG9yQ29kZSB9IGZyb20gXCIuLi8uLi9ndWkvYmFzZS9Db2xvclwiXG5pbXBvcnQgc3RyZWFtIGZyb20gXCJtaXRocmlsL3N0cmVhbVwiXG5pbXBvcnQgU3RyZWFtIGZyb20gXCJtaXRocmlsL3N0cmVhbVwiXG5pbXBvcnQgdHlwZSB7IEN1c3RvbWl6YXRpb25LZXksIFRoZW1lQ3VzdG9taXphdGlvbnMsIFRoZW1lS2V5IH0gZnJvbSBcIi4uLy4uL21pc2MvV2hpdGVsYWJlbEN1c3RvbWl6YXRpb25zXCJcbmltcG9ydCB7IFRoZW1lQ29udHJvbGxlciB9IGZyb20gXCIuLi8uLi9ndWkvVGhlbWVDb250cm9sbGVyXCJcbmltcG9ydCB7IEVudGl0eUNsaWVudCB9IGZyb20gXCIuLi8uLi9hcGkvY29tbW9uL0VudGl0eUNsaWVudFwiXG5pbXBvcnQgdHlwZSB7IExvZ2luQ29udHJvbGxlciB9IGZyb20gXCIuLi8uLi9hcGkvbWFpbi9Mb2dpbkNvbnRyb2xsZXJcIlxuXG5hc3NlcnRNYWluT3JOb2RlKClcbmV4cG9ydCB0eXBlIEN1c3RvbUNvbG9yID0ge1xuXHRuYW1lOiBUaGVtZUtleVxuXHR2YWx1ZTogc3RyaW5nXG5cdGRlZmF1bHRWYWx1ZTogc3RyaW5nXG5cdHZhbGlkOiBib29sZWFuXG59XG5cbmV4cG9ydCBjbGFzcyBDdXN0b21Db2xvcnNFZGl0b3JWaWV3TW9kZWwge1xuXHRwcml2YXRlIF9jdXN0b21pemF0aW9uczogVGhlbWVDdXN0b21pemF0aW9uc1xuXHRwcml2YXRlIHJlYWRvbmx5IF93aGl0ZWxhYmVsQ29uZmlnOiBXaGl0ZWxhYmVsQ29uZmlnXG5cdHByaXZhdGUgcmVhZG9ubHkgX3doaXRlbGFiZWxEb21haW5JbmZvOiBEb21haW5JbmZvXG5cdHByaXZhdGUgX2FjY2VudENvbG9yITogc3RyaW5nXG5cdHByaXZhdGUgX2Jhc2VUaGVtZSE6IEJhc2VUaGVtZUlkXG5cdHByaXZhdGUgcmVhZG9ubHkgX3RoZW1lQ29udHJvbGxlcjogVGhlbWVDb250cm9sbGVyXG5cdHByaXZhdGUgcmVhZG9ubHkgX2VudGl0eUNsaWVudDogRW50aXR5Q2xpZW50XG5cdHByaXZhdGUgcmVhZG9ubHkgX2xvZ2luQ29udHJvbGxlcjogTG9naW5Db250cm9sbGVyXG5cdHByaXZhdGUgcmVhZG9ubHkgX3RoZW1lQmVmb3JlUHJldmlldzogVGhlbWVcblx0cmVhZG9ubHkgYnVpbHRUaGVtZTogU3RyZWFtPFRoZW1lPlxuXG5cdGNvbnN0cnVjdG9yKFxuXHRcdGN1cnJlbnRUaGVtZTogVGhlbWUsXG5cdFx0dGhlbWVDdXN0b21pemF0aW9uczogVGhlbWVDdXN0b21pemF0aW9ucyxcblx0XHR3aGl0ZWxhYmVsQ29uZmlnOiBXaGl0ZWxhYmVsQ29uZmlnLFxuXHRcdHdoaXRlbGFiZWxEb21haW5JbmZvOiBEb21haW5JbmZvLFxuXHRcdHRoZW1lQ29udHJvbGxlcjogVGhlbWVDb250cm9sbGVyLFxuXHRcdGVudGl0eUNsaWVudDogRW50aXR5Q2xpZW50LFxuXHRcdGxvZ2luQ29udHJvbGxlcjogTG9naW5Db250cm9sbGVyLFxuXHQpIHtcblx0XHR0aGlzLl90aGVtZUJlZm9yZVByZXZpZXcgPSBPYmplY3QuZnJlZXplKGN1cnJlbnRUaGVtZSlcblx0XHR0aGlzLl9jdXN0b21pemF0aW9ucyA9IGNsb25lKHRoZW1lQ3VzdG9taXphdGlvbnMpXG5cdFx0dGhpcy5fd2hpdGVsYWJlbERvbWFpbkluZm8gPSB3aGl0ZWxhYmVsRG9tYWluSW5mb1xuXHRcdHRoaXMuX3doaXRlbGFiZWxDb25maWcgPSB3aGl0ZWxhYmVsQ29uZmlnXG5cdFx0dGhpcy5fdGhlbWVDb250cm9sbGVyID0gdGhlbWVDb250cm9sbGVyXG5cdFx0dGhpcy5fZW50aXR5Q2xpZW50ID0gZW50aXR5Q2xpZW50XG5cdFx0dGhpcy5fbG9naW5Db250cm9sbGVyID0gbG9naW5Db250cm9sbGVyXG5cdFx0dGhpcy5idWlsdFRoZW1lID0gc3RyZWFtKClcblx0XHRjb25zdCBiYXNlVGhlbWVJZCA9IHRoZW1lQ3VzdG9taXphdGlvbnMuYmFzZSA/PyBcImxpZ2h0XCJcblxuXHRcdGNvbnN0IGFjY2VudENvbG9yID0gdGhlbWVDdXN0b21pemF0aW9ucy5jb250ZW50X2FjY2VudCA/PyB0aGlzLl90aGVtZUNvbnRyb2xsZXIuZ2V0RGVmYXVsdFRoZW1lKCkuY29udGVudF9hY2NlbnRcblxuXHRcdHRoaXMuY2hhbmdlQmFzZVRoZW1lKGJhc2VUaGVtZUlkKVxuXHRcdHRoaXMuY2hhbmdlQWNjZW50Q29sb3IoYWNjZW50Q29sb3IpXG5cdH1cblxuXHRpbml0KCkge1xuXHRcdHRoaXMuX2FwcGx5RWRpdGVkVGhlbWUoKVxuXHR9XG5cblx0Z2V0IGN1c3RvbUNvbG9ycygpOiBSZWFkb25seUFycmF5PEN1c3RvbUNvbG9yPiB7XG5cdFx0Y29uc3QgYmFzZSA9IHRoaXMuX3RoZW1lQ29udHJvbGxlci5nZXRCYXNlVGhlbWUodGhpcy5iYXNlVGhlbWVJZClcblxuXHRcdHJldHVybiBPYmplY3Qua2V5cyhiYXNlKVxuXHRcdFx0Lm1hcCgoa2V5KSA9PiBrZXkgYXMgQ3VzdG9taXphdGlvbktleSlcblx0XHRcdC5maWx0ZXIoKG5hbWUpID0+ICF0aGlzLl9zaGFsbEJlRXhjbHVkZWQobmFtZSkpXG5cdFx0XHQubWFwKChrZXkpID0+IGtleSBhcyBUaGVtZUtleSlcblx0XHRcdC5zb3J0KChhLCBiKSA9PiBhLmxvY2FsZUNvbXBhcmUoYikpXG5cdFx0XHQubWFwKChrZXkpID0+IHtcblx0XHRcdFx0Y29uc3QgdmFsdWUgPSB0aGlzLl9jdXN0b21pemF0aW9uc1trZXldID8/IFwiXCJcblx0XHRcdFx0Ly8gQHRzLWlnbm9yZSB3ZSBhbHJlYWR5IGNoZWNrZWQgdGhhdCBpdCdzIHNhZmVcblx0XHRcdFx0Y29uc3QgZGVmYXVsdFZhbHVlID0gYmFzZVtrZXldXG5cdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0bmFtZToga2V5LFxuXHRcdFx0XHRcdHZhbHVlLFxuXHRcdFx0XHRcdGRlZmF1bHRWYWx1ZTogYXNzZXJ0Tm90TnVsbChkZWZhdWx0VmFsdWUpLFxuXHRcdFx0XHRcdHZhbGlkOiB0aGlzLl9pc1ZhbGlkQ29sb3JWYWx1ZSh2YWx1ZSksXG5cdFx0XHRcdH1cblx0XHRcdH0pXG5cdH1cblxuXHRnZXQgYWNjZW50Q29sb3IoKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gdGhpcy5fYWNjZW50Q29sb3Jcblx0fVxuXG5cdGdldCBjdXN0b21pemF0aW9ucygpOiBUaGVtZUN1c3RvbWl6YXRpb25zIHtcblx0XHRyZXR1cm4gdGhpcy5fY3VzdG9taXphdGlvbnNcblx0fVxuXG5cdGdldCBiYXNlVGhlbWVJZCgpOiBCYXNlVGhlbWVJZCB7XG5cdFx0cmV0dXJuIHRoaXMuX2Jhc2VUaGVtZVxuXHR9XG5cblx0Z2V0RGVmYXVsdENvbG9yKGNvbG9yTmFtZTogVGhlbWVLZXkpOiBzdHJpbmcge1xuXHRcdHJldHVybiBhc3NlcnROb3ROdWxsKHRoaXMuX3RoZW1lQ29udHJvbGxlci5nZXRCYXNlVGhlbWUodGhpcy5iYXNlVGhlbWVJZClbY29sb3JOYW1lXSlcblx0fVxuXG5cdGNoYW5nZUFjY2VudENvbG9yKGFjY2VudENvbG9yOiBzdHJpbmcpIHtcblx0XHR0aGlzLl9hY2NlbnRDb2xvciA9IGFjY2VudENvbG9yXG5cdFx0dGhpcy5hZGRDdXN0b21pemF0aW9uKFwibGlzdF9hY2NlbnRfZmdcIiwgYWNjZW50Q29sb3IpXG5cdFx0dGhpcy5hZGRDdXN0b21pemF0aW9uKFwiY29udGVudF9hY2NlbnRcIiwgYWNjZW50Q29sb3IpXG5cdFx0dGhpcy5hZGRDdXN0b21pemF0aW9uKFwiY29udGVudF9idXR0b25fc2VsZWN0ZWRcIiwgYWNjZW50Q29sb3IpXG5cdFx0dGhpcy5hZGRDdXN0b21pemF0aW9uKFwibmF2aWdhdGlvbl9idXR0b25fc2VsZWN0ZWRcIiwgYWNjZW50Q29sb3IpXG5cdFx0dGhpcy5hZGRDdXN0b21pemF0aW9uKFwiaGVhZGVyX2J1dHRvbl9zZWxlY3RlZFwiLCBhY2NlbnRDb2xvcilcblxuXHRcdHRoaXMuX2FwcGx5RWRpdGVkVGhlbWUoKVxuXHR9XG5cblx0Y2hhbmdlQmFzZVRoZW1lKGJhc2VUaGVtZUlkOiBCYXNlVGhlbWVJZCkge1xuXHRcdHRoaXMuX2Jhc2VUaGVtZSA9IGJhc2VUaGVtZUlkXG5cdFx0dGhpcy5hZGRDdXN0b21pemF0aW9uKFwiYmFzZVwiLCBiYXNlVGhlbWVJZClcblxuXHRcdHRoaXMuX2FwcGx5RWRpdGVkVGhlbWUoKVxuXHR9XG5cblx0LyoqXG5cdCAqIFRyeSB0byBzYXZlIGNoYW5nZXMuIGlmIHRoZXJlIGFyZSBpbnZhbGlkIGNvbG9yIHZhbHVlcyBpbiB0aGUgdGhlbWUgZG9lc24ndCBzYXZlIGFuZCByZXR1cm5zIGZhbHNlLCBlbHNlIHNhdmVzIGFuZCByZXR1cm5zIHRydWVcblx0ICovXG5cdGFzeW5jIHNhdmUoKTogUHJvbWlzZTxib29sZWFuPiB7XG5cdFx0Y29uc3QgY29sb3JzID0gT2JqZWN0LmtleXModGhpcy5jdXN0b21pemF0aW9ucykuZmlsdGVyKChuYW1lKSA9PiBuYW1lICE9PSBcImxvZ29cIiAmJiBuYW1lICE9PSBcInRoZW1lSWRcIiAmJiBuYW1lICE9PSBcImJhc2VcIikgYXMgQ3VzdG9taXphdGlvbktleVtdXG5cblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGNvbG9ycy5sZW5ndGg7IGkrKykge1xuXHRcdFx0aWYgKCF0aGlzLl9pc1ZhbGlkQ29sb3JWYWx1ZSh0aGlzLmN1c3RvbWl6YXRpb25zW2NvbG9yc1tpXV0gPz8gXCJcIikpIHtcblx0XHRcdFx0cmV0dXJuIGZhbHNlXG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0dGhpcy5hZGRDdXN0b21pemF0aW9uKFwidGhlbWVJZFwiLCB0aGlzLl93aGl0ZWxhYmVsRG9tYWluSW5mby5kb21haW4pXG5cdFx0dGhpcy5fd2hpdGVsYWJlbENvbmZpZy5qc29uVGhlbWUgPSBKU09OLnN0cmluZ2lmeSh0aGlzLmN1c3RvbWl6YXRpb25zKVxuXHRcdGF3YWl0IHRoaXMuX2VudGl0eUNsaWVudC51cGRhdGUodGhpcy5fd2hpdGVsYWJlbENvbmZpZylcblxuXHRcdGlmICghdGhpcy5fbG9naW5Db250cm9sbGVyLmlzV2hpdGVsYWJlbCgpKSB7XG5cdFx0XHRhd2FpdCB0aGlzLnJlc2V0QWN0aXZlQ2xpZW50VGhlbWUoKVxuXHRcdH1cblxuXHRcdHJldHVybiB0cnVlXG5cdH1cblxuXHRhc3luYyByZXNldEFjdGl2ZUNsaWVudFRoZW1lKCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGF3YWl0IHRoaXMuX3RoZW1lQ29udHJvbGxlci5hcHBseUN1c3RvbWl6YXRpb25zKFxuXHRcdFx0ZG93bmNhc3QoXG5cdFx0XHRcdE9iamVjdC5hc3NpZ24oXG5cdFx0XHRcdFx0e30sXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0YmFzZTogbnVsbCxcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdHRoaXMuX3RoZW1lQmVmb3JlUHJldmlldyxcblx0XHRcdFx0KSxcblx0XHRcdCksXG5cdFx0XHRmYWxzZSxcblx0XHQpXG5cdH1cblxuXHRhZGRDdXN0b21pemF0aW9uKG5hbWVPZktleTogQ3VzdG9taXphdGlvbktleSwgY29sb3JWYWx1ZTogc3RyaW5nKSB7XG5cdFx0Ly8gQHRzLWlnbm9yZSBpdCdzIHByZXR0eSBoYXJkIHRvIGRlZmluZSB3aGF0IHdlIHdhbnRcblx0XHR0aGlzLmN1c3RvbWl6YXRpb25zW25hbWVPZktleV0gPSBjb2xvclZhbHVlXG5cblx0XHR0aGlzLl9hcHBseUVkaXRlZFRoZW1lKClcblx0fVxuXG5cdF9pc1ZhbGlkQ29sb3JWYWx1ZShjb2xvclZhbHVlOiBzdHJpbmcpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gaXNWYWxpZENvbG9yQ29kZShjb2xvclZhbHVlLnRyaW0oKSkgfHwgY29sb3JWYWx1ZS50cmltKCkgPT09IFwiXCJcblx0fVxuXG5cdC8qKlxuXHQgKiBUaGVzZSB2YWx1ZXMgc2hhbGwgYmUgZXhjbHVkZWQgd2hlbiByZW5kZXJpbmcgdGhlIGFkdmFuY2VkIFRleHRGaWVsZHNcblx0ICogQHJldHVybiBib29sZWFuLCB0cnVlIGlmZiBwcm92aWRlZCBwYXJhbWV0ZXIgJ25hbWUnIHNoYWxsIGJlIGV4Y2x1ZGVkXG5cdCAqL1xuXHRfc2hhbGxCZUV4Y2x1ZGVkKG5hbWU6IEN1c3RvbWl6YXRpb25LZXkpOiBib29sZWFuIHtcblx0XHRjb25zdCBleGNsdWRlZENvbG9ycyA9IFtcblx0XHRcdFwibG9nb1wiLFxuXHRcdFx0XCJ0aGVtZUlkXCIsXG5cdFx0XHRcImJhc2VcIixcblx0XHRcdFwibGlzdF9hY2NlbnRfZmdcIixcblx0XHRcdFwiY29udGVudF9idXR0b25fc2VsZWN0ZWRcIixcblx0XHRcdFwibmF2aWdhdGlvbl9idXR0b25fc2VsZWN0ZWRcIixcblx0XHRcdFwiaGVhZGVyX2J1dHRvbl9zZWxlY3RlZFwiLFxuXHRcdFx0XCJjb250ZW50X2FjY2VudFwiLFxuXHRcdFx0XCJjb250ZW50X2FjY2VudF9jeWJlcl9tb25kYXlcIixcblx0XHRcdFwiY29udGVudF9iZ19jeWJlcl9tb25kYXlcIixcblx0XHRcdFwiY29udGVudF9ib3JkZXJfY3liZXJfbW9uZGF5XCIsXG5cdFx0XVxuXHRcdHJldHVybiBleGNsdWRlZENvbG9ycy5pbmNsdWRlcyhuYW1lKVxuXHR9XG5cblx0X2FwcGx5RWRpdGVkVGhlbWU6ICgpID0+IHZvaWQgPSBkZWJvdW5jZVN0YXJ0KDEwMCwgKCkgPT4ge1xuXHRcdHRoaXMuX3JlbW92ZUVtcHR5Q3VzdG9taXphdGlvbnMoKVxuXG5cdFx0dGhpcy5fdGhlbWVDb250cm9sbGVyLmFwcGx5Q3VzdG9taXphdGlvbnModGhpcy5fZmlsdGVyQW5kUmV0dXJuQ3VzdG9taXphdGlvbnMoKSwgZmFsc2UpXG5cdH0pXG5cblx0X3JlbW92ZUVtcHR5Q3VzdG9taXphdGlvbnMoKSB7XG5cdFx0dGhpcy5fY3VzdG9taXphdGlvbnMgPSBkb3duY2FzdChPYmplY3QuZnJvbUVudHJpZXMoT2JqZWN0LmVudHJpZXModGhpcy5jdXN0b21pemF0aW9ucykuZmlsdGVyKChbaywgdl0pID0+IHYgIT09IFwiXCIpKSlcblx0fVxuXG5cdC8qKlxuXHQgKiAgZmlsdGVycyBvdXQgYWxsIGludmFsaWQgY29sb3IgdmFsdWVzIGZyb20gVGhlbWVDdXN0b21pemF0aW9ucyB3aGlsc3Qga2VlcGluZyBsb2dvLCBiYXNlIGFuZCB0aGVtZUlkXG5cdCAqL1xuXHRfZmlsdGVyQW5kUmV0dXJuQ3VzdG9taXphdGlvbnMoKTogVGhlbWVDdXN0b21pemF0aW9ucyB7XG5cdFx0Y29uc3QgY29sb3JWYWx1ZXMgPSBPYmplY3QuZW50cmllcyh0aGlzLmN1c3RvbWl6YXRpb25zKS5maWx0ZXIoKFtuLCB2XSkgPT4gbiAhPT0gXCJ0aGVtZUlkXCIgJiYgbiAhPT0gXCJiYXNlXCIgJiYgbiAhPT0gXCJsb2dvXCIpXG5cdFx0Y29uc3QgZmlsdGVyZWRDb2xvclZhbHVlcyA9IGNvbG9yVmFsdWVzLmZpbHRlcigoW24sIHZdKSA9PiB0aGlzLl9pc1ZhbGlkQ29sb3JWYWx1ZShkb3duY2FzdCh2KSkpXG5cdFx0Zm9yIChjb25zdCBbbiwgdl0gb2YgT2JqZWN0LmVudHJpZXModGhpcy5jdXN0b21pemF0aW9ucykpIHtcblx0XHRcdGlmIChuID09PSBcInRoZW1lSWRcIiB8fCBuID09PSBcImJhc2VcIiB8fCBuID09PSBcImxvZ29cIikge1xuXHRcdFx0XHRmaWx0ZXJlZENvbG9yVmFsdWVzLnB1c2goW24sIHZdKVxuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gZG93bmNhc3QoT2JqZWN0LmZyb21FbnRyaWVzKGZpbHRlcmVkQ29sb3JWYWx1ZXMpKVxuXHR9XG59XG4iLCJpbXBvcnQgeyBsYW5nIH0gZnJvbSBcIi4uLy4uL21pc2MvTGFuZ3VhZ2VWaWV3TW9kZWxcIlxuaW1wb3J0IHsgRGlhbG9nIH0gZnJvbSBcIi4uLy4uL2d1aS9iYXNlL0RpYWxvZ1wiXG5pbXBvcnQgeyBhc3NlcnROb3ROdWxsLCBjb250YWlucywgZG93bmNhc3QsIHVpbnQ4QXJyYXlUb0Jhc2U2NCwgdXRmOFVpbnQ4QXJyYXlUb1N0cmluZyB9IGZyb20gXCJAdHV0YW8vdHV0YW5vdGEtdXRpbHNcIlxuaW1wb3J0IHsgSWNvbnMgfSBmcm9tIFwiLi4vLi4vZ3VpL2Jhc2UvaWNvbnMvSWNvbnMuanNcIlxuaW1wb3J0IHsgQUxMT1dFRF9JTUFHRV9GT1JNQVRTLCBNQVhfTE9HT19TSVpFIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9hcGkvY29tbW9uL1R1dGFub3RhQ29uc3RhbnRzXCJcbmltcG9ydCBtLCB7IENoaWxkcmVuLCBDb21wb25lbnQsIFZub2RlIH0gZnJvbSBcIm1pdGhyaWxcIlxuaW1wb3J0IHsgVGV4dEZpZWxkLCBUZXh0RmllbGRBdHRycyB9IGZyb20gXCIuLi8uLi9ndWkvYmFzZS9UZXh0RmllbGQuanNcIlxuaW1wb3J0ICogYXMgRWRpdEN1c3RvbUNvbG9yc0RpYWxvZyBmcm9tIFwiLi9FZGl0Q3VzdG9tQ29sb3JzRGlhbG9nXCJcbmltcG9ydCB7IEN1c3RvbUNvbG9yc0VkaXRvclZpZXdNb2RlbCB9IGZyb20gXCIuL0N1c3RvbUNvbG9yc0VkaXRvclZpZXdNb2RlbFwiXG5pbXBvcnQgdHlwZSB7IERvbWFpbkluZm8sIFdoaXRlbGFiZWxDb25maWcgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2FwaS9lbnRpdGllcy9zeXMvVHlwZVJlZnMuanNcIlxuaW1wb3J0IHR5cGUgeyBUaGVtZUN1c3RvbWl6YXRpb25zIH0gZnJvbSBcIi4uLy4uL21pc2MvV2hpdGVsYWJlbEN1c3RvbWl6YXRpb25zLmpzXCJcbmltcG9ydCB7IGxvY2F0b3IgfSBmcm9tIFwiLi4vLi4vYXBpL21haW4vQ29tbW9uTG9jYXRvci5qc1wiXG5pbXBvcnQgeyBzaG93RmlsZUNob29zZXIgfSBmcm9tIFwiLi4vLi4vZmlsZS9GaWxlQ29udHJvbGxlci5qc1wiXG5pbXBvcnQgeyBJY29uQnV0dG9uIH0gZnJvbSBcIi4uLy4uL2d1aS9iYXNlL0ljb25CdXR0b24uanNcIlxuaW1wb3J0IHsgQnV0dG9uU2l6ZSB9IGZyb20gXCIuLi8uLi9ndWkvYmFzZS9CdXR0b25TaXplLmpzXCJcblxuZXhwb3J0IHR5cGUgV2hpdGVsYWJlbERhdGEgPSB7XG5cdGN1c3RvbVRoZW1lOiBUaGVtZUN1c3RvbWl6YXRpb25zXG5cdHdoaXRlbGFiZWxDb25maWc6IFdoaXRlbGFiZWxDb25maWdcblx0d2hpdGVsYWJlbERvbWFpbkluZm86IERvbWFpbkluZm9cbn1cbmV4cG9ydCB0eXBlIFdoaXRlbGFiZWxUaGVtZVNldHRpbmdzQXR0cnMgPSB7XG5cdHdoaXRlbGFiZWxEYXRhOiBudWxsIHwgV2hpdGVsYWJlbERhdGFcbn1cblxuZXhwb3J0IGNsYXNzIFdoaXRlbGFiZWxUaGVtZVNldHRpbmdzIGltcGxlbWVudHMgQ29tcG9uZW50PFdoaXRlbGFiZWxUaGVtZVNldHRpbmdzQXR0cnM+IHtcblx0dmlldyh2bm9kZTogVm5vZGU8V2hpdGVsYWJlbFRoZW1lU2V0dGluZ3NBdHRycz4pOiBDaGlsZHJlbiB7XG5cdFx0Y29uc3QgeyB3aGl0ZWxhYmVsRGF0YSB9ID0gdm5vZGUuYXR0cnNcblx0XHRyZXR1cm4gW3RoaXMucmVuZGVyQ3VzdG9tQ29sb3JzRmllbGQod2hpdGVsYWJlbERhdGEpLCB0aGlzLnJlbmRlckN1c3RvbUxvZ29GaWVsZCh3aGl0ZWxhYmVsRGF0YSldXG5cdH1cblxuXHRwcml2YXRlIHJlbmRlckN1c3RvbUNvbG9yc0ZpZWxkKGRhdGE6IFdoaXRlbGFiZWxEYXRhIHwgbnVsbCk6IENoaWxkcmVuIHtcblx0XHRyZXR1cm4gbShUZXh0RmllbGQsIHtcblx0XHRcdGxhYmVsOiBcImN1c3RvbUNvbG9yc19sYWJlbFwiLFxuXHRcdFx0dmFsdWU6IHRoaXMuYXJlQ3VzdG9tQ29sb3JzRGVmaW5lZChkYXRhPy5jdXN0b21UaGVtZSA/PyBudWxsKSA/IGxhbmcuZ2V0KFwiYWN0aXZhdGVkX2xhYmVsXCIpIDogbGFuZy5nZXQoXCJkZWFjdGl2YXRlZF9sYWJlbFwiKSxcblx0XHRcdGlzUmVhZE9ubHk6IHRydWUsXG5cdFx0XHRpbmplY3Rpb25zUmlnaHQ6ICgpID0+IChkYXRhID8gdGhpcy5yZW5kZXJDdXN0b21Db2xvcnNGaWVsZEJ1dHRvbnMoZGF0YSkgOiBudWxsKSxcblx0XHR9KVxuXHR9XG5cblx0cHJpdmF0ZSByZW5kZXJDdXN0b21Db2xvcnNGaWVsZEJ1dHRvbnMod2hpdGVsYWJlbERhdGE6IFdoaXRlbGFiZWxEYXRhKTogQ2hpbGRyZW4ge1xuXHRcdHJldHVybiBbXG5cdFx0XHR0aGlzLmFyZUN1c3RvbUNvbG9yc0RlZmluZWQod2hpdGVsYWJlbERhdGEuY3VzdG9tVGhlbWUpXG5cdFx0XHRcdD8gbShJY29uQnV0dG9uLCB7XG5cdFx0XHRcdFx0XHR0aXRsZTogXCJkZWFjdGl2YXRlX2FjdGlvblwiLFxuXHRcdFx0XHRcdFx0Y2xpY2s6ICgpID0+IHRoaXMuZGVhY3RpdmF0ZUN1c3RvbUNvbG9ycyh3aGl0ZWxhYmVsRGF0YSksXG5cdFx0XHRcdFx0XHRpY29uOiBJY29ucy5DYW5jZWwsXG5cdFx0XHRcdFx0XHRzaXplOiBCdXR0b25TaXplLkNvbXBhY3QsXG5cdFx0XHRcdCAgfSlcblx0XHRcdFx0OiBudWxsLFxuXHRcdFx0bShJY29uQnV0dG9uLCB7XG5cdFx0XHRcdHRpdGxlOiBcImVkaXRfYWN0aW9uXCIsXG5cdFx0XHRcdGNsaWNrOiAoKSA9PiB0aGlzLnNob3dDdXN0b21Db2xvcnNEaWFsb2cod2hpdGVsYWJlbERhdGEpLFxuXHRcdFx0XHRpY29uOiBJY29ucy5FZGl0LFxuXHRcdFx0XHRzaXplOiBCdXR0b25TaXplLkNvbXBhY3QsXG5cdFx0XHR9KSxcblx0XHRdXG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIGRlYWN0aXZhdGVDdXN0b21Db2xvcnMoeyBjdXN0b21UaGVtZSwgd2hpdGVsYWJlbENvbmZpZywgd2hpdGVsYWJlbERvbWFpbkluZm8gfTogV2hpdGVsYWJlbERhdGEpIHtcblx0XHRjb25zdCBjb25maXJtZWQgPSBhd2FpdCBEaWFsb2cuY29uZmlybShcImNvbmZpcm1EZWFjdGl2YXRlQ3VzdG9tQ29sb3JzX21zZ1wiKVxuXG5cdFx0aWYgKGNvbmZpcm1lZCkge1xuXHRcdFx0Zm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMoY3VzdG9tVGhlbWUpKSB7XG5cdFx0XHRcdGlmIChrZXkgIT09IFwibG9nb1wiKSB7XG5cdFx0XHRcdFx0ZGVsZXRlIGRvd25jYXN0KGN1c3RvbVRoZW1lKVtrZXldXG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHRoaXMuc2F2ZUN1c3RvbVRoZW1lKGN1c3RvbVRoZW1lLCB3aGl0ZWxhYmVsQ29uZmlnLCB3aGl0ZWxhYmVsRG9tYWluSW5mbylcblxuXHRcdFx0aWYgKGxvY2F0b3IubG9naW5zLmlzV2hpdGVsYWJlbCgpKSB7XG5cdFx0XHRcdGF3YWl0IGxvY2F0b3IudGhlbWVDb250cm9sbGVyLmFwcGx5Q3VzdG9taXphdGlvbnMoY3VzdG9tVGhlbWUpXG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSByZW5kZXJDdXN0b21Mb2dvRmllbGQoZGF0YTogV2hpdGVsYWJlbERhdGEgfCBudWxsKTogQ2hpbGRyZW4ge1xuXHRcdGNvbnN0IGN1c3RvbUxvZ29UZXh0ZmllbGRBdHRyczogVGV4dEZpZWxkQXR0cnMgPSB7XG5cdFx0XHRsYWJlbDogXCJjdXN0b21Mb2dvX2xhYmVsXCIsXG5cdFx0XHRoZWxwTGFiZWw6ICgpID0+IGxhbmcuZ2V0KFwiY3VzdG9tTG9nb0luZm9fbXNnXCIpLFxuXHRcdFx0dmFsdWU6IGxhbmcuZ2V0KGRhdGE/LmN1c3RvbVRoZW1lLmxvZ28gIT0gbnVsbCA/IFwiYWN0aXZhdGVkX2xhYmVsXCIgOiBcImRlYWN0aXZhdGVkX2xhYmVsXCIpLFxuXHRcdFx0aXNSZWFkT25seTogdHJ1ZSxcblx0XHRcdGluamVjdGlvbnNSaWdodDogKCkgPT4gKGRhdGEgPyB0aGlzLnJlbmRlckN1c3RvbUxvZ29GaWVsZEJ1dHRvbnMoZGF0YSkgOiBudWxsKSxcblx0XHR9XG5cdFx0cmV0dXJuIG0oVGV4dEZpZWxkLCBjdXN0b21Mb2dvVGV4dGZpZWxkQXR0cnMpXG5cdH1cblxuXHRwcml2YXRlIHJlbmRlckN1c3RvbUxvZ29GaWVsZEJ1dHRvbnMod2hpdGVsYWJlbERhdGE6IFdoaXRlbGFiZWxEYXRhKTogQ2hpbGRyZW4ge1xuXHRcdHJldHVybiBbXG5cdFx0XHR3aGl0ZWxhYmVsRGF0YS5jdXN0b21UaGVtZS5sb2dvXG5cdFx0XHRcdD8gbShJY29uQnV0dG9uLCB7XG5cdFx0XHRcdFx0XHR0aXRsZTogXCJkZWFjdGl2YXRlX2FjdGlvblwiLFxuXHRcdFx0XHRcdFx0Y2xpY2s6IGFzeW5jICgpID0+IHtcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5kZWFjdGl2YXRlQ3VzdG9tTG9nbyh3aGl0ZWxhYmVsRGF0YSlcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRpY29uOiBJY29ucy5DYW5jZWwsXG5cdFx0XHRcdFx0XHRzaXplOiBCdXR0b25TaXplLkNvbXBhY3QsXG5cdFx0XHRcdCAgfSlcblx0XHRcdFx0OiBudWxsLFxuXHRcdFx0bShJY29uQnV0dG9uLCB7XG5cdFx0XHRcdHRpdGxlOiBcImVkaXRfYWN0aW9uXCIsXG5cdFx0XHRcdGNsaWNrOiAoKSA9PiB0aGlzLmVkaXRDdXN0b21Mb2dvKHdoaXRlbGFiZWxEYXRhKSxcblx0XHRcdFx0aWNvbjogSWNvbnMuRWRpdCxcblx0XHRcdFx0c2l6ZTogQnV0dG9uU2l6ZS5Db21wYWN0LFxuXHRcdFx0fSksXG5cdFx0XVxuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyBlZGl0Q3VzdG9tTG9nbyh7IGN1c3RvbVRoZW1lLCB3aGl0ZWxhYmVsQ29uZmlnLCB3aGl0ZWxhYmVsRG9tYWluSW5mbyB9OiBXaGl0ZWxhYmVsRGF0YSkge1xuXHRcdGNvbnN0IGZpbGVzID0gYXdhaXQgc2hvd0ZpbGVDaG9vc2VyKGZhbHNlKVxuXHRcdGxldCBleHRlbnNpb24gPSBmaWxlc1swXS5uYW1lLnRvTG93ZXJDYXNlKCkuc3Vic3RyaW5nKGZpbGVzWzBdLm5hbWUubGFzdEluZGV4T2YoXCIuXCIpICsgMSlcblxuXHRcdGlmIChmaWxlc1swXS5zaXplID4gTUFYX0xPR09fU0laRSB8fCAhY29udGFpbnMoQUxMT1dFRF9JTUFHRV9GT1JNQVRTLCBleHRlbnNpb24pKSB7XG5cdFx0XHREaWFsb2cubWVzc2FnZShcImN1c3RvbUxvZ29JbmZvX21zZ1wiKVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRsZXQgaW1hZ2VEYXRhOiBzdHJpbmdcblxuXHRcdFx0aWYgKGV4dGVuc2lvbiA9PT0gXCJzdmdcIikge1xuXHRcdFx0XHRpbWFnZURhdGEgPSB1dGY4VWludDhBcnJheVRvU3RyaW5nKGZpbGVzWzBdLmRhdGEpXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjb25zdCBleHQgPSBleHRlbnNpb24gPT09IFwianBlZ1wiID8gXCJqcGdcIiA6IGV4dGVuc2lvblxuXHRcdFx0XHRjb25zdCBiNjQgPSB1aW50OEFycmF5VG9CYXNlNjQoZmlsZXNbMF0uZGF0YSlcblx0XHRcdFx0aW1hZ2VEYXRhID0gYDxpbWcgc3JjPVwiZGF0YTppbWFnZS8ke2V4dH07YmFzZTY0LCR7YjY0fVwiPmBcblx0XHRcdH1cblxuXHRcdFx0Y3VzdG9tVGhlbWUubG9nbyA9IGltYWdlRGF0YVxuXHRcdFx0dGhpcy5zYXZlQ3VzdG9tVGhlbWUoY3VzdG9tVGhlbWUsIHdoaXRlbGFiZWxDb25maWcsIHdoaXRlbGFiZWxEb21haW5JbmZvKVxuXG5cdFx0XHRpZiAobG9jYXRvci5sb2dpbnMuaXNXaGl0ZWxhYmVsKCkpIHtcblx0XHRcdFx0YXdhaXQgbG9jYXRvci50aGVtZUNvbnRyb2xsZXIuYXBwbHlDdXN0b21pemF0aW9ucyhjdXN0b21UaGVtZSlcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIGRlYWN0aXZhdGVDdXN0b21Mb2dvKHsgY3VzdG9tVGhlbWUsIHdoaXRlbGFiZWxDb25maWcsIHdoaXRlbGFiZWxEb21haW5JbmZvIH06IFdoaXRlbGFiZWxEYXRhKSB7XG5cdFx0Y29uc3QgY29uZmlybWVkID0gYXdhaXQgRGlhbG9nLmNvbmZpcm0oXCJjb25maXJtRGVhY3RpdmF0ZUN1c3RvbUxvZ29fbXNnXCIpXG5cblx0XHRpZiAoY29uZmlybWVkKSB7XG5cdFx0XHRkZWxldGUgY3VzdG9tVGhlbWUubG9nb1xuXHRcdFx0dGhpcy5zYXZlQ3VzdG9tVGhlbWUoY3VzdG9tVGhlbWUsIHdoaXRlbGFiZWxDb25maWcsIHdoaXRlbGFiZWxEb21haW5JbmZvKVxuXG5cdFx0XHRpZiAobG9jYXRvci5sb2dpbnMuaXNXaGl0ZWxhYmVsKCkpIHtcblx0XHRcdFx0YXdhaXQgbG9jYXRvci50aGVtZUNvbnRyb2xsZXIuYXBwbHlDdXN0b21pemF0aW9ucyhjdXN0b21UaGVtZSlcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIHNob3dDdXN0b21Db2xvcnNEaWFsb2coeyBjdXN0b21UaGVtZSwgd2hpdGVsYWJlbENvbmZpZywgd2hpdGVsYWJlbERvbWFpbkluZm8gfTogV2hpdGVsYWJlbERhdGEpIHtcblx0XHRjb25zdCBjdXJyZW50VGhlbWUgPSBsb2NhdG9yLnRoZW1lQ29udHJvbGxlci5nZXRDdXJyZW50VGhlbWUoKVxuXHRcdGNvbnN0IHZpZXdNb2RlbCA9IG5ldyBDdXN0b21Db2xvcnNFZGl0b3JWaWV3TW9kZWwoXG5cdFx0XHRjdXJyZW50VGhlbWUsXG5cdFx0XHRjdXN0b21UaGVtZSxcblx0XHRcdHdoaXRlbGFiZWxDb25maWcsXG5cdFx0XHRhc3NlcnROb3ROdWxsKHdoaXRlbGFiZWxEb21haW5JbmZvKSxcblx0XHRcdGxvY2F0b3IudGhlbWVDb250cm9sbGVyLFxuXHRcdFx0bG9jYXRvci5lbnRpdHlDbGllbnQsXG5cdFx0XHRsb2NhdG9yLmxvZ2lucyxcblx0XHQpXG5cdFx0RWRpdEN1c3RvbUNvbG9yc0RpYWxvZy5zaG93KHZpZXdNb2RlbClcblx0fVxuXG5cdHByaXZhdGUgYXJlQ3VzdG9tQ29sb3JzRGVmaW5lZCh0aGVtZTogVGhlbWVDdXN0b21pemF0aW9ucyB8IG51bGwpOiBib29sZWFuIHtcblx0XHRpZiAodGhlbWUpIHtcblx0XHRcdHJldHVybiBPYmplY3Qua2V5cyh0aGVtZSkuc29tZShcblx0XHRcdFx0KGtleSkgPT5cblx0XHRcdFx0XHRrZXkgIT09IFwibG9nb1wiICYmXG5cdFx0XHRcdFx0Ly8gQHRzLWlnbm9yZVxuXHRcdFx0XHRcdHRoZW1lPy5ba2V5XSxcblx0XHRcdClcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmV0dXJuIGZhbHNlXG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBzYXZlQ3VzdG9tVGhlbWUoY3VzdG9tVGhlbWU6IFRoZW1lQ3VzdG9taXphdGlvbnMsIHdoaXRlbGFiZWxDb25maWc6IFdoaXRlbGFiZWxDb25maWcsIHdoaXRlbGFiZWxEb21haW5JbmZvOiBEb21haW5JbmZvKSB7XG5cdFx0d2hpdGVsYWJlbENvbmZpZy5qc29uVGhlbWUgPSBKU09OLnN0cmluZ2lmeShjdXN0b21UaGVtZSlcblx0XHRsb2NhdG9yLmVudGl0eUNsaWVudC51cGRhdGUod2hpdGVsYWJlbENvbmZpZylcblx0XHRjdXN0b21UaGVtZS50aGVtZUlkID0gd2hpdGVsYWJlbERvbWFpbkluZm8uZG9tYWluXG5cdH1cbn1cbiIsImltcG9ydCB7IERpYWxvZyB9IGZyb20gXCIuLi8uLi9ndWkvYmFzZS9EaWFsb2dcIlxuaW1wb3J0IHsgbGFuZyB9IGZyb20gXCIuLi8uLi9taXNjL0xhbmd1YWdlVmlld01vZGVsXCJcbmltcG9ydCBtLCB7IENoaWxkcmVuLCBDb21wb25lbnQsIFZub2RlIH0gZnJvbSBcIm1pdGhyaWxcIlxuaW1wb3J0IHsgVGV4dEZpZWxkLCBUZXh0RmllbGRUeXBlIH0gZnJvbSBcIi4uLy4uL2d1aS9iYXNlL1RleHRGaWVsZC5qc1wiXG5pbXBvcnQgeyBJY29ucyB9IGZyb20gXCIuLi8uLi9ndWkvYmFzZS9pY29ucy9JY29uc1wiXG5pbXBvcnQgeyBJY29uQnV0dG9uIH0gZnJvbSBcIi4uLy4uL2d1aS9iYXNlL0ljb25CdXR0b24uanNcIlxuaW1wb3J0IHsgQnV0dG9uU2l6ZSB9IGZyb20gXCIuLi8uLi9ndWkvYmFzZS9CdXR0b25TaXplLmpzXCJcblxuZXhwb3J0IHR5cGUgV2hpdGVsYWJlbEltcHJpbnRBbmRQcml2YWN5U2V0dGluZ3NBdHRycyA9IHtcblx0cHJpdmFjeVN0YXRlbWVudFVybDogc3RyaW5nXG5cdG9uUHJpdmFjeVN0YXRlbWVudFVybENoYW5nZWQ6ICgocHJpdmFjeVN0YXRlbWVudFVybDogc3RyaW5nKSA9PiB1bmtub3duKSB8IG51bGxcblx0aW1wcmludFVybDogc3RyaW5nXG5cdG9uSW1wcmludFVybENoYW5nZWQ6ICgoaW1wcmludFVybDogc3RyaW5nKSA9PiB1bmtub3duKSB8IG51bGxcbn1cblxuZXhwb3J0IGNsYXNzIFdoaXRlbGFiZWxJbXByaW50QW5kUHJpdmFjeVNldHRpbmdzIGltcGxlbWVudHMgQ29tcG9uZW50PFdoaXRlbGFiZWxJbXByaW50QW5kUHJpdmFjeVNldHRpbmdzQXR0cnM+IHtcblx0dmlldyh2bm9kZTogVm5vZGU8V2hpdGVsYWJlbEltcHJpbnRBbmRQcml2YWN5U2V0dGluZ3NBdHRycz4pOiBDaGlsZHJlbiB7XG5cdFx0Y29uc3QgeyBwcml2YWN5U3RhdGVtZW50VXJsLCBvblByaXZhY3lTdGF0ZW1lbnRVcmxDaGFuZ2VkLCBpbXByaW50VXJsLCBvbkltcHJpbnRVcmxDaGFuZ2VkIH0gPSB2bm9kZS5hdHRyc1xuXHRcdHJldHVybiBbXG5cdFx0XHR0aGlzLnJlbmRlcldoaXRlbGFiZWxJbXByaW50U2V0dGluZyhpbXByaW50VXJsLCBvbkltcHJpbnRVcmxDaGFuZ2VkKSxcblx0XHRcdHRoaXMucmVuZGVyUHJpdmFjeVBvbGljeVNldHRpbmcocHJpdmFjeVN0YXRlbWVudFVybCwgb25Qcml2YWN5U3RhdGVtZW50VXJsQ2hhbmdlZCksXG5cdFx0XVxuXHR9XG5cblx0cHJpdmF0ZSByZW5kZXJQcml2YWN5UG9saWN5U2V0dGluZyhwcml2YWN5U3RhdGVtZW50VXJsOiBzdHJpbmcsIG9uUHJpdmFjeVN0YXRlbWVudFVybENoYW5nZWQ6ICgoYXJnMDogc3RyaW5nKSA9PiB1bmtub3duKSB8IG51bGwpOiBDaGlsZHJlbiB7XG5cdFx0cmV0dXJuIG0oVGV4dEZpZWxkLCB7XG5cdFx0XHRsYWJlbDogXCJwcml2YWN5UG9saWN5VXJsX2xhYmVsXCIsXG5cdFx0XHR2YWx1ZTogcHJpdmFjeVN0YXRlbWVudFVybCxcblx0XHRcdGlzUmVhZE9ubHk6IHRydWUsXG5cdFx0XHRpbmplY3Rpb25zUmlnaHQ6ICgpID0+XG5cdFx0XHRcdG9uUHJpdmFjeVN0YXRlbWVudFVybENoYW5nZWRcblx0XHRcdFx0XHQ/IG0oSWNvbkJ1dHRvbiwge1xuXHRcdFx0XHRcdFx0XHR0aXRsZTogXCJlZGl0X2FjdGlvblwiLFxuXHRcdFx0XHRcdFx0XHRjbGljazogKCkgPT4gdGhpcy5lZGl0UHJpdmFjeVN0YXRlbWVudFVybChwcml2YWN5U3RhdGVtZW50VXJsLCBvblByaXZhY3lTdGF0ZW1lbnRVcmxDaGFuZ2VkKSxcblx0XHRcdFx0XHRcdFx0aWNvbjogSWNvbnMuRWRpdCxcblx0XHRcdFx0XHRcdFx0c2l6ZTogQnV0dG9uU2l6ZS5Db21wYWN0LFxuXHRcdFx0XHRcdCAgfSlcblx0XHRcdFx0XHQ6IG51bGwsXG5cdFx0fSlcblx0fVxuXG5cdHByaXZhdGUgZWRpdFByaXZhY3lTdGF0ZW1lbnRVcmwocHJpdmFjeVN0YXRlbWVudFVybDogc3RyaW5nLCBvblByaXZhY3lTdGF0ZW1lbnRVcmxDaGFuZ2VkOiAoYXJnMDogc3RyaW5nKSA9PiB1bmtub3duKSB7XG5cdFx0bGV0IGRpYWxvZyA9IERpYWxvZy5zaG93QWN0aW9uRGlhbG9nKHtcblx0XHRcdHRpdGxlOiBcInByaXZhY3lMaW5rX2xhYmVsXCIsXG5cdFx0XHRjaGlsZDoge1xuXHRcdFx0XHR2aWV3OiAoKSA9PlxuXHRcdFx0XHRcdG0oVGV4dEZpZWxkLCB7XG5cdFx0XHRcdFx0XHRsYWJlbDogXCJwcml2YWN5UG9saWN5VXJsX2xhYmVsXCIsXG5cdFx0XHRcdFx0XHR2YWx1ZTogcHJpdmFjeVN0YXRlbWVudFVybCxcblx0XHRcdFx0XHRcdHR5cGU6IFRleHRGaWVsZFR5cGUuVXJsLFxuXHRcdFx0XHRcdFx0b25pbnB1dDogKHZhbHVlKSA9PiAocHJpdmFjeVN0YXRlbWVudFVybCA9IHZhbHVlLnRyaW0oKSksXG5cdFx0XHRcdFx0fSksXG5cdFx0XHR9LFxuXHRcdFx0YWxsb3dPa1dpdGhSZXR1cm46IHRydWUsXG5cdFx0XHRva0FjdGlvbjogKG9rKSA9PiB7XG5cdFx0XHRcdGlmIChvaykge1xuXHRcdFx0XHRcdG9uUHJpdmFjeVN0YXRlbWVudFVybENoYW5nZWQocHJpdmFjeVN0YXRlbWVudFVybClcblx0XHRcdFx0XHRkaWFsb2cuY2xvc2UoKVxuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdH0pXG5cdFx0cmV0dXJuIHByaXZhY3lTdGF0ZW1lbnRVcmxcblx0fVxuXG5cdHByaXZhdGUgcmVuZGVyV2hpdGVsYWJlbEltcHJpbnRTZXR0aW5nKGltcHJpbnRVcmw6IHN0cmluZywgb25JbXByaW50VXJsQ2hhbmdlZDogKChpbXByaW50VXJsOiBzdHJpbmcpID0+IHVua25vd24pIHwgbnVsbCk6IENoaWxkcmVuIHtcblx0XHRyZXR1cm4gbShUZXh0RmllbGQsIHtcblx0XHRcdGxhYmVsOiBcImltcHJpbnRVcmxfbGFiZWxcIixcblx0XHRcdHZhbHVlOiBpbXByaW50VXJsLFxuXHRcdFx0aXNSZWFkT25seTogdHJ1ZSxcblx0XHRcdGluamVjdGlvbnNSaWdodDogKCkgPT5cblx0XHRcdFx0b25JbXByaW50VXJsQ2hhbmdlZFxuXHRcdFx0XHRcdD8gbShJY29uQnV0dG9uLCB7XG5cdFx0XHRcdFx0XHRcdHRpdGxlOiBcImVkaXRfYWN0aW9uXCIsXG5cdFx0XHRcdFx0XHRcdGNsaWNrOiAoKSA9PiB0aGlzLnNob3dFZGl0SW1wcmludERpYWxvZyhpbXByaW50VXJsLCBvbkltcHJpbnRVcmxDaGFuZ2VkKSxcblx0XHRcdFx0XHRcdFx0aWNvbjogSWNvbnMuRWRpdCxcblx0XHRcdFx0XHRcdFx0c2l6ZTogQnV0dG9uU2l6ZS5Db21wYWN0LFxuXHRcdFx0XHRcdCAgfSlcblx0XHRcdFx0XHQ6IG51bGwsXG5cdFx0fSlcblx0fVxuXG5cdHByaXZhdGUgc2hvd0VkaXRJbXByaW50RGlhbG9nKGltcHJpbnRVcmw6IHN0cmluZywgb25JbXByaW50VXJsQ2hhbmdlZDogKGltcHJpbnRVcmw6IHN0cmluZykgPT4gdW5rbm93bikge1xuXHRcdGNvbnN0IGRpYWxvZyA9IERpYWxvZy5zaG93QWN0aW9uRGlhbG9nKHtcblx0XHRcdHRpdGxlOiBcImltcHJpbnRVcmxfbGFiZWxcIixcblx0XHRcdGNoaWxkOiB7XG5cdFx0XHRcdHZpZXc6ICgpID0+XG5cdFx0XHRcdFx0bShUZXh0RmllbGQsIHtcblx0XHRcdFx0XHRcdGxhYmVsOiBcImltcHJpbnRVcmxfbGFiZWxcIixcblx0XHRcdFx0XHRcdHZhbHVlOiBpbXByaW50VXJsLFxuXHRcdFx0XHRcdFx0dHlwZTogVGV4dEZpZWxkVHlwZS5VcmwsXG5cdFx0XHRcdFx0XHRvbmlucHV0OiAodmFsdWUpID0+IChpbXByaW50VXJsID0gdmFsdWUudHJpbSgpKSxcblx0XHRcdFx0XHR9KSxcblx0XHRcdH0sXG5cdFx0XHRhbGxvd09rV2l0aFJldHVybjogdHJ1ZSxcblx0XHRcdG9rQWN0aW9uOiAob2spID0+IHtcblx0XHRcdFx0aWYgKG9rKSB7XG5cdFx0XHRcdFx0b25JbXByaW50VXJsQ2hhbmdlZChpbXByaW50VXJsKVxuXHRcdFx0XHRcdGRpYWxvZy5jbG9zZSgpXG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0fSlcblx0XHRyZXR1cm4gaW1wcmludFVybFxuXHR9XG59XG4iLCJpbXBvcnQgbSwgeyBDaGlsZHJlbiwgQ29tcG9uZW50LCBWbm9kZSB9IGZyb20gXCJtaXRocmlsXCJcbmltcG9ydCB0eXBlIHsgU2VsZWN0b3JJdGVtTGlzdCB9IGZyb20gXCIuLi8uLi9ndWkvYmFzZS9Ecm9wRG93blNlbGVjdG9yLmpzXCJcbmltcG9ydCB7IERyb3BEb3duU2VsZWN0b3IgfSBmcm9tIFwiLi4vLi4vZ3VpL2Jhc2UvRHJvcERvd25TZWxlY3Rvci5qc1wiXG5pbXBvcnQgeyBEaWFsb2cgfSBmcm9tIFwiLi4vLi4vZ3VpL2Jhc2UvRGlhbG9nXCJcbmltcG9ydCB7IEljb25zIH0gZnJvbSBcIi4uLy4uL2d1aS9iYXNlL2ljb25zL0ljb25zXCJcbmltcG9ydCB7IFRleHRGaWVsZCB9IGZyb20gXCIuLi8uLi9ndWkvYmFzZS9UZXh0RmllbGQuanNcIlxuaW1wb3J0IHsgSWNvbkJ1dHRvbiB9IGZyb20gXCIuLi8uLi9ndWkvYmFzZS9JY29uQnV0dG9uLmpzXCJcbmltcG9ydCB7IEJ1dHRvblNpemUgfSBmcm9tIFwiLi4vLi4vZ3VpL2Jhc2UvQnV0dG9uU2l6ZS5qc1wiXG5cbmV4cG9ydCB0eXBlIFdoaXRlbGFiZWxSZWdpc3RyYXRpb25TZXR0aW5nc0F0dHJzID0ge1xuXHR3aGl0ZWxhYmVsQ29kZTogc3RyaW5nXG5cdG9uV2hpdGVsYWJlbENvZGVDaGFuZ2VkOiAoYXJnMDogc3RyaW5nKSA9PiB1bmtub3duXG5cdGN1cnJlbnRSZWdpc3RyYXRpb25Eb21haW46IHN0cmluZyB8IG51bGxcblx0cG9zc2libGVSZWdpc3RyYXRpb25Eb21haW5zOiBTZWxlY3Rvckl0ZW1MaXN0PHN0cmluZyB8IG51bGw+XG5cdG9uUmVnaXN0cmF0aW9uRG9tYWluU2VsZWN0ZWQ6IChhcmcwOiBzdHJpbmcgfCBudWxsKSA9PiB1bmtub3duXG59XG5cbmV4cG9ydCBjbGFzcyBXaGl0ZWxhYmVsUmVnaXN0cmF0aW9uU2V0dGluZ3MgaW1wbGVtZW50cyBDb21wb25lbnQ8V2hpdGVsYWJlbFJlZ2lzdHJhdGlvblNldHRpbmdzQXR0cnM+IHtcblx0Y29uc3RydWN0b3Iodm5vZGU6IFZub2RlPFdoaXRlbGFiZWxSZWdpc3RyYXRpb25TZXR0aW5nc0F0dHJzPikge31cblxuXHR2aWV3KHZub2RlOiBWbm9kZTxXaGl0ZWxhYmVsUmVnaXN0cmF0aW9uU2V0dGluZ3NBdHRycz4pOiBDaGlsZHJlbiB7XG5cdFx0Y29uc3QgeyBjdXJyZW50UmVnaXN0cmF0aW9uRG9tYWluLCBwb3NzaWJsZVJlZ2lzdHJhdGlvbkRvbWFpbnMsIG9uUmVnaXN0cmF0aW9uRG9tYWluU2VsZWN0ZWQsIHdoaXRlbGFiZWxDb2RlLCBvbldoaXRlbGFiZWxDb2RlQ2hhbmdlZCB9ID0gdm5vZGUuYXR0cnNcblx0XHRyZXR1cm4gbShcIlwiLCBbXG5cdFx0XHR0aGlzLl9yZW5kZXJSZWdpc3RyYXRpb25Eb21haW4oY3VycmVudFJlZ2lzdHJhdGlvbkRvbWFpbiwgcG9zc2libGVSZWdpc3RyYXRpb25Eb21haW5zLCBvblJlZ2lzdHJhdGlvbkRvbWFpblNlbGVjdGVkKSxcblx0XHRcdHRoaXMuX3JlbmRlcldoaXRlbGFiZWxDb2RlRmllbGQod2hpdGVsYWJlbENvZGUsIG9uV2hpdGVsYWJlbENvZGVDaGFuZ2VkKSxcblx0XHRdKVxuXHR9XG5cblx0X3JlbmRlclJlZ2lzdHJhdGlvbkRvbWFpbihcblx0XHRjdXJyZW50UmVnaXN0cmF0aW9uRG9tYWluOiBzdHJpbmcgfCBudWxsLFxuXHRcdHBvc3NpYmxlUmVnaXN0cmF0aW9uRG9tYWluczogU2VsZWN0b3JJdGVtTGlzdDxzdHJpbmcgfCBudWxsPixcblx0XHRvblJlZ2lzdHJhdGlvbkRvbWFpblNlbGVjdGVkOiAoYXJnMDogc3RyaW5nIHwgbnVsbCkgPT4gdW5rbm93bixcblx0KTogQ2hpbGRyZW4ge1xuXHRcdHJldHVybiBtKERyb3BEb3duU2VsZWN0b3IsIHtcblx0XHRcdGxhYmVsOiBcIndoaXRlbGFiZWxSZWdpc3RyYXRpb25FbWFpbERvbWFpbl9sYWJlbFwiLFxuXHRcdFx0c2VsZWN0ZWRWYWx1ZTogY3VycmVudFJlZ2lzdHJhdGlvbkRvbWFpbixcblx0XHRcdGl0ZW1zOiBwb3NzaWJsZVJlZ2lzdHJhdGlvbkRvbWFpbnMsXG5cdFx0XHRzZWxlY3Rpb25DaGFuZ2VkSGFuZGxlcjogb25SZWdpc3RyYXRpb25Eb21haW5TZWxlY3RlZFxuXHRcdFx0XHQ/IChzZWxlY3RlZFZhbHVlOiBzdHJpbmcgfCBudWxsKSA9PiB7XG5cdFx0XHRcdFx0XHRvblJlZ2lzdHJhdGlvbkRvbWFpblNlbGVjdGVkKHNlbGVjdGVkVmFsdWUpXG5cdFx0XHRcdCAgfVxuXHRcdFx0XHQ6IG51bGwsXG5cdFx0XHRkaXNhYmxlZDogIW9uUmVnaXN0cmF0aW9uRG9tYWluU2VsZWN0ZWQsXG5cdFx0fSlcblx0fVxuXG5cdF9yZW5kZXJXaGl0ZWxhYmVsQ29kZUZpZWxkKHdoaXRlbGFiZWxDb2RlOiBzdHJpbmcsIG9uV2hpdGVsYWJlbENvZGVDaGFuZ2VkOiAoKGFyZzA6IHN0cmluZykgPT4gdW5rbm93bikgfCBudWxsKTogQ2hpbGRyZW4ge1xuXHRcdHJldHVybiBtKFRleHRGaWVsZCwge1xuXHRcdFx0bGFiZWw6IFwid2hpdGVsYWJlbFJlZ2lzdHJhdGlvbkNvZGVfbGFiZWxcIixcblx0XHRcdHZhbHVlOiB3aGl0ZWxhYmVsQ29kZSxcblx0XHRcdGlzUmVhZE9ubHk6IHRydWUsXG5cdFx0XHRpbmplY3Rpb25zUmlnaHQ6ICgpID0+XG5cdFx0XHRcdG9uV2hpdGVsYWJlbENvZGVDaGFuZ2VkXG5cdFx0XHRcdFx0PyBtKEljb25CdXR0b24sIHtcblx0XHRcdFx0XHRcdFx0dGl0bGU6IFwiZWRpdF9hY3Rpb25cIixcblx0XHRcdFx0XHRcdFx0Y2xpY2s6ICgpID0+IHRoaXMuZWRpdFJlZ2lzdHJhdGlvbkNvZGUod2hpdGVsYWJlbENvZGUsIG9uV2hpdGVsYWJlbENvZGVDaGFuZ2VkKSxcblx0XHRcdFx0XHRcdFx0aWNvbjogSWNvbnMuRWRpdCxcblx0XHRcdFx0XHRcdFx0c2l6ZTogQnV0dG9uU2l6ZS5Db21wYWN0LFxuXHRcdFx0XHRcdCAgfSlcblx0XHRcdFx0XHQ6IG51bGwsXG5cdFx0fSBhcyBjb25zdClcblx0fVxuXG5cdHByaXZhdGUgZWRpdFJlZ2lzdHJhdGlvbkNvZGUod2hpdGVsYWJlbENvZGU6IHN0cmluZywgb25XaGl0ZWxhYmVsQ29kZUNoYW5nZWQ6IChhcmcwOiBzdHJpbmcpID0+IHVua25vd24pIHtcblx0XHREaWFsb2cuc2hvd1RleHRJbnB1dERpYWxvZyh7XG5cdFx0XHR0aXRsZTogXCJlZGl0X2FjdGlvblwiLFxuXHRcdFx0bGFiZWw6IFwid2hpdGVsYWJlbFJlZ2lzdHJhdGlvbkNvZGVfbGFiZWxcIixcblx0XHRcdGRlZmF1bHRWYWx1ZTogd2hpdGVsYWJlbENvZGUsXG5cdFx0fSkudGhlbigobmV3Q29kZSkgPT4ge1xuXHRcdFx0b25XaGl0ZWxhYmVsQ29kZUNoYW5nZWQobmV3Q29kZSlcblx0XHR9KVxuXHR9XG59XG4iLCJpbXBvcnQgeyBUZXh0RmllbGQsIFRleHRGaWVsZFR5cGUgfSBmcm9tIFwiLi4vLi4vZ3VpL2Jhc2UvVGV4dEZpZWxkLmpzXCJcbmltcG9ydCB7IERpYWxvZyB9IGZyb20gXCIuLi8uLi9ndWkvYmFzZS9EaWFsb2dcIlxuaW1wb3J0IHsgbGFuZyB9IGZyb20gXCIuLi8uLi9taXNjL0xhbmd1YWdlVmlld01vZGVsXCJcbmltcG9ydCBtLCB7IENoaWxkcmVuLCBDb21wb25lbnQsIFZub2RlIH0gZnJvbSBcIm1pdGhyaWxcIlxuaW1wb3J0IHsgSWNvbnMgfSBmcm9tIFwiLi4vLi4vZ3VpL2Jhc2UvaWNvbnMvSWNvbnNcIlxuaW1wb3J0IHsgSWNvbkJ1dHRvbiB9IGZyb20gXCIuLi8uLi9ndWkvYmFzZS9JY29uQnV0dG9uLmpzXCJcbmltcG9ydCB7IEJ1dHRvblNpemUgfSBmcm9tIFwiLi4vLi4vZ3VpL2Jhc2UvQnV0dG9uU2l6ZS5qc1wiXG5cbmV4cG9ydCB0eXBlIFdoaXRlbGFiZWxDdXN0b21NZXRhVGFnc1NldHRpbmdzQXR0cnMgPSB7XG5cdG1ldGFUYWdzOiBzdHJpbmdcblx0b25NZXRhVGFnc0NoYW5nZWQ6ICgodGFnczogc3RyaW5nKSA9PiB1bmtub3duKSB8IG51bGxcbn1cblxuZXhwb3J0IGNsYXNzIFdoaXRlbGFiZWxDdXN0b21NZXRhVGFnc1NldHRpbmdzIGltcGxlbWVudHMgQ29tcG9uZW50PFdoaXRlbGFiZWxDdXN0b21NZXRhVGFnc1NldHRpbmdzQXR0cnM+IHtcblx0dmlldyh2bm9kZTogVm5vZGU8V2hpdGVsYWJlbEN1c3RvbU1ldGFUYWdzU2V0dGluZ3NBdHRycz4pOiBDaGlsZHJlbiB7XG5cdFx0Y29uc3QgeyBtZXRhVGFncywgb25NZXRhVGFnc0NoYW5nZWQgfSA9IHZub2RlLmF0dHJzXG5cdFx0Y29uc3QgY3VzdG9tTWV0YVRhZ3NEZWZpbmVkID0gbWV0YVRhZ3MubGVuZ3RoID4gMFxuXHRcdHJldHVybiBtKFRleHRGaWVsZCwge1xuXHRcdFx0bGFiZWw6IFwiY3VzdG9tTWV0YVRhZ3NfbGFiZWxcIixcblx0XHRcdHZhbHVlOiBjdXN0b21NZXRhVGFnc0RlZmluZWQgPyBsYW5nLmdldChcImFjdGl2YXRlZF9sYWJlbFwiKSA6IGxhbmcuZ2V0KFwiZGVhY3RpdmF0ZWRfbGFiZWxcIiksXG5cdFx0XHRpc1JlYWRPbmx5OiB0cnVlLFxuXHRcdFx0aW5qZWN0aW9uc1JpZ2h0OiAoKSA9PlxuXHRcdFx0XHRvbk1ldGFUYWdzQ2hhbmdlZFxuXHRcdFx0XHRcdD8gbShJY29uQnV0dG9uLCB7XG5cdFx0XHRcdFx0XHRcdHRpdGxlOiBcImVkaXRfYWN0aW9uXCIsXG5cdFx0XHRcdFx0XHRcdGNsaWNrOiAoKSA9PiB0aGlzLnNob3dFZGl0TWV0YVRhZ3NEaWFsb2cobWV0YVRhZ3MsIG9uTWV0YVRhZ3NDaGFuZ2VkKSxcblx0XHRcdFx0XHRcdFx0aWNvbjogSWNvbnMuRWRpdCxcblx0XHRcdFx0XHRcdFx0c2l6ZTogQnV0dG9uU2l6ZS5Db21wYWN0LFxuXHRcdFx0XHRcdCAgfSlcblx0XHRcdFx0XHQ6IG51bGwsXG5cdFx0fSlcblx0fVxuXG5cdHByaXZhdGUgc2hvd0VkaXRNZXRhVGFnc0RpYWxvZyhtZXRhVGFnczogc3RyaW5nLCBvbk1ldGFUYWdzQ2hhbmdlZDogKHRhZ3M6IHN0cmluZykgPT4gdW5rbm93bikge1xuXHRcdGxldCBkaWFsb2cgPSBEaWFsb2cuc2hvd0FjdGlvbkRpYWxvZyh7XG5cdFx0XHR0aXRsZTogXCJjdXN0b21NZXRhVGFnc19sYWJlbFwiLFxuXHRcdFx0Y2hpbGQ6IHtcblx0XHRcdFx0dmlldzogKCkgPT5cblx0XHRcdFx0XHRtKFRleHRGaWVsZCwge1xuXHRcdFx0XHRcdFx0bGFiZWw6IFwiY3VzdG9tTWV0YVRhZ3NfbGFiZWxcIixcblx0XHRcdFx0XHRcdHZhbHVlOiBtZXRhVGFncyxcblx0XHRcdFx0XHRcdHR5cGU6IFRleHRGaWVsZFR5cGUuQXJlYSxcblx0XHRcdFx0XHRcdG9uaW5wdXQ6ICh2YWx1ZTogc3RyaW5nKSA9PiB7XG5cdFx0XHRcdFx0XHRcdG1ldGFUYWdzID0gdmFsdWVcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0fSksXG5cdFx0XHR9LFxuXHRcdFx0b2tBY3Rpb246IChvaykgPT4ge1xuXHRcdFx0XHRpZiAob2spIHtcblx0XHRcdFx0XHRvbk1ldGFUYWdzQ2hhbmdlZChtZXRhVGFncylcblx0XHRcdFx0XHRkaWFsb2cuY2xvc2UoKVxuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdH0pXG5cdH1cbn1cbiIsImltcG9ydCB7IHNob3dQbGFuVXBncmFkZVJlcXVpcmVkRGlhbG9nIH0gZnJvbSBcIi4uLy4uL21pc2MvU3Vic2NyaXB0aW9uRGlhbG9nc1wiXG5pbXBvcnQgeyBJY29ucyB9IGZyb20gXCIuLi8uLi9ndWkvYmFzZS9pY29ucy9JY29uc1wiXG5pbXBvcnQgeyBsYW5nIH0gZnJvbSBcIi4uLy4uL21pc2MvTGFuZ3VhZ2VWaWV3TW9kZWxcIlxuaW1wb3J0IG0sIHsgQ2hpbGRyZW4sIENvbXBvbmVudCwgVm5vZGUgfSBmcm9tIFwibWl0aHJpbFwiXG5pbXBvcnQgeyBUZXh0RmllbGQgfSBmcm9tIFwiLi4vLi4vZ3VpL2Jhc2UvVGV4dEZpZWxkLmpzXCJcbmltcG9ydCB7IEljb25CdXR0b24gfSBmcm9tIFwiLi4vLi4vZ3VpL2Jhc2UvSWNvbkJ1dHRvbi5qc1wiXG5pbXBvcnQgeyBCdXR0b25TaXplIH0gZnJvbSBcIi4uLy4uL2d1aS9iYXNlL0J1dHRvblNpemUuanNcIlxuaW1wb3J0IHsgZ2V0QXZhaWxhYmxlUGxhbnNXaXRoV2hpdGVsYWJlbCB9IGZyb20gXCIuLi8uLi9zdWJzY3JpcHRpb24vU3Vic2NyaXB0aW9uVXRpbHMuanNcIlxuXG5leHBvcnQgdHlwZSBXaGl0ZWxhYmVsU3RhdHVzU2V0dGluZ3NBdHRycyA9IHtcblx0aXNXaGl0ZWxhYmVsQWN0aXZlOiBib29sZWFuXG59XG5cbmV4cG9ydCBjbGFzcyBXaGl0ZWxhYmVsU3RhdHVzU2V0dGluZ3MgaW1wbGVtZW50cyBDb21wb25lbnQ8V2hpdGVsYWJlbFN0YXR1c1NldHRpbmdzQXR0cnM+IHtcblx0dmlldyh7IGF0dHJzIH06IFZub2RlPFdoaXRlbGFiZWxTdGF0dXNTZXR0aW5nc0F0dHJzPik6IENoaWxkcmVuIHtcblx0XHRjb25zdCB7IGlzV2hpdGVsYWJlbEFjdGl2ZSB9ID0gYXR0cnNcblx0XHRyZXR1cm4gbShUZXh0RmllbGQsIHtcblx0XHRcdGxhYmVsOiBcInN0YXRlX2xhYmVsXCIsXG5cdFx0XHR2YWx1ZTogaXNXaGl0ZWxhYmVsQWN0aXZlID8gbGFuZy5nZXQoXCJhY3RpdmVfbGFiZWxcIikgOiBsYW5nLmdldChcImRlYWN0aXZhdGVkX2xhYmVsXCIpLFxuXHRcdFx0aXNSZWFkT25seTogdHJ1ZSxcblx0XHRcdGluamVjdGlvbnNSaWdodDogKCkgPT4gKGlzV2hpdGVsYWJlbEFjdGl2ZSA/IG51bGwgOiB0aGlzLnJlbmRlckVuYWJsZSgpKSxcblx0XHR9KVxuXHR9XG5cblx0cHJpdmF0ZSByZW5kZXJFbmFibGUoKTogQ2hpbGRyZW4ge1xuXHRcdHJldHVybiBtKEljb25CdXR0b24sIHtcblx0XHRcdHRpdGxlOiBcIndoaXRlbGFiZWxEb21haW5fbGFiZWxcIixcblx0XHRcdGNsaWNrOiBhc3luYyAoKSA9PiB7XG5cdFx0XHRcdGNvbnN0IHBsYW5zV2l0aFdoaXRlbGFiZWwgPSBhd2FpdCBnZXRBdmFpbGFibGVQbGFuc1dpdGhXaGl0ZWxhYmVsKClcblx0XHRcdFx0c2hvd1BsYW5VcGdyYWRlUmVxdWlyZWREaWFsb2cocGxhbnNXaXRoV2hpdGVsYWJlbClcblx0XHRcdH0sXG5cdFx0XHRpY29uOiBJY29ucy5FZGl0LFxuXHRcdFx0c2l6ZTogQnV0dG9uU2l6ZS5Db21wYWN0LFxuXHRcdH0pXG5cdH1cbn1cbiIsImltcG9ydCBtLCB7IENoaWxkcmVuLCBDb21wb25lbnQsIFZub2RlIH0gZnJvbSBcIm1pdGhyaWxcIlxuaW1wb3J0IHN0cmVhbSBmcm9tIFwibWl0aHJpbC9zdHJlYW1cIlxuaW1wb3J0IHsgbGFuZywgbGFuZ3VhZ2VCeUNvZGUgfSBmcm9tIFwiLi4vLi4vbWlzYy9MYW5ndWFnZVZpZXdNb2RlbFwiXG5pbXBvcnQgeyBFeHBhbmRlckJ1dHRvbiwgRXhwYW5kZXJQYW5lbCB9IGZyb20gXCIuLi8uLi9ndWkvYmFzZS9FeHBhbmRlclwiXG5pbXBvcnQgeyBDb2x1bW5XaWR0aCwgVGFibGUgfSBmcm9tIFwiLi4vLi4vZ3VpL2Jhc2UvVGFibGUuanNcIlxuaW1wb3J0IHsgQnV0dG9uVHlwZSB9IGZyb20gXCIuLi8uLi9ndWkvYmFzZS9CdXR0b24uanNcIlxuaW1wb3J0IHsgSWNvbnMgfSBmcm9tIFwiLi4vLi4vZ3VpL2Jhc2UvaWNvbnMvSWNvbnNcIlxuaW1wb3J0IHsgYXR0YWNoRHJvcGRvd24gfSBmcm9tIFwiLi4vLi4vZ3VpL2Jhc2UvRHJvcGRvd24uanNcIlxuaW1wb3J0IHR5cGUgeyBOb3RpZmljYXRpb25NYWlsVGVtcGxhdGUgfSBmcm9tIFwiLi4vLi4vYXBpL2VudGl0aWVzL3N5cy9UeXBlUmVmcy5qc1wiXG5pbXBvcnQgeyBkb3duY2FzdCB9IGZyb20gXCJAdHV0YW8vdHV0YW5vdGEtdXRpbHNcIlxuaW1wb3J0IHR5cGUgeyBMYW5ndWFnZUNvZGUgfSBmcm9tIFwiLi4vLi4vbWlzYy9MYW5ndWFnZVZpZXdNb2RlbFwiXG5pbXBvcnQgU3RyZWFtIGZyb20gXCJtaXRocmlsL3N0cmVhbVwiXG5pbXBvcnQgeyBCdXR0b25TaXplIH0gZnJvbSBcIi4uLy4uL2d1aS9iYXNlL0J1dHRvblNpemUuanNcIlxuXG5leHBvcnQgdHlwZSBXaGl0ZWxhYmVsTm90aWZpY2F0aW9uRW1haWxTZXR0aW5nc0F0dHJzID0ge1xuXHRub3RpZmljYXRpb25NYWlsVGVtcGxhdGVzOiBBcnJheTxOb3RpZmljYXRpb25NYWlsVGVtcGxhdGU+XG5cdG9uQWRkVGVtcGxhdGU6ICgpID0+IHVua25vd25cblx0b25FZGl0VGVtcGxhdGU6IChhcmcwOiBOb3RpZmljYXRpb25NYWlsVGVtcGxhdGUpID0+IHVua25vd25cblx0b25SZW1vdmVUZW1wbGF0ZTogKGFyZzA6IE5vdGlmaWNhdGlvbk1haWxUZW1wbGF0ZSkgPT4gdW5rbm93blxufVxuXG5leHBvcnQgY2xhc3MgV2hpdGVsYWJlbE5vdGlmaWNhdGlvbkVtYWlsU2V0dGluZ3MgaW1wbGVtZW50cyBDb21wb25lbnQ8V2hpdGVsYWJlbE5vdGlmaWNhdGlvbkVtYWlsU2V0dGluZ3NBdHRycz4ge1xuXHRfbm90aWZpY2F0aW9uRW1haWxzRXhwYW5kZWQ6IFN0cmVhbTxib29sZWFuPlxuXG5cdGNvbnN0cnVjdG9yKHZub2RlOiBWbm9kZTxXaGl0ZWxhYmVsTm90aWZpY2F0aW9uRW1haWxTZXR0aW5nc0F0dHJzPikge1xuXHRcdHRoaXMuX25vdGlmaWNhdGlvbkVtYWlsc0V4cGFuZGVkID0gc3RyZWFtPGJvb2xlYW4+KGZhbHNlKVxuXHR9XG5cblx0dmlldyh2bm9kZTogVm5vZGU8V2hpdGVsYWJlbE5vdGlmaWNhdGlvbkVtYWlsU2V0dGluZ3NBdHRycz4pOiBDaGlsZHJlbiB7XG5cdFx0Y29uc3QgeyBvbkFkZFRlbXBsYXRlLCBvbkVkaXRUZW1wbGF0ZSwgb25SZW1vdmVUZW1wbGF0ZSwgbm90aWZpY2F0aW9uTWFpbFRlbXBsYXRlcyB9ID0gdm5vZGUuYXR0cnNcblx0XHRyZXR1cm4gdGhpcy5fcmVuZGVyTm90aWZpY2F0aW9uRW1haWxTZXR0aW5ncyhub3RpZmljYXRpb25NYWlsVGVtcGxhdGVzLCBvbkFkZFRlbXBsYXRlLCBvbkVkaXRUZW1wbGF0ZSwgb25SZW1vdmVUZW1wbGF0ZSlcblx0fVxuXG5cdF9yZW5kZXJOb3RpZmljYXRpb25FbWFpbFNldHRpbmdzKFxuXHRcdG5vdGlmaWNhdGlvbk1haWxUZW1wbGF0ZXM6IEFycmF5PE5vdGlmaWNhdGlvbk1haWxUZW1wbGF0ZT4sXG5cdFx0b25BZGRUZW1wbGF0ZTogKCkgPT4gdW5rbm93bixcblx0XHRvbkVkaXRUZW1wbGF0ZTogKGFyZzA6IE5vdGlmaWNhdGlvbk1haWxUZW1wbGF0ZSkgPT4gdW5rbm93bixcblx0XHRvblJlbW92ZVRlbXBsYXRlOiAoYXJnMDogTm90aWZpY2F0aW9uTWFpbFRlbXBsYXRlKSA9PiB1bmtub3duLFxuXHQpOiBDaGlsZHJlbiB7XG5cdFx0cmV0dXJuIFtcblx0XHRcdG0oXCIuZmxleC1zcGFjZS1iZXR3ZWVuLml0ZW1zLWNlbnRlci5tdC1sLm1iLXNcIiwgW1xuXHRcdFx0XHRtKFwiLmg0XCIsIGxhbmcuZ2V0KFwiY3VzdG9tTm90aWZpY2F0aW9uRW1haWxzX2xhYmVsXCIpKSxcblx0XHRcdFx0bShFeHBhbmRlckJ1dHRvbiwge1xuXHRcdFx0XHRcdGxhYmVsOiBcInNob3dfYWN0aW9uXCIsXG5cdFx0XHRcdFx0ZXhwYW5kZWQ6IHRoaXMuX25vdGlmaWNhdGlvbkVtYWlsc0V4cGFuZGVkKCksXG5cdFx0XHRcdFx0b25FeHBhbmRlZENoYW5nZTogdGhpcy5fbm90aWZpY2F0aW9uRW1haWxzRXhwYW5kZWQsXG5cdFx0XHRcdH0pLFxuXHRcdFx0XSksXG5cdFx0XHRtKFxuXHRcdFx0XHRFeHBhbmRlclBhbmVsLFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0ZXhwYW5kZWQ6IHRoaXMuX25vdGlmaWNhdGlvbkVtYWlsc0V4cGFuZGVkKCksXG5cdFx0XHRcdH0sXG5cdFx0XHRcdG0oVGFibGUsIHtcblx0XHRcdFx0XHRjb2x1bW5IZWFkaW5nOiBbXCJsYW5ndWFnZV9sYWJlbFwiLCBcInN1YmplY3RfbGFiZWxcIl0sXG5cdFx0XHRcdFx0Y29sdW1uV2lkdGhzOiBbQ29sdW1uV2lkdGguTGFyZ2VzdCwgQ29sdW1uV2lkdGguTGFyZ2VzdF0sXG5cdFx0XHRcdFx0c2hvd0FjdGlvbkJ1dHRvbkNvbHVtbjogdHJ1ZSxcblx0XHRcdFx0XHRhZGRCdXR0b25BdHRyczoge1xuXHRcdFx0XHRcdFx0dGl0bGU6IFwiYWRkX2FjdGlvblwiLFxuXHRcdFx0XHRcdFx0Y2xpY2s6ICgpID0+IHtcblx0XHRcdFx0XHRcdFx0b25BZGRUZW1wbGF0ZSgpXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0aWNvbjogSWNvbnMuQWRkLFxuXHRcdFx0XHRcdFx0c2l6ZTogQnV0dG9uU2l6ZS5Db21wYWN0LFxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0bGluZXM6IG5vdGlmaWNhdGlvbk1haWxUZW1wbGF0ZXMubWFwKCh0ZW1wbGF0ZSkgPT4ge1xuXHRcdFx0XHRcdFx0Y29uc3QgbGFuZ3VhZ2VDb2RlOiBMYW5ndWFnZUNvZGUgPSBkb3duY2FzdCh0ZW1wbGF0ZS5sYW5ndWFnZSlcblx0XHRcdFx0XHRcdGNvbnN0IGxhbmdOYW1lID0gbGFuZy5nZXQobGFuZ3VhZ2VCeUNvZGVbbGFuZ3VhZ2VDb2RlXS50ZXh0SWQpXG5cdFx0XHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdFx0XHRjZWxsczogW2xhbmdOYW1lLCB0ZW1wbGF0ZS5zdWJqZWN0XSxcblx0XHRcdFx0XHRcdFx0YWN0aW9uQnV0dG9uQXR0cnM6IGF0dGFjaERyb3Bkb3duKHtcblx0XHRcdFx0XHRcdFx0XHRtYWluQnV0dG9uQXR0cnM6IHtcblx0XHRcdFx0XHRcdFx0XHRcdHRpdGxlOiBcImVkaXRfYWN0aW9uXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRpY29uOiBJY29ucy5FZGl0LFxuXHRcdFx0XHRcdFx0XHRcdFx0c2l6ZTogQnV0dG9uU2l6ZS5Db21wYWN0LFxuXHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0Y2hpbGRBdHRyczogKCkgPT4gW1xuXHRcdFx0XHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRsYWJlbDogXCJlZGl0X2FjdGlvblwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRjbGljazogKCkgPT4gb25FZGl0VGVtcGxhdGUodGVtcGxhdGUpLFxuXHRcdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0bGFiZWw6IFwicmVtb3ZlX2FjdGlvblwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRjbGljazogKCkgPT4gb25SZW1vdmVUZW1wbGF0ZSh0ZW1wbGF0ZSksXG5cdFx0XHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRcdF0sXG5cdFx0XHRcdFx0XHRcdH0pLFxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0pLFxuXHRcdFx0XHR9KSxcblx0XHRcdCksXG5cdFx0XHRtKFwiLnNtYWxsXCIsIGxhbmcuZ2V0KFwiY3VzdG9tTm90aWZpY2F0aW9uRW1haWxzSGVscF9tc2dcIikpLFxuXHRcdF1cblx0fVxufVxuIiwiaW1wb3J0IHN0cmVhbSBmcm9tIFwibWl0aHJpbC9zdHJlYW1cIlxuaW1wb3J0IG0sIHsgQ2hpbGRyZW4sIENvbXBvbmVudCwgVm5vZGUgfSBmcm9tIFwibWl0aHJpbFwiXG5pbXBvcnQgeyBEcm9wRG93blNlbGVjdG9yQXR0cnMsIERyb3BEb3duU2VsZWN0b3IsIFNlbGVjdG9ySXRlbUxpc3QgfSBmcm9tIFwiLi4vLi4vZ3VpL2Jhc2UvRHJvcERvd25TZWxlY3Rvci5qc1wiXG5cbmV4cG9ydCB0eXBlIEdlcm1hbkxhbmd1YWdlQ29kZSA9IFwiZGVcIiB8IFwiZGVfc2llXCJcbmV4cG9ydCB0eXBlIFdoaXRlbGFiZWxHZXJtYW5MYW5ndWFnZUZpbGVTZXR0aW5nc0F0dHJzID0ge1xuXHRjdXN0b21HZXJtYW5MYW5ndWFnZUZpbGU6IEdlcm1hbkxhbmd1YWdlQ29kZSB8IG51bGxcblx0b25HZXJtYW5MYW5ndWFnZUZpbGVDaGFuZ2VkOiAoYXJnMDogR2VybWFuTGFuZ3VhZ2VDb2RlKSA9PiB1bmtub3duXG59XG5cbmV4cG9ydCBjbGFzcyBXaGl0ZWxhYmVsR2VybWFuTGFuZ3VhZ2VGaWxlU2V0dGluZ3MgaW1wbGVtZW50cyBDb21wb25lbnQ8V2hpdGVsYWJlbEdlcm1hbkxhbmd1YWdlRmlsZVNldHRpbmdzQXR0cnM+IHtcblx0Y29uc3RydWN0b3Iodm5vZGU6IFZub2RlPFdoaXRlbGFiZWxHZXJtYW5MYW5ndWFnZUZpbGVTZXR0aW5nc0F0dHJzPikge31cblxuXHR2aWV3KHZub2RlOiBWbm9kZTxXaGl0ZWxhYmVsR2VybWFuTGFuZ3VhZ2VGaWxlU2V0dGluZ3NBdHRycz4pOiBDaGlsZHJlbiB7XG5cdFx0Y29uc3QgeyBjdXN0b21HZXJtYW5MYW5ndWFnZUZpbGUsIG9uR2VybWFuTGFuZ3VhZ2VGaWxlQ2hhbmdlZCB9ID0gdm5vZGUuYXR0cnNcblx0XHRyZXR1cm4gdGhpcy5fcmVuZGVyRGVmYXVsdEdlcm1hbkxhbmd1YWdlRmlsZVNldHRpbmdzKGN1c3RvbUdlcm1hbkxhbmd1YWdlRmlsZSwgb25HZXJtYW5MYW5ndWFnZUZpbGVDaGFuZ2VkKVxuXHR9XG5cblx0X3JlbmRlckRlZmF1bHRHZXJtYW5MYW5ndWFnZUZpbGVTZXR0aW5ncyhcblx0XHRjdXN0b21HZXJtYW5MYW5ndWFnZUZpbGU6IEdlcm1hbkxhbmd1YWdlQ29kZSB8IG51bGwsXG5cdFx0b25HZXJtYW5MYW5ndWFnZUZpbGVDaGFuZ2VkOiAoYXJnMDogR2VybWFuTGFuZ3VhZ2VDb2RlKSA9PiB1bmtub3duLFxuXHQpOiBDaGlsZHJlbiB7XG5cdFx0Y29uc3QgaXRlbXM6IFNlbGVjdG9ySXRlbUxpc3Q8R2VybWFuTGFuZ3VhZ2VDb2RlPiA9IFtcblx0XHRcdHtcblx0XHRcdFx0bmFtZTogXCJEZXV0c2NoIChEdSlcIixcblx0XHRcdFx0dmFsdWU6IFwiZGVcIixcblx0XHRcdH0sXG5cdFx0XHR7XG5cdFx0XHRcdG5hbWU6IFwiRGV1dHNjaCAoU2llKVwiLFxuXHRcdFx0XHR2YWx1ZTogXCJkZV9zaWVcIixcblx0XHRcdH0sXG5cdFx0XVxuXHRcdGNvbnN0IHNlbGVjdGVkVmFsdWU6IEdlcm1hbkxhbmd1YWdlQ29kZSA9IGN1c3RvbUdlcm1hbkxhbmd1YWdlRmlsZSA/PyBpdGVtc1swXS52YWx1ZVxuXHRcdGNvbnN0IGRlZmF1bHRHZXJtYW5MYW5ndWFnZUZpbGVEcm9wRG93bkF0dHJzOiBEcm9wRG93blNlbGVjdG9yQXR0cnM8R2VybWFuTGFuZ3VhZ2VDb2RlPiA9IHtcblx0XHRcdGxhYmVsOiBcImdlcm1hbkxhbmd1YWdlRmlsZV9sYWJlbFwiLFxuXHRcdFx0aXRlbXMsXG5cdFx0XHRzZWxlY3RlZFZhbHVlOiBzZWxlY3RlZFZhbHVlLFxuXHRcdFx0c2VsZWN0aW9uQ2hhbmdlZEhhbmRsZXI6IG9uR2VybWFuTGFuZ3VhZ2VGaWxlQ2hhbmdlZCxcblx0XHR9IGFzIGNvbnN0XG5cdFx0cmV0dXJuIG0oRHJvcERvd25TZWxlY3RvciwgZGVmYXVsdEdlcm1hbkxhbmd1YWdlRmlsZURyb3BEb3duQXR0cnMpXG5cdH1cbn1cbiIsImltcG9ydCBtLCB7IENoaWxkcmVuIH0gZnJvbSBcIm1pdGhyaWxcIlxuaW1wb3J0IHsgYXNzZXJ0TWFpbk9yTm9kZSB9IGZyb20gXCIuLi8uLi9hcGkvY29tbW9uL0Vudi5qc1wiXG5pbXBvcnQgeyBjbGVhciwgZG93bmNhc3QsIExhenlMb2FkZWQsIG5ldmVyTnVsbCwgbm9PcCwgcHJvbWlzZU1hcCB9IGZyb20gXCJAdHV0YW8vdHV0YW5vdGEtdXRpbHNcIlxuaW1wb3J0IHR5cGUge1xuXHRCb29raW5nLFxuXHRDZXJ0aWZpY2F0ZUluZm8sXG5cdEN1c3RvbWVyLFxuXHRDdXN0b21lckluZm8sXG5cdEN1c3RvbWVyUHJvcGVydGllcyxcblx0RG9tYWluSW5mbyxcblx0Tm90aWZpY2F0aW9uTWFpbFRlbXBsYXRlLFxuXHRQbGFuQ29uZmlndXJhdGlvbixcblx0V2hpdGVsYWJlbENvbmZpZyxcbn0gZnJvbSBcIi4uLy4uL2FwaS9lbnRpdGllcy9zeXMvVHlwZVJlZnMuanNcIlxuaW1wb3J0IHtcblx0Qm9va2luZ1R5cGVSZWYsXG5cdGNyZWF0ZVN0cmluZ1dyYXBwZXIsXG5cdEN1c3RvbWVySW5mb1R5cGVSZWYsXG5cdEN1c3RvbWVyUHJvcGVydGllc1R5cGVSZWYsXG5cdEN1c3RvbWVyVHlwZVJlZixcblx0V2hpdGVsYWJlbENvbmZpZ1R5cGVSZWYsXG59IGZyb20gXCIuLi8uLi9hcGkvZW50aXRpZXMvc3lzL1R5cGVSZWZzLmpzXCJcbmltcG9ydCB7IEluZm9MaW5rLCBsYW5nIH0gZnJvbSBcIi4uLy4uL21pc2MvTGFuZ3VhZ2VWaWV3TW9kZWwuanNcIlxuaW1wb3J0IHsgRmVhdHVyZVR5cGUsIE9wZXJhdGlvblR5cGUgfSBmcm9tIFwiLi4vLi4vYXBpL2NvbW1vbi9UdXRhbm90YUNvbnN0YW50cy5qc1wiXG5pbXBvcnQgeyBwcm9ncmVzc0ljb24gfSBmcm9tIFwiLi4vLi4vZ3VpL2Jhc2UvSWNvbi5qc1wiXG5pbXBvcnQgeyBzaG93UHJvZ3Jlc3NEaWFsb2cgfSBmcm9tIFwiLi4vLi4vZ3VpL2RpYWxvZ3MvUHJvZ3Jlc3NEaWFsb2cuanNcIlxuXG5pbXBvcnQgKiBhcyBFZGl0Tm90aWZpY2F0aW9uRW1haWxEaWFsb2cgZnJvbSBcIi4uLy4uL3NldHRpbmdzL0VkaXROb3RpZmljYXRpb25FbWFpbERpYWxvZ1wiXG5pbXBvcnQgeyBpc1doaXRlbGFiZWxBY3RpdmUgfSBmcm9tIFwiLi4vLi4vc3Vic2NyaXB0aW9uL1N1YnNjcmlwdGlvblV0aWxzLmpzXCJcbmltcG9ydCB7IEdFTkVSQVRFRF9NQVhfSUQgfSBmcm9tIFwiLi4vLi4vYXBpL2NvbW1vbi91dGlscy9FbnRpdHlVdGlscy5qc1wiXG5pbXBvcnQgeyBXaGl0ZWxhYmVsQnJhbmRpbmdEb21haW5TZXR0aW5ncyB9IGZyb20gXCIuL1doaXRlbGFiZWxCcmFuZGluZ0RvbWFpblNldHRpbmdzXCJcbmltcG9ydCB7IFdoaXRlbGFiZWxUaGVtZVNldHRpbmdzIH0gZnJvbSBcIi4vV2hpdGVsYWJlbFRoZW1lU2V0dGluZ3NcIlxuaW1wb3J0IHsgV2hpdGVsYWJlbEltcHJpbnRBbmRQcml2YWN5U2V0dGluZ3MgfSBmcm9tIFwiLi9XaGl0ZWxhYmVsSW1wcmludEFuZFByaXZhY3lTZXR0aW5nc1wiXG5pbXBvcnQgeyBXaGl0ZWxhYmVsUmVnaXN0cmF0aW9uU2V0dGluZ3MsIFdoaXRlbGFiZWxSZWdpc3RyYXRpb25TZXR0aW5nc0F0dHJzIH0gZnJvbSBcIi4vV2hpdGVsYWJlbFJlZ2lzdHJhdGlvblNldHRpbmdzXCJcbmltcG9ydCB7IFdoaXRlbGFiZWxDdXN0b21NZXRhVGFnc1NldHRpbmdzLCBXaGl0ZWxhYmVsQ3VzdG9tTWV0YVRhZ3NTZXR0aW5nc0F0dHJzIH0gZnJvbSBcIi4vV2hpdGVsYWJlbEN1c3RvbU1ldGFUYWdzU2V0dGluZ3NcIlxuaW1wb3J0IHsgV2hpdGVsYWJlbFN0YXR1c1NldHRpbmdzIH0gZnJvbSBcIi4vV2hpdGVsYWJlbFN0YXR1c1NldHRpbmdzXCJcbmltcG9ydCB7IFdoaXRlbGFiZWxOb3RpZmljYXRpb25FbWFpbFNldHRpbmdzIH0gZnJvbSBcIi4vV2hpdGVsYWJlbE5vdGlmaWNhdGlvbkVtYWlsU2V0dGluZ3NcIlxuaW1wb3J0IHR5cGUgeyBHZXJtYW5MYW5ndWFnZUNvZGUgfSBmcm9tIFwiLi9XaGl0ZWxhYmVsR2VybWFuTGFuZ3VhZ2VGaWxlU2V0dGluZ3NcIlxuaW1wb3J0IHsgV2hpdGVsYWJlbEdlcm1hbkxhbmd1YWdlRmlsZVNldHRpbmdzIH0gZnJvbSBcIi4vV2hpdGVsYWJlbEdlcm1hbkxhbmd1YWdlRmlsZVNldHRpbmdzXCJcbmltcG9ydCB0eXBlIHsgVXBkYXRhYmxlU2V0dGluZ3NWaWV3ZXIgfSBmcm9tIFwiLi4vSW50ZXJmYWNlcy5qc1wiXG5pbXBvcnQgdHlwZSB7IFRoZW1lQ3VzdG9taXphdGlvbnMgfSBmcm9tIFwiLi4vLi4vbWlzYy9XaGl0ZWxhYmVsQ3VzdG9taXphdGlvbnMuanNcIlxuaW1wb3J0IHsgZ2V0VGhlbWVDdXN0b21pemF0aW9ucyB9IGZyb20gXCIuLi8uLi9taXNjL1doaXRlbGFiZWxDdXN0b21pemF0aW9ucy5qc1wiXG5pbXBvcnQgeyBFbnRpdHlDbGllbnQgfSBmcm9tIFwiLi4vLi4vYXBpL2NvbW1vbi9FbnRpdHlDbGllbnQuanNcIlxuaW1wb3J0IHsgU2VsZWN0b3JJdGVtLCBTZWxlY3Rvckl0ZW1MaXN0IH0gZnJvbSBcIi4uLy4uL2d1aS9iYXNlL0Ryb3BEb3duU2VsZWN0b3IuanNcIlxuaW1wb3J0IHsgQnJhbmRpbmdEb21haW5TZXJ2aWNlIH0gZnJvbSBcIi4uLy4uL2FwaS9lbnRpdGllcy9zeXMvU2VydmljZXMuanNcIlxuaW1wb3J0IHsgTG9naW5Db250cm9sbGVyIH0gZnJvbSBcIi4uLy4uL2FwaS9tYWluL0xvZ2luQ29udHJvbGxlci5qc1wiXG5pbXBvcnQgeyBnZXRDdXN0b21NYWlsRG9tYWlucywgZ2V0V2hpdGVsYWJlbERvbWFpbkluZm8gfSBmcm9tIFwiLi4vLi4vYXBpL2NvbW1vbi91dGlscy9DdXN0b21lclV0aWxzLmpzXCJcbmltcG9ydCB7IEVudGl0eVVwZGF0ZURhdGEsIGlzVXBkYXRlRm9yVHlwZVJlZiB9IGZyb20gXCIuLi8uLi9hcGkvY29tbW9uL3V0aWxzL0VudGl0eVVwZGF0ZVV0aWxzLmpzXCJcbmltcG9ydCB7IGxvY2F0b3IgfSBmcm9tIFwiLi4vLi4vYXBpL21haW4vQ29tbW9uTG9jYXRvci5qc1wiXG5pbXBvcnQgeyBzaG93QnV5T3JTZXROb3RpZmljYXRpb25FbWFpbERpYWxvZyB9IGZyb20gXCIuLi9FZGl0Tm90aWZpY2F0aW9uRW1haWxEaWFsb2cuanNcIlxuXG5hc3NlcnRNYWluT3JOb2RlKClcblxuZXhwb3J0IGNsYXNzIFdoaXRlbGFiZWxTZXR0aW5nc1ZpZXdlciBpbXBsZW1lbnRzIFVwZGF0YWJsZVNldHRpbmdzVmlld2VyIHtcblx0cHJpdmF0ZSBfd2hpdGVsYWJlbENvbmZpZzogV2hpdGVsYWJlbENvbmZpZyB8IG51bGwgPSBudWxsXG5cdHByaXZhdGUgX2NlcnRpZmljYXRlSW5mbzogQ2VydGlmaWNhdGVJbmZvIHwgbnVsbCA9IG51bGxcblx0cHJpdmF0ZSBfd2hpdGVsYWJlbERvbWFpbkluZm86IERvbWFpbkluZm8gfCBudWxsID0gbnVsbFxuXHRwcml2YXRlIF9jdXN0b21Kc29uVGhlbWU6IFRoZW1lQ3VzdG9taXphdGlvbnMgfCBudWxsID0gbnVsbFxuXHRwcml2YXRlIF9jdXN0b21lcjogTGF6eUxvYWRlZDxDdXN0b21lcj5cblx0cHJpdmF0ZSBfY3VzdG9tZXJJbmZvOiBMYXp5TG9hZGVkPEN1c3RvbWVySW5mbz5cblx0cHJpdmF0ZSBfcGxhbkNvbmZpZzogTGF6eUxvYWRlZDxQbGFuQ29uZmlndXJhdGlvbj5cblx0cHJpdmF0ZSBfY3VzdG9tZXJQcm9wZXJ0aWVzOiBMYXp5TG9hZGVkPEN1c3RvbWVyUHJvcGVydGllcz5cblx0cHJpdmF0ZSBfbGFzdEJvb2tpbmc6IEJvb2tpbmcgfCBudWxsXG5cdHByaXZhdGUgX2VudGl0eUNsaWVudDogRW50aXR5Q2xpZW50XG5cdHByaXZhdGUgX2xvZ2luczogTG9naW5Db250cm9sbGVyXG5cblx0Y29uc3RydWN0b3IoZW50aXR5Q2xpZW50OiBFbnRpdHlDbGllbnQsIGxvZ2luczogTG9naW5Db250cm9sbGVyKSB7XG5cdFx0dGhpcy52aWV3ID0gdGhpcy52aWV3LmJpbmQodGhpcylcblx0XHR0aGlzLl9lbnRpdHlDbGllbnQgPSBlbnRpdHlDbGllbnRcblx0XHR0aGlzLl9sb2dpbnMgPSBsb2dpbnNcblx0XHR0aGlzLl9jdXN0b21lciA9IG5ldyBMYXp5TG9hZGVkKCgpID0+IGxvY2F0b3IubG9naW5zLmdldFVzZXJDb250cm9sbGVyKCkubG9hZEN1c3RvbWVyKCkpXG5cdFx0dGhpcy5fY3VzdG9tZXJJbmZvID0gbmV3IExhenlMb2FkZWQoKCkgPT4gbG9jYXRvci5sb2dpbnMuZ2V0VXNlckNvbnRyb2xsZXIoKS5sb2FkQ3VzdG9tZXJJbmZvKCkpXG5cdFx0dGhpcy5fcGxhbkNvbmZpZyA9IG5ldyBMYXp5TG9hZGVkKCgpID0+IGxvY2F0b3IubG9naW5zLmdldFVzZXJDb250cm9sbGVyKCkuZ2V0UGxhbkNvbmZpZygpKVxuXHRcdHRoaXMuX2N1c3RvbWVyUHJvcGVydGllcyA9IG5ldyBMYXp5TG9hZGVkKCgpID0+XG5cdFx0XHR0aGlzLl9jdXN0b21lci5nZXRBc3luYygpLnRoZW4oKGN1c3RvbWVyKSA9PiBsb2NhdG9yLmVudGl0eUNsaWVudC5sb2FkKEN1c3RvbWVyUHJvcGVydGllc1R5cGVSZWYsIG5ldmVyTnVsbChjdXN0b21lci5wcm9wZXJ0aWVzKSkpLFxuXHRcdClcblx0XHR0aGlzLl9sYXN0Qm9va2luZyA9IG51bGxcblxuXHRcdHRoaXMuX3VwZGF0ZUZpZWxkcygpXG5cdH1cblxuXHR2aWV3KCk6IENoaWxkcmVuIHtcblx0XHRjb25zdCBicmFuZGluZ0RvbWFpbkNvbmZpZyA9IHRoaXMuX3JlbmRlckJyYW5kaW5nRG9tYWluQ29uZmlnKClcblxuXHRcdHJldHVybiBtKFxuXHRcdFx0XCIjZ2xvYmFsLXNldHRpbmdzLmZpbGwtYWJzb2x1dGUuc2Nyb2xsLnBsci1sXCIsXG5cdFx0XHRicmFuZGluZ0RvbWFpbkNvbmZpZ1xuXHRcdFx0XHQ/IFtcblx0XHRcdFx0XHRcdG0oXCIuaDQubXQtbFwiLCBsYW5nLmdldChcIndoaXRlbGFiZWxfbGFiZWxcIikpLFxuXHRcdFx0XHRcdFx0bShcIi5zbWFsbFwiLCBsYW5nLmdldChcIndoaXRlbGFiZWxEb21haW5MaW5rSW5mb19tc2dcIikgKyBcIiBcIiksXG5cdFx0XHRcdFx0XHRtKFwic21hbGwudGV4dC1icmVha1wiLCBbbShgYVtocmVmPSR7SW5mb0xpbmsuV2hpdGVsYWJlbH1dW3RhcmdldD1fYmxhbmtdYCwgSW5mb0xpbmsuV2hpdGVsYWJlbCldKSxcblx0XHRcdFx0XHRcdHRoaXMuX3JlbmRlcldoaXRlbGFiZWxTdGF0dXNTZXR0aW5ncygpLFxuXHRcdFx0XHRcdFx0dGhpcy5fcmVuZGVyTm90aWZpY2F0aW9uRW1haWxTZXR0aW5ncygpLFxuXHRcdFx0XHRcdFx0bShcIi5oNC5tdC1sXCIsIGxhbmcuZ2V0KFwid2hpdGVsYWJlbERvbWFpbl9sYWJlbFwiKSksXG5cdFx0XHRcdFx0XHRicmFuZGluZ0RvbWFpbkNvbmZpZyxcblx0XHRcdFx0XHRcdHRoaXMuX3JlbmRlclRoZW1lU2V0dGluZ3MoKSxcblx0XHRcdFx0XHRcdHRoaXMuX3JlbmRlckN1c3RvbU1ldGFUYWdzU2V0dGluZ3MoKSxcblx0XHRcdFx0XHRcdHRoaXMuX3JlbmRlckltcHJpbnRBbmRQcml2YWN5U2V0dGluZ3MoKSxcblx0XHRcdFx0XHRcdHRoaXMuX3JlbmRlckRlZmF1bHRHZXJtYW5MYW5ndWFnZUZpbGVTZXR0aW5ncygpLFxuXHRcdFx0XHRcdFx0dGhpcy5fcmVuZGVyV2hpdGVsYWJlbFJlZ2lzdHJhdGlvblNldHRpbmdzKCksXG5cdFx0XHRcdFx0XHRtKFwiLm1iLWxcIiksXG5cdFx0XHRcdCAgXVxuXHRcdFx0XHQ6IFttKFwiLmZsZXgtY2VudGVyLml0ZW1zLWNlbnRlci5idXR0b24taGVpZ2h0Lm10LWxcIiwgcHJvZ3Jlc3NJY29uKCkpXSxcblx0XHQpXG5cdH1cblxuXHRfcmVuZGVySW1wcmludEFuZFByaXZhY3lTZXR0aW5ncygpOiBDaGlsZHJlbiB7XG5cdFx0Y29uc3Qgd2hpdGVsYWJlbENvbmZpZyA9IHRoaXMuX3doaXRlbGFiZWxDb25maWdcblx0XHRjb25zdCBwcml2YWN5U3RhdGVtZW50VXJsID0gd2hpdGVsYWJlbENvbmZpZz8ucHJpdmFjeVN0YXRlbWVudFVybCA/PyBcIlwiXG5cdFx0bGV0IG9uUHJpdmFjeVN0YXRlbWVudFVybENoYW5nZWQ6ICgoXzogc3RyaW5nKSA9PiB2b2lkKSB8IG51bGwgPSBudWxsXG5cblx0XHRpZiAod2hpdGVsYWJlbENvbmZpZykge1xuXHRcdFx0b25Qcml2YWN5U3RhdGVtZW50VXJsQ2hhbmdlZCA9IChwcml2YWN5U3RhdGVtZW50VXJsKSA9PiB7XG5cdFx0XHRcdHdoaXRlbGFiZWxDb25maWcucHJpdmFjeVN0YXRlbWVudFVybCA9IHByaXZhY3lTdGF0ZW1lbnRVcmxcblxuXHRcdFx0XHR0aGlzLl9lbnRpdHlDbGllbnQudXBkYXRlKHdoaXRlbGFiZWxDb25maWcpXG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Y29uc3QgaW1wcmludFVybCA9IHdoaXRlbGFiZWxDb25maWc/LmltcHJpbnRVcmwgPz8gXCJcIlxuXHRcdGxldCBvbkltcHJpbnRVcmxDaGFuZ2VkOiAoKF86IHN0cmluZykgPT4gdm9pZCkgfCBudWxsID0gbnVsbFxuXG5cdFx0aWYgKHdoaXRlbGFiZWxDb25maWcpIHtcblx0XHRcdG9uSW1wcmludFVybENoYW5nZWQgPSAoaW1wcmludFVybCkgPT4ge1xuXHRcdFx0XHR3aGl0ZWxhYmVsQ29uZmlnLmltcHJpbnRVcmwgPSBpbXByaW50VXJsXG5cblx0XHRcdFx0dGhpcy5fZW50aXR5Q2xpZW50LnVwZGF0ZSh3aGl0ZWxhYmVsQ29uZmlnKVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBtKFdoaXRlbGFiZWxJbXByaW50QW5kUHJpdmFjeVNldHRpbmdzLCB7XG5cdFx0XHRwcml2YWN5U3RhdGVtZW50VXJsLFxuXHRcdFx0b25Qcml2YWN5U3RhdGVtZW50VXJsQ2hhbmdlZCxcblx0XHRcdGltcHJpbnRVcmwsXG5cdFx0XHRvbkltcHJpbnRVcmxDaGFuZ2VkLFxuXHRcdH0pXG5cdH1cblxuXHRfcmVuZGVyVGhlbWVTZXR0aW5ncygpOiBDaGlsZHJlbiB7XG5cdFx0Y29uc3QgY3VzdG9tVGhlbWUgPSB0aGlzLl9jdXN0b21Kc29uVGhlbWVcblx0XHRjb25zdCB3aGl0ZWxhYmVsQ29uZmlnID0gdGhpcy5fd2hpdGVsYWJlbENvbmZpZ1xuXHRcdGNvbnN0IHdoaXRlbGFiZWxEb21haW5JbmZvID0gdGhpcy5fd2hpdGVsYWJlbERvbWFpbkluZm9cblx0XHRjb25zdCB3aGl0ZWxhYmVsVGhlbWVTZXR0aW5nc0F0dHJzID0ge1xuXHRcdFx0d2hpdGVsYWJlbERhdGE6XG5cdFx0XHRcdHdoaXRlbGFiZWxDb25maWcgJiYgd2hpdGVsYWJlbERvbWFpbkluZm8gJiYgY3VzdG9tVGhlbWVcblx0XHRcdFx0XHQ/IHtcblx0XHRcdFx0XHRcdFx0Y3VzdG9tVGhlbWUsXG5cdFx0XHRcdFx0XHRcdHdoaXRlbGFiZWxDb25maWcsXG5cdFx0XHRcdFx0XHRcdHdoaXRlbGFiZWxEb21haW5JbmZvLFxuXHRcdFx0XHRcdCAgfVxuXHRcdFx0XHRcdDogbnVsbCxcblx0XHR9XG5cdFx0cmV0dXJuIG0oV2hpdGVsYWJlbFRoZW1lU2V0dGluZ3MsIHdoaXRlbGFiZWxUaGVtZVNldHRpbmdzQXR0cnMpXG5cdH1cblxuXHRfcmVuZGVyV2hpdGVsYWJlbFJlZ2lzdHJhdGlvblNldHRpbmdzKCk6IENoaWxkcmVuIHtcblx0XHRpZiAoIXRoaXMuX2lzV2hpdGVsYWJlbFJlZ2lzdHJhdGlvblZpc2libGUoKSkgcmV0dXJuIG51bGxcblx0XHRjb25zdCBwb3NzaWJsZVJlZ2lzdHJhdGlvbkRvbWFpbnM6IFNlbGVjdG9ySXRlbUxpc3Q8c3RyaW5nIHwgbnVsbD4gPSBbXG5cdFx0XHR7XG5cdFx0XHRcdG5hbWU6IGxhbmcuZ2V0KFwiZGVhY3RpdmF0ZWRfbGFiZWxcIiksXG5cdFx0XHRcdHZhbHVlOiBudWxsLFxuXHRcdFx0fSBhcyBTZWxlY3Rvckl0ZW08c3RyaW5nIHwgbnVsbD4sXG5cdFx0XS5jb25jYXQoXG5cdFx0XHRnZXRDdXN0b21NYWlsRG9tYWlucyh0aGlzLl9jdXN0b21lckluZm8uZ2V0TG9hZGVkKCkpLm1hcCgoZCkgPT4ge1xuXHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdG5hbWU6IGQuZG9tYWluLFxuXHRcdFx0XHRcdHZhbHVlOiBkLmRvbWFpbixcblx0XHRcdFx0fVxuXHRcdFx0fSksXG5cdFx0KVxuXHRcdGxldCBvblJlZ2lzdHJhdGlvbkRvbWFpblNlbGVjdGVkOiBXaGl0ZWxhYmVsUmVnaXN0cmF0aW9uU2V0dGluZ3NBdHRyc1tcIm9uUmVnaXN0cmF0aW9uRG9tYWluU2VsZWN0ZWRcIl0gPSBub09wXG5cdFx0bGV0IGN1cnJlbnRSZWdpc3RyYXRpb25Eb21haW46IHN0cmluZyB8IG51bGwgPSBudWxsXG5cblx0XHRpZiAodGhpcy5fd2hpdGVsYWJlbENvbmZpZykge1xuXHRcdFx0b25SZWdpc3RyYXRpb25Eb21haW5TZWxlY3RlZCA9IChkb21haW4pID0+IHtcblx0XHRcdFx0Y2xlYXIobmV2ZXJOdWxsKHRoaXMuX3doaXRlbGFiZWxDb25maWcpLndoaXRlbGFiZWxSZWdpc3RyYXRpb25Eb21haW5zKVxuXG5cdFx0XHRcdGlmIChkb21haW4pIHtcblx0XHRcdFx0XHRjb25zdCBkb21haW5XcmFwcGVyID0gY3JlYXRlU3RyaW5nV3JhcHBlcih7XG5cdFx0XHRcdFx0XHR2YWx1ZTogZG9tYWluLFxuXHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0bmV2ZXJOdWxsKHRoaXMuX3doaXRlbGFiZWxDb25maWcpLndoaXRlbGFiZWxSZWdpc3RyYXRpb25Eb21haW5zLnB1c2goZG9tYWluV3JhcHBlcilcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHRoaXMuX2VudGl0eUNsaWVudC51cGRhdGUobmV2ZXJOdWxsKHRoaXMuX3doaXRlbGFiZWxDb25maWcpKVxuXHRcdFx0fVxuXG5cdFx0XHRpZiAodGhpcy5fd2hpdGVsYWJlbENvbmZpZy53aGl0ZWxhYmVsUmVnaXN0cmF0aW9uRG9tYWlucy5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdGN1cnJlbnRSZWdpc3RyYXRpb25Eb21haW4gPSB0aGlzLl93aGl0ZWxhYmVsQ29uZmlnLndoaXRlbGFiZWxSZWdpc3RyYXRpb25Eb21haW5zWzBdLnZhbHVlXG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Y29uc3Qgd2hpdGVsYWJlbENvZGUgPSB0aGlzLl93aGl0ZWxhYmVsQ29uZmlnID8gdGhpcy5fd2hpdGVsYWJlbENvbmZpZy53aGl0ZWxhYmVsQ29kZSA6IFwiXCJcblx0XHRsZXQgb25XaGl0ZWxhYmVsQ29kZUNoYW5nZWQ6IChfOiBzdHJpbmcpID0+IHZvaWQgPSBub09wXG5cblx0XHRpZiAodGhpcy5fd2hpdGVsYWJlbENvbmZpZykge1xuXHRcdFx0b25XaGl0ZWxhYmVsQ29kZUNoYW5nZWQgPSAoY29kZSkgPT4ge1xuXHRcdFx0XHRuZXZlck51bGwodGhpcy5fd2hpdGVsYWJlbENvbmZpZykud2hpdGVsYWJlbENvZGUgPSBjb2RlXG5cblx0XHRcdFx0dGhpcy5fZW50aXR5Q2xpZW50LnVwZGF0ZShuZXZlck51bGwodGhpcy5fd2hpdGVsYWJlbENvbmZpZykpXG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIG0oV2hpdGVsYWJlbFJlZ2lzdHJhdGlvblNldHRpbmdzLCB7XG5cdFx0XHR3aGl0ZWxhYmVsQ29kZSxcblx0XHRcdG9uV2hpdGVsYWJlbENvZGVDaGFuZ2VkLFxuXHRcdFx0cG9zc2libGVSZWdpc3RyYXRpb25Eb21haW5zLFxuXHRcdFx0Y3VycmVudFJlZ2lzdHJhdGlvbkRvbWFpbixcblx0XHRcdG9uUmVnaXN0cmF0aW9uRG9tYWluU2VsZWN0ZWQsXG5cdFx0fSlcblx0fVxuXG5cdF9yZW5kZXJEZWZhdWx0R2VybWFuTGFuZ3VhZ2VGaWxlU2V0dGluZ3MoKTogQ2hpbGRyZW4ge1xuXHRcdGlmICghdGhpcy5fd2hpdGVsYWJlbENvbmZpZykgcmV0dXJuIG51bGxcblx0XHRpZiAobGFuZy5jb2RlICE9PSBcImRlXCIgJiYgbGFuZy5jb2RlICE9PSBcImRlX3NpZVwiKSByZXR1cm4gbnVsbFxuXHRcdGNvbnN0IGN1c3RvbUdlcm1hbkxhbmd1YWdlRmlsZTogR2VybWFuTGFuZ3VhZ2VDb2RlIHwgbnVsbCA9IGRvd25jYXN0KHRoaXMuX3doaXRlbGFiZWxDb25maWcuZ2VybWFuTGFuZ3VhZ2VDb2RlKVxuXG5cdFx0Y29uc3Qgb25HZXJtYW5MYW5ndWFnZUZpbGVDaGFuZ2VkID0gKGxhbmd1YWdlRmlsZTogR2VybWFuTGFuZ3VhZ2VDb2RlKSA9PiB7XG5cdFx0XHRpZiAobGFuZ3VhZ2VGaWxlKSB7XG5cdFx0XHRcdG5ldmVyTnVsbCh0aGlzLl93aGl0ZWxhYmVsQ29uZmlnKS5nZXJtYW5MYW5ndWFnZUNvZGUgPSBsYW5ndWFnZUZpbGVcblxuXHRcdFx0XHR0aGlzLl9lbnRpdHlDbGllbnQudXBkYXRlKG5ldmVyTnVsbCh0aGlzLl93aGl0ZWxhYmVsQ29uZmlnKSlcblxuXHRcdFx0XHRsYW5nLnNldExhbmd1YWdlKHtcblx0XHRcdFx0XHRjb2RlOiBsYW5ndWFnZUZpbGUsXG5cdFx0XHRcdFx0bGFuZ3VhZ2VUYWc6IGxhbmcubGFuZ3VhZ2VUYWcsXG5cdFx0XHRcdH0pXG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Y29uc3Qgd2hpdGVsYWJlbEdlcm1hbkxhbmd1YWdlRmlsZVNldHRpbmdzQXR0cnMgPSB7XG5cdFx0XHRjdXN0b21HZXJtYW5MYW5ndWFnZUZpbGUsXG5cdFx0XHRvbkdlcm1hbkxhbmd1YWdlRmlsZUNoYW5nZWQsXG5cdFx0fVxuXHRcdHJldHVybiBtKFdoaXRlbGFiZWxHZXJtYW5MYW5ndWFnZUZpbGVTZXR0aW5ncywgd2hpdGVsYWJlbEdlcm1hbkxhbmd1YWdlRmlsZVNldHRpbmdzQXR0cnMpXG5cdH1cblxuXHRfcmVuZGVyQ3VzdG9tTWV0YVRhZ3NTZXR0aW5ncygpOiBDaGlsZHJlbiB7XG5cdFx0bGV0IG1ldGFUYWdzID0gXCJcIlxuXHRcdGxldCBvbk1ldGFUYWdzQ2hhbmdlZDogV2hpdGVsYWJlbEN1c3RvbU1ldGFUYWdzU2V0dGluZ3NBdHRyc1tcIm9uTWV0YVRhZ3NDaGFuZ2VkXCJdIHwgbnVsbCA9IG51bGxcblxuXHRcdGlmICh0aGlzLl93aGl0ZWxhYmVsQ29uZmlnKSB7XG5cdFx0XHRtZXRhVGFncyA9IHRoaXMuX3doaXRlbGFiZWxDb25maWcubWV0YVRhZ3NcblxuXHRcdFx0b25NZXRhVGFnc0NoYW5nZWQgPSAobWV0YVRhZ3MpID0+IHtcblx0XHRcdFx0bmV2ZXJOdWxsKHRoaXMuX3doaXRlbGFiZWxDb25maWcpLm1ldGFUYWdzID0gbWV0YVRhZ3NcblxuXHRcdFx0XHR0aGlzLl9lbnRpdHlDbGllbnQudXBkYXRlKG5ldmVyTnVsbCh0aGlzLl93aGl0ZWxhYmVsQ29uZmlnKSlcblx0XHRcdH1cblx0XHR9XG5cblx0XHRjb25zdCB3aGl0ZWxhYmVsQ3VzdG9tTWV0YVRhZ3NTZXR0aW5nc0F0dHJzID0ge1xuXHRcdFx0bWV0YVRhZ3MsXG5cdFx0XHRvbk1ldGFUYWdzQ2hhbmdlZCxcblx0XHR9XG5cdFx0cmV0dXJuIG0oV2hpdGVsYWJlbEN1c3RvbU1ldGFUYWdzU2V0dGluZ3MsIHdoaXRlbGFiZWxDdXN0b21NZXRhVGFnc1NldHRpbmdzQXR0cnMpXG5cdH1cblxuXHRfcmVuZGVyV2hpdGVsYWJlbFN0YXR1c1NldHRpbmdzKCk6IENoaWxkcmVuIHtcblx0XHRjb25zdCBwbGFuQ29uZmlnID0gdGhpcy5fcGxhbkNvbmZpZy5nZXRTeW5jKClcblx0XHRpZiAocGxhbkNvbmZpZyA9PSBudWxsKSByZXR1cm4gbnVsbFxuXHRcdGNvbnN0IHdoaXRlbGFiZWxBY3RpdmUgPSBpc1doaXRlbGFiZWxBY3RpdmUodGhpcy5fbGFzdEJvb2tpbmcsIHBsYW5Db25maWcpXG5cdFx0Y29uc3Qgd2hpdGVsYWJlbFN0YXR1c1NldHRpbmdzQXR0cnMgPSB7XG5cdFx0XHRpc1doaXRlbGFiZWxBY3RpdmU6IHdoaXRlbGFiZWxBY3RpdmUsXG5cdFx0fVxuXHRcdHJldHVybiBtKFdoaXRlbGFiZWxTdGF0dXNTZXR0aW5ncywgd2hpdGVsYWJlbFN0YXR1c1NldHRpbmdzQXR0cnMpXG5cdH1cblxuXHRfcmVuZGVyQnJhbmRpbmdEb21haW5Db25maWcoKTogQ2hpbGRyZW4ge1xuXHRcdGNvbnN0IGN1c3RvbWVySW5mbyA9IHRoaXMuX2N1c3RvbWVySW5mby5nZXRTeW5jKClcblx0XHRjb25zdCBwbGFuQ29uZmlnID0gdGhpcy5fcGxhbkNvbmZpZy5nZXRTeW5jKClcblxuXHRcdGlmICghY3VzdG9tZXJJbmZvIHx8ICFwbGFuQ29uZmlnKSByZXR1cm4gbnVsbFxuXHRcdGNvbnN0IGNlcnRpZmljYXRlSW5mbyA9IHRoaXMuX2NlcnRpZmljYXRlSW5mb1xuXHRcdGNvbnN0IGlzV2hpdGVsYWJlbEZlYXR1cmVFbmFibGVkID0gaXNXaGl0ZWxhYmVsQWN0aXZlKHRoaXMuX2xhc3RCb29raW5nLCBwbGFuQ29uZmlnKVxuXHRcdGNvbnN0IHdoaXRlbGFiZWxEb21haW4gPSB0aGlzLl93aGl0ZWxhYmVsRG9tYWluSW5mbyA/IHRoaXMuX3doaXRlbGFiZWxEb21haW5JbmZvLmRvbWFpbiA6IFwiXCJcblx0XHRjb25zdCB3aGl0ZWxhYmVsQnJhbmRpbmdEb21haW5TZXR0aW5nc0F0dHJzID0ge1xuXHRcdFx0Y3VzdG9tZXJJbmZvLFxuXHRcdFx0aXNXaGl0ZWxhYmVsRmVhdHVyZUVuYWJsZWQsXG5cdFx0XHRjZXJ0aWZpY2F0ZUluZm8sXG5cdFx0XHR3aGl0ZWxhYmVsRG9tYWluLFxuXHRcdH1cblx0XHRyZXR1cm4gbShXaGl0ZWxhYmVsQnJhbmRpbmdEb21haW5TZXR0aW5ncywgd2hpdGVsYWJlbEJyYW5kaW5nRG9tYWluU2V0dGluZ3NBdHRycylcblx0fVxuXG5cdF9pc1doaXRlbGFiZWxSZWdpc3RyYXRpb25WaXNpYmxlKCk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiAoXG5cdFx0XHR0aGlzLl9jdXN0b21lci5pc0xvYWRlZCgpICYmXG5cdFx0XHR0aGlzLl9jdXN0b21lci5nZXRMb2FkZWQoKS5jdXN0b21pemF0aW9ucy5zb21lKChjKSA9PiBjLmZlYXR1cmUgPT09IEZlYXR1cmVUeXBlLldoaXRlbGFiZWxQYXJlbnQpICYmXG5cdFx0XHR0aGlzLl9jdXN0b21lckluZm8uaXNMb2FkZWQoKSAmJlxuXHRcdFx0Z2V0V2hpdGVsYWJlbERvbWFpbkluZm8odGhpcy5fY3VzdG9tZXJJbmZvLmdldExvYWRlZCgpKSAhPSBudWxsXG5cdFx0KVxuXHR9XG5cblx0X3RyeUxvYWRXaGl0ZWxhYmVsQ29uZmlnKGRvbWFpbkluZm86IERvbWFpbkluZm8gfCBudWxsKTogUHJvbWlzZTxcblx0XHR8IHtcblx0XHRcdFx0d2hpdGVsYWJlbENvbmZpZzogV2hpdGVsYWJlbENvbmZpZ1xuXHRcdFx0XHRjZXJ0aWZpY2F0ZUluZm86IENlcnRpZmljYXRlSW5mb1xuXHRcdCAgfVxuXHRcdHwgbnVsbFxuXHRcdHwgdW5kZWZpbmVkXG5cdD4ge1xuXHRcdGlmIChkb21haW5JbmZvICYmIGRvbWFpbkluZm8ud2hpdGVsYWJlbENvbmZpZykge1xuXHRcdFx0cmV0dXJuIFByb21pc2UuYWxsKFtcblx0XHRcdFx0bG9jYXRvci5lbnRpdHlDbGllbnQubG9hZChXaGl0ZWxhYmVsQ29uZmlnVHlwZVJlZiwgZG9tYWluSW5mby53aGl0ZWxhYmVsQ29uZmlnKSxcblx0XHRcdFx0bG9jYXRvci5zZXJ2aWNlRXhlY3V0b3IuZ2V0KEJyYW5kaW5nRG9tYWluU2VydmljZSwgbnVsbCkudGhlbigocmVzcG9uc2UpID0+IG5ldmVyTnVsbChyZXNwb25zZS5jZXJ0aWZpY2F0ZUluZm8pKSxcblx0XHRcdF0pLnRoZW4oKFt3aGl0ZWxhYmVsQ29uZmlnLCBjZXJ0aWZpY2F0ZUluZm9dKSA9PiAoe1xuXHRcdFx0XHR3aGl0ZWxhYmVsQ29uZmlnLFxuXHRcdFx0XHRjZXJ0aWZpY2F0ZUluZm8sXG5cdFx0XHR9KSlcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZShudWxsKVxuXHRcdH1cblx0fVxuXG5cdGFzeW5jIF91cGRhdGVGaWVsZHMoKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0YXdhaXQgdGhpcy5fcGxhbkNvbmZpZy5nZXRBc3luYygpXG5cdFx0Y29uc3QgY3VzdG9tZXJJbmZvID0gYXdhaXQgdGhpcy5fY3VzdG9tZXJJbmZvLmdldEFzeW5jKClcblx0XHR0aGlzLl93aGl0ZWxhYmVsRG9tYWluSW5mbyA9IGdldFdoaXRlbGFiZWxEb21haW5JbmZvKGN1c3RvbWVySW5mbylcblx0XHRjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5fdHJ5TG9hZFdoaXRlbGFiZWxDb25maWcodGhpcy5fd2hpdGVsYWJlbERvbWFpbkluZm8pXG5cdFx0dGhpcy5fd2hpdGVsYWJlbENvbmZpZyA9IGRhdGE/LndoaXRlbGFiZWxDb25maWcgPz8gbnVsbFxuXHRcdHRoaXMuX2NlcnRpZmljYXRlSW5mbyA9IGRhdGE/LmNlcnRpZmljYXRlSW5mbyA/PyBudWxsXG5cdFx0cmV0dXJuIGxvY2F0b3IuZW50aXR5Q2xpZW50LmxvYWRSYW5nZShCb29raW5nVHlwZVJlZiwgbmV2ZXJOdWxsKGN1c3RvbWVySW5mby5ib29raW5ncykuaXRlbXMsIEdFTkVSQVRFRF9NQVhfSUQsIDEsIHRydWUpLnRoZW4oKGJvb2tpbmdzKSA9PiB7XG5cdFx0XHR0aGlzLl9sYXN0Qm9va2luZyA9IGJvb2tpbmdzLmxlbmd0aCA9PT0gMSA/IGJvb2tpbmdzWzBdIDogbnVsbFxuXHRcdFx0dGhpcy5fY3VzdG9tSnNvblRoZW1lID0gdGhpcy5fd2hpdGVsYWJlbENvbmZpZyA/IGdldFRoZW1lQ3VzdG9taXphdGlvbnModGhpcy5fd2hpdGVsYWJlbENvbmZpZykgOiBudWxsXG5cdFx0XHRtLnJlZHJhdygpXG5cdFx0XHR0aGlzLl9jdXN0b21lclByb3BlcnRpZXMuZ2V0QXN5bmMoKS50aGVuKG0ucmVkcmF3KVxuXHRcdH0pXG5cdH1cblxuXHRfcmVuZGVyTm90aWZpY2F0aW9uRW1haWxTZXR0aW5ncygpOiBDaGlsZHJlbiB7XG5cdFx0Y29uc3QgY3VzdG9tZXJQcm9wZXJ0aWVzID0gdGhpcy5fY3VzdG9tZXJQcm9wZXJ0aWVzLmdldFN5bmMoKVxuXG5cdFx0aWYgKCFjdXN0b21lclByb3BlcnRpZXMpIHJldHVybiBudWxsXG5cdFx0Y29uc3Qgbm90aWZpY2F0aW9uTWFpbFRlbXBsYXRlcyA9IGN1c3RvbWVyUHJvcGVydGllcy5ub3RpZmljYXRpb25NYWlsVGVtcGxhdGVzXG5cblx0XHRjb25zdCBvbkFkZFRlbXBsYXRlID0gKCkgPT4ge1xuXHRcdFx0c2hvd0J1eU9yU2V0Tm90aWZpY2F0aW9uRW1haWxEaWFsb2codGhpcy5fbGFzdEJvb2tpbmcsIHRoaXMuX2N1c3RvbWVyUHJvcGVydGllcylcblx0XHR9XG5cblx0XHRjb25zdCBvbkVkaXRUZW1wbGF0ZSA9ICh0ZW1wbGF0ZTogTm90aWZpY2F0aW9uTWFpbFRlbXBsYXRlKSA9PiB7XG5cdFx0XHRFZGl0Tm90aWZpY2F0aW9uRW1haWxEaWFsb2cuc2hvdyh0ZW1wbGF0ZSwgdGhpcy5fY3VzdG9tZXJQcm9wZXJ0aWVzKVxuXHRcdH1cblxuXHRcdGNvbnN0IG9uUmVtb3ZlVGVtcGxhdGUgPSAodGVtcGxhdGU6IE5vdGlmaWNhdGlvbk1haWxUZW1wbGF0ZSkgPT4ge1xuXHRcdFx0dGhpcy5fcmVtb3ZlTm90aWZpY2F0aW9uTWFpbFRlbXBsYXRlKHRlbXBsYXRlKVxuXHRcdH1cblxuXHRcdGNvbnN0IHdoaXRlbGFiZWxOb3RpZmljYXRpb25FbWFpbFNldHRpbmdzQXR0cnMgPSB7XG5cdFx0XHRub3RpZmljYXRpb25NYWlsVGVtcGxhdGVzLFxuXHRcdFx0b25BZGRUZW1wbGF0ZSxcblx0XHRcdG9uRWRpdFRlbXBsYXRlLFxuXHRcdFx0b25SZW1vdmVUZW1wbGF0ZSxcblx0XHR9XG5cdFx0cmV0dXJuIG0oV2hpdGVsYWJlbE5vdGlmaWNhdGlvbkVtYWlsU2V0dGluZ3MsIHdoaXRlbGFiZWxOb3RpZmljYXRpb25FbWFpbFNldHRpbmdzQXR0cnMpXG5cdH1cblxuXHRfcmVtb3ZlTm90aWZpY2F0aW9uTWFpbFRlbXBsYXRlKHRlbXBsYXRlOiBOb3RpZmljYXRpb25NYWlsVGVtcGxhdGUpIHtcblx0XHRzaG93UHJvZ3Jlc3NEaWFsb2coXG5cdFx0XHRcInBsZWFzZVdhaXRfbXNnXCIsXG5cdFx0XHR0aGlzLl9jdXN0b21lclByb3BlcnRpZXMuZ2V0QXN5bmMoKS50aGVuKChjdXN0b21lclByb3BzKSA9PiB7XG5cdFx0XHRcdGNvbnN0IGluZGV4ID0gY3VzdG9tZXJQcm9wcy5ub3RpZmljYXRpb25NYWlsVGVtcGxhdGVzLmZpbmRJbmRleCgodCkgPT4gdC5sYW5ndWFnZSA9PT0gdGVtcGxhdGUubGFuZ3VhZ2UpXG5cblx0XHRcdFx0aWYgKGluZGV4ICE9PSAtMSkge1xuXHRcdFx0XHRcdGN1c3RvbWVyUHJvcHMubm90aWZpY2F0aW9uTWFpbFRlbXBsYXRlcy5zcGxpY2UoaW5kZXgsIDEpXG5cblx0XHRcdFx0XHR0aGlzLl9lbnRpdHlDbGllbnQudXBkYXRlKGN1c3RvbWVyUHJvcHMpXG5cdFx0XHRcdH1cblx0XHRcdH0pLFxuXHRcdClcblx0fVxuXG5cdGVudGl0eUV2ZW50c1JlY2VpdmVkKHVwZGF0ZXM6IFJlYWRvbmx5QXJyYXk8RW50aXR5VXBkYXRlRGF0YT4pOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRyZXR1cm4gcHJvbWlzZU1hcCh1cGRhdGVzLCAodXBkYXRlKSA9PiB7XG5cdFx0XHRpZiAoaXNVcGRhdGVGb3JUeXBlUmVmKEN1c3RvbWVyVHlwZVJlZiwgdXBkYXRlKSAmJiB1cGRhdGUub3BlcmF0aW9uID09PSBPcGVyYXRpb25UeXBlLlVQREFURSkge1xuXHRcdFx0XHR0aGlzLl9jdXN0b21lci5yZXNldCgpXG5cblx0XHRcdFx0cmV0dXJuIHRoaXMuX2N1c3RvbWVyLmdldEFzeW5jKCkudGhlbigoKSA9PiBtLnJlZHJhdygpKVxuXHRcdFx0fSBlbHNlIGlmIChpc1VwZGF0ZUZvclR5cGVSZWYoQ3VzdG9tZXJJbmZvVHlwZVJlZiwgdXBkYXRlKSAmJiB1cGRhdGUub3BlcmF0aW9uID09PSBPcGVyYXRpb25UeXBlLlVQREFURSkge1xuXHRcdFx0XHR0aGlzLl9jdXN0b21lckluZm8ucmVzZXQoKVxuXG5cdFx0XHRcdHJldHVybiB0aGlzLl91cGRhdGVGaWVsZHMoKVxuXHRcdFx0fSBlbHNlIGlmIChpc1VwZGF0ZUZvclR5cGVSZWYoV2hpdGVsYWJlbENvbmZpZ1R5cGVSZWYsIHVwZGF0ZSkgJiYgdXBkYXRlLm9wZXJhdGlvbiA9PT0gT3BlcmF0aW9uVHlwZS5VUERBVEUpIHtcblx0XHRcdFx0cmV0dXJuIHRoaXMuX3VwZGF0ZUZpZWxkcygpXG5cdFx0XHR9IGVsc2UgaWYgKGlzVXBkYXRlRm9yVHlwZVJlZihDdXN0b21lclByb3BlcnRpZXNUeXBlUmVmLCB1cGRhdGUpICYmIHVwZGF0ZS5vcGVyYXRpb24gPT09IE9wZXJhdGlvblR5cGUuVVBEQVRFKSB7XG5cdFx0XHRcdHRoaXMuX2N1c3RvbWVyUHJvcGVydGllcy5yZXNldCgpXG5cblx0XHRcdFx0cmV0dXJuIHRoaXMuX3VwZGF0ZUZpZWxkcygpXG5cdFx0XHR9IGVsc2UgaWYgKGlzVXBkYXRlRm9yVHlwZVJlZihCb29raW5nVHlwZVJlZiwgdXBkYXRlKSkge1xuXHRcdFx0XHRyZXR1cm4gdGhpcy5fdXBkYXRlRmllbGRzKClcblx0XHRcdH1cblx0XHR9KS50aGVuKG5vT3ApXG5cdH1cbn1cbiIsImltcG9ydCBtLCB7IENoaWxkcmVuIH0gZnJvbSBcIm1pdGhyaWxcIlxuaW1wb3J0IHsgZ2V0TGFuZ3VhZ2UsIGxhbmcsIExhbmd1YWdlQ29kZSwgbGFuZ3VhZ2VDb2RlVG9UYWcsIGxhbmd1YWdlTmF0aXZlIH0gZnJvbSBcIi4uL21pc2MvTGFuZ3VhZ2VWaWV3TW9kZWwuanNcIlxuaW1wb3J0IHsgc3R5bGVzIH0gZnJvbSBcIi4uL2d1aS9zdHlsZXMuanNcIlxuaW1wb3J0IHR5cGUgeyBEcm9wRG93blNlbGVjdG9yQXR0cnMgfSBmcm9tIFwiLi4vZ3VpL2Jhc2UvRHJvcERvd25TZWxlY3Rvci5qc1wiXG5pbXBvcnQgeyBEcm9wRG93blNlbGVjdG9yLCBTZWxlY3Rvckl0ZW1MaXN0IH0gZnJvbSBcIi4uL2d1aS9iYXNlL0Ryb3BEb3duU2VsZWN0b3IuanNcIlxuaW1wb3J0IHsgZGV2aWNlQ29uZmlnIH0gZnJvbSBcIi4uL21pc2MvRGV2aWNlQ29uZmlnLmpzXCJcbmltcG9ydCB7IFRpbWVGb3JtYXQsIFdlZWtTdGFydCB9IGZyb20gXCIuLi9hcGkvY29tbW9uL1R1dGFub3RhQ29uc3RhbnRzLmpzXCJcbmltcG9ydCB7IGRvd25jYXN0LCBpbmNyZW1lbnREYXRlLCBub09wLCBwcm9taXNlTWFwIH0gZnJvbSBcIkB0dXRhby90dXRhbm90YS11dGlsc1wiXG5pbXBvcnQgeyBVc2VyU2V0dGluZ3NHcm91cFJvb3RUeXBlUmVmIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9hcGkvZW50aXRpZXMvdHV0YW5vdGEvVHlwZVJlZnMuanNcIlxuaW1wb3J0IHsgZ2V0SG91ckN5Y2xlIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9taXNjL0Zvcm1hdHRlclwiXG5pbXBvcnQgeyBUaGVtZUlkLCB0aGVtZU9wdGlvbnMsIFRoZW1lUHJlZmVyZW5jZSB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL3RoZW1lXCJcbmltcG9ydCB0eXBlIHsgVXBkYXRhYmxlU2V0dGluZ3NWaWV3ZXIgfSBmcm9tIFwiLi9JbnRlcmZhY2VzLmpzXCJcbmltcG9ydCB7IGlzRGVza3RvcCB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL2NvbW1vbi9FbnZcIlxuaW1wb3J0IHsgbG9jYXRvciB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL21haW4vQ29tbW9uTG9jYXRvclwiXG5pbXBvcnQgeyBFbnRpdHlVcGRhdGVEYXRhLCBpc1VwZGF0ZUZvclR5cGVSZWYgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2FwaS9jb21tb24vdXRpbHMvRW50aXR5VXBkYXRlVXRpbHMuanNcIlxuaW1wb3J0IHsgY2xpZW50IH0gZnJvbSBcIi4uL21pc2MvQ2xpZW50RGV0ZWN0b3IuanNcIlxuXG5leHBvcnQgY2xhc3MgQXBwZWFyYW5jZVNldHRpbmdzVmlld2VyIGltcGxlbWVudHMgVXBkYXRhYmxlU2V0dGluZ3NWaWV3ZXIge1xuXHRwcml2YXRlIF9jdXN0b21UaGVtZXM6IEFycmF5PFRoZW1lSWQ+IHwgbnVsbCA9IG51bGxcblxuXHRvbmNyZWF0ZSgpIHtcblx0XHRsb2NhdG9yLnRoZW1lQ29udHJvbGxlci5nZXRDdXN0b21UaGVtZXMoKS50aGVuKCh0aGVtZXMpID0+IHtcblx0XHRcdHRoaXMuX2N1c3RvbVRoZW1lcyA9IHRoZW1lc1xuXHRcdFx0bS5yZWRyYXcoKVxuXHRcdH0pXG5cdH1cblxuXHR2aWV3KCk6IENoaWxkcmVuIHtcblx0XHRjb25zdCBhY3R1YWxMYW5ndWFnZUl0ZW1zOiBTZWxlY3Rvckl0ZW1MaXN0PExhbmd1YWdlQ29kZSB8IG51bGw+ID0gbGFuZ3VhZ2VOYXRpdmVcblx0XHRcdC5tYXAoKGxhbmd1YWdlKSA9PiB7XG5cdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0bmFtZTogbGFuZ3VhZ2UudGV4dE5hbWUsXG5cdFx0XHRcdFx0dmFsdWU6IGxhbmd1YWdlLmNvZGUsXG5cdFx0XHRcdH1cblx0XHRcdH0pXG5cdFx0XHQuc29ydCgobDEsIGwyKSA9PiBsMS5uYW1lLmxvY2FsZUNvbXBhcmUobDIubmFtZSkpXG5cdFx0Y29uc3QgbGFuZ3VhZ2VJdGVtczogU2VsZWN0b3JJdGVtTGlzdDxMYW5ndWFnZUNvZGUgfCBudWxsPiA9IGFjdHVhbExhbmd1YWdlSXRlbXMuY29uY2F0KHtcblx0XHRcdG5hbWU6IGxhbmcuZ2V0KFwiYXV0b21hdGljX2xhYmVsXCIpLFxuXHRcdFx0dmFsdWU6IG51bGwsXG5cdFx0fSlcblxuXHRcdGNvbnN0IGxhbmd1YWdlRHJvcERvd25BdHRyczogRHJvcERvd25TZWxlY3RvckF0dHJzPExhbmd1YWdlQ29kZSB8IG51bGw+ID0ge1xuXHRcdFx0bGFiZWw6IFwibGFuZ3VhZ2VfbGFiZWxcIixcblx0XHRcdGl0ZW1zOiBsYW5ndWFnZUl0ZW1zLFxuXHRcdFx0Ly8gRHJvcGRvd25TZWxlY3Rvck4gdXNlcyBgPT09YCB0byBjb21wYXJlIGl0ZW1zIHNvIGlmIHRoZSBsYW5ndWFnZSBpcyBub3Qgc2V0IHRoZW4gYHVuZGVmaW5lZGAgd2lsbCBub3QgbWF0Y2ggYG51bGxgXG5cdFx0XHRzZWxlY3RlZFZhbHVlOiBkZXZpY2VDb25maWcuZ2V0TGFuZ3VhZ2UoKSB8fCBudWxsLFxuXHRcdFx0c2VsZWN0aW9uQ2hhbmdlZEhhbmRsZXI6IGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRkZXZpY2VDb25maWcuc2V0TGFuZ3VhZ2UodmFsdWUpXG5cdFx0XHRcdGNvbnN0IG5ld0xhbmd1YWdlID0gdmFsdWVcblx0XHRcdFx0XHQ/IHtcblx0XHRcdFx0XHRcdFx0Y29kZTogdmFsdWUsXG5cdFx0XHRcdFx0XHRcdGxhbmd1YWdlVGFnOiBsYW5ndWFnZUNvZGVUb1RhZyh2YWx1ZSksXG5cdFx0XHRcdFx0ICB9XG5cdFx0XHRcdFx0OiBnZXRMYW5ndWFnZSgpXG5cdFx0XHRcdGF3YWl0IGxhbmcuc2V0TGFuZ3VhZ2UobmV3TGFuZ3VhZ2UpXG5cblx0XHRcdFx0aWYgKGlzRGVza3RvcCgpKSB7XG5cdFx0XHRcdFx0YXdhaXQgbG9jYXRvci5kZXNrdG9wU2V0dGluZ3NGYWNhZGUuY2hhbmdlTGFuZ3VhZ2UobmV3TGFuZ3VhZ2UuY29kZSwgbmV3TGFuZ3VhZ2UubGFuZ3VhZ2VUYWcpXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRzdHlsZXMudXBkYXRlU3R5bGUoXCJtYWluXCIpXG5cdFx0XHRcdG0ucmVkcmF3KClcblx0XHRcdH0sXG5cdFx0fVxuXHRcdGNvbnN0IHVzZXJTZXR0aW5nc0dyb3VwUm9vdCA9IGxvY2F0b3IubG9naW5zLmdldFVzZXJDb250cm9sbGVyKCkudXNlclNldHRpbmdzR3JvdXBSb290XG5cdFx0Y29uc3QgaG91ckZvcm1hdERyb3BEb3duQXR0cnM6IERyb3BEb3duU2VsZWN0b3JBdHRyczxUaW1lRm9ybWF0PiA9IHtcblx0XHRcdGxhYmVsOiBcInRpbWVGb3JtYXRfbGFiZWxcIixcblx0XHRcdGl0ZW1zOiBbXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRuYW1lOiBsYW5nLmdldChcInRpbWVGb3JtYXRUd2VudHlGb3VySG91cl9sYWJlbFwiKSxcblx0XHRcdFx0XHR2YWx1ZTogVGltZUZvcm1hdC5UV0VOVFlfRk9VUl9IT1VSUyxcblx0XHRcdFx0fSxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdG5hbWU6IGxhbmcuZ2V0KFwidGltZUZvcm1hdFR3ZWx2ZUhvdXJfbGFiZWxcIiksXG5cdFx0XHRcdFx0dmFsdWU6IFRpbWVGb3JtYXQuVFdFTFZFX0hPVVJTLFxuXHRcdFx0XHR9LFxuXHRcdFx0XSxcblx0XHRcdHNlbGVjdGVkVmFsdWU6IGRvd25jYXN0KHVzZXJTZXR0aW5nc0dyb3VwUm9vdC50aW1lRm9ybWF0KSxcblx0XHRcdHNlbGVjdGlvbkNoYW5nZWRIYW5kbGVyOiAodmFsdWUpID0+IHtcblx0XHRcdFx0dXNlclNldHRpbmdzR3JvdXBSb290LnRpbWVGb3JtYXQgPSB2YWx1ZVxuXHRcdFx0XHRsb2NhdG9yLmVudGl0eUNsaWVudC51cGRhdGUodXNlclNldHRpbmdzR3JvdXBSb290KVxuXHRcdFx0fSxcblx0XHR9XG5cdFx0Y29uc3Qgd2Vla2RheUZvcm1hdCA9IG5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KGxhbmcubGFuZ3VhZ2VUYWcsIHtcblx0XHRcdHdlZWtkYXk6IFwibG9uZ1wiLFxuXHRcdH0pXG5cdFx0Y29uc3QgY2FsY0RhdGUgPSBuZXcgRGF0ZSgpXG5cdFx0Y29uc3Qgc3VuZGF5TmFtZSA9IHdlZWtkYXlGb3JtYXQuZm9ybWF0KGluY3JlbWVudERhdGUoY2FsY0RhdGUsIC1jYWxjRGF0ZS5nZXREYXkoKSkpIC8vIFN1bmRheSBhcyByZWZlcmVuY2VcblxuXHRcdGNvbnN0IG1vbmRheU5hbWUgPSB3ZWVrZGF5Rm9ybWF0LmZvcm1hdChpbmNyZW1lbnREYXRlKGNhbGNEYXRlLCAxKSkgLy8gTW9uZGF5IGlzIG9uZSBkYXkgbGF0ZXJcblxuXHRcdGNvbnN0IHNhdHVyZGF5TmFtZSA9IHdlZWtkYXlGb3JtYXQuZm9ybWF0KGluY3JlbWVudERhdGUoY2FsY0RhdGUsIDUpKSAvLyBTYXR1cmRheSBpcyBmaXZlIGRheXMgbGF0ZXJcblxuXHRcdGNvbnN0IHdlZWtTdGFydERyb3BEb3duQXR0cnM6IERyb3BEb3duU2VsZWN0b3JBdHRyczxXZWVrU3RhcnQ+ID0ge1xuXHRcdFx0bGFiZWw6IFwid2Vla1N0YXJ0X2xhYmVsXCIsXG5cdFx0XHRpdGVtczogW1xuXHRcdFx0XHR7XG5cdFx0XHRcdFx0bmFtZTogbW9uZGF5TmFtZSxcblx0XHRcdFx0XHR2YWx1ZTogV2Vla1N0YXJ0Lk1PTkRBWSxcblx0XHRcdFx0fSxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdG5hbWU6IHNhdHVyZGF5TmFtZSxcblx0XHRcdFx0XHR2YWx1ZTogV2Vla1N0YXJ0LlNBVFVSREFZLFxuXHRcdFx0XHR9LFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0bmFtZTogc3VuZGF5TmFtZSxcblx0XHRcdFx0XHR2YWx1ZTogV2Vla1N0YXJ0LlNVTkRBWSxcblx0XHRcdFx0fSxcblx0XHRcdF0sXG5cdFx0XHRzZWxlY3RlZFZhbHVlOiBkb3duY2FzdCh1c2VyU2V0dGluZ3NHcm91cFJvb3Quc3RhcnRPZlRoZVdlZWspLFxuXHRcdFx0c2VsZWN0aW9uQ2hhbmdlZEhhbmRsZXI6ICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHR1c2VyU2V0dGluZ3NHcm91cFJvb3Quc3RhcnRPZlRoZVdlZWsgPSB2YWx1ZVxuXHRcdFx0XHRsb2NhdG9yLmVudGl0eUNsaWVudC51cGRhdGUodXNlclNldHRpbmdzR3JvdXBSb290KVxuXHRcdFx0fSxcblx0XHR9XG5cdFx0cmV0dXJuIG0oXCIuZmlsbC1hYnNvbHV0ZS5zY3JvbGwucGxyLWwucGIteGxcIiwgW1xuXHRcdFx0bShcIi5oNC5tdC1sXCIsIGxhbmcuZ2V0KFwic2V0dGluZ3NGb3JEZXZpY2VfbGFiZWxcIikpLFxuXHRcdFx0bShEcm9wRG93blNlbGVjdG9yLCBsYW5ndWFnZURyb3BEb3duQXR0cnMpLFxuXHRcdFx0dGhpcy5fcmVuZGVyVGhlbWVTZWxlY3RvcigpLFxuXHRcdFx0bShcIi5oNC5tdC1sXCIsIGxhbmcuZ2V0KFwidXNlclNldHRpbmdzX2xhYmVsXCIpKSxcblx0XHRcdG0oRHJvcERvd25TZWxlY3RvciwgaG91ckZvcm1hdERyb3BEb3duQXR0cnMpLFxuXHRcdFx0bShEcm9wRG93blNlbGVjdG9yLCB3ZWVrU3RhcnREcm9wRG93bkF0dHJzKSxcblx0XHRdKVxuXHR9XG5cblx0X3JlbmRlclRoZW1lU2VsZWN0b3IoKTogQ2hpbGRyZW4ge1xuXHRcdGlmICghbG9jYXRvci50aGVtZUNvbnRyb2xsZXIuc2hvdWxkQWxsb3dDaGFuZ2luZ1RoZW1lKCkgfHwgdGhpcy5fY3VzdG9tVGhlbWVzID09IG51bGwpIHtcblx0XHRcdHJldHVybiBudWxsXG5cdFx0fVxuXG5cdFx0Y29uc3QgY3VzdG9tT3B0aW9ucyA9IHRoaXMuX2N1c3RvbVRoZW1lcy5tYXAoKHRoZW1lSWQpID0+IHtcblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdG5hbWU6IHRoZW1lSWQsXG5cdFx0XHRcdHZhbHVlOiB0aGVtZUlkLFxuXHRcdFx0fVxuXHRcdH0pXG5cblx0XHRjb25zdCB0aGVtZURyb3BEb3duQXR0cnM6IERyb3BEb3duU2VsZWN0b3JBdHRyczxUaGVtZVByZWZlcmVuY2U+ID0ge1xuXHRcdFx0bGFiZWw6IFwic3dpdGNoQ29sb3JUaGVtZV9hY3Rpb25cIixcblx0XHRcdGl0ZW1zOiBbLi4udGhlbWVPcHRpb25zKGNsaWVudC5pc0NhbGVuZGFyQXBwKCkpLm1hcCgoeyBuYW1lLCB2YWx1ZSB9KSA9PiAoeyBuYW1lOiBsYW5nLmdldChuYW1lKSwgdmFsdWU6IHZhbHVlIH0pKSwgLi4uY3VzdG9tT3B0aW9uc10sXG5cdFx0XHRzZWxlY3RlZFZhbHVlOiBsb2NhdG9yLnRoZW1lQ29udHJvbGxlci50aGVtZVByZWZlcmVuY2UsXG5cdFx0XHRzZWxlY3Rpb25DaGFuZ2VkSGFuZGxlcjogKHZhbHVlKSA9PiBsb2NhdG9yLnRoZW1lQ29udHJvbGxlci5zZXRUaGVtZVByZWZlcmVuY2UodmFsdWUpLFxuXHRcdFx0ZHJvcGRvd25XaWR0aDogMzAwLFxuXHRcdH1cblx0XHRyZXR1cm4gbShEcm9wRG93blNlbGVjdG9yLCB0aGVtZURyb3BEb3duQXR0cnMpXG5cdH1cblxuXHRlbnRpdHlFdmVudHNSZWNlaXZlZCh1cGRhdGVzOiBSZWFkb25seUFycmF5PEVudGl0eVVwZGF0ZURhdGE+KTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0cmV0dXJuIHByb21pc2VNYXAodXBkYXRlcywgKHVwZGF0ZSkgPT4ge1xuXHRcdFx0aWYgKGlzVXBkYXRlRm9yVHlwZVJlZihVc2VyU2V0dGluZ3NHcm91cFJvb3RUeXBlUmVmLCB1cGRhdGUpKSB7XG5cdFx0XHRcdHJldHVybiBsb2NhdG9yLmVudGl0eUNsaWVudC5sb2FkKFVzZXJTZXR0aW5nc0dyb3VwUm9vdFR5cGVSZWYsIHVwZGF0ZS5pbnN0YW5jZUlkKS50aGVuKChzZXR0aW5ncykgPT4ge1xuXHRcdFx0XHRcdGxhbmcudXBkYXRlRm9ybWF0cyh7XG5cdFx0XHRcdFx0XHRob3VyQ3ljbGU6IGdldEhvdXJDeWNsZShzZXR0aW5ncyksXG5cdFx0XHRcdFx0fSlcblx0XHRcdFx0XHRtLnJlZHJhdygpXG5cdFx0XHRcdH0pXG5cdFx0XHR9XG5cdFx0fSkudGhlbihub09wKVxuXHR9XG59XG4iLCJpbXBvcnQgbSwgeyBDaGlsZHJlbiB9IGZyb20gXCJtaXRocmlsXCJcbmltcG9ydCB0eXBlIHsgS25vd2xlZGdlQmFzZUVudHJ5LCBUZW1wbGF0ZUdyb3VwUm9vdCB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL2VudGl0aWVzL3R1dGFub3RhL1R5cGVSZWZzLmpzXCJcbmltcG9ydCB7IEtub3dsZWRnZUJhc2VFbnRyeVR5cGVSZWYgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2FwaS9lbnRpdGllcy90dXRhbm90YS9UeXBlUmVmcy5qc1wiXG5pbXBvcnQgeyBsYW5nIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9taXNjL0xhbmd1YWdlVmlld01vZGVsXCJcblxuaW1wb3J0IHsgc2l6ZSB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL3NpemVcIlxuaW1wb3J0IHsgRW50aXR5Q2xpZW50IH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9hcGkvY29tbW9uL0VudGl0eUNsaWVudFwiXG5pbXBvcnQgeyBpc1NhbWVJZCwgbGlzdElkUGFydCB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL2NvbW1vbi91dGlscy9FbnRpdHlVdGlsc1wiXG5pbXBvcnQgeyBoYXNDYXBhYmlsaXR5T25Hcm91cCB9IGZyb20gXCIuLi8uLi9jb21tb24vc2hhcmluZy9Hcm91cFV0aWxzXCJcbmltcG9ydCB7IFNoYXJlQ2FwYWJpbGl0eSB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL2NvbW1vbi9UdXRhbm90YUNvbnN0YW50c1wiXG5pbXBvcnQgdHlwZSB7IExvZ2luQ29udHJvbGxlciB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL21haW4vTG9naW5Db250cm9sbGVyXCJcbmltcG9ydCB0eXBlIHsgR3JvdXAgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2FwaS9lbnRpdGllcy9zeXMvVHlwZVJlZnMuanNcIlxuaW1wb3J0IHsgTGlzdENvbHVtbldyYXBwZXIgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2d1aS9MaXN0Q29sdW1uV3JhcHBlclwiXG5pbXBvcnQgeyBLbm93bGVkZ2VCYXNlRW50cnlWaWV3IH0gZnJvbSBcIi4uL2tub3dsZWRnZWJhc2Uvdmlldy9Lbm93bGVkZ2VCYXNlRW50cnlWaWV3XCJcbmltcG9ydCB7IG1lbW9pemVkLCBOQlNQLCBub09wIH0gZnJvbSBcIkB0dXRhby90dXRhbm90YS11dGlsc1wiXG5pbXBvcnQgeyBhc3NlcnRNYWluT3JOb2RlIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9hcGkvY29tbW9uL0VudlwiXG5pbXBvcnQgeyBTZWxlY3RhYmxlUm93Q29udGFpbmVyLCBTZWxlY3RhYmxlUm93U2VsZWN0ZWRTZXR0ZXIgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2d1aS9TZWxlY3RhYmxlUm93Q29udGFpbmVyLmpzXCJcbmltcG9ydCB7IExpc3RFbGVtZW50TGlzdE1vZGVsIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9taXNjL0xpc3RFbGVtZW50TGlzdE1vZGVsLmpzXCJcbmltcG9ydCB7IGxpc3RTZWxlY3Rpb25LZXlib2FyZFNob3J0Y3V0cywgb25seVNpbmdsZVNlbGVjdGlvbiwgVmlydHVhbFJvdyB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL2Jhc2UvTGlzdFV0aWxzLmpzXCJcbmltcG9ydCBTdHJlYW0gZnJvbSBcIm1pdGhyaWwvc3RyZWFtXCJcbmltcG9ydCB7IExpc3QsIExpc3RBdHRycywgTXVsdGlzZWxlY3RNb2RlLCBSZW5kZXJDb25maWcgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2d1aS9iYXNlL0xpc3QuanNcIlxuaW1wb3J0IHsgQmFzZVNlYXJjaEJhciwgQmFzZVNlYXJjaEJhckF0dHJzIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvYmFzZS9CYXNlU2VhcmNoQmFyLmpzXCJcbmltcG9ydCB7IEljb25CdXR0b24gfSBmcm9tIFwiLi4vLi4vY29tbW9uL2d1aS9iYXNlL0ljb25CdXR0b24uanNcIlxuaW1wb3J0IHsgSWNvbnMgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2d1aS9iYXNlL2ljb25zL0ljb25zLmpzXCJcbmltcG9ydCBDb2x1bW5FbXB0eU1lc3NhZ2VCb3ggZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvYmFzZS9Db2x1bW5FbXB0eU1lc3NhZ2VCb3guanNcIlxuaW1wb3J0IHsgdGhlbWUgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2d1aS90aGVtZS5qc1wiXG5pbXBvcnQgeyBrbm93bGVkZ2VCYXNlU2VhcmNoIH0gZnJvbSBcIi4uL2tub3dsZWRnZWJhc2UvbW9kZWwvS25vd2xlZGdlQmFzZVNlYXJjaEZpbHRlci5qc1wiXG5pbXBvcnQgeyBzaG93S25vd2xlZGdlQmFzZUVkaXRvciB9IGZyb20gXCIuL0tub3dsZWRnZUJhc2VFZGl0b3IuanNcIlxuaW1wb3J0IHsga2V5TWFuYWdlciB9IGZyb20gXCIuLi8uLi9jb21tb24vbWlzYy9LZXlNYW5hZ2VyLmpzXCJcbmltcG9ydCB7IEVudGl0eVVwZGF0ZURhdGEsIGlzVXBkYXRlRm9yVHlwZVJlZiB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL2NvbW1vbi91dGlscy9FbnRpdHlVcGRhdGVVdGlscy5qc1wiXG5pbXBvcnQgeyBMaXN0QXV0b1NlbGVjdEJlaGF2aW9yIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9taXNjL0RldmljZUNvbmZpZy5qc1wiXG5pbXBvcnQgeyBVcGRhdGFibGVTZXR0aW5nc0RldGFpbHNWaWV3ZXIsIFVwZGF0YWJsZVNldHRpbmdzVmlld2VyIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9zZXR0aW5ncy9JbnRlcmZhY2VzLmpzXCJcblxuYXNzZXJ0TWFpbk9yTm9kZSgpXG5cbi8qKlxuICogIExpc3QgdGhhdCBpcyByZW5kZXJlZCB3aXRoaW4gdGhlIGtub3dsZWRnZUJhc2UgU2V0dGluZ3NcbiAqL1xuZXhwb3J0IGNsYXNzIEtub3dsZWRnZUJhc2VMaXN0VmlldyBpbXBsZW1lbnRzIFVwZGF0YWJsZVNldHRpbmdzVmlld2VyIHtcblx0cHJpdmF0ZSBzZWFyY2hRdWVyeTogc3RyaW5nID0gXCJcIlxuXHRwcml2YXRlIHJlc3VsdEl0ZW1JZHM6IEFycmF5PElkVHVwbGU+ID0gW11cblxuXHRwcml2YXRlIGxpc3RNb2RlbDogTGlzdEVsZW1lbnRMaXN0TW9kZWw8S25vd2xlZGdlQmFzZUVudHJ5PlxuXHRwcml2YXRlIGxpc3RTdGF0ZVN1YnNjcmlwdGlvbjogU3RyZWFtPHVua25vd24+IHwgbnVsbCA9IG51bGxcblx0cHJpdmF0ZSByZWFkb25seSByZW5kZXJDb25maWc6IFJlbmRlckNvbmZpZzxLbm93bGVkZ2VCYXNlRW50cnksIEtub3dsZWRnZUJhc2VSb3c+ID0ge1xuXHRcdGl0ZW1IZWlnaHQ6IHNpemUubGlzdF9yb3dfaGVpZ2h0LFxuXHRcdG11bHRpc2VsZWN0aW9uQWxsb3dlZDogTXVsdGlzZWxlY3RNb2RlLkRpc2FibGVkLFxuXHRcdHN3aXBlOiBudWxsLFxuXHRcdGNyZWF0ZUVsZW1lbnQ6IChkb20pID0+IHtcblx0XHRcdGNvbnN0IGtub3dsZWRnZWJhc2VSb3cgPSBuZXcgS25vd2xlZGdlQmFzZVJvdygpXG5cdFx0XHRtLnJlbmRlcihkb20sIGtub3dsZWRnZWJhc2VSb3cucmVuZGVyKCkpXG5cdFx0XHRyZXR1cm4ga25vd2xlZGdlYmFzZVJvd1xuXHRcdH0sXG5cdH1cblx0cHJpdmF0ZSByZWFkb25seSBzaG9ydGN1dHMgPSBsaXN0U2VsZWN0aW9uS2V5Ym9hcmRTaG9ydGN1dHMoTXVsdGlzZWxlY3RNb2RlLkRpc2FibGVkLCAoKSA9PiB0aGlzLmxpc3RNb2RlbClcblxuXHRjb25zdHJ1Y3Rvcihcblx0XHRwcml2YXRlIHJlYWRvbmx5IGVudGl0eUNsaWVudDogRW50aXR5Q2xpZW50LFxuXHRcdHByaXZhdGUgcmVhZG9ubHkgbG9naW5zOiBMb2dpbkNvbnRyb2xsZXIsXG5cdFx0cHJpdmF0ZSByZWFkb25seSB0ZW1wbGF0ZUdyb3VwUm9vdDogVGVtcGxhdGVHcm91cFJvb3QsXG5cdFx0cHJpdmF0ZSByZWFkb25seSB0ZW1wbGF0ZUdyb3VwOiBHcm91cCxcblx0XHRwcml2YXRlIHJlYWRvbmx5IHVwZGF0ZURldGFpbHNWaWV3ZXI6ICh2aWV3ZXI6IEtub3dsZWRnZUJhc2VTZXR0aW5nc0RldGFpbHNWaWV3ZXIgfCBudWxsKSA9PiB1bmtub3duLFxuXHRcdHByaXZhdGUgcmVhZG9ubHkgZm9jdXNEZXRhaWxzVmlld2VyOiAoKSA9PiB1bmtub3duLFxuXHQpIHtcblx0XHR0aGlzLmxpc3RNb2RlbCA9IHRoaXMubWFrZUxpc3RNb2RlbCgpXG5cblx0XHR0aGlzLmxpc3RNb2RlbC5sb2FkSW5pdGlhbCgpXG5cblx0XHQvLyBoYWNrcyBmb3Igb2xkIGNvbXBvbmVudHNcblx0XHR0aGlzLnZpZXcgPSB0aGlzLnZpZXcuYmluZCh0aGlzKVxuXHRcdHRoaXMub25jcmVhdGUgPSB0aGlzLm9uY3JlYXRlLmJpbmQodGhpcylcblx0XHR0aGlzLm9ucmVtb3ZlID0gdGhpcy5vbnJlbW92ZS5iaW5kKHRoaXMpXG5cdH1cblxuXHRvbmNyZWF0ZSgpIHtcblx0XHRrZXlNYW5hZ2VyLnJlZ2lzdGVyU2hvcnRjdXRzKHRoaXMuc2hvcnRjdXRzKVxuXHR9XG5cblx0b25yZW1vdmUoKSB7XG5cdFx0a2V5TWFuYWdlci51bnJlZ2lzdGVyU2hvcnRjdXRzKHRoaXMuc2hvcnRjdXRzKVxuXHR9XG5cblx0cHJpdmF0ZSBtYWtlTGlzdE1vZGVsKCkge1xuXHRcdGNvbnN0IGxpc3RNb2RlbCA9IG5ldyBMaXN0RWxlbWVudExpc3RNb2RlbDxLbm93bGVkZ2VCYXNlRW50cnk+KHtcblx0XHRcdHNvcnRDb21wYXJlOiAoYTogS25vd2xlZGdlQmFzZUVudHJ5LCBiOiBLbm93bGVkZ2VCYXNlRW50cnkpID0+IHtcblx0XHRcdFx0Y29uc3QgdGl0bGVBID0gYS50aXRsZS50b1VwcGVyQ2FzZSgpXG5cdFx0XHRcdGNvbnN0IHRpdGxlQiA9IGIudGl0bGUudG9VcHBlckNhc2UoKVxuXHRcdFx0XHRyZXR1cm4gdGl0bGVBIDwgdGl0bGVCID8gLTEgOiB0aXRsZUEgPiB0aXRsZUIgPyAxIDogMFxuXHRcdFx0fSxcblx0XHRcdGZldGNoOiBhc3luYyAoX2xhc3RGZXRjaGVkRW50aXR5LCBfY291bnQpID0+IHtcblx0XHRcdFx0Ly8gbG9hZCBhbGwgZW50cmllcyBhdCBvbmNlIHRvIGFwcGx5IGN1c3RvbSBzb3J0IG9yZGVyXG5cdFx0XHRcdGNvbnN0IGFsbEVudHJpZXMgPSBhd2FpdCB0aGlzLmVudGl0eUNsaWVudC5sb2FkQWxsKEtub3dsZWRnZUJhc2VFbnRyeVR5cGVSZWYsIHRoaXMuZ2V0TGlzdElkKCkpXG5cdFx0XHRcdHJldHVybiB7IGl0ZW1zOiBhbGxFbnRyaWVzLCBjb21wbGV0ZTogdHJ1ZSB9XG5cdFx0XHR9LFxuXHRcdFx0bG9hZFNpbmdsZTogKF9saXN0SWQ6IElkLCBlbGVtZW50SWQ6IElkKSA9PiB7XG5cdFx0XHRcdHJldHVybiB0aGlzLmVudGl0eUNsaWVudC5sb2FkPEtub3dsZWRnZUJhc2VFbnRyeT4oS25vd2xlZGdlQmFzZUVudHJ5VHlwZVJlZiwgW3RoaXMuZ2V0TGlzdElkKCksIGVsZW1lbnRJZF0pXG5cdFx0XHR9LFxuXHRcdFx0YXV0b1NlbGVjdEJlaGF2aW9yOiAoKSA9PiBMaXN0QXV0b1NlbGVjdEJlaGF2aW9yLk9MREVSLFxuXHRcdH0pXG5cblx0XHRsaXN0TW9kZWwuc2V0RmlsdGVyKChpdGVtOiBLbm93bGVkZ2VCYXNlRW50cnkpID0+IHRoaXMucXVlcnlGaWx0ZXIoaXRlbSkpXG5cblx0XHR0aGlzLmxpc3RTdGF0ZVN1YnNjcmlwdGlvbj8uZW5kKHRydWUpXG5cdFx0dGhpcy5saXN0U3RhdGVTdWJzY3JpcHRpb24gPSBsaXN0TW9kZWwuc3RhdGVTdHJlYW0ubWFwKChzdGF0ZSkgPT4ge1xuXHRcdFx0dGhpcy5vblNlbGVjdGlvbkNoYW5nZWQob25seVNpbmdsZVNlbGVjdGlvbihzdGF0ZSkpXG5cdFx0XHRtLnJlZHJhdygpXG5cdFx0fSlcblxuXHRcdHJldHVybiBsaXN0TW9kZWxcblx0fVxuXG5cdHZpZXcoKTogQ2hpbGRyZW4ge1xuXHRcdHJldHVybiBtKFxuXHRcdFx0TGlzdENvbHVtbldyYXBwZXIsXG5cdFx0XHR7XG5cdFx0XHRcdGhlYWRlckNvbnRlbnQ6IG0oXG5cdFx0XHRcdFx0XCIuZmxleC5mbGV4LXNwYWNlLWJldHdlZW4uY2VudGVyLXZlcnRpY2FsbHkucGxyLWxcIixcblx0XHRcdFx0XHRtKEJhc2VTZWFyY2hCYXIsIHtcblx0XHRcdFx0XHRcdHRleHQ6IHRoaXMuc2VhcmNoUXVlcnksXG5cdFx0XHRcdFx0XHRvbklucHV0OiAodGV4dCkgPT4gdGhpcy51cGRhdGVRdWVyeSh0ZXh0KSxcblx0XHRcdFx0XHRcdGJ1c3k6IGZhbHNlLFxuXHRcdFx0XHRcdFx0b25LZXlEb3duOiAoZSkgPT4gZS5zdG9wUHJvcGFnYXRpb24oKSxcblx0XHRcdFx0XHRcdG9uQ2xlYXI6ICgpID0+IHtcblx0XHRcdFx0XHRcdFx0dGhpcy5zZWFyY2hRdWVyeSA9IFwiXCJcblx0XHRcdFx0XHRcdFx0dGhpcy5yZXN1bHRJdGVtSWRzID0gW11cblx0XHRcdFx0XHRcdFx0dGhpcy5saXN0TW9kZWwucmVhcHBseUZpbHRlcigpXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0cGxhY2Vob2xkZXI6IGxhbmcuZ2V0KFwic2VhcmNoS25vd2xlZGdlYmFzZV9wbGFjZWhvbGRlclwiKSxcblx0XHRcdFx0XHR9IHNhdGlzZmllcyBCYXNlU2VhcmNoQmFyQXR0cnMpLFxuXHRcdFx0XHRcdHRoaXMudXNlckNhbkVkaXQoKVxuXHRcdFx0XHRcdFx0PyBtKFxuXHRcdFx0XHRcdFx0XHRcdFwiLm1yLW5lZ2F0aXZlLXNcIixcblx0XHRcdFx0XHRcdFx0XHRtKEljb25CdXR0b24sIHtcblx0XHRcdFx0XHRcdFx0XHRcdHRpdGxlOiBcImFkZEVudHJ5X2xhYmVsXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRpY29uOiBJY29ucy5BZGQsXG5cdFx0XHRcdFx0XHRcdFx0XHRjbGljazogKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRzaG93S25vd2xlZGdlQmFzZUVkaXRvcihudWxsLCB0aGlzLnRlbXBsYXRlR3JvdXBSb290KVxuXHRcdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XHR9KSxcblx0XHRcdFx0XHRcdCAgKVxuXHRcdFx0XHRcdFx0OiBudWxsLFxuXHRcdFx0XHQpLFxuXHRcdFx0fSxcblx0XHRcdHRoaXMubGlzdE1vZGVsLmlzRW1wdHlBbmREb25lKClcblx0XHRcdFx0PyBtKENvbHVtbkVtcHR5TWVzc2FnZUJveCwge1xuXHRcdFx0XHRcdFx0Y29sb3I6IHRoZW1lLmxpc3RfbWVzc2FnZV9iZyxcblx0XHRcdFx0XHRcdGljb246IEljb25zLkJvb2ssXG5cdFx0XHRcdFx0XHRtZXNzYWdlOiBcIm5vRW50cmllc19tc2dcIixcblx0XHRcdFx0ICB9KVxuXHRcdFx0XHQ6IG0oTGlzdCwge1xuXHRcdFx0XHRcdFx0cmVuZGVyQ29uZmlnOiB0aGlzLnJlbmRlckNvbmZpZyxcblx0XHRcdFx0XHRcdHN0YXRlOiB0aGlzLmxpc3RNb2RlbC5zdGF0ZSxcblx0XHRcdFx0XHRcdG9uTG9hZE1vcmU6ICgpID0+IHRoaXMubGlzdE1vZGVsLmxvYWRNb3JlKCksXG5cdFx0XHRcdFx0XHRvblJldHJ5TG9hZGluZzogKCkgPT4gdGhpcy5saXN0TW9kZWwucmV0cnlMb2FkaW5nKCksXG5cdFx0XHRcdFx0XHRvblN0b3BMb2FkaW5nOiAoKSA9PiB0aGlzLmxpc3RNb2RlbC5zdG9wTG9hZGluZygpLFxuXHRcdFx0XHRcdFx0b25TaW5nbGVTZWxlY3Rpb246IChpdGVtOiBLbm93bGVkZ2VCYXNlRW50cnkpID0+IHtcblx0XHRcdFx0XHRcdFx0dGhpcy5saXN0TW9kZWwub25TaW5nbGVTZWxlY3Rpb24oaXRlbSlcblx0XHRcdFx0XHRcdFx0dGhpcy5mb2N1c0RldGFpbHNWaWV3ZXIoKVxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdG9uU2luZ2xlVG9nZ2xpbmdNdWx0aXNlbGVjdGlvbjogbm9PcCxcblx0XHRcdFx0XHRcdG9uUmFuZ2VTZWxlY3Rpb25Ub3dhcmRzOiBub09wLFxuXHRcdFx0XHQgIH0gc2F0aXNmaWVzIExpc3RBdHRyczxLbm93bGVkZ2VCYXNlRW50cnksIEtub3dsZWRnZUJhc2VSb3c+KSxcblx0XHQpXG5cdH1cblxuXHRhc3luYyBlbnRpdHlFdmVudHNSZWNlaXZlZCh1cGRhdGVzOiBSZWFkb25seUFycmF5PEVudGl0eVVwZGF0ZURhdGE+KTogUHJvbWlzZTxhbnk+IHtcblx0XHRmb3IgKGNvbnN0IHVwZGF0ZSBvZiB1cGRhdGVzKSB7XG5cdFx0XHRpZiAoaXNVcGRhdGVGb3JUeXBlUmVmKEtub3dsZWRnZUJhc2VFbnRyeVR5cGVSZWYsIHVwZGF0ZSkgJiYgaXNTYW1lSWQodGhpcy5nZXRMaXN0SWQoKSwgdXBkYXRlLmluc3RhbmNlTGlzdElkKSkge1xuXHRcdFx0XHRhd2FpdCB0aGlzLmxpc3RNb2RlbC5lbnRpdHlFdmVudFJlY2VpdmVkKHVwZGF0ZS5pbnN0YW5jZUxpc3RJZCwgdXBkYXRlLmluc3RhbmNlSWQsIHVwZGF0ZS5vcGVyYXRpb24pXG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gd2UgbmVlZCB0byBtYWtlIGFub3RoZXIgc2VhcmNoIGluIGNhc2UgaXRlbXMgaGF2ZSBjaGFuZ2VkXG5cdFx0dGhpcy51cGRhdGVRdWVyeSh0aGlzLnNlYXJjaFF1ZXJ5KVxuXHRcdG0ucmVkcmF3KClcblx0fVxuXG5cdHByaXZhdGUgcmVhZG9ubHkgb25TZWxlY3Rpb25DaGFuZ2VkID0gbWVtb2l6ZWQoKGl0ZW06IEtub3dsZWRnZUJhc2VFbnRyeSB8IG51bGwpID0+IHtcblx0XHRjb25zdCBkZXRhaWxzVmlld2VyID0gaXRlbSA9PSBudWxsID8gbnVsbCA6IG5ldyBLbm93bGVkZ2VCYXNlU2V0dGluZ3NEZXRhaWxzVmlld2VyKGl0ZW0sICF0aGlzLnVzZXJDYW5FZGl0KCkpXG5cdFx0dGhpcy51cGRhdGVEZXRhaWxzVmlld2VyKGRldGFpbHNWaWV3ZXIpXG5cdH0pXG5cblx0cHJpdmF0ZSBxdWVyeUZpbHRlcihpdGVtOiBLbm93bGVkZ2VCYXNlRW50cnkpIHtcblx0XHRyZXR1cm4gdGhpcy5zZWFyY2hRdWVyeSA9PT0gXCJcIiA/IHRydWUgOiB0aGlzLnJlc3VsdEl0ZW1JZHMuaW5jbHVkZXMoaXRlbS5faWQpXG5cdH1cblxuXHRwcml2YXRlIHVwZGF0ZVF1ZXJ5KHF1ZXJ5OiBzdHJpbmcpIHtcblx0XHR0aGlzLnNlYXJjaFF1ZXJ5ID0gcXVlcnlcblx0XHR0aGlzLnJlc3VsdEl0ZW1JZHMgPSBrbm93bGVkZ2VCYXNlU2VhcmNoKHRoaXMuc2VhcmNoUXVlcnksIHRoaXMubGlzdE1vZGVsLmdldFVuZmlsdGVyZWRBc0FycmF5KCkpLm1hcCgoaXRlbSkgPT4gaXRlbS5faWQpXG5cdFx0dGhpcy5saXN0TW9kZWwucmVhcHBseUZpbHRlcigpXG5cdH1cblxuXHR1c2VyQ2FuRWRpdCgpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gaGFzQ2FwYWJpbGl0eU9uR3JvdXAodGhpcy5sb2dpbnMuZ2V0VXNlckNvbnRyb2xsZXIoKS51c2VyLCB0aGlzLnRlbXBsYXRlR3JvdXAsIFNoYXJlQ2FwYWJpbGl0eS5Xcml0ZSlcblx0fVxuXG5cdGdldExpc3RJZCgpOiBJZCB7XG5cdFx0cmV0dXJuIHRoaXMudGVtcGxhdGVHcm91cFJvb3Qua25vd2xlZGdlQmFzZVxuXHR9XG59XG5cbmV4cG9ydCBjbGFzcyBLbm93bGVkZ2VCYXNlUm93IGltcGxlbWVudHMgVmlydHVhbFJvdzxLbm93bGVkZ2VCYXNlRW50cnk+IHtcblx0dG9wOiBudW1iZXIgPSAwXG5cdGRvbUVsZW1lbnQ6IEhUTUxFbGVtZW50IHwgbnVsbCA9IG51bGxcblx0ZW50aXR5OiBLbm93bGVkZ2VCYXNlRW50cnkgfCBudWxsID0gbnVsbFxuXHRwcml2YXRlIGVudHJ5VGl0bGVEb20hOiBIVE1MRWxlbWVudFxuXHRwcml2YXRlIHNlbGVjdGlvblVwZGF0ZXIhOiBTZWxlY3RhYmxlUm93U2VsZWN0ZWRTZXR0ZXJcblxuXHR1cGRhdGUoZW50cnk6IEtub3dsZWRnZUJhc2VFbnRyeSwgc2VsZWN0ZWQ6IGJvb2xlYW4pOiB2b2lkIHtcblx0XHR0aGlzLmVudGl0eSA9IGVudHJ5XG5cblx0XHR0aGlzLnNlbGVjdGlvblVwZGF0ZXIoc2VsZWN0ZWQsIGZhbHNlKVxuXG5cdFx0dGhpcy5lbnRyeVRpdGxlRG9tLnRleHRDb250ZW50ID0gZW50cnkudGl0bGVcblx0fVxuXG5cdHJlbmRlcigpOiBDaGlsZHJlbiB7XG5cdFx0cmV0dXJuIG0oXG5cdFx0XHRTZWxlY3RhYmxlUm93Q29udGFpbmVyLFxuXHRcdFx0e1xuXHRcdFx0XHRvblNlbGVjdGVkQ2hhbmdlUmVmOiAodXBkYXRlcikgPT4gKHRoaXMuc2VsZWN0aW9uVXBkYXRlciA9IHVwZGF0ZXIpLFxuXHRcdFx0fSxcblx0XHRcdG0oXCIuZmxleC5jb2xcIiwgW1xuXHRcdFx0XHRtKFwiLnRleHQtZWxsaXBzaXMuYmFkZ2UtbGluZS1oZWlnaHRcIiwge1xuXHRcdFx0XHRcdG9uY3JlYXRlOiAodm5vZGUpID0+ICh0aGlzLmVudHJ5VGl0bGVEb20gPSB2bm9kZS5kb20gYXMgSFRNTEVsZW1lbnQpLFxuXHRcdFx0XHR9KSxcblx0XHRcdFx0Ly8gdG8gY3JlYXRlIGEgc2Vjb25kIHJvd1xuXHRcdFx0XHRtKFwiLnNtYWxsZXIubXQteHhzXCIsIE5CU1ApLFxuXHRcdFx0XSksXG5cdFx0KVxuXHR9XG59XG5cbmV4cG9ydCBjbGFzcyBLbm93bGVkZ2VCYXNlU2V0dGluZ3NEZXRhaWxzVmlld2VyIGltcGxlbWVudHMgVXBkYXRhYmxlU2V0dGluZ3NEZXRhaWxzVmlld2VyIHtcblx0Y29uc3RydWN0b3IocHJpdmF0ZSByZWFkb25seSBlbnRyeTogS25vd2xlZGdlQmFzZUVudHJ5LCBwcml2YXRlIHJlYWRvbmx5IHJlYWRvbmx5OiBib29sZWFuKSB7fVxuXG5cdHJlbmRlclZpZXcoKTogQ2hpbGRyZW4ge1xuXHRcdHJldHVybiBtKFxuXHRcdFx0XCIucGxyLWxcIixcblx0XHRcdG0oS25vd2xlZGdlQmFzZUVudHJ5Vmlldywge1xuXHRcdFx0XHRlbnRyeTogdGhpcy5lbnRyeSxcblx0XHRcdFx0b25UZW1wbGF0ZVNlbGVjdGVkOiAodGVtcGxhdGVJZCkgPT4gbS5yb3V0ZS5zZXQoYC9zZXR0aW5ncy90ZW1wbGF0ZXMvJHtsaXN0SWRQYXJ0KHRlbXBsYXRlSWQpfX1gKSxcblx0XHRcdFx0cmVhZG9ubHk6IHRoaXMucmVhZG9ubHksXG5cdFx0XHR9KSxcblx0XHQpXG5cdH1cblxuXHRlbnRpdHlFdmVudHNSZWNlaXZlZCh1cGRhdGVzOiBSZWFkb25seUFycmF5PEVudGl0eVVwZGF0ZURhdGE+KTogUHJvbWlzZTxhbnk+IHtcblx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKClcblx0fVxufVxuIiwiaW1wb3J0IG0sIHsgQ2hpbGRyZW4sIENvbXBvbmVudCwgVm5vZGUgfSBmcm9tIFwibWl0aHJpbFwiXG5pbXBvcnQgeyBMaXN0Q29sdW1uV3JhcHBlciB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL0xpc3RDb2x1bW5XcmFwcGVyXCJcbmltcG9ydCB7IHRoZW1lIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvdGhlbWVcIlxuaW1wb3J0IENvbHVtbkVtcHR5TWVzc2FnZUJveCBmcm9tIFwiLi4vLi4vY29tbW9uL2d1aS9iYXNlL0NvbHVtbkVtcHR5TWVzc2FnZUJveFwiXG5pbXBvcnQgeyBjcmVhdGVJbml0aWFsVGVtcGxhdGVMaXN0SWZBbGxvd2VkIH0gZnJvbSBcIi4uL3RlbXBsYXRlcy9UZW1wbGF0ZUdyb3VwVXRpbHNcIlxuaW1wb3J0IHsgc2hvd1RlbXBsYXRlRWRpdG9yIH0gZnJvbSBcIi4vVGVtcGxhdGVFZGl0b3JcIlxuaW1wb3J0IHsgQmFzZVNlYXJjaEJhciwgQmFzZVNlYXJjaEJhckF0dHJzIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvYmFzZS9CYXNlU2VhcmNoQmFyLmpzXCJcbmltcG9ydCB7IGxhbmcgfSBmcm9tIFwiLi4vLi4vY29tbW9uL21pc2MvTGFuZ3VhZ2VWaWV3TW9kZWwuanNcIlxuaW1wb3J0IHsgSWNvbkJ1dHRvbiB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL2Jhc2UvSWNvbkJ1dHRvbi5qc1wiXG5pbXBvcnQgeyBJY29ucyB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL2Jhc2UvaWNvbnMvSWNvbnMuanNcIlxuXG5leHBvcnQgdHlwZSBEdW1teVRlbXBsYXRlTGlzdFZpZXdBdHRycyA9IHZvaWRcblxuZXhwb3J0IGNsYXNzIER1bW15VGVtcGxhdGVMaXN0VmlldyBpbXBsZW1lbnRzIENvbXBvbmVudDxEdW1teVRlbXBsYXRlTGlzdFZpZXdBdHRycz4ge1xuXHRwcml2YXRlIHNlYXJjaFF1ZXJ5OiBzdHJpbmcgPSBcIlwiXG5cblx0dmlldyh2bm9kZTogVm5vZGU8RHVtbXlUZW1wbGF0ZUxpc3RWaWV3QXR0cnM+KTogQ2hpbGRyZW4ge1xuXHRcdHJldHVybiBtKFxuXHRcdFx0TGlzdENvbHVtbldyYXBwZXIsXG5cdFx0XHR7XG5cdFx0XHRcdGhlYWRlckNvbnRlbnQ6IG0oXG5cdFx0XHRcdFx0XCIuZmxleC5mbGV4LXNwYWNlLWJldHdlZW4uY2VudGVyLXZlcnRpY2FsbHkucGxyLWxcIixcblx0XHRcdFx0XHRtKEJhc2VTZWFyY2hCYXIsIHtcblx0XHRcdFx0XHRcdHRleHQ6IHRoaXMuc2VhcmNoUXVlcnksXG5cdFx0XHRcdFx0XHRvbklucHV0OiAodGV4dCkgPT4gKHRoaXMuc2VhcmNoUXVlcnkgPSB0ZXh0KSxcblx0XHRcdFx0XHRcdGJ1c3k6IGZhbHNlLFxuXHRcdFx0XHRcdFx0b25LZXlEb3duOiAoZSkgPT4gZS5zdG9wUHJvcGFnYXRpb24oKSxcblx0XHRcdFx0XHRcdG9uQ2xlYXI6ICgpID0+IHtcblx0XHRcdFx0XHRcdFx0dGhpcy5zZWFyY2hRdWVyeSA9IFwiXCJcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRwbGFjZWhvbGRlcjogbGFuZy5nZXQoXCJzZWFyY2hUZW1wbGF0ZXNfcGxhY2Vob2xkZXJcIiksXG5cdFx0XHRcdFx0fSBzYXRpc2ZpZXMgQmFzZVNlYXJjaEJhckF0dHJzKSxcblx0XHRcdFx0XHRtKFxuXHRcdFx0XHRcdFx0XCIubXItbmVnYXRpdmUtc1wiLFxuXHRcdFx0XHRcdFx0bShJY29uQnV0dG9uLCB7XG5cdFx0XHRcdFx0XHRcdHRpdGxlOiBcImFkZFRlbXBsYXRlX2xhYmVsXCIsXG5cdFx0XHRcdFx0XHRcdGljb246IEljb25zLkFkZCxcblx0XHRcdFx0XHRcdFx0Y2xpY2s6ICgpID0+IHtcblx0XHRcdFx0XHRcdFx0XHQvLyBTZXR0aW5nc1ZpZXcgd2lsbCByZXJvdXRlIHRvIHRoZSBmb2xkZXIgZm9yIHRoZSBuZXdseSBjcmVhdGVkIHRlbXBsYXRlIGxpc3QgKGlmIHRoZXJlIGlzIG9uZSlcblx0XHRcdFx0XHRcdFx0XHRjcmVhdGVJbml0aWFsVGVtcGxhdGVMaXN0SWZBbGxvd2VkKCkudGhlbigoZ3JvdXBSb290KSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoZ3JvdXBSb290KSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHNob3dUZW1wbGF0ZUVkaXRvcihudWxsLCBncm91cFJvb3QpXG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0fSlcblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdH0pLFxuXHRcdFx0XHRcdCksXG5cdFx0XHRcdCksXG5cdFx0XHR9LFxuXHRcdFx0bShcblx0XHRcdFx0XCIuZmlsbC1hYnNvbHV0ZS5vdmVyZmxvdy1oaWRkZW5cIixcblx0XHRcdFx0bShDb2x1bW5FbXB0eU1lc3NhZ2VCb3gsIHtcblx0XHRcdFx0XHRjb2xvcjogdGhlbWUubGlzdF9tZXNzYWdlX2JnLFxuXHRcdFx0XHRcdGljb246IEljb25zLkxpc3RBbHQsXG5cdFx0XHRcdFx0bWVzc2FnZTogXCJub0VudHJpZXNfbXNnXCIsXG5cdFx0XHRcdH0pLFxuXHRcdFx0KSxcblx0XHQpXG5cdH1cbn1cbiIsImltcG9ydCBtLCB7IENoaWxkLCBDaGlsZHJlbiwgQ29tcG9uZW50LCBWbm9kZSB9IGZyb20gXCJtaXRocmlsXCJcbmltcG9ydCB0eXBlIHsgTmF2QnV0dG9uQXR0cnMgfSBmcm9tIFwiLi4vZ3VpL2Jhc2UvTmF2QnV0dG9uLmpzXCJcbmltcG9ydCB7IGlzTmF2QnV0dG9uU2VsZWN0ZWQsIE5hdkJ1dHRvbiB9IGZyb20gXCIuLi9ndWkvYmFzZS9OYXZCdXR0b24uanNcIlxuXG5leHBvcnQgdHlwZSBTZXR0aW5nc0ZvbGRlclJvd0F0dHJzID0ge1xuXHRtYWluQnV0dG9uQXR0cnM6IE5hdkJ1dHRvbkF0dHJzXG5cdC8qKlxuXHQgKiBBbiBleHRyYSBidXR0b24gd2lsbCBiZSBzaG93biBlaXRoZXIgb25seSB3aGVuIHRoZSByb3cgaXMgc2VsZWN0ZWQsIG9yIGFsd2F5cyBpbiB0aGUgY2FzZSB0aGF0IHRoZSBuYXYgYnV0dG9uIGlzIGRpc2FibGVkXG5cdCAqL1xuXHRleHRyYUJ1dHRvbj86IENoaWxkIHwgbnVsbFxufVxuXG5leHBvcnQgY2xhc3MgU2V0dGluZ3NGb2xkZXJSb3cgaW1wbGVtZW50cyBDb21wb25lbnQ8U2V0dGluZ3NGb2xkZXJSb3dBdHRycz4ge1xuXHR2aWV3KHZub2RlOiBWbm9kZTxTZXR0aW5nc0ZvbGRlclJvd0F0dHJzPik6IENoaWxkcmVuIHtcblx0XHRjb25zdCB7IG1haW5CdXR0b25BdHRycywgZXh0cmFCdXR0b24gfSA9IHZub2RlLmF0dHJzXG5cdFx0Y29uc3QgaXNTZWxlY3RlZCA9IGlzTmF2QnV0dG9uU2VsZWN0ZWQobWFpbkJ1dHRvbkF0dHJzKVxuXHRcdGNvbnN0IHNlbGVjdG9yID0gYC5mb2xkZXItcm93LmZsZXgtc3RhcnQucGwtYnV0dG9uLnByLW0ke2lzU2VsZWN0ZWQgPyBcIi5yb3ctc2VsZWN0ZWRcIiA6IFwiXCJ9YFxuXHRcdHJldHVybiBtKHNlbGVjdG9yLCBbbShOYXZCdXR0b24sIG1haW5CdXR0b25BdHRycyksIGV4dHJhQnV0dG9uICYmIGlzU2VsZWN0ZWQgPyBleHRyYUJ1dHRvbiA6IG51bGxdKVxuXHR9XG59XG4iLCJpbXBvcnQgeyBMb2dpbkNvbnRyb2xsZXIgfSBmcm9tIFwiLi4vYXBpL21haW4vTG9naW5Db250cm9sbGVyLmpzXCJcbmltcG9ydCB7IEN1c3RvbWVyVHlwZVJlZiwgR3JvdXBJbmZvVHlwZVJlZiwgR3JvdXBUeXBlUmVmIH0gZnJvbSBcIi4uL2FwaS9lbnRpdGllcy9zeXMvVHlwZVJlZnMuanNcIlxuaW1wb3J0IHsgYXNzZXJ0Tm90TnVsbCwgbWFwTnVsbGFibGUsIG5ldmVyTnVsbCwgcGFkLCBwcm9taXNlTWFwLCByZW5kZXJDc3YsIHN0cmluZ1RvVXRmOFVpbnQ4QXJyYXkgfSBmcm9tIFwiQHR1dGFvL3R1dGFub3RhLXV0aWxzXCJcbmltcG9ydCB7IEVudGl0eUNsaWVudCB9IGZyb20gXCIuLi9hcGkvY29tbW9uL0VudGl0eUNsaWVudC5qc1wiXG5pbXBvcnQgeyBGaWxlQ29udHJvbGxlciB9IGZyb20gXCIuLi9maWxlL0ZpbGVDb250cm9sbGVyLmpzXCJcbmltcG9ydCB7IGNyZWF0ZURhdGFGaWxlIH0gZnJvbSBcIi4uL2FwaS9jb21tb24vRGF0YUZpbGUuanNcIlxuaW1wb3J0IHsgQ291bnRlckZhY2FkZSB9IGZyb20gXCIuLi9hcGkvd29ya2VyL2ZhY2FkZXMvbGF6eS9Db3VudGVyRmFjYWRlLmpzXCJcbmltcG9ydCB7IENvdW50ZXJUeXBlIH0gZnJvbSBcIi4uL2FwaS9jb21tb24vVHV0YW5vdGFDb25zdGFudHMuanNcIlxuXG5leHBvcnQgY29uc3QgQ1NWX01JTUVUWVBFID0gXCJ0ZXh0L2NzdlwiXG5leHBvcnQgY29uc3QgVVNFUl9DU1ZfRklMRU5BTUUgPSBcInVzZXJzLmNzdlwiXG5cbmludGVyZmFjZSBVc2VyRXhwb3J0RGF0YSB7XG5cdG5hbWU6IHN0cmluZ1xuXHRtYWlsQWRkcmVzczogc3RyaW5nXG5cdGNyZWF0ZWQ6IERhdGVcblx0ZGVsZXRlZDogRGF0ZSB8IG51bGxcblx0dXNlZFN0b3JhZ2U6IG51bWJlclxuXHRhbGlhc2VzOiBBcnJheTxzdHJpbmc+XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBleHBvcnRVc2VyQ3N2KGVudGl0eUNsaWVudDogRW50aXR5Q2xpZW50LCBsb2dpbnM6IExvZ2luQ29udHJvbGxlciwgZmlsZUNvbnRyb2xsZXI6IEZpbGVDb250cm9sbGVyLCBjb3VudGVyRmFjYWRlOiBDb3VudGVyRmFjYWRlKSB7XG5cdGNvbnN0IGRhdGEgPSBhd2FpdCBsb2FkVXNlckV4cG9ydERhdGEoZW50aXR5Q2xpZW50LCBsb2dpbnMsIGNvdW50ZXJGYWNhZGUpXG5cdGNvbnN0IGNzdiA9IHJlbmRlckNzdihcblx0XHRbXCJuYW1lXCIsIFwibWFpbCBhZGRyZXNzXCIsIFwiZGF0ZSBjcmVhdGVkXCIsIFwiZGF0ZSBkZWxldGVkXCIsIFwic3RvcmFnZSB1c2VkIChpbiBieXRlcylcIiwgXCJhbGlhc2VzXCJdLFxuXHRcdGRhdGEubWFwKCh1c2VyKSA9PiBbXG5cdFx0XHR1c2VyLm5hbWUsXG5cdFx0XHR1c2VyLm1haWxBZGRyZXNzLFxuXHRcdFx0Zm9ybWF0RGF0ZSh1c2VyLmNyZWF0ZWQpLFxuXHRcdFx0bWFwTnVsbGFibGUodXNlci5kZWxldGVkLCBmb3JtYXREYXRlKSA/PyBcIlwiLFxuXHRcdFx0YCR7dXNlci51c2VkU3RvcmFnZX1gLFxuXHRcdFx0dXNlci5hbGlhc2VzLmpvaW4oXCIgXCIpLFxuXHRcdF0pLFxuXHQpXG5cdGNvbnN0IGRhdGFGaWxlID0gY3JlYXRlRGF0YUZpbGUoVVNFUl9DU1ZfRklMRU5BTUUsIENTVl9NSU1FVFlQRSwgc3RyaW5nVG9VdGY4VWludDhBcnJheShjc3YpKVxuXHRhd2FpdCBmaWxlQ29udHJvbGxlci5zYXZlRGF0YUZpbGUoZGF0YUZpbGUpXG59XG5cbmZ1bmN0aW9uIGZvcm1hdERhdGUoZGF0ZTogRGF0ZSk6IHN0cmluZyB7XG5cdHJldHVybiBgJHtkYXRlLmdldEZ1bGxZZWFyKCl9LSR7cGFkKGRhdGUuZ2V0TW9udGgoKSArIDEsIDIpfS0ke3BhZChkYXRlLmdldERhdGUoKSwgMil9YFxufVxuXG4vKipcbiAqIExvYWQgZGF0YSBmb3IgZWFjaCB1c2VyIGFkbWluaXN0cmF0ZWQgYnkgdGhlIGxvZ2dlZCBpbiB1c2VyLCBpbiBvcmRlciB0byBiZSBleHBvcnRlZFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbG9hZFVzZXJFeHBvcnREYXRhKGVudGl0eUNsaWVudDogRW50aXR5Q2xpZW50LCBsb2dpbnM6IExvZ2luQ29udHJvbGxlciwgY291bnRlckZhY2FkZTogQ291bnRlckZhY2FkZSk6IFByb21pc2U8QXJyYXk8VXNlckV4cG9ydERhdGE+PiB7XG5cdGNvbnN0IHsgdXNlciB9ID0gbG9naW5zLmdldFVzZXJDb250cm9sbGVyKClcblx0Y29uc3QgeyB1c2VyR3JvdXBzIH0gPSBhd2FpdCBlbnRpdHlDbGllbnQubG9hZChDdXN0b21lclR5cGVSZWYsIGFzc2VydE5vdE51bGwodXNlci5jdXN0b21lcikpXG5cblx0Y29uc3QgZ3JvdXBzQWRtaW5pc3RlcmVkQnlVc2VyID0gYXdhaXQgZW50aXR5Q2xpZW50LmxvYWRBbGwoR3JvdXBJbmZvVHlwZVJlZiwgdXNlckdyb3VwcylcblxuXHRjb25zdCB1c2VkQ3VzdG9tZXJTdG9yYWdlQ291bnRlclZhbHVlcyA9IGF3YWl0IGNvdW50ZXJGYWNhZGUucmVhZEFsbEN1c3RvbWVyQ291bnRlclZhbHVlcyhDb3VudGVyVHlwZS5Vc2VyU3RvcmFnZUxlZ2FjeSwgbmV2ZXJOdWxsKHVzZXIuY3VzdG9tZXIpKVxuXHRyZXR1cm4gcHJvbWlzZU1hcChncm91cHNBZG1pbmlzdGVyZWRCeVVzZXIsIGFzeW5jIChpbmZvKSA9PiB7XG5cdFx0Y29uc3QgZ3JvdXAgPSBhd2FpdCBlbnRpdHlDbGllbnQubG9hZChHcm91cFR5cGVSZWYsIGluZm8uZ3JvdXApXG5cdFx0Y29uc3QgdXNlclN0b3JhZ2VDb3VudGVyVmFsdWUgPSB1c2VkQ3VzdG9tZXJTdG9yYWdlQ291bnRlclZhbHVlcy5maW5kKChjb3VudGVyVmFsdWUpID0+IGNvdW50ZXJWYWx1ZS5jb3VudGVySWQgPT09IGdyb3VwLnN0b3JhZ2VDb3VudGVyKVxuXHRcdGNvbnN0IHVzZWRTdG9yYWdlID0gdXNlclN0b3JhZ2VDb3VudGVyVmFsdWUgIT0gbnVsbCA/IE51bWJlcih1c2VyU3RvcmFnZUNvdW50ZXJWYWx1ZS52YWx1ZSkgOiAwXG5cblx0XHRyZXR1cm4ge1xuXHRcdFx0bmFtZTogaW5mby5uYW1lLFxuXHRcdFx0bWFpbEFkZHJlc3M6IGluZm8ubWFpbEFkZHJlc3MgPz8gXCJcIixcblx0XHRcdGNyZWF0ZWQ6IGluZm8uY3JlYXRlZCxcblx0XHRcdGRlbGV0ZWQ6IGluZm8uZGVsZXRlZCxcblx0XHRcdHVzZWRTdG9yYWdlLFxuXHRcdFx0YWxpYXNlczogaW5mby5tYWlsQWRkcmVzc0FsaWFzZXMubWFwKChhbGlhcykgPT4gYWxpYXMubWFpbEFkZHJlc3MpLFxuXHRcdH1cblx0fSlcbn1cbiIsImltcG9ydCBtLCB7IENoaWxkcmVuIH0gZnJvbSBcIm1pdGhyaWxcIlxuaW1wb3J0IHR5cGUgeyBVcGRhdGFibGVTZXR0aW5nc1ZpZXdlciB9IGZyb20gXCIuL0ludGVyZmFjZXMuanNcIlxuaW1wb3J0IHsgZ2V0UmVmZXJyYWxMaW5rLCBSZWZlcnJhbExpbmtWaWV3ZXIgfSBmcm9tIFwiLi4vbWlzYy9uZXdzL2l0ZW1zL1JlZmVycmFsTGlua1ZpZXdlci5qc1wiXG5pbXBvcnQgeyBsb2NhdG9yIH0gZnJvbSBcIi4uL2FwaS9tYWluL0NvbW1vbkxvY2F0b3IuanNcIlxuaW1wb3J0IHsgRW50aXR5VXBkYXRlRGF0YSB9IGZyb20gXCIuLi9hcGkvY29tbW9uL3V0aWxzL0VudGl0eVVwZGF0ZVV0aWxzLmpzXCJcblxuLyoqXG4gKiBTZWN0aW9uIGluIHVzZXIgc2V0dGluZ3MgdG8gZGlzcGxheSB0aGUgcmVmZXJyYWwgbGluayBhbmQgbGV0IHVzZXJzIHNoYXJlIGl0LlxuICovXG5leHBvcnQgY2xhc3MgUmVmZXJyYWxTZXR0aW5nc1ZpZXdlciBpbXBsZW1lbnRzIFVwZGF0YWJsZVNldHRpbmdzVmlld2VyIHtcblx0cHJpdmF0ZSByZWZlcnJhbExpbms6IHN0cmluZyA9IFwiXCJcblxuXHRjb25zdHJ1Y3RvcigpIHtcblx0XHR0aGlzLnJlZnJlc2hSZWZlcnJhbExpbmsoKVxuXHR9XG5cblx0dmlldygpOiBDaGlsZHJlbiB7XG5cdFx0cmV0dXJuIG0oXCIubXQtbC5wbHItbC5wYi14bFwiLCBtKFJlZmVycmFsTGlua1ZpZXdlciwgeyByZWZlcnJhbExpbms6IHRoaXMucmVmZXJyYWxMaW5rIH0pKVxuXHR9XG5cblx0YXN5bmMgZW50aXR5RXZlbnRzUmVjZWl2ZWQodXBkYXRlczogUmVhZG9ubHlBcnJheTxFbnRpdHlVcGRhdGVEYXRhPik6IFByb21pc2U8dm9pZD4ge1xuXHRcdC8vIGNhbiBiZSBhIG5vb3AgYmVjYXVzZSB0aGUgcmVmZXJyYWwgY29kZSB3aWxsIG5ldmVyIGNoYW5nZSBvbmNlIGl0IHdhcyBjcmVhdGVkXG5cdFx0Ly8gd2UgdHJpZ2dlciBjcmVhdGlvbiBpbiB0aGUgY29uc3RydWN0b3IgaWYgdGhlcmUgaXMgbm8gY29kZSB5ZXRcblx0fVxuXG5cdHByaXZhdGUgcmVmcmVzaFJlZmVycmFsTGluaygpIHtcblx0XHRnZXRSZWZlcnJhbExpbmsobG9jYXRvci5sb2dpbnMuZ2V0VXNlckNvbnRyb2xsZXIoKSkudGhlbigobGluaykgPT4ge1xuXHRcdFx0dGhpcy5yZWZlcnJhbExpbmsgPSBsaW5rXG5cdFx0XHRtLnJlZHJhdygpXG5cdFx0fSlcblx0fVxufVxuIiwiaW1wb3J0IG0sIHsgQ2hpbGRyZW4sIENvbXBvbmVudCwgVm5vZGUgfSBmcm9tIFwibWl0aHJpbFwiXG5pbXBvcnQgeyBCdXR0b24sIEJ1dHRvblR5cGUgfSBmcm9tIFwiLi4vZ3VpL2Jhc2UvQnV0dG9uLmpzXCJcbmltcG9ydCB7IGdldExpZ2h0T3JEYXJrVHV0YUxvZ28gfSBmcm9tIFwiLi4vZ3VpL3RoZW1lLmpzXCJcbmltcG9ydCB7IHNob3dVc2VyRXJyb3IgfSBmcm9tIFwiLi4vbWlzYy9FcnJvckhhbmRsZXJJbXBsLmpzXCJcbmltcG9ydCB7IGxvY2F0b3IgfSBmcm9tIFwiLi4vYXBpL21haW4vQ29tbW9uTG9jYXRvci5qc1wiXG5pbXBvcnQgeyBJbmZvTGluayB9IGZyb20gXCIuLi9taXNjL0xhbmd1YWdlVmlld01vZGVsLmpzXCJcbmltcG9ydCB7IG5ld01haWxFZGl0b3JGcm9tVGVtcGxhdGUgfSBmcm9tIFwiLi4vLi4vbWFpbC1hcHAvbWFpbC9lZGl0b3IvTWFpbEVkaXRvci5qc1wiXG5pbXBvcnQgeyBVc2VyRXJyb3IgfSBmcm9tIFwiLi4vYXBpL21haW4vVXNlckVycm9yLmpzXCJcbmltcG9ydCB7IGNsaWVudEluZm9TdHJpbmcsIGdldExvZ0F0dGFjaG1lbnRzIH0gZnJvbSBcIi4uL21pc2MvRXJyb3JSZXBvcnRlci5qc1wiXG5pbXBvcnQgeyBFeHRlcm5hbExpbmsgfSBmcm9tIFwiLi4vZ3VpL2Jhc2UvRXh0ZXJuYWxMaW5rLmpzXCJcbmltcG9ydCB7IGlzQXBwIH0gZnJvbSBcIi4uL2FwaS9jb21tb24vRW52LmpzXCJcbmltcG9ydCB7IHB4LCBzaXplIH0gZnJvbSBcIi4uL2d1aS9zaXplLmpzXCJcbmltcG9ydCB7IGNsaWVudCB9IGZyb20gXCIuLi9taXNjL0NsaWVudERldGVjdG9yLmpzXCJcblxuaW50ZXJmYWNlIEFib3V0RGlhbG9nQXR0cnMge1xuXHRvblNob3dTZXR1cFdpemFyZDogKCkgPT4gdW5rbm93blxufVxuXG5leHBvcnQgY2xhc3MgQWJvdXREaWFsb2cgaW1wbGVtZW50cyBDb21wb25lbnQ8QWJvdXREaWFsb2dBdHRycz4ge1xuXHR2aWV3KHZub2RlOiBWbm9kZTxBYm91dERpYWxvZ0F0dHJzPik6IENoaWxkcmVuIHtcblx0XHRyZXR1cm4gbShcIi5mbGV4LmNvbFwiLCBbXG5cdFx0XHRtKFwiLmNlbnRlci5tdFwiLCBcIlBvd2VyZWQgYnlcIiksXG5cdFx0XHRtKFxuXHRcdFx0XHRcIi5jZW50ZXJcIixcblx0XHRcdFx0Ly8gT3VyIGxvZ28gbXVzdCBiZSBwYWRkZWQgYnV0IGF0IGxlYXN0IGEgY2VydGFpbiBhbW91bnQuXG5cdFx0XHRcdC8vIFRoaXMgbWlnaHQgYmUgYSBiaXQgbW9yZSB0aGFuIG5lZWRlZCBidXQgaXQncyBzYWZlLlxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0c3R5bGU6IHtcblx0XHRcdFx0XHRcdG1hcmdpbjogcHgoc2l6ZS52cGFkX3hsKSxcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHR9LFxuXHRcdFx0XHRtLnRydXN0KGdldExpZ2h0T3JEYXJrVHV0YUxvZ28oY2xpZW50LmlzQ2FsZW5kYXJBcHAoKSkpLFxuXHRcdFx0KSxcblx0XHRcdG0oXCIuZmxleC5qdXN0aWZ5LWNlbnRlci5mbGV4LXdyYXBcIiwgW1xuXHRcdFx0XHRtKEV4dGVybmFsTGluaywge1xuXHRcdFx0XHRcdGhyZWY6IEluZm9MaW5rLkhvbWVQYWdlLFxuXHRcdFx0XHRcdHRleHQ6IFwiV2Vic2l0ZVwiLFxuXHRcdFx0XHRcdGlzQ29tcGFueVNpdGU6IHRydWUsXG5cdFx0XHRcdFx0c3BlY2lhbFR5cGU6IFwibWVcIixcblx0XHRcdFx0XHRjbGFzczogXCJtbHIgbXRcIixcblx0XHRcdFx0fSksXG5cdFx0XHRcdG0oRXh0ZXJuYWxMaW5rLCB7XG5cdFx0XHRcdFx0aHJlZjogXCJodHRwczovL2dpdGh1Yi5jb20vdHV0YW8vdHV0YW5vdGEvcmVsZWFzZXNcIixcblx0XHRcdFx0XHR0ZXh0OiBcIlJlbGVhc2VzXCIsXG5cdFx0XHRcdFx0aXNDb21wYW55U2l0ZTogZmFsc2UsXG5cdFx0XHRcdFx0Y2xhc3M6IFwibWxyIG10XCIsXG5cdFx0XHRcdH0pLFxuXHRcdFx0XSksXG5cdFx0XHRtKFwiLmZsZXguanVzdGlmeS1jZW50ZXIuc2VsZWN0YWJsZS5mbGV4LXdyYXBcIiwgW1xuXHRcdFx0XHRtKFwicC5jZW50ZXIubXQubWxyXCIsIGB2JHtlbnYudmVyc2lvbk51bWJlcn1gKSxcblx0XHRcdFx0bShcInAudGV4dC1jZW50ZXIubWxyXCIsIFwiR1BMLXYzXCIpLFxuXHRcdFx0XHRtKFwicFwiLCBcIsKpIDIwMjQgVHV0YW8gR21iSFwiKSxcblx0XHRcdF0pLFxuXHRcdFx0dGhpcy5fc2VuZExvZ3NMaW5rKCksXG5cdFx0XHQvLyB3cmFwIGl0IGluIGEgZGl2IHNvIHRoYXQgaXQncyBub3QgZmlsbGluZyB0aGUgd2hvbGUgd2lkdGhcblx0XHRcdGlzQXBwKClcblx0XHRcdFx0PyBtKFxuXHRcdFx0XHRcdFx0XCJcIixcblx0XHRcdFx0XHRcdG0oQnV0dG9uLCB7XG5cdFx0XHRcdFx0XHRcdGxhYmVsOiBcInNob3dXZWxjb21lRGlhbG9nX2FjdGlvblwiLFxuXHRcdFx0XHRcdFx0XHR0eXBlOiBCdXR0b25UeXBlLlByaW1hcnksXG5cdFx0XHRcdFx0XHRcdGNsaWNrOiB2bm9kZS5hdHRycy5vblNob3dTZXR1cFdpemFyZCxcblx0XHRcdFx0XHRcdH0pLFxuXHRcdFx0XHQgIClcblx0XHRcdFx0OiBudWxsLFxuXHRcdF0pXG5cdH1cblxuXHRfc2VuZExvZ3NMaW5rKCk6IENoaWxkcmVuIHtcblx0XHRyZXR1cm4gbShcblx0XHRcdFwiLm10XCIsXG5cdFx0XHRtKEJ1dHRvbiwge1xuXHRcdFx0XHRsYWJlbDogXCJzZW5kTG9nc19hY3Rpb25cIixcblx0XHRcdFx0Y2xpY2s6ICgpID0+IHRoaXMuX3NlbmREZXZpY2VMb2dzKCksXG5cdFx0XHRcdHR5cGU6IEJ1dHRvblR5cGUuUHJpbWFyeSxcblx0XHRcdH0pLFxuXHRcdClcblx0fVxuXG5cdGFzeW5jIF9zZW5kRGV2aWNlTG9ncygpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRjb25zdCB0aW1lc3RhbXAgPSBuZXcgRGF0ZSgpXG5cdFx0Y29uc3QgYXR0YWNobWVudHMgPSBhd2FpdCBnZXRMb2dBdHRhY2htZW50cyh0aW1lc3RhbXApXG5cdFx0Y29uc3QgbWFpbGJveERldGFpbHMgPSBhd2FpdCBsb2NhdG9yLm1haWxib3hNb2RlbC5nZXRVc2VyTWFpbGJveERldGFpbHMoKVxuXHRcdGxldCB7IG1lc3NhZ2UsIHR5cGUsIGNsaWVudCB9ID0gY2xpZW50SW5mb1N0cmluZyh0aW1lc3RhbXAsIHRydWUpXG5cdFx0bWVzc2FnZSA9IG1lc3NhZ2Vcblx0XHRcdC5zcGxpdChcIlxcblwiKVxuXHRcdFx0LmZpbHRlcihCb29sZWFuKVxuXHRcdFx0Lm1hcCgobCkgPT4gYDxkaXY+JHtsfTxicj48L2Rpdj5gKVxuXHRcdFx0LmpvaW4oXCJcIilcblxuXHRcdHRyeSB7XG5cdFx0XHRjb25zdCBlZGl0b3IgPSBhd2FpdCBuZXdNYWlsRWRpdG9yRnJvbVRlbXBsYXRlKFxuXHRcdFx0XHRtYWlsYm94RGV0YWlscyxcblx0XHRcdFx0e30sXG5cdFx0XHRcdGBEZXZpY2UgbG9ncyB2JHtlbnYudmVyc2lvbk51bWJlcn0gLSAke3R5cGV9IC0gJHtjbGllbnR9YCxcblx0XHRcdFx0bWVzc2FnZSxcblx0XHRcdFx0YXR0YWNobWVudHMsXG5cdFx0XHRcdHRydWUsXG5cdFx0XHQpXG5cdFx0XHRlZGl0b3Iuc2hvdygpXG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0aWYgKGUgaW5zdGFuY2VvZiBVc2VyRXJyb3IpIHtcblx0XHRcdFx0YXdhaXQgc2hvd1VzZXJFcnJvcihlKVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGhyb3cgZVxuXHRcdFx0fVxuXHRcdH1cblx0fVxufVxuIiwiaW1wb3J0IG0sIHsgQ2hpbGRyZW4sIENvbXBvbmVudCwgVm5vZGUgfSBmcm9tIFwibWl0aHJpbFwiXG5pbXBvcnQgdHlwZSB7IEJ1dHRvbkF0dHJzIH0gZnJvbSBcIi4vQnV0dG9uLmpzXCJcbmltcG9ydCB7IEJ1dHRvbiB9IGZyb20gXCIuL0J1dHRvbi5qc1wiXG5pbXBvcnQgeyBhc3NlcnRNYWluT3JOb2RlIH0gZnJvbSBcIi4uLy4uL2FwaS9jb21tb24vRW52XCJcbmltcG9ydCB7IEljb25CdXR0b24sIEljb25CdXR0b25BdHRycyB9IGZyb20gXCIuL0ljb25CdXR0b24uanNcIlxuXG5hc3NlcnRNYWluT3JOb2RlKClcbmV4cG9ydCB0eXBlIEFjdGlvbkJhckF0dHJzID0ge1xuXHRidXR0b25zOiBJY29uQnV0dG9uQXR0cnNbXVxufVxuXG4vKipcbiAqIEFuIGFjdGlvbiBiYXIgaXMgYSBiYXIgdGhhdCBjb250YWlucyBidXR0b25zIChlaXRoZXIgb24gdGhlIGxlZnQgb3Igb24gdGhlIHJpZ2h0KS5cbiAqL1xuZXhwb3J0IGNsYXNzIEFjdGlvbkJhciBpbXBsZW1lbnRzIENvbXBvbmVudDxBY3Rpb25CYXJBdHRycz4ge1xuXHR2aWV3KHZub2RlOiBWbm9kZTxBY3Rpb25CYXJBdHRycz4pOiBDaGlsZHJlbiB7XG5cdFx0cmV0dXJuIG0oXG5cdFx0XHRcIi5hY3Rpb24tYmFyLmZsZXgtZW5kLml0ZW1zLWNlbnRlci5tbC1iZXR3ZWVuLXNcIixcblx0XHRcdHZub2RlLmF0dHJzLmJ1dHRvbnMubWFwKChiKSA9PiBtKEljb25CdXR0b24sIGIpKSxcblx0XHQpXG5cdH1cbn1cbiIsImltcG9ydCBtLCB7IENoaWxkcmVuIH0gZnJvbSBcIm1pdGhyaWxcIlxuaW1wb3J0IHR5cGUgeyBsYXp5IH0gZnJvbSBcIkB0dXRhby90dXRhbm90YS11dGlsc1wiXG5pbXBvcnQgeyBhc3NlcnROb3ROdWxsIH0gZnJvbSBcIkB0dXRhby90dXRhbm90YS11dGlsc1wiXG5pbXBvcnQgeyBUZXh0RmllbGQgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2d1aS9iYXNlL1RleHRGaWVsZC5qc1wiXG5pbXBvcnQgeyBJY29ucyB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL2Jhc2UvaWNvbnMvSWNvbnNcIlxuaW1wb3J0IHsgZ2V0TGFuZ3VhZ2VDb2RlIH0gZnJvbSBcIi4vVGVtcGxhdGVFZGl0b3JNb2RlbFwiXG5pbXBvcnQgeyBzaG93VGVtcGxhdGVFZGl0b3IgfSBmcm9tIFwiLi9UZW1wbGF0ZUVkaXRvclwiXG5pbXBvcnQgeyBEaWFsb2cgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2d1aS9iYXNlL0RpYWxvZ1wiXG5pbXBvcnQgeyBsYW5nLCBsYW5ndWFnZUJ5Q29kZSwgVHJhbnNsYXRpb25LZXkgfSBmcm9tIFwiLi4vLi4vY29tbW9uL21pc2MvTGFuZ3VhZ2VWaWV3TW9kZWxcIlxuaW1wb3J0IHR5cGUgeyBFbWFpbFRlbXBsYXRlIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9hcGkvZW50aXRpZXMvdHV0YW5vdGEvVHlwZVJlZnMuanNcIlxuaW1wb3J0IHsgVGVtcGxhdGVHcm91cFJvb3RUeXBlUmVmIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9hcGkvZW50aXRpZXMvdHV0YW5vdGEvVHlwZVJlZnMuanNcIlxuaW1wb3J0IHsgbG9jYXRvciB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL21haW4vQ29tbW9uTG9jYXRvclwiXG5pbXBvcnQgeyBFbnRpdHlDbGllbnQgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2FwaS9jb21tb24vRW50aXR5Q2xpZW50XCJcbmltcG9ydCB7IFRFTVBMQVRFX1NIT1JUQ1VUX1BSRUZJWCB9IGZyb20gXCIuLi90ZW1wbGF0ZXMvbW9kZWwvVGVtcGxhdGVQb3B1cE1vZGVsXCJcbmltcG9ydCB7IEFjdGlvbkJhciB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL2Jhc2UvQWN0aW9uQmFyLmpzXCJcbmltcG9ydCB7IGh0bWxTYW5pdGl6ZXIgfSBmcm9tIFwiLi4vLi4vY29tbW9uL21pc2MvSHRtbFNhbml0aXplci5qc1wiXG5pbXBvcnQgeyBFbnRpdHlVcGRhdGVEYXRhIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9hcGkvY29tbW9uL3V0aWxzL0VudGl0eVVwZGF0ZVV0aWxzLmpzXCJcbmltcG9ydCB7IFVwZGF0YWJsZVNldHRpbmdzRGV0YWlsc1ZpZXdlciB9IGZyb20gXCIuLi8uLi9jb21tb24vc2V0dGluZ3MvSW50ZXJmYWNlcy5qc1wiXG5cbmV4cG9ydCBjbGFzcyBUZW1wbGF0ZURldGFpbHNWaWV3ZXIgaW1wbGVtZW50cyBVcGRhdGFibGVTZXR0aW5nc0RldGFpbHNWaWV3ZXIge1xuXHQvLyB3ZSdyZSBub3QgbWVtb2l6aW5nIHRoZSB0cmFuc2xhdGVkIGxhbmd1YWdlIG5hbWUgc2luY2UgdGhpcyBpcyBub3QgYSBwcm9wZXIgbWl0aHJpbCBjb21wb25lbnQgYW5kIG1heSBzdGljayBhcm91bmQgYWZ0ZXIgYSBsYW5ndWFnZVxuXHQvLyBzd2l0Y2guXG5cdHByaXZhdGUgcmVhZG9ubHkgc2FuaXRpemVkQ29udGVudHM6IEFycmF5PHsgdGV4dDogc3RyaW5nOyBsYW5ndWFnZUNvZGVUZXh0SWQ6IFRyYW5zbGF0aW9uS2V5IH0+XG5cblx0Y29uc3RydWN0b3IocHJpdmF0ZSByZWFkb25seSB0ZW1wbGF0ZTogRW1haWxUZW1wbGF0ZSwgcHJpdmF0ZSByZWFkb25seSBlbnRpdHlDbGllbnQ6IEVudGl0eUNsaWVudCwgcmVhZG9ubHkgaXNSZWFkT25seTogbGF6eTxib29sZWFuPikge1xuXHRcdHRoaXMuc2FuaXRpemVkQ29udGVudHMgPSB0ZW1wbGF0ZS5jb250ZW50cy5tYXAoKGVtYWlsVGVtcGxhdGVDb250ZW50KSA9PiAoe1xuXHRcdFx0dGV4dDogaHRtbFNhbml0aXplci5zYW5pdGl6ZUhUTUwoZW1haWxUZW1wbGF0ZUNvbnRlbnQudGV4dCwgeyBibG9ja0V4dGVybmFsQ29udGVudDogZmFsc2UsIGFsbG93UmVsYXRpdmVMaW5rczogdHJ1ZSB9KS5odG1sLFxuXHRcdFx0bGFuZ3VhZ2VDb2RlVGV4dElkOiBsYW5ndWFnZUJ5Q29kZVtnZXRMYW5ndWFnZUNvZGUoZW1haWxUZW1wbGF0ZUNvbnRlbnQpXS50ZXh0SWQsXG5cdFx0fSkpXG5cdH1cblxuXHRyZWFkb25seSByZW5kZXJWaWV3OiBVcGRhdGFibGVTZXR0aW5nc0RldGFpbHNWaWV3ZXJbXCJyZW5kZXJWaWV3XCJdID0gKCkgPT4ge1xuXHRcdHJldHVybiBtKFwiI3VzZXItdmlld2VyLmZpbGwtYWJzb2x1dGUuc2Nyb2xsLnBsci1sLnBiLWZsb2F0aW5nXCIsIFt0aGlzLnJlbmRlclRpdGxlTGluZSgpLCB0aGlzLnJlbmRlckNvbnRlbnQoKV0pXG5cdH1cblxuXHRwcml2YXRlIHJlbmRlclRpdGxlTGluZSgpOiBDaGlsZHJlbiB7XG5cdFx0cmV0dXJuIG0oXCIuZmxleC5tdC1sLmNlbnRlci12ZXJ0aWNhbGx5XCIsIFtcblx0XHRcdG0oXCIuaDQudGV4dC1lbGxpcHNpc1wiLCB0aGlzLnRlbXBsYXRlLnRpdGxlKSxcblx0XHRcdCF0aGlzLmlzUmVhZE9ubHkoKVxuXHRcdFx0XHQ/IG0oQWN0aW9uQmFyLCB7XG5cdFx0XHRcdFx0XHRidXR0b25zOiBbXG5cdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHR0aXRsZTogXCJlZGl0X2FjdGlvblwiLFxuXHRcdFx0XHRcdFx0XHRcdGljb246IEljb25zLkVkaXQsXG5cdFx0XHRcdFx0XHRcdFx0Y2xpY2s6ICgpID0+IHRoaXMuZWRpdFRlbXBsYXRlKCksXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHR0aXRsZTogXCJyZW1vdmVfYWN0aW9uXCIsXG5cdFx0XHRcdFx0XHRcdFx0aWNvbjogSWNvbnMuVHJhc2gsXG5cdFx0XHRcdFx0XHRcdFx0Y2xpY2s6ICgpID0+IHRoaXMuZGVsZXRlVGVtcGxhdGUoKSxcblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdF0sXG5cdFx0XHRcdCAgfSlcblx0XHRcdFx0OiBudWxsLFxuXHRcdF0pXG5cdH1cblxuXHRwcml2YXRlIHJlbmRlckNvbnRlbnQoKTogQ2hpbGRyZW4ge1xuXHRcdHJldHVybiBtKFwiXCIsIFtcblx0XHRcdG0oVGV4dEZpZWxkLCB7XG5cdFx0XHRcdGxhYmVsOiBcInNob3J0Y3V0X2xhYmVsXCIsXG5cdFx0XHRcdHZhbHVlOiBURU1QTEFURV9TSE9SVENVVF9QUkVGSVggKyBhc3NlcnROb3ROdWxsKHRoaXMudGVtcGxhdGUudGFnLCBcInRlbXBsYXRlIHdpdGhvdXQgdGFnIVwiKSxcblx0XHRcdFx0aXNSZWFkT25seTogdHJ1ZSxcblx0XHRcdH0pLFxuXHRcdFx0dGhpcy5zYW5pdGl6ZWRDb250ZW50cy5tYXAoKHsgdGV4dCwgbGFuZ3VhZ2VDb2RlVGV4dElkIH0pID0+IHtcblx0XHRcdFx0cmV0dXJuIG0oXCIuZmxleC5mbGV4LWNvbHVtblwiLCBbbShcIi5oNC5tdC1sXCIsIGxhbmcuZ2V0KGxhbmd1YWdlQ29kZVRleHRJZCkpLCBtKFwiLmVkaXRvci1ib3JkZXIudGV4dC1icmVha1wiLCBtLnRydXN0KHRleHQpKV0pXG5cdFx0XHR9KSxcblx0XHRdKVxuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyBkZWxldGVUZW1wbGF0ZSgpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRpZiAoIShhd2FpdCBEaWFsb2cuY29uZmlybShcImRlbGV0ZVRlbXBsYXRlX21zZ1wiKSkpIHJldHVyblxuXHRcdGF3YWl0IHRoaXMuZW50aXR5Q2xpZW50LmVyYXNlKHRoaXMudGVtcGxhdGUpXG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIGVkaXRUZW1wbGF0ZSgpIHtcblx0XHRjb25zdCB7IHRlbXBsYXRlIH0gPSB0aGlzXG5cdFx0Y29uc3QgZ3JvdXBSb290ID0gYXdhaXQgbG9jYXRvci5lbnRpdHlDbGllbnQubG9hZChUZW1wbGF0ZUdyb3VwUm9vdFR5cGVSZWYsIGFzc2VydE5vdE51bGwodGVtcGxhdGUuX293bmVyR3JvdXAsIFwidGVtcGxhdGUgd2l0aG91dCBvd25lckdyb3VwIVwiKSlcblx0XHRzaG93VGVtcGxhdGVFZGl0b3IodGVtcGxhdGUsIGdyb3VwUm9vdClcblx0fVxuXG5cdGVudGl0eUV2ZW50c1JlY2VpdmVkKHVwZGF0ZXM6IFJlYWRvbmx5QXJyYXk8RW50aXR5VXBkYXRlRGF0YT4pOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKClcblx0fVxufVxuIiwiaW1wb3J0IG0sIHsgQ2hpbGRyZW4gfSBmcm9tIFwibWl0aHJpbFwiXG5cbmltcG9ydCB7IHNob3dUZW1wbGF0ZUVkaXRvciB9IGZyb20gXCIuL1RlbXBsYXRlRWRpdG9yXCJcbmltcG9ydCB0eXBlIHsgRW1haWxUZW1wbGF0ZSB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL2VudGl0aWVzL3R1dGFub3RhL1R5cGVSZWZzLmpzXCJcbmltcG9ydCB7IEVtYWlsVGVtcGxhdGVUeXBlUmVmIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9hcGkvZW50aXRpZXMvdHV0YW5vdGEvVHlwZVJlZnMuanNcIlxuaW1wb3J0IHsgRW50aXR5Q2xpZW50IH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9hcGkvY29tbW9uL0VudGl0eUNsaWVudFwiXG5pbXBvcnQgeyBpc1NhbWVJZCB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL2NvbW1vbi91dGlscy9FbnRpdHlVdGlsc1wiXG5pbXBvcnQgeyBzZWFyY2hJblRlbXBsYXRlcywgVEVNUExBVEVfU0hPUlRDVVRfUFJFRklYIH0gZnJvbSBcIi4uL3RlbXBsYXRlcy9tb2RlbC9UZW1wbGF0ZVBvcHVwTW9kZWxcIlxuaW1wb3J0IHsgaGFzQ2FwYWJpbGl0eU9uR3JvdXAgfSBmcm9tIFwiLi4vLi4vY29tbW9uL3NoYXJpbmcvR3JvdXBVdGlsc1wiXG5pbXBvcnQgeyBTaGFyZUNhcGFiaWxpdHkgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2FwaS9jb21tb24vVHV0YW5vdGFDb25zdGFudHNcIlxuaW1wb3J0IHR5cGUgeyBUZW1wbGF0ZUdyb3VwSW5zdGFuY2UgfSBmcm9tIFwiLi4vdGVtcGxhdGVzL21vZGVsL1RlbXBsYXRlR3JvdXBNb2RlbFwiXG5pbXBvcnQgdHlwZSB7IExvZ2luQ29udHJvbGxlciB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL21haW4vTG9naW5Db250cm9sbGVyXCJcbmltcG9ydCB7IExpc3RDb2x1bW5XcmFwcGVyIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvTGlzdENvbHVtbldyYXBwZXJcIlxuaW1wb3J0IHsgbWVtb2l6ZWQsIG5vT3AgfSBmcm9tIFwiQHR1dGFvL3R1dGFub3RhLXV0aWxzXCJcbmltcG9ydCB7IGFzc2VydE1haW5Pck5vZGUgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2FwaS9jb21tb24vRW52XCJcbmltcG9ydCB7IFNlbGVjdGFibGVSb3dDb250YWluZXIsIFNlbGVjdGFibGVSb3dTZWxlY3RlZFNldHRlciB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL1NlbGVjdGFibGVSb3dDb250YWluZXIuanNcIlxuaW1wb3J0IHsgTGlzdEVsZW1lbnRMaXN0TW9kZWwgfSBmcm9tIFwiLi4vLi4vY29tbW9uL21pc2MvTGlzdEVsZW1lbnRMaXN0TW9kZWwuanNcIlxuaW1wb3J0IFN0cmVhbSBmcm9tIFwibWl0aHJpbC9zdHJlYW1cIlxuaW1wb3J0IENvbHVtbkVtcHR5TWVzc2FnZUJveCBmcm9tIFwiLi4vLi4vY29tbW9uL2d1aS9iYXNlL0NvbHVtbkVtcHR5TWVzc2FnZUJveC5qc1wiXG5pbXBvcnQgeyB0aGVtZSB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL3RoZW1lLmpzXCJcbmltcG9ydCB7IEljb25zIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvYmFzZS9pY29ucy9JY29ucy5qc1wiXG5pbXBvcnQgeyBMaXN0LCBMaXN0QXR0cnMsIE11bHRpc2VsZWN0TW9kZSwgUmVuZGVyQ29uZmlnIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvYmFzZS9MaXN0LmpzXCJcbmltcG9ydCB7IHNpemUgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2d1aS9zaXplLmpzXCJcbmltcG9ydCB7IFRlbXBsYXRlRGV0YWlsc1ZpZXdlciB9IGZyb20gXCIuL1RlbXBsYXRlRGV0YWlsc1ZpZXdlci5qc1wiXG5pbXBvcnQgeyBsaXN0U2VsZWN0aW9uS2V5Ym9hcmRTaG9ydGN1dHMsIG9ubHlTaW5nbGVTZWxlY3Rpb24sIFZpcnR1YWxSb3cgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2d1aS9iYXNlL0xpc3RVdGlscy5qc1wiXG5pbXBvcnQgeyBJY29uQnV0dG9uIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvYmFzZS9JY29uQnV0dG9uLmpzXCJcbmltcG9ydCB7IEJhc2VTZWFyY2hCYXIsIEJhc2VTZWFyY2hCYXJBdHRycyB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL2Jhc2UvQmFzZVNlYXJjaEJhci5qc1wiXG5pbXBvcnQgeyBsYW5nIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9taXNjL0xhbmd1YWdlVmlld01vZGVsLmpzXCJcbmltcG9ydCB7IGtleU1hbmFnZXIgfSBmcm9tIFwiLi4vLi4vY29tbW9uL21pc2MvS2V5TWFuYWdlci5qc1wiXG5pbXBvcnQgeyBFbnRpdHlVcGRhdGVEYXRhLCBpc1VwZGF0ZUZvclR5cGVSZWYgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2FwaS9jb21tb24vdXRpbHMvRW50aXR5VXBkYXRlVXRpbHMuanNcIlxuaW1wb3J0IHsgTGlzdEF1dG9TZWxlY3RCZWhhdmlvciB9IGZyb20gXCIuLi8uLi9jb21tb24vbWlzYy9EZXZpY2VDb25maWcuanNcIlxuaW1wb3J0IHsgVXBkYXRhYmxlU2V0dGluZ3NWaWV3ZXIgfSBmcm9tIFwiLi4vLi4vY29tbW9uL3NldHRpbmdzL0ludGVyZmFjZXMuanNcIlxuXG5hc3NlcnRNYWluT3JOb2RlKClcblxuLyoqXG4gKiAgTGlzdCB0aGF0IGlzIHJlbmRlcmVkIHdpdGhpbiB0aGUgdGVtcGxhdGUgU2V0dGluZ3NcbiAqL1xuZXhwb3J0IGNsYXNzIFRlbXBsYXRlTGlzdFZpZXcgaW1wbGVtZW50cyBVcGRhdGFibGVTZXR0aW5nc1ZpZXdlciB7XG5cdHByaXZhdGUgc2VhcmNoUXVlcnk6IHN0cmluZyA9IFwiXCJcblx0cHJpdmF0ZSByZXN1bHRJdGVtSWRzOiBSZWFkb25seUFycmF5PElkVHVwbGU+ID0gW11cblxuXHRwcml2YXRlIGxpc3RNb2RlbDogTGlzdEVsZW1lbnRMaXN0TW9kZWw8RW1haWxUZW1wbGF0ZT5cblx0cHJpdmF0ZSBsaXN0U3RhdGVTdWJzY3JpcHRpb246IFN0cmVhbTx1bmtub3duPiB8IG51bGwgPSBudWxsXG5cdHByaXZhdGUgcmVhZG9ubHkgcmVuZGVyQ29uZmlnOiBSZW5kZXJDb25maWc8RW1haWxUZW1wbGF0ZSwgVGVtcGxhdGVSb3c+ID0ge1xuXHRcdGl0ZW1IZWlnaHQ6IHNpemUubGlzdF9yb3dfaGVpZ2h0LFxuXHRcdG11bHRpc2VsZWN0aW9uQWxsb3dlZDogTXVsdGlzZWxlY3RNb2RlLkRpc2FibGVkLFxuXHRcdHN3aXBlOiBudWxsLFxuXHRcdGNyZWF0ZUVsZW1lbnQ6IChkb20pID0+IHtcblx0XHRcdGNvbnN0IHRlbXBsYXRlUm93ID0gbmV3IFRlbXBsYXRlUm93KClcblx0XHRcdG0ucmVuZGVyKGRvbSwgdGVtcGxhdGVSb3cucmVuZGVyKCkpXG5cdFx0XHRyZXR1cm4gdGVtcGxhdGVSb3dcblx0XHR9LFxuXHR9XG5cdHByaXZhdGUgcmVhZG9ubHkgc2hvcnRjdXRzID0gbGlzdFNlbGVjdGlvbktleWJvYXJkU2hvcnRjdXRzKE11bHRpc2VsZWN0TW9kZS5EaXNhYmxlZCwgKCkgPT4gdGhpcy5saXN0TW9kZWwpXG5cblx0Y29uc3RydWN0b3IoXG5cdFx0cHJpdmF0ZSByZWFkb25seSBncm91cEluc3RhbmNlOiBUZW1wbGF0ZUdyb3VwSW5zdGFuY2UsXG5cdFx0cHJpdmF0ZSByZWFkb25seSBlbnRpdHlDbGllbnQ6IEVudGl0eUNsaWVudCxcblx0XHRwcml2YXRlIHJlYWRvbmx5IGxvZ2luczogTG9naW5Db250cm9sbGVyLFxuXHRcdHByaXZhdGUgcmVhZG9ubHkgdXBkYXRlRGV0YWlsc1ZpZXdlcjogKHZpZXdlcjogVGVtcGxhdGVEZXRhaWxzVmlld2VyIHwgbnVsbCkgPT4gdW5rbm93bixcblx0XHRwcml2YXRlIHJlYWRvbmx5IGZvY3VzRGV0YWlsc1ZpZXdlcjogKCkgPT4gdW5rbm93bixcblx0KSB7XG5cdFx0dGhpcy5saXN0TW9kZWwgPSB0aGlzLm1ha2VMaXN0TW9kZWwoKVxuXG5cdFx0dGhpcy5saXN0TW9kZWwubG9hZEluaXRpYWwoKVxuXG5cdFx0Ly8gaGFja3MgZm9yIG9sZCBjb21wb25lbnRzXG5cdFx0dGhpcy52aWV3ID0gdGhpcy52aWV3LmJpbmQodGhpcylcblx0XHR0aGlzLm9uY3JlYXRlID0gdGhpcy5vbmNyZWF0ZS5iaW5kKHRoaXMpXG5cdFx0dGhpcy5vbnJlbW92ZSA9IHRoaXMub25yZW1vdmUuYmluZCh0aGlzKVxuXHR9XG5cblx0b25jcmVhdGUoKSB7XG5cdFx0a2V5TWFuYWdlci5yZWdpc3RlclNob3J0Y3V0cyh0aGlzLnNob3J0Y3V0cylcblx0fVxuXG5cdG9ucmVtb3ZlKCkge1xuXHRcdGtleU1hbmFnZXIudW5yZWdpc3RlclNob3J0Y3V0cyh0aGlzLnNob3J0Y3V0cylcblx0fVxuXG5cdHByaXZhdGUgbWFrZUxpc3RNb2RlbCgpIHtcblx0XHRjb25zdCBsaXN0TW9kZWwgPSBuZXcgTGlzdEVsZW1lbnRMaXN0TW9kZWw8RW1haWxUZW1wbGF0ZT4oe1xuXHRcdFx0c29ydENvbXBhcmU6IChhOiBFbWFpbFRlbXBsYXRlLCBiOiBFbWFpbFRlbXBsYXRlKSA9PiB7XG5cdFx0XHRcdGNvbnN0IHRpdGxlQSA9IGEudGl0bGUudG9VcHBlckNhc2UoKVxuXHRcdFx0XHRjb25zdCB0aXRsZUIgPSBiLnRpdGxlLnRvVXBwZXJDYXNlKClcblx0XHRcdFx0cmV0dXJuIHRpdGxlQSA8IHRpdGxlQiA/IC0xIDogdGl0bGVBID4gdGl0bGVCID8gMSA6IDBcblx0XHRcdH0sXG5cdFx0XHRmZXRjaDogYXN5bmMgKF9sYXN0RmV0Y2hlZEVudGl0eSwgX2NvdW50KSA9PiB7XG5cdFx0XHRcdC8vIGxvYWQgYWxsIGVudHJpZXMgYXQgb25jZSB0byBhcHBseSBjdXN0b20gc29ydCBvcmRlclxuXHRcdFx0XHRjb25zdCBhbGxFbnRyaWVzID0gYXdhaXQgdGhpcy5lbnRpdHlDbGllbnQubG9hZEFsbChFbWFpbFRlbXBsYXRlVHlwZVJlZiwgdGhpcy50ZW1wbGF0ZUxpc3RJZCgpKVxuXHRcdFx0XHRyZXR1cm4geyBpdGVtczogYWxsRW50cmllcywgY29tcGxldGU6IHRydWUgfVxuXHRcdFx0fSxcblx0XHRcdGxvYWRTaW5nbGU6IChfbGlzdElkOiBJZCwgZWxlbWVudElkOiBJZCkgPT4ge1xuXHRcdFx0XHRyZXR1cm4gdGhpcy5lbnRpdHlDbGllbnQubG9hZDxFbWFpbFRlbXBsYXRlPihFbWFpbFRlbXBsYXRlVHlwZVJlZiwgW3RoaXMudGVtcGxhdGVMaXN0SWQoKSwgZWxlbWVudElkXSlcblx0XHRcdH0sXG5cdFx0XHRhdXRvU2VsZWN0QmVoYXZpb3I6ICgpID0+IExpc3RBdXRvU2VsZWN0QmVoYXZpb3IuT0xERVIsXG5cdFx0fSlcblxuXHRcdGxpc3RNb2RlbC5zZXRGaWx0ZXIoKGl0ZW06IEVtYWlsVGVtcGxhdGUpID0+IHRoaXMucXVlcnlGaWx0ZXIoaXRlbSkpXG5cblx0XHR0aGlzLmxpc3RTdGF0ZVN1YnNjcmlwdGlvbj8uZW5kKHRydWUpXG5cdFx0dGhpcy5saXN0U3RhdGVTdWJzY3JpcHRpb24gPSBsaXN0TW9kZWwuc3RhdGVTdHJlYW0ubWFwKChzdGF0ZSkgPT4ge1xuXHRcdFx0dGhpcy5vblNlbGVjdGlvbkNoYW5nZWQob25seVNpbmdsZVNlbGVjdGlvbihzdGF0ZSkpXG5cdFx0XHRtLnJlZHJhdygpXG5cdFx0fSlcblxuXHRcdHJldHVybiBsaXN0TW9kZWxcblx0fVxuXG5cdHZpZXcoKTogQ2hpbGRyZW4ge1xuXHRcdHJldHVybiBtKFxuXHRcdFx0TGlzdENvbHVtbldyYXBwZXIsXG5cdFx0XHR7XG5cdFx0XHRcdGhlYWRlckNvbnRlbnQ6IG0oXG5cdFx0XHRcdFx0XCIuZmxleC5mbGV4LXNwYWNlLWJldHdlZW4uY2VudGVyLXZlcnRpY2FsbHkucGxyLWxcIixcblx0XHRcdFx0XHRtKEJhc2VTZWFyY2hCYXIsIHtcblx0XHRcdFx0XHRcdHRleHQ6IHRoaXMuc2VhcmNoUXVlcnksXG5cdFx0XHRcdFx0XHRvbklucHV0OiAodGV4dCkgPT4gdGhpcy51cGRhdGVRdWVyeSh0ZXh0KSxcblx0XHRcdFx0XHRcdGJ1c3k6IGZhbHNlLFxuXHRcdFx0XHRcdFx0b25LZXlEb3duOiAoZSkgPT4gZS5zdG9wUHJvcGFnYXRpb24oKSxcblx0XHRcdFx0XHRcdG9uQ2xlYXI6ICgpID0+IHtcblx0XHRcdFx0XHRcdFx0dGhpcy5zZWFyY2hRdWVyeSA9IFwiXCJcblx0XHRcdFx0XHRcdFx0dGhpcy5yZXN1bHRJdGVtSWRzID0gW11cblx0XHRcdFx0XHRcdFx0dGhpcy5saXN0TW9kZWwucmVhcHBseUZpbHRlcigpXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0cGxhY2Vob2xkZXI6IGxhbmcuZ2V0KFwic2VhcmNoVGVtcGxhdGVzX3BsYWNlaG9sZGVyXCIpLFxuXHRcdFx0XHRcdH0gc2F0aXNmaWVzIEJhc2VTZWFyY2hCYXJBdHRycyksXG5cdFx0XHRcdFx0dGhpcy51c2VyQ2FuRWRpdCgpXG5cdFx0XHRcdFx0XHQ/IG0oXG5cdFx0XHRcdFx0XHRcdFx0XCIubXItbmVnYXRpdmUtc1wiLFxuXHRcdFx0XHRcdFx0XHRcdG0oSWNvbkJ1dHRvbiwge1xuXHRcdFx0XHRcdFx0XHRcdFx0dGl0bGU6IFwiYWRkVGVtcGxhdGVfbGFiZWxcIixcblx0XHRcdFx0XHRcdFx0XHRcdGljb246IEljb25zLkFkZCxcblx0XHRcdFx0XHRcdFx0XHRcdGNsaWNrOiAoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHNob3dUZW1wbGF0ZUVkaXRvcihudWxsLCB0aGlzLmdyb3VwSW5zdGFuY2UuZ3JvdXBSb290KVxuXHRcdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XHR9KSxcblx0XHRcdFx0XHRcdCAgKVxuXHRcdFx0XHRcdFx0OiBudWxsLFxuXHRcdFx0XHQpLFxuXHRcdFx0fSxcblx0XHRcdHRoaXMubGlzdE1vZGVsLmlzRW1wdHlBbmREb25lKClcblx0XHRcdFx0PyBtKENvbHVtbkVtcHR5TWVzc2FnZUJveCwge1xuXHRcdFx0XHRcdFx0Y29sb3I6IHRoZW1lLmxpc3RfbWVzc2FnZV9iZyxcblx0XHRcdFx0XHRcdGljb246IEljb25zLkxpc3RBbHQsXG5cdFx0XHRcdFx0XHRtZXNzYWdlOiBcIm5vRW50cmllc19tc2dcIixcblx0XHRcdFx0ICB9KVxuXHRcdFx0XHQ6IG0oTGlzdCwge1xuXHRcdFx0XHRcdFx0cmVuZGVyQ29uZmlnOiB0aGlzLnJlbmRlckNvbmZpZyxcblx0XHRcdFx0XHRcdHN0YXRlOiB0aGlzLmxpc3RNb2RlbC5zdGF0ZSxcblx0XHRcdFx0XHRcdG9uTG9hZE1vcmU6ICgpID0+IHRoaXMubGlzdE1vZGVsLmxvYWRNb3JlKCksXG5cdFx0XHRcdFx0XHRvblJldHJ5TG9hZGluZzogKCkgPT4gdGhpcy5saXN0TW9kZWwucmV0cnlMb2FkaW5nKCksXG5cdFx0XHRcdFx0XHRvblN0b3BMb2FkaW5nOiAoKSA9PiB0aGlzLmxpc3RNb2RlbC5zdG9wTG9hZGluZygpLFxuXHRcdFx0XHRcdFx0b25TaW5nbGVTZWxlY3Rpb246IChpdGVtOiBFbWFpbFRlbXBsYXRlKSA9PiB7XG5cdFx0XHRcdFx0XHRcdHRoaXMubGlzdE1vZGVsLm9uU2luZ2xlU2VsZWN0aW9uKGl0ZW0pXG5cdFx0XHRcdFx0XHRcdHRoaXMuZm9jdXNEZXRhaWxzVmlld2VyKClcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRvblNpbmdsZVRvZ2dsaW5nTXVsdGlzZWxlY3Rpb246IG5vT3AsXG5cdFx0XHRcdFx0XHRvblJhbmdlU2VsZWN0aW9uVG93YXJkczogbm9PcCxcblx0XHRcdFx0ICB9IHNhdGlzZmllcyBMaXN0QXR0cnM8RW1haWxUZW1wbGF0ZSwgVGVtcGxhdGVSb3c+KSxcblx0XHQpXG5cdH1cblxuXHRhc3luYyBlbnRpdHlFdmVudHNSZWNlaXZlZCh1cGRhdGVzOiBSZWFkb25seUFycmF5PEVudGl0eVVwZGF0ZURhdGE+KTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0Zm9yIChjb25zdCB1cGRhdGUgb2YgdXBkYXRlcykge1xuXHRcdFx0Y29uc3QgeyBpbnN0YW5jZUxpc3RJZCwgaW5zdGFuY2VJZCwgb3BlcmF0aW9uIH0gPSB1cGRhdGVcblx0XHRcdGlmIChpc1VwZGF0ZUZvclR5cGVSZWYoRW1haWxUZW1wbGF0ZVR5cGVSZWYsIHVwZGF0ZSkgJiYgaXNTYW1lSWQodGhpcy50ZW1wbGF0ZUxpc3RJZCgpLCBpbnN0YW5jZUxpc3RJZCkpIHtcblx0XHRcdFx0YXdhaXQgdGhpcy5saXN0TW9kZWwuZW50aXR5RXZlbnRSZWNlaXZlZChpbnN0YW5jZUxpc3RJZCwgaW5zdGFuY2VJZCwgb3BlcmF0aW9uKVxuXHRcdFx0fVxuXHRcdH1cblx0XHQvLyB3ZSBuZWVkIHRvIG1ha2UgYW5vdGhlciBzZWFyY2ggaW4gY2FzZSBpdGVtcyBoYXZlIGNoYW5nZWRcblx0XHR0aGlzLnVwZGF0ZVF1ZXJ5KHRoaXMuc2VhcmNoUXVlcnkpXG5cdFx0bS5yZWRyYXcoKVxuXHR9XG5cblx0cHJpdmF0ZSByZWFkb25seSBvblNlbGVjdGlvbkNoYW5nZWQgPSBtZW1vaXplZCgoaXRlbTogRW1haWxUZW1wbGF0ZSB8IG51bGwpID0+IHtcblx0XHRjb25zdCBkZXRhaWxzVmlld2VyID0gaXRlbSA9PSBudWxsID8gbnVsbCA6IG5ldyBUZW1wbGF0ZURldGFpbHNWaWV3ZXIoaXRlbSwgdGhpcy5lbnRpdHlDbGllbnQsICgpID0+ICF0aGlzLnVzZXJDYW5FZGl0KCkpXG5cdFx0dGhpcy51cGRhdGVEZXRhaWxzVmlld2VyKGRldGFpbHNWaWV3ZXIpXG5cdH0pXG5cblx0cHJpdmF0ZSBxdWVyeUZpbHRlcihpdGVtOiBFbWFpbFRlbXBsYXRlKSB7XG5cdFx0cmV0dXJuIHRoaXMuc2VhcmNoUXVlcnkgPT09IFwiXCIgPyB0cnVlIDogdGhpcy5yZXN1bHRJdGVtSWRzLmluY2x1ZGVzKGl0ZW0uX2lkKVxuXHR9XG5cblx0cHJpdmF0ZSB1cGRhdGVRdWVyeShxdWVyeTogc3RyaW5nKSB7XG5cdFx0dGhpcy5zZWFyY2hRdWVyeSA9IHF1ZXJ5XG5cdFx0dGhpcy5yZXN1bHRJdGVtSWRzID0gc2VhcmNoSW5UZW1wbGF0ZXModGhpcy5zZWFyY2hRdWVyeSwgdGhpcy5saXN0TW9kZWwuZ2V0VW5maWx0ZXJlZEFzQXJyYXkoKSkubWFwKChpdGVtKSA9PiBpdGVtLl9pZClcblx0XHR0aGlzLmxpc3RNb2RlbC5yZWFwcGx5RmlsdGVyKClcblx0fVxuXG5cdHVzZXJDYW5FZGl0KCk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiBoYXNDYXBhYmlsaXR5T25Hcm91cCh0aGlzLmxvZ2lucy5nZXRVc2VyQ29udHJvbGxlcigpLnVzZXIsIHRoaXMuZ3JvdXBJbnN0YW5jZS5ncm91cCwgU2hhcmVDYXBhYmlsaXR5LldyaXRlKVxuXHR9XG5cblx0dGVtcGxhdGVMaXN0SWQoKTogSWQge1xuXHRcdHJldHVybiB0aGlzLmdyb3VwSW5zdGFuY2UuZ3JvdXBSb290LnRlbXBsYXRlc1xuXHR9XG59XG5cbmV4cG9ydCBjbGFzcyBUZW1wbGF0ZVJvdyBpbXBsZW1lbnRzIFZpcnR1YWxSb3c8RW1haWxUZW1wbGF0ZT4ge1xuXHR0b3A6IG51bWJlciA9IDBcblx0ZG9tRWxlbWVudDogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbCAvLyBzZXQgZnJvbSBMaXN0XG5cblx0ZW50aXR5OiBFbWFpbFRlbXBsYXRlIHwgbnVsbCA9IG51bGxcblx0cHJpdmF0ZSBzZWxlY3Rpb25VcGRhdGVyITogU2VsZWN0YWJsZVJvd1NlbGVjdGVkU2V0dGVyXG5cdHByaXZhdGUgdGl0bGVEb20hOiBIVE1MRWxlbWVudFxuXHRwcml2YXRlIGlkRG9tITogSFRNTEVsZW1lbnRcblxuXHRjb25zdHJ1Y3RvcigpIHt9XG5cblx0dXBkYXRlKHRlbXBsYXRlOiBFbWFpbFRlbXBsYXRlLCBzZWxlY3RlZDogYm9vbGVhbik6IHZvaWQge1xuXHRcdHRoaXMuZW50aXR5ID0gdGVtcGxhdGVcblxuXHRcdHRoaXMuc2VsZWN0aW9uVXBkYXRlcihzZWxlY3RlZCwgZmFsc2UpXG5cblx0XHR0aGlzLnRpdGxlRG9tLnRleHRDb250ZW50ID0gdGVtcGxhdGUudGl0bGVcblx0XHR0aGlzLmlkRG9tLnRleHRDb250ZW50ID0gVEVNUExBVEVfU0hPUlRDVVRfUFJFRklYICsgdGVtcGxhdGUudGFnXG5cdH1cblxuXHRyZW5kZXIoKTogQ2hpbGRyZW4ge1xuXHRcdHJldHVybiBtKFxuXHRcdFx0U2VsZWN0YWJsZVJvd0NvbnRhaW5lcixcblx0XHRcdHtcblx0XHRcdFx0b25TZWxlY3RlZENoYW5nZVJlZjogKHVwZGF0ZXIpID0+ICh0aGlzLnNlbGVjdGlvblVwZGF0ZXIgPSB1cGRhdGVyKSxcblx0XHRcdH0sXG5cdFx0XHRtKFwiLmZsZXguY29sXCIsIFtcblx0XHRcdFx0bShcIlwiLCBbXG5cdFx0XHRcdFx0bShcIi50ZXh0LWVsbGlwc2lzLmJhZGdlLWxpbmUtaGVpZ2h0XCIsIHtcblx0XHRcdFx0XHRcdG9uY3JlYXRlOiAodm5vZGUpID0+ICh0aGlzLnRpdGxlRG9tID0gdm5vZGUuZG9tIGFzIEhUTUxFbGVtZW50KSxcblx0XHRcdFx0XHR9KSxcblx0XHRcdFx0XSksXG5cdFx0XHRcdG0oXCIuc21hbGxlci5tdC14eHNcIiwge1xuXHRcdFx0XHRcdG9uY3JlYXRlOiAodm5vZGUpID0+ICh0aGlzLmlkRG9tID0gdm5vZGUuZG9tIGFzIEhUTUxFbGVtZW50KSxcblx0XHRcdFx0fSksXG5cdFx0XHRdKSxcblx0XHQpXG5cdH1cbn1cbiIsImltcG9ydCBtLCB7IENoaWxkLCBDaGlsZHJlbiB9IGZyb20gXCJtaXRocmlsXCJcbmltcG9ydCB7IGFzc2VydE1haW5Pck5vZGUsIGlzQXBwLCBpc0lPU0FwcCB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL2NvbW1vbi9FbnZcIlxuaW1wb3J0IHsgbGFuZyB9IGZyb20gXCIuLi8uLi9jb21tb24vbWlzYy9MYW5ndWFnZVZpZXdNb2RlbFwiXG5pbXBvcnQgdHlwZSB7IERyb3BEb3duU2VsZWN0b3JBdHRycyB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL2Jhc2UvRHJvcERvd25TZWxlY3Rvci5qc1wiXG5pbXBvcnQgeyBEcm9wRG93blNlbGVjdG9yIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvYmFzZS9Ecm9wRG93blNlbGVjdG9yLmpzXCJcbmltcG9ydCB7IEVudGl0eVVwZGF0ZURhdGEsIGlzVXBkYXRlRm9yVHlwZVJlZiB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL2NvbW1vbi91dGlscy9FbnRpdHlVcGRhdGVVdGlscy5qc1wiXG5pbXBvcnQgeyBsb2NhdG9yIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9hcGkvbWFpbi9Db21tb25Mb2NhdG9yLmpzXCJcbmltcG9ydCB7IEZlYXR1cmVUeXBlLCBPcGVyYXRpb25UeXBlIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9hcGkvY29tbW9uL1R1dGFub3RhQ29uc3RhbnRzLmpzXCJcbmltcG9ydCB7IFR1dGFub3RhUHJvcGVydGllcywgVHV0YW5vdGFQcm9wZXJ0aWVzVHlwZVJlZiB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL2VudGl0aWVzL3R1dGFub3RhL1R5cGVSZWZzLmpzXCJcbmltcG9ydCB7IEJ1dHRvbiwgQnV0dG9uVHlwZSB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL2Jhc2UvQnV0dG9uLmpzXCJcbmltcG9ydCB7IERpYWxvZyB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL2Jhc2UvRGlhbG9nLmpzXCJcbmltcG9ydCB7IG1haWxMb2NhdG9yIH0gZnJvbSBcIi4uL21haWxMb2NhdG9yLmpzXCJcbmltcG9ydCB7IFVwZGF0YWJsZVNldHRpbmdzVmlld2VyIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9zZXR0aW5ncy9JbnRlcmZhY2VzLmpzXCJcbmltcG9ydCB7IGFzc2VydCB9IGZyb20gXCJAdHV0YW8vdHV0YW5vdGEtdXRpbHNcIlxuXG5hc3NlcnRNYWluT3JOb2RlKClcblxuZXhwb3J0IGNsYXNzIENvbnRhY3RzU2V0dGluZ3NWaWV3ZXIgaW1wbGVtZW50cyBVcGRhdGFibGVTZXR0aW5nc1ZpZXdlciB7XG5cdHByaXZhdGUgbm9BdXRvbWF0aWNDb250YWN0czogYm9vbGVhbiA9IGZhbHNlXG5cblx0Y29uc3RydWN0b3IoKSB7XG5cdFx0dGhpcy5ub0F1dG9tYXRpY0NvbnRhY3RzID0gbG9jYXRvci5sb2dpbnMuZ2V0VXNlckNvbnRyb2xsZXIoKS5wcm9wcy5ub0F1dG9tYXRpY0NvbnRhY3RzXG5cdH1cblxuXHR2aWV3KCk6IENoaWxkcmVuIHtcblx0XHRyZXR1cm4gW1xuXHRcdFx0bShcblx0XHRcdFx0XCIuZmlsbC1hYnNvbHV0ZS5zY3JvbGwucGxyLWwucGIteGxcIixcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHJvbGU6IFwiZ3JvdXBcIixcblx0XHRcdFx0fSxcblx0XHRcdFx0W1xuXHRcdFx0XHRcdG0oXCIuaDQubXQtbFwiLCBsYW5nLmdldChcImNvbnRhY3RzTWFuYWdlbWVudF9sYWJlbFwiKSksXG5cdFx0XHRcdFx0dGhpcy5yZW5kZXJJbXBvcnRDb250YWN0c0J1dHRvbigpLFxuXHRcdFx0XHRcdGxvY2F0b3IubG9naW5zLmlzRW5hYmxlZChGZWF0dXJlVHlwZS5EaXNhYmxlQ29udGFjdHMpID8gbnVsbCA6IHRoaXMucmVuZGVyQXV0b0NyZWF0ZUNvbnRhY3RzUHJlZmVyZW5jZSgpLFxuXHRcdFx0XHRcdHRoaXMucmVuZGVyQ29udGFjdHNTeW5jRHJvcGRvd24oKSxcblx0XHRcdFx0XSxcblx0XHRcdCksXG5cdFx0XVxuXHR9XG5cblx0cHJpdmF0ZSByZW5kZXJBdXRvQ3JlYXRlQ29udGFjdHNQcmVmZXJlbmNlKCk6IENoaWxkcmVuIHtcblx0XHRyZXR1cm4gbShEcm9wRG93blNlbGVjdG9yLCB7XG5cdFx0XHRsYWJlbDogXCJjcmVhdGVDb250YWN0c19sYWJlbFwiLFxuXHRcdFx0aGVscExhYmVsOiAoKSA9PiBsYW5nLmdldChcImNyZWF0ZUNvbnRhY3RzRm9yUmVjaXBpZW50c19hY3Rpb25cIiksXG5cdFx0XHRpdGVtczogW1xuXHRcdFx0XHR7XG5cdFx0XHRcdFx0bmFtZTogbGFuZy5nZXQoXCJhY3RpdmF0ZWRfbGFiZWxcIiksXG5cdFx0XHRcdFx0dmFsdWU6IGZhbHNlLFxuXHRcdFx0XHR9LFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0bmFtZTogbGFuZy5nZXQoXCJkZWFjdGl2YXRlZF9sYWJlbFwiKSxcblx0XHRcdFx0XHR2YWx1ZTogdHJ1ZSxcblx0XHRcdFx0fSxcblx0XHRcdF0sXG5cdFx0XHRzZWxlY3RlZFZhbHVlOiB0aGlzLm5vQXV0b21hdGljQ29udGFjdHMsXG5cdFx0XHRzZWxlY3Rpb25DaGFuZ2VkSGFuZGxlcjogKHYpID0+IHtcblx0XHRcdFx0bG9jYXRvci5sb2dpbnMuZ2V0VXNlckNvbnRyb2xsZXIoKS5wcm9wcy5ub0F1dG9tYXRpY0NvbnRhY3RzID0gdlxuXHRcdFx0XHRsb2NhdG9yLmVudGl0eUNsaWVudC51cGRhdGUobG9jYXRvci5sb2dpbnMuZ2V0VXNlckNvbnRyb2xsZXIoKS5wcm9wcylcblx0XHRcdH0sXG5cdFx0XHRkcm9wZG93bldpZHRoOiAyNTAsXG5cdFx0fSBzYXRpc2ZpZXMgRHJvcERvd25TZWxlY3RvckF0dHJzPGJvb2xlYW4+KVxuXHR9XG5cblx0cHJpdmF0ZSByZW5kZXJJbXBvcnRDb250YWN0c0J1dHRvbigpOiBDaGlsZHJlbiB7XG5cdFx0aWYgKCFpc0FwcCgpKSB7XG5cdFx0XHRyZXR1cm4gbnVsbFxuXHRcdH1cblx0XHRyZXR1cm4gbShcIi5mbGV4LmZsZXgtc3BhY2UtYmV0d2Vlbi5pdGVtcy1jZW50ZXJcIiwgW1xuXHRcdFx0bGFuZy5nZXQoXCJpbXBvcnRGcm9tQ29udGFjdEJvb2tfbGFiZWxcIiksXG5cdFx0XHRtKEJ1dHRvbiwge1xuXHRcdFx0XHRsYWJlbDogXCJpbXBvcnRfYWN0aW9uXCIsXG5cdFx0XHRcdGNsaWNrOiAoKSA9PiB0aGlzLmltcG9ydENvbnRhY3RzRnJvbURldmljZSgpLFxuXHRcdFx0XHR0eXBlOiBCdXR0b25UeXBlLlByaW1hcnksXG5cdFx0XHR9KSxcblx0XHRdKVxuXHR9XG5cblx0cHJpdmF0ZSByZW5kZXJDb250YWN0c1N5bmNEcm9wZG93bigpOiBDaGlsZCB7XG5cdFx0aWYgKCFpc0FwcCgpKSByZXR1cm4gbnVsbFxuXG5cdFx0cmV0dXJuIG0oRHJvcERvd25TZWxlY3Rvciwge1xuXHRcdFx0bGFiZWw6IFwiY29udGFjdHNTeW5jaHJvbml6YXRpb25fbGFiZWxcIixcblx0XHRcdGhlbHBMYWJlbDogKCkgPT4gbGFuZy5nZXQoXCJjb250YWN0c1N5bmNocm9uaXphdGlvbldhcm5pbmdfbXNnXCIpLFxuXHRcdFx0aXRlbXM6IFtcblx0XHRcdFx0e1xuXHRcdFx0XHRcdG5hbWU6IGxhbmcuZ2V0KFwiYWN0aXZhdGVkX2xhYmVsXCIpLFxuXHRcdFx0XHRcdHZhbHVlOiB0cnVlLFxuXHRcdFx0XHR9LFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0bmFtZTogbGFuZy5nZXQoXCJkZWFjdGl2YXRlZF9sYWJlbFwiKSxcblx0XHRcdFx0XHR2YWx1ZTogZmFsc2UsXG5cdFx0XHRcdH0sXG5cdFx0XHRdLFxuXHRcdFx0c2VsZWN0ZWRWYWx1ZTogbWFpbExvY2F0b3IubmF0aXZlQ29udGFjdHNTeW5jTWFuYWdlcigpLmlzRW5hYmxlZCgpLFxuXHRcdFx0c2VsZWN0aW9uQ2hhbmdlZEhhbmRsZXI6IGFzeW5jIChjb250YWN0U3luY0VuYWJsZWQ6IGJvb2xlYW4pID0+IHtcblx0XHRcdFx0YXdhaXQgdGhpcy5vbkNvbnRhY3RTeW5jU2VsZWN0aW9uQ2hhbmdlZChjb250YWN0U3luY0VuYWJsZWQpXG5cdFx0XHR9LFxuXHRcdFx0ZHJvcGRvd25XaWR0aDogMjUwLFxuXHRcdH0pXG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIG9uQ29udGFjdFN5bmNTZWxlY3Rpb25DaGFuZ2VkKGNvbnRhY3RTeW5jRW5hYmxlZDogYm9vbGVhbikge1xuXHRcdGFzc2VydChpc0FwcCgpLCBcImlzQXBwXCIpXG5cdFx0Y29uc3Qgc3luY01hbmFnZXIgPSBtYWlsTG9jYXRvci5uYXRpdmVDb250YWN0c1N5bmNNYW5hZ2VyKClcblxuXHRcdGlmICghY29udGFjdFN5bmNFbmFibGVkKSB7XG5cdFx0XHRzeW5jTWFuYWdlci5kaXNhYmxlU3luYygpXG5cdFx0fSBlbHNlIHtcblx0XHRcdGNvbnN0IGNhblN5bmMgPSBhd2FpdCBzeW5jTWFuYWdlci5jYW5TeW5jKClcblx0XHRcdGlmICghY2FuU3luYykge1xuXHRcdFx0XHRyZXR1cm5cblx0XHRcdH1cblxuXHRcdFx0YXdhaXQgc3luY01hbmFnZXIuZW5hYmxlU3luYygpXG5cdFx0XHQvLyBXZSBqdXN0IGVuYWJsZSBpZiB0aGUgc3luY2hyb25pemF0aW9uIHN0YXJ0ZWQgc3VjY2Vzc2Z1bGx5XG5cdFx0XHRjb25zdCBpc1N5bmNBbGxvd2VkID0gYXdhaXQgc3luY01hbmFnZXIuc3luY0NvbnRhY3RzKClcblx0XHRcdGlmICghaXNTeW5jQWxsb3dlZCkge1xuXHRcdFx0XHR0aGlzLmhhbmRsZUNvbnRhY3RzU3luY2hyb25pemF0aW9uRmFpbCgpXG5cdFx0XHR9XG5cdFx0XHRtLnJlZHJhdygpXG5cdFx0fVxuXHR9XG5cblx0dXBkYXRlVHV0YVByb3BlcnRpZXNTZXR0aW5ncyhwcm9wczogVHV0YW5vdGFQcm9wZXJ0aWVzKSB7XG5cdFx0dGhpcy5ub0F1dG9tYXRpY0NvbnRhY3RzID0gcHJvcHMubm9BdXRvbWF0aWNDb250YWN0c1xuXHR9XG5cblx0YXN5bmMgZW50aXR5RXZlbnRzUmVjZWl2ZWQodXBkYXRlczogUmVhZG9ubHlBcnJheTxFbnRpdHlVcGRhdGVEYXRhPik6IFByb21pc2U8dm9pZD4ge1xuXHRcdGZvciAoY29uc3QgdXBkYXRlIG9mIHVwZGF0ZXMpIHtcblx0XHRcdGNvbnN0IHsgb3BlcmF0aW9uIH0gPSB1cGRhdGVcblx0XHRcdGlmIChpc1VwZGF0ZUZvclR5cGVSZWYoVHV0YW5vdGFQcm9wZXJ0aWVzVHlwZVJlZiwgdXBkYXRlKSAmJiBvcGVyYXRpb24gPT09IE9wZXJhdGlvblR5cGUuVVBEQVRFKSB7XG5cdFx0XHRcdGNvbnN0IHByb3BzID0gYXdhaXQgbG9jYXRvci5lbnRpdHlDbGllbnQubG9hZChUdXRhbm90YVByb3BlcnRpZXNUeXBlUmVmLCBsb2NhdG9yLmxvZ2lucy5nZXRVc2VyQ29udHJvbGxlcigpLnByb3BzLl9pZClcblx0XHRcdFx0dGhpcy51cGRhdGVUdXRhUHJvcGVydGllc1NldHRpbmdzKHByb3BzKVxuXHRcdFx0fVxuXHRcdH1cblx0XHRtLnJlZHJhdygpXG5cdH1cblxuXHRwcml2YXRlIGhhbmRsZUNvbnRhY3RzU3luY2hyb25pemF0aW9uRmFpbCgpIHtcblx0XHRtYWlsTG9jYXRvci5uYXRpdmVDb250YWN0c1N5bmNNYW5hZ2VyKCk/LmRpc2FibGVTeW5jKClcblx0XHR0aGlzLnNob3dDb250YWN0c1Blcm1pc3Npb25EaWFsb2coKVxuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyBzaG93Q29udGFjdHNQZXJtaXNzaW9uRGlhbG9nKCkge1xuXHRcdGF3YWl0IERpYWxvZy5tZXNzYWdlKFwiYWxsb3dDb250YWN0UmVhZFdyaXRlX21zZ1wiKVxuXHRcdGF3YWl0IGxvY2F0b3Iuc3lzdGVtRmFjYWRlLmdvVG9TZXR0aW5ncygpXG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIGltcG9ydENvbnRhY3RzRnJvbURldmljZSgpIHtcblx0XHRjb25zdCBpbXBvcnRlciA9IGF3YWl0IG1haWxMb2NhdG9yLmNvbnRhY3RJbXBvcnRlcigpXG5cdFx0YXdhaXQgaW1wb3J0ZXIuaW1wb3J0Q29udGFjdHNGcm9tRGV2aWNlU2FmZWx5KClcblx0fVxufVxuIiwiaW1wb3J0IHsgbGFuZyB9IGZyb20gXCIuLi9taXNjL0xhbmd1YWdlVmlld01vZGVsLmpzXCJcbmltcG9ydCB7IEV4cGFuZGVyQnV0dG9uLCBFeHBhbmRlclBhbmVsIH0gZnJvbSBcIi4uL2d1aS9iYXNlL0V4cGFuZGVyLmpzXCJcbmltcG9ydCBtLCB7IENoaWxkLCBDaGlsZEFycmF5LCBDaGlsZHJlbiwgQ2xhc3NDb21wb25lbnQsIENvbXBvbmVudCwgVm5vZGUgfSBmcm9tIFwibWl0aHJpbFwiXG5pbXBvcnQgU3RyZWFtIGZyb20gXCJtaXRocmlsL3N0cmVhbVwiXG5cbmV4cG9ydCBpbnRlcmZhY2UgTm90aWZpY2F0aW9uVGFyZ2V0c0xpc3RBdHRycyB7XG5cdHJvd0FkZDogQ2hpbGRcblx0cm93czogQ2hpbGRBcnJheVxuXHRvbkV4cGFuZGVkQ2hhbmdlOiBTdHJlYW08Ym9vbGVhbj5cbn1cblxuLyoqXG4gKiBMaXN0cyBub3RpZmljYXRpb24gZGV2aWNlIHRhcmdldHNcbiAqL1xuZXhwb3J0IGNsYXNzIE5vdGlmaWNhdGlvblRhcmdldHNMaXN0IGltcGxlbWVudHMgQ29tcG9uZW50PE5vdGlmaWNhdGlvblRhcmdldHNMaXN0QXR0cnM+IHtcblx0dmlldyh2bm9kZTogVm5vZGU8Tm90aWZpY2F0aW9uVGFyZ2V0c0xpc3RBdHRycz4pIHtcblx0XHRyZXR1cm4gbShcIlwiLCBbXG5cdFx0XHRtKFwiLmZsZXgtc3BhY2UtYmV0d2Vlbi5pdGVtcy1jZW50ZXIubXQtcy5tYi1zXCIsIFtcblx0XHRcdFx0bShcIi5oNVwiLCBsYW5nLmdldChcIm5vdGlmaWNhdGlvblRhcmdldHNfbGFiZWxcIikpLFxuXHRcdFx0XHRtKEV4cGFuZGVyQnV0dG9uLCB7XG5cdFx0XHRcdFx0bGFiZWw6IFwic2hvd19hY3Rpb25cIixcblx0XHRcdFx0XHRleHBhbmRlZDogdm5vZGUuYXR0cnMub25FeHBhbmRlZENoYW5nZSgpLFxuXHRcdFx0XHRcdG9uRXhwYW5kZWRDaGFuZ2U6IHZub2RlLmF0dHJzLm9uRXhwYW5kZWRDaGFuZ2UsXG5cdFx0XHRcdH0pLFxuXHRcdFx0XSksXG5cdFx0XHRtKFxuXHRcdFx0XHRFeHBhbmRlclBhbmVsLFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0ZXhwYW5kZWQ6IHZub2RlLmF0dHJzLm9uRXhwYW5kZWRDaGFuZ2UoKSxcblx0XHRcdFx0fSxcblx0XHRcdFx0bShcIi5mbGV4LmZsZXgtY29sdW1uLml0ZW1zLWVuZC5tYlwiLCBbdm5vZGUuYXR0cnMucm93QWRkLCAuLi52bm9kZS5hdHRycy5yb3dzXSksXG5cdFx0XHQpLFxuXHRcdFx0bShcIi5zbWFsbFwiLCBsYW5nLmdldChcInB1c2hJZGVudGlmaWVySW5mb01lc3NhZ2VfbXNnXCIpKSxcblx0XHRdKVxuXHR9XG59XG4iLCJpbXBvcnQgbSwgeyBDaGlsZHJlbiwgQ29tcG9uZW50LCBWbm9kZSB9IGZyb20gXCJtaXRocmlsXCJcbmltcG9ydCB7IGxhbmcgfSBmcm9tIFwiLi4vbWlzYy9MYW5ndWFnZVZpZXdNb2RlbC5qc1wiXG5pbXBvcnQgeyBuZXZlck51bGwgfSBmcm9tIFwiQHR1dGFvL3R1dGFub3RhLXV0aWxzXCJcbmltcG9ydCB7IEljb25zIH0gZnJvbSBcIi4uL2d1aS9iYXNlL2ljb25zL0ljb25zLmpzXCJcbmltcG9ydCB7IGF0dGFjaERyb3Bkb3duIH0gZnJvbSBcIi4uL2d1aS9iYXNlL0Ryb3Bkb3duLmpzXCJcbmltcG9ydCB7IEljb25CdXR0b24gfSBmcm9tIFwiLi4vZ3VpL2Jhc2UvSWNvbkJ1dHRvbi5qc1wiXG5pbXBvcnQgeyBCdXR0b25TaXplIH0gZnJvbSBcIi4uL2d1aS9iYXNlL0J1dHRvblNpemUuanNcIlxuXG5leHBvcnQgaW50ZXJmYWNlIElkZW50aWZpZXJSb3dBdHRycyB7XG5cdG5hbWU6IHN0cmluZ1xuXHRpZGVudGlmaWVyOiBzdHJpbmdcblx0ZGlzYWJsZWQ6IGJvb2xlYW5cblx0Y3VycmVudDogYm9vbGVhblxuXHRmb3JtYXRJZGVudGlmaWVyOiBib29sZWFuXG5cdHJlbW92ZUNsaWNrZWQ6ICgpID0+IHZvaWRcblx0ZGlzYWJsZUNsaWNrZWQ6ICgpID0+IHZvaWRcbn1cblxuLyoqXG4gKiBEaXNwbGF5cyBkYXRhIGZvciBvbmUgcHVzaCBpZGVudGlmaWVyXG4gKi9cbmV4cG9ydCBjbGFzcyBJZGVudGlmaWVyUm93IGltcGxlbWVudHMgQ29tcG9uZW50PElkZW50aWZpZXJSb3dBdHRycz4ge1xuXHR2aWV3KHZub2RlOiBWbm9kZTxJZGVudGlmaWVyUm93QXR0cnM+KTogQ2hpbGRyZW4ge1xuXHRcdGNvbnN0IGRyb3Bkb3duQXR0cnMgPSBhdHRhY2hEcm9wZG93bih7XG5cdFx0XHRtYWluQnV0dG9uQXR0cnM6IHtcblx0XHRcdFx0dGl0bGU6IFwiZWRpdF9hY3Rpb25cIixcblx0XHRcdFx0aWNvbjogSWNvbnMuTW9yZSxcblx0XHRcdFx0c2l6ZTogQnV0dG9uU2l6ZS5Db21wYWN0LFxuXHRcdFx0fSxcblx0XHRcdGNoaWxkQXR0cnM6ICgpID0+IFtcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGxhYmVsOiB2bm9kZS5hdHRycy5kaXNhYmxlZCA/IFwiYWN0aXZhdGVfYWN0aW9uXCIgOiBcImRlYWN0aXZhdGVfYWN0aW9uXCIsXG5cdFx0XHRcdFx0Y2xpY2s6IHZub2RlLmF0dHJzLmRpc2FibGVDbGlja2VkLFxuXHRcdFx0XHR9LFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0bGFiZWw6IFwiZGVsZXRlX2FjdGlvblwiLFxuXHRcdFx0XHRcdGNsaWNrOiB2bm9kZS5hdHRycy5yZW1vdmVDbGlja2VkLFxuXHRcdFx0XHR9LFxuXHRcdFx0XSxcblx0XHR9KVxuXHRcdHJldHVybiBtKFwiLmZsZXguZmxleC1jb2x1bW4uZnVsbC13aWR0aFwiLCBbXG5cdFx0XHRtKFwiLmZsZXguaXRlbXMtY2VudGVyLnNlbGVjdGFibGVcIiwgW1xuXHRcdFx0XHRtKFwic3BhblwiICsgKHZub2RlLmF0dHJzLmN1cnJlbnQgPyBcIi5iXCIgOiBcIlwiKSwgdm5vZGUuYXR0cnMubmFtZSksXG5cdFx0XHRcdHZub2RlLmF0dHJzLmRpc2FibGVkID8gbShcIi5tbHJcIiwgYCgke2xhbmcuZ2V0KFwibm90aWZpY2F0aW9uc0Rpc2FibGVkX2xhYmVsXCIpfSlgKSA6IG51bGwsXG5cdFx0XHRcdG0oXCIuZmxleC1ncm93XCIpLFxuXHRcdFx0XHRtKEljb25CdXR0b24sIGRyb3Bkb3duQXR0cnMpLFxuXHRcdFx0XSksXG5cdFx0XHR0aGlzLnJlbmRlcklkZW50aWZpZXIodm5vZGUuYXR0cnMpLFxuXHRcdF0pXG5cdH1cblxuXHRwcml2YXRlIHJlbmRlcklkZW50aWZpZXIoeyBpZGVudGlmaWVyLCBmb3JtYXRJZGVudGlmaWVyIH06IElkZW50aWZpZXJSb3dBdHRycyk6IENoaWxkcmVuIHtcblx0XHRjb25zdCBpZGVudGlmaWVyVGV4dCA9IGZvcm1hdElkZW50aWZpZXJcblx0XHRcdD8gbmV2ZXJOdWxsKGlkZW50aWZpZXIubWF0Y2goLy57Mn0vZykpLm1hcCgoZWwsIGkpID0+IG0oXCJzcGFuLnByLXNcIiArIChpICUgMiA9PT0gMCA/IFwiLmJcIiA6IFwiXCIpLCBlbCkpXG5cdFx0XHQ6IGlkZW50aWZpZXJcblx0XHRyZXR1cm4gbShcIi50ZXh0LWJyZWFrLnNtYWxsLm1vbm9zcGFjZS5tdC1uZWdhdGl2ZS1ocGFkLWJ1dHRvbi5zZWxlY3RhYmxlXCIsIGlkZW50aWZpZXJUZXh0KVxuXHR9XG59XG4iLCJpbXBvcnQgbSwgeyBDaGlsZHJlbiB9IGZyb20gXCJtaXRocmlsXCJcbmltcG9ydCB7IEVudGl0eVVwZGF0ZURhdGEsIGlzVXBkYXRlRm9yVHlwZVJlZiB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL2NvbW1vbi91dGlscy9FbnRpdHlVcGRhdGVVdGlscy5qc1wiXG5pbXBvcnQgeyBFeHRlbmRlZE5vdGlmaWNhdGlvbk1vZGUgfSBmcm9tIFwiLi4vLi4vY29tbW9uL25hdGl2ZS9jb21tb24vZ2VuZXJhdGVkaXBjL0V4dGVuZGVkTm90aWZpY2F0aW9uTW9kZS5qc1wiXG5pbXBvcnQgU3RyZWFtIGZyb20gXCJtaXRocmlsL3N0cmVhbVwiXG5pbXBvcnQgc3RyZWFtIGZyb20gXCJtaXRocmlsL3N0cmVhbVwiXG5pbXBvcnQgeyBQdXNoSWRlbnRpZmllciwgUHVzaElkZW50aWZpZXJUeXBlUmVmLCBVc2VyIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9hcGkvZW50aXRpZXMvc3lzL1R5cGVSZWZzLmpzXCJcbmltcG9ydCB7IGxvY2F0b3IgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2FwaS9tYWluL0NvbW1vbkxvY2F0b3IuanNcIlxuaW1wb3J0IHsgbGFuZyB9IGZyb20gXCIuLi8uLi9jb21tb24vbWlzYy9MYW5ndWFnZVZpZXdNb2RlbC5qc1wiXG5pbXBvcnQgeyBJY29uQnV0dG9uIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvYmFzZS9JY29uQnV0dG9uLmpzXCJcbmltcG9ydCB7IEljb25zIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvYmFzZS9pY29ucy9JY29ucy5qc1wiXG5pbXBvcnQgeyBCdXR0b25TaXplIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvYmFzZS9CdXR0b25TaXplLmpzXCJcbmltcG9ydCB7IGlzQXBwLCBpc0Jyb3dzZXIsIGlzRGVza3RvcCB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL2NvbW1vbi9FbnYuanNcIlxuaW1wb3J0IHsgbm9PcCwgb2ZDbGFzcyB9IGZyb20gXCJAdHV0YW8vdHV0YW5vdGEtdXRpbHNcIlxuaW1wb3J0IHsgUHVzaFNlcnZpY2VUeXBlIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9hcGkvY29tbW9uL1R1dGFub3RhQ29uc3RhbnRzLmpzXCJcbmltcG9ydCB7IG1haWxMb2NhdG9yIH0gZnJvbSBcIi4uL21haWxMb2NhdG9yLmpzXCJcbmltcG9ydCB7IFVwZGF0YWJsZVNldHRpbmdzVmlld2VyIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9zZXR0aW5ncy9JbnRlcmZhY2VzLmpzXCJcbmltcG9ydCB7IE5vdGlmaWNhdGlvbkNvbnRlbnRTZWxlY3RvciB9IGZyb20gXCIuL05vdGlmaWNhdGlvbkNvbnRlbnRTZWxlY3Rvci5qc1wiXG5pbXBvcnQgeyBOb3RpZmljYXRpb25UYXJnZXRzTGlzdCwgTm90aWZpY2F0aW9uVGFyZ2V0c0xpc3RBdHRycyB9IGZyb20gXCIuLi8uLi9jb21tb24vc2V0dGluZ3MvTm90aWZpY2F0aW9uVGFyZ2V0c0xpc3QuanNcIlxuaW1wb3J0IHsgQXBwVHlwZSB9IGZyb20gXCIuLi8uLi9jb21tb24vbWlzYy9DbGllbnRDb25zdGFudHMuanNcIlxuaW1wb3J0IHsgTm90Rm91bmRFcnJvciB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL2NvbW1vbi9lcnJvci9SZXN0RXJyb3IuanNcIlxuaW1wb3J0IHsgSWRlbnRpZmllclJvdyB9IGZyb20gXCIuLi8uLi9jb21tb24vc2V0dGluZ3MvSWRlbnRpZmllclJvdy5qc1wiXG5pbXBvcnQgeyBEcm9wRG93blNlbGVjdG9yLCB0eXBlIERyb3BEb3duU2VsZWN0b3JBdHRycyB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL2Jhc2UvRHJvcERvd25TZWxlY3Rvci5qc1wiXG5pbXBvcnQgeyBQZXJtaXNzaW9uVHlwZSB9IGZyb20gXCIuLi8uLi9jb21tb24vbmF0aXZlL2NvbW1vbi9nZW5lcmF0ZWRpcGMvUGVybWlzc2lvblR5cGUuanNcIlxuXG5leHBvcnQgY2xhc3MgTm90aWZpY2F0aW9uU2V0dGluZ3NWaWV3ZXIgaW1wbGVtZW50cyBVcGRhdGFibGVTZXR0aW5nc1ZpZXdlciB7XG5cdHByaXZhdGUgY3VycmVudElkZW50aWZpZXI6IHN0cmluZyB8IG51bGwgPSBudWxsXG5cdHByaXZhdGUgZXh0ZW5kZWROb3RpZmljYXRpb25Nb2RlOiBFeHRlbmRlZE5vdGlmaWNhdGlvbk1vZGUgfCBudWxsID0gbnVsbFxuXHRwcml2YXRlIHJlYWRvbmx5IGV4cGFuZGVkOiBTdHJlYW08Ym9vbGVhbj5cblx0cHJpdmF0ZSByZWFkb25seSB1c2VyOiBVc2VyXG5cdHByaXZhdGUgaWRlbnRpZmllcnM6IFB1c2hJZGVudGlmaWVyW11cblx0cHJpdmF0ZSBoYXNOb3RpZmljYXRpb25QZXJtaXNzaW9uOiBib29sZWFuID0gdHJ1ZVxuXHRwcml2YXRlIHJlY2VpdmVDYWxlbmRhck5vdGlmaWNhdGlvbnM6IGJvb2xlYW4gPSB0cnVlXG5cblx0Y29uc3RydWN0b3IoKSB7XG5cdFx0dGhpcy5leHBhbmRlZCA9IHN0cmVhbTxib29sZWFuPihmYWxzZSlcblx0XHR0aGlzLmlkZW50aWZpZXJzID0gW11cblx0XHR0aGlzLnVzZXIgPSBsb2NhdG9yLmxvZ2lucy5nZXRVc2VyQ29udHJvbGxlcigpLnVzZXJcblxuXHRcdHRoaXMubG9hZFB1c2hJZGVudGlmaWVycygpXG5cblx0XHRpZiAoaXNBcHAoKSB8fCBpc0Rlc2t0b3AoKSkge1xuXHRcdFx0Y29uc3QgcHJvbWlzZXM6IFByb21pc2U8YW55PltdID0gW2xvY2F0b3IucHVzaFNlcnZpY2UuZ2V0RXh0ZW5kZWROb3RpZmljYXRpb25Nb2RlKCldXG5cblx0XHRcdGlmIChpc0FwcCgpKSB7XG5cdFx0XHRcdHByb21pc2VzLnB1c2goXG5cdFx0XHRcdFx0bG9jYXRvci5zeXN0ZW1QZXJtaXNzaW9uSGFuZGxlci5oYXNQZXJtaXNzaW9uKFBlcm1pc3Npb25UeXBlLk5vdGlmaWNhdGlvbiksXG5cdFx0XHRcdFx0bG9jYXRvci5wdXNoU2VydmljZS5nZXRSZWNlaXZlQ2FsZW5kYXJOb3RpZmljYXRpb25Db25maWcoKSxcblx0XHRcdFx0KVxuXHRcdFx0fVxuXHRcdFx0UHJvbWlzZS5hbGwocHJvbWlzZXMpLnRoZW4oKFtleHRlbmRlZE5vdGlmaWNhdGlvbk1vZGUsIGhhc1Blcm1pc3Npb24sIGNhblJlY2VpdmVDYWxlbmRhck5vdGlmaWNhdGlvbnNdKSA9PiB7XG5cdFx0XHRcdHRoaXMuZXh0ZW5kZWROb3RpZmljYXRpb25Nb2RlID0gZXh0ZW5kZWROb3RpZmljYXRpb25Nb2RlXG5cdFx0XHRcdGlmIChpc0FwcCgpKSB7XG5cdFx0XHRcdFx0aWYgKHRoaXMuaGFzTm90aWZpY2F0aW9uUGVybWlzc2lvbiAhPT0gaGFzUGVybWlzc2lvbikgdGhpcy5oYXNOb3RpZmljYXRpb25QZXJtaXNzaW9uID0gaGFzUGVybWlzc2lvblxuXHRcdFx0XHRcdGlmICh0aGlzLnJlY2VpdmVDYWxlbmRhck5vdGlmaWNhdGlvbnMgIT09IGNhblJlY2VpdmVDYWxlbmRhck5vdGlmaWNhdGlvbnMpXG5cdFx0XHRcdFx0XHR0aGlzLnJlY2VpdmVDYWxlbmRhck5vdGlmaWNhdGlvbnMgPSBjYW5SZWNlaXZlQ2FsZW5kYXJOb3RpZmljYXRpb25zXG5cdFx0XHRcdH1cblx0XHRcdFx0bS5yZWRyYXcoKVxuXHRcdFx0fSlcblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIHRvZ2dsZVB1c2hJZGVudGlmaWVyKGlkZW50aWZpZXI6IFB1c2hJZGVudGlmaWVyKSB7XG5cdFx0aWRlbnRpZmllci5kaXNhYmxlZCA9ICFpZGVudGlmaWVyLmRpc2FibGVkXG5cdFx0bG9jYXRvci5lbnRpdHlDbGllbnQudXBkYXRlKGlkZW50aWZpZXIpLnRoZW4oKCkgPT4gbS5yZWRyYXcpXG5cblx0XHRpZiAoIWlzQnJvd3NlcigpICYmIGlkZW50aWZpZXIuaWRlbnRpZmllciA9PT0gdGhpcy5jdXJyZW50SWRlbnRpZmllcikge1xuXHRcdFx0aWYgKGlkZW50aWZpZXIuZGlzYWJsZWQpIHtcblx0XHRcdFx0bG9jYXRvci5wdXNoU2VydmljZS5pbnZhbGlkYXRlQWxhcm1zRm9yVXNlcih0aGlzLnVzZXIuX2lkKVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0bG9jYXRvci5wdXNoU2VydmljZS5yZVJlZ2lzdGVyKClcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHR2aWV3KCk6IENoaWxkcmVuIHtcblx0XHRjb25zdCByb3dBZGQgPSBtKFwiLmZ1bGwtd2lkdGguZmxleC1zcGFjZS1iZXR3ZWVuLml0ZW1zLWNlbnRlci5tYi1zXCIsIFtcblx0XHRcdGxhbmcuZ2V0KFwiZW1haWxQdXNoTm90aWZpY2F0aW9uX2FjdGlvblwiKSxcblx0XHRcdG0oSWNvbkJ1dHRvbiwge1xuXHRcdFx0XHR0aXRsZTogXCJlbWFpbFB1c2hOb3RpZmljYXRpb25fYWN0aW9uXCIsXG5cdFx0XHRcdGNsaWNrOiAoKSA9PiB0aGlzLnNob3dBZGRFbWFpbE5vdGlmaWNhdGlvbkRpYWxvZygpLFxuXHRcdFx0XHRpY29uOiBJY29ucy5BZGQsXG5cdFx0XHRcdHNpemU6IEJ1dHRvblNpemUuQ29tcGFjdCxcblx0XHRcdH0pLFxuXHRcdF0pXG5cblx0XHRjb25zdCByb3dzID0gdGhpcy5pZGVudGlmaWVyc1xuXHRcdFx0Lm1hcCgoaWRlbnRpZmllcikgPT4ge1xuXHRcdFx0XHRjb25zdCBpc0N1cnJlbnREZXZpY2UgPSAoaXNBcHAoKSB8fCBpc0Rlc2t0b3AoKSkgJiYgaWRlbnRpZmllci5pZGVudGlmaWVyID09PSB0aGlzLmN1cnJlbnRJZGVudGlmaWVyXG5cblx0XHRcdFx0cmV0dXJuIG0oSWRlbnRpZmllclJvdywge1xuXHRcdFx0XHRcdG5hbWU6IHRoaXMuaWRlbnRpZmllckRpc3BsYXlOYW1lKGlzQ3VycmVudERldmljZSwgaWRlbnRpZmllci5wdXNoU2VydmljZVR5cGUsIGlkZW50aWZpZXIuZGlzcGxheU5hbWUpLFxuXHRcdFx0XHRcdGRpc2FibGVkOiBpZGVudGlmaWVyLmRpc2FibGVkLFxuXHRcdFx0XHRcdGlkZW50aWZpZXI6IGlkZW50aWZpZXIuaWRlbnRpZmllcixcblx0XHRcdFx0XHRjdXJyZW50OiBpc0N1cnJlbnREZXZpY2UsXG5cdFx0XHRcdFx0cmVtb3ZlQ2xpY2tlZDogKCkgPT4ge1xuXHRcdFx0XHRcdFx0bG9jYXRvci5lbnRpdHlDbGllbnQuZXJhc2UoaWRlbnRpZmllcikuY2F0Y2gob2ZDbGFzcyhOb3RGb3VuZEVycm9yLCBub09wKSlcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdGZvcm1hdElkZW50aWZpZXI6IGlkZW50aWZpZXIucHVzaFNlcnZpY2VUeXBlICE9PSBQdXNoU2VydmljZVR5cGUuRU1BSUwsXG5cdFx0XHRcdFx0ZGlzYWJsZUNsaWNrZWQ6ICgpID0+IHRoaXMudG9nZ2xlUHVzaElkZW50aWZpZXIoaWRlbnRpZmllciksXG5cdFx0XHRcdH0pXG5cdFx0XHR9KVxuXHRcdFx0LnNvcnQoKGwsIHIpID0+ICtyLmF0dHJzLmN1cnJlbnQgLSArbC5hdHRycy5jdXJyZW50KVxuXG5cdFx0cmV0dXJuIG0oXCIuZmlsbC1hYnNvbHV0ZS5zY3JvbGwucGxyLWwucGIteGxcIiwgW1xuXHRcdFx0bShcIi5mbGV4LmNvbFwiLCBbXG5cdFx0XHRcdG0oXCIuZmxleC1zcGFjZS1iZXR3ZWVuLml0ZW1zLWNlbnRlci5tdC1sLm1iLXNcIiwgW20oXCIuaDRcIiwgbGFuZy5nZXQoXCJub3RpZmljYXRpb25TZXR0aW5nc19hY3Rpb25cIikpXSksXG5cdFx0XHRcdHRoaXMuZXh0ZW5kZWROb3RpZmljYXRpb25Nb2RlXG5cdFx0XHRcdFx0PyBtKE5vdGlmaWNhdGlvbkNvbnRlbnRTZWxlY3Rvciwge1xuXHRcdFx0XHRcdFx0XHRleHRlbmRlZE5vdGlmaWNhdGlvbk1vZGU6IHRoaXMuZXh0ZW5kZWROb3RpZmljYXRpb25Nb2RlLFxuXHRcdFx0XHRcdFx0XHRvbkNoYW5nZTogKHZhbHVlOiBFeHRlbmRlZE5vdGlmaWNhdGlvbk1vZGUpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRsb2NhdG9yLnB1c2hTZXJ2aWNlLnNldEV4dGVuZGVkTm90aWZpY2F0aW9uTW9kZSh2YWx1ZSlcblx0XHRcdFx0XHRcdFx0XHR0aGlzLmV4dGVuZGVkTm90aWZpY2F0aW9uTW9kZSA9IHZhbHVlXG5cdFx0XHRcdFx0XHRcdFx0Ly8gV2UgY2FuIGFzc3VtZSBcInRydWVcIiBiZWNhdXNlIG9uQ2hhbmdlIGlzIG9ubHkgdHJpZ2dlcmVkIGlmIHBlcm1pc3Npb24gd2FzIGdyYW50ZWRcblx0XHRcdFx0XHRcdFx0XHR0aGlzLmhhc05vdGlmaWNhdGlvblBlcm1pc3Npb24gPSB0cnVlXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0ICB9KVxuXHRcdFx0XHRcdDogbnVsbCxcblx0XHRcdFx0aXNBcHAoKSA/IHRoaXMucmVuZGVyQ2FsZW5kYXJOb3RpZmljYXRpb25zRHJvcGRvd24oKSA6IG51bGwsXG5cdFx0XHRcdG0oTm90aWZpY2F0aW9uVGFyZ2V0c0xpc3QsIHsgcm93cywgcm93QWRkLCBvbkV4cGFuZGVkQ2hhbmdlOiB0aGlzLmV4cGFuZGVkIH0gc2F0aXNmaWVzIE5vdGlmaWNhdGlvblRhcmdldHNMaXN0QXR0cnMpLFxuXHRcdFx0XSksXG5cdFx0XSlcblx0fVxuXG5cdHByaXZhdGUgcmVuZGVyQ2FsZW5kYXJOb3RpZmljYXRpb25zRHJvcGRvd24oKTogQ2hpbGRyZW4ge1xuXHRcdHJldHVybiBtKERyb3BEb3duU2VsZWN0b3IsIHtcblx0XHRcdGxhYmVsOiBcInJlY2VpdmVDYWxlbmRhck5vdGlmaWNhdGlvbnNfbGFiZWxcIixcblx0XHRcdGl0ZW1zOiBbXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRuYW1lOiBsYW5nLmdldChcImFjdGl2YXRlZF9sYWJlbFwiKSxcblx0XHRcdFx0XHR2YWx1ZTogdHJ1ZSxcblx0XHRcdFx0fSxcblx0XHRcdFx0e1xuXHRcdFx0XHRcdG5hbWU6IGxhbmcuZ2V0KFwiZGVhY3RpdmF0ZWRfbGFiZWxcIiksXG5cdFx0XHRcdFx0dmFsdWU6IGZhbHNlLFxuXHRcdFx0XHR9LFxuXHRcdFx0XSxcblx0XHRcdHNlbGVjdGVkVmFsdWU6IHRoaXMucmVjZWl2ZUNhbGVuZGFyTm90aWZpY2F0aW9ucyxcblx0XHRcdHNlbGVjdGlvbkNoYW5nZWRIYW5kbGVyOiBhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0aWYgKHRoaXMucmVjZWl2ZUNhbGVuZGFyTm90aWZpY2F0aW9ucyAhPT0gdmFsdWUpIHtcblx0XHRcdFx0XHRsb2NhdG9yLnB1c2hTZXJ2aWNlLnNldFJlY2VpdmVDYWxlbmRhck5vdGlmaWNhdGlvbkNvbmZpZyh2YWx1ZSlcblx0XHRcdFx0XHR0aGlzLnJlY2VpdmVDYWxlbmRhck5vdGlmaWNhdGlvbnMgPSB2YWx1ZVxuXHRcdFx0XHRcdGlmICh2YWx1ZSkge1xuXHRcdFx0XHRcdFx0YXdhaXQgbG9jYXRvci5wdXNoU2VydmljZS5yZVJlZ2lzdGVyKClcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0YXdhaXQgbG9jYXRvci5wdXNoU2VydmljZS5pbnZhbGlkYXRlQWxhcm1zRm9yVXNlcih0aGlzLnVzZXIuX2lkKVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHRcdGRpc2FibGVkOiAhdGhpcy5oYXNOb3RpZmljYXRpb25QZXJtaXNzaW9uLFxuXHRcdFx0c2VsZWN0ZWRWYWx1ZURpc3BsYXk6ICF0aGlzLmhhc05vdGlmaWNhdGlvblBlcm1pc3Npb24gPyBsYW5nLmdldChcImRlYWN0aXZhdGVkX2xhYmVsXCIpIDogdW5kZWZpbmVkLFxuXHRcdH0gc2F0aXNmaWVzIERyb3BEb3duU2VsZWN0b3JBdHRyczxib29sZWFuPilcblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgc2hvd0FkZEVtYWlsTm90aWZpY2F0aW9uRGlhbG9nKCkge1xuXHRcdGNvbnN0IGRpYWxvZyA9IGF3YWl0IG1haWxMb2NhdG9yLmFkZE5vdGlmaWNhdGlvbkVtYWlsRGlhbG9nKClcblx0XHRkaWFsb2cuc2hvdygpXG5cdH1cblxuXHRwcml2YXRlIGlkZW50aWZpZXJEaXNwbGF5TmFtZShjdXJyZW50OiBib29sZWFuLCB0eXBlOiBOdW1iZXJTdHJpbmcsIGRpc3BsYXlOYW1lOiBzdHJpbmcpOiBzdHJpbmcge1xuXHRcdGlmIChjdXJyZW50KSB7XG5cdFx0XHRyZXR1cm4gbGFuZy5nZXQoXCJwdXNoSWRlbnRpZmllckN1cnJlbnREZXZpY2VfbGFiZWxcIilcblx0XHR9IGVsc2UgaWYgKGRpc3BsYXlOYW1lKSB7XG5cdFx0XHRyZXR1cm4gZGlzcGxheU5hbWVcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmV0dXJuIFtcIkFuZHJvaWQgRkNNXCIsIFwiaU9TXCIsIGxhbmcuZ2V0KFwiYWRtaW5FbWFpbFNldHRpbmdzX2FjdGlvblwiKSwgXCJBbmRyb2lkIFR1dGFub3RhXCJdW051bWJlcih0eXBlKV1cblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIGxvYWRQdXNoSWRlbnRpZmllcnMoKSB7XG5cdFx0dGhpcy5jdXJyZW50SWRlbnRpZmllciA9IHRoaXMuZ2V0Q3VycmVudElkZW50aWZpZXIoKVxuXHRcdGNvbnN0IGxpc3QgPSB0aGlzLnVzZXIucHVzaElkZW50aWZpZXJMaXN0XG5cblx0XHRpZiAobGlzdCkge1xuXHRcdFx0dGhpcy5pZGVudGlmaWVycyA9IChhd2FpdCBsb2NhdG9yLmVudGl0eUNsaWVudC5sb2FkQWxsKFB1c2hJZGVudGlmaWVyVHlwZVJlZiwgbGlzdC5saXN0KSkuZmlsdGVyKFxuXHRcdFx0XHQoaWRlbnRpZmllcikgPT4gaWRlbnRpZmllci5hcHAgPT09IEFwcFR5cGUuTWFpbCB8fCBpZGVudGlmaWVyLmFwcCA9PT0gQXBwVHlwZS5JbnRlZ3JhdGVkLFxuXHRcdFx0KSAvLyBGaWx0ZXIgb3V0IGNhbGVuZGFyIHRhcmdldHNcblxuXHRcdFx0bS5yZWRyYXcoKVxuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgZ2V0Q3VycmVudElkZW50aWZpZXIoKTogc3RyaW5nIHwgbnVsbCB7XG5cdFx0aWYgKGlzQXBwKCkgfHwgaXNEZXNrdG9wKCkpIHtcblx0XHRcdGNvbnN0IGlkZW50aWZpZXIgPSBtYWlsTG9jYXRvci5wdXNoU2VydmljZS5nZXRMb2FkZWRQdXNoSWRlbnRpZmllcigpPy5pZGVudGlmaWVyXG5cdFx0XHRyZXR1cm4gaWRlbnRpZmllciA/IGlkZW50aWZpZXIgOiBudWxsXG5cdFx0fVxuXG5cdFx0cmV0dXJuIG51bGxcblx0fVxuXG5cdGFzeW5jIGVudGl0eUV2ZW50c1JlY2VpdmVkKHVwZGF0ZXM6IHJlYWRvbmx5IEVudGl0eVVwZGF0ZURhdGFbXSk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGZvciAobGV0IHVwZGF0ZSBvZiB1cGRhdGVzKSB7XG5cdFx0XHRpZiAoaXNVcGRhdGVGb3JUeXBlUmVmKFB1c2hJZGVudGlmaWVyVHlwZVJlZiwgdXBkYXRlKSkge1xuXHRcdFx0XHRhd2FpdCB0aGlzLmxvYWRQdXNoSWRlbnRpZmllcnMoKVxuXHRcdFx0fVxuXHRcdH1cblx0fVxufVxuIiwiaW1wb3J0IG0gZnJvbSBcIm1pdGhyaWxcIlxuaW1wb3J0IE1pdGhyaWwsIHsgQ2hpbGRyZW4gfSBmcm9tIFwibWl0aHJpbFwiXG5pbXBvcnQgeyBVcGRhdGFibGVTZXR0aW5nc1ZpZXdlciB9IGZyb20gXCIuL0ludGVyZmFjZXMuanNcIlxuaW1wb3J0IHsgRW50aXR5VXBkYXRlRGF0YSB9IGZyb20gXCIuLi9hcGkvY29tbW9uL3V0aWxzL0VudGl0eVVwZGF0ZVV0aWxzLmpzXCJcbmltcG9ydCB7IEljb25CdXR0b24gfSBmcm9tIFwiLi4vZ3VpL2Jhc2UvSWNvbkJ1dHRvbi5qc1wiXG5pbXBvcnQgeyBJY29ucyB9IGZyb20gXCIuLi9ndWkvYmFzZS9pY29ucy9JY29ucy5qc1wiXG5pbXBvcnQgeyBCdXR0b25TaXplIH0gZnJvbSBcIi4uL2d1aS9iYXNlL0J1dHRvblNpemUuanNcIlxuaW1wb3J0IHsgVGV4dEZpZWxkIH0gZnJvbSBcIi4uL2d1aS9iYXNlL1RleHRGaWVsZC5qc1wiXG5pbXBvcnQgeyBmb3JtYXRQcmljZSB9IGZyb20gXCIuLi9zdWJzY3JpcHRpb24vUHJpY2VVdGlscy5qc1wiXG5pbXBvcnQgeyBCdXR0b24sIEJ1dHRvblR5cGUgfSBmcm9tIFwiLi4vZ3VpL2Jhc2UvQnV0dG9uLmpzXCJcbmltcG9ydCB7IExpc3RDb2x1bW5XcmFwcGVyIH0gZnJvbSBcIi4uL2d1aS9MaXN0Q29sdW1uV3JhcHBlci5qc1wiXG5pbXBvcnQgeyBsYW5nIH0gZnJvbSBcIi4uL21pc2MvTGFuZ3VhZ2VWaWV3TW9kZWwuanNcIlxuaW1wb3J0IHsgbG9jYXRvciB9IGZyb20gXCIuLi9hcGkvbWFpbi9Db21tb25Mb2NhdG9yXCJcbmltcG9ydCB7IGNvcHlUb0NsaXBib2FyZCB9IGZyb20gXCIuLi9taXNjL0NsaXBib2FyZFV0aWxzLmpzXCJcbmltcG9ydCB7IG1haWxMb2NhdG9yIH0gZnJvbSBcIi4uLy4uL21haWwtYXBwL21haWxMb2NhdG9yLmpzXCJcbmltcG9ydCB7IHNob3dTbmFja0JhciB9IGZyb20gXCIuLi9ndWkvYmFzZS9TbmFja0Jhci5qc1wiXG5pbXBvcnQgeyBMYXp5TG9hZGVkIH0gZnJvbSBcIkB0dXRhby90dXRhbm90YS11dGlsc1wiXG5pbXBvcnQgeyBBZmZpbGlhdGVWaWV3TW9kZWwgfSBmcm9tIFwiLi9BZmZpbGlhdGVWaWV3TW9kZWwuanNcIlxuXG4vKipcbiAqIFNlY3Rpb24gaW4gdXNlciBzZXR0aW5ncyB0byBkaXNwbGF5IHRoZSByZWZlcnJhbCBsaW5rIGFuZCBsZXQgdXNlcnMgc2hhcmUgaXQuXG4gKi9cbmV4cG9ydCBjbGFzcyBBZmZpbGlhdGVTZXR0aW5nc1ZpZXdlciBpbXBsZW1lbnRzIFVwZGF0YWJsZVNldHRpbmdzVmlld2VyIHtcblx0cHJpdmF0ZSByZWFkb25seSBhZmZpbGlhdGVWaWV3TW9kZWwgPSBuZXcgTGF6eUxvYWRlZDxBZmZpbGlhdGVWaWV3TW9kZWw+KGFzeW5jICgpID0+IGF3YWl0IG1haWxMb2NhdG9yLmFmZmlsaWF0ZVZpZXdNb2RlbCgpKVxuXHRwcml2YXRlIHJlYWRvbmx5IGRvbWFpbkNvbmZpZyA9IGxvY2F0b3IuZG9tYWluQ29uZmlnUHJvdmlkZXIoKS5nZXRDdXJyZW50RG9tYWluQ29uZmlnKClcblxuXHRjb25zdHJ1Y3Rvcihwcml2YXRlIHJlYWRvbmx5IGdldElzU2hvd2luZ0twaXM6ICgpID0+IGJvb2xlYW4sIHByaXZhdGUgcmVhZG9ubHkgdG9nZ2xlS3BpQ29sdW1uOiAoKSA9PiB1bmtub3duKSB7fVxuXG5cdG9uaW5pdCgpOiBhbnkge1xuXHRcdHRoaXMuYWZmaWxpYXRlVmlld01vZGVsLmdldEFzeW5jKCkudGhlbigoYXZtKSA9PiBhdm0ubG9hZCgpLmZpbmFsbHkobS5yZWRyYXcpKVxuXHR9XG5cblx0dmlldygpOiBDaGlsZHJlbiB7XG5cdFx0aWYgKHRoaXMuYWZmaWxpYXRlVmlld01vZGVsLmlzTG9hZGVkKCkpIHtcblx0XHRcdGNvbnN0IGF2bSA9IHRoaXMuYWZmaWxpYXRlVmlld01vZGVsLmdldFN5bmMoKSBhcyBBZmZpbGlhdGVWaWV3TW9kZWxcblx0XHRcdGlmIChhdm0uaXNMb2FkaW5nKSB7XG5cdFx0XHRcdHJldHVybiBtKExpc3RDb2x1bW5XcmFwcGVyLCBtKFwicFwiLCBcIkxvYWRpbmcuLi5cIikpXG5cdFx0XHR9XG5cblx0XHRcdGlmIChhdm0uZGF0YSA9PT0gbnVsbCkge1xuXHRcdFx0XHRyZXR1cm4gbShMaXN0Q29sdW1uV3JhcHBlciwgbShcInBcIiwgXCJFcnJvclwiKSlcblx0XHRcdH1cblxuXHRcdFx0Y29uc3Qgc2hhcmVVcmwgPSBgJHt0aGlzLmRvbWFpbkNvbmZpZy53ZWJzaXRlQmFzZVVybH0/dC1zcmM9JHthdm0uZGF0YS5wcm9tb3Rpb25JZH1gXG5cblx0XHRcdHJldHVybiBtKFxuXHRcdFx0XHRMaXN0Q29sdW1uV3JhcHBlcixcblx0XHRcdFx0bShcblx0XHRcdFx0XHRcInNlY3Rpb24uZmlsbC1hYnNvbHV0ZS5zY3JvbGwucGxyLWxcIixcblx0XHRcdFx0XHRtKFwiaDQubXQtbFwiLCBsYW5nLmdldChcImFmZmlsaWF0ZVNldHRpbmdzX2xhYmVsXCIpKSxcblx0XHRcdFx0XHRtKFRleHRGaWVsZCwge1xuXHRcdFx0XHRcdFx0aXNSZWFkT25seTogdHJ1ZSxcblx0XHRcdFx0XHRcdGxhYmVsOiBcInJlZmVycmFsTGlua19sYWJlbFwiLFxuXHRcdFx0XHRcdFx0dmFsdWU6IHNoYXJlVXJsLFxuXHRcdFx0XHRcdFx0aW5qZWN0aW9uc1JpZ2h0OiAoKSA9PlxuXHRcdFx0XHRcdFx0XHRtKEljb25CdXR0b24sIHtcblx0XHRcdFx0XHRcdFx0XHR0aXRsZTogXCJjb3B5X2FjdGlvblwiLFxuXHRcdFx0XHRcdFx0XHRcdGNsaWNrOiAoKSA9PiB0aGlzLm9uQ29weUJ1dHRvbkNsaWNrKHNoYXJlVXJsKSxcblx0XHRcdFx0XHRcdFx0XHRpY29uOiBJY29ucy5Db3B5LFxuXHRcdFx0XHRcdFx0XHRcdHNpemU6IEJ1dHRvblNpemUuQ29tcGFjdCxcblx0XHRcdFx0XHRcdFx0fSksXG5cdFx0XHRcdFx0fSksXG5cdFx0XHRcdFx0bShUZXh0RmllbGQsIHtcblx0XHRcdFx0XHRcdGlzUmVhZE9ubHk6IHRydWUsXG5cdFx0XHRcdFx0XHRsYWJlbDogXCJhZmZpbGlhdGVTZXR0aW5nc0FjY3VtdWxhdGVkX2xhYmVsXCIsXG5cdFx0XHRcdFx0XHRoZWxwTGFiZWw6ICgpID0+IGxhbmcuZ2V0KFwiYWZmaWxpYXRlU2V0dGluZ3NBY2N1bXVsYXRlZF9tc2dcIiksXG5cdFx0XHRcdFx0XHR2YWx1ZTogZm9ybWF0UHJpY2UoTnVtYmVyKGF2bSEuZGF0YSEuYWNjdW11bGF0ZWRDb21taXNzaW9uKSwgdHJ1ZSksXG5cdFx0XHRcdFx0fSksXG5cdFx0XHRcdFx0bShUZXh0RmllbGQsIHtcblx0XHRcdFx0XHRcdGlzUmVhZE9ubHk6IHRydWUsXG5cdFx0XHRcdFx0XHRsYWJlbDogXCJhZmZpbGlhdGVTZXR0aW5nc0NyZWRpdGVkX2xhYmVsXCIsXG5cdFx0XHRcdFx0XHRoZWxwTGFiZWw6ICgpID0+IGxhbmcuZ2V0KFwiYWZmaWxpYXRlU2V0dGluZ3NDcmVkaXRlZF9tc2dcIiksXG5cdFx0XHRcdFx0XHR2YWx1ZTogZm9ybWF0UHJpY2UoTnVtYmVyKGF2bSEuZGF0YSEuY3JlZGl0ZWRDb21taXNzaW9uKSwgdHJ1ZSksXG5cdFx0XHRcdFx0fSksXG5cdFx0XHRcdFx0bShcblx0XHRcdFx0XHRcdFwiLmZsZXguY2VudGVyLWhvcml6b250YWxseS5tdC1tXCIsXG5cdFx0XHRcdFx0XHRtKEJ1dHRvbiwge1xuXHRcdFx0XHRcdFx0XHRsYWJlbDogdGhpcy5nZXRJc1Nob3dpbmdLcGlzKCkgPyBcImFmZmlsaWF0ZVNldHRpbmdzSGlkZUtwaXNfbGFiZWxcIiA6IFwiYWZmaWxpYXRlU2V0dGluZ3NTaG93S3Bpc19sYWJlbFwiLFxuXHRcdFx0XHRcdFx0XHR0eXBlOiBCdXR0b25UeXBlLlNlY29uZGFyeSxcblx0XHRcdFx0XHRcdFx0Y2xpY2s6ICgpID0+IHRoaXMudG9nZ2xlS3BpQ29sdW1uKCksXG5cdFx0XHRcdFx0XHR9KSxcblx0XHRcdFx0XHQpLFxuXHRcdFx0XHQpLFxuXHRcdFx0KVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZXR1cm4gbShcIlwiKVxuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgb25Db3B5QnV0dG9uQ2xpY2soc2hhcmVVcmw6IHN0cmluZyk6IHZvaWQge1xuXHRcdGNvcHlUb0NsaXBib2FyZChzaGFyZVVybCkudGhlbigoKSA9PiB7XG5cdFx0XHRzaG93U25hY2tCYXIoe1xuXHRcdFx0XHRtZXNzYWdlOiBcImxpbmtDb3BpZWRfbXNnXCIsXG5cdFx0XHRcdGJ1dHRvbjoge1xuXHRcdFx0XHRcdGxhYmVsOiBcImNsb3NlX2FsdFwiLFxuXHRcdFx0XHRcdGNsaWNrOiAoKSA9PiB7fSxcblx0XHRcdFx0fSxcblx0XHRcdH0pXG5cdFx0fSlcblx0fVxuXG5cdGFzeW5jIGVudGl0eUV2ZW50c1JlY2VpdmVkKHVwZGF0ZXM6IFJlYWRvbmx5QXJyYXk8RW50aXR5VXBkYXRlRGF0YT4pOiBQcm9taXNlPHZvaWQ+IHtcblx0XHQvLyBjYW4gYmUgYSBub29wIGJlY2F1c2UgdGhlIHJlZmVycmFsIGNvZGUgd2lsbCBuZXZlciBjaGFuZ2Ugb25jZSBpdCB3YXMgY3JlYXRlZFxuXHRcdC8vIHdlIHRyaWdnZXIgY3JlYXRpb24gaW4gdGhlIGNvbnN0cnVjdG9yIGlmIHRoZXJlIGlzIG5vIGNvZGUgeWV0XG5cdH1cbn1cbiIsImltcG9ydCB7IFVwZGF0YWJsZVNldHRpbmdzRGV0YWlsc1ZpZXdlciB9IGZyb20gXCIuL0ludGVyZmFjZXMuanNcIlxuaW1wb3J0IG0gZnJvbSBcIm1pdGhyaWxcIlxuaW1wb3J0IHsgRW50aXR5VXBkYXRlRGF0YSB9IGZyb20gXCIuLi9hcGkvY29tbW9uL3V0aWxzL0VudGl0eVVwZGF0ZVV0aWxzLmpzXCJcbmltcG9ydCB7IExpc3RDb2x1bW5XcmFwcGVyIH0gZnJvbSBcIi4uL2d1aS9MaXN0Q29sdW1uV3JhcHBlci5qc1wiXG5pbXBvcnQgeyBDb2x1bW5XaWR0aCwgVGFibGUsIFRhYmxlTGluZUF0dHJzIH0gZnJvbSBcIi4uL2d1aS9iYXNlL1RhYmxlLmpzXCJcbmltcG9ydCB7IG1haWxMb2NhdG9yIH0gZnJvbSBcIi4uLy4uL21haWwtYXBwL21haWxMb2NhdG9yLmpzXCJcbmltcG9ydCB7IGZvcm1hdFNob3J0TW9udGhZZWFyMkRpZ2l0IH0gZnJvbSBcIi4uL21pc2MvRm9ybWF0dGVyLmpzXCJcbmltcG9ydCB7IEFmZmlsaWF0ZVZpZXdNb2RlbCB9IGZyb20gXCIuL0FmZmlsaWF0ZVZpZXdNb2RlbC5qc1wiXG5pbXBvcnQgeyBmb3JtYXRQcmljZSB9IGZyb20gXCIuLi9zdWJzY3JpcHRpb24vUHJpY2VVdGlscy5qc1wiXG5pbXBvcnQgeyBsYW5nIH0gZnJvbSBcIi4uL21pc2MvTGFuZ3VhZ2VWaWV3TW9kZWwuanNcIlxuaW1wb3J0IHsgTGF6eUxvYWRlZCB9IGZyb20gXCJAdHV0YW8vdHV0YW5vdGEtdXRpbHNcIlxuaW1wb3J0IHsgRGF0ZVRpbWUgfSBmcm9tIFwibHV4b25cIlxuXG5leHBvcnQgY2xhc3MgQWZmaWxpYXRlS3Bpc1ZpZXdlciBpbXBsZW1lbnRzIFVwZGF0YWJsZVNldHRpbmdzRGV0YWlsc1ZpZXdlciB7XG5cdHByaXZhdGUgcmVhZG9ubHkgYWZmaWxpYXRlVmlld01vZGVsOiBMYXp5TG9hZGVkPEFmZmlsaWF0ZVZpZXdNb2RlbD4gPSBuZXcgTGF6eUxvYWRlZDxBZmZpbGlhdGVWaWV3TW9kZWw+KGFzeW5jICgpID0+IGF3YWl0IG1haWxMb2NhdG9yLmFmZmlsaWF0ZVZpZXdNb2RlbCgpKVxuXG5cdHJlbmRlclZpZXcoKTogbS5DaGlsZHJlbiB7XG5cdFx0cmV0dXJuIG0oXG5cdFx0XHRMaXN0Q29sdW1uV3JhcHBlcixcblx0XHRcdG0oXG5cdFx0XHRcdFwiLmZsZXguZmxleC1jb2x1bW4uZmlsbC1hYnNvbHV0ZS5wbHItbFwiLFxuXHRcdFx0XHRtKFwiaDQubXQtbFwiLCBcIktQSXNcIiksXG5cdFx0XHRcdG0oXG5cdFx0XHRcdFx0XCIub3ZlcmZsb3ctYXV0by5wdC1zXCIsXG5cdFx0XHRcdFx0eyBzdHlsZTogeyBoZWlnaHQ6IFwiMTAwJVwiIH0gfSxcblx0XHRcdFx0XHRtKFxuXHRcdFx0XHRcdFx0XCJcIixcblx0XHRcdFx0XHRcdHsgc3R5bGU6IHsgbWluV2lkdGg6IFwiODAwcHhcIiB9IH0sXG5cdFx0XHRcdFx0XHRtKFRhYmxlLCB7XG5cdFx0XHRcdFx0XHRcdGNvbHVtbkhlYWRpbmc6IFtcblx0XHRcdFx0XHRcdFx0XHR7IGxhYmVsOiBcIm1vbnRoX2xhYmVsXCIgfSxcblx0XHRcdFx0XHRcdFx0XHR7IGxhYmVsOiBcImFmZmlsaWF0ZVNldHRpbmdzTmV3RnJlZV9sYWJlbFwiLCBoZWxwVGV4dDogXCJhZmZpbGlhdGVTZXR0aW5nc05ld0ZyZWVfbXNnXCIgfSxcblx0XHRcdFx0XHRcdFx0XHR7IGxhYmVsOiBcImFmZmlsaWF0ZVNldHRpbmdzTmV3UGFpZF9sYWJlbFwiLCBoZWxwVGV4dDogXCJhZmZpbGlhdGVTZXR0aW5nc05ld1BhaWRfbXNnXCIgfSxcblx0XHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0XHRsYWJlbDogXCJhZmZpbGlhdGVTZXR0aW5nc1RvdGFsRnJlZV9sYWJlbFwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0aGVscFRleHQ6IFwiYWZmaWxpYXRlU2V0dGluZ3NUb3RhbEZyZWVfbXNnXCIsXG5cdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0XHRsYWJlbDogXCJhZmZpbGlhdGVTZXR0aW5nc1RvdGFsUGFpZF9sYWJlbFwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0aGVscFRleHQ6IFwiYWZmaWxpYXRlU2V0dGluZ3NUb3RhbFBhaWRfbXNnXCIsXG5cdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0XHRsYWJlbDogXCJhZmZpbGlhdGVTZXR0aW5nc0NvbW1pc3Npb25fbGFiZWxcIixcblx0XHRcdFx0XHRcdFx0XHRcdGhlbHBUZXh0OiBcImFmZmlsaWF0ZVNldHRpbmdzQ29tbWlzc2lvbl9tc2dcIixcblx0XHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRdLFxuXHRcdFx0XHRcdFx0XHRjb2x1bW5XaWR0aHM6IFtcblx0XHRcdFx0XHRcdFx0XHRDb2x1bW5XaWR0aC5MYXJnZXN0LFxuXHRcdFx0XHRcdFx0XHRcdENvbHVtbldpZHRoLkxhcmdlc3QsXG5cdFx0XHRcdFx0XHRcdFx0Q29sdW1uV2lkdGguTGFyZ2VzdCxcblx0XHRcdFx0XHRcdFx0XHRDb2x1bW5XaWR0aC5MYXJnZXN0LFxuXHRcdFx0XHRcdFx0XHRcdENvbHVtbldpZHRoLkxhcmdlc3QsXG5cdFx0XHRcdFx0XHRcdFx0Q29sdW1uV2lkdGguTGFyZ2VzdCxcblx0XHRcdFx0XHRcdFx0XSxcblx0XHRcdFx0XHRcdFx0c2hvd0FjdGlvbkJ1dHRvbkNvbHVtbjogZmFsc2UsXG5cdFx0XHRcdFx0XHRcdGFkZEJ1dHRvbkF0dHJzOiBudWxsLFxuXHRcdFx0XHRcdFx0XHRsaW5lczogdGhpcy5yZW5kZXJSb3dzKCksXG5cdFx0XHRcdFx0XHR9KSxcblx0XHRcdFx0XHQpLFxuXHRcdFx0XHQpLFxuXHRcdFx0KSxcblx0XHQpXG5cdH1cblxuXHRwcml2YXRlIHJlbmRlclJvd3MoKTogVGFibGVMaW5lQXR0cnNbXSB7XG5cdFx0aWYgKHRoaXMuYWZmaWxpYXRlVmlld01vZGVsLmlzTG9hZGVkKCkpIHtcblx0XHRcdGNvbnN0IGF2bSA9IHRoaXMuYWZmaWxpYXRlVmlld01vZGVsLmdldFN5bmMoKSFcblx0XHRcdHJldHVybiAoYXZtLmRhdGE/LmtwaXMgPz8gW10pXG5cdFx0XHRcdC5zbGljZSgpXG5cdFx0XHRcdC5zb3J0KChhLCBiKSA9PiBOdW1iZXIoYi5tb250aFRpbWVzdGFtcCkgLSBOdW1iZXIoYS5tb250aFRpbWVzdGFtcCkpXG5cdFx0XHRcdC5tYXAoKG1vbnRoKSA9PiB7XG5cdFx0XHRcdFx0Y29uc3QgZGF0ZSA9IERhdGVUaW1lLmZyb21KU0RhdGUobmV3IERhdGUoTnVtYmVyKG1vbnRoLm1vbnRoVGltZXN0YW1wKSkpXG5cdFx0XHRcdFx0XHQubWludXMoeyBkYXk6IDMgfSlcblx0XHRcdFx0XHRcdC50b0pTRGF0ZSgpIC8vIFJlbW92ZSAzIGRheXMgdG8gYXZvaWQgdGltZXpvbmVzIGlzc3VlcyAoanVzdCBpbiBjYXNlKSwgc2luY2UgdGhlIG9yaWdpbmFsIGRhdGUgaXMgdGhlIGVuZCBvZiB0aGUgbW9udGguXG5cblx0XHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdFx0Y2VsbHM6IFtcblx0XHRcdFx0XHRcdFx0Zm9ybWF0U2hvcnRNb250aFllYXIyRGlnaXQoZGF0ZSksXG5cdFx0XHRcdFx0XHRcdG1vbnRoLm5ld0ZyZWUsXG5cdFx0XHRcdFx0XHRcdG1vbnRoLm5ld1BhaWQsXG5cdFx0XHRcdFx0XHRcdG1vbnRoLnRvdGFsRnJlZSxcblx0XHRcdFx0XHRcdFx0bW9udGgudG90YWxQYWlkLFxuXHRcdFx0XHRcdFx0XHRmb3JtYXRQcmljZShOdW1iZXIobW9udGguY29tbWlzc2lvbiksIHRydWUpLFxuXHRcdFx0XHRcdFx0XSxcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pXG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMuYWZmaWxpYXRlVmlld01vZGVsLmdldEFzeW5jKCkudGhlbigoKSA9PiBtLnJlZHJhdygpKVxuXHRcdFx0cmV0dXJuIFtdXG5cdFx0fVxuXHR9XG5cblx0ZW50aXR5RXZlbnRzUmVjZWl2ZWQodXBkYXRlczogcmVhZG9ubHkgRW50aXR5VXBkYXRlRGF0YVtdKTogUHJvbWlzZTx1bmtub3duPiB7XG5cdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpXG5cdH1cbn1cbiIsImltcG9ydCB7IFVwZGF0YWJsZVNldHRpbmdzVmlld2VyIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9zZXR0aW5ncy9JbnRlcmZhY2VzXCJcbmltcG9ydCBtLCB7IENoaWxkcmVuIH0gZnJvbSBcIm1pdGhyaWxcIlxuaW1wb3J0IHsgRW50aXR5VXBkYXRlRGF0YSB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL2NvbW1vbi91dGlscy9FbnRpdHlVcGRhdGVVdGlsc1wiXG5pbXBvcnQgeyBJY29uQnV0dG9uLCBJY29uQnV0dG9uQXR0cnMgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2d1aS9iYXNlL0ljb25CdXR0b25cIlxuaW1wb3J0IHsgQnV0dG9uU2l6ZSB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL2Jhc2UvQnV0dG9uU2l6ZVwiXG5pbXBvcnQgeyBhc3NlcnROb3ROdWxsLCBsYXp5IH0gZnJvbSBcIkB0dXRhby90dXRhbm90YS11dGlsc1wiXG5pbXBvcnQgeyBnZXRGb2xkZXJOYW1lLCBnZXRJbmRlbnRlZEZvbGRlck5hbWVGb3JEcm9wZG93biwgZ2V0UGF0aFRvRm9sZGVyU3RyaW5nIH0gZnJvbSBcIi4uL21haWwvbW9kZWwvTWFpbFV0aWxzXCJcbmltcG9ydCB7IEhpZ2hlc3RUaWVyUGxhbnMsIEltcG9ydFN0YXR1cywgUGxhblR5cGUgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2FwaS9jb21tb24vVHV0YW5vdGFDb25zdGFudHNcIlxuaW1wb3J0IHsgSW5kZW50ZWRGb2xkZXIgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2FwaS9jb21tb24vbWFpbC9Gb2xkZXJTeXN0ZW1cIlxuaW1wb3J0IHsgbGFuZywgVHJhbnNsYXRpb25LZXkgfSBmcm9tIFwiLi4vLi4vY29tbW9uL21pc2MvTGFuZ3VhZ2VWaWV3TW9kZWxcIlxuaW1wb3J0IHsgTWFpbEltcG9ydGVyLCBVaUltcG9ydFN0YXR1cyB9IGZyb20gXCIuLi9tYWlsL2ltcG9ydC9NYWlsSW1wb3J0ZXIuanNcIlxuaW1wb3J0IHsgTWFpbEZvbGRlciB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL2VudGl0aWVzL3R1dGFub3RhL1R5cGVSZWZzXCJcbmltcG9ydCB7IGVsZW1lbnRJZFBhcnQsIGdlbmVyYXRlZElkVG9UaW1lc3RhbXAsIGlzU2FtZUlkLCBzb3J0Q29tcGFyZUJ5UmV2ZXJzZUlkIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9hcGkvY29tbW9uL3V0aWxzL0VudGl0eVV0aWxzXCJcbmltcG9ydCB7IEljb25zIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvYmFzZS9pY29ucy9JY29ucy5qc1wiXG5pbXBvcnQgeyBEcm9wRG93blNlbGVjdG9yLCBTZWxlY3Rvckl0ZW1MaXN0IH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvYmFzZS9Ecm9wRG93blNlbGVjdG9yLmpzXCJcbmltcG9ydCB7IHNob3dOb3RBdmFpbGFibGVGb3JGcmVlRGlhbG9nIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9taXNjL1N1YnNjcmlwdGlvbkRpYWxvZ3MuanNcIlxuaW1wb3J0IHsgUHJvZ3Jlc3NCYXIsIFByb2dyZXNzQmFyVHlwZSB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL2Jhc2UvUHJvZ3Jlc3NCYXIuanNcIlxuaW1wb3J0IHsgRXhwYW5kZXJCdXR0b24sIEV4cGFuZGVyUGFuZWwgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2d1aS9iYXNlL0V4cGFuZGVyLmpzXCJcbmltcG9ydCB7IENvbHVtbldpZHRoLCBUYWJsZSwgVGFibGVMaW5lQXR0cnMgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2d1aS9iYXNlL1RhYmxlLmpzXCJcbmltcG9ydCB7IG1haWxMb2NhdG9yIH0gZnJvbSBcIi4uL21haWxMb2NhdG9yLmpzXCJcbmltcG9ydCB7IGZvcm1hdERhdGUgfSBmcm9tIFwiLi4vLi4vY29tbW9uL21pc2MvRm9ybWF0dGVyLmpzXCJcbmltcG9ydCB7IExvZ2luQnV0dG9uLCBMb2dpbkJ1dHRvblR5cGUgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2d1aS9iYXNlL2J1dHRvbnMvTG9naW5CdXR0b25cIlxuXG4vKipcbiAqIFNldHRpbmdzIHZpZXdlciBmb3IgbWFpbCBpbXBvcnQgcmVuZGVyZWQgb25seSBpbiB0aGUgRGVza3RvcCBjbGllbnQuXG4gKiBTZWUge0BsaW5rIFdlYk1haWxJbXBvcnRTZXR0aW5nc1ZpZXdlcn0gZm9yIG90aGVyIHZpZXdzLlxuICovXG5leHBvcnQgY2xhc3MgRGVza3RvcE1haWxJbXBvcnRTZXR0aW5nc1ZpZXdlciBpbXBsZW1lbnRzIFVwZGF0YWJsZVNldHRpbmdzVmlld2VyIHtcblx0cHJpdmF0ZSBpc0ltcG9ydEhpc3RvcnlFeHBhbmRlZDogYm9vbGVhbiA9IHRydWVcblx0cHJpdmF0ZSBpbXBvcnRTdGF0ZVBvb2xIYW5kbGU6IFRpbWVvdXRJRFxuXG5cdGNvbnN0cnVjdG9yKHByaXZhdGUgcmVhZG9ubHkgbWFpbEltcG9ydGVyOiBsYXp5PE1haWxJbXBvcnRlcj4pIHt9XG5cblx0YXN5bmMgb25pbml0KCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGF3YWl0IHRoaXMubWFpbEltcG9ydGVyKCkuaW5pdEltcG9ydE1haWxTdGF0ZXMoKVxuXHR9XG5cblx0b25iZWZvcmVyZW1vdmUoKTogdm9pZCB7XG5cdFx0Y2xlYXJJbnRlcnZhbCh0aGlzLmltcG9ydFN0YXRlUG9vbEhhbmRsZSlcblx0fVxuXG5cdHZpZXcoKTogQ2hpbGRyZW4ge1xuXHRcdHJldHVybiBtKFwiLmZpbGwtYWJzb2x1dGUuc2Nyb2xsLnBsci1sLnBiLXhsXCIsIFtcblx0XHRcdG0oXCIuaDQubXQtbFwiLCBsYW5nLmdldChcIm1haWxJbXBvcnRTZXR0aW5nc19sYWJlbFwiKSksXG5cdFx0XHR0aGlzLnJlbmRlclRhcmdldEZvbGRlckNvbnRyb2xzKCksXG5cdFx0XHQhdGhpcy5tYWlsSW1wb3J0ZXIoKS5zaG91bGRSZW5kZXJJbXBvcnRTdGF0dXMoKSA/IHRoaXMucmVuZGVyU3RhcnROZXdJbXBvcnRDb250cm9scygpIDogbnVsbCxcblx0XHRcdHRoaXMubWFpbEltcG9ydGVyKCkuc2hvdWxkUmVuZGVySW1wb3J0U3RhdHVzKCkgPyB0aGlzLnJlbmRlckltcG9ydFN0YXR1cygpIDogbnVsbCxcblx0XHRcdHRoaXMucmVuZGVySW1wb3J0SGlzdG9yeSgpLFxuXHRcdF0pXG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIG9uSW1wb3J0QnV0dG9uQ2xpY2soZG9tOiBIVE1MRWxlbWVudCkge1xuXHRcdGNvbnN0IGN1cnJlbnRQbGFuVHlwZSA9IGF3YWl0IG1haWxMb2NhdG9yLmxvZ2lucy5nZXRVc2VyQ29udHJvbGxlcigpLmdldFBsYW5UeXBlKClcblx0XHRjb25zdCBpc0hpZ2hlc3RUaWVyUGxhbiA9IEhpZ2hlc3RUaWVyUGxhbnMuaW5jbHVkZXMoY3VycmVudFBsYW5UeXBlKVxuXHRcdGlmICghaXNIaWdoZXN0VGllclBsYW4pIHtcblx0XHRcdHNob3dOb3RBdmFpbGFibGVGb3JGcmVlRGlhbG9nKFtQbGFuVHlwZS5MZWdlbmQsIFBsYW5UeXBlLlVubGltaXRlZF0pLnRoZW4oKVxuXHRcdFx0cmV0dXJuXG5cdFx0fVxuXG5cdFx0Y29uc3QgYWxsb3dlZEV4dGVuc2lvbnMgPSBbXCJlbWxcIiwgXCJtYm94XCJdXG5cdFx0Y29uc3QgZmlsZVBhdGhzID0gYXdhaXQgbWFpbExvY2F0b3IuZmlsZUFwcC5vcGVuRmlsZUNob29zZXIoZG9tLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLCBhbGxvd2VkRXh0ZW5zaW9ucywgdHJ1ZSlcblx0XHRhd2FpdCB0aGlzLm1haWxJbXBvcnRlcigpLm9uU3RhcnRCdG5DbGljayhmaWxlUGF0aHMubWFwKChmcCkgPT4gZnAubG9jYXRpb24pKVxuXHR9XG5cblx0cHJpdmF0ZSByZW5kZXJUYXJnZXRGb2xkZXJDb250cm9scygpIHtcblx0XHRsZXQgZm9sZGVycyA9IHRoaXMubWFpbEltcG9ydGVyKCkuZm9sZGVyc0Zvck1haWxib3hcblx0XHRpZiAoZm9sZGVycykge1xuXHRcdFx0Y29uc3QgbG9hZGluZ01zZyA9IGxhbmcuZ2V0KFwibG9hZGluZ19tc2dcIilcblx0XHRcdGNvbnN0IGVtcHR5TGFiZWwgPSBtKFwiYnJcIilcblx0XHRcdGNvbnN0IHNlbGVjdGVkVGFyZ2V0Rm9sZGVyID0gdGhpcy5tYWlsSW1wb3J0ZXIoKS5zZWxlY3RlZFRhcmdldEZvbGRlclxuXHRcdFx0Y29uc3Qgc2VsZWN0ZWRUYXJnZXRGb2xkZXJQYXRoID0gc2VsZWN0ZWRUYXJnZXRGb2xkZXIgPyBnZXRQYXRoVG9Gb2xkZXJTdHJpbmcoZm9sZGVycyEsIHNlbGVjdGVkVGFyZ2V0Rm9sZGVyKSA6IFwiXCJcblx0XHRcdGNvbnN0IGlzTm90U3ViZm9sZGVyID0gc2VsZWN0ZWRUYXJnZXRGb2xkZXIgPyBzZWxlY3RlZFRhcmdldEZvbGRlclBhdGggPT0gZ2V0Rm9sZGVyTmFtZShzZWxlY3RlZFRhcmdldEZvbGRlcikgOiBmYWxzZVxuXHRcdFx0Y29uc3QgaGVscExhYmVsID0gc2VsZWN0ZWRUYXJnZXRGb2xkZXIgPyAoaXNOb3RTdWJmb2xkZXIgPyBlbXB0eUxhYmVsIDogc2VsZWN0ZWRUYXJnZXRGb2xkZXJQYXRoKSA6IGVtcHR5TGFiZWxcblx0XHRcdGxldCB0YXJnZXRGb2xkZXJzOiBTZWxlY3Rvckl0ZW1MaXN0PE1haWxGb2xkZXIgfCBudWxsPiA9IGZvbGRlcnMuZ2V0SW5kZW50ZWRMaXN0KCkubWFwKChmb2xkZXJJbmZvOiBJbmRlbnRlZEZvbGRlcikgPT4ge1xuXHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdG5hbWU6IGdldEluZGVudGVkRm9sZGVyTmFtZUZvckRyb3Bkb3duKGZvbGRlckluZm8pLFxuXHRcdFx0XHRcdHZhbHVlOiBmb2xkZXJJbmZvLmZvbGRlcixcblx0XHRcdFx0fVxuXHRcdFx0fSlcblx0XHRcdHJldHVybiBtKERyb3BEb3duU2VsZWN0b3IsIHtcblx0XHRcdFx0bGFiZWw6IFwibWFpbEltcG9ydFRhcmdldEZvbGRlcl9sYWJlbFwiLFxuXHRcdFx0XHRpdGVtczogdGFyZ2V0Rm9sZGVycyxcblx0XHRcdFx0ZGlzYWJsZWQ6IHRoaXMubWFpbEltcG9ydGVyKCkuc2hvdWxkUmVuZGVySW1wb3J0U3RhdHVzKCksXG5cdFx0XHRcdHNlbGVjdGVkVmFsdWU6IHNlbGVjdGVkVGFyZ2V0Rm9sZGVyLFxuXHRcdFx0XHRzZWxlY3RlZFZhbHVlRGlzcGxheTogc2VsZWN0ZWRUYXJnZXRGb2xkZXIgPyBnZXRGb2xkZXJOYW1lKHNlbGVjdGVkVGFyZ2V0Rm9sZGVyKSA6IGxvYWRpbmdNc2csXG5cdFx0XHRcdHNlbGVjdGlvbkNoYW5nZWRIYW5kbGVyOiAobmV3Rm9sZGVyOiBNYWlsRm9sZGVyIHwgbnVsbCkgPT4gKHRoaXMubWFpbEltcG9ydGVyKCkuc2VsZWN0ZWRUYXJnZXRGb2xkZXIgPSBuZXdGb2xkZXIpLFxuXHRcdFx0XHRoZWxwTGFiZWw6ICgpID0+IGhlbHBMYWJlbCxcblx0XHRcdH0pXG5cdFx0fSBlbHNlIHtcblx0XHRcdHJldHVybiBudWxsXG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSByZW5kZXJTdGFydE5ld0ltcG9ydENvbnRyb2xzKCkge1xuXHRcdHJldHVybiBbXG5cdFx0XHRtKFwiLmZsZXgtc3RhcnQubXQtbVwiLCB0aGlzLnJlbmRlckltcG9ydEluZm9UZXh0KCkpLFxuXHRcdFx0bShcblx0XHRcdFx0XCIuZmxleC1zdGFydC5tdC1zXCIsXG5cdFx0XHRcdG0oTG9naW5CdXR0b24sIHtcblx0XHRcdFx0XHR0eXBlOiBMb2dpbkJ1dHRvblR5cGUuRmxleFdpZHRoLFxuXHRcdFx0XHRcdGxhYmVsOiBcImltcG9ydF9hY3Rpb25cIixcblx0XHRcdFx0XHRvbmNsaWNrOiAoXywgZG9tKSA9PiB0aGlzLm9uSW1wb3J0QnV0dG9uQ2xpY2soZG9tKSxcblx0XHRcdFx0fSksXG5cdFx0XHQpLFxuXHRcdF1cblx0fVxuXG5cdHByaXZhdGUgcmVuZGVySW1wb3J0SW5mb1RleHQoKSB7XG5cdFx0cmV0dXJuIFttKFwiLnNtYWxsXCIsIGxhbmcuZ2V0KFwibWFpbEltcG9ydEluZm9UZXh0X2xhYmVsXCIpKV1cblx0fVxuXG5cdHByaXZhdGUgcmVuZGVySW1wb3J0U3RhdHVzKCkge1xuXHRcdGNvbnN0IHByb2Nlc3NlZE1haWxzQ291bnRMYWJlbCA9IG0oXG5cdFx0XHRcIi5mbGV4LXN0YXJ0LnAuc21hbGxcIixcblx0XHRcdGxhbmcuZ2V0KFwibWFpbEltcG9ydFN0YXRlUHJvY2Vzc2VkTWFpbHNUb3RhbE1haWxzX2xhYmVsXCIsIHtcblx0XHRcdFx0XCJ7cHJvY2Vzc2VkTWFpbHN9XCI6IHRoaXMubWFpbEltcG9ydGVyKCkuZ2V0UHJvY2Vzc2VkTWFpbHNDb3VudCgpLFxuXHRcdFx0XHRcInt0b3RhbE1haWxzfVwiOiB0aGlzLm1haWxJbXBvcnRlcigpLmdldFRvdGFsTWFpbHNDb3VudCgpLFxuXHRcdFx0fSksXG5cdFx0KVxuXHRcdGNvbnN0IHJlc3VtZU1haWxJbXBvcnRJY29uQnV0dG9uQXR0cnM6IEljb25CdXR0b25BdHRycyA9IHtcblx0XHRcdHRpdGxlOiBcInJlc3VtZU1haWxJbXBvcnRfYWN0aW9uXCIsXG5cdFx0XHRpY29uOiBJY29ucy5QbGF5LFxuXHRcdFx0Y2xpY2s6ICgpID0+IHRoaXMubWFpbEltcG9ydGVyKCkub25SZXN1bWVCdG5DbGljaygpLFxuXHRcdFx0c2l6ZTogQnV0dG9uU2l6ZS5Ob3JtYWwsXG5cdFx0XHRkaXNhYmxlZDogdGhpcy5tYWlsSW1wb3J0ZXIoKS5zaG91bGREaXNhYmxlUmVzdW1lQnV0dG9uKCksXG5cdFx0fVxuXHRcdGNvbnN0IHBhdXNlTWFpbEltcG9ydEljb25CdXR0b25BdHRyczogSWNvbkJ1dHRvbkF0dHJzID0ge1xuXHRcdFx0dGl0bGU6IFwicGF1c2VNYWlsSW1wb3J0X2FjdGlvblwiLFxuXHRcdFx0aWNvbjogSWNvbnMuUGF1c2UsXG5cdFx0XHRjbGljazogKCkgPT4ge1xuXHRcdFx0XHR0aGlzLm1haWxJbXBvcnRlcigpLm9uUGF1c2VCdG5DbGljaygpXG5cdFx0XHR9LFxuXHRcdFx0c2l6ZTogQnV0dG9uU2l6ZS5Ob3JtYWwsXG5cdFx0XHRkaXNhYmxlZDogdGhpcy5tYWlsSW1wb3J0ZXIoKS5zaG91bGREaXNhYmxlUGF1c2VCdXR0b24oKSxcblx0XHR9XG5cdFx0Y29uc3QgY2FuY2VsTWFpbEltcG9ydEljb25CdXR0b25BdHRyczogSWNvbkJ1dHRvbkF0dHJzID0ge1xuXHRcdFx0dGl0bGU6IFwiY2FuY2VsTWFpbEltcG9ydF9hY3Rpb25cIixcblx0XHRcdGljb246IEljb25zLkNhbmNlbCxcblx0XHRcdGNsaWNrOiAoKSA9PiB7XG5cdFx0XHRcdHRoaXMubWFpbEltcG9ydGVyKCkub25DYW5jZWxCdG5DbGljaygpXG5cdFx0XHR9LFxuXHRcdFx0c2l6ZTogQnV0dG9uU2l6ZS5Ob3JtYWwsXG5cdFx0XHRkaXNhYmxlZDogdGhpcy5tYWlsSW1wb3J0ZXIoKS5zaG91bGREaXNhYmxlQ2FuY2VsQnV0dG9uKCksXG5cdFx0fVxuXG5cdFx0bGV0IGJ1dHRvbkNvbnRyb2xzID0gW11cblx0XHRpZiAodGhpcy5tYWlsSW1wb3J0ZXIoKS5zaG91bGRSZW5kZXJQYXVzZUJ1dHRvbigpKSB7XG5cdFx0XHRidXR0b25Db250cm9scy5wdXNoKG0oSWNvbkJ1dHRvbiwgcGF1c2VNYWlsSW1wb3J0SWNvbkJ1dHRvbkF0dHJzKSlcblx0XHR9XG5cdFx0aWYgKHRoaXMubWFpbEltcG9ydGVyKCkuc2hvdWxkUmVuZGVyUmVzdW1lQnV0dG9uKCkpIHtcblx0XHRcdGJ1dHRvbkNvbnRyb2xzLnB1c2gobShJY29uQnV0dG9uLCByZXN1bWVNYWlsSW1wb3J0SWNvbkJ1dHRvbkF0dHJzKSlcblx0XHR9XG5cdFx0aWYgKHRoaXMubWFpbEltcG9ydGVyKCkuc2hvdWxkUmVuZGVyQ2FuY2VsQnV0dG9uKCkpIHtcblx0XHRcdGJ1dHRvbkNvbnRyb2xzLnB1c2gobShJY29uQnV0dG9uLCBjYW5jZWxNYWlsSW1wb3J0SWNvbkJ1dHRvbkF0dHJzKSlcblx0XHR9XG5cblx0XHRyZXR1cm4gW1xuXHRcdFx0W1xuXHRcdFx0XHRtKFxuXHRcdFx0XHRcdFwiLmZsZXgtc3BhY2UtYmV0d2Vlbi5wLnNtYWxsLm10LW1cIixcblx0XHRcdFx0XHRnZXRSZWFkYWJsZVVpSW1wb3J0U3RhdHVzKGFzc2VydE5vdE51bGwodGhpcy5tYWlsSW1wb3J0ZXIoKS5nZXRVaVN0YXR1cygpKSksXG5cdFx0XHRcdFx0dGhpcy5tYWlsSW1wb3J0ZXIoKS5zaG91bGRSZW5kZXJQcm9jZXNzZWRNYWlscygpID8gcHJvY2Vzc2VkTWFpbHNDb3VudExhYmVsIDogbnVsbCxcblx0XHRcdFx0KSxcblx0XHRcdF0sXG5cdFx0XHRbbShcIi5mbGV4LXNwYWNlLWJldHdlZW4uYm9yZGVyLXJhZGl1cy1iaWcubXQtcy5yZWwubmF2LWJnLmZ1bGwtd2lkdGhcIiwgdGhpcy5yZW5kZXJNYWlsSW1wb3J0UHJvZ3Jlc3NCYXIoKSwgLi4uYnV0dG9uQ29udHJvbHMpXSxcblx0XHRdXG5cdH1cblxuXHRwcml2YXRlIHJlbmRlck1haWxJbXBvcnRQcm9ncmVzc0JhcigpIHtcblx0XHQvLyB0aGUgUHJvZ3Jlc3NCYXIgdXNlcyBwcm9ncmVzcyB2YWx1ZXMgMCAuLi4gMVxuXHRcdHJldHVybiBtKFxuXHRcdFx0XCIucmVsLmJvcmRlci1yYWRpdXMtYmlnLmZ1bGwtd2lkdGhcIixcblx0XHRcdG0oUHJvZ3Jlc3NCYXIsIHtcblx0XHRcdFx0cHJvZ3Jlc3M6IHRoaXMubWFpbEltcG9ydGVyKCkuZ2V0UHJvZ3Jlc3MoKSAvIDEwMCxcblx0XHRcdFx0dHlwZTogUHJvZ3Jlc3NCYXJUeXBlLkxhcmdlLFxuXHRcdFx0fSksXG5cdFx0KVxuXHR9XG5cblx0cHJpdmF0ZSByZW5kZXJJbXBvcnRIaXN0b3J5KCkge1xuXHRcdHJldHVybiBbXG5cdFx0XHRtKFwiLmZsZXgtc3BhY2UtYmV0d2Vlbi5pdGVtcy1jZW50ZXIubXQtbC5tYi1zXCIsIFtcblx0XHRcdFx0bShcIi5oNFwiLCBsYW5nLmdldChcIm1haWxJbXBvcnRIaXN0b3J5X2xhYmVsXCIpKSxcblx0XHRcdFx0bShFeHBhbmRlckJ1dHRvbiwge1xuXHRcdFx0XHRcdGxhYmVsOiBcInNob3dfYWN0aW9uXCIsXG5cdFx0XHRcdFx0ZXhwYW5kZWQ6IHRoaXMuaXNJbXBvcnRIaXN0b3J5RXhwYW5kZWQsXG5cdFx0XHRcdFx0b25FeHBhbmRlZENoYW5nZTogKCkgPT4ge1xuXHRcdFx0XHRcdFx0dGhpcy5pc0ltcG9ydEhpc3RvcnlFeHBhbmRlZCA9ICF0aGlzLmlzSW1wb3J0SGlzdG9yeUV4cGFuZGVkXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0fSksXG5cdFx0XHRdKSxcblx0XHRcdG0oXG5cdFx0XHRcdEV4cGFuZGVyUGFuZWwsXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRleHBhbmRlZDogdGhpcy5pc0ltcG9ydEhpc3RvcnlFeHBhbmRlZCxcblx0XHRcdFx0fSxcblx0XHRcdFx0bShUYWJsZSwge1xuXHRcdFx0XHRcdGNvbHVtbkhlYWRpbmc6IFtcIm1haWxJbXBvcnRIaXN0b3J5VGFibGVIZWFkaW5nX2xhYmVsXCJdLFxuXHRcdFx0XHRcdGNvbHVtbldpZHRoczogW0NvbHVtbldpZHRoLlNtYWxsLCBDb2x1bW5XaWR0aC5MYXJnZXN0XSxcblx0XHRcdFx0XHRzaG93QWN0aW9uQnV0dG9uQ29sdW1uOiB0cnVlLFxuXHRcdFx0XHRcdGxpbmVzOiB0aGlzLm1ha2VNYWlsSW1wb3J0SGlzdG9yeVRhYmxlTGluZXMoKSxcblx0XHRcdFx0fSksXG5cdFx0XHQpLFxuXHRcdF1cblx0fVxuXG5cdC8qKlxuXHQgKiBQYXJzZXMgdGhlIGltcG9ydE1haWxTdGF0ZXMgaW50byBkaXNwbGF5YWJsZSB0YWJsZSBsaW5lcy5cblx0ICogQHJldHVybnMgYXJyYXkgb2YgdGhlIHBhcnNlZCB0YWJsZSBsaW5lcy5cblx0ICovXG5cdHByaXZhdGUgbWFrZU1haWxJbXBvcnRIaXN0b3J5VGFibGVMaW5lcygpOiBBcnJheTxUYWJsZUxpbmVBdHRycz4ge1xuXHRcdGxldCBmb2xkZXJzID0gdGhpcy5tYWlsSW1wb3J0ZXIoKS5mb2xkZXJzRm9yTWFpbGJveD8uZ2V0SW5kZW50ZWRMaXN0KClcblx0XHRpZiAoZm9sZGVycykge1xuXHRcdFx0cmV0dXJuIHRoaXMubWFpbEltcG9ydGVyKClcblx0XHRcdFx0LmdldEZpbmFsaXNlZEltcG9ydHMoKVxuXHRcdFx0XHQuc29ydChzb3J0Q29tcGFyZUJ5UmV2ZXJzZUlkKVxuXHRcdFx0XHQubWFwKChpbSkgPT4ge1xuXHRcdFx0XHRcdGNvbnN0IHRhcmdldEZvbGRlcklkID0gaW0udGFyZ2V0Rm9sZGVyXG5cdFx0XHRcdFx0Y29uc3QgZGlzcGxheVRhcmdldEZvbGRlciA9IGZvbGRlcnMhLmZpbmQoKGYpID0+IGlzU2FtZUlkKGYuZm9sZGVyLl9pZCwgdGFyZ2V0Rm9sZGVySWQpKVxuXG5cdFx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRcdGNlbGxzOiAoKSA9PiBbXG5cdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHRtYWluOiBsYW5nLmdldChcIm1haWxJbXBvcnRIaXN0b3J5VGFibGVSb3dUaXRsZV9sYWJlbFwiLCB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcIntzdGF0dXN9XCI6IGdldFJlYWRhYmxlSW1wb3J0U3RhdHVzKHBhcnNlSW50KGltLnN0YXR1cykgYXMgSW1wb3J0U3RhdHVzKSxcblx0XHRcdFx0XHRcdFx0XHRcdFwie2ZvbGRlcn1cIjogZGlzcGxheVRhcmdldEZvbGRlclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQ/IGdldEZvbGRlck5hbWUoZGlzcGxheVRhcmdldEZvbGRlci5mb2xkZXIpXG5cdFx0XHRcdFx0XHRcdFx0XHRcdDogbGFuZy5nZXQoXCJtYWlsSW1wb3J0SGlzdG9yeVRhYmxlUm93Rm9sZGVyRGVsZXRlZF9sYWJlbFwiKSxcblx0XHRcdFx0XHRcdFx0XHR9KSxcblx0XHRcdFx0XHRcdFx0XHRpbmZvOiBbXG5cdFx0XHRcdFx0XHRcdFx0XHRsYW5nLmdldChcIm1haWxJbXBvcnRIaXN0b3J5VGFibGVSb3dTdWJ0aXRsZV9sYWJlbFwiLCB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFwie2RhdGV9XCI6IGZvcm1hdERhdGUobmV3IERhdGUoZ2VuZXJhdGVkSWRUb1RpbWVzdGFtcChlbGVtZW50SWRQYXJ0KGltLl9pZCkpKSksXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFwie3N1Y2Nlc3NmdWxNYWlsc31cIjogaW0uc3VjY2Vzc2Z1bE1haWxzLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcIntmYWlsZWRNYWlsc31cIjogaW0uZmFpbGVkTWFpbHMsXG5cdFx0XHRcdFx0XHRcdFx0XHR9KSxcblx0XHRcdFx0XHRcdFx0XHRdLFxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XSxcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pXG5cdFx0fSBlbHNlIHtcblx0XHRcdHJldHVybiBbXVxuXHRcdH1cblx0fVxuXG5cdGFzeW5jIGVudGl0eUV2ZW50c1JlY2VpdmVkKHVwZGF0ZXM6IFJlYWRvbmx5QXJyYXk8RW50aXR5VXBkYXRlRGF0YT4pOiBQcm9taXNlPHZvaWQ+IHt9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRSZWFkYWJsZVVpSW1wb3J0U3RhdHVzKHVpU3RhdHVzOiBVaUltcG9ydFN0YXR1cyk6IHN0cmluZyB7XG5cdHJldHVybiBsYW5nLmdldChnZXRVaUltcG9ydFN0YXR1c1RyYW5zbGF0aW9uS2V5KHVpU3RhdHVzKSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFVpSW1wb3J0U3RhdHVzVHJhbnNsYXRpb25LZXkodWlTdGF0dXM6IFVpSW1wb3J0U3RhdHVzKTogVHJhbnNsYXRpb25LZXkge1xuXHRzd2l0Y2ggKHVpU3RhdHVzKSB7XG5cdFx0Y2FzZSBVaUltcG9ydFN0YXR1cy5TdGFydGluZzpcblx0XHRcdHJldHVybiBcIm1haWxJbXBvcnRTdGF0dXNTdGFydGluZ19sYWJlbFwiXG5cdFx0Y2FzZSBVaUltcG9ydFN0YXR1cy5SZXN1bWluZzpcblx0XHRcdHJldHVybiBcIm1haWxJbXBvcnRTdGF0dXNSZXN1bWluZ19sYWJlbFwiXG5cdFx0Y2FzZSBVaUltcG9ydFN0YXR1cy5SdW5uaW5nOlxuXHRcdFx0cmV0dXJuIFwibWFpbEltcG9ydFN0YXR1c1J1bm5pbmdfbGFiZWxcIlxuXHRcdGNhc2UgVWlJbXBvcnRTdGF0dXMuUGF1c2luZzpcblx0XHRcdHJldHVybiBcIm1haWxJbXBvcnRTdGF0dXNQYXVzaW5nX2xhYmVsXCJcblx0XHRjYXNlIFVpSW1wb3J0U3RhdHVzLlBhdXNlZDpcblx0XHRcdHJldHVybiBcIm1haWxJbXBvcnRTdGF0dXNQYXVzZWRfbGFiZWxcIlxuXHRcdGNhc2UgVWlJbXBvcnRTdGF0dXMuQ2FuY2VsbGluZzpcblx0XHRcdHJldHVybiBcIm1haWxJbXBvcnRTdGF0dXNDYW5jZWxsaW5nX2xhYmVsXCJcblx0fVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0UmVhZGFibGVJbXBvcnRTdGF0dXMoaW1wb3J0U3RhdHVzOiBJbXBvcnRTdGF0dXMpOiBzdHJpbmcge1xuXHRyZXR1cm4gbGFuZy5nZXQoZ2V0SW1wb3J0U3RhdHVzVHJhbnNsYXRpb25LZXkoaW1wb3J0U3RhdHVzKSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEltcG9ydFN0YXR1c1RyYW5zbGF0aW9uS2V5KGltcG9ydFN0YXR1czogSW1wb3J0U3RhdHVzKTogVHJhbnNsYXRpb25LZXkge1xuXHRzd2l0Y2ggKGltcG9ydFN0YXR1cykge1xuXHRcdGNhc2UgSW1wb3J0U3RhdHVzLlJ1bm5pbmc6XG5cdFx0XHRyZXR1cm4gXCJtYWlsSW1wb3J0U3RhdHVzUnVubmluZ19sYWJlbFwiXG5cdFx0Y2FzZSBJbXBvcnRTdGF0dXMuUGF1c2VkOlxuXHRcdFx0cmV0dXJuIFwibWFpbEltcG9ydFN0YXR1c1BhdXNlZF9sYWJlbFwiXG5cdFx0Y2FzZSBJbXBvcnRTdGF0dXMuQ2FuY2VsZWQ6XG5cdFx0XHRyZXR1cm4gXCJtYWlsSW1wb3J0U3RhdHVzQ2FuY2VsZWRfbGFiZWxcIlxuXHRcdGNhc2UgSW1wb3J0U3RhdHVzLkZpbmlzaGVkOlxuXHRcdFx0cmV0dXJuIFwibWFpbEltcG9ydFN0YXR1c0ZpbmlzaGVkX2xhYmVsXCJcblx0fVxufVxuIiwiaW1wb3J0IG0sIHsgQ2hpbGRyZW4gfSBmcm9tIFwibWl0aHJpbFwiXG5pbXBvcnQgeyBsYXp5IH0gZnJvbSBcIkB0dXRhby90dXRhbm90YS11dGlsc1wiXG5pbXBvcnQgeyBsYW5nIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9taXNjL0xhbmd1YWdlVmlld01vZGVsXCJcbmltcG9ydCB7IExvZ2luQnV0dG9uLCBMb2dpbkJ1dHRvblR5cGUgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2d1aS9iYXNlL2J1dHRvbnMvTG9naW5CdXR0b25cIlxuaW1wb3J0IHsgVXBkYXRhYmxlU2V0dGluZ3NWaWV3ZXIgfSBmcm9tIFwiLi4vLi4vY29tbW9uL3NldHRpbmdzL0ludGVyZmFjZXMuanNcIlxuaW1wb3J0IHsgRW50aXR5VXBkYXRlRGF0YSB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL2NvbW1vbi91dGlscy9FbnRpdHlVcGRhdGVVdGlscy5qc1wiXG5pbXBvcnQgeyBtYWlsTG9jYXRvciB9IGZyb20gXCIuLi9tYWlsTG9jYXRvci5qc1wiXG5pbXBvcnQgeyBpc1dlYkNsaWVudCB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL2NvbW1vbi9FbnYuanNcIlxuXG4vKipcbiAqIFNldHRpbmdzIHZpZXdlciBmb3IgbWFpbCBpbXBvcnQgcmVuZGVyZWQgb25seSBpbiB0aGUgV2ViQXBwLCBBbmRyb2lkIGFuZCBpT1MuXG4gKiBTZWUge0BsaW5rIERlc2t0b3BNYWlsSW1wb3J0U2V0dGluZ3NWaWV3ZXJ9IGZvciB0aGUgRGVza3RvcCBjbGllbnQuXG4gKi9cbmV4cG9ydCBjbGFzcyBXZWJNYWlsSW1wb3J0U2V0dGluZ3NWaWV3ZXIgaW1wbGVtZW50cyBVcGRhdGFibGVTZXR0aW5nc1ZpZXdlciB7XG5cdGNvbnN0cnVjdG9yKCkge31cblxuXHR2aWV3KCk6IENoaWxkcmVuIHtcblx0XHRyZXR1cm4gbShcIi5maWxsLWFic29sdXRlLnNjcm9sbC5wbHItbC5wYi14bFwiLCBbbShcIi5oNC5tdC1sXCIsIGxhbmcuZ2V0KFwibWFpbEltcG9ydFNldHRpbmdzX2xhYmVsXCIpKSwgdGhpcy5yZW5kZXJOb0ltcG9ydE9uV2ViVGV4dCgpXSlcblx0fVxuXG5cdHByaXZhdGUgcmVuZGVyTm9JbXBvcnRPbldlYlRleHQoKSB7XG5cdFx0cmV0dXJuIFtcblx0XHRcdG0oXG5cdFx0XHRcdFwiLmZsZXgtY29sdW1uLm10XCIsXG5cdFx0XHRcdG0oXCIucFwiLCBsYW5nLmdldChcIm1haWxJbXBvcnROb0ltcG9ydE9uV2ViX2xhYmVsXCIpKSxcblx0XHRcdFx0bShcblx0XHRcdFx0XHRcIi5mbGV4LXN0YXJ0Lm10LWxcIixcblx0XHRcdFx0XHRtKExvZ2luQnV0dG9uLCB7XG5cdFx0XHRcdFx0XHR0eXBlOiBMb2dpbkJ1dHRvblR5cGUuRmxleFdpZHRoLFxuXHRcdFx0XHRcdFx0bGFiZWw6IFwibWFpbEltcG9ydERvd25sb2FkRGVza3RvcENsaWVudF9sYWJlbFwiLFxuXHRcdFx0XHRcdFx0b25jbGljazogKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRjb25zdCBkZXNrdG9wQ2xpZW50RG93bmxvYWRVcmkgPSBcImh0dHBzOi8vdHV0YS5jb20jZG93bmxvYWRcIlxuXHRcdFx0XHRcdFx0XHRpZiAoaXNXZWJDbGllbnQoKSkge1xuXHRcdFx0XHRcdFx0XHRcdG9wZW4oZGVza3RvcENsaWVudERvd25sb2FkVXJpKVxuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdG1haWxMb2NhdG9yLnN5c3RlbUZhY2FkZS5vcGVuTGluayhkZXNrdG9wQ2xpZW50RG93bmxvYWRVcmkpXG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0fSksXG5cdFx0XHRcdCksXG5cdFx0XHRcdG0oXG5cdFx0XHRcdFx0XCIuZmxleC12LWNlbnRlci5mdWxsLXdpZHRoLm10LXhsXCIsXG5cdFx0XHRcdFx0bShcImltZ1wiLCB7XG5cdFx0XHRcdFx0XHRzcmM6IGAke3dpbmRvdy50dXRhby5hcHBTdGF0ZS5wcmVmaXhXaXRob3V0RmlsZX0vaW1hZ2VzL21haWwtaW1wb3J0L2VtYWlsLWltcG9ydC13ZWJhcHAuc3ZnYCxcblx0XHRcdFx0XHRcdGFsdDogXCJcIixcblx0XHRcdFx0XHRcdHJlbDogXCJub3JlZmVycmVyXCIsXG5cdFx0XHRcdFx0XHRsb2FkaW5nOiBcImxhenlcIixcblx0XHRcdFx0XHRcdGRlY29kaW5nOiBcImFzeW5jXCIsXG5cdFx0XHRcdFx0XHRjbGFzczogXCJzZXR0aW5ncy1pbGx1c3RyYXRpb24tbGFyZ2VcIixcblx0XHRcdFx0XHR9KSxcblx0XHRcdFx0KSxcblx0XHRcdCksXG5cdFx0XVxuXHR9XG5cblx0YXN5bmMgZW50aXR5RXZlbnRzUmVjZWl2ZWQodXBkYXRlczogUmVhZG9ubHlBcnJheTxFbnRpdHlVcGRhdGVEYXRhPik6IFByb21pc2U8dm9pZD4ge31cbn1cbiIsImltcG9ydCBtLCB7IENoaWxkcmVuLCBDb21wb25lbnQsIFZub2RlIH0gZnJvbSBcIm1pdGhyaWxcIlxuaW1wb3J0IHsgbGFuZyB9IGZyb20gXCIuLi8uLi9jb21tb24vbWlzYy9MYW5ndWFnZVZpZXdNb2RlbFwiXG5pbXBvcnQgeyBEcm9wRG93blNlbGVjdG9yLCB0eXBlIERyb3BEb3duU2VsZWN0b3JBdHRycyB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL2Jhc2UvRHJvcERvd25TZWxlY3RvclwiXG5pbXBvcnQgeyBNYWlsYm94RGV0YWlsIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9tYWlsRnVuY3Rpb25hbGl0eS9NYWlsYm94TW9kZWxcIlxuaW1wb3J0IHsgZ2V0TWFpbGJveE5hbWUgfSBmcm9tIFwiLi4vLi4vY29tbW9uL21haWxGdW5jdGlvbmFsaXR5L1NoYXJlZE1haWxVdGlsc1wiXG5pbXBvcnQgeyBtYWlsTG9jYXRvciB9IGZyb20gXCIuLi9tYWlsTG9jYXRvclwiXG5pbXBvcnQgeyBmaXJzdCB9IGZyb20gXCJAdHV0YW8vdHV0YW5vdGEtdXRpbHNcIlxuaW1wb3J0IHsgTG9naW5Db250cm9sbGVyIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9hcGkvbWFpbi9Mb2dpbkNvbnRyb2xsZXJcIlxuaW1wb3J0IHsgTWFpbEV4cG9ydENvbnRyb2xsZXIgfSBmcm9tIFwiLi4vbmF0aXZlL21haW4vTWFpbEV4cG9ydENvbnRyb2xsZXIuanNcIlxuaW1wb3J0IFN0cmVhbSBmcm9tIFwibWl0aHJpbC9zdHJlYW1cIlxuaW1wb3J0IHsgQnV0dG9uLCBCdXR0b25UeXBlIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvYmFzZS9CdXR0b25cIlxuaW1wb3J0IHsgSWNvbkJ1dHRvbiB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL2Jhc2UvSWNvbkJ1dHRvblwiXG5pbXBvcnQgeyBJY29ucyB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL2Jhc2UvaWNvbnMvSWNvbnNcIlxuaW1wb3J0IHsgQnV0dG9uU2l6ZSB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL2Jhc2UvQnV0dG9uU2l6ZVwiXG5pbXBvcnQgeyBMb2dpbkJ1dHRvbiwgTG9naW5CdXR0b25UeXBlIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvYmFzZS9idXR0b25zL0xvZ2luQnV0dG9uXCJcbmltcG9ydCB7IEljb24sIEljb25TaXplIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvYmFzZS9JY29uXCJcbmltcG9ydCB7IEJvb3RJY29ucyB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL2Jhc2UvaWNvbnMvQm9vdEljb25zXCJcblxuaW50ZXJmYWNlIE1haWxFeHBvcnRTZXR0aW5nc0F0dHJzIHtcblx0bWFpbGJveERldGFpbHM6IE1haWxib3hEZXRhaWxbXVxuXHRsb2dpbnM6IExvZ2luQ29udHJvbGxlclxuXHRtYWlsRXhwb3J0Q29udHJvbGxlcjogTWFpbEV4cG9ydENvbnRyb2xsZXJcbn1cblxuZXhwb3J0IGNsYXNzIE1haWxFeHBvcnRTZXR0aW5ncyBpbXBsZW1lbnRzIENvbXBvbmVudDxNYWlsRXhwb3J0U2V0dGluZ3NBdHRycz4ge1xuXHRwcml2YXRlIHNlbGVjdGVkTWFpbGJveDogTWFpbGJveERldGFpbCB8IG51bGwgPSBudWxsXG5cdHByaXZhdGUgY29udHJvbGxlclN1YnNjcmlwdGlvbjogU3RyZWFtPHZvaWQ+IHwgbnVsbCA9IG51bGxcblx0cHJpdmF0ZSBpc0V4cG9ydEhpc3RvcnlFeHBhbmRlZDogYm9vbGVhbiA9IGZhbHNlXG5cblx0b25jcmVhdGUodm5vZGU6IFZub2RlPE1haWxFeHBvcnRTZXR0aW5nc0F0dHJzPikge1xuXHRcdHRoaXMuY29udHJvbGxlclN1YnNjcmlwdGlvbiA9IHZub2RlLmF0dHJzLm1haWxFeHBvcnRDb250cm9sbGVyLnN0YXRlLm1hcChtLnJlZHJhdylcblx0fVxuXG5cdG9ucmVtb3ZlKCkge1xuXHRcdGlmICh0aGlzLmNvbnRyb2xsZXJTdWJzY3JpcHRpb24pIHtcblx0XHRcdHRoaXMuY29udHJvbGxlclN1YnNjcmlwdGlvbi5lbmQoKVxuXHRcdFx0dGhpcy5jb250cm9sbGVyU3Vic2NyaXB0aW9uID0gbnVsbFxuXHRcdH1cblx0fVxuXG5cdHZpZXcodm5vZGU6IFZub2RlPE1haWxFeHBvcnRTZXR0aW5nc0F0dHJzPik6IENoaWxkcmVuIHtcblx0XHRjb25zdCB7IG1haWxib3hEZXRhaWxzIH0gPSB2bm9kZS5hdHRyc1xuXHRcdHRoaXMuc2VsZWN0ZWRNYWlsYm94ID0gdGhpcy5zZWxlY3RlZE1haWxib3ggPz8gZmlyc3QobWFpbGJveERldGFpbHMpXG5cdFx0Y29uc3Qgc3RhdGUgPSB2bm9kZS5hdHRycy5tYWlsRXhwb3J0Q29udHJvbGxlci5zdGF0ZSgpXG5cdFx0Y29uc3QgZW1wdHlMYWJlbCA9IG0oXCJiclwiKVxuXHRcdHJldHVybiBbXG5cdFx0XHRtKERyb3BEb3duU2VsZWN0b3IsIHtcblx0XHRcdFx0bGFiZWw6IFwibWFpbGJveFRvRXhwb3J0X2xhYmVsXCIsXG5cdFx0XHRcdGl0ZW1zOiBtYWlsYm94RGV0YWlscy5tYXAoKG1haWxib3hEZXRhaWwpID0+IHtcblx0XHRcdFx0XHRyZXR1cm4geyBuYW1lOiBnZXRNYWlsYm94TmFtZShtYWlsTG9jYXRvci5sb2dpbnMsIG1haWxib3hEZXRhaWwpLCB2YWx1ZTogbWFpbGJveERldGFpbCB9XG5cdFx0XHRcdH0pLFxuXHRcdFx0XHRzZWxlY3RlZFZhbHVlOiB0aGlzLnNlbGVjdGVkTWFpbGJveCxcblx0XHRcdFx0c2VsZWN0aW9uQ2hhbmdlZEhhbmRsZXI6IChzZWxlY3RlZE1haWxib3gpID0+IHtcblx0XHRcdFx0XHR0aGlzLnNlbGVjdGVkTWFpbGJveCA9IHNlbGVjdGVkTWFpbGJveFxuXHRcdFx0XHR9LFxuXHRcdFx0XHRkcm9wZG93bldpZHRoOiAzMDAsXG5cdFx0XHRcdGRpc2FibGVkOiBzdGF0ZS50eXBlID09PSBcImV4cG9ydGluZ1wiLFxuXHRcdFx0XHRoZWxwTGFiZWw6ICgpID0+IGVtcHR5TGFiZWwsXG5cdFx0XHR9IHNhdGlzZmllcyBEcm9wRG93blNlbGVjdG9yQXR0cnM8TWFpbGJveERldGFpbD4pLFxuXHRcdFx0dGhpcy5yZW5kZXJTdGF0ZSh2bm9kZS5hdHRycy5tYWlsRXhwb3J0Q29udHJvbGxlciksXG5cdFx0XVxuXHR9XG5cblx0cHJpdmF0ZSByZW5kZXJTdGF0ZShjb250cm9sbGVyOiBNYWlsRXhwb3J0Q29udHJvbGxlcik6IENoaWxkcmVuIHtcblx0XHRjb25zdCBzdGF0ZSA9IGNvbnRyb2xsZXIuc3RhdGUoKVxuXHRcdHN3aXRjaCAoc3RhdGUudHlwZSkge1xuXHRcdFx0Y2FzZSBcImV4cG9ydGluZ1wiOlxuXHRcdFx0XHRyZXR1cm4gW1xuXHRcdFx0XHRcdG0oXG5cdFx0XHRcdFx0XHRcIi5mbGV4LXN0YXJ0Lm10LW0uc21hbGxcIixcblx0XHRcdFx0XHRcdGxhbmcuZ2V0KFwiZXhwb3J0aW5nRW1haWxzX2xhYmVsXCIsIHtcblx0XHRcdFx0XHRcdFx0XCJ7Y291bnR9XCI6IHN0YXRlLmV4cG9ydGVkTWFpbHMsXG5cdFx0XHRcdFx0XHR9KSxcblx0XHRcdFx0XHQpLFxuXHRcdFx0XHRcdG0oXCIuZmxleC1zcGFjZS1iZXR3ZWVuLmJvcmRlci1yYWRpdXMtYmlnLm10LXMucmVsLm5hdi1iZy5mdWxsLXdpZHRoLmNlbnRlci12ZXJ0aWNhbGx5XCIsIFtcblx0XHRcdFx0XHRcdG0oSWNvbiwge1xuXHRcdFx0XHRcdFx0XHRpY29uOiBCb290SWNvbnMuUHJvZ3Jlc3MsXG5cdFx0XHRcdFx0XHRcdGNsYXNzOiBcImZsZXgtY2VudGVyIGl0ZW1zLWNlbnRlciBpY29uLXByb2dyZXNzLXRpbnkgaWNvbi1wcm9ncmVzcyBtbC1zXCIsXG5cdFx0XHRcdFx0XHRcdHNpemU6IEljb25TaXplLk1lZGl1bSxcblx0XHRcdFx0XHRcdH0pLFxuXHRcdFx0XHRcdFx0bShJY29uQnV0dG9uLCB7XG5cdFx0XHRcdFx0XHRcdHRpdGxlOiBcImNhbmNlbF9hY3Rpb25cIixcblx0XHRcdFx0XHRcdFx0aWNvbjogSWNvbnMuQ2FuY2VsLFxuXHRcdFx0XHRcdFx0XHRjbGljazogKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdGNvbnRyb2xsZXIuY2FuY2VsRXhwb3J0KClcblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0c2l6ZTogQnV0dG9uU2l6ZS5Ob3JtYWwsXG5cdFx0XHRcdFx0XHR9KSxcblx0XHRcdFx0XHRdKSxcblx0XHRcdFx0XVxuXHRcdFx0Y2FzZSBcImlkbGVcIjpcblx0XHRcdFx0cmV0dXJuIFtcblx0XHRcdFx0XHRtKFwiLmZsZXgtc3RhcnQubXQtbVwiLCB0aGlzLnJlbmRlckV4cG9ydEluZm9UZXh0KCkpLFxuXHRcdFx0XHRcdG0oXG5cdFx0XHRcdFx0XHRcIi5mbGV4LXN0YXJ0Lm10LXNcIixcblx0XHRcdFx0XHRcdG0oTG9naW5CdXR0b24sIHtcblx0XHRcdFx0XHRcdFx0dHlwZTogTG9naW5CdXR0b25UeXBlLkZsZXhXaWR0aCxcblx0XHRcdFx0XHRcdFx0bGFiZWw6IFwiZXhwb3J0X2FjdGlvblwiLFxuXHRcdFx0XHRcdFx0XHRvbmNsaWNrOiAoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKHRoaXMuc2VsZWN0ZWRNYWlsYm94KSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRjb250cm9sbGVyLnN0YXJ0RXhwb3J0KHRoaXMuc2VsZWN0ZWRNYWlsYm94KVxuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdH0pLFxuXHRcdFx0XHRcdCksXG5cdFx0XHRcdF1cblx0XHRcdGNhc2UgXCJlcnJvclwiOlxuXHRcdFx0XHRyZXR1cm4gW1xuXHRcdFx0XHRcdG0oXCIuZmxleC1zcGFjZS1iZXR3ZWVuLml0ZW1zLWNlbnRlci5tdC5tYi1zXCIsIFtcblx0XHRcdFx0XHRcdG0oXCJzbWFsbC5ub3NlbGVjdFwiLCBzdGF0ZS5tZXNzYWdlKSxcblx0XHRcdFx0XHRcdG0oQnV0dG9uLCB7XG5cdFx0XHRcdFx0XHRcdGxhYmVsOiBcInJldHJ5X2FjdGlvblwiLFxuXHRcdFx0XHRcdFx0XHRjbGljazogKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdGNvbnRyb2xsZXIuY2FuY2VsRXhwb3J0KClcblx0XHRcdFx0XHRcdFx0XHRpZiAodGhpcy5zZWxlY3RlZE1haWxib3gpIHtcblx0XHRcdFx0XHRcdFx0XHRcdGNvbnRyb2xsZXIuc3RhcnRFeHBvcnQodGhpcy5zZWxlY3RlZE1haWxib3gpXG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHR0eXBlOiBCdXR0b25UeXBlLlNlY29uZGFyeSxcblx0XHRcdFx0XHRcdH0pLFxuXHRcdFx0XHRcdF0pLFxuXHRcdFx0XHRdXG5cdFx0XHRjYXNlIFwiZmluaXNoZWRcIjpcblx0XHRcdFx0cmV0dXJuIFtcblx0XHRcdFx0XHRtKFwic21hbGwubm9zZWxlY3RcIiwgbGFuZy5nZXQoXCJleHBvcnRGaW5pc2hlZF9sYWJlbFwiKSksXG5cdFx0XHRcdFx0bShcblx0XHRcdFx0XHRcdFwiLmZsZXgtc3RhcnQubXQtc1wiLFxuXHRcdFx0XHRcdFx0bShMb2dpbkJ1dHRvbiwge1xuXHRcdFx0XHRcdFx0XHR0eXBlOiBMb2dpbkJ1dHRvblR5cGUuRmxleFdpZHRoLFxuXHRcdFx0XHRcdFx0XHRsYWJlbDogXCJvcGVuX2FjdGlvblwiLFxuXHRcdFx0XHRcdFx0XHRvbmNsaWNrOiAoKSA9PiB0aGlzLm9uT3BlbkNsaWNrZWQoY29udHJvbGxlciksXG5cdFx0XHRcdFx0XHR9KSxcblx0XHRcdFx0XHQpLFxuXHRcdFx0XHRdXG5cdFx0XHRjYXNlIFwibG9ja2VkXCI6XG5cdFx0XHRcdHJldHVybiBbXG5cdFx0XHRcdFx0bShcIi5mbGV4LXNwYWNlLWJldHdlZW4uaXRlbXMtY2VudGVyLm10Lm1iLXMuYnV0dG9uLWhlaWdodFwiLCBbXG5cdFx0XHRcdFx0XHRtKFwic21hbGwubm9zZWxlY3RcIiwgYCR7bGFuZy5nZXQoXCJleHBvcnRSdW5uaW5nRWxzZXdoZXJlX2xhYmVsXCIpfSAke2xhbmcuZ2V0KFwicGxlYXNlV2FpdF9tc2dcIil9YCksXG5cdFx0XHRcdFx0XSksXG5cdFx0XHRcdF1cblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIG9uT3BlbkNsaWNrZWQoY29udHJvbGxlcjogTWFpbEV4cG9ydENvbnRyb2xsZXIpIHtcblx0XHRhd2FpdCBjb250cm9sbGVyLm9wZW5FeHBvcnREaXJlY3RvcnkoKVxuXHRcdGF3YWl0IGNvbnRyb2xsZXIuY2FuY2VsRXhwb3J0KClcblx0fVxuXG5cdHByaXZhdGUgcmVuZGVyRXhwb3J0SW5mb1RleHQoKSB7XG5cdFx0cmV0dXJuIFttKFwiLnNtYWxsXCIsIGxhbmcuZ2V0KFwibWFpbEV4cG9ydEluZm9UZXh0X2xhYmVsXCIpKV1cblx0fVxufVxuIiwiaW1wb3J0IG0sIHsgQ2hpbGRyZW4gfSBmcm9tIFwibWl0aHJpbFwiXG5pbXBvcnQgeyBhc3NlcnRNYWluT3JOb2RlLCBpc0Rlc2t0b3AsIGlzV2ViQ2xpZW50IH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9hcGkvY29tbW9uL0VudlwiXG5pbXBvcnQgeyBsYW5nIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9taXNjL0xhbmd1YWdlVmlld01vZGVsXCJcbmltcG9ydCB7IFVwZGF0YWJsZVNldHRpbmdzVmlld2VyIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9zZXR0aW5ncy9JbnRlcmZhY2VzLmpzXCJcbmltcG9ydCB7IG1haWxMb2NhdG9yIH0gZnJvbSBcIi4uL21haWxMb2NhdG9yLmpzXCJcbmltcG9ydCB7IE1haWxFeHBvcnRTZXR0aW5ncyB9IGZyb20gXCIuL01haWxFeHBvcnRTZXR0aW5nc1wiXG5pbXBvcnQgeyBNYWlsRXhwb3J0Q29udHJvbGxlciB9IGZyb20gXCIuLi9uYXRpdmUvbWFpbi9NYWlsRXhwb3J0Q29udHJvbGxlci5qc1wiXG5pbXBvcnQgeyBMb2dpbkJ1dHRvbiwgTG9naW5CdXR0b25UeXBlIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvYmFzZS9idXR0b25zL0xvZ2luQnV0dG9uXCJcblxuYXNzZXJ0TWFpbk9yTm9kZSgpXG5cbmV4cG9ydCBjbGFzcyBNYWlsRXhwb3J0Vmlld2VyIGltcGxlbWVudHMgVXBkYXRhYmxlU2V0dGluZ3NWaWV3ZXIge1xuXHRwcml2YXRlIG1haWxFeHBvcnRDb250cm9sbGVyOiBNYWlsRXhwb3J0Q29udHJvbGxlciB8IG51bGwgPSBudWxsXG5cblx0Y29uc3RydWN0b3IoKSB7XG5cdFx0dGhpcy52aWV3ID0gdGhpcy52aWV3LmJpbmQodGhpcylcblxuXHRcdGlmIChpc0Rlc2t0b3AoKSkge1xuXHRcdFx0Ly8gZXhwb3J0IGlzIG9ubHkgYXZhaWxhYmxlIG9uIGRlc2t0b3Bcblx0XHRcdG1haWxMb2NhdG9yLm1haWxFeHBvcnRDb250cm9sbGVyKCkudGhlbigoY29udHJvbGxlcikgPT4ge1xuXHRcdFx0XHR0aGlzLm1haWxFeHBvcnRDb250cm9sbGVyID0gY29udHJvbGxlclxuXHRcdFx0XHRtLnJlZHJhdygpXG5cdFx0XHR9KVxuXHRcdH1cblx0fVxuXG5cdHZpZXcoKTogQ2hpbGRyZW4ge1xuXHRcdHJldHVybiBbXG5cdFx0XHRtKFxuXHRcdFx0XHRcIi5maWxsLWFic29sdXRlLnNjcm9sbC5wbHItbC5wYi14bFwiLFxuXHRcdFx0XHRtKFwiLmg0Lm10LWxcIiwgbGFuZy5nZXQoXCJtYWlsRXhwb3J0U2V0dGluZ3NfbGFiZWxcIikpLFxuXHRcdFx0XHRpc0Rlc2t0b3AoKSA/IHRoaXMucmVuZGVyTWFpbEV4cG9ydFNldHRpbmdzKCkgOiB0aGlzLnJlbmRlckV4cG9ydE9ubHlPbkRlc2t0b3BUZXh0KCksXG5cdFx0XHQpLFxuXHRcdF1cblx0fVxuXG5cdHByaXZhdGUgcmVuZGVyTWFpbEV4cG9ydFNldHRpbmdzKCkge1xuXHRcdHJldHVybiB0aGlzLm1haWxFeHBvcnRDb250cm9sbGVyICE9IG51bGxcblx0XHRcdD8gbShNYWlsRXhwb3J0U2V0dGluZ3MsIHtcblx0XHRcdFx0XHRtYWlsYm94RGV0YWlsczogbWFpbExvY2F0b3IubWFpbGJveE1vZGVsLm1haWxib3hEZXRhaWxzKCksXG5cdFx0XHRcdFx0bG9naW5zOiBtYWlsTG9jYXRvci5sb2dpbnMsXG5cdFx0XHRcdFx0bWFpbEV4cG9ydENvbnRyb2xsZXI6IHRoaXMubWFpbEV4cG9ydENvbnRyb2xsZXIsXG5cdFx0XHQgIH0pXG5cdFx0XHQ6IG51bGxcblx0fVxuXG5cdHByaXZhdGUgcmVuZGVyRXhwb3J0T25seU9uRGVza3RvcFRleHQoKSB7XG5cdFx0cmV0dXJuIFtcblx0XHRcdG0oXG5cdFx0XHRcdFwiLmZsZXgtY29sdW1uLm10XCIsXG5cdFx0XHRcdG0oXCIucFwiLCBsYW5nLmdldChcIm1haWxFeHBvcnRPbmx5T25EZXNrdG9wX2xhYmVsXCIpKSxcblx0XHRcdFx0bShcblx0XHRcdFx0XHRcIi5mbGV4LXN0YXJ0Lm10LWxcIixcblx0XHRcdFx0XHRtKExvZ2luQnV0dG9uLCB7XG5cdFx0XHRcdFx0XHR0eXBlOiBMb2dpbkJ1dHRvblR5cGUuRmxleFdpZHRoLFxuXHRcdFx0XHRcdFx0bGFiZWw6IFwiZG93bmxvYWREZXNrdG9wQ2xpZW50X2xhYmVsXCIsXG5cdFx0XHRcdFx0XHRvbmNsaWNrOiAoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IGRlc2t0b3BDbGllbnREb3dubG9hZFVyaSA9IFwiaHR0cHM6Ly90dXRhLmNvbSNkb3dubG9hZFwiXG5cdFx0XHRcdFx0XHRcdGlmIChpc1dlYkNsaWVudCgpKSB7XG5cdFx0XHRcdFx0XHRcdFx0b3BlbihkZXNrdG9wQ2xpZW50RG93bmxvYWRVcmkpXG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0bWFpbExvY2F0b3Iuc3lzdGVtRmFjYWRlLm9wZW5MaW5rKGRlc2t0b3BDbGllbnREb3dubG9hZFVyaSlcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHR9KSxcblx0XHRcdFx0KSxcblx0XHRcdFx0bShcblx0XHRcdFx0XHRcIi5mbGV4LXYtY2VudGVyLmZ1bGwtd2lkdGgubXQteGxcIixcblx0XHRcdFx0XHRtKFwiaW1nXCIsIHtcblx0XHRcdFx0XHRcdHNyYzogYCR7d2luZG93LnR1dGFvLmFwcFN0YXRlLnByZWZpeFdpdGhvdXRGaWxlfS9pbWFnZXMvbWFpbC1pbXBvcnQvZW1haWwtaW1wb3J0LXdlYmFwcC5zdmdgLFxuXHRcdFx0XHRcdFx0YWx0OiBcIlwiLFxuXHRcdFx0XHRcdFx0cmVsOiBcIm5vcmVmZXJyZXJcIixcblx0XHRcdFx0XHRcdGxvYWRpbmc6IFwibGF6eVwiLFxuXHRcdFx0XHRcdFx0ZGVjb2Rpbmc6IFwiYXN5bmNcIixcblx0XHRcdFx0XHRcdGNsYXNzOiBcInNldHRpbmdzLWlsbHVzdHJhdGlvbi1sYXJnZVwiLFxuXHRcdFx0XHRcdH0pLFxuXHRcdFx0XHQpLFxuXHRcdFx0KSxcblx0XHRdXG5cdH1cblxuXHRhc3luYyBlbnRpdHlFdmVudHNSZWNlaXZlZCgpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKClcblx0fVxufVxuIiwiaW1wb3J0IG0sIHsgQ2hpbGRyZW4sIFZub2RlLCBWbm9kZURPTSB9IGZyb20gXCJtaXRocmlsXCJcbmltcG9ydCBzdHJlYW0gZnJvbSBcIm1pdGhyaWwvc3RyZWFtXCJcbmltcG9ydCB7IGFzc2VydE1haW5Pck5vZGUsIGlzQXBwLCBpc0Rlc2t0b3AsIGlzSU9TQXBwIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9hcGkvY29tbW9uL0VudlwiXG5pbXBvcnQgeyBDb2x1bW5UeXBlLCBWaWV3Q29sdW1uIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvYmFzZS9WaWV3Q29sdW1uXCJcbmltcG9ydCB7IFZpZXdTbGlkZXIgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2d1aS9uYXYvVmlld1NsaWRlci5qc1wiXG5pbXBvcnQgeyBTZXR0aW5nc0ZvbGRlciB9IGZyb20gXCIuLi8uLi9jb21tb24vc2V0dGluZ3MvU2V0dGluZ3NGb2xkZXIuanNcIlxuaW1wb3J0IHsgbGFuZyB9IGZyb20gXCIuLi8uLi9jb21tb24vbWlzYy9MYW5ndWFnZVZpZXdNb2RlbFwiXG5pbXBvcnQgeyBIZWFkZXIgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2d1aS9IZWFkZXIuanNcIlxuaW1wb3J0IHsgTG9naW5TZXR0aW5nc1ZpZXdlciB9IGZyb20gXCIuLi8uLi9jb21tb24vc2V0dGluZ3MvbG9naW4vTG9naW5TZXR0aW5nc1ZpZXdlci5qc1wiXG5pbXBvcnQgeyBHbG9iYWxTZXR0aW5nc1ZpZXdlciB9IGZyb20gXCIuL0dsb2JhbFNldHRpbmdzVmlld2VyXCJcbmltcG9ydCB7IERlc2t0b3BTZXR0aW5nc1ZpZXdlciB9IGZyb20gXCIuL0Rlc2t0b3BTZXR0aW5nc1ZpZXdlclwiXG5pbXBvcnQgeyBNYWlsU2V0dGluZ3NWaWV3ZXIgfSBmcm9tIFwiLi9NYWlsU2V0dGluZ3NWaWV3ZXJcIlxuaW1wb3J0IHsgVXNlckxpc3RWaWV3IH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9zZXR0aW5ncy9Vc2VyTGlzdFZpZXcuanNcIlxuaW1wb3J0IHR5cGUgeyBSZWNlaXZlZEdyb3VwSW52aXRhdGlvbiwgVXNlciB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL2VudGl0aWVzL3N5cy9UeXBlUmVmcy5qc1wiXG5pbXBvcnQgeyBDdXN0b21lckluZm9UeXBlUmVmLCBDdXN0b21lclR5cGVSZWYgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2FwaS9lbnRpdGllcy9zeXMvVHlwZVJlZnMuanNcIlxuaW1wb3J0IHsgR3JvdXBMaXN0VmlldyB9IGZyb20gXCIuL2dyb3Vwcy9Hcm91cExpc3RWaWV3LmpzXCJcbmltcG9ydCB7IFdoaXRlbGFiZWxTZXR0aW5nc1ZpZXdlciB9IGZyb20gXCIuLi8uLi9jb21tb24vc2V0dGluZ3Mvd2hpdGVsYWJlbC9XaGl0ZWxhYmVsU2V0dGluZ3NWaWV3ZXJcIlxuaW1wb3J0IHsgSWNvbnMgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2d1aS9iYXNlL2ljb25zL0ljb25zXCJcbmltcG9ydCB7IHRoZW1lIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvdGhlbWVcIlxuaW1wb3J0IHsgRmVhdHVyZVR5cGUsIEdyb3VwVHlwZSwgTGVnYWN5UGxhbnMgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2FwaS9jb21tb24vVHV0YW5vdGFDb25zdGFudHNcIlxuaW1wb3J0IHsgQm9vdEljb25zIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvYmFzZS9pY29ucy9Cb290SWNvbnNcIlxuaW1wb3J0IHsgbG9jYXRvciB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL21haW4vQ29tbW9uTG9jYXRvclwiXG5pbXBvcnQgeyBTdWJzY3JpcHRpb25WaWV3ZXIgfSBmcm9tIFwiLi4vLi4vY29tbW9uL3N1YnNjcmlwdGlvbi9TdWJzY3JpcHRpb25WaWV3ZXJcIlxuaW1wb3J0IHsgUGF5bWVudFZpZXdlciB9IGZyb20gXCIuLi8uLi9jb21tb24vc3Vic2NyaXB0aW9uL1BheW1lbnRWaWV3ZXJcIlxuaW1wb3J0IHsgc2hvd1VzZXJJbXBvcnREaWFsb2cgfSBmcm9tIFwiLi4vLi4vY29tbW9uL3NldHRpbmdzL1VzZXJWaWV3ZXIuanNcIlxuaW1wb3J0IHsgZmlyc3QsIExhenlMb2FkZWQsIHBhcnRpdGlvbiwgcHJvbWlzZU1hcCB9IGZyb20gXCJAdHV0YW8vdHV0YW5vdGEtdXRpbHNcIlxuaW1wb3J0IHsgQXBwZWFyYW5jZVNldHRpbmdzVmlld2VyIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9zZXR0aW5ncy9BcHBlYXJhbmNlU2V0dGluZ3NWaWV3ZXIuanNcIlxuaW1wb3J0IHR5cGUgeyBOYXZCdXR0b25BdHRycyB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL2Jhc2UvTmF2QnV0dG9uLmpzXCJcbmltcG9ydCB7IE5hdkJ1dHRvbkNvbG9yIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvYmFzZS9OYXZCdXR0b24uanNcIlxuaW1wb3J0IHsgU0VUVElOR1NfUFJFRklYIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9taXNjL1JvdXRlQ2hhbmdlXCJcbmltcG9ydCB7IHNpemUgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2d1aS9zaXplXCJcbmltcG9ydCB7IEZvbGRlckNvbHVtblZpZXcgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2d1aS9Gb2xkZXJDb2x1bW5WaWV3LmpzXCJcbmltcG9ydCB7IGdldEV0SWQgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2FwaS9jb21tb24vdXRpbHMvRW50aXR5VXRpbHNcIlxuaW1wb3J0IHsgS25vd2xlZGdlQmFzZUxpc3RWaWV3IH0gZnJvbSBcIi4vS25vd2xlZGdlQmFzZUxpc3RWaWV3XCJcbmltcG9ydCB0eXBlIHsgVGVtcGxhdGVHcm91cEluc3RhbmNlIH0gZnJvbSBcIi4uL3RlbXBsYXRlcy9tb2RlbC9UZW1wbGF0ZUdyb3VwTW9kZWxcIlxuaW1wb3J0IHsgc2hvd0dyb3VwU2hhcmluZ0RpYWxvZyB9IGZyb20gXCIuLi8uLi9jb21tb24vc2hhcmluZy92aWV3L0dyb3VwU2hhcmluZ0RpYWxvZ1wiXG5pbXBvcnQgeyBjcmVhdGVNb3JlQWN0aW9uQnV0dG9uQXR0cnMsIGdldENvbmZpcm1hdGlvbiB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL2Jhc2UvR3VpVXRpbHNcIlxuaW1wb3J0IHsgU2lkZWJhclNlY3Rpb24gfSBmcm9tIFwiLi4vLi4vY29tbW9uL2d1aS9TaWRlYmFyU2VjdGlvblwiXG5pbXBvcnQgeyBSZWNlaXZlZEdyb3VwSW52aXRhdGlvbnNNb2RlbCB9IGZyb20gXCIuLi8uLi9jb21tb24vc2hhcmluZy9tb2RlbC9SZWNlaXZlZEdyb3VwSW52aXRhdGlvbnNNb2RlbFwiXG5pbXBvcnQgeyBnZXREZWZhdWx0R3JvdXBOYW1lLCBnZXRTaGFyZWRHcm91cE5hbWUsIGlzU2hhcmVkR3JvdXBPd25lciB9IGZyb20gXCIuLi8uLi9jb21tb24vc2hhcmluZy9Hcm91cFV0aWxzXCJcbmltcG9ydCB7IER1bW15VGVtcGxhdGVMaXN0VmlldyB9IGZyb20gXCIuL0R1bW15VGVtcGxhdGVMaXN0Vmlld1wiXG5pbXBvcnQgeyBTZXR0aW5nc0ZvbGRlclJvdyB9IGZyb20gXCIuLi8uLi9jb21tb24vc2V0dGluZ3MvU2V0dGluZ3NGb2xkZXJSb3cuanNcIlxuaW1wb3J0IHsgc2hvd1Byb2dyZXNzRGlhbG9nIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9ndWkvZGlhbG9ncy9Qcm9ncmVzc0RpYWxvZ1wiXG5pbXBvcnQgeyBjcmVhdGVHcm91cFNldHRpbmdzLCBjcmVhdGVVc2VyQXJlYUdyb3VwRGVsZXRlRGF0YSB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL2VudGl0aWVzL3R1dGFub3RhL1R5cGVSZWZzLmpzXCJcbmltcG9ydCB7IEdyb3VwSW52aXRhdGlvbkZvbGRlclJvdyB9IGZyb20gXCIuLi8uLi9jb21tb24vc2hhcmluZy92aWV3L0dyb3VwSW52aXRhdGlvbkZvbGRlclJvd1wiXG5pbXBvcnQgeyBUZW1wbGF0ZUdyb3VwU2VydmljZSB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL2VudGl0aWVzL3R1dGFub3RhL1NlcnZpY2VzXCJcbmltcG9ydCB7IGV4cG9ydFVzZXJDc3YgfSBmcm9tIFwiLi4vLi4vY29tbW9uL3NldHRpbmdzL1VzZXJEYXRhRXhwb3J0ZXIuanNcIlxuaW1wb3J0IHsgSWNvbkJ1dHRvbiB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL2Jhc2UvSWNvbkJ1dHRvbi5qc1wiXG5pbXBvcnQgeyBCb3R0b21OYXYgfSBmcm9tIFwiLi4vZ3VpL0JvdHRvbU5hdi5qc1wiXG5pbXBvcnQgeyBnZXRBdmFpbGFibGVEb21haW5zIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9zZXR0aW5ncy9tYWlsYWRkcmVzcy9NYWlsQWRkcmVzc2VzVXRpbHMuanNcIlxuaW1wb3J0IHsgQmFzZVRvcExldmVsVmlldyB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL0Jhc2VUb3BMZXZlbFZpZXcuanNcIlxuaW1wb3J0IHsgVG9wTGV2ZWxWaWV3IH0gZnJvbSBcIi4uLy4uL1RvcExldmVsVmlldy5qc1wiXG5pbXBvcnQgeyBSZWZlcnJhbFNldHRpbmdzVmlld2VyIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9zZXR0aW5ncy9SZWZlcnJhbFNldHRpbmdzVmlld2VyLmpzXCJcbmltcG9ydCB7IExvZ2luQ29udHJvbGxlciB9IGZyb20gXCIuLi8uLi9jb21tb24vYXBpL21haW4vTG9naW5Db250cm9sbGVyLmpzXCJcbmltcG9ydCB7IEJhY2tncm91bmRDb2x1bW5MYXlvdXQgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2d1aS9CYWNrZ3JvdW5kQ29sdW1uTGF5b3V0LmpzXCJcbmltcG9ydCB7IHN0eWxlcyB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL3N0eWxlcy5qc1wiXG5pbXBvcnQgeyBNb2JpbGVIZWFkZXIgfSBmcm9tIFwiLi4vLi4vY29tbW9uL2d1aS9Nb2JpbGVIZWFkZXIuanNcIlxuaW1wb3J0IHsgaXNDdXN0b21pemF0aW9uRW5hYmxlZEZvckN1c3RvbWVyIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9hcGkvY29tbW9uL3V0aWxzL0N1c3RvbWVyVXRpbHMuanNcIlxuaW1wb3J0IHsgRW50aXR5VXBkYXRlRGF0YSwgaXNVcGRhdGVGb3JUeXBlUmVmIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9hcGkvY29tbW9uL3V0aWxzL0VudGl0eVVwZGF0ZVV0aWxzLmpzXCJcbmltcG9ydCB7IERpYWxvZyB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL2Jhc2UvRGlhbG9nLmpzXCJcbmltcG9ydCB7IEFib3V0RGlhbG9nIH0gZnJvbSBcIi4uLy4uL2NvbW1vbi9zZXR0aW5ncy9BYm91dERpYWxvZy5qc1wiXG5pbXBvcnQgeyBsb2FkVGVtcGxhdGVHcm91cEluc3RhbmNlcyB9IGZyb20gXCIuLi90ZW1wbGF0ZXMvbW9kZWwvVGVtcGxhdGVQb3B1cE1vZGVsLmpzXCJcbmltcG9ydCB7IFRlbXBsYXRlTGlzdFZpZXcgfSBmcm9tIFwiLi9UZW1wbGF0ZUxpc3RWaWV3LmpzXCJcbmltcG9ydCB7IFRleHRGaWVsZCB9IGZyb20gXCIuLi8uLi9jb21tb24vZ3VpL2Jhc2UvVGV4dEZpZWxkLmpzXCJcbmltcG9ydCB7IENvbnRhY3RzU2V0dGluZ3NWaWV3ZXIgfSBmcm9tIFwiLi9Db250YWN0c1NldHRpbmdzVmlld2VyLmpzXCJcbmltcG9ydCB7IE5vdGlmaWNhdGlvblNldHRpbmdzVmlld2VyIH0gZnJvbSBcIi4vTm90aWZpY2F0aW9uU2V0dGluZ3NWaWV3ZXIuanNcIlxuaW1wb3J0IHsgU2V0dGluZ3NWaWV3QXR0cnMsIFVwZGF0YWJsZVNldHRpbmdzRGV0YWlsc1ZpZXdlciwgVXBkYXRhYmxlU2V0dGluZ3NWaWV3ZXIgfSBmcm9tIFwiLi4vLi4vY29tbW9uL3NldHRpbmdzL0ludGVyZmFjZXMuanNcIlxuaW1wb3J0IHsgQWZmaWxpYXRlU2V0dGluZ3NWaWV3ZXIgfSBmcm9tIFwiLi4vLi4vY29tbW9uL3NldHRpbmdzL0FmZmlsaWF0ZVNldHRpbmdzVmlld2VyLmpzXCJcbmltcG9ydCB7IEFmZmlsaWF0ZUtwaXNWaWV3ZXIgfSBmcm9tIFwiLi4vLi4vY29tbW9uL3NldHRpbmdzL0FmZmlsaWF0ZUtwaXNWaWV3ZXIuanNcIlxuaW1wb3J0IHsgRGVza3RvcE1haWxJbXBvcnRTZXR0aW5nc1ZpZXdlciB9IGZyb20gXCIuL0Rlc2t0b3BNYWlsSW1wb3J0U2V0dGluZ3NWaWV3ZXIuanNcIlxuaW1wb3J0IHsgbWFpbExvY2F0b3IgfSBmcm9tIFwiLi4vbWFpbExvY2F0b3JcIlxuaW1wb3J0IHsgV2ViTWFpbEltcG9ydFNldHRpbmdzVmlld2VyIH0gZnJvbSBcIi4vV2ViTWFpbEltcG9ydFNldHRpbmdzVmlld2VyLmpzXCJcbmltcG9ydCB7IE1haWxFeHBvcnRWaWV3ZXIgfSBmcm9tIFwiLi9NYWlsRXhwb3J0Vmlld2VyXCJcblxuYXNzZXJ0TWFpbk9yTm9kZSgpXG5cbmV4cG9ydCBjbGFzcyBTZXR0aW5nc1ZpZXcgZXh0ZW5kcyBCYXNlVG9wTGV2ZWxWaWV3IGltcGxlbWVudHMgVG9wTGV2ZWxWaWV3PFNldHRpbmdzVmlld0F0dHJzPiB7XG5cdHZpZXdTbGlkZXI6IFZpZXdTbGlkZXJcblx0cHJpdmF0ZSByZWFkb25seSBfc2V0dGluZ3NGb2xkZXJzQ29sdW1uOiBWaWV3Q29sdW1uXG5cdHByaXZhdGUgcmVhZG9ubHkgX3NldHRpbmdzQ29sdW1uOiBWaWV3Q29sdW1uXG5cdHByaXZhdGUgcmVhZG9ubHkgX3NldHRpbmdzRGV0YWlsc0NvbHVtbjogVmlld0NvbHVtblxuXHRwcml2YXRlIHJlYWRvbmx5IF91c2VyRm9sZGVyczogU2V0dGluZ3NGb2xkZXI8dW5rbm93bj5bXVxuXHRwcml2YXRlIHJlYWRvbmx5IF9hZG1pbkZvbGRlcnM6IFNldHRpbmdzRm9sZGVyPHVua25vd24+W11cblx0cHJpdmF0ZSByZWFkb25seSBsb2dpbnM6IExvZ2luQ29udHJvbGxlclxuXHRwcml2YXRlIF90ZW1wbGF0ZUZvbGRlcnM6IFNldHRpbmdzRm9sZGVyPFRlbXBsYXRlR3JvdXBJbnN0YW5jZT5bXVxuXHRwcml2YXRlIHJlYWRvbmx5IF9kdW1teVRlbXBsYXRlRm9sZGVyOiBTZXR0aW5nc0ZvbGRlcjx1bmtub3duPlxuXHRwcml2YXRlIF9rbm93bGVkZ2VCYXNlRm9sZGVyczogU2V0dGluZ3NGb2xkZXI8dW5rbm93bj5bXVxuXHRwcml2YXRlIF9zZWxlY3RlZEZvbGRlcjogU2V0dGluZ3NGb2xkZXI8dW5rbm93bj5cblx0cHJpdmF0ZSBfY3VycmVudFZpZXdlcjogVXBkYXRhYmxlU2V0dGluZ3NWaWV3ZXIgfCBudWxsID0gbnVsbFxuXHRwcml2YXRlIHNob3dCdXNpbmVzc1NldHRpbmdzOiBzdHJlYW08Ym9vbGVhbj4gPSBzdHJlYW0oZmFsc2UpXG5cdHByaXZhdGUgc2hvd0FmZmlsaWF0ZVNldHRpbmdzOiBib29sZWFuID0gZmFsc2Vcblx0cHJpdmF0ZSByZWFkb25seSBfdGFyZ2V0Rm9sZGVyOiBzdHJpbmdcblx0cHJpdmF0ZSByZWFkb25seSBfdGFyZ2V0Um91dGU6IHN0cmluZ1xuXHRkZXRhaWxzVmlld2VyOiBVcGRhdGFibGVTZXR0aW5nc0RldGFpbHNWaWV3ZXIgfCBudWxsID0gbnVsbCAvLyB0aGUgY29tcG9uZW50IGZvciB0aGUgZGV0YWlscyBjb2x1bW4uIGNhbiBiZSBzZXQgYnkgc2V0dGluZ3Mgdmlld3NcblxuXHRfY3VzdG9tRG9tYWluczogTGF6eUxvYWRlZDxzdHJpbmdbXT5cblx0X3RlbXBsYXRlSW52aXRhdGlvbnM6IFJlY2VpdmVkR3JvdXBJbnZpdGF0aW9uc01vZGVsPEdyb3VwVHlwZS5UZW1wbGF0ZT5cblxuXHRjb25zdHJ1Y3Rvcih2bm9kZTogVm5vZGU8U2V0dGluZ3NWaWV3QXR0cnM+KSB7XG5cdFx0c3VwZXIoKVxuXHRcdHRoaXMubG9naW5zID0gdm5vZGUuYXR0cnMubG9naW5zXG5cdFx0dGhpcy5fdXNlckZvbGRlcnMgPSBbXG5cdFx0XHRuZXcgU2V0dGluZ3NGb2xkZXIoXG5cdFx0XHRcdFwibG9naW5fbGFiZWxcIixcblx0XHRcdFx0KCkgPT4gQm9vdEljb25zLkNvbnRhY3RzLFxuXHRcdFx0XHRcImxvZ2luXCIsXG5cdFx0XHRcdCgpID0+IG5ldyBMb2dpblNldHRpbmdzVmlld2VyKGxvY2F0b3IuY3JlZGVudGlhbHNQcm92aWRlciwgaXNBcHAoKSA/IGxvY2F0b3Iuc3lzdGVtRmFjYWRlIDogbnVsbCksXG5cdFx0XHRcdHVuZGVmaW5lZCxcblx0XHRcdCksXG5cdFx0XHRuZXcgU2V0dGluZ3NGb2xkZXIoXG5cdFx0XHRcdFwiZW1haWxfbGFiZWxcIixcblx0XHRcdFx0KCkgPT4gQm9vdEljb25zLk1haWwsXG5cdFx0XHRcdFwibWFpbFwiLFxuXHRcdFx0XHQoKSA9PiBuZXcgTWFpbFNldHRpbmdzVmlld2VyKCksXG5cdFx0XHRcdHVuZGVmaW5lZCxcblx0XHRcdCksXG5cdFx0XHRuZXcgU2V0dGluZ3NGb2xkZXIoXG5cdFx0XHRcdFwiY29udGFjdHNfbGFiZWxcIixcblx0XHRcdFx0KCkgPT4gQm9vdEljb25zLkNvbnRhY3RzLFxuXHRcdFx0XHRcImNvbnRhY3RzXCIsXG5cdFx0XHRcdCgpID0+IG5ldyBDb250YWN0c1NldHRpbmdzVmlld2VyKCksXG5cdFx0XHRcdHVuZGVmaW5lZCxcblx0XHRcdCksXG5cdFx0XHRuZXcgU2V0dGluZ3NGb2xkZXIoXG5cdFx0XHRcdFwiYXBwZWFyYW5jZVNldHRpbmdzX2xhYmVsXCIsXG5cdFx0XHRcdCgpID0+IEljb25zLlBhbGV0dGUsXG5cdFx0XHRcdFwiYXBwZWFyYW5jZVwiLFxuXHRcdFx0XHQoKSA9PiBuZXcgQXBwZWFyYW5jZVNldHRpbmdzVmlld2VyKCksXG5cdFx0XHRcdHVuZGVmaW5lZCxcblx0XHRcdCksXG5cdFx0XHRuZXcgU2V0dGluZ3NGb2xkZXIoXG5cdFx0XHRcdFwibm90aWZpY2F0aW9uU2V0dGluZ3NfYWN0aW9uXCIsXG5cdFx0XHRcdCgpID0+IEljb25zLkJlbGwsXG5cdFx0XHRcdFwibm90aWZpY2F0aW9uc1wiLFxuXHRcdFx0XHQoKSA9PiBuZXcgTm90aWZpY2F0aW9uU2V0dGluZ3NWaWV3ZXIoKSxcblx0XHRcdFx0dW5kZWZpbmVkLFxuXHRcdFx0KSxcblx0XHRdXG5cblx0XHRpZiAoaXNEZXNrdG9wKCkpIHtcblx0XHRcdHRoaXMuX3VzZXJGb2xkZXJzLnB1c2goXG5cdFx0XHRcdG5ldyBTZXR0aW5nc0ZvbGRlcihcblx0XHRcdFx0XHRcImRlc2t0b3BfbGFiZWxcIixcblx0XHRcdFx0XHQoKSA9PiBJY29ucy5EZXNrdG9wLFxuXHRcdFx0XHRcdFwiZGVza3RvcFwiLFxuXHRcdFx0XHRcdCgpID0+IHtcblx0XHRcdFx0XHRcdGNvbnN0IGRlc2t0b3BTZXR0aW5nc1ZpZXdlciA9IG5ldyBEZXNrdG9wU2V0dGluZ3NWaWV3ZXIoKVxuXHRcdFx0XHRcdFx0bG9jYXRvci5pbml0aWFsaXplZC50aGVuKCgpID0+IHtcblx0XHRcdFx0XHRcdFx0bG9jYXRvci5uYXRpdmUuc2V0QXBwVXBkYXRlTGlzdGVuZXIoKCkgPT4gZGVza3RvcFNldHRpbmdzVmlld2VyLm9uQXBwVXBkYXRlQXZhaWxhYmxlKCkpXG5cdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdFx0cmV0dXJuIGRlc2t0b3BTZXR0aW5nc1ZpZXdlclxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0dW5kZWZpbmVkLFxuXHRcdFx0XHQpLFxuXHRcdFx0KVxuXHRcdH1cblxuXHRcdG1haWxMb2NhdG9yLm1haWxib3hNb2RlbC5nZXRNYWlsYm94RGV0YWlscygpLnRoZW4oKG1haWxib3hlcykgPT4ge1xuXHRcdFx0aWYgKGZpcnN0KG1haWxib3hlcyk/Lm1haWxib3guY3VycmVudE1haWxCYWcgIT0gbnVsbCkge1xuXHRcdFx0XHR0aGlzLl91c2VyRm9sZGVycy5wdXNoKFxuXHRcdFx0XHRcdG5ldyBTZXR0aW5nc0ZvbGRlcihcblx0XHRcdFx0XHRcdFwibWFpbEltcG9ydFNldHRpbmdzX2xhYmVsXCIsXG5cdFx0XHRcdFx0XHQoKSA9PiBJY29ucy5JbXBvcnQsXG5cdFx0XHRcdFx0XHRcIm1haWxJbXBvcnRcIixcblx0XHRcdFx0XHRcdCgpID0+IHtcblx0XHRcdFx0XHRcdFx0aWYgKGlzRGVza3RvcCgpKSB7XG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuIG5ldyBEZXNrdG9wTWFpbEltcG9ydFNldHRpbmdzVmlld2VyKCgpID0+IG1haWxMb2NhdG9yLmdldE1haWxJbXBvcnRlcigpKVxuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdHJldHVybiBuZXcgV2ViTWFpbEltcG9ydFNldHRpbmdzVmlld2VyKClcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdHVuZGVmaW5lZCxcblx0XHRcdFx0XHQpLFxuXHRcdFx0XHQpXG5cdFx0XHR9XG5cdFx0fSlcblxuXHRcdHRoaXMuX3VzZXJGb2xkZXJzLnB1c2goXG5cdFx0XHRuZXcgU2V0dGluZ3NGb2xkZXIoXG5cdFx0XHRcdFwibWFpbEV4cG9ydFNldHRpbmdzX2xhYmVsXCIsXG5cdFx0XHRcdCgpID0+IEljb25zLkV4cG9ydCxcblx0XHRcdFx0XCJtYWlsRXhwb3J0XCIsXG5cdFx0XHRcdCgpID0+IG5ldyBNYWlsRXhwb3J0Vmlld2VyKCksXG5cdFx0XHRcdHVuZGVmaW5lZCxcblx0XHRcdCksXG5cdFx0KVxuXG5cdFx0dGhpcy5fYWRtaW5Gb2xkZXJzID0gW11cblx0XHR0aGlzLl90ZW1wbGF0ZUZvbGRlcnMgPSBbXVxuXG5cdFx0dGhpcy5fbWFrZVRlbXBsYXRlRm9sZGVycygpLnRoZW4oKGZvbGRlcnMpID0+IHtcblx0XHRcdHRoaXMuX3RlbXBsYXRlRm9sZGVycyA9IGZvbGRlcnNcblx0XHRcdG0ucmVkcmF3KClcblx0XHR9KVxuXG5cdFx0dGhpcy5fZHVtbXlUZW1wbGF0ZUZvbGRlciA9IG5ldyBTZXR0aW5nc0ZvbGRlcjx2b2lkPihcblx0XHRcdGxhbmcubWFrZVRyYW5zbGF0aW9uKFwiZ3JvdXBfbmFtZVwiLCBnZXREZWZhdWx0R3JvdXBOYW1lKEdyb3VwVHlwZS5UZW1wbGF0ZSkpLFxuXHRcdFx0KCkgPT4gSWNvbnMuTGlzdEFsdCxcblx0XHRcdHtcblx0XHRcdFx0Zm9sZGVyOiBcInRlbXBsYXRlc1wiLFxuXHRcdFx0XHRpZDogXCJpbml0XCIsXG5cdFx0XHR9LFxuXHRcdFx0KCkgPT4ge1xuXHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdHZpZXc6ICgpID0+IHtcblx0XHRcdFx0XHRcdHJldHVybiBtKER1bW15VGVtcGxhdGVMaXN0Vmlldylcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdGVudGl0eUV2ZW50c1JlY2VpdmVkOiAoKSA9PiBQcm9taXNlLnJlc29sdmUoKSxcblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHRcdHVuZGVmaW5lZCxcblx0XHQpXG5cdFx0dGhpcy5fa25vd2xlZGdlQmFzZUZvbGRlcnMgPSBbXVxuXG5cdFx0dGhpcy5fbWFrZUtub3dsZWRnZUJhc2VGb2xkZXJzKCkudGhlbigoZm9sZGVycykgPT4ge1xuXHRcdFx0dGhpcy5fa25vd2xlZGdlQmFzZUZvbGRlcnMgPSBmb2xkZXJzXG5cdFx0XHRtLnJlZHJhdygpXG5cdFx0fSlcblxuXHRcdHRoaXMuX3NlbGVjdGVkRm9sZGVyID0gdGhpcy5fdXNlckZvbGRlcnNbMF1cblx0XHR0aGlzLl90ZW1wbGF0ZUludml0YXRpb25zID0gbmV3IFJlY2VpdmVkR3JvdXBJbnZpdGF0aW9uc01vZGVsKEdyb3VwVHlwZS5UZW1wbGF0ZSwgbG9jYXRvci5ldmVudENvbnRyb2xsZXIsIGxvY2F0b3IuZW50aXR5Q2xpZW50LCB0aGlzLmxvZ2lucylcblxuXHRcdHRoaXMuX3RlbXBsYXRlSW52aXRhdGlvbnMuaW52aXRhdGlvbnMubWFwKCgpID0+IG0ucmVkcmF3KCkpXG5cblx0XHR0aGlzLl90ZW1wbGF0ZUludml0YXRpb25zLmluaXQoKVxuXG5cdFx0dGhpcy5fc2V0dGluZ3NGb2xkZXJzQ29sdW1uID0gbmV3IFZpZXdDb2x1bW4oXG5cdFx0XHR7XG5cdFx0XHRcdG9uYmVmb3JlcmVtb3ZlOiAoKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5fdGVtcGxhdGVJbnZpdGF0aW9ucy5kaXNwb3NlKClcblx0XHRcdFx0fSxcblx0XHRcdFx0dmlldzogKCkgPT4ge1xuXHRcdFx0XHRcdGNvbnN0IFtvd25UZW1wbGF0ZXMsIHNoYXJlZFRlbXBsYXRlc10gPSBwYXJ0aXRpb24odGhpcy5fdGVtcGxhdGVGb2xkZXJzLCAoZm9sZGVyKSA9PlxuXHRcdFx0XHRcdFx0aXNTaGFyZWRHcm91cE93bmVyKGZvbGRlci5kYXRhLmdyb3VwLCB0aGlzLmxvZ2lucy5nZXRVc2VyQ29udHJvbGxlcigpLnVzZXIpLFxuXHRcdFx0XHRcdClcblxuXHRcdFx0XHRcdGNvbnN0IHRlbXBsYXRlSW52aXRhdGlvbnMgPSB0aGlzLl90ZW1wbGF0ZUludml0YXRpb25zLmludml0YXRpb25zKClcblxuXHRcdFx0XHRcdHJldHVybiBtKEZvbGRlckNvbHVtblZpZXcsIHtcblx0XHRcdFx0XHRcdGRyYXdlcjogdm5vZGUuYXR0cnMuZHJhd2VyQXR0cnMsXG5cdFx0XHRcdFx0XHRidXR0b246IG51bGwsXG5cdFx0XHRcdFx0XHRjb250ZW50OiBtKFwiLmZsZXguZmxleC1ncm93LmNvbFwiLCBbXG5cdFx0XHRcdFx0XHRcdG0oXG5cdFx0XHRcdFx0XHRcdFx0U2lkZWJhclNlY3Rpb24sXG5cdFx0XHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRcdFx0bmFtZTogXCJ1c2VyU2V0dGluZ3NfbGFiZWxcIixcblx0XHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRcdFtcblx0XHRcdFx0XHRcdFx0XHRcdHRoaXMuX3JlbmRlclNpZGViYXJTZWN0aW9uQ2hpbGRyZW4odGhpcy5fdXNlckZvbGRlcnMpLFxuXHRcdFx0XHRcdFx0XHRcdFx0b3duVGVtcGxhdGVzLmxlbmd0aCA+IDBcblx0XHRcdFx0XHRcdFx0XHRcdFx0PyBvd25UZW1wbGF0ZXMubWFwKChmb2xkZXIpID0+IHRoaXMuX3JlbmRlclRlbXBsYXRlRm9sZGVyUm93KGZvbGRlcikpXG5cdFx0XHRcdFx0XHRcdFx0XHRcdDogbShTZXR0aW5nc0ZvbGRlclJvdywge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0bWFpbkJ1dHRvbkF0dHJzOiB0aGlzLl9jcmVhdGVTZXR0aW5nc0ZvbGRlck5hdkJ1dHRvbih0aGlzLl9kdW1teVRlbXBsYXRlRm9sZGVyKSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0ICB9KSxcblx0XHRcdFx0XHRcdFx0XHRcdHNoYXJlZFRlbXBsYXRlcy5tYXAoKGZvbGRlcikgPT4gdGhpcy5fcmVuZGVyVGVtcGxhdGVGb2xkZXJSb3coZm9sZGVyKSksXG5cdFx0XHRcdFx0XHRcdFx0XSxcblx0XHRcdFx0XHRcdFx0KSxcblx0XHRcdFx0XHRcdFx0dGhpcy5sb2dpbnMuaXNVc2VyTG9nZ2VkSW4oKSAmJiB0aGlzLmxvZ2lucy5nZXRVc2VyQ29udHJvbGxlcigpLmlzR2xvYmFsQWRtaW4oKVxuXHRcdFx0XHRcdFx0XHRcdD8gbShcblx0XHRcdFx0XHRcdFx0XHRcdFx0U2lkZWJhclNlY3Rpb24sXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRuYW1lOiBcImFkbWluU2V0dGluZ3NfbGFiZWxcIixcblx0XHRcdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5fcmVuZGVyU2lkZWJhclNlY3Rpb25DaGlsZHJlbih0aGlzLl9hZG1pbkZvbGRlcnMpLFxuXHRcdFx0XHRcdFx0XHRcdCAgKVxuXHRcdFx0XHRcdFx0XHRcdDogbnVsbCxcblx0XHRcdFx0XHRcdFx0dGVtcGxhdGVJbnZpdGF0aW9ucy5sZW5ndGggPiAwXG5cdFx0XHRcdFx0XHRcdFx0PyBtKFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRTaWRlYmFyU2VjdGlvbixcblx0XHRcdFx0XHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdG5hbWU6IFwidGVtcGxhdGVHcm91cEludml0YXRpb25zX2xhYmVsXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRlbXBsYXRlSW52aXRhdGlvbnMubWFwKChpbnZpdGF0aW9uKSA9PiB0aGlzLl9yZW5kZXJUZW1wbGF0ZUludml0YXRpb25Gb2xkZXJSb3coaW52aXRhdGlvbikpLFxuXHRcdFx0XHRcdFx0XHRcdCAgKVxuXHRcdFx0XHRcdFx0XHRcdDogbnVsbCxcblx0XHRcdFx0XHRcdFx0dGhpcy5fa25vd2xlZGdlQmFzZUZvbGRlcnMubGVuZ3RoID4gMFxuXHRcdFx0XHRcdFx0XHRcdD8gbShcblx0XHRcdFx0XHRcdFx0XHRcdFx0U2lkZWJhclNlY3Rpb24sXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRuYW1lOiBcImtub3dsZWRnZWJhc2VfbGFiZWxcIixcblx0XHRcdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5fcmVuZGVyU2lkZWJhclNlY3Rpb25DaGlsZHJlbih0aGlzLl9rbm93bGVkZ2VCYXNlRm9sZGVycyksXG5cdFx0XHRcdFx0XHRcdFx0ICApXG5cdFx0XHRcdFx0XHRcdFx0OiBudWxsLFxuXHRcdFx0XHRcdFx0XHRsb2NhdG9yLmRvbWFpbkNvbmZpZ1Byb3ZpZGVyKCkuZ2V0Q3VycmVudERvbWFpbkNvbmZpZygpLmZpcnN0UGFydHlEb21haW4gPyB0aGlzLl9hYm91dFRoaXNTb2Z0d2FyZUxpbmsoKSA6IG51bGwsXG5cdFx0XHRcdFx0XHRdKSxcblx0XHRcdFx0XHRcdGFyaWFMYWJlbDogXCJzZXR0aW5nc19sYWJlbFwiLFxuXHRcdFx0XHRcdH0pXG5cdFx0XHRcdH0sXG5cdFx0XHR9LFxuXHRcdFx0Q29sdW1uVHlwZS5Gb3JlZ3JvdW5kLFxuXHRcdFx0e1xuXHRcdFx0XHRtaW5XaWR0aDogc2l6ZS5maXJzdF9jb2xfbWluX3dpZHRoLFxuXHRcdFx0XHRtYXhXaWR0aDogc2l6ZS5maXJzdF9jb2xfbWF4X3dpZHRoLFxuXHRcdFx0XHRoZWFkZXJDZW50ZXI6IFwic2V0dGluZ3NfbGFiZWxcIixcblx0XHRcdH0sXG5cdFx0KVxuXHRcdHRoaXMuX3NldHRpbmdzQ29sdW1uID0gbmV3IFZpZXdDb2x1bW4oXG5cdFx0XHR7XG5cdFx0XHRcdC8vIHRoZSBDU1MgaW1wcm92ZXMgdGhlIHNpdHVhdGlvbiBvbiBkZXZpY2VzIHdpdGggbm90Y2hlcyAobm8gY29udHJvbCBlbGVtZW50c1xuXHRcdFx0XHQvLyBhcmUgY29uY2VhbGVkKSwgYnV0IHRoZXJlJ3Mgc3RpbGwgcm9vbSBmb3IgaW1wcm92ZW1lbnQgZm9yIHNjcm9sbGJhcnNcblx0XHRcdFx0dmlldzogKCkgPT5cblx0XHRcdFx0XHRtKEJhY2tncm91bmRDb2x1bW5MYXlvdXQsIHtcblx0XHRcdFx0XHRcdGJhY2tncm91bmRDb2xvcjogdGhlbWUubmF2aWdhdGlvbl9iZyxcblx0XHRcdFx0XHRcdGNvbHVtbkxheW91dDogbShcblx0XHRcdFx0XHRcdFx0XCIubWxyLXNhZmUtaW5zZXQuZmlsbC1hYnNvbHV0ZS5jb250ZW50LWJnXCIsXG5cdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHRjbGFzczogc3R5bGVzLmlzVXNpbmdCb3R0b21OYXZpZ2F0aW9uKCkgPyBcIlwiIDogXCJib3JkZXItcmFkaXVzLXRvcC1sZWZ0LWJpZ1wiLFxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRtKHRoaXMuX2dldEN1cnJlbnRWaWV3ZXIoKSEpLFxuXHRcdFx0XHRcdFx0KSxcblx0XHRcdFx0XHRcdG1vYmlsZUhlYWRlcjogKCkgPT5cblx0XHRcdFx0XHRcdFx0bShNb2JpbGVIZWFkZXIsIHtcblx0XHRcdFx0XHRcdFx0XHQuLi52bm9kZS5hdHRycy5oZWFkZXIsXG5cdFx0XHRcdFx0XHRcdFx0YmFja0FjdGlvbjogKCkgPT4gdGhpcy52aWV3U2xpZGVyLmZvY3VzUHJldmlvdXNDb2x1bW4oKSxcblx0XHRcdFx0XHRcdFx0XHRjb2x1bW5UeXBlOiBcImZpcnN0XCIsXG5cdFx0XHRcdFx0XHRcdFx0dGl0bGU6IHRoaXMuX3NlbGVjdGVkRm9sZGVyLm5hbWUsXG5cdFx0XHRcdFx0XHRcdFx0YWN0aW9uczogW10sXG5cdFx0XHRcdFx0XHRcdFx0cHJpbWFyeUFjdGlvbjogKCkgPT4gbnVsbCxcblx0XHRcdFx0XHRcdFx0fSksXG5cdFx0XHRcdFx0XHRkZXNrdG9wVG9vbGJhcjogKCkgPT4gbnVsbCxcblx0XHRcdFx0XHR9KSxcblx0XHRcdH0sXG5cdFx0XHRDb2x1bW5UeXBlLkJhY2tncm91bmQsXG5cdFx0XHR7XG5cdFx0XHRcdG1pbldpZHRoOiA0MDAsXG5cdFx0XHRcdG1heFdpZHRoOiA2MDAsXG5cdFx0XHRcdGhlYWRlckNlbnRlcjogdGhpcy5fc2VsZWN0ZWRGb2xkZXIubmFtZSxcblx0XHRcdH0sXG5cdFx0KVxuXHRcdHRoaXMuX3NldHRpbmdzRGV0YWlsc0NvbHVtbiA9IG5ldyBWaWV3Q29sdW1uKFxuXHRcdFx0e1xuXHRcdFx0XHR2aWV3OiAoKSA9PlxuXHRcdFx0XHRcdG0oQmFja2dyb3VuZENvbHVtbkxheW91dCwge1xuXHRcdFx0XHRcdFx0YmFja2dyb3VuZENvbG9yOiB0aGVtZS5uYXZpZ2F0aW9uX2JnLFxuXHRcdFx0XHRcdFx0Y29sdW1uTGF5b3V0OiBtKFwiLm1sci1zYWZlLWluc2V0LmZpbGwtYWJzb2x1dGUuY29udGVudC1iZ1wiLCB0aGlzLmRldGFpbHNWaWV3ZXIgPyB0aGlzLmRldGFpbHNWaWV3ZXIucmVuZGVyVmlldygpIDogbShcIlwiKSksXG5cdFx0XHRcdFx0XHRtb2JpbGVIZWFkZXI6ICgpID0+XG5cdFx0XHRcdFx0XHRcdG0oTW9iaWxlSGVhZGVyLCB7XG5cdFx0XHRcdFx0XHRcdFx0Li4udm5vZGUuYXR0cnMuaGVhZGVyLFxuXHRcdFx0XHRcdFx0XHRcdGJhY2tBY3Rpb246ICgpID0+IHRoaXMudmlld1NsaWRlci5mb2N1c1ByZXZpb3VzQ29sdW1uKCksXG5cdFx0XHRcdFx0XHRcdFx0Y29sdW1uVHlwZTogXCJvdGhlclwiLFxuXHRcdFx0XHRcdFx0XHRcdHRpdGxlOiB0aGlzLl9zZWxlY3RlZEZvbGRlci5uYW1lLFxuXHRcdFx0XHRcdFx0XHRcdGFjdGlvbnM6IFtdLFxuXHRcdFx0XHRcdFx0XHRcdHByaW1hcnlBY3Rpb246ICgpID0+IG51bGwsXG5cdFx0XHRcdFx0XHRcdH0pLFxuXHRcdFx0XHRcdFx0ZGVza3RvcFRvb2xiYXI6ICgpID0+IG51bGwsXG5cdFx0XHRcdFx0fSksXG5cdFx0XHR9LFxuXHRcdFx0Q29sdW1uVHlwZS5CYWNrZ3JvdW5kLFxuXHRcdFx0e1xuXHRcdFx0XHRtaW5XaWR0aDogNTAwLFxuXHRcdFx0XHRtYXhXaWR0aDogMjQwMCxcblx0XHRcdFx0aGVhZGVyQ2VudGVyOiBcInNldHRpbmdzX2xhYmVsXCIsXG5cdFx0XHR9LFxuXHRcdClcblx0XHR0aGlzLnZpZXdTbGlkZXIgPSBuZXcgVmlld1NsaWRlcihbdGhpcy5fc2V0dGluZ3NGb2xkZXJzQ29sdW1uLCB0aGlzLl9zZXR0aW5nc0NvbHVtbiwgdGhpcy5fc2V0dGluZ3NEZXRhaWxzQ29sdW1uXSlcblxuXHRcdHRoaXMuX2N1c3RvbURvbWFpbnMgPSBuZXcgTGF6eUxvYWRlZChhc3luYyAoKSA9PiB7XG5cdFx0XHRjb25zdCBkb21haW5JbmZvcyA9IGF3YWl0IGdldEF2YWlsYWJsZURvbWFpbnModGhpcy5sb2dpbnMsIHRydWUpXG5cdFx0XHRyZXR1cm4gZG9tYWluSW5mb3MubWFwKChpbmZvKSA9PiBpbmZvLmRvbWFpbilcblx0XHR9KVxuXG5cdFx0dGhpcy5fY3VzdG9tRG9tYWlucy5nZXRBc3luYygpLnRoZW4oKCkgPT4gbS5yZWRyYXcoKSlcblxuXHRcdHRoaXMuX3RhcmdldEZvbGRlciA9IG0ucm91dGUucGFyYW0oXCJmb2xkZXJcIilcblx0XHR0aGlzLl90YXJnZXRSb3V0ZSA9IG0ucm91dGUuZ2V0KClcblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgcG9wdWxhdGVBZG1pbkZvbGRlcnMoKSB7XG5cdFx0YXdhaXQgdGhpcy51cGRhdGVTaG93QnVzaW5lc3NTZXR0aW5ncygpXG5cdFx0YXdhaXQgdGhpcy51cGRhdGVTaG93QWZmaWxpYXRlU2V0dGluZ3MoKVxuXHRcdGNvbnN0IGN1cnJlbnRQbGFuVHlwZSA9IGF3YWl0IHRoaXMubG9naW5zLmdldFVzZXJDb250cm9sbGVyKCkuZ2V0UGxhblR5cGUoKVxuXHRcdGNvbnN0IGlzTGVnYWN5UGxhbiA9IExlZ2FjeVBsYW5zLmluY2x1ZGVzKGN1cnJlbnRQbGFuVHlwZSlcblxuXHRcdGlmIChhd2FpdCB0aGlzLmxvZ2lucy5nZXRVc2VyQ29udHJvbGxlcigpLmNhbkhhdmVVc2VycygpKSB7XG5cdFx0XHR0aGlzLl9hZG1pbkZvbGRlcnMucHVzaChcblx0XHRcdFx0bmV3IFNldHRpbmdzRm9sZGVyKFxuXHRcdFx0XHRcdFwiYWRtaW5Vc2VyTGlzdF9hY3Rpb25cIixcblx0XHRcdFx0XHQoKSA9PiBCb290SWNvbnMuQ29udGFjdHMsXG5cdFx0XHRcdFx0XCJ1c2Vyc1wiLFxuXHRcdFx0XHRcdCgpID0+XG5cdFx0XHRcdFx0XHRuZXcgVXNlckxpc3RWaWV3KFxuXHRcdFx0XHRcdFx0XHQodmlld2VyKSA9PiB0aGlzLnJlcGxhY2VEZXRhaWxzVmlld2VyKHZpZXdlciksXG5cdFx0XHRcdFx0XHRcdCgpID0+IHRoaXMuZm9jdXNTZXR0aW5nc0RldGFpbHNDb2x1bW4oKSxcblx0XHRcdFx0XHRcdFx0KCkgPT4gIWlzQXBwKCkgJiYgdGhpcy5fY3VzdG9tRG9tYWlucy5pc0xvYWRlZCgpICYmIHRoaXMuX2N1c3RvbURvbWFpbnMuZ2V0TG9hZGVkKCkubGVuZ3RoID4gMCxcblx0XHRcdFx0XHRcdFx0KCkgPT4gc2hvd1VzZXJJbXBvcnREaWFsb2codGhpcy5fY3VzdG9tRG9tYWlucy5nZXRMb2FkZWQoKSksXG5cdFx0XHRcdFx0XHRcdCgpID0+IGV4cG9ydFVzZXJDc3YobG9jYXRvci5lbnRpdHlDbGllbnQsIHRoaXMubG9naW5zLCBsb2NhdG9yLmZpbGVDb250cm9sbGVyLCBsb2NhdG9yLmNvdW50ZXJGYWNhZGUpLFxuXHRcdFx0XHRcdFx0KSxcblx0XHRcdFx0XHR1bmRlZmluZWQsXG5cdFx0XHRcdCksXG5cdFx0XHQpXG5cdFx0XHRpZiAoIXRoaXMubG9naW5zLmlzRW5hYmxlZChGZWF0dXJlVHlwZS5XaGl0ZWxhYmVsQ2hpbGQpKSB7XG5cdFx0XHRcdHRoaXMuX2FkbWluRm9sZGVycy5wdXNoKFxuXHRcdFx0XHRcdG5ldyBTZXR0aW5nc0ZvbGRlcihcblx0XHRcdFx0XHRcdFwic2hhcmVkTWFpbGJveGVzX2xhYmVsXCIsXG5cdFx0XHRcdFx0XHQoKSA9PiBJY29ucy5QZW9wbGUsXG5cdFx0XHRcdFx0XHRcImdyb3Vwc1wiLFxuXHRcdFx0XHRcdFx0KCkgPT5cblx0XHRcdFx0XHRcdFx0bmV3IEdyb3VwTGlzdFZpZXcoXG5cdFx0XHRcdFx0XHRcdFx0KHZpZXdlcikgPT4gdGhpcy5yZXBsYWNlRGV0YWlsc1ZpZXdlcih2aWV3ZXIpLFxuXHRcdFx0XHRcdFx0XHRcdCgpID0+IHRoaXMuZm9jdXNTZXR0aW5nc0RldGFpbHNDb2x1bW4oKSxcblx0XHRcdFx0XHRcdFx0KSxcblx0XHRcdFx0XHRcdHVuZGVmaW5lZCxcblx0XHRcdFx0XHQpLFxuXHRcdFx0XHQpXG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKHRoaXMubG9naW5zLmdldFVzZXJDb250cm9sbGVyKCkuaXNHbG9iYWxBZG1pbigpKSB7XG5cdFx0XHR0aGlzLl9hZG1pbkZvbGRlcnMucHVzaChcblx0XHRcdFx0bmV3IFNldHRpbmdzRm9sZGVyKFxuXHRcdFx0XHRcdFwiZ2xvYmFsU2V0dGluZ3NfbGFiZWxcIixcblx0XHRcdFx0XHQoKSA9PiBCb290SWNvbnMuU2V0dGluZ3MsXG5cdFx0XHRcdFx0XCJnbG9iYWxcIixcblx0XHRcdFx0XHQoKSA9PiBuZXcgR2xvYmFsU2V0dGluZ3NWaWV3ZXIoKSxcblx0XHRcdFx0XHR1bmRlZmluZWQsXG5cdFx0XHRcdCksXG5cdFx0XHQpXG5cblx0XHRcdGlmICghdGhpcy5sb2dpbnMuaXNFbmFibGVkKEZlYXR1cmVUeXBlLldoaXRlbGFiZWxDaGlsZCkgJiYgIWlzSU9TQXBwKCkpIHtcblx0XHRcdFx0dGhpcy5fYWRtaW5Gb2xkZXJzLnB1c2goXG5cdFx0XHRcdFx0bmV3IFNldHRpbmdzRm9sZGVyKFxuXHRcdFx0XHRcdFx0XCJ3aGl0ZWxhYmVsX2xhYmVsXCIsXG5cdFx0XHRcdFx0XHQoKSA9PiBJY29ucy5XYW5kLFxuXHRcdFx0XHRcdFx0XCJ3aGl0ZWxhYmVsXCIsXG5cdFx0XHRcdFx0XHQoKSA9PiBuZXcgV2hpdGVsYWJlbFNldHRpbmdzVmlld2VyKGxvY2F0b3IuZW50aXR5Q2xpZW50LCB0aGlzLmxvZ2lucyksXG5cdFx0XHRcdFx0XHR1bmRlZmluZWQsXG5cdFx0XHRcdFx0KSxcblx0XHRcdFx0KVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGlmICghdGhpcy5sb2dpbnMuaXNFbmFibGVkKEZlYXR1cmVUeXBlLldoaXRlbGFiZWxDaGlsZCkpIHtcblx0XHRcdGlmICh0aGlzLmxvZ2lucy5nZXRVc2VyQ29udHJvbGxlcigpLmlzR2xvYmFsQWRtaW4oKSkge1xuXHRcdFx0XHR0aGlzLl9hZG1pbkZvbGRlcnMucHVzaChcblx0XHRcdFx0XHRuZXcgU2V0dGluZ3NGb2xkZXI8dm9pZD4oXG5cdFx0XHRcdFx0XHRcImFkbWluU3Vic2NyaXB0aW9uX2FjdGlvblwiLFxuXHRcdFx0XHRcdFx0KCkgPT4gQm9vdEljb25zLlByZW1pdW0sXG5cdFx0XHRcdFx0XHRcInN1YnNjcmlwdGlvblwiLFxuXHRcdFx0XHRcdFx0KCkgPT4gbmV3IFN1YnNjcmlwdGlvblZpZXdlcihjdXJyZW50UGxhblR5cGUsIGlzSU9TQXBwKCkgPyBsb2NhdG9yLm1vYmlsZVBheW1lbnRzRmFjYWRlIDogbnVsbCksXG5cdFx0XHRcdFx0XHR1bmRlZmluZWQsXG5cdFx0XHRcdFx0KSxcblx0XHRcdFx0KVxuXG5cdFx0XHRcdHRoaXMuX2FkbWluRm9sZGVycy5wdXNoKFxuXHRcdFx0XHRcdG5ldyBTZXR0aW5nc0ZvbGRlcjx2b2lkPihcblx0XHRcdFx0XHRcdFwiYWRtaW5QYXltZW50X2FjdGlvblwiLFxuXHRcdFx0XHRcdFx0KCkgPT4gSWNvbnMuQ3JlZGl0Q2FyZCxcblx0XHRcdFx0XHRcdFwiaW52b2ljZVwiLFxuXHRcdFx0XHRcdFx0KCkgPT4gbmV3IFBheW1lbnRWaWV3ZXIoKSxcblx0XHRcdFx0XHRcdHVuZGVmaW5lZCxcblx0XHRcdFx0XHQpLFxuXHRcdFx0XHQpXG5cblx0XHRcdFx0dGhpcy5fYWRtaW5Gb2xkZXJzLnB1c2goXG5cdFx0XHRcdFx0bmV3IFNldHRpbmdzRm9sZGVyKFxuXHRcdFx0XHRcdFx0XCJyZWZlcnJhbFNldHRpbmdzX2xhYmVsXCIsXG5cdFx0XHRcdFx0XHQoKSA9PiBCb290SWNvbnMuU2hhcmUsXG5cdFx0XHRcdFx0XHRcInJlZmVycmFsXCIsXG5cdFx0XHRcdFx0XHQoKSA9PiBuZXcgUmVmZXJyYWxTZXR0aW5nc1ZpZXdlcigpLFxuXHRcdFx0XHRcdFx0dW5kZWZpbmVkLFxuXHRcdFx0XHRcdCkuc2V0SXNWaXNpYmxlSGFuZGxlcigoKSA9PiAhdGhpcy5zaG93QnVzaW5lc3NTZXR0aW5ncygpKSxcblx0XHRcdFx0KVxuXG5cdFx0XHRcdHRoaXMuX2FkbWluRm9sZGVycy5wdXNoKFxuXHRcdFx0XHRcdG5ldyBTZXR0aW5nc0ZvbGRlcihcblx0XHRcdFx0XHRcdFwiYWZmaWxpYXRlU2V0dGluZ3NfbGFiZWxcIixcblx0XHRcdFx0XHRcdCgpID0+IEJvb3RJY29ucy5TaGFyZSxcblx0XHRcdFx0XHRcdFwiYWZmaWxpYXRlXCIsXG5cdFx0XHRcdFx0XHQoKSA9PlxuXHRcdFx0XHRcdFx0XHRuZXcgQWZmaWxpYXRlU2V0dGluZ3NWaWV3ZXIoXG5cdFx0XHRcdFx0XHRcdFx0KCkgPT4gdGhpcy52aWV3U2xpZGVyLmZvY3VzZWRDb2x1bW4gPT09IHRoaXMuX3NldHRpbmdzRGV0YWlsc0NvbHVtbixcblx0XHRcdFx0XHRcdFx0XHQoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAodGhpcy52aWV3U2xpZGVyLmZvY3VzZWRDb2x1bW4gIT09IHRoaXMuX3NldHRpbmdzRGV0YWlsc0NvbHVtbikge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnJlcGxhY2VEZXRhaWxzVmlld2VyKG5ldyBBZmZpbGlhdGVLcGlzVmlld2VyKCkpXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRoaXMuZm9jdXNTZXR0aW5nc0RldGFpbHNDb2x1bW4oKVxuXHRcdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5yZXBsYWNlRGV0YWlsc1ZpZXdlcihudWxsKVxuXHRcdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnZpZXdTbGlkZXIuZm9jdXModGhpcy5fc2V0dGluZ3NDb2x1bW4pXG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0KSxcblx0XHRcdFx0XHRcdHVuZGVmaW5lZCxcblx0XHRcdFx0XHQpLnNldElzVmlzaWJsZUhhbmRsZXIoKCkgPT4gdGhpcy5zaG93QWZmaWxpYXRlU2V0dGluZ3MpLFxuXHRcdFx0XHQpXG5cdFx0XHR9XG5cdFx0fVxuXHRcdG0ucmVkcmF3KClcblx0fVxuXG5cdHByaXZhdGUgcmVwbGFjZURldGFpbHNWaWV3ZXIodmlld2VyOiBVcGRhdGFibGVTZXR0aW5nc0RldGFpbHNWaWV3ZXIgfCBudWxsKTogVXBkYXRhYmxlU2V0dGluZ3NEZXRhaWxzVmlld2VyIHwgbnVsbCB7XG5cdFx0cmV0dXJuICh0aGlzLmRldGFpbHNWaWV3ZXIgPSB2aWV3ZXIpXG5cdH1cblxuXHRvbmNyZWF0ZSh2bm9kZTogVm5vZGU8U2V0dGluZ3NWaWV3QXR0cnM+KSB7XG5cdFx0bG9jYXRvci5ldmVudENvbnRyb2xsZXIuYWRkRW50aXR5TGlzdGVuZXIodGhpcy5lbnRpdHlMaXN0ZW5lcilcblx0XHR0aGlzLnBvcHVsYXRlQWRtaW5Gb2xkZXJzKCkudGhlbigoKSA9PiB7XG5cdFx0XHQvLyBXZSBoYXZlIHRvIHdhaXQgZm9yIHRoZSBmb2xkZXJzIHRvIGJlIGluaXRpYWxpemVkIGJlZm9yZSBzZXR0aW5nIHRoZSBVUkwsXG5cdFx0XHQvLyBvdGhlcndpc2Ugd2Ugd29uJ3QgZmluZCB0aGUgcmVxdWVzdGVkIGZvbGRlciBhbmQgd2lsbCBqdXN0IHBpY2sgdGhlIGRlZmF1bHQgZm9sZGVyXG5cdFx0XHRjb25zdCBzdGlsbEF0RGVmYXVsdFVybCA9IG0ucm91dGUuZ2V0KCkgPT09IHRoaXMuX3VzZXJGb2xkZXJzWzBdLnVybFxuXHRcdFx0aWYgKHN0aWxsQXREZWZhdWx0VXJsKSB7XG5cdFx0XHRcdHRoaXMub25OZXdVcmwoeyBmb2xkZXI6IHRoaXMuX3RhcmdldEZvbGRlciB9LCB0aGlzLl90YXJnZXRSb3V0ZSlcblx0XHRcdH1cblx0XHR9KVxuXHR9XG5cblx0b25yZW1vdmUodm5vZGU6IFZub2RlRE9NPFNldHRpbmdzVmlld0F0dHJzPikge1xuXHRcdGxvY2F0b3IuZXZlbnRDb250cm9sbGVyLnJlbW92ZUVudGl0eUxpc3RlbmVyKHRoaXMuZW50aXR5TGlzdGVuZXIpXG5cdH1cblxuXHRwcml2YXRlIGVudGl0eUxpc3RlbmVyID0gKHVwZGF0ZXM6IEVudGl0eVVwZGF0ZURhdGFbXSwgZXZlbnRPd25lckdyb3VwSWQ6IElkKSA9PiB7XG5cdFx0cmV0dXJuIHRoaXMuZW50aXR5RXZlbnRzUmVjZWl2ZWQodXBkYXRlcywgZXZlbnRPd25lckdyb3VwSWQpXG5cdH1cblxuXHR2aWV3KHsgYXR0cnMgfTogVm5vZGU8U2V0dGluZ3NWaWV3QXR0cnM+KTogQ2hpbGRyZW4ge1xuXHRcdHJldHVybiBtKFxuXHRcdFx0XCIjc2V0dGluZ3MubWFpbi12aWV3XCIsXG5cdFx0XHRtKHRoaXMudmlld1NsaWRlciwge1xuXHRcdFx0XHRoZWFkZXI6IG0oSGVhZGVyLCB7XG5cdFx0XHRcdFx0Li4uYXR0cnMuaGVhZGVyLFxuXHRcdFx0XHR9KSxcblx0XHRcdFx0Ym90dG9tTmF2OiBtKEJvdHRvbU5hdiksXG5cdFx0XHR9KSxcblx0XHQpXG5cdH1cblxuXHRfY3JlYXRlU2V0dGluZ3NGb2xkZXJOYXZCdXR0b24oZm9sZGVyOiBTZXR0aW5nc0ZvbGRlcjx1bmtub3duPik6IE5hdkJ1dHRvbkF0dHJzIHtcblx0XHRyZXR1cm4ge1xuXHRcdFx0bGFiZWw6IGZvbGRlci5uYW1lLFxuXHRcdFx0aWNvbjogZm9sZGVyLmljb24sXG5cdFx0XHRocmVmOiBmb2xkZXIudXJsLFxuXHRcdFx0Y29sb3JzOiBOYXZCdXR0b25Db2xvci5OYXYsXG5cdFx0XHRjbGljazogKCkgPT4gdGhpcy52aWV3U2xpZGVyLmZvY3VzKHRoaXMuX3NldHRpbmdzQ29sdW1uKSxcblx0XHRcdHBlcnNpc3RlbnRCYWNrZ3JvdW5kOiB0cnVlLFxuXHRcdH1cblx0fVxuXG5cdF9yZW5kZXJUZW1wbGF0ZUZvbGRlclJvdyhmb2xkZXI6IFNldHRpbmdzRm9sZGVyPFRlbXBsYXRlR3JvdXBJbnN0YW5jZT4pOiBDaGlsZHJlbiB7XG5cdFx0Y29uc3QgaW5zdGFuY2UgPSBmb2xkZXIuZGF0YVxuXHRcdGNvbnN0IGlzR3JvdXBPd25lciA9IGlzU2hhcmVkR3JvdXBPd25lcihpbnN0YW5jZS5ncm91cCwgZ2V0RXRJZCh0aGlzLmxvZ2lucy5nZXRVc2VyQ29udHJvbGxlcigpLnVzZXIpKVxuXHRcdHJldHVybiBtKFNldHRpbmdzRm9sZGVyUm93LCB7XG5cdFx0XHRtYWluQnV0dG9uQXR0cnM6IHRoaXMuX2NyZWF0ZVNldHRpbmdzRm9sZGVyTmF2QnV0dG9uKGZvbGRlciksXG5cdFx0XHRleHRyYUJ1dHRvbjogbShcblx0XHRcdFx0SWNvbkJ1dHRvbixcblx0XHRcdFx0Y3JlYXRlTW9yZUFjdGlvbkJ1dHRvbkF0dHJzKCgpID0+IFtcblx0XHRcdFx0XHRpc0dyb3VwT3duZXJcblx0XHRcdFx0XHRcdD8ge1xuXHRcdFx0XHRcdFx0XHRcdGxhYmVsOiBcImRlbGV0ZV9hY3Rpb25cIixcblx0XHRcdFx0XHRcdFx0XHRjbGljazogKCkgPT4gdGhpcy5fZGVsZXRlVGVtcGxhdGVHcm91cChmb2xkZXIuZGF0YSksXG5cdFx0XHRcdFx0XHRcdFx0aWNvbjogSWNvbnMuVHJhc2gsXG5cdFx0XHRcdFx0XHQgIH1cblx0XHRcdFx0XHRcdDoge1xuXHRcdFx0XHRcdFx0XHRcdGxhYmVsOiBcImxlYXZlR3JvdXBfYWN0aW9uXCIsXG5cdFx0XHRcdFx0XHRcdFx0Y2xpY2s6ICgpID0+IHRoaXMuX2xlYXZlVGVtcGxhdGVHcm91cChmb2xkZXIuZGF0YSksXG5cdFx0XHRcdFx0XHRcdFx0aWNvbjogSWNvbnMuVHJhc2gsXG5cdFx0XHRcdFx0XHQgIH0sXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0bGFiZWw6IFwic2hhcmluZ19sYWJlbFwiLFxuXHRcdFx0XHRcdFx0Y2xpY2s6ICgpID0+IHNob3dHcm91cFNoYXJpbmdEaWFsb2coZm9sZGVyLmRhdGEuZ3JvdXBJbmZvLCB0cnVlKSxcblx0XHRcdFx0XHRcdGljb246IEljb25zLkNvbnRhY3RJbXBvcnQsXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRsYWJlbDogXCJyZW5hbWVfYWN0aW9uXCIsXG5cdFx0XHRcdFx0XHRjbGljazogKCkgPT4gc2hvd1JlbmFtZVRlbXBsYXRlTGlzdERpYWxvZyhmb2xkZXIuZGF0YSksXG5cdFx0XHRcdFx0XHRpY29uOiBJY29ucy5FZGl0LFxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdF0pLFxuXHRcdFx0KSxcblx0XHR9KVxuXHR9XG5cblx0cHJpdmF0ZSBfbGVhdmVUZW1wbGF0ZUdyb3VwKHRlbXBsYXRlSW5mbzogVGVtcGxhdGVHcm91cEluc3RhbmNlKSB7XG5cdFx0cmV0dXJuIGdldENvbmZpcm1hdGlvbihcblx0XHRcdGxhbmcuZ2V0VHJhbnNsYXRpb24oXCJjb25maXJtTGVhdmVTaGFyZWRHcm91cF9tc2dcIiwge1xuXHRcdFx0XHRcIntncm91cE5hbWV9XCI6IGdldFNoYXJlZEdyb3VwTmFtZSh0ZW1wbGF0ZUluZm8uZ3JvdXBJbmZvLCB0aGlzLmxvZ2lucy5nZXRVc2VyQ29udHJvbGxlcigpLCBmYWxzZSksXG5cdFx0XHR9KSxcblx0XHQpLmNvbmZpcm1lZCgoKSA9PiBsb2NhdG9yLmdyb3VwTWFuYWdlbWVudEZhY2FkZS5yZW1vdmVVc2VyRnJvbUdyb3VwKGdldEV0SWQodGhpcy5sb2dpbnMuZ2V0VXNlckNvbnRyb2xsZXIoKS51c2VyKSwgdGVtcGxhdGVJbmZvLmdyb3VwSW5mby5ncm91cCkpXG5cdH1cblxuXHRwcml2YXRlIF9kZWxldGVUZW1wbGF0ZUdyb3VwKHRlbXBsYXRlSW5mbzogVGVtcGxhdGVHcm91cEluc3RhbmNlKSB7XG5cdFx0cmV0dXJuIGdldENvbmZpcm1hdGlvbihcImNvbmZpcm1EZWxldGVUZW1wbGF0ZUdyb3VwX21zZ1wiKS5jb25maXJtZWQoKCkgPT5cblx0XHRcdHNob3dQcm9ncmVzc0RpYWxvZyhcblx0XHRcdFx0XCJwbGVhc2VXYWl0X21zZ1wiLFxuXHRcdFx0XHRsb2NhdG9yLnNlcnZpY2VFeGVjdXRvci5kZWxldGUoXG5cdFx0XHRcdFx0VGVtcGxhdGVHcm91cFNlcnZpY2UsXG5cdFx0XHRcdFx0Y3JlYXRlVXNlckFyZWFHcm91cERlbGV0ZURhdGEoe1xuXHRcdFx0XHRcdFx0Z3JvdXA6IHRlbXBsYXRlSW5mby5ncm91cEluZm8uZ3JvdXAsXG5cdFx0XHRcdFx0fSksXG5cdFx0XHRcdCksXG5cdFx0XHQpLFxuXHRcdClcblx0fVxuXG5cdF9yZW5kZXJUZW1wbGF0ZUludml0YXRpb25Gb2xkZXJSb3coaW52aXRhdGlvbjogUmVjZWl2ZWRHcm91cEludml0YXRpb24pOiBDaGlsZHJlbiB7XG5cdFx0cmV0dXJuIG0oR3JvdXBJbnZpdGF0aW9uRm9sZGVyUm93LCB7XG5cdFx0XHRpbnZpdGF0aW9uOiBpbnZpdGF0aW9uLFxuXHRcdFx0aWNvbjogQm9vdEljb25zLk1haWwsXG5cdFx0fSlcblx0fVxuXG5cdF9yZW5kZXJTaWRlYmFyU2VjdGlvbkNoaWxkcmVuKGZvbGRlcnM6IFNldHRpbmdzRm9sZGVyPHVua25vd24+W10pOiBDaGlsZHJlbiB7XG5cdFx0cmV0dXJuIG0oXG5cdFx0XHRcIlwiLFxuXHRcdFx0Zm9sZGVyc1xuXHRcdFx0XHQuZmlsdGVyKChmb2xkZXIpID0+IGZvbGRlci5pc1Zpc2libGUoKSlcblx0XHRcdFx0Lm1hcCgoZm9sZGVyKSA9PiB7XG5cdFx0XHRcdFx0Y29uc3QgYnV0dG9uQXR0cnMgPSB0aGlzLl9jcmVhdGVTZXR0aW5nc0ZvbGRlck5hdkJ1dHRvbihmb2xkZXIpXG5cblx0XHRcdFx0XHRyZXR1cm4gbShTZXR0aW5nc0ZvbGRlclJvdywge1xuXHRcdFx0XHRcdFx0bWFpbkJ1dHRvbkF0dHJzOiBidXR0b25BdHRycyxcblx0XHRcdFx0XHR9KVxuXHRcdFx0XHR9KSxcblx0XHQpXG5cdH1cblxuXHRfZ2V0Q3VycmVudFZpZXdlcigpOiBVcGRhdGFibGVTZXR0aW5nc1ZpZXdlciB8IG51bGwge1xuXHRcdGlmICghdGhpcy5fY3VycmVudFZpZXdlcikge1xuXHRcdFx0dGhpcy5kZXRhaWxzVmlld2VyID0gbnVsbFxuXHRcdFx0dGhpcy5fY3VycmVudFZpZXdlciA9IHRoaXMuX3NlbGVjdGVkRm9sZGVyLnZpZXdlckNyZWF0b3IoKVxuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzLl9jdXJyZW50Vmlld2VyXG5cdH1cblxuXHQvKipcblx0ICogTm90aWZpZXMgdGhlIGN1cnJlbnQgdmlldyBhYm91dCBjaGFuZ2VzIG9mIHRoZSB1cmwgd2l0aGluIGl0cyBzY29wZS5cblx0ICovXG5cdG9uTmV3VXJsKGFyZ3M6IFJlY29yZDxzdHJpbmcsIGFueT4sIHJlcXVlc3RlZFBhdGg6IHN0cmluZykge1xuXHRcdGlmICghYXJncy5mb2xkZXIpIHtcblx0XHRcdHRoaXMuX3NldFVybCh0aGlzLl91c2VyRm9sZGVyc1swXS51cmwpXG5cdFx0fSBlbHNlIGlmIChhcmdzLmZvbGRlciB8fCAhbS5yb3V0ZS5nZXQoKS5zdGFydHNXaXRoKFwiL3NldHRpbmdzXCIpKSB7XG5cdFx0XHQvLyBlbnN1cmUgdGhhdCBjdXJyZW50IHZpZXdlciB3aWxsIGJlIHJlaW5pdGlhbGl6ZWRcblx0XHRcdGNvbnN0IGZvbGRlciA9IHRoaXMuX2FsbFNldHRpbmdzRm9sZGVycygpLmZpbmQoKGZvbGRlcikgPT4gZm9sZGVyLnVybCA9PT0gcmVxdWVzdGVkUGF0aClcblxuXHRcdFx0aWYgKCFmb2xkZXIpIHtcblx0XHRcdFx0dGhpcy5fc2V0VXJsKHRoaXMuX3VzZXJGb2xkZXJzWzBdLnVybClcblx0XHRcdH0gZWxzZSBpZiAodGhpcy5fc2VsZWN0ZWRGb2xkZXIucGF0aCA9PT0gZm9sZGVyLnBhdGgpIHtcblx0XHRcdFx0Ly8gZm9sZGVyIHBhdGggaGFzIG5vdCBjaGFuZ2VkXG5cdFx0XHRcdHRoaXMuX3NlbGVjdGVkRm9sZGVyID0gZm9sZGVyIC8vIGluc3RhbmNlIG9mIFNldHRpbmdzRm9sZGVyIG1pZ2h0IGhhdmUgYmVlbiBjaGFuZ2VkIGluIG1lbWJlcnNoaXAgdXBkYXRlLCBzbyByZXBsYWNlIHRoaXMgaW5zdGFuY2VcblxuXHRcdFx0XHRtLnJlZHJhdygpXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvLyBmb2xkZXIgcGF0aCBoYXMgY2hhbmdlZFxuXHRcdFx0XHQvLyB0byBhdm9pZCBtaXNsZWFkaW5nIGluZm9ybWF0aW9uLCBzZXQgdGhlIHVybCB0byB0aGUgZm9sZGVyJ3MgdXJsLCBzbyB0aGUgYnJvd3NlciB1cmxcblx0XHRcdFx0Ly8gaXMgY2hhbmdlZCB0byBjb3JyZWN0bHkgcmVwcmVzZW50cyB0aGUgZGlzcGxheWVkIGNvbnRlbnRcblx0XHRcdFx0dGhpcy5fc2V0VXJsKGZvbGRlci51cmwpXG5cdFx0XHRcdHRoaXMuX3NlbGVjdGVkRm9sZGVyID0gZm9sZGVyXG5cdFx0XHRcdHRoaXMuX2N1cnJlbnRWaWV3ZXIgPSBudWxsXG5cdFx0XHRcdHRoaXMuZGV0YWlsc1ZpZXdlciA9IG51bGxcblxuXHRcdFx0XHQvLyBtYWtlIHN1cmUgdGhlIGN1cnJlbnRWaWV3ZXIgaXMgYXZhaWxhYmxlXG5cdFx0XHRcdHRoaXMuX2dldEN1cnJlbnRWaWV3ZXIoKVxuXG5cdFx0XHRcdG0ucmVkcmF3KClcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRfZ2V0VXNlck93bmVkVGVtcGxhdGVTZXR0aW5nc0ZvbGRlcigpOiBTZXR0aW5nc0ZvbGRlcjx1bmtub3duPiB7XG5cdFx0cmV0dXJuIHRoaXMuX3RlbXBsYXRlRm9sZGVycy5maW5kKChmb2xkZXIpID0+IGlzU2hhcmVkR3JvdXBPd25lcihmb2xkZXIuZGF0YS5ncm91cCwgdGhpcy5sb2dpbnMuZ2V0VXNlckNvbnRyb2xsZXIoKS51c2VyKSkgfHwgdGhpcy5fZHVtbXlUZW1wbGF0ZUZvbGRlclxuXHR9XG5cblx0X2FsbFNldHRpbmdzRm9sZGVycygpOiBSZWFkb25seUFycmF5PFNldHRpbmdzRm9sZGVyPHVua25vd24+PiB7XG5cdFx0Y29uc3QgaGFzT3duVGVtcGxhdGVzID0gdGhpcy5fdGVtcGxhdGVGb2xkZXJzLnNvbWUoKGZvbGRlcikgPT4gaXNTaGFyZWRHcm91cE93bmVyKGZvbGRlci5kYXRhLmdyb3VwLCB0aGlzLmxvZ2lucy5nZXRVc2VyQ29udHJvbGxlcigpLnVzZXIpKVxuXG5cdFx0cmV0dXJuIFtcblx0XHRcdC4uLnRoaXMuX3VzZXJGb2xkZXJzLFxuXHRcdFx0Li4udGhpcy5fYWRtaW5Gb2xkZXJzLFxuXHRcdFx0Li4uKCFoYXNPd25UZW1wbGF0ZXMgPyBbdGhpcy5fZHVtbXlUZW1wbGF0ZUZvbGRlcl0gOiBbXSksXG5cdFx0XHQuLi50aGlzLl90ZW1wbGF0ZUZvbGRlcnMsXG5cdFx0XHQuLi50aGlzLl9rbm93bGVkZ2VCYXNlRm9sZGVycyxcblx0XHRdXG5cdH1cblxuXHRfc2V0VXJsKHVybDogc3RyaW5nKSB7XG5cdFx0bS5yb3V0ZS5zZXQodXJsICsgbG9jYXRpb24uaGFzaClcblx0fVxuXG5cdF9pc0dsb2JhbEFkbWluKHVzZXI6IFVzZXIpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gdXNlci5tZW1iZXJzaGlwcy5zb21lKChtKSA9PiBtLmdyb3VwVHlwZSA9PT0gR3JvdXBUeXBlLkFkbWluKVxuXHR9XG5cblx0Zm9jdXNTZXR0aW5nc0RldGFpbHNDb2x1bW4oKSB7XG5cdFx0dm9pZCB0aGlzLnZpZXdTbGlkZXIuZm9jdXModGhpcy5fc2V0dGluZ3NEZXRhaWxzQ29sdW1uKVxuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyB1cGRhdGVTaG93QnVzaW5lc3NTZXR0aW5ncygpIHtcblx0XHR0aGlzLnNob3dCdXNpbmVzc1NldHRpbmdzKChhd2FpdCB0aGlzLmxvZ2lucy5nZXRVc2VyQ29udHJvbGxlcigpLmxvYWRDdXN0b21lcigpKS5idXNpbmVzc1VzZSA9PT0gdHJ1ZSlcblx0fVxuXG5cdGFzeW5jIGVudGl0eUV2ZW50c1JlY2VpdmVkPFQ+KHVwZGF0ZXM6IFJlYWRvbmx5QXJyYXk8RW50aXR5VXBkYXRlRGF0YT4sIGV2ZW50T3duZXJHcm91cElkOiBJZCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGZvciAoY29uc3QgdXBkYXRlIG9mIHVwZGF0ZXMpIHtcblx0XHRcdGlmIChpc1VwZGF0ZUZvclR5cGVSZWYoQ3VzdG9tZXJUeXBlUmVmLCB1cGRhdGUpKSB7XG5cdFx0XHRcdGF3YWl0IHRoaXMudXBkYXRlU2hvd0J1c2luZXNzU2V0dGluZ3MoKVxuXHRcdFx0fSBlbHNlIGlmICh0aGlzLmxvZ2lucy5nZXRVc2VyQ29udHJvbGxlcigpLmlzVXBkYXRlRm9yTG9nZ2VkSW5Vc2VySW5zdGFuY2UodXBkYXRlLCBldmVudE93bmVyR3JvdXBJZCkpIHtcblx0XHRcdFx0Y29uc3QgdXNlciA9IHRoaXMubG9naW5zLmdldFVzZXJDb250cm9sbGVyKCkudXNlclxuXG5cdFx0XHRcdC8vIHRoZSB1c2VyIGFkbWluIHN0YXR1cyBtaWdodCBoYXZlIGNoYW5nZWRcblx0XHRcdFx0aWYgKCF0aGlzLl9pc0dsb2JhbEFkbWluKHVzZXIpICYmIHRoaXMuX2N1cnJlbnRWaWV3ZXIgJiYgdGhpcy5fYWRtaW5Gb2xkZXJzLnNvbWUoKGYpID0+IGYuaXNBY3RpdmUoKSkpIHtcblx0XHRcdFx0XHR0aGlzLl9zZXRVcmwodGhpcy5fdXNlckZvbGRlcnNbMF0udXJsKVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gdGVtcGxhdGUgZ3JvdXAgbWVtYmVyc2hpcHMgbWF5IGhhdmUgY2hhbmdlZFxuXHRcdFx0XHRpZiAodGhpcy5fdGVtcGxhdGVGb2xkZXJzLmxlbmd0aCAhPT0gdGhpcy5sb2dpbnMuZ2V0VXNlckNvbnRyb2xsZXIoKS5nZXRUZW1wbGF0ZU1lbWJlcnNoaXBzKCkubGVuZ3RoKSB7XG5cdFx0XHRcdFx0Y29uc3QgW3RlbXBsYXRlcywga25vd2xlZGdlQmFzZXNdID0gYXdhaXQgUHJvbWlzZS5hbGwoW3RoaXMuX21ha2VUZW1wbGF0ZUZvbGRlcnMoKSwgdGhpcy5fbWFrZUtub3dsZWRnZUJhc2VGb2xkZXJzKCldKVxuXHRcdFx0XHRcdHRoaXMuX3RlbXBsYXRlRm9sZGVycyA9IHRlbXBsYXRlc1xuXHRcdFx0XHRcdHRoaXMuX2tub3dsZWRnZUJhc2VGb2xkZXJzID0ga25vd2xlZGdlQmFzZXNcblx0XHRcdFx0XHRjb25zdCBjdXJyZW50Um91dGUgPSBtLnJvdXRlLmdldCgpXG5cblx0XHRcdFx0XHRpZiAoY3VycmVudFJvdXRlLnN0YXJ0c1dpdGgoU0VUVElOR1NfUFJFRklYKSkge1xuXHRcdFx0XHRcdFx0Y29uc3QgZm9sZGVyID0gbS5yb3V0ZS5wYXJhbShcImZvbGRlclwiKVxuXHRcdFx0XHRcdFx0aWYgKGZvbGRlciA9PT0gXCJ0ZW1wbGF0ZXNcIikge1xuXHRcdFx0XHRcdFx0XHRjb25zdCB0ZW1wbGF0ZUxpc3RJZCA9IG0ucm91dGUucGFyYW0oXCJpZFwiKVxuXHRcdFx0XHRcdFx0XHQvLyBXZSBtaWdodCBoYXZlIGxvc3QgdGhlIG1lbWJlcnNoaXAgb24gdGhlIHRlbXBsYXRlIGxpc3Rcblx0XHRcdFx0XHRcdFx0Y29uc3QgaGF2ZU9wZW5lZEZvbGRlciA9IHRlbXBsYXRlcy5zb21lKCh0KSA9PiB0LmlkID09PSB0ZW1wbGF0ZUxpc3RJZClcblxuXHRcdFx0XHRcdFx0XHQvLyBXaGVuIHVzZXIgZmlyc3QgY3JlYXRlcyBhIHRlbXBsYXRlIGdyb3VwIGZyb20gdGhlIGR1bW15IGxpc3QsIHdlIG5lZWQgdG8gc3dpdGNoIHRoZW0gdG9cblx0XHRcdFx0XHRcdFx0Ly8gdGhlIHZpZXdlciBmb3IgdGhlaXIgbmV3bHkgY3JlYXRlZCBsaXN0LlxuXHRcdFx0XHRcdFx0XHRpZiAodGhpcy5fZHVtbXlUZW1wbGF0ZUZvbGRlci51cmwgfHwgIWhhdmVPcGVuZWRGb2xkZXIpIHtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLl9zZXRVcmwodGhpcy5fZ2V0VXNlck93bmVkVGVtcGxhdGVTZXR0aW5nc0ZvbGRlcigpLnVybClcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRtLnJlZHJhdygpXG5cdFx0XHR9IGVsc2UgaWYgKGlzVXBkYXRlRm9yVHlwZVJlZihDdXN0b21lckluZm9UeXBlUmVmLCB1cGRhdGUpKSB7XG5cdFx0XHRcdHRoaXMuX2N1c3RvbURvbWFpbnMucmVzZXQoKVxuXHRcdFx0XHR0aGlzLl9hZG1pbkZvbGRlcnMubGVuZ3RoID0gMFxuXHRcdFx0XHQvLyBXaGVuIHN3aXRjaGluZyBhIHBsYW4gd2UgaGlkZS9zaG93IGNlcnRhaW4gYWRtaW4gc2V0dGluZ3MuXG5cdFx0XHRcdGF3YWl0IHRoaXMucG9wdWxhdGVBZG1pbkZvbGRlcnMoKVxuXG5cdFx0XHRcdGF3YWl0IHRoaXMuX2N1c3RvbURvbWFpbnMuZ2V0QXN5bmMoKVxuXHRcdFx0XHRtLnJlZHJhdygpXG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0YXdhaXQgdGhpcy5fY3VycmVudFZpZXdlcj8uZW50aXR5RXZlbnRzUmVjZWl2ZWQodXBkYXRlcylcblxuXHRcdGF3YWl0IHRoaXMuZGV0YWlsc1ZpZXdlcj8uZW50aXR5RXZlbnRzUmVjZWl2ZWQodXBkYXRlcylcblx0fVxuXG5cdGdldFZpZXdTbGlkZXIoKTogVmlld1NsaWRlciB8IG51bGwge1xuXHRcdHJldHVybiB0aGlzLnZpZXdTbGlkZXJcblx0fVxuXG5cdF9hYm91dFRoaXNTb2Z0d2FyZUxpbmsoKTogQ2hpbGRyZW4ge1xuXHRcdGNvbnN0IGxhYmVsID0gbGFuZy5nZXQoXCJhYm91dF9sYWJlbFwiKVxuXHRcdGNvbnN0IHZlcnNpb25MYWJlbCA9IGBUdXRhIHYke2Vudi52ZXJzaW9uTnVtYmVyfWBcblx0XHRyZXR1cm4gbShcIi5wYi5wdC1sLmZsZXgtbm8tc2hyaW5rLmZsZXguY29sLmp1c3RpZnktZW5kXCIsIFtcblx0XHRcdG0oXG5cdFx0XHRcdFwiYnV0dG9uLnRleHQtY2VudGVyLnNtYWxsLm5vLXRleHQtZGVjb3JhdGlvblwiLFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0c3R5bGU6IHtcblx0XHRcdFx0XHRcdGJhY2tncm91bmRDb2xvcjogXCJ0cmFuc3BhcmVudFwiLFxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0aHJlZjogXCIjXCIsXG5cdFx0XHRcdFx0XCJhcmlhLWxhYmVsXCI6IGxhYmVsLFxuXHRcdFx0XHRcdFwiYXJpYS1kZXNjcmlwdGlvblwiOiB2ZXJzaW9uTGFiZWwsXG5cdFx0XHRcdFx0XCJhcmlhLWhhc3BvcHVwXCI6IFwiZGlhbG9nXCIsXG5cdFx0XHRcdFx0b25jbGljazogKCkgPT4ge1xuXHRcdFx0XHRcdFx0dGhpcy52aWV3U2xpZGVyLmZvY3VzTmV4dENvbHVtbigpXG5cdFx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0XHRcdFx0Y29uc3QgZGlhbG9nID0gRGlhbG9nLnNob3dBY3Rpb25EaWFsb2coe1xuXHRcdFx0XHRcdFx0XHRcdHRpdGxlOiBcImFib3V0X2xhYmVsXCIsXG5cdFx0XHRcdFx0XHRcdFx0Y2hpbGQ6ICgpID0+XG5cdFx0XHRcdFx0XHRcdFx0XHRtKEFib3V0RGlhbG9nLCB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdG9uU2hvd1NldHVwV2l6YXJkOiAoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZGlhbG9nLmNsb3NlKClcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRsb2NhdG9yLnNob3dTZXR1cFdpemFyZCgpXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0XHR9KSxcblx0XHRcdFx0XHRcdFx0XHRhbGxvd09rV2l0aFJldHVybjogdHJ1ZSxcblx0XHRcdFx0XHRcdFx0XHRva0FjdGlvbjogKGRpYWxvZzogRGlhbG9nKSA9PiBkaWFsb2cuY2xvc2UoKSxcblx0XHRcdFx0XHRcdFx0XHRhbGxvd0NhbmNlbDogZmFsc2UsXG5cdFx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0XHR9LCAyMDApXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0fSxcblx0XHRcdFx0W1xuXHRcdFx0XHRcdG0oXCJcIiwgdmVyc2lvbkxhYmVsKSxcblx0XHRcdFx0XHRtKFxuXHRcdFx0XHRcdFx0XCIuYlwiLFxuXHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRzdHlsZToge1xuXHRcdFx0XHRcdFx0XHRcdGNvbG9yOiB0aGVtZS5uYXZpZ2F0aW9uX2J1dHRvbl9zZWxlY3RlZCxcblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRsYWJlbCxcblx0XHRcdFx0XHQpLFxuXHRcdFx0XHRdLFxuXHRcdFx0KSxcblx0XHRdKVxuXHR9XG5cblx0YXN5bmMgX21ha2VUZW1wbGF0ZUZvbGRlcnMoKTogUHJvbWlzZTxBcnJheTxTZXR0aW5nc0ZvbGRlcjxUZW1wbGF0ZUdyb3VwSW5zdGFuY2U+Pj4ge1xuXHRcdGNvbnN0IHVzZXJDb250cm9sbGVyID0gdGhpcy5sb2dpbnMuZ2V0VXNlckNvbnRyb2xsZXIoKVxuXHRcdGNvbnN0IHRlbXBsYXRlTWVtYmVyc2hpcHMgPSB1c2VyQ29udHJvbGxlci5nZXRUZW1wbGF0ZU1lbWJlcnNoaXBzKClcblx0XHRyZXR1cm4gcHJvbWlzZU1hcChcblx0XHRcdGF3YWl0IGxvYWRUZW1wbGF0ZUdyb3VwSW5zdGFuY2VzKHRlbXBsYXRlTWVtYmVyc2hpcHMsIGxvY2F0b3IuZW50aXR5Q2xpZW50KSxcblx0XHRcdChncm91cEluc3RhbmNlKSA9PlxuXHRcdFx0XHRuZXcgU2V0dGluZ3NGb2xkZXIoXG5cdFx0XHRcdFx0bGFuZy5tYWtlVHJhbnNsYXRpb24oXCJncm91cF9uYW1lXCIsIGdldFNoYXJlZEdyb3VwTmFtZShncm91cEluc3RhbmNlLmdyb3VwSW5mbywgdXNlckNvbnRyb2xsZXIsIHRydWUpKSxcblx0XHRcdFx0XHQoKSA9PiBJY29ucy5MaXN0QWx0LFxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdGZvbGRlcjogXCJ0ZW1wbGF0ZXNcIixcblx0XHRcdFx0XHRcdGlkOiBnZXRFdElkKGdyb3VwSW5zdGFuY2UuZ3JvdXApLFxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0KCkgPT5cblx0XHRcdFx0XHRcdG5ldyBUZW1wbGF0ZUxpc3RWaWV3KFxuXHRcdFx0XHRcdFx0XHRncm91cEluc3RhbmNlLFxuXHRcdFx0XHRcdFx0XHRsb2NhdG9yLmVudGl0eUNsaWVudCxcblx0XHRcdFx0XHRcdFx0dGhpcy5sb2dpbnMsXG5cdFx0XHRcdFx0XHRcdCh2aWV3ZXIpID0+IHRoaXMucmVwbGFjZURldGFpbHNWaWV3ZXIodmlld2VyKSxcblx0XHRcdFx0XHRcdFx0KCkgPT4gdGhpcy5mb2N1c1NldHRpbmdzRGV0YWlsc0NvbHVtbigpLFxuXHRcdFx0XHRcdFx0KSxcblx0XHRcdFx0XHRncm91cEluc3RhbmNlLFxuXHRcdFx0XHQpLFxuXHRcdClcblx0fVxuXG5cdGFzeW5jIF9tYWtlS25vd2xlZGdlQmFzZUZvbGRlcnMoKTogUHJvbWlzZTxBcnJheTxTZXR0aW5nc0ZvbGRlcjx2b2lkPj4+IHtcblx0XHRjb25zdCB1c2VyQ29udHJvbGxlciA9IHRoaXMubG9naW5zLmdldFVzZXJDb250cm9sbGVyKClcblx0XHRjb25zdCBjdXN0b21lciA9IGF3YWl0IHVzZXJDb250cm9sbGVyLmxvYWRDdXN0b21lcigpXG5cblx0XHRpZiAoaXNDdXN0b21pemF0aW9uRW5hYmxlZEZvckN1c3RvbWVyKGN1c3RvbWVyLCBGZWF0dXJlVHlwZS5Lbm93bGVkZ2VCYXNlKSkge1xuXHRcdFx0Y29uc3QgdGVtcGxhdGVNZW1iZXJzaGlwcyA9ICh0aGlzLmxvZ2lucy5nZXRVc2VyQ29udHJvbGxlcigpICYmIHRoaXMubG9naW5zLmdldFVzZXJDb250cm9sbGVyKCkuZ2V0VGVtcGxhdGVNZW1iZXJzaGlwcygpKSB8fCBbXVxuXHRcdFx0cmV0dXJuIHByb21pc2VNYXAoXG5cdFx0XHRcdGF3YWl0IGxvYWRUZW1wbGF0ZUdyb3VwSW5zdGFuY2VzKHRlbXBsYXRlTWVtYmVyc2hpcHMsIGxvY2F0b3IuZW50aXR5Q2xpZW50KSxcblx0XHRcdFx0KGdyb3VwSW5zdGFuY2UpID0+XG5cdFx0XHRcdFx0bmV3IFNldHRpbmdzRm9sZGVyKFxuXHRcdFx0XHRcdFx0bGFuZy5tYWtlVHJhbnNsYXRpb24oXCJncm91cF9uYW1lXCIsIGdldFNoYXJlZEdyb3VwTmFtZShncm91cEluc3RhbmNlLmdyb3VwSW5mbywgdXNlckNvbnRyb2xsZXIsIHRydWUpKSxcblx0XHRcdFx0XHRcdCgpID0+IEljb25zLkJvb2ssXG5cdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdGZvbGRlcjogXCJrbm93bGVkZ2ViYXNlXCIsXG5cdFx0XHRcdFx0XHRcdGlkOiBnZXRFdElkKGdyb3VwSW5zdGFuY2UuZ3JvdXApLFxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdCgpID0+XG5cdFx0XHRcdFx0XHRcdG5ldyBLbm93bGVkZ2VCYXNlTGlzdFZpZXcoXG5cdFx0XHRcdFx0XHRcdFx0bG9jYXRvci5lbnRpdHlDbGllbnQsXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5sb2dpbnMsXG5cdFx0XHRcdFx0XHRcdFx0Z3JvdXBJbnN0YW5jZS5ncm91cFJvb3QsXG5cdFx0XHRcdFx0XHRcdFx0Z3JvdXBJbnN0YW5jZS5ncm91cCxcblx0XHRcdFx0XHRcdFx0XHQodmlld2VyKSA9PiB0aGlzLnJlcGxhY2VEZXRhaWxzVmlld2VyKHZpZXdlciksXG5cdFx0XHRcdFx0XHRcdFx0KCkgPT4gdGhpcy5mb2N1c1NldHRpbmdzRGV0YWlsc0NvbHVtbigpLFxuXHRcdFx0XHRcdFx0XHQpLFxuXHRcdFx0XHRcdFx0dW5kZWZpbmVkLFxuXHRcdFx0XHRcdCksXG5cdFx0XHQpXG5cdFx0fSBlbHNlIHtcblx0XHRcdHJldHVybiBbXVxuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgdXBkYXRlU2hvd0FmZmlsaWF0ZVNldHRpbmdzKCkge1xuXHRcdGNvbnN0IGN1c3RvbWVyID0gYXdhaXQgdGhpcy5sb2dpbnMuZ2V0VXNlckNvbnRyb2xsZXIoKS5sb2FkQ3VzdG9tZXIoKVxuXHRcdHRoaXMuc2hvd0FmZmlsaWF0ZVNldHRpbmdzID0gaXNDdXN0b21pemF0aW9uRW5hYmxlZEZvckN1c3RvbWVyKGN1c3RvbWVyLCBGZWF0dXJlVHlwZS5BZmZpbGlhdGVQYXJ0bmVyKVxuXHR9XG59XG5cbmZ1bmN0aW9uIHNob3dSZW5hbWVUZW1wbGF0ZUxpc3REaWFsb2coaW5zdGFuY2U6IFRlbXBsYXRlR3JvdXBJbnN0YW5jZSkge1xuXHRjb25zdCBsb2dpbnMgPSBsb2NhdG9yLmxvZ2luc1xuXHRjb25zdCBuYW1lID0gc3RyZWFtKGdldFNoYXJlZEdyb3VwTmFtZShpbnN0YW5jZS5ncm91cEluZm8sIGxvZ2lucy5nZXRVc2VyQ29udHJvbGxlcigpLCB0cnVlKSlcblx0RGlhbG9nLnNob3dBY3Rpb25EaWFsb2coe1xuXHRcdHRpdGxlOiBcInJlbmFtZVRlbXBsYXRlTGlzdF9sYWJlbFwiLFxuXHRcdGFsbG93T2tXaXRoUmV0dXJuOiB0cnVlLFxuXHRcdGNoaWxkOiB7XG5cdFx0XHR2aWV3OiAoKSA9PlxuXHRcdFx0XHRtKFRleHRGaWVsZCwge1xuXHRcdFx0XHRcdHZhbHVlOiBuYW1lKCksXG5cdFx0XHRcdFx0b25pbnB1dDogbmFtZSxcblx0XHRcdFx0XHRsYWJlbDogXCJ0ZW1wbGF0ZUdyb3VwTmFtZV9sYWJlbFwiLFxuXHRcdFx0XHR9KSxcblx0XHR9LFxuXHRcdG9rQWN0aW9uOiAoZGlhbG9nOiBEaWFsb2cpID0+IHtcblx0XHRcdGRpYWxvZy5jbG9zZSgpXG5cdFx0XHRjb25zdCB7IHVzZXJTZXR0aW5nc0dyb3VwUm9vdCB9ID0gbG9naW5zLmdldFVzZXJDb250cm9sbGVyKClcblx0XHRcdGNvbnN0IGV4aXN0aW5nR3JvdXBTZXR0aW5ncyA9IHVzZXJTZXR0aW5nc0dyb3VwUm9vdC5ncm91cFNldHRpbmdzLmZpbmQoKGdjKSA9PiBnYy5ncm91cCA9PT0gaW5zdGFuY2UuZ3JvdXBJbmZvLmdyb3VwKVxuXHRcdFx0Y29uc3QgbmV3TmFtZSA9IG5hbWUoKVxuXG5cdFx0XHRpZiAoZXhpc3RpbmdHcm91cFNldHRpbmdzKSB7XG5cdFx0XHRcdGV4aXN0aW5nR3JvdXBTZXR0aW5ncy5uYW1lID0gbmV3TmFtZVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y29uc3QgbmV3U2V0dGluZ3MgPSBjcmVhdGVHcm91cFNldHRpbmdzKHtcblx0XHRcdFx0XHRncm91cDogZ2V0RXRJZChpbnN0YW5jZS5ncm91cCksXG5cdFx0XHRcdFx0Y29sb3I6IFwiXCIsXG5cdFx0XHRcdFx0bmFtZTogbmV3TmFtZSxcblx0XHRcdFx0XHRkZWZhdWx0QWxhcm1zTGlzdDogW10sXG5cdFx0XHRcdFx0c291cmNlVXJsOiBudWxsLFxuXHRcdFx0XHR9KVxuXHRcdFx0XHRsb2dpbnMuZ2V0VXNlckNvbnRyb2xsZXIoKS51c2VyU2V0dGluZ3NHcm91cFJvb3QuZ3JvdXBTZXR0aW5ncy5wdXNoKG5ld1NldHRpbmdzKVxuXHRcdFx0fVxuXG5cdFx0XHRsb2NhdG9yLmVudGl0eUNsaWVudC51cGRhdGUodXNlclNldHRpbmdzR3JvdXBSb290KS50aGVuKCgpID0+IHtcblx0XHRcdFx0aWYgKGlzU2hhcmVkR3JvdXBPd25lcihpbnN0YW5jZS5ncm91cCwgbG9naW5zLmdldFVzZXJDb250cm9sbGVyKCkudXNlcikpIHtcblx0XHRcdFx0XHRpbnN0YW5jZS5ncm91cEluZm8ubmFtZSA9IG5ld05hbWVcblx0XHRcdFx0XHRsb2NhdG9yLmVudGl0eUNsaWVudC51cGRhdGUoaW5zdGFuY2UuZ3JvdXBJbmZvKVxuXHRcdFx0XHR9XG5cdFx0XHR9KVxuXHRcdH0sXG5cdH0pXG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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