import { isWorker } from "./Env-chunk.js";
import { objToError } from "./ErrorUtils-chunk.js";

//#region src/common/api/common/threading/MessageDispatcher.ts
var Request = class {
	type;
	requestType;
	/** should be selected and assigned by the message dispatcher or on deserialization only. */
	id = null;
	args;
	constructor(type, args) {
		this.type = "request";
		this.requestType = type;
		this.id = null;
		this.args = args.slice();
	}
};
var Response = class {
	type;
	id;
	value;
	constructor(id, value) {
		this.type = "response";
		this.id = id;
		this.value = value;
	}
};
var RequestError = class {
	type;
	id;
	error;
	constructor(id, error) {
		this.type = "requestError";
		this.id = id;
		this.error = errorToObj(error);
	}
};
var MessageDispatcher = class {
	/**
	* Map from request id that have been sent to the callback that will be
	* executed on the results sent by the worker.
	*/
	_messages;
	nextId;
	constructor(transport, commands, idPrefix) {
		this.transport = transport;
		this.commands = commands;
		this.idPrefix = idPrefix;
		this._messages = {};
		this.nextId = makeRequestIdGenerator(idPrefix);
		this.transport.setMessageHandler((msg) => this.handleMessage(msg));
	}
	postRequest(msg) {
		msg.id = this.nextId();
		return new Promise((resolve, reject) => {
			this._messages[msg.id] = {
				resolve,
				reject
			};
			try {
				this.transport.postMessage(msg);
			} catch (e) {
				console.log("error payload:", msg);
				throw e;
			}
		});
	}
	handleMessage(message) {
		if (message.type === "response") {
			const pendingRequest = this._messages[message.id];
			if (pendingRequest != null) {
				pendingRequest.resolve(message.value);
				delete this._messages[message.id];
			} else console.warn(`Unexpected response: ${message.id} (was the page reloaded?)`);
		} else if (message.type === "requestError") {
			const pendingRequest = this._messages[message.id];
			if (pendingRequest != null) {
				pendingRequest.reject(objToError(message.error));
				delete this._messages[message.id];
			} else console.warn(`Unexpected error response: ${message.id} (was the page reloaded?)`);
		} else if (message.type === "request") {
			const command = this.commands[message.requestType];
			if (command != null) {
				const commandResult = command(message);
				if (commandResult == null || typeof commandResult.then !== "function") throw new Error(`Handler returned non-promise result: ${message.requestType}`);
				commandResult.then((value) => {
					this.transport.postMessage(new Response(message.id, value));
				}, (error) => {
					this.transport.postMessage(new RequestError(message.id, error));
				});
			} else {
				let error = new Error(`unexpected request: ${message.id}, ${message.requestType}`);
				if (isWorker()) this.transport.postMessage(new RequestError(message.id, error));
else throw error;
			}
		} else throw new Error(`Unexpected request type: ${JSON.stringify(message)}`);
	}
};
function makeRequestIdGenerator(prefix) {
	let requestId = 0;
	return () => {
		if (requestId >= Number.MAX_SAFE_INTEGER) requestId = 0;
		return prefix + requestId++;
	};
}
function errorToObj(error) {
	const errorErased = error;
	return {
		name: errorErased.name,
		message: errorErased.message,
		stack: errorErased.stack,
		data: errorErased.data
	};
}

//#endregion
export { MessageDispatcher, Request, RequestError, Response, errorToObj };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTWVzc2FnZURpc3BhdGNoZXItY2h1bmsuanMiLCJuYW1lcyI6WyJ0eXBlOiBUIiwiYXJnczogUmVhZG9ubHlBcnJheTx1bmtub3duPiIsImlkOiBzdHJpbmciLCJ2YWx1ZTogYW55IiwiZXJyb3I6IEVycm9yIiwidHJhbnNwb3J0OiBUcmFuc3BvcnQ8T3V0Z29pbmdSZXF1ZXN0VHlwZSwgSW5jb21pbmdSZXF1ZXN0VHlwZT4iLCJjb21tYW5kczogQ29tbWFuZHM8SW5jb21pbmdSZXF1ZXN0VHlwZT4iLCJpZFByZWZpeDogc3RyaW5nIiwibXNnOiBSZXF1ZXN0PE91dGdvaW5nUmVxdWVzdFR5cGU+IiwibWVzc2FnZTogTWVzc2FnZTxJbmNvbWluZ1JlcXVlc3RUeXBlPiIsInByZWZpeDogc3RyaW5nIl0sInNvdXJjZXMiOlsiLi4vc3JjL2NvbW1vbi9hcGkvY29tbW9uL3RocmVhZGluZy9NZXNzYWdlRGlzcGF0Y2hlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIDx1bD5cbiAqICAgPGxpPlRoZSBjbGllbnQgc2VuZHMge1dvcmtlclJlcXVlc3R9cyB0byB0aGUgd29ya2VyIGFuZCB0aGUgd29ya2VyIGFuc3dlcnMgd2l0aCBlaXRoZXIgYW4ge1dvcmtlclJlc3BvbnNlfSBvciBhIHtXb3JrZXJFcnJvcn0uXG4gKiAgIDxsaT5UaGUgd29ya2VyIHNlbmRzIHtDbGllbnRDb21tYW5kc31zIHRvIHRoZSBjbGllbnQuIFRoZSBjb21tYW5kcyBhcmUgZXhlY3V0ZWQgYnkgdGhlIGNsaWVudCAod2l0aG91dCBhbnkgcmVzcG9uc2UgdG8gdGhlIHdvcmtlcikuXG4gKiA8L3VsPlxuICovXG5pbXBvcnQgeyBpc1dvcmtlciB9IGZyb20gXCIuLi9FbnYuanNcIlxuaW1wb3J0IHsgVHJhbnNwb3J0IH0gZnJvbSBcIi4vVHJhbnNwb3J0LmpzXCJcbmltcG9ydCB7IG9ialRvRXJyb3IgfSBmcm9tIFwiLi4vdXRpbHMvRXJyb3JVdGlscy5qc1wiXG5cbmV4cG9ydCB0eXBlIENvbW1hbmQ8VD4gPSAobXNnOiBSZXF1ZXN0PFQ+KSA9PiBQcm9taXNlPGFueT5cbmV4cG9ydCB0eXBlIENvbW1hbmRzPFQgZXh0ZW5kcyBzdHJpbmc+ID0gUmVjb3JkPFQsIENvbW1hbmQ8VD4+XG5leHBvcnQgdHlwZSBNZXNzYWdlPFR5cGU+ID0gUmVxdWVzdDxUeXBlPiB8IFJlc3BvbnNlPFR5cGU+IHwgUmVxdWVzdEVycm9yPFR5cGU+XG5cbmV4cG9ydCBjbGFzcyBSZXF1ZXN0PFQ+IHtcblx0cmVhZG9ubHkgdHlwZTogXCJyZXF1ZXN0XCJcblx0cmVhZG9ubHkgcmVxdWVzdFR5cGU6IFRcblx0LyoqIHNob3VsZCBiZSBzZWxlY3RlZCBhbmQgYXNzaWduZWQgYnkgdGhlIG1lc3NhZ2UgZGlzcGF0Y2hlciBvciBvbiBkZXNlcmlhbGl6YXRpb24gb25seS4gKi9cblx0aWQ6IHN0cmluZyB8IG51bGwgPSBudWxsXG5cblx0cmVhZG9ubHkgYXJnczogYW55W11cblxuXHRjb25zdHJ1Y3Rvcih0eXBlOiBULCBhcmdzOiBSZWFkb25seUFycmF5PHVua25vd24+KSB7XG5cdFx0dGhpcy50eXBlID0gXCJyZXF1ZXN0XCJcblx0XHR0aGlzLnJlcXVlc3RUeXBlID0gdHlwZVxuXHRcdHRoaXMuaWQgPSBudWxsXG5cdFx0dGhpcy5hcmdzID0gYXJncy5zbGljZSgpXG5cdH1cbn1cblxuZXhwb3J0IGNsYXNzIFJlc3BvbnNlPFQ+IHtcblx0cmVhZG9ubHkgdHlwZTogXCJyZXNwb25zZVwiXG5cdHJlYWRvbmx5IGlkOiBzdHJpbmdcblx0cmVhZG9ubHkgdmFsdWU6IGFueVxuXG5cdGNvbnN0cnVjdG9yKGlkOiBzdHJpbmcsIHZhbHVlOiBhbnkpIHtcblx0XHR0aGlzLnR5cGUgPSBcInJlc3BvbnNlXCJcblx0XHR0aGlzLmlkID0gaWRcblx0XHR0aGlzLnZhbHVlID0gdmFsdWVcblx0fVxufVxuXG5leHBvcnQgY2xhc3MgUmVxdWVzdEVycm9yPFQ+IHtcblx0cmVhZG9ubHkgdHlwZTogXCJyZXF1ZXN0RXJyb3JcIlxuXHRyZWFkb25seSBpZDogc3RyaW5nXG5cdHJlYWRvbmx5IGVycm9yOiBSZWNvcmQ8c3RyaW5nLCBhbnk+XG5cblx0Y29uc3RydWN0b3IoaWQ6IHN0cmluZywgZXJyb3I6IEVycm9yKSB7XG5cdFx0dGhpcy50eXBlID0gXCJyZXF1ZXN0RXJyb3JcIlxuXHRcdHRoaXMuaWQgPSBpZFxuXHRcdHRoaXMuZXJyb3IgPSBlcnJvclRvT2JqKGVycm9yKSAvLyB0aGUgc3RydWN0dXJlZCBjbG9uZSBhbGdvcml0aG0gaXMgbm90IGFibGUgdG8gY2xvbmUgZXJyb3JzXG5cdH1cbn1cblxudHlwZSBNZXNzYWdlQ2FsbGJhY2tzID0ge1xuXHRyZXNvbHZlOiAodmFsdWU6IGFueSkgPT4gdm9pZFxuXHRyZWplY3Q6IChlcnJvcjogRXJyb3IpID0+IHZvaWRcbn1cblxuLyoqXG4gKiBIYW5kbGVzIHJlbW90ZSBpbnZvY2F0aW9ucyAoZS5nLiB3b3JrZXIgb3IgbmF0aXZlIGNhbGxzKS5cbiAqL1xuZXhwb3J0IGNsYXNzIE1lc3NhZ2VEaXNwYXRjaGVyPE91dGdvaW5nUmVxdWVzdFR5cGUgZXh0ZW5kcyBzdHJpbmcsIEluY29taW5nUmVxdWVzdFR5cGUgZXh0ZW5kcyBzdHJpbmc+IHtcblx0LyoqXG5cdCAqIE1hcCBmcm9tIHJlcXVlc3QgaWQgdGhhdCBoYXZlIGJlZW4gc2VudCB0byB0aGUgY2FsbGJhY2sgdGhhdCB3aWxsIGJlXG5cdCAqIGV4ZWN1dGVkIG9uIHRoZSByZXN1bHRzIHNlbnQgYnkgdGhlIHdvcmtlci5cblx0ICovXG5cdHByaXZhdGUgcmVhZG9ubHkgX21lc3NhZ2VzOiBSZWNvcmQ8c3RyaW5nLCBNZXNzYWdlQ2FsbGJhY2tzPlxuXHRwcml2YXRlIHJlYWRvbmx5IG5leHRJZDogKCkgPT4gc3RyaW5nXG5cblx0Y29uc3RydWN0b3IoXG5cdFx0cHJpdmF0ZSByZWFkb25seSB0cmFuc3BvcnQ6IFRyYW5zcG9ydDxPdXRnb2luZ1JlcXVlc3RUeXBlLCBJbmNvbWluZ1JlcXVlc3RUeXBlPixcblx0XHRwcml2YXRlIHJlYWRvbmx5IGNvbW1hbmRzOiBDb21tYW5kczxJbmNvbWluZ1JlcXVlc3RUeXBlPixcblx0XHRwcml2YXRlIGlkUHJlZml4OiBzdHJpbmcsXG5cdCkge1xuXHRcdHRoaXMuX21lc3NhZ2VzID0ge31cblx0XHR0aGlzLm5leHRJZCA9IG1ha2VSZXF1ZXN0SWRHZW5lcmF0b3IoaWRQcmVmaXgpXG5cdFx0dGhpcy50cmFuc3BvcnQuc2V0TWVzc2FnZUhhbmRsZXIoKG1zZykgPT4gdGhpcy5oYW5kbGVNZXNzYWdlKG1zZykpXG5cdH1cblxuXHRwb3N0UmVxdWVzdChtc2c6IFJlcXVlc3Q8T3V0Z29pbmdSZXF1ZXN0VHlwZT4pOiBQcm9taXNlPGFueT4ge1xuXHRcdG1zZy5pZCA9IHRoaXMubmV4dElkKClcblx0XHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRcdFx0dGhpcy5fbWVzc2FnZXNbbXNnLmlkIV0gPSB7XG5cdFx0XHRcdHJlc29sdmUsXG5cdFx0XHRcdHJlamVjdCxcblx0XHRcdH1cblxuXHRcdFx0dHJ5IHtcblx0XHRcdFx0dGhpcy50cmFuc3BvcnQucG9zdE1lc3NhZ2UobXNnKVxuXHRcdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0XHRjb25zb2xlLmxvZyhcImVycm9yIHBheWxvYWQ6XCIsIG1zZylcblx0XHRcdFx0dGhyb3cgZVxuXHRcdFx0fVxuXHRcdH0pXG5cdH1cblxuXHRoYW5kbGVNZXNzYWdlKG1lc3NhZ2U6IE1lc3NhZ2U8SW5jb21pbmdSZXF1ZXN0VHlwZT4pIHtcblx0XHRpZiAobWVzc2FnZS50eXBlID09PSBcInJlc3BvbnNlXCIpIHtcblx0XHRcdGNvbnN0IHBlbmRpbmdSZXF1ZXN0ID0gdGhpcy5fbWVzc2FnZXNbbWVzc2FnZS5pZF1cblx0XHRcdGlmIChwZW5kaW5nUmVxdWVzdCAhPSBudWxsKSB7XG5cdFx0XHRcdHBlbmRpbmdSZXF1ZXN0LnJlc29sdmUobWVzc2FnZS52YWx1ZSlcblx0XHRcdFx0ZGVsZXRlIHRoaXMuX21lc3NhZ2VzW21lc3NhZ2UuaWRdXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjb25zb2xlLndhcm4oYFVuZXhwZWN0ZWQgcmVzcG9uc2U6ICR7bWVzc2FnZS5pZH0gKHdhcyB0aGUgcGFnZSByZWxvYWRlZD8pYClcblx0XHRcdH1cblx0XHR9IGVsc2UgaWYgKG1lc3NhZ2UudHlwZSA9PT0gXCJyZXF1ZXN0RXJyb3JcIikge1xuXHRcdFx0Y29uc3QgcGVuZGluZ1JlcXVlc3QgPSB0aGlzLl9tZXNzYWdlc1ttZXNzYWdlLmlkXVxuXHRcdFx0aWYgKHBlbmRpbmdSZXF1ZXN0ICE9IG51bGwpIHtcblx0XHRcdFx0cGVuZGluZ1JlcXVlc3QucmVqZWN0KG9ialRvRXJyb3IobWVzc2FnZS5lcnJvcikpXG5cdFx0XHRcdGRlbGV0ZSB0aGlzLl9tZXNzYWdlc1ttZXNzYWdlLmlkXVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y29uc29sZS53YXJuKGBVbmV4cGVjdGVkIGVycm9yIHJlc3BvbnNlOiAke21lc3NhZ2UuaWR9ICh3YXMgdGhlIHBhZ2UgcmVsb2FkZWQ/KWApXG5cdFx0XHR9XG5cdFx0fSBlbHNlIGlmIChtZXNzYWdlLnR5cGUgPT09IFwicmVxdWVzdFwiKSB7XG5cdFx0XHRjb25zdCBjb21tYW5kID0gdGhpcy5jb21tYW5kc1ttZXNzYWdlLnJlcXVlc3RUeXBlXVxuXG5cdFx0XHRpZiAoY29tbWFuZCAhPSBudWxsKSB7XG5cdFx0XHRcdGNvbnN0IGNvbW1hbmRSZXN1bHQgPSBjb21tYW5kKG1lc3NhZ2UpXG5cblx0XHRcdFx0Ly8gRXZlcnkgbWV0aG9kIGV4cG9zZWQgdmlhIHdvcmtlciBwcm90b2NvbCBtdXN0IHJldHVybiBhIHByb21pc2UuIEZhaWx1cmUgdG8gZG8gc28gaXMgYSB2aW9sYXRpb24gb2YgY29udHJhY3Qgc28gd2Vcblx0XHRcdFx0Ly8gdHJ5IHRvIGNhdGNoIGl0IGVhcmx5IGFuZCB0aHJvdyBhbiBlcnJvci5cblx0XHRcdFx0aWYgKGNvbW1hbmRSZXN1bHQgPT0gbnVsbCB8fCB0eXBlb2YgY29tbWFuZFJlc3VsdC50aGVuICE9PSBcImZ1bmN0aW9uXCIpIHtcblx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoYEhhbmRsZXIgcmV0dXJuZWQgbm9uLXByb21pc2UgcmVzdWx0OiAke21lc3NhZ2UucmVxdWVzdFR5cGV9YClcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGNvbW1hbmRSZXN1bHQudGhlbihcblx0XHRcdFx0XHQodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdHRoaXMudHJhbnNwb3J0LnBvc3RNZXNzYWdlKG5ldyBSZXNwb25zZShtZXNzYWdlLmlkISwgdmFsdWUpKVxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0KGVycm9yKSA9PiB7XG5cdFx0XHRcdFx0XHR0aGlzLnRyYW5zcG9ydC5wb3N0TWVzc2FnZShuZXcgUmVxdWVzdEVycm9yKG1lc3NhZ2UuaWQhLCBlcnJvcikpXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0KVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0bGV0IGVycm9yID0gbmV3IEVycm9yKGB1bmV4cGVjdGVkIHJlcXVlc3Q6ICR7bWVzc2FnZS5pZH0sICR7bWVzc2FnZS5yZXF1ZXN0VHlwZX1gKVxuXG5cdFx0XHRcdGlmIChpc1dvcmtlcigpKSB7XG5cdFx0XHRcdFx0dGhpcy50cmFuc3BvcnQucG9zdE1lc3NhZ2UobmV3IFJlcXVlc3RFcnJvcihtZXNzYWdlLmlkISwgZXJyb3IpKVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHRocm93IGVycm9yXG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKGBVbmV4cGVjdGVkIHJlcXVlc3QgdHlwZTogJHtKU09OLnN0cmluZ2lmeShtZXNzYWdlKX1gKVxuXHRcdH1cblx0fVxufVxuXG5leHBvcnQgZnVuY3Rpb24gbWFrZVJlcXVlc3RJZEdlbmVyYXRvcihwcmVmaXg6IHN0cmluZyk6ICgpID0+IHN0cmluZyB7XG5cdGxldCByZXF1ZXN0SWQgPSAwXG5cdHJldHVybiAoKSA9PiB7XG5cdFx0aWYgKHJlcXVlc3RJZCA+PSBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUikge1xuXHRcdFx0cmVxdWVzdElkID0gMFxuXHRcdH1cblx0XHRyZXR1cm4gcHJlZml4ICsgcmVxdWVzdElkKytcblx0fVxufVxuXG4vLyBTZXJpYWxpemUgZXJyb3Igc3RhY2sgdHJhY2VzLCB3aGVuIHRoZXkgYXJlIHNlbnQgdmlhIHRoZSB3ZWJzb2NrZXQuXG5leHBvcnQgZnVuY3Rpb24gZXJyb3JUb09iaihlcnJvcjogRXJyb3IpOiB7XG5cdGRhdGE6IGFueVxuXHRtZXNzYWdlOiBhbnlcblx0bmFtZTogYW55XG5cdHN0YWNrOiBhbnlcbn0ge1xuXHRjb25zdCBlcnJvckVyYXNlZCA9IGVycm9yIGFzIGFueVxuXHRyZXR1cm4ge1xuXHRcdG5hbWU6IGVycm9yRXJhc2VkLm5hbWUsXG5cdFx0bWVzc2FnZTogZXJyb3JFcmFzZWQubWVzc2FnZSxcblx0XHRzdGFjazogZXJyb3JFcmFzZWQuc3RhY2ssXG5cdFx0ZGF0YTogZXJyb3JFcmFzZWQuZGF0YSxcblx0fVxufVxuIl0sIm1hcHBpbmdzIjoiOzs7O0lBY2EsVUFBTixNQUFpQjtDQUN2QixBQUFTO0NBQ1QsQUFBUzs7Q0FFVCxLQUFvQjtDQUVwQixBQUFTO0NBRVQsWUFBWUEsTUFBU0MsTUFBOEI7QUFDbEQsT0FBSyxPQUFPO0FBQ1osT0FBSyxjQUFjO0FBQ25CLE9BQUssS0FBSztBQUNWLE9BQUssT0FBTyxLQUFLLE9BQU87Q0FDeEI7QUFDRDtJQUVZLFdBQU4sTUFBa0I7Q0FDeEIsQUFBUztDQUNULEFBQVM7Q0FDVCxBQUFTO0NBRVQsWUFBWUMsSUFBWUMsT0FBWTtBQUNuQyxPQUFLLE9BQU87QUFDWixPQUFLLEtBQUs7QUFDVixPQUFLLFFBQVE7Q0FDYjtBQUNEO0lBRVksZUFBTixNQUFzQjtDQUM1QixBQUFTO0NBQ1QsQUFBUztDQUNULEFBQVM7Q0FFVCxZQUFZRCxJQUFZRSxPQUFjO0FBQ3JDLE9BQUssT0FBTztBQUNaLE9BQUssS0FB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