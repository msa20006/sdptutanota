import { client } from "./ClientDetector-chunk.js";

//#region src/common/misc/ClipboardUtils.ts
function fallbackCopyToClipboard(text) {
	return new Promise((resolve, reject) => {
		const textArea = document.createElement("textarea");
		textArea.value = text;
		window.document.body.appendChild(textArea);
		textArea.focus();
		textArea.select();
		try {
			document.execCommand("copy");
		} catch (err) {
			reject("fallback copy failed");
		}
		window.document.body.removeChild(textArea);
		console.log("fallback copy successful");
		resolve();
	});
}
function iosCopyToClipboard(text) {
	const el = document.createElement("textarea");
	el.value = text;
	el.contentEditable = "true";
	el.readOnly = true;
	window.document.body.appendChild(el);
	const range = document.createRange();
	range.selectNodeContents(el);
	const s = window.getSelection();
	s?.removeAllRanges();
	s?.addRange(range);
	el.setSelectionRange(0, 999999);
	window.document.execCommand("copy");
	window.document.body.removeChild(el);
}
async function copyToClipboard(text) {
	try {
		await navigator.clipboard.writeText(text);
	} catch {
		console.log("copy failed, trying fallback");
		if (client.isIos()) return iosCopyToClipboard(text);
else return fallbackCopyToClipboard(text);
	}
}

//#endregion
export { copyToClipboard };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ2xpcGJvYXJkVXRpbHMtY2h1bmsuanMiLCJuYW1lcyI6WyJ0ZXh0OiBzdHJpbmciXSwic291cmNlcyI6WyIuLi9zcmMvY29tbW9uL21pc2MvQ2xpcGJvYXJkVXRpbHMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY2xpZW50IH0gZnJvbSBcIi4vQ2xpZW50RGV0ZWN0b3JcIlxuXG5mdW5jdGlvbiBmYWxsYmFja0NvcHlUb0NsaXBib2FyZCh0ZXh0OiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcblx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcblx0XHRjb25zdCB0ZXh0QXJlYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZXh0YXJlYVwiKVxuXHRcdHRleHRBcmVhLnZhbHVlID0gdGV4dFxuXHRcdHdpbmRvdy5kb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRleHRBcmVhKVxuXHRcdHRleHRBcmVhLmZvY3VzKClcblx0XHR0ZXh0QXJlYS5zZWxlY3QoKVxuXG5cdFx0dHJ5IHtcblx0XHRcdGRvY3VtZW50LmV4ZWNDb21tYW5kKFwiY29weVwiKVxuXHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0cmVqZWN0KFwiZmFsbGJhY2sgY29weSBmYWlsZWRcIilcblx0XHR9XG5cblx0XHR3aW5kb3cuZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZCh0ZXh0QXJlYSlcblx0XHRjb25zb2xlLmxvZyhcImZhbGxiYWNrIGNvcHkgc3VjY2Vzc2Z1bFwiKVxuXHRcdHJlc29sdmUoKVxuXHR9KVxufVxuXG5mdW5jdGlvbiBpb3NDb3B5VG9DbGlwYm9hcmQodGV4dDogc3RyaW5nKSB7XG5cdGNvbnN0IGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRleHRhcmVhXCIpXG5cdGVsLnZhbHVlID0gdGV4dFxuXHRlbC5jb250ZW50RWRpdGFibGUgPSBcInRydWVcIlxuXHRlbC5yZWFkT25seSA9IHRydWVcblx0d2luZG93LmRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZWwpXG5cdGNvbnN0IHJhbmdlID0gZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKVxuXHRyYW5nZS5zZWxlY3ROb2RlQ29udGVudHMoZWwpXG5cdGNvbnN0IHMgPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKClcblx0cz8ucmVtb3ZlQWxsUmFuZ2VzKClcblx0cz8uYWRkUmFuZ2UocmFuZ2UpXG5cdGVsLnNldFNlbGVjdGlvblJhbmdlKDAsIDk5OTk5OSkgLy8gQSBiaWcgbnVtYmVyLCB0byBjb3ZlciBhbnl0aGluZyB0aGF0IGNvdWxkIGJlIGluc2lkZSB0aGUgZWxlbWVudC5cblxuXHR3aW5kb3cuZG9jdW1lbnQuZXhlY0NvbW1hbmQoXCJjb3B5XCIpXG5cdHdpbmRvdy5kb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGVsKVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY29weVRvQ2xpcGJvYXJkKHRleHQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuXHR0cnkge1xuXHRcdGF3YWl0IG5hdmlnYXRvci5jbGlwYm9hcmQud3JpdGVUZXh0KHRleHQpXG5cdH0gY2F0Y2gge1xuXHRcdGNvbnNvbGUubG9nKFwiY29weSBmYWlsZWQsIHRyeWluZyBmYWxsYmFja1wiKVxuXG5cdFx0aWYgKGNsaWVudC5pc0lvcygpKSB7XG5cdFx0XHRyZXR1cm4gaW9zQ29weVRvQ2xpcGJvYXJkKHRleHQpXG5cdFx0fSBlbHNlIHtcblx0XHRcdHJldHVybiBmYWxsYmFja0NvcHlUb0NsaXBib2FyZCh0ZXh0KVxuXHRcdH1cblx0fVxufVxuIl0sIm1hcHBpbmdzIjoiOzs7QUFFQSxTQUFTLHdCQUF3QkEsTUFBNkI7QUFDN0QsUUFBTyxJQUFJLFFBQVEsQ0FBQyxTQUFTLFdBQVc7RUFDdkMsTUFBTSxXQUFXLFNBQVMsY0FBYyxXQUFXO0FBQ25ELFdBQVMsUUFBUTtBQUNqQixTQUFPLFNBQVMsS0FBSyxZQUFZLFNBQVM7QUFDMUMsV0FBUyxPQUFPO0FBQ2hCLFdBQVMsUUFBUTtBQUVqQixNQUFJO0FBQ0gsWUFBUyxZQUFZLE9BQU87RUFDNUIsU0FBUSxLQUFLO0FBQ2IsVUFBTyx1QkFBdUI7RUFDOUI7QUFFRCxTQUFPLFNBQVMsS0FBSyxZQUFZLFNBQVM7QUFDMUMsVUFBUSxJQUFJLDJCQUEyQjtBQUN2QyxXQUFTO0NBQ1Q7QUFDRDtBQUVELFNBQVMsbUJBQW1CQSxNQUFjO0NBQ3pDLE1BQU0sS0FBSyxTQUFTLGNBQWMsV0FBVztBQUM3QyxJQUFHLFFBQVE7QUFDWCxJQUFHLGtCQUFrQjtBQUNyQixJQUFHLFdBQVc7QUFDZCxRQUFPLFNBQVMsS0FBSyxZQUFZLEdBQUc7Q0FDcEMsTUFBTSxRQUFRLFNBQVMsYUFBYTtBQUNwQyxPQUFNLG1CQUFtQixHQUFHO0NBQzVCLE1BQU0sSUFBSSxPQUFPLGNBQWM7QUFDL0IsSUFBRyxpQkFBaUI7QUFDcEIsSUFBRyxTQUFTLE1BQU07QUFDbEIsSUFBRyxrQkFBa0IsR0FBRyxPQUFPO0FBRS9CLFFBQU8sU0FBUyxZQUFZLE9BQU87QUFDbkMsUUFBTyxTQUFTLEtBQUssWUFBWSxHQUFHO0FBQ3BDO0FBRU0sZUFBZSxnQkFBZ0JBLE1BQTZCO0FBQ2xFLEtBQUk7QUFDSCxRQUFNLFVBQVUsVUFBVSxVQUFVLEtBQUs7Q0FDekMsUUFBTztBQUNQLFVBQVEsSUFBSSwrQkFBK0I7QUFFM0MsTUFBSSxPQUFPLE9BQU8sQ0FDakIsUUFBTyxtQkFBbUIsS0FBSztJQUUvQixRQUFPLHdCQUF3QixLQUFLO0NBRXJDO0FBQ0QifQ==