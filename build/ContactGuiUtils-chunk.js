import { lang } from "./LanguageViewModel-chunk.js";
import { ContactAddressType, ContactCustomDateType, ContactMessengerHandleType, ContactPhoneNumberType, ContactRelationshipType, ContactSocialType, ContactWebsiteType } from "./TutanotaConstants-chunk.js";
import { sortCompareByReverseId } from "./EntityUtils-chunk.js";

//#region src/mail-app/contacts/view/ContactGuiUtils.ts
const ContactMailAddressTypeToLabel = {
	[ContactAddressType.PRIVATE]: "private_label",
	[ContactAddressType.WORK]: "work_label",
	[ContactAddressType.OTHER]: "other_label",
	[ContactAddressType.CUSTOM]: "custom_label"
};
function getContactAddressTypeLabel(type, custom) {
	if (type === ContactAddressType.CUSTOM) return lang.makeTranslation("custom", custom);
else {
		let key = ContactMailAddressTypeToLabel[type];
		return key;
	}
}
const ContactPhoneNumberTypeToLabel = {
	[ContactPhoneNumberType.PRIVATE]: "private_label",
	[ContactPhoneNumberType.WORK]: "work_label",
	[ContactPhoneNumberType.MOBILE]: "mobile_label",
	[ContactPhoneNumberType.FAX]: "fax_label",
	[ContactPhoneNumberType.OTHER]: "other_label",
	[ContactPhoneNumberType.CUSTOM]: "custom_label"
};
function getContactPhoneNumberTypeLabel(type, custom) {
	if (type === ContactPhoneNumberType.CUSTOM) return lang.makeTranslation("custom", custom);
else {
		let key = ContactPhoneNumberTypeToLabel[type];
		return key;
	}
}
const ContactSocialTypeToLabel = {
	[ContactSocialType.TWITTER]: "twitter_label",
	[ContactSocialType.FACEBOOK]: "facebook_label",
	[ContactSocialType.XING]: "xing_label",
	[ContactSocialType.LINKED_IN]: "linkedin_label",
	[ContactSocialType.OTHER]: "other_label",
	[ContactSocialType.CUSTOM]: "custom_label"
};
function getContactSocialTypeLabel(type, custom) {
	if (type === ContactSocialType.CUSTOM) return lang.makeTranslation("custom", custom);
else {
		let key = ContactSocialTypeToLabel[type];
		return key;
	}
}
const ContactRelationshipTypeToLabel = {
	[ContactRelationshipType.PARENT]: "parent_label",
	[ContactRelationshipType.BROTHER]: "brother_label",
	[ContactRelationshipType.SISTER]: "sister_label",
	[ContactRelationshipType.CHILD]: "child_label",
	[ContactRelationshipType.FRIEND]: "friend_label",
	[ContactRelationshipType.RELATIVE]: "relative_label",
	[ContactRelationshipType.SPOUSE]: "spouse_label",
	[ContactRelationshipType.PARTNER]: "partner_label",
	[ContactRelationshipType.ASSISTANT]: "assistant_label",
	[ContactRelationshipType.MANAGER]: "manager_label",
	[ContactRelationshipType.OTHER]: "other_label",
	[ContactRelationshipType.CUSTOM]: "custom_label"
};
function getContactRelationshipTypeToLabel(type, custom) {
	if (type === ContactRelationshipType.CUSTOM) return lang.makeTranslation("custom", custom);
else {
		let key = ContactRelationshipTypeToLabel[type];
		return key;
	}
}
const ContactMessengerHandleTypeToLabel = {
	[ContactMessengerHandleType.SIGNAL]: "signal_label",
	[ContactMessengerHandleType.WHATSAPP]: "whatsapp_label",
	[ContactMessengerHandleType.TELEGRAM]: "telegram_label",
	[ContactMessengerHandleType.DISCORD]: "discord_label",
	[ContactMessengerHandleType.OTHER]: "other_label",
	[ContactMessengerHandleType.CUSTOM]: "custom_label"
};
function getContactMessengerHandleTypeToLabel(type, custom) {
	if (type === ContactMessengerHandleType.CUSTOM) return lang.makeTranslation("custom", custom);
else {
		let key = ContactMessengerHandleTypeToLabel[type];
		return key;
	}
}
const ContactCustomDateTypeToLabel = {
	[ContactCustomDateType.ANNIVERSARY]: "anniversary_label",
	[ContactCustomDateType.OTHER]: "other_label",
	[ContactCustomDateType.CUSTOM]: "custom_label"
};
function getContactCustomDateTypeToLabel(type, custom) {
	if (type === ContactCustomDateType.CUSTOM) return lang.makeTranslation("custom", custom);
else {
		let key = ContactCustomDateTypeToLabel[type];
		return key;
	}
}
const ContactCustomWebsiteTypeToLabel = {
	[ContactWebsiteType.PRIVATE]: "private_label",
	[ContactWebsiteType.WORK]: "work_label",
	[ContactWebsiteType.OTHER]: "other_label",
	[ContactWebsiteType.CUSTOM]: "custom_label"
};
function getContactCustomWebsiteTypeToLabel(type, custom) {
	if (type === ContactWebsiteType.CUSTOM) return lang.makeTranslation("custom", custom);
else {
		let key = ContactCustomWebsiteTypeToLabel[type];
		return key;
	}
}
function compareContacts(contact1, contact2, sortByFirstName = true) {
	let c1First = contact1.firstName.trim();
	let c2First = contact2.firstName.trim();
	let c1Last = contact1.lastName.trim();
	let c2Last = contact2.lastName.trim();
	let c1MailLength = contact1.mailAddresses.length;
	let c2MailLength = contact2.mailAddresses.length;
	let [c1Primary, c1Secondary] = sortByFirstName ? [c1First, c1Last] : [c1Last, c1First];
	let [c2Primary, c2Secondary] = sortByFirstName ? [c2First, c2Last] : [c2Last, c2First];
	if (!c1Primary && !c1Secondary) c1Primary = contact1.company;
	if (!c2Primary && !c2Secondary) c2Primary = contact2.company;
	if (c1Primary && !c2Primary) return -1;
else if (c2Primary && !c1Primary) return 1;
else {
		let result = c1Primary.localeCompare(c2Primary);
		if (result === 0) if (c1Secondary && !c2Secondary) return -1;
else if (c2Secondary && !c1Secondary) return 1;
else result = c1Secondary.localeCompare(c2Secondary);
		if (result === 0) if (c1MailLength > 0 && c2MailLength === 0) return -1;
else if (c2MailLength > 0 && c1MailLength === 0) return 1;
else if (c1MailLength === 0 && c2MailLength === 0) return sortCompareByReverseId(contact1, contact2);
else {
			result = contact1.mailAddresses[0].address.trim().localeCompare(contact2.mailAddresses[0].address.trim());
			if (result === 0) return sortCompareByReverseId(contact1, contact2);
else return result;
		}
else return result;
	}
}

//#endregion
export { ContactCustomDateTypeToLabel, ContactCustomWebsiteTypeToLabel, ContactMailAddressTypeToLabel, ContactMessengerHandleTypeToLabel, ContactPhoneNumberTypeToLabel, ContactRelationshipTypeToLabel, ContactSocialTypeToLabel, compareContacts, getContactAddressTypeLabel, getContactCustomDateTypeToLabel, getContactCustomWebsiteTypeToLabel, getContactMessengerHandleTypeToLabel, getContactPhoneNumberTypeLabel, getContactRelationshipTypeToLabel, getContactSocialTypeLabel };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ29udGFjdEd1aVV0aWxzLWNodW5rLmpzIiwibmFtZXMiOlsiQ29udGFjdE1haWxBZGRyZXNzVHlwZVRvTGFiZWw6IFJlY29yZDxDb250YWN0QWRkcmVzc1R5cGUsIFRyYW5zbGF0aW9uS2V5PiIsInR5cGU6IENvbnRhY3RBZGRyZXNzVHlwZSIsImN1c3RvbTogc3RyaW5nIiwiQ29udGFjdFBob25lTnVtYmVyVHlwZVRvTGFiZWw6IFJlY29yZDxDb250YWN0UGhvbmVOdW1iZXJUeXBlLCBUcmFuc2xhdGlvbktleT4iLCJ0eXBlOiBDb250YWN0UGhvbmVOdW1iZXJUeXBlIiwiQ29udGFjdFNvY2lhbFR5cGVUb0xhYmVsOiBSZWNvcmQ8Q29udGFjdFNvY2lhbFR5cGUsIFRyYW5zbGF0aW9uS2V5PiIsInR5cGU6IENvbnRhY3RTb2NpYWxUeXBlIiwiQ29udGFjdFJlbGF0aW9uc2hpcFR5cGVUb0xhYmVsOiBSZWNvcmQ8Q29udGFjdFJlbGF0aW9uc2hpcFR5cGUsIFRyYW5zbGF0aW9uS2V5PiIsInR5cGU6IENvbnRhY3RSZWxhdGlvbnNoaXBUeXBlIiwiQ29udGFjdE1lc3NlbmdlckhhbmRsZVR5cGVUb0xhYmVsOiBSZWNvcmQ8Q29udGFjdE1lc3NlbmdlckhhbmRsZVR5cGUsIFRyYW5zbGF0aW9uS2V5PiIsInR5cGU6IENvbnRhY3RNZXNzZW5nZXJIYW5kbGVUeXBlIiwiQ29udGFjdEN1c3RvbURhdGVUeXBlVG9MYWJlbDogUmVjb3JkPENvbnRhY3RDdXN0b21EYXRlVHlwZSwgVHJhbnNsYXRpb25LZXk+IiwidHlwZTogQ29udGFjdEN1c3RvbURhdGVUeXBlIiwiQ29udGFjdEN1c3RvbVdlYnNpdGVUeXBlVG9MYWJlbDogUmVjb3JkPENvbnRhY3RXZWJzaXRlVHlwZSwgVHJhbnNsYXRpb25LZXk+IiwidHlwZTogQ29udGFjdFdlYnNpdGVUeXBlIiwiY29udGFjdDE6IENvbnRhY3QiLCJjb250YWN0MjogQ29udGFjdCIsInNvcnRCeUZpcnN0TmFtZTogYm9vbGVhbiJdLCJzb3VyY2VzIjpbIi4uL3NyYy9tYWlsLWFwcC9jb250YWN0cy92aWV3L0NvbnRhY3RHdWlVdGlscy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuXHRDb250YWN0QWRkcmVzc1R5cGUsXG5cdENvbnRhY3RDdXN0b21EYXRlVHlwZSxcblx0Q29udGFjdE1lc3NlbmdlckhhbmRsZVR5cGUsXG5cdENvbnRhY3RQaG9uZU51bWJlclR5cGUsXG5cdENvbnRhY3RSZWxhdGlvbnNoaXBUeXBlLFxuXHRDb250YWN0U29jaWFsVHlwZSxcblx0Q29udGFjdFdlYnNpdGVUeXBlLFxufSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2FwaS9jb21tb24vVHV0YW5vdGFDb25zdGFudHNcIlxuaW1wb3J0IHR5cGUgeyBNYXliZVRyYW5zbGF0aW9uLCBUcmFuc2xhdGlvbiwgVHJhbnNsYXRpb25LZXkgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL21pc2MvTGFuZ3VhZ2VWaWV3TW9kZWxcIlxuaW1wb3J0IHsgbGFuZyB9IGZyb20gXCIuLi8uLi8uLi9jb21tb24vbWlzYy9MYW5ndWFnZVZpZXdNb2RlbFwiXG5pbXBvcnQgdHlwZSB7IENvbnRhY3QgfSBmcm9tIFwiLi4vLi4vLi4vY29tbW9uL2FwaS9lbnRpdGllcy90dXRhbm90YS9UeXBlUmVmcy5qc1wiXG5pbXBvcnQgeyBzb3J0Q29tcGFyZUJ5UmV2ZXJzZUlkIH0gZnJvbSBcIi4uLy4uLy4uL2NvbW1vbi9hcGkvY29tbW9uL3V0aWxzL0VudGl0eVV0aWxzXCJcblxuZXhwb3J0IGNvbnN0IENvbnRhY3RNYWlsQWRkcmVzc1R5cGVUb0xhYmVsOiBSZWNvcmQ8Q29udGFjdEFkZHJlc3NUeXBlLCBUcmFuc2xhdGlvbktleT4gPSB7XG5cdFtDb250YWN0QWRkcmVzc1R5cGUuUFJJVkFURV06IFwicHJpdmF0ZV9sYWJlbFwiLFxuXHRbQ29udGFjdEFkZHJlc3NUeXBlLldPUktdOiBcIndvcmtfbGFiZWxcIixcblx0W0NvbnRhY3RBZGRyZXNzVHlwZS5PVEhFUl06IFwib3RoZXJfbGFiZWxcIixcblx0W0NvbnRhY3RBZGRyZXNzVHlwZS5DVVNUT01dOiBcImN1c3RvbV9sYWJlbFwiLFxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q29udGFjdEFkZHJlc3NUeXBlTGFiZWwodHlwZTogQ29udGFjdEFkZHJlc3NUeXBlLCBjdXN0b206IHN0cmluZyk6IE1heWJlVHJhbnNsYXRpb24ge1xuXHRpZiAodHlwZSA9PT0gQ29udGFjdEFkZHJlc3NUeXBlLkNVU1RPTSkge1xuXHRcdHJldHVybiBsYW5nLm1ha2VUcmFuc2xhdGlvbihcImN1c3RvbVwiLCBjdXN0b20pXG5cdH0gZWxzZSB7XG5cdFx0bGV0IGtleSA9IENvbnRhY3RNYWlsQWRkcmVzc1R5cGVUb0xhYmVsW3R5cGVdXG5cdFx0cmV0dXJuIGtleVxuXHR9XG59XG5cbmV4cG9ydCBjb25zdCBDb250YWN0UGhvbmVOdW1iZXJUeXBlVG9MYWJlbDogUmVjb3JkPENvbnRhY3RQaG9uZU51bWJlclR5cGUsIFRyYW5zbGF0aW9uS2V5PiA9IHtcblx0W0NvbnRhY3RQaG9uZU51bWJlclR5cGUuUFJJVkFURV06IFwicHJpdmF0ZV9sYWJlbFwiLFxuXHRbQ29udGFjdFBob25lTnVtYmVyVHlwZS5XT1JLXTogXCJ3b3JrX2xhYmVsXCIsXG5cdFtDb250YWN0UGhvbmVOdW1iZXJUeXBlLk1PQklMRV06IFwibW9iaWxlX2xhYmVsXCIsXG5cdFtDb250YWN0UGhvbmVOdW1iZXJUeXBlLkZBWF06IFwiZmF4X2xhYmVsXCIsXG5cdFtDb250YWN0UGhvbmVOdW1iZXJUeXBlLk9USEVSXTogXCJvdGhlcl9sYWJlbFwiLFxuXHRbQ29udGFjdFBob25lTnVtYmVyVHlwZS5DVVNUT01dOiBcImN1c3RvbV9sYWJlbFwiLFxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q29udGFjdFBob25lTnVtYmVyVHlwZUxhYmVsKHR5cGU6IENvbnRhY3RQaG9uZU51bWJlclR5cGUsIGN1c3RvbTogc3RyaW5nKTogTWF5YmVUcmFuc2xhdGlvbiB7XG5cdGlmICh0eXBlID09PSBDb250YWN0UGhvbmVOdW1iZXJUeXBlLkNVU1RPTSkge1xuXHRcdHJldHVybiBsYW5nLm1ha2VUcmFuc2xhdGlvbihcImN1c3RvbVwiLCBjdXN0b20pXG5cdH0gZWxzZSB7XG5cdFx0bGV0IGtleSA9IENvbnRhY3RQaG9uZU51bWJlclR5cGVUb0xhYmVsW3R5cGVdXG5cdFx0cmV0dXJuIGtleVxuXHR9XG59XG5cbmV4cG9ydCBjb25zdCBDb250YWN0U29jaWFsVHlwZVRvTGFiZWw6IFJlY29yZDxDb250YWN0U29jaWFsVHlwZSwgVHJhbnNsYXRpb25LZXk+ID0ge1xuXHRbQ29udGFjdFNvY2lhbFR5cGUuVFdJVFRFUl06IFwidHdpdHRlcl9sYWJlbFwiLFxuXHRbQ29udGFjdFNvY2lhbFR5cGUuRkFDRUJPT0tdOiBcImZhY2Vib29rX2xhYmVsXCIsXG5cdFtDb250YWN0U29jaWFsVHlwZS5YSU5HXTogXCJ4aW5nX2xhYmVsXCIsXG5cdFtDb250YWN0U29jaWFsVHlwZS5MSU5LRURfSU5dOiBcImxpbmtlZGluX2xhYmVsXCIsXG5cdFtDb250YWN0U29jaWFsVHlwZS5PVEhFUl06IFwib3RoZXJfbGFiZWxcIixcblx0W0NvbnRhY3RTb2NpYWxUeXBlLkNVU1RPTV06IFwiY3VzdG9tX2xhYmVsXCIsXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRDb250YWN0U29jaWFsVHlwZUxhYmVsKHR5cGU6IENvbnRhY3RTb2NpYWxUeXBlLCBjdXN0b206IHN0cmluZyk6IE1heWJlVHJhbnNsYXRpb24ge1xuXHRpZiAodHlwZSA9PT0gQ29udGFjdFNvY2lhbFR5cGUuQ1VTVE9NKSB7XG5cdFx0cmV0dXJuIGxhbmcubWFrZVRyYW5zbGF0aW9uKFwiY3VzdG9tXCIsIGN1c3RvbSlcblx0fSBlbHNlIHtcblx0XHRsZXQga2V5ID0gQ29udGFjdFNvY2lhbFR5cGVUb0xhYmVsW3R5cGVdXG5cdFx0cmV0dXJuIGtleVxuXHR9XG59XG5cbmV4cG9ydCBjb25zdCBDb250YWN0UmVsYXRpb25zaGlwVHlwZVRvTGFiZWw6IFJlY29yZDxDb250YWN0UmVsYXRpb25zaGlwVHlwZSwgVHJhbnNsYXRpb25LZXk+ID0ge1xuXHRbQ29udGFjdFJlbGF0aW9uc2hpcFR5cGUuUEFSRU5UXTogXCJwYXJlbnRfbGFiZWxcIixcblx0W0NvbnRhY3RSZWxhdGlvbnNoaXBUeXBlLkJST1RIRVJdOiBcImJyb3RoZXJfbGFiZWxcIixcblx0W0NvbnRhY3RSZWxhdGlvbnNoaXBUeXBlLlNJU1RFUl06IFwic2lzdGVyX2xhYmVsXCIsXG5cdFtDb250YWN0UmVsYXRpb25zaGlwVHlwZS5DSElMRF06IFwiY2hpbGRfbGFiZWxcIixcblx0W0NvbnRhY3RSZWxhdGlvbnNoaXBUeXBlLkZSSUVORF06IFwiZnJpZW5kX2xhYmVsXCIsXG5cdFtDb250YWN0UmVsYXRpb25zaGlwVHlwZS5SRUxBVElWRV06IFwicmVsYXRpdmVfbGFiZWxcIixcblx0W0NvbnRhY3RSZWxhdGlvbnNoaXBUeXBlLlNQT1VTRV06IFwic3BvdXNlX2xhYmVsXCIsXG5cdFtDb250YWN0UmVsYXRpb25zaGlwVHlwZS5QQVJUTkVSXTogXCJwYXJ0bmVyX2xhYmVsXCIsXG5cdFtDb250YWN0UmVsYXRpb25zaGlwVHlwZS5BU1NJU1RBTlRdOiBcImFzc2lzdGFudF9sYWJlbFwiLFxuXHRbQ29udGFjdFJlbGF0aW9uc2hpcFR5cGUuTUFOQUdFUl06IFwibWFuYWdlcl9sYWJlbFwiLFxuXHRbQ29udGFjdFJlbGF0aW9uc2hpcFR5cGUuT1RIRVJdOiBcIm90aGVyX2xhYmVsXCIsXG5cdFtDb250YWN0UmVsYXRpb25zaGlwVHlwZS5DVVNUT01dOiBcImN1c3RvbV9sYWJlbFwiLFxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q29udGFjdFJlbGF0aW9uc2hpcFR5cGVUb0xhYmVsKHR5cGU6IENvbnRhY3RSZWxhdGlvbnNoaXBUeXBlLCBjdXN0b206IHN0cmluZyk6IE1heWJlVHJhbnNsYXRpb24ge1xuXHRpZiAodHlwZSA9PT0gQ29udGFjdFJlbGF0aW9uc2hpcFR5cGUuQ1VTVE9NKSB7XG5cdFx0cmV0dXJuIGxhbmcubWFrZVRyYW5zbGF0aW9uKFwiY3VzdG9tXCIsIGN1c3RvbSlcblx0fSBlbHNlIHtcblx0XHRsZXQga2V5ID0gQ29udGFjdFJlbGF0aW9uc2hpcFR5cGVUb0xhYmVsW3R5cGVdXG5cdFx0cmV0dXJuIGtleVxuXHR9XG59XG5cbmV4cG9ydCBjb25zdCBDb250YWN0TWVzc2VuZ2VySGFuZGxlVHlwZVRvTGFiZWw6IFJlY29yZDxDb250YWN0TWVzc2VuZ2VySGFuZGxlVHlwZSwgVHJhbnNsYXRpb25LZXk+ID0ge1xuXHRbQ29udGFjdE1lc3NlbmdlckhhbmRsZVR5cGUuU0lHTkFMXTogXCJzaWduYWxfbGFiZWxcIixcblx0W0NvbnRhY3RNZXNzZW5nZXJIYW5kbGVUeXBlLldIQVRTQVBQXTogXCJ3aGF0c2FwcF9sYWJlbFwiLFxuXHRbQ29udGFjdE1lc3NlbmdlckhhbmRsZVR5cGUuVEVMRUdSQU1dOiBcInRlbGVncmFtX2xhYmVsXCIsXG5cdFtDb250YWN0TWVzc2VuZ2VySGFuZGxlVHlwZS5ESVNDT1JEXTogXCJkaXNjb3JkX2xhYmVsXCIsXG5cdFtDb250YWN0TWVzc2VuZ2VySGFuZGxlVHlwZS5PVEhFUl06IFwib3RoZXJfbGFiZWxcIixcblx0W0NvbnRhY3RNZXNzZW5nZXJIYW5kbGVUeXBlLkNVU1RPTV06IFwiY3VzdG9tX2xhYmVsXCIsXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRDb250YWN0TWVzc2VuZ2VySGFuZGxlVHlwZVRvTGFiZWwodHlwZTogQ29udGFjdE1lc3NlbmdlckhhbmRsZVR5cGUsIGN1c3RvbTogc3RyaW5nKTogTWF5YmVUcmFuc2xhdGlvbiB7XG5cdGlmICh0eXBlID09PSBDb250YWN0TWVzc2VuZ2VySGFuZGxlVHlwZS5DVVNUT00pIHtcblx0XHRyZXR1cm4gbGFuZy5tYWtlVHJhbnNsYXRpb24oXCJjdXN0b21cIiwgY3VzdG9tKVxuXHR9IGVsc2Uge1xuXHRcdGxldCBrZXkgPSBDb250YWN0TWVzc2VuZ2VySGFuZGxlVHlwZVRvTGFiZWxbdHlwZV1cblx0XHRyZXR1cm4ga2V5XG5cdH1cbn1cblxuZXhwb3J0IGNvbnN0IENvbnRhY3RDdXN0b21EYXRlVHlwZVRvTGFiZWw6IFJlY29yZDxDb250YWN0Q3VzdG9tRGF0ZVR5cGUsIFRyYW5zbGF0aW9uS2V5PiA9IHtcblx0W0NvbnRhY3RDdXN0b21EYXRlVHlwZS5BTk5JVkVSU0FSWV06IFwiYW5uaXZlcnNhcnlfbGFiZWxcIixcblx0W0NvbnRhY3RDdXN0b21EYXRlVHlwZS5PVEhFUl06IFwib3RoZXJfbGFiZWxcIixcblx0W0NvbnRhY3RDdXN0b21EYXRlVHlwZS5DVVNUT01dOiBcImN1c3RvbV9sYWJlbFwiLFxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q29udGFjdEN1c3RvbURhdGVUeXBlVG9MYWJlbCh0eXBlOiBDb250YWN0Q3VzdG9tRGF0ZVR5cGUsIGN1c3RvbTogc3RyaW5nKTogTWF5YmVUcmFuc2xhdGlvbiB7XG5cdGlmICh0eXBlID09PSBDb250YWN0Q3VzdG9tRGF0ZVR5cGUuQ1VTVE9NKSB7XG5cdFx0cmV0dXJuIGxhbmcubWFrZVRyYW5zbGF0aW9uKFwiY3VzdG9tXCIsIGN1c3RvbSlcblx0fSBlbHNlIHtcblx0XHRsZXQga2V5ID0gQ29udGFjdEN1c3RvbURhdGVUeXBlVG9MYWJlbFt0eXBlXVxuXHRcdHJldHVybiBrZXlcblx0fVxufVxuXG5leHBvcnQgY29uc3QgQ29udGFjdEN1c3RvbVdlYnNpdGVUeXBlVG9MYWJlbDogUmVjb3JkPENvbnRhY3RXZWJzaXRlVHlwZSwgVHJhbnNsYXRpb25LZXk+ID0ge1xuXHRbQ29udGFjdFdlYnNpdGVUeXBlLlBSSVZBVEVdOiBcInByaXZhdGVfbGFiZWxcIixcblx0W0NvbnRhY3RXZWJzaXRlVHlwZS5XT1JLXTogXCJ3b3JrX2xhYmVsXCIsXG5cdFtDb250YWN0V2Vic2l0ZVR5cGUuT1RIRVJdOiBcIm90aGVyX2xhYmVsXCIsXG5cdFtDb250YWN0V2Vic2l0ZVR5cGUuQ1VTVE9NXTogXCJjdXN0b21fbGFiZWxcIixcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldENvbnRhY3RDdXN0b21XZWJzaXRlVHlwZVRvTGFiZWwodHlwZTogQ29udGFjdFdlYnNpdGVUeXBlLCBjdXN0b206IHN0cmluZyk6IE1heWJlVHJhbnNsYXRpb24ge1xuXHRpZiAodHlwZSA9PT0gQ29udGFjdFdlYnNpdGVUeXBlLkNVU1RPTSkge1xuXHRcdHJldHVybiBsYW5nLm1ha2VUcmFuc2xhdGlvbihcImN1c3RvbVwiLCBjdXN0b20pXG5cdH0gZWxzZSB7XG5cdFx0bGV0IGtleSA9IENvbnRhY3RDdXN0b21XZWJzaXRlVHlwZVRvTGFiZWxbdHlwZV1cblx0XHRyZXR1cm4ga2V5XG5cdH1cbn1cblxuZXhwb3J0IHR5cGUgQ29udGFjdENvbXBhcmF0b3IgPSAoYXJnMDogQ29udGFjdCwgYXJnMTogQ29udGFjdCkgPT4gbnVtYmVyXG5cbi8qKlxuICogU29ydHMgYnkgdGhlIGZvbGxvd2luZyBwcmVmZXJlbmNlczpcbiAqIDEuIGZpcnN0IG5hbWVcbiAqIDIuIHNlY29uZCBuYW1lXG4gKiAzLiBmaXJzdCBlbWFpbCBhZGRyZXNzXG4gKiA0LiBpZFxuICogTWlzc2luZyBmaWVsZHMgYXJlIHNvcnRlZCBiZWxvdyBleGlzdGluZyBmaWVsZHNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbXBhcmVDb250YWN0cyhjb250YWN0MTogQ29udGFjdCwgY29udGFjdDI6IENvbnRhY3QsIHNvcnRCeUZpcnN0TmFtZTogYm9vbGVhbiA9IHRydWUpOiBudW1iZXIge1xuXHRsZXQgYzFGaXJzdCA9IGNvbnRhY3QxLmZpcnN0TmFtZS50cmltKClcblx0bGV0IGMyRmlyc3QgPSBjb250YWN0Mi5maXJzdE5hbWUudHJpbSgpXG5cdGxldCBjMUxhc3QgPSBjb250YWN0MS5sYXN0TmFtZS50cmltKClcblx0bGV0IGMyTGFzdCA9IGNvbnRhY3QyLmxhc3ROYW1lLnRyaW0oKVxuXHRsZXQgYzFNYWlsTGVuZ3RoID0gY29udGFjdDEubWFpbEFkZHJlc3Nlcy5sZW5ndGhcblx0bGV0IGMyTWFpbExlbmd0aCA9IGNvbnRhY3QyLm1haWxBZGRyZXNzZXMubGVuZ3RoXG5cdGxldCBbYzFQcmltYXJ5LCBjMVNlY29uZGFyeV0gPSBzb3J0QnlGaXJzdE5hbWUgPyBbYzFGaXJzdCwgYzFMYXN0XSA6IFtjMUxhc3QsIGMxRmlyc3RdXG5cdGxldCBbYzJQcmltYXJ5LCBjMlNlY29uZGFyeV0gPSBzb3J0QnlGaXJzdE5hbWUgPyBbYzJGaXJzdCwgYzJMYXN0XSA6IFtjMkxhc3QsIGMyRmlyc3RdXG5cblx0Ly8gSWYgdGhlIGNvbnRhY3QgZG9lc24ndCBoYXZlIGVpdGhlciB0aGUgZmlyc3Qgb3IgdGhlIGxhc3QgbmFtZSwgdXNlIGNvbXBhbnkgYXMgdGhlIGZpcnN0IG5hbWUuIFdlIGNhbm5vdCBqdXN0IG1ha2UgYSBzdHJpbmcgb3V0IG9mIGl0XG5cdC8vIGFuZCBjb21wYXJlIGl0IGJlY2F1c2Ugd2Ugd291bGQgbG9zZSBwcmlvcml0eSBvZiBmaXJzdCBuYW1lIG92ZXIgbGFzdCBuYW1lIGFuZCBzZXQgbmFtZSBvdmVyIHVuc2V0IG5hbWUuXG5cdGlmICghYzFQcmltYXJ5ICYmICFjMVNlY29uZGFyeSkge1xuXHRcdGMxUHJpbWFyeSA9IGNvbnRhY3QxLmNvbXBhbnlcblx0fVxuXG5cdGlmICghYzJQcmltYXJ5ICYmICFjMlNlY29uZGFyeSkge1xuXHRcdGMyUHJpbWFyeSA9IGNvbnRhY3QyLmNvbXBhbnlcblx0fVxuXG5cdGlmIChjMVByaW1hcnkgJiYgIWMyUHJpbWFyeSkge1xuXHRcdHJldHVybiAtMVxuXHR9IGVsc2UgaWYgKGMyUHJpbWFyeSAmJiAhYzFQcmltYXJ5KSB7XG5cdFx0cmV0dXJuIDFcblx0fSBlbHNlIHtcblx0XHRsZXQgcmVzdWx0ID0gYzFQcmltYXJ5LmxvY2FsZUNvbXBhcmUoYzJQcmltYXJ5KVxuXG5cdFx0aWYgKHJlc3VsdCA9PT0gMCkge1xuXHRcdFx0aWYgKGMxU2Vjb25kYXJ5ICYmICFjMlNlY29uZGFyeSkge1xuXHRcdFx0XHRyZXR1cm4gLTFcblx0XHRcdH0gZWxzZSBpZiAoYzJTZWNvbmRhcnkgJiYgIWMxU2Vjb25kYXJ5KSB7XG5cdFx0XHRcdHJldHVybiAxXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRyZXN1bHQgPSBjMVNlY29uZGFyeS5sb2NhbGVDb21wYXJlKGMyU2Vjb25kYXJ5KVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGlmIChyZXN1bHQgPT09IDApIHtcblx0XHRcdC8vIG5hbWVzIGFyZSBlcXVhbCBvciBubyBuYW1lcyBpbiBjb250YWN0XG5cdFx0XHRpZiAoYzFNYWlsTGVuZ3RoID4gMCAmJiBjMk1haWxMZW5ndGggPT09IDApIHtcblx0XHRcdFx0cmV0dXJuIC0xXG5cdFx0XHR9IGVsc2UgaWYgKGMyTWFpbExlbmd0aCA+IDAgJiYgYzFNYWlsTGVuZ3RoID09PSAwKSB7XG5cdFx0XHRcdHJldHVybiAxXG5cdFx0XHR9IGVsc2UgaWYgKGMxTWFpbExlbmd0aCA9PT0gMCAmJiBjMk1haWxMZW5ndGggPT09IDApIHtcblx0XHRcdFx0Ly8gc2VlIE11bHRpc2VsZWN0IHdpdGggc2hpZnQgYW5kIHVwIGFycm93IG5vdCB3b3JraW5nIHByb3Blcmx5ICMxNTIgYXQgZ2l0aHViXG5cdFx0XHRcdHJldHVybiBzb3J0Q29tcGFyZUJ5UmV2ZXJzZUlkKGNvbnRhY3QxLCBjb250YWN0Milcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHJlc3VsdCA9IGNvbnRhY3QxLm1haWxBZGRyZXNzZXNbMF0uYWRkcmVzcy50cmltKCkubG9jYWxlQ29tcGFyZShjb250YWN0Mi5tYWlsQWRkcmVzc2VzWzBdLmFkZHJlc3MudHJpbSgpKVxuXG5cdFx0XHRcdGlmIChyZXN1bHQgPT09IDApIHtcblx0XHRcdFx0XHQvLyBzZWUgTXVsdGlzZWxlY3Qgd2l0aCBzaGlmdCBhbmQgdXAgYXJyb3cgbm90IHdvcmtpbmcgcHJvcGVybHkgIzE1MiBhdCBnaXRodWJcblx0XHRcdFx0XHRyZXR1cm4gc29ydENvbXBhcmVCeVJldmVyc2VJZChjb250YWN0MSwgY29udGFjdDIpXG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0cmV0dXJuIHJlc3VsdFxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJldHVybiByZXN1bHRcblx0XHR9XG5cdH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7TUFjYUEsZ0NBQTRFO0VBQ3ZGLG1CQUFtQixVQUFVO0VBQzdCLG1CQUFtQixPQUFPO0VBQzFCLG1CQUFtQixRQUFRO0VBQzNCLG1CQUFtQixTQUFTO0FBQzdCO0FBRU0sU0FBUywyQkFBMkJDLE1BQTBCQyxRQUFrQztBQUN0RyxLQUFJLFNBQVMsbUJBQW1CLE9BQy9CLFFBQU8sS0FBSyxnQkFBZ0IsVUFBVSxPQUFPO0tBQ3ZDO0VBQ04sSUFBSSxNQUFNLDhCQUE4QjtBQUN4QyxTQUFPO0NBQ1A7QUFDRDtNQUVZQyxnQ0FBZ0Y7RUFDM0YsdUJBQXVCLFVBQVU7RUFDakMsdUJBQXVCLE9BQU87RUFDOUIsdUJBQXVCLFNBQVM7RUFDaEMsdUJBQXVCLE1BQU07RUFDN0IsdUJBQXVCLFFBQVE7RUFDL0IsdUJBQXVCLFNBQVM7QUFDakM7QUFFTSxTQUFTLCtCQUErQkMsTUFBOEJGLFFBQWtDO0FBQzlHLEtBQUksU0FBUyx1QkFBdUIsT0FDbkMsUUFBTyxLQUFLLGdCQUFnQixVQUFVLE9BQU87S0FDdkM7RUFDTixJQUFJLE1BQU0sOEJBQThCO0FBQ3hDLFNBQU87Q0FDUDtBQUNEO01BRVlHLDJCQUFzRTtFQUNqRixrQkFBa0IsVUFBVTtFQUM1QixrQkFBa0IsV0FBVztFQUM3QixrQkFBa0IsT0FBTztFQUN6QixrQkFBa0IsWUFBWTtFQUM5QixrQkFBa0IsUUFBUTtFQUMxQixrQkFBa0IsU0FBUztBQUM1QjtBQUVNLFNBQVMsMEJBQTBCQyxNQUF5QkosUUFBa0M7QUFDcEcsS0FBSSxTQUFTLGtCQUFrQixPQUM5QixRQUFPLEtBQUssZ0JBQWdCLFVBQVUsT0FBTztLQUN2QztFQUNOLElBQUksTUFBTSx5QkFBeUI7QUFDbkMsU0FBTztDQUNQO0FBQ0Q7TUFFWUssaUNBQWtGO0VBQzdGLHdCQUF3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