import { ProgrammingError } from "./ProgrammingError-chunk.js";

//#region src/common/api/common/Env.ts
const LOGIN_TITLE = "Mail. Done. Right. Tuta Mail Login & Sign up for an Ad-free Mailbox";
const Mode = Object.freeze({
	Browser: "Browser",
	App: "App",
	Test: "Test",
	Playground: "Playground",
	Desktop: "Desktop",
	Admin: "Admin"
});
function getWebsocketBaseUrl(domainConfig) {
	return domainConfig.apiUrl.replace(/^http/, "ws");
}
function getApiBaseUrl(domainConfig) {
	if (isIOSApp()) return domainConfig.apiUrl.replace(/^http/, "api");
else return domainConfig.apiUrl;
}
function isIOSApp() {
	if (isApp() && env.platformId == null) throw new ProgrammingError("PlatformId is not set!");
	return env.mode === Mode.App && env.platformId === "ios";
}
function isAppleDevice() {
	return env.platformId === "darwin" || isIOSApp();
}
function isAndroidApp() {
	if (isApp() && env.platformId == null) throw new ProgrammingError("PlatformId is not set!");
	return env.mode === Mode.App && env.platformId === "android";
}
function isApp() {
	return env.mode === Mode.App;
}
function isDesktop() {
	return env.mode === Mode.Desktop;
}
function isBrowser() {
	return env.mode === Mode.Browser;
}
let worker = typeof WorkerGlobalScope !== "undefined" && self instanceof WorkerGlobalScope;
let node = typeof process === "object" && typeof process.versions === "object" && typeof process.versions.node !== "undefined";
function isWebClient() {
	return env.mode === Mode.Browser;
}
function isAdminClient() {
	return env.mode === Mode.Admin;
}
function isElectronClient() {
	return isDesktop() || isAdminClient();
}
function isMainOrNode() {
	return !worker || node || env.mode === Mode.Test;
}
function isWorkerOrNode() {
	return worker || node || env.mode === Mode.Test;
}
function isWorker() {
	return worker;
}
function isTest() {
	return env.mode === Mode.Test;
}
function isDesktopMainThread() {
	return node && typeof env !== "undefined" && (env.mode === Mode.Desktop || env.mode === Mode.Admin);
}
let boot = !isDesktopMainThread() && !isWorker();
/**
* A hackaround. Set by bundler.
* Rolldown doesn't inline const enums at the moment, so we can't assert the loading order.
* If not set defaults to true
*/
const assertionsEnabled = false;
function assertMainOrNode() {
	if (!assertionsEnabled) return;
	if (!isMainOrNode()) throw new Error("this code must not run in the worker thread");
	if (boot) throw new Error("this main code must not be loaded at boot time");
}
function assertMainOrNodeBoot() {
	if (!assertionsEnabled) return;
	if (!isMainOrNode()) throw new Error("this code must not run in the worker thread");
}
function assertWorkerOrNode() {
	if (!assertionsEnabled) return;
	if (!isWorkerOrNode()) throw new Error("this code must not run in the gui thread");
}
function bootFinished() {
	boot = false;
}
function isOfflineStorageAvailable() {
	return !isBrowser();
}

//#endregion
export { LOGIN_TITLE, Mode, assertMainOrNode, assertMainOrNodeBoot, assertWorkerOrNode, bootFinished, getApiBaseUrl, getWebsocketBaseUrl, isAdminClient, isAndroidApp, isApp, isAppleDevice, isBrowser, isDesktop, isElectronClient, isIOSApp, isMainOrNode, isOfflineStorageAvailable, isTest, isWebClient, isWorker };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRW52LWNodW5rLmpzIiwibmFtZXMiOlsiTW9kZTogUmVjb3JkPEVudk1vZGUsIEVudk1vZGU+IiwiZG9tYWluQ29uZmlnOiBEb21haW5Db25maWciXSwic291cmNlcyI6WyIuLi9zcmMvY29tbW9uL2FwaS9jb21tb24vRW52LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vQGJ1bmRsZUludG86Y29tbW9uLW1pblxuXG5pbXBvcnQgeyBQcm9ncmFtbWluZ0Vycm9yIH0gZnJvbSBcIi4vZXJyb3IvUHJvZ3JhbW1pbmdFcnJvci5qc1wiXG5cbi8vIGtlZXAgaW4gc3luYyB3aXRoIExhdW5jaEh0bWwuanMgbWV0YSB0YWcgdGl0bGVcbmV4cG9ydCBjb25zdCBMT0dJTl9USVRMRSA9IFwiTWFpbC4gRG9uZS4gUmlnaHQuIFR1dGEgTWFpbCBMb2dpbiAmIFNpZ24gdXAgZm9yIGFuIEFkLWZyZWUgTWFpbGJveFwiXG5leHBvcnQgY29uc3QgTW9kZTogUmVjb3JkPEVudk1vZGUsIEVudk1vZGU+ID0gT2JqZWN0LmZyZWV6ZSh7XG5cdEJyb3dzZXI6IFwiQnJvd3NlclwiLFxuXHRBcHA6IFwiQXBwXCIsXG5cdFRlc3Q6IFwiVGVzdFwiLFxuXHRQbGF5Z3JvdW5kOiBcIlBsYXlncm91bmRcIixcblx0RGVza3RvcDogXCJEZXNrdG9wXCIsXG5cdEFkbWluOiBcIkFkbWluXCIsXG59KVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0V2Vic29ja2V0QmFzZVVybChkb21haW5Db25maWc6IERvbWFpbkNvbmZpZyk6IHN0cmluZyB7XG5cdHJldHVybiAoXG5cdFx0ZG9tYWluQ29uZmlnLmFwaVVybFxuXHRcdFx0Ly8gcmVwbGFjZXMgaHR0cDogd2l0aCB3czogYW5kIGh0dHBzOiB3aXRoIHdzczpcblx0XHRcdC5yZXBsYWNlKC9eaHR0cC8sIFwid3NcIilcblx0KVxufVxuXG4vKiogUmV0dXJucyB0aGUgb3JpZ2luIHdoaWNoIHNob3VsZCBiZSB1c2VkIGZvciBBUEkgcmVxdWVzdHMuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0QXBpQmFzZVVybChkb21haW5Db25maWc6IERvbWFpbkNvbmZpZyk6IHN0cmluZyB7XG5cdGlmIChpc0lPU0FwcCgpKSB7XG5cdFx0Ly8gaHR0cDovLyAtPiBhcGk6Ly8gYW5kIGh0dHBzOi8vIC0+IGFwaXM6Ly9cblx0XHRyZXR1cm4gZG9tYWluQ29uZmlnLmFwaVVybC5yZXBsYWNlKC9eaHR0cC8sIFwiYXBpXCIpXG5cdH0gZWxzZSB7XG5cdFx0cmV0dXJuIGRvbWFpbkNvbmZpZy5hcGlVcmxcblx0fVxufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNJT1NBcHAoKTogYm9vbGVhbiB7XG5cdGlmIChpc0FwcCgpICYmIGVudi5wbGF0Zm9ybUlkID09IG51bGwpIHtcblx0XHR0aHJvdyBuZXcgUHJvZ3JhbW1pbmdFcnJvcihcIlBsYXRmb3JtSWQgaXMgbm90IHNldCFcIilcblx0fVxuXHRyZXR1cm4gZW52Lm1vZGUgPT09IE1vZGUuQXBwICYmIGVudi5wbGF0Zm9ybUlkID09PSBcImlvc1wiXG59XG5cbi8qKlxuICogUmV0dXJuIHRydWUgaWYgYW4gQXBwbGUgZGV2aWNlOyB1c2VkIGZvciBjaGVja2luZyBpZiBDVFJMIG9yIENNRC9NZXRhIHNob3VsZCBiZSB1c2VkIGFzIHRoZSBwcmltYXJ5IG1vZGlmaWVyXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0FwcGxlRGV2aWNlKCk6IGJvb2xlYW4ge1xuXHRyZXR1cm4gZW52LnBsYXRmb3JtSWQgPT09IFwiZGFyd2luXCIgfHwgaXNJT1NBcHAoKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNBbmRyb2lkQXBwKCk6IGJvb2xlYW4ge1xuXHRpZiAoaXNBcHAoKSAmJiBlbnYucGxhdGZvcm1JZCA9PSBudWxsKSB7XG5cdFx0dGhyb3cgbmV3IFByb2dyYW1taW5nRXJyb3IoXCJQbGF0Zm9ybUlkIGlzIG5vdCBzZXQhXCIpXG5cdH1cblxuXHRyZXR1cm4gZW52Lm1vZGUgPT09IE1vZGUuQXBwICYmIGVudi5wbGF0Zm9ybUlkID09PSBcImFuZHJvaWRcIlxufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNBcHAoKTogYm9vbGVhbiB7XG5cdHJldHVybiBlbnYubW9kZSA9PT0gTW9kZS5BcHBcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzRGVza3RvcCgpOiBib29sZWFuIHtcblx0cmV0dXJuIGVudi5tb2RlID09PSBNb2RlLkRlc2t0b3Bcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzQnJvd3NlcigpOiBib29sZWFuIHtcblx0cmV0dXJuIGVudi5tb2RlID09PSBNb2RlLkJyb3dzZXJcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlmRGVza3RvcDxUPihvYmo6IFQgfCBudWxsKTogVCB8IG51bGwge1xuXHRyZXR1cm4gaXNEZXNrdG9wKCkgPyBvYmogOiBudWxsXG59XG5cbmxldCB3b3JrZXIgPSB0eXBlb2YgV29ya2VyR2xvYmFsU2NvcGUgIT09IFwidW5kZWZpbmVkXCIgJiYgc2VsZiBpbnN0YW5jZW9mIFdvcmtlckdsb2JhbFNjb3BlXG5sZXQgbm9kZSA9IHR5cGVvZiBwcm9jZXNzID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBwcm9jZXNzLnZlcnNpb25zID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBwcm9jZXNzLnZlcnNpb25zLm5vZGUgIT09IFwidW5kZWZpbmVkXCJcblxuZXhwb3J0IGZ1bmN0aW9uIGlzTWFpbigpOiBib29sZWFuIHtcblx0cmV0dXJuICF3b3JrZXIgJiYgIW5vZGVcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzV2ViQ2xpZW50KCkge1xuXHRyZXR1cm4gZW52Lm1vZGUgPT09IE1vZGUuQnJvd3NlclxufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNBZG1pbkNsaWVudCgpOiBib29sZWFuIHtcblx0cmV0dXJuIGVudi5tb2RlID09PSBNb2RlLkFkbWluXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0VsZWN0cm9uQ2xpZW50KCk6IGJvb2xlYW4ge1xuXHRyZXR1cm4gaXNEZXNrdG9wKCkgfHwgaXNBZG1pbkNsaWVudCgpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc01haW5Pck5vZGUoKTogYm9vbGVhbiB7XG5cdHJldHVybiAhd29ya2VyIHx8IG5vZGUgfHwgZW52Lm1vZGUgPT09IE1vZGUuVGVzdFxufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNXb3JrZXJPck5vZGUoKTogYm9vbGVhbiB7XG5cdHJldHVybiB3b3JrZXIgfHwgbm9kZSB8fCBlbnYubW9kZSA9PT0gTW9kZS5UZXN0XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1dvcmtlcigpOiBib29sZWFuIHtcblx0cmV0dXJuIHdvcmtlclxufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNUZXN0KCk6IGJvb2xlYW4ge1xuXHRyZXR1cm4gZW52Lm1vZGUgPT09IE1vZGUuVGVzdFxufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNEZXNrdG9wTWFpblRocmVhZCgpOiBib29sZWFuIHtcblx0cmV0dXJuIG5vZGUgJiYgdHlwZW9mIGVudiAhPT0gXCJ1bmRlZmluZWRcIiAmJiAoZW52Lm1vZGUgPT09IE1vZGUuRGVza3RvcCB8fCBlbnYubW9kZSA9PT0gTW9kZS5BZG1pbilcbn1cblxubGV0IGJvb3QgPSAhaXNEZXNrdG9wTWFpblRocmVhZCgpICYmICFpc1dvcmtlcigpXG5cbi8qKlxuICogQSBoYWNrYXJvdW5kLiBTZXQgYnkgYnVuZGxlci5cbiAqIFJvbGxkb3duIGRvZXNuJ3QgaW5saW5lIGNvbnN0IGVudW1zIGF0IHRoZSBtb21lbnQsIHNvIHdlIGNhbid0IGFzc2VydCB0aGUgbG9hZGluZyBvcmRlci5cbiAqIElmIG5vdCBzZXQgZGVmYXVsdHMgdG8gdHJ1ZVxuICovXG5jb25zdCBhc3NlcnRpb25zRW5hYmxlZCA9IHR5cGVvZiBMT0FEX0FTU0VSVElPTlMgPT09IFwidW5kZWZpbmVkXCIgfHwgTE9BRF9BU1NFUlRJT05TXG5cbmV4cG9ydCBmdW5jdGlvbiBhc3NlcnRNYWluT3JOb2RlKCkge1xuXHRpZiAoIWFzc2VydGlvbnNFbmFibGVkKSByZXR1cm5cblxuXHRpZiAoIWlzTWFpbk9yTm9kZSgpKSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKFwidGhpcyBjb2RlIG11c3Qgbm90IHJ1biBpbiB0aGUgd29ya2VyIHRocmVhZFwiKVxuXHR9XG5cblx0aWYgKGJvb3QpIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJ0aGlzIG1haW4gY29kZSBtdXN0IG5vdCBiZSBsb2FkZWQgYXQgYm9vdCB0aW1lXCIpXG5cdH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFzc2VydE1haW5Pck5vZGVCb290KCkge1xuXHRpZiAoIWFzc2VydGlvbnNFbmFibGVkKSByZXR1cm5cblxuXHRpZiAoIWlzTWFpbk9yTm9kZSgpKSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKFwidGhpcyBjb2RlIG11c3Qgbm90IHJ1biBpbiB0aGUgd29ya2VyIHRocmVhZFwiKVxuXHR9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhc3NlcnRXb3JrZXJPck5vZGUoKSB7XG5cdGlmICghYXNzZXJ0aW9uc0VuYWJsZWQpIHJldHVyblxuXG5cdGlmICghaXNXb3JrZXJPck5vZGUoKSkge1xuXHRcdHRocm93IG5ldyBFcnJvcihcInRoaXMgY29kZSBtdXN0IG5vdCBydW4gaW4gdGhlIGd1aSB0aHJlYWRcIilcblx0fVxufVxuXG5leHBvcnQgZnVuY3Rpb24gYm9vdEZpbmlzaGVkKCkge1xuXHRib290ID0gZmFsc2Vcbn1cblxuLyoqXG4gKiBXaGV0aGVyIG9yIG5vdCB3ZSB3aWxsIGJlIHVzaW5nIGFuIG9mZmxpbmUgY2FjaGUgKGRvZXNuJ3QgdGFrZSBpbnRvIGFjY291bnQgaWYgY3JlZGVudGlhbHMgYXJlIHN0b3JlZClcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzT2ZmbGluZVN0b3JhZ2VBdmFpbGFibGUoKTogYm9vbGVhbiB7XG5cdHJldHVybiAhaXNCcm93c2VyKClcbn1cbiJdLCJtYXBwaW5ncyI6Ijs7O01BS2EsY0FBYztNQUNkQSxPQUFpQyxPQUFPLE9BQU87Q0FDM0QsU0FBUztDQUNULEtBQUs7Q0FDTCxNQUFNO0NBQ04sWUFBWTtDQUNaLFNB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