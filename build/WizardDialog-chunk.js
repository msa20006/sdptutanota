import { assertMainOrNode } from "./Env-chunk.js";
import { mithril_default } from "./mithril-chunk.js";
import { lang } from "./LanguageViewModel-chunk.js";
import { theme } from "./theme-chunk.js";
import { Keys, TabIndex } from "./TutanotaConstants-chunk.js";
import { windowFacade } from "./WindowFacade-chunk.js";
import { ButtonType } from "./Button-chunk.js";
import { Icons } from "./Icons-chunk.js";
import { Dialog, DialogType } from "./Dialog-chunk.js";
import { Icon, IconSize } from "./Icon-chunk.js";

//#region src/common/gui/base/WizardDialog.ts
assertMainOrNode();
let WizardEventType = function(WizardEventType$1) {
	WizardEventType$1["SHOW_NEXT_PAGE"] = "showNextWizardDialogPage";
	WizardEventType$1["SHOW_PREVIOUS_PAGE"] = "showPreviousWizardDialogPage";
	WizardEventType$1["CLOSE_DIALOG"] = "closeWizardDialog";
	return WizardEventType$1;
}({});
function emitWizardEvent(dom, eventType) {
	if (dom) {
		const event = new Event(eventType, {
			bubbles: true,
			cancelable: true
		});
		dom.dispatchEvent(event);
	}
}
var WizardDialog = class {
	_closeWizardDialogListener;
	_showNextWizardDialogPageListener;
	_showPreviousWizardDialogPageListener;
	wizardContentDom = null;
	oncreate(vnode) {
		const dom = vnode.dom;
		this._closeWizardDialogListener = (e) => {
			e.stopPropagation();
			vnode.attrs.closeAction();
		};
		this._showNextWizardDialogPageListener = (e) => {
			e.stopPropagation();
			if (vnode.attrs.currentPage) vnode.attrs.currentPage.attrs.nextAction(true).then((ready) => {
				if (ready) {
					vnode.attrs.goToNextPageOrCloseWizard();
					this.wizardContentDom?.scrollIntoView();
				}
			});
		};
		this._showPreviousWizardDialogPageListener = (e) => {
			e.stopPropagation();
			if (!vnode.attrs.currentPage?.attrs.preventGoBack) {
				vnode.attrs.goToPreviousPageOrClose();
				this.wizardContentDom?.scrollIntoView();
			}
		};
		dom.addEventListener(WizardEventType.CLOSE_DIALOG, this._closeWizardDialogListener);
		dom.addEventListener(WizardEventType.SHOW_NEXT_PAGE, this._showNextWizardDialogPageListener);
		dom.addEventListener(WizardEventType.SHOW_PREVIOUS_PAGE, this._showPreviousWizardDialogPageListener);
	}
	onremove(vnode) {
		const dom = vnode.dom;
		if (this._closeWizardDialogListener) dom.removeEventListener(WizardEventType.CLOSE_DIALOG, this._closeWizardDialogListener);
		if (this._showNextWizardDialogPageListener) dom.removeEventListener(WizardEventType.SHOW_NEXT_PAGE, this._showNextWizardDialogPageListener);
		if (this._showPreviousWizardDialogPageListener) dom.removeEventListener(WizardEventType.SHOW_PREVIOUS_PAGE, this._showPreviousWizardDialogPageListener);
	}
	view(vnode) {
		const a = vnode.attrs;
		const enabledPages = a._getEnabledPages();
		const selectedIndex = a.currentPage ? enabledPages.indexOf(a.currentPage) : -1;
		const visiblePages = enabledPages.filter((page) => !page.attrs.hidePagingButtonForPage);
		const lastIndex = visiblePages.length - 1;
		return mithril_default("#wizardDialogContent.pt", { oncreate: (vnode$1) => {
			this.wizardContentDom = vnode$1.dom;
		} }, [a.currentPage && a.currentPage.attrs.hideAllPagingButtons ? null : mithril_default("nav#wizard-paging.flex-space-around.center-vertically.mb-s.plr-2l", { "aria-label": "Breadcrumb" }, visiblePages.map((p, index) => [mithril_default(WizardPagingButton, {
			pageIndex: index,
			getSelectedPageIndex: () => selectedIndex,
			isClickable: () => a.allowedToVisitPage(index, selectedIndex),
			navigateBackHandler: (index$1) => a._goToPageAction(index$1)
		}), index === lastIndex ? null : mithril_default(".flex-grow", { class: this.getLineClass(index < selectedIndex) })])), a.currentPage ? a.currentPage.view() : null]);
	}
	getLineClass(isPreviousPage) {
		if (isPreviousPage) return "wizard-breadcrumb-line-active";
else return "wizard-breadcrumb-line";
	}
};
function wizardPageWrapper(component, attributes) {
	return {
		attrs: attributes,
		view: () => mithril_default(component, attributes)
	};
}
var WizardDialogAttrs = class {
	data;
	pages;
	currentPage;
	closeAction;
	cancelButtonText;
	_headerBarAttrs = {};
	get headerBarAttrs() {
		return this._headerBarAttrs;
	}
	constructor(data, pages, cancelButtonText = null, closeAction) {
		this.data = data;
		this.pages = pages;
		this.currentPage = pages.find((p) => p.attrs.isEnabled()) ?? null;
		this.closeAction = closeAction ? () => closeAction() : () => {
			return Promise.resolve();
		};
		this.cancelButtonText = cancelButtonText ?? "cancel_action";
		this.updateHeaderBarAttrs();
	}
	goToPreviousPageOrClose() {
		let currentPageIndex = this.currentPage ? this._getEnabledPages().indexOf(this.currentPage) : -1;
		if (!this.allowedToVisitPage(currentPageIndex - 1, currentPageIndex)) return;
		if (currentPageIndex > 0) {
			this._goToPageAction(currentPageIndex - 1);
			mithril_default.redraw();
		} else this.closeAction();
	}
	updateHeaderBarAttrs() {
		let currentPageIndex = this.currentPage ? this._getEnabledPages().indexOf(this.currentPage) : -1;
		const backButtonAttrs = {
			label: currentPageIndex === 0 ? this.cancelButtonText : "back_action",
			click: () => this.goToPreviousPageOrClose(),
			type: ButtonType.Secondary
		};
		const skipButtonAttrs = {
			label: "skip_action",
			click: () => this.goToNextPageOrCloseWizard(),
			type: ButtonType.Secondary
		};
		let source = {
			left: currentPageIndex >= 0 && this.allowedToVisitPage(currentPageIndex - 1, currentPageIndex) ? [backButtonAttrs] : [],
			right: () => this.currentPage && this.currentPage.attrs.isSkipAvailable() && this._getEnabledPages().indexOf(this.currentPage) !== this._getEnabledPages().length - 1 ? [skipButtonAttrs] : [],
			middle: this.currentPage ? this.currentPage.attrs.headerTitle() : "emptyString_msg"
		};
		Object.assign(this._headerBarAttrs, source);
	}
	_getEnabledPages() {
		return this.pages.filter((p) => p.attrs.isEnabled());
	}
	_goToPageAction(targetIndex) {
		const pages = this._getEnabledPages();
		this.currentPage = pages[targetIndex];
		this.updateHeaderBarAttrs();
	}
	goToNextPageOrCloseWizard() {
		const pages = this._getEnabledPages();
		const currentIndex = this.currentPage ? pages.indexOf(this.currentPage) : -1;
		const lastIndex = pages.length - 1;
		let finalAction = currentIndex === lastIndex;
		if (finalAction) this.closeAction();
else this._goToPageAction(currentIndex < lastIndex ? currentIndex + 1 : lastIndex);
	}
	/** returns whether it is allowed to visit the page specified by pageIndex depending on selectedPageIndex */
	allowedToVisitPage(pageIndex, selectedPageIndex) {
		if (pageIndex < 0 || selectedPageIndex < 0) return true;
		const enabledPages = this._getEnabledPages();
		return pageIndex < selectedPageIndex && !enabledPages.filter((page, index) => {
			return index > pageIndex && index <= selectedPageIndex;
		}).some((page) => page.attrs.preventGoBack);
	}
};
var WizardPagingButton = class {
	view(vnode) {
		const selectedPageIndex = vnode.attrs.getSelectedPageIndex();
		const pageIndex = vnode.attrs.pageIndex;
		const isClickable = vnode.attrs.isClickable();
		const nextIndex = (pageIndex + 1).toString();
		const isSelectedPage = selectedPageIndex === pageIndex;
		const isPreviousPage = pageIndex < selectedPageIndex;
		return mithril_default("button.button-icon.flex-center.items-center", {
			tabIndex: isClickable ? TabIndex.Default : TabIndex.Programmatic,
			"aria-disabled": isClickable.toString(),
			"aria-label": isClickable ? lang.get("previous_action") : nextIndex,
			"aria-current": isSelectedPage ? "step" : "false",
			"aria-live": isSelectedPage ? "polite" : "off",
			class: this.getClass(isSelectedPage, isPreviousPage),
			style: { cursor: isClickable ? "pointer" : "auto" },
			onclick: () => {
				if (isClickable) vnode.attrs.navigateBackHandler(pageIndex);
			}
		}, isPreviousPage ? mithril_default(Icon, {
			icon: Icons.Checkmark,
			size: IconSize.Medium,
			style: { fill: theme.content_bg }
		}) : nextIndex);
	}
	getClass(isSelectedPage, isPreviousPage) {
		if (isSelectedPage) return "wizard-breadcrumb-active";
else if (isPreviousPage) return "wizard-breadcrumb-previous";
else return "wizard-breadcrumb";
	}
};
function createWizardDialog(data, pages, closeAction = null, dialogType, cancelButtonText = null) {
	let view = () => null;
	const child = { view: () => view() };
	const unregisterCloseListener = windowFacade.addWindowCloseListener(() => {});
	const closeActionWrapper = async () => {
		if (closeAction) await closeAction();
		wizardDialog.close();
		unregisterCloseListener();
	};
	const wizardDialogAttrs = new WizardDialogAttrs(data, pages, cancelButtonText, closeActionWrapper);
	const wizardDialog = dialogType === DialogType.EditLarge ? Dialog.largeDialog(wizardDialogAttrs.headerBarAttrs, child) : Dialog.editSmallDialog(wizardDialogAttrs.headerBarAttrs, () => mithril_default(child));
	view = () => mithril_default(WizardDialog, wizardDialogAttrs);
	wizardDialog.addShortcut({
		key: Keys.ESC,
		exec: () => {
			confirmThenCleanup(() => wizardDialogAttrs.closeAction());
		},
		help: "close_alt"
	}).setCloseHandler(() => {
		confirmThenCleanup(() => wizardDialogAttrs.closeAction());
	});
	return {
		dialog: wizardDialog,
		attrs: wizardDialogAttrs
	};
}
async function confirmThenCleanup(closeAction) {
	const confirmed = await Dialog.confirm("closeWindowConfirmation_msg");
	if (confirmed) closeAction();
}

//#endregion
export { WizardEventType, createWizardDialog, emitWizardEvent, wizardPageWrapper };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiV2l6YXJkRGlhbG9nLWNodW5rLmpzIiwibmFtZXMiOlsiZG9tOiBIVE1MRWxlbWVudCB8IG51bGwiLCJldmVudFR5cGU6IFdpemFyZEV2ZW50VHlwZSIsInZub2RlOiBWbm9kZURPTTxXaXphcmREaWFsb2dBdHRyczxUPj4iLCJkb206IEhUTUxFbGVtZW50IiwiZTogRXZlbnQiLCJ2bm9kZTogVm5vZGU8V2l6YXJkRGlhbG9nQXR0cnM8VD4+Iiwidm5vZGUiLCJpbmRleCIsImlzUHJldmlvdXNQYWdlOiBib29sZWFuIiwiY29tcG9uZW50OiBDbGFzczxDb21wb25lbnQ8QT4+IiwiYXR0cmlidXRlczogQSIsImRhdGE6IFQiLCJwYWdlczogUmVhZG9ubHlBcnJheTxXaXphcmRQYWdlV3JhcHBlcjxUPj4iLCJjYW5jZWxCdXR0b25UZXh0OiBUcmFuc2xhdGlvbktleSB8IG51bGwiLCJjbG9zZUFjdGlvbj86ICgpID0+IFByb21pc2U8dm9pZD4iLCJiYWNrQnV0dG9uQXR0cnM6IEJ1dHRvbkF0dHJzIiwic2tpcEJ1dHRvbkF0dHJzOiBCdXR0b25BdHRycyIsInNvdXJjZTogRGlhbG9nSGVhZGVyQmFyQXR0cnMiLCJ0YXJnZXRJbmRleDogbnVtYmVyIiwicGFnZUluZGV4OiBudW1iZXIiLCJzZWxlY3RlZFBhZ2VJbmRleDogbnVtYmVyIiwidm5vZGU6IFZub2RlPFdpemFyZFBhZ2luZ0J1dHRvbkF0dHJzPiIsImlzU2VsZWN0ZWRQYWdlOiBib29sZWFuIiwiY2xvc2VBY3Rpb246ICgoKSA9PiAkUHJvbWlzYWJsZTx2b2lkPikgfCBudWxsIiwiZGlhbG9nVHlwZTogRGlhbG9nVHlwZS5FZGl0TGFyZ2UgfCBEaWFsb2dUeXBlLkVkaXRTbWFsbCIsInZpZXc6ICgpID0+IENoaWxkcmVuIiwiY2hpbGQ6IENvbXBvbmVudCIsImNsb3NlQWN0aW9uOiAoKSA9PiBQcm9taXNlPHZvaWQ+Il0sInNvdXJjZXMiOlsiLi4vc3JjL2NvbW1vbi9ndWkvYmFzZS9XaXphcmREaWFsb2cudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG0sIHsgQ2hpbGRyZW4sIENvbXBvbmVudCwgVm5vZGUsIFZub2RlRE9NIH0gZnJvbSBcIm1pdGhyaWxcIlxuaW1wb3J0IHsgRGlhbG9nLCBEaWFsb2dUeXBlIH0gZnJvbSBcIi4vRGlhbG9nXCJcbmltcG9ydCB0eXBlIHsgQnV0dG9uQXR0cnMgfSBmcm9tIFwiLi9CdXR0b24uanNcIlxuaW1wb3J0IHsgQnV0dG9uVHlwZSB9IGZyb20gXCIuL0J1dHRvbi5qc1wiXG5pbXBvcnQgeyBJY29ucyB9IGZyb20gXCIuL2ljb25zL0ljb25zXCJcbmltcG9ydCB7IEljb24sIEljb25TaXplIH0gZnJvbSBcIi4vSWNvblwiXG5pbXBvcnQgeyB0aGVtZSB9IGZyb20gXCIuLi90aGVtZVwiXG5pbXBvcnQgeyBsYW5nLCBNYXliZVRyYW5zbGF0aW9uLCBUcmFuc2xhdGlvbktleSB9IGZyb20gXCIuLi8uLi9taXNjL0xhbmd1YWdlVmlld01vZGVsXCJcbmltcG9ydCB0eXBlIHsgRGlhbG9nSGVhZGVyQmFyQXR0cnMgfSBmcm9tIFwiLi9EaWFsb2dIZWFkZXJCYXJcIlxuaW1wb3J0IHsgS2V5cywgVGFiSW5kZXggfSBmcm9tIFwiLi4vLi4vYXBpL2NvbW1vbi9UdXRhbm90YUNvbnN0YW50c1wiXG5pbXBvcnQgeyBhc3NlcnRNYWluT3JOb2RlIH0gZnJvbSBcIi4uLy4uL2FwaS9jb21tb24vRW52XCJcbmltcG9ydCB7ICRQcm9taXNhYmxlIH0gZnJvbSBcIkB0dXRhby90dXRhbm90YS11dGlsc1wiXG5pbXBvcnQgeyB3aW5kb3dGYWNhZGUgfSBmcm9tIFwiLi4vLi4vbWlzYy9XaW5kb3dGYWNhZGUuanNcIlxuXG5hc3NlcnRNYWluT3JOb2RlKClcblxuZXhwb3J0IGludGVyZmFjZSBXaXphcmRQYWdlQXR0cnM8VD4ge1xuXHQvKiogVGl0bGUgb2YgdGhlIHBhZ2UgdGhhdCBpcyBzaG93biBpbiB0aGUgaGVhZGVyIGJhciBvZiB0aGUgV2l6YXJkRGlhbG9nKi9cblx0aGVhZGVyVGl0bGUoKTogTWF5YmVUcmFuc2xhdGlvblxuXG5cdC8qKiBBY3Rpb24gdGhhdCBuZWVkcyB0byBiZSBleGVjdXRlZCBiZWZvcmUgc3dpdGNoaW5nIHRvIHRoZSBuZXh0IHBhZ2UuXG5cdCAqIEByZXR1cm4gdHJ1ZSBpZiB0aGUgYWN0aW9uIHdhcyBzdWNjZXNzZnVsIGFuZCB0aGUgbmV4dCBwYWdlIGNhbiBiZSBzaG93biwgZmFsc2Ugb3RoZXJ3aXNlLlxuXHQgKiovXG5cdG5leHRBY3Rpb24oc2hvd0Vycm9yRGlhbG9nOiBib29sZWFuKTogUHJvbWlzZTxib29sZWFuPlxuXG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgdGhlIHBhZ2UgY2FuIGJlIHNraXBwZWQuXG5cdCAqL1xuXHRpc1NraXBBdmFpbGFibGUoKTogYm9vbGVhblxuXG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgdGhlIHBhZ2UgaXMgZW5hYmxlZCBhbmQgY2FuIGJlIGRpc3BsYXllZC5cblx0ICovXG5cdGlzRW5hYmxlZCgpOiBib29sZWFuXG5cblx0LyoqXG5cdCAqIFRoZSBhY3R1YWwgZGF0YSwgd2hpY2ggaXMgdGhlIHNhbWUgZm9yIHRoZSBlbnRpcmUgd2l6YXJkIG5lZWRzIHRvIGJlIGFsc28gYWNjZXNzaWJsZSB0byBlYWNoIHBhZ2Vcblx0ICovXG5cdHJlYWRvbmx5IGRhdGE6IFRcblxuXHQvKipcblx0ICogSW5kaWNhdGVzIHRoYXQgaXQgc2hvdWxkIG5vdCBiZSBwb3NzaWJsZSB0byBzZWxlY3QgYW55IGVhcmxpZXIgc3RhZ2UgdGhhbiB0aGlzIG9uZSwgb25jZSByZWFjaGVkLiBJZiBub3Qgc2V0IG9yIGZhbHNlLCBpdCBpcyBwb3NzaWJsZSB0byBnbyBiYWNrXG5cdCAqL1xuXHRyZWFkb25seSBwcmV2ZW50R29CYWNrPzogYm9vbGVhblxuXG5cdC8qKlxuXHQgKiBpZiBzZXQgdG8gdHJ1ZSwgYWxsIHBhZ2luZyBidXR0b25zIHdpbGwgYmUgaGlkZGVuIGZvciB0aGlzIHBhZ2Vcblx0ICovXG5cdHJlYWRvbmx5IGhpZGVBbGxQYWdpbmdCdXR0b25zPzogYm9vbGVhblxuXG5cdC8qKlxuXHQgKiBpZiB0aGlzIGlzIHRydWUgdGhlIHBhZ2luZyBidXR0b24gKGJ1dHRvbiB3aXRoIHRoZSBudW1iZXIpIGlzIGhpZGRlbiBmb3IgdGhpcyBzcGVjaWZpYyB3aXphcmQgcGFnZVxuXHQgKi9cblx0cmVhZG9ubHkgaGlkZVBhZ2luZ0J1dHRvbkZvclBhZ2U/OiBib29sZWFuXG59XG5cbmV4cG9ydCB0eXBlIFdpemFyZFBhZ2VOPFQ+ID0gQ29tcG9uZW50PFdpemFyZFBhZ2VBdHRyczxUPj5cblxuZXhwb3J0IGNvbnN0IGVudW0gV2l6YXJkRXZlbnRUeXBlIHtcblx0U0hPV19ORVhUX1BBR0UgPSBcInNob3dOZXh0V2l6YXJkRGlhbG9nUGFnZVwiLFxuXHRTSE9XX1BSRVZJT1VTX1BBR0UgPSBcInNob3dQcmV2aW91c1dpemFyZERpYWxvZ1BhZ2VcIixcblx0Q0xPU0VfRElBTE9HID0gXCJjbG9zZVdpemFyZERpYWxvZ1wiLFxufVxuXG4vLyBBIFdpemFyZFBhZ2UgZGlzcGF0Y2hlcyB0aGlzIGV2ZW50IHRvIGluZm9ybSB0aGUgcGFyZW50IFdpemFyZERpYWxvZ04gdG8gY2xvc2UgdGhlIGRpYWxvZ1xuZXhwb3J0IGZ1bmN0aW9uIGVtaXRXaXphcmRFdmVudChkb206IEhUTUxFbGVtZW50IHwgbnVsbCwgZXZlbnRUeXBlOiBXaXphcmRFdmVudFR5cGUpIHtcblx0aWYgKGRvbSkge1xuXHRcdGNvbnN0IGV2ZW50ID0gbmV3IEV2ZW50KGV2ZW50VHlwZSwge1xuXHRcdFx0YnViYmxlczogdHJ1ZSxcblx0XHRcdGNhbmNlbGFibGU6IHRydWUsXG5cdFx0fSlcblx0XHRkb20uZGlzcGF0Y2hFdmVudChldmVudClcblx0fVxufVxuXG5jbGFzcyBXaXphcmREaWFsb2c8VD4gaW1wbGVtZW50cyBDb21wb25lbnQ8V2l6YXJkRGlhbG9nQXR0cnM8VD4+IHtcblx0cHJpdmF0ZSBfY2xvc2VXaXphcmREaWFsb2dMaXN0ZW5lciE6IEV2ZW50TGlzdGVuZXJcblx0cHJpdmF0ZSBfc2hvd05leHRXaXphcmREaWFsb2dQYWdlTGlzdGVuZXIhOiBFdmVudExpc3RlbmVyXG5cdHByaXZhdGUgX3Nob3dQcmV2aW91c1dpemFyZERpYWxvZ1BhZ2VMaXN0ZW5lciE6IEV2ZW50TGlzdGVuZXJcblx0cHJpdmF0ZSB3aXphcmRDb250ZW50RG9tOiBIVE1MRWxlbWVudCB8IG51bGwgPSBudWxsIC8vIHdlIG5lZWQgdGhlIHdpemFyZCBjb250ZW50IGRvbSB0byBzY3JvbGwgdG8gdGhlIHRvcCB3aGVuIHJlZGlyZWN0aW5nIHRvIHRoZSBuZXh0IHBhZ2VcblxuXHRvbmNyZWF0ZSh2bm9kZTogVm5vZGVET008V2l6YXJkRGlhbG9nQXR0cnM8VD4+KSB7XG5cdFx0Ly8gV2UgbGlzdGVuIGZvciBldmVudHMgdHJpZ2dlcmVkIGJ5IHRoZSBjaGlsZCBXaXphcmRQYWdlcyB0byBjbG9zZSB0aGUgZGlhbG9nIG9yIHNob3cgdGhlIG5leHQgcGFnZVxuXHRcdGNvbnN0IGRvbTogSFRNTEVsZW1lbnQgPSB2bm9kZS5kb20gYXMgSFRNTEVsZW1lbnRcblxuXHRcdHRoaXMuX2Nsb3NlV2l6YXJkRGlhbG9nTGlzdGVuZXIgPSAoZTogRXZlbnQpID0+IHtcblx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKClcblx0XHRcdHZub2RlLmF0dHJzLmNsb3NlQWN0aW9uKClcblx0XHR9XG5cblx0XHR0aGlzLl9zaG93TmV4dFdpemFyZERpYWxvZ1BhZ2VMaXN0ZW5lciA9IChlOiBFdmVudCkgPT4ge1xuXHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKVxuXG5cdFx0XHRpZiAodm5vZGUuYXR0cnMuY3VycmVudFBhZ2UpIHtcblx0XHRcdFx0dm5vZGUuYXR0cnMuY3VycmVudFBhZ2UuYXR0cnMubmV4dEFjdGlvbih0cnVlKS50aGVuKChyZWFkeSkgPT4ge1xuXHRcdFx0XHRcdGlmIChyZWFkeSkge1xuXHRcdFx0XHRcdFx0dm5vZGUuYXR0cnMuZ29Ub05leHRQYWdlT3JDbG9zZVdpemFyZCgpXG5cdFx0XHRcdFx0XHR0aGlzLndpemFyZENvbnRlbnREb20/LnNjcm9sbEludG9WaWV3KClcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pXG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0dGhpcy5fc2hvd1ByZXZpb3VzV2l6YXJkRGlhbG9nUGFnZUxpc3RlbmVyID0gKGU6IEV2ZW50KSA9PiB7XG5cdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpXG5cblx0XHRcdGlmICghdm5vZGUuYXR0cnMuY3VycmVudFBhZ2U/LmF0dHJzLnByZXZlbnRHb0JhY2spIHtcblx0XHRcdFx0dm5vZGUuYXR0cnMuZ29Ub1ByZXZpb3VzUGFnZU9yQ2xvc2UoKVxuXHRcdFx0XHR0aGlzLndpemFyZENvbnRlbnREb20/LnNjcm9sbEludG9WaWV3KClcblx0XHRcdH1cblx0XHR9XG5cblx0XHRkb20uYWRkRXZlbnRMaXN0ZW5lcihXaXphcmRFdmVudFR5cGUuQ0xPU0VfRElBTE9HLCB0aGlzLl9jbG9zZVdpemFyZERpYWxvZ0xpc3RlbmVyKVxuXHRcdGRvbS5hZGRFdmVudExpc3RlbmVyKFdpemFyZEV2ZW50VHlwZS5TSE9XX05FWFRfUEFHRSwgdGhpcy5fc2hvd05leHRXaXphcmREaWFsb2dQYWdlTGlzdGVuZXIpXG5cdFx0ZG9tLmFkZEV2ZW50TGlzdGVuZXIoV2l6YXJkRXZlbnRUeXBlLlNIT1dfUFJFVklPVVNfUEFHRSwgdGhpcy5fc2hvd1ByZXZpb3VzV2l6YXJkRGlhbG9nUGFnZUxpc3RlbmVyKVxuXHR9XG5cblx0b25yZW1vdmUodm5vZGU6IFZub2RlRE9NPFdpemFyZERpYWxvZ0F0dHJzPFQ+Pikge1xuXHRcdGNvbnN0IGRvbTogSFRNTEVsZW1lbnQgPSB2bm9kZS5kb20gYXMgSFRNTEVsZW1lbnRcblx0XHRpZiAodGhpcy5fY2xvc2VXaXphcmREaWFsb2dMaXN0ZW5lcikgZG9tLnJlbW92ZUV2ZW50TGlzdGVuZXIoV2l6YXJkRXZlbnRUeXBlLkNMT1NFX0RJQUxPRywgdGhpcy5fY2xvc2VXaXphcmREaWFsb2dMaXN0ZW5lcilcblx0XHRpZiAodGhpcy5fc2hvd05leHRXaXphcmREaWFsb2dQYWdlTGlzdGVuZXIpIGRvbS5yZW1vdmVFdmVudExpc3RlbmVyKFdpemFyZEV2ZW50VHlwZS5TSE9XX05FWFRfUEFHRSwgdGhpcy5fc2hvd05leHRXaXphcmREaWFsb2dQYWdlTGlzdGVuZXIpXG5cdFx0aWYgKHRoaXMuX3Nob3dQcmV2aW91c1dpemFyZERpYWxvZ1BhZ2VMaXN0ZW5lcikgZG9tLnJlbW92ZUV2ZW50TGlzdGVuZXIoV2l6YXJkRXZlbnRUeXBlLlNIT1dfUFJFVklPVVNfUEFHRSwgdGhpcy5fc2hvd1ByZXZpb3VzV2l6YXJkRGlhbG9nUGFnZUxpc3RlbmVyKVxuXHR9XG5cblx0dmlldyh2bm9kZTogVm5vZGU8V2l6YXJkRGlhbG9nQXR0cnM8VD4+KSB7XG5cdFx0Y29uc3QgYSA9IHZub2RlLmF0dHJzXG5cdFx0Y29uc3QgZW5hYmxlZFBhZ2VzID0gYS5fZ2V0RW5hYmxlZFBhZ2VzKClcblx0XHRjb25zdCBzZWxlY3RlZEluZGV4ID0gYS5jdXJyZW50UGFnZSA/IGVuYWJsZWRQYWdlcy5pbmRleE9mKGEuY3VycmVudFBhZ2UpIDogLTFcblx0XHRjb25zdCB2aXNpYmxlUGFnZXMgPSBlbmFibGVkUGFnZXMuZmlsdGVyKChwYWdlKSA9PiAhcGFnZS5hdHRycy5oaWRlUGFnaW5nQnV0dG9uRm9yUGFnZSlcblx0XHRjb25zdCBsYXN0SW5kZXggPSB2aXNpYmxlUGFnZXMubGVuZ3RoIC0gMVxuXG5cdFx0cmV0dXJuIG0oXG5cdFx0XHRcIiN3aXphcmREaWFsb2dDb250ZW50LnB0XCIsXG5cdFx0XHR7XG5cdFx0XHRcdG9uY3JlYXRlOiAodm5vZGUpID0+IHtcblx0XHRcdFx0XHR0aGlzLndpemFyZENvbnRlbnREb20gPSB2bm9kZS5kb20gYXMgSFRNTEVsZW1lbnRcblx0XHRcdFx0fSxcblx0XHRcdH0sXG5cdFx0XHRbXG5cdFx0XHRcdGEuY3VycmVudFBhZ2UgJiYgYS5jdXJyZW50UGFnZS5hdHRycy5oaWRlQWxsUGFnaW5nQnV0dG9uc1xuXHRcdFx0XHRcdD8gbnVsbFxuXHRcdFx0XHRcdDogbShcblx0XHRcdFx0XHRcdFx0XCJuYXYjd2l6YXJkLXBhZ2luZy5mbGV4LXNwYWNlLWFyb3VuZC5jZW50ZXItdmVydGljYWxseS5tYi1zLnBsci0ybFwiLFxuXHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0XCJhcmlhLWxhYmVsXCI6IFwiQnJlYWRjcnVtYlwiLFxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHR2aXNpYmxlUGFnZXMubWFwKChwLCBpbmRleCkgPT4gW1xuXHRcdFx0XHRcdFx0XHRcdG0oV2l6YXJkUGFnaW5nQnV0dG9uLCB7XG5cdFx0XHRcdFx0XHRcdFx0XHRwYWdlSW5kZXg6IGluZGV4LFxuXHRcdFx0XHRcdFx0XHRcdFx0Z2V0U2VsZWN0ZWRQYWdlSW5kZXg6ICgpID0+IHNlbGVjdGVkSW5kZXgsXG5cdFx0XHRcdFx0XHRcdFx0XHRpc0NsaWNrYWJsZTogKCkgPT4gYS5hbGxvd2VkVG9WaXNpdFBhZ2UoaW5kZXgsIHNlbGVjdGVkSW5kZXgpLFxuXHRcdFx0XHRcdFx0XHRcdFx0bmF2aWdhdGVCYWNrSGFuZGxlcjogKGluZGV4KSA9PiBhLl9nb1RvUGFnZUFjdGlvbihpbmRleCksXG5cdFx0XHRcdFx0XHRcdFx0fSksXG5cdFx0XHRcdFx0XHRcdFx0aW5kZXggPT09IGxhc3RJbmRleCA/IG51bGwgOiBtKFwiLmZsZXgtZ3Jvd1wiLCB7IGNsYXNzOiB0aGlzLmdldExpbmVDbGFzcyhpbmRleCA8IHNlbGVjdGVkSW5kZXgpIH0pLFxuXHRcdFx0XHRcdFx0XHRdKSxcblx0XHRcdFx0XHQgICksXG5cdFx0XHRcdGEuY3VycmVudFBhZ2UgPyBhLmN1cnJlbnRQYWdlLnZpZXcoKSA6IG51bGwsXG5cdFx0XHRdLFxuXHRcdClcblx0fVxuXG5cdHByaXZhdGUgZ2V0TGluZUNsYXNzKGlzUHJldmlvdXNQYWdlOiBib29sZWFuKSB7XG5cdFx0aWYgKGlzUHJldmlvdXNQYWdlKSB7XG5cdFx0XHRyZXR1cm4gXCJ3aXphcmQtYnJlYWRjcnVtYi1saW5lLWFjdGl2ZVwiXG5cdFx0fSBlbHNlIHtcblx0XHRcdHJldHVybiBcIndpemFyZC1icmVhZGNydW1iLWxpbmVcIlxuXHRcdH1cblx0fVxufVxuXG4vKipcbiAqIFBhaXIgb2YgYXR0cnMgYW5kIGNvbXBvbmVudCBmb3IgdGhvc2UgYXR0cnNcbiAqIFdlIGNhcmUgYWJvdXQgdGhlc2UgcHJvcGVydGllczpcbiAqIEl0IGhhcyBXaXphcmRQYWdlQXR0cnMgZm9yIFRcbiAqIEEgaXMgY29uc2lzdGVudCB3aXRoIHRoZSBjb21wb25lbnRcbiAqXG4gKiBXaGVuIHdlIHVzZSB0aGUgd3JhcHBlciB3ZSBkb24ndCBjYXJlIGFib3V0IHNwZWNpZmljIHR5cGUgb2YgYXR0cnMgb3IgY29tcG9uZW50LlxuICovXG5cbmV4cG9ydCBpbnRlcmZhY2UgV2l6YXJkUGFnZVdyYXBwZXI8VD4ge1xuXHRyZWFkb25seSBhdHRyczogV2l6YXJkUGFnZUF0dHJzPFQ+XG5cdHJlYWRvbmx5IHZpZXc6ICgpID0+IENoaWxkcmVuXG59XG5cbmV4cG9ydCBmdW5jdGlvbiB3aXphcmRQYWdlV3JhcHBlcjxULCBBIGV4dGVuZHMgV2l6YXJkUGFnZUF0dHJzPFQ+Pihjb21wb25lbnQ6IENsYXNzPENvbXBvbmVudDxBPj4sIGF0dHJpYnV0ZXM6IEEpOiBXaXphcmRQYWdlV3JhcHBlcjxUPiB7XG5cdHJldHVybiB7XG5cdFx0YXR0cnM6IGF0dHJpYnV0ZXMsXG5cdFx0dmlldzogKCkgPT4gbShjb21wb25lbnQsIGF0dHJpYnV0ZXMpLFxuXHR9XG59XG5cbmNsYXNzIFdpemFyZERpYWxvZ0F0dHJzPFQ+IHtcblx0cmVhZG9ubHkgZGF0YTogVFxuXHRwYWdlczogUmVhZG9ubHlBcnJheTxXaXphcmRQYWdlV3JhcHBlcjxUPj5cblx0Y3VycmVudFBhZ2U6IFdpemFyZFBhZ2VXcmFwcGVyPFQ+IHwgbnVsbFxuXHRjbG9zZUFjdGlvbjogKCkgPT4gUHJvbWlzZTx2b2lkPlxuXHRjYW5jZWxCdXR0b25UZXh0OiBUcmFuc2xhdGlvbktleVxuXHRwcml2YXRlIF9oZWFkZXJCYXJBdHRyczogRGlhbG9nSGVhZGVyQmFyQXR0cnMgPSB7fVxuXG5cdGdldCBoZWFkZXJCYXJBdHRycygpOiBEaWFsb2dIZWFkZXJCYXJBdHRycyB7XG5cdFx0cmV0dXJuIHRoaXMuX2hlYWRlckJhckF0dHJzXG5cdH1cblxuXHQvLyBJZGVhIGZvciByZWZhY3RvcmluZzogbWFrZSBvcHRpb25hbCBwYXJhbWV0ZXJzIGludG8gc2VwYXJhdGUgb2JqZWN0XG5cdGNvbnN0cnVjdG9yKGRhdGE6IFQsIHBhZ2VzOiBSZWFkb25seUFycmF5PFdpemFyZFBhZ2VXcmFwcGVyPFQ+PiwgY2FuY2VsQnV0dG9uVGV4dDogVHJhbnNsYXRpb25LZXkgfCBudWxsID0gbnVsbCwgY2xvc2VBY3Rpb24/OiAoKSA9PiBQcm9taXNlPHZvaWQ+KSB7XG5cdFx0dGhpcy5kYXRhID0gZGF0YVxuXHRcdHRoaXMucGFnZXMgPSBwYWdlc1xuXHRcdHRoaXMuY3VycmVudFBhZ2UgPSBwYWdlcy5maW5kKChwKSA9PiBwLmF0dHJzLmlzRW5hYmxlZCgpKSA/PyBudWxsXG5cdFx0dGhpcy5jbG9zZUFjdGlvbiA9IGNsb3NlQWN0aW9uXG5cdFx0XHQ/ICgpID0+IGNsb3NlQWN0aW9uKClcblx0XHRcdDogKCkgPT4ge1xuXHRcdFx0XHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUoKVxuXHRcdFx0ICB9XG5cdFx0dGhpcy5jYW5jZWxCdXR0b25UZXh0ID0gY2FuY2VsQnV0dG9uVGV4dCA/PyBcImNhbmNlbF9hY3Rpb25cIlxuXHRcdHRoaXMudXBkYXRlSGVhZGVyQmFyQXR0cnMoKVxuXHR9XG5cblx0Z29Ub1ByZXZpb3VzUGFnZU9yQ2xvc2UoKTogdm9pZCB7XG5cdFx0bGV0IGN1cnJlbnRQYWdlSW5kZXggPSB0aGlzLmN1cnJlbnRQYWdlID8gdGhpcy5fZ2V0RW5hYmxlZFBhZ2VzKCkuaW5kZXhPZih0aGlzLmN1cnJlbnRQYWdlKSA6IC0xXG5cblx0XHRpZiAoIXRoaXMuYWxsb3dlZFRvVmlzaXRQYWdlKGN1cnJlbnRQYWdlSW5kZXggLSAxLCBjdXJyZW50UGFnZUluZGV4KSkgcmV0dXJuXG5cblx0XHRpZiAoY3VycmVudFBhZ2VJbmRleCA+IDApIHtcblx0XHRcdHRoaXMuX2dvVG9QYWdlQWN0aW9uKGN1cnJlbnRQYWdlSW5kZXggLSAxKVxuXG5cdFx0XHRtLnJlZHJhdygpXG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMuY2xvc2VBY3Rpb24oKVxuXHRcdH1cblx0fVxuXG5cdHVwZGF0ZUhlYWRlckJhckF0dHJzPFQ+KCk6IHZvaWQge1xuXHRcdGxldCBjdXJyZW50UGFnZUluZGV4ID0gdGhpcy5jdXJyZW50UGFnZSA/IHRoaXMuX2dldEVuYWJsZWRQYWdlcygpLmluZGV4T2YodGhpcy5jdXJyZW50UGFnZSkgOiAtMVxuXG5cdFx0Y29uc3QgYmFja0J1dHRvbkF0dHJzOiBCdXR0b25BdHRycyA9IHtcblx0XHRcdGxhYmVsOiBjdXJyZW50UGFnZUluZGV4ID09PSAwID8gdGhpcy5jYW5jZWxCdXR0b25UZXh0IDogXCJiYWNrX2FjdGlvblwiLFxuXHRcdFx0Y2xpY2s6ICgpID0+IHRoaXMuZ29Ub1ByZXZpb3VzUGFnZU9yQ2xvc2UoKSxcblx0XHRcdHR5cGU6IEJ1dHRvblR5cGUuU2Vjb25kYXJ5LFxuXHRcdH1cblx0XHRjb25zdCBza2lwQnV0dG9uQXR0cnM6IEJ1dHRvbkF0dHJzID0ge1xuXHRcdFx0bGFiZWw6IFwic2tpcF9hY3Rpb25cIixcblx0XHRcdGNsaWNrOiAoKSA9PiB0aGlzLmdvVG9OZXh0UGFnZU9yQ2xvc2VXaXphcmQoKSxcblx0XHRcdHR5cGU6IEJ1dHRvblR5cGUuU2Vjb25kYXJ5LFxuXHRcdH1cblxuXHRcdC8vIHRoZSB3aXphcmQgZGlhbG9nIGhhcyBhIHJlZmVyZW5jZSB0byB0aGlzLl9oZWFkZXJCYXJBdHRycyAtPiBjaGFuZ2luZyB0aGlzIG9iamVjdCBjaGFuZ2VzIHRoZSBkaWFsb2dcblx0XHRsZXQgc291cmNlOiBEaWFsb2dIZWFkZXJCYXJBdHRycyA9IHtcblx0XHRcdGxlZnQ6IGN1cnJlbnRQYWdlSW5kZXggPj0gMCAmJiB0aGlzLmFsbG93ZWRUb1Zpc2l0UGFnZShjdXJyZW50UGFnZUluZGV4IC0gMSwgY3VycmVudFBhZ2VJbmRleCkgPyBbYmFja0J1dHRvbkF0dHJzXSA6IFtdLFxuXHRcdFx0cmlnaHQ6ICgpID0+XG5cdFx0XHRcdHRoaXMuY3VycmVudFBhZ2UgJiZcblx0XHRcdFx0dGhpcy5jdXJyZW50UGFnZS5hdHRycy5pc1NraXBBdmFpbGFibGUoKSAmJlxuXHRcdFx0XHR0aGlzLl9nZXRFbmFibGVkUGFnZXMoKS5pbmRleE9mKHRoaXMuY3VycmVudFBhZ2UpICE9PSB0aGlzLl9nZXRFbmFibGVkUGFnZXMoKS5sZW5ndGggLSAxXG5cdFx0XHRcdFx0PyBbc2tpcEJ1dHRvbkF0dHJzXVxuXHRcdFx0XHRcdDogW10sXG5cdFx0XHRtaWRkbGU6IHRoaXMuY3VycmVudFBhZ2UgPyB0aGlzLmN1cnJlbnRQYWdlLmF0dHJzLmhlYWRlclRpdGxlKCkgOiBcImVtcHR5U3RyaW5nX21zZ1wiLFxuXHRcdH1cblx0XHRPYmplY3QuYXNzaWduKHRoaXMuX2hlYWRlckJhckF0dHJzLCBzb3VyY2UpXG5cdH1cblxuXHRfZ2V0RW5hYmxlZFBhZ2VzKCk6IEFycmF5PFdpemFyZFBhZ2VXcmFwcGVyPFQ+PiB7XG5cdFx0cmV0dXJuIHRoaXMucGFnZXMuZmlsdGVyKChwKSA9PiBwLmF0dHJzLmlzRW5hYmxlZCgpKVxuXHR9XG5cblx0X2dvVG9QYWdlQWN0aW9uKHRhcmdldEluZGV4OiBudW1iZXIpOiB2b2lkIHtcblx0XHRjb25zdCBwYWdlcyA9IHRoaXMuX2dldEVuYWJsZWRQYWdlcygpXG5cblx0XHR0aGlzLmN1cnJlbnRQYWdlID0gcGFnZXNbdGFyZ2V0SW5kZXhdXG5cdFx0dGhpcy51cGRhdGVIZWFkZXJCYXJBdHRycygpXG5cdH1cblxuXHRnb1RvTmV4dFBhZ2VPckNsb3NlV2l6YXJkKCkge1xuXHRcdGNvbnN0IHBhZ2VzID0gdGhpcy5fZ2V0RW5hYmxlZFBhZ2VzKClcblxuXHRcdGNvbnN0IGN1cnJlbnRJbmRleCA9IHRoaXMuY3VycmVudFBhZ2UgPyBwYWdlcy5pbmRleE9mKHRoaXMuY3VycmVudFBhZ2UpIDogLTFcblx0XHRjb25zdCBsYXN0SW5kZXggPSBwYWdlcy5sZW5ndGggLSAxXG5cdFx0bGV0IGZpbmFsQWN0aW9uID0gY3VycmVudEluZGV4ID09PSBsYXN0SW5kZXhcblxuXHRcdGlmIChmaW5hbEFjdGlvbikge1xuXHRcdFx0dGhpcy5jbG9zZUFjdGlvbigpXG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMuX2dvVG9QYWdlQWN0aW9uKGN1cnJlbnRJbmRleCA8IGxhc3RJbmRleCA/IGN1cnJlbnRJbmRleCArIDEgOiBsYXN0SW5kZXgpXG5cdFx0fVxuXHR9XG5cblx0LyoqIHJldHVybnMgd2hldGhlciBpdCBpcyBhbGxvd2VkIHRvIHZpc2l0IHRoZSBwYWdlIHNwZWNpZmllZCBieSBwYWdlSW5kZXggZGVwZW5kaW5nIG9uIHNlbGVjdGVkUGFnZUluZGV4ICovXG5cdGFsbG93ZWRUb1Zpc2l0UGFnZShwYWdlSW5kZXg6IG51bWJlciwgc2VsZWN0ZWRQYWdlSW5kZXg6IG51bWJlcik6IGJvb2xlYW4ge1xuXHRcdGlmIChwYWdlSW5kZXggPCAwIHx8IHNlbGVjdGVkUGFnZUluZGV4IDwgMCkge1xuXHRcdFx0cmV0dXJuIHRydWUgLy8gaW52YWxpZCB2YWx1ZXMgLT4gc2hvdWxkIG5vdCByZXN0cmljdCBoZXJlXG5cdFx0fVxuXHRcdGNvbnN0IGVuYWJsZWRQYWdlcyA9IHRoaXMuX2dldEVuYWJsZWRQYWdlcygpXG5cdFx0Ly8gcGFnZSBpcyBvbmx5IGFsbG93ZWQgdG8gYmUgdmlzaXRlZCBpZiBpdCB3YXMgYWxyZWFkeSB2aXNpdGVkIGFuZCB0aGVyZSBpcyBubyBsYXRlciBwYWdlIHRoYXQgd2FzIGFscmVhZHkgdmlzaXRlZCBhbmQgZG9lcyBub3QgYWxsb3cgdG8gZ28gYmFja1xuXHRcdHJldHVybiAoXG5cdFx0XHRwYWdlSW5kZXggPCBzZWxlY3RlZFBhZ2VJbmRleCAmJlxuXHRcdFx0IWVuYWJsZWRQYWdlc1xuXHRcdFx0XHQuZmlsdGVyKChwYWdlLCBpbmRleCkgPT4ge1xuXHRcdFx0XHRcdHJldHVybiBpbmRleCA+IHBhZ2VJbmRleCAmJiBpbmRleCA8PSBzZWxlY3RlZFBhZ2VJbmRleFxuXHRcdFx0XHR9KVxuXHRcdFx0XHQuc29tZSgocGFnZSkgPT4gcGFnZS5hdHRycy5wcmV2ZW50R29CYWNrKVxuXHRcdClcblx0fVxufVxuXG50eXBlIFdpemFyZFBhZ2luZ0J1dHRvbkF0dHJzID0ge1xuXHRwYWdlSW5kZXg6IG51bWJlclxuXHRnZXRTZWxlY3RlZFBhZ2VJbmRleDogKCkgPT4gbnVtYmVyXG5cdGlzQ2xpY2thYmxlOiAoKSA9PiBib29sZWFuXG5cdG5hdmlnYXRlQmFja0hhbmRsZXI6IChwYWdlSW5kZXg6IG51bWJlcikgPT4gdm9pZFxufVxuXG4vL2V4cG9ydGVkIGZvciBvbGQtc3R5bGUgV2l6YXJkRGlhbG9nLmpzXG5leHBvcnQgY2xhc3MgV2l6YXJkUGFnaW5nQnV0dG9uIHtcblx0dmlldyh2bm9kZTogVm5vZGU8V2l6YXJkUGFnaW5nQnV0dG9uQXR0cnM+KTogQ2hpbGRyZW4ge1xuXHRcdGNvbnN0IHNlbGVjdGVkUGFnZUluZGV4ID0gdm5vZGUuYXR0cnMuZ2V0U2VsZWN0ZWRQYWdlSW5kZXgoKVxuXHRcdGNvbnN0IHBhZ2VJbmRleCA9IHZub2RlLmF0dHJzLnBhZ2VJbmRleFxuXHRcdGNvbnN0IGlzQ2xpY2thYmxlID0gdm5vZGUuYXR0cnMuaXNDbGlja2FibGUoKVxuXHRcdGNvbnN0IG5leHRJbmRleCA9IChwYWdlSW5kZXggKyAxKS50b1N0cmluZygpXG5cdFx0Y29uc3QgaXNTZWxlY3RlZFBhZ2UgPSBzZWxlY3RlZFBhZ2VJbmRleCA9PT0gcGFnZUluZGV4XG5cdFx0Y29uc3QgaXNQcmV2aW91c1BhZ2UgPSBwYWdlSW5kZXggPCBzZWxlY3RlZFBhZ2VJbmRleFxuXG5cdFx0cmV0dXJuIG0oXG5cdFx0XHRcImJ1dHRvbi5idXR0b24taWNvbi5mbGV4LWNlbnRlci5pdGVtcy1jZW50ZXJcIixcblx0XHRcdHtcblx0XHRcdFx0dGFiSW5kZXg6IGlzQ2xpY2thYmxlID8gVGFiSW5kZXguRGVmYXVsdCA6IFRhYkluZGV4LlByb2dyYW1tYXRpYyxcblx0XHRcdFx0XCJhcmlhLWRpc2FibGVkXCI6IGlzQ2xpY2thYmxlLnRvU3RyaW5nKCksXG5cdFx0XHRcdFwiYXJpYS1sYWJlbFwiOiBpc0NsaWNrYWJsZSA/IGxhbmcuZ2V0KFwicHJldmlvdXNfYWN0aW9uXCIpIDogbmV4dEluZGV4LFxuXHRcdFx0XHRcImFyaWEtY3VycmVudFwiOiBpc1NlbGVjdGVkUGFnZSA/IFwic3RlcFwiIDogXCJmYWxzZVwiLFxuXHRcdFx0XHRcImFyaWEtbGl2ZVwiOiBpc1NlbGVjdGVkUGFnZSA/IFwicG9saXRlXCIgOiBcIm9mZlwiLFxuXHRcdFx0XHRjbGFzczogdGhpcy5nZXRDbGFzcyhpc1NlbGVjdGVkUGFnZSwgaXNQcmV2aW91c1BhZ2UpLFxuXHRcdFx0XHRzdHlsZToge1xuXHRcdFx0XHRcdGN1cnNvcjogaXNDbGlja2FibGUgPyBcInBvaW50ZXJcIiA6IFwiYXV0b1wiLFxuXHRcdFx0XHR9LFxuXHRcdFx0XHRvbmNsaWNrOiAoKSA9PiB7XG5cdFx0XHRcdFx0aWYgKGlzQ2xpY2thYmxlKSB7XG5cdFx0XHRcdFx0XHR2bm9kZS5hdHRycy5uYXZpZ2F0ZUJhY2tIYW5kbGVyKHBhZ2VJbmRleClcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sXG5cdFx0XHR9LFxuXHRcdFx0aXNQcmV2aW91c1BhZ2Vcblx0XHRcdFx0PyBtKEljb24sIHtcblx0XHRcdFx0XHRcdGljb246IEljb25zLkNoZWNrbWFyayxcblx0XHRcdFx0XHRcdHNpemU6IEljb25TaXplLk1lZGl1bSxcblx0XHRcdFx0XHRcdHN0eWxlOiB7XG5cdFx0XHRcdFx0XHRcdGZpbGw6IHRoZW1lLmNvbnRlbnRfYmcsXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHQgIH0pXG5cdFx0XHRcdDogbmV4dEluZGV4LFxuXHRcdClcblx0fVxuXG5cdC8vIEFwcGx5IHRoZSBjb3JyZWN0IHN0eWxpbmcgYmFzZWQgb24gdGhlIGN1cnJlbnQgcGFnZSBudW1iZXJcblx0cHJpdmF0ZSBnZXRDbGFzcyhpc1NlbGVjdGVkUGFnZTogYm9vbGVhbiwgaXNQcmV2aW91c1BhZ2U6IGJvb2xlYW4pIHtcblx0XHRpZiAoaXNTZWxlY3RlZFBhZ2UpIHtcblx0XHRcdHJldHVybiBcIndpemFyZC1icmVhZGNydW1iLWFjdGl2ZVwiXG5cdFx0fSBlbHNlIGlmIChpc1ByZXZpb3VzUGFnZSkge1xuXHRcdFx0cmV0dXJuIFwid2l6YXJkLWJyZWFkY3J1bWItcHJldmlvdXNcIlxuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZXR1cm4gXCJ3aXphcmQtYnJlYWRjcnVtYlwiXG5cdFx0fVxuXHR9XG59XG5cbmV4cG9ydCB0eXBlIFdpemFyZERpYWxvZ0F0dHJzQnVpbGRlcjxUPiA9IHtcblx0ZGlhbG9nOiBEaWFsb2dcblx0YXR0cnM6IFdpemFyZERpYWxvZ0F0dHJzPFQ+XG59XG5cbi8vIFVzZSB0byBnZW5lcmF0ZSBhIG5ldyB3aXphcmRcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVXaXphcmREaWFsb2c8VD4oXG5cdGRhdGE6IFQsXG5cdHBhZ2VzOiBSZWFkb25seUFycmF5PFdpemFyZFBhZ2VXcmFwcGVyPFQ+Pixcblx0Y2xvc2VBY3Rpb246ICgoKSA9PiAkUHJvbWlzYWJsZTx2b2lkPikgfCBudWxsID0gbnVsbCxcblx0ZGlhbG9nVHlwZTogRGlhbG9nVHlwZS5FZGl0TGFyZ2UgfCBEaWFsb2dUeXBlLkVkaXRTbWFsbCxcblx0Y2FuY2VsQnV0dG9uVGV4dDogVHJhbnNsYXRpb25LZXkgfCBudWxsID0gbnVsbCxcbik6IFdpemFyZERpYWxvZ0F0dHJzQnVpbGRlcjxUPiB7XG5cdC8vIFdlIG5lZWQgdGhlIGNsb3NlIGFjdGlvbiBvZiB0aGUgZGlhbG9nIGJlZm9yZSB3ZSBjYW4gY3JlYXRlIHRoZSBwcm9wZXIgYXR0cmlidXRlc1xuXG5cdGxldCB2aWV3OiAoKSA9PiBDaGlsZHJlbiA9ICgpID0+IG51bGxcblxuXHRjb25zdCBjaGlsZDogQ29tcG9uZW50ID0ge1xuXHRcdHZpZXc6ICgpID0+IHZpZXcoKSxcblx0fVxuXHRjb25zdCB1bnJlZ2lzdGVyQ2xvc2VMaXN0ZW5lciA9IHdpbmRvd0ZhY2FkZS5hZGRXaW5kb3dDbG9zZUxpc3RlbmVyKCgpID0+IHt9KVxuXHRjb25zdCBjbG9zZUFjdGlvbldyYXBwZXIgPSBhc3luYyAoKSA9PiB7XG5cdFx0aWYgKGNsb3NlQWN0aW9uKSB7XG5cdFx0XHRhd2FpdCBjbG9zZUFjdGlvbigpXG5cdFx0fVxuXHRcdHdpemFyZERpYWxvZy5jbG9zZSgpXG5cdFx0dW5yZWdpc3RlckNsb3NlTGlzdGVuZXIoKVxuXHR9XG5cdGNvbnN0IHdpemFyZERpYWxvZ0F0dHJzID0gbmV3IFdpemFyZERpYWxvZ0F0dHJzKGRhdGEsIHBhZ2VzLCBjYW5jZWxCdXR0b25UZXh0LCBjbG9zZUFjdGlvbldyYXBwZXIpXG5cdGNvbnN0IHdpemFyZERpYWxvZyA9XG5cdFx0ZGlhbG9nVHlwZSA9PT0gRGlhbG9nVHlwZS5FZGl0TGFyZ2Vcblx0XHRcdD8gRGlhbG9nLmxhcmdlRGlhbG9nKHdpemFyZERpYWxvZ0F0dHJzLmhlYWRlckJhckF0dHJzLCBjaGlsZClcblx0XHRcdDogRGlhbG9nLmVkaXRTbWFsbERpYWxvZyh3aXphcmREaWFsb2dBdHRycy5oZWFkZXJCYXJBdHRycywgKCkgPT4gbShjaGlsZCkpXG5cblx0dmlldyA9ICgpID0+IG0oV2l6YXJkRGlhbG9nLCB3aXphcmREaWFsb2dBdHRycylcblx0d2l6YXJkRGlhbG9nXG5cdFx0LmFkZFNob3J0Y3V0KHtcblx0XHRcdGtleTogS2V5cy5FU0MsXG5cdFx0XHRleGVjOiAoKSA9PiB7XG5cdFx0XHRcdGNvbmZpcm1UaGVuQ2xlYW51cCgoKSA9PiB3aXphcmREaWFsb2dBdHRycy5jbG9zZUFjdGlvbigpKVxuXHRcdFx0fSxcblx0XHRcdGhlbHA6IFwiY2xvc2VfYWx0XCIsXG5cdFx0fSlcblx0XHQuc2V0Q2xvc2VIYW5kbGVyKCgpID0+IHtcblx0XHRcdC8vIHRoZSBkaWFsb2dzIHBvcFN0YXRlIGhhbmRsZXIgd2lsbCByZXR1cm4gZmFsc2Ugd2hpY2ggcHJldmVudHMgdGhlIHdpemFyZCBmcm9tIGJlaW5nIGNsb3NlZFxuXHRcdFx0Ly8gd2UgdGhlbiBjbG9zZSB0aGUgd2l6YXJkIG1hbnVhbGx5IGlmIHRoZSB1c2VyIGNvbmZpcm1zXG5cdFx0XHRjb25maXJtVGhlbkNsZWFudXAoKCkgPT4gd2l6YXJkRGlhbG9nQXR0cnMuY2xvc2VBY3Rpb24oKSlcblx0XHR9KVxuXG5cdHJldHVybiB7XG5cdFx0ZGlhbG9nOiB3aXphcmREaWFsb2csXG5cdFx0YXR0cnM6IHdpemFyZERpYWxvZ0F0dHJzLFxuXHR9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGNvbmZpcm1UaGVuQ2xlYW51cChjbG9zZUFjdGlvbjogKCkgPT4gUHJvbWlzZTx2b2lkPikge1xuXHRjb25zdCBjb25maXJtZWQgPSBhd2FpdCBEaWFsb2cuY29uZmlybShcImNsb3NlV2luZG93Q29uZmlybWF0aW9uX21zZ1wiKVxuXHRpZiAoY29uZmlybWVkKSB7XG5cdFx0Y2xvc2VBY3Rpb24oKVxuXHR9XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQWNBLGtCQUFrQjtJQTRDQSw4Q0FBWDtBQUNOO0FBQ0E7QUFDQTs7QUFDQTtBQUdNLFNBQVMsZ0JBQWdCQSxLQUF5QkMsV0FBNEI7QUFDcEYsS0FBSSxLQUFLO0VBQ1IsTUFBTSxRQUFRLElBQUksTUFBTSxXQUFXO0dBQ2xDLFNBQVM7R0FDVCxZQUFZO0VBQ1o7QUFDRCxNQUFJLGNBQWMsTUFBTTtDQUN4QjtBQUNEO0lBRUssZUFBTixNQUFpRTtDQUNoRSxBQUFRO0NBQ1IsQUFBUTtDQUNSLEFBQVE7Q0FDUixBQUFRLG1CQUF1QztDQUUvQyxTQUFTQyxPQUF1QztFQUUvQyxNQUFNQyxNQUFtQixNQUFNO0FBRS9CLE9BQUssNkJBQTZCLENBQUNDLE1B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