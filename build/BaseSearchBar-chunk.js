import { mithril_default } from "./mithril-chunk.js";
import { DefaultAnimationTime, styles } from "./styles-chunk.js";
import { theme } from "./theme-chunk.js";
import { TabIndex } from "./TutanotaConstants-chunk.js";
import { inputLineHeight, px, size } from "./size-chunk.js";
import { BaseButton } from "./Button-chunk.js";
import { Icons } from "./Icons-chunk.js";
import { TextFieldType, getOperatingClasses } from "./Dialog-chunk.js";
import { BootIcons, Icon, IconSize } from "./Icon-chunk.js";
import { AriaLandmarks, landmarkAttrs } from "./AriaUtils-chunk.js";

//#region src/common/gui/base/BaseSearchBar.ts
var BaseSearchBar = class {
	domInput;
	isFocused = false;
	view({ attrs }) {
		return mithril_default(".flex-end.items-center.border-radius.plr-s.pt-xs.pb-xs.search-bar.flex-grow.click", {
			focused: String(this.isFocused),
			...landmarkAttrs(AriaLandmarks.Search),
			class: getOperatingClasses(attrs.disabled),
			style: {
				"min-height": px(inputLineHeight + 2),
				"margin-top": px(6),
				"margin-bottom": px(6),
				"max-width": styles.isUsingBottomNavigation() ? "" : px(350)
			},
			oncreate: ({ dom }) => {
				attrs.onWrapperCreated?.(dom);
			},
			onclick: () => {
				if (!attrs.disabled) {
					this.domInput?.focus();
					attrs.onSearchClick?.();
				}
			}
		}, [
			styles.isDesktopLayout() ? mithril_default(Icon, {
				icon: BootIcons.Search,
				size: IconSize.Medium,
				style: { fill: theme.content_button }
			}) : null,
			mithril_default(".flex.items-center", { style: {
				width: "100%",
				transition: `width ${DefaultAnimationTime}ms`,
				"padding-left": styles.isDesktopLayout() ? px(10) : px(6),
				"padding-top": "3px",
				"padding-bottom": "3px",
				"overflow-x": "hidden"
			} }, [this.renderInputField(attrs)]),
			attrs.busy || attrs.text ? mithril_default(BaseButton, {
				label: attrs.busy ? "loading_msg" : "close_alt",
				icon: mithril_default(Icon, {
					container: "div",
					size: IconSize.Medium,
					icon: attrs.busy ? BootIcons.Progress : Icons.Close,
					class: "center-h  " + (attrs.busy ? "icon-progress-search icon-progress" : ""),
					style: { fill: theme.header_button }
				}),
				onclick: () => {
					if (!attrs.disabled) attrs.onClear?.();
				},
				disabled: attrs.busy,
				style: { width: size.icon_size_large }
			}) : null
		]);
	}
	renderInputField(attrs) {
		return mithril_default("input.input.input-no-clear", {
			"aria-autocomplete": "list",
			tabindex: TabIndex.Default,
			role: "combobox",
			placeholder: attrs.placeholder,
			type: TextFieldType.Text,
			value: attrs.text,
			disabled: attrs.disabled,
			oncreate: (vnode) => {
				this.domInput = vnode.dom;
				attrs.onInputCreated?.(this.domInput);
			},
			onfocus: () => {
				this.isFocused = true;
				attrs.onFocus?.();
			},
			onblur: () => {
				this.isFocused = false;
				attrs.onBlur?.();
			},
			onremove: () => {
				this.domInput.onblur = null;
				this.isFocused = false;
			},
			oninput: () => {
				attrs.onInput(this.domInput.value);
			},
			onkeydown: (e) => {
				attrs.onKeyDown?.(e);
			},
			style: { "line-height": px(inputLineHeight) }
		});
	}
};

//#endregion
export { BaseSearchBar };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQmFzZVNlYXJjaEJhci1jaHVuay5qcyIsIm5hbWVzIjpbImF0dHJzOiBCYXNlU2VhcmNoQmFyQXR0cnMiLCJlOiBLZXlib2FyZEV2ZW50Il0sInNvdXJjZXMiOlsiLi4vc3JjL2NvbW1vbi9ndWkvYmFzZS9CYXNlU2VhcmNoQmFyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtLCB7IENoaWxkcmVuLCBDbGFzc0NvbXBvbmVudCwgVm5vZGUgfSBmcm9tIFwibWl0aHJpbFwiXG5pbXBvcnQgeyBBcmlhTGFuZG1hcmtzLCBsYW5kbWFya0F0dHJzIH0gZnJvbSBcIi4uL0FyaWFVdGlscy5qc1wiXG5pbXBvcnQgeyBpbnB1dExpbmVIZWlnaHQsIHB4LCBzaXplIH0gZnJvbSBcIi4uL3NpemUuanNcIlxuaW1wb3J0IHsgc3R5bGVzIH0gZnJvbSBcIi4uL3N0eWxlcy5qc1wiXG5pbXBvcnQgeyBUYWJJbmRleCB9IGZyb20gXCIuLi8uLi9hcGkvY29tbW9uL1R1dGFub3RhQ29uc3RhbnRzLmpzXCJcbmltcG9ydCB7IEJvb3RJY29ucyB9IGZyb20gXCIuL2ljb25zL0Jvb3RJY29ucy5qc1wiXG5pbXBvcnQgeyBEZWZhdWx0QW5pbWF0aW9uVGltZSB9IGZyb20gXCIuLi9hbmltYXRpb24vQW5pbWF0aW9ucy5qc1wiXG5pbXBvcnQgeyBJY29ucyB9IGZyb20gXCIuL2ljb25zL0ljb25zLmpzXCJcbmltcG9ydCB7IFRleHRGaWVsZFR5cGUgfSBmcm9tIFwiLi9UZXh0RmllbGQuanNcIlxuaW1wb3J0IHsgSWNvbiwgSWNvbkF0dHJzLCBJY29uU2l6ZSB9IGZyb20gXCIuL0ljb24uanNcIlxuaW1wb3J0IHsgdGhlbWUgfSBmcm9tIFwiLi4vdGhlbWUuanNcIlxuaW1wb3J0IHsgbGFuZyB9IGZyb20gXCIuLi8uLi9taXNjL0xhbmd1YWdlVmlld01vZGVsLmpzXCJcbmltcG9ydCB7IEJhc2VCdXR0b24sIEJhc2VCdXR0b25BdHRycyB9IGZyb20gXCIuL2J1dHRvbnMvQmFzZUJ1dHRvbi5qc1wiXG5pbXBvcnQgeyBnZXRPcGVyYXRpbmdDbGFzc2VzIH0gZnJvbSBcIi4vR3VpVXRpbHMuanNcIlxuXG5leHBvcnQgaW50ZXJmYWNlIEJhc2VTZWFyY2hCYXJBdHRycyB7XG5cdHBsYWNlaG9sZGVyPzogc3RyaW5nIHwgbnVsbFxuXHR0ZXh0OiBzdHJpbmdcblx0YnVzeTogYm9vbGVhblxuXHRkaXNhYmxlZD86IGJvb2xlYW5cblx0b25JbnB1dDogKHRleHQ6IHN0cmluZykgPT4gdW5rbm93blxuXHRvbkZvY3VzPzogKCkgPT4gdW5rbm93blxuXHRvbkJsdXI/OiAoKSA9PiB1bmtub3duXG5cdG9uU2VhcmNoQ2xpY2s/OiAoKSA9PiB1bmtub3duXG5cdG9uQ2xlYXI/OiAoKSA9PiB1bmtub3duXG5cdG9uSW5wdXRDcmVhdGVkPzogKGRvbTogSFRNTEVsZW1lbnQpID0+IHVua25vd25cblx0b25XcmFwcGVyQ3JlYXRlZD86IChkb206IEhUTUxFbGVtZW50KSA9PiB1bmtub3duXG5cdG9uS2V5RG93bj86IChrZXlib2FyZEV2ZW50OiBLZXlib2FyZEV2ZW50KSA9PiB1bmtub3duXG59XG5cbmV4cG9ydCBjbGFzcyBCYXNlU2VhcmNoQmFyIGltcGxlbWVudHMgQ2xhc3NDb21wb25lbnQ8QmFzZVNlYXJjaEJhckF0dHJzPiB7XG5cdHByaXZhdGUgZG9tSW5wdXQhOiBIVE1MSW5wdXRFbGVtZW50XG5cdHByaXZhdGUgaXNGb2N1c2VkOiBib29sZWFuID0gZmFsc2VcblxuXHR2aWV3KHsgYXR0cnMgfTogVm5vZGU8QmFzZVNlYXJjaEJhckF0dHJzPikge1xuXHRcdHJldHVybiBtKFxuXHRcdFx0XCIuZmxleC1lbmQuaXRlbXMtY2VudGVyLmJvcmRlci1yYWRpdXMucGxyLXMucHQteHMucGIteHMuc2VhcmNoLWJhci5mbGV4LWdyb3cuY2xpY2tcIixcblx0XHRcdHtcblx0XHRcdFx0Zm9jdXNlZDogU3RyaW5nKHRoaXMuaXNGb2N1c2VkKSxcblx0XHRcdFx0Li4ubGFuZG1hcmtBdHRycyhBcmlhTGFuZG1hcmtzLlNlYXJjaCksXG5cdFx0XHRcdGNsYXNzOiBnZXRPcGVyYXRpbmdDbGFzc2VzKGF0dHJzLmRpc2FibGVkKSxcblx0XHRcdFx0c3R5bGU6IHtcblx0XHRcdFx0XHRcIm1pbi1oZWlnaHRcIjogcHgoaW5wdXRMaW5lSGVpZ2h0ICsgMiksXG5cdFx0XHRcdFx0XCJtYXJnaW4tdG9wXCI6IHB4KDYpLFxuXHRcdFx0XHRcdFwibWFyZ2luLWJvdHRvbVwiOiBweCg2KSxcblx0XHRcdFx0XHRcIm1heC13aWR0aFwiOiBzdHlsZXMuaXNVc2luZ0JvdHRvbU5hdmlnYXRpb24oKSA/IFwiXCIgOiBweCgzNTApLFxuXHRcdFx0XHR9LFxuXHRcdFx0XHRvbmNyZWF0ZTogKHsgZG9tIH0pID0+IHtcblx0XHRcdFx0XHRhdHRycy5vbldyYXBwZXJDcmVhdGVkPy4oZG9tIGFzIEhUTUxFbGVtZW50KVxuXHRcdFx0XHR9LFxuXHRcdFx0XHRvbmNsaWNrOiAoKSA9PiB7XG5cdFx0XHRcdFx0aWYgKCFhdHRycy5kaXNhYmxlZCkge1xuXHRcdFx0XHRcdFx0dGhpcy5kb21JbnB1dD8uZm9jdXMoKVxuXHRcdFx0XHRcdFx0YXR0cnMub25TZWFyY2hDbGljaz8uKClcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sXG5cdFx0XHR9LFxuXHRcdFx0W1xuXHRcdFx0XHRzdHlsZXMuaXNEZXNrdG9wTGF5b3V0KClcblx0XHRcdFx0XHQ/IG0oSWNvbiwge1xuXHRcdFx0XHRcdFx0XHRpY29uOiBCb290SWNvbnMuU2VhcmNoLFxuXHRcdFx0XHRcdFx0XHRzaXplOiBJY29uU2l6ZS5NZWRpdW0sXG5cdFx0XHRcdFx0XHRcdHN0eWxlOiB7XG5cdFx0XHRcdFx0XHRcdFx0ZmlsbDogdGhlbWUuY29udGVudF9idXR0b24sXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0ICB9IHNhdGlzZmllcyBJY29uQXR0cnMpXG5cdFx0XHRcdFx0OiBudWxsLFxuXHRcdFx0XHRtKFxuXHRcdFx0XHRcdFwiLmZsZXguaXRlbXMtY2VudGVyXCIsXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0c3R5bGU6IHtcblx0XHRcdFx0XHRcdFx0d2lkdGg6IFwiMTAwJVwiLFxuXHRcdFx0XHRcdFx0XHR0cmFuc2l0aW9uOiBgd2lkdGggJHtEZWZhdWx0QW5pbWF0aW9uVGltZX1tc2AsXG5cdFx0XHRcdFx0XHRcdFwicGFkZGluZy1sZWZ0XCI6IHN0eWxlcy5pc0Rlc2t0b3BMYXlvdXQoKSA/IHB4KDEwKSA6IHB4KDYpLFxuXHRcdFx0XHRcdFx0XHRcInBhZGRpbmctdG9wXCI6IFwiM3B4XCIsXG5cdFx0XHRcdFx0XHRcdFwicGFkZGluZy1ib3R0b21cIjogXCIzcHhcIixcblx0XHRcdFx0XHRcdFx0XCJvdmVyZmxvdy14XCI6IFwiaGlkZGVuXCIsXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0W3RoaXMucmVuZGVySW5wdXRGaWVsZChhdHRycyldLFxuXHRcdFx0XHQpLFxuXHRcdFx0XHRhdHRycy5idXN5IHx8IGF0dHJzLnRleHRcblx0XHRcdFx0XHQ/IG0oQmFzZUJ1dHRvbiwge1xuXHRcdFx0XHRcdFx0XHRsYWJlbDogYXR0cnMuYnVzeSA/IFwibG9hZGluZ19tc2dcIiA6IFwiY2xvc2VfYWx0XCIsXG5cdFx0XHRcdFx0XHRcdGljb246IG0oSWNvbiwge1xuXHRcdFx0XHRcdFx0XHRcdGNvbnRhaW5lcjogXCJkaXZcIixcblx0XHRcdFx0XHRcdFx0XHRzaXplOiBJY29uU2l6ZS5NZWRpdW0sXG5cdFx0XHRcdFx0XHRcdFx0aWNvbjogYXR0cnMuYnVzeSA/IEJvb3RJY29ucy5Qcm9ncmVzcyA6IEljb25zLkNsb3NlLFxuXHRcdFx0XHRcdFx0XHRcdGNsYXNzOiBcImNlbnRlci1oICBcIiArIChhdHRycy5idXN5ID8gXCJpY29uLXByb2dyZXNzLXNlYXJjaCBpY29uLXByb2dyZXNzXCIgOiBcIlwiKSxcblx0XHRcdFx0XHRcdFx0XHRzdHlsZToge1xuXHRcdFx0XHRcdFx0XHRcdFx0ZmlsbDogdGhlbWUuaGVhZGVyX2J1dHRvbixcblx0XHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHR9KSxcblx0XHRcdFx0XHRcdFx0b25jbGljazogKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdGlmICghYXR0cnMuZGlzYWJsZWQpIGF0dHJzLm9uQ2xlYXI/LigpXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdGRpc2FibGVkOiBhdHRycy5idXN5LFxuXHRcdFx0XHRcdFx0XHRzdHlsZToge1xuXHRcdFx0XHRcdFx0XHRcdHdpZHRoOiBzaXplLmljb25fc2l6ZV9sYXJnZSxcblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHQgIH0gc2F0aXNmaWVzIEJhc2VCdXR0b25BdHRycylcblx0XHRcdFx0XHQ6IG51bGwsXG5cdFx0XHRdLFxuXHRcdClcblx0fVxuXG5cdHByaXZhdGUgcmVuZGVySW5wdXRGaWVsZChhdHRyczogQmFzZVNlYXJjaEJhckF0dHJzKTogQ2hpbGRyZW4ge1xuXHRcdHJldHVybiBtKFwiaW5wdXQuaW5wdXQuaW5wdXQtbm8tY2xlYXJcIiwge1xuXHRcdFx0XCJhcmlhLWF1dG9jb21wbGV0ZVwiOiBcImxpc3RcIixcblx0XHRcdHRhYmluZGV4OiBUYWJJbmRleC5EZWZhdWx0LFxuXHRcdFx0cm9sZTogXCJjb21ib2JveFwiLFxuXHRcdFx0cGxhY2Vob2xkZXI6IGF0dHJzLnBsYWNlaG9sZGVyLFxuXHRcdFx0dHlwZTogVGV4dEZpZWxkVHlwZS5UZXh0LFxuXHRcdFx0dmFsdWU6IGF0dHJzLnRleHQsXG5cdFx0XHRkaXNhYmxlZDogYXR0cnMuZGlzYWJsZWQsXG5cdFx0XHRvbmNyZWF0ZTogKHZub2RlKSA9PiB7XG5cdFx0XHRcdHRoaXMuZG9tSW5wdXQgPSB2bm9kZS5kb20gYXMgSFRNTElucHV0RWxlbWVudFxuXHRcdFx0XHRhdHRycy5vbklucHV0Q3JlYXRlZD8uKHRoaXMuZG9tSW5wdXQpXG5cdFx0XHR9LFxuXHRcdFx0b25mb2N1czogKCkgPT4ge1xuXHRcdFx0XHR0aGlzLmlzRm9jdXNlZCA9IHRydWVcblxuXHRcdFx0XHRhdHRycy5vbkZvY3VzPy4oKVxuXHRcdFx0fSxcblx0XHRcdG9uYmx1cjogKCkgPT4ge1xuXHRcdFx0XHR0aGlzLmlzRm9jdXNlZCA9IGZhbHNlXG5cdFx0XHRcdGF0dHJzLm9uQmx1cj8uKClcblx0XHRcdH0sXG5cdFx0XHRvbnJlbW92ZTogKCkgPT4ge1xuXHRcdFx0XHR0aGlzLmRvbUlucHV0Lm9uYmx1ciA9IG51bGxcblx0XHRcdFx0dGhpcy5pc0ZvY3VzZWQgPSBmYWxzZVxuXHRcdFx0fSxcblx0XHRcdG9uaW5wdXQ6ICgpID0+IHtcblx0XHRcdFx0YXR0cnMub25JbnB1dCh0aGlzLmRvbUlucHV0LnZhbHVlKVxuXHRcdFx0fSxcblx0XHRcdG9ua2V5ZG93bjogKGU6IEtleWJvYXJkRXZlbnQpID0+IHtcblx0XHRcdFx0YXR0cnMub25LZXlEb3duPy4oZSlcblx0XHRcdH0sXG5cdFx0XHRzdHlsZToge1xuXHRcdFx0XHRcImxpbmUtaGVpZ2h0XCI6IHB4KGlucHV0TGluZUhlaWdodCksXG5cdFx0XHR9LFxuXHRcdH0pXG5cdH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0lBOEJhLGdCQUFOLE1BQWtFO0NBQ3hFLEFBQVE7Q0FDUixBQUFRLFlBQXFCO0NBRTdCLEtBQUssRUFBRSxPQUFrQyxFQUFFO0FBQzFDLFNBQU8sZ0JBQ04scUZBQ0E7R0FDQyxTQUFTLE9BQU8sS0FBSyxVQUFVO0dBQy9CLEdBQUcsY0FBYyxjQUFjLE9BQU87R0FDdEMsT0FBTyxvQkFBb0IsTUFBTSxTQUFTO0dBQzFDLE9BQU87SUFDTixjQUFjLEdBQUcsa0JBQWtCLEVBQUU7SUFDckMsY0FBYyxHQUFHLEVBQUU7SUFDbkIsaUJBQWlCLEdBQUcsRUFBRTtJQUN0QixhQUFhLE9BQU8seUJBQXlCLEdBQUcsS0FBSyxHQUFHLElBQUk7R0FDNUQ7R0FDRCxVQUFVLENBQUMsRUFBRSxLQUFLLEtBQUs7QUFDdEIsVUFBTSxtQkFBbUIsSUFBbUI7R0FDNUM7R0FDRCxTQUFTLE1BQU07QUFDZCxTQUFLLE1BQU0sVUFBVTtBQUNwQixVQUFLLFVBQVUsT0FBTztBQUN0QixXQUFNLGlCQUFpQjtJQUN2QjtHQUNEO0VBQ0QsR0FDRDtHQUNDLE9BQU8saUJBQWlCLEdBQ3JCLGdCQUFFLE1BQU07SUFDUixNQUFNLFVBQVU7SUFDaEIsTUFBTSxTQUFTO0lBQ2YsT0FBTyxFQUNOLE1BQU0sTUFBTSxlQUNaO0dBQ0EsRUFBcUIsR0FDdEI7R0FDSCxnQkFDQyxzQkFDQSxFQUNDLE9BQU87SUFDTixPQUFPO0lBQ1AsYUFBYSxRQUFRLHFCQUFxQjtJQUMxQyxnQkFBZ0IsT0FBTyxpQkFBaUIsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEVBQUU7SUFDekQsZUFBZTtJQUNmLGtCQUFrQjtJQUNsQixjQUFjO0dBQ2QsRUFDRCxHQUNELENBQUMsS0FBSyxpQkFBaUIsTUFBTSxBQUFDLEVBQzlCO0dBQ0QsTUFBTSxRQUFRLE1BQU0sT0FDakIsZ0JBQUUsWUFBWTtJQUNkLE9BQU8sTUFBTSxPQUFPLGdCQUFnQjtJQUNwQyxNQUFNLGdCQUFFLE1BQU07S0FDYixXQUFXO0tBQ1gsTUFBTSxTQUFTO0tBQ2YsTUFBTSxNQUFNLE9BQU8sVUFBVSxXQUFXLE1BQU07S0FDOUMsT0FBTyxnQkFBZ0IsTUFBTSxPQUFPLHVDQUF1QztLQUMzRSxPQUFPLEVBQ04sTUFBTSxNQUFNLGNBQ1o7SUFDRCxFQUFDO0lBQ0YsU0FBUyxNQUFNO0FBQ2QsVUFBSyxNQUFNLFNBQVUsT0FBTSxXQUFXO0lBQ3RDO0lBQ0QsVUFBVSxNQUFNO0lBQ2hCLE9BQU8sRUFDTixPQUFPLEtBQUssZ0JBQ1o7R0FDQSxFQUEyQixHQUM1QjtFQUNILEVBQ0Q7Q0FDRDtDQUVELEFBQVEsaUJBQWlCQSxPQUFxQztBQUM3RCxTQUFPLGdCQUFFLDhCQUE4QjtHQUN0QyxxQkFBcUI7R0FDckIsVUFBVSxTQUFTO0dBQ25CLE1BQU07R0FDTixhQUFhLE1BQU07R0FDbkIsTUFBTSxjQUFjO0dBQ3BCLE9BQU8sTUFBTTtHQUNiLFVBQVUsTUFBTTtHQUNoQixVQUFVLENBQUMsVUFBVTtBQUNwQixTQUFLLFdBQVcsTUFBTTtBQUN0QixVQUFNLGlCQUFpQixLQUFLLFNBQVM7R0FDckM7R0FDRCxTQUFTLE1BQU07QUFDZCxTQUFLLFlBQVk7QUFFakIsVUFBTSxXQUFXO0dBQ2pCO0dBQ0QsUUFBUSxNQUFNO0FBQ2IsU0FBSyxZQUFZO0FBQ2pCLFVBQU0sVUFBVTtHQUNoQjtHQUNELFVBQVUsTUFBTTtBQUNmLFNBQUssU0FBUyxTQUFTO0FBQ3ZCLFNBQUssWUFBWTtHQUNqQjtHQUNELFNBQVMsTUFBTTtBQUNkLFVBQU0sUUFBUSxLQUFLLFNBQVMsTUFBTTtHQUNsQztHQUNELFdBQVcsQ0FBQ0MsTUFBcUI7QUFDaEMsVUFBTSxZQUFZLEVBQUU7R0FDcEI7R0FDRCxPQUFPLEVBQ04sZUFBZSxHQUFHLGdCQUFnQixDQUNsQztFQUNELEVBQUM7Q0FDRjtBQUNEIn0=