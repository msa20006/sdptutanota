import "./dist-chunk.js";
import "./ProgrammingError-chunk.js";
import { assertMainOrNode } from "./Env-chunk.js";
import "./ClientDetector-chunk.js";
import { mithril_default } from "./mithril-chunk.js";
import "./dist2-chunk.js";
import "./WhitelabelCustomizations-chunk.js";
import { lang } from "./LanguageViewModel-chunk.js";
import { styles } from "./styles-chunk.js";
import "./theme-chunk.js";
import { Keys } from "./TutanotaConstants-chunk.js";
import { isKeyPressed } from "./KeyManager-chunk.js";
import "./WindowFacade-chunk.js";
import { displayOverlay } from "./RootView-chunk.js";
import { px, size } from "./size-chunk.js";
import { getSafeAreaInsetBottom } from "./HtmlUtils-chunk.js";
import "./Button-chunk.js";
import { Icons } from "./Icons-chunk.js";
import "./Icon-chunk.js";
import { IconButton } from "./IconButton-chunk.js";
import { locator } from "./CommonLocator-chunk.js";
import { ToggleButton } from "./ToggleButton-chunk.js";

//#region src/common/gui/SearchInPageOverlay.ts
assertMainOrNode();
var SearchInPageOverlay = class {
	closeFunction;
	domInput;
	matchCase = false;
	numberOfMatches = 0;
	currentMatch = 0;
	skipNextBlur = false;
	constructor() {
		this.closeFunction = null;
	}
	open() {
		if (locator.logins.isUserLoggedIn()) {
			if (!this.closeFunction) this.closeFunction = displayOverlay(() => this.getRect(), this.getComponent(), "slide-bottom");
else {
				console.log("refocusing");
				this.domInput.focus();
				this.domInput.select();
			}
			mithril_default.redraw();
		}
	}
	close() {
		if (this.closeFunction) {
			this.closeFunction();
			locator.searchTextFacade.stopFindInPage();
			this.closeFunction = null;
		}
		mithril_default.redraw();
	}
	getRect() {
		const bottomNavHeight = size.bottom_nav_bar + getSafeAreaInsetBottom();
		return {
			height: px(size.navbar_height_mobile),
			bottom: px(styles.isUsingBottomNavigation() ? -bottomNavHeight : 0),
			right: px(0),
			left: px(0)
		};
	}
	inputField = () => {
		return mithril_default("input#search-overlay-input.dropdown-bar.elevated-bg.pl-l.button-height.inputWrapper", {
			placeholder: lang.get("searchPage_action"),
			oncreate: (vnode) => {
				this.domInput = vnode.dom;
				this.domInput.focus();
			},
			onblur: () => {
				if (this.skipNextBlur) {
					this.skipNextBlur = false;
					this.domInput.focus();
				} else locator.searchTextFacade.setSearchOverlayState(false, false);
			},
			onfocus: () => locator.searchTextFacade.setSearchOverlayState(true, false),
			oninput: () => this.find(true, true),
			style: {
				width: px(250),
				top: 0,
				height: px(size.button_height),
				left: 0
			}
		}, "");
	};
	find = async (forward, findNext) => {
		this.skipNextBlur = true;
		const r = await locator.searchTextFacade.findInPage(this.domInput.value, forward, this.matchCase, findNext);
		this.applyNextResult(r);
	};
	applyNextResult(result) {
		if (result == null) {
			this.numberOfMatches = 0;
			this.currentMatch = 0;
		} else {
			const { activeMatchOrdinal, matches } = result;
			if (matches === 1) {
				this.domInput.blur();
				this.domInput.focus();
			}
			this.numberOfMatches = matches - 1;
			this.currentMatch = activeMatchOrdinal - 1;
		}
		mithril_default.redraw();
	}
	getComponent() {
		const handleMouseUp = (event) => this.handleMouseUp(event);
		return { view: (_) => {
			return mithril_default(".flex.flex-space-between", {
				oncreate: () => window.addEventListener("mouseup", handleMouseUp),
				onremove: () => window.removeEventListener("mouseup", handleMouseUp)
			}, [mithril_default(".flex-start.center-vertically", { onkeydown: (e) => {
				if (isKeyPressed(e.key, Keys.ESC)) this.close();
				e.stopPropagation();
				return true;
			} }, [
				this.inputField(),
				mithril_default(IconButton, {
					title: "previous_action",
					icon: Icons.ArrowBackward,
					click: () => this.find(false, true)
				}),
				mithril_default(IconButton, {
					title: "next_action",
					icon: Icons.ArrowForward,
					click: () => this.find(true, true)
				}),
				mithril_default(ToggleButton, {
					title: "matchCase_alt",
					icon: Icons.MatchCase,
					toggled: this.matchCase,
					onToggled: () => {
						this.matchCase = !this.matchCase;
						this.find(true, false);
					}
				}),
				mithril_default("div.pl-m", this.numberOfMatches > 0 ? `${this.currentMatch}/${this.numberOfMatches}` : lang.get("searchNoResults_msg"))
			]), mithril_default(IconButton, {
				title: "close_alt",
				icon: Icons.Cancel,
				click: () => this.close()
			})]);
		} };
	}
	handleMouseUp(e) {
		if (!(e.target instanceof Element && e.target.id !== "search-overlay-input")) return;
		locator.searchTextFacade.setSearchOverlayState(false, true);
	}
};
const searchInPageOverlay = new SearchInPageOverlay();

//#endregion
export { searchInPageOverlay };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU2VhcmNoSW5QYWdlT3ZlcmxheS1jaHVuay5qcyIsIm5hbWVzIjpbInJlc3VsdDogRWxlY3Ryb25SZXN1bHQgfCBudWxsIiwiZXZlbnQ6IE1vdXNlRXZlbnQiLCJlOiBLZXlib2FyZEV2ZW50IiwiZTogRXZlbnQiLCJzZWFyY2hJblBhZ2VPdmVybGF5OiBTZWFyY2hJblBhZ2VPdmVybGF5Il0sInNvdXJjZXMiOlsiLi4vc3JjL2NvbW1vbi9ndWkvU2VhcmNoSW5QYWdlT3ZlcmxheS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbSwgeyBDaGlsZHJlbiwgQ29tcG9uZW50IH0gZnJvbSBcIm1pdGhyaWxcIlxuaW1wb3J0IHR5cGUgeyBQb3NpdGlvblJlY3QgfSBmcm9tIFwiLi9iYXNlL092ZXJsYXlcIlxuaW1wb3J0IHsgZGlzcGxheU92ZXJsYXkgfSBmcm9tIFwiLi9iYXNlL092ZXJsYXlcIlxuaW1wb3J0IHsgcHgsIHNpemUgfSBmcm9tIFwiLi9zaXplXCJcbmltcG9ydCB7IEljb25zIH0gZnJvbSBcIi4vYmFzZS9pY29ucy9JY29uc1wiXG5pbXBvcnQgeyBhc3NlcnRNYWluT3JOb2RlIH0gZnJvbSBcIi4uL2FwaS9jb21tb24vRW52XCJcbmltcG9ydCB7IGxhbmcgfSBmcm9tIFwiLi4vbWlzYy9MYW5ndWFnZVZpZXdNb2RlbFwiXG5pbXBvcnQgeyB0cmFuc2Zvcm0sIFRyYW5zZm9ybUVudW0gfSBmcm9tIFwiLi9hbmltYXRpb24vQW5pbWF0aW9uc1wiXG5pbXBvcnQgeyBLZXlzIH0gZnJvbSBcIi4uL2FwaS9jb21tb24vVHV0YW5vdGFDb25zdGFudHNcIlxuaW1wb3J0IHsgbG9jYXRvciB9IGZyb20gXCIuLi9hcGkvbWFpbi9Db21tb25Mb2NhdG9yXCJcbmltcG9ydCB7IEVsZWN0cm9uUmVzdWx0IH0gZnJvbSBcIi4uL25hdGl2ZS9jb21tb24vZ2VuZXJhdGVkaXBjL0VsZWN0cm9uUmVzdWx0LmpzXCJcbmltcG9ydCB7IGlzS2V5UHJlc3NlZCB9IGZyb20gXCIuLi9taXNjL0tleU1hbmFnZXIuanNcIlxuaW1wb3J0IHsgSWNvbkJ1dHRvbiB9IGZyb20gXCIuL2Jhc2UvSWNvbkJ1dHRvbi5qc1wiXG5pbXBvcnQgeyBUb2dnbGVCdXR0b24gfSBmcm9tIFwiLi9iYXNlL2J1dHRvbnMvVG9nZ2xlQnV0dG9uLmpzXCJcbmltcG9ydCB7IHN0eWxlcyB9IGZyb20gXCIuL3N0eWxlcy5qc1wiXG5pbXBvcnQgeyBnZXRTYWZlQXJlYUluc2V0Qm90dG9tIH0gZnJvbSBcIi4vSHRtbFV0aWxzLmpzXCJcblxuYXNzZXJ0TWFpbk9yTm9kZSgpXG5cbi8qKlxuICogc2VhcmNoIGJhciBmb3IgdGhlIEN0cmwrRiBpbi1wYWdlIHNlYXJjaCBvZiB0aGUgRGVza3RvcCBjbGllbnRcbiAqIGdldHMgbG9hZGVkIGFzeW5jaHJvbm91c2x5LCBzaG91bGRuJ3QgYmUgaW4gdGhlIHdlYiBidW5kbGVcbiAqL1xuZXhwb3J0IGNsYXNzIFNlYXJjaEluUGFnZU92ZXJsYXkge1xuXHRwcml2YXRlIGNsb3NlRnVuY3Rpb246ICgoKSA9PiB2b2lkKSB8IG51bGxcblx0cHJpdmF0ZSBkb21JbnB1dCE6IEhUTUxJbnB1dEVsZW1lbnRcblx0cHJpdmF0ZSBtYXRjaENhc2U6IGJvb2xlYW4gPSBmYWxzZVxuXHRwcml2YXRlIG51bWJlck9mTWF0Y2hlczogbnVtYmVyID0gMFxuXHRwcml2YXRlIGN1cnJlbnRNYXRjaDogbnVtYmVyID0gMFxuXHRwcml2YXRlIHNraXBOZXh0Qmx1cjogYm9vbGVhbiA9IGZhbHNlXG5cblx0Y29uc3RydWN0b3IoKSB7XG5cdFx0dGhpcy5jbG9zZUZ1bmN0aW9uID0gbnVsbFxuXHR9XG5cblx0b3BlbigpIHtcblx0XHRpZiAobG9jYXRvci5sb2dpbnMuaXNVc2VyTG9nZ2VkSW4oKSkge1xuXHRcdFx0aWYgKCF0aGlzLmNsb3NlRnVuY3Rpb24pIHtcblx0XHRcdFx0dGhpcy5jbG9zZUZ1bmN0aW9uID0gZGlzcGxheU92ZXJsYXkoKCkgPT4gdGhpcy5nZXRSZWN0KCksIHRoaXMuZ2V0Q29tcG9uZW50KCksIFwic2xpZGUtYm90dG9tXCIpXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvL2FscmVhZHkgb3BlbiwgcmVmb2N1c1xuXHRcdFx0XHRjb25zb2xlLmxvZyhcInJlZm9jdXNpbmdcIilcblxuXHRcdFx0XHR0aGlzLmRvbUlucHV0LmZvY3VzKClcblxuXHRcdFx0XHR0aGlzLmRvbUlucHV0LnNlbGVjdCgpXG5cdFx0XHR9XG5cblx0XHRcdG0ucmVkcmF3KClcblx0XHR9XG5cdH1cblxuXHRjbG9zZSgpIHtcblx0XHRpZiAodGhpcy5jbG9zZUZ1bmN0aW9uKSB7XG5cdFx0XHR0aGlzLmNsb3NlRnVuY3Rpb24oKVxuXHRcdFx0bG9jYXRvci5zZWFyY2hUZXh0RmFjYWRlLnN0b3BGaW5kSW5QYWdlKClcblx0XHRcdHRoaXMuY2xvc2VGdW5jdGlvbiA9IG51bGxcblx0XHR9XG5cblx0XHRtLnJlZHJhdygpXG5cdH1cblxuXHRwcml2YXRlIGdldFJlY3QoKTogUG9zaXRpb25SZWN0IHtcblx0XHRjb25zdCBib3R0b21OYXZIZWlnaHQgPSBzaXplLmJvdHRvbV9uYXZfYmFyICsgZ2V0U2FmZUFyZWFJbnNldEJvdHRvbSgpXG5cdFx0cmV0dXJuIHtcblx0XHRcdGhlaWdodDogcHgoc2l6ZS5uYXZiYXJfaGVpZ2h0X21vYmlsZSksXG5cdFx0XHQvLyBQbGFjZSB0aGUgc2VhcmNoIG92ZXJsYXkgb24gdG9wIG9mIHRoZSBib3R0b20gbmF2IGJhclxuXHRcdFx0Ym90dG9tOiBweChzdHlsZXMuaXNVc2luZ0JvdHRvbU5hdmlnYXRpb24oKSA/IC1ib3R0b21OYXZIZWlnaHQgOiAwKSxcblx0XHRcdHJpZ2h0OiBweCgwKSxcblx0XHRcdGxlZnQ6IHB4KDApLFxuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgaW5wdXRGaWVsZDogKCkgPT4gQ2hpbGRyZW4gPSAoKSA9PiB7XG5cdFx0cmV0dXJuIG0oXG5cdFx0XHRcImlucHV0I3NlYXJjaC1vdmVybGF5LWlucHV0LmRyb3Bkb3duLWJhci5lbGV2YXRlZC1iZy5wbC1sLmJ1dHRvbi1oZWlnaHQuaW5wdXRXcmFwcGVyXCIsXG5cdFx0XHR7XG5cdFx0XHRcdHBsYWNlaG9sZGVyOiBsYW5nLmdldChcInNlYXJjaFBhZ2VfYWN0aW9uXCIpLFxuXHRcdFx0XHRvbmNyZWF0ZTogKHZub2RlKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5kb21JbnB1dCA9IHZub2RlLmRvbSBhcyBIVE1MSW5wdXRFbGVtZW50XG5cblx0XHRcdFx0XHR0aGlzLmRvbUlucHV0LmZvY3VzKClcblx0XHRcdFx0fSxcblx0XHRcdFx0b25ibHVyOiAoKSA9PiB7XG5cdFx0XHRcdFx0aWYgKHRoaXMuc2tpcE5leHRCbHVyKSB7XG5cdFx0XHRcdFx0XHR0aGlzLnNraXBOZXh0Qmx1ciA9IGZhbHNlXG5cblx0XHRcdFx0XHRcdHRoaXMuZG9tSW5wdXQuZm9jdXMoKVxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRsb2NhdG9yLnNlYXJjaFRleHRGYWNhZGUuc2V0U2VhcmNoT3ZlcmxheVN0YXRlKGZhbHNlLCBmYWxzZSlcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sXG5cdFx0XHRcdG9uZm9jdXM6ICgpID0+IGxvY2F0b3Iuc2VhcmNoVGV4dEZhY2FkZS5zZXRTZWFyY2hPdmVybGF5U3RhdGUodHJ1ZSwgZmFsc2UpLFxuXHRcdFx0XHRvbmlucHV0OiAoKSA9PiB0aGlzLmZpbmQodHJ1ZSwgdHJ1ZSksXG5cdFx0XHRcdHN0eWxlOiB7XG5cdFx0XHRcdFx0d2lkdGg6IHB4KDI1MCksXG5cdFx0XHRcdFx0dG9wOiAwLFxuXHRcdFx0XHRcdGhlaWdodDogcHgoc2l6ZS5idXR0b25faGVpZ2h0KSxcblx0XHRcdFx0XHRsZWZ0OiAwLFxuXHRcdFx0XHR9LFxuXHRcdFx0fSxcblx0XHRcdFwiXCIsXG5cdFx0KVxuXHR9XG5cdHByaXZhdGUgZmluZDogKGZvcndhcmQ6IGJvb2xlYW4sIGZpbmROZXh0OiBib29sZWFuKSA9PiBQcm9taXNlPHZvaWQ+ID0gYXN5bmMgKGZvcndhcmQsIGZpbmROZXh0KSA9PiB7XG5cdFx0dGhpcy5za2lwTmV4dEJsdXIgPSB0cnVlXG5cdFx0Y29uc3QgciA9IGF3YWl0IGxvY2F0b3Iuc2VhcmNoVGV4dEZhY2FkZS5maW5kSW5QYWdlKHRoaXMuZG9tSW5wdXQudmFsdWUsIGZvcndhcmQsIHRoaXMubWF0Y2hDYXNlLCBmaW5kTmV4dClcblx0XHR0aGlzLmFwcGx5TmV4dFJlc3VsdChyKVxuXHR9XG5cblx0YXBwbHlOZXh0UmVzdWx0KHJlc3VsdDogRWxlY3Ryb25SZXN1bHQgfCBudWxsKTogdm9pZCB7XG5cdFx0aWYgKHJlc3VsdCA9PSBudWxsKSB7XG5cdFx0XHR0aGlzLm51bWJlck9mTWF0Y2hlcyA9IDBcblx0XHRcdHRoaXMuY3VycmVudE1hdGNoID0gMFxuXHRcdH0gZWxzZSB7XG5cdFx0XHRjb25zdCB7IGFjdGl2ZU1hdGNoT3JkaW5hbCwgbWF0Y2hlcyB9ID0gcmVzdWx0XG5cblx0XHRcdGlmIChtYXRjaGVzID09PSAxKSB7XG5cdFx0XHRcdC8qIHRoZSBzZWFyY2ggYmFyIGxvc2VzIGZvY3VzIHdpdGhvdXQgYW55IGV2ZW50cyB3aGVuIHRoZXJlXG5cdFx0XHRcdCAqICBhcmUgbm8gcmVzdWx0cyBleGNlcHQgZm9yIHRoZSBzZWFyY2ggYmFyIGl0c2VsZi4gdGhpcyBlbmFibGVzXG5cdFx0XHRcdCAqICB1cyB0byByZXRhaW4gZm9jdXMuICovXG5cdFx0XHRcdHRoaXMuZG9tSW5wdXQuYmx1cigpXG5cblx0XHRcdFx0dGhpcy5kb21JbnB1dC5mb2N1cygpXG5cdFx0XHR9XG5cblx0XHRcdHRoaXMubnVtYmVyT2ZNYXRjaGVzID0gbWF0Y2hlcyAtIDFcblx0XHRcdHRoaXMuY3VycmVudE1hdGNoID0gYWN0aXZlTWF0Y2hPcmRpbmFsIC0gMVxuXHRcdH1cblxuXHRcdG0ucmVkcmF3KClcblx0fVxuXG5cdGdldENvbXBvbmVudCgpOiBDb21wb25lbnQge1xuXHRcdGNvbnN0IGhhbmRsZU1vdXNlVXAgPSAoZXZlbnQ6IE1vdXNlRXZlbnQpID0+IHRoaXMuaGFuZGxlTW91c2VVcChldmVudClcblxuXHRcdHJldHVybiB7XG5cdFx0XHR2aWV3OiAoXykgPT4ge1xuXHRcdFx0XHRyZXR1cm4gbShcblx0XHRcdFx0XHRcIi5mbGV4LmZsZXgtc3BhY2UtYmV0d2VlblwiLFxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdG9uY3JlYXRlOiAoKSA9PiB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgaGFuZGxlTW91c2VVcCksXG5cdFx0XHRcdFx0XHRvbnJlbW92ZTogKCkgPT4gd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIGhhbmRsZU1vdXNlVXApLFxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0W1xuXHRcdFx0XHRcdFx0bShcblx0XHRcdFx0XHRcdFx0XCIuZmxleC1zdGFydC5jZW50ZXItdmVydGljYWxseVwiLFxuXHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0b25rZXlkb3duOiAoZTogS2V5Ym9hcmRFdmVudCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKGlzS2V5UHJlc3NlZChlLmtleSwgS2V5cy5FU0MpKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRoaXMuY2xvc2UoKVxuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBwcmV2ZW50IGtleSBmcm9tIGdldHRpbmcgcGlja2VkIHVwIGJ5IHNob3J0Y3V0cyBldGMuXG5cdFx0XHRcdFx0XHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpXG5cdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gdHJ1ZVxuXHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLmlucHV0RmllbGQoKSxcblx0XHRcdFx0XHRcdFx0XHRtKEljb25CdXR0b24sIHtcblx0XHRcdFx0XHRcdFx0XHRcdHRpdGxlOiBcInByZXZpb3VzX2FjdGlvblwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0aWNvbjogSWNvbnMuQXJyb3dCYWNrd2FyZCxcblx0XHRcdFx0XHRcdFx0XHRcdGNsaWNrOiAoKSA9PiB0aGlzLmZpbmQoZmFsc2UsIHRydWUpLFxuXHRcdFx0XHRcdFx0XHRcdH0pLFxuXHRcdFx0XHRcdFx0XHRcdG0oSWNvbkJ1dHRvbiwge1xuXHRcdFx0XHRcdFx0XHRcdFx0dGl0bGU6IFwibmV4dF9hY3Rpb25cIixcblx0XHRcdFx0XHRcdFx0XHRcdGljb246IEljb25zLkFycm93Rm9yd2FyZCxcblx0XHRcdFx0XHRcdFx0XHRcdGNsaWNrOiAoKSA9PiB0aGlzLmZpbmQodHJ1ZSwgdHJ1ZSksXG5cdFx0XHRcdFx0XHRcdFx0fSksXG5cdFx0XHRcdFx0XHRcdFx0bShUb2dnbGVCdXR0b24sIHtcblx0XHRcdFx0XHRcdFx0XHRcdHRpdGxlOiBcIm1hdGNoQ2FzZV9hbHRcIixcblx0XHRcdFx0XHRcdFx0XHRcdGljb246IEljb25zLk1hdGNoQ2FzZSxcblx0XHRcdFx0XHRcdFx0XHRcdHRvZ2dsZWQ6IHRoaXMubWF0Y2hDYXNlLFxuXHRcdFx0XHRcdFx0XHRcdFx0b25Ub2dnbGVkOiAoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRoaXMubWF0Y2hDYXNlID0gIXRoaXMubWF0Y2hDYXNlXG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5maW5kKHRydWUsIGZhbHNlKVxuXHRcdFx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdFx0XHR9KSxcblx0XHRcdFx0XHRcdFx0XHRtKFwiZGl2LnBsLW1cIiwgdGhpcy5udW1iZXJPZk1hdGNoZXMgPiAwID8gYCR7dGhpcy5jdXJyZW50TWF0Y2h9LyR7dGhpcy5udW1iZXJPZk1hdGNoZXN9YCA6IGxhbmcuZ2V0KFwic2VhcmNoTm9SZXN1bHRzX21zZ1wiKSksXG5cdFx0XHRcdFx0XHRcdF0sXG5cdFx0XHRcdFx0XHQpLFxuXHRcdFx0XHRcdFx0bShJY29uQnV0dG9uLCB7XG5cdFx0XHRcdFx0XHRcdHRpdGxlOiBcImNsb3NlX2FsdFwiLFxuXHRcdFx0XHRcdFx0XHRpY29uOiBJY29ucy5DYW5jZWwsXG5cdFx0XHRcdFx0XHRcdGNsaWNrOiAoKSA9PiB0aGlzLmNsb3NlKCksXG5cdFx0XHRcdFx0XHR9KSxcblx0XHRcdFx0XHRdLFxuXHRcdFx0XHQpXG5cdFx0XHR9LFxuXHRcdH1cblx0fVxuXG5cdC8qXG5cdCAqIHdlJ3JlIGNhdGNoaW5nIGVudGVyIGtleSBldmVudHMgb24gdGhlIG1haW4gdGhyZWFkIHdoaWxlIHRoZSBzZWFyY2ggb3ZlcmxheSBpcyBvcGVuIHRvIGVuYWJsZVxuXHQgKiBuZXh0LXJlc3VsdC12aWEtZW50ZXIgYmVoYXZpb3VyLlxuXHQgKlxuXHQgKiBzaW5jZSBsb3NpbmcgZm9jdXMgb24gdGhlIG92ZXJsYXkgdmlhIGlzc3VpbmcgYSBzZWFyY2ggcmVxdWVzdCBzZWVtcyB0byBiZSBpbmRpc3Rpbmd1aXNoYWJsZVxuXHQgKiBmcm9tIGxvc2luZyBpdCB2aWEgY2xpY2svdGFiIHdlIG5lZWQgdG8gY2hlY2sgaWYgYW55dGhpbmcgZWxzZSB3YXMgY2xpY2tlZCBhbmQgdGVsbCB0aGUgbWFpbiB0aHJlYWQgdG9cblx0ICogbm90IHNlYXJjaCB0aGUgbmV4dCByZXN1bHQgZm9yIGVudGVyIGtleSBldmVudHMgKG90aGVyd2lzZSB3ZSBjb3VsZG4ndCB0eXBlIG5ld2xpbmVzIHdoaWxlIHRoZSBvdmVybGF5IGlzIG9wZW4pXG5cdCAqL1xuXHRoYW5kbGVNb3VzZVVwKGU6IEV2ZW50KSB7XG5cdFx0aWYgKCEoZS50YXJnZXQgaW5zdGFuY2VvZiBFbGVtZW50ICYmIGUudGFyZ2V0LmlkICE9PSBcInNlYXJjaC1vdmVybGF5LWlucHV0XCIpKSByZXR1cm5cblx0XHRsb2NhdG9yLnNlYXJjaFRleHRGYWNhZGUuc2V0U2VhcmNoT3ZlcmxheVN0YXRlKGZhbHNlLCB0cnVlKVxuXHR9XG59XG5cbmV4cG9ydCBjb25zdCBzZWFyY2hJblBhZ2VPdmVybGF5OiBTZWFyY2hJblBhZ2VPdmVybGF5ID0gbmV3IFNlYXJjaEluUGFn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