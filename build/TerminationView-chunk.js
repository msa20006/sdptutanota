import "./dist-chunk.js";
import "./ProgrammingError-chunk.js";
import { assertMainOrNode } from "./Env-chunk.js";
import { client } from "./ClientDetector-chunk.js";
import { mithril_default } from "./mithril-chunk.js";
import { assertNotNull } from "./dist2-chunk.js";
import "./WhitelabelCustomizations-chunk.js";
import { lang } from "./LanguageViewModel-chunk.js";
import "./styles-chunk.js";
import "./theme-chunk.js";
import { TerminationPeriodOptions } from "./TutanotaConstants-chunk.js";
import "./KeyManager-chunk.js";
import { windowFacade } from "./WindowFacade-chunk.js";
import "./RootView-chunk.js";
import "./size-chunk.js";
import "./HtmlUtils-chunk.js";
import "./luxon-chunk.js";
import "./EntityUtils-chunk.js";
import "./TypeModels-chunk.js";
import "./TypeRefs-chunk.js";
import "./CommonCalendarUtils-chunk.js";
import "./TypeModels2-chunk.js";
import { createSurveyData } from "./TypeRefs2-chunk.js";
import "./ParserCombinator-chunk.js";
import "./CalendarUtils-chunk.js";
import "./ImportExportUtils-chunk.js";
import "./FormatValidator-chunk.js";
import "./stream-chunk.js";
import "./EntityFunctions-chunk.js";
import "./TypeModels3-chunk.js";
import "./ModelInfo-chunk.js";
import "./ErrorUtils-chunk.js";
import "./RestError-chunk.js";
import "./SetupMultipleError-chunk.js";
import "./OutOfSyncError-chunk.js";
import "./CancelledError-chunk.js";
import "./SuspensionError-chunk.js";
import "./LoginIncompleteError-chunk.js";
import "./CryptoError-chunk.js";
import "./error-chunk.js";
import "./RecipientsNotFoundError-chunk.js";
import "./DbError-chunk.js";
import "./QuotaExceededError-chunk.js";
import "./DeviceStorageUnavailableError-chunk.js";
import "./MailBodyTooLargeError-chunk.js";
import "./ImportError-chunk.js";
import "./WebauthnError-chunk.js";
import "./PermissionError-chunk.js";
import "./EntityUpdateUtils-chunk.js";
import "./dist3-chunk.js";
import "./Services-chunk.js";
import "./EntityClient-chunk.js";
import "./BirthdayUtils-chunk.js";
import "./Services2-chunk.js";
import "./GroupUtils-chunk.js";
import { Button, ButtonType } from "./Button-chunk.js";
import "./Icons-chunk.js";
import "./DialogHeaderBar-chunk.js";
import "./CountryList-chunk.js";
import { Autocomplete, DropDownSelector, TextField, TextFieldType } from "./Dialog-chunk.js";
import "./Icon-chunk.js";
import { AriaLandmarks, landmarkAttrs, liveDataAttrs } from "./AriaUtils-chunk.js";
import "./IconButton-chunk.js";
import "./CalendarEventWhenModel-chunk.js";
import { formatDateTime, formatDateWithMonth } from "./Formatter-chunk.js";
import "./ProgressMonitor-chunk.js";
import "./Notifications-chunk.js";
import "./CalendarFacade-chunk.js";
import "./CalendarModel-chunk.js";
import "./GroupUtils2-chunk.js";
import "./CommonLocator-chunk.js";
import "./UserError-chunk.js";
import "./MailAddressParser-chunk.js";
import "./BlobUtils-chunk.js";
import "./FileUtils-chunk.js";
import { showProgressDialog } from "./ProgressDialog-chunk.js";
import "./SharedMailUtils-chunk.js";
import "./PasswordUtils-chunk.js";
import "./Recipient-chunk.js";
import "./ContactUtils-chunk.js";
import "./RecipientsModel-chunk.js";
import "./CalendarGuiUtils-chunk.js";
import "./UpgradeRequiredError-chunk.js";
import "./ColorPickerModel-chunk.js";
import "./ToggleButton-chunk.js";
import { DatePicker } from "./DatePicker-chunk.js";
import "./DateParser-chunk.js";
import { PasswordField } from "./PasswordField-chunk.js";
import { BaseTopLevelView, LoginScreenHeader } from "./LoginScreenHeader-chunk.js";
import { LoginButton } from "./LoginButton-chunk.js";
import "./HtmlEditor-chunk.js";
import "./HtmlSanitizer-chunk.js";
import "./WizardDialog-chunk.js";
import { SURVEY_VERSION_NUMBER, showLeavingUserSurveyWizard } from "./LeavingUserSurveyWizard-chunk.js";

//#region src/common/termination/TerminationForm.ts
var TerminationForm = class {
	mailAddressTextField;
	passwordTextField;
	surveyResult = null;
	onremove(vnode) {
		this.passwordTextField.domInput.value = "";
	}
	view(vnode) {
		const a = vnode.attrs;
		return mithril_default("form", { onsubmit: (e) => {
			e.preventDefault();
		} }, [
			mithril_default(".h3", lang.get("terminationForm_title")),
			mithril_default(".mt-s", lang.get("termination_text")),
			mithril_default("", { oncreate: (vnode$1) => {
				const childArray = assertNotNull(vnode$1.children);
				const child = childArray[0];
				this.mailAddressTextField = child.state;
			} }, mithril_default(TextField, {
				label: "mailAddress_label",
				value: a.mailAddress,
				autocompleteAs: Autocomplete.email,
				oninput: (value) => {
					this.handleAutofill(a);
					a.onMailAddressChanged(value);
				},
				type: TextFieldType.Email,
				onDomInputCreated: (dom) => {
					if (!client.isMobileDevice()) dom.focus();
				}
			})),
			mithril_default(PasswordField, {
				value: a.password,
				autocompleteAs: Autocomplete.currentPassword,
				oncreate: (vnode$1) => {
					this.passwordTextField = { ...vnode$1.state };
				},
				onDomInputCreated: (domInput) => {
					this.passwordTextField.domInput = domInput;
				},
				oninput: (value) => {
					this.handleAutofill(a);
					a.onPasswordChanged(value);
				}
			}),
			mithril_default(".list-border-bottom.pb-l", [
				mithril_default(".h3.mt-l", lang.get("terminationDateRequest_title")),
				mithril_default(".mt-s", lang.get("terminationDateRequest_msg")),
				mithril_default(DropDownSelector, {
					label: "emptyString_msg",
					class: "",
					items: [{
						name: lang.get("endOfCurrentSubscriptionPeriod"),
						value: TerminationPeriodOptions.EndOfCurrentPeriod
					}, {
						name: lang.get("futureDate"),
						value: TerminationPeriodOptions.FutureDate
					}],
					selectedValue: a.terminationPeriodOption,
					selectionChangedHandler: a.onTerminationPeriodOptionChanged,
					dropdownWidth: 350,
					helpLabel: () => this.renderTerminationDateInfo(a.terminationPeriodOption)
				}),
				a.terminationPeriodOption === TerminationPeriodOptions.FutureDate ? mithril_default(DatePicker, {
					date: a.date,
					onDateSelected: a.onDateChanged,
					startOfTheWeekOffset: 0,
					label: "date_label",
					disabled: false
				}) : null
			]),
			mithril_default(".mt-l.text-center", lang.get("surveySecondaryMessageDelete_label")),
			mithril_default(".mt.flex-center", mithril_default(Button, {
				type: ButtonType.Secondary,
				label: "surveyParticipate_action",
				click: () => {
					showLeavingUserSurveyWizard(true, false).then((result) => this.surveyResult = result);
				}
			})),
			mithril_default(".mt", mithril_default(LoginButton, {
				label: "termination_action",
				onclick: () => {
					a.onSubmit(this.surveyResult);
				}
			})),
			mithril_default(".small.center.statusTextColor.mt.mb", liveDataAttrs(), [a.helpText])
		]);
	}
	handleAutofill(a) {
		requestAnimationFrame(() => {
			const oldAddress = a.mailAddress;
			const newAddress = this.mailAddressTextField.domInput.value;
			const oldPassword = a.password;
			const newPassword = this.passwordTextField.domInput.value;
			if (oldAddress !== newAddress) a.onMailAddressChanged(newAddress);
			if (oldPassword !== newPassword) a.onPasswordChanged(newPassword);
		});
	}
	renderTerminationDateInfo(terminationPeriodOption) {
		let infoMessage = lang.get(terminationPeriodOption === TerminationPeriodOptions.EndOfCurrentPeriod ? "terminationOptionEndOfSubscriptionInfo_msg" : "terminationOptionFutureDateInfo_msg");
		return mithril_default(".small", infoMessage + " " + lang.get("terminationUseAccountUntilTermination_msg"));
	}
};

//#endregion
//#region src/common/termination/TerminationView.ts
assertMainOrNode();
var TerminationView = class extends BaseTopLevelView {
	bottomMargin = 0;
	model;
	constructor({ attrs }) {
		super();
		this.model = attrs.makeViewModel();
	}
	keyboardListener = (keyboardSize) => {
		this.bottomMargin = keyboardSize;
		mithril_default.redraw();
	};
	onNewUrl(args, requestedPath) {}
	view({ attrs }) {
		return mithril_default("#termination-view.main-view.flex.col.nav-bg", {
			oncreate: () => windowFacade.addKeyboardSizeListener(this.keyboardListener),
			onremove: () => windowFacade.removeKeyboardSizeListener(this.keyboardListener),
			style: { marginBottom: this.bottomMargin + "px" }
		}, [mithril_default(LoginScreenHeader), mithril_default(".flex-grow.flex-center.scroll", mithril_default(".flex-grow-shrink-auto.max-width-m.pb", {
			...landmarkAttrs(AriaLandmarks.Main, lang.get("terminationForm_title")),
			oncreate: (vnode) => {
				vnode.dom.focus();
			}
		}, mithril_default(".flex.col.pt.plr-l.content-bg.border-radius-big", [this.model.acceptedTerminationRequest ? this.renderTerminationInfo(this.model.mailAddress, this.model.acceptedTerminationRequest) : this.renderTerminationForm()])))]);
	}
	renderTerminationInfo(mailAddress, acceptedTerminationRequest) {
		return mithril_default("", [mithril_default(".h3.mt", "Termination successful"), mithril_default("p.mt", lang.get("terminationSuccessful_msg", {
			"{accountName}": mailAddress,
			"{receivedDate}": formatDateTime(acceptedTerminationRequest.terminationRequestDate),
			"{deletionDate}": formatDateWithMonth(acceptedTerminationRequest.terminationDate)
		}))]);
	}
	async cancelWithProgressDialog(surveyResult) {
		if (surveyResult && surveyResult.submitted && surveyResult.category && surveyResult.reason) {
			const data = createSurveyData({
				category: surveyResult.category,
				reason: surveyResult.reason,
				details: surveyResult.details,
				version: SURVEY_VERSION_NUMBER
			});
			await showProgressDialog("pleaseWait_msg", this.model.createAccountTerminationRequest(data));
		} else await showProgressDialog("pleaseWait_msg", this.model.createAccountTerminationRequest());
		mithril_default.redraw();
	}
	renderTerminationForm() {
		return mithril_default(TerminationForm, {
			onSubmit: (surveyData) => this.cancelWithProgressDialog(surveyData),
			mailAddress: this.model.mailAddress,
			onMailAddressChanged: (mailAddress) => this.model.mailAddress = mailAddress,
			password: this.model.password,
			onPasswordChanged: (password) => this.model.password = password,
			date: this.model.date,
			onDateChanged: (date) => this.model.date = date,
			terminationPeriodOption: this.model.terminationPeriodOption,
			onTerminationPeriodOptionChanged: (option) => this.model.terminationPeriodOption = option,
			helpText: lang.getTranslationText(this.model.helpText)
		});
	}
};

//#endregion
export { TerminationView };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVGVybWluYXRpb25WaWV3LWNodW5rLmpzIiwibmFtZXMiOlsidm5vZGU6IFZub2RlPFRlcm1pbmF0aW9uRm9ybUF0dHJzPiIsImU6IFN1Ym1pdEV2ZW50Iiwidm5vZGUiLCJhOiBUZXJtaW5hdGlvbkZvcm1BdHRycyIsInRlcm1pbmF0aW9uUGVyaW9kT3B0aW9uOiBUZXJtaW5hdGlvblBlcmlvZE9wdGlvbnMiLCJrZXlib2FyZFNpemU6IG51bWJlciIsImFyZ3M6IFJlY29yZDxzdHJpbmcsIGFueT4iLCJyZXF1ZXN0ZWRQYXRoOiBzdHJpbmciLCJtYWlsQWRkcmVzczogc3RyaW5nIiwiYWNjZXB0ZWRUZXJtaW5hdGlvblJlcXVlc3Q6IEN1c3RvbWVyQWNjb3VudFRlcm1pbmF0aW9uUmVxdWVzdCIsInN1cnZleVJlc3VsdDogTGVhdmluZ1VzZXJTdXJ2ZXlEYXRhIHwgbnVsbCJdLCJzb3VyY2VzIjpbIi4uL3NyYy9jb21tb24vdGVybWluYXRpb24vVGVybWluYXRpb25Gb3JtLnRzIiwiLi4vc3JjL2NvbW1vbi90ZXJtaW5hdGlvbi9UZXJtaW5hdGlvblZpZXcudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG0sIHsgQ2hpbGRBcnJheSwgQ2hpbGRyZW4sIENvbXBvbmVudCwgVm5vZGUgfSBmcm9tIFwibWl0aHJpbFwiXG5pbXBvcnQgeyBsYW5nIH0gZnJvbSBcIi4uL21pc2MvTGFuZ3VhZ2VWaWV3TW9kZWwuanNcIlxuaW1wb3J0IHsgY2xpZW50IH0gZnJvbSBcIi4uL21pc2MvQ2xpZW50RGV0ZWN0b3IuanNcIlxuaW1wb3J0IHsgYXNzZXJ0Tm90TnVsbCB9IGZyb20gXCJAdHV0YW8vdHV0YW5vdGEtdXRpbHNcIlxuaW1wb3J0IHsgQXV0b2NvbXBsZXRlLCBUZXh0RmllbGQsIFRleHRGaWVsZFR5cGUgfSBmcm9tIFwiLi4vZ3VpL2Jhc2UvVGV4dEZpZWxkLmpzXCJcbmltcG9ydCB7IERyb3BEb3duU2VsZWN0b3IgfSBmcm9tIFwiLi4vZ3VpL2Jhc2UvRHJvcERvd25TZWxlY3Rvci5qc1wiXG5pbXBvcnQgeyBUZXJtaW5hdGlvblBlcmlvZE9wdGlvbnMgfSBmcm9tIFwiLi4vYXBpL2NvbW1vbi9UdXRhbm90YUNvbnN0YW50cy5qc1wiXG5pbXBvcnQgeyBEYXRlUGlja2VyIH0gZnJvbSBcIi4uLy4uL2NhbGVuZGFyLWFwcC9jYWxlbmRhci9ndWkvcGlja2Vycy9EYXRlUGlja2VyLmpzXCJcbmltcG9ydCB7IGxpdmVEYXRhQXR0cnMgfSBmcm9tIFwiLi4vZ3VpL0FyaWFVdGlscy5qc1wiXG5pbXBvcnQgeyBMb2dpbkJ1dHRvbiB9IGZyb20gXCIuLi9ndWkvYmFzZS9idXR0b25zL0xvZ2luQnV0dG9uLmpzXCJcbmltcG9ydCB7IEJ1dHRvbiwgQnV0dG9uVHlwZSB9IGZyb20gXCIuLi9ndWkvYmFzZS9CdXR0b24uanNcIlxuaW1wb3J0IHsgTGVhdmluZ1VzZXJTdXJ2ZXlEYXRhLCBzaG93TGVhdmluZ1VzZXJTdXJ2ZXlXaXphcmQgfSBmcm9tIFwiLi4vc3Vic2NyaXB0aW9uL0xlYXZpbmdVc2VyU3VydmV5V2l6YXJkLmpzXCJcbmltcG9ydCB7IFBhc3N3b3JkRmllbGQgfSBmcm9tIFwiLi4vbWlzYy9wYXNzd29yZHMvUGFzc3dvcmRGaWVsZC5qc1wiXG5cbmV4cG9ydCBpbnRlcmZhY2UgVGVybWluYXRpb25Gb3JtQXR0cnMge1xuXHRvblN1Ym1pdDogKHN1cnZleURhdGE6IExlYXZpbmdVc2VyU3VydmV5RGF0YSB8IG51bGwpID0+IHVua25vd25cblx0bWFpbEFkZHJlc3M6IHN0cmluZ1xuXHRvbk1haWxBZGRyZXNzQ2hhbmdlZDogKG1haWxBZGRyZXNzOiBzdHJpbmcpID0+IHVua25vd25cblx0cGFzc3dvcmQ6IHN0cmluZ1xuXHRvblBhc3N3b3JkQ2hhbmdlZDogKHBhc3N3b3JkOiBzdHJpbmcpID0+IHVua25vd25cblx0ZGF0ZTogRGF0ZVxuXHRvbkRhdGVDaGFuZ2VkOiAoZGF0ZTogRGF0ZSkgPT4gdW5rbm93blxuXHR0ZXJtaW5hdGlvblBlcmlvZE9wdGlvbjogVGVybWluYXRpb25QZXJpb2RPcHRpb25zXG5cdG9uVGVybWluYXRpb25QZXJpb2RPcHRpb25DaGFuZ2VkOiAob3B0aW9uOiBUZXJtaW5hdGlvblBlcmlvZE9wdGlvbnMpID0+IHVua25vd25cblx0aGVscFRleHQ/OiBzdHJpbmdcbn1cblxuZXhwb3J0IGNsYXNzIFRlcm1pbmF0aW9uRm9ybSBpbXBsZW1lbnRzIENvbXBvbmVudDxUZXJtaW5hdGlvbkZvcm1BdHRycz4ge1xuXHRtYWlsQWRkcmVzc1RleHRGaWVsZCE6IFRleHRGaWVsZFxuXHRwYXNzd29yZFRleHRGaWVsZCE6IFRleHRGaWVsZFxuXHRzdXJ2ZXlSZXN1bHQ6IExlYXZpbmdVc2VyU3VydmV5RGF0YSB8IG51bGwgPSBudWxsXG5cblx0b25yZW1vdmUodm5vZGU6IFZub2RlPFRlcm1pbmF0aW9uRm9ybUF0dHJzPikge1xuXHRcdHRoaXMucGFzc3dvcmRUZXh0RmllbGQuZG9tSW5wdXQudmFsdWUgPSBcIlwiXG5cdH1cblxuXHR2aWV3KHZub2RlOiBWbm9kZTxUZXJtaW5hdGlvbkZvcm1BdHRycz4pOiBDaGlsZHJlbiB7XG5cdFx0Y29uc3QgYSA9IHZub2RlLmF0dHJzXG5cblx0XHRyZXR1cm4gbShcblx0XHRcdFwiZm9ybVwiLFxuXHRcdFx0e1xuXHRcdFx0XHRvbnN1Ym1pdDogKGU6IFN1Ym1pdEV2ZW50KSA9PiB7XG5cdFx0XHRcdFx0Ly8gZG8gbm90IHBvc3QgdGhlIGZvcm0sIHRoZSBmb3JtIGlzIGp1c3QgaGVyZSB0byBlbmFibGUgYnJvd3NlciBhdXRvLWZpbGxcblx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCkgLy8gYS5vblN1Ym1pdChhLm1haWxBZGRyZXNzKCksIGEucGFzc3dvcmQoKSlcblx0XHRcdFx0fSxcblx0XHRcdH0sXG5cdFx0XHRbXG5cdFx0XHRcdG0oXCIuaDNcIiwgbGFuZy5nZXQoXCJ0ZXJtaW5hdGlvbkZvcm1fdGl0bGVcIikpLFxuXHRcdFx0XHRtKFwiLm10LXNcIiwgbGFuZy5nZXQoXCJ0ZXJtaW5hdGlvbl90ZXh0XCIpKSxcblx0XHRcdFx0bShcblx0XHRcdFx0XHRcIlwiLFxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdG9uY3JlYXRlOiAodm5vZGUpID0+IHtcblx0XHRcdFx0XHRcdFx0Y29uc3QgY2hpbGRBcnJheSA9IGFzc2VydE5vdE51bGwodm5vZGUuY2hpbGRyZW4pIGFzIENoaWxkQXJyYXlcblx0XHRcdFx0XHRcdFx0Y29uc3QgY2hpbGQgPSBjaGlsZEFycmF5WzBdIGFzIFZub2RlPHVua25vd24sIFRleHRGaWVsZD5cblx0XHRcdFx0XHRcdFx0dGhpcy5tYWlsQWRkcmVzc1RleHRGaWVsZCA9IGNoaWxkLnN0YXRlXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0bShUZXh0RmllbGQsIHtcblx0XHRcdFx0XHRcdGxhYmVsOiBcIm1haWxBZGRyZXNzX2xhYmVsXCIsXG5cdFx0XHRcdFx0XHR2YWx1ZTogYS5tYWlsQWRkcmVzcyxcblx0XHRcdFx0XHRcdGF1dG9jb21wbGV0ZUFzOiBBdXRvY29tcGxldGUuZW1haWwsXG5cdFx0XHRcdFx0XHRvbmlucHV0OiAodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdFx0dGhpcy5oYW5kbGVBdXRvZmlsbChhKVxuXHRcdFx0XHRcdFx0XHRhLm9uTWFpbEFkZHJlc3NDaGFuZ2VkKHZhbHVlKVxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdHR5cGU6IFRleHRGaWVsZFR5cGUuRW1haWwsXG5cdFx0XHRcdFx0XHRvbkRvbUlucHV0Q3JlYXRlZDogKGRvbSkgPT4ge1xuXHRcdFx0XHRcdFx0XHRpZiAoIWNsaWVudC5pc01vYmlsZURldmljZSgpKSB7XG5cdFx0XHRcdFx0XHRcdFx0ZG9tLmZvY3VzKCkgLy8gaGF2ZSBlbWFpbCBhZGRyZXNzIGF1dG8tZm9jdXMgc28gdGhlIHVzZXIgY2FuIGltbWVkaWF0ZWx5IHR5cGUgdGhlaXIgdXNlcm5hbWUgKHVubGVzcyBvbiBtb2JpbGUpXG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0fSksXG5cdFx0XHRcdCksXG5cdFx0XHRcdG0oUGFzc3dvcmRGaWVsZCwge1xuXHRcdFx0XHRcdHZhbHVlOiBhLnBhc3N3b3JkLFxuXHRcdFx0XHRcdGF1dG9jb21wbGV0ZUFzOiBBdXRvY29tcGxldGUuY3VycmVudFBhc3N3b3JkLFxuXHRcdFx0XHRcdG9uY3JlYXRlOiAodm5vZGUpID0+IHtcblx0XHRcdFx0XHRcdHRoaXMucGFzc3dvcmRUZXh0RmllbGQgPSB7IC4uLnZub2RlLnN0YXRlIH1cblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdG9uRG9tSW5wdXRDcmVhdGVkOiAoZG9tSW5wdXQpID0+IHtcblx0XHRcdFx0XHRcdHRoaXMucGFzc3dvcmRUZXh0RmllbGQuZG9tSW5wdXQgPSBkb21JbnB1dFxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0b25pbnB1dDogKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHR0aGlzLmhhbmRsZUF1dG9maWxsKGEpXG5cdFx0XHRcdFx0XHRhLm9uUGFzc3dvcmRDaGFuZ2VkKHZhbHVlKVxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdH0pLFxuXHRcdFx0XHRtKFwiLmxpc3QtYm9yZGVyLWJvdHRvbS5wYi1sXCIsIFtcblx0XHRcdFx0XHRtKFwiLmgzLm10LWxcIiwgbGFuZy5nZXQoXCJ0ZXJtaW5hdGlvbkRhdGVSZXF1ZXN0X3RpdGxlXCIpKSxcblx0XHRcdFx0XHRtKFwiLm10LXNcIiwgbGFuZy5nZXQoXCJ0ZXJtaW5hdGlvbkRhdGVSZXF1ZXN0X21zZ1wiKSksXG5cdFx0XHRcdFx0bShEcm9wRG93blNlbGVjdG9yLCB7XG5cdFx0XHRcdFx0XHRsYWJlbDogXCJlbXB0eVN0cmluZ19tc2dcIixcblx0XHRcdFx0XHRcdGNsYXNzOiBcIlwiLCAvLyBieSBzcGVjaWZ5aW5nIGFuIGVtcHR5IGNsYXNzIGF0dHJpYnV0ZSB3ZSByZW1vdmUgdGhlIHBhZGRpbmcgdG9wIGZvciB0aGUgRHJvcERvd25TZWxlY3RvclxuXHRcdFx0XHRcdFx0aXRlbXM6IFtcblx0XHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRcdG5hbWU6IGxhbmcuZ2V0KFwiZW5kT2ZDdXJyZW50U3Vic2NyaXB0aW9uUGVyaW9kXCIpLFxuXHRcdFx0XHRcdFx0XHRcdHZhbHVlOiBUZXJtaW5hdGlvblBlcmlvZE9wdGlvbnMuRW5kT2ZDdXJyZW50UGVyaW9kLFxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0bmFtZTogbGFuZy5nZXQoXCJmdXR1cmVEYXRlXCIpLFxuXHRcdFx0XHRcdFx0XHRcdHZhbHVlOiBUZXJtaW5hdGlvblBlcmlvZE9wdGlvbnMuRnV0dXJlRGF0ZSxcblx0XHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdF0sXG5cdFx0XHRcdFx0XHRzZWxlY3RlZFZhbHVlOiBhLnRlcm1pbmF0aW9uUGVyaW9kT3B0aW9uLFxuXHRcdFx0XHRcdFx0c2VsZWN0aW9uQ2hhbmdlZEhhbmRsZXI6IGEub25UZXJtaW5hdGlvblBlcmlvZE9wdGlvbkNoYW5nZWQsXG5cdFx0XHRcdFx0XHRkcm9wZG93bldpZHRoOiAzNTAsXG5cdFx0XHRcdFx0XHRoZWxwTGFiZWw6ICgpID0+IHRoaXMucmVuZGVyVGVybWluYXRpb25EYXRlSW5mbyhhLnRlcm1pbmF0aW9uUGVyaW9kT3B0aW9uKSxcblx0XHRcdFx0XHR9KSxcblx0XHRcdFx0XHRhLnRlcm1pbmF0aW9uUGVyaW9kT3B0aW9uID09PSBUZXJtaW5hdGlvblBlcmlvZE9wdGlvbnMuRnV0dXJlRGF0ZVxuXHRcdFx0XHRcdFx0PyBtKERhdGVQaWNrZXIsIHtcblx0XHRcdFx0XHRcdFx0XHRkYXRlOiBhLmRhdGUsXG5cdFx0XHRcdFx0XHRcdFx0b25EYXRlU2VsZWN0ZWQ6IGEub25EYXRlQ2hhbmdlZCxcblx0XHRcdFx0XHRcdFx0XHRzdGFydE9mVGhlV2Vla09mZnNldDogMCxcblx0XHRcdFx0XHRcdFx0XHRsYWJlbDogXCJkYXRlX2xhYmVsXCIsXG5cdFx0XHRcdFx0XHRcdFx0ZGlzYWJsZWQ6IGZhbHNlLFxuXHRcdFx0XHRcdFx0ICB9KVxuXHRcdFx0XHRcdFx0OiBudWxsLFxuXHRcdFx0XHRdKSxcblx0XHRcdFx0bShcIi5tdC1sLnRleHQtY2VudGVyXCIsIGxhbmcuZ2V0KFwic3VydmV5U2Vjb25kYXJ5TWVzc2FnZURlbGV0ZV9sYWJlbFwiKSksXG5cdFx0XHRcdG0oXG5cdFx0XHRcdFx0XCIubXQuZmxleC1jZW50ZXJcIixcblx0XHRcdFx0XHRtKEJ1dHRvbiwge1xuXHRcdFx0XHRcdFx0dHlwZTogQnV0dG9uVHlwZS5TZWNvbmRhcnksXG5cdFx0XHRcdFx0XHRsYWJlbDogXCJzdXJ2ZXlQYXJ0aWNpcGF0ZV9hY3Rpb25cIixcblx0XHRcdFx0XHRcdGNsaWNrOiAoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdHNob3dMZWF2aW5nVXNlclN1cnZleVdpemFyZCh0cnVlLCBmYWxzZSkudGhlbigocmVzdWx0KSA9PiAodGhpcy5zdXJ2ZXlSZXN1bHQgPSByZXN1bHQpKVxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHR9KSxcblx0XHRcdFx0KSxcblx0XHRcdFx0bShcblx0XHRcdFx0XHRcIi5tdFwiLFxuXHRcdFx0XHRcdG0oTG9naW5CdXR0b24sIHtcblx0XHRcdFx0XHRcdGxhYmVsOiBcInRlcm1pbmF0aW9uX2FjdGlvblwiLFxuXHRcdFx0XHRcdFx0b25jbGljazogKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRhLm9uU3VibWl0KHRoaXMuc3VydmV5UmVzdWx0KVxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHR9KSxcblx0XHRcdFx0KSxcblx0XHRcdFx0bShcIi5zbWFsbC5jZW50ZXIuc3RhdHVzVGV4dENvbG9yLm10Lm1iXCIsIGxpdmVEYXRhQXR0cnMoKSwgW2EuaGVscFRleHRdKSxcblx0XHRcdF0sXG5cdFx0KVxuXHR9XG5cblx0cHJpdmF0ZSBoYW5kbGVBdXRvZmlsbChhOiBUZXJtaW5hdGlvbkZvcm1BdHRycykge1xuXHRcdC8vIFdoZW4gaU9TIGRvZXMgYXV0by1maWxsaW5nIChhbHdheXMgaW4gV2ViVmlldyBhcyBvZiBpT1MgMTIuMiBhbmQgaW4gb2xkZXIgU2FmYXJpKVxuXHRcdC8vIGl0IG9ubHkgc2VuZHMgb25lIGlucHV0L2NoYW5nZSBldmVudCBmb3IgYWxsIGZpZWxkcyBzbyB3ZSBkaWRuJ3Qga25vdyBpZiBmaWVsZHNcblx0XHQvLyB3ZXJlIHVwZGF0ZWQuIFNvIHdlIGtpbmRseSBhc2sgb3VyIGZpZWxkcyB0byB1cGRhdGUgdGhlbXNlbHZlcyB3aXRoIHJlYWwgRE9NIHZhbHVlcy5cblx0XHRyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuXHRcdFx0Y29uc3Qgb2xkQWRkcmVzcyA9IGEubWFpbEFkZHJlc3Ncblx0XHRcdGNvbnN0IG5ld0FkZHJlc3MgPSB0aGlzLm1haWxBZGRyZXNzVGV4dEZpZWxkLmRvbUlucHV0LnZhbHVlXG5cdFx0XHRjb25zdCBvbGRQYXNzd29yZCA9IGEucGFzc3dvcmRcblx0XHRcdGNvbnN0IG5ld1Bhc3N3b3JkID0gdGhpcy5wYXNzd29yZFRleHRGaWVsZC5kb21JbnB1dC52YWx1ZVxuXHRcdFx0Ly8gb25seSB1cGRhdGUgdmFsdWVzIHdoZW4gdGhleSBhcmUgZGlmZmVyZW50IG9yIHdlIGdldCBzdHVjayBpbiBhbiBpbmZpbml0ZSBsb29wXG5cdFx0XHRpZiAob2xkQWRkcmVzcyAhPT0gbmV3QWRkcmVzcykgYS5vbk1haWxBZGRyZXNzQ2hhbmdlZChuZXdBZGRyZXNzKVxuXHRcdFx0aWYgKG9sZFBhc3N3b3JkICE9PSBuZXdQYXNzd29yZCkgYS5vblBhc3N3b3JkQ2hhbmdlZChuZXdQYXNzd29yZClcblx0XHR9KVxuXHR9XG5cblx0cHJpdmF0ZSByZW5kZXJUZXJtaW5hdGlvbkRhdGVJbmZvKHRlcm1pbmF0aW9uUGVyaW9kT3B0aW9uOiBUZXJtaW5hdGlvblBlcmlvZE9wdGlvbnMpOiBDaGlsZHJlbiB7XG5cdFx0bGV0IGluZm9NZXNzYWdlID0gbGFuZy5nZXQoXG5cdFx0XHR0ZXJtaW5hdGlvblBlcmlvZE9wdGlvbiA9PT0gVGVybWluYXRpb25QZXJpb2RPcHRpb25zLkVuZE9mQ3VycmVudFBlcmlvZFxuXHRcdFx0XHQ/IFwidGVybWluYXRpb25PcHRpb25FbmRPZlN1YnNjcmlwdGlvbkluZm9fbXNnXCJcblx0XHRcdFx0OiBcInRlcm1pbmF0aW9uT3B0aW9uRnV0dXJlRGF0ZUluZm9fbXNnXCIsXG5cdFx0KVxuXHRcdHJldHVybiBtKFwiLnNtYWxsXCIsIGluZm9NZXNzYWdlICsgXCIgXCIgKyBsYW5nLmdldChcInRlcm1pbmF0aW9uVXNlQWNjb3VudFVudGlsVGVybWluYXRpb25fbXNnXCIpKVxuXHR9XG59XG4iLCJpbXBvcnQgbSwgeyBDaGlsZHJlbiwgVm5vZGUgfSBmcm9tIFwibWl0aHJpbFwiXG5pbXBvcnQgeyBhc3NlcnRNYWluT3JOb2RlIH0gZnJvbSBcIi4uL2FwaS9jb21tb24vRW52LmpzXCJcbmltcG9ydCB7IHdpbmRvd0ZhY2FkZSB9IGZyb20gXCIuLi9taXNjL1dpbmRvd0ZhY2FkZS5qc1wiXG5pbXBvcnQgeyBBcmlhTGFuZG1hcmtzLCBsYW5kbWFya0F0dHJzIH0gZnJvbSBcIi4uL2d1aS9BcmlhVXRpbHMuanNcIlxuaW1wb3J0IHsgbGFuZyB9IGZyb20gXCIuLi9taXNjL0xhbmd1YWdlVmlld01vZGVsLmpzXCJcbmltcG9ydCB7IFRlcm1pbmF0aW9uVmlld01vZGVsIH0gZnJvbSBcIi4vVGVybWluYXRpb25WaWV3TW9kZWwuanNcIlxuaW1wb3J0IHsgVGVybWluYXRpb25Gb3JtIH0gZnJvbSBcIi4vVGVybWluYXRpb25Gb3JtLmpzXCJcbmltcG9ydCB7IGZvcm1hdERhdGVUaW1lLCBmb3JtYXREYXRlV2l0aE1vbnRoIH0gZnJvbSBcIi4uL21pc2MvRm9ybWF0dGVyLmpzXCJcbmltcG9ydCB7IHNob3dQcm9ncmVzc0RpYWxvZyB9IGZyb20gXCIuLi9ndWkvZGlhbG9ncy9Qcm9ncmVzc0RpYWxvZy5qc1wiXG5pbXBvcnQgeyBjcmVhdGVTdXJ2ZXlEYXRhLCBDdXN0b21lckFjY291bnRUZXJtaW5hdGlvblJlcXVlc3QgfSBmcm9tIFwiLi4vYXBpL2VudGl0aWVzL3N5cy9UeXBlUmVmcy5qc1wiXG5pbXBvcnQgeyBCYXNlVG9wTGV2ZWxWaWV3IH0gZnJvbSBcIi4uL2d1aS9CYXNlVG9wTGV2ZWxWaWV3LmpzXCJcbmltcG9ydCB7IFRvcExldmVsQXR0cnMsIFRvcExldmVsVmlldyB9IGZyb20gXCIuLi8uLi9Ub3BMZXZlbFZpZXcuanNcIlxuaW1wb3J0IHsgTG9naW5TY3JlZW5IZWFkZXIgfSBmcm9tIFwiLi4vZ3VpL0xvZ2luU2NyZWVuSGVhZGVyLmpzXCJcbmltcG9ydCB7IExlYXZpbmdVc2VyU3VydmV5RGF0YSwgc2hvd0xlYXZpbmdVc2VyU3VydmV5V2l6YXJkIH0gZnJvbSBcIi4uL3N1YnNjcmlwdGlvbi9MZWF2aW5nVXNlclN1cnZleVdpemFyZC5qc1wiXG5pbXBvcnQgeyBTVVJWRVlfVkVSU0lPTl9OVU1CRVIgfSBmcm9tIFwiLi4vc3Vic2NyaXB0aW9uL0xlYXZpbmdVc2VyU3VydmV5Q29uc3RhbnRzLmpzXCJcblxuYXNzZXJ0TWFpbk9yTm9kZSgpXG5cbmV4cG9ydCBpbnRlcmZhY2UgVGVybWluYXRpb25WaWV3QXR0cnMgZXh0ZW5kcyBUb3BMZXZlbEF0dHJzIHtcblx0bWFrZVZpZXdNb2RlbDogKCkgPT4gVGVybWluYXRpb25WaWV3TW9kZWxcbn1cblxuZXhwb3J0IGNsYXNzIFRlcm1pbmF0aW9uVmlldyBleHRlbmRzIEJhc2VUb3BMZXZlbFZpZXcgaW1wbGVtZW50cyBUb3BMZXZlbFZpZXc8VGVybWluYXRpb25WaWV3QXR0cnM+IHtcblx0cHJpdmF0ZSBib3R0b21NYXJnaW4gPSAwXG5cdHByaXZhdGUgbW9kZWw6IFRlcm1pbmF0aW9uVmlld01vZGVsXG5cblx0Y29uc3RydWN0b3IoeyBhdHRycyB9OiBWbm9kZTxUZXJtaW5hdGlvblZpZXdBdHRycz4pIHtcblx0XHRzdXBlcigpXG5cdFx0dGhpcy5tb2RlbCA9IGF0dHJzLm1ha2VWaWV3TW9kZWwoKVxuXHR9XG5cblx0a2V5Ym9hcmRMaXN0ZW5lciA9IChrZXlib2FyZFNpemU6IG51bWJlcikgPT4ge1xuXHRcdHRoaXMuYm90dG9tTWFyZ2luID0ga2V5Ym9hcmRTaXplXG5cdFx0bS5yZWRyYXcoKVxuXHR9XG5cblx0cHJvdGVjdGVkIG9uTmV3VXJsKGFyZ3M6IFJlY29yZDxzdHJpbmcsIGFueT4sIHJlcXVlc3RlZFBhdGg6IHN0cmluZyk6IHZvaWQge1xuXHRcdC8vIGRvIG5vdGhpbmdcblx0fVxuXG5cdHB1YmxpYyB2aWV3KHsgYXR0cnMgfTogVm5vZGU8VGVybWluYXRpb25WaWV3QXR0cnM+KSB7XG5cdFx0cmV0dXJuIG0oXG5cdFx0XHRcIiN0ZXJtaW5hdGlvbi12aWV3Lm1haW4tdmlldy5mbGV4LmNvbC5uYXYtYmdcIixcblx0XHRcdHtcblx0XHRcdFx0b25jcmVhdGU6ICgpID0+IHdpbmRvd0ZhY2FkZS5hZGRLZXlib2FyZFNpemVMaXN0ZW5lcih0aGlzLmtleWJvYXJkTGlzdGVuZXIpLFxuXHRcdFx0XHRvbnJlbW92ZTogKCkgPT4gd2luZG93RmFjYWRlLnJlbW92ZUtleWJvYXJkU2l6ZUxpc3RlbmVyKHRoaXMua2V5Ym9hcmRMaXN0ZW5lciksXG5cdFx0XHRcdHN0eWxlOiB7XG5cdFx0XHRcdFx0bWFyZ2luQm90dG9tOiB0aGlzLmJvdHRvbU1hcmdpbiArIFwicHhcIixcblx0XHRcdFx0fSxcblx0XHRcdH0sXG5cdFx0XHRbXG5cdFx0XHRcdG0oTG9naW5TY3JlZW5IZWFkZXIpLFxuXHRcdFx0XHRtKFxuXHRcdFx0XHRcdFwiLmZsZXgtZ3Jvdy5mbGV4LWNlbnRlci5zY3JvbGxcIixcblx0XHRcdFx0XHRtKFxuXHRcdFx0XHRcdFx0XCIuZmxleC1ncm93LXNocmluay1hdXRvLm1heC13aWR0aC1tLnBiXCIsXG5cdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdC4uLmxhbmRtYXJrQXR0cnMoQXJpYUxhbmRtYXJrcy5NYWluLCBsYW5nLmdldChcInRlcm1pbmF0aW9uRm9ybV90aXRsZVwiKSksXG5cdFx0XHRcdFx0XHRcdG9uY3JlYXRlOiAodm5vZGUpID0+IHtcblx0XHRcdFx0XHRcdFx0XHQ7KHZub2RlLmRvbSBhcyBIVE1MRWxlbWVudCkuZm9jdXMoKVxuXHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdG0oXCIuZmxleC5jb2wucHQucGxyLWwuY29udGVudC1iZy5ib3JkZXItcmFkaXVzLWJpZ1wiLCBbXG5cdFx0XHRcdFx0XHRcdHRoaXMubW9kZWwuYWNjZXB0ZWRUZXJtaW5hdGlvblJlcXVlc3Rcblx0XHRcdFx0XHRcdFx0XHQ/IHRoaXMucmVuZGVyVGVybWluYXRpb25JbmZvKHRoaXMubW9kZWwubWFpbEFkZHJlc3MsIHRoaXMubW9kZWwuYWNjZXB0ZWRUZXJtaW5hdGlvblJlcXVlc3QpXG5cdFx0XHRcdFx0XHRcdFx0OiB0aGlzLnJlbmRlclRlcm1pbmF0aW9uRm9ybSgpLFxuXHRcdFx0XHRcdFx0XSksXG5cdFx0XHRcdFx0KSxcblx0XHRcdFx0KSxcblx0XHRcdF0sXG5cdFx0KVxuXHR9XG5cblx0cHJpdmF0ZSByZW5kZXJUZXJtaW5hdGlvbkluZm8obWFpbEFkZHJlc3M6IHN0cmluZywgYWNjZXB0ZWRUZXJtaW5hdGlvblJlcXVlc3Q6IEN1c3RvbWVyQWNjb3VudFRlcm1pbmF0aW9uUmVxdWVzdCk6IENoaWxkcmVuIHtcblx0XHRyZXR1cm4gbShcIlwiLCBbXG5cdFx0XHRtKFwiLmgzLm10XCIsIFwiVGVybWluYXRpb24gc3VjY2Vzc2Z1bFwiKSxcblx0XHRcdG0oXG5cdFx0XHRcdFwicC5tdFwiLFxuXHRcdFx0XHRsYW5nLmdldChcInRlcm1pbmF0aW9uU3VjY2Vzc2Z1bF9tc2dcIiwge1xuXHRcdFx0XHRcdFwie2FjY291bnROYW1lfVwiOiBtYWlsQWRkcmVzcyxcblx0XHRcdFx0XHRcIntyZWNlaXZlZERhdGV9XCI6IGZvcm1hdERhdGVUaW1lKGFjY2VwdGVkVGVybWluYXRpb25SZXF1ZXN0LnRlcm1pbmF0aW9uUmVxdWVzdERhdGUpLFxuXHRcdFx0XHRcdFwie2RlbGV0aW9uRGF0ZX1cIjogZm9ybWF0RGF0ZVdpdGhNb250aChhY2NlcHRlZFRlcm1pbmF0aW9uUmVxdWVzdC50ZXJtaW5hdGlvbkRhdGUpLFxuXHRcdFx0XHR9KSxcblx0XHRcdCksXG5cdFx0XSlcblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgY2FuY2VsV2l0aFByb2dyZXNzRGlhbG9nKHN1cnZleVJlc3VsdDogTGVhdmluZ1VzZXJTdXJ2ZXlEYXRhIHwgbnVsbCkge1xuXHRcdGlmIChzdXJ2ZXlSZXN1bHQgJiYgc3VydmV5UmVzdWx0LnN1Ym1pdHRlZCAmJiBzdXJ2ZXlSZXN1bHQuY2F0ZWdvcnkgJiYgc3VydmV5UmVzdWx0LnJlYXNvbikge1xuXHRcdFx0Y29uc3QgZGF0YSA9IGNyZWF0ZVN1cnZleURhdGEoe1xuXHRcdFx0XHRjYXRlZ29yeTogc3VydmV5UmVzdWx0LmNhdGVnb3J5LFxuXHRcdFx0XHRyZWFzb246IHN1cnZleVJlc3VsdC5yZWFzb24sXG5cdFx0XHRcdGRldGFpbHM6IHN1cnZleVJlc3VsdC5kZXRhaWxzLFxuXHRcdFx0XHR2ZXJzaW9uOiBTVVJWRVlfVkVSU0lPTl9OVU1CRVIsXG5cdFx0XHR9KVxuXHRcdFx0YXdhaXQgc2hvd1Byb2dyZXNzRGlhbG9nKFwicGxlYXNlV2FpdF9tc2dcIiwgdGhpcy5tb2RlbC5jcmVhdGVBY2NvdW50VGVybWluYXRpb25SZXF1ZXN0KGRhdGEpKVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRhd2FpdCBzaG93UHJvZ3Jlc3NEaWFsb2coXCJwbGVhc2VXYWl0X21zZ1wiLCB0aGlzLm1vZGVsLmNyZWF0ZUFjY291bnRUZXJtaW5hdGlvblJlcXVlc3QoKSlcblx0XHR9XG5cdFx0bS5yZWRyYXcoKVxuXHR9XG5cblx0cHJpdmF0ZSByZW5kZXJUZXJtaW5hdGlvbkZvcm0oKTogQ2hpbGRyZW4ge1xuXHRcdHJldHVybiBtKFRlcm1pbmF0aW9uRm9ybSwge1xuXHRcdFx0b25TdWJtaXQ6IChzdXJ2ZXlEYXRhKSA9PiB0aGlzLmNhbmNlbFdpdGhQcm9ncmVzc0RpYWxvZyhzdXJ2ZXlEYXRhKSxcblx0XHRcdG1haWxBZGRyZXNzOiB0aGlzLm1vZGVsLm1haWxBZGRyZXNzLFxuXHRcdFx0b25NYWlsQWRkcmVzc0NoYW5nZWQ6IChtYWlsQWRkcmVzcykgPT4gKHRoaXMubW9kZWwubWFpbEFkZHJlc3MgPSBtYWlsQWRkcmVzcyksXG5cdFx0XHRwYXNzd29yZDogdGhpcy5tb2RlbC5wYXNzd29yZCxcblx0XHRcdG9uUGFzc3dvcmRDaGFuZ2VkOiAocGFzc3dvcmQpID0+ICh0aGlzLm1vZGVsLnBhc3N3b3JkID0gcGFzc3dvcmQpLFxuXHRcdFx0ZGF0ZTogdGhpcy5tb2RlbC5kYXRlLFxuXHRcdFx0b25EYXRlQ2hhbmdlZDogKGRhdGUpID0+ICh0aGlzLm1vZGVsLmRhdGUgPSBkYXRlKSxcblx0XHRcdHRlcm1pbmF0aW9uUGVyaW9kT3B0aW9uOiB0aGlzLm1vZGVsLnRlcm1pbmF0aW9uUGVyaW9kT3B0aW9uLFxuXHRcdFx0b25UZXJtaW5hdGlvblBlcmlvZE9wdGlvbkNoYW5nZWQ6IChvcHRpb24pID0+ICh0aGlzLm1vZGVsLnRlcm1pbmF0aW9uUGVyaW9kT3B0aW9uID0gb3B0aW9uKSxcblx0XHRcdGhlbHBUZXh0OiBsYW5nLmdldFRyYW5zbGF0aW9uVGV4dCh0aGlzLm1vZGVsLmhlbHBUZXh0KSxcblx0XHR9KVxuXHR9XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztJQTJCYSxrQkFBTixNQUFpRTtDQUN2RTtDQUNBO0NBQ0EsZUFBNkM7Q0FFN0MsU0FBU0EsT0FBb0M7QUFDNUMsT0FBSyxrQkFBa0IsU0FBUyxRQUFRO0NBQ3hDO0NBRUQsS0FBS0EsT0FBOEM7RUFDbEQsTUFBTSxJQUFJLE1BQU07QUFFaEIsU0FBTyxnQkFDTixRQUNBLEVBQ0MsVUFBVSxDQUFDQyxNQUFtQjtBQUU3QixLQUFFLGdCQUFnQjtFQUNsQixFQUNELEdBQ0Q7R0FDQyxn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