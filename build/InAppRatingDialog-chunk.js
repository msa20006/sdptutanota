import { isIOSApp } from "./Env-chunk.js";
import { client } from "./ClientDetector-chunk.js";
import { mithril_default } from "./mithril-chunk.js";
import { neverNull, resolveMaybeLazy } from "./dist2-chunk.js";
import { lang } from "./LanguageViewModel-chunk.js";
import { DefaultAnimationTime } from "./styles-chunk.js";
import { theme } from "./theme-chunk.js";
import { Keys } from "./TutanotaConstants-chunk.js";
import { px, size } from "./size-chunk.js";
import { DateTime } from "./luxon-chunk.js";
import { deviceConfig } from "./DeviceConfig-chunk.js";
import { BaseButton, Button, ButtonType } from "./Button-chunk.js";
import { Dialog, DialogType } from "./Dialog-chunk.js";
import { locator } from "./CommonLocator-chunk.js";

//#region src/common/ratings/InAppRatingUtils.ts
function createEvent(deviceConfig$1) {
	const retentionPeriod = 30;
	let events = deviceConfig$1.getEvents().filter((event) => isWithinLastNDays(new Date(), event, retentionPeriod));
	events.push(new Date());
	deviceConfig$1.writeEvents(events);
}
function isWithinLastNDays(now, date, days) {
	return DateTime.fromJSDate(now).diff(DateTime.fromJSDate(date), "days").days < days;
}
let RatingCheckResult = function(RatingCheckResult$1) {
	RatingCheckResult$1[RatingCheckResult$1["RATING_ALLOWED"] = 0] = "RATING_ALLOWED";
	RatingCheckResult$1[RatingCheckResult$1["UNSUPPORTED_PLATFORM"] = 1] = "UNSUPPORTED_PLATFORM";
	RatingCheckResult$1[RatingCheckResult$1["LAST_RATING_TOO_YOUNG"] = 2] = "LAST_RATING_TOO_YOUNG";
	RatingCheckResult$1[RatingCheckResult$1["APP_INSTALLATION_TOO_YOUNG"] = 3] = "APP_INSTALLATION_TOO_YOUNG";
	RatingCheckResult$1[RatingCheckResult$1["ACCOUNT_TOO_YOUNG"] = 4] = "ACCOUNT_TOO_YOUNG";
	RatingCheckResult$1[RatingCheckResult$1["RATING_DISMISSED"] = 5] = "RATING_DISMISSED";
	return RatingCheckResult$1;
}({});
async function getRatingAllowed(now, deviceConfig$1, isIOSApp$1) {
	if (!isIOSApp$1) return RatingCheckResult.UNSUPPORTED_PLATFORM;
	const lastRatingPromptedDate = deviceConfig$1.getLastRatingPromptedDate();
	if (lastRatingPromptedDate != null && DateTime.fromJSDate(now).diff(DateTime.fromJSDate(lastRatingPromptedDate), "years").years < 1) return RatingCheckResult.LAST_RATING_TOO_YOUNG;
	const appInstallationDate = await locator.systemFacade.getInstallationDate().then((rawDate) => new Date(Number(rawDate)));
	if (isWithinLastNDays(now, appInstallationDate, 7)) return RatingCheckResult.APP_INSTALLATION_TOO_YOUNG;
	const customerCreationDate = (await locator.logins.getUserController().loadCustomerInfo()).creationTime;
	if (isWithinLastNDays(now, customerCreationDate, 7)) return RatingCheckResult.ACCOUNT_TOO_YOUNG;
	const retryRatingPromptAfter = deviceConfig$1.getRetryRatingPromptAfter();
	if (retryRatingPromptAfter != null && now.getTime() < retryRatingPromptAfter.getTime()) return RatingCheckResult.RATING_DISMISSED;
	return RatingCheckResult.RATING_ALLOWED;
}
function isEventHappyMoment(now, deviceConfig$1) {
	const lastRatingPromptedDate = deviceConfig$1.getLastRatingPromptedDate();
	const events = deviceConfig$1.getEvents();
	if (events.length >= 3 && lastRatingPromptedDate == null) return true;
	const twentyEightDaysAgo = DateTime.fromJSDate(now).minus({ days: 28 }).toMillis();
	const recentActivityCount = events.filter((event) => new Date(event).getTime() >= twentyEightDaysAgo).length;
	if (recentActivityCount >= 10) return true;
	return false;
}

//#endregion
//#region src/common/ratings/InAppRatingDialog.ts
var AppRatingValue = function(AppRatingValue$1) {
	AppRatingValue$1["Happy"] = "happy";
	AppRatingValue$1["Unhappy"] = "unhappy";
	AppRatingValue$1["NotNow"] = "notNow";
	return AppRatingValue$1;
}(AppRatingValue || {});
async function showAppRatingDialog() {
	const selectedValue = await new Promise((resolve) => {
		const choose = (choice) => {
			dialog.close();
			setTimeout(() => resolve(choice), DefaultAnimationTime);
		};
		const headerBarProps = { right: [{
			label: "notNow_label",
			click: () => choose(AppRatingValue.NotNow),
			type: ButtonType.Secondary
		}] };
		const columnClass = ".flex-half.overflow-hidden";
		const dialog = new Dialog(DialogType.EditSmall, { view: () => mithril_default("", [mithril_default(".dialog-header.plr-l.flex-space-between.dialog-header-line-height", [mithril_default(columnClass + ".ml-negative-s"), mithril_default(columnClass + ".mr-negative-s.flex.justify-end", resolveMaybeLazy(neverNull(headerBarProps.right)).map((a) => mithril_default(Button, a)))]), mithril_default(".plr-l.pb-ml.text-break", mithril_default(".flex.flex-column", [mithril_default("#dialog-message.dialog-max-height.text-break.text-prewrap.selectable.scroll", mithril_default("", mithril_default(".flex-center.mt-m", mithril_default("img.pb.pt.block.height-100p", {
			src: `${window.tutao.appState.prefixWithoutFile}/images/rating/${client.isCalendarApp() ? "calendar" : "mail"}.png`,
			alt: "",
			rel: "noreferrer",
			loading: "lazy",
			decoding: "async",
			style: { width: "80%" }
		})), mithril_default("h1.text-center", lang.get("ratingHowAreWeDoing_title")), mithril_default("p.text-center", lang.get("ratingExplanation_msg")))), mithril_default(".flex.flex-column.mt", { style: { gap: "1em" } }, mithril_default(BaseButton, {
			label: "ratingLoveIt_label",
			text: lang.get("ratingLoveIt_label"),
			onclick: () => choose(AppRatingValue.Happy),
			class: `full-width border-radius-small center b flash accent-bg button-content`,
			style: { height: px(size.button_height + size.vpad_xs * 1.5) }
		}), mithril_default(BaseButton, {
			label: "ratingNeedsWork_label",
			text: lang.get("ratingNeedsWork_label"),
			onclick: () => choose(AppRatingValue.Unhappy),
			class: `full-width border-radius-small center b flash`,
			style: {
				border: `2px solid ${theme.content_accent}`,
				height: px(size.button_height + size.vpad_xs * 1.5),
				color: theme.content_accent
			}
		}))]))]) }).addShortcut({
			help: "close_alt",
			key: Keys.ESC,
			exec: () => choose(AppRatingValue.NotNow)
		});
		dialog.show();
	});
	handleRatingDialogSelection(selectedValue);
}
function handleRatingDialogSelection(selectedValue) {
	switch (selectedValue) {
		case AppRatingValue.Unhappy:
			deviceConfig.setLastRatingPromptedDate(new Date());
			break;
		case AppRatingValue.NotNow:
			deviceConfig.setRetryRatingPromptAfter(DateTime.now().plus({ months: 1 }).toJSDate());
			break;
		case AppRatingValue.Happy: {
			deviceConfig.setLastRatingPromptedDate(new Date());
			void locator.systemFacade.requestInAppRating();
			break;
		}
	}
}
async function handleRatingByEvent() {
	const isTheIOSApp = isIOSApp();
	if (isTheIOSApp) createEvent(deviceConfig);
	const now = new Date();
	if (await getRatingAllowed(now, deviceConfig, isTheIOSApp) === RatingCheckResult.RATING_ALLOWED) {
		if (isEventHappyMoment(now, deviceConfig)) void showAppRatingDialog();
	}
}

//#endregion
export { RatingCheckResult, getRatingAllowed, handleRatingByEvent, showAppRatingDialog };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiSW5BcHBSYXRpbmdEaWFsb2ctY2h1bmsuanMiLCJuYW1lcyI6WyJkZXZpY2VDb25maWc6IERldmljZUNvbmZpZyIsInJldGVudGlvblBlcmlvZDogbnVtYmVyIiwibm93OiBEYXRlIiwiZGF0ZTogRGF0ZSIsImRheXM6IG51bWJlciIsImlzSU9TQXBwOiBib29sZWFuIiwiaXNJT1NBcHAiLCJsYXN0UmF0aW5nUHJvbXB0ZWREYXRlOiBEYXRlIHwgbnVsbCIsImV2ZW50czogRGF0ZVtdIiwic2VsZWN0ZWRWYWx1ZTogQXBwUmF0aW5nVmFsdWUiLCJjaG9pY2U6IEFwcFJhdGluZ1ZhbHVlIiwiaGVhZGVyQmFyUHJvcHM6IERpYWxvZ0hlYWRlckJhckF0dHJzIl0sInNvdXJjZXMiOlsiLi4vc3JjL2NvbW1vbi9yYXRpbmdzL0luQXBwUmF0aW5nVXRpbHMudHMiLCIuLi9zcmMvY29tbW9uL3JhdGluZ3MvSW5BcHBSYXRpbmdEaWFsb2cudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRGV2aWNlQ29uZmlnIH0gZnJvbSBcIi4uL21pc2MvRGV2aWNlQ29uZmlnLmpzXCJcbmltcG9ydCB7IERhdGVUaW1lIH0gZnJvbSBcImx1eG9uXCJcbmltcG9ydCB7IGxvY2F0b3IgfSBmcm9tIFwiLi4vYXBpL21haW4vQ29tbW9uTG9jYXRvci5qc1wiXG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVFdmVudChkZXZpY2VDb25maWc6IERldmljZUNvbmZpZyk6IHZvaWQge1xuXHRjb25zdCByZXRlbnRpb25QZXJpb2Q6IG51bWJlciA9IDMwXG5cdGxldCBldmVudHMgPSBkZXZpY2VDb25maWcuZ2V0RXZlbnRzKCkuZmlsdGVyKChldmVudCkgPT4gaXNXaXRoaW5MYXN0TkRheXMobmV3IERhdGUoKSwgZXZlbnQsIHJldGVudGlvblBlcmlvZCkpXG5cdGV2ZW50cy5wdXNoKG5ldyBEYXRlKCkpXG5cdGRldmljZUNvbmZpZy53cml0ZUV2ZW50cyhldmVudHMpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1dpdGhpbkxhc3RORGF5cyhub3c6IERhdGUsIGRhdGU6IERhdGUsIGRheXM6IG51bWJlcikge1xuXHRyZXR1cm4gRGF0ZVRpbWUuZnJvbUpTRGF0ZShub3cpLmRpZmYoRGF0ZVRpbWUuZnJvbUpTRGF0ZShkYXRlKSwgXCJkYXlzXCIpLmRheXMgPCBkYXlzXG59XG5cbmV4cG9ydCBlbnVtIFJhdGluZ0NoZWNrUmVzdWx0IHtcblx0UkFUSU5HX0FMTE9XRUQsXG5cdFVOU1VQUE9SVEVEX1BMQVRGT1JNLFxuXHRMQVNUX1JBVElOR19UT09fWU9VTkcsXG5cdEFQUF9JTlNUQUxMQVRJT05fVE9PX1lPVU5HLFxuXHRBQ0NPVU5UX1RPT19ZT1VORyxcblx0UkFUSU5HX0RJU01JU1NFRCxcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmVzIGlmIHdlIGFyZSBhbGxvd2VkIHRvIGFzayB0aGUgdXNlciBmb3IgdGhlaXIgcmF0aW5nLlxuICogSXQgaXMgcG9zc2libGUgdGhhdCB0aGUgdXNlciBkZWxheWVkIGhpcyBjaG9pY2Ugb3IgaWYgd2UgYWxyZWFkeSBhc2tlZCB0aGVtIHdpdGhpbiB0aGUgcGFzdCB5ZWFyLlxuICpcbiAqIDEuIFRoZSBhcHAgbXVzdCBiZSBydW5uaW5nIG9uIGFuIGlPUyBkZXZpY2UuXG4gKiAyLiBUaGUgYXBwIGluc3RhbGxhdGlvbiBkYXRlIGFuZCBjdXN0b21lciBjcmVhdGlvbiBkYXRlIG11c3QgYm90aCBiZSBhdCBsZWFzdCA3IGRheXMgaW4gdGhlIHBhc3QuXG4gKiAzLiBUaGUgZGlhbG9nIG11c3Qgbm90IGhhdmUgYmVlbiBzaG93biB3aXRoaW4gdGhlIGxhc3QgeWVhciAoV2hlbiB0aGUgZGlhbG9nIGlzIGRpc21pc3NlZCB3aXRoIHRoZSBjYW5jZWwgYnV0dG9uIGl0IGlzIG5vdCBjb25zaWRlcmVkIGJlaW5nIHNob3duKS5cbiAqIDQuIFRoZSByZXRyeSBwcm9tcHQgdGltZXIgKGlmIHNldCkgbXVzdCBoYXZlIGV4cGlyZWQuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRSYXRpbmdBbGxvd2VkKG5vdzogRGF0ZSwgZGV2aWNlQ29uZmlnOiBEZXZpY2VDb25maWcsIGlzSU9TQXBwOiBib29sZWFuKTogUHJvbWlzZTxSYXRpbmdDaGVja1Jlc3VsdD4ge1xuXHRpZiAoIWlzSU9TQXBwKSB7XG5cdFx0cmV0dXJuIFJhdGluZ0NoZWNrUmVzdWx0LlVOU1VQUE9SVEVEX1BMQVRGT1JNXG5cdH1cblxuXHRjb25zdCBsYXN0UmF0aW5nUHJvbXB0ZWREYXRlOiBEYXRlIHwgbnVsbCA9IGRldmljZUNvbmZpZy5nZXRMYXN0UmF0aW5nUHJvbXB0ZWREYXRlKClcblxuXHRpZiAobGFzdFJhdGluZ1Byb21wdGVkRGF0ZSAhPSBudWxsICYmIERhdGVUaW1lLmZyb21KU0RhdGUobm93KS5kaWZmKERhdGVUaW1lLmZyb21KU0RhdGUobGFzdFJhdGluZ1Byb21wdGVkRGF0ZSksIFwieWVhcnNcIikueWVhcnMgPCAxKSB7XG5cdFx0cmV0dXJuIFJhdGluZ0NoZWNrUmVzdWx0LkxBU1RfUkFUSU5HX1RPT19ZT1VOR1xuXHR9XG5cblx0Y29uc3QgYXBwSW5zdGFsbGF0aW9uRGF0ZSA9IGF3YWl0IGxvY2F0b3Iuc3lzdGVtRmFjYWRlLmdldEluc3RhbGxhdGlvbkRhdGUoKS50aGVuKChyYXdEYXRlKSA9PiBuZXcgRGF0ZShOdW1iZXIocmF3RGF0ZSkpKVxuXHRpZiAoaXNXaXRoaW5MYXN0TkRheXMobm93LCBhcHBJbnN0YWxsYXRpb25EYXRlLCA3KSkge1xuXHRcdHJldHVybiBSYXRpbmdDaGVja1Jlc3VsdC5BUFBfSU5TVEFMTEFUSU9OX1RPT19ZT1VOR1xuXHR9XG5cblx0Y29uc3QgY3VzdG9tZXJDcmVhdGlvbkRhdGUgPSAoYXdhaXQgbG9jYXRvci5sb2dpbnMuZ2V0VXNlckNvbnRyb2xsZXIoKS5sb2FkQ3VzdG9tZXJJbmZvKCkpLmNyZWF0aW9uVGltZVxuXHRpZiAoaXNXaXRoaW5MYXN0TkRheXMobm93LCBjdXN0b21lckNyZWF0aW9uRGF0ZSwgNykpIHtcblx0XHRyZXR1cm4gUmF0aW5nQ2hlY2tSZXN1bHQuQUNDT1VOVF9UT09fWU9VTkdcblx0fVxuXG5cdGNvbnN0IHJldHJ5UmF0aW5nUHJvbXB0QWZ0ZXIgPSBkZXZpY2VDb25maWcuZ2V0UmV0cnlSYXRpbmdQcm9tcHRBZnRlcigpXG5cdGlmIChyZXRyeVJhdGluZ1Byb21wdEFmdGVyICE9IG51bGwgJiYgbm93LmdldFRpbWUoKSA8IHJldHJ5UmF0aW5nUHJvbXB0QWZ0ZXIuZ2V0VGltZSgpKSB7XG5cdFx0cmV0dXJuIFJhdGluZ0NoZWNrUmVzdWx0LlJBVElOR19ESVNNSVNTRURcblx0fVxuXG5cdHJldHVybiBSYXRpbmdDaGVja1Jlc3VsdC5SQVRJTkdfQUxMT1dFRFxufVxuXG4vKipcbiAqIERldGVybWluZXMgaWYgdGhlIHVzZXIgaXMgZXhwZXJpZW5jaW5nIGEgXCJoYXBweSBtb21lbnRcIi5cbiAqXG4gKiBBdCBsZWFzdCBvbmUgb2YgdGhlIGZvbGxvd2luZyBhY3Rpdml0eS1iYXNlZCBjb25kaXRpb25zIG11c3QgYmUgc2F0aXNmaWVkOlxuICogICAgLSBUaGUgdXNlciBoYXMgY3JlYXRlZCBhdCBsZWFzdCAzIGV2ZW50cy9lbWFpbHMsIGFuZCBubyBwcmV2aW91cyBwcm9tcHQgd2FzIHNob3duLlxuICogICAgLSBUaGUgdXNlciBoYXMgcGVyZm9ybWVkIGF0IGxlYXN0IDEwIGFjdGl2aXRpZXMgKGV2ZW50cy9lbWFpbHMpIGluIHRoZSBsYXN0IDI4IGRheXMuXG4gKlxuICogQHJldHVybnMge2Jvb2xlYW59IEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIGB0cnVlYCBpZiB0aGUgdXNlciBpcyBpbiBhIFwiaGFwcHkgbW9tZW50XCIuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0V2ZW50SGFwcHlNb21lbnQobm93OiBEYXRlLCBkZXZpY2VDb25maWc6IERldmljZUNvbmZpZyk6IGJvb2xlYW4ge1xuXHQvL3JlZ2lvbiBUcmlnZ2VyIDE6IENoZWNrIGZvciBtaW5pbXVtIDMgZXZlbnRzL2VtYWlscyBjcmVhdGVkXG5cdGNvbnN0IGxhc3RSYXRpbmdQcm9tcHRlZERhdGU6IERhdGUgfCBudWxsID0gZGV2aWNlQ29uZmlnLmdldExhc3RSYXRpbmdQcm9tcHRlZERhdGUoKVxuXG5cdGNvbnN0IGV2ZW50czogRGF0ZVtdID0gZGV2aWNlQ29uZmlnLmdldEV2ZW50cygpXG5cdGlmIChldmVudHMubGVuZ3RoID49IDMgJiYgbGFzdFJhdGluZ1Byb21wdGVkRGF0ZSA9PSBudWxsKSB7XG5cdFx0cmV0dXJuIHRydWVcblx0fVxuXHQvL2VuZHJlZ2lvblxuXG5cdC8vcmVnaW9uIFRyaWdnZXIgMjogQ2hlY2sgZm9yIGF0IGxlYXN0IDEwIGFjdGl2aXRpZXMgaW4gdGhlIGxhc3QgMjggZGF5c1xuXHRjb25zdCB0d2VudHlFaWdodERheXNBZ28gPSBEYXRlVGltZS5mcm9tSlNEYXRlKG5vdykubWludXMoeyBkYXlzOiAyOCB9KS50b01pbGxpcygpXG5cdGNvbnN0IHJlY2VudEFjdGl2aXR5Q291bnQgPSBldmVudHMuZmlsdGVyKChldmVudCkgPT4gbmV3IERhdGUoZXZlbnQpLmdldFRpbWUoKSA+PSB0d2VudHlFaWdodERheXNBZ28pLmxlbmd0aFxuXG5cdGlmIChyZWNlbnRBY3Rpdml0eUNvdW50ID49IDEwKSB7XG5cdFx0cmV0dXJuIHRydWVcblx0fVxuXHQvL2VuZHJlZ2lvblxuXHRyZXR1cm4gZmFsc2Vcbn1cbiIsImltcG9ydCB7IERpYWxvZywgRGlhbG9nVHlwZSB9IGZyb20gXCIuLi9ndWkvYmFzZS9EaWFsb2cuanNcIlxuaW1wb3J0IG0gZnJvbSBcIm1pdGhyaWxcIlxuaW1wb3J0IHsgZGV2aWNlQ29uZmlnIH0gZnJvbSBcIi4uL21pc2MvRGV2aWNlQ29uZmlnLmpzXCJcbmltcG9ydCB7IGNyZWF0ZUV2ZW50LCBnZXRSYXRpbmdBbGxvd2VkLCBpc0V2ZW50SGFwcHlNb21lbnQsIFJhdGluZ0NoZWNrUmVzdWx0IH0gZnJvbSBcIi4vSW5BcHBSYXRpbmdVdGlscy5qc1wiXG5pbXBvcnQgeyBpc0lPU0FwcCB9IGZyb20gXCIuLi9hcGkvY29tbW9uL0Vudi5qc1wiXG5pbXBvcnQgeyBsb2NhdG9yIH0gZnJvbSBcIi4uL2FwaS9tYWluL0NvbW1vbkxvY2F0b3IuanNcIlxuaW1wb3J0IHsgQnV0dG9uLCBCdXR0b25UeXBlIH0gZnJvbSBcIi4uL2d1aS9iYXNlL0J1dHRvbi5qc1wiXG5pbXBvcnQgeyBEZWZhdWx0QW5pbWF0aW9uVGltZSB9IGZyb20gXCIuLi9ndWkvYW5pbWF0aW9uL0FuaW1hdGlvbnMuanNcIlxuaW1wb3J0IHsgbmV2ZXJOdWxsLCByZXNvbHZlTWF5YmVMYXp5IH0gZnJvbSBcIkB0dXRhby90dXRhbm90YS11dGlsc1wiXG5pbXBvcnQgeyBLZXlzIH0gZnJvbSBcIi4uL2FwaS9jb21tb24vVHV0YW5vdGFDb25zdGFudHMuanNcIlxuaW1wb3J0IHsgRGlhbG9nSGVhZGVyQmFyQXR0cnMgfSBmcm9tIFwiLi4vZ3VpL2Jhc2UvRGlhbG9nSGVhZGVyQmFyLmpzXCJcbmltcG9ydCB7IEJhc2VCdXR0b24sIEJhc2VCdXR0b25BdHRycyB9IGZyb20gXCIuLi9ndWkvYmFzZS9idXR0b25zL0Jhc2VCdXR0b24uanNcIlxuaW1wb3J0IHsgdGhlbWUgfSBmcm9tIFwiLi4vZ3VpL3RoZW1lLmpzXCJcbmltcG9ydCB7IHB4LCBzaXplIH0gZnJvbSBcIi4uL2d1aS9zaXplLmpzXCJcbmltcG9ydCB7IGNsaWVudCB9IGZyb20gXCIuLi9taXNjL0NsaWVudERldGVjdG9yLmpzXCJcbmltcG9ydCB7IGxhbmcgfSBmcm9tIFwiLi4vbWlzYy9MYW5ndWFnZVZpZXdNb2RlbC5qc1wiXG5pbXBvcnQgeyBEYXRlVGltZSB9IGZyb20gXCJsdXhvblwiXG5cbmNvbnN0IGVudW0gQXBwUmF0aW5nVmFsdWUge1xuXHRIYXBweSA9IFwiaGFwcHlcIixcblx0VW5oYXBweSA9IFwidW5oYXBweVwiLFxuXHROb3ROb3cgPSBcIm5vdE5vd1wiLFxufVxuXG4vKipcbiAqIERpc3BsYXlzIHRoZSBhcHBsaWNhdGlvbiByYXRpbmcgZGlhbG9nIHRvIHRoZSB1c2VyIGFuZCBoYW5kbGVzIHRoZWlyIHNlbGVjdGlvbi5cbiAqXG4gKiBUaGUgZGlhbG9nIHByb3ZpZGVzIG9wdGlvbnMgZm9yIHVzZXJzIHRvIHJhdGUgdGhlaXIgZXhwZXJpZW5jZSBhcyBwb3NpdGl2ZSBvciBuZWdhdGl2ZSxcbiAqIG9yIHRvIGRpc21pc3MgdGhlIGRpYWxvZyB3aXRoIGFjdGlvbnMgc3VjaCBhcyBcIk5vdCBub3dcIi5cIiBCYXNlZCBvblxuICogdGhlIHVzZXIncyBjaG9pY2UsIGFwcHJvcHJpYXRlIGZvbGxvdy11cCBhY3Rpb25zIGFyZSB0YWtlbjpcbiAqXG4gKiAtICoqSGFwcHkqKjogUHJvbXB0cyB0aGUgdXNlciB0byBsZWF2ZSBhIHJldmlldyBvbiB0aGUgQXBwIFN0b3JlLiBXaWxsIG5vdCBhc2sgZm9yIGEgcmV2aWV3IGFnYWluIHdpdGhpbiBvbmUgeWVhci5cbiAqIC0gKipVbmhhcHB5Kio6IE5vIGltbWVkaWF0ZSBhY3Rpb247IHRoZSB1c2VyIGlzIG5vdCByZWRpcmVjdGVkLiBXaWxsIG5vdCBhc2sgZm9yIGEgcmV2aWV3IGFnYWluIHdpdGhpbiBvbmUgeWVhci5cbiAqIC0gKipOb3Qgbm93Kio6IFByZXZlbnRzIHRoZSBkaWFsb2cgZnJvbSBiZWluZyBzaG93biBmb3Igb25lIG1vbnRoLlxuICpcbiAqIEByZXR1cm5zIHtQcm9taXNlPHZvaWQ+fSBSZXNvbHZlcyBhZnRlciB0aGUgdXNlciBtYWtlcyBhIHNlbGVjdGlvbiBhbmQgYXNzb2NpYXRlZCBhY3Rpb25zIGFyZSBjb21wbGV0ZWQuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzaG93QXBwUmF0aW5nRGlhbG9nKCk6IFByb21pc2U8dm9pZD4ge1xuXHRjb25zdCBzZWxlY3RlZFZhbHVlOiBBcHBSYXRpbmdWYWx1ZSA9IGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG5cdFx0Y29uc3QgY2hvb3NlID0gKGNob2ljZTogQXBwUmF0aW5nVmFsdWUpID0+IHtcblx0XHRcdGRpYWxvZy5jbG9zZSgpXG5cdFx0XHRzZXRUaW1lb3V0KCgpID0+IHJlc29sdmUoY2hvaWNlKSwgRGVmYXVsdEFuaW1hdGlvblRpbWUpXG5cdFx0fVxuXG5cdFx0Y29uc3QgaGVhZGVyQmFyUHJvcHM6IERpYWxvZ0hlYWRlckJhckF0dHJzID0ge1xuXHRcdFx0cmlnaHQ6IFtcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGxhYmVsOiBcIm5vdE5vd19sYWJlbFwiLFxuXHRcdFx0XHRcdGNsaWNrOiAoKSA9PiBjaG9vc2UoQXBwUmF0aW5nVmFsdWUuTm90Tm93KSxcblx0XHRcdFx0XHR0eXBlOiBCdXR0b25UeXBlLlNlY29uZGFyeSxcblx0XHRcdFx0fSxcblx0XHRcdF0sXG5cdFx0fVxuXG5cdFx0Y29uc3QgY29sdW1uQ2xhc3MgPSBcIi5mbGV4LWhhbGYub3ZlcmZsb3ctaGlkZGVuXCJcblxuXHRcdGNvbnN0IGRpYWxvZyA9IG5ldyBEaWFsb2coRGlhbG9nVHlwZS5FZGl0U21hbGwsIHtcblx0XHRcdHZpZXc6ICgpID0+XG5cdFx0XHRcdG0oXCJcIiwgW1xuXHRcdFx0XHRcdG0oXCIuZGlhbG9nLWhlYWRlci5wbHItbC5mbGV4LXNwYWNlLWJldHdlZW4uZGlhbG9nLWhlYWRlci1saW5lLWhlaWdodFwiLCBbXG5cdFx0XHRcdFx0XHRtKGNvbHVtbkNsYXNzICsgXCIubWwtbmVnYXRpdmUtc1wiKSxcblx0XHRcdFx0XHRcdG0oXG5cdFx0XHRcdFx0XHRcdGNvbHVtbkNsYXNzICsgXCIubXItbmVnYXRpdmUtcy5mbGV4Lmp1c3RpZnktZW5kXCIsXG5cdFx0XHRcdFx0XHRcdHJlc29sdmVNYXliZUxhenkobmV2ZXJOdWxsKGhlYWRlckJhclByb3BzLnJpZ2h0KSkubWFwKChhKSA9PiBtKEJ1dHRvbiwgYSkpLFxuXHRcdFx0XHRcdFx0KSxcblx0XHRcdFx0XHRdKSxcblx0XHRcdFx0XHRtKFxuXHRcdFx0XHRcdFx0XCIucGxyLWwucGItbWwudGV4dC1icmVha1wiLFxuXHRcdFx0XHRcdFx0bShcIi5mbGV4LmZsZXgtY29sdW1uXCIsIFtcblx0XHRcdFx0XHRcdFx0bShcblx0XHRcdFx0XHRcdFx0XHRcIiNkaWFsb2ctbWVzc2FnZS5kaWFsb2ctbWF4LWhlaWdodC50ZXh0LWJyZWFrLnRleHQtcHJld3JhcC5zZWxlY3RhYmxlLnNjcm9sbFwiLFxuXHRcdFx0XHRcdFx0XHRcdG0oXG5cdFx0XHRcdFx0XHRcdFx0XHRcIlwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0bShcblx0XHRcdFx0XHRcdFx0XHRcdFx0XCIuZmxleC1jZW50ZXIubXQtbVwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRtKFwiaW1nLnBiLnB0LmJsb2NrLmhlaWdodC0xMDBwXCIsIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzcmM6IGAke3dpbmRvdy50dXRhby5hcHBTdGF0ZS5wcmVmaXhXaXRob3V0RmlsZX0vaW1hZ2VzL3JhdGluZy8ke2NsaWVudC5pc0NhbGVuZGFyQXBwKCkgPyBcImNhbGVuZGFyXCIgOiBcIm1haWxcIn0ucG5nYCxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRhbHQ6IFwiXCIsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0cmVsOiBcIm5vcmVmZXJyZXJcIixcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRsb2FkaW5nOiBcImxhenlcIixcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRkZWNvZGluZzogXCJhc3luY1wiLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHN0eWxlOiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR3aWR0aDogXCI4MCVcIixcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9KSxcblx0XHRcdFx0XHRcdFx0XHRcdCksXG5cdFx0XHRcdFx0XHRcdFx0XHRtKFwiaDEudGV4dC1jZW50ZXJcIiwgbGFuZy5nZXQoXCJyYXRpbmdIb3dBcmVXZURvaW5nX3RpdGxlXCIpKSxcblx0XHRcdFx0XHRcdFx0XHRcdG0oXCJwLnRleHQtY2VudGVyXCIsIGxhbmcuZ2V0KFwicmF0aW5nRXhwbGFuYXRpb25fbXNnXCIpKSxcblx0XHRcdFx0XHRcdFx0XHQpLFxuXHRcdFx0XHRcdFx0XHQpLFxuXHRcdFx0XHRcdFx0XHRtKFxuXHRcdFx0XHRcdFx0XHRcdFwiLmZsZXguZmxleC1jb2x1bW4ubXRcIixcblx0XHRcdFx0XHRcdFx0XHR7IHN0eWxlOiB7IGdhcDogXCIxZW1cIiB9IH0sXG5cdFx0XHRcdFx0XHRcdFx0bShCYXNlQnV0dG9uLCB7XG5cdFx0XHRcdFx0XHRcdFx0XHRsYWJlbDogXCJyYXRpbmdMb3ZlSXRfbGFiZWxcIixcblx0XHRcdFx0XHRcdFx0XHRcdHRleHQ6IGxhbmcuZ2V0KFwicmF0aW5nTG92ZUl0X2xhYmVsXCIpLFxuXHRcdFx0XHRcdFx0XHRcdFx0b25jbGljazogKCkgPT4gY2hvb3NlKEFwcFJhdGluZ1ZhbHVlLkhhcHB5KSxcblx0XHRcdFx0XHRcdFx0XHRcdGNsYXNzOiBgZnVsbC13aWR0aCBib3JkZXItcmFkaXVzLXNtYWxsIGNlbnRlciBiIGZsYXNoIGFjY2VudC1iZyBidXR0b24tY29udGVudGAsXG5cdFx0XHRcdFx0XHRcdFx0XHRzdHlsZToge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRoZWlnaHQ6IHB4KHNpemUuYnV0dG9uX2hlaWdodCArIHNpemUudnBhZF94cyAqIDEuNSksXG5cdFx0XHRcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0XHRcdH0gc2F0aXNmaWVzIEJhc2VCdXR0b25BdHRycyksXG5cblx0XHRcdFx0XHRcdFx0XHRtKEJhc2VCdXR0b24sIHtcblx0XHRcdFx0XHRcdFx0XHRcdGxhYmVsOiBcInJhdGluZ05lZWRzV29ya19sYWJlbFwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0dGV4dDogbGFuZy5nZXQoXCJyYXRpbmdOZWVkc1dvcmtfbGFiZWxcIiksXG5cdFx0XHRcdFx0XHRcdFx0XHRvbmNsaWNrOiAoKSA9PiBjaG9vc2UoQXBwUmF0aW5nVmFsdWUuVW5oYXBweSksXG5cdFx0XHRcdFx0XHRcdFx0XHRjbGFzczogYGZ1bGwtd2lkdGggYm9yZGVyLXJhZGl1cy1zbWFsbCBjZW50ZXIgYiBmbGFzaGAsXG5cdFx0XHRcdFx0XHRcdFx0XHRzdHlsZToge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRib3JkZXI6IGAycHggc29saWQgJHt0aGVtZS5jb250ZW50X2FjY2VudH1gLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRoZWlnaHQ6IHB4KHNpemUuYnV0dG9uX2hlaWdodCArIHNpemUudnBhZF94cyAqIDEuNSksXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNvbG9yOiB0aGVtZS5jb250ZW50X2FjY2VudCxcblx0XHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0fSBzYXRpc2ZpZXMgQmFzZUJ1dHRvbkF0dHJzKSxcblx0XHRcdFx0XHRcdFx0KSxcblx0XHRcdFx0XHRcdF0pLFxuXHRcdFx0XHRcdCksXG5cdFx0XHRcdF0pLFxuXHRcdH0pLmFkZFNob3J0Y3V0KHtcblx0XHRcdGhlbHA6IFwiY2xvc2VfYWx0XCIsXG5cdFx0XHRrZXk6IEtleXMuRVNDLFxuXHRcdFx0ZXhlYzogKCkgPT4gY2hvb3NlKEFwcFJhdGluZ1ZhbHVlLk5vdE5vdyksXG5cdFx0fSlcblxuXHRcdGRpYWxvZy5zaG93KClcblx0fSlcblxuXHRoYW5kbGVSYXRpbmdEaWFsb2dTZWxlY3Rpb24oc2VsZWN0ZWRWYWx1ZSlcbn1cblxuZnVuY3Rpb24gaGFuZGxlUmF0aW5nRGlhbG9nU2VsZWN0aW9uKHNlbGVjdGVkVmFsdWU6IEFwcFJhdGluZ1ZhbHVlKSB7XG5cdHN3aXRjaCAoc2VsZWN0ZWRWYWx1ZSkge1xuXHRcdGNhc2UgQXBwUmF0aW5nVmFsdWUuVW5oYXBweTpcblx0XHRcdGRldmljZUNvbmZpZy5zZXRMYXN0UmF0aW5nUHJvbXB0ZWREYXRlKG5ldyBEYXRlKCkpXG5cdFx0XHRicmVha1xuXHRcdGNhc2UgQXBwUmF0aW5nVmFsdWUuTm90Tm93OlxuXHRcdFx0Ly8gQXNrIGFnYWluIGluIG1pbmltdW0gb25lIG1vbnRoIGZyb20gbm93LlxuXHRcdFx0ZGV2aWNlQ29uZmlnLnNldFJldHJ5UmF0aW5nUHJvbXB0QWZ0ZXIoRGF0ZVRpbWUubm93KCkucGx1cyh7IG1vbnRoczogMSB9KS50b0pTRGF0ZSgpKVxuXHRcdFx0YnJlYWtcblx0XHRjYXNlIEFwcFJhdGluZ1ZhbHVlLkhhcHB5OiB7XG5cdFx0XHRkZXZpY2VDb25maWcuc2V0TGFzdFJhdGluZ1Byb21wdGVkRGF0ZShuZXcgRGF0ZSgpKVxuXG5cdFx0XHR2b2lkIGxvY2F0b3Iuc3lzdGVtRmFjYWRlLnJlcXVlc3RJbkFwcFJhdGluZygpXG5cdFx0XHRicmVha1xuXHRcdH1cblx0fVxufVxuXG4vKipcbiAqIElmIHRoZSBjbGllbnQgaXMgb24gaU9TLCB3ZSBzYXZlIHRoZSBjdXJyZW50IGRhdGUgYXMgYW4gZXZlbnQgdG8gZGV0ZXJtaW5lIGlmIHdlIHdhbnQgdG8gdHJpZ2dlciBhIFwicmF0ZSBUdXRhXCIgZGlhbG9nLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlUmF0aW5nQnlFdmVudCgpIHtcblx0Y29uc3QgaXNUaGVJT1NBcHAgPSBpc0lPU0FwcCgpXG5cblx0aWYgKGlzVGhlSU9TQXBwKSB7XG5cdFx0Y3JlYXRlRXZlbnQoZGV2aWNlQ29uZmlnKVxuXHR9XG5cblx0Y29uc3Qgbm93ID0gbmV3IERhdGUoKVxuXG5cdGlmICgoYXdhaXQgZ2V0UmF0aW5nQWxsb3dlZChub3csIGRldmljZUNvbmZpZywgaXNUaGVJT1NBcHApKSA9PT0gUmF0aW5nQ2hlY2tSZXN1bHQuUkFUSU5HX0FMTE9XRUQpIHtcblx0XHRpZiAoaXNFdmVudEhhcHB5TW9tZW50KG5vdywgZGV2aWNlQ29uZmlnKSkge1xuXHRcdFx0dm9pZCBzaG93QXBwUmF0aW5nRGlhbG9nKClcblx0XHR9XG5cdH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQUlPLFNBQVMsWUFBWUEsZ0JBQWtDO0NBQzdELE1BQU1DLGtCQUEwQjtDQUNoQyxJQUFJLFNBQVMsZUFBYSxXQUFXLENBQUMsT0FBTyxDQUFDLFVBQVUsa0JBQWtCLElBQUksUUFB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