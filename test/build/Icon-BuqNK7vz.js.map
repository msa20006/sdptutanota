{"version":3,"file":"Icon-BuqNK7vz.js","names":["event: MouseEvent","icon: Children","selector?: string","vnode: VnodeDOM<BaseButtonAttrs, this>","value: boolean | null | undefined","buttonColors: ButtonColor | null | undefined","type: ButtonType","BootIconsSvg: Record<BootIcons, string>","vnode: VnodeDOM<IconAttrs>","vnode: Vnode<IconAttrs>","e: MouseEvent & { redraw: boolean }","vnode","root: HTMLElement","tooltip: HTMLElement","args: { icon: AllIcons; parameters?: Record<string, string> }","style: Record<string, any> | null","attrs: IconAttrs"],"sources":["../../src/common/gui/base/buttons/BaseButton.ts","../../src/common/gui/base/Button.ts","../../src/common/gui/base/icons/BootIcons.ts","../../src/common/gui/base/Icon.ts"],"sourcesContent":["import m, { Children, ClassComponent, Vnode, VnodeDOM } from \"mithril\"\nimport { ClickHandler } from \"../GuiUtils.js\"\nimport { assertNotNull } from \"@tutao/tutanota-utils\"\nimport { TabIndex } from \"../../../api/common/TutanotaConstants.js\"\nimport { AriaRole } from \"../../AriaUtils.js\"\nimport { lang, Translation, TranslationKey, MaybeTranslation } from \"../../../misc/LanguageViewModel.js\"\n\n// `staticRightText` to be passed as a child\nexport interface BaseButtonAttrs {\n\t/** accessibility & tooltip description */\n\tlabel: MaybeTranslation\n\t/** visible text inside button */\n\ttext?: Children\n\ticon?: Children\n\tdisabled?: boolean\n\tpressed?: boolean\n\t/** whether the button is visibly highlighted or not for screen readers */\n\tselected?: boolean\n\tonclick: ClickHandler\n\tonkeydown?: (event: KeyboardEvent) => unknown\n\tstyle?: Record<string, any>\n\tclass?: string\n\trole?: AriaRole\n\ticonWrapperSelector?: string\n}\n\nexport class BaseButton implements ClassComponent<BaseButtonAttrs> {\n\tprivate dom: HTMLElement | null = null\n\n\tview({ attrs, children }: Vnode<BaseButtonAttrs, this>): Children | void | null {\n\t\tconst disabled = attrs.disabled ? true : null\n\t\tconst pressed = booleanToAttributeValue(attrs.pressed)\n\t\tconst selected = booleanToAttributeValue(attrs.selected)\n\t\treturn m(\n\t\t\t\"button\",\n\t\t\t{\n\t\t\t\ttitle: lang.getTranslationText(attrs.label),\n\t\t\t\tdisabled,\n\t\t\t\t\"aria-disabled\": disabled,\n\t\t\t\tpressed,\n\t\t\t\t\"aria-pressed\": pressed,\n\t\t\t\t\"aria-selected\": selected,\n\t\t\t\tonclick: (event: MouseEvent) => attrs.onclick(event, assertNotNull(this.dom)),\n\t\t\t\tonkeydown: attrs.onkeydown,\n\t\t\t\tclass: attrs.class,\n\t\t\t\tstyle: attrs.style,\n\t\t\t\trole: attrs.role,\n\t\t\t\t\"data-testid\": `btn:${lang.getTestId(attrs.label)}`,\n\t\t\t},\n\t\t\t[attrs.icon ? this.renderIcon(attrs.icon, attrs.iconWrapperSelector) : null, attrs.text ?? null, children],\n\t\t)\n\t}\n\n\tprivate renderIcon(icon: Children, selector?: string): Children {\n\t\treturn m(selector ?? \"span\", { ariaHidden: true, tabindex: TabIndex.Programmatic }, icon)\n\t}\n\n\toncreate(vnode: VnodeDOM<BaseButtonAttrs, this>): any {\n\t\tthis.dom = vnode.dom as HTMLElement\n\t}\n}\n\nfunction booleanToAttributeValue(value: boolean | null | undefined): string | null {\n\treturn value != null ? String(value) : null\n}\n","import m, { Children, ClassComponent, CVnode } from \"mithril\"\nimport type { Translation, TranslationKey, MaybeTranslation } from \"../../misc/LanguageViewModel\"\nimport { lang } from \"../../misc/LanguageViewModel\"\nimport { getElevatedBackground, theme } from \"../theme\"\nimport type { lazy } from \"@tutao/tutanota-utils\"\nimport { noOp } from \"@tutao/tutanota-utils\"\nimport type { ClickHandler } from \"./GuiUtils\"\nimport { assertMainOrNode } from \"../../api/common/Env\"\nimport { BaseButton } from \"./buttons/BaseButton.js\"\n\nassertMainOrNode()\n\nexport const enum ButtonType {\n\tPrimary = \"primary\",\n\tSecondary = \"secondary\",\n}\n\nexport const enum ButtonColor {\n\tNav = \"nav\",\n\tContent = \"content\",\n\tElevated = \"elevated\",\n\tDrawerNav = \"drawernav\",\n\tFab = \"fab\",\n}\n\nexport function getColors(buttonColors: ButtonColor | null | undefined): {\n\tborder: string\n\tbutton: string\n} {\n\tswitch (buttonColors) {\n\t\tcase ButtonColor.Nav:\n\t\t\treturn {\n\t\t\t\tbutton: theme.navigation_button,\n\t\t\t\tborder: theme.navigation_bg,\n\t\t\t}\n\n\t\tcase ButtonColor.DrawerNav:\n\t\t\treturn {\n\t\t\t\tbutton: theme.content_button,\n\t\t\t\tborder: getElevatedBackground(),\n\t\t\t}\n\n\t\tcase ButtonColor.Elevated:\n\t\t\treturn {\n\t\t\t\tbutton: theme.content_button,\n\t\t\t\tborder: getElevatedBackground(),\n\t\t\t}\n\n\t\tcase ButtonColor.Fab:\n\t\t\treturn {\n\t\t\t\tbutton: theme.content_button_icon_selected,\n\t\t\t\tborder: getElevatedBackground(),\n\t\t\t}\n\n\t\tcase ButtonColor.Content:\n\t\tdefault:\n\t\t\treturn {\n\t\t\t\tbutton: theme.content_button,\n\t\t\t\tborder: theme.content_bg,\n\t\t\t}\n\t}\n}\n\nexport interface ButtonAttrs {\n\tlabel: MaybeTranslation\n\ttitle?: MaybeTranslation\n\tclick?: ClickHandler\n\ttype: ButtonType\n\tcolors?: ButtonColor\n}\n\n/**\n * A button.\n */\nexport class Button implements ClassComponent<ButtonAttrs> {\n\tview({ attrs }: CVnode<ButtonAttrs>): Children {\n\t\tlet classes = this.resolveClasses(attrs.type)\n\n\t\treturn m(BaseButton, {\n\t\t\tlabel: attrs.title == null ? attrs.label : attrs.title,\n\t\t\ttext: lang.getTranslationText(attrs.label),\n\t\t\tclass: classes.join(\" \"),\n\t\t\tstyle: {\n\t\t\t\tborderColor: getColors(attrs.colors).border,\n\t\t\t},\n\t\t\tonclick: attrs.click ?? noOp,\n\t\t})\n\t}\n\n\tprivate resolveClasses(type: ButtonType) {\n\t\tlet classes = [\n\t\t\t\"limit-width\",\n\t\t\t\"noselect\",\n\t\t\t\"bg-transparent\",\n\t\t\t\"button-height\",\n\t\t\t\"text-ellipsis\",\n\t\t\t\"content-accent-fg\",\n\t\t\t\"flex\",\n\t\t\t\"items-center\",\n\t\t\t\"justify-center\",\n\t\t\t\"flash\",\n\t\t]\n\n\t\tif (type === ButtonType.Primary) {\n\t\t\tclasses.push(\"b\")\n\t\t} else {\n\t\t\tclasses.push(\"plr-button\", \"button-content\")\n\t\t}\n\n\t\treturn classes\n\t}\n}\n","// DO NOT EDIT: generated by update-icons script\nimport { assertMainOrNode } from \"../../../api/common/Env\"\n\nassertMainOrNode()\n\nexport const enum BootIcons {\n\tAndroid = \"Android\",\n\tFDroid = \"FDroid\",\n\tApple = \"Apple\",\n\tBack = \"Back\",\n\tCheckbox = \"Checkbox\",\n\tCheckboxSelected = \"CheckboxSelected\",\n\tContacts = \"Contacts\",\n\tExpand = \"Expand\",\n\tHelp = \"Help\",\n\tLogout = \"Logout\",\n\tMoreVertical = \"MoreVertical\",\n\tPremium = \"Premium\",\n\tProgress = \"Progress\",\n\tSearch = \"Search\",\n\tSettings = \"Settings\",\n\tShare = \"Share\",\n\tCalendar = \"Calendar\",\n\tHeart = \"Heart\",\n\tMail = \"Mail\",\n}\n\nexport const BootIconsSvg: Record<BootIcons, string> = Object.freeze({\n\tAndroid: `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"512\" height=\"512\" viewBox=\"0 0 512 512\"><path d=\"M144 268.4V358c0 6.9 4.5 14 11.4 14H184v52c0 13.3 10.7 24 24 24s24-10.7 24-24v-52h49v52c0 7.5 3.4 14.2 8.8 18.6 3.9 3.4 9.1 5.4 14.7 5.4h.5c13.3 0 24-10.7 24-24v-52h27.6c7 0 11.4-7.1 11.4-13.9V192H144zM408 176c-13.3 0-24 10.7-24 24v96c0 13.3 10.7 24 24 24s24-10.7 24-24v-96c0-13.3-10.7-24-24-24m-304 0c-13.3 0-24 10.7-24 24v96c0 13.3 10.7 24 24 24s24-10.7 24-24v-96c0-13.3-10.7-24-24-24\"/><g><path d=\"m311.2 89.1 18.5-21.9c.4-.5-.2-1.6-1.3-2.5-1.1-.8-2.4-1-2.7-.4l-19.2 22.8c-13.6-5.4-30.2-8.8-50.6-8.8-20.5-.1-37.2 3.2-50.8 8.5l-19-22.4c-.4-.5-1.6-.4-2.7.4s-1.7 1.8-1.3 2.5l18.3 21.6c-48.2 20.9-55.4 72.2-56.4 87.2h223.6c-.9-15.1-8-65.7-56.4-87m-104.4 49.8c-7.4 0-13.5-6-13.5-13.3s6-13.3 13.5-13.3c7.4 0 13.5 6 13.5 13.3s-6 13.3-13.5 13.3m98.4 0c-7.4 0-13.5-6-13.5-13.3s6-13.3 13.5-13.3c7.4 0 13.5 6 13.5 13.3s-6.1 13.3-13.5 13.3\"/></g></svg>`,\n\tFDroid: `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"512\" height=\"512\" viewBox=\"0 0 512 512\"><path d=\"M81.402 73.255c-10.06-.624-13.96 13.19-6.346 19.024l27.453 35.526c-3.262 15.417-.905 31.532-1.621 47.255.325 13.533-2.84 30.495 10.771 38.942 12.66 7.21 27.859 3.064 41.77 4.171 78.494-.201 156.995.201 235.482-.201 15.67-1.047 24.156-17.337 21.964-31.625-.5-18.825 1.071-37.841-.927-56.53-.183-6.273 7.618-11.187 10.748-16.895 6.367-9.417 15.344-17.437 19.99-27.786 2.464-10.674-13.64-16.624-18.851-7.054l-27.31 35.343c-16.655-2.837-33.854-.725-50.746-1.369-73.51.202-147.026-.2-220.534.202-8.765 4.35-11.363-7.982-16.815-12.697-7.22-8.23-12.522-18.54-21.071-25.346a10.7 10.7 0 0 0-3.957-.926zm95.964 69.458c22.49-1.167 36.44 28.817 21.057 45.268-13.6 17.962-45.512 9.304-48.189-13.056-3.219-16.292 10.515-32.62 27.132-32.212m159.07 0c22.49-1.167 36.44 28.817 21.058 45.268-13.6 17.962-45.512 9.304-48.189-13.056-3.219-16.292 10.515-32.62 27.132-32.212zM125.362 226.33c-16.083-.563-26.925 15.783-24.473 30.707.082 53.14-.167 106.29.127 159.423 1.047 15.67 17.336 24.155 31.624 21.964 85.423-.201 170.855.202 256.273-.201 15.67-1.046 24.156-17.336 21.964-31.622-.082-52.794.167-105.598-.127-158.383-1.047-15.67-17.337-24.156-31.624-21.962H125.361zm130.52 28.143c50.52-1.911 91.125 53.273 74.425 100.926-13.105 48.8-77.81 71.37-118.413 41.274-42.763-26.942-45.186-95.422-4.436-125.32 13.63-10.873 30.991-16.924 48.423-16.88zm0 26.92c-22.48-.342-43.719 16.164-49.215 37.935h26.209c9.87-20.115 42.902-16.457 48.338 5.11 7.02 19.26-13.568 40.224-32.971 33.353-11.96-4.099-15.538-18.264-29.773-13.99-12.56-2.928-14.18 3.948-6.736 13.887 14.28 26.842 53.683 34.275 76.518 13.983 24.563-18.828 24.564-59.762 0-78.59-9.008-7.492-20.645-11.732-32.37-11.688\"/></svg>`,\n\tApple: `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"512\" height=\"512\" viewBox=\"0 0 512 512\"><path d=\"M333.6 153.9c-33.6 0-47.8 16.5-71.2 16.5-24 0-42.3-16.4-71.4-16.4-28.5 0-58.9 17.9-78.2 48.4-27.1 43-22.5 124 21.4 193 15.7 24.7 36.7 52.4 64.2 52.7h.5c23.9 0 31-16.1 63.9-16.3h.5c32.4 0 38.9 16.2 62.7 16.2h.5c27.5-.3 49.6-31 65.3-55.6 11.3-17.7 15.5-26.6 24.2-46.6-63.5-24.8-73.7-117.4-10.9-152.9-19.2-24.7-46.1-39-71.5-39\"/><path d=\"M326.2 64c-20 1.4-43.3 14.5-57 31.6-12.4 15.5-22.6 38.5-18.6 60.8h1.6c21.3 0 43.1-13.2 55.8-30.1 12.3-16.1 21.6-38.9 18.2-62.3\"/></svg>`,\n\tBack: `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"512\" height=\"512\" viewBox=\"0 0 512 512\"><path d=\"M352 128.4 319.7 96 160 256l159.7 160 32.3-32.4L224.7 256z\"/></svg>`,\n\tCheckbox: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\"><path d=\"M216 357c.4 0 .4-.1 0-.2-.4.1-.5.2 0 .2\"/><path d=\"M432 80v352H80V80zm16-16H64v384h384z\"/></svg>`,\n\tCheckboxSelected: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\"><path d=\"M216 357c.4 0 .4-.1 0-.2-.4.1-.5.2 0 .2m124.1-179.7L215.3 303l-47.2-47.2-17.9 17.8 65.1 65 142.3-143.2z\"/><path d=\"M432 80v352H80V80zm16-16H64v384h384z\"/></svg>`,\n\tContacts: `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"512\" height=\"512\" viewBox=\"0 0 512 512\"><path d=\"M256 256c52.805 0 96-43.2 96-96s-43.195-96-96-96-96 43.2-96 96 43.195 96 96 96m0 48c-63.598 0-192 32.402-192 96v48h384v-48c0-63.598-128.402-96-192-96\"/></svg>`,\n\tExpand: `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"512\" height=\"512\" viewBox=\"0 0 512 512\"><path d=\"m128 192 128 128 128-128z\"/></svg>`,\n\tHelp: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\"><path d=\"M256 48C141.2 48 48 141.2 48 256s93.2 208 208 208 208-93.2 208-208S370.8 48 256 48m21 333h-42v-42h42zm-.2-63h-41.6c0-67 62.4-62.2 62.4-103.8 0-22.9-18.7-41.7-41.6-41.7S214.4 192 214.4 214h-41.6c0-46 37.2-83 83.2-83s83.2 37.1 83.2 83.1c0 52-62.4 57.9-62.4 103.9\"/></svg>`,\n\tLogout: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\"><path d=\"M192 277.4h189.7l-43.6 44.7L368 352l96-96-96-96-31 29.9 44.7 44.7H192z\"/><path d=\"M255.7 421.3c-44.1 0-85.5-17.2-116.7-48.4S90.7 300.2 90.7 256c0-44.1 17.2-85.7 48.3-116.9 31.2-31.2 72.6-48.4 116.7-48.4 44 0 85.3 17.1 116.5 48.2l30.3-30.3c-8.5-8.4-17.8-16.2-27.7-23.2C339.7 61 298.6 48 255.7 48 141.2 48 48 141.3 48 256s93.2 208 207.7 208c42.9 0 84-13 119-37.5 10-7 19.2-14.7 27.7-23.2l-30.2-30.2c-31.1 31.1-72.5 48.2-116.5 48.2m192.304-164.453-.85-.848.85-.85.848.85z\"/></svg>`,\n\tMoreVertical: `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"512\" height=\"512\" viewBox=\"0 0 512 512\"><path d=\"M64 384h384v-42.666H64zm0-106.666h384v-42.667H64zM64 128v42.665h384V128z\"/></svg>`,\n\tPremium: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\"><path d=\"M392 105c.9-27 .2-56 .1-57H119.3c0 1-.8 30 .1 57H48c0 68 9.9 102.3 21 126.7S95.4 277 127.7 302c30.1 23.3 95.5 53.6 104.3 57.6v28.3c-4.6 10-23.5 28.2-83.3 28.2H128v48h256v-48h-25.7c-60.7 0-75-19.1-78.3-28.2v-28.3c9.3-4.6 80.9-40.3 104.4-57.5 25.2-18.4 50.9-51.5 58.7-70.3S464 167 464 105zM109.6 211.9c-8.8-18.2-14-37.9-15.7-61.9h28.7c.7 6 1.4 11.3 2.3 16.3 6.6 39.2 14.8 70.2 25.7 96.5-17.3-13.5-31.3-30.8-41-50.9m292.8 0c-9.9 20.3-24 37.7-41.6 51.3 11-26.2 19-56.8 25.8-96.9.8-5 1.6-10.3 2.3-16.3h29.3c-1.8 24-6.9 43.7-15.8 61.9\"/></svg>`,\n\tProgress: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\"><path d=\"m493.4 256-31.8 31.8c9.7-63-9.8-130.2-58.5-178.9-81.2-81.2-213-81.3-294.2 0-16.3 16.3-29.3 34.5-39 54l15.5 7.8c8.9-17.9 20.8-34.7 35.7-49.6 74.3-74.3 195.3-74.3 269.7.1 45.6 45.6 63.2 108.6 52.9 168L409.6 256l-10.8 10.8L452 320l52.7-52.7zM390.8 390.8c-74.3 74.3-195.3 74.4-269.7 0C75.6 345.2 58 281.9 68.3 222.9l33.1 33.1 11.3-11.3L60 192 7.3 244.7 18.6 256l31.8-31.8c-9.8 63.4 9.7 130.2 58.4 178.9 81.2 81.2 213 81.2 294.2 0 16.3-16.3 29.3-34.6 39-54l-15.5-7.8c-8.9 17.9-20.8 34.6-35.7 49.5\"/></svg>`,\n\tSearch: `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"512\" height=\"512\" viewBox=\"0 0 512 512\"><path d=\"M344.5 298c15-23.6 23.8-51.6 23.8-81.7 0-84.1-68.1-152.3-152.1-152.3C132.1 64 64 132.2 64 216.3s68.1 152.3 152.1 152.3c30.5 0 58.9-9 82.7-24.4l6.9-4.8L414.3 448l33.7-34.3-108.5-108.6zm-43.1-166.8c22.7 22.7 35.2 52.9 35.2 85s-12.5 62.3-35.2 85-52.9 35.2-85 35.2-62.3-12.5-85-35.2-35.2-52.9-35.2-85 12.5-62.3 35.2-85 52.9-35.2 85-35.2 62.3 12.5 85 35.2\"/></svg>`,\n\tSettings: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\"><path d=\"M411.1 256c0-23.9 14.8-42.8 36.9-55.8-4-13.3-9.3-26.2-15.8-38.2-24.9 6.5-45-3.2-62-20.2-16.9-16.9-22.1-37.1-15.6-62-12-6.5-24.8-11.8-38.2-15.8-13 22.2-36.4 36.9-60.4 36.9-23.9 0-47.4-14.7-60.4-36.9-13.4 4-26.2 9.3-38.2 15.8 6.5 24.9 1.3 45-15.6 62-16.9 16.9-37.1 26.7-61.9 20.2-6.6 12-11.9 24.8-15.9 38.2 22.2 13 37 31.9 37 55.8s-14.8 47.4-37 60.4c4 13.4 9.3 26.2 15.8 38.2 24.9-6.5 45-1.3 61.9 15.6 17 16.9 22.1 37.1 15.6 62 12.1 6.5 24.8 11.8 38.2 15.8 13-22.2 36.5-36.9 60.4-36.9s47.4 14.7 60.4 36.9c13.4-4 26.2-9.3 38.2-15.8-6.5-24.9-1.3-45 15.6-62 16.9-16.9 37.1-26.7 62-20.2 6.5-12.1 11.8-24.9 15.8-38.2-22.1-13-36.8-31.9-36.8-55.8M256 352c-52.9 0-96-43-96-96s43-96 96-96 96 43 96 96-43 96-96 96\"/></svg>`,\n\tShare: `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"512\" height=\"512\" viewBox=\"0 0 512 512\"><path d=\"M383.822 344.427c-16.045 0-31.024 5.326-41.72 15.98l-152.958-88.42c1.07-5.33 2.142-9.594 2.142-14.92 0-5.328-1.07-9.593-2.142-14.92l150.826-87.35c11.762 10.654 26.74 17.042 43.852 17.042 35.295 0 64.178-28.767 64.178-63.92S419.117 44 383.822 44c-35.297 0-64.18 28.767-64.18 63.92 0 5.327 1.066 9.593 2.143 14.92l-150.82 87.35c-11.768-10.655-26.742-17.042-43.857-17.042-35.296 0-63.108 28.766-63.108 63.92 0 35.153 28.877 63.92 64.178 63.92 17.115 0 32.09-6.39 43.856-17.042l151.89 88.42c-1.075 4.256-2.14 8.522-2.14 13.848 0 34.094 27.806 61.787 62.037 61.787s62.037-27.692 62.037-61.786-27.805-61.787-62.035-61.787z\"/></svg>`,\n\tCalendar: `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"512\" height=\"512\" viewBox=\"0 0 512 512\"><path d=\"M368.005 272h-96v96h96zm-32-208v32h-160V64h-48v32h-24.01c-22.002 0-40 17.998-40 40v272c0 22.002 17.998 40 40 40h304.01c22.002 0 40-17.998 40-40V136c0-22.002-17.998-40-40-40h-24V64zm72 344h-304.01V196h304.01z\"/></svg>`,\n\tHeart: `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"512\" height=\"512\" viewBox=\"0 0 512 512\"><path d=\"m256 448-30.164-27.21C118.718 322.44 48 258.61 48 179.094 48 114.22 97.918 64 162.4 64c36.4 0 70.717 16.742 93.6 43.947C278.882 80.742 313.2 64 349.6 64 414.082 64 464 114.22 464 179.095c0 79.516-70.72 143.348-177.836 241.694z\"/></svg>`,\n\tMail: `<svg xmlns=\"http://www.w3.org/2000/svg\" class=\"ionicon\" viewBox=\"0 0 512 512\"><path d=\"M424 80H88a56.06 56.06 0 0 0-56 56v240a56.06 56.06 0 0 0 56 56h336a56.06 56.06 0 0 0 56-56V136a56.06 56.06 0 0 0-56-56m-14.18 92.63-144 112a16 16 0 0 1-19.64 0l-144-112a16 16 0 1 1 19.64-25.26L256 251.73l134.18-104.36a16 16 0 0 1 19.64 25.26\"/></svg>`,\n} as const)\n","import m, { Children, Component, Vnode, VnodeDOM } from \"mithril\"\nimport { theme } from \"../theme\"\nimport type { lazy } from \"@tutao/tutanota-utils\"\nimport { memoized } from \"@tutao/tutanota-utils\"\nimport { assertMainOrNode } from \"../../api/common/Env\"\nimport { BootIcons, BootIconsSvg } from \"./icons/BootIcons\"\nimport { Icons } from \"./icons/Icons\"\nimport { px, size } from \"../size.js\"\n\nassertMainOrNode()\n\nexport type AllIcons = BootIcons | Icons\n\nexport enum IconSize {\n\tNormal,\n\tMedium,\n\tLarge,\n\tXL,\n}\n\nexport type IconAttrs = {\n\ticon: AllIcons\n\tsvgParameters?: Record<string, string>\n\tclass?: string\n\tsize?: IconSize\n\tstyle?: Record<string, any>\n\thoverText?: string | null\n\tcontainer?: \"span\" | \"div\" // defaults to \"span\"\n\ttitle?: string // if you want to use native tooltip\n}\n\nexport type lazyIcon = lazy<AllIcons>\n\nlet IconsSvg = {}\n\nimport(\"./icons/Icons.js\").then((IconsModule) => {\n\tIconsSvg = IconsModule.IconsSvg\n})\n\nexport class Icon implements Component<IconAttrs> {\n\tprivate root: HTMLElement | null = null\n\tprivate tooltip?: HTMLElement\n\n\toncreate(vnode: VnodeDOM<IconAttrs>): any {\n\t\tthis.root = vnode.dom as HTMLElement\n\t}\n\n\tview(vnode: Vnode<IconAttrs>): Children {\n\t\t// @ts-ignore\n\t\tconst icon = this.getIcon({ icon: vnode.attrs.icon, parameters: vnode.attrs.svgParameters })\n\t\tconst containerClasses = this.getContainerClasses(vnode.attrs)\n\n\t\treturn m(\n\t\t\tcontainerClasses,\n\t\t\t{\n\t\t\t\ttitle: vnode.attrs.title ?? null,\n\t\t\t\t\"aria-hidden\": \"true\",\n\t\t\t\tclass: this.getClass(vnode.attrs),\n\t\t\t\tstyle: this.getStyle(vnode.attrs.style ?? null),\n\t\t\t\t// mithril lets us mute the normal redraw that occurs after\n\t\t\t\t// event callbacks, but TS doesn't know\n\t\t\t\tonmouseenter: (e: MouseEvent & { redraw: boolean }) => {\n\t\t\t\t\tif (this.root && this.tooltip) {\n\t\t\t\t\t\tthis.moveElementIfOffscreen(this.root, this.tooltip)\n\t\t\t\t\t} else {\n\t\t\t\t\t\te.redraw = false\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t},\n\t\t\ticon ? m.trust(icon) : null,\n\t\t\tvnode.attrs.hoverText &&\n\t\t\t\tm(\n\t\t\t\t\t\"span.tooltiptext.max-width-m.break-word\",\n\t\t\t\t\t{\n\t\t\t\t\t\tstyle: { marginRight: \"-100vmax\" },\n\t\t\t\t\t\toncreate: (vnode) => {\n\t\t\t\t\t\t\tthis.tooltip = vnode.dom as HTMLElement\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tvnode.attrs.hoverText,\n\t\t\t\t),\n\t\t) // icon is typed, so we may not embed untrusted data\n\t}\n\n\tprivate moveElementIfOffscreen(root: HTMLElement, tooltip: HTMLElement): void {\n\t\ttooltip.style.removeProperty(\"left\")\n\t\tconst tooltipRect = tooltip.getBoundingClientRect()\n\t\t// Get the width of the area in pixels that the tooltip penetrates the viewport\n\t\tconst distanceOver = tooltipRect.x + tooltipRect.width + size.hpad_large - window.innerWidth\n\t\tif (distanceOver > 0) {\n\t\t\tconst parentRect = root.getBoundingClientRect()\n\t\t\t// Chromium based browsers return a different value for tooltipRect\n\t\t\t// Compensate by shifting further to the right\n\t\t\tconst chromeShift = 20\n\t\t\ttooltip.style.left = px(-distanceOver - parentRect.width - chromeShift)\n\t\t}\n\t}\n\n\tprivate getIcon = memoized((args: { icon: AllIcons; parameters?: Record<string, string> }) => {\n\t\t// @ts-ignore\n\t\tlet rawIcon = BootIconsSvg[args.icon] ?? IconsSvg[args.icon]\n\t\tif (typeof rawIcon !== \"string\") return null\n\t\tfor (const parameter in args.parameters) {\n\t\t\trawIcon = rawIcon.replace(`{${parameter}}`, args.parameters[parameter])\n\t\t}\n\t\treturn rawIcon as string\n\t})\n\n\tgetStyle(style: Record<string, any> | null): {\n\t\tfill: string\n\t} {\n\t\tstyle = style ? style : {}\n\n\t\tif (!style.fill) {\n\t\t\tstyle.fill = theme.content_accent\n\t\t}\n\n\t\treturn style as { fill: string }\n\t}\n\n\tgetClass(attrs: IconAttrs): string {\n\t\tlet cls = \"\"\n\t\tswitch (attrs.size) {\n\t\t\tcase IconSize.Medium:\n\t\t\t\tcls += \"icon-large \"\n\t\t\t\tbreak\n\t\t\tcase IconSize.Large:\n\t\t\t\tcls += \"icon-medium-large \"\n\t\t\t\tbreak\n\t\t\tcase IconSize.XL:\n\t\t\t\tcls += \"icon-xl \"\n\t\t\t\tbreak\n\t\t\tcase IconSize.Normal:\n\t\t\tdefault:\n\t\t\t\tbreak\n\t\t}\n\n\t\tif (attrs.class) {\n\t\t\tcls += attrs.class\n\t\t}\n\t\treturn cls\n\t}\n\n\tgetContainerClasses(attrs: IconAttrs): string {\n\t\tconst container = attrs.container || \"span\"\n\t\tlet classes = container + \".icon\"\n\t\tif (attrs.hoverText) {\n\t\t\tclasses += \".tooltip\"\n\t\t}\n\t\treturn classes\n\t}\n}\n\nexport function progressIcon(): Vnode<IconAttrs> {\n\treturn m(Icon, {\n\t\ticon: BootIcons.Progress,\n\t\tclass: \"icon-large icon-progress\",\n\t})\n}\n"],"mappings":"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"}