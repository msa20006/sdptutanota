
globalThis.env = {
  "staticUrl": "http://localhost:9000",
  "versionNumber": "264.250130.1",
  "dist": false,
  "mode": "Test",
  "timeout": 20000,
  "domainConfigs": {
    "mail.tutanota.com": {
      "firstPartyDomain": true,
      "partneredDomainTransitionUrl": "https://app.tuta.com",
      "apiUrl": "https://mail.tutanota.com",
      "paymentUrl": "https://pay.tutanota.com/braintree.html",
      "webauthnUrl": "https://app.tuta.com/webauthn",
      "legacyWebauthnUrl": "https://mail.tutanota.com/webauthn",
      "webauthnMobileUrl": "https://app.tuta.com/webauthnmobile",
      "legacyWebauthnMobileUrl": "https://mail.tutanota.com/webauthnmobile",
      "webauthnRpId": "tutanota.com",
      "u2fAppId": "https://tutanota.com/u2f-appid.json",
      "giftCardBaseUrl": "https://app.tuta.com/giftcard",
      "referralBaseUrl": "https://app.tuta.com/signup",
      "websiteBaseUrl": "https://tutanota.com"
    },
    "test.tutanota.com": {
      "firstPartyDomain": true,
      "partneredDomainTransitionUrl": "https://app.test.tuta.com",
      "apiUrl": "https://test.tutanota.com",
      "paymentUrl": "https://pay.test.tutanota.com/braintree.html",
      "webauthnUrl": "https://app.test.tuta.com/webauthn",
      "legacyWebauthnUrl": "https://test.tutanota.com/webauthn",
      "webauthnMobileUrl": "https://app.test.tuta.com/webauthnmobile",
      "legacyWebauthnMobileUrl": "https://test.tutanota.com/webauthnmobile",
      "webauthnRpId": "tutanota.com",
      "u2fAppId": "https://test.tutanota.com/u2f-appid.json",
      "giftCardBaseUrl": "https://app.test.tuta.com/giftcard",
      "referralBaseUrl": "https://app.test.tuta.com/signup",
      "websiteBaseUrl": "https://tutanota.com"
    },
    "app.local.tutanota.com": {
      "firstPartyDomain": true,
      "partneredDomainTransitionUrl": "https://app.local.tuta.com:9000",
      "apiUrl": "https://app.local.tutanota.com:9000",
      "paymentUrl": "https://local.tutanota.com:9000/client/build/braintree.html",
      "webauthnUrl": "https://app.local.tuta.com:9000/client/build/webauthn",
      "legacyWebauthnUrl": "https://local.tutanota.com:9000/client/build/webauthn",
      "webauthnMobileUrl": "https://app.local.tuta.com:9000/client/build/webauthnmobile",
      "legacyWebauthnMobileUrl": "https://local.tutanota.com:9000/client/build/webauthnmobile",
      "webauthnRpId": "tutanota.com",
      "u2fAppId": "https://local.tutanota.com/u2f-appid.json",
      "giftCardBaseUrl": "https://app.local.tuta.com:9000/giftcard",
      "referralBaseUrl": "https://app.local.tuta.com:9000/signup",
      "websiteBaseUrl": "https://local.tutanota.com:9000"
    },
    "app.tuta.com": {
      "firstPartyDomain": true,
      "partneredDomainTransitionUrl": "https://mail.tutanota.com",
      "apiUrl": "https://app.tuta.com",
      "paymentUrl": "https://pay.tutanota.com/braintree.html",
      "webauthnUrl": "https://app.tuta.com/webauthn",
      "legacyWebauthnUrl": "https://mail.tutanota.com/webauthn",
      "webauthnMobileUrl": "https://app.tuta.com/webauthnmobile",
      "legacyWebauthnMobileUrl": "https://mail.tutanota.com/webauthnmobile",
      "webauthnRpId": "tuta.com",
      "u2fAppId": "https://app.tuta.com/u2f-appid.json",
      "giftCardBaseUrl": "https://app.tuta.com/giftcard",
      "referralBaseUrl": "https://app.tuta.com/signup",
      "websiteBaseUrl": "https://tuta.com"
    },
    "app.test.tuta.com": {
      "firstPartyDomain": true,
      "partneredDomainTransitionUrl": "https://test.tutanota.com",
      "apiUrl": "https://app.test.tuta.com",
      "paymentUrl": "https://pay.test.tutanota.com/braintree.html",
      "webauthnUrl": "https://app.test.tuta.com/webauthn",
      "legacyWebauthnUrl": "https://test.tutanota.com/webauthn",
      "webauthnMobileUrl": "https://app.test.tuta.com/webauthnmobile",
      "legacyWebauthnMobileUrl": "https://test.tutanota.com/webauthnmobile",
      "webauthnRpId": "tuta.com",
      "u2fAppId": "https://app.test.tuta.com/u2f-appid.json",
      "giftCardBaseUrl": "https://app.test.tuta.com/giftcard",
      "referralBaseUrl": "https://app.test.tuta.com/signup",
      "websiteBaseUrl": "https://test.tuta.com"
    },
    "app.local.tuta.com": {
      "firstPartyDomain": true,
      "partneredDomainTransitionUrl": "https://app.local.tutanota.com:9000",
      "apiUrl": "https://app.local.tuta.com:9000",
      "paymentUrl": "https://app.local.tuta.com:9000/braintree.html",
      "webauthnUrl": "https://app.local.tuta.com:9000/webauthn",
      "legacyWebauthnUrl": "https://local.tutanota.com:9000/webauthn",
      "webauthnMobileUrl": "https://app.local.tuta.com:9000/webauthnmobile",
      "legacyWebauthnMobileUrl": "https://local.tutanota.com:9000/webauthnmobile",
      "webauthnRpId": "tuta.com",
      "u2fAppId": "https://app.local.tuta.com/u2f-appid.json",
      "giftCardBaseUrl": "https://app.local.tuta.com:9000/giftcard",
      "referralBaseUrl": "https://app.local.tuta.com:9000/signup",
      "websiteBaseUrl": "https://local.tuta.com:9000"
    },
    "localhost": {
      "firstPartyDomain": true,
      "partneredDomainTransitionUrl": "http://localhost:9000",
      "apiUrl": "http://localhost:9000",
      "paymentUrl": "http://localhost:9000/braintree.html",
      "webauthnUrl": "http://localhost:9000/webauthn",
      "legacyWebauthnUrl": "http://localhost:9000/webauthn",
      "webauthnMobileUrl": "http://localhost:9000/webauthnmobile",
      "legacyWebauthnMobileUrl": "http://localhost:9000/webauthnmobile",
      "webauthnRpId": "localhost",
      "u2fAppId": "http://localhost:9000/u2f-appid.json",
      "giftCardBaseUrl": "http://localhost:9000/giftcard",
      "referralBaseUrl": "http://localhost:9000/signup",
      "websiteBaseUrl": "https://tuta.com"
    },
    "{hostname}": {
      "firstPartyDomain": false,
      "partneredDomainTransitionUrl": "{protocol}//{hostname}",
      "apiUrl": "{protocol}//{hostname}",
      "paymentUrl": "https://pay.tutanota.com/braintree.html",
      "webauthnUrl": "{protocol}//{hostname}/webauthn",
      "legacyWebauthnUrl": "{protocol}//{hostname}/webauthn",
      "webauthnMobileUrl": "{protocol}//{hostname}/webauthnmobile",
      "legacyWebauthnMobileUrl": "{protocol}//{hostname}/webauthnmobile",
      "webauthnRpId": "{hostname}",
      "u2fAppId": "{protocol}//{hostname}/u2f-appid.json",
      "giftCardBaseUrl": "https://app.tuta.com/giftcard",
      "referralBaseUrl": "https://app.tuta.com/signup",
      "websiteBaseUrl": "https://tuta.com"
    }
  },
  "platformId": null
};
const __NODE_GYP_better_sqlite3 = `./better-sqlite3.darwin-${typeof process !== 'undefined' ? process.arch : "unknown"}.node`
import { mithril_default } from "./mithril-Csg4iNnm.js";
import { isNotNull, lazyStringValue, neverNull } from "./dist-CJHwsXKY.js";
import { assertMainOrNode, isDesktop } from "./Env-D5xGlXfw.js";
import { lang } from "./LanguageViewModel-BNC5ekpO.js";
import { px, size, stateBgHover, styles, theme } from "./HtmlUtils-C-ecR7U7.js";
import { Keys } from "./TutanotaConstants-3bwAESYA.js";
import { Button, ButtonType, Icon } from "./Icon-BuqNK7vz.js";
import { Icons } from "./Icons-Dl3nFav5.js";
import { isKeyPressed } from "./KeyManager-B0OGXEyJ.js";
import { DropType } from "./Dialog-B6-HFvZd.js";
import { fileListToArray } from "./FileUtils-W-u2-gZz.js";
import { handleUncaughtError } from "./ErrorHandler-DbW1lJbv.js";

//#region ../src/common/gui/base/NavButton.ts
assertMainOrNode();
var NavButton = class {
	_domButton;
	_draggedOver;
	_dropCounter;
	constructor() {
		this._draggedOver = false;
		this._dropCounter = 0;
	}
	view(vnode) {
		const a = vnode.attrs;
		const linkAttrs = this.createButtonAttributes(a);
		const icon = a.icon?.();
		const children = [
			a.leftInjection?.() ?? null,
			icon ? mithril_default(Icon, {
				icon,
				class: this._getIconClass(a),
				style: { fill: isNavButtonSelected(a) || this._draggedOver ? getColors(a.colors).button_selected : getColors(a.colors).button }
			}) : null,
			!a.hideLabel ? mithril_default("span.label.click.text-ellipsis" + (!a.vertical && icon ? ".pl-m" : ""), lang.getTranslationText(a.label)) : null
		];
		if (this._isExternalUrl(a.href)) return mithril_default(this._getNavButtonClass(a), linkAttrs, children);
else return mithril_default(mithril_default.route.Link, linkAttrs, children);
	}
	_getUrl(href) {
		return lazyStringValue(href);
	}
	_getNavButtonClass(a) {
		return "a.nav-button.noselect.items-center.click.plr-button.no-text-decoration.button-height.border-radius" + (a.vertical ? ".col" : "") + (!a.centred ? ".flex-start" : ".flex-center") + (a.disableHoverBackground ? "" : ".state-bg") + (a.disabled ? ".no-hover" : "") + (a.fillSpaceAround ?? true ? ".flex-no-shrink" : "");
	}
	_getIconClass(a) {
		const isSelected = isNavButtonSelected(a);
		if (a.colors === NavButtonColor.Header && !styles.isDesktopLayout()) return "flex-end items-center icon-xl" + (isSelected ? " selected" : "");
else if (a.small === true) return "flex-center items-center icon" + (isSelected ? " selected" : "");
else return "flex-center items-center icon-large" + (isSelected ? " selected" : "");
	}
	_isExternalUrl(href) {
		let url = this._getUrl(href);
		return url != null ? url.indexOf("http") === 0 : false;
	}
	createButtonAttributes(a) {
		let attr = {
			role: "button",
			href: this._getUrl(a.href),
			style: {
				color: isNavButtonSelected(a) || this._draggedOver ? getColors(a.colors).button_selected : getColors(a.colors).button,
				"font-size": a.fontSize ? px(a.fontSize) : "",
				background: isNavButtonSelected(a) && a.persistentBackground || this._draggedOver ? stateBgHover : ""
			},
			title: lang.getTranslationText(a.label),
			target: this._isExternalUrl(a.href) ? "_blank" : undefined,
			selector: this._getNavButtonClass(a),
			onclick: (e) => this.click(e, a, e.target),
			onkeyup: (e, dom) => {
				if (isKeyPressed(e.key, Keys.SPACE)) this.click(e, a, dom);
			},
			onfocus: a.onfocus,
			onblur: a.onblur,
			onkeydown: a.onkeydown,
			"data-testid": `btn:${lang.getTestId(a.label)}`
		};
		if (a.dropHandler) {
			attr.ondragenter = (ev) => {
				this._dropCounter++;
				this._draggedOver = true;
				ev.preventDefault();
			};
			attr.ondragleave = (ev) => {
				this._dropCounter--;
				if (this._dropCounter === 0) this._draggedOver = false;
				ev.preventDefault();
			};
			attr.ondragover = (ev) => {
				ev.preventDefault();
			};
			attr.ondrop = (ev) => {
				this._dropCounter = 0;
				this._draggedOver = false;
				ev.preventDefault();
				ev.stopPropagation();
				if (ev.dataTransfer?.getData(DropType.Mail)) {
					let dropData = {
						dropType: DropType.Mail,
						mailId: ev.dataTransfer.getData(DropType.Mail)
					};
					neverNull(a.dropHandler)(dropData);
				} else if (isDesktop() && ev.dataTransfer?.files && ev.dataTransfer.files.length > 0) neverNull(a.dropHandler)({
					dropType: DropType.ExternalFile,
					files: fileListToArray(ev.dataTransfer.files)
				});
else console.error("received onDrop DragEvent has invalid DropType or is unsupported on this platform!");
			};
		}
		return attr;
	}
	click(event, a, dom) {
		if (!this._isExternalUrl(a.href)) {
			mithril_default.route.set(this._getUrl(a.href));
			try {
				if (a.click != null) a.click(event, dom);
				event.preventDefault();
			} catch (e) {
				handleUncaughtError(e);
			}
		}
	}
	getHeight() {
		return size.button_height;
	}
};
let NavButtonColor = function(NavButtonColor$1) {
	NavButtonColor$1["Header"] = "header";
	NavButtonColor$1["Nav"] = "nav";
	NavButtonColor$1["Content"] = "content";
	return NavButtonColor$1;
}({});
function getColors(buttonColors) {
	switch (buttonColors) {
		case NavButtonColor.Header: return {
			button: styles.isDesktopLayout() ? theme.header_button : theme.content_accent,
			button_selected: styles.isDesktopLayout() ? theme.header_button_selected : theme.content_accent
		};
		case NavButtonColor.Nav: return {
			button: theme.navigation_button,
			button_selected: theme.navigation_button_selected
		};
		default: return {
			button: theme.content_button,
			button_selected: theme.content_button_selected
		};
	}
}
function isNavButtonSelected(a) {
	if (typeof a.isSelectedPrefix === "boolean") return a.isSelectedPrefix;
	const selectedPrefix = a.isSelectedPrefix || lazyStringValue(a.href);
	return isSelectedPrefix(selectedPrefix);
}
function isSelectedPrefix(href) {
	const current = mithril_default.route.get();
	return href !== "" && (current === href || current.indexOf(href + "/") === 0 || current.indexOf(href + "?") === 0);
}

//#endregion
//#region ../src/common/gui/base/InfoBanner.ts
const WARNING_RED = "#ca0606";
let BannerType = function(BannerType$1) {
	BannerType$1["Info"] = "info";
	BannerType$1["Warning"] = "warning";
	return BannerType$1;
}({});
var InfoBanner = class {
	view(vnode) {
		const { message, icon, helpLink, buttons, type } = vnode.attrs;
		const buttonContainerStyle = helpLink != null || buttons.length > 0 ? {
			marginTop: "-10px",
			marginBottom: "-6px"
		} : undefined;
		return mithril_default(".center-vertically.border-bottom.pr-s.pl.border-radius.mt-xs", { style: {
			border: `solid 2px ${type === BannerType.Warning ? WARNING_RED : theme.content_border}`,
			minHeight: buttons.length > 0 ? undefined : px(37)
		} }, [mithril_default(".mt-s.mr-s.abs", this.renderIcon(icon, type ?? null)), mithril_default("", { style: { "margin-left": px(size.icon_size_large + 1) } }, [mithril_default(".mr.pt-s.pb-s", typeof message === "function" ? message() : mithril_default(".small.text-break", lang.get(message))), mithril_default(".flex.ml-negative-s", { style: buttonContainerStyle }, [this.renderButtons(buttons), this.renderHelpLink(helpLink)])])]);
	}
	renderIcon(icon, type) {
		return mithril_default(Icon, {
			icon,
			style: {
				fill: type === BannerType.Warning ? WARNING_RED : theme.content_button,
				display: "block"
			}
		});
	}
	renderButtons(buttons) {
		if (buttons.length === 0) return null;
		return mithril_default(".small.flex.row", buttons.filter(isNotNull).map((attrs) => mithril_default(Button, {
			...attrs,
			type: ButtonType.Secondary
		})));
	}
	renderHelpLink(helpLink) {
		if (helpLink == null) return null;
		return [mithril_default(".flex-grow"), mithril_default(".button-content", { style: { marginRight: "-10px" } }, mithril_default(NavButton, {
			icon: () => Icons.QuestionMark,
			href: helpLink,
			small: true,
			hideLabel: true,
			centred: true,
			label: "help_label"
		}))];
	}
};

//#endregion
export { BannerType, InfoBanner, NavButton, NavButtonColor, isNavButtonSelected, isSelectedPrefix };
//# sourceMappingURL=InfoBanner-CobgB3Oz.js.map