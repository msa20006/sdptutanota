{"version":3,"file":"EntityUpdateUtils-B5iTKMk4.js","names":["typeRef: TypeRef<unknown>","update: EntityUpdateData","entity: T","events: ReadonlyArray<EntityUpdateData>","type: OperationType","elementId: Id","events: ReadonlyArray<T>"],"sources":["../../src/common/api/common/utils/EntityUpdateUtils.ts"],"sourcesContent":["import { OperationType } from \"../TutanotaConstants.js\"\nimport { EntityUpdate } from \"../../entities/sys/TypeRefs.js\"\nimport { SomeEntity } from \"../EntityTypes.js\"\nimport { isSameTypeRefByAttr, TypeRef } from \"@tutao/tutanota-utils\"\nimport { isSameId } from \"./EntityUtils.js\"\n\nexport type EntityUpdateData = {\n\tapplication: string\n\ttype: string\n\tinstanceListId: string\n\tinstanceId: string\n\toperation: OperationType\n}\n\nexport function isUpdateForTypeRef(typeRef: TypeRef<unknown>, update: EntityUpdateData): boolean {\n\treturn isSameTypeRefByAttr(typeRef, update.application, update.type)\n}\n\nexport function isUpdateFor<T extends SomeEntity>(entity: T, update: EntityUpdateData): boolean {\n\tconst typeRef = entity._type as TypeRef<T>\n\treturn (\n\t\tisUpdateForTypeRef(typeRef, update) &&\n\t\t(update.instanceListId === \"\" ? isSameId(update.instanceId, entity._id) : isSameId([update.instanceListId, update.instanceId], entity._id))\n\t)\n}\n\nexport function containsEventOfType(events: ReadonlyArray<EntityUpdateData>, type: OperationType, elementId: Id): boolean {\n\treturn events.some((event) => event.operation === type && event.instanceId === elementId)\n}\n\nexport function getEventOfType<T extends EntityUpdateData | EntityUpdate>(events: ReadonlyArray<T>, type: OperationType, elementId: Id): T | null {\n\treturn events.find((event) => event.operation === type && event.instanceId === elementId) ?? null\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAcO,SAAS,mBAAmBA,SAA2BC,QAAmC;AAChG,QAAO,oBAAoB,SAAS,OAAO,aAAa,OAAO,KAAK;AACpE;AAEM,SAAS,YAAkCC,QAAWD,QAAmC;CAC/F,MAAM,UAAU,OAAO;AACvB,QACC,mBAAmB,SAAS,OAAO,KAClC,OAAO,mBAAmB,KAAK,SAAS,OAAO,YAAY,OAAO,IAAI,GAAG,SAAS,CAAC,OAAO,gBAAgB,OAAO,UAAW,GAAE,OAAO,IAAI;AAE3I;AAEM,SAAS,oBAAoBE,QAAyCC,MAAqBC,WAAwB;AACzH,QAAO,OAAO,KAAK,CAAC,UAAU,MAAM,cAAc,QAAQ,MAAM,eAAe,UAAU;AACzF;AAEM,SAAS,eAA0DC,QAA0BF,MAAqBC,WAAyB;AACjJ,QAAO,OAAO,KAAK,CAAC,UAAU,MAAM,cAAc,QAAQ,MAAM,eAAe,UAAU,IAAI;AAC7F"}