
globalThis.env = {
  "staticUrl": "http://localhost:9000",
  "versionNumber": "264.250130.1",
  "dist": false,
  "mode": "Test",
  "timeout": 20000,
  "domainConfigs": {
    "mail.tutanota.com": {
      "firstPartyDomain": true,
      "partneredDomainTransitionUrl": "https://app.tuta.com",
      "apiUrl": "https://mail.tutanota.com",
      "paymentUrl": "https://pay.tutanota.com/braintree.html",
      "webauthnUrl": "https://app.tuta.com/webauthn",
      "legacyWebauthnUrl": "https://mail.tutanota.com/webauthn",
      "webauthnMobileUrl": "https://app.tuta.com/webauthnmobile",
      "legacyWebauthnMobileUrl": "https://mail.tutanota.com/webauthnmobile",
      "webauthnRpId": "tutanota.com",
      "u2fAppId": "https://tutanota.com/u2f-appid.json",
      "giftCardBaseUrl": "https://app.tuta.com/giftcard",
      "referralBaseUrl": "https://app.tuta.com/signup",
      "websiteBaseUrl": "https://tutanota.com"
    },
    "test.tutanota.com": {
      "firstPartyDomain": true,
      "partneredDomainTransitionUrl": "https://app.test.tuta.com",
      "apiUrl": "https://test.tutanota.com",
      "paymentUrl": "https://pay.test.tutanota.com/braintree.html",
      "webauthnUrl": "https://app.test.tuta.com/webauthn",
      "legacyWebauthnUrl": "https://test.tutanota.com/webauthn",
      "webauthnMobileUrl": "https://app.test.tuta.com/webauthnmobile",
      "legacyWebauthnMobileUrl": "https://test.tutanota.com/webauthnmobile",
      "webauthnRpId": "tutanota.com",
      "u2fAppId": "https://test.tutanota.com/u2f-appid.json",
      "giftCardBaseUrl": "https://app.test.tuta.com/giftcard",
      "referralBaseUrl": "https://app.test.tuta.com/signup",
      "websiteBaseUrl": "https://tutanota.com"
    },
    "app.local.tutanota.com": {
      "firstPartyDomain": true,
      "partneredDomainTransitionUrl": "https://app.local.tuta.com:9000",
      "apiUrl": "https://app.local.tutanota.com:9000",
      "paymentUrl": "https://local.tutanota.com:9000/client/build/braintree.html",
      "webauthnUrl": "https://app.local.tuta.com:9000/client/build/webauthn",
      "legacyWebauthnUrl": "https://local.tutanota.com:9000/client/build/webauthn",
      "webauthnMobileUrl": "https://app.local.tuta.com:9000/client/build/webauthnmobile",
      "legacyWebauthnMobileUrl": "https://local.tutanota.com:9000/client/build/webauthnmobile",
      "webauthnRpId": "tutanota.com",
      "u2fAppId": "https://local.tutanota.com/u2f-appid.json",
      "giftCardBaseUrl": "https://app.local.tuta.com:9000/giftcard",
      "referralBaseUrl": "https://app.local.tuta.com:9000/signup",
      "websiteBaseUrl": "https://local.tutanota.com:9000"
    },
    "app.tuta.com": {
      "firstPartyDomain": true,
      "partneredDomainTransitionUrl": "https://mail.tutanota.com",
      "apiUrl": "https://app.tuta.com",
      "paymentUrl": "https://pay.tutanota.com/braintree.html",
      "webauthnUrl": "https://app.tuta.com/webauthn",
      "legacyWebauthnUrl": "https://mail.tutanota.com/webauthn",
      "webauthnMobileUrl": "https://app.tuta.com/webauthnmobile",
      "legacyWebauthnMobileUrl": "https://mail.tutanota.com/webauthnmobile",
      "webauthnRpId": "tuta.com",
      "u2fAppId": "https://app.tuta.com/u2f-appid.json",
      "giftCardBaseUrl": "https://app.tuta.com/giftcard",
      "referralBaseUrl": "https://app.tuta.com/signup",
      "websiteBaseUrl": "https://tuta.com"
    },
    "app.test.tuta.com": {
      "firstPartyDomain": true,
      "partneredDomainTransitionUrl": "https://test.tutanota.com",
      "apiUrl": "https://app.test.tuta.com",
      "paymentUrl": "https://pay.test.tutanota.com/braintree.html",
      "webauthnUrl": "https://app.test.tuta.com/webauthn",
      "legacyWebauthnUrl": "https://test.tutanota.com/webauthn",
      "webauthnMobileUrl": "https://app.test.tuta.com/webauthnmobile",
      "legacyWebauthnMobileUrl": "https://test.tutanota.com/webauthnmobile",
      "webauthnRpId": "tuta.com",
      "u2fAppId": "https://app.test.tuta.com/u2f-appid.json",
      "giftCardBaseUrl": "https://app.test.tuta.com/giftcard",
      "referralBaseUrl": "https://app.test.tuta.com/signup",
      "websiteBaseUrl": "https://test.tuta.com"
    },
    "app.local.tuta.com": {
      "firstPartyDomain": true,
      "partneredDomainTransitionUrl": "https://app.local.tutanota.com:9000",
      "apiUrl": "https://app.local.tuta.com:9000",
      "paymentUrl": "https://app.local.tuta.com:9000/braintree.html",
      "webauthnUrl": "https://app.local.tuta.com:9000/webauthn",
      "legacyWebauthnUrl": "https://local.tutanota.com:9000/webauthn",
      "webauthnMobileUrl": "https://app.local.tuta.com:9000/webauthnmobile",
      "legacyWebauthnMobileUrl": "https://local.tutanota.com:9000/webauthnmobile",
      "webauthnRpId": "tuta.com",
      "u2fAppId": "https://app.local.tuta.com/u2f-appid.json",
      "giftCardBaseUrl": "https://app.local.tuta.com:9000/giftcard",
      "referralBaseUrl": "https://app.local.tuta.com:9000/signup",
      "websiteBaseUrl": "https://local.tuta.com:9000"
    },
    "localhost": {
      "firstPartyDomain": true,
      "partneredDomainTransitionUrl": "http://localhost:9000",
      "apiUrl": "http://localhost:9000",
      "paymentUrl": "http://localhost:9000/braintree.html",
      "webauthnUrl": "http://localhost:9000/webauthn",
      "legacyWebauthnUrl": "http://localhost:9000/webauthn",
      "webauthnMobileUrl": "http://localhost:9000/webauthnmobile",
      "legacyWebauthnMobileUrl": "http://localhost:9000/webauthnmobile",
      "webauthnRpId": "localhost",
      "u2fAppId": "http://localhost:9000/u2f-appid.json",
      "giftCardBaseUrl": "http://localhost:9000/giftcard",
      "referralBaseUrl": "http://localhost:9000/signup",
      "websiteBaseUrl": "https://tuta.com"
    },
    "{hostname}": {
      "firstPartyDomain": false,
      "partneredDomainTransitionUrl": "{protocol}//{hostname}",
      "apiUrl": "{protocol}//{hostname}",
      "paymentUrl": "https://pay.tutanota.com/braintree.html",
      "webauthnUrl": "{protocol}//{hostname}/webauthn",
      "legacyWebauthnUrl": "{protocol}//{hostname}/webauthn",
      "webauthnMobileUrl": "{protocol}//{hostname}/webauthnmobile",
      "legacyWebauthnMobileUrl": "{protocol}//{hostname}/webauthnmobile",
      "webauthnRpId": "{hostname}",
      "u2fAppId": "{protocol}//{hostname}/u2f-appid.json",
      "giftCardBaseUrl": "https://app.tuta.com/giftcard",
      "referralBaseUrl": "https://app.tuta.com/signup",
      "websiteBaseUrl": "https://tuta.com"
    }
  },
  "platformId": null
};
const __NODE_GYP_better_sqlite3 = `./better-sqlite3.darwin-${typeof process !== 'undefined' ? process.arch : "unknown"}.node`
import { convertTextToHtml } from "./Formatter-zB15D6XI.js";
import { isMailAddress } from "./FormatValidator-2BBermUe.js";

//#region ../src/common/misc/parsing/MailAddressParser.ts
function parseMailtoUrl(mailtoUrl) {
	let url = new URL(mailtoUrl);
	const createMailAddressFromString = (address) => {
		const nameAndMailAddress = stringToNameAndMailAddress(address);
		if (!nameAndMailAddress) return null;
		return {
			name: nameAndMailAddress.name,
			address: nameAndMailAddress.mailAddress
		};
	};
	const addresses = url.pathname.split(",").map((address) => {
		if (!address) return null;
		const decodedAddress = decodeURIComponent(address);
		if (!decodedAddress) return null;
		return createMailAddressFromString(decodedAddress);
	}).filter(Boolean);
	const result = {
		recipients: {
			to: addresses.length > 0 ? addresses : undefined,
			cc: undefined,
			bcc: undefined
		},
		attach: null,
		subject: null,
		body: null
	};
	if (!url.searchParams || typeof url.searchParams.entries !== "function") return result;
	for (let pair of url.searchParams.entries()) {
		let paramName = pair[0].toLowerCase();
		let paramValue = pair[1];
		switch (paramName) {
			case "subject":
				result.subject = paramValue;
				break;
			case "body":
				result.body = convertTextToHtml(paramValue);
				break;
			case "to":
			case "cc":
			case "bcc": {
				if (result.recipients[paramName] == null) result.recipients[paramName] = [];
				const nextAddresses = paramValue.split(",").map((address) => createMailAddressFromString(address)).filter(Boolean);
				result.recipients[paramName].push(...nextAddresses);
				break;
			}
			case "attach":
				if (result.attach == null) result.attach = [];
				result.attach.push(paramValue);
				break;
			default: console.warn("unexpected mailto param, ignoring");
		}
	}
	return result;
}
function stringToNameAndMailAddress(string) {
	string = string.trim();
	if (string === "") return null;
	let startIndex = string.indexOf("<");
	if (startIndex !== -1) {
		const endIndex = string.indexOf(">", startIndex);
		if (endIndex === -1) return null;
		const cleanedMailAddress = getCleanedMailAddress(string.substring(startIndex + 1, endIndex));
		if (cleanedMailAddress == null || !isMailAddress(cleanedMailAddress, false)) return null;
		const name = string.substring(0, startIndex).trim();
		return {
			name,
			mailAddress: cleanedMailAddress
		};
	} else {
		startIndex = string.lastIndexOf(" ");
		startIndex++;
		const cleanedMailAddress = getCleanedMailAddress(string.substring(startIndex));
		if (cleanedMailAddress == null || !isMailAddress(cleanedMailAddress, false)) return null;
		const name = string.substring(0, startIndex).trim();
		return {
			name,
			mailAddress: cleanedMailAddress
		};
	}
}
function getCleanedMailAddress(mailAddress) {
	const cleanedMailAddress = mailAddress.toLowerCase().trim();
	if (isMailAddress(cleanedMailAddress, false)) return cleanedMailAddress;
	return null;
}
function fullNameToFirstAndLastName(fullName) {
	fullName = fullName.trim();
	if (fullName === "") return {
		firstName: "",
		lastName: ""
	};
	const separator = fullName.indexOf(" ");
	if (separator !== -1) return {
		firstName: fullName.substring(0, separator),
		lastName: fullName.substring(separator + 1)
	};
else return {
		firstName: fullName,
		lastName: ""
	};
}
function mailAddressToFirstAndLastName(mailAddress) {
	const addr = mailAddress.substring(0, mailAddress.indexOf("@"));
	let nameData;
	if (addr.indexOf(".") !== -1) nameData = addr.split(".");
else if (addr.indexOf("_") !== -1) nameData = addr.split("_");
else if (addr.indexOf("-") !== -1) nameData = addr.split("-");
else nameData = [addr];
	for (let i = 0; i < nameData.length; i++) if (nameData[i].length > 0) nameData[i] = nameData[i].substring(0, 1).toUpperCase() + nameData[i].substring(1);
	return {
		firstName: nameData[0],
		lastName: nameData.slice(1).join(" ")
	};
}

//#endregion
export { fullNameToFirstAndLastName, getCleanedMailAddress, mailAddressToFirstAndLastName, parseMailtoUrl, stringToNameAndMailAddress };
//# sourceMappingURL=MailAddressParser-BgYy6oyp.js.map