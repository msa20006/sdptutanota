{"version":3,"file":"Checkbox-WCw-l_7A.js","names":["vnode: Vnode<CheckboxAttrs>","e: MouseEvent","vnode","e: Event","text: string | Children","event: Event","attrs: CheckboxAttrs"],"sources":["../../src/common/gui/base/Checkbox.ts"],"sourcesContent":["import m, { Children, Component, Vnode } from \"mithril\"\nimport { BootIcons, BootIconsSvg } from \"./icons/BootIcons\"\nimport type { TranslationKey, MaybeTranslation } from \"../../misc/LanguageViewModel\"\nimport { lang } from \"../../misc/LanguageViewModel\"\nimport type { lazy } from \"@tutao/tutanota-utils\"\nimport { theme } from \"../theme.js\"\nimport { encodeSVG, getOperatingClasses } from \"./GuiUtils.js\"\n\nexport type CheckboxAttrs = {\n\tlabel: lazy<string | Children>\n\tchecked: boolean\n\tonChecked: (value: boolean) => unknown\n\tclass?: string\n\thelpLabel?: MaybeTranslation\n\tdisabled?: boolean\n}\n\nexport class Checkbox implements Component<CheckboxAttrs> {\n\tprivate focused: boolean = false\n\tprivate _domInput: HTMLElement | null = null\n\tprivate static readonly checkedIcon = encodeSVG(BootIconsSvg[BootIcons.CheckboxSelected])\n\tprivate static readonly uncheckedIcon = encodeSVG(BootIconsSvg[BootIcons.Checkbox])\n\n\tview(vnode: Vnode<CheckboxAttrs>): Children {\n\t\tconst a = vnode.attrs\n\t\tconst helpLabelText = lang.getTranslationText(a.helpLabel ? a.helpLabel : \"emptyString_msg\")\n\t\tconst helpLabel = a.helpLabel ? m(`small.block.content-fg${Checkbox.getBreakClass(helpLabelText)}`, helpLabelText) : []\n\t\tconst userClasses = a.class == null ? \"\" : \" \" + a.class\n\t\treturn m(\n\t\t\t`.pt`,\n\t\t\t{\n\t\t\t\t\"aria-disabled\": String(a.disabled),\n\t\t\t\tclass: getOperatingClasses(a.disabled, \"click flash\") + userClasses,\n\t\t\t\tonclick: (e: MouseEvent) => {\n\t\t\t\t\tif (e.target !== this._domInput) {\n\t\t\t\t\t\tthis.toggle(e, a) // event is bubbling in IE besides we invoke e.stopPropagation()\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t},\n\t\t\tm(\n\t\t\t\t`label${Checkbox.getBreakClass(a.label())}`,\n\t\t\t\t{\n\t\t\t\t\tclass: `${this.focused ? \"content-accent-fg\" : \"content-fg\"} ${getOperatingClasses(a.disabled, \"click\")}`,\n\t\t\t\t},\n\t\t\t\t[\n\t\t\t\t\tm(\"input[type=checkbox].icon.checkbox-override\", {\n\t\t\t\t\t\toncreate: (vnode) => (this._domInput = vnode.dom as HTMLElement),\n\t\t\t\t\t\tonchange: (e: Event) => this.toggle(e, a),\n\t\t\t\t\t\tchecked: a.checked,\n\t\t\t\t\t\tonfocus: () => (this.focused = true),\n\t\t\t\t\t\tonblur: () => (this.focused = false),\n\t\t\t\t\t\tclass: getOperatingClasses(a.disabled, \"click\"),\n\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\tcursor: a.disabled ? \"default\" : \"pointer\",\n\t\t\t\t\t\t\t\"background-color\": theme.content_accent,\n\t\t\t\t\t\t\t\"mask-image\": `url(\"${a.checked ? Checkbox.checkedIcon : Checkbox.uncheckedIcon}\")`,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdisabled: a.disabled,\n\t\t\t\t\t}),\n\t\t\t\t\ta.label(),\n\t\t\t\t\thelpLabel,\n\t\t\t\t],\n\t\t\t),\n\t\t)\n\t}\n\n\tprivate static getBreakClass(text: string | Children): string {\n\t\tif (typeof text !== \"string\" || text.includes(\" \")) {\n\t\t\treturn \".break-word\"\n\t\t} else {\n\t\t\treturn \".break-all\"\n\t\t}\n\t}\n\n\ttoggle(event: Event, attrs: CheckboxAttrs) {\n\t\tif (!attrs.disabled) {\n\t\t\tattrs.onChecked(!attrs.checked)\n\t\t}\n\n\t\tevent.stopPropagation()\n\n\t\tif (this._domInput) {\n\t\t\tthis._domInput.focus()\n\t\t}\n\t}\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAiBa,WAAN,MAAM,SAA6C;CACzD,AAAQ,UAAmB;CAC3B,AAAQ,YAAgC;CACxC,OAAwB,cAAc,UAAU,aAAa,UAAU,kBAAkB;CACzF,OAAwB,gBAAgB,UAAU,aAAa,UAAU,UAAU;CAEnF,KAAKA,OAAuC;EAC3C,MAAM,IAAI,MAAM;EAChB,MAAM,gBAAgB,KAAK,mBAAmB,EAAE,YAAY,EAAE,YAAY,kBAAkB;EAC5F,MAAM,YAAY,EAAE,YAAY,iBAAG,wBAAwB,SAAS,cAAc,cAAc,CAAC,GAAG,cAAc,GAAG,CAAE;EACvH,MAAM,cAAc,EAAE,SAAS,OAAO,KAAK,MAAM,EAAE;AACnD,SAAO,iBACL,MACD;GACC,iBAAiB,OAAO,EAAE,SAAS;GACnC,OAAO,oBAAoB,EAAE,UAAU,cAAc,GAAG;GACxD,SAAS,CAACC,MAAkB;AAC3B,QAAI,EAAE,WAAW,KAAK,UACrB,MAAK,OAAO,GAAG,EAAE;GAElB;EACD,GACD,iBACE,OAAO,SAAS,cAAc,EAAE,OAAO,CAAC,CAAC,GAC1C,EACC,QAAQ,EAAE,KAAK,UAAU,sBAAsB,aAAa,GAAG,oBAAoB,EAAE,UAAU,QAAQ,CAAC,EACxG,GACD;GACC,gBAAE,+CAA+C;IAChD,UAAU,CAACC,YAAW,KAAK,YAAYA,QAAM;IAC7C,UAAU,CAACC,MAAa,KAAK,OAAO,GAAG,EAAE;IACzC,SAAS,EAAE;IACX,SAAS,MAAO,KAAK,UAAU;IAC/B,QAAQ,MAAO,KAAK,UAAU;IAC9B,OAAO,oBAAoB,EAAE,UAAU,QAAQ;IAC/C,OAAO;KACN,QAAQ,EAAE,WAAW,YAAY;KACjC,oBAAoB,MAAM;KAC1B,eAAe,OAAO,EAAE,UAAU,SAAS,cAAc,SAAS,cAAc;IAChF;IACD,UAAU,EAAE;GACZ,EAAC;GACF,EAAE,OAAO;GACT;EACA,EACD,CACD;CACD;CAED,OAAe,cAAcC,MAAiC;AAC7D,aAAW,SAAS,YAAY,KAAK,SAAS,IAAI,CACjD,QAAO;IAEP,QAAO;CAER;CAED,OAAOC,OAAcC,OAAsB;AAC1C,OAAK,MAAM,SACV,OAAM,WAAW,MAAM,QAAQ;AAGhC,QAAM,iBAAiB;AAEvB,MAAI,KAAK,UACR,MAAK,UAAU,OAAO;CAEvB;AACD"}