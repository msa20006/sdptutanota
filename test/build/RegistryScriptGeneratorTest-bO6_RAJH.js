
globalThis.env = {
  "staticUrl": "http://localhost:9000",
  "versionNumber": "264.250130.1",
  "dist": false,
  "mode": "Test",
  "timeout": 20000,
  "domainConfigs": {
    "mail.tutanota.com": {
      "firstPartyDomain": true,
      "partneredDomainTransitionUrl": "https://app.tuta.com",
      "apiUrl": "https://mail.tutanota.com",
      "paymentUrl": "https://pay.tutanota.com/braintree.html",
      "webauthnUrl": "https://app.tuta.com/webauthn",
      "legacyWebauthnUrl": "https://mail.tutanota.com/webauthn",
      "webauthnMobileUrl": "https://app.tuta.com/webauthnmobile",
      "legacyWebauthnMobileUrl": "https://mail.tutanota.com/webauthnmobile",
      "webauthnRpId": "tutanota.com",
      "u2fAppId": "https://tutanota.com/u2f-appid.json",
      "giftCardBaseUrl": "https://app.tuta.com/giftcard",
      "referralBaseUrl": "https://app.tuta.com/signup",
      "websiteBaseUrl": "https://tutanota.com"
    },
    "test.tutanota.com": {
      "firstPartyDomain": true,
      "partneredDomainTransitionUrl": "https://app.test.tuta.com",
      "apiUrl": "https://test.tutanota.com",
      "paymentUrl": "https://pay.test.tutanota.com/braintree.html",
      "webauthnUrl": "https://app.test.tuta.com/webauthn",
      "legacyWebauthnUrl": "https://test.tutanota.com/webauthn",
      "webauthnMobileUrl": "https://app.test.tuta.com/webauthnmobile",
      "legacyWebauthnMobileUrl": "https://test.tutanota.com/webauthnmobile",
      "webauthnRpId": "tutanota.com",
      "u2fAppId": "https://test.tutanota.com/u2f-appid.json",
      "giftCardBaseUrl": "https://app.test.tuta.com/giftcard",
      "referralBaseUrl": "https://app.test.tuta.com/signup",
      "websiteBaseUrl": "https://tutanota.com"
    },
    "app.local.tutanota.com": {
      "firstPartyDomain": true,
      "partneredDomainTransitionUrl": "https://app.local.tuta.com:9000",
      "apiUrl": "https://app.local.tutanota.com:9000",
      "paymentUrl": "https://local.tutanota.com:9000/client/build/braintree.html",
      "webauthnUrl": "https://app.local.tuta.com:9000/client/build/webauthn",
      "legacyWebauthnUrl": "https://local.tutanota.com:9000/client/build/webauthn",
      "webauthnMobileUrl": "https://app.local.tuta.com:9000/client/build/webauthnmobile",
      "legacyWebauthnMobileUrl": "https://local.tutanota.com:9000/client/build/webauthnmobile",
      "webauthnRpId": "tutanota.com",
      "u2fAppId": "https://local.tutanota.com/u2f-appid.json",
      "giftCardBaseUrl": "https://app.local.tuta.com:9000/giftcard",
      "referralBaseUrl": "https://app.local.tuta.com:9000/signup",
      "websiteBaseUrl": "https://local.tutanota.com:9000"
    },
    "app.tuta.com": {
      "firstPartyDomain": true,
      "partneredDomainTransitionUrl": "https://mail.tutanota.com",
      "apiUrl": "https://app.tuta.com",
      "paymentUrl": "https://pay.tutanota.com/braintree.html",
      "webauthnUrl": "https://app.tuta.com/webauthn",
      "legacyWebauthnUrl": "https://mail.tutanota.com/webauthn",
      "webauthnMobileUrl": "https://app.tuta.com/webauthnmobile",
      "legacyWebauthnMobileUrl": "https://mail.tutanota.com/webauthnmobile",
      "webauthnRpId": "tuta.com",
      "u2fAppId": "https://app.tuta.com/u2f-appid.json",
      "giftCardBaseUrl": "https://app.tuta.com/giftcard",
      "referralBaseUrl": "https://app.tuta.com/signup",
      "websiteBaseUrl": "https://tuta.com"
    },
    "app.test.tuta.com": {
      "firstPartyDomain": true,
      "partneredDomainTransitionUrl": "https://test.tutanota.com",
      "apiUrl": "https://app.test.tuta.com",
      "paymentUrl": "https://pay.test.tutanota.com/braintree.html",
      "webauthnUrl": "https://app.test.tuta.com/webauthn",
      "legacyWebauthnUrl": "https://test.tutanota.com/webauthn",
      "webauthnMobileUrl": "https://app.test.tuta.com/webauthnmobile",
      "legacyWebauthnMobileUrl": "https://test.tutanota.com/webauthnmobile",
      "webauthnRpId": "tuta.com",
      "u2fAppId": "https://app.test.tuta.com/u2f-appid.json",
      "giftCardBaseUrl": "https://app.test.tuta.com/giftcard",
      "referralBaseUrl": "https://app.test.tuta.com/signup",
      "websiteBaseUrl": "https://test.tuta.com"
    },
    "app.local.tuta.com": {
      "firstPartyDomain": true,
      "partneredDomainTransitionUrl": "https://app.local.tutanota.com:9000",
      "apiUrl": "https://app.local.tuta.com:9000",
      "paymentUrl": "https://app.local.tuta.com:9000/braintree.html",
      "webauthnUrl": "https://app.local.tuta.com:9000/webauthn",
      "legacyWebauthnUrl": "https://local.tutanota.com:9000/webauthn",
      "webauthnMobileUrl": "https://app.local.tuta.com:9000/webauthnmobile",
      "legacyWebauthnMobileUrl": "https://local.tutanota.com:9000/webauthnmobile",
      "webauthnRpId": "tuta.com",
      "u2fAppId": "https://app.local.tuta.com/u2f-appid.json",
      "giftCardBaseUrl": "https://app.local.tuta.com:9000/giftcard",
      "referralBaseUrl": "https://app.local.tuta.com:9000/signup",
      "websiteBaseUrl": "https://local.tuta.com:9000"
    },
    "localhost": {
      "firstPartyDomain": true,
      "partneredDomainTransitionUrl": "http://localhost:9000",
      "apiUrl": "http://localhost:9000",
      "paymentUrl": "http://localhost:9000/braintree.html",
      "webauthnUrl": "http://localhost:9000/webauthn",
      "legacyWebauthnUrl": "http://localhost:9000/webauthn",
      "webauthnMobileUrl": "http://localhost:9000/webauthnmobile",
      "legacyWebauthnMobileUrl": "http://localhost:9000/webauthnmobile",
      "webauthnRpId": "localhost",
      "u2fAppId": "http://localhost:9000/u2f-appid.json",
      "giftCardBaseUrl": "http://localhost:9000/giftcard",
      "referralBaseUrl": "http://localhost:9000/signup",
      "websiteBaseUrl": "https://tuta.com"
    },
    "{hostname}": {
      "firstPartyDomain": false,
      "partneredDomainTransitionUrl": "{protocol}//{hostname}",
      "apiUrl": "{protocol}//{hostname}",
      "paymentUrl": "https://pay.tutanota.com/braintree.html",
      "webauthnUrl": "{protocol}//{hostname}/webauthn",
      "legacyWebauthnUrl": "{protocol}//{hostname}/webauthn",
      "webauthnMobileUrl": "{protocol}//{hostname}/webauthnmobile",
      "legacyWebauthnMobileUrl": "{protocol}//{hostname}/webauthnmobile",
      "webauthnRpId": "{hostname}",
      "u2fAppId": "{protocol}//{hostname}/u2f-appid.json",
      "giftCardBaseUrl": "https://app.tuta.com/giftcard",
      "referralBaseUrl": "https://app.tuta.com/signup",
      "websiteBaseUrl": "https://tuta.com"
    }
  },
  "platformId": null
};
const __NODE_GYP_better_sqlite3 = `./better-sqlite3.darwin-${typeof process !== 'undefined' ? process.arch : "unknown"}.node`
import { dist_default } from "./dist-Ci1bEzYU.js";

//#region ../src/common/desktop/integration/RegistryScriptGenerator.ts
const header_line = "Windows Registry Editor Version 5.00";
function quote(s) {
	return `"${s}"`;
}
function keyLine(path) {
	return `[${path}]`;
}
function valueLine(path, value) {
	return `${path === "" ? "@" : quote(path)}=${value == null ? "-" : quote(value)}`;
}
/**
* value expander for the script generators. if a value is not a string, it's another section
* that gets expanded recursively.
*
* remove is used to create value/key removal lines
*/
function expandValue(path, key, value, buf, remove) {
	if (typeof value === "string") buf[path].push(valueLine(key, remove ? null : value));
else buf = expandSection(`${path}\\${key}`, value, buf, remove);
	return buf;
}
/**
* section expander for the script generator
*/
function expandSection(path, value, buf, remove) {
	if (buf[path] == null) buf[path] = [];
	for (const key in value) if (typeof value[key] !== "string" && remove) buf[`-${path}\\${key}`] = [];
else expandValue(path, key, value[key], buf, remove);
	return buf;
}
/**
* converts a map of registry paths to value setters into an executable registry script
* @param {OperationBuffer} buf List of operations the need to be done
* @returns {string} a windows registry script that can be imported by regex.exe to apply the operations
*/
function bufToScript(buf) {
	const lines = [header_line];
	for (const key in buf) {
		const next = buf[key];
		if (next.length < 1 && !key.startsWith("-")) continue;
		lines.push("", keyLine(key));
		lines.push(...next);
	}
	return lines.join("\r\n").trim();
}
/**
* the application and removal script generators are very similar in structure, this function abstracts over that.
*/
function scriptBuilder(remove, template) {
	const buf = template.reduce((prev, { root, value }) => expandSection(root, value, prev, remove), {});
	return bufToScript(buf);
}
function applyScriptBuilder(template) {
	return scriptBuilder(false, template);
}
function removeScriptBuilder(template) {
	return scriptBuilder(true, template);
}

//#endregion
//#region tests/desktop/integration/RegistryScriptGeneratorTest.ts
dist_default.spec("RegistryScriptGenerator Test", function() {
	const templates = [
		{
			name: "empty template",
			template: [],
			apply: "Windows Registry Editor Version 5.00",
			remove: "Windows Registry Editor Version 5.00"
		},
		{
			name: "naked value",
			template: [{
				root: "HKLM",
				value: { tuta: "some_value" }
			}],
			apply: "Windows Registry Editor Version 5.00\r\n\r\n[HKLM]\r\n\"tuta\"=\"some_value\"",
			remove: "Windows Registry Editor Version 5.00\r\n\r\n[HKLM]\r\n\"tuta\"=-"
		},
		{
			name: "with subkeys",
			template: [{
				root: "HKLM",
				value: { tuta: { "": "subkey_value" } }
			}],
			apply: "Windows Registry Editor Version 5.00\r\n\r\n[HKLM\\tuta]\r\n@=\"subkey_value\"",
			remove: "Windows Registry Editor Version 5.00\r\n\r\n[-HKLM\\tuta]"
		},
		{
			name: "mixed",
			template: [{
				root: "HKLM",
				value: {
					direct: "direct_val",
					sub: { key: "sub_val" }
				}
			}],
			apply: "Windows Registry Editor Version 5.00\r\n\r\n[HKLM]\r\n\"direct\"=\"direct_val\"\r\n\r\n[HKLM\\sub]\r\n\"key\"=\"sub_val\"",
			remove: "Windows Registry Editor Version 5.00\r\n\r\n[HKLM]\r\n\"direct\"=-\r\n\r\n[-HKLM\\sub]"
		},
		{
			name: "deeper subkey",
			template: [{
				root: "HKCU",
				value: { a: { deep: { path: { subkey: { "": "hello." } } } } }
			}],
			apply: "Windows Registry Editor Version 5.00\r\n\r\n[HKCU\\a\\deep\\path\\subkey]\r\n@=\"hello.\"",
			remove: "Windows Registry Editor Version 5.00\r\n\r\n[-HKCU\\a]"
		}
	];
	for (const { template, apply, remove, name } of templates) dist_default(name, function() {
		dist_default(applyScriptBuilder(template)).equals(apply);
		dist_default(removeScriptBuilder(template)).equals(remove);
	});
});

//#endregion
//# sourceMappingURL=RegistryScriptGeneratorTest-bO6_RAJH.js.map