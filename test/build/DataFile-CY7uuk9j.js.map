{"version":3,"file":"DataFile-CY7uuk9j.js","names":["name: string","mimeType: string","data: Uint8Array","cid?: string","file: File | TutanotaFile","mimeType: string | null"],"sources":["../../src/common/api/common/DataFile.ts"],"sourcesContent":["import type { File as TutanotaFile } from \"../entities/tutanota/TypeRefs.js\"\n\n/**\n * a structure containing file content and metadata\n */\nexport interface DataFile {\n\treadonly _type: \"DataFile\"\n\tname: string\n\tmimeType: string\n\tdata: Uint8Array\n\tsize: number\n\tid?: IdTuple\n\tcid?: string\n}\n\nexport function createDataFile(name: string, mimeType: string, data: Uint8Array, cid?: string): DataFile {\n\treturn {\n\t\t_type: \"DataFile\",\n\t\tname: name,\n\t\tmimeType: getCleanedMimeType(mimeType),\n\t\tdata: data,\n\t\tsize: data.byteLength,\n\t\tid: undefined,\n\t\tcid,\n\t}\n}\n\nexport function convertToDataFile(file: File | TutanotaFile, data: Uint8Array): DataFile {\n\tif (\"_type\" in file) {\n\t\treturn {\n\t\t\t_type: \"DataFile\",\n\t\t\tname: file.name,\n\t\t\tmimeType: getCleanedMimeType(file.mimeType),\n\t\t\tdata: data,\n\t\t\tsize: data.byteLength,\n\t\t\tid: file._id,\n\t\t\tcid: file.cid ?? undefined,\n\t\t}\n\t} else {\n\t\treturn {\n\t\t\t_type: \"DataFile\",\n\t\t\tname: file.name,\n\t\t\tmimeType: getCleanedMimeType(file.type),\n\t\t\tdata: data,\n\t\t\tsize: data.byteLength,\n\t\t\tid: undefined, // file read from filesystem, does not have an id because it has not been stored in tutanota.\n\t\t}\n\t}\n}\n\n/** make sure we have a valid mime type by replacing empty ones with \"application/octet-stream\" and\n * removing double quotes and single quotes*/\nexport function getCleanedMimeType(mimeType: string | null): string {\n\tif (!mimeType || mimeType.trim() === \"\") {\n\t\treturn \"application/octet-stream\"\n\t} else {\n\t\treturn mimeType.replace(/\"/g, \"\").replace(/'/g, \"\")\n\t}\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAeO,SAAS,eAAeA,MAAcC,UAAkBC,MAAkBC,KAAwB;AACxG,QAAO;EACN,OAAO;EACD;EACN,UAAU,mBAAmB,SAAS;EAChC;EACN,MAAM,KAAK;EACX,IAAI;EACJ;CACA;AACD;AAEM,SAAS,kBAAkBC,MAA2BF,MAA4B;AACxF,KAAI,WAAW,KACd,QAAO;EACN,OAAO;EACP,MAAM,KAAK;EACX,UAAU,mBAAmB,KAAK,SAAS;EACrC;EACN,MAAM,KAAK;EACX,IAAI,KAAK;EACT,KAAK,KAAK,OAAO;CACjB;IAED,QAAO;EACN,OAAO;EACP,MAAM,KAAK;EACX,UAAU,mBAAmB,KAAK,KAAK;EACjC;EACN,MAAM,KAAK;EACX,IAAI;CACJ;AAEF;AAIM,SAAS,mBAAmBG,UAAiC;AACnE,MAAK,YAAY,SAAS,MAAM,KAAK,GACpC,QAAO;IAEP,QAAO,SAAS,QAAQ,MAAM,GAAG,CAAC,QAAQ,MAAM,GAAG;AAEpD"}