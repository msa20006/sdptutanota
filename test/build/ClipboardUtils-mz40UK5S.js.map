{"version":3,"file":"ClipboardUtils-mz40UK5S.js","names":["text: string"],"sources":["../../src/common/misc/ClipboardUtils.ts"],"sourcesContent":["import { client } from \"./ClientDetector\"\n\nfunction fallbackCopyToClipboard(text: string): Promise<void> {\n\treturn new Promise((resolve, reject) => {\n\t\tconst textArea = document.createElement(\"textarea\")\n\t\ttextArea.value = text\n\t\twindow.document.body.appendChild(textArea)\n\t\ttextArea.focus()\n\t\ttextArea.select()\n\n\t\ttry {\n\t\t\tdocument.execCommand(\"copy\")\n\t\t} catch (err) {\n\t\t\treject(\"fallback copy failed\")\n\t\t}\n\n\t\twindow.document.body.removeChild(textArea)\n\t\tconsole.log(\"fallback copy successful\")\n\t\tresolve()\n\t})\n}\n\nfunction iosCopyToClipboard(text: string) {\n\tconst el = document.createElement(\"textarea\")\n\tel.value = text\n\tel.contentEditable = \"true\"\n\tel.readOnly = true\n\twindow.document.body.appendChild(el)\n\tconst range = document.createRange()\n\trange.selectNodeContents(el)\n\tconst s = window.getSelection()\n\ts?.removeAllRanges()\n\ts?.addRange(range)\n\tel.setSelectionRange(0, 999999) // A big number, to cover anything that could be inside the element.\n\n\twindow.document.execCommand(\"copy\")\n\twindow.document.body.removeChild(el)\n}\n\nexport async function copyToClipboard(text: string): Promise<void> {\n\ttry {\n\t\tawait navigator.clipboard.writeText(text)\n\t} catch {\n\t\tconsole.log(\"copy failed, trying fallback\")\n\n\t\tif (client.isIos()) {\n\t\t\treturn iosCopyToClipboard(text)\n\t\t} else {\n\t\t\treturn fallbackCopyToClipboard(text)\n\t\t}\n\t}\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA,SAAS,wBAAwBA,MAA6B;AAC7D,QAAO,IAAI,QAAQ,CAAC,SAAS,WAAW;EACvC,MAAM,WAAW,SAAS,cAAc,WAAW;AACnD,WAAS,QAAQ;AACjB,SAAO,SAAS,KAAK,YAAY,SAAS;AAC1C,WAAS,OAAO;AAChB,WAAS,QAAQ;AAEjB,MAAI;AACH,YAAS,YAAY,OAAO;EAC5B,SAAQ,KAAK;AACb,UAAO,uBAAuB;EAC9B;AAED,SAAO,SAAS,KAAK,YAAY,SAAS;AAC1C,UAAQ,IAAI,2BAA2B;AACvC,WAAS;CACT;AACD;AAED,SAAS,mBAAmBA,MAAc;CACzC,MAAM,KAAK,SAAS,cAAc,WAAW;AAC7C,IAAG,QAAQ;AACX,IAAG,kBAAkB;AACrB,IAAG,WAAW;AACd,QAAO,SAAS,KAAK,YAAY,GAAG;CACpC,MAAM,QAAQ,SAAS,aAAa;AACpC,OAAM,mBAAmB,GAAG;CAC5B,MAAM,IAAI,OAAO,cAAc;AAC/B,IAAG,iBAAiB;AACpB,IAAG,SAAS,MAAM;AAClB,IAAG,kBAAkB,GAAG,OAAO;AAE/B,QAAO,SAAS,YAAY,OAAO;AACnC,QAAO,SAAS,KAAK,YAAY,GAAG;AACpC;AAEM,eAAe,gBAAgBA,MAA6B;AAClE,KAAI;AACH,QAAM,UAAU,UAAU,UAAU,KAAK;CACzC,QAAO;AACP,UAAQ,IAAI,+BAA+B;AAE3C,MAAI,OAAO,OAAO,CACjB,QAAO,mBAAmB,KAAK;IAE/B,QAAO,wBAAwB,KAAK;CAErC;AACD"}