
globalThis.env = {
  "staticUrl": "http://localhost:9000",
  "versionNumber": "264.250130.1",
  "dist": false,
  "mode": "Test",
  "timeout": 20000,
  "domainConfigs": {
    "mail.tutanota.com": {
      "firstPartyDomain": true,
      "partneredDomainTransitionUrl": "https://app.tuta.com",
      "apiUrl": "https://mail.tutanota.com",
      "paymentUrl": "https://pay.tutanota.com/braintree.html",
      "webauthnUrl": "https://app.tuta.com/webauthn",
      "legacyWebauthnUrl": "https://mail.tutanota.com/webauthn",
      "webauthnMobileUrl": "https://app.tuta.com/webauthnmobile",
      "legacyWebauthnMobileUrl": "https://mail.tutanota.com/webauthnmobile",
      "webauthnRpId": "tutanota.com",
      "u2fAppId": "https://tutanota.com/u2f-appid.json",
      "giftCardBaseUrl": "https://app.tuta.com/giftcard",
      "referralBaseUrl": "https://app.tuta.com/signup",
      "websiteBaseUrl": "https://tutanota.com"
    },
    "test.tutanota.com": {
      "firstPartyDomain": true,
      "partneredDomainTransitionUrl": "https://app.test.tuta.com",
      "apiUrl": "https://test.tutanota.com",
      "paymentUrl": "https://pay.test.tutanota.com/braintree.html",
      "webauthnUrl": "https://app.test.tuta.com/webauthn",
      "legacyWebauthnUrl": "https://test.tutanota.com/webauthn",
      "webauthnMobileUrl": "https://app.test.tuta.com/webauthnmobile",
      "legacyWebauthnMobileUrl": "https://test.tutanota.com/webauthnmobile",
      "webauthnRpId": "tutanota.com",
      "u2fAppId": "https://test.tutanota.com/u2f-appid.json",
      "giftCardBaseUrl": "https://app.test.tuta.com/giftcard",
      "referralBaseUrl": "https://app.test.tuta.com/signup",
      "websiteBaseUrl": "https://tutanota.com"
    },
    "app.local.tutanota.com": {
      "firstPartyDomain": true,
      "partneredDomainTransitionUrl": "https://app.local.tuta.com:9000",
      "apiUrl": "https://app.local.tutanota.com:9000",
      "paymentUrl": "https://local.tutanota.com:9000/client/build/braintree.html",
      "webauthnUrl": "https://app.local.tuta.com:9000/client/build/webauthn",
      "legacyWebauthnUrl": "https://local.tutanota.com:9000/client/build/webauthn",
      "webauthnMobileUrl": "https://app.local.tuta.com:9000/client/build/webauthnmobile",
      "legacyWebauthnMobileUrl": "https://local.tutanota.com:9000/client/build/webauthnmobile",
      "webauthnRpId": "tutanota.com",
      "u2fAppId": "https://local.tutanota.com/u2f-appid.json",
      "giftCardBaseUrl": "https://app.local.tuta.com:9000/giftcard",
      "referralBaseUrl": "https://app.local.tuta.com:9000/signup",
      "websiteBaseUrl": "https://local.tutanota.com:9000"
    },
    "app.tuta.com": {
      "firstPartyDomain": true,
      "partneredDomainTransitionUrl": "https://mail.tutanota.com",
      "apiUrl": "https://app.tuta.com",
      "paymentUrl": "https://pay.tutanota.com/braintree.html",
      "webauthnUrl": "https://app.tuta.com/webauthn",
      "legacyWebauthnUrl": "https://mail.tutanota.com/webauthn",
      "webauthnMobileUrl": "https://app.tuta.com/webauthnmobile",
      "legacyWebauthnMobileUrl": "https://mail.tutanota.com/webauthnmobile",
      "webauthnRpId": "tuta.com",
      "u2fAppId": "https://app.tuta.com/u2f-appid.json",
      "giftCardBaseUrl": "https://app.tuta.com/giftcard",
      "referralBaseUrl": "https://app.tuta.com/signup",
      "websiteBaseUrl": "https://tuta.com"
    },
    "app.test.tuta.com": {
      "firstPartyDomain": true,
      "partneredDomainTransitionUrl": "https://test.tutanota.com",
      "apiUrl": "https://app.test.tuta.com",
      "paymentUrl": "https://pay.test.tutanota.com/braintree.html",
      "webauthnUrl": "https://app.test.tuta.com/webauthn",
      "legacyWebauthnUrl": "https://test.tutanota.com/webauthn",
      "webauthnMobileUrl": "https://app.test.tuta.com/webauthnmobile",
      "legacyWebauthnMobileUrl": "https://test.tutanota.com/webauthnmobile",
      "webauthnRpId": "tuta.com",
      "u2fAppId": "https://app.test.tuta.com/u2f-appid.json",
      "giftCardBaseUrl": "https://app.test.tuta.com/giftcard",
      "referralBaseUrl": "https://app.test.tuta.com/signup",
      "websiteBaseUrl": "https://test.tuta.com"
    },
    "app.local.tuta.com": {
      "firstPartyDomain": true,
      "partneredDomainTransitionUrl": "https://app.local.tutanota.com:9000",
      "apiUrl": "https://app.local.tuta.com:9000",
      "paymentUrl": "https://app.local.tuta.com:9000/braintree.html",
      "webauthnUrl": "https://app.local.tuta.com:9000/webauthn",
      "legacyWebauthnUrl": "https://local.tutanota.com:9000/webauthn",
      "webauthnMobileUrl": "https://app.local.tuta.com:9000/webauthnmobile",
      "legacyWebauthnMobileUrl": "https://local.tutanota.com:9000/webauthnmobile",
      "webauthnRpId": "tuta.com",
      "u2fAppId": "https://app.local.tuta.com/u2f-appid.json",
      "giftCardBaseUrl": "https://app.local.tuta.com:9000/giftcard",
      "referralBaseUrl": "https://app.local.tuta.com:9000/signup",
      "websiteBaseUrl": "https://local.tuta.com:9000"
    },
    "localhost": {
      "firstPartyDomain": true,
      "partneredDomainTransitionUrl": "http://localhost:9000",
      "apiUrl": "http://localhost:9000",
      "paymentUrl": "http://localhost:9000/braintree.html",
      "webauthnUrl": "http://localhost:9000/webauthn",
      "legacyWebauthnUrl": "http://localhost:9000/webauthn",
      "webauthnMobileUrl": "http://localhost:9000/webauthnmobile",
      "legacyWebauthnMobileUrl": "http://localhost:9000/webauthnmobile",
      "webauthnRpId": "localhost",
      "u2fAppId": "http://localhost:9000/u2f-appid.json",
      "giftCardBaseUrl": "http://localhost:9000/giftcard",
      "referralBaseUrl": "http://localhost:9000/signup",
      "websiteBaseUrl": "https://tuta.com"
    },
    "{hostname}": {
      "firstPartyDomain": false,
      "partneredDomainTransitionUrl": "{protocol}//{hostname}",
      "apiUrl": "{protocol}//{hostname}",
      "paymentUrl": "https://pay.tutanota.com/braintree.html",
      "webauthnUrl": "{protocol}//{hostname}/webauthn",
      "legacyWebauthnUrl": "{protocol}//{hostname}/webauthn",
      "webauthnMobileUrl": "{protocol}//{hostname}/webauthnmobile",
      "legacyWebauthnMobileUrl": "{protocol}//{hostname}/webauthnmobile",
      "webauthnRpId": "{hostname}",
      "u2fAppId": "{protocol}//{hostname}/u2f-appid.json",
      "giftCardBaseUrl": "https://app.tuta.com/giftcard",
      "referralBaseUrl": "https://app.tuta.com/signup",
      "websiteBaseUrl": "https://tuta.com"
    }
  },
  "platformId": null
};
const __NODE_GYP_better_sqlite3 = `./better-sqlite3.darwin-${typeof process !== 'undefined' ? process.arch : "unknown"}.node`
import { mithril_default } from "./mithril-Csg4iNnm.js";
import { NBSP, noOp } from "./dist-CJHwsXKY.js";
import { assertMainOrNode } from "./Env-D5xGlXfw.js";
import { px, size, styles, theme } from "./HtmlUtils-C-ecR7U7.js";
import { BootIcons } from "./Icon-BuqNK7vz.js";
import { getContactListName } from "./ContactUtils-Bbon2oOk.js";
import { ColumnEmptyMessageBox } from "./ColumnEmptyMessageBox-TSIJJX7z.js";
import { List, MultiselectMode } from "./List-CdKNFQkI.js";
import { SelectableRowContainer, checkboxOpacity, scaleXHide, scaleXShow, selectableRowAnimParams, shouldAlwaysShowMultiselectCheckbox } from "./SelectableRowContainer-CWm9GtOE.js";

//#region ../src/common/gui/ListColumnWrapper.ts
var ListColumnWrapper = class {
	view(vnode) {
		return mithril_default(".flex.flex-column.fill-absolute", [vnode.attrs.headerContent ? mithril_default(".flex.flex-column.justify-center.plr-safe-inset", vnode.attrs.headerContent) : null, mithril_default(".rel.flex-grow", vnode.children)]);
	}
};

//#endregion
//#region ../src/mail-app/contacts/view/ContactRow.ts
const shiftByForCheckbox = px(size.checkbox_size + size.hpad);
const translateXShow = `translateX(${shiftByForCheckbox})`;
const translateXHide = "translateX(0)";
var ContactRow = class {
	top;
	domElement = null;
	entity;
	selectionUpdater;
	domName;
	domAddress;
	checkboxDom;
	checkboxWasVisible;
	constructor(onSelected, shouldShowCheckbox) {
		this.onSelected = onSelected;
		this.shouldShowCheckbox = shouldShowCheckbox;
		this.top = 0;
		this.entity = null;
		this.checkboxWasVisible = this.shouldShowCheckbox();
	}
	update(contact, selected, isInMultiSelect) {
		this.entity = contact;
		this.selectionUpdater(selected, isInMultiSelect);
		this.showCheckboxAnimated(this.shouldShowCheckbox() || isInMultiSelect);
		checkboxOpacity(this.checkboxDom, selected);
		this.checkboxDom.checked = selected && isInMultiSelect;
		this.domName.textContent = getContactListName(contact);
		this.domAddress.textContent = contact.mailAddresses && contact.mailAddresses.length > 0 ? contact.mailAddresses[0].address : NBSP;
	}
	/**
	* Only the structure is managed by mithril. We set all contents on our own (see update) in order to avoid the vdom overhead (not negligible on mobiles)
	*/
	render() {
		return mithril_default(SelectableRowContainer, {
			oncreate: (vnode) => {
				Promise.resolve().then(() => this.showCheckbox(this.shouldShowCheckbox()));
			},
			onSelectedChangeRef: (updater) => this.selectionUpdater = updater
		}, mithril_default(".mt-xs.abs", [mithril_default("input.checkbox.list-checkbox", {
			type: "checkbox",
			style: { transformOrigin: "left" },
			onclick: (e) => {
				e.stopPropagation();
			},
			onchange: () => {
				if (this.entity) this.onSelected(this.entity, this.checkboxDom.checked);
			},
			oncreate: (vnode) => {
				this.checkboxDom = vnode.dom;
				checkboxOpacity(this.checkboxDom, false);
			}
		})]), mithril_default(".flex.col.overflow-hidden.flex-grow", [mithril_default(".text-ellipsis.badge-line-height", { oncreate: (vnode) => this.domName = vnode.dom }), mithril_default(".text-ellipsis.smaller.mt-xxs", { oncreate: (vnode) => this.domAddress = vnode.dom })]));
	}
	showCheckboxAnimated(show) {
		if (this.checkboxWasVisible === show) return;
		if (show) {
			this.domName.style.paddingRight = shiftByForCheckbox;
			this.domAddress.style.paddingRight = shiftByForCheckbox;
			this.checkboxDom.style.display = "";
			const nameAnim = this.domName.animate({ transform: [translateXHide, translateXShow] }, selectableRowAnimParams);
			const addressAnim = this.domAddress.animate({ transform: [translateXHide, translateXShow] }, selectableRowAnimParams);
			const checkboxAnim = this.checkboxDom.animate({ transform: [scaleXHide, scaleXShow] }, selectableRowAnimParams);
			Promise.all([
				nameAnim.finished,
				addressAnim.finished,
				checkboxAnim.finished
			]).then(() => {
				nameAnim.cancel();
				addressAnim.cancel();
				checkboxAnim.cancel();
				this.showCheckbox(show);
			}, noOp);
		} else {
			this.domName.style.paddingRight = "0";
			this.domAddress.style.paddingRight = "0";
			const nameAnim = this.domName.animate({ transform: [translateXShow, translateXHide] }, selectableRowAnimParams);
			const addressAnim = this.domAddress.animate({ transform: [translateXShow, translateXHide] }, selectableRowAnimParams);
			const checkboxAnim = this.checkboxDom.animate({ transform: [scaleXShow, scaleXHide] }, selectableRowAnimParams);
			Promise.all([
				nameAnim.finished,
				addressAnim.finished,
				checkboxAnim.finished
			]).then(() => {
				nameAnim.cancel();
				addressAnim.cancel();
				checkboxAnim.cancel();
				this.showCheckbox(show);
			}, noOp);
		}
		this.checkboxWasVisible = show;
	}
	showCheckbox(show) {
		let translate;
		let scale;
		let padding;
		if (show) {
			translate = translateXShow;
			scale = scaleXShow;
			padding = shiftByForCheckbox;
		} else {
			translate = translateXHide;
			scale = scaleXHide;
			padding = "0";
		}
		this.domAddress.style.transform = translate;
		this.domName.style.transform = translate;
		this.domAddress.style.paddingRight = padding;
		this.domName.style.paddingRight = padding;
		this.checkboxDom.style.transform = scale;
		this.checkboxDom.style.display = show ? "" : "none";
	}
};

//#endregion
//#region ../src/mail-app/contacts/view/ContactListView.ts
assertMainOrNode();
var ContactListView = class {
	contactViewModel = null;
	view({ attrs: { contactViewModel, onSingleSelection } }) {
		this.contactViewModel = contactViewModel;
		return mithril_default(ListColumnWrapper, { headerContent: null }, contactViewModel.listModel.isEmptyAndDone() ? mithril_default(ColumnEmptyMessageBox, {
			color: theme.list_message_bg,
			message: "noContacts_msg",
			icon: BootIcons.Contacts
		}) : mithril_default(List, {
			renderConfig: this.renderConfig,
			state: contactViewModel.listState(),
			onLoadMore: () => {},
			onRetryLoading: () => {
				contactViewModel.listModel.retryLoading();
			},
			onSingleSelection: (item) => {
				contactViewModel.listModel.onSingleSelection(item);
				onSingleSelection();
			},
			onSingleTogglingMultiselection: (item) => {
				contactViewModel.listModel.onSingleInclusiveSelection(item, styles.isSingleColumnLayout());
			},
			onRangeSelectionTowards: (item) => {
				contactViewModel.listModel.selectRangeTowards(item);
			},
			onStopLoading() {
				contactViewModel.listModel.stopLoading();
			}
		}));
	}
	renderConfig = {
		itemHeight: size.list_row_height,
		multiselectionAllowed: MultiselectMode.Enabled,
		swipe: null,
		createElement: (dom) => {
			return new KindaContactRow(dom, (item) => this.contactViewModel?.listModel.onSingleExclusiveSelection(item));
		}
	};
};
var KindaContactRow = class {
	cr;
	domElement;
	entity = null;
	constructor(dom, onToggleSelection, shouldShowCheckbox = () => shouldAlwaysShowMultiselectCheckbox()) {
		this.cr = new ContactRow(onToggleSelection, shouldShowCheckbox);
		this.domElement = dom;
		mithril_default.render(dom, this.cr.render());
	}
	update(item, selected, multiselect) {
		this.entity = item;
		this.cr.update(item, selected, multiselect);
	}
	render() {
		return this.cr.render();
	}
};

//#endregion
export { ContactListView, KindaContactRow, ListColumnWrapper, shiftByForCheckbox, translateXHide, translateXShow };
//# sourceMappingURL=ContactListView-A76nls8J.js.map