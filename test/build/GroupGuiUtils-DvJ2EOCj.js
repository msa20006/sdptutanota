
globalThis.env = {
  "staticUrl": "http://localhost:9000",
  "versionNumber": "264.250130.1",
  "dist": false,
  "mode": "Test",
  "timeout": 20000,
  "domainConfigs": {
    "mail.tutanota.com": {
      "firstPartyDomain": true,
      "partneredDomainTransitionUrl": "https://app.tuta.com",
      "apiUrl": "https://mail.tutanota.com",
      "paymentUrl": "https://pay.tutanota.com/braintree.html",
      "webauthnUrl": "https://app.tuta.com/webauthn",
      "legacyWebauthnUrl": "https://mail.tutanota.com/webauthn",
      "webauthnMobileUrl": "https://app.tuta.com/webauthnmobile",
      "legacyWebauthnMobileUrl": "https://mail.tutanota.com/webauthnmobile",
      "webauthnRpId": "tutanota.com",
      "u2fAppId": "https://tutanota.com/u2f-appid.json",
      "giftCardBaseUrl": "https://app.tuta.com/giftcard",
      "referralBaseUrl": "https://app.tuta.com/signup",
      "websiteBaseUrl": "https://tutanota.com"
    },
    "test.tutanota.com": {
      "firstPartyDomain": true,
      "partneredDomainTransitionUrl": "https://app.test.tuta.com",
      "apiUrl": "https://test.tutanota.com",
      "paymentUrl": "https://pay.test.tutanota.com/braintree.html",
      "webauthnUrl": "https://app.test.tuta.com/webauthn",
      "legacyWebauthnUrl": "https://test.tutanota.com/webauthn",
      "webauthnMobileUrl": "https://app.test.tuta.com/webauthnmobile",
      "legacyWebauthnMobileUrl": "https://test.tutanota.com/webauthnmobile",
      "webauthnRpId": "tutanota.com",
      "u2fAppId": "https://test.tutanota.com/u2f-appid.json",
      "giftCardBaseUrl": "https://app.test.tuta.com/giftcard",
      "referralBaseUrl": "https://app.test.tuta.com/signup",
      "websiteBaseUrl": "https://tutanota.com"
    },
    "app.local.tutanota.com": {
      "firstPartyDomain": true,
      "partneredDomainTransitionUrl": "https://app.local.tuta.com:9000",
      "apiUrl": "https://app.local.tutanota.com:9000",
      "paymentUrl": "https://local.tutanota.com:9000/client/build/braintree.html",
      "webauthnUrl": "https://app.local.tuta.com:9000/client/build/webauthn",
      "legacyWebauthnUrl": "https://local.tutanota.com:9000/client/build/webauthn",
      "webauthnMobileUrl": "https://app.local.tuta.com:9000/client/build/webauthnmobile",
      "legacyWebauthnMobileUrl": "https://local.tutanota.com:9000/client/build/webauthnmobile",
      "webauthnRpId": "tutanota.com",
      "u2fAppId": "https://local.tutanota.com/u2f-appid.json",
      "giftCardBaseUrl": "https://app.local.tuta.com:9000/giftcard",
      "referralBaseUrl": "https://app.local.tuta.com:9000/signup",
      "websiteBaseUrl": "https://local.tutanota.com:9000"
    },
    "app.tuta.com": {
      "firstPartyDomain": true,
      "partneredDomainTransitionUrl": "https://mail.tutanota.com",
      "apiUrl": "https://app.tuta.com",
      "paymentUrl": "https://pay.tutanota.com/braintree.html",
      "webauthnUrl": "https://app.tuta.com/webauthn",
      "legacyWebauthnUrl": "https://mail.tutanota.com/webauthn",
      "webauthnMobileUrl": "https://app.tuta.com/webauthnmobile",
      "legacyWebauthnMobileUrl": "https://mail.tutanota.com/webauthnmobile",
      "webauthnRpId": "tuta.com",
      "u2fAppId": "https://app.tuta.com/u2f-appid.json",
      "giftCardBaseUrl": "https://app.tuta.com/giftcard",
      "referralBaseUrl": "https://app.tuta.com/signup",
      "websiteBaseUrl": "https://tuta.com"
    },
    "app.test.tuta.com": {
      "firstPartyDomain": true,
      "partneredDomainTransitionUrl": "https://test.tutanota.com",
      "apiUrl": "https://app.test.tuta.com",
      "paymentUrl": "https://pay.test.tutanota.com/braintree.html",
      "webauthnUrl": "https://app.test.tuta.com/webauthn",
      "legacyWebauthnUrl": "https://test.tutanota.com/webauthn",
      "webauthnMobileUrl": "https://app.test.tuta.com/webauthnmobile",
      "legacyWebauthnMobileUrl": "https://test.tutanota.com/webauthnmobile",
      "webauthnRpId": "tuta.com",
      "u2fAppId": "https://app.test.tuta.com/u2f-appid.json",
      "giftCardBaseUrl": "https://app.test.tuta.com/giftcard",
      "referralBaseUrl": "https://app.test.tuta.com/signup",
      "websiteBaseUrl": "https://test.tuta.com"
    },
    "app.local.tuta.com": {
      "firstPartyDomain": true,
      "partneredDomainTransitionUrl": "https://app.local.tutanota.com:9000",
      "apiUrl": "https://app.local.tuta.com:9000",
      "paymentUrl": "https://app.local.tuta.com:9000/braintree.html",
      "webauthnUrl": "https://app.local.tuta.com:9000/webauthn",
      "legacyWebauthnUrl": "https://local.tutanota.com:9000/webauthn",
      "webauthnMobileUrl": "https://app.local.tuta.com:9000/webauthnmobile",
      "legacyWebauthnMobileUrl": "https://local.tutanota.com:9000/webauthnmobile",
      "webauthnRpId": "tuta.com",
      "u2fAppId": "https://app.local.tuta.com/u2f-appid.json",
      "giftCardBaseUrl": "https://app.local.tuta.com:9000/giftcard",
      "referralBaseUrl": "https://app.local.tuta.com:9000/signup",
      "websiteBaseUrl": "https://local.tuta.com:9000"
    },
    "localhost": {
      "firstPartyDomain": true,
      "partneredDomainTransitionUrl": "http://localhost:9000",
      "apiUrl": "http://localhost:9000",
      "paymentUrl": "http://localhost:9000/braintree.html",
      "webauthnUrl": "http://localhost:9000/webauthn",
      "legacyWebauthnUrl": "http://localhost:9000/webauthn",
      "webauthnMobileUrl": "http://localhost:9000/webauthnmobile",
      "legacyWebauthnMobileUrl": "http://localhost:9000/webauthnmobile",
      "webauthnRpId": "localhost",
      "u2fAppId": "http://localhost:9000/u2f-appid.json",
      "giftCardBaseUrl": "http://localhost:9000/giftcard",
      "referralBaseUrl": "http://localhost:9000/signup",
      "websiteBaseUrl": "https://tuta.com"
    },
    "{hostname}": {
      "firstPartyDomain": false,
      "partneredDomainTransitionUrl": "{protocol}//{hostname}",
      "apiUrl": "{protocol}//{hostname}",
      "paymentUrl": "https://pay.tutanota.com/braintree.html",
      "webauthnUrl": "{protocol}//{hostname}/webauthn",
      "legacyWebauthnUrl": "{protocol}//{hostname}/webauthn",
      "webauthnMobileUrl": "{protocol}//{hostname}/webauthnmobile",
      "legacyWebauthnMobileUrl": "{protocol}//{hostname}/webauthnmobile",
      "webauthnRpId": "{hostname}",
      "u2fAppId": "{protocol}//{hostname}/u2f-appid.json",
      "giftCardBaseUrl": "https://app.tuta.com/giftcard",
      "referralBaseUrl": "https://app.tuta.com/signup",
      "websiteBaseUrl": "https://tuta.com"
    }
  },
  "platformId": null
};
const __NODE_GYP_better_sqlite3 = `./better-sqlite3.darwin-${typeof process !== 'undefined' ? process.arch : "unknown"}.node`
import { lang } from "./LanguageViewModel-BNC5ekpO.js";
import { GroupType, MailMethod } from "./TutanotaConstants-3bwAESYA.js";
import { getDefaultGroupName, getInvitationGroupType, getSharedGroupName } from "./GroupUtils-CpT2lvVS.js";
import { locator$1 as locator } from "./CommonLocator-Csg4iNnm.js";
import { showProgressDialog } from "./ProgressDialog-CJfJjh62.js";
import { getDefaultSender, getEnabledMailAddressesWithUser, getSenderNameForUser } from "./SharedMailUtils-AmFaSJP6.js";

//#region ../src/common/sharing/GroupSharingUtils.ts
function sendShareNotificationEmail(sharedGroupInfo, recipients, texts) {
	locator.mailboxModel.getUserMailboxDetails().then((mailboxDetails) => {
		const senderMailAddress = getDefaultSender(locator.logins, mailboxDetails);
		const userName = getSenderNameForUser(mailboxDetails, locator.logins.getUserController());
		const bcc = recipients.map(({ name, address }) => ({
			name,
			address
		}));
		let senderDisplayName;
		if (!userName) senderDisplayName = senderMailAddress;
else senderDisplayName = `${userName} &lt;${senderMailAddress}&gt;`;
		_sendNotificationEmail({ bcc }, texts.shareEmailSubject, texts.shareEmailBody(senderDisplayName, getSharedGroupName(sharedGroupInfo, locator.logins.getUserController(), true)), senderMailAddress);
	});
}
function sendAcceptNotificationEmail(invitation, texts) {
	const to = [{
		name: invitation.inviterName,
		address: invitation.inviterMailAddress
	}];
	const userName = invitation.inviterMailAddress;
	const invitee = invitation.inviteeMailAddress;
	const groupName = invitation.sharedGroupName || getDefaultGroupName(getInvitationGroupType(invitation));
	const senderMailAddress = invitation.inviteeMailAddress;
	_sendNotificationEmail({ to }, texts.acceptEmailSubject, texts.acceptEmailBody(userName, invitee, groupName), senderMailAddress);
}
function sendRejectNotificationEmail(invitation, texts) {
	const to = [{
		name: invitation.inviterName,
		address: invitation.inviterMailAddress
	}];
	const userName = invitation.inviterMailAddress;
	const invitee = invitation.inviteeMailAddress;
	const groupName = invitation.sharedGroupName || getDefaultGroupName(getInvitationGroupType(invitation));
	const senderMailAddress = invitation.inviteeMailAddress;
	_sendNotificationEmail({ to }, texts.declineEmailSubject, texts.declineEmailBody(userName, invitee, groupName), senderMailAddress);
}
function _sendNotificationEmail(recipients, subject, body, senderMailAddress) {
	import("./HtmlSanitizer-DJqF9m1z.js").then(({ htmlSanitizer }) => {
		const sanitizedBody = htmlSanitizer.sanitizeHTML(body, {
			blockExternalContent: false,
			allowRelativeLinks: false,
			usePlaceholderForInlineImages: false
		}).html;
		locator.mailboxModel.getUserMailboxDetails().then(async (mailboxDetails) => {
			const sender = getEnabledMailAddressesWithUser(mailboxDetails, locator.logins.getUserController().userGroupInfo).includes(senderMailAddress) ? senderMailAddress : getDefaultSender(locator.logins, mailboxDetails);
			const confirm = () => Promise.resolve(true);
			const wait = showProgressDialog;
			const mailboxProperties = await locator.mailboxModel.getMailboxProperties(mailboxDetails.mailboxGroupRoot);
			const model = await locator.sendMailModel(mailboxDetails, mailboxProperties);
			await model.initWithTemplate(recipients, subject, sanitizedBody, [], true, sender);
			await model.send(MailMethod.NONE, confirm, wait, "tooManyMailsAuto_msg");
		});
	});
}

//#endregion
//#region ../src/common/sharing/GroupGuiUtils.ts
const CALENDAR_SHARING_TEXTS = () => ({
	groupNameLabel: "calendarName_label",
	participantsLabel: (groupName) => lang.get("calendarParticipants_label", { "{name}": groupName }),
	acceptEmailSubject: lang.get("shareCalendarAcceptEmailSubject_msg"),
	acceptEmailBody: (userName, invitee, groupName) => lang.get("shareCalendarAcceptEmailBody_msg", {
		"{invitee}": invitee,
		"{calendarName}": groupName,
		"{recipientName}": userName
	}),
	declineEmailSubject: lang.get("shareCalendarDeclineEmailSubject_msg"),
	declineEmailBody: (userName, invitee, groupName) => lang.get("shareCalendarDeclineEmailBody_msg", {
		"{invitee}": invitee,
		"{calendarName}": groupName,
		"{recipientName}": userName
	}),
	shareEmailSubject: lang.get("shareCalendarInvitationEmailSubject_msg"),
	shareEmailBody: (sender, calendarName) => lang.get("shareCalendarInvitationEmailBody_msg", {
		"{inviter}": sender,
		"{calendarName}": calendarName
	}),
	addMemberMessage: (_) => `${lang.get("shareCalendarWarning_msg")} ${lang.get("shareWarningAliases_msg")}`,
	removeMemberMessage: (calendarName, invitee) => lang.get("removeCalendarParticipantConfirm_msg", {
		"{participant}": invitee,
		"{calendarName}": calendarName
	}),
	alreadyGroupMemberMessage: "sharedCalendarAlreadyMember_msg",
	receivedGroupInvitationMessage: `${lang.get("shareCalendarWarning_msg")} ${lang.get("shareWarningAliases_msg")}`,
	sharedGroupDefaultCustomName: (groupOwnerName) => getDefaultGroupName(GroupType.Calendar),
	yourCustomNameLabel: (groupName) => lang.get("calendarCustomName_label", { "{customName}": groupName })
});
const TEMPLATE_SHARING_TEXTS = () => ({
	groupNameLabel: "templateGroupName_label",
	participantsLabel: (groupName) => lang.get("sharedGroupParticipants_label", { "{groupName}": groupName }),
	acceptEmailSubject: lang.get("acceptTemplateGroupEmailSubject_msg"),
	acceptEmailBody: (userName, invitee, groupName) => `${lang.get("sharedGroupAcceptEmailBody_msg", {
		"{recipientName}": userName,
		"{invitee}": invitee,
		"{groupName}": groupName
	})} ${lang.get("automatedMessage_msg")}`,
	declineEmailSubject: lang.get("declineTemplateGroupEmailSubject_msg"),
	declineEmailBody: (userName, invitee, groupName) => `${lang.get("sharedGroupDeclineEmailBody_msg", {
		"{recipientName}": userName,
		"{invitee}": invitee,
		"{groupName}": groupName
	})} ${lang.get("automatedMessage_msg")}`,
	shareEmailSubject: lang.get("shareTemplateGroupEmailSubject_msg"),
	shareEmailBody: (sharer, groupName) => lang.get("shareTemplateGroupEmailBody_msg", {
		"{inviter}": sharer,
		"{groupName}": groupName
	}),
	addMemberMessage: (groupName) => `${lang.get("shareGroupWarning_msg")} ${lang.get("shareWarningAliases_msg")}`,
	removeMemberMessage: (groupName, member) => lang.get("removeSharedMemberConfirm_msg", {
		"{member}": member,
		"{groupName}": groupName
	}),
	alreadyGroupMemberMessage: "alreadySharedGroupMember_msg",
	receivedGroupInvitationMessage: `${lang.get("shareGroupWarning_msg")} ${lang.get("shareWarningAliases_msg")}`,
	sharedGroupDefaultCustomName: (invitation) => lang.get("sharedTemplateGroupDefaultName_label", { "{ownerName}": invitation.inviterName || invitation.inviterMailAddress }),
	yourCustomNameLabel: (groupName) => lang.get("customName_label", { "{customName}": groupName })
});
const CONTACT_LIST_SHARING_TEXTS = () => ({
	groupNameLabel: "contactListName_label",
	participantsLabel: (groupName) => lang.get("sharedGroupParticipants_label", { "{groupName}": groupName }),
	acceptEmailSubject: lang.get("acceptContactListEmailSubject_msg"),
	acceptEmailBody: (userName, invitee, groupName) => `${lang.get("sharedGroupAcceptEmailBody_msg", {
		"{recipientName}": userName,
		"{invitee}": invitee,
		"{groupName}": groupName
	})} ${lang.get("automatedMessage_msg")}`,
	declineEmailSubject: lang.get("declineContactListEmailSubject_msg"),
	declineEmailBody: (userName, invitee, groupName) => `${lang.get("sharedGroupDeclineEmailBody_msg", {
		"{recipientName}": userName,
		"{invitee}": invitee,
		"{groupName}": groupName
	})} ${lang.get("automatedMessage_msg")}`,
	shareEmailSubject: lang.get("shareContactListEmailSubject_msg"),
	shareEmailBody: (sharer, groupName) => `${lang.get("shareContactListEmailBody_msg", {
		"{inviter}": sharer,
		"{groupName}": groupName
	})} ${lang.get("automatedMessage_msg")}`,
	addMemberMessage: (groupName) => `${lang.get("shareGroupWarning_msg")} ${lang.get("shareWarningAliases_msg")}`,
	removeMemberMessage: (groupName, member) => lang.get("removeSharedMemberConfirm_msg", {
		"{member}": member,
		"{groupName}": groupName
	}),
	alreadyGroupMemberMessage: "alreadySharedGroupMember_msg",
	receivedGroupInvitationMessage: `${lang.get("shareGroupWarning_msg")} ${lang.get("shareWarningAliases_msg")}`,
	sharedGroupDefaultCustomName: (invitation) => lang.get("sharedContactListDefaultName_label", { "{ownerName}": invitation.inviterName || invitation.inviterMailAddress }),
	yourCustomNameLabel: (groupName) => lang.get("customName_label", { "{customName}": groupName })
});
function getTextsForGroupType(groupType) {
	switch (groupType) {
		case GroupType.Calendar: return CALENDAR_SHARING_TEXTS();
		case GroupType.Template: return TEMPLATE_SHARING_TEXTS();
		case GroupType.ContactList: return CONTACT_LIST_SHARING_TEXTS();
	}
}

//#endregion
export { getTextsForGroupType, sendAcceptNotificationEmail, sendRejectNotificationEmail, sendShareNotificationEmail };
//# sourceMappingURL=GroupGuiUtils-DvJ2EOCj.js.map