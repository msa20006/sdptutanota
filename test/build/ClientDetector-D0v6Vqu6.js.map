{"version":3,"file":"ClientDetector-D0v6Vqu6.js","names":["userAgent: string","platform: string","appType: AppType","prop: string","value: string","client: ClientDetector"],"sources":["../../src/common/misc/ClientConstants.ts","../../src/common/misc/ClientDetector.ts"],"sourcesContent":["import { assertMainOrNodeBoot } from \"../api/common/Env\"\n\nassertMainOrNodeBoot()\n\nexport enum ErrorReportClientType {\n\tBrowser = \"0\",\n\tAndroid = \"1\",\n\tIos = \"2\",\n\tMacOS = \"3\",\n\tLinux = \"4\",\n\tWindows = \"5\",\n}\n\nexport const enum BrowserType {\n\tCHROME = \"Chrome\",\n\tFIREFOX = \"Firefox\",\n\tEDGE = \"Edge\",\n\tSAFARI = \"Safari\",\n\tANDROID = \"Android\",\n\tOPERA = \"Opera\",\n\tOTHER = \"Other\",\n}\n\nexport const enum DeviceType {\n\tIPHONE = \"iPhone\",\n\tIPAD = \"iPad\",\n\tANDROID = \"Android\",\n\tDESKTOP = \"Desktop\",\n\tOTHER_MOBILE = \"Other mobile\",\n}\n\n/**\n * Some information about the environment which might be useful to the worker part\n */\nexport type BrowserData = {\n\t/**\n\t * If true then should work around browsers not scheduling microtasks correctly (problems with IndexedDB).\n\t * {@see PromiseUtils.js}\n\t * */\n\tneedsMicrotaskHack: boolean\n\n\t/**\n\t * If true then cannot rely on auto generated IDs, IDs need to be provided manually\n\t */\n\tneedsExplicitIDBIds: boolean\n\tindexedDbSupported: boolean\n}\n\nexport const companyTeamLabel = \"Tuta Team\"\n\nexport enum AppType {\n\tIntegrated = \"0\",\n\tMail = \"1\",\n\tCalendar = \"2\",\n}\n","import { assertMainOrNodeBoot, isApp, Mode } from \"../api/common/Env\"\nimport { AppType, BrowserData, BrowserType, DeviceType } from \"./ClientConstants\"\n\nassertMainOrNodeBoot()\n\nexport class ClientDetector {\n\tuserAgent!: string\n\tbrowser!: BrowserType\n\tbrowserVersion!: number\n\tdevice!: DeviceType\n\toverflowAuto!: string\n\tisMacOS!: boolean\n\tappType!: AppType\n\n\tconstructor() {}\n\n\tinit(userAgent: string, platform: string, appType: AppType = AppType.Integrated) {\n\t\tthis.userAgent = userAgent\n\t\tthis.browser = BrowserType.OTHER\n\t\tthis.browserVersion = 0\n\t\tthis.device = DeviceType.DESKTOP\n\t\tthis.appType = appType\n\n\t\tthis._setBrowserAndVersion()\n\n\t\tthis._setDeviceInfo()\n\n\t\tthis.overflowAuto = this.cssPropertyValueSupported(\"overflow\", \"overlay\") ? \"overlay\" : \"auto\"\n\t\tthis.isMacOS = platform.indexOf(\"Mac\") !== -1\n\t}\n\n\t/**\n\t * This function uses syntax constructs which we want to make sure are supported. If they are not then this file cannot be imported.\n\t */\n\tsyntaxChecks() {\n\t\t// By default rollup disables tree-shaking inside the try-catch.\n\t\ttry {\n\t\t\tconst arrowFunction = () => {\n\t\t\t\treturn 1\n\t\t\t}\n\n\t\t\tlet aLet = 2\n\n\t\t\tfunction* testGenerator() {}\n\n\t\t\tasync function testAsync() {}\n\n\t\t\tfunction testDefaultArgs(a = 2) {}\n\n\t\t\ttestGenerator()\n\t\t\ttestAsync()\n\t\t\ttestDefaultArgs()\n\t\t\tconst anArray = [1, 2, 3]\n\t\t\tconst spreadArray = [...anArray]\n\t\t\tconst dynamicString = \"\"\n\t\t\tconst impossibleCondition = arrowFunction() === aLet\n\n\t\t\tif (impossibleCondition) {\n\t\t\t\timport(dynamicString)\n\t\t\t}\n\n\t\t\tconst objectSyntax = {\n\t\t\t\t[dynamicString]: true,\n\n\t\t\t\ttestFn() {},\n\n\t\t\t\tget accessor() {\n\t\t\t\t\treturn null\n\t\t\t\t},\n\n\t\t\t\tset accessor(newValue) {},\n\t\t\t}\n\t\t\tconst templateString = `test ${dynamicString}`\n\t\t\tconst x = 1\n\t\t\tconst y = 2\n\t\t\tconst propertyShorthand = {\n\t\t\t\tx,\n\t\t\t\ty,\n\t\t\t}\n\t\t\tconst { x: x2, y: y2 } = propertyShorthand\n\t\t\tconst [a1, a2, ...arest] = anArray\n\n\t\t\tclass WithStatisMember {\n\t\t\t\tstatic aFuncton() {}\n\t\t\t}\n\n\t\t\tfor (const item of testGenerator()) {\n\t\t\t\t/* empty */\n\t\t\t}\n\t\t} catch (e) {\n\t\t\t/* empty */\n\t\t}\n\t}\n\n\ttestBuiltins(): boolean {\n\t\treturn (\n\t\t\ttypeof Set !== \"undefined\" &&\n\t\t\ttypeof Map !== \"undefined\" &&\n\t\t\ttypeof Array.prototype.includes === \"function\" &&\n\t\t\ttypeof Object.entries === \"function\" &&\n\t\t\ttypeof Object.values === \"function\" &&\n\t\t\ttypeof Object.fromEntries === \"function\" &&\n\t\t\ttypeof Symbol !== \"undefined\" &&\n\t\t\ttypeof Uint8Array !== \"undefined\" &&\n\t\t\ttypeof Proxy !== \"undefined\" &&\n\t\t\ttypeof Reflect !== \"undefined\" &&\n\t\t\ttypeof Promise.prototype.finally !== \"undefined\" &&\n\t\t\ttypeof String.prototype.replaceAll === \"function\" &&\n\t\t\ttypeof BigInt !== \"undefined\"\n\t\t)\n\t}\n\n\ttestCss(): boolean {\n\t\ttry {\n\t\t\tdocument.querySelector(\"blockquote:not(blockquote blockquote)\")\n\t\t\tdocument.querySelectorAll(\":where(.mouse-nav)\")\n\t\t\treturn true\n\t\t} catch (e) {\n\t\t\treturn false\n\t\t}\n\t}\n\n\t/**\n\t * Browsers which support these features are supported\n\t */\n\tisSupported(): boolean {\n\t\tthis.syntaxChecks()\n\t\treturn this.isSupportedBrowserVersion() && this.testBuiltins() && this.websockets() && this.testCss()\n\t}\n\n\tisMobileDevice(): boolean {\n\t\treturn this.device !== DeviceType.DESKTOP\n\t}\n\n\tisDesktopDevice(): boolean {\n\t\treturn this.device === DeviceType.DESKTOP\n\t}\n\n\t/**\n\t * @see https://github.com/Modernizr/Modernizr/blob/5e3f359bfc9aa511543ece60bd8a6ea8aa7defd3/feature-detects/websockets.js\n\t */\n\twebsockets(): boolean {\n\t\treturn \"WebSocket\" in window && window.WebSocket.CLOSING === 2\n\t}\n\n\tlocalStorage(): boolean {\n\t\ttry {\n\t\t\treturn localStorage != null\n\t\t} catch (e) {\n\t\t\t// DOMException is thrown if all cookies are disabled\n\t\t\treturn false\n\t\t}\n\t}\n\n\t/**\n\t * We need WebAssembly for Argon2.\n\t *\n\t * @returns true if webassembly is supported\n\t */\n\twebassembly(): boolean {\n\t\treturn typeof WebAssembly === \"object\" && typeof WebAssembly.instantiate === \"function\"\n\t}\n\n\t/**\n\t * @see https://github.com/Modernizr/Modernizr/blob/master/feature-detects/history.js\n\t */\n\thistory(): boolean {\n\t\treturn window.history && \"pushState\" in window.history\n\t}\n\n\t/**\n\t * @see https://github.com/Modernizr/Modernizr/blob/master/feature-detects/network/xhr2.js\n\t */\n\txhr2(): boolean {\n\t\treturn \"XMLHttpRequest\" in window\n\t}\n\n\tindexedDb(): boolean {\n\t\ttry {\n\t\t\treturn window.indexedDB != null\n\t\t} catch (e) {\n\t\t\treturn false\n\t\t}\n\t}\n\n\t_setBrowserAndVersion() {\n\t\tconst operaIndex1 = this.userAgent.indexOf(\"Opera\")\n\t\tconst operaIndex2 = this.userAgent.indexOf(\"OPR/\")\n\t\tconst firefoxIndex = this.userAgent.indexOf(\"Firefox/\")\n\t\tconst paleMoonIndex = this.userAgent.indexOf(\"PaleMoon/\")\n\t\tconst iceweaselIndex = this.userAgent.indexOf(\"Iceweasel/\")\n\t\tconst chromeIndex = this.userAgent.indexOf(\"Chrome/\")\n\t\tconst chromeIosIndex = this.userAgent.indexOf(\"CriOS/\")\n\t\tconst safariIndex = this.userAgent.indexOf(\"Safari/\")\n\t\tconst edgeIndex = this.userAgent.indexOf(\"Edge\") // \"Old\" edge based on EdgeHTML, \"new\" one based on Blink has only \"Edg\"\n\n\t\tconst androidIndex = this.userAgent.indexOf(\"Android\")\n\t\tlet versionIndex = -1\n\n\t\tif (edgeIndex !== -1) {\n\t\t\tthis.browser = BrowserType.EDGE\n\t\t\tversionIndex = edgeIndex + 5\n\t\t} else if (operaIndex1 !== -1) {\n\t\t\tthis.browser = BrowserType.OPERA\n\t\t\tversionIndex = this.userAgent.indexOf(\"Version/\")\n\n\t\t\tif (versionIndex !== -1) {\n\t\t\t\tversionIndex += 8\n\t\t\t} else {\n\t\t\t\tversionIndex = operaIndex1 + 6\n\t\t\t}\n\t\t} else if (operaIndex2 !== -1) {\n\t\t\tthis.browser = BrowserType.OPERA\n\t\t\tversionIndex = operaIndex2 + 4\n\t\t} else if ((firefoxIndex !== -1 || iceweaselIndex !== -1) && operaIndex1 === -1 && operaIndex2 === -1 && paleMoonIndex === -1) {\n\t\t\t// Opera may pretend to be Firefox, so it is skipped\n\t\t\tthis.browser = BrowserType.FIREFOX\n\n\t\t\tif (firefoxIndex !== -1) {\n\t\t\t\tversionIndex = firefoxIndex + 8\n\t\t\t} else {\n\t\t\t\tversionIndex = iceweaselIndex + 10\n\t\t\t}\n\t\t} else if (chromeIndex !== -1) {\n\t\t\tthis.browser = BrowserType.CHROME\n\t\t\tversionIndex = chromeIndex + 7\n\t\t} else if (androidIndex !== -1) {\n\t\t\t// default android browser\n\t\t\t// keep this check after Chrome, Firefox and Opera, because the Android browser does not identify itself in any other way\n\t\t\tthis.browser = BrowserType.ANDROID\n\t\t\tversionIndex = androidIndex + 8\n\t\t} else if (chromeIosIndex !== -1) {\n\t\t\tthis.browser = BrowserType.CHROME\n\t\t\tversionIndex = chromeIosIndex + 6\n\t\t} else if (safariIndex !== -1 && chromeIndex === -1) {\n\t\t\t// Chrome and black berry pretends to be Safari, so it is skipped\n\t\t\tthis.browser = BrowserType.SAFARI\n\t\t\t// Safari prints its version after \"Version/\"\n\t\t\tversionIndex = this.userAgent.indexOf(\"Version/\")\n\n\t\t\tif (versionIndex !== -1) {\n\t\t\t\tversionIndex += 8\n\t\t\t} else {\n\t\t\t\t// Other browsers on iOS do not usually send Version/ and we can assume that they're Safari\n\t\t\t\tthis.extractIosVersion()\n\t\t\t\treturn\n\t\t\t}\n\t\t} else if (this.userAgent.match(/iPad.*AppleWebKit/) || this.userAgent.match(/iPhone.*AppleWebKit/)) {\n\t\t\t// iPad and iPhone do not send the Safari this.userAgent when HTML-apps are directly started from the homescreen a browser version is sent neither\n\t\t\t// after \"OS\" the iOS version is sent, so use that one\n\t\t\t// Also there are a lot of browsers on iOS but they all are based on Safari so we can use the same extraction mechanism for all of them.\n\t\t\tthis.extractIosVersion()\n\t\t\treturn\n\t\t}\n\n\t\tif (versionIndex !== -1) {\n\t\t\tconst mainVersionEndIndex = this.userAgent.indexOf(\".\", versionIndex)\n\n\t\t\tif (mainVersionEndIndex !== -1) {\n\t\t\t\ttry {\n\t\t\t\t\tthis.browserVersion = Number(this.userAgent.substring(versionIndex, mainVersionEndIndex + 2)) // we recognize one digit after the '.'\n\t\t\t\t} catch (e) {\n\t\t\t\t\t/* empty */\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// if the version is not valid, the browser type is not valid, so set it to other\n\t\tif (this.browserVersion === 0) {\n\t\t\tthis.browser = BrowserType.OTHER\n\t\t}\n\t}\n\n\textractIosVersion() {\n\t\t// Extracting version does not work with iPad OS WebView because it's not in the userAgent. We could look it up\n\t\t// from Webkit version but maybe we don't need that for now.\n\t\tconst versionIndex = this.userAgent.indexOf(\" OS \")\n\n\t\tif (versionIndex !== -1) {\n\t\t\tthis.browser = BrowserType.SAFARI\n\n\t\t\ttry {\n\t\t\t\t// in case of versions like 12_1_1 get substring 12_1 and convert it to 12.1\n\t\t\t\tlet pos = versionIndex + 4\n\t\t\t\tlet hadNan = false\n\n\t\t\t\twhile (pos < this.userAgent.length) {\n\t\t\t\t\tpos++\n\n\t\t\t\t\tif (isNaN(Number(this.userAgent.charAt(pos)))) {\n\t\t\t\t\t\tif (hadNan) {\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\thadNan = true\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst numberString = this.userAgent.substring(versionIndex + 4, pos)\n\t\t\t\tthis.browserVersion = Number(numberString.replace(/_/g, \".\"))\n\t\t\t} catch (e) {\n\t\t\t\t/* empty */\n\t\t\t}\n\t\t}\n\t}\n\n\t_setDeviceInfo() {\n\t\tthis.device = DeviceType.DESKTOP\n\n\t\tif (\n\t\t\tthis.userAgent.match(/iPad.*AppleWebKit/) != null || // iPadOS does not differ in UserAgent from Safari on macOS. Use hack with TouchEvent to detect iPad\n\t\t\t// Desktop Chrome has TouchEvent but it also has Chrome in it. Mobile iOS has CriOS in it and not Chrome.\n\t\t\t(/Macintosh; Intel Mac OS X.*AppleWebKit/.test(this.userAgent) && window.TouchEvent && /.*Chrome.*/.test(this.userAgent) === false)\n\t\t) {\n\t\t\tthis.device = DeviceType.IPAD\n\t\t} else if (this.userAgent.match(/iPhone.*AppleWebKit/) != null) {\n\t\t\tthis.device = DeviceType.IPHONE\n\t\t} else if (this.userAgent.match(/Android/) != null) {\n\t\t\tif (this.userAgent.match(/Ubuntu/) != null) {\n\t\t\t\tthis.device = DeviceType.OTHER_MOBILE\n\t\t\t} else {\n\t\t\t\tthis.device = DeviceType.ANDROID\n\t\t\t}\n\t\t} else if (this.userAgent.match(/Windows NT/) != null) {\n\t\t\tthis.device = DeviceType.DESKTOP\n\t\t} else if (this.userAgent.match(/Mobile/) != null || this.userAgent.match(/Tablet/) != null) {\n\t\t\tthis.device = DeviceType.OTHER_MOBILE\n\t\t}\n\t}\n\n\tisTouchSupported(): boolean {\n\t\treturn \"ontouchstart\" in window\n\t}\n\n\tisIos(): boolean {\n\t\treturn this.device === DeviceType.IPAD || this.device === DeviceType.IPHONE\n\t}\n\n\tcssPropertyValueSupported(prop: string, value: string): boolean {\n\t\tlet d = document.createElement(\"div\") as any\n\t\td.style[prop] = value\n\t\treturn d.style[prop] === value\n\t}\n\n\tgetIdentifier(): string {\n\t\tif (env.mode === Mode.App) {\n\t\t\tif (this.appType === AppType.Integrated) throw new Error(\"AppType.Integrated is not allowed for mobile apps\")\n\t\t\tconst appType = this.appType === AppType.Mail ? \"Mail\" : \"Calendar\"\n\t\t\treturn `${client.device} ${appType} App`\n\t\t} else if (env.mode === Mode.Browser) {\n\t\t\treturn client.browser + \" Browser\"\n\t\t} else if (env.platformId === \"linux\") {\n\t\t\treturn \"Linux Desktop\"\n\t\t} else if (env.platformId === \"darwin\") {\n\t\t\treturn \"Mac Desktop\"\n\t\t} else if (env.platformId === \"win32\") {\n\t\t\treturn \"Windows Desktop\"\n\t\t}\n\n\t\treturn \"Unknown\"\n\t}\n\n\tisSupportedBrowserVersion(): boolean {\n\t\treturn this.notOldFirefox() && this.notOldChrome()\n\t}\n\n\tnotOldFirefox(): boolean {\n\t\t// issue only occurs for old Firefox browsers\n\t\t// https://github.com/tutao/tutanota/issues/835\n\t\treturn this.browser !== BrowserType.FIREFOX || this.browserVersion > 40\n\t}\n\n\tnotOldChrome(): boolean {\n\t\treturn this.browser !== BrowserType.CHROME || this.browserVersion > 55\n\t}\n\n\tneedsMicrotaskHack(): boolean {\n\t\treturn (\n\t\t\tthis.isIos() ||\n\t\t\tthis.browser === BrowserType.SAFARI ||\n\t\t\t(this.browser === BrowserType.FIREFOX && this.browserVersion <= 60) ||\n\t\t\t(this.browser === BrowserType.CHROME && this.browserVersion < 59)\n\t\t)\n\t}\n\n\tneedsExplicitIDBIds(): boolean {\n\t\treturn this.browser === BrowserType.SAFARI && this.browserVersion < 12.2\n\t}\n\n\tbrowserData(): BrowserData {\n\t\treturn {\n\t\t\tneedsMicrotaskHack: this.needsMicrotaskHack(),\n\t\t\tneedsExplicitIDBIds: this.needsExplicitIDBIds(),\n\t\t\tindexedDbSupported: this.indexedDb(),\n\t\t}\n\t}\n\n\tcompressionStreamSupported(): boolean {\n\t\treturn typeof CompressionStream !== \"undefined\"\n\t}\n\n\tisCalendarApp() {\n\t\treturn isApp() && this.appType === AppType.Calendar\n\t}\n}\n\nexport const client: ClientDetector = new ClientDetector()\n"],"mappings":"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"}