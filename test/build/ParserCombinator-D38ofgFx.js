
globalThis.env = {
  "staticUrl": "http://localhost:9000",
  "versionNumber": "264.250130.1",
  "dist": false,
  "mode": "Test",
  "timeout": 20000,
  "domainConfigs": {
    "mail.tutanota.com": {
      "firstPartyDomain": true,
      "partneredDomainTransitionUrl": "https://app.tuta.com",
      "apiUrl": "https://mail.tutanota.com",
      "paymentUrl": "https://pay.tutanota.com/braintree.html",
      "webauthnUrl": "https://app.tuta.com/webauthn",
      "legacyWebauthnUrl": "https://mail.tutanota.com/webauthn",
      "webauthnMobileUrl": "https://app.tuta.com/webauthnmobile",
      "legacyWebauthnMobileUrl": "https://mail.tutanota.com/webauthnmobile",
      "webauthnRpId": "tutanota.com",
      "u2fAppId": "https://tutanota.com/u2f-appid.json",
      "giftCardBaseUrl": "https://app.tuta.com/giftcard",
      "referralBaseUrl": "https://app.tuta.com/signup",
      "websiteBaseUrl": "https://tutanota.com"
    },
    "test.tutanota.com": {
      "firstPartyDomain": true,
      "partneredDomainTransitionUrl": "https://app.test.tuta.com",
      "apiUrl": "https://test.tutanota.com",
      "paymentUrl": "https://pay.test.tutanota.com/braintree.html",
      "webauthnUrl": "https://app.test.tuta.com/webauthn",
      "legacyWebauthnUrl": "https://test.tutanota.com/webauthn",
      "webauthnMobileUrl": "https://app.test.tuta.com/webauthnmobile",
      "legacyWebauthnMobileUrl": "https://test.tutanota.com/webauthnmobile",
      "webauthnRpId": "tutanota.com",
      "u2fAppId": "https://test.tutanota.com/u2f-appid.json",
      "giftCardBaseUrl": "https://app.test.tuta.com/giftcard",
      "referralBaseUrl": "https://app.test.tuta.com/signup",
      "websiteBaseUrl": "https://tutanota.com"
    },
    "app.local.tutanota.com": {
      "firstPartyDomain": true,
      "partneredDomainTransitionUrl": "https://app.local.tuta.com:9000",
      "apiUrl": "https://app.local.tutanota.com:9000",
      "paymentUrl": "https://local.tutanota.com:9000/client/build/braintree.html",
      "webauthnUrl": "https://app.local.tuta.com:9000/client/build/webauthn",
      "legacyWebauthnUrl": "https://local.tutanota.com:9000/client/build/webauthn",
      "webauthnMobileUrl": "https://app.local.tuta.com:9000/client/build/webauthnmobile",
      "legacyWebauthnMobileUrl": "https://local.tutanota.com:9000/client/build/webauthnmobile",
      "webauthnRpId": "tutanota.com",
      "u2fAppId": "https://local.tutanota.com/u2f-appid.json",
      "giftCardBaseUrl": "https://app.local.tuta.com:9000/giftcard",
      "referralBaseUrl": "https://app.local.tuta.com:9000/signup",
      "websiteBaseUrl": "https://local.tutanota.com:9000"
    },
    "app.tuta.com": {
      "firstPartyDomain": true,
      "partneredDomainTransitionUrl": "https://mail.tutanota.com",
      "apiUrl": "https://app.tuta.com",
      "paymentUrl": "https://pay.tutanota.com/braintree.html",
      "webauthnUrl": "https://app.tuta.com/webauthn",
      "legacyWebauthnUrl": "https://mail.tutanota.com/webauthn",
      "webauthnMobileUrl": "https://app.tuta.com/webauthnmobile",
      "legacyWebauthnMobileUrl": "https://mail.tutanota.com/webauthnmobile",
      "webauthnRpId": "tuta.com",
      "u2fAppId": "https://app.tuta.com/u2f-appid.json",
      "giftCardBaseUrl": "https://app.tuta.com/giftcard",
      "referralBaseUrl": "https://app.tuta.com/signup",
      "websiteBaseUrl": "https://tuta.com"
    },
    "app.test.tuta.com": {
      "firstPartyDomain": true,
      "partneredDomainTransitionUrl": "https://test.tutanota.com",
      "apiUrl": "https://app.test.tuta.com",
      "paymentUrl": "https://pay.test.tutanota.com/braintree.html",
      "webauthnUrl": "https://app.test.tuta.com/webauthn",
      "legacyWebauthnUrl": "https://test.tutanota.com/webauthn",
      "webauthnMobileUrl": "https://app.test.tuta.com/webauthnmobile",
      "legacyWebauthnMobileUrl": "https://test.tutanota.com/webauthnmobile",
      "webauthnRpId": "tuta.com",
      "u2fAppId": "https://app.test.tuta.com/u2f-appid.json",
      "giftCardBaseUrl": "https://app.test.tuta.com/giftcard",
      "referralBaseUrl": "https://app.test.tuta.com/signup",
      "websiteBaseUrl": "https://test.tuta.com"
    },
    "app.local.tuta.com": {
      "firstPartyDomain": true,
      "partneredDomainTransitionUrl": "https://app.local.tutanota.com:9000",
      "apiUrl": "https://app.local.tuta.com:9000",
      "paymentUrl": "https://app.local.tuta.com:9000/braintree.html",
      "webauthnUrl": "https://app.local.tuta.com:9000/webauthn",
      "legacyWebauthnUrl": "https://local.tutanota.com:9000/webauthn",
      "webauthnMobileUrl": "https://app.local.tuta.com:9000/webauthnmobile",
      "legacyWebauthnMobileUrl": "https://local.tutanota.com:9000/webauthnmobile",
      "webauthnRpId": "tuta.com",
      "u2fAppId": "https://app.local.tuta.com/u2f-appid.json",
      "giftCardBaseUrl": "https://app.local.tuta.com:9000/giftcard",
      "referralBaseUrl": "https://app.local.tuta.com:9000/signup",
      "websiteBaseUrl": "https://local.tuta.com:9000"
    },
    "localhost": {
      "firstPartyDomain": true,
      "partneredDomainTransitionUrl": "http://localhost:9000",
      "apiUrl": "http://localhost:9000",
      "paymentUrl": "http://localhost:9000/braintree.html",
      "webauthnUrl": "http://localhost:9000/webauthn",
      "legacyWebauthnUrl": "http://localhost:9000/webauthn",
      "webauthnMobileUrl": "http://localhost:9000/webauthnmobile",
      "legacyWebauthnMobileUrl": "http://localhost:9000/webauthnmobile",
      "webauthnRpId": "localhost",
      "u2fAppId": "http://localhost:9000/u2f-appid.json",
      "giftCardBaseUrl": "http://localhost:9000/giftcard",
      "referralBaseUrl": "http://localhost:9000/signup",
      "websiteBaseUrl": "https://tuta.com"
    },
    "{hostname}": {
      "firstPartyDomain": false,
      "partneredDomainTransitionUrl": "{protocol}//{hostname}",
      "apiUrl": "{protocol}//{hostname}",
      "paymentUrl": "https://pay.tutanota.com/braintree.html",
      "webauthnUrl": "{protocol}//{hostname}/webauthn",
      "legacyWebauthnUrl": "{protocol}//{hostname}/webauthn",
      "webauthnMobileUrl": "{protocol}//{hostname}/webauthnmobile",
      "legacyWebauthnMobileUrl": "{protocol}//{hostname}/webauthnmobile",
      "webauthnRpId": "{hostname}",
      "u2fAppId": "{protocol}//{hostname}/u2f-appid.json",
      "giftCardBaseUrl": "https://app.tuta.com/giftcard",
      "referralBaseUrl": "https://app.tuta.com/signup",
      "websiteBaseUrl": "https://tuta.com"
    }
  },
  "platformId": null
};
const __NODE_GYP_better_sqlite3 = `./better-sqlite3.darwin-${typeof process !== 'undefined' ? process.arch : "unknown"}.node`
import { downcast } from "./dist-CJHwsXKY.js";
import { TutanotaError } from "./dist-Rk9U8Iqn.js";

//#region ../src/common/misc/parsing/ParserCombinator.ts
var ParserError = class extends TutanotaError {
	filename;
	constructor(message, filename) {
		super("ParserError", message);
		this.filename = filename ?? null;
	}
};
const combineParsers = downcast((...parsers) => (iterator) => parsers.map((p) => p(iterator)));
function makeCharacterParser(character) {
	return (iterator) => {
		let value = iterator.peek();
		if (value === character) {
			iterator.next();
			return value;
		}
		const sliceStart = Math.max(iterator.position - 10, 0);
		const sliceEnd = Math.min(iterator.position + 10, iterator.iteratee.length - 1);
		throw new ParserError(`expected character "${character}" got "${value}" near ${iterator.iteratee.slice(sliceStart, sliceEnd)}`);
	};
}
function makeNotCharacterParser(character) {
	return (iterator) => {
		let value = iterator.peek();
		if (value && value !== character) {
			iterator.next();
			return value;
		}
		const sliceStart = Math.max(iterator.position - 10, 0);
		const sliceEnd = Math.min(iterator.position + 10, iterator.iteratee.length - 1);
		throw new ParserError(`expected character "${character}" got "${value}" near ${iterator.iteratee.slice(sliceStart, sliceEnd)}`);
	};
}
function makeZeroOrMoreParser(anotherParser) {
	return (iterator) => {
		const result = [];
		try {
			let parseResult = anotherParser(iterator);
			while (true) {
				result.push(parseResult);
				parseResult = anotherParser(iterator);
			}
		} catch (e) {}
		return result;
	};
}
function mapParser(parser, mapper) {
	return (iterator) => {
		return mapper(parser(iterator));
	};
}
function makeOneOrMoreParser(parser) {
	return mapParser(makeZeroOrMoreParser(parser), (value) => {
		if (value.length === 0) throw new ParserError("Expected at least one value, got none");
		return value;
	});
}
function maybeParse(parser) {
	return (iterator) => {
		const iteratorPosition = iterator.position;
		try {
			return parser(iterator);
		} catch (e) {
			if (e instanceof ParserError) iterator.position = iteratorPosition;
			return null;
		}
	};
}
function makeSeparatedByParser(separatorParser, valueParser) {
	return (iterator) => {
		const result = [];
		result.push(valueParser(iterator));
		while (true) {
			try {
				separatorParser(iterator);
			} catch (e) {
				break;
			}
			result.push(valueParser(iterator));
		}
		return result;
	};
}
function makeEitherParser(parserA, parserB) {
	return (iterator) => {
		const iteratorPosition = iterator.position;
		try {
			return parserA(iterator);
		} catch (e) {
			if (e instanceof ParserError) {
				iterator.position = iteratorPosition;
				return parserB(iterator);
			}
			throw e;
		}
	};
}
function makeOneOfCharactersParser(allowed) {
	return (iterator) => {
		const value = iterator.peek();
		if (value && allowed.includes(value)) {
			iterator.next();
			return value;
		}
		throw new ParserError(`Expected one of ${allowed.map((c) => `"${c}"`).join(", ")}, but got "${value}\n${context(iterator, iterator.position, 10)}"`);
	};
}
function makeNotOneOfCharactersParser(notAllowed) {
	return (iterator) => {
		const value = iterator.peek();
		if (typeof value !== "string") throw new ParserError("unexpected end of input");
		if (!notAllowed.includes(value)) {
			iterator.next();
			return value;
		}
		throw new ParserError(`Expected none of ${notAllowed.map((c) => `"${c}"`).join(", ")}, but got "${value}"\n${context(iterator, iterator.position, 10)}`);
	};
}
const numberParser = mapParser(makeOneOrMoreParser(makeOneOfCharactersParser([
	"0",
	"1",
	"2",
	"3",
	"4",
	"5",
	"6",
	"7",
	"8",
	"9"
])), (values) => parseInt(values.join(""), 10));
var StringIterator = class {
	iteratee;
	position = -1;
	constructor(iteratee) {
		this.iteratee = iteratee;
	}
	next() {
		const value = this.iteratee[++this.position];
		const done = this.position >= this.iteratee.length;
		return done ? {
			done: true,
			value: undefined
		} : {
			done: false,
			value
		};
	}
	peek() {
		return this.iteratee[this.position + 1] ?? null;
	}
};
function context(iterator, contextCentre, contextRadius = 10) {
	const sliceStart = Math.max(contextCentre - contextRadius, 0);
	const sliceEnd = Math.min(contextCentre + contextRadius, iterator.iteratee.length - 1);
	const sliceLength = sliceEnd - sliceStart;
	const actualPosition = contextCentre - (2 * contextRadius - sliceLength);
	return iterator.iteratee.slice(sliceStart, sliceEnd);
}

//#endregion
export { ParserError, StringIterator, combineParsers, makeCharacterParser, makeEitherParser, makeNotCharacterParser, makeNotOneOfCharactersParser, makeOneOrMoreParser, makeSeparatedByParser, makeZeroOrMoreParser, mapParser, maybeParse, numberParser };
//# sourceMappingURL=ParserCombinator-D38ofgFx.js.map