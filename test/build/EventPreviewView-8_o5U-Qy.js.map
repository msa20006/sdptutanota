{"version":3,"file":"EventPreviewView-8_o5U-Qy.js","names":["participation: NonNullable<EventPreviewViewAttrs[\"participation\"]>","status: CalendarAttendeeStatus","text: TranslationKey","vnode: Vnode<EventPreviewViewAttrs>","headerIcon: AllIcons","children: Children","isAlignedLeft?: boolean","icon: AllIcons","style: Record<string, any>","rule: CalendarRepeatRule | null","isAllDay: boolean","location: string | null","attendees: Array<CalendarEventAttendee>","participation: EventPreviewViewAttrs[\"participation\"]","event: EventPreviewViewAttrs[\"event\"]","attendee: CalendarEventAttendee","sanitizedDescription: string | null","text: string","repeatRule: RepeatRule","frequency","frequency: RepeatPeriod","organizer: EncryptedMailAddress | null"],"sources":["../../src/calendar-app/calendar/gui/eventpopup/EventPreviewView.ts"],"sourcesContent":["import type { CalendarEvent, CalendarEventAttendee, CalendarRepeatRule, EncryptedMailAddress } from \"../../../../common/api/entities/tutanota/TypeRefs.js\"\nimport { createCalendarEventAttendee, createEncryptedMailAddress } from \"../../../../common/api/entities/tutanota/TypeRefs.js\"\nimport m, { Children, Component, Vnode } from \"mithril\"\nimport { AllIcons, Icon, IconSize } from \"../../../../common/gui/base/Icon.js\"\nimport { theme } from \"../../../../common/gui/theme.js\"\nimport { BootIcons } from \"../../../../common/gui/base/icons/BootIcons.js\"\nimport { Icons } from \"../../../../common/gui/base/icons/Icons.js\"\nimport { getRepeatEndTimeForDisplay, getTimeZone } from \"../../../../common/calendar/date/CalendarUtils.js\"\nimport { CalendarAttendeeStatus, EndType, getAttendeeStatus, RepeatPeriod } from \"../../../../common/api/common/TutanotaConstants.js\"\nimport { downcast, memoized } from \"@tutao/tutanota-utils\"\nimport { lang, TranslationKey } from \"../../../../common/misc/LanguageViewModel.js\"\nimport type { RepeatRule } from \"../../../../common/api/entities/sys/TypeRefs.js\"\nimport { cleanMailAddress, findAttendeeInAddresses, isAllDayEvent } from \"../../../../common/api/common/utils/CommonCalendarUtils.js\"\nimport { formatDateWithMonth } from \"../../../../common/misc/Formatter.js\"\nimport { BannerButton, BannerButtonAttrs } from \"../../../../common/gui/base/buttons/BannerButton.js\"\nimport { pureComponent } from \"../../../../common/gui/base/PureComponent.js\"\nimport { CalendarEventPreviewViewModel } from \"./CalendarEventPreviewViewModel.js\"\nimport { UpgradeRequiredError } from \"../../../../common/api/main/UpgradeRequiredError.js\"\nimport { showPlanUpgradeRequiredDialog } from \"../../../../common/misc/SubscriptionDialogs.js\"\nimport { ExternalLink } from \"../../../../common/gui/base/ExternalLink.js\"\n\nimport { createRepeatRuleFrequencyValues, formatEventDuration, getDisplayEventTitle, iconForAttendeeStatus } from \"../CalendarGuiUtils.js\"\nimport { hasError } from \"../../../../common/api/common/utils/ErrorUtils.js\"\n\nexport type EventPreviewViewAttrs = {\n\tevent: Omit<CalendarEvent, \"description\">\n\tsanitizedDescription: string | null\n\tparticipation?: ReturnType<typeof CalendarEventPreviewViewModel.prototype.getParticipationSetterAndThen>\n}\n\n/** the buttons enabling the user to view their current participation status on an event and to trigger a change to it, including\n * a mail to the organizer. */\nexport const ReplyButtons = pureComponent((participation: NonNullable<EventPreviewViewAttrs[\"participation\"]>) => {\n\tconst colors = {\n\t\tborderColor: theme.content_button,\n\t\tcolor: theme.content_fg,\n\t}\n\n\tconst highlightColors = {\n\t\tborderColor: theme.content_accent,\n\t\tcolor: theme.content_accent,\n\t}\n\n\tconst makeStatusButtonAttrs = (status: CalendarAttendeeStatus, text: TranslationKey): BannerButtonAttrs =>\n\t\tObject.assign(\n\t\t\t{\n\t\t\t\ttext,\n\t\t\t\tclass: \"width-min-content\",\n\t\t\t\tclick: async () => {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tawait participation.setParticipation(status)\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tif (e instanceof UpgradeRequiredError) {\n\t\t\t\t\t\t\tconst ordered = await showPlanUpgradeRequiredDialog(e.plans, e.message)\n\t\t\t\t\t\t\tif (!ordered) return\n\t\t\t\t\t\t\tawait participation.setParticipation(status)\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthrow e\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t},\n\t\t\tparticipation.ownAttendee.status === status ? highlightColors : colors,\n\t\t)\n\n\treturn m(\".flex.col\", [\n\t\tm(\".small\", lang.get(\"invitedToEvent_msg\")),\n\t\tm(\".flex.items-center.mt-s\", [\n\t\t\tm(BannerButton, makeStatusButtonAttrs(CalendarAttendeeStatus.ACCEPTED, \"yes_label\")),\n\t\t\tm(BannerButton, makeStatusButtonAttrs(CalendarAttendeeStatus.TENTATIVE, \"maybe_label\")),\n\t\t\tm(BannerButton, makeStatusButtonAttrs(CalendarAttendeeStatus.DECLINED, \"no_label\")),\n\t\t]),\n\t])\n})\n\nexport class EventPreviewView implements Component<EventPreviewViewAttrs> {\n\t// Cache the parsed URL, so we don't parse the URL on every single view call\n\tprivate readonly getLocationUrl: typeof getLocationUrl\n\n\tconstructor() {\n\t\tthis.getLocationUrl = memoized(getLocationUrl)\n\t}\n\n\tview(vnode: Vnode<EventPreviewViewAttrs>): Children {\n\t\tconst { event, sanitizedDescription, participation } = vnode.attrs\n\t\tconst attendees = prepareAttendees(event.attendees, event.organizer)\n\t\tconst eventTitle = getDisplayEventTitle(event.summary)\n\n\t\treturn m(\".flex.col.smaller.scroll.visible-scrollbar\", [\n\t\t\tthis.renderRow(BootIcons.Calendar, [m(\"span.h3\", eventTitle)]),\n\t\t\tthis.renderRow(Icons.Time, [formatEventDuration(event, getTimeZone(), false), this.renderRepeatRule(event.repeatRule, isAllDayEvent(event))]),\n\t\t\tthis.renderLocation(event.location),\n\t\t\tthis.renderAttendeesSection(attendees, participation),\n\t\t\tthis.renderAttendanceSection(event, attendees, participation),\n\t\t\tthis.renderDescription(sanitizedDescription),\n\t\t])\n\t}\n\n\tprivate renderRow(headerIcon: AllIcons, children: Children, isAlignedLeft?: boolean): Children {\n\t\treturn m(\n\t\t\t\".flex.pb-s\",\n\t\t\t{\n\t\t\t\tclass: isAlignedLeft ? \"items-start\" : \"items-center\",\n\t\t\t},\n\t\t\t[this.renderSectionIndicator(headerIcon, isAlignedLeft ? { marginTop: \"2px\" } : undefined), m(\".selectable.text-break.full-width\", children)],\n\t\t)\n\t}\n\n\tprivate renderSectionIndicator(icon: AllIcons, style: Record<string, any> = {}): Children {\n\t\treturn m(Icon, {\n\t\t\ticon,\n\t\t\tclass: \"pr\",\n\t\t\tsize: IconSize.Medium,\n\t\t\tstyle: Object.assign(\n\t\t\t\t{\n\t\t\t\t\tfill: theme.content_button,\n\t\t\t\t\tdisplay: \"block\",\n\t\t\t\t},\n\t\t\t\tstyle,\n\t\t\t),\n\t\t})\n\t}\n\n\tprivate renderRepeatRule(rule: CalendarRepeatRule | null, isAllDay: boolean): Children {\n\t\tif (rule == null) return null\n\n\t\tconst frequency = formatRepetitionFrequency(rule)\n\n\t\tif (frequency) {\n\t\t\treturn m(\"\", frequency + formatRepetitionEnd(rule, isAllDay))\n\t\t} else {\n\t\t\t// If we cannot properly process the frequency we just indicate that the event is part of a series.\n\t\t\treturn m(\"\", lang.get(\"unknownRepetition_msg\"))\n\t\t}\n\t}\n\n\tprivate renderLocation(location: string | null): Children {\n\t\tif (location == null || location.trim().length === 0) return null\n\t\treturn this.renderRow(Icons.Pin, [\n\t\t\tm(\n\t\t\t\t\".text-ellipsis.selectable\",\n\t\t\t\tm(ExternalLink, {\n\t\t\t\t\thref: this.getLocationUrl(location.trim()).toString(),\n\t\t\t\t\ttext: location,\n\t\t\t\t\tisCompanySite: false,\n\t\t\t\t}),\n\t\t\t),\n\t\t])\n\t}\n\n\tprivate renderAttendeesSection(attendees: Array<CalendarEventAttendee>, participation: EventPreviewViewAttrs[\"participation\"]): Children {\n\t\tif (attendees.length === 0) return null\n\t\treturn this.renderRow(\n\t\t\tIcons.People,\n\t\t\t[\n\t\t\t\tm(\n\t\t\t\t\t\".flex-wrap\",\n\t\t\t\t\tattendees.map((a) => this.renderAttendee(a, participation)),\n\t\t\t\t),\n\t\t\t],\n\t\t\ttrue,\n\t\t)\n\t}\n\n\t/**\n\t * if we're an attendee of this event, this renders a selector to be able to set our own attendance.\n\t * @param event if the event is not in a calendar, we don't want to set our attendance from here.\n\t * @param attendees list of attendees (including the organizer)\n\t * @param participation\n\t * @private\n\t */\n\tprivate renderAttendanceSection(\n\t\tevent: EventPreviewViewAttrs[\"event\"],\n\t\tattendees: Array<CalendarEventAttendee>,\n\t\tparticipation: EventPreviewViewAttrs[\"participation\"],\n\t): Children {\n\t\tif (attendees.length === 0 || participation == null || event._ownerGroup == null) return null\n\t\treturn m(\".flex.pb-s\", [this.renderSectionIndicator(BootIcons.Contacts), m(ReplyButtons, participation)])\n\t}\n\n\tprivate renderAttendee(attendee: CalendarEventAttendee, participation: EventPreviewViewAttrs[\"participation\"]): Children {\n\t\tconst attendeeField = hasError(attendee.address) ? lang.get(\"corruptedValue_msg\") : attendee.address.address\n\t\t/** we might have a more current local attendance for ourselves. */\n\t\tconst status =\n\t\t\tparticipation != null && cleanMailAddress(attendee.address.address) === participation.ownAttendee.address.address\n\t\t\t\t? getAttendeeStatus(participation.ownAttendee)\n\t\t\t\t: getAttendeeStatus(attendee)\n\n\t\treturn m(\".flex.items-center\", [\n\t\t\tm(Icon, {\n\t\t\t\ticon: iconForAttendeeStatus[status],\n\t\t\t\tstyle: {\n\t\t\t\t\tfill: theme.content_fg,\n\t\t\t\t},\n\t\t\t\tclass: \"mr-s\",\n\t\t\t}),\n\t\t\tm(\".span.line-break-anywhere.selectable\", attendeeField),\n\t\t])\n\t}\n\n\tprivate renderDescription(sanitizedDescription: string | null) {\n\t\tif (sanitizedDescription == null || sanitizedDescription.length === 0) return null\n\t\treturn this.renderRow(Icons.AlignLeft, [m.trust(sanitizedDescription)], true)\n\t}\n}\n\n/**\n * if text is a valid absolute url, then returns a URL with text as the href\n * otherwise passes text as the search parameter for open street map\n * @param text\n * @returns {*}\n */\nexport function getLocationUrl(text: string): URL {\n\tconst osmHref = `https://www.openstreetmap.org/search?query=${text}`\n\tlet url\n\n\ttry {\n\t\t// if not a valid _absolute_ url then we get an exception\n\t\turl = new URL(text)\n\t} catch {\n\t\turl = new URL(osmHref)\n\t}\n\n\treturn url\n}\n\nexport function formatRepetitionFrequency(repeatRule: RepeatRule): string | null {\n\tif (repeatRule.interval === \"1\") {\n\t\tconst frequency = createRepeatRuleFrequencyValues().find((frequency) => frequency.value === repeatRule.frequency)\n\n\t\tif (frequency) {\n\t\t\treturn frequency.name\n\t\t}\n\t} else {\n\t\treturn lang.get(\"repetition_msg\", {\n\t\t\t\"{interval}\": repeatRule.interval,\n\t\t\t\"{timeUnit}\": getFrequencyTimeUnit(downcast(repeatRule.frequency)),\n\t\t})\n\t}\n\n\treturn null\n}\n\n/**\n * @returns {string} The returned string includes a leading separator (\", \" or \" \").\n */\nexport function formatRepetitionEnd(repeatRule: RepeatRule, isAllDay: boolean): string {\n\tswitch (repeatRule.endType) {\n\t\tcase EndType.Count:\n\t\t\tif (!repeatRule.endValue) {\n\t\t\t\treturn \"\"\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\t\", \" +\n\t\t\t\tlang.get(\"times_msg\", {\n\t\t\t\t\t\"{amount}\": repeatRule.endValue,\n\t\t\t\t})\n\t\t\t)\n\n\t\tcase EndType.UntilDate: {\n\t\t\tconst repeatEndTime = getRepeatEndTimeForDisplay(repeatRule, isAllDay, getTimeZone())\n\t\t\treturn \" \" + lang.get(\"until_label\") + \" \" + formatDateWithMonth(repeatEndTime)\n\t\t}\n\n\t\tdefault:\n\t\t\treturn \"\"\n\t}\n}\n\nfunction getFrequencyTimeUnit(frequency: RepeatPeriod): string {\n\tswitch (frequency) {\n\t\tcase RepeatPeriod.DAILY:\n\t\t\treturn lang.get(\"days_label\")\n\n\t\tcase RepeatPeriod.WEEKLY:\n\t\t\treturn lang.get(\"weeks_label\")\n\n\t\tcase RepeatPeriod.MONTHLY:\n\t\t\treturn lang.get(\"pricing.months_label\")\n\n\t\tcase RepeatPeriod.ANNUALLY:\n\t\t\treturn lang.get(\"years_label\")\n\n\t\tdefault:\n\t\t\tthrow new Error(\"Unknown calendar event repeat rule frequency: \" + frequency)\n\t}\n}\n\nfunction prepareAttendees(attendees: Array<CalendarEventAttendee>, organizer: EncryptedMailAddress | null): Array<CalendarEventAttendee> {\n\t// We copy the attendees array so that we can add the organizer, in the case that they are not already in attendees\n\t// This is just for display purposes. We need to copy because event.attendees is the source of truth for the event\n\t// so we can't modify it\n\tconst attendeesCopy = attendees.slice()\n\n\tif (organizer != null && attendeesCopy.length > 0 && !findAttendeeInAddresses(attendeesCopy, [organizer.address])) {\n\t\tattendeesCopy.unshift(\n\t\t\tcreateCalendarEventAttendee({\n\t\t\t\taddress: createEncryptedMailAddress({\n\t\t\t\t\taddress: organizer.address,\n\t\t\t\t\tname: \"\",\n\t\t\t\t}),\n\t\t\t\tstatus: CalendarAttendeeStatus.ADDED, // We don't know whether the organizer will be attending or not in this case\n\t\t\t}),\n\t\t)\n\t}\n\n\treturn attendeesCopy\n}\n"],"mappings":"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"}