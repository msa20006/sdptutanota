
globalThis.env = {
  "staticUrl": "http://localhost:9000",
  "versionNumber": "264.250130.1",
  "dist": false,
  "mode": "Test",
  "timeout": 20000,
  "domainConfigs": {
    "mail.tutanota.com": {
      "firstPartyDomain": true,
      "partneredDomainTransitionUrl": "https://app.tuta.com",
      "apiUrl": "https://mail.tutanota.com",
      "paymentUrl": "https://pay.tutanota.com/braintree.html",
      "webauthnUrl": "https://app.tuta.com/webauthn",
      "legacyWebauthnUrl": "https://mail.tutanota.com/webauthn",
      "webauthnMobileUrl": "https://app.tuta.com/webauthnmobile",
      "legacyWebauthnMobileUrl": "https://mail.tutanota.com/webauthnmobile",
      "webauthnRpId": "tutanota.com",
      "u2fAppId": "https://tutanota.com/u2f-appid.json",
      "giftCardBaseUrl": "https://app.tuta.com/giftcard",
      "referralBaseUrl": "https://app.tuta.com/signup",
      "websiteBaseUrl": "https://tutanota.com"
    },
    "test.tutanota.com": {
      "firstPartyDomain": true,
      "partneredDomainTransitionUrl": "https://app.test.tuta.com",
      "apiUrl": "https://test.tutanota.com",
      "paymentUrl": "https://pay.test.tutanota.com/braintree.html",
      "webauthnUrl": "https://app.test.tuta.com/webauthn",
      "legacyWebauthnUrl": "https://test.tutanota.com/webauthn",
      "webauthnMobileUrl": "https://app.test.tuta.com/webauthnmobile",
      "legacyWebauthnMobileUrl": "https://test.tutanota.com/webauthnmobile",
      "webauthnRpId": "tutanota.com",
      "u2fAppId": "https://test.tutanota.com/u2f-appid.json",
      "giftCardBaseUrl": "https://app.test.tuta.com/giftcard",
      "referralBaseUrl": "https://app.test.tuta.com/signup",
      "websiteBaseUrl": "https://tutanota.com"
    },
    "app.local.tutanota.com": {
      "firstPartyDomain": true,
      "partneredDomainTransitionUrl": "https://app.local.tuta.com:9000",
      "apiUrl": "https://app.local.tutanota.com:9000",
      "paymentUrl": "https://local.tutanota.com:9000/client/build/braintree.html",
      "webauthnUrl": "https://app.local.tuta.com:9000/client/build/webauthn",
      "legacyWebauthnUrl": "https://local.tutanota.com:9000/client/build/webauthn",
      "webauthnMobileUrl": "https://app.local.tuta.com:9000/client/build/webauthnmobile",
      "legacyWebauthnMobileUrl": "https://local.tutanota.com:9000/client/build/webauthnmobile",
      "webauthnRpId": "tutanota.com",
      "u2fAppId": "https://local.tutanota.com/u2f-appid.json",
      "giftCardBaseUrl": "https://app.local.tuta.com:9000/giftcard",
      "referralBaseUrl": "https://app.local.tuta.com:9000/signup",
      "websiteBaseUrl": "https://local.tutanota.com:9000"
    },
    "app.tuta.com": {
      "firstPartyDomain": true,
      "partneredDomainTransitionUrl": "https://mail.tutanota.com",
      "apiUrl": "https://app.tuta.com",
      "paymentUrl": "https://pay.tutanota.com/braintree.html",
      "webauthnUrl": "https://app.tuta.com/webauthn",
      "legacyWebauthnUrl": "https://mail.tutanota.com/webauthn",
      "webauthnMobileUrl": "https://app.tuta.com/webauthnmobile",
      "legacyWebauthnMobileUrl": "https://mail.tutanota.com/webauthnmobile",
      "webauthnRpId": "tuta.com",
      "u2fAppId": "https://app.tuta.com/u2f-appid.json",
      "giftCardBaseUrl": "https://app.tuta.com/giftcard",
      "referralBaseUrl": "https://app.tuta.com/signup",
      "websiteBaseUrl": "https://tuta.com"
    },
    "app.test.tuta.com": {
      "firstPartyDomain": true,
      "partneredDomainTransitionUrl": "https://test.tutanota.com",
      "apiUrl": "https://app.test.tuta.com",
      "paymentUrl": "https://pay.test.tutanota.com/braintree.html",
      "webauthnUrl": "https://app.test.tuta.com/webauthn",
      "legacyWebauthnUrl": "https://test.tutanota.com/webauthn",
      "webauthnMobileUrl": "https://app.test.tuta.com/webauthnmobile",
      "legacyWebauthnMobileUrl": "https://test.tutanota.com/webauthnmobile",
      "webauthnRpId": "tuta.com",
      "u2fAppId": "https://app.test.tuta.com/u2f-appid.json",
      "giftCardBaseUrl": "https://app.test.tuta.com/giftcard",
      "referralBaseUrl": "https://app.test.tuta.com/signup",
      "websiteBaseUrl": "https://test.tuta.com"
    },
    "app.local.tuta.com": {
      "firstPartyDomain": true,
      "partneredDomainTransitionUrl": "https://app.local.tutanota.com:9000",
      "apiUrl": "https://app.local.tuta.com:9000",
      "paymentUrl": "https://app.local.tuta.com:9000/braintree.html",
      "webauthnUrl": "https://app.local.tuta.com:9000/webauthn",
      "legacyWebauthnUrl": "https://local.tutanota.com:9000/webauthn",
      "webauthnMobileUrl": "https://app.local.tuta.com:9000/webauthnmobile",
      "legacyWebauthnMobileUrl": "https://local.tutanota.com:9000/webauthnmobile",
      "webauthnRpId": "tuta.com",
      "u2fAppId": "https://app.local.tuta.com/u2f-appid.json",
      "giftCardBaseUrl": "https://app.local.tuta.com:9000/giftcard",
      "referralBaseUrl": "https://app.local.tuta.com:9000/signup",
      "websiteBaseUrl": "https://local.tuta.com:9000"
    },
    "localhost": {
      "firstPartyDomain": true,
      "partneredDomainTransitionUrl": "http://localhost:9000",
      "apiUrl": "http://localhost:9000",
      "paymentUrl": "http://localhost:9000/braintree.html",
      "webauthnUrl": "http://localhost:9000/webauthn",
      "legacyWebauthnUrl": "http://localhost:9000/webauthn",
      "webauthnMobileUrl": "http://localhost:9000/webauthnmobile",
      "legacyWebauthnMobileUrl": "http://localhost:9000/webauthnmobile",
      "webauthnRpId": "localhost",
      "u2fAppId": "http://localhost:9000/u2f-appid.json",
      "giftCardBaseUrl": "http://localhost:9000/giftcard",
      "referralBaseUrl": "http://localhost:9000/signup",
      "websiteBaseUrl": "https://tuta.com"
    },
    "{hostname}": {
      "firstPartyDomain": false,
      "partneredDomainTransitionUrl": "{protocol}//{hostname}",
      "apiUrl": "{protocol}//{hostname}",
      "paymentUrl": "https://pay.tutanota.com/braintree.html",
      "webauthnUrl": "{protocol}//{hostname}/webauthn",
      "legacyWebauthnUrl": "{protocol}//{hostname}/webauthn",
      "webauthnMobileUrl": "{protocol}//{hostname}/webauthnmobile",
      "legacyWebauthnMobileUrl": "{protocol}//{hostname}/webauthnmobile",
      "webauthnRpId": "{hostname}",
      "u2fAppId": "{protocol}//{hostname}/u2f-appid.json",
      "giftCardBaseUrl": "https://app.tuta.com/giftcard",
      "referralBaseUrl": "https://app.tuta.com/signup",
      "websiteBaseUrl": "https://tuta.com"
    }
  },
  "platformId": null
};
const __NODE_GYP_better_sqlite3 = `./better-sqlite3.darwin-${typeof process !== 'undefined' ? process.arch : "unknown"}.node`
import { neverNull } from "./dist-CJHwsXKY.js";
import { sanitizeFilename } from "./FileUtils-W-u2-gZz.js";
import path from "node:path";
import { promises } from "node:fs";

//#region ../src/common/desktop/PathUtils.ts
const EXECUTABLE_EXTENSIONS = [
	"0xe",
	"73k",
	"89k",
	"a6p",
	"ac",
	"acc",
	"acr",
	"action",
	"actm",
	"ahk",
	"air",
	"apk",
	"app",
	"arscript",
	"as",
	"asb",
	"awk",
	"azw2",
	"bat",
	"beam",
	"bin",
	"btm",
	"cel",
	"celx",
	"chm",
	"cmd",
	"cof",
	"com",
	"command",
	"cpl",
	"crt",
	"csh",
	"dek",
	"dld",
	"dmc",
	"docm",
	"dotm",
	"dxl",
	"ear",
	"ebm",
	"ebs",
	"ebs2",
	"ecf",
	"eham",
	"elf",
	"es",
	"ex_",
	"ex4",
	"exe",
	"exopc",
	"ezs",
	"fas",
	"fky",
	"fpi",
	"frs",
	"fxp",
	"gadget",
	"gs",
	"ham",
	"hms",
	"hpf",
	"hta",
	"iim",
	"inf",
	"inf1",
	"ins",
	"inx",
	"ipa",
	"ipf",
	"isp",
	"isu",
	"jar",
	"job",
	"js",
	"jse",
	"jsx",
	"kix",
	"ksh",
	"lnk",
	"lo",
	"ls",
	"mam",
	"mcr",
	"mel",
	"mpx",
	"mrc",
	"ms",
	"msc",
	"msi",
	"msp",
	"mst",
	"mxe",
	"nexe",
	"obs",
	"ore",
	"osx",
	"otm",
	"out",
	"paf",
	"pex",
	"pif",
	"plx",
	"potm",
	"ppam",
	"ppsm",
	"pptm",
	"prc",
	"prg",
	"ps1",
	"pvd",
	"pwc",
	"pyc",
	"pyo",
	"qpx",
	"rbx",
	"reg",
	"rgs",
	"rox",
	"rpj",
	"run",
	"s2a",
	"sbs",
	"sca",
	"scar",
	"scb",
	"scr",
	"script",
	"sct",
	"shb",
	"shs",
	"smm",
	"spr",
	"tcp",
	"thm",
	"tlb",
	"tms",
	"u3p",
	"udf",
	"upx",
	"url",
	"vb",
	"vbe",
	"vbs",
	"vbscript",
	"vlx",
	"vpm",
	"wcm",
	"widget",
	"wiz",
	"workflow",
	"wpk",
	"wpm",
	"ws",
	"wsf",
	"wsh",
	"xap",
	"xbap",
	"xlam",
	"xlm",
	"xlsm",
	"xltm",
	"xqt",
	"xys",
	"zl9"
];
function nonClobberingFilename(files, filename) {
	filename = sanitizeFilename(filename);
	const clashingFile = files.find((f) => f === filename);
	if (typeof clashingFile !== "string") return filename;
else {
		const ext = path.extname(filename);
		const basename = path.basename(filename, ext);
		const clashNumbers = files.filter((f) => f.startsWith(`${basename}-`)).map((f) => f.slice(0, f.length - ext.length)).map((f) => f.slice(basename.length + 1, f.length)).map((f) => !f.startsWith("0") ? parseInt(f, 10) : 0).filter((n) => !isNaN(n) && n > 0);
		const clashNumbersSet = new Set(clashNumbers);
		clashNumbersSet.add(0);
		const firstGapMinusOne = Array.from(clashNumbersSet).sort((a, b) => a - b).find((n, i, a) => a[i + 1] > i + 1);
		return firstGapMinusOne != null && !isNaN(firstGapMinusOne) ? `${basename}-${neverNull(firstGapMinusOne) + 1}${ext}` : `${basename}-${clashNumbersSet.size}${ext}`;
	}
}
function looksExecutable(file) {
	const basename = path.basename(file);
	const ext = basename.match(/^\.[^.]+$/) ? basename : path.extname(basename);
	return EXECUTABLE_EXTENSIONS.includes(ext.toLowerCase().slice(1));
}
async function fileExists(filePath) {
	return promises.stat(filePath).then((stats) => stats.isFile()).catch(() => false);
}
function parseUrlOrNull(urlString) {
	try {
		return new URL(urlString);
	} catch (e) {
		return null;
	}
}
function swapFilename(p, file, pathModule = path) {
	const dir = pathModule.dirname(p);
	return pathModule.join(dir, file);
}

//#endregion
export { EXECUTABLE_EXTENSIONS, fileExists, looksExecutable, nonClobberingFilename, parseUrlOrNull, swapFilename };
//# sourceMappingURL=PathUtils-DFfSo_TG.js.map