
globalThis.env = {
  "staticUrl": "http://localhost:9000",
  "versionNumber": "264.250130.1",
  "dist": false,
  "mode": "Test",
  "timeout": 20000,
  "domainConfigs": {
    "mail.tutanota.com": {
      "firstPartyDomain": true,
      "partneredDomainTransitionUrl": "https://app.tuta.com",
      "apiUrl": "https://mail.tutanota.com",
      "paymentUrl": "https://pay.tutanota.com/braintree.html",
      "webauthnUrl": "https://app.tuta.com/webauthn",
      "legacyWebauthnUrl": "https://mail.tutanota.com/webauthn",
      "webauthnMobileUrl": "https://app.tuta.com/webauthnmobile",
      "legacyWebauthnMobileUrl": "https://mail.tutanota.com/webauthnmobile",
      "webauthnRpId": "tutanota.com",
      "u2fAppId": "https://tutanota.com/u2f-appid.json",
      "giftCardBaseUrl": "https://app.tuta.com/giftcard",
      "referralBaseUrl": "https://app.tuta.com/signup",
      "websiteBaseUrl": "https://tutanota.com"
    },
    "test.tutanota.com": {
      "firstPartyDomain": true,
      "partneredDomainTransitionUrl": "https://app.test.tuta.com",
      "apiUrl": "https://test.tutanota.com",
      "paymentUrl": "https://pay.test.tutanota.com/braintree.html",
      "webauthnUrl": "https://app.test.tuta.com/webauthn",
      "legacyWebauthnUrl": "https://test.tutanota.com/webauthn",
      "webauthnMobileUrl": "https://app.test.tuta.com/webauthnmobile",
      "legacyWebauthnMobileUrl": "https://test.tutanota.com/webauthnmobile",
      "webauthnRpId": "tutanota.com",
      "u2fAppId": "https://test.tutanota.com/u2f-appid.json",
      "giftCardBaseUrl": "https://app.test.tuta.com/giftcard",
      "referralBaseUrl": "https://app.test.tuta.com/signup",
      "websiteBaseUrl": "https://tutanota.com"
    },
    "app.local.tutanota.com": {
      "firstPartyDomain": true,
      "partneredDomainTransitionUrl": "https://app.local.tuta.com:9000",
      "apiUrl": "https://app.local.tutanota.com:9000",
      "paymentUrl": "https://local.tutanota.com:9000/client/build/braintree.html",
      "webauthnUrl": "https://app.local.tuta.com:9000/client/build/webauthn",
      "legacyWebauthnUrl": "https://local.tutanota.com:9000/client/build/webauthn",
      "webauthnMobileUrl": "https://app.local.tuta.com:9000/client/build/webauthnmobile",
      "legacyWebauthnMobileUrl": "https://local.tutanota.com:9000/client/build/webauthnmobile",
      "webauthnRpId": "tutanota.com",
      "u2fAppId": "https://local.tutanota.com/u2f-appid.json",
      "giftCardBaseUrl": "https://app.local.tuta.com:9000/giftcard",
      "referralBaseUrl": "https://app.local.tuta.com:9000/signup",
      "websiteBaseUrl": "https://local.tutanota.com:9000"
    },
    "app.tuta.com": {
      "firstPartyDomain": true,
      "partneredDomainTransitionUrl": "https://mail.tutanota.com",
      "apiUrl": "https://app.tuta.com",
      "paymentUrl": "https://pay.tutanota.com/braintree.html",
      "webauthnUrl": "https://app.tuta.com/webauthn",
      "legacyWebauthnUrl": "https://mail.tutanota.com/webauthn",
      "webauthnMobileUrl": "https://app.tuta.com/webauthnmobile",
      "legacyWebauthnMobileUrl": "https://mail.tutanota.com/webauthnmobile",
      "webauthnRpId": "tuta.com",
      "u2fAppId": "https://app.tuta.com/u2f-appid.json",
      "giftCardBaseUrl": "https://app.tuta.com/giftcard",
      "referralBaseUrl": "https://app.tuta.com/signup",
      "websiteBaseUrl": "https://tuta.com"
    },
    "app.test.tuta.com": {
      "firstPartyDomain": true,
      "partneredDomainTransitionUrl": "https://test.tutanota.com",
      "apiUrl": "https://app.test.tuta.com",
      "paymentUrl": "https://pay.test.tutanota.com/braintree.html",
      "webauthnUrl": "https://app.test.tuta.com/webauthn",
      "legacyWebauthnUrl": "https://test.tutanota.com/webauthn",
      "webauthnMobileUrl": "https://app.test.tuta.com/webauthnmobile",
      "legacyWebauthnMobileUrl": "https://test.tutanota.com/webauthnmobile",
      "webauthnRpId": "tuta.com",
      "u2fAppId": "https://app.test.tuta.com/u2f-appid.json",
      "giftCardBaseUrl": "https://app.test.tuta.com/giftcard",
      "referralBaseUrl": "https://app.test.tuta.com/signup",
      "websiteBaseUrl": "https://test.tuta.com"
    },
    "app.local.tuta.com": {
      "firstPartyDomain": true,
      "partneredDomainTransitionUrl": "https://app.local.tutanota.com:9000",
      "apiUrl": "https://app.local.tuta.com:9000",
      "paymentUrl": "https://app.local.tuta.com:9000/braintree.html",
      "webauthnUrl": "https://app.local.tuta.com:9000/webauthn",
      "legacyWebauthnUrl": "https://local.tutanota.com:9000/webauthn",
      "webauthnMobileUrl": "https://app.local.tuta.com:9000/webauthnmobile",
      "legacyWebauthnMobileUrl": "https://local.tutanota.com:9000/webauthnmobile",
      "webauthnRpId": "tuta.com",
      "u2fAppId": "https://app.local.tuta.com/u2f-appid.json",
      "giftCardBaseUrl": "https://app.local.tuta.com:9000/giftcard",
      "referralBaseUrl": "https://app.local.tuta.com:9000/signup",
      "websiteBaseUrl": "https://local.tuta.com:9000"
    },
    "localhost": {
      "firstPartyDomain": true,
      "partneredDomainTransitionUrl": "http://localhost:9000",
      "apiUrl": "http://localhost:9000",
      "paymentUrl": "http://localhost:9000/braintree.html",
      "webauthnUrl": "http://localhost:9000/webauthn",
      "legacyWebauthnUrl": "http://localhost:9000/webauthn",
      "webauthnMobileUrl": "http://localhost:9000/webauthnmobile",
      "legacyWebauthnMobileUrl": "http://localhost:9000/webauthnmobile",
      "webauthnRpId": "localhost",
      "u2fAppId": "http://localhost:9000/u2f-appid.json",
      "giftCardBaseUrl": "http://localhost:9000/giftcard",
      "referralBaseUrl": "http://localhost:9000/signup",
      "websiteBaseUrl": "https://tuta.com"
    },
    "{hostname}": {
      "firstPartyDomain": false,
      "partneredDomainTransitionUrl": "{protocol}//{hostname}",
      "apiUrl": "{protocol}//{hostname}",
      "paymentUrl": "https://pay.tutanota.com/braintree.html",
      "webauthnUrl": "{protocol}//{hostname}/webauthn",
      "legacyWebauthnUrl": "{protocol}//{hostname}/webauthn",
      "webauthnMobileUrl": "{protocol}//{hostname}/webauthnmobile",
      "legacyWebauthnMobileUrl": "{protocol}//{hostname}/webauthnmobile",
      "webauthnRpId": "{hostname}",
      "u2fAppId": "{protocol}//{hostname}/u2f-appid.json",
      "giftCardBaseUrl": "https://app.tuta.com/giftcard",
      "referralBaseUrl": "https://app.tuta.com/signup",
      "websiteBaseUrl": "https://tuta.com"
    }
  },
  "platformId": null
};
const __NODE_GYP_better_sqlite3 = `./better-sqlite3.darwin-${typeof process !== 'undefined' ? process.arch : "unknown"}.node`
import "./dist-CJHwsXKY.js";
import "./dist-Rk9U8Iqn.js";
import "./ProgrammingError-D8yJGVtm.js";
import "./Env-D5xGlXfw.js";
import { Keys } from "./TutanotaConstants-3bwAESYA.js";
import { locator$1 as locator } from "./CommonLocator-Csg4iNnm.js";

//#region ../src/common/gui/dialogs/SpellcheckLanguageDialog.ts
async function showSpellcheckLanguageDialog() {
	const { DesktopConfigKey } = await import("./ConfigKeys-DgG5bXPY.js");
	const current = await getCurrentSpellcheckLanguage();
	const { Dialog } = await import("./Dialog-ByuTWlAb.js");
	const items = await getItems();
	const newLang = await Dialog.showDropDownSelectionDialog("spelling_label", "language_label", null, items, current);
	await locator.desktopSettingsFacade.setStringConfigValue(DesktopConfigKey.spellcheck, newLang);
	const selectedItem = items.find((i) => i.value === newLang);
	return selectedItem ? selectedItem.name : items[0].name;
}
async function getCurrentSpellcheckLanguage() {
	const { DesktopConfigKey } = await import("./ConfigKeys-DgG5bXPY.js");
	return await locator.desktopSettingsFacade.getStringConfigValue(DesktopConfigKey.spellcheck) ?? "";
}
async function getItems() {
	const { languages, lang } = await import("./LanguageViewModel-DEF3VY5a.js");
	const options = await locator.desktopSettingsFacade.getSpellcheckLanguages();
	return [{
		name: lang.get("comboBoxSelectionNone_msg"),
		value: ""
	}, ...options.map((code) => {
		const [langCode, locale] = code.split("-");
		const language = languages.find((language$1) => locale && language$1.code === `${langCode}_${locale.toLowerCase()}`) || languages.find((language$1) => language$1.code === langCode) || getMissingLanguage(langCode) || languages.find((language$1) => language$1.code.slice(0, 2) === langCode);
		const textId = language?.textId;
		const name = textId ? lang.get(textId) + ` (${code})` : code;
		return {
			name,
			value: code
		};
	}).sort((a, b) => a.name.localeCompare(b.name))];
}
/**
* Electron has a different selection of spellchecker languages from what our client supports,
* so we can't get all of the names from the LanguageViewModel
*/
function getMissingLanguage(code) {
	const mapping = {
		af: "languageAfrikaans_label",
		cy: "languageWelsh_label",
		fo: "languageFaroese_label",
		hy: "languageArmenian_label",
		nb: "languageNorwegianBokmal_label",
		sh: "languageSerboCroatian_label",
		sq: "languageAlbanian_label",
		ta: "languageTamil_label",
		tg: "languageTajik_label",
		pt: "languagePortugese_label"
	};
	const id = mapping[code];
	return id ? {
		textId: id,
		code
	} : null;
}

//#endregion
//#region ../src/common/native/main/WebDesktopFacade.ts
var WebDesktopFacade = class {
	constructor(logins, nativeInterface) {
		this.logins = logins;
		this.nativeInterface = nativeInterface;
	}
	print() {
		window.print();
		return Promise.resolve();
	}
	async showSpellcheckDropdown() {
		await showSpellcheckLanguageDialog();
	}
	async applySearchResultToOverlay(result) {
		const { searchInPageOverlay } = await import("./SearchInPageOverlay-BIbX7aTA.js");
		searchInPageOverlay.applyNextResult(result);
		return Promise.resolve();
	}
	async openFindInPage() {
		const { searchInPageOverlay } = await import("./SearchInPageOverlay-BIbX7aTA.js");
		searchInPageOverlay.open();
		return Promise.resolve();
	}
	async reportError(errorInfo) {
		const { showErrorNotification } = await import("./ErrorReporter-pO2So3Zm.js");
		await this.logins.waitForPartialLogin();
		await showErrorNotification(errorInfo);
	}
	/**
	* Updates the link-reveal on hover when the main thread detects that
	* the hovered url changed. Will _not_ update if hovering a in link app (starts with 2nd argument)
	*/
	async updateTargetUrl(url, appPath) {
		let linkToolTip = document.getElementById("link-tt");
		if (!linkToolTip) {
			linkToolTip = document.createElement("DIV");
			linkToolTip.id = "link-tt";
			document.body.appendChild(linkToolTip);
		}
		if (url === "" || url.startsWith(appPath)) linkToolTip.className = "";
else {
			linkToolTip.innerText = url;
			linkToolTip.className = "reveal";
		}
		return Promise.resolve();
	}
	/**
	* this is only used in the admin client to sync the DB view with the inbox
	*/
	async openCustomer(mailAddress) {
		const m = await import("./mithril-BIaOo3Yj.js");
		if (typeof mailAddress === "string" && m.route.get().startsWith("/customer")) {
			m.route.set(`/customer?query=${encodeURIComponent(mailAddress)}`);
			console.log("switching to customer", mailAddress);
		}
	}
	async addShortcuts(shortcuts) {
		const baseShortcut = {
			exec: () => true,
			ctrlOrCmd: false,
			alt: false,
			meta: false,
			help: "emptyString_msg",
			key: Keys.F
		};
		const fixedShortcuts = shortcuts.map((nsc) => Object.assign({}, baseShortcut, nsc));
		const { keyManager } = await import("./KeyManager-DJXaUomb.js");
		keyManager.registerDesktopShortcuts(fixedShortcuts);
	}
	async appUpdateDownloaded() {
		const native = await this.nativeInterface();
		native.handleUpdateDownload();
	}
};

//#endregion
export { WebDesktopFacade };
//# sourceMappingURL=WebDesktopFacade-DrZRYxsf.js.map