{"version":3,"file":"better-sqlite3-BmG0PAc2.js","names":["path","fs","require$$0","bindings","i","transaction","pragma","backup","serialize","index","createFTS5Tokenizer","Database","inspect"],"sources":["../../libs/better-sqlite3.mjs"],"sourcesContent":["import { createRequire } from 'node:module';\nconst require = createRequire(import.meta.url);\nimport require$$0 from 'fs';\nimport require$$1 from 'path';\nimport require$$2 from 'util';\n\nfunction getDefaultExportFromCjs (x) {\n\treturn x && x.__esModule && Object.prototype.hasOwnProperty.call(x, 'default') ? x['default'] : x;\n}\n\nvar lib = {exports: {}};\n\nvar util$1 = {};\n\nutil$1.getBooleanOption = (options, key) => {\n\tlet value = false;\n\tif (key in options && typeof (value = options[key]) !== 'boolean') {\n\t\tthrow new TypeError(`Expected the \"${key}\" option to be a boolean`);\n\t}\n\treturn value;\n};\n\nutil$1.cppdb = Symbol();\nutil$1.inspect = Symbol.for('nodejs.util.inspect.custom');\n\nconst descriptor = { value: 'SqliteError', writable: true, enumerable: false, configurable: true };\n\nfunction SqliteError$2(message, code) {\n\tif (new.target !== SqliteError$2) {\n\t\treturn new SqliteError$2(message, code);\n\t}\n\tif (typeof code !== 'string') {\n\t\tthrow new TypeError('Expected second argument to be a string');\n\t}\n\tError.call(this, message);\n\tdescriptor.value = '' + message;\n\tObject.defineProperty(this, 'message', descriptor);\n\tError.captureStackTrace(this, SqliteError$2);\n\tthis.code = code;\n}\nObject.setPrototypeOf(SqliteError$2, Error);\nObject.setPrototypeOf(SqliteError$2.prototype, Error.prototype);\nObject.defineProperty(SqliteError$2.prototype, 'name', descriptor);\nvar sqliteError = SqliteError$2;\n\nvar bindings = {exports: {}};\n\nvar fileUriToPath_1;\nvar hasRequiredFileUriToPath;\n\nfunction requireFileUriToPath () {\n\tif (hasRequiredFileUriToPath) return fileUriToPath_1;\n\thasRequiredFileUriToPath = 1;\n\t/**\n\t * Module dependencies.\n\t */\n\n\tvar sep = require$$1.sep || '/';\n\n\t/**\n\t * Module exports.\n\t */\n\n\tfileUriToPath_1 = fileUriToPath;\n\n\t/**\n\t * File URI to Path function.\n\t *\n\t * @param {String} uri\n\t * @return {String} path\n\t * @api public\n\t */\n\n\tfunction fileUriToPath (uri) {\n\t  if ('string' != typeof uri ||\n\t      uri.length <= 7 ||\n\t      'file://' != uri.substring(0, 7)) {\n\t    throw new TypeError('must pass in a file:// URI to convert to a file path');\n\t  }\n\n\t  var rest = decodeURI(uri.substring(7));\n\t  var firstSlash = rest.indexOf('/');\n\t  var host = rest.substring(0, firstSlash);\n\t  var path = rest.substring(firstSlash + 1);\n\n\t  // 2.  Scheme Definition\n\t  // As a special case, <host> can be the string \"localhost\" or the empty\n\t  // string; this is interpreted as \"the machine from which the URL is\n\t  // being interpreted\".\n\t  if ('localhost' == host) host = '';\n\n\t  if (host) {\n\t    host = sep + sep + host;\n\t  }\n\n\t  // 3.2  Drives, drive letters, mount points, file system root\n\t  // Drive letters are mapped into the top of a file URI in various ways,\n\t  // depending on the implementation; some applications substitute\n\t  // vertical bar (\"|\") for the colon after the drive letter, yielding\n\t  // \"file:///c|/tmp/test.txt\".  In some cases, the colon is left\n\t  // unchanged, as in \"file:///c:/tmp/test.txt\".  In other cases, the\n\t  // colon is simply omitted, as in \"file:///c/tmp/test.txt\".\n\t  path = path.replace(/^(.+)\\|/, '$1:');\n\n\t  // for Windows, we need to invert the path separators from what a URI uses\n\t  if (sep == '\\\\') {\n\t    path = path.replace(/\\//g, '\\\\');\n\t  }\n\n\t  if (/^.+\\:/.test(path)) ; else {\n\t    // unix path…\n\t    path = sep + path;\n\t  }\n\n\t  return host + path;\n\t}\n\treturn fileUriToPath_1;\n}\n\n/**\n * Module dependencies.\n */\n\nvar hasRequiredBindings;\n\nfunction requireBindings () {\n\tif (hasRequiredBindings) return bindings.exports;\n\thasRequiredBindings = 1;\n\t(function (module, exports) {\n\t\tvar fs = require$$0,\n\t\t  path = require$$1,\n\t\t  fileURLToPath = requireFileUriToPath(),\n\t\t  join = path.join,\n\t\t  dirname = path.dirname,\n\t\t  exists =\n\t\t    (fs.accessSync &&\n\t\t      function(path) {\n\t\t        try {\n\t\t          fs.accessSync(path);\n\t\t        } catch (e) {\n\t\t          return false;\n\t\t        }\n\t\t        return true;\n\t\t      }) ||\n\t\t    fs.existsSync ||\n\t\t    path.existsSync,\n\t\t  defaults = {\n\t\t    arrow: process.env.NODE_BINDINGS_ARROW || ' → ',\n\t\t    compiled: process.env.NODE_BINDINGS_COMPILED_DIR || 'compiled',\n\t\t    platform: process.platform,\n\t\t    arch: process.arch,\n\t\t    nodePreGyp:\n\t\t      'node-v' +\n\t\t      process.versions.modules +\n\t\t      '-' +\n\t\t      process.platform +\n\t\t      '-' +\n\t\t      process.arch,\n\t\t    version: process.versions.node,\n\t\t    bindings: 'bindings.node',\n\t\t    try: [\n\t\t      // node-gyp's linked version in the \"build\" dir\n\t\t      ['module_root', 'build', 'bindings'],\n\t\t      // node-waf and gyp_addon (a.k.a node-gyp)\n\t\t      ['module_root', 'build', 'Debug', 'bindings'],\n\t\t      ['module_root', 'build', 'Release', 'bindings'],\n\t\t      // Debug files, for development (legacy behavior, remove for node v0.9)\n\t\t      ['module_root', 'out', 'Debug', 'bindings'],\n\t\t      ['module_root', 'Debug', 'bindings'],\n\t\t      // Release files, but manually compiled (legacy behavior, remove for node v0.9)\n\t\t      ['module_root', 'out', 'Release', 'bindings'],\n\t\t      ['module_root', 'Release', 'bindings'],\n\t\t      // Legacy from node-waf, node <= 0.4.x\n\t\t      ['module_root', 'build', 'default', 'bindings'],\n\t\t      // Production \"Release\" buildtype binary (meh...)\n\t\t      ['module_root', 'compiled', 'version', 'platform', 'arch', 'bindings'],\n\t\t      // node-qbs builds\n\t\t      ['module_root', 'addon-build', 'release', 'install-root', 'bindings'],\n\t\t      ['module_root', 'addon-build', 'debug', 'install-root', 'bindings'],\n\t\t      ['module_root', 'addon-build', 'default', 'install-root', 'bindings'],\n\t\t      // node-pre-gyp path ./lib/binding/{node_abi}-{platform}-{arch}\n\t\t      ['module_root', 'lib', 'binding', 'nodePreGyp', 'bindings']\n\t\t    ]\n\t\t  };\n\n\t\t/**\n\t\t * The main `bindings()` function loads the compiled bindings for a given module.\n\t\t * It uses V8's Error API to determine the parent filename that this function is\n\t\t * being invoked from, which is then used to find the root directory.\n\t\t */\n\n\t\tfunction bindings(opts) {\n\t\t  // Argument surgery\n\t\t  if (typeof opts == 'string') {\n\t\t    opts = { bindings: opts };\n\t\t  } else if (!opts) {\n\t\t    opts = {};\n\t\t  }\n\n\t\t  // maps `defaults` onto `opts` object\n\t\t  Object.keys(defaults).map(function(i) {\n\t\t    if (!(i in opts)) opts[i] = defaults[i];\n\t\t  });\n\n\t\t  // Get the module root\n\t\t  if (!opts.module_root) {\n\t\t    opts.module_root = exports.getRoot(exports.getFileName());\n\t\t  }\n\n\t\t  // Ensure the given bindings name ends with .node\n\t\t  if (path.extname(opts.bindings) != '.node') {\n\t\t    opts.bindings += '.node';\n\t\t  }\n\n\t\t  // https://github.com/webpack/webpack/issues/4175#issuecomment-342931035\n\t\t  var requireFunc =\n\t\t    typeof __webpack_require__ === 'function'\n\t\t      ? __non_webpack_require__\n\t\t      : require;\n\n\t\t  var tries = [],\n\t\t    i = 0,\n\t\t    l = opts.try.length,\n\t\t    n,\n\t\t    b,\n\t\t    err;\n\n\t\t  for (; i < l; i++) {\n\t\t    n = join.apply(\n\t\t      null,\n\t\t      opts.try[i].map(function(p) {\n\t\t        return opts[p] || p;\n\t\t      })\n\t\t    );\n\t\t    tries.push(n);\n\t\t    try {\n\t\t      b = opts.path ? requireFunc.resolve(n) : requireFunc(n);\n\t\t      if (!opts.path) {\n\t\t        b.path = n;\n\t\t      }\n\t\t      return b;\n\t\t    } catch (e) {\n\t\t      if (e.code !== 'MODULE_NOT_FOUND' &&\n\t\t          e.code !== 'QUALIFIED_PATH_RESOLUTION_FAILED' &&\n\t\t          !/not find/i.test(e.message)) {\n\t\t        throw e;\n\t\t      }\n\t\t    }\n\t\t  }\n\n\t\t  err = new Error(\n\t\t    'Could not locate the bindings file. Tried:\\n' +\n\t\t      tries\n\t\t        .map(function(a) {\n\t\t          return opts.arrow + a;\n\t\t        })\n\t\t        .join('\\n')\n\t\t  );\n\t\t  err.tries = tries;\n\t\t  throw err;\n\t\t}\n\t\tmodule.exports = exports = bindings;\n\n\t\t/**\n\t\t * Gets the filename of the JavaScript file that invokes this function.\n\t\t * Used to help find the root directory of a module.\n\t\t * Optionally accepts an filename argument to skip when searching for the invoking filename\n\t\t */\n\n\t\texports.getFileName = function getFileName(calling_file) {\n\t\t  var origPST = Error.prepareStackTrace,\n\t\t    origSTL = Error.stackTraceLimit,\n\t\t    dummy = {},\n\t\t    fileName;\n\n\t\t  Error.stackTraceLimit = 10;\n\n\t\t  Error.prepareStackTrace = function(e, st) {\n\t\t    for (var i = 0, l = st.length; i < l; i++) {\n\t\t      fileName = st[i].getFileName();\n\t\t      if (fileName !== __filename) {\n\t\t        if (calling_file) {\n\t\t          if (fileName !== calling_file) {\n\t\t            return;\n\t\t          }\n\t\t        } else {\n\t\t          return;\n\t\t        }\n\t\t      }\n\t\t    }\n\t\t  };\n\n\t\t  // run the 'prepareStackTrace' function above\n\t\t  Error.captureStackTrace(dummy);\n\t\t  dummy.stack;\n\n\t\t  // cleanup\n\t\t  Error.prepareStackTrace = origPST;\n\t\t  Error.stackTraceLimit = origSTL;\n\n\t\t  // handle filename that starts with \"file://\"\n\t\t  var fileSchema = 'file://';\n\t\t  if (fileName.indexOf(fileSchema) === 0) {\n\t\t    fileName = fileURLToPath(fileName);\n\t\t  }\n\n\t\t  return fileName;\n\t\t};\n\n\t\t/**\n\t\t * Gets the root directory of a module, given an arbitrary filename\n\t\t * somewhere in the module tree. The \"root directory\" is the directory\n\t\t * containing the `package.json` file.\n\t\t *\n\t\t *   In:  /home/nate/node-native-module/lib/index.js\n\t\t *   Out: /home/nate/node-native-module\n\t\t */\n\n\t\texports.getRoot = function getRoot(file) {\n\t\t  var dir = dirname(file),\n\t\t    prev;\n\t\t  while (true) {\n\t\t    if (dir === '.') {\n\t\t      // Avoids an infinite loop in rare cases, like the REPL\n\t\t      dir = process.cwd();\n\t\t    }\n\t\t    if (\n\t\t      exists(join(dir, 'package.json')) ||\n\t\t      exists(join(dir, 'node_modules'))\n\t\t    ) {\n\t\t      // Found the 'package.json' file or 'node_modules' dir; we're done\n\t\t      return dir;\n\t\t    }\n\t\t    if (prev === dir) {\n\t\t      // Got to the top\n\t\t      throw new Error(\n\t\t        'Could not find module root given file: \"' +\n\t\t          file +\n\t\t          '\". Do you have a `package.json` file? '\n\t\t      );\n\t\t    }\n\t\t    // Try the parent dir next\n\t\t    prev = dir;\n\t\t    dir = join(dir, '..');\n\t\t  }\n\t\t}; \n\t} (bindings, bindings.exports));\n\treturn bindings.exports;\n}\n\nvar wrappers$1 = {};\n\nvar hasRequiredWrappers;\n\nfunction requireWrappers () {\n\tif (hasRequiredWrappers) return wrappers$1;\n\thasRequiredWrappers = 1;\n\tconst { cppdb } = util$1;\n\n\twrappers$1.prepare = function prepare(sql) {\n\t\treturn this[cppdb].prepare(sql, this, false);\n\t};\n\n\twrappers$1.exec = function exec(sql) {\n\t\tthis[cppdb].exec(sql);\n\t\treturn this;\n\t};\n\n\twrappers$1.close = function close() {\n\t\tthis[cppdb].close();\n\t\treturn this;\n\t};\n\n\twrappers$1.loadExtension = function loadExtension(...args) {\n\t\tthis[cppdb].loadExtension(...args);\n\t\treturn this;\n\t};\n\n\twrappers$1.defaultSafeIntegers = function defaultSafeIntegers(...args) {\n\t\tthis[cppdb].defaultSafeIntegers(...args);\n\t\treturn this;\n\t};\n\n\twrappers$1.unsafeMode = function unsafeMode(...args) {\n\t\tthis[cppdb].unsafeMode(...args);\n\t\treturn this;\n\t};\n\n\twrappers$1.signalTokenize = function signalTokenize(...args) {\n\t\treturn this[cppdb].signalTokenize(...args);\n\t};\n\n\twrappers$1.getters = {\n\t\tname: {\n\t\t\tget: function name() { return this[cppdb].name; },\n\t\t\tenumerable: true,\n\t\t},\n\t\topen: {\n\t\t\tget: function open() { return this[cppdb].open; },\n\t\t\tenumerable: true,\n\t\t},\n\t\tinTransaction: {\n\t\t\tget: function inTransaction() { return this[cppdb].inTransaction; },\n\t\t\tenumerable: true,\n\t\t},\n\t\treadonly: {\n\t\t\tget: function readonly() { return this[cppdb].readonly; },\n\t\t\tenumerable: true,\n\t\t},\n\t\tmemory: {\n\t\t\tget: function memory() { return this[cppdb].memory; },\n\t\t\tenumerable: true,\n\t\t},\n\t};\n\treturn wrappers$1;\n}\n\nvar transaction;\nvar hasRequiredTransaction;\n\nfunction requireTransaction () {\n\tif (hasRequiredTransaction) return transaction;\n\thasRequiredTransaction = 1;\n\tconst { cppdb } = util$1;\n\tconst controllers = new WeakMap();\n\n\ttransaction = function transaction(fn) {\n\t\tif (typeof fn !== 'function') throw new TypeError('Expected first argument to be a function');\n\n\t\tconst db = this[cppdb];\n\t\tconst controller = getController(db, this);\n\t\tconst { apply } = Function.prototype;\n\n\t\t// Each version of the transaction function has these same properties\n\t\tconst properties = {\n\t\t\tdefault: { value: wrapTransaction(apply, fn, db, controller.default) },\n\t\t\tdeferred: { value: wrapTransaction(apply, fn, db, controller.deferred) },\n\t\t\timmediate: { value: wrapTransaction(apply, fn, db, controller.immediate) },\n\t\t\texclusive: { value: wrapTransaction(apply, fn, db, controller.exclusive) },\n\t\t\tdatabase: { value: this, enumerable: true },\n\t\t};\n\n\t\tObject.defineProperties(properties.default.value, properties);\n\t\tObject.defineProperties(properties.deferred.value, properties);\n\t\tObject.defineProperties(properties.immediate.value, properties);\n\t\tObject.defineProperties(properties.exclusive.value, properties);\n\n\t\t// Return the default version of the transaction function\n\t\treturn properties.default.value;\n\t};\n\n\t// Return the database's cached transaction controller, or create a new one\n\tconst getController = (db, self) => {\n\t\tlet controller = controllers.get(db);\n\t\tif (!controller) {\n\t\t\tconst shared = {\n\t\t\t\tcommit: db.prepare('COMMIT', self, false),\n\t\t\t\trollback: db.prepare('ROLLBACK', self, false),\n\t\t\t\tsavepoint: db.prepare('SAVEPOINT `\\t_bs3.\\t`', self, false),\n\t\t\t\trelease: db.prepare('RELEASE `\\t_bs3.\\t`', self, false),\n\t\t\t\trollbackTo: db.prepare('ROLLBACK TO `\\t_bs3.\\t`', self, false),\n\t\t\t};\n\t\t\tcontrollers.set(db, controller = {\n\t\t\t\tdefault: Object.assign({ begin: db.prepare('BEGIN', self, false) }, shared),\n\t\t\t\tdeferred: Object.assign({ begin: db.prepare('BEGIN DEFERRED', self, false) }, shared),\n\t\t\t\timmediate: Object.assign({ begin: db.prepare('BEGIN IMMEDIATE', self, false) }, shared),\n\t\t\t\texclusive: Object.assign({ begin: db.prepare('BEGIN EXCLUSIVE', self, false) }, shared),\n\t\t\t});\n\t\t}\n\t\treturn controller;\n\t};\n\n\t// Return a new transaction function by wrapping the given function\n\tconst wrapTransaction = (apply, fn, db, { begin, commit, rollback, savepoint, release, rollbackTo }) => function sqliteTransaction() {\n\t\tlet before, after, undo;\n\t\tif (db.inTransaction) {\n\t\t\tbefore = savepoint;\n\t\t\tafter = release;\n\t\t\tundo = rollbackTo;\n\t\t} else {\n\t\t\tbefore = begin;\n\t\t\tafter = commit;\n\t\t\tundo = rollback;\n\t\t}\n\t\tbefore.run();\n\t\ttry {\n\t\t\tconst result = apply.call(fn, this, arguments);\n\t\t\tafter.run();\n\t\t\treturn result;\n\t\t} catch (ex) {\n\t\t\tif (db.inTransaction) {\n\t\t\t\tundo.run();\n\t\t\t\tif (undo !== rollback) after.run();\n\t\t\t}\n\t\t\tthrow ex;\n\t\t}\n\t};\n\treturn transaction;\n}\n\nvar pragma;\nvar hasRequiredPragma;\n\nfunction requirePragma () {\n\tif (hasRequiredPragma) return pragma;\n\thasRequiredPragma = 1;\n\tconst { getBooleanOption, cppdb } = util$1;\n\n\tpragma = function pragma(source, options) {\n\t\tif (options == null) options = {};\n\t\tif (typeof source !== 'string') throw new TypeError('Expected first argument to be a string');\n\t\tif (typeof options !== 'object') throw new TypeError('Expected second argument to be an options object');\n\t\tconst simple = getBooleanOption(options, 'simple');\n\n\t\tconst stmt = this[cppdb].prepare(`PRAGMA ${source}`, this, true);\n\t\treturn simple ? stmt.pluck().get() : stmt.all();\n\t};\n\treturn pragma;\n}\n\nvar backup;\nvar hasRequiredBackup;\n\nfunction requireBackup () {\n\tif (hasRequiredBackup) return backup;\n\thasRequiredBackup = 1;\n\tconst fs = require$$0;\n\tconst path = require$$1;\n\tconst { promisify } = require$$2;\n\tconst { cppdb } = util$1;\n\tconst fsAccess = promisify(fs.access);\n\n\tbackup = async function backup(filename, options) {\n\t\tif (options == null) options = {};\n\n\t\t// Validate arguments\n\t\tif (typeof filename !== 'string') throw new TypeError('Expected first argument to be a string');\n\t\tif (typeof options !== 'object') throw new TypeError('Expected second argument to be an options object');\n\n\t\t// Interpret options\n\t\tfilename = filename.trim();\n\t\tconst attachedName = 'attached' in options ? options.attached : 'main';\n\t\tconst handler = 'progress' in options ? options.progress : null;\n\n\t\t// Validate interpreted options\n\t\tif (!filename) throw new TypeError('Backup filename cannot be an empty string');\n\t\tif (filename === ':memory:') throw new TypeError('Invalid backup filename \":memory:\"');\n\t\tif (typeof attachedName !== 'string') throw new TypeError('Expected the \"attached\" option to be a string');\n\t\tif (!attachedName) throw new TypeError('The \"attached\" option cannot be an empty string');\n\t\tif (handler != null && typeof handler !== 'function') throw new TypeError('Expected the \"progress\" option to be a function');\n\n\t\t// Make sure the specified directory exists\n\t\tawait fsAccess(path.dirname(filename)).catch(() => {\n\t\t\tthrow new TypeError('Cannot save backup because the directory does not exist');\n\t\t});\n\n\t\tconst isNewFile = await fsAccess(filename).then(() => false, () => true);\n\t\treturn runBackup(this[cppdb].backup(this, attachedName, filename, isNewFile), handler || null);\n\t};\n\n\tconst runBackup = (backup, handler) => {\n\t\tlet rate = 0;\n\t\tlet useDefault = true;\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tsetImmediate(function step() {\n\t\t\t\ttry {\n\t\t\t\t\tconst progress = backup.transfer(rate);\n\t\t\t\t\tif (!progress.remainingPages) {\n\t\t\t\t\t\tbackup.close();\n\t\t\t\t\t\tresolve(progress);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (useDefault) {\n\t\t\t\t\t\tuseDefault = false;\n\t\t\t\t\t\trate = 100;\n\t\t\t\t\t}\n\t\t\t\t\tif (handler) {\n\t\t\t\t\t\tconst ret = handler(progress);\n\t\t\t\t\t\tif (ret !== undefined) {\n\t\t\t\t\t\t\tif (typeof ret === 'number' && ret === ret) rate = Math.max(0, Math.min(0x7fffffff, Math.round(ret)));\n\t\t\t\t\t\t\telse throw new TypeError('Expected progress callback to return a number or undefined');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tsetImmediate(step);\n\t\t\t\t} catch (err) {\n\t\t\t\t\tbackup.close();\n\t\t\t\t\treject(err);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t};\n\treturn backup;\n}\n\nvar serialize;\nvar hasRequiredSerialize;\n\nfunction requireSerialize () {\n\tif (hasRequiredSerialize) return serialize;\n\thasRequiredSerialize = 1;\n\tconst { cppdb } = util$1;\n\n\tserialize = function serialize(options) {\n\t\tif (options == null) options = {};\n\n\t\t// Validate arguments\n\t\tif (typeof options !== 'object') throw new TypeError('Expected first argument to be an options object');\n\n\t\t// Interpret and validate options\n\t\tconst attachedName = 'attached' in options ? options.attached : 'main';\n\t\tif (typeof attachedName !== 'string') throw new TypeError('Expected the \"attached\" option to be a string');\n\t\tif (!attachedName) throw new TypeError('The \"attached\" option cannot be an empty string');\n\n\t\treturn this[cppdb].serialize(attachedName);\n\t};\n\treturn serialize;\n}\n\nvar _function;\nvar hasRequired_function;\n\nfunction require_function () {\n\tif (hasRequired_function) return _function;\n\thasRequired_function = 1;\n\tconst { getBooleanOption, cppdb } = util$1;\n\n\t_function = function defineFunction(name, options, fn) {\n\t\t// Apply defaults\n\t\tif (options == null) options = {};\n\t\tif (typeof options === 'function') { fn = options; options = {}; }\n\n\t\t// Validate arguments\n\t\tif (typeof name !== 'string') throw new TypeError('Expected first argument to be a string');\n\t\tif (typeof fn !== 'function') throw new TypeError('Expected last argument to be a function');\n\t\tif (typeof options !== 'object') throw new TypeError('Expected second argument to be an options object');\n\t\tif (!name) throw new TypeError('User-defined function name cannot be an empty string');\n\n\t\t// Interpret options\n\t\tconst safeIntegers = 'safeIntegers' in options ? +getBooleanOption(options, 'safeIntegers') : 2;\n\t\tconst deterministic = getBooleanOption(options, 'deterministic');\n\t\tconst directOnly = getBooleanOption(options, 'directOnly');\n\t\tconst varargs = getBooleanOption(options, 'varargs');\n\t\tlet argCount = -1;\n\n\t\t// Determine argument count\n\t\tif (!varargs) {\n\t\t\targCount = fn.length;\n\t\t\tif (!Number.isInteger(argCount) || argCount < 0) throw new TypeError('Expected function.length to be a positive integer');\n\t\t\tif (argCount > 100) throw new RangeError('User-defined functions cannot have more than 100 arguments');\n\t\t}\n\n\t\tthis[cppdb].function(fn, name, argCount, safeIntegers, deterministic, directOnly);\n\t\treturn this;\n\t};\n\treturn _function;\n}\n\nvar aggregate;\nvar hasRequiredAggregate;\n\nfunction requireAggregate () {\n\tif (hasRequiredAggregate) return aggregate;\n\thasRequiredAggregate = 1;\n\tconst { getBooleanOption, cppdb } = util$1;\n\n\taggregate = function defineAggregate(name, options) {\n\t\t// Validate arguments\n\t\tif (typeof name !== 'string') throw new TypeError('Expected first argument to be a string');\n\t\tif (typeof options !== 'object' || options === null) throw new TypeError('Expected second argument to be an options object');\n\t\tif (!name) throw new TypeError('User-defined function name cannot be an empty string');\n\n\t\t// Interpret options\n\t\tconst start = 'start' in options ? options.start : null;\n\t\tconst step = getFunctionOption(options, 'step', true);\n\t\tconst inverse = getFunctionOption(options, 'inverse', false);\n\t\tconst result = getFunctionOption(options, 'result', false);\n\t\tconst safeIntegers = 'safeIntegers' in options ? +getBooleanOption(options, 'safeIntegers') : 2;\n\t\tconst deterministic = getBooleanOption(options, 'deterministic');\n\t\tconst directOnly = getBooleanOption(options, 'directOnly');\n\t\tconst varargs = getBooleanOption(options, 'varargs');\n\t\tlet argCount = -1;\n\n\t\t// Determine argument count\n\t\tif (!varargs) {\n\t\t\targCount = Math.max(getLength(step), inverse ? getLength(inverse) : 0);\n\t\t\tif (argCount > 0) argCount -= 1;\n\t\t\tif (argCount > 100) throw new RangeError('User-defined functions cannot have more than 100 arguments');\n\t\t}\n\n\t\tthis[cppdb].aggregate(start, step, inverse, result, name, argCount, safeIntegers, deterministic, directOnly);\n\t\treturn this;\n\t};\n\n\tconst getFunctionOption = (options, key, required) => {\n\t\tconst value = key in options ? options[key] : null;\n\t\tif (typeof value === 'function') return value;\n\t\tif (value != null) throw new TypeError(`Expected the \"${key}\" option to be a function`);\n\t\tif (required) throw new TypeError(`Missing required option \"${key}\"`);\n\t\treturn null;\n\t};\n\n\tconst getLength = ({ length }) => {\n\t\tif (Number.isInteger(length) && length >= 0) return length;\n\t\tthrow new TypeError('Expected function.length to be a positive integer');\n\t};\n\treturn aggregate;\n}\n\nvar table;\nvar hasRequiredTable;\n\nfunction requireTable () {\n\tif (hasRequiredTable) return table;\n\thasRequiredTable = 1;\n\tconst { cppdb } = util$1;\n\n\ttable = function defineTable(name, factory) {\n\t\t// Validate arguments\n\t\tif (typeof name !== 'string') throw new TypeError('Expected first argument to be a string');\n\t\tif (!name) throw new TypeError('Virtual table module name cannot be an empty string');\n\n\t\t// Determine whether the module is eponymous-only or not\n\t\tlet eponymous = false;\n\t\tif (typeof factory === 'object' && factory !== null) {\n\t\t\teponymous = true;\n\t\t\tfactory = defer(parseTableDefinition(factory, 'used', name));\n\t\t} else {\n\t\t\tif (typeof factory !== 'function') throw new TypeError('Expected second argument to be a function or a table definition object');\n\t\t\tfactory = wrapFactory(factory);\n\t\t}\n\n\t\tthis[cppdb].table(factory, name, eponymous);\n\t\treturn this;\n\t};\n\n\tfunction wrapFactory(factory) {\n\t\treturn function virtualTableFactory(moduleName, databaseName, tableName, ...args) {\n\t\t\tconst thisObject = {\n\t\t\t\tmodule: moduleName,\n\t\t\t\tdatabase: databaseName,\n\t\t\t\ttable: tableName,\n\t\t\t};\n\n\t\t\t// Generate a new table definition by invoking the factory\n\t\t\tconst def = apply.call(factory, thisObject, args);\n\t\t\tif (typeof def !== 'object' || def === null) {\n\t\t\t\tthrow new TypeError(`Virtual table module \"${moduleName}\" did not return a table definition object`);\n\t\t\t}\n\n\t\t\treturn parseTableDefinition(def, 'returned', moduleName);\n\t\t};\n\t}\n\n\tfunction parseTableDefinition(def, verb, moduleName) {\n\t\t// Validate required properties\n\t\tif (!hasOwnProperty.call(def, 'rows')) {\n\t\t\tthrow new TypeError(`Virtual table module \"${moduleName}\" ${verb} a table definition without a \"rows\" property`);\n\t\t}\n\t\tif (!hasOwnProperty.call(def, 'columns')) {\n\t\t\tthrow new TypeError(`Virtual table module \"${moduleName}\" ${verb} a table definition without a \"columns\" property`);\n\t\t}\n\n\t\t// Validate \"rows\" property\n\t\tconst rows = def.rows;\n\t\tif (typeof rows !== 'function' || Object.getPrototypeOf(rows) !== GeneratorFunctionPrototype) {\n\t\t\tthrow new TypeError(`Virtual table module \"${moduleName}\" ${verb} a table definition with an invalid \"rows\" property (should be a generator function)`);\n\t\t}\n\n\t\t// Validate \"columns\" property\n\t\tlet columns = def.columns;\n\t\tif (!Array.isArray(columns) || !(columns = [...columns]).every(x => typeof x === 'string')) {\n\t\t\tthrow new TypeError(`Virtual table module \"${moduleName}\" ${verb} a table definition with an invalid \"columns\" property (should be an array of strings)`);\n\t\t}\n\t\tif (columns.length !== new Set(columns).size) {\n\t\t\tthrow new TypeError(`Virtual table module \"${moduleName}\" ${verb} a table definition with duplicate column names`);\n\t\t}\n\t\tif (!columns.length) {\n\t\t\tthrow new RangeError(`Virtual table module \"${moduleName}\" ${verb} a table definition with zero columns`);\n\t\t}\n\n\t\t// Validate \"parameters\" property\n\t\tlet parameters;\n\t\tif (hasOwnProperty.call(def, 'parameters')) {\n\t\t\tparameters = def.parameters;\n\t\t\tif (!Array.isArray(parameters) || !(parameters = [...parameters]).every(x => typeof x === 'string')) {\n\t\t\t\tthrow new TypeError(`Virtual table module \"${moduleName}\" ${verb} a table definition with an invalid \"parameters\" property (should be an array of strings)`);\n\t\t\t}\n\t\t} else {\n\t\t\tparameters = inferParameters(rows);\n\t\t}\n\t\tif (parameters.length !== new Set(parameters).size) {\n\t\t\tthrow new TypeError(`Virtual table module \"${moduleName}\" ${verb} a table definition with duplicate parameter names`);\n\t\t}\n\t\tif (parameters.length > 32) {\n\t\t\tthrow new RangeError(`Virtual table module \"${moduleName}\" ${verb} a table definition with more than the maximum number of 32 parameters`);\n\t\t}\n\t\tfor (const parameter of parameters) {\n\t\t\tif (columns.includes(parameter)) {\n\t\t\t\tthrow new TypeError(`Virtual table module \"${moduleName}\" ${verb} a table definition with column \"${parameter}\" which was ambiguously defined as both a column and parameter`);\n\t\t\t}\n\t\t}\n\n\t\t// Validate \"safeIntegers\" option\n\t\tlet safeIntegers = 2;\n\t\tif (hasOwnProperty.call(def, 'safeIntegers')) {\n\t\t\tconst bool = def.safeIntegers;\n\t\t\tif (typeof bool !== 'boolean') {\n\t\t\t\tthrow new TypeError(`Virtual table module \"${moduleName}\" ${verb} a table definition with an invalid \"safeIntegers\" property (should be a boolean)`);\n\t\t\t}\n\t\t\tsafeIntegers = +bool;\n\t\t}\n\n\t\t// Validate \"directOnly\" option\n\t\tlet directOnly = false;\n\t\tif (hasOwnProperty.call(def, 'directOnly')) {\n\t\t\tdirectOnly = def.directOnly;\n\t\t\tif (typeof directOnly !== 'boolean') {\n\t\t\t\tthrow new TypeError(`Virtual table module \"${moduleName}\" ${verb} a table definition with an invalid \"directOnly\" property (should be a boolean)`);\n\t\t\t}\n\t\t}\n\n\t\t// Generate SQL for the virtual table definition\n\t\tconst columnDefinitions = [\n\t\t\t...parameters.map(identifier).map(str => `${str} HIDDEN`),\n\t\t\t...columns.map(identifier),\n\t\t];\n\t\treturn [\n\t\t\t`CREATE TABLE x(${columnDefinitions.join(', ')});`,\n\t\t\twrapGenerator(rows, new Map(columns.map((x, i) => [x, parameters.length + i])), moduleName),\n\t\t\tparameters,\n\t\t\tsafeIntegers,\n\t\t\tdirectOnly,\n\t\t];\n\t}\n\n\tfunction wrapGenerator(generator, columnMap, moduleName) {\n\t\treturn function* virtualTable(...args) {\n\t\t\t/*\n\t\t\t\tWe must defensively clone any buffers in the arguments, because\n\t\t\t\totherwise the generator could mutate one of them, which would cause\n\t\t\t\tus to return incorrect values for hidden columns, potentially\n\t\t\t\tcorrupting the database.\n\t\t\t */\n\t\t\tconst output = args.map(x => Buffer.isBuffer(x) ? Buffer.from(x) : x);\n\t\t\tfor (let i = 0; i < columnMap.size; ++i) {\n\t\t\t\toutput.push(null); // Fill with nulls to prevent gaps in array (v8 optimization)\n\t\t\t}\n\t\t\tfor (const row of generator(...args)) {\n\t\t\t\tif (Array.isArray(row)) {\n\t\t\t\t\textractRowArray(row, output, columnMap.size, moduleName);\n\t\t\t\t\tyield output;\n\t\t\t\t} else if (typeof row === 'object' && row !== null) {\n\t\t\t\t\textractRowObject(row, output, columnMap, moduleName);\n\t\t\t\t\tyield output;\n\t\t\t\t} else {\n\t\t\t\t\tthrow new TypeError(`Virtual table module \"${moduleName}\" yielded something that isn't a valid row object`);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n\n\tfunction extractRowArray(row, output, columnCount, moduleName) {\n\t\tif (row.length !== columnCount) {\n\t\t\tthrow new TypeError(`Virtual table module \"${moduleName}\" yielded a row with an incorrect number of columns`);\n\t\t}\n\t\tconst offset = output.length - columnCount;\n\t\tfor (let i = 0; i < columnCount; ++i) {\n\t\t\toutput[i + offset] = row[i];\n\t\t}\n\t}\n\n\tfunction extractRowObject(row, output, columnMap, moduleName) {\n\t\tlet count = 0;\n\t\tfor (const key of Object.keys(row)) {\n\t\t\tconst index = columnMap.get(key);\n\t\t\tif (index === undefined) {\n\t\t\t\tthrow new TypeError(`Virtual table module \"${moduleName}\" yielded a row with an undeclared column \"${key}\"`);\n\t\t\t}\n\t\t\toutput[index] = row[key];\n\t\t\tcount += 1;\n\t\t}\n\t\tif (count !== columnMap.size) {\n\t\t\tthrow new TypeError(`Virtual table module \"${moduleName}\" yielded a row with missing columns`);\n\t\t}\n\t}\n\n\tfunction inferParameters({ length }) {\n\t\tif (!Number.isInteger(length) || length < 0) {\n\t\t\tthrow new TypeError('Expected function.length to be a positive integer');\n\t\t}\n\t\tconst params = [];\n\t\tfor (let i = 0; i < length; ++i) {\n\t\t\tparams.push(`$${i + 1}`);\n\t\t}\n\t\treturn params;\n\t}\n\n\tconst { hasOwnProperty } = Object.prototype;\n\tconst { apply } = Function.prototype;\n\tconst GeneratorFunctionPrototype = Object.getPrototypeOf(function*(){});\n\tconst identifier = str => `\"${str.replace(/\"/g, '\"\"')}\"`;\n\tconst defer = x => () => x;\n\treturn table;\n}\n\nvar createFTS5Tokenizer;\nvar hasRequiredCreateFTS5Tokenizer;\n\nfunction requireCreateFTS5Tokenizer () {\n\tif (hasRequiredCreateFTS5Tokenizer) return createFTS5Tokenizer;\n\thasRequiredCreateFTS5Tokenizer = 1;\n\tconst { cppdb } = util$1;\n\n\tcreateFTS5Tokenizer = function createFTS5Tokenizer(name, factory) {\n\t\t// Validate arguments\n\t\tif (typeof name !== 'string') throw new TypeError('Expected first argument to be a string');\n\t\tif (!name) throw new TypeError('Virtual table module name cannot be an empty string');\n\t\tif (typeof factory !== 'function') throw new TypeError('Expected second argument to be a constructor');\n\n\t\tthis[cppdb].createFTS5Tokenizer(name, function create(params) {\n\t\t\tconst instance = new factory(params);\n\n\t\t\tfunction run(str) {\n\t\t\t\tif (!instance.run) {\n\t\t\t\t\t// This will throw in C++\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\treturn instance.run(str);\n\t\t\t}\n\n\t\t\treturn run;\n\t\t});\n\t\treturn this;\n\t};\n\treturn createFTS5Tokenizer;\n}\n\nvar inspect;\nvar hasRequiredInspect;\n\nfunction requireInspect () {\n\tif (hasRequiredInspect) return inspect;\n\thasRequiredInspect = 1;\n\tconst DatabaseInspection = function Database() {};\n\n\tinspect = function inspect(depth, opts) {\n\t\treturn Object.assign(new DatabaseInspection(), this);\n\t};\n\treturn inspect;\n}\n\nconst fs = require$$0;\nconst path = require$$1;\nconst util = util$1;\nconst SqliteError$1 = sqliteError;\n\nlet DEFAULT_ADDON;\n\nfunction Database(filenameGiven, options) {\n\tif (new.target == null) {\n\t\treturn new Database(filenameGiven, options);\n\t}\n\n\t// Apply defaults\n\tlet buffer;\n\tif (Buffer.isBuffer(filenameGiven)) {\n\t\tbuffer = filenameGiven;\n\t\tfilenameGiven = ':memory:';\n\t}\n\tif (filenameGiven == null) filenameGiven = '';\n\tif (options == null) options = {};\n\n\t// Validate arguments\n\tif (typeof filenameGiven !== 'string') throw new TypeError('Expected first argument to be a string');\n\tif (typeof options !== 'object') throw new TypeError('Expected second argument to be an options object');\n\tif ('readOnly' in options) throw new TypeError('Misspelled option \"readOnly\" should be \"readonly\"');\n\tif ('memory' in options) throw new TypeError('Option \"memory\" was removed in v7.0.0 (use \":memory:\" filename instead)');\n\n\t// Interpret options\n\tconst filename = filenameGiven.trim();\n\tconst anonymous = filename === '' || filename === ':memory:';\n\tconst readonly = util.getBooleanOption(options, 'readonly');\n\tconst fileMustExist = util.getBooleanOption(options, 'fileMustExist');\n\tconst timeout = 'timeout' in options ? options.timeout : 5000;\n\tconst verbose = 'verbose' in options ? options.verbose : null;\n\tconst nativeBindingPath = 'nativeBinding' in options ? options.nativeBinding : null;\n\n\t// Validate interpreted options\n\tif (readonly && anonymous && !buffer) throw new TypeError('In-memory/temporary databases cannot be readonly');\n\tif (!Number.isInteger(timeout) || timeout < 0) throw new TypeError('Expected the \"timeout\" option to be a positive integer');\n\tif (timeout > 0x7fffffff) throw new RangeError('Option \"timeout\" cannot be greater than 2147483647');\n\tif (verbose != null && typeof verbose !== 'function') throw new TypeError('Expected the \"verbose\" option to be a function');\n\tif (nativeBindingPath != null && typeof nativeBindingPath !== 'string') throw new TypeError('Expected the \"nativeBinding\" option to be a string');\n\n\t// Load the native addon\n\tlet addon;\n\tif (nativeBindingPath == null) {\n\t\taddon = DEFAULT_ADDON || (DEFAULT_ADDON = requireBindings()('better_sqlite3.node'));\n\t} else {\n\t\taddon = require(nativeBindingPath.replace(/(\\.node)?$/, '.node'));\n\t}\n\tif (!addon.isInitialized) {\n\t\taddon.setErrorConstructor(SqliteError$1);\n\t\taddon.setLogHandler(logHandlerWrap);\n\t\taddon.isInitialized = true;\n\t}\n\n\t// Make sure the specified directory exists\n\tif (!anonymous && !fs.existsSync(path.dirname(filename))) {\n\t\tthrow new TypeError('Cannot open database because the directory does not exist');\n\t}\n\n\tObject.defineProperties(this, {\n\t\t[util.cppdb]: {value: new addon.Database(filename, filenameGiven, anonymous, readonly, fileMustExist, timeout, verbose || null, buffer || null)},\n\t\t...wrappers.getters,\n\t});\n}\n\nlet logHandler;\nfunction logHandlerWrap(code, warning) {\n\tif (logHandler) {\n\t\tlogHandler(code, warning);\n\t}\n}\n\nconst wrappers = requireWrappers();\nDatabase.prototype.prepare = wrappers.prepare;\nDatabase.prototype.transaction = requireTransaction();\nDatabase.prototype.pragma = requirePragma();\nDatabase.prototype.backup = requireBackup();\nDatabase.prototype.serialize = requireSerialize();\nDatabase.prototype.function = require_function();\nDatabase.prototype.aggregate = requireAggregate();\nDatabase.prototype.table = requireTable();\nDatabase.prototype.createFTS5Tokenizer = requireCreateFTS5Tokenizer();\nDatabase.prototype.loadExtension = wrappers.loadExtension;\nDatabase.prototype.exec = wrappers.exec;\nDatabase.prototype.close = wrappers.close;\nDatabase.prototype.defaultSafeIntegers = wrappers.defaultSafeIntegers;\nDatabase.prototype.unsafeMode = wrappers.unsafeMode;\nDatabase.prototype.signalTokenize = wrappers.signalTokenize;\nDatabase.prototype[util.inspect] = requireInspect();\n\n// Static\nDatabase.setLogHandler = function setLogHandler(fn) {\n\tlogHandler = fn;\n};\n\nvar database = Database;\n\nlib.exports = database;\nvar SqliteError = lib.exports.SqliteError = sqliteError;\n\nvar libExports = lib.exports;\nvar index = /*@__PURE__*/getDefaultExportFromCjs(libExports);\n\nexport { SqliteError, index as default };\n"],"mappings":"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"}