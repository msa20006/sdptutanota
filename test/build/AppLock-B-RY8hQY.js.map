{"version":3,"file":"AppLock-B-RY8hQY.js","names":["mobileSystemFacade: MobileSystemFacade","credentialsFacade: NativeCredentialsFacade"],"sources":["../../src/common/login/AppLock.ts"],"sourcesContent":["import { MobileSystemFacade } from \"../native/common/generatedipc/MobileSystemFacade.js\"\nimport { NativeCredentialsFacade } from \"../native/common/generatedipc/NativeCredentialsFacade.js\"\nimport { CredentialEncryptionMode } from \"../misc/credentials/CredentialEncryptionMode.js\"\n\n/**\n * Enforces app authentication via system mechanism e.g. system password or biometrics.\n */\nexport interface AppLock {\n\t/** @throws CredentialAuthenticationError */\n\tenforce(): Promise<void>\n}\n\nexport class NoOpAppLock implements AppLock {\n\tasync enforce(): Promise<void> {}\n}\n\nexport class MobileAppLock implements AppLock {\n\tconstructor(private readonly mobileSystemFacade: MobileSystemFacade, private readonly credentialsFacade: NativeCredentialsFacade) {}\n\n\tasync enforce(): Promise<void> {\n\t\tif ((await this.credentialsFacade.getCredentialEncryptionMode()) != CredentialEncryptionMode.DEVICE_LOCK) {\n\t\t\t// for migration: do not display the lock twice\n\t\t\treturn\n\t\t}\n\t\treturn this.mobileSystemFacade.enforceAppLock(await this.mobileSystemFacade.getAppLockMethod())\n\t}\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAYa,cAAN,MAAqC;CAC3C,MAAM,UAAyB,CAAE;AACjC;IAEY,gBAAN,MAAuC;CAC7C,YAA6BA,oBAAyDC,mBAA4C;EAUlI,KAV6B;EAU5B,KAVqF;CAA8C;CAEpI,MAAM,UAAyB;AAC9B,MAAK,MAAM,KAAK,kBAAkB,6BAA6B,IAAK,yBAAyB,YAE5F;AAED,SAAO,KAAK,mBAAmB,eAAe,MAAM,KAAK,mBAAmB,kBAAkB,CAAC;CAC/F;AACD"}