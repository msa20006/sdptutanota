
globalThis.env = {
  "staticUrl": "http://localhost:9000",
  "versionNumber": "264.250130.1",
  "dist": false,
  "mode": "Test",
  "timeout": 20000,
  "domainConfigs": {
    "mail.tutanota.com": {
      "firstPartyDomain": true,
      "partneredDomainTransitionUrl": "https://app.tuta.com",
      "apiUrl": "https://mail.tutanota.com",
      "paymentUrl": "https://pay.tutanota.com/braintree.html",
      "webauthnUrl": "https://app.tuta.com/webauthn",
      "legacyWebauthnUrl": "https://mail.tutanota.com/webauthn",
      "webauthnMobileUrl": "https://app.tuta.com/webauthnmobile",
      "legacyWebauthnMobileUrl": "https://mail.tutanota.com/webauthnmobile",
      "webauthnRpId": "tutanota.com",
      "u2fAppId": "https://tutanota.com/u2f-appid.json",
      "giftCardBaseUrl": "https://app.tuta.com/giftcard",
      "referralBaseUrl": "https://app.tuta.com/signup",
      "websiteBaseUrl": "https://tutanota.com"
    },
    "test.tutanota.com": {
      "firstPartyDomain": true,
      "partneredDomainTransitionUrl": "https://app.test.tuta.com",
      "apiUrl": "https://test.tutanota.com",
      "paymentUrl": "https://pay.test.tutanota.com/braintree.html",
      "webauthnUrl": "https://app.test.tuta.com/webauthn",
      "legacyWebauthnUrl": "https://test.tutanota.com/webauthn",
      "webauthnMobileUrl": "https://app.test.tuta.com/webauthnmobile",
      "legacyWebauthnMobileUrl": "https://test.tutanota.com/webauthnmobile",
      "webauthnRpId": "tutanota.com",
      "u2fAppId": "https://test.tutanota.com/u2f-appid.json",
      "giftCardBaseUrl": "https://app.test.tuta.com/giftcard",
      "referralBaseUrl": "https://app.test.tuta.com/signup",
      "websiteBaseUrl": "https://tutanota.com"
    },
    "app.local.tutanota.com": {
      "firstPartyDomain": true,
      "partneredDomainTransitionUrl": "https://app.local.tuta.com:9000",
      "apiUrl": "https://app.local.tutanota.com:9000",
      "paymentUrl": "https://local.tutanota.com:9000/client/build/braintree.html",
      "webauthnUrl": "https://app.local.tuta.com:9000/client/build/webauthn",
      "legacyWebauthnUrl": "https://local.tutanota.com:9000/client/build/webauthn",
      "webauthnMobileUrl": "https://app.local.tuta.com:9000/client/build/webauthnmobile",
      "legacyWebauthnMobileUrl": "https://local.tutanota.com:9000/client/build/webauthnmobile",
      "webauthnRpId": "tutanota.com",
      "u2fAppId": "https://local.tutanota.com/u2f-appid.json",
      "giftCardBaseUrl": "https://app.local.tuta.com:9000/giftcard",
      "referralBaseUrl": "https://app.local.tuta.com:9000/signup",
      "websiteBaseUrl": "https://local.tutanota.com:9000"
    },
    "app.tuta.com": {
      "firstPartyDomain": true,
      "partneredDomainTransitionUrl": "https://mail.tutanota.com",
      "apiUrl": "https://app.tuta.com",
      "paymentUrl": "https://pay.tutanota.com/braintree.html",
      "webauthnUrl": "https://app.tuta.com/webauthn",
      "legacyWebauthnUrl": "https://mail.tutanota.com/webauthn",
      "webauthnMobileUrl": "https://app.tuta.com/webauthnmobile",
      "legacyWebauthnMobileUrl": "https://mail.tutanota.com/webauthnmobile",
      "webauthnRpId": "tuta.com",
      "u2fAppId": "https://app.tuta.com/u2f-appid.json",
      "giftCardBaseUrl": "https://app.tuta.com/giftcard",
      "referralBaseUrl": "https://app.tuta.com/signup",
      "websiteBaseUrl": "https://tuta.com"
    },
    "app.test.tuta.com": {
      "firstPartyDomain": true,
      "partneredDomainTransitionUrl": "https://test.tutanota.com",
      "apiUrl": "https://app.test.tuta.com",
      "paymentUrl": "https://pay.test.tutanota.com/braintree.html",
      "webauthnUrl": "https://app.test.tuta.com/webauthn",
      "legacyWebauthnUrl": "https://test.tutanota.com/webauthn",
      "webauthnMobileUrl": "https://app.test.tuta.com/webauthnmobile",
      "legacyWebauthnMobileUrl": "https://test.tutanota.com/webauthnmobile",
      "webauthnRpId": "tuta.com",
      "u2fAppId": "https://app.test.tuta.com/u2f-appid.json",
      "giftCardBaseUrl": "https://app.test.tuta.com/giftcard",
      "referralBaseUrl": "https://app.test.tuta.com/signup",
      "websiteBaseUrl": "https://test.tuta.com"
    },
    "app.local.tuta.com": {
      "firstPartyDomain": true,
      "partneredDomainTransitionUrl": "https://app.local.tutanota.com:9000",
      "apiUrl": "https://app.local.tuta.com:9000",
      "paymentUrl": "https://app.local.tuta.com:9000/braintree.html",
      "webauthnUrl": "https://app.local.tuta.com:9000/webauthn",
      "legacyWebauthnUrl": "https://local.tutanota.com:9000/webauthn",
      "webauthnMobileUrl": "https://app.local.tuta.com:9000/webauthnmobile",
      "legacyWebauthnMobileUrl": "https://local.tutanota.com:9000/webauthnmobile",
      "webauthnRpId": "tuta.com",
      "u2fAppId": "https://app.local.tuta.com/u2f-appid.json",
      "giftCardBaseUrl": "https://app.local.tuta.com:9000/giftcard",
      "referralBaseUrl": "https://app.local.tuta.com:9000/signup",
      "websiteBaseUrl": "https://local.tuta.com:9000"
    },
    "localhost": {
      "firstPartyDomain": true,
      "partneredDomainTransitionUrl": "http://localhost:9000",
      "apiUrl": "http://localhost:9000",
      "paymentUrl": "http://localhost:9000/braintree.html",
      "webauthnUrl": "http://localhost:9000/webauthn",
      "legacyWebauthnUrl": "http://localhost:9000/webauthn",
      "webauthnMobileUrl": "http://localhost:9000/webauthnmobile",
      "legacyWebauthnMobileUrl": "http://localhost:9000/webauthnmobile",
      "webauthnRpId": "localhost",
      "u2fAppId": "http://localhost:9000/u2f-appid.json",
      "giftCardBaseUrl": "http://localhost:9000/giftcard",
      "referralBaseUrl": "http://localhost:9000/signup",
      "websiteBaseUrl": "https://tuta.com"
    },
    "{hostname}": {
      "firstPartyDomain": false,
      "partneredDomainTransitionUrl": "{protocol}//{hostname}",
      "apiUrl": "{protocol}//{hostname}",
      "paymentUrl": "https://pay.tutanota.com/braintree.html",
      "webauthnUrl": "{protocol}//{hostname}/webauthn",
      "legacyWebauthnUrl": "{protocol}//{hostname}/webauthn",
      "webauthnMobileUrl": "{protocol}//{hostname}/webauthnmobile",
      "legacyWebauthnMobileUrl": "{protocol}//{hostname}/webauthnmobile",
      "webauthnRpId": "{hostname}",
      "u2fAppId": "{protocol}//{hostname}/u2f-appid.json",
      "giftCardBaseUrl": "https://app.tuta.com/giftcard",
      "referralBaseUrl": "https://app.tuta.com/signup",
      "websiteBaseUrl": "https://tuta.com"
    }
  },
  "platformId": null
};
const __NODE_GYP_better_sqlite3 = `./better-sqlite3.darwin-${typeof process !== 'undefined' ? process.arch : "unknown"}.node`
import { __toESM } from "./chunk-D_5_n1c4.js";
import { LazyLoaded, downcast } from "./dist-CJHwsXKY.js";
import { AccountType, ContactAddressType, FeatureType, GroupType, TimeFormat } from "./TutanotaConstants-3bwAESYA.js";
import { DateTime } from "./luxon-D6cgmg6Q.js";
import { GENERATED_MAX_ID } from "./EntityUtils-RQxXZlcV.js";
import { CalendarEventTypeRef, CalendarGroupRootTypeRef, ContactAddressTypeRef, ContactTypeRef, EncryptedMailAddressTypeRef, TutanotaPropertiesTypeRef } from "./TypeRefs-CR3TLWn0.js";
import { BookingsRefTypeRef, CustomerInfoTypeRef, CustomerTypeRef, FeatureTypeRef, GroupInfoTypeRef, GroupMembershipTypeRef, GroupTypeRef, MailAddressAliasTypeRef, PlanConfigurationTypeRef, UserTypeRef } from "./TypeRefs-BP1jvX9p.js";
import { RecipientType } from "./Recipient-BFxhfecW.js";
import { require_testdouble } from "./testdouble-IbRSnrC0.js";
import { createTestEntity } from "./TestUtils-f_4UhLVE.js";

//#region tests/calendar/CalendarTestUtils.ts
var import_testdouble = __toESM(require_testdouble(), 1);
const ownerMailAddress = "calendarowner@tutanota.de";
const ownerId = "ownerId";
const ownerAddress = createTestEntity(EncryptedMailAddressTypeRef, {
	address: ownerMailAddress,
	name: "Calendar Owner"
});
const ownerRecipient = {
	address: ownerAddress.address,
	name: ownerAddress.name,
	type: RecipientType.INTERNAL,
	contact: null
};
const ownerAlias = createTestEntity(EncryptedMailAddressTypeRef, {
	address: "calendarowneralias@tutanota.de",
	name: "Calendar Owner Alias"
});
const ownerAliasRecipient = {
	address: ownerAlias.address,
	name: ownerAlias.name,
	type: RecipientType.INTERNAL,
	contact: null
};
const otherAddress = createTestEntity(EncryptedMailAddressTypeRef, {
	address: "someone@tutanota.de",
	name: "Some One"
});
const otherRecipient = {
	address: otherAddress.address,
	name: otherAddress.name,
	type: RecipientType.EXTERNAL,
	contact: createTestEntity(ContactTypeRef, {
		nickname: otherAddress.name,
		presharedPassword: "otherPassword",
		addresses: [createTestEntity(ContactAddressTypeRef, {
			address: otherAddress.address,
			type: ContactAddressType.WORK
		})]
	})
};
const otherAddress2 = createTestEntity(EncryptedMailAddressTypeRef, {
	address: "someoneelse@tutanota.de",
	name: "Some One Else"
});
const otherRecipient2 = {
	address: otherAddress2.address,
	name: otherAddress2.name,
	type: RecipientType.INTERNAL,
	contact: createTestEntity(ContactTypeRef, {
		nickname: otherAddress2.name,
		presharedPassword: "otherPassword2",
		addresses: [createTestEntity(ContactAddressTypeRef, {
			address: otherAddress2.address,
			type: ContactAddressType.WORK
		})]
	})
};
const thirdAddress = createTestEntity(EncryptedMailAddressTypeRef, {
	address: "somethirdaddress@tuta.com",
	name: "thirdperson"
});
const thirdRecipient = {
	address: thirdAddress.address,
	name: thirdAddress.name,
	type: RecipientType.INTERNAL,
	contact: createTestEntity(ContactTypeRef, {
		nickname: "drei",
		presharedPassword: "noPassword",
		addresses: [createTestEntity(ContactAddressTypeRef, {
			address: thirdAddress.address,
			type: ContactAddressType.OTHER
		})]
	})
};
const calendars = new Map([
	["ownCalendar", {
		groupRoot: createTestEntity(CalendarGroupRootTypeRef, {}),
		shared: false,
		userIsOwner: true,
		longEvents: new LazyLoaded(() => Promise.resolve([])),
		groupInfo: createTestEntity(GroupInfoTypeRef, {}),
		group: createTestEntity(GroupTypeRef, {
			_id: "ownCalendar",
			user: "ownerId",
			type: GroupType.Calendar
		}),
		isExternal: false
	}],
	["ownSharedCalendar", {
		groupRoot: createTestEntity(CalendarGroupRootTypeRef, {}),
		shared: true,
		userIsOwner: true,
		longEvents: new LazyLoaded(() => Promise.resolve([])),
		groupInfo: createTestEntity(GroupInfoTypeRef, {}),
		group: createTestEntity(GroupTypeRef, {
			_id: "ownSharedCalendar",
			user: "ownerId",
			type: GroupType.Calendar
		}),
		isExternal: false
	}],
	["ownExternalCalendar", {
		groupRoot: createTestEntity(CalendarGroupRootTypeRef, {}),
		shared: false,
		userIsOwner: true,
		longEvents: new LazyLoaded(() => Promise.resolve([])),
		groupInfo: createTestEntity(GroupInfoTypeRef, {}),
		group: createTestEntity(GroupTypeRef, {
			_id: "ownExternalCalendar",
			user: "ownerId",
			type: GroupType.Calendar
		}),
		isExternal: true
	}],
	["sharedCalendar", {
		groupRoot: createTestEntity(CalendarGroupRootTypeRef, {}),
		shared: true,
		userIsOwner: false,
		longEvents: new LazyLoaded(() => Promise.resolve([])),
		groupInfo: createTestEntity(GroupInfoTypeRef, {}),
		group: createTestEntity(GroupTypeRef, {
			_id: "sharedCalendar",
			user: "otherId",
			type: GroupType.Calendar
		}),
		isExternal: false
	}]
]);
const ownAddresses = [ownerAddress, ownerAlias];
function makeUserController(aliases = [], accountType = AccountType.PAID, defaultSender, businessFeatureOrdered = false, isNewPaidPlan = false, user, userSettingsGroupRoot) {
	const bookingsRef = createTestEntity(BookingsRefTypeRef, { items: GENERATED_MAX_ID });
	const customizations = [];
	if (businessFeatureOrdered) customizations.push(createTestEntity(FeatureTypeRef, { feature: FeatureType.BusinessFeatureEnabled }));
	return downcast({
		user: createTestEntity(UserTypeRef, {
			_id: ownerId,
			memberships: [createTestEntity(GroupMembershipTypeRef, { groupType: GroupType.Mail }), createTestEntity(GroupMembershipTypeRef, { groupType: GroupType.Contact })],
			accountType,
			...user
		}),
		props: createTestEntity(TutanotaPropertiesTypeRef, { defaultSender: defaultSender || ownerMailAddress }),
		userGroupInfo: createTestEntity(GroupInfoTypeRef, {
			mailAddressAliases: aliases.map((address) => createTestEntity(MailAddressAliasTypeRef, {
				mailAddress: address,
				enabled: true
			})),
			mailAddress: ownerMailAddress
		}),
		userSettingsGroupRoot: {
			timeFormat: TimeFormat.TWENTY_FOUR_HOURS,
			groupSettings: [],
			...userSettingsGroupRoot
		},
		isInternalUser: () => true,
		isFreeAccount: () => true,
		isNewPaidPlan: () => isNewPaidPlan,
		loadCustomer: () => Promise.resolve(createTestEntity(CustomerTypeRef, { customizations })),
		loadCustomerInfo: () => Promise.resolve(createTestEntity(CustomerInfoTypeRef, { bookings: bookingsRef })),
		getCalendarMemberships: () => {
			return [];
		},
		getPlanConfig: () => Promise.resolve(createTestEntity(PlanConfigurationTypeRef, { eventInvites: businessFeatureOrdered || isNewPaidPlan }))
	});
}
function id(element) {
	return ["list", element];
}
function makeEvent(_id, startTime, endTime, uid = "") {
	return createTestEntity(CalendarEventTypeRef, {
		_ownerGroup: "ownerGroup",
		_id: id(_id),
		startTime,
		endTime,
		uid
	});
}
function addCapability(user, groupId, capability) {
	user.memberships.push(createTestEntity(GroupMembershipTypeRef, {
		group: groupId,
		capability
	}));
}
const zone = "Europe/Berlin";
function getDateInZone(iso, useZone = zone) {
	const dt = DateTime.fromISO(iso, { zone: useZone });
	if (!dt.isValid) throw new Error(`Invalid date! ${iso} ${dt.invalidExplanation}`);
	return dt.toJSDate();
}
function getDateInUTC(iso) {
	const dt = DateTime.fromISO(iso, { zone: "utc" });
	if (!dt.isValid) throw new Error(`Invalid date! ${iso} ${dt.invalidExplanation}`);
	return dt.toJSDate();
}
function makeAlarmScheduler() {
	const scheduler = (0, import_testdouble.object)();
	(0, import_testdouble.when)(scheduler.scheduleAlarm(import_testdouble.matchers.anything(), import_testdouble.matchers.anything(), import_testdouble.matchers.anything(), import_testdouble.matchers.anything)).thenReturn(undefined);
	(0, import_testdouble.when)(scheduler.cancelAlarm(import_testdouble.matchers.anything())).thenReturn(undefined);
	return scheduler;
}

//#endregion
export { addCapability, calendars, getDateInUTC, getDateInZone, makeAlarmScheduler, makeEvent, makeUserController, otherAddress, otherAddress2, otherRecipient, otherRecipient2, ownAddresses, ownerAddress, ownerAlias, ownerAliasRecipient, ownerId, ownerMailAddress, ownerRecipient, thirdAddress, thirdRecipient, zone };
//# sourceMappingURL=CalendarTestUtils-I5CFxRuP.js.map