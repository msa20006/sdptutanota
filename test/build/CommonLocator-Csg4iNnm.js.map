{"version":3,"file":"CommonLocator-Csg4iNnm.js","names":["locator: CommonLocator","_: object","property: string","loc: CommonLocator"],"sources":["../../src/common/api/main/CommonLocator.ts"],"sourcesContent":["import { WorkerClient } from \"./WorkerClient.js\"\nimport { FileController } from \"../../file/FileController.js\"\nimport { CredentialsProvider } from \"../../misc/credentials/CredentialsProvider.js\"\nimport { SearchTextInAppFacade } from \"../../native/common/generatedipc/SearchTextInAppFacade.js\"\nimport { InterWindowEventFacadeSendDispatcher } from \"../../native/common/generatedipc/InterWindowEventFacadeSendDispatcher.js\"\nimport { WebauthnClient } from \"../../misc/2fa/webauthn/WebauthnClient.js\"\nimport { SystemPermissionHandler } from \"../../native/main/SystemPermissionHandler.js\"\nimport { SecondFactorHandler } from \"../../misc/2fa/SecondFactorHandler.js\"\nimport { PageContextLoginListener } from \"./PageContextLoginListener.js\"\nimport { NewsModel } from \"../../misc/news/NewsModel.js\"\nimport { InfoMessageHandler } from \"../../gui/InfoMessageHandler.js\"\nimport { SettingsFacade } from \"../../native/common/generatedipc/SettingsFacade.js\"\nimport { DesktopSystemFacade } from \"../../native/common/generatedipc/DesktopSystemFacade.js\"\nimport { EntityClient } from \"../common/EntityClient.js\"\nimport type { LoginFacade } from \"../worker/facades/LoginFacade.js\"\nimport type { CustomerFacade } from \"../worker/facades/lazy/CustomerFacade.js\"\nimport type { GiftCardFacade } from \"../worker/facades/lazy/GiftCardFacade.js\"\nimport type { GroupManagementFacade } from \"../worker/facades/lazy/GroupManagementFacade.js\"\nimport type { ConfigurationDatabase } from \"../worker/facades/lazy/ConfigurationDatabase.js\"\nimport type { CalendarFacade } from \"../worker/facades/lazy/CalendarFacade.js\"\nimport type { MailFacade } from \"../worker/facades/lazy/MailFacade.js\"\nimport type { ShareFacade } from \"../worker/facades/lazy/ShareFacade.js\"\nimport type { CounterFacade } from \"../worker/facades/lazy/CounterFacade.js\"\nimport type { BookingFacade } from \"../worker/facades/lazy/BookingFacade.js\"\nimport type { MailAddressFacade } from \"../worker/facades/lazy/MailAddressFacade.js\"\nimport type { BlobFacade } from \"../worker/facades/lazy/BlobFacade.js\"\nimport type { UserManagementFacade } from \"../worker/facades/lazy/UserManagementFacade.js\"\nimport { RecoverCodeFacade } from \"../worker/facades/lazy/RecoverCodeFacade.js\"\nimport { ContactFacade } from \"../worker/facades/lazy/ContactFacade.js\"\nimport { IServiceExecutor } from \"../common/ServiceRequest.js\"\nimport { CryptoFacade } from \"../worker/crypto/CryptoFacade.js\"\nimport { ExposedCacheStorage } from \"../worker/rest/DefaultEntityRestCache.js\"\nimport { WorkerFacade } from \"../worker/facades/WorkerFacade.js\"\nimport { WebsocketConnectivityModel } from \"../../misc/WebsocketConnectivityModel.js\"\nimport type { MailboxDetail, MailboxModel } from \"../../mailFunctionality/MailboxModel.js\"\nimport { EventController } from \"./EventController.js\"\nimport type { ContactModel } from \"../../contactsFunctionality/ContactModel.js\"\nimport { ProgressTracker } from \"./ProgressTracker.js\"\nimport { LoginController } from \"./LoginController.js\"\nimport { Header } from \"../../gui/Header.js\"\nimport { UsageTestController } from \"@tutao/tutanota-usagetests\"\nimport { UsageTestModel } from \"../../misc/UsageTestModel.js\"\nimport { WebMobileFacade } from \"../../native/main/WebMobileFacade.js\"\nimport { OperationProgressTracker } from \"./OperationProgressTracker.js\"\nimport { DomainConfigProvider } from \"../common/DomainConfigProvider.js\"\nimport { MailAddressTableModel } from \"../../settings/mailaddress/MailAddressTableModel.js\"\nimport { GroupInfo } from \"../entities/sys/TypeRefs.js\"\nimport { lazy } from \"@tutao/tutanota-utils\"\nimport { Router } from \"../../gui/ScopedRouter.js\"\nimport { NativeInterfaceMain } from \"../../native/main/NativeInterfaceMain.js\"\nimport { CommonSystemFacade } from \"../../native/common/generatedipc/CommonSystemFacade.js\"\nimport { ThemeFacade } from \"../../native/common/generatedipc/ThemeFacade.js\"\nimport { NativePushServiceApp } from \"../../native/main/NativePushServiceApp.js\"\nimport { NativeFileApp } from \"../../native/common/FileApp.js\"\nimport { MobileSystemFacade } from \"../../native/common/generatedipc/MobileSystemFacade.js\"\nimport { MobileContactsFacade } from \"../../native/common/generatedipc/MobileContactsFacade.js\"\nimport { NativeCredentialsFacade } from \"../../native/common/generatedipc/NativeCredentialsFacade.js\"\nimport { CalendarEvent, Contact, Mail, MailboxProperties } from \"../entities/tutanota/TypeRefs.js\"\nimport { SendMailModel } from \"../../mailFunctionality/SendMailModel.js\"\nimport { RecipientsSearchModel } from \"../../misc/RecipientsSearchModel.js\"\nimport { CalendarInfo, CalendarModel } from \"../../../calendar-app/calendar/model/CalendarModel.js\"\nimport { CalendarEventModel, CalendarOperation } from \"../../../calendar-app/calendar/gui/eventeditor-model/CalendarEventModel.js\"\nimport type { CalendarEventPreviewViewModel } from \"../../../calendar-app/calendar/gui/eventpopup/CalendarEventPreviewViewModel.js\"\nimport { RecipientsModel } from \"./RecipientsModel.js\"\nimport { ThemeController } from \"../../gui/ThemeController.js\"\nimport { MobilePaymentsFacade } from \"../../native/common/generatedipc/MobilePaymentsFacade.js\"\nimport { WorkerRandomizer } from \"../worker/workerInterfaces.js\"\nimport { CommonSearchModel } from \"../../search/CommonSearchModel.js\"\nimport { DeviceConfig } from \"../../misc/DeviceConfig.js\"\nimport type { CalendarContactPreviewViewModel } from \"../../../calendar-app/calendar/gui/eventpopup/CalendarContactPreviewViewModel.js\"\nimport { MailImporter } from \"../../../mail-app/mail/import/MailImporter.js\"\n\nexport interface CommonLocator {\n\tworker: WorkerClient\n\tfileController: FileController\n\tcredentialsProvider: CredentialsProvider\n\tsearchTextFacade: SearchTextInAppFacade\n\tinterWindowEventSender: InterWindowEventFacadeSendDispatcher\n\twebAuthn: WebauthnClient\n\tsystemPermissionHandler: SystemPermissionHandler\n\tsecondFactorHandler: SecondFactorHandler\n\tloginListener: PageContextLoginListener\n\tnewsModel: NewsModel\n\tsearch: CommonSearchModel\n\tinfoMessageHandler: InfoMessageHandler\n\tdesktopSettingsFacade: SettingsFacade\n\tdesktopSystemFacade: DesktopSystemFacade\n\tthemeController: ThemeController\n\n\tentityClient: EntityClient\n\tloginFacade: LoginFacade\n\tcustomerFacade: CustomerFacade\n\tgiftCardFacade: GiftCardFacade\n\tgroupManagementFacade: GroupManagementFacade\n\tconfigFacade: ConfigurationDatabase\n\tcalendarFacade: CalendarFacade\n\tmailFacade: MailFacade\n\tshareFacade: ShareFacade\n\tcounterFacade: CounterFacade\n\tbookingFacade: BookingFacade\n\tmailAddressFacade: MailAddressFacade\n\tblobFacade: BlobFacade\n\tuserManagementFacade: UserManagementFacade\n\trecoverCodeFacade: RecoverCodeFacade\n\tcontactFacade: ContactFacade\n\tserviceExecutor: IServiceExecutor\n\tcryptoFacade: CryptoFacade\n\tcacheStorage: ExposedCacheStorage\n\tworkerFacade: WorkerFacade\n\trandom: WorkerRandomizer\n\tconnectivityModel: WebsocketConnectivityModel\n\n\tmailboxModel: MailboxModel\n\n\tcalendarModel(): Promise<CalendarModel>\n\n\teventController: EventController\n\tcontactModel: ContactModel\n\tprogressTracker: ProgressTracker\n\tlogins: LoginController\n\theader: Header\n\tusageTestController: UsageTestController\n\tusageTestModel: UsageTestModel\n\twebMobileFacade: WebMobileFacade\n\toperationProgressTracker: OperationProgressTracker\n\tConst: Record<string, any>\n\n\tdomainConfigProvider(): DomainConfigProvider\n\n\tshowSetupWizard(): void\n\n\tmailAddressTableModelForOwnMailbox(): Promise<MailAddressTableModel>\n\n\tmailAddressTableModelForAdmin(mailGroupId: Id, userId: Id, userGroupInfo: GroupInfo): Promise<MailAddressTableModel>\n\n\tsendMailModel(mailboxDetails: MailboxDetail, mailboxProperties: MailboxProperties): Promise<SendMailModel>\n\n\trecipientsModel(): Promise<RecipientsModel>\n\n\trecipientsSearchModel(): Promise<RecipientsSearchModel>\n\n\tinitialized: Promise<void>\n\tthrottledRouter: lazy<Router>\n\n\t// calendar-related\n\tcalendarEventModel(\n\t\teditMode: CalendarOperation,\n\t\tevent: Partial<CalendarEvent>,\n\t\tmailboxDetail: MailboxDetail,\n\t\tmailboxProperties: MailboxProperties,\n\t\tresponseTo: Mail | null,\n\t): Promise<CalendarEventModel | null>\n\n\tcalendarEventPreviewModel(selectedEvent: CalendarEvent, calendars: ReadonlyMap<string, CalendarInfo>): Promise<CalendarEventPreviewViewModel>\n\n\tcalendarContactPreviewModel(event: CalendarEvent, contact: Contact, canEdit: boolean): Promise<CalendarContactPreviewViewModel>\n\n\t// native\n\tnative: NativeInterfaceMain\n\tcommonSystemFacade: CommonSystemFacade\n\tthemeFacade: ThemeFacade\n\tpushService: NativePushServiceApp\n\tfileApp: NativeFileApp\n\tsystemFacade: MobileSystemFacade\n\tmobileContactsFacade: MobileContactsFacade\n\tnativeCredentialsFacade: NativeCredentialsFacade\n\tmobilePaymentsFacade: MobilePaymentsFacade\n\tdeviceConfig: DeviceConfig\n}\n\nexport let locator: CommonLocator = new Proxy<CommonLocator>({} as unknown as CommonLocator, {\n\tget: (_: object, property: string) => {\n\t\tthrow new Error(\"Common locator must be initialized first\")\n\t},\n})\n\nexport function initCommonLocator(loc: CommonLocator) {\n\tlocator = loc\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IA0KWA,UAAyB,IAAI,MAAqB,CAAE,GAA8B,EAC5F,KAAK,CAACC,GAAWC,aAAqB;AACrC,OAAM,IAAI,MAAM;AAChB,EACD;AAEM,SAAS,kBAAkBC,KAAoB;AACrD,WAAU;AACV"}