{"version":3,"file":"InfoIcon-BCwidYvN.js","names":["e: KeyboardEvent","e: Event"],"sources":["../../src/common/gui/base/InfoIcon.ts"],"sourcesContent":["import m, { Children, Component, Vnode } from \"mithril\"\nimport { px } from \"../size.js\"\nimport { isKeyPressed } from \"../../misc/KeyManager.js\"\nimport { Keys, TabIndex } from \"../../api/common/TutanotaConstants.js\"\n\nexport interface InfoIconAttrs {\n\ttext: Children\n}\n\nexport class InfoIcon implements Component<InfoIconAttrs> {\n\tprivate hovered = false\n\tprivate expanded: boolean = false\n\n\tview({ attrs }: Vnode<InfoIconAttrs>) {\n\t\treturn m(\n\t\t\t\"div.flex.justify-center.no-grow-no-shrink.overflow-visible\",\n\t\t\t{\n\t\t\t\t\"aria-pressed\": String(this.expanded),\n\t\t\t\ttabindex: TabIndex.Default,\n\t\t\t\trole: \"button\",\n\t\t\t\tstyle: {\n\t\t\t\t\t\"margin-top\": px(1),\n\t\t\t\t},\n\t\t\t\t// we can't really do the state with pure CSS on mobile\n\t\t\t\tonclick: () => this.expand(),\n\t\t\t\tonkeydown: (e: KeyboardEvent) => {\n\t\t\t\t\tif (isKeyPressed(e.key, Keys.ESC)) {\n\t\t\t\t\t\tthis.listener(e)\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tonfocusin: () => this.expand(),\n\t\t\t\tonfocusout: (e: Event) => this.listener(e),\n\t\t\t\tonmouseenter: () => (this.hovered = true),\n\t\t\t\tonmouseleave: () => (this.hovered = false),\n\t\t\t},\n\t\t\tm(\n\t\t\t\t\".info-badge.tooltip\",\n\t\t\t\t{\n\t\t\t\t\texpanded: String(this.expanded),\n\t\t\t\t},\n\t\t\t\t\"i\",\n\t\t\t\tm(\n\t\t\t\t\t\"span.tooltiptext.break-word\",\n\t\t\t\t\t{\n\t\t\t\t\t\thidden: this.hovered || this.expanded ? undefined : \"\",\n\t\t\t\t\t\trole: \"tooltip\",\n\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\twidth: px(120),\n\t\t\t\t\t\t\tmarginLeft: px(-120),\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tattrs.text,\n\t\t\t\t),\n\t\t\t),\n\t\t)\n\t}\n\n\tprivate expand(): void {\n\t\tthis.expanded = true\n\t\tdocument.addEventListener(\"click\", this.listener, { capture: true })\n\t}\n\n\tprivate readonly listener = (e: Event) => {\n\t\tthis.expanded = false\n\t\tdocument.removeEventListener(\"click\", this.listener, { capture: true })\n\t\te.stopPropagation()\n\t\tm.redraw()\n\t}\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IASa,WAAN,MAAmD;CACzD,AAAQ,UAAU;CAClB,AAAQ,WAAoB;CAE5B,KAAK,EAAE,OAA6B,EAAE;AACrC,SAAO,gBACN,8DACA;GACC,gBAAgB,OAAO,KAAK,SAAS;GACrC,UAAU,SAAS;GACnB,MAAM;GACN,OAAO,EACN,cAAc,GAAG,EAAE,CACnB;GAED,SAAS,MAAM,KAAK,QAAQ;GAC5B,WAAW,CAACA,MAAqB;AAChC,QAAI,aAAa,EAAE,KAAK,KAAK,IAAI,CAChC,MAAK,SAAS,EAAE;GAEjB;GACD,WAAW,MAAM,KAAK,QAAQ;GAC9B,YAAY,CAACC,MAAa,KAAK,SAAS,EAAE;GAC1C,cAAc,MAAO,KAAK,UAAU;GACpC,cAAc,MAAO,KAAK,UAAU;EACpC,GACD,gBACC,uBACA,EACC,UAAU,OAAO,KAAK,SAAS,CAC/B,GACD,KACA,gBACC,+BACA;GACC,QAAQ,KAAK,WAAW,KAAK,WAAW,YAAY;GACpD,MAAM;GACN,OAAO;IACN,OAAO,GAAG,IAAI;IACd,YAAY,GAAG,KAAK;GACpB;EACD,GACD,MAAM,KACN,CACD,CACD;CACD;CAED,AAAQ,SAAe;AACtB,OAAK,WAAW;AAChB,WAAS,iBAAiB,SAAS,KAAK,UAAU,EAAE,SAAS,KAAM,EAAC;CACpE;CAED,AAAiB,WAAW,CAACA,MAAa;AACzC,OAAK,WAAW;AAChB,WAAS,oBAAoB,SAAS,KAAK,UAAU,EAAE,SAAS,KAAM,EAAC;AACvE,IAAE,iBAAiB;AACnB,kBAAE,QAAQ;CACV;AACD"}