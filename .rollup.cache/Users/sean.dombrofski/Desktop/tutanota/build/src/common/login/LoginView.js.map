{"version":3,"file":"LoginView.js","sourceRoot":"","sources":["../../../../src/common/login/LoginView.ts"],"names":[],"mappings":"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","sourcesContent":["import m, { Children, Vnode } from \"mithril\"\nimport { client } from \"../misc/ClientDetector.js\"\nimport { assertMainOrNode, isApp, isDesktop } from \"../api/common/Env\"\nimport { lang, TranslationKey, MaybeTranslation } from \"../misc/LanguageViewModel.js\"\nimport { defer, DeferredObject, mapNullable } from \"@tutao/tutanota-utils\"\nimport { BootIcons } from \"../gui/base/icons/BootIcons\"\nimport { showProgressDialog } from \"../gui/dialogs/ProgressDialog\"\nimport { windowFacade } from \"../misc/WindowFacade.js\"\nimport { DeviceType } from \"../misc/ClientConstants.js\"\nimport { Button, ButtonType } from \"../gui/base/Button.js\"\nimport { AriaLandmarks, landmarkAttrs, liveDataAttrs } from \"../gui/AriaUtils\"\nimport { DisplayMode, LoginState, LoginViewModel } from \"./LoginViewModel.js\"\nimport { LoginForm } from \"./LoginForm.js\"\nimport { CredentialsSelector } from \"./CredentialsSelector.js\"\nimport { getWhitelabelCustomizations } from \"../misc/WhitelabelCustomizations.js\"\nimport { createAsyncDropdown, DropdownButtonAttrs } from \"../gui/base/Dropdown.js\"\nimport type { ClickHandler } from \"../gui/base/GuiUtils\"\nimport { IconButton } from \"../gui/base/IconButton.js\"\nimport { BaseTopLevelView } from \"../gui/BaseTopLevelView.js\"\nimport { TopLevelAttrs, TopLevelView } from \"../../TopLevelView.js\"\nimport { LoginScreenHeader } from \"../gui/LoginScreenHeader.js\"\nimport { styles } from \"../gui/styles.js\"\nimport { locator } from \"../api/main/CommonLocator.js\"\nimport { renderInfoLinks } from \"../gui/RenderLoginInfoLinks.js\"\nimport { showSnackBar } from \"../gui/base/SnackBar.js\"\n\nassertMainOrNode()\n\nexport interface LoginViewAttrs extends TopLevelAttrs {\n\t/** Default path to redirect to after the login. Can be overridden with query param `requestedPath`. */\n\ttargetPath: string\n\tmakeViewModel: () => LoginViewModel\n}\n\n/** create a string provider that changes periodically until promise is resolved */\nfunction makeDynamicLoggingInMessage(promise: Promise<unknown>): () => TranslationKey {\n\tconst messageArray: Array<TranslationKey> = [\n\t\t\"dynamicLoginDecryptingMails_msg\",\n\t\t\"dynamicLoginOrganizingCalendarEvents_msg\",\n\t\t\"dynamicLoginSortingContacts_msg\",\n\t\t\"dynamicLoginUpdatingOfflineDatabase_msg\",\n\t\t\"dynamicLoginCyclingToWork_msg\",\n\t\t\"dynamicLoginRestockingTutaFridge_msg\",\n\t\t\"dynamicLoginPreparingRocketLaunch_msg\",\n\t\t\"dynamicLoginSwitchingOnPrivacy_msg\",\n\t]\n\tlet currentMessage: TranslationKey = \"login_msg\"\n\tlet messageIndex: number = 0\n\tconst messageIntervalId = setInterval(() => {\n\t\tcurrentMessage = messageArray[messageIndex]\n\t\tmessageIndex = ++messageIndex % 8\n\t\tm.redraw()\n\t}, 4000 /** spinner spins every 2s */)\n\tpromise.finally(() => clearInterval(messageIntervalId))\n\treturn () => currentMessage\n}\n\nexport class LoginView extends BaseTopLevelView implements TopLevelView<LoginViewAttrs> {\n\tprivate readonly viewModel: LoginViewModel\n\tprivate readonly defaultRedirect: string\n\tprivate readonly initPromise: Promise<void>\n\n\tprivate moreExpanded: boolean\n\t// we save the login form because we need access to the password input field inside of it for when \"loginWith\" is set in the url,\n\t// in order to focus it\n\tprivate loginForm: DeferredObject<LoginForm>\n\tprivate selectedRedirect: string\n\tprivate bottomMargin = 0\n\n\tconstructor({ attrs }: Vnode<LoginViewAttrs>) {\n\t\tsuper()\n\t\tthis.defaultRedirect = attrs.targetPath\n\t\tthis.selectedRedirect = this.defaultRedirect\n\n\t\tthis.loginForm = defer()\n\t\tthis.moreExpanded = false\n\t\tthis.viewModel = attrs.makeViewModel()\n\t\tthis.initPromise = this.viewModel.init().then(m.redraw)\n\t}\n\n\tkeyboardListener = (keyboardSize: number) => {\n\t\tthis.bottomMargin = keyboardSize\n\t\tm.redraw()\n\t}\n\n\tview({ attrs }: Vnode<LoginViewAttrs>) {\n\t\treturn m(\n\t\t\t\"#login-view.main-view.flex.col.nav-bg\",\n\t\t\t{\n\t\t\t\toncreate: () => windowFacade.addKeyboardSizeListener(this.keyboardListener),\n\t\t\t\tonremove: () => windowFacade.removeKeyboardSizeListener(this.keyboardListener),\n\t\t\t\tstyle: {\n\t\t\t\t\tmarginBottom: this.bottomMargin + \"px\",\n\t\t\t\t},\n\t\t\t},\n\t\t\t[\n\t\t\t\tm(LoginScreenHeader),\n\t\t\t\tm(\n\t\t\t\t\t\".flex-grow.flex-center.scroll\",\n\t\t\t\t\tm(\n\t\t\t\t\t\t\".flex.col.flex-grow-shrink-auto.max-width-m.plr-l.\" + (styles.isSingleColumnLayout() ? \"pt\" : \"pt-l\"),\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t...landmarkAttrs(AriaLandmarks.Main, isApp() || isDesktop() ? lang.get(\"addAccount_action\") : lang.get(\"login_label\")),\n\t\t\t\t\t\t\toncreate: (vnode) => {\n\t\t\t\t\t\t\t\t;(vnode.dom as HTMLElement).focus()\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\tm(\n\t\t\t\t\t\t\t\t\".content-bg.border-radius-big.pb\",\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tclass: styles.isSingleColumnLayout() ? \"plr-l\" : \"plr-2l\",\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tthis._renderFormForDisplayMode(),\n\t\t\t\t\t\t\t\tthis.renderMoreOptions(),\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tm(\".flex-grow\"),\n\t\t\t\t\t\t\t!(isApp() || isDesktop()) && this.viewModel.shouldShowAppButtons() ? this._renderAppButtons() : null,\n\t\t\t\t\t\t\trenderInfoLinks(),\n\t\t\t\t\t\t],\n\t\t\t\t\t),\n\t\t\t\t),\n\t\t\t],\n\t\t)\n\t}\n\n\tprivate _renderFormForDisplayMode(): Children {\n\t\tswitch (this.viewModel.displayMode) {\n\t\t\tcase DisplayMode.DeleteCredentials:\n\t\t\tcase DisplayMode.Credentials:\n\t\t\t\treturn this._renderCredentialsSelector()\n\t\t\tcase DisplayMode.Form:\n\t\t\t\treturn this._renderLoginForm()\n\t\t}\n\t}\n\n\tprivate renderMoreOptions(): Children {\n\t\treturn m(\".flex-center.flex-column\", [\n\t\t\tthis._loginAnotherLinkVisible()\n\t\t\t\t? m(Button, {\n\t\t\t\t\t\tlabel: \"loginOtherAccount_action\",\n\t\t\t\t\t\ttype: ButtonType.Secondary,\n\t\t\t\t\t\tclick: () => {\n\t\t\t\t\t\t\tthis.viewModel.showLoginForm()\n\t\t\t\t\t\t},\n\t\t\t\t  })\n\t\t\t\t: null,\n\t\t\tthis._deleteCredentialsLinkVisible()\n\t\t\t\t? m(Button, {\n\t\t\t\t\t\tlabel: this.viewModel.displayMode === DisplayMode.DeleteCredentials ? \"cancel_action\" : \"removeAccount_action\",\n\t\t\t\t\t\ttype: ButtonType.Secondary,\n\t\t\t\t\t\tclick: () => this._switchDeleteCredentialsState(),\n\t\t\t\t  })\n\t\t\t\t: null,\n\t\t\tthis._knownCredentialsLinkVisible()\n\t\t\t\t? m(Button, {\n\t\t\t\t\t\tlabel: \"knownCredentials_label\",\n\t\t\t\t\t\ttype: ButtonType.Secondary,\n\t\t\t\t\t\tclick: () => this.viewModel.showCredentials(),\n\t\t\t\t  })\n\t\t\t\t: null,\n\t\t\tthis._signupLinkVisible()\n\t\t\t\t? m(Button, {\n\t\t\t\t\t\tlabel: \"register_label\",\n\t\t\t\t\t\ttype: ButtonType.Secondary,\n\t\t\t\t\t\tclick: () => m.route.set(\"/signup\"),\n\t\t\t\t  })\n\t\t\t\t: null,\n\t\t\tthis._switchThemeLinkVisible()\n\t\t\t\t? m(Button, {\n\t\t\t\t\t\tlabel: \"switchColorTheme_action\",\n\t\t\t\t\t\ttype: ButtonType.Secondary,\n\t\t\t\t\t\tclick: this.themeSwitchListener(),\n\t\t\t\t  })\n\t\t\t\t: null,\n\t\t\tthis._recoverLoginVisible()\n\t\t\t\t? m(Button, {\n\t\t\t\t\t\tlabel: \"recoverAccountAccess_action\",\n\t\t\t\t\t\tclick: () => {\n\t\t\t\t\t\t\tm.route.set(\"/recover\")\n\t\t\t\t\t\t},\n\t\t\t\t\t\ttype: ButtonType.Secondary,\n\t\t\t\t  })\n\t\t\t\t: null,\n\t\t])\n\t}\n\n\tthemeSwitchListener(): ClickHandler {\n\t\treturn createAsyncDropdown({\n\t\t\tlazyButtons: async () => {\n\t\t\t\tconst defaultButtons: ReadonlyArray<DropdownButtonAttrs> = [\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: \"systemThemePref_label\",\n\t\t\t\t\t\tclick: () => locator.themeController.setThemePreference(\"auto:light|dark\"),\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: \"light_label\",\n\t\t\t\t\t\tclick: () => locator.themeController.setThemePreference(\"light\"),\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: \"dark_label\",\n\t\t\t\t\t\tclick: () => locator.themeController.setThemePreference(\"dark\"),\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: client.isCalendarApp() ? \"light_red_label\" : \"light_blue_label\",\n\t\t\t\t\t\tclick: () => locator.themeController.setThemePreference(\"light_secondary\"),\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: client.isCalendarApp() ? \"dark_red_label\" : \"dark_blue_label\",\n\t\t\t\t\t\tclick: () => locator.themeController.setThemePreference(\"dark_secondary\"),\n\t\t\t\t\t},\n\t\t\t\t]\n\t\t\t\tconst customButtons = (await locator.themeController.getCustomThemes()).map((themeId) => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tlabel: lang.makeTranslation(themeId, themeId),\n\t\t\t\t\t\tclick: () => locator.themeController.setThemePreference(themeId),\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\treturn defaultButtons.concat(customButtons)\n\t\t\t},\n\t\t\twidth: 300,\n\t\t})\n\t}\n\n\t_signupLinkVisible(): boolean {\n\t\treturn this.viewModel.displayMode === DisplayMode.Form && this.viewModel.shouldShowSignup()\n\t}\n\n\t_loginAnotherLinkVisible(): boolean {\n\t\treturn this.viewModel.displayMode === DisplayMode.Credentials || this.viewModel.displayMode === DisplayMode.DeleteCredentials\n\t}\n\n\t_deleteCredentialsLinkVisible(): boolean {\n\t\treturn this.viewModel.displayMode === DisplayMode.Credentials || this.viewModel.displayMode === DisplayMode.DeleteCredentials\n\t}\n\n\t_knownCredentialsLinkVisible(): boolean {\n\t\treturn this.viewModel.displayMode === DisplayMode.Form && this.viewModel.getSavedCredentials().length > 0\n\t}\n\n\t_switchThemeLinkVisible(): boolean {\n\t\treturn locator.themeController.shouldAllowChangingTheme()\n\t}\n\n\t_recoverLoginVisible(): boolean {\n\t\treturn this.viewModel.shouldShowRecover()\n\t}\n\n\t_renderLoginForm(): Children {\n\t\treturn m(\".flex.col.pb\", [\n\t\t\tm(LoginForm, {\n\t\t\t\toncreate: (vnode) => {\n\t\t\t\t\tconst form = vnode as Vnode<unknown, LoginForm>\n\t\t\t\t\tthis.loginForm.resolve(form.state)\n\t\t\t\t},\n\t\t\t\tonremove: () => {\n\t\t\t\t\t// we need to re-resolve this promise sometimes and for that we\n\t\t\t\t\t// need a new promise. otherwise, callbacks that are registered after\n\t\t\t\t\t// this point never get called because they have been registered after\n\t\t\t\t\t// it was resolved the first time.\n\t\t\t\t\tthis.loginForm = defer()\n\t\t\t\t},\n\t\t\t\tonSubmit: () => this._loginWithProgressDialog(),\n\t\t\t\tmailAddress: this.viewModel.mailAddress,\n\t\t\t\tpassword: this.viewModel.password,\n\t\t\t\tsavePassword: this.viewModel.savePassword,\n\t\t\t\thelpText: lang.getTranslationText(this.viewModel.helpText),\n\t\t\t\tinvalidCredentials: this.viewModel.state === LoginState.InvalidCredentials,\n\t\t\t\tshowRecoveryOption: this._recoverLoginVisible(),\n\t\t\t\taccessExpired: this.viewModel.state === LoginState.AccessExpired,\n\t\t\t}),\n\t\t])\n\t}\n\n\tasync _loginWithProgressDialog() {\n\t\tconst loginPromise = this.viewModel.login()\n\t\tconst dynamicMessage = makeDynamicLoggingInMessage(loginPromise)\n\t\tawait showProgressDialog(dynamicMessage, loginPromise)\n\n\t\tif (this.viewModel.state === LoginState.LoggedIn) {\n\t\t\tm.route.set(this.selectedRedirect)\n\t\t}\n\t}\n\n\t_renderCredentialsSelector(): Children {\n\t\treturn m(\".flex.col.pb-l\", [\n\t\t\tm(\n\t\t\t\t\".small.center.statusTextColor\",\n\t\t\t\t{\n\t\t\t\t\t...liveDataAttrs(),\n\t\t\t\t\tclass: styles.isSingleColumnLayout() ? \"\" : \"pt-xs\",\n\t\t\t\t},\n\t\t\t\tlang.getTranslationText(this.viewModel.helpText),\n\t\t\t),\n\t\t\tm(CredentialsSelector, {\n\t\t\t\tcredentials: this.viewModel.getSavedCredentials(),\n\t\t\t\tonCredentialsSelected: async (c) => {\n\t\t\t\t\tawait this.viewModel.useCredentials(c)\n\t\t\t\t\tawait this._loginWithProgressDialog()\n\t\t\t\t},\n\t\t\t\tonCredentialsDeleted:\n\t\t\t\t\tthis.viewModel.displayMode === DisplayMode.DeleteCredentials\n\t\t\t\t\t\t? (credentials) => {\n\t\t\t\t\t\t\t\tthis.viewModel.deleteCredentials(credentials).then((result) => {\n\t\t\t\t\t\t\t\t\tif (result == \"networkError\") {\n\t\t\t\t\t\t\t\t\t\tshowSnackBar({\n\t\t\t\t\t\t\t\t\t\t\tmessage: \"deleteCredentialOffline_msg\",\n\t\t\t\t\t\t\t\t\t\t\tbutton: {\n\t\t\t\t\t\t\t\t\t\t\t\tlabel: \"ok_action\",\n\t\t\t\t\t\t\t\t\t\t\t\tclick: () => {},\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tm.redraw()\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t  }\n\t\t\t\t\t\t: null,\n\t\t\t}),\n\t\t])\n\t}\n\n\t_renderAppButtons(): Children {\n\t\treturn m(\".flex-center.pt-l.ml-between-s\", [\n\t\t\tclient.isDesktopDevice() || client.device === DeviceType.ANDROID\n\t\t\t\t? m(IconButton, {\n\t\t\t\t\t\ttitle: \"appInfoAndroidImageAlt_alt\",\n\t\t\t\t\t\tclick: (e) => {\n\t\t\t\t\t\t\tthis._openUrl(\"https://play.google.com/store/apps/details?id=de.tutao.tutanota\")\n\n\t\t\t\t\t\t\te.preventDefault()\n\t\t\t\t\t\t},\n\t\t\t\t\t\ticon: BootIcons.Android,\n\t\t\t\t  })\n\t\t\t\t: null,\n\t\t\tclient.isDesktopDevice() || client.device === DeviceType.IPAD || client.device === DeviceType.IPHONE\n\t\t\t\t? m(IconButton, {\n\t\t\t\t\t\ttitle: \"appInfoIosImageAlt_alt\",\n\t\t\t\t\t\tclick: (e) => {\n\t\t\t\t\t\t\tthis._openUrl(\"https://itunes.apple.com/app/tutanota/id922429609?mt=8&uo=4&at=10lSfb\")\n\n\t\t\t\t\t\t\te.preventDefault()\n\t\t\t\t\t\t},\n\t\t\t\t\t\ticon: BootIcons.Apple,\n\t\t\t\t  })\n\t\t\t\t: null,\n\t\t\tclient.isDesktopDevice() || client.device === DeviceType.ANDROID\n\t\t\t\t? m(IconButton, {\n\t\t\t\t\t\ttitle: \"appInfoFDroidImageAlt_alt\",\n\t\t\t\t\t\tclick: (e) => {\n\t\t\t\t\t\t\tthis._openUrl(\"https://f-droid.org/packages/de.tutao.tutanota/\")\n\n\t\t\t\t\t\t\te.preventDefault()\n\t\t\t\t\t\t},\n\t\t\t\t\t\ticon: BootIcons.FDroid,\n\t\t\t\t  })\n\t\t\t\t: null,\n\t\t])\n\t}\n\n\tonNewUrl(args: Record<string, any>, requestedPath: string) {\n\t\tif (args.requestedPath) {\n\t\t\tthis.selectedRedirect = args.requestedPath\n\t\t} else if (args.action) {\n\t\t\t// Action needs be forwarded this way in order to be able to deal with cases where a user is not logged in and clicks\n\t\t\t// on the support link on our website (https://app.tuta.com?action=supportMail)\n\t\t\tthis.selectedRedirect = `/mail?action=${args.action}`\n\t\t} else {\n\t\t\tthis.selectedRedirect = this.defaultRedirect\n\t\t}\n\t\tthis.handleLoginArguments(args, requestedPath)\n\t}\n\n\tprivate async handleLoginArguments(args: Record<string, any>, requestedPath: string) {\n\t\tawait this.initPromise\n\t\t// since we wait for something async here the URL might have already changed and\n\t\t// we shouldn't handle any outdated URL changes.\n\t\tif (m.route.get() !== requestedPath) return\n\n\t\tconst autoLogin = args.noAutoLogin == null || args.noAutoLogin === false\n\n\t\tif (autoLogin) {\n\t\t\tif (args.userId) {\n\t\t\t\tawait this.viewModel.useUserId(args.userId)\n\t\t\t}\n\n\t\t\tif (this.viewModel.canLogin()) {\n\t\t\t\tthis._loginWithProgressDialog()\n\n\t\t\t\tm.redraw()\n\t\t\t\treturn\n\t\t\t}\n\t\t}\n\n\t\tif (args.loginWith) {\n\t\t\tthis.viewModel.showLoginForm()\n\t\t}\n\n\t\t// We want to focus password field if login field is already filled in\n\t\tif (args.loginWith) {\n\t\t\tthis.loginForm.promise.then((loginForm: LoginForm) => {\n\t\t\t\tloginForm.mailAddressTextField.value = \"\"\n\t\t\t\tloginForm.passwordTextField.value = \"\"\n\t\t\t\tthis.viewModel.mailAddress(args.loginWith ?? \"\")\n\t\t\t\tthis.viewModel.password(\"\")\n\t\t\t\tloginForm.passwordTextField.focus()\n\t\t\t})\n\t\t}\n\n\t\tm.redraw()\n\t}\n\n\t_openUrl(url: string) {\n\t\twindow.open(url, \"_blank\")\n\t}\n\n\t_switchDeleteCredentialsState(): void {\n\t\tthis.viewModel.switchDeleteState()\n\t}\n}\n\nexport function getWhitelabelRegistrationDomains(): string[] {\n\treturn mapNullable(getWhitelabelCustomizations(window), (c) => c.registrationDomains) || []\n}\n"]}