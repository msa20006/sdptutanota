{"version":3,"file":"Dialog.js","sourceRoot":"","sources":["../../../../../src/common/gui/base/Dialog.ts"],"names":[],"mappings":"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","sourcesContent":["import m, { Children, Component } from \"mithril\"\nimport type { ModalComponent } from \"./Modal\"\nimport { modal } from \"./Modal\"\nimport { alpha, AlphaEnum, AnimationPromise, animations, DefaultAnimationTime, opacity, transform, TransformEnum } from \"../animation/Animations\"\nimport { ease } from \"../animation/Easing\"\nimport type { MaybeTranslation, TranslationKey } from \"../../misc/LanguageViewModel\"\nimport { lang } from \"../../misc/LanguageViewModel\"\nimport type { Shortcut } from \"../../misc/KeyManager\"\nimport { focusNext, focusPrevious, keyManager } from \"../../misc/KeyManager\"\nimport { getElevatedBackground } from \"../theme\"\nimport { px, size } from \"../size\"\nimport { HabReminderImage } from \"./icons/Icons\"\nimport { windowFacade } from \"../../misc/WindowFacade\"\nimport type { ButtonAttrs } from \"./Button.js\"\nimport { Button, ButtonType } from \"./Button.js\"\nimport type { DialogHeaderBarAttrs } from \"./DialogHeaderBar\"\nimport { DialogHeaderBar } from \"./DialogHeaderBar\"\nimport { TextField, TextFieldType } from \"./TextField.js\"\nimport type { DropDownSelectorAttrs, SelectorItemList } from \"./DropDownSelector.js\"\nimport { DropDownSelector } from \"./DropDownSelector.js\"\nimport { DEFAULT_ERROR, Keys, TabIndex } from \"../../api/common/TutanotaConstants\"\nimport { AriaWindow } from \"../AriaUtils\"\nimport { styles } from \"../styles\"\nimport { $Promisable, assertNotNull, getAsLazy, identity, lazy, mapLazily, MaybeLazy, noOp, Thunk } from \"@tutao/tutanota-utils\"\nimport type { DialogInjectionRightAttrs } from \"./DialogInjectionRight\"\nimport { DialogInjectionRight } from \"./DialogInjectionRight\"\nimport { assertMainOrNode } from \"../../api/common/Env\"\nimport { isOfflineError } from \"../../api/common/utils/ErrorUtils.js\"\nimport Stream from \"mithril/stream\"\n\nassertMainOrNode()\nexport const INPUT = \"input, textarea, div[contenteditable='true']\"\n\nexport const enum DialogType {\n\tProgress = \"Progress\",\n\tAlert = \"Alert\",\n\tReminder = \"Reminder\",\n\tEditSmall = \"EditSmall\",\n\tEditMedium = \"EditMedium\",\n\tEditLarger = \"EditLarger\",\n\tEditLarge = \"EditLarge\",\n}\n\ntype Validator = () => $Promisable<TranslationKey | null>\n\nexport type ActionDialogProps = {\n\ttitle: MaybeTranslation\n\tchild: Component | lazy<Children>\n\tvalidator?: Validator | null\n\tokAction: null | ((arg0: Dialog) => unknown)\n\tallowCancel?: MaybeLazy<boolean>\n\tallowOkWithReturn?: boolean\n\tokActionTextId?: MaybeTranslation\n\tcancelAction?: ((arg0: Dialog) => unknown) | null\n\tcancelActionTextId?: TranslationKey\n\ttype?: DialogType\n}\n\nexport interface TextInputDialogParams {\n\t/** title of the dialog */\n\ttitle: MaybeTranslation\n\n\t/** label of the text field */\n\tlabel: MaybeTranslation\n\n\t/** help label of the text field */\n\tinfoMsgId?: MaybeTranslation\n\n\t/** initial value, if any */\n\tdefaultValue?: string\n\n\t/** Called when \"Ok\" is clicked receiving the entered text. Must return null if the text is valid or an error messageId if the text is invalid, so an error message is shown. */\n\tinputValidator?: stringValidator\n\n\t/** Text field type to display (determines what keyboard to display on mobile devices) */\n\ttextFieldType?: TextFieldType\n}\n\nexport class Dialog implements ModalComponent {\n\tprivate static keyboardHeight: number = 0\n\tprivate domDialog: HTMLElement | null = null\n\tprivate _shortcuts: Shortcut[]\n\tview: ModalComponent[\"view\"]\n\tvisible: boolean\n\tprivate focusOnLoadFunction: (dom: HTMLElement) => void\n\tprivate wasFocusOnLoadCalled: boolean\n\tprivate closeHandler: Thunk | null = null\n\tprivate focusedBeforeShown: HTMLElement | null = null\n\tprivate injectionRightAttrs: DialogInjectionRightAttrs<any> | null = null\n\n\tconstructor(dialogType: DialogType, childComponent: Component) {\n\t\tthis.visible = false\n\n\t\tthis.focusOnLoadFunction = () => this.defaultFocusOnLoad(assertNotNull(this.domDialog))\n\n\t\tthis.wasFocusOnLoadCalled = false\n\t\tthis._shortcuts = [\n\t\t\t{\n\t\t\t\tkey: Keys.TAB,\n\t\t\t\tshift: true,\n\t\t\t\texec: () => (this.domDialog ? focusPrevious(this.domDialog) : false),\n\t\t\t\thelp: \"selectPrevious_action\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: Keys.TAB,\n\t\t\t\tshift: false,\n\t\t\t\texec: () => (this.domDialog ? focusNext(this.domDialog) : false),\n\t\t\t\thelp: \"selectNext_action\",\n\t\t\t},\n\t\t]\n\n\t\tthis.view = (): Children => {\n\t\t\tconst marginPx = px(size.hpad)\n\t\t\tconst isEditLarge = dialogType === DialogType.EditLarge\n\t\t\tconst sidesMargin = styles.isSingleColumnLayout() && isEditLarge ? \"4px\" : marginPx\n\t\t\treturn m(\n\t\t\t\tthis.getDialogWrapperClasses(dialogType),\n\t\t\t\t{\n\t\t\t\t\tstyle: {\n\t\t\t\t\t\tpaddingTop: \"env(safe-area-inset-top)\",\n\t\t\t\t\t\tpaddingLeft: \"env(safe-area-inset-left)\",\n\t\t\t\t\t\tpaddingRight: \"env(safe-area-inset-right)\",\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t/** controls vertical alignment\n\t\t\t\t * we need overflow-hidden (actually resulting in min-height: 0 instead of auto)\n\t\t\t\t * here because otherwise the content of the dialog may make this wrapper grow bigger outside\n\t\t\t\t * the window on some browsers, e.g. upgrade reminder on Firefox mobile */\n\t\t\t\tm(\n\t\t\t\t\t\".flex.justify-center.align-self-stretch.rel.overflow-hidden\" + (isEditLarge ? \".flex-grow\" : \".transition-margin\"),\n\t\t\t\t\t{\n\t\t\t\t\t\t// controls horizontal alignment\n\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\tmarginTop: marginPx,\n\t\t\t\t\t\t\tmarginLeft: sidesMargin,\n\t\t\t\t\t\t\tmarginRight: sidesMargin,\n\t\t\t\t\t\t\t\"margin-bottom\": Dialog.keyboardHeight > 0 ? px(Dialog.keyboardHeight) : isEditLarge ? 0 : marginPx,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\t[\n\t\t\t\t\t\tm(\n\t\t\t\t\t\t\tthis.getDialogStyle(dialogType),\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\trole: AriaWindow.Dialog,\n\t\t\t\t\t\t\t\t\"aria-modal\": \"true\",\n\t\t\t\t\t\t\t\t\"aria-labelledby\": \"dialog-title\",\n\t\t\t\t\t\t\t\t\"aria-describedby\": \"dialog-message\",\n\t\t\t\t\t\t\t\tonclick: (e: MouseEvent) => e.stopPropagation(),\n\t\t\t\t\t\t\t\t// do not propagate clicks on the dialog as the Modal expects all propagated clicks to be clicks on the background\n\t\t\t\t\t\t\t\toncreate: (vnode) => {\n\t\t\t\t\t\t\t\t\tthis.domDialog = vnode.dom as HTMLElement\n\t\t\t\t\t\t\t\t\tlet animation: AnimationPromise | null = null\n\n\t\t\t\t\t\t\t\t\tif (isEditLarge) {\n\t\t\t\t\t\t\t\t\t\tthis.domDialog.style.transform = `translateY(${window.innerHeight}px)`\n\t\t\t\t\t\t\t\t\t\tanimation = animations.add(this.domDialog, transform(TransformEnum.TranslateY, window.innerHeight, 0))\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tconst bgcolor = getElevatedBackground()\n\t\t\t\t\t\t\t\t\t\tconst children = Array.from(this.domDialog.children) as Array<HTMLElement>\n\t\t\t\t\t\t\t\t\t\tfor (let child of children) {\n\t\t\t\t\t\t\t\t\t\t\tchild.style.opacity = \"0\"\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tthis.domDialog.style.backgroundColor = `rgba(0, 0, 0, 0)`\n\t\t\t\t\t\t\t\t\t\tanimation = Promise.all([\n\t\t\t\t\t\t\t\t\t\t\tanimations.add(this.domDialog, alpha(AlphaEnum.BackgroundColor, bgcolor, 0, 1)),\n\t\t\t\t\t\t\t\t\t\t\tanimations.add(children, opacity(0, 1, true), {\n\t\t\t\t\t\t\t\t\t\t\t\tdelay: DefaultAnimationTime / 2,\n\t\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t\t])\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t// select first input field. blur first to avoid that users can enter text in the previously focused element while the animation is running\n\t\t\t\t\t\t\t\t\twindow.requestAnimationFrame(() => {\n\t\t\t\t\t\t\t\t\t\tconst activeElement = document.activeElement as HTMLElement | null\n\t\t\t\t\t\t\t\t\t\tif (activeElement && typeof activeElement.blur === \"function\") {\n\t\t\t\t\t\t\t\t\t\t\tactiveElement.blur()\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\tanimation.then(() => {\n\t\t\t\t\t\t\t\t\t\tthis.focusOnLoadFunction(assertNotNull(this.domDialog))\n\n\t\t\t\t\t\t\t\t\t\tthis.wasFocusOnLoadCalled = true\n\n\t\t\t\t\t\t\t\t\t\t// Fall back to the CSS classes after completing the opening animation.\n\t\t\t\t\t\t\t\t\t\t// Because `bgcolor` is only calculated on create and not on theme change.\n\t\t\t\t\t\t\t\t\t\tif (this.domDialog != null && !isEditLarge) {\n\t\t\t\t\t\t\t\t\t\t\tthis.domDialog.style.removeProperty(\"background-color\")\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tm(childComponent),\n\t\t\t\t\t\t),\n\t\t\t\t\t\tthis.injectionRightAttrs ? m(DialogInjectionRight, this.injectionRightAttrs) : null,\n\t\t\t\t\t],\n\t\t\t\t),\n\t\t\t)\n\t\t}\n\t}\n\n\tsetInjectionRight(injectionRightAttrs: DialogInjectionRightAttrs<any>) {\n\t\tthis.injectionRightAttrs = injectionRightAttrs\n\t}\n\n\tprivate defaultFocusOnLoad(dom: HTMLElement) {\n\t\tconst inputs = Array.from(dom.querySelectorAll(INPUT)) as Array<HTMLElement>\n\t\tconst scrollableWrapper = dom.querySelector(\".dialog-container.scroll\") as HTMLElement | null\n\n\t\tif (inputs.length > 0) {\n\t\t\tinputs[0].focus()\n\t\t} else if (!scrollableWrapper) {\n\t\t\tlet button = dom.querySelector(\"button\")\n\n\t\t\tif (button) {\n\t\t\t\tbutton.focus()\n\t\t\t}\n\t\t} else {\n\t\t\tscrollableWrapper.tabIndex = Number(TabIndex.Default)\n\t\t\tscrollableWrapper.focus()\n\t\t}\n\t}\n\n\t/**\n\t * By default the focus is set on the first text field after this dialog is fully visible. This behavior can be overwritten by calling this function.\n\t * If it has already been called, then calls it instantly\n\t */\n\tsetFocusOnLoadFunction(callback: Dialog[\"focusOnLoadFunction\"]): void {\n\t\tthis.focusOnLoadFunction = callback\n\n\t\tif (this.wasFocusOnLoadCalled) {\n\t\t\tthis.focusOnLoadFunction(assertNotNull(this.domDialog))\n\t\t}\n\t}\n\n\tprivate getDialogWrapperClasses(dialogType: DialogType): string {\n\t\t// change direction of axis to handle resize of dialogs (iOS keyboard open changes size)\n\t\tlet dialogWrapperStyle = \".fill-absolute.flex.items-stretch.flex-column\"\n\n\t\tif (dialogType === DialogType.EditLarge) {\n\t\t\tdialogWrapperStyle += \".flex-start\"\n\t\t} else {\n\t\t\tdialogWrapperStyle += \".flex-center\" // vertical alignment\n\t\t}\n\n\t\treturn dialogWrapperStyle\n\t}\n\n\tprivate getDialogStyle(dialogType: DialogType): string {\n\t\tlet dialogStyle = \".dialog.elevated-bg.flex-grow.border-radius-top\"\n\n\t\tif (dialogType === DialogType.Progress) {\n\t\t\tdialogStyle += \".dialog-width-s.dialog-progress.border-radius-bottom\"\n\t\t} else if (dialogType === DialogType.Alert) {\n\t\t\tdialogStyle += \".dialog-width-alert.pt.border-radius-bottom\"\n\t\t} else if (dialogType === DialogType.Reminder) {\n\t\t\tdialogStyle += \".dialog-width-m.pt.flex.flex-column.border-radius-bottom\"\n\t\t} else if (dialogType === DialogType.EditSmall) {\n\t\t\tdialogStyle += \".dialog-width-s.flex.flex-column.border-radius-bottom\"\n\t\t} else if (dialogType === DialogType.EditMedium) {\n\t\t\tdialogStyle += \".dialog-width-m.border-radius-bottom\"\n\t\t} else if (dialogType === DialogType.EditLarge || dialogType === DialogType.EditLarger) {\n\t\t\tdialogStyle += \".dialog-width-l\"\n\t\t}\n\n\t\treturn dialogStyle\n\t}\n\n\taddShortcut(shortcut: Shortcut): Dialog {\n\t\tthis._shortcuts.push(shortcut)\n\n\t\tif (this.visible) {\n\t\t\tkeyManager.registerModalShortcuts([shortcut])\n\t\t}\n\n\t\treturn this\n\t}\n\n\t/**\n\t * Sets a close handler to the dialog. If set the handler will be notified when onClose is called on the dialog.\n\t * The handler must is then responsible for closing the dialog.\n\t */\n\tsetCloseHandler(closeHandler: (() => unknown) | null): Dialog {\n\t\tthis.closeHandler = closeHandler\n\t\treturn this\n\t}\n\n\tshortcuts(): Shortcut[] {\n\t\treturn this._shortcuts\n\t}\n\n\tshow(): Dialog {\n\t\tthis.focusedBeforeShown = document.activeElement as HTMLElement\n\t\tmodal.display(this)\n\t\tthis.visible = true\n\t\treturn this\n\t}\n\n\t/**\n\t * Removes the dialog from the current view.\n\t */\n\tclose(): void {\n\t\tthis.visible = false\n\t\tmodal.remove(this)\n\t}\n\n\t/**\n\t * Should be called to close a dialog. Notifies the closeHandler about the close attempt.\n\t */\n\tonClose(): void {\n\t\tif (this.closeHandler) {\n\t\t\tthis.closeHandler()\n\t\t} else {\n\t\t\tthis.close()\n\t\t}\n\t}\n\n\tpopState(e: Event): boolean {\n\t\tthis.onClose()\n\t\treturn false\n\t}\n\n\tcallingElement(): HTMLElement | null {\n\t\treturn this.focusedBeforeShown\n\t}\n\n\t/**\n\t * Is invoked from modal as the two animations (background layer opacity and dropdown) should run in parallel\n\t * @returns {Promise.<void>}\n\t */\n\thideAnimation(): Promise<void> {\n\t\tlet bgcolor = getElevatedBackground()\n\n\t\tif (this.domDialog) {\n\t\t\treturn Promise.all([\n\t\t\t\tanimations.add(this.domDialog.children, opacity(1, 0, true)),\n\t\t\t\tanimations.add(this.domDialog, alpha(AlphaEnum.BackgroundColor, bgcolor, 1, 0), {\n\t\t\t\t\tdelay: DefaultAnimationTime / 2,\n\t\t\t\t\teasing: ease.linear,\n\t\t\t\t}),\n\t\t\t]).then(noOp)\n\t\t} else {\n\t\t\treturn Promise.resolve()\n\t\t}\n\t}\n\n\tbackgroundClick(e: MouseEvent) {}\n\n\t/**\n\t * show a dialog with only a \"ok\" button\n\t *\n\t * @param messageIdOrMessageFunction the text to display\n\t * @param infoToAppend {?string | lazy<Children>} some text or UI elements to show below the message\n\t * @returns {Promise<void>} a promise that resolves after the dialog is fully closed\n\t */\n\tstatic message(messageIdOrMessageFunction: MaybeTranslation, infoToAppend?: string | lazy<Children>): Promise<void> {\n\t\treturn new Promise((resolve) => {\n\t\t\tlet dialog: Dialog\n\n\t\t\tconst closeAction = () => {\n\t\t\t\tdialog.close()\n\t\t\t\tsetTimeout(() => resolve(), DefaultAnimationTime)\n\t\t\t}\n\n\t\t\tlet lines = lang.getTranslationText(messageIdOrMessageFunction).split(\"\\n\")\n\t\t\tlet testId = `dialog:${lang.getTestId(messageIdOrMessageFunction)}`\n\n\t\t\tif (typeof infoToAppend === \"string\") {\n\t\t\t\tlines.push(infoToAppend)\n\t\t\t}\n\n\t\t\tconst buttonAttrs: ButtonAttrs = {\n\t\t\t\tlabel: \"ok_action\",\n\t\t\t\tclick: closeAction,\n\t\t\t\ttype: ButtonType.Primary,\n\t\t\t}\n\t\t\tdialog = new Dialog(DialogType.Alert, {\n\t\t\t\tview: () => [\n\t\t\t\t\tm(\n\t\t\t\t\t\t\".dialog-max-height.dialog-contentButtonsBottom.text-break.text-prewrap.selectable.scroll\",\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"data-testid\": testId,\n\t\t\t\t\t\t},\n\t\t\t\t\t\t[lines.map((line) => m(\".text-break.selectable\", line)), typeof infoToAppend == \"function\" ? infoToAppend() : null],\n\t\t\t\t\t),\n\t\t\t\t\tm(\".flex-center.dialog-buttons\", m(Button, buttonAttrs)),\n\t\t\t\t],\n\t\t\t})\n\t\t\t\t.setCloseHandler(closeAction)\n\t\t\t\t.addShortcut({\n\t\t\t\t\tkey: Keys.RETURN,\n\t\t\t\t\tshift: false,\n\t\t\t\t\texec: closeAction,\n\t\t\t\t\thelp: \"close_alt\",\n\t\t\t\t})\n\t\t\t\t.addShortcut({\n\t\t\t\t\tkey: Keys.ESC,\n\t\t\t\t\tshift: false,\n\t\t\t\t\texec: closeAction,\n\t\t\t\t\thelp: \"close_alt\",\n\t\t\t\t})\n\t\t\t\t.show()\n\t\t})\n\t}\n\n\t/**\n\t * fallback for cases where we can't directly download and open a file\n\t */\n\tstatic legacyDownload(filename: string, url: string): Promise<void> {\n\t\treturn new Promise((resolve) => {\n\t\t\tlet dialog: Dialog\n\n\t\t\tconst closeAction = () => {\n\t\t\t\tdialog.close()\n\t\t\t\tsetTimeout(() => resolve(), DefaultAnimationTime)\n\t\t\t}\n\n\t\t\tconst closeButtonAttrs: ButtonAttrs = {\n\t\t\t\tlabel: \"close_alt\",\n\t\t\t\tclick: closeAction,\n\t\t\t\ttype: ButtonType.Primary,\n\t\t\t}\n\t\t\tconst downloadButtonAttrs: ButtonAttrs = {\n\t\t\t\tlabel: \"download_action\",\n\t\t\t\tclick: () => {\n\t\t\t\t\tconst popup = open(\"\", \"_blank\")\n\t\t\t\t\tif (popup) {\n\t\t\t\t\t\tpopup.location = url\n\t\t\t\t\t}\n\t\t\t\t\tdialog.close()\n\t\t\t\t\tresolve()\n\t\t\t\t},\n\t\t\t\ttype: ButtonType.Primary,\n\t\t\t}\n\t\t\tdialog = new Dialog(DialogType.Alert, {\n\t\t\t\tview: () =>\n\t\t\t\t\tm(\"\", [\n\t\t\t\t\t\tm(\".dialog-contentButtonsBottom.text-break\", [m(Button, downloadButtonAttrs), m(\".pt\", lang.get(\"saveDownloadNotPossibleIos_msg\"))]),\n\t\t\t\t\t\tm(\".flex-center.dialog-buttons\", m(Button, closeButtonAttrs)),\n\t\t\t\t\t]),\n\t\t\t})\n\t\t\t\t.setCloseHandler(closeAction)\n\t\t\t\t.show()\n\t\t})\n\t}\n\n\t/**\n\t * Simpler version of {@link Dialog#confirmMultiple} with just two options: no and yes (or another confirmation).\n\t * @return Promise, which is resolved with user selection - true for confirm, false for cancel.\n\t */\n\tstatic confirm(\n\t\tmessageIdOrMessageFunction: MaybeTranslation,\n\t\tconfirmId: TranslationKey = \"ok_action\",\n\t\tinfoToAppend?: string | lazy<Children>,\n\t): Promise<boolean> {\n\t\treturn new Promise((resolve) => {\n\t\t\tconst closeAction = (conf: boolean) => {\n\t\t\t\tdialog.close()\n\t\t\t\tsetTimeout(() => resolve(conf), DefaultAnimationTime)\n\t\t\t}\n\n\t\t\tconst buttonAttrs: Array<ButtonAttrs> = [\n\t\t\t\t{\n\t\t\t\t\tlabel: \"cancel_action\",\n\t\t\t\t\tclick: () => closeAction(false),\n\t\t\t\t\ttype: ButtonType.Secondary,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: confirmId,\n\t\t\t\t\tclick: () => closeAction(true),\n\t\t\t\t\ttype: ButtonType.Primary,\n\t\t\t\t},\n\t\t\t]\n\t\t\tconst dialog = Dialog.confirmMultiple(messageIdOrMessageFunction, buttonAttrs, resolve, infoToAppend)\n\t\t})\n\t}\n\n\t/**\n\t * Show a dialog with multiple selection options below the message.\n\t * @param messageIdOrMessageFunction which displayed in the body\n\t * @param buttons which are displayed below\n\t * @param onclose which is called on shortcut or when dialog is closed any other way (e.g. back navigation). Not called when pressing\n\t * one of the buttons.\n\t * @param infoToAppend additional UI elements to show below the message\n\t */\n\tstatic confirmMultiple(\n\t\tmessageIdOrMessageFunction: MaybeTranslation,\n\t\tbuttons: ReadonlyArray<ButtonAttrs>,\n\t\tonclose?: (positive: boolean) => unknown,\n\t\tinfoToAppend?: string | lazy<Children>,\n\t): Dialog {\n\t\tlet dialog: Dialog\n\n\t\tconst closeAction = (positive: boolean) => {\n\t\t\tdialog.close()\n\t\t\tsetTimeout(() => onclose && onclose(positive), DefaultAnimationTime)\n\t\t}\n\n\t\t// Wrap in a function to ensure that m() is called in every view() update for the infoToAppend\n\t\tfunction getContent(): Children {\n\t\t\tconst additionalChild =\n\t\t\t\ttypeof infoToAppend === \"string\"\n\t\t\t\t\t? m(\".dialog-contentButtonsBottom.text-break.selectable\", infoToAppend)\n\t\t\t\t\t: typeof infoToAppend === \"function\"\n\t\t\t\t\t? infoToAppend()\n\t\t\t\t\t: null\n\n\t\t\treturn [lang.getTranslationText(messageIdOrMessageFunction), additionalChild]\n\t\t}\n\n\t\tdialog = new Dialog(DialogType.Alert, {\n\t\t\tview: () => [\n\t\t\t\tm(\"#dialog-message.dialog-max-height.dialog-contentButtonsBottom.text-break.text-prewrap.selectable.scroll\", getContent()),\n\t\t\t\tbuttons.length === 0\n\t\t\t\t\t? null\n\t\t\t\t\t: m(\n\t\t\t\t\t\t\t\".flex-center.dialog-buttons\",\n\t\t\t\t\t\t\tbuttons.map((a) => m(Button, a)),\n\t\t\t\t\t  ),\n\t\t\t],\n\t\t})\n\t\t\t.setCloseHandler(() => closeAction(false))\n\t\t\t.addShortcut({\n\t\t\t\tkey: Keys.ESC,\n\t\t\t\tshift: false,\n\t\t\t\texec: () => closeAction(false),\n\t\t\t\thelp: \"cancel_action\",\n\t\t\t})\n\t\tdialog.show()\n\t\treturn dialog\n\t}\n\n\t/** show a dialog with several buttons on the bottom and return the option that was selected.\n\t *\n\t * never resolves if the user escapes out of the dialog without selecting an option.\n\t * */\n\tstatic choice<T>(\n\t\tmessage: MaybeTranslation,\n\t\tchoices: Array<{\n\t\t\ttext: MaybeTranslation\n\t\t\tvalue: T\n\t\t}>,\n\t): Promise<T> {\n\t\treturn new Promise((resolve) => {\n\t\t\tconst choose = (choice: T) => {\n\t\t\t\tdialog.close()\n\t\t\t\tsetTimeout(() => resolve(choice), DefaultAnimationTime)\n\t\t\t}\n\n\t\t\tconst buttonAttrs = choices.map((choice) => {\n\t\t\t\treturn {\n\t\t\t\t\tlabel: choice.text,\n\t\t\t\t\tclick: () => choose(choice.value),\n\t\t\t\t\ttype: ButtonType.Secondary,\n\t\t\t\t}\n\t\t\t})\n\t\t\tconst dialog = Dialog.confirmMultiple(message, buttonAttrs)\n\t\t})\n\t}\n\n\t/**\n\t * Shows a (not-cancellable) multiple-choice dialog.\n\t * @returns the selected option.\n\t */\n\tstatic choiceVertical<T>(\n\t\tmessage: MaybeTranslation,\n\t\tchoices: Array<{\n\t\t\ttext: MaybeTranslation\n\t\t\tvalue: T\n\t\t\ttype?: \"primary\" | \"secondary\"\n\t\t}>,\n\t): Promise<T> {\n\t\treturn new Promise((resolve) => {\n\t\t\tconst choose = (choice: T) => {\n\t\t\t\tdialog.close()\n\t\t\t\tsetTimeout(() => resolve(choice), DefaultAnimationTime)\n\t\t\t}\n\n\t\t\tconst buttonAttrs = choices.map((choice) => {\n\t\t\t\treturn {\n\t\t\t\t\tlabel: choice.text,\n\t\t\t\t\tclick: () => choose(choice.value),\n\t\t\t\t\ttype: choice.type === \"primary\" ? ButtonType.Primary : ButtonType.Secondary,\n\t\t\t\t}\n\t\t\t})\n\n\t\t\t// Wrap in a function to ensure that m() is called in every view() update for the infoToAppend\n\t\t\tfunction getContent(): Children {\n\t\t\t\treturn lang.getTranslationText(message)\n\t\t\t}\n\n\t\t\tconst dialog = new Dialog(DialogType.Alert, {\n\t\t\t\tview: () =>\n\t\t\t\t\tm(\".flex.flex-column.pl-l.pr-l.pb-s\", [\n\t\t\t\t\t\tm(\"#dialog-message.dialog-max-height.text-break.text-prewrap.selectable.scroll\", getContent()),\n\t\t\t\t\t\tbuttonAttrs.length === 0\n\t\t\t\t\t\t\t? null\n\t\t\t\t\t\t\t: m(\n\t\t\t\t\t\t\t\t\t\".flex.flex-column\",\n\t\t\t\t\t\t\t\t\tbuttonAttrs.map((a) => m(Button, a)),\n\t\t\t\t\t\t\t  ),\n\t\t\t\t\t]),\n\t\t\t})\n\t\t\tdialog.show()\n\t\t})\n\t}\n\n\t/**\n\t * show a dialog (resp. monologue) with no buttons that can not be closed, not even with ESC.\n\t */\n\tstatic deadEnd(message: MaybeTranslation) {\n\t\tconst dialog = Dialog.confirmMultiple(message, [])\n\t\tdialog.addShortcut({\n\t\t\tkey: Keys.ESC,\n\t\t\tshift: false,\n\t\t\texec: noOp,\n\t\t\thelp: \"emptyString_msg\",\n\t\t})\n\t\tdialog.addShortcut({\n\t\t\tkey: Keys.F1,\n\t\t\tshift: false,\n\t\t\texec: noOp,\n\t\t\thelp: \"emptyString_msg\",\n\t\t})\n\t}\n\n\t// used in admin client\n\tstatic save(title: lazy<string>, saveAction: () => Promise<void>, child: Component): Promise<void> {\n\t\treturn new Promise((resolve) => {\n\t\t\tlet saveDialog: Dialog\n\n\t\t\tconst closeAction = () => {\n\t\t\t\tsaveDialog.close()\n\t\t\t\tsetTimeout(() => resolve(), DefaultAnimationTime)\n\t\t\t}\n\n\t\t\tconst onOk = () => {\n\t\t\t\tsaveAction().then(() => {\n\t\t\t\t\tsaveDialog.close()\n\t\t\t\t\tsetTimeout(() => resolve(), DefaultAnimationTime)\n\t\t\t\t})\n\t\t\t}\n\n\t\t\tconst actionBarAttrs: DialogHeaderBarAttrs = {\n\t\t\t\tleft: [\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: \"close_alt\",\n\t\t\t\t\t\tclick: closeAction,\n\t\t\t\t\t\ttype: ButtonType.Secondary,\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\tright: [\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: \"save_action\",\n\t\t\t\t\t\tclick: onOk,\n\t\t\t\t\t\ttype: ButtonType.Primary,\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\tmiddle: lang.makeTranslation(\"title\", title()),\n\t\t\t}\n\t\t\tsaveDialog = new Dialog(DialogType.EditMedium, {\n\t\t\t\tview: () => m(\"\", [m(DialogHeaderBar, actionBarAttrs), m(\".plr-l.pb.text-break\", m(child))]),\n\t\t\t})\n\t\t\t\t.setCloseHandler(closeAction)\n\t\t\t\t.show()\n\t\t})\n\t}\n\n\tstatic reminder(title: string, message: string): Promise<boolean> {\n\t\treturn new Promise((resolve) => {\n\t\t\tlet dialog: Dialog\n\n\t\t\tconst closeAction = (res: boolean) => {\n\t\t\t\tdialog.close()\n\t\t\t\tsetTimeout(() => resolve(res), DefaultAnimationTime)\n\t\t\t}\n\n\t\t\tconst buttonAttrs: Array<ButtonAttrs> = [\n\t\t\t\t{\n\t\t\t\t\tlabel: \"upgradeReminderCancel_action\",\n\t\t\t\t\tclick: () => closeAction(false),\n\t\t\t\t\ttype: ButtonType.Secondary,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: \"showMoreUpgrade_action\",\n\t\t\t\t\tclick: () => closeAction(true),\n\t\t\t\t\ttype: ButtonType.Primary,\n\t\t\t\t},\n\t\t\t]\n\t\t\tdialog = new Dialog(DialogType.Reminder, {\n\t\t\t\tview: () => [\n\t\t\t\t\tm(\".dialog-contentButtonsBottom.text-break.scroll\", [\n\t\t\t\t\t\tm(\".h2.pb\", title),\n\t\t\t\t\t\tm(\".flex-direction-change.items-center\", [\n\t\t\t\t\t\t\tm(\"#dialog-message.pb\", message),\n\t\t\t\t\t\t\tm(\"img[src=\" + HabReminderImage + \"].dialog-img.mb.bg-white.border-radius\", {\n\t\t\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t\t\t\"min-width\": \"150px\",\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t]),\n\t\t\t\t\t]),\n\t\t\t\t\tm(\n\t\t\t\t\t\t\".flex-center.dialog-buttons.flex-no-grow-no-shrink-auto\",\n\t\t\t\t\t\tbuttonAttrs.map((a) => m(Button, a)),\n\t\t\t\t\t),\n\t\t\t\t],\n\t\t\t})\n\t\t\t\t.setCloseHandler(() => closeAction(false))\n\t\t\t\t.addShortcut({\n\t\t\t\t\tkey: Keys.ESC,\n\t\t\t\t\tshift: false,\n\t\t\t\t\texec: () => closeAction(false),\n\t\t\t\t\thelp: \"cancel_action\",\n\t\t\t\t})\n\t\t\t\t.show()\n\t\t})\n\t}\n\n\t/**\n\t * Shows a dialog with a text field input and ok/cancel buttons.\n\t * @param   props.child either a component (object with view function that returns a Children) or a naked view Function\n\t * @param   props.validator Called when \"Ok\" is clicked. Must return null if the input is valid or an error messageID if it is invalid, so an error message is shown.\n\t * @param   props.okAction called after successful validation.\n\t * @param   props.cancelAction called when allowCancel is true and the cancel button/shortcut was pressed.\n\t * @returns the Dialog\n\t */\n\tstatic showActionDialog(props: ActionDialogProps): Dialog {\n\t\tlet dialog = this.createActionDialog(props)\n\t\treturn dialog.show()\n\t}\n\n\tstatic createActionDialog(props: ActionDialogProps): Dialog {\n\t\tlet dialog: Dialog\n\t\tconst { title, child, okAction, validator, allowCancel, allowOkWithReturn, okActionTextId, cancelActionTextId, cancelAction, type } = Object.assign(\n\t\t\t{},\n\t\t\t{\n\t\t\t\tallowCancel: true,\n\t\t\t\tallowOkWithReturn: false,\n\t\t\t\tokActionTextId: \"ok_action\",\n\t\t\t\tcancelActionTextId: \"cancel_action\",\n\t\t\t\ttype: DialogType.EditSmall,\n\t\t\t\terrorMessageStream: Stream(DEFAULT_ERROR), // No error = errorMessageStream value is an empty string \"\"\n\t\t\t},\n\t\t\tprops,\n\t\t)\n\n\t\tconst doCancel = () => {\n\t\t\tif (cancelAction) {\n\t\t\t\tcancelAction(dialog)\n\t\t\t}\n\n\t\t\tdialog.close()\n\t\t}\n\n\t\tconst doAction = () => {\n\t\t\tif (!okAction) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tlet validationResult: $Promisable<TranslationKey | null> | null = null\n\n\t\t\tif (validator) {\n\t\t\t\tvalidationResult = validator()\n\t\t\t}\n\n\t\t\tlet finalizer = Promise.resolve(validationResult).then((error_id) => {\n\t\t\t\tif (error_id) {\n\t\t\t\t\tDialog.message(error_id)\n\t\t\t\t} else {\n\t\t\t\t\tokAction(dialog)\n\t\t\t\t}\n\t\t\t})\n\n\t\t\tif (validationResult instanceof Promise) {\n\t\t\t\t// breaking hard circular dependency\n\t\t\t\timport(\"../dialogs/ProgressDialog\").then((module) => module.showProgressDialog(\"pleaseWait_msg\", finalizer))\n\t\t\t}\n\t\t}\n\n\t\tconst actionBarAttrs: DialogHeaderBarAttrs = {\n\t\t\tleft: mapLazily(allowCancel, (allow) =>\n\t\t\t\tallow\n\t\t\t\t\t? [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlabel: cancelActionTextId,\n\t\t\t\t\t\t\t\tclick: doCancel,\n\t\t\t\t\t\t\t\ttype: ButtonType.Secondary,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t  ]\n\t\t\t\t\t: [],\n\t\t\t),\n\t\t\tright: okAction\n\t\t\t\t? [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: okActionTextId,\n\t\t\t\t\t\t\tclick: doAction,\n\t\t\t\t\t\t\ttype: ButtonType.Primary,\n\t\t\t\t\t\t},\n\t\t\t\t  ]\n\t\t\t\t: [],\n\t\t\tmiddle: title,\n\t\t}\n\t\tdialog = new Dialog(type, {\n\t\t\tview: () => [\n\t\t\t\tm(DialogHeaderBar, actionBarAttrs),\n\t\t\t\tm(\".dialog-max-height.plr-l.pb.text-break.scroll\", [\"function\" === typeof child ? child() : m(child)]),\n\t\t\t],\n\t\t}).setCloseHandler(doCancel)\n\t\tdialog.addShortcut({\n\t\t\tkey: Keys.ESC,\n\t\t\tshift: false,\n\t\t\texec: mapLazily(allowCancel, (allow) => allow && doCancel()),\n\t\t\thelp: \"cancel_action\",\n\t\t\tenabled: getAsLazy(allowCancel),\n\t\t})\n\n\t\tif (allowOkWithReturn) {\n\t\t\tdialog.addShortcut({\n\t\t\t\tkey: Keys.RETURN,\n\t\t\t\tshift: false,\n\t\t\t\texec: doAction,\n\t\t\t\thelp: \"ok_action\",\n\t\t\t})\n\t\t}\n\t\treturn dialog\n\t}\n\n\t/**\n\t * Shows a dialog with a text field input and ok/cancel buttons.\n\t * @returns A promise resolving to the entered text. The returned promise is only resolved if \"ok\" is clicked.\n\t */\n\tstatic showTextInputDialog(props: TextInputDialogParams): Promise<string> {\n\t\treturn new Promise((resolve) => {\n\t\t\tDialog.showProcessTextInputDialog(props, async (value) => resolve(value))\n\t\t})\n\t}\n\n\t/**\n\t * Shows a dialog with a text field input and ok/cancel buttons. In contrast to {@link showTextInputDialog} the entered text is not returned but processed in the okAction.\n\t */\n\tstatic showProcessTextInputDialog(props: TextInputDialogParams, okAction: (action: string) => Promise<unknown>) {\n\t\tlet textFieldType = props.textFieldType ?? TextFieldType.Text\n\n\t\tlet result = props.defaultValue ?? \"\"\n\t\tDialog.showActionDialog({\n\t\t\ttitle: props.title,\n\t\t\tchild: () =>\n\t\t\t\tm(TextField, {\n\t\t\t\t\tlabel: props.label,\n\t\t\t\t\tvalue: result,\n\t\t\t\t\ttype: textFieldType,\n\t\t\t\t\toninput: (newValue) => (result = newValue),\n\t\t\t\t\thelpLabel: () => (props.infoMsgId ? lang.getTranslationText(props.infoMsgId) : \"\"),\n\t\t\t\t}),\n\t\t\tvalidator: () => (props.inputValidator ? props.inputValidator(result) : null),\n\t\t\tallowOkWithReturn: true,\n\t\t\tokAction: async (dialog: Dialog) => {\n\t\t\t\ttry {\n\t\t\t\t\tawait okAction(result)\n\t\t\t\t\tdialog.close()\n\t\t\t\t} catch (error) {\n\t\t\t\t\tif (!isOfflineError(error)) {\n\t\t\t\t\t\tdialog.close()\n\t\t\t\t\t}\n\t\t\t\t\tthrow error\n\t\t\t\t}\n\t\t\t},\n\t\t})\n\t}\n\n\t/**\n\t * Shows a dialog with a text area input and ok/cancel buttons.\n\t * @param titleId title of the dialog\n\t * @param labelIdOrLabelFunction label of the text area\n\t * @param infoMsgId help label of the text area\n\t * @param value initial value\n\t * @returns A promise resolving to the entered text. The returned promise is only resolved if \"ok\" is clicked.\n\t */\n\tstatic showTextAreaInputDialog(\n\t\ttitleId: TranslationKey,\n\t\tlabelIdOrLabelFunction: MaybeTranslation,\n\t\tinfoMsgId: TranslationKey | null,\n\t\tvalue: string,\n\t): Promise<string> {\n\t\treturn new Promise((resolve) => {\n\t\t\tlet result: string = value\n\t\t\tDialog.showActionDialog({\n\t\t\t\ttitle: titleId,\n\t\t\t\tchild: {\n\t\t\t\t\tview: () =>\n\t\t\t\t\t\tm(TextField, {\n\t\t\t\t\t\t\tlabel: labelIdOrLabelFunction,\n\t\t\t\t\t\t\thelpLabel: () => (infoMsgId ? lang.get(infoMsgId) : \"\"),\n\t\t\t\t\t\t\tvalue: result,\n\t\t\t\t\t\t\toninput: (newValue) => (result = newValue),\n\t\t\t\t\t\t\ttype: TextFieldType.Area,\n\t\t\t\t\t\t}),\n\t\t\t\t},\n\t\t\t\tokAction: (dialog: Dialog) => {\n\t\t\t\t\tresolve(result)\n\t\t\t\t\tdialog.close()\n\t\t\t\t},\n\t\t\t})\n\t\t})\n\t}\n\n\t/**\n\t * Show a dialog with a dropdown selector\n\t * @param titleId title of the dialog\n\t * @param label label of the dropdown selector\n\t * @param infoMsgId help label of the dropdown selector\n\t * @param items selection set\n\t * @param initialValue initial value\n\t * @param dropdownWidth width of the dropdown\n\t * @returns A promise resolving to the selected item. The returned promise is only resolved if \"ok\" is clicked.\n\t */\n\tstatic showDropDownSelectionDialog<T>(\n\t\ttitleId: TranslationKey,\n\t\tlabel: TranslationKey,\n\t\tinfoMsgId: TranslationKey | null,\n\t\titems: SelectorItemList<T>,\n\t\tinitialValue: T,\n\t\tdropdownWidth?: number,\n\t): Promise<T> {\n\t\tlet selectedValue: T = initialValue\n\t\treturn new Promise((resolve) => {\n\t\t\tDialog.showActionDialog({\n\t\t\t\ttitle: titleId,\n\t\t\t\tchild: {\n\t\t\t\t\tview: () =>\n\t\t\t\t\t\t// identity as type assertion\n\t\t\t\t\t\tm(\n\t\t\t\t\t\t\tDropDownSelector,\n\t\t\t\t\t\t\tidentity<DropDownSelectorAttrs<T>>({\n\t\t\t\t\t\t\t\tlabel,\n\t\t\t\t\t\t\t\titems,\n\t\t\t\t\t\t\t\tselectedValue: selectedValue,\n\t\t\t\t\t\t\t\tselectionChangedHandler: (newValue) => (selectedValue = newValue),\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t),\n\t\t\t\t},\n\t\t\t\tokAction: (dialog: Dialog) => {\n\t\t\t\t\tresolve(selectedValue)\n\t\t\t\t\tdialog.close()\n\t\t\t\t},\n\t\t\t})\n\t\t})\n\t}\n\n\t/** @deprecated use editDialog*/\n\tstatic largeDialog(headerBarAttrs: DialogHeaderBarAttrs, child: Component): Dialog {\n\t\treturn new Dialog(DialogType.EditLarge, {\n\t\t\tview: () => {\n\t\t\t\treturn m(\"\", [m(DialogHeaderBar, headerBarAttrs), m(\".dialog-container.scroll\", m(\".fill-absolute.plr-l\", m(child)))])\n\t\t\t},\n\t\t})\n\t}\n\n\tstatic editDialog<T extends object>(headerBarAttrs: DialogHeaderBarAttrs, child: Class<Component<T>>, childAttrs: T): Dialog {\n\t\treturn new Dialog(DialogType.EditLarge, {\n\t\t\tview: () =>\n\t\t\t\tm(\"\", [\n\t\t\t\t\t/** fixed-height header with a title, left and right buttons that's fixed to the top of the dialog's area */\n\t\t\t\t\theaderBarAttrs.noHeader ? null : m(DialogHeaderBar, headerBarAttrs),\n\t\t\t\t\t/** variable-size child container that may be scrollable. */\n\t\t\t\t\tm(\".dialog-container.scroll.hide-outline\", m(\".fill-absolute.plr-l\", m(child, childAttrs))),\n\t\t\t\t]),\n\t\t})\n\t}\n\n\tstatic editMediumDialog<T extends object>(\n\t\theaderBarAttrs: DialogHeaderBarAttrs,\n\t\tchild: Class<Component<T>>,\n\t\tchildAttrs: T,\n\t\tdialogStyle?: Partial<CSSStyleDeclaration> | object,\n\t): Dialog {\n\t\treturn new Dialog(DialogType.EditMedium, {\n\t\t\tview: () =>\n\t\t\t\tm(\".flex.col.border-radius\", { style: dialogStyle }, [\n\t\t\t\t\t/** fixed-height header with a title, left and right buttons that's fixed to the top of the dialog's area */\n\t\t\t\t\theaderBarAttrs.noHeader ? null : m(DialogHeaderBar, headerBarAttrs),\n\t\t\t\t\t/** variable-size child container that may be scrollable. */\n\t\t\t\t\tm(\".scroll.hide-outline.plr-l.flex-grow\", { style: { \"overflow-x\": \"hidden\" } }, m(child, childAttrs)),\n\t\t\t\t]),\n\t\t})\n\t}\n\n\tstatic editSmallDialog<T extends object>(headerBarAttrs: DialogHeaderBarAttrs, child: () => Children): Dialog {\n\t\treturn new Dialog(DialogType.EditSmall, {\n\t\t\tview: () => [\n\t\t\t\t/** fixed-height header with a title, left and right buttons that's fixed to the top of the dialog's area */\n\t\t\t\theaderBarAttrs.noHeader ? null : m(DialogHeaderBar, headerBarAttrs),\n\t\t\t\t/** variable-size child container that may be scrollable. */\n\t\t\t\tm(\".scroll.hide-outline.plr-l\", child()),\n\t\t\t],\n\t\t})\n\t}\n\n\tstatic async viewerDialog<T extends object>(title: MaybeTranslation, child: Class<Component<T>>, childAttrs: T): Promise<void> {\n\t\treturn new Promise((resolve) => {\n\t\t\tlet dialog: Dialog\n\n\t\t\tconst close = () => {\n\t\t\t\tdialog.close()\n\t\t\t\tresolve()\n\t\t\t}\n\n\t\t\tconst headerAttrs: DialogHeaderBarAttrs = {\n\t\t\t\tleft: [\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: \"close_alt\",\n\t\t\t\t\t\tclick: close,\n\t\t\t\t\t\ttype: ButtonType.Secondary,\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\tmiddle: title,\n\t\t\t}\n\t\t\tdialog = Dialog.editDialog(headerAttrs, child, childAttrs)\n\t\t\t\t.setCloseHandler(close)\n\t\t\t\t.addShortcut({\n\t\t\t\t\tkey: Keys.ESC,\n\t\t\t\t\texec: close,\n\t\t\t\t\thelp: \"close_alt\",\n\t\t\t\t})\n\t\t\t\t.show()\n\t\t})\n\t}\n\n\tstatic onKeyboardSizeChanged(newSize: number): void {\n\t\tDialog.keyboardHeight = newSize\n\t\tm.redraw()\n\t}\n}\n\nexport type stringValidator = (arg0: string) => (TranslationKey | null) | Promise<TranslationKey | null>\nwindowFacade.addKeyboardSizeListener(Dialog.onKeyboardSizeChanged)\n"]}