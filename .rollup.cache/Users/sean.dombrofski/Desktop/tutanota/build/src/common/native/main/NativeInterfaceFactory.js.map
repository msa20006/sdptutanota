{"version":3,"file":"NativeInterfaceFactory.js","sourceRoot":"","sources":["../../../../../src/common/native/main/NativeInterfaceFactory.ts"],"names":[],"mappings":"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","sourcesContent":["import { NativeInterfaceMain } from \"./NativeInterfaceMain.js\"\nimport { NativePushServiceApp } from \"./NativePushServiceApp.js\"\nimport { NativeFileApp } from \"../common/FileApp.js\"\nimport { isBrowser, isElectronClient } from \"../../api/common/Env.js\"\nimport { ProgrammingError } from \"../../api/common/error/ProgrammingError.js\"\nimport { DesktopFacade } from \"../common/generatedipc/DesktopFacade.js\"\nimport { CommonNativeFacade } from \"../common/generatedipc/CommonNativeFacade.js\"\nimport { CryptoFacade } from \"../../api/worker/crypto/CryptoFacade.js\"\nimport { EntityClient } from \"../../api/common/EntityClient.js\"\nimport { deviceConfig } from \"../../misc/DeviceConfig.js\"\nimport { CalendarFacade } from \"../../api/worker/facades/lazy/CalendarFacade.js\"\nimport { MobileSystemFacade } from \"../common/generatedipc/MobileSystemFacade.js\"\nimport { CommonSystemFacade } from \"../common/generatedipc/CommonSystemFacade.js\"\nimport { ThemeFacade } from \"../common/generatedipc/ThemeFacade.js\"\nimport { WebGlobalDispatcher } from \"../common/generatedipc/WebGlobalDispatcher.js\"\nimport { NativePushFacadeSendDispatcher } from \"../common/generatedipc/NativePushFacadeSendDispatcher.js\"\nimport { FileFacadeSendDispatcher } from \"../common/generatedipc/FileFacadeSendDispatcher.js\"\nimport { ExportFacadeSendDispatcher } from \"../common/generatedipc/ExportFacadeSendDispatcher.js\"\nimport { CommonSystemFacadeSendDispatcher } from \"../common/generatedipc/CommonSystemFacadeSendDispatcher.js\"\nimport { MobileSystemFacadeSendDispatcher } from \"../common/generatedipc/MobileSystemFacadeSendDispatcher.js\"\nimport { ThemeFacadeSendDispatcher } from \"../common/generatedipc/ThemeFacadeSendDispatcher.js\"\nimport { SearchTextInAppFacadeSendDispatcher } from \"../common/generatedipc/SearchTextInAppFacadeSendDispatcher.js\"\nimport { SettingsFacadeSendDispatcher } from \"../common/generatedipc/SettingsFacadeSendDispatcher.js\"\nimport { DesktopSystemFacadeSendDispatcher } from \"../common/generatedipc/DesktopSystemFacadeSendDispatcher.js\"\nimport { SearchTextInAppFacade } from \"../common/generatedipc/SearchTextInAppFacade.js\"\nimport { DesktopSystemFacade } from \"../common/generatedipc/DesktopSystemFacade.js\"\nimport { InterWindowEventFacade } from \"../common/generatedipc/InterWindowEventFacade.js\"\nimport { InterWindowEventFacadeSendDispatcher } from \"../common/generatedipc/InterWindowEventFacadeSendDispatcher.js\"\nimport { LoginController } from \"../../api/main/LoginController.js\"\nimport { MobileContactsFacade } from \"../common/generatedipc/MobileContactsFacade.js\"\nimport { MobileContactsFacadeSendDispatcher } from \"../common/generatedipc/MobileContactsFacadeSendDispatcher.js\"\nimport { WebMobileFacade } from \"./WebMobileFacade.js\"\nimport { NativeCredentialsFacade } from \"../common/generatedipc/NativeCredentialsFacade.js\"\nimport { NativeCredentialsFacadeSendDispatcher } from \"../common/generatedipc/NativeCredentialsFacadeSendDispatcher.js\"\nimport { MobilePaymentsFacade } from \"../common/generatedipc/MobilePaymentsFacade.js\"\nimport { MobilePaymentsFacadeSendDispatcher } from \"../common/generatedipc/MobilePaymentsFacadeSendDispatcher.js\"\n\nimport { AppType } from \"../../misc/ClientConstants.js\"\nimport { ExternalCalendarFacade } from \"../common/generatedipc/ExternalCalendarFacade.js\"\nimport { ExternalCalendarFacadeSendDispatcher } from \"../common/generatedipc/ExternalCalendarFacadeSendDispatcher.js\"\nimport { NativeMailImportFacadeSendDispatcher } from \"../common/generatedipc/NativeMailImportFacadeSendDispatcher\"\nimport { NativeMailImportFacade } from \"../common/generatedipc/NativeMailImportFacade\"\nimport { ExportFacade } from \"../common/generatedipc/ExportFacade.js\"\n\nexport type NativeInterfaces = {\n\tnative: NativeInterfaceMain\n\tfileApp: NativeFileApp\n\tpushService: NativePushServiceApp\n\tmobileSystemFacade: MobileSystemFacade\n\tcommonSystemFacade: CommonSystemFacade\n\tthemeFacade: ThemeFacade\n\tmobileContactsFacade: MobileContactsFacade\n\tnativeCredentialsFacade: NativeCredentialsFacade\n\tmobilePaymentsFacade: MobilePaymentsFacade\n\texternalCalendarFacade: ExternalCalendarFacade\n}\n\nexport type DesktopInterfaces = {\n\tsearchTextFacade: SearchTextInAppFacade\n\tdesktopSettingsFacade: SettingsFacadeSendDispatcher\n\tdesktopSystemFacade: DesktopSystemFacade\n\tnativeMailImportFacade: NativeMailImportFacade\n\tinterWindowEventSender: InterWindowEventFacadeSendDispatcher\n\texportFacade: ExportFacade\n}\n\n/**\n * @returns NativeInterfaces\n * @throws ProgrammingError when you try to call this in the web browser\n */\nexport function createNativeInterfaces(\n\tmobileFacade: WebMobileFacade,\n\tdesktopFacade: DesktopFacade,\n\tinterWindowEventFacade: InterWindowEventFacade,\n\tcommonNativeFacade: CommonNativeFacade,\n\tcryptoFacade: CryptoFacade,\n\tcalendarFacade: CalendarFacade,\n\tentityClient: EntityClient,\n\tlogins: LoginController,\n\tapp: AppType,\n): NativeInterfaces {\n\tif (isBrowser()) {\n\t\tthrow new ProgrammingError(\"Tried to make native interfaces in non-native\")\n\t}\n\n\tconst dispatcher = new WebGlobalDispatcher(commonNativeFacade, desktopFacade, interWindowEventFacade, mobileFacade)\n\tconst native = new NativeInterfaceMain(dispatcher)\n\tconst nativePushFacadeSendDispatcher = new NativePushFacadeSendDispatcher(native)\n\tconst pushService = new NativePushServiceApp(nativePushFacadeSendDispatcher, logins, cryptoFacade, entityClient, deviceConfig, calendarFacade, app)\n\tconst fileApp = new NativeFileApp(new FileFacadeSendDispatcher(native), new ExportFacadeSendDispatcher(native))\n\tconst commonSystemFacade = new CommonSystemFacadeSendDispatcher(native)\n\tconst mobileSystemFacade = new MobileSystemFacadeSendDispatcher(native)\n\tconst themeFacade = new ThemeFacadeSendDispatcher(native)\n\tconst mobileContactsFacade = new MobileContactsFacadeSendDispatcher(native)\n\tconst nativeCredentialsFacade = new NativeCredentialsFacadeSendDispatcher(native)\n\tconst mobilePaymentsFacade = new MobilePaymentsFacadeSendDispatcher(native)\n\tconst externalCalendarFacade = new ExternalCalendarFacadeSendDispatcher(native)\n\n\treturn {\n\t\tnative,\n\t\tfileApp,\n\t\tpushService,\n\t\tmobileSystemFacade,\n\t\tcommonSystemFacade,\n\t\tthemeFacade,\n\t\tmobileContactsFacade,\n\t\tnativeCredentialsFacade,\n\t\tmobilePaymentsFacade,\n\t\texternalCalendarFacade,\n\t}\n}\n\nexport function createDesktopInterfaces(native: NativeInterfaceMain): DesktopInterfaces {\n\tif (!isElectronClient()) {\n\t\tthrow new ProgrammingError(\"tried to create desktop interfaces in non-electron client\")\n\t}\n\treturn {\n\t\tsearchTextFacade: new SearchTextInAppFacadeSendDispatcher(native),\n\t\tdesktopSettingsFacade: new SettingsFacadeSendDispatcher(native),\n\t\tdesktopSystemFacade: new DesktopSystemFacadeSendDispatcher(native),\n\t\tnativeMailImportFacade: new NativeMailImportFacadeSendDispatcher(native),\n\t\tinterWindowEventSender: new InterWindowEventFacadeSendDispatcher(native),\n\t\texportFacade: new ExportFacadeSendDispatcher(native),\n\t}\n}\n"]}