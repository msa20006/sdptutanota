{"version":3,"file":"SettingsExpander.js","sourceRoot":"","sources":["../../../../src/common/settings/SettingsExpander.ts"],"names":[],"mappings":"AACA,OAAO,EAAE,IAAI,EAAE,MAAM,8BAA8B,CAAA;AACnD,OAAO,CAAiC,MAAM,SAAS,CAAA;AACvD,OAAO,EAAE,cAAc,EAAE,aAAa,EAAE,MAAM,yBAAyB,CAAA;AACvE,OAAO,EAAE,kBAAkB,EAAE,MAAM,yBAAyB,CAAA;AAG5D,OAAO,EAAE,OAAO,EAAE,MAAM,8BAA8B,CAAA;AAWtD,MAAM,OAAO,gBAAgB;IAC5B,QAAQ,CAAC,KAAmC;QAC3C,KAAK,CAAC,KAAK,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,QAAQ,EAAE,EAAE;YACrC,IAAI,QAAQ,IAAI,KAAK,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC;gBACtC,KAAK,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAA;YACvB,CAAC;QACF,CAAC,CAAC,CAAA;IACH,CAAC;IAED,IAAI,CAAC,KAAmC;QACvC,MAAM,EAAE,KAAK,EAAE,UAAU,EAAE,UAAU,EAAE,OAAO,EAAE,QAAQ,EAAE,GAAG,KAAK,CAAC,KAAK,CAAA;QACxE,OAAO;YACN,CAAC,CAAC,4CAA4C,EAAE;gBAC/C,CAAC,CAAC,KAAK,EAAE,IAAI,CAAC,kBAAkB,CAAC,KAAK,CAAC,CAAC;gBACxC,CAAC,CAAC,cAAc,EAAE;oBACjB,KAAK,EAAE,UAAU,IAAI,aAAa;oBAClC,QAAQ,EAAE,QAAQ,EAAE;oBACpB,gBAAgB,EAAE,QAAQ;iBAC1B,CAAC;aACF,CAAC;YACF,CAAC,CACA,aAAa,EACb;gBACC,QAAQ,EAAE,QAAQ,EAAE;aACpB,EACD,KAAK,CAAC,QAAQ,CACd;YACD,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,EAAE,IAAI,CAAC,kBAAkB,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI;YAC7D,UAAU,CAAC,CAAC,CAAC,kBAAkB,CAAC,OAAO,CAAC,MAAM,EAAE,UAAU,EAAE,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC,CAAC,kBAAkB,EAAE,CAAC,CAAC,CAAC,UAAU,IAAI,kBAAkB,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI;SAChJ,CAAA;IACF,CAAC;CACD","sourcesContent":["import type { InfoLink, TranslationKey, MaybeTranslation } from \"../misc/LanguageViewModel.js\"\nimport { lang } from \"../misc/LanguageViewModel.js\"\nimport m, { Children, Component, Vnode } from \"mithril\"\nimport { ExpanderButton, ExpanderPanel } from \"../gui/base/Expander.js\"\nimport { ifAllowedTutaLinks } from \"../gui/base/GuiUtils.js\"\nimport type { lazy, Thunk } from \"@tutao/tutanota-utils\"\nimport Stream from \"mithril/stream\"\nimport { locator } from \"../api/main/CommonLocator.js\"\n\nexport type SettingsExpanderAttrs = {\n\ttitle: MaybeTranslation\n\tbuttonText?: MaybeTranslation\n\tinfoMsg?: MaybeTranslation\n\tinfoLinkId?: InfoLink | undefined\n\tonExpand?: Thunk | undefined\n\texpanded: Stream<boolean>\n}\n\nexport class SettingsExpander implements Component<SettingsExpanderAttrs> {\n\toncreate(vnode: Vnode<SettingsExpanderAttrs>) {\n\t\tvnode.attrs.expanded.map((expanded) => {\n\t\t\tif (expanded && vnode.attrs.onExpand) {\n\t\t\t\tvnode.attrs.onExpand()\n\t\t\t}\n\t\t})\n\t}\n\n\tview(vnode: Vnode<SettingsExpanderAttrs>): Children {\n\t\tconst { title, buttonText, infoLinkId, infoMsg, expanded } = vnode.attrs\n\t\treturn [\n\t\t\tm(\".flex-space-between.items-center.mb-s.mt-l\", [\n\t\t\t\tm(\".h4\", lang.getTranslationText(title)),\n\t\t\t\tm(ExpanderButton, {\n\t\t\t\t\tlabel: buttonText || \"show_action\",\n\t\t\t\t\texpanded: expanded(),\n\t\t\t\t\tonExpandedChange: expanded,\n\t\t\t\t}),\n\t\t\t]),\n\t\t\tm(\n\t\t\t\tExpanderPanel,\n\t\t\t\t{\n\t\t\t\t\texpanded: expanded(),\n\t\t\t\t},\n\t\t\t\tvnode.children,\n\t\t\t),\n\t\t\tinfoMsg ? m(\"small\", lang.getTranslationText(infoMsg)) : null,\n\t\t\tinfoLinkId ? ifAllowedTutaLinks(locator.logins, infoLinkId, (link) => m(\"small.text-break\", [m(`a[href=${link}][target=_blank]`, link)])) : null,\n\t\t]\n\t}\n}\n"]}