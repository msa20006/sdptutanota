{"version":3,"file":"NativeWebauthnView.js","sourceRoot":"","sources":["../../../../src/common/login/NativeWebauthnView.ts"],"names":[],"mappings":"AACA,OAAO,CAAC,MAAM,SAAS,CAAA;AACvB,OAAO,EAAE,eAAe,EAAwB,MAAM,gCAAgC,CAAA;AAEtF,OAAO,EAAE,iBAAiB,EAAE,MAAM,4BAA4B,CAAA;AAC9D,OAAO,EAAE,YAAY,EAAE,MAAM,qBAAqB,CAAA;AAClD,OAAO,EAAE,IAAI,EAAE,MAAM,8BAA8B,CAAA;AAKnD;;;;GAIG;AACH,MAAM,OAAO,kBAAkB;IACD;IAA4C;IAAzE,YAA6B,QAAyB,EAAmB,eAAqC;QAAjF,aAAQ,GAAR,QAAQ,CAAiB;QAAmB,oBAAe,GAAf,eAAe,CAAsB;QAC7G,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAA;QAChC,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAA;IACzC,CAAC;IAED,SAAS,CAAC,IAAyB,EAAE,aAAqB,IAAS,CAAC;IAEpE,IAAI,CAAC,KAAY;QAChB,MAAM,cAAc,GAAyB;YAC5C,IAAI,EAAE;gBACL;oBACC,KAAK,EAAE,eAAe;oBACtB,KAAK,EAAE,GAAG,EAAE,CAAC,MAAM,CAAC,KAAK,EAAE;oBAC3B,IAAI,wCAAsB;iBAC1B;aACD;YACD,KAAK,EAAE,EAAE;YACT,MAAM,EAAE,sBAAsB;SAC9B,CAAA;QAED,OAAO,CAAC,CACP,iCAAiC,EACjC;YACC,KAAK,EAAE;gBACN,MAAM,EAAE,QAAQ;aAChB;SACD,EACD;YACC,CAAC,CAAC,0BAA0B,EAAE;gBAC7B,CAAC,CAAC,eAAe,EAAE,cAAc,CAAC;gBAClC,CAAC,CAAC,mBAAmB,EAAE,CAAC,CAAC,KAAK,EAAE,EAAE,GAAG,EAAE,iBAAiB,EAAE,CAAC,CAAC;gBAC5D,CAAC,CAAC,cAAc,EAAE,CAAC,CAAC,CAAC,sBAAsB,EAAE,CAAC,CAAC,CAAC,OAAO,EAAE,YAAY,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,IAAI,CAAC,GAAG,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;aAClH,CAAC;SACF,CACD,CAAA;IACF,CAAC;CACD","sourcesContent":["import type { Children, Vnode } from \"mithril\"\nimport m from \"mithril\"\nimport { DialogHeaderBar, DialogHeaderBarAttrs } from \"../gui/base/DialogHeaderBar.js\"\nimport type { WebauthnNativeBridge } from \"../native/main/WebauthnNativeBridge.js\"\nimport { SecondFactorImage } from \"../gui/base/icons/Icons.js\"\nimport { progressIcon } from \"../gui/base/Icon.js\"\nimport { lang } from \"../misc/LanguageViewModel.js\"\nimport { ButtonType } from \"../gui/base/Button.js\"\nimport { BrowserWebauthn } from \"../misc/2fa/webauthn/BrowserWebauthn.js\"\nimport { TopLevelView } from \"../../TopLevelView.js\"\n\n/**\n * This is a special view which is not used by the web client\n * directly but is loaded remotely by desktop client in a dialog.\n * See DesktopWebauthnFacade.\n */\nexport class NativeWebauthnView implements TopLevelView {\n\tconstructor(private readonly webauthn: BrowserWebauthn, private readonly nativeTransport: WebauthnNativeBridge) {\n\t\tthis.view = this.view.bind(this)\n\t\tthis.nativeTransport.init(this.webauthn)\n\t}\n\n\tupdateUrl(args: Record<string, any>, requestedPath: string): void {}\n\n\tview(vnode: Vnode): Children {\n\t\tconst headerBarAttrs: DialogHeaderBarAttrs = {\n\t\t\tleft: [\n\t\t\t\t{\n\t\t\t\t\tlabel: \"cancel_action\",\n\t\t\t\t\tclick: () => window.close(),\n\t\t\t\t\ttype: ButtonType.Secondary,\n\t\t\t\t},\n\t\t\t],\n\t\t\tright: [],\n\t\t\tmiddle: \"u2fSecurityKey_label\",\n\t\t}\n\n\t\treturn m(\n\t\t\t\".mt.flex.col.flex-center.center\",\n\t\t\t{\n\t\t\t\tstyle: {\n\t\t\t\t\tmargin: \"0 auto\",\n\t\t\t\t},\n\t\t\t},\n\t\t\t[\n\t\t\t\tm(\".flex.col.justify-center\", [\n\t\t\t\t\tm(DialogHeaderBar, headerBarAttrs),\n\t\t\t\t\tm(\".flex-center.mt-s\", m(\"img\", { src: SecondFactorImage })),\n\t\t\t\t\tm(\".mt.flex.col\", [m(\".flex.justify-center\", [m(\".mr-s\", progressIcon()), m(\"\", lang.get(\"waitingForU2f_msg\"))])]),\n\t\t\t\t]),\n\t\t\t],\n\t\t)\n\t}\n}\n"]}