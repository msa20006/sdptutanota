{"version":3,"file":"CalendarSwipeHandler.js","sourceRoot":"","sources":["../../../../../src/common/gui/base/CalendarSwipeHandler.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,YAAY,EAAE,MAAM,mBAAmB,CAAA;AAChD,OAAO,EAAE,UAAU,EAAE,SAAS,EAAiB,MAAM,4BAA4B,CAAA;AAEjF,MAAM,OAAO,oBAAqB,SAAQ,YAAY;IACrD,mBAAmB,CAA4B;IAC/C,QAAQ,GAAW,CAAC,CAAA;IAEpB,YAAY,SAAsB,EAAE,kBAA8C;QACjF,KAAK,CAAC,SAAS,CAAC,CAAA;QAChB,6FAA6F;QAC7F,SAAS,CAAC,KAAK,CAAC,cAAc,GAAG,aAAa,CAAA;QAC9C,SAAS,CAAC,KAAK,CAAC,kBAAkB,GAAG,QAAQ,CAAA;QAC7C,IAAI,CAAC,mBAAmB,GAAG,kBAAkB,CAAA;IAC9C,CAAC;IAED,gBAAgB,CAAC,MAAc,EAAE,MAAc;QAC9C,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAA;QAClD,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,SAAS,GAAG,cAAc,IAAI,CAAC,QAAQ,KAAK,CAAA;IAClE,CAAC;IAED,4BAA4B,CAAC,KAA+B;QAC3D,IAAI,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,GAAG,EAAE,CAAC;YAC7B,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAA;YACjB,OAAO,UAAU;iBACf,GAAG,CAAC,IAAI,CAAC,SAAS,EAAE,SAAS,8CAA2B,KAAK,CAAC,CAAC,EAAE,IAAI,CAAC,SAAS,CAAC,WAAW,GAAG,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;iBACtH,IAAI,CAAC,GAAG,EAAE;gBACV,IAAI,CAAC,mBAAmB,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC,CAAA;gBAErC,qBAAqB,CAAC,GAAG,EAAE;oBAC1B,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,SAAS,GAAG,EAAE,CAAA;gBACpC,CAAC,CAAC,CAAA;YACH,CAAC,CAAC,CAAA;QACJ,CAAC;aAAM,CAAC;YACP,OAAO,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAA;QACzB,CAAC;IACF,CAAC;IAED,KAAK,CAAC,KAA+B;QACpC,IAAI,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,EAAE,EAAE,CAAC;YAClC,UAAU,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,EAAE,SAAS,8CAA2B,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAA;QAChF,CAAC;aAAM,CAAC;YACP,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,SAAS,GAAG,EAAE,CAAA;QACpC,CAAC;QAED,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAA;QACjB,OAAO,KAAK,CAAC,KAAK,CAAC,KAAK,CAAC,CAAA;IAC1B,CAAC;CACD","sourcesContent":["import { SwipeHandler } from \"./SwipeHandler.js\"\nimport { animations, transform, TransformEnum } from \"../animation/Animations.js\"\n\nexport class CalendarSwipeHandler extends SwipeHandler {\n\t_onGestureCompleted: (next: boolean) => unknown\n\t_xoffset: number = 0\n\n\tconstructor(touchArea: HTMLElement, onGestureCompleted: (next: boolean) => unknown) {\n\t\tsuper(touchArea)\n\t\t// avoid flickering especially in day and week view when overflow-y is set on nested elements\n\t\ttouchArea.style.transformStyle = \"preserve-3d\"\n\t\ttouchArea.style.backfaceVisibility = \"hidden\"\n\t\tthis._onGestureCompleted = onGestureCompleted\n\t}\n\n\tonHorizontalDrag(xDelta: number, yDelta: number) {\n\t\tthis._xoffset = Math.abs(xDelta) > 20 ? xDelta : 0\n\t\tthis.touchArea.style.transform = `translateX(${this._xoffset}px)`\n\t}\n\n\tonHorizontalGestureCompleted(delta: { x: number; y: number }): Promise<void> {\n\t\tif (Math.abs(delta.x) > 100) {\n\t\t\tthis._xoffset = 0\n\t\t\treturn animations\n\t\t\t\t.add(this.touchArea, transform(TransformEnum.TranslateX, delta.x, this.touchArea.offsetWidth * (delta.x > 0 ? 1 : -1)))\n\t\t\t\t.then(() => {\n\t\t\t\t\tthis._onGestureCompleted(delta.x < 0)\n\n\t\t\t\t\trequestAnimationFrame(() => {\n\t\t\t\t\t\tthis.touchArea.style.transform = \"\"\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t} else {\n\t\t\treturn this.reset(delta)\n\t\t}\n\t}\n\n\treset(delta: { x: number; y: number }): Promise<any> {\n\t\tif (Math.abs(this._xoffset) > 20) {\n\t\t\tanimations.add(this.touchArea, transform(TransformEnum.TranslateX, delta.x, 0))\n\t\t} else {\n\t\t\tthis.touchArea.style.transform = \"\"\n\t\t}\n\n\t\tthis._xoffset = 0\n\t\treturn super.reset(delta)\n\t}\n}\n"]}