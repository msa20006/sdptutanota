{"version":3,"file":"WhitelabelNotificationEmailSettings.js","sourceRoot":"","sources":["../../../../../src/common/settings/whitelabel/WhitelabelNotificationEmailSettings.ts"],"names":[],"mappings":"AAAA,OAAO,CAAiC,MAAM,SAAS,CAAA;AACvD,OAAO,MAAM,MAAM,gBAAgB,CAAA;AACnC,OAAO,EAAE,IAAI,EAAE,cAAc,EAAE,MAAM,8BAA8B,CAAA;AACnE,OAAO,EAAE,cAAc,EAAE,aAAa,EAAE,MAAM,yBAAyB,CAAA;AACvE,OAAO,EAAe,KAAK,EAAE,MAAM,yBAAyB,CAAA;AAG5D,OAAO,EAAE,cAAc,EAAE,MAAM,4BAA4B,CAAA;AAE3D,OAAO,EAAE,QAAQ,EAAE,MAAM,uBAAuB,CAAA;AAYhD,MAAM,OAAO,mCAAmC;IAC/C,2BAA2B,CAAiB;IAE5C,YAAY,KAAsD;QACjE,IAAI,CAAC,2BAA2B,GAAG,MAAM,CAAU,KAAK,CAAC,CAAA;IAC1D,CAAC;IAED,IAAI,CAAC,KAAsD;QAC1D,MAAM,EAAE,aAAa,EAAE,cAAc,EAAE,gBAAgB,EAAE,yBAAyB,EAAE,GAAG,KAAK,CAAC,KAAK,CAAA;QAClG,OAAO,IAAI,CAAC,gCAAgC,CAAC,yBAAyB,EAAE,aAAa,EAAE,cAAc,EAAE,gBAAgB,CAAC,CAAA;IACzH,CAAC;IAED,gCAAgC,CAC/B,yBAA0D,EAC1D,aAA4B,EAC5B,cAA2D,EAC3D,gBAA6D;QAE7D,OAAO;YACN,CAAC,CAAC,4CAA4C,EAAE;gBAC/C,CAAC,CAAC,KAAK,EAAE,IAAI,CAAC,GAAG,CAAC,gCAAgC,CAAC,CAAC;gBACpD,CAAC,CAAC,cAAc,EAAE;oBACjB,KAAK,EAAE,aAAa;oBACpB,QAAQ,EAAE,IAAI,CAAC,2BAA2B,EAAE;oBAC5C,gBAAgB,EAAE,IAAI,CAAC,2BAA2B;iBAClD,CAAC;aACF,CAAC;YACF,CAAC,CACA,aAAa,EACb;gBACC,QAAQ,EAAE,IAAI,CAAC,2BAA2B,EAAE;aAC5C,EACD,CAAC,CAAC,KAAK,EAAE;gBACR,aAAa,EAAE,CAAC,gBAAgB,EAAE,eAAe,CAAC;gBAClD,YAAY,EAAE,sGAA0C;gBACxD,sBAAsB,EAAE,IAAI;gBAC5B,cAAc,EAAE;oBACf,KAAK,EAAE,YAAY;oBACnB,KAAK,EAAE,GAAG,EAAE;wBACX,aAAa,EAAE,CAAA;oBAChB,CAAC;oBACD,IAAI,uBAAW;oBACf,IAAI,4BAAoB;iBACxB;gBACD,KAAK,EAAE,yBAAyB,CAAC,GAAG,CAAC,CAAC,QAAQ,EAAE,EAAE;oBACjD,MAAM,YAAY,GAAiB,QAAQ,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAA;oBAC9D,MAAM,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC,MAAM,CAAC,CAAA;oBAC9D,OAAO;wBACN,KAAK,EAAE,CAAC,QAAQ,EAAE,QAAQ,CAAC,OAAO,CAAC;wBACnC,iBAAiB,EAAE,cAAc,CAAC;4BACjC,eAAe,EAAE;gCAChB,KAAK,EAAE,aAAa;gCACpB,IAAI,yBAAY;gCAChB,IAAI,4BAAoB;6BACxB;4BACD,UAAU,EAAE,GAAG,EAAE,CAAC;gCACjB;oCACC,KAAK,EAAE,aAAa;oCACpB,KAAK,EAAE,GAAG,EAAE,CAAC,cAAc,CAAC,QAAQ,CAAC;iCACrC;gCACD;oCACC,KAAK,EAAE,eAAe;oCACtB,KAAK,EAAE,GAAG,EAAE,CAAC,gBAAgB,CAAC,QAAQ,CAAC;iCACvC;6BACD;yBACD,CAAC;qBACF,CAAA;gBACF,CAAC,CAAC;aACF,CAAC,CACF;YACD,CAAC,CAAC,QAAQ,EAAE,IAAI,CAAC,GAAG,CAAC,kCAAkC,CAAC,CAAC;SACzD,CAAA;IACF,CAAC;CACD","sourcesContent":["import m, { Children, Component, Vnode } from \"mithril\"\nimport stream from \"mithril/stream\"\nimport { lang, languageByCode } from \"../../misc/LanguageViewModel\"\nimport { ExpanderButton, ExpanderPanel } from \"../../gui/base/Expander\"\nimport { ColumnWidth, Table } from \"../../gui/base/Table.js\"\nimport { ButtonType } from \"../../gui/base/Button.js\"\nimport { Icons } from \"../../gui/base/icons/Icons\"\nimport { attachDropdown } from \"../../gui/base/Dropdown.js\"\nimport type { NotificationMailTemplate } from \"../../api/entities/sys/TypeRefs.js\"\nimport { downcast } from \"@tutao/tutanota-utils\"\nimport type { LanguageCode } from \"../../misc/LanguageViewModel\"\nimport Stream from \"mithril/stream\"\nimport { ButtonSize } from \"../../gui/base/ButtonSize.js\"\n\nexport type WhitelabelNotificationEmailSettingsAttrs = {\n\tnotificationMailTemplates: Array<NotificationMailTemplate>\n\tonAddTemplate: () => unknown\n\tonEditTemplate: (arg0: NotificationMailTemplate) => unknown\n\tonRemoveTemplate: (arg0: NotificationMailTemplate) => unknown\n}\n\nexport class WhitelabelNotificationEmailSettings implements Component<WhitelabelNotificationEmailSettingsAttrs> {\n\t_notificationEmailsExpanded: Stream<boolean>\n\n\tconstructor(vnode: Vnode<WhitelabelNotificationEmailSettingsAttrs>) {\n\t\tthis._notificationEmailsExpanded = stream<boolean>(false)\n\t}\n\n\tview(vnode: Vnode<WhitelabelNotificationEmailSettingsAttrs>): Children {\n\t\tconst { onAddTemplate, onEditTemplate, onRemoveTemplate, notificationMailTemplates } = vnode.attrs\n\t\treturn this._renderNotificationEmailSettings(notificationMailTemplates, onAddTemplate, onEditTemplate, onRemoveTemplate)\n\t}\n\n\t_renderNotificationEmailSettings(\n\t\tnotificationMailTemplates: Array<NotificationMailTemplate>,\n\t\tonAddTemplate: () => unknown,\n\t\tonEditTemplate: (arg0: NotificationMailTemplate) => unknown,\n\t\tonRemoveTemplate: (arg0: NotificationMailTemplate) => unknown,\n\t): Children {\n\t\treturn [\n\t\t\tm(\".flex-space-between.items-center.mt-l.mb-s\", [\n\t\t\t\tm(\".h4\", lang.get(\"customNotificationEmails_label\")),\n\t\t\t\tm(ExpanderButton, {\n\t\t\t\t\tlabel: \"show_action\",\n\t\t\t\t\texpanded: this._notificationEmailsExpanded(),\n\t\t\t\t\tonExpandedChange: this._notificationEmailsExpanded,\n\t\t\t\t}),\n\t\t\t]),\n\t\t\tm(\n\t\t\t\tExpanderPanel,\n\t\t\t\t{\n\t\t\t\t\texpanded: this._notificationEmailsExpanded(),\n\t\t\t\t},\n\t\t\t\tm(Table, {\n\t\t\t\t\tcolumnHeading: [\"language_label\", \"subject_label\"],\n\t\t\t\t\tcolumnWidths: [ColumnWidth.Largest, ColumnWidth.Largest],\n\t\t\t\t\tshowActionButtonColumn: true,\n\t\t\t\t\taddButtonAttrs: {\n\t\t\t\t\t\ttitle: \"add_action\",\n\t\t\t\t\t\tclick: () => {\n\t\t\t\t\t\t\tonAddTemplate()\n\t\t\t\t\t\t},\n\t\t\t\t\t\ticon: Icons.Add,\n\t\t\t\t\t\tsize: ButtonSize.Compact,\n\t\t\t\t\t},\n\t\t\t\t\tlines: notificationMailTemplates.map((template) => {\n\t\t\t\t\t\tconst languageCode: LanguageCode = downcast(template.language)\n\t\t\t\t\t\tconst langName = lang.get(languageByCode[languageCode].textId)\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tcells: [langName, template.subject],\n\t\t\t\t\t\t\tactionButtonAttrs: attachDropdown({\n\t\t\t\t\t\t\t\tmainButtonAttrs: {\n\t\t\t\t\t\t\t\t\ttitle: \"edit_action\",\n\t\t\t\t\t\t\t\t\ticon: Icons.Edit,\n\t\t\t\t\t\t\t\t\tsize: ButtonSize.Compact,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tchildAttrs: () => [\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tlabel: \"edit_action\",\n\t\t\t\t\t\t\t\t\t\tclick: () => onEditTemplate(template),\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tlabel: \"remove_action\",\n\t\t\t\t\t\t\t\t\t\tclick: () => onRemoveTemplate(template),\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t}\n\t\t\t\t\t}),\n\t\t\t\t}),\n\t\t\t),\n\t\t\tm(\".small\", lang.get(\"customNotificationEmailsHelp_msg\")),\n\t\t]\n\t}\n}\n"]}