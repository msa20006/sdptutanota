{"version":3,"file":"InfoBanner.js","sourceRoot":"","sources":["../../../../../src/common/gui/base/InfoBanner.ts"],"names":[],"mappings":"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","sourcesContent":["import { AllIcons, Icon } from \"./Icon.js\"\nimport m, { Children, Component, Vnode } from \"mithril\"\nimport { theme } from \"../theme.js\"\nimport type { InfoLink, TranslationKey } from \"../../misc/LanguageViewModel.js\"\nimport { lang } from \"../../misc/LanguageViewModel.js\"\nimport type { ButtonAttrs } from \"./Button.js\"\nimport { Button, ButtonType } from \"./Button.js\"\nimport { NavButton } from \"./NavButton.js\"\nimport type { lazy } from \"@tutao/tutanota-utils\"\nimport { isNotNull } from \"@tutao/tutanota-utils\"\nimport { Icons } from \"./icons/Icons.js\"\nimport { px, size } from \"../size.js\"\n\nconst WARNING_RED = \"#ca0606\"\n\nexport const enum BannerType {\n\tInfo = \"info\",\n\tWarning = \"warning\",\n}\n\nexport type BannerButtonAttrs = Omit<ButtonAttrs, \"type\">\n\nexport interface InfoBannerAttrs {\n\tmessage: TranslationKey | lazy<Children>\n\ticon: AllIcons\n\thelpLink?: InfoLink | null\n\tbuttons: ReadonlyArray<BannerButtonAttrs | null>\n\ttype?: BannerType\n}\n\n/**\n * A low profile banner with a message and 0 or more buttons\n */\nexport class InfoBanner implements Component<InfoBannerAttrs> {\n\tview(vnode: Vnode<InfoBannerAttrs>): Children {\n\t\tconst { message, icon, helpLink, buttons, type } = vnode.attrs\n\t\t// Adjust the top and bottom spacing because the buttons have a minimum height of 44px.\n\t\t// This way the clickable area of the button overlaps with the text and the border a bit without having\n\t\t// too much empty space\n\t\tconst buttonContainerStyle =\n\t\t\thelpLink != null || buttons.length > 0\n\t\t\t\t? {\n\t\t\t\t\t\tmarginTop: \"-10px\",\n\t\t\t\t\t\tmarginBottom: \"-6px\",\n\t\t\t\t  }\n\t\t\t\t: undefined\n\t\treturn m(\n\t\t\t\".center-vertically.border-bottom.pr-s.pl.border-radius.mt-xs\",\n\t\t\t{\n\t\t\t\tstyle: {\n\t\t\t\t\tborder: `solid 2px ${type === BannerType.Warning ? WARNING_RED : theme.content_border}`,\n\t\t\t\t\t// keep the distance to the bottom of the banner the same in the case that buttons aren't present\n\t\t\t\t\tminHeight: buttons.length > 0 ? undefined : px(37),\n\t\t\t\t},\n\t\t\t},\n\t\t\t[\n\t\t\t\tm(\".mt-s.mr-s.abs\", this.renderIcon(icon, type ?? null)), // absolute position makes the icon fixed to the top left corner of the banner\n\t\t\t\tm(\n\t\t\t\t\t\"\",\n\t\t\t\t\t{ style: { \"margin-left\": px(size.icon_size_large + 1) } }, // allow room for the icon\n\t\t\t\t\t[\n\t\t\t\t\t\tm(\".mr.pt-s.pb-s\", typeof message === \"function\" ? message() : m(\".small.text-break\", lang.get(message))),\n\t\t\t\t\t\tm(\".flex.ml-negative-s\", { style: buttonContainerStyle }, [this.renderButtons(buttons), this.renderHelpLink(helpLink)]),\n\t\t\t\t\t],\n\t\t\t\t),\n\t\t\t],\n\t\t)\n\t}\n\n\trenderIcon(icon: AllIcons, type: BannerType | null): Children {\n\t\treturn m(Icon, {\n\t\t\ticon,\n\t\t\tstyle: {\n\t\t\t\tfill: type === BannerType.Warning ? WARNING_RED : theme.content_button,\n\t\t\t\tdisplay: \"block\",\n\t\t\t},\n\t\t})\n\t}\n\n\trenderButtons(buttons: ReadonlyArray<BannerButtonAttrs | null>): Children {\n\t\tif (buttons.length === 0) return null\n\t\treturn m(\n\t\t\t\".small.flex.row\",\n\t\t\tbuttons.filter(isNotNull).map((attrs) => m(Button, { ...attrs, type: ButtonType.Secondary })),\n\t\t)\n\t}\n\n\trenderHelpLink(helpLink?: InfoLink | null): Children | null {\n\t\tif (helpLink == null) return null\n\n\t\treturn [\n\t\t\t// Push the help button all the way to the right\n\t\t\tm(\".flex-grow\"),\n\t\t\tm(\n\t\t\t\t\".button-content\",\n\t\t\t\t{\n\t\t\t\t\tstyle: {\n\t\t\t\t\t\tmarginRight: \"-10px\",\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tm(NavButton, {\n\t\t\t\t\ticon: () => Icons.QuestionMark,\n\t\t\t\t\thref: helpLink,\n\t\t\t\t\tsmall: true,\n\t\t\t\t\thideLabel: true,\n\t\t\t\t\tcentred: true,\n\t\t\t\t\tlabel: \"help_label\",\n\t\t\t\t}),\n\t\t\t),\n\t\t]\n\t}\n}\n"]}