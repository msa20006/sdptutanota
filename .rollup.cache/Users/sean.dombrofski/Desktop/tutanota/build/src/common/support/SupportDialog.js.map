{"version":3,"file":"SupportDialog.js","sourceRoot":"","sources":["../../../../src/common/support/SupportDialog.ts"],"names":[],"mappings":"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","sourcesContent":["import m from \"mithril\"\nimport { assertMainOrNode, isWebClient } from \"../api/common/Env\"\nimport { LoginController } from \"../api/main/LoginController.js\"\nimport Stream from \"mithril/stream\"\nimport { SupportCategory, SupportDataTypeRef, SupportTopic } from \"../api/entities/tutanota/TypeRefs.js\"\nimport { MultiPageDialog } from \"../gui/dialogs/MultiPageDialog.js\"\nimport { SupportLandingPage } from \"./pages/SupportLandingPage.js\"\nimport { locator } from \"../api/main/CommonLocator.js\"\nimport { SupportCategoryPage } from \"./pages/SupportCategoryPage.js\"\nimport { SupportTopicPage } from \"./pages/SupportTopicPage.js\"\nimport { ContactSupportPage } from \"./pages/ContactSupportPage.js\"\nimport { SupportSuccessPage } from \"./pages/SupportSuccessPage.js\"\nimport { ButtonType } from \"../gui/base/Button.js\"\nimport { Keys } from \"../api/common/TutanotaConstants.js\"\nimport { HtmlEditor } from \"../gui/editor/HtmlEditor.js\"\nimport { DataFile } from \"../api/common/DataFile.js\"\nimport { EmailSupportUnavailablePage } from \"./pages/EmailSupportUnavailablePage.js\"\nimport { Dialog } from \"../gui/base/Dialog.js\"\nimport { client } from \"../misc/ClientDetector\"\nimport { SupportVisibilityMask } from \"./SupportVisibilityMask\"\nimport { SupportRequestSentPage } from \"./pages/SupportRequestSentPage.js\"\nimport { lang } from \"../misc/LanguageViewModel.js\"\nimport { CacheMode } from \"../api/worker/rest/EntityRestClient.js\"\n\nexport interface SupportDialogState {\n\tcanHaveEmailSupport: boolean\n\tselectedCategory: Stream<SupportCategory | null>\n\tselectedTopic: Stream<SupportTopic | null>\n\tcategories: SupportCategory[]\n\thtmlEditor: HtmlEditor\n\tshouldIncludeLogs: Stream<boolean>\n\tlogs: Stream<DataFile[]>\n}\n\nassertMainOrNode()\n\nenum SupportPages {\n\tCATEGORIES,\n\tCATEGORY_DETAIL,\n\tTOPIC_DETAIL,\n\tCONTACT_SUPPORT,\n\tSUPPORT_REQUEST_SENT,\n\tEMAIL_SUPPORT_BEHIND_PAYWALL,\n\tSOLUTION_WAS_HELPFUL,\n}\n\nfunction isEnabled(visibility: number, mask: SupportVisibilityMask) {\n\treturn !!(visibility & mask)\n}\n\nexport async function showSupportDialog(logins: LoginController) {\n\tconst supportData = await locator.entityClient.load(SupportDataTypeRef, \"--------1---\", { cacheMode: CacheMode.WriteOnly })\n\n\tconst categories = supportData.categories\n\n\tfor (const key in supportData.categories) {\n\t\tconst filteredTopics: SupportTopic[] = []\n\t\tconst supportCategory = categories[key]\n\t\tfor (const topic of supportCategory.topics) {\n\t\t\tconst visibility = Number(topic.visibility)\n\n\t\t\tconst meetsPlatform =\n\t\t\t\t(isEnabled(visibility, SupportVisibilityMask.TutaCalendarMobile) && client.isCalendarApp()) ||\n\t\t\t\t(isEnabled(visibility, SupportVisibilityMask.TutaMailMobile) && client.isMailApp()) ||\n\t\t\t\t(isEnabled(visibility, SupportVisibilityMask.DesktopOrWebApp) && (client.isDesktopDevice() || isWebClient()))\n\n\t\t\tconst isFreeAccount = !locator.logins.getUserController().isPaidAccount()\n\t\t\tconst meetsCustomerStatus =\n\t\t\t\t(isEnabled(visibility, SupportVisibilityMask.FreeUsers) && isFreeAccount) ||\n\t\t\t\t(isEnabled(visibility, SupportVisibilityMask.PaidUsers) && !isFreeAccount)\n\n\t\t\tif (meetsPlatform && meetsCustomerStatus) {\n\t\t\t\tfilteredTopics.push(topic)\n\t\t\t}\n\t\t}\n\n\t\tsupportCategory.topics = filteredTopics\n\t}\n\n\tconst data: SupportDialogState = {\n\t\tcanHaveEmailSupport: logins.isInternalUserLoggedIn() && logins.getUserController().isPaidAccount(),\n\t\tselectedCategory: Stream<SupportCategory | null>(null),\n\t\tselectedTopic: Stream<SupportTopic | null>(null),\n\t\tcategories: supportData.categories.filter((cat) => cat.topics.length > 0),\n\t\thtmlEditor: new HtmlEditor().setMinHeight(250).setEnabled(true),\n\t\tshouldIncludeLogs: Stream(true),\n\t\tlogs: Stream([]),\n\t}\n\n\tconst multiPageDialog: Dialog = new MultiPageDialog<SupportPages>(SupportPages.CATEGORIES)\n\t\t.buildDialog(\n\t\t\t(currentPage, dialog, navigateToPage, _) => {\n\t\t\t\tswitch (currentPage) {\n\t\t\t\t\tcase SupportPages.CATEGORY_DETAIL:\n\t\t\t\t\t\treturn m(SupportCategoryPage, {\n\t\t\t\t\t\t\tdata,\n\t\t\t\t\t\t\tgoToContactSupport: () => {\n\t\t\t\t\t\t\t\tif (data.canHaveEmailSupport) {\n\t\t\t\t\t\t\t\t\tnavigateToPage(SupportPages.CONTACT_SUPPORT)\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tnavigateToPage(SupportPages.EMAIL_SUPPORT_BEHIND_PAYWALL)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tgoToTopicDetailPage: () => navigateToPage(SupportPages.TOPIC_DETAIL),\n\t\t\t\t\t\t})\n\t\t\t\t\tcase SupportPages.TOPIC_DETAIL:\n\t\t\t\t\t\treturn m(SupportTopicPage, {\n\t\t\t\t\t\t\tdata,\n\t\t\t\t\t\t\tdialog,\n\t\t\t\t\t\t\tgoToSolutionWasHelpfulPage: () => {\n\t\t\t\t\t\t\t\tnavigateToPage(SupportPages.SOLUTION_WAS_HELPFUL)\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tgoToContactSupportPage: () => {\n\t\t\t\t\t\t\t\tif (data.canHaveEmailSupport) {\n\t\t\t\t\t\t\t\t\tnavigateToPage(SupportPages.CONTACT_SUPPORT)\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tnavigateToPage(SupportPages.EMAIL_SUPPORT_BEHIND_PAYWALL)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t})\n\t\t\t\t\tcase SupportPages.CONTACT_SUPPORT:\n\t\t\t\t\t\treturn m(ContactSupportPage, { data, goToSuccessPage: () => navigateToPage(SupportPages.SUPPORT_REQUEST_SENT) })\n\t\t\t\t\tcase SupportPages.SOLUTION_WAS_HELPFUL:\n\t\t\t\t\t\treturn m(SupportSuccessPage)\n\t\t\t\t\tcase SupportPages.SUPPORT_REQUEST_SENT: {\n\t\t\t\t\t\treturn m(SupportRequestSentPage)\n\t\t\t\t\t}\n\t\t\t\t\tcase SupportPages.CATEGORIES:\n\t\t\t\t\t\treturn m(SupportLandingPage, {\n\t\t\t\t\t\t\tdata,\n\t\t\t\t\t\t\ttoCategoryDetail: () => navigateToPage(SupportPages.CATEGORY_DETAIL),\n\t\t\t\t\t\t\tgoToContactSupport: () => {\n\t\t\t\t\t\t\t\tif (data.canHaveEmailSupport) {\n\t\t\t\t\t\t\t\t\tnavigateToPage(SupportPages.CONTACT_SUPPORT)\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tnavigateToPage(SupportPages.EMAIL_SUPPORT_BEHIND_PAYWALL)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t})\n\t\t\t\t\tcase SupportPages.EMAIL_SUPPORT_BEHIND_PAYWALL:\n\t\t\t\t\t\treturn m(EmailSupportUnavailablePage, {\n\t\t\t\t\t\t\tdata,\n\t\t\t\t\t\t\tgoToContactSupportPage: () => {\n\t\t\t\t\t\t\t\tnavigateToPage(SupportPages.CONTACT_SUPPORT)\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tgetPageTitle: (_) => {\n\t\t\t\t\treturn { testId: \"back_action\", text: lang.get(\"supportMenu_label\") }\n\t\t\t\t},\n\t\t\t\tgetLeftAction: (currentPage, dialog, navigateToPage, goBack) => {\n\t\t\t\t\tswitch (currentPage) {\n\t\t\t\t\t\tcase SupportPages.CATEGORIES:\n\t\t\t\t\t\t\treturn { type: ButtonType.Secondary, click: () => dialog.close(), label: \"close_alt\", title: \"close_alt\" }\n\t\t\t\t\t\tcase SupportPages.TOPIC_DETAIL:\n\t\t\t\t\t\tcase SupportPages.CATEGORY_DETAIL:\n\t\t\t\t\t\tcase SupportPages.EMAIL_SUPPORT_BEHIND_PAYWALL:\n\t\t\t\t\t\t\treturn { type: ButtonType.Secondary, click: () => goBack(), label: \"back_action\", title: \"back_action\" }\n\t\t\t\t\t\tcase SupportPages.CONTACT_SUPPORT:\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\ttype: ButtonType.Secondary,\n\t\t\t\t\t\t\t\tclick: async () => {\n\t\t\t\t\t\t\t\t\tif (data.htmlEditor.getTrimmedValue().length > 10) {\n\t\t\t\t\t\t\t\t\t\tconst confirmed = await Dialog.confirm({\n\t\t\t\t\t\t\t\t\t\t\ttestId: \"close_alt\",\n\t\t\t\t\t\t\t\t\t\t\ttext: lang.get(\"supportBackLostRequest_msg\"),\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\tif (confirmed) {\n\t\t\t\t\t\t\t\t\t\t\tgoBack()\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tgoBack()\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tlabel: \"back_action\",\n\t\t\t\t\t\t\t\ttitle: \"back_action\",\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\tcase SupportPages.SOLUTION_WAS_HELPFUL:\n\t\t\t\t\t\tcase SupportPages.SUPPORT_REQUEST_SENT:\n\t\t\t\t\t\t\treturn { type: ButtonType.Secondary, click: () => dialog.close(), label: \"close_alt\", title: \"close_alt\" }\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tgetRightAction: (currentPage, dialog, _, __) => {\n\t\t\t\t\tif (currentPage === SupportPages.EMAIL_SUPPORT_BEHIND_PAYWALL) {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\ttype: ButtonType.Secondary,\n\t\t\t\t\t\t\tlabel: \"close_alt\",\n\t\t\t\t\t\t\ttitle: \"close_alt\",\n\t\t\t\t\t\t\tclick: () => {\n\t\t\t\t\t\t\t\tdialog.close()\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t},\n\t\t)\n\t\t.addShortcut({\n\t\t\thelp: \"close_alt\",\n\t\t\tkey: Keys.ESC,\n\t\t\texec: () => multiPageDialog.close(),\n\t\t})\n\t\t.show()\n}\n\nexport function getLocalisedCategoryName(category: SupportCategory, languageTag: string): string {\n\treturn languageTag.includes(\"de\") ? category.nameDE : category.nameEN\n}\n\nexport function getLocalisedCategoryIntroduction(category: SupportCategory, languageTag: string): string {\n\treturn languageTag.includes(\"de\") ? category.introductionDE : category.introductionEN\n}\n\nexport function getLocalisedTopicIssue(topic: SupportTopic, languageTag: string): string {\n\treturn languageTag.includes(\"de\") ? topic.issueDE : topic.issueEN\n}\n"]}