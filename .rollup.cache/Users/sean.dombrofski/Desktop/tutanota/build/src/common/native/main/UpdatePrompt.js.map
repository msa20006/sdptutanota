{"version":3,"file":"UpdatePrompt.js","sourceRoot":"","sources":["../../../../../src/common/native/main/UpdatePrompt.ts"],"names":[],"mappings":"AAAA,OAAO,CAAC,MAAM,SAAS,CAAA;AACvB,OAAO,EAAE,IAAI,EAAE,MAAM,8BAA8B,CAAA;AAEnD,OAAO,EAAE,gBAAgB,EAAE,MAAM,sBAAsB,CAAA;AACvD,OAAO,EAAE,IAAI,EAAE,MAAM,oCAAoC,CAAA;AAGzD,gBAAgB,EAAE,CAAA;AAElB,MAAM,CAAC,KAAK,UAAU,kBAAkB,CAAC,qBAAqC;IAC7E,MAAM,UAAU,GAAG,MAAM,qBAAqB,CAAC,aAAa,EAAE,CAAA;IAE9D,IAAI,UAAU,EAAE,CAAC;QAChB,IAAI,OAAO,GAAG;YACb,IAAI,EAAE,GAAG,EAAE,CACV,CAAC,CACA,EAAE,EACF,IAAI,CAAC,GAAG,CAAC,uBAAuB,EAAE;gBACjC,WAAW,EAAE,UAAU,CAAC,OAAO;aAC/B,CAAC,CACF;SACF,CAAA;QACD,IAAI,CACH,OAAO,EACP;YACC,KAAK,EAAE,iBAAiB;SACxB,EACD;YACC;gBACC,KAAK,EAAE,mBAAmB;gBAC1B,KAAK,EAAE,GAAG,EAAE,CAAC,qBAAqB,CAAC,YAAY,EAAE;gBACjD,IAAI,oCAAoB;aACxB;SACD,CACD,CAAA;IACF,CAAC;AACF,CAAC","sourcesContent":["import m from \"mithril\"\nimport { lang } from \"../../misc/LanguageViewModel\"\nimport { ButtonType } from \"../../gui/base/Button.js\"\nimport { assertMainOrNode } from \"../../api/common/Env\"\nimport { show } from \"../../gui/base/NotificationOverlay\"\nimport { SettingsFacade } from \"../common/generatedipc/SettingsFacade.js\"\n\nassertMainOrNode()\n\nexport async function registerForUpdates(desktopSettingsFacade: SettingsFacade) {\n\tconst updateInfo = await desktopSettingsFacade.getUpdateInfo()\n\n\tif (updateInfo) {\n\t\tlet message = {\n\t\t\tview: () =>\n\t\t\t\tm(\n\t\t\t\t\t\"\",\n\t\t\t\t\tlang.get(\"updateAvailable_label\", {\n\t\t\t\t\t\t\"{version}\": updateInfo.version,\n\t\t\t\t\t}),\n\t\t\t\t),\n\t\t}\n\t\tshow(\n\t\t\tmessage,\n\t\t\t{\n\t\t\t\tlabel: \"postpone_action\",\n\t\t\t},\n\t\t\t[\n\t\t\t\t{\n\t\t\t\t\tlabel: \"installNow_action\",\n\t\t\t\t\tclick: () => desktopSettingsFacade.manualUpdate(),\n\t\t\t\t\ttype: ButtonType.Primary,\n\t\t\t\t},\n\t\t\t],\n\t\t)\n\t}\n}\n"]}