{"version":3,"file":"LeavingUserSurveyCategoryPage.js","sourceRoot":"","sources":["../../../../src/common/subscription/LeavingUserSurveyCategoryPage.ts"],"names":[],"mappings":"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","sourcesContent":["import { emitWizardEvent, WizardEventType, WizardPageAttrs, WizardPageN } from \"../gui/base/WizardDialog.js\"\nimport { LeavingUserSurveyData } from \"./LeavingUserSurveyWizard.js\"\nimport m, { Vnode, VnodeDOM } from \"mithril\"\nimport { DropDownSelector, type DropDownSelectorAttrs } from \"../gui/base/DropDownSelector.js\"\nimport { lang, type TranslationKey } from \"../misc/LanguageViewModel.js\"\nimport { theme } from \"../gui/theme.js\"\nimport { SetupLeavingUserSurveyPage } from \"./SetupLeavingUserSurveyPage.js\"\n\nexport class LeavingUserSurveyCategoryPage implements WizardPageN<LeavingUserSurveyData> {\n\tprivate _dom: HTMLElement | null = null\n\n\toncreate(vnode: VnodeDOM<WizardPageAttrs<LeavingUserSurveyData>>) {\n\t\tthis._dom = vnode.dom as HTMLElement\n\t}\n\n\tview(vnode: Vnode<WizardPageAttrs<LeavingUserSurveyData>>) {\n\t\treturn m(\n\t\t\tSetupLeavingUserSurveyPage,\n\t\t\t{\n\t\t\t\tcloseAction: () => this.showNextPage(),\n\t\t\t\tnextButtonLabel: \"next_action\",\n\t\t\t\tnextButtonEnabled: !vnode.attrs.data.category,\n\t\t\t\timage: \"main\",\n\t\t\t\tmainMessage: \"surveyMainMessageDelete_label\",\n\t\t\t\tsecondaryMessage: vnode.attrs.data.showDowngradeMessage ? \"surveySecondaryMessageDowngrade_label\" : \"surveySecondaryMessageDelete_label\",\n\t\t\t},\n\t\t\t[\n\t\t\t\tm(DropDownSelector, {\n\t\t\t\t\tstyle: { border: `2px solid ${theme.content_border}`, borderRadius: \"6px\", padding: \"4px 8px\" },\n\t\t\t\t\tdoShowBorder: false,\n\t\t\t\t\tlabel: \"surveyUnhappy_label\",\n\t\t\t\t\titems: this.getCategoryDropdownItems(vnode.attrs.data.showPriceCategory),\n\t\t\t\t\tselectedValue: vnode.attrs.data.category,\n\t\t\t\t\tselectionChangedHandler: (category) => {\n\t\t\t\t\t\tvnode.attrs.data.category = category\n\t\t\t\t\t},\n\t\t\t\t\tdropdownWidth: 350,\n\t\t\t\t} satisfies DropDownSelectorAttrs<NumberString | null>),\n\t\t\t\t// this currently \"mocks\" the helplabel of the dropdown. We have to take another look once we decide on applying the dropdown styling to the entire app.\n\t\t\t\tm(\".mlr-s.mt-xs\", m(\"small\", lang.get(\"cancellationConfirmation_msg\"))),\n\t\t\t],\n\t\t)\n\t}\n\n\tprivate getCategoryDropdownItems(showPriceCategory: boolean) {\n\t\tconst items = [\n\t\t\t{\n\t\t\t\tname: lang.get(\"experienceSamplingAnswer_label\"),\n\t\t\t\tvalue: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: lang.get(\"surveyPrice_label\"),\n\t\t\t\tvalue: \"0\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: lang.get(\"surveyAccountProblems_label\"),\n\t\t\t\tvalue: \"1\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: lang.get(\"surveyMissingFeature_label\"),\n\t\t\t\tvalue: \"2\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: lang.get(\"surveyFeatureDesignProblems_label\"),\n\t\t\t\tvalue: \"3\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: lang.get(\"surveyOtherReason_label\"),\n\t\t\t\tvalue: \"4\",\n\t\t\t},\n\t\t]\n\t\tif (!showPriceCategory) items.splice(1, 1) // remove price category\n\t\treturn items\n\t}\n\n\tshowNextPage(): void {\n\t\tif (this._dom) {\n\t\t\temitWizardEvent(this._dom, WizardEventType.SHOW_NEXT_PAGE)\n\t\t}\n\t}\n}\n\nexport class LeavingUserSurveyPageAttrs implements WizardPageAttrs<LeavingUserSurveyData> {\n\tdata: LeavingUserSurveyData\n\n\tconstructor(leavingUserSurveyData: LeavingUserSurveyData) {\n\t\tthis.data = leavingUserSurveyData\n\t}\n\n\theaderTitle(): TranslationKey {\n\t\treturn \"survey_label\"\n\t}\n\n\tnextAction(showErrorDialog: boolean): Promise<boolean> {\n\t\treturn Promise.resolve(this.data.category != null)\n\t}\n\n\tisSkipAvailable(): boolean {\n\t\treturn false\n\t}\n\n\tisEnabled(): boolean {\n\t\treturn true\n\t}\n}\n"]}