{"version":3,"file":"migration-0007.js","sourceRoot":"","sources":["../../../../../../src/common/desktop/config/migrations/migration-0007.ts"],"names":[],"mappings":"AACA,OAAO,EAAE,gBAAgB,EAAE,MAAM,kBAAkB,CAAA;AAGnD,MAAM,UAAU,GAAG;IAClB,IAAI,EAAE;QACL,CAAC,EAAE,GAAG;QACN,CAAC,EAAE,GAAG;QACN,KAAK,EAAE,IAAI;QACX,MAAM,EAAE,GAAG;KACX;IACD,UAAU,EAAE,KAAK;IACjB,KAAK,EAAE,CAAC;CACR,CAAA;AAED,KAAK,UAAU,OAAO,CAAC,SAAiB;IACvC,0BAA0B;IAC1B,8BAA8B;IAC9B,uCAAuC;IACvC,IAAI,SAAS,GAAG,SAAS,CAAC,gBAAgB,CAAC,UAAU,CAAiB,CAAA;IACtE,IAAI,SAAS,IAAI,IAAI,EAAE,CAAC;QACvB,SAAS,GAAG,UAAU,CAAA;IACvB,CAAC;SAAM,IAAI,SAAS,CAAC,IAAI,CAAC,KAAK,KAAK,GAAG,IAAI,SAAS,CAAC,IAAI,CAAC,MAAM,KAAK,GAAG,EAAE,CAAC;QAC1E,SAAS,CAAC,IAAI,CAAC,KAAK,GAAG,UAAU,CAAC,IAAI,CAAC,KAAK,CAAA;QAC5C,SAAS,CAAC,IAAI,CAAC,MAAM,GAAG,UAAU,CAAC,IAAI,CAAC,MAAM,CAAA;IAC/C,CAAC;IACD,MAAM,CAAC,MAAM,CAAC,SAAS,EAAE;QACxB,UAAU,EAAE,SAAS;QACrB,oBAAoB,EAAE,CAAC;KACvB,CAAC,CAAA;AACH,CAAC;AAED,MAAM,CAAC,MAAM,aAAa,GAAG,OAAO,CAAA;AACpC,MAAM,CAAC,MAAM,YAAY,GAAG,OAAO,CAAA","sourcesContent":["import type { Config } from \"../ConfigCommon\"\nimport { DesktopConfigKey } from \"../ConfigKeys.js\"\nimport { WindowBounds } from \"../../DesktopWindowManager.js\"\n\nconst newDefault = {\n\trect: {\n\t\tx: 200,\n\t\ty: 200,\n\t\twidth: 1200,\n\t\theight: 700,\n\t},\n\tfullscreen: false,\n\tscale: 1,\n}\n\nasync function migrate(oldConfig: Config): Promise<void> {\n\t// only migrate those that\n\t// * have the old default size\n\t// * don't have a value set (first run)\n\tlet oldBounds = oldConfig[DesktopConfigKey.lastBounds] as WindowBounds\n\tif (oldBounds == null) {\n\t\toldBounds = newDefault\n\t} else if (oldBounds.rect.width === 800 && oldBounds.rect.height === 600) {\n\t\toldBounds.rect.width = newDefault.rect.width\n\t\toldBounds.rect.height = newDefault.rect.height\n\t}\n\tObject.assign(oldConfig, {\n\t\tlastBounds: oldBounds,\n\t\tdesktopConfigVersion: 7,\n\t})\n}\n\nexport const migrateClient = migrate\nexport const migrateAdmin = migrate\n"]}