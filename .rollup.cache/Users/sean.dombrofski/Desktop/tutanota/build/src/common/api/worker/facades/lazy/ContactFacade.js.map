{"version":3,"file":"ContactFacade.js","sourceRoot":"","sources":["../../../../../../../src/common/api/worker/facades/lazy/ContactFacade.ts"],"names":[],"mappings":"AAEA,OAAO,EAAE,kBAAkB,EAAE,MAAM,wBAAwB,CAAA;AAC3D,OAAO,EAAE,kBAAkB,EAAE,MAAM,6CAA6C,CAAA;AAChF,OAAO,EAAE,WAAW,EAAE,MAAM,sCAAsC,CAAA;AAElE,kBAAkB,EAAE,CAAA;AAEpB,MAAM,OAAO,aAAa;IACI;IAA7B,YAA6B,YAA0B;QAA1B,iBAAY,GAAZ,YAAY,CAAc;IAAG,CAAC;IAE3D,KAAK,CAAC,iBAAiB,CAAC,QAAgC,EAAE,aAAiB;QAC1E,IAAI,CAAC;YACJ,MAAM,IAAI,CAAC,YAAY,CAAC,qBAAqB,CAAC,aAAa,EAAE,QAAQ,CAAC,CAAA;QACvE,CAAC;QAAC,OAAO,CAAC,EAAE,CAAC;YACZ,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,CAAA;YAChB,IAAI,CAAC,YAAY,kBAAkB,EAAE,CAAC;gBACrC,OAAO,CAAC,KAAK,CAAC,2BAA2B,EAAE,CAAC,CAAC,CAAA;gBAC7C,MAAM,IAAI,WAAW,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,+BAA+B,EAAE,CAAC,CAAC,eAAe,CAAC,MAAM,CAAC,CAAA;YAC9F,CAAC;YACD,MAAM,CAAC,CAAA;QACR,CAAC;IACF,CAAC;CACD","sourcesContent":["import type { Contact } from \"../../../entities/tutanota/TypeRefs.js\"\nimport { EntityClient } from \"../../../common/EntityClient.js\"\nimport { assertWorkerOrNode } from \"../../../common/Env.js\"\nimport { SetupMultipleError } from \"../../../common/error/SetupMultipleError.js\"\nimport { ImportError } from \"../../../common/error/ImportError.js\"\n\nassertWorkerOrNode()\n\nexport class ContactFacade {\n\tconstructor(private readonly entityClient: EntityClient) {}\n\n\tasync importContactList(contacts: ReadonlyArray<Contact>, contactListId: Id): Promise<void> {\n\t\ttry {\n\t\t\tawait this.entityClient.setupMultipleEntities(contactListId, contacts)\n\t\t} catch (e) {\n\t\t\tconsole.error(e)\n\t\t\tif (e instanceof SetupMultipleError) {\n\t\t\t\tconsole.error(\"Importing contacts failed\", e)\n\t\t\t\tthrow new ImportError(e.errors[0], \"Could not import all contacts\", e.failedInstances.length)\n\t\t\t}\n\t\t\tthrow e\n\t\t}\n\t}\n}\n"]}