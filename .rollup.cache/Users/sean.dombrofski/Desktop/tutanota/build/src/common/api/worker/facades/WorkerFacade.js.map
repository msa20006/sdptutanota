{"version":3,"file":"WorkerFacade.js","sourceRoot":"","sources":["../../../../../../src/common/api/worker/facades/WorkerFacade.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,eAAe,EAAE,WAAW,EAAE,MAAM,wBAAwB,CAAA;AAGrE;;;GAGG;AACH,MAAM,OAAO,YAAY;IACxB,KAAK,CAAC,wBAAwB;QAC7B,OAAO,WAAW,CAAC,eAAe,EAAE,CAAC,CAAA;IACtC,CAAC;IAED,KAAK,CAAC,MAAM;QACX,MAAM,MAAM,GAAG,IAAW,CAAA;QAC1B,MAAM,MAAM,GAAG,MAAM,CAAC,MAA4B,CAAA;QAElD,IAAI,MAAM,EAAE,CAAC;YACZ,OAAO,MAAM,CAAC,UAAU,EAAE,CAAA;QAC3B,CAAC;aAAM,CAAC;YACP,OAAO,EAAE,CAAA;QACV,CAAC;IACF,CAAC;IAED,KAAK,CAAC,MAAM,CAAC,IAAY;QACxB,MAAM,EAAE,MAAM,EAAE,GAAG,MAAM,MAAM,CAAC,gBAAgB,CAAC,CAAA;QACjD,OAAO,MAAM,CAAC,IAAI,CAAC,CAAA;IACpB,CAAC;CACD","sourcesContent":["import { aes256RandomKey, keyToBase64 } from \"@tutao/tutanota-crypto\"\nimport { Logger } from \"../../common/Logger.js\"\n\n/**\n *  Loose collection of functions that should be run on the worker side e.g. because they take too much time and don't belong anywhere else.\n *  (read: kitchen sink).\n */\nexport class WorkerFacade {\n\tasync generateSsePushIdentifer(): Promise<string> {\n\t\treturn keyToBase64(aes256RandomKey())\n\t}\n\n\tasync getLog(): Promise<string[]> {\n\t\tconst global = self as any\n\t\tconst logger = global.logger as Logger | undefined\n\n\t\tif (logger) {\n\t\t\treturn logger.getEntries()\n\t\t} else {\n\t\t\treturn []\n\t\t}\n\t}\n\n\tasync urlify(html: string): Promise<string> {\n\t\tconst { urlify } = await import(\"../Urlifier.js\")\n\t\treturn urlify(html)\n\t}\n}\n"]}