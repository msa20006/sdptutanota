{"version":3,"file":"LeavingUserSurveyWizard.js","sourceRoot":"","sources":["../../../../src/common/subscription/LeavingUserSurveyWizard.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,kBAAkB,EAAE,iBAAiB,EAAE,MAAM,6BAA6B,CAAA;AACnF,OAAO,EAAE,6BAA6B,EAAE,0BAA0B,EAAE,MAAM,oCAAoC,CAAA;AAC9G,OAAO,EAAE,KAAK,EAAE,MAAM,uBAAuB,CAAA;AAC7C,OAAO,EAAE,2BAA2B,EAAE,MAAM,kCAAkC,CAAA;AAY9E,MAAM,CAAC,KAAK,UAAU,2BAA2B,CAAC,iBAA0B,EAAE,oBAA6B;IAC1G,IAAI,QAAQ,GAAwB,IAAI,CAAA;IACxC,IAAI,MAAM,GAAkB,IAAI,CAAA;IAChC,IAAI,OAAO,GAAkB,IAAI,CAAA;IACjC,IAAI,SAAS,GAAY,KAAK,CAAA;IAE9B,MAAM,qBAAqB,GAA0B;QACpD,QAAQ;QACR,MAAM;QACN,OAAO;QACP,SAAS;QACT,iBAAiB;QACjB,oBAAoB;KACpB,CAAA;IAED,MAAM,WAAW,GAAG;QACnB,iBAAiB,CAAC,6BAA6B,EAAE,IAAI,0BAA0B,CAAC,qBAAqB,CAAC,CAAC;QACvG,iBAAiB,CAAC,2BAA2B,EAAE,IAAI,0BAA0B,CAAC,qBAAqB,CAAC,CAAC;KACrG,CAAA;IACD,MAAM,QAAQ,GAAG,KAAK,EAAyB,CAAA;IAE/C,MAAM,aAAa,GAAG,kBAAkB,CACvC,qBAAqB,EACrB,WAAW,EACX,KAAK,IAAI,EAAE;QACV,QAAQ,CAAC,OAAO,CAAC,qBAAqB,CAAC,CAAA;IACxC,CAAC,0CAED,mBAAmB,CACnB,CAAA;IAED,aAAa,CAAC,MAAM,CAAC,IAAI,EAAE,CAAA;IAC3B,OAAO,QAAQ,CAAC,OAAO,CAAA;AACxB,CAAC","sourcesContent":["import { createWizardDialog, wizardPageWrapper } from \"../gui/base/WizardDialog.js\"\nimport { LeavingUserSurveyCategoryPage, LeavingUserSurveyPageAttrs } from \"./LeavingUserSurveyCategoryPage.js\"\nimport { defer } from \"@tutao/tutanota-utils\"\nimport { LeavingUserSurveyReasonPage } from \"./LeavingUserSurveyReasonPage.js\"\nimport { DialogType } from \"../gui/base/Dialog.js\"\n\nexport type LeavingUserSurveyData = {\n\tcategory: NumberString | null\n\treason: NumberString | null\n\tdetails: string | null\n\tsubmitted: boolean // we need a separate submit flag, because the user might go back from page 2 and cancel the dialog, in which case the values will be set\n\tshowPriceCategory: boolean // whether the dropdown should include the 'price' category\n\tshowDowngradeMessage: boolean // whether the message displayed below the image should address a downgrading or deleting user\n}\n\nexport async function showLeavingUserSurveyWizard(showPriceCategory: boolean, showDowngradeMessage: boolean): Promise<LeavingUserSurveyData> {\n\tlet category: NumberString | null = null\n\tlet reason: string | null = null\n\tlet details: string | null = null\n\tlet submitted: boolean = false\n\n\tconst leavingUserSurveyData: LeavingUserSurveyData = {\n\t\tcategory,\n\t\treason,\n\t\tdetails,\n\t\tsubmitted,\n\t\tshowPriceCategory,\n\t\tshowDowngradeMessage,\n\t}\n\n\tconst wizardPages = [\n\t\twizardPageWrapper(LeavingUserSurveyCategoryPage, new LeavingUserSurveyPageAttrs(leavingUserSurveyData)),\n\t\twizardPageWrapper(LeavingUserSurveyReasonPage, new LeavingUserSurveyPageAttrs(leavingUserSurveyData)),\n\t]\n\tconst deferred = defer<LeavingUserSurveyData>()\n\n\tconst wizardBuilder = createWizardDialog(\n\t\tleavingUserSurveyData,\n\t\twizardPages,\n\t\tasync () => {\n\t\t\tdeferred.resolve(leavingUserSurveyData)\n\t\t},\n\t\tDialogType.EditLarge,\n\t\t\"surveySkip_action\",\n\t)\n\n\twizardBuilder.dialog.show()\n\treturn deferred.promise\n}\n"]}