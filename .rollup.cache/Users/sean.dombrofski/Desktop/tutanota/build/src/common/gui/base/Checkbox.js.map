{"version":3,"file":"Checkbox.js","sourceRoot":"","sources":["../../../../../src/common/gui/base/Checkbox.ts"],"names":[],"mappings":"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","sourcesContent":["import m, { Children, Component, Vnode } from \"mithril\"\nimport { BootIcons, BootIconsSvg } from \"./icons/BootIcons\"\nimport type { TranslationKey, MaybeTranslation } from \"../../misc/LanguageViewModel\"\nimport { lang } from \"../../misc/LanguageViewModel\"\nimport type { lazy } from \"@tutao/tutanota-utils\"\nimport { theme } from \"../theme.js\"\nimport { encodeSVG, getOperatingClasses } from \"./GuiUtils.js\"\n\nexport type CheckboxAttrs = {\n\tlabel: lazy<string | Children>\n\tchecked: boolean\n\tonChecked: (value: boolean) => unknown\n\tclass?: string\n\thelpLabel?: MaybeTranslation\n\tdisabled?: boolean\n}\n\nexport class Checkbox implements Component<CheckboxAttrs> {\n\tprivate focused: boolean = false\n\tprivate _domInput: HTMLElement | null = null\n\tprivate static readonly checkedIcon = encodeSVG(BootIconsSvg[BootIcons.CheckboxSelected])\n\tprivate static readonly uncheckedIcon = encodeSVG(BootIconsSvg[BootIcons.Checkbox])\n\n\tview(vnode: Vnode<CheckboxAttrs>): Children {\n\t\tconst a = vnode.attrs\n\t\tconst helpLabelText = lang.getTranslationText(a.helpLabel ? a.helpLabel : \"emptyString_msg\")\n\t\tconst helpLabel = a.helpLabel ? m(`small.block.content-fg${Checkbox.getBreakClass(helpLabelText)}`, helpLabelText) : []\n\t\tconst userClasses = a.class == null ? \"\" : \" \" + a.class\n\t\treturn m(\n\t\t\t`.pt`,\n\t\t\t{\n\t\t\t\t\"aria-disabled\": String(a.disabled),\n\t\t\t\tclass: getOperatingClasses(a.disabled, \"click flash\") + userClasses,\n\t\t\t\tonclick: (e: MouseEvent) => {\n\t\t\t\t\tif (e.target !== this._domInput) {\n\t\t\t\t\t\tthis.toggle(e, a) // event is bubbling in IE besides we invoke e.stopPropagation()\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t},\n\t\t\tm(\n\t\t\t\t`label${Checkbox.getBreakClass(a.label())}`,\n\t\t\t\t{\n\t\t\t\t\tclass: `${this.focused ? \"content-accent-fg\" : \"content-fg\"} ${getOperatingClasses(a.disabled, \"click\")}`,\n\t\t\t\t},\n\t\t\t\t[\n\t\t\t\t\tm(\"input[type=checkbox].icon.checkbox-override\", {\n\t\t\t\t\t\toncreate: (vnode) => (this._domInput = vnode.dom as HTMLElement),\n\t\t\t\t\t\tonchange: (e: Event) => this.toggle(e, a),\n\t\t\t\t\t\tchecked: a.checked,\n\t\t\t\t\t\tonfocus: () => (this.focused = true),\n\t\t\t\t\t\tonblur: () => (this.focused = false),\n\t\t\t\t\t\tclass: getOperatingClasses(a.disabled, \"click\"),\n\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\tcursor: a.disabled ? \"default\" : \"pointer\",\n\t\t\t\t\t\t\t\"background-color\": theme.content_accent,\n\t\t\t\t\t\t\t\"mask-image\": `url(\"${a.checked ? Checkbox.checkedIcon : Checkbox.uncheckedIcon}\")`,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdisabled: a.disabled,\n\t\t\t\t\t}),\n\t\t\t\t\ta.label(),\n\t\t\t\t\thelpLabel,\n\t\t\t\t],\n\t\t\t),\n\t\t)\n\t}\n\n\tprivate static getBreakClass(text: string | Children): string {\n\t\tif (typeof text !== \"string\" || text.includes(\" \")) {\n\t\t\treturn \".break-word\"\n\t\t} else {\n\t\t\treturn \".break-all\"\n\t\t}\n\t}\n\n\ttoggle(event: Event, attrs: CheckboxAttrs) {\n\t\tif (!attrs.disabled) {\n\t\t\tattrs.onChecked(!attrs.checked)\n\t\t}\n\n\t\tevent.stopPropagation()\n\n\t\tif (this._domInput) {\n\t\t\tthis._domInput.focus()\n\t\t}\n\t}\n}\n"]}