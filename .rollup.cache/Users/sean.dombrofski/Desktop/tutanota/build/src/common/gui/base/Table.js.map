{"version":3,"file":"Table.js","sourceRoot":"","sources":["../../../../../src/common/gui/base/Table.ts"],"names":[],"mappings":"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","sourcesContent":["import m, { Children, Component, Vnode } from \"mithril\"\nimport { lang, MaybeTranslation } from \"../../misc/LanguageViewModel\"\nimport { progressIcon } from \"./Icon\"\nimport { downcast, neverNull } from \"@tutao/tutanota-utils\"\nimport { createDropdown, DropdownButtonAttrs } from \"./Dropdown.js\"\nimport { Icons } from \"./icons/Icons\"\nimport type { ClickHandler } from \"./GuiUtils\"\nimport { assertMainOrNode } from \"../../api/common/Env\"\nimport { IconButton, IconButtonAttrs } from \"./IconButton.js\"\nimport { ButtonSize } from \"./ButtonSize.js\"\nimport { px, size } from \"../size.js\"\nimport { InfoIcon } from \"./InfoIcon.js\"\n\nassertMainOrNode()\n\nexport const enum ColumnWidth {\n\t// the column has a fixed small width\n\tSmall = \".column-width-small\",\n\t// all Largest columns equally share the rest of the available width\n\tLargest = \".column-width-largest\",\n}\n\nexport type TableHeading = {\n\tlabel: MaybeTranslation\n\thelpText?: MaybeTranslation\n}\n\n/**\n * @param columnHeading The texts that shall appear as headers of each column. Either a textId or function that returns the translation\n * @param columnWidths The sizes of the columns in px. If 0 is specified the column shares the remaining space with all other '0' width columns.\n * @param columnAlignments true for a column that's aligned opposite the default, false for one with the default alignment.\n * @param showActionButtonColumn True if addButton is specified or the table lines may contain action buttons.\n * @param addButton If set, this button appears beside the expander button.\n * @param lines the lines of the table\n */\nexport type TableAttrs = {\n\tcolumnHeading?: Array<TableHeading | MaybeTranslation>\n\tcolumnWidths: ReadonlyArray<ColumnWidth>\n\tcolumnAlignments?: Array<boolean>\n\tverticalColumnHeadings?: boolean\n\tshowActionButtonColumn: boolean\n\taddButtonAttrs?: IconButtonAttrs | null\n\tlines: ReadonlyArray<TableLineAttrs> | null\n\tclass?: string\n}\nexport type CellTextData = {\n\tmain: string\n\tinfo?: string[]\n\tclick?: ClickHandler\n\tmainStyle?: string\n}\nexport type TableLineAttrs = {\n\tcells: string[] | (() => CellTextData[])\n\tactionButtonAttrs?: IconButtonAttrs | null\n}\n\n/**\n * Shows a table of TableLine entries. The last column of the table may show action buttons for each TableLine and/or an add button.\n * The table shows a loading spinner until updateEntries() is called the first time.\n */\nexport class Table implements Component<TableAttrs> {\n\tview(vnode: Vnode<TableAttrs>): Children {\n\t\tconst a = vnode.attrs\n\t\tconst loading = !a.lines\n\t\tconst alignments = a.columnAlignments || []\n\t\tconst lineAttrs = a.lines\n\t\t\t? a.lines.map((lineAttrs) => this.createLine(lineAttrs, a.showActionButtonColumn, a.columnWidths, false, alignments, false))\n\t\t\t: []\n\n\t\treturn m(\"\", { class: a.class }, [\n\t\t\tm(`table.table${a.columnHeading ? \".table-header-border\" : \"\"}`, [\n\t\t\t\t(a.columnHeading\n\t\t\t\t\t? [\n\t\t\t\t\t\t\tthis.createLine(\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tcells: () =>\n\t\t\t\t\t\t\t\t\t\ta.columnHeading!.map((header) => {\n\t\t\t\t\t\t\t\t\t\t\tconst text = this.isTableHeading(header) ? header.label : header\n\t\t\t\t\t\t\t\t\t\t\tconst info = this.isTableHeading(header) && header.helpText ? [lang.getTranslationText(header.helpText)] : undefined\n\t\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\t\tmain: lang.getTranslationText(text),\n\t\t\t\t\t\t\t\t\t\t\t\tinfo: info,\n\t\t\t\t\t\t\t\t\t\t\t} satisfies CellTextData\n\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\tactionButtonAttrs: loading ? null : a.addButtonAttrs,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\ta.showActionButtonColumn,\n\t\t\t\t\t\t\t\ta.columnWidths,\n\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\talignments,\n\t\t\t\t\t\t\t\ta.verticalColumnHeadings ?? false,\n\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t),\n\t\t\t\t\t  ]\n\t\t\t\t\t: []\n\t\t\t\t).concat(lineAttrs),\n\t\t\t]),\n\t\t\tloading ? m(\".flex-center.items-center.button-height\", progressIcon()) : null,\n\t\t\t!loading && neverNull(a.lines).length === 0 ? m(\".flex-center.items-center.button-height\", lang.get(\"noEntries_msg\")) : null,\n\t\t])\n\t}\n\n\tprivate isTableHeading(textIdOrFunction: TableHeading | MaybeTranslation): textIdOrFunction is TableHeading {\n\t\treturn (textIdOrFunction as TableHeading).label !== undefined\n\t}\n\n\tprivate createLine(\n\t\tlineAttrs: TableLineAttrs,\n\t\tshowActionButtonColumn: boolean,\n\t\tcolumnWidths: ReadonlyArray<ColumnWidth>,\n\t\tbold: boolean,\n\t\tcolumnAlignments: Array<boolean>,\n\t\tverticalText: boolean,\n\t\tuseHelpButton: boolean = false,\n\t): Children {\n\t\tlet cells\n\n\t\tif (typeof lineAttrs.cells == \"function\") {\n\t\t\tcells = lineAttrs.cells().map((cellTextData, index) =>\n\t\t\t\tm(\n\t\t\t\t\t\"td\" + columnWidths[index],\n\t\t\t\t\tm(\n\t\t\t\t\t\t\"\",\n\t\t\t\t\t\t{ class: useHelpButton ? \"flex items-center height-100p full-width\" : \"\" },\n\t\t\t\t\t\tm(\n\t\t\t\t\t\t\t\".text-ellipsis.pr.pt-s\" +\n\t\t\t\t\t\t\t\t(bold ? \".b\" : \"\") +\n\t\t\t\t\t\t\t\t(cellTextData.click ? \".click\" : \"\" + (cellTextData.mainStyle ? cellTextData.mainStyle : \"\")) +\n\t\t\t\t\t\t\t\t(columnAlignments[index] ? \".right\" : \"\"),\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttitle: cellTextData.main,\n\t\t\t\t\t\t\t\t// show the text as tooltip, so ellipsed lines can be shown\n\t\t\t\t\t\t\t\tonclick: cellTextData.click\n\t\t\t\t\t\t\t\t\t? (event: MouseEvent) => {\n\t\t\t\t\t\t\t\t\t\t\tconst dom = downcast(event.target)\n\t\t\t\t\t\t\t\t\t\t\tcellTextData.click!(event, dom)\n\t\t\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t\t\t: undefined,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tverticalText ? m(\"span.vertical-text\", cellTextData.main) : cellTextData.main,\n\t\t\t\t\t\t),\n\t\t\t\t\t\tTable.renderHelpText(cellTextData, useHelpButton),\n\t\t\t\t\t),\n\t\t\t\t),\n\t\t\t)\n\t\t} else {\n\t\t\tcells = lineAttrs.cells.map((text, index) =>\n\t\t\t\tm(\n\t\t\t\t\t\"td.text-ellipsis.pr.pt-s.pb-s.\" + columnWidths[index] + (bold ? \".b\" : \"\") + (columnAlignments[index] ? \".right\" : \"\"),\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: text, // show the text as tooltip, so ellipsed lines can be shown\n\t\t\t\t\t},\n\t\t\t\t\tverticalText ? m(\"span.vertical-text\", text) : text,\n\t\t\t\t),\n\t\t\t)\n\t\t}\n\n\t\tif (showActionButtonColumn) {\n\t\t\tcells.push(\n\t\t\t\tm(\n\t\t\t\t\t\"td\",\n\t\t\t\t\t{\n\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\twidth: px(size.button_height_compact),\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tlineAttrs.actionButtonAttrs ? m(IconButton, lineAttrs.actionButtonAttrs) : [],\n\t\t\t\t),\n\t\t\t)\n\t\t}\n\n\t\treturn m(\"tr.selectable\", cells)\n\t}\n\n\tprivate static renderHelpText(cellTextData: CellTextData, useHelpButton: boolean): Children {\n\t\tconst info = cellTextData.info\n\t\tif (info == null) {\n\t\t\treturn undefined\n\t\t}\n\n\t\tif (useHelpButton) {\n\t\t\treturn m(InfoIcon, { text: info.join(\"\\n\") })\n\t\t} else {\n\t\t\treturn m(\n\t\t\t\t\".small.text-ellipsis.pr\" + (cellTextData.click ? \".click\" : \"\"),\n\t\t\t\t{\n\t\t\t\t\tonclick: cellTextData.click\n\t\t\t\t\t\t? (event: MouseEvent) => {\n\t\t\t\t\t\t\t\tconst dom = downcast(event.target)\n\t\t\t\t\t\t\t\tcellTextData.click!(event, dom)\n\t\t\t\t\t\t  }\n\t\t\t\t\t\t: undefined,\n\t\t\t\t},\n\t\t\t\tinfo.map((line) => m(\"\", line)),\n\t\t\t)\n\t\t}\n\t}\n}\n\ninterface UpdateableInstanceWithArray<T> {\n\tgetArray: () => Array<T>\n\tupdateInstance: () => Promise<void>\n}\n\nexport function createRowActions<T>(\n\tinstance: UpdateableInstanceWithArray<T>,\n\tcurrentElement: T,\n\tindexOfElement: number,\n\tprefixActions: ReadonlyArray<DropdownButtonAttrs> = [],\n): IconButtonAttrs {\n\tconst elements = instance.getArray()\n\tconst makeButtonAttrs: () => ReadonlyArray<DropdownButtonAttrs | null> = () => [\n\t\t...prefixActions,\n\t\tindexOfElement > 1\n\t\t\t? {\n\t\t\t\t\tlabel: \"moveToTop_action\",\n\t\t\t\t\tclick: () => {\n\t\t\t\t\t\telements.splice(indexOfElement, 1)\n\t\t\t\t\t\telements.unshift(currentElement)\n\t\t\t\t\t\tinstance.updateInstance()\n\t\t\t\t\t},\n\t\t\t  }\n\t\t\t: null,\n\t\tindexOfElement > 0\n\t\t\t? {\n\t\t\t\t\tlabel: \"moveUp_action\",\n\t\t\t\t\tclick: () => {\n\t\t\t\t\t\tlet prev = elements[indexOfElement - 1]\n\t\t\t\t\t\telements[indexOfElement - 1] = currentElement\n\t\t\t\t\t\telements[indexOfElement] = prev\n\t\t\t\t\t\tinstance.updateInstance()\n\t\t\t\t\t},\n\t\t\t  }\n\t\t\t: null,\n\t\tindexOfElement < instance.getArray().length - 1\n\t\t\t? {\n\t\t\t\t\tlabel: \"moveDown_action\",\n\t\t\t\t\tclick: () => {\n\t\t\t\t\t\tlet next = elements[indexOfElement + 1]\n\t\t\t\t\t\telements[indexOfElement + 1] = currentElement\n\t\t\t\t\t\telements[indexOfElement] = next\n\t\t\t\t\t\tinstance.updateInstance()\n\t\t\t\t\t},\n\t\t\t  }\n\t\t\t: null,\n\t\tindexOfElement < instance.getArray().length - 2\n\t\t\t? {\n\t\t\t\t\tlabel: \"moveToBottom_action\",\n\t\t\t\t\tclick: () => {\n\t\t\t\t\t\telements.splice(indexOfElement, 1)\n\t\t\t\t\t\telements.push(currentElement)\n\t\t\t\t\t\tinstance.updateInstance()\n\t\t\t\t\t},\n\t\t\t  }\n\t\t\t: null,\n\t\t{\n\t\t\tlabel: \"delete_action\",\n\t\t\tclick: () => {\n\t\t\t\telements.splice(indexOfElement, 1)\n\t\t\t\tinstance.updateInstance()\n\t\t\t},\n\t\t},\n\t]\n\treturn {\n\t\ttitle: \"edit_action\",\n\t\tclick: createDropdown({ lazyButtons: makeButtonAttrs, width: 260 }),\n\t\ticon: Icons.More,\n\t\tsize: ButtonSize.Compact,\n\t}\n}\n"]}