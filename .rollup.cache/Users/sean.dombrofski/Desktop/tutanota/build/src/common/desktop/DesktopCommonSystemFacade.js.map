{"version":3,"file":"DesktopCommonSystemFacade.js","sourceRoot":"","sources":["../../../../src/common/desktop/DesktopCommonSystemFacade.ts"],"names":[],"mappings":"AAEA,OAAO,EAAE,KAAK,EAAkB,MAAM,uBAAuB,CAAA;AAG7D,MAAM,OAAO,yBAAyB;IAGR;IAA4C;IAFjE,SAAS,GAAyB,KAAK,EAAE,CAAA;IAEjD,YAA6B,MAAyB,EAAmB,MAAc;QAA1D,WAAM,GAAN,MAAM,CAAmB;QAAmB,WAAM,GAAN,MAAM,CAAQ;IAAG,CAAC;IAE3F,KAAK,CAAC,sBAAsB;QAC3B,IAAI,CAAC,SAAS,CAAC,OAAO,EAAE,CAAA;IACzB,CAAC;IAED,KAAK,CAAC,MAAM,CAAC,KAA6B;QACzC,IAAI,CAAC,SAAS,GAAG,KAAK,EAAE,CAAA;QACxB,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,KAAK,CAAC,CAAA;IAC1B,CAAC;IAED,KAAK,CAAC,YAAY;QACjB,MAAM,IAAI,CAAC,SAAS,CAAC,OAAO,CAAA;IAC7B,CAAC;IAED,KAAK,CAAC,MAAM;QACX,OAAO,IAAI,CAAC,MAAM,CAAC,UAAU,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,CAAA;IAC3C,CAAC;CACD","sourcesContent":["import { CommonSystemFacade } from \"../native/common/generatedipc/CommonSystemFacade.js\"\nimport { ApplicationWindow } from \"./ApplicationWindow.js\"\nimport { defer, DeferredObject } from \"@tutao/tutanota-utils\"\nimport { Logger } from \"../api/common/Logger.js\"\n\nexport class DesktopCommonSystemFacade implements CommonSystemFacade {\n\tprivate initDefer: DeferredObject<void> = defer()\n\n\tconstructor(private readonly window: ApplicationWindow, private readonly logger: Logger) {}\n\n\tasync initializeRemoteBridge(): Promise<void> {\n\t\tthis.initDefer.resolve()\n\t}\n\n\tasync reload(query: Record<string, string>): Promise<void> {\n\t\tthis.initDefer = defer()\n\t\tthis.window.reload(query)\n\t}\n\n\tasync awaitForInit() {\n\t\tawait this.initDefer.promise\n\t}\n\n\tasync getLog(): Promise<string> {\n\t\treturn this.logger.getEntries().join(\"\\n\")\n\t}\n}\n"]}