{"version":3,"file":"InfoIcon.js","sourceRoot":"","sources":["../../../../../src/common/gui/base/InfoIcon.ts"],"names":[],"mappings":"AAAA,OAAO,CAAiC,MAAM,SAAS,CAAA;AACvD,OAAO,EAAE,EAAE,EAAE,MAAM,YAAY,CAAA;AAC/B,OAAO,EAAE,YAAY,EAAE,MAAM,0BAA0B,CAAA;AACvD,OAAO,EAAE,IAAI,EAAY,MAAM,uCAAuC,CAAA;AAMtE,MAAM,OAAO,QAAQ;IACZ,OAAO,GAAG,KAAK,CAAA;IACf,QAAQ,GAAY,KAAK,CAAA;IAEjC,IAAI,CAAC,EAAE,KAAK,EAAwB;QACnC,OAAO,CAAC,CACP,4DAA4D,EAC5D;YACC,cAAc,EAAE,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC;YACrC,QAAQ,4BAAkB;YAC1B,IAAI,EAAE,QAAQ;YACd,KAAK,EAAE;gBACN,YAAY,EAAE,EAAE,CAAC,CAAC,CAAC;aACnB;YACD,uDAAuD;YACvD,OAAO,EAAE,GAAG,EAAE,CAAC,IAAI,CAAC,MAAM,EAAE;YAC5B,SAAS,EAAE,CAAC,CAAgB,EAAE,EAAE;gBAC/B,IAAI,YAAY,CAAC,CAAC,CAAC,GAAG,EAAE,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC;oBACnC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAA;gBACjB,CAAC;YACF,CAAC;YACD,SAAS,EAAE,GAAG,EAAE,CAAC,IAAI,CAAC,MAAM,EAAE;YAC9B,UAAU,EAAE,CAAC,CAAQ,EAAE,EAAE,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;YAC1C,YAAY,EAAE,GAAG,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;YACzC,YAAY,EAAE,GAAG,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;SAC1C,EACD,CAAC,CACA,qBAAqB,EACrB;YACC,QAAQ,EAAE,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC;SAC/B,EACD,GAAG,EACH,CAAC,CACA,6BAA6B,EAC7B;YACC,MAAM,EAAE,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE;YACtD,IAAI,EAAE,SAAS;YACf,KAAK,EAAE;gBACN,KAAK,EAAE,EAAE,CAAC,GAAG,CAAC;gBACd,UAAU,EAAE,EAAE,CAAC,CAAC,GAAG,CAAC;aACpB;SACD,EACD,KAAK,CAAC,IAAI,CACV,CACD,CACD,CAAA;IACF,CAAC;IAEO,MAAM;QACb,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAA;QACpB,QAAQ,CAAC,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAAC,QAAQ,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC,CAAA;IACrE,CAAC;IAEgB,QAAQ,GAAG,CAAC,CAAQ,EAAE,EAAE;QACxC,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAA;QACrB,QAAQ,CAAC,mBAAmB,CAAC,OAAO,EAAE,IAAI,CAAC,QAAQ,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC,CAAA;QACvE,CAAC,CAAC,eAAe,EAAE,CAAA;QACnB,CAAC,CAAC,MAAM,EAAE,CAAA;IACX,CAAC,CAAA;CACD","sourcesContent":["import m, { Children, Component, Vnode } from \"mithril\"\nimport { px } from \"../size.js\"\nimport { isKeyPressed } from \"../../misc/KeyManager.js\"\nimport { Keys, TabIndex } from \"../../api/common/TutanotaConstants.js\"\n\nexport interface InfoIconAttrs {\n\ttext: Children\n}\n\nexport class InfoIcon implements Component<InfoIconAttrs> {\n\tprivate hovered = false\n\tprivate expanded: boolean = false\n\n\tview({ attrs }: Vnode<InfoIconAttrs>) {\n\t\treturn m(\n\t\t\t\"div.flex.justify-center.no-grow-no-shrink.overflow-visible\",\n\t\t\t{\n\t\t\t\t\"aria-pressed\": String(this.expanded),\n\t\t\t\ttabindex: TabIndex.Default,\n\t\t\t\trole: \"button\",\n\t\t\t\tstyle: {\n\t\t\t\t\t\"margin-top\": px(1),\n\t\t\t\t},\n\t\t\t\t// we can't really do the state with pure CSS on mobile\n\t\t\t\tonclick: () => this.expand(),\n\t\t\t\tonkeydown: (e: KeyboardEvent) => {\n\t\t\t\t\tif (isKeyPressed(e.key, Keys.ESC)) {\n\t\t\t\t\t\tthis.listener(e)\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tonfocusin: () => this.expand(),\n\t\t\t\tonfocusout: (e: Event) => this.listener(e),\n\t\t\t\tonmouseenter: () => (this.hovered = true),\n\t\t\t\tonmouseleave: () => (this.hovered = false),\n\t\t\t},\n\t\t\tm(\n\t\t\t\t\".info-badge.tooltip\",\n\t\t\t\t{\n\t\t\t\t\texpanded: String(this.expanded),\n\t\t\t\t},\n\t\t\t\t\"i\",\n\t\t\t\tm(\n\t\t\t\t\t\"span.tooltiptext.break-word\",\n\t\t\t\t\t{\n\t\t\t\t\t\thidden: this.hovered || this.expanded ? undefined : \"\",\n\t\t\t\t\t\trole: \"tooltip\",\n\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\twidth: px(120),\n\t\t\t\t\t\t\tmarginLeft: px(-120),\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tattrs.text,\n\t\t\t\t),\n\t\t\t),\n\t\t)\n\t}\n\n\tprivate expand(): void {\n\t\tthis.expanded = true\n\t\tdocument.addEventListener(\"click\", this.listener, { capture: true })\n\t}\n\n\tprivate readonly listener = (e: Event) => {\n\t\tthis.expanded = false\n\t\tdocument.removeEventListener(\"click\", this.listener, { capture: true })\n\t\te.stopPropagation()\n\t\tm.redraw()\n\t}\n}\n"]}