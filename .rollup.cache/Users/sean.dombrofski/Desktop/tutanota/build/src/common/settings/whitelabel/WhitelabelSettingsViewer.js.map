{"version":3,"file":"WhitelabelSettingsViewer.js","sourceRoot":"","sources":["../../../../../src/common/settings/whitelabel/WhitelabelSettingsViewer.ts"],"names":[],"mappings":"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","sourcesContent":["import m, { Children } from \"mithril\"\nimport { assertMainOrNode } from \"../../api/common/Env.js\"\nimport { clear, downcast, LazyLoaded, neverNull, noOp, promiseMap } from \"@tutao/tutanota-utils\"\nimport type {\n\tBooking,\n\tCertificateInfo,\n\tCustomer,\n\tCustomerInfo,\n\tCustomerProperties,\n\tDomainInfo,\n\tNotificationMailTemplate,\n\tPlanConfiguration,\n\tWhitelabelConfig,\n} from \"../../api/entities/sys/TypeRefs.js\"\nimport {\n\tBookingTypeRef,\n\tcreateStringWrapper,\n\tCustomerInfoTypeRef,\n\tCustomerPropertiesTypeRef,\n\tCustomerTypeRef,\n\tWhitelabelConfigTypeRef,\n} from \"../../api/entities/sys/TypeRefs.js\"\nimport { InfoLink, lang } from \"../../misc/LanguageViewModel.js\"\nimport { FeatureType, OperationType } from \"../../api/common/TutanotaConstants.js\"\nimport { progressIcon } from \"../../gui/base/Icon.js\"\nimport { showProgressDialog } from \"../../gui/dialogs/ProgressDialog.js\"\n\nimport * as EditNotificationEmailDialog from \"../../settings/EditNotificationEmailDialog\"\nimport { isWhitelabelActive } from \"../../subscription/SubscriptionUtils.js\"\nimport { GENERATED_MAX_ID } from \"../../api/common/utils/EntityUtils.js\"\nimport { WhitelabelBrandingDomainSettings } from \"./WhitelabelBrandingDomainSettings\"\nimport { WhitelabelThemeSettings } from \"./WhitelabelThemeSettings\"\nimport { WhitelabelImprintAndPrivacySettings } from \"./WhitelabelImprintAndPrivacySettings\"\nimport { WhitelabelRegistrationSettings, WhitelabelRegistrationSettingsAttrs } from \"./WhitelabelRegistrationSettings\"\nimport { WhitelabelCustomMetaTagsSettings, WhitelabelCustomMetaTagsSettingsAttrs } from \"./WhitelabelCustomMetaTagsSettings\"\nimport { WhitelabelStatusSettings } from \"./WhitelabelStatusSettings\"\nimport { WhitelabelNotificationEmailSettings } from \"./WhitelabelNotificationEmailSettings\"\nimport type { GermanLanguageCode } from \"./WhitelabelGermanLanguageFileSettings\"\nimport { WhitelabelGermanLanguageFileSettings } from \"./WhitelabelGermanLanguageFileSettings\"\nimport type { UpdatableSettingsViewer } from \"../Interfaces.js\"\nimport type { ThemeCustomizations } from \"../../misc/WhitelabelCustomizations.js\"\nimport { getThemeCustomizations } from \"../../misc/WhitelabelCustomizations.js\"\nimport { EntityClient } from \"../../api/common/EntityClient.js\"\nimport { SelectorItem, SelectorItemList } from \"../../gui/base/DropDownSelector.js\"\nimport { BrandingDomainService } from \"../../api/entities/sys/Services.js\"\nimport { LoginController } from \"../../api/main/LoginController.js\"\nimport { getCustomMailDomains, getWhitelabelDomainInfo } from \"../../api/common/utils/CustomerUtils.js\"\nimport { EntityUpdateData, isUpdateForTypeRef } from \"../../api/common/utils/EntityUpdateUtils.js\"\nimport { locator } from \"../../api/main/CommonLocator.js\"\nimport { showBuyOrSetNotificationEmailDialog } from \"../EditNotificationEmailDialog.js\"\n\nassertMainOrNode()\n\nexport class WhitelabelSettingsViewer implements UpdatableSettingsViewer {\n\tprivate _whitelabelConfig: WhitelabelConfig | null = null\n\tprivate _certificateInfo: CertificateInfo | null = null\n\tprivate _whitelabelDomainInfo: DomainInfo | null = null\n\tprivate _customJsonTheme: ThemeCustomizations | null = null\n\tprivate _customer: LazyLoaded<Customer>\n\tprivate _customerInfo: LazyLoaded<CustomerInfo>\n\tprivate _planConfig: LazyLoaded<PlanConfiguration>\n\tprivate _customerProperties: LazyLoaded<CustomerProperties>\n\tprivate _lastBooking: Booking | null\n\tprivate _entityClient: EntityClient\n\tprivate _logins: LoginController\n\n\tconstructor(entityClient: EntityClient, logins: LoginController) {\n\t\tthis.view = this.view.bind(this)\n\t\tthis._entityClient = entityClient\n\t\tthis._logins = logins\n\t\tthis._customer = new LazyLoaded(() => locator.logins.getUserController().loadCustomer())\n\t\tthis._customerInfo = new LazyLoaded(() => locator.logins.getUserController().loadCustomerInfo())\n\t\tthis._planConfig = new LazyLoaded(() => locator.logins.getUserController().getPlanConfig())\n\t\tthis._customerProperties = new LazyLoaded(() =>\n\t\t\tthis._customer.getAsync().then((customer) => locator.entityClient.load(CustomerPropertiesTypeRef, neverNull(customer.properties))),\n\t\t)\n\t\tthis._lastBooking = null\n\n\t\tthis._updateFields()\n\t}\n\n\tview(): Children {\n\t\tconst brandingDomainConfig = this._renderBrandingDomainConfig()\n\n\t\treturn m(\n\t\t\t\"#global-settings.fill-absolute.scroll.plr-l\",\n\t\t\tbrandingDomainConfig\n\t\t\t\t? [\n\t\t\t\t\t\tm(\".h4.mt-l\", lang.get(\"whitelabel_label\")),\n\t\t\t\t\t\tm(\".small\", lang.get(\"whitelabelDomainLinkInfo_msg\") + \" \"),\n\t\t\t\t\t\tm(\"small.text-break\", [m(`a[href=${InfoLink.Whitelabel}][target=_blank]`, InfoLink.Whitelabel)]),\n\t\t\t\t\t\tthis._renderWhitelabelStatusSettings(),\n\t\t\t\t\t\tthis._renderNotificationEmailSettings(),\n\t\t\t\t\t\tm(\".h4.mt-l\", lang.get(\"whitelabelDomain_label\")),\n\t\t\t\t\t\tbrandingDomainConfig,\n\t\t\t\t\t\tthis._renderThemeSettings(),\n\t\t\t\t\t\tthis._renderCustomMetaTagsSettings(),\n\t\t\t\t\t\tthis._renderImprintAndPrivacySettings(),\n\t\t\t\t\t\tthis._renderDefaultGermanLanguageFileSettings(),\n\t\t\t\t\t\tthis._renderWhitelabelRegistrationSettings(),\n\t\t\t\t\t\tm(\".mb-l\"),\n\t\t\t\t  ]\n\t\t\t\t: [m(\".flex-center.items-center.button-height.mt-l\", progressIcon())],\n\t\t)\n\t}\n\n\t_renderImprintAndPrivacySettings(): Children {\n\t\tconst whitelabelConfig = this._whitelabelConfig\n\t\tconst privacyStatementUrl = whitelabelConfig?.privacyStatementUrl ?? \"\"\n\t\tlet onPrivacyStatementUrlChanged: ((_: string) => void) | null = null\n\n\t\tif (whitelabelConfig) {\n\t\t\tonPrivacyStatementUrlChanged = (privacyStatementUrl) => {\n\t\t\t\twhitelabelConfig.privacyStatementUrl = privacyStatementUrl\n\n\t\t\t\tthis._entityClient.update(whitelabelConfig)\n\t\t\t}\n\t\t}\n\n\t\tconst imprintUrl = whitelabelConfig?.imprintUrl ?? \"\"\n\t\tlet onImprintUrlChanged: ((_: string) => void) | null = null\n\n\t\tif (whitelabelConfig) {\n\t\t\tonImprintUrlChanged = (imprintUrl) => {\n\t\t\t\twhitelabelConfig.imprintUrl = imprintUrl\n\n\t\t\t\tthis._entityClient.update(whitelabelConfig)\n\t\t\t}\n\t\t}\n\n\t\treturn m(WhitelabelImprintAndPrivacySettings, {\n\t\t\tprivacyStatementUrl,\n\t\t\tonPrivacyStatementUrlChanged,\n\t\t\timprintUrl,\n\t\t\tonImprintUrlChanged,\n\t\t})\n\t}\n\n\t_renderThemeSettings(): Children {\n\t\tconst customTheme = this._customJsonTheme\n\t\tconst whitelabelConfig = this._whitelabelConfig\n\t\tconst whitelabelDomainInfo = this._whitelabelDomainInfo\n\t\tconst whitelabelThemeSettingsAttrs = {\n\t\t\twhitelabelData:\n\t\t\t\twhitelabelConfig && whitelabelDomainInfo && customTheme\n\t\t\t\t\t? {\n\t\t\t\t\t\t\tcustomTheme,\n\t\t\t\t\t\t\twhitelabelConfig,\n\t\t\t\t\t\t\twhitelabelDomainInfo,\n\t\t\t\t\t  }\n\t\t\t\t\t: null,\n\t\t}\n\t\treturn m(WhitelabelThemeSettings, whitelabelThemeSettingsAttrs)\n\t}\n\n\t_renderWhitelabelRegistrationSettings(): Children {\n\t\tif (!this._isWhitelabelRegistrationVisible()) return null\n\t\tconst possibleRegistrationDomains: SelectorItemList<string | null> = [\n\t\t\t{\n\t\t\t\tname: lang.get(\"deactivated_label\"),\n\t\t\t\tvalue: null,\n\t\t\t} as SelectorItem<string | null>,\n\t\t].concat(\n\t\t\tgetCustomMailDomains(this._customerInfo.getLoaded()).map((d) => {\n\t\t\t\treturn {\n\t\t\t\t\tname: d.domain,\n\t\t\t\t\tvalue: d.domain,\n\t\t\t\t}\n\t\t\t}),\n\t\t)\n\t\tlet onRegistrationDomainSelected: WhitelabelRegistrationSettingsAttrs[\"onRegistrationDomainSelected\"] = noOp\n\t\tlet currentRegistrationDomain: string | null = null\n\n\t\tif (this._whitelabelConfig) {\n\t\t\tonRegistrationDomainSelected = (domain) => {\n\t\t\t\tclear(neverNull(this._whitelabelConfig).whitelabelRegistrationDomains)\n\n\t\t\t\tif (domain) {\n\t\t\t\t\tconst domainWrapper = createStringWrapper({\n\t\t\t\t\t\tvalue: domain,\n\t\t\t\t\t})\n\t\t\t\t\tneverNull(this._whitelabelConfig).whitelabelRegistrationDomains.push(domainWrapper)\n\t\t\t\t}\n\n\t\t\t\tthis._entityClient.update(neverNull(this._whitelabelConfig))\n\t\t\t}\n\n\t\t\tif (this._whitelabelConfig.whitelabelRegistrationDomains.length > 0) {\n\t\t\t\tcurrentRegistrationDomain = this._whitelabelConfig.whitelabelRegistrationDomains[0].value\n\t\t\t}\n\t\t}\n\n\t\tconst whitelabelCode = this._whitelabelConfig ? this._whitelabelConfig.whitelabelCode : \"\"\n\t\tlet onWhitelabelCodeChanged: (_: string) => void = noOp\n\n\t\tif (this._whitelabelConfig) {\n\t\t\tonWhitelabelCodeChanged = (code) => {\n\t\t\t\tneverNull(this._whitelabelConfig).whitelabelCode = code\n\n\t\t\t\tthis._entityClient.update(neverNull(this._whitelabelConfig))\n\t\t\t}\n\t\t}\n\n\t\treturn m(WhitelabelRegistrationSettings, {\n\t\t\twhitelabelCode,\n\t\t\tonWhitelabelCodeChanged,\n\t\t\tpossibleRegistrationDomains,\n\t\t\tcurrentRegistrationDomain,\n\t\t\tonRegistrationDomainSelected,\n\t\t})\n\t}\n\n\t_renderDefaultGermanLanguageFileSettings(): Children {\n\t\tif (!this._whitelabelConfig) return null\n\t\tif (lang.code !== \"de\" && lang.code !== \"de_sie\") return null\n\t\tconst customGermanLanguageFile: GermanLanguageCode | null = downcast(this._whitelabelConfig.germanLanguageCode)\n\n\t\tconst onGermanLanguageFileChanged = (languageFile: GermanLanguageCode) => {\n\t\t\tif (languageFile) {\n\t\t\t\tneverNull(this._whitelabelConfig).germanLanguageCode = languageFile\n\n\t\t\t\tthis._entityClient.update(neverNull(this._whitelabelConfig))\n\n\t\t\t\tlang.setLanguage({\n\t\t\t\t\tcode: languageFile,\n\t\t\t\t\tlanguageTag: lang.languageTag,\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\n\t\tconst whitelabelGermanLanguageFileSettingsAttrs = {\n\t\t\tcustomGermanLanguageFile,\n\t\t\tonGermanLanguageFileChanged,\n\t\t}\n\t\treturn m(WhitelabelGermanLanguageFileSettings, whitelabelGermanLanguageFileSettingsAttrs)\n\t}\n\n\t_renderCustomMetaTagsSettings(): Children {\n\t\tlet metaTags = \"\"\n\t\tlet onMetaTagsChanged: WhitelabelCustomMetaTagsSettingsAttrs[\"onMetaTagsChanged\"] | null = null\n\n\t\tif (this._whitelabelConfig) {\n\t\t\tmetaTags = this._whitelabelConfig.metaTags\n\n\t\t\tonMetaTagsChanged = (metaTags) => {\n\t\t\t\tneverNull(this._whitelabelConfig).metaTags = metaTags\n\n\t\t\t\tthis._entityClient.update(neverNull(this._whitelabelConfig))\n\t\t\t}\n\t\t}\n\n\t\tconst whitelabelCustomMetaTagsSettingsAttrs = {\n\t\t\tmetaTags,\n\t\t\tonMetaTagsChanged,\n\t\t}\n\t\treturn m(WhitelabelCustomMetaTagsSettings, whitelabelCustomMetaTagsSettingsAttrs)\n\t}\n\n\t_renderWhitelabelStatusSettings(): Children {\n\t\tconst planConfig = this._planConfig.getSync()\n\t\tif (planConfig == null) return null\n\t\tconst whitelabelActive = isWhitelabelActive(this._lastBooking, planConfig)\n\t\tconst whitelabelStatusSettingsAttrs = {\n\t\t\tisWhitelabelActive: whitelabelActive,\n\t\t}\n\t\treturn m(WhitelabelStatusSettings, whitelabelStatusSettingsAttrs)\n\t}\n\n\t_renderBrandingDomainConfig(): Children {\n\t\tconst customerInfo = this._customerInfo.getSync()\n\t\tconst planConfig = this._planConfig.getSync()\n\n\t\tif (!customerInfo || !planConfig) return null\n\t\tconst certificateInfo = this._certificateInfo\n\t\tconst isWhitelabelFeatureEnabled = isWhitelabelActive(this._lastBooking, planConfig)\n\t\tconst whitelabelDomain = this._whitelabelDomainInfo ? this._whitelabelDomainInfo.domain : \"\"\n\t\tconst whitelabelBrandingDomainSettingsAttrs = {\n\t\t\tcustomerInfo,\n\t\t\tisWhitelabelFeatureEnabled,\n\t\t\tcertificateInfo,\n\t\t\twhitelabelDomain,\n\t\t}\n\t\treturn m(WhitelabelBrandingDomainSettings, whitelabelBrandingDomainSettingsAttrs)\n\t}\n\n\t_isWhitelabelRegistrationVisible(): boolean {\n\t\treturn (\n\t\t\tthis._customer.isLoaded() &&\n\t\t\tthis._customer.getLoaded().customizations.some((c) => c.feature === FeatureType.WhitelabelParent) &&\n\t\t\tthis._customerInfo.isLoaded() &&\n\t\t\tgetWhitelabelDomainInfo(this._customerInfo.getLoaded()) != null\n\t\t)\n\t}\n\n\t_tryLoadWhitelabelConfig(domainInfo: DomainInfo | null): Promise<\n\t\t| {\n\t\t\t\twhitelabelConfig: WhitelabelConfig\n\t\t\t\tcertificateInfo: CertificateInfo\n\t\t  }\n\t\t| null\n\t\t| undefined\n\t> {\n\t\tif (domainInfo && domainInfo.whitelabelConfig) {\n\t\t\treturn Promise.all([\n\t\t\t\tlocator.entityClient.load(WhitelabelConfigTypeRef, domainInfo.whitelabelConfig),\n\t\t\t\tlocator.serviceExecutor.get(BrandingDomainService, null).then((response) => neverNull(response.certificateInfo)),\n\t\t\t]).then(([whitelabelConfig, certificateInfo]) => ({\n\t\t\t\twhitelabelConfig,\n\t\t\t\tcertificateInfo,\n\t\t\t}))\n\t\t} else {\n\t\t\treturn Promise.resolve(null)\n\t\t}\n\t}\n\n\tasync _updateFields(): Promise<void> {\n\t\tawait this._planConfig.getAsync()\n\t\tconst customerInfo = await this._customerInfo.getAsync()\n\t\tthis._whitelabelDomainInfo = getWhitelabelDomainInfo(customerInfo)\n\t\tconst data = await this._tryLoadWhitelabelConfig(this._whitelabelDomainInfo)\n\t\tthis._whitelabelConfig = data?.whitelabelConfig ?? null\n\t\tthis._certificateInfo = data?.certificateInfo ?? null\n\t\treturn locator.entityClient.loadRange(BookingTypeRef, neverNull(customerInfo.bookings).items, GENERATED_MAX_ID, 1, true).then((bookings) => {\n\t\t\tthis._lastBooking = bookings.length === 1 ? bookings[0] : null\n\t\t\tthis._customJsonTheme = this._whitelabelConfig ? getThemeCustomizations(this._whitelabelConfig) : null\n\t\t\tm.redraw()\n\t\t\tthis._customerProperties.getAsync().then(m.redraw)\n\t\t})\n\t}\n\n\t_renderNotificationEmailSettings(): Children {\n\t\tconst customerProperties = this._customerProperties.getSync()\n\n\t\tif (!customerProperties) return null\n\t\tconst notificationMailTemplates = customerProperties.notificationMailTemplates\n\n\t\tconst onAddTemplate = () => {\n\t\t\tshowBuyOrSetNotificationEmailDialog(this._lastBooking, this._customerProperties)\n\t\t}\n\n\t\tconst onEditTemplate = (template: NotificationMailTemplate) => {\n\t\t\tEditNotificationEmailDialog.show(template, this._customerProperties)\n\t\t}\n\n\t\tconst onRemoveTemplate = (template: NotificationMailTemplate) => {\n\t\t\tthis._removeNotificationMailTemplate(template)\n\t\t}\n\n\t\tconst whitelabelNotificationEmailSettingsAttrs = {\n\t\t\tnotificationMailTemplates,\n\t\t\tonAddTemplate,\n\t\t\tonEditTemplate,\n\t\t\tonRemoveTemplate,\n\t\t}\n\t\treturn m(WhitelabelNotificationEmailSettings, whitelabelNotificationEmailSettingsAttrs)\n\t}\n\n\t_removeNotificationMailTemplate(template: NotificationMailTemplate) {\n\t\tshowProgressDialog(\n\t\t\t\"pleaseWait_msg\",\n\t\t\tthis._customerProperties.getAsync().then((customerProps) => {\n\t\t\t\tconst index = customerProps.notificationMailTemplates.findIndex((t) => t.language === template.language)\n\n\t\t\t\tif (index !== -1) {\n\t\t\t\t\tcustomerProps.notificationMailTemplates.splice(index, 1)\n\n\t\t\t\t\tthis._entityClient.update(customerProps)\n\t\t\t\t}\n\t\t\t}),\n\t\t)\n\t}\n\n\tentityEventsReceived(updates: ReadonlyArray<EntityUpdateData>): Promise<void> {\n\t\treturn promiseMap(updates, (update) => {\n\t\t\tif (isUpdateForTypeRef(CustomerTypeRef, update) && update.operation === OperationType.UPDATE) {\n\t\t\t\tthis._customer.reset()\n\n\t\t\t\treturn this._customer.getAsync().then(() => m.redraw())\n\t\t\t} else if (isUpdateForTypeRef(CustomerInfoTypeRef, update) && update.operation === OperationType.UPDATE) {\n\t\t\t\tthis._customerInfo.reset()\n\n\t\t\t\treturn this._updateFields()\n\t\t\t} else if (isUpdateForTypeRef(WhitelabelConfigTypeRef, update) && update.operation === OperationType.UPDATE) {\n\t\t\t\treturn this._updateFields()\n\t\t\t} else if (isUpdateForTypeRef(CustomerPropertiesTypeRef, update) && update.operation === OperationType.UPDATE) {\n\t\t\t\tthis._customerProperties.reset()\n\n\t\t\t\treturn this._updateFields()\n\t\t\t} else if (isUpdateForTypeRef(BookingTypeRef, update)) {\n\t\t\t\treturn this._updateFields()\n\t\t\t}\n\t\t}).then(noOp)\n\t}\n}\n"]}