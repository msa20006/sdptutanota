{"version":3,"file":"BuyOptionBox.js","sourceRoot":"","sources":["../../../../src/common/subscription/BuyOptionBox.ts"],"names":[],"mappings":"AAAA,OAAO,CAAkD,MAAM,SAAS,CAAA;AACxE,OAAO,EAAE,EAAE,EAAE,IAAI,EAAE,MAAM,aAAa,CAAA;AAEtC,OAAO,EAAE,IAAI,EAAE,MAAM,2BAA2B,CAAA;AAEhD,OAAO,EAAE,IAAI,EAAE,MAAM,kBAAkB,CAAA;AACvC,OAAO,EAAE,cAAc,EAAE,MAAM,4BAA4B,CAAA;AAC3D,OAAO,EAAqB,KAAK,EAAE,QAAQ,EAAE,MAAM,iCAAiC,CAAA;AAKpF,OAAO,EAAE,QAAQ,EAAE,MAAM,yBAAyB,CAAA;AAClD,OAAO,EAAE,KAAK,EAAE,MAAM,iBAAiB,CAAA;AACvC,OAAO,EAAE,wCAAwC,EAAE,MAAM,6BAA6B,CAAA;AAEtF,OAAO,EAAE,QAAQ,EAAE,MAAM,mBAAmB,CAAA;AA2C5C,MAAM,UAAU,4CAA4C;IAC3D,OAAO,GAAG,EAAE,CACX,CAAC,CACA,+DAA+D,EAC/D;QACC,KAAK,EAAE;YACN,eAAe,EAAE,EAAE,CAAC,IAAI,CAAC,mBAAmB,CAAC;SAC7C;KACD,EACD,IAAI,CAAC,GAAG,CAAC,2BAA2B,CAAC,CACrC,CAAA;AACH,CAAC;AAED,MAAM,CAAC,MAAM,UAAU,GAAG,EAAE,CAAA;AAE5B,MAAM,OAAO,gBAAgB;IACpB,gBAAgB,GAAY,KAAK,CAAA;IACjC,uBAAuB,GAAW,OAAO,CAAA;IAEjD,cAAc,CAAC,KAAkC,EAAE,GAAmC;QACrF,4FAA4F;QAC5F,4HAA4H;QAC5H,yIAAyI;QACzI,qGAAqG;QACrG,IAAI,KAAK,CAAC,KAAK,CAAC,gBAAgB,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,gBAAgB,EAAE,CAAC;YACjE,IAAI,CAAC,uBAAuB,GAAG,cAAc,CAAA;QAC9C,CAAC;aAAM,CAAC;YACP,IAAI,CAAC,uBAAuB,GAAG,OAAO,CAAA;QACvC,CAAC;IACF,CAAC;IAED,IAAI,CAAC,KAAkC;QACtC,MAAM,EAAE,KAAK,EAAE,GAAG,KAAK,CAAA;QACvB,IAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC,gBAAgB,IAAI,KAAK,CAAA;QAEvD,OAAO,CAAC,CACP,QAAQ,EACR,KAAK,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC,EAAE,EAAE,EAAE;YAC3B,OAAO;gBACN,IAAI,CAAC,mBAAmB,CAAC,EAAE,EAAE,KAAK,CAAC,mBAAmB,CAAC;gBACvD,EAAE,CAAC,QAAQ;qBACT,MAAM,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,IAAI,IAAI,CAAC,gBAAgB,CAAC;qBAC/C,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE,CACV,CAAC,CAAC,IAAI,CAAC,uBAAuB,EAAE,EAAE,GAAG,EAAE,CAAC,CAAC,GAAG,EAAE,EAAE;oBAC/C,CAAC,CAAC,KAAK;wBACN,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE;4BACR,IAAI,+BAAiB;4BACrB,KAAK,EAAE,KAAK,CAAC,SAAS;yBACrB,CAAC;wBACJ,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,EAAE,IAAI,EAAE,CAAC,CAAC,WAAW,CAAC,CAAC,6BAAc,CAAC,kCAAgB,EAAE,KAAK,EAAE,KAAK,CAAC,SAAS,EAAE,CAAC;oBAC5F,CAAC,CAAC,wFAAwF,EAAE,CAAC,CAAC,CAAC,MAAM,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;oBAChH,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,QAAQ,EAAE,EAAE,IAAI,EAAE,CAAC,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI;iBACnD,CAAC,CACF;gBACF,IAAI,CAAC,kBAAkB,CAAC,EAAE,CAAC;aAC3B,CAAA;QACF,CAAC,CAAC,CACF,CAAA;IACF,CAAC;IAEO,mBAAmB,CAAC,EAAyC,EAAE,mBAA4B;QAClG,IAAI,EAAE,CAAC,KAAK,IAAI,IAAI,CAAC,gBAAgB,EAAE,CAAC;YACvC,OAAO;gBACN,CAAC,CAAC,oFAAoF,EAAE,EAAE,CAAC;gBAC3F,CAAC,CAAC,oFAAoF,EAAE,mBAAmB,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC;aAC5H,CAAA;QACF,CAAC;aAAM,CAAC;YACP,OAAO,EAAE,CAAA;QACV,CAAC;IACF,CAAC;IAEO,kBAAkB,CAAC,EAAyC;QACnE,IAAI,CAAC,IAAI,CAAC,gBAAgB,EAAE,CAAC;YAC5B,OAAO,EAAE,CAAA;QACV,CAAC;aAAM,CAAC;YACP,MAAM,gBAAgB,GAAG,EAAE,CAAC,YAAY,CAAC,GAAG,GAAG,EAAE,CAAC,QAAQ,CAAC,MAAM,CAAA;YACjE,OAAO,CAAC,GAAG,KAAK,CAAC,gBAAgB,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,gBAAgB,EAAE,EAAE,CAAC,CAAC,CAAA;QACvE,CAAC;IACF,CAAC;CACD;AAED,MAAM,OAAO,YAAY;IACxB,IAAI,CAAC,KAA8B;QAClC,MAAM,EAAE,KAAK,EAAE,GAAG,KAAK,CAAA;QAEvB,MAAM,aAAa,GAAG,wCAAwC,CAAC,KAAK,CAAC,YAAY,IAAI,IAAI,IAAI,EAAE,CAAC,CAAA;QAChG,MAAM,YAAY,GAAG,KAAK,CAAC,kBAAkB,KAAK,QAAQ,CAAC,MAAM,CAAA;QACjE,MAAM,QAAQ,GAAG,CAAC,KAAK,CAAC,uBAAuB,IAAI,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,sBAAsB,CAAC,CAAC,CAAC,KAAK,CAAC,uBAAuB,EAAE,CAAC,oCAA2B,CAAA;QACpJ,MAAM,4BAA4B,GAAG,YAAY,IAAI,aAAa,IAAI,QAAQ,CAAA;QAE9E,OAAO,CAAC,CACP,WAAW,EACX;YACC,KAAK,EAAE;gBACN,KAAK,EAAE,EAAE,CAAC,KAAK,CAAC,KAAK,CAAC;gBACtB,OAAO,EAAE,MAAM;gBACf,MAAM,EAAE,MAAM;aACd;SACD,EACD;YACC,CAAC,CACA,eAAe,GAAG,CAAC,KAAK,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,4BAA4B,CAAC,CAAC,CAAC,0BAA0B,CAAC,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EACzH;gBACC,KAAK,EAAE;oBACN,OAAO,EAAE,MAAM;oBACf,gBAAgB,EAAE,QAAQ;oBAC1B,YAAY,EAAE,EAAE,CAAC,KAAK,CAAC,MAAM,CAAC;oBAC9B,eAAe,EAAE,KAAK;oBACtB,MAAM,EAAE,MAAM;iBACd;aACD,EACD;gBACC,4BAA4B,CAAC,CAAC,CAAC,IAAI,CAAC,uBAAuB,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,uBAAuB,CAAC,KAAK,CAAC,WAAW,CAAC;gBAC/G,OAAO,KAAK,CAAC,OAAO,KAAK,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,OAAO;gBACrF,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC,CAAC,KAAK,CAAC,cAAc,CAAC,CAAC,CAAC,SAAS,CAAC;gBAC1E,CAAC,CAAC,oBAAoB,EAAE,KAAK,CAAC,SAAS,CAAC,CAAC,CAAC,IAAI,CAAC,kBAAkB,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAC;gBACjH,CAAC,CAAC,0BAA0B,EAAE,IAAI,CAAC,kBAAkB,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;gBACvE,IAAI,CAAC,4BAA4B,CAAC,KAAK,CAAC,uBAAuB,EAAE,4BAA4B,CAAC;gBAC9F,KAAK,CAAC,YAAY;oBACjB,CAAC,CAAC,CAAC,CACD,oBAAoB,EACpB;wBACC,KAAK,EAAE;4BACN,YAAY,EAAE,MAAM;yBACpB;qBACD,EACD,KAAK,CAAC,YAAY,EAAE,CACnB;oBACH,CAAC,CAAC,IAAI;aACP,CACD;SACD,CACD,CAAA;IACF,CAAC;IAEO,WAAW,CAAC,KAAa,EAAE,kBAA2B;QAC7D,OAAO,CAAC,CACP,oBAAoB,EACpB,EAAE,KAAK,EAAE,EAAE,OAAO,EAAE,MAAM,EAAE,uBAAuB,EAAE,cAAc,EAAE,aAAa,EAAE,QAAQ,EAAE,EAAE,EAChG,kBAAkB,IAAI,IAAI,IAAI,kBAAkB,CAAC,IAAI,EAAE,KAAK,EAAE;YAC7D,CAAC,CAAC,CAAC,CACD,cAAc,EACd;gBACC,KAAK,EAAE;oBACN,KAAK,EAAE,KAAK,CAAC,cAAc;oBAC3B,QAAQ,EAAE,EAAE,CAAC,IAAI,CAAC,cAAc,CAAC;oBACjC,WAAW,EAAE,KAAK;oBAClB,MAAM,EAAE,gBAAgB;oBACxB,OAAO,EAAE,SAAS;iBAClB;aACD,EACD,kBAAkB,CACjB;YACH,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EACR,CAAC,CAAC,KAAK,EAAE,KAAK,CAAC,EACf,CAAC,CAAC,EAAE,CAAC,CACL,CAAA;IACF,CAAC;IAEO,uBAAuB,CAAC,WAAmB;QAClD,OAAO,WAAW,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,IAAI,WAAW,IAAI,IAAI,CAAC,GAAG,CAAC,sBAAsB,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CAAA;IACzG,CAAC;IAEO,YAAY,CAAC,IAAY;QAChC,OAAO,CAAC,CAAC,oBAAoB,EAAE,CAAC,CAAC,gBAAgB,EAAE,EAAE,KAAK,EAAE,EAAE,OAAO,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,EAAE,IAAI,CAAC,CAAC,CAAA;IACzF,CAAC;IAEO,uBAAuB;QAC9B,MAAM,IAAI,GAAG,QAAQ,EAAE,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,2BAA2B,CAAC,CAAA;QACxE,OAAO,CAAC,CAAC,mDAAmD,EAAE,CAAC,CAAC,gBAAgB,EAAE,EAAE,KAAK,EAAE,EAAE,OAAO,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,EAAE,IAAI,CAAC,CAAC,CAAA;IACxH,CAAC;IAEO,4BAA4B,CAAC,eAA+C,EAAE,sBAA+B;QACpH,MAAM,oBAAoB,GAAG;YAC5B,EAAE,IAAI,EAAE,IAAI,CAAC,GAAG,CAAC,sBAAsB,CAAC,EAAE,KAAK,iCAAwB,EAAE;YACzE,EAAE,IAAI,EAAE,IAAI,CAAC,GAAG,CAAC,uBAAuB,CAAC,EAAE,KAAK,iCAAyB,EAAE;SAC3E,CAAA;QACD,OAAO,eAAe;YACrB,CAAC,CAAC,CAAC,CAAC,cAAc,EAAE;gBAClB,aAAa,EAAE,eAAe,EAAE;gBAChC,KAAK,EAAE,oBAAoB;gBAC3B,eAAe,EAAE,CAAC,CAAkB,EAAE,EAAE;oBACvC,eAAe,EAAE,CAAC,CAAC,CAAC,CAAA;oBACpB,CAAC,CAAC,MAAM,EAAE,CAAA;gBACX,CAAC;gBACD,sBAAsB;aACrB,CAAC;YACJ,CAAC,CAAC,IAAI,CAAA;IACR,CAAC;IAEO,aAAa,CAAC,OAAe;QACpC,OAAO,CAAC;QACP,2FAA2F;QAC3F,uFAAuF,EACvF;YACC,KAAK,EAAE;gBACN,WAAW,EAAE,OAAO,CAAC,MAAM,GAAG,EAAE,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,SAAS;aACxD;SACD,EACD,OAAO,CACP,CAAA;IACF,CAAC;CACD","sourcesContent":["import m, { Child, Children, Component, Vnode, VnodeDOM } from \"mithril\"\nimport { px, size } from \"../gui/size\"\nimport type { TranslationKey, MaybeTranslation } from \"../misc/LanguageViewModel\"\nimport { lang } from \"../misc/LanguageViewModel\"\nimport type { lazy } from \"@tutao/tutanota-utils\"\nimport { Icon } from \"../gui/base/Icon\"\nimport { SegmentControl } from \"../gui/base/SegmentControl\"\nimport { AvailablePlanType, Const, PlanType } from \"../api/common/TutanotaConstants\"\nimport { PaymentInterval } from \"./PriceUtils\"\nimport Stream from \"mithril/stream\"\nimport { Icons } from \"../gui/base/icons/Icons\"\nimport { BootIcons } from \"../gui/base/icons/BootIcons\"\nimport { InfoIcon } from \"../gui/base/InfoIcon.js\"\nimport { theme } from \"../gui/theme.js\"\nimport { isReferenceDateWithinCyberMondayCampaign } from \"../misc/CyberMondayUtils.js\"\nimport { client } from \"../misc/ClientDetector\"\nimport { isIOSApp } from \"../api/common/Env\"\n\nexport type BuyOptionBoxAttr = {\n\theading: string | Children\n\t// lazy<ButtonAttrs> because you can't do actionButton instanceof ButtonAttrs since ButtonAttrs doesn't exist in the javascript side\n\t// there is a strange interaction between the HTMLEditor in HTML mode and the ButtonN when you pass the ButtonN in via a component\n\t// that doesn't occur when you pass in the attrs\n\tactionButton?: lazy<Children>\n\tprice: string\n\t/**\n\t * Null when we do not want to show the difference between actual price and reference price.\n\t */\n\treferencePrice?: string\n\tpriceHint?: MaybeTranslation\n\thelpLabel: MaybeTranslation\n\twidth: number\n\theight: number\n\t/**\n\t * can be null if the subscription is free, or it's not an initial upgrade box\n\t */\n\tselectedPaymentInterval: Stream<PaymentInterval> | null\n\taccountPaymentInterval: PaymentInterval | null\n\thighlighted?: boolean\n\tmobile: boolean\n\tbonusMonths: number\n\t/**\n\t * Nullable because of the gift card component compatibility\n\t */\n\ttargetSubscription?: AvailablePlanType\n}\n\nexport type BuyOptionDetailsAttr = {\n\tcategories: Array<{\n\t\ttitle: string | null\n\t\tkey: string\n\t\tfeatureCount: { max: number }\n\t\tfeatures: Array<{ text: string; toolTip?: Child; key: string; antiFeature?: boolean; omit: boolean; heart: boolean }>\n\t}>\n\tfeaturesExpanded?: boolean\n\trenderCategoryTitle: boolean\n\ticonStyle?: Record<string, any>\n}\n\nexport function getActiveSubscriptionActionButtonReplacement(): () => Children {\n\treturn () =>\n\t\tm(\n\t\t\t\".buyOptionBox.content-accent-fg.center-vertically.text-center\",\n\t\t\t{\n\t\t\t\tstyle: {\n\t\t\t\t\t\"border-radius\": px(size.border_radius_small),\n\t\t\t\t},\n\t\t\t},\n\t\t\tlang.get(\"pricing.currentPlan_label\"),\n\t\t)\n}\n\nexport const BOX_MARGIN = 10\n\nexport class BuyOptionDetails implements Component<BuyOptionDetailsAttr> {\n\tprivate featuresExpanded: boolean = false\n\tprivate featureListItemSelector: string = \".flex\"\n\n\tonbeforeupdate(vnode: Vnode<BuyOptionDetailsAttr>, old: VnodeDOM<BuyOptionDetailsAttr>) {\n\t\t// the expand css class renders an animation which is used when the feature list is expanded\n\t\t// the animation should only be shown when the user clicked on the feature expansion button which changes the expanded state\n\t\t// thus to check whether the button was pressed, the BuyOptionBox before update must not be expanded but the BuyOptionBox after update is\n\t\t// otherwise mithril sometimes updates the view and renders the animation even though nothing changed\n\t\tif (vnode.attrs.featuresExpanded && !old.attrs.featuresExpanded) {\n\t\t\tthis.featureListItemSelector = \".flex.expand\"\n\t\t} else {\n\t\t\tthis.featureListItemSelector = \".flex\"\n\t\t}\n\t}\n\n\tview(vnode: Vnode<BuyOptionDetailsAttr>) {\n\t\tconst { attrs } = vnode\n\t\tthis.featuresExpanded = attrs.featuresExpanded || false\n\n\t\treturn m(\n\t\t\t\".mt.pl\",\n\t\t\tattrs.categories.map((fc) => {\n\t\t\t\treturn [\n\t\t\t\t\tthis.renderCategoryTitle(fc, attrs.renderCategoryTitle),\n\t\t\t\t\tfc.features\n\t\t\t\t\t\t.filter((f) => !f.omit || this.featuresExpanded)\n\t\t\t\t\t\t.map((f) =>\n\t\t\t\t\t\t\tm(this.featureListItemSelector, { key: f.key }, [\n\t\t\t\t\t\t\t\tf.heart\n\t\t\t\t\t\t\t\t\t? m(Icon, {\n\t\t\t\t\t\t\t\t\t\t\ticon: BootIcons.Heart,\n\t\t\t\t\t\t\t\t\t\t\tstyle: attrs.iconStyle,\n\t\t\t\t\t\t\t\t\t  })\n\t\t\t\t\t\t\t\t\t: m(Icon, { icon: f.antiFeature ? Icons.Cancel : Icons.Checkmark, style: attrs.iconStyle }),\n\t\t\t\t\t\t\t\tm(\".small.text-left.align-self-center.pl-s.button-height.flex-grow.min-width-0.break-word\", [m(\"span\", f.text)]),\n\t\t\t\t\t\t\t\tf.toolTip ? m(InfoIcon, { text: f.toolTip }) : null,\n\t\t\t\t\t\t\t]),\n\t\t\t\t\t\t),\n\t\t\t\t\tthis.renderPlaceholders(fc),\n\t\t\t\t]\n\t\t\t}),\n\t\t)\n\t}\n\n\tprivate renderCategoryTitle(fc: BuyOptionDetailsAttr[\"categories\"][0], renderCategoryTitle: boolean): Children {\n\t\tif (fc.title && this.featuresExpanded) {\n\t\t\treturn [\n\t\t\t\tm(\".b.text-left.align-self-center.pl-s.button-height.flex-grow.min-width-0.break-word\", \"\"),\n\t\t\t\tm(\".b.text-left.align-self-center.pl-s.button-height.flex-grow.min-width-0.break-word\", renderCategoryTitle ? fc.title : \"\"),\n\t\t\t]\n\t\t} else {\n\t\t\treturn []\n\t\t}\n\t}\n\n\tprivate renderPlaceholders(fc: BuyOptionDetailsAttr[\"categories\"][0]): Children {\n\t\tif (!this.featuresExpanded) {\n\t\t\treturn []\n\t\t} else {\n\t\t\tconst placeholderCount = fc.featureCount.max - fc.features.length\n\t\t\treturn [...Array(placeholderCount)].map(() => m(\".button-height\", \"\"))\n\t\t}\n\t}\n}\n\nexport class BuyOptionBox implements Component<BuyOptionBoxAttr> {\n\tview(vnode: Vnode<BuyOptionBoxAttr>) {\n\t\tconst { attrs } = vnode\n\n\t\tconst isCyberMonday = isReferenceDateWithinCyberMondayCampaign(Const.CURRENT_DATE ?? new Date())\n\t\tconst isLegendPlan = attrs.targetSubscription === PlanType.Legend\n\t\tconst isYearly = (attrs.selectedPaymentInterval == null ? attrs.accountPaymentInterval : attrs.selectedPaymentInterval()) === PaymentInterval.Yearly\n\t\tconst shouldApplyCyberMondayDesign = isLegendPlan && isCyberMonday && isYearly\n\n\t\treturn m(\n\t\t\t\".fg-black\",\n\t\t\t{\n\t\t\t\tstyle: {\n\t\t\t\t\twidth: px(attrs.width),\n\t\t\t\t\tpadding: \"10px\",\n\t\t\t\t\theight: \"100%\",\n\t\t\t\t},\n\t\t\t},\n\t\t\t[\n\t\t\t\tm(\n\t\t\t\t\t\".buyOptionBox\" + (attrs.highlighted ? (shouldApplyCyberMondayDesign ? \".highlighted.cyberMonday\" : \".highlighted\") : \"\"),\n\t\t\t\t\t{\n\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\tdisplay: \"flex\",\n\t\t\t\t\t\t\t\"flex-direction\": \"column\",\n\t\t\t\t\t\t\t\"min-height\": px(attrs.height),\n\t\t\t\t\t\t\t\"border-radius\": \"3px\",\n\t\t\t\t\t\t\theight: \"100%\",\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\t[\n\t\t\t\t\t\tshouldApplyCyberMondayDesign ? this.renderCyberMondayRibbon() : this.renderBonusMonthsRibbon(attrs.bonusMonths),\n\t\t\t\t\t\ttypeof attrs.heading === \"string\" ? this.renderHeading(attrs.heading) : attrs.heading,\n\t\t\t\t\t\tthis.renderPrice(attrs.price, isYearly ? attrs.referencePrice : undefined),\n\t\t\t\t\t\tm(\".small.text-center\", attrs.priceHint ? lang.getTranslationText(attrs.priceHint) : lang.get(\"emptyString_msg\")),\n\t\t\t\t\t\tm(\".small.text-center.pb-ml\", lang.getTranslationText(attrs.helpLabel)),\n\t\t\t\t\t\tthis.renderPaymentIntervalControl(attrs.selectedPaymentInterval, shouldApplyCyberMondayDesign),\n\t\t\t\t\t\tattrs.actionButton\n\t\t\t\t\t\t\t? m(\n\t\t\t\t\t\t\t\t\t\".button-min-height\",\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t\t\t\t\t\"margin-top\": \"auto\",\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tattrs.actionButton(),\n\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t: null,\n\t\t\t\t\t],\n\t\t\t\t),\n\t\t\t],\n\t\t)\n\t}\n\n\tprivate renderPrice(price: string, strikethroughPrice?: string) {\n\t\treturn m(\n\t\t\t\".pt-ml.text-center\",\n\t\t\t{ style: { display: \"grid\", \"grid-template-columns\": \"1fr auto 1fr\", \"align-items\": \"center\" } },\n\t\t\tstrikethroughPrice != null && strikethroughPrice.trim() !== \"\"\n\t\t\t\t? m(\n\t\t\t\t\t\t\".span.strike\",\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t\tcolor: theme.content_button,\n\t\t\t\t\t\t\t\tfontSize: px(size.font_size_base),\n\t\t\t\t\t\t\t\tjustifySelf: \"end\",\n\t\t\t\t\t\t\t\tmargin: \"auto 0.4em 0 0\",\n\t\t\t\t\t\t\t\tpadding: \"0.4em 0\",\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\tstrikethroughPrice,\n\t\t\t\t  )\n\t\t\t\t: m(\"\"),\n\t\t\tm(\".h1\", price),\n\t\t\tm(\"\"),\n\t\t)\n\t}\n\n\tprivate renderBonusMonthsRibbon(bonusMonths: number): Children {\n\t\treturn bonusMonths > 0 ? this.renderRibbon(`+${bonusMonths} ${lang.get(\"pricing.months_label\")}`) : null\n\t}\n\n\tprivate renderRibbon(text: string) {\n\t\treturn m(\".ribbon-horizontal\", m(\".text-center.b\", { style: { padding: px(3) } }, text))\n\t}\n\n\tprivate renderCyberMondayRibbon(): Children {\n\t\tconst text = isIOSApp() ? \"DEAL\" : lang.get(\"pricing.cyberMonday_label\")\n\t\treturn m(\".ribbon-horizontal.ribbon-horizontal-cyber-monday\", m(\".text-center.b\", { style: { padding: px(3) } }, text))\n\t}\n\n\tprivate renderPaymentIntervalControl(paymentInterval: Stream<PaymentInterval> | null, shouldApplyCyberMonday: boolean): Children {\n\t\tconst paymentIntervalItems = [\n\t\t\t{ name: lang.get(\"pricing.yearly_label\"), value: PaymentInterval.Yearly },\n\t\t\t{ name: lang.get(\"pricing.monthly_label\"), value: PaymentInterval.Monthly },\n\t\t]\n\t\treturn paymentInterval\n\t\t\t? m(SegmentControl, {\n\t\t\t\t\tselectedValue: paymentInterval(),\n\t\t\t\t\titems: paymentIntervalItems,\n\t\t\t\t\tonValueSelected: (v: PaymentInterval) => {\n\t\t\t\t\t\tpaymentInterval?.(v)\n\t\t\t\t\t\tm.redraw()\n\t\t\t\t\t},\n\t\t\t\t\tshouldApplyCyberMonday,\n\t\t\t  })\n\t\t\t: null\n\t}\n\n\tprivate renderHeading(heading: string): Children {\n\t\treturn m(\n\t\t\t// we need some margin for the discount banner for longer translations shown on the website\n\t\t\t`.h4.text-center.mb-small-line-height.flex.col.center-horizontally.mlr-l.dialog-header`,\n\t\t\t{\n\t\t\t\tstyle: {\n\t\t\t\t\t\"font-size\": heading.length > 20 ? \"smaller\" : undefined,\n\t\t\t\t},\n\t\t\t},\n\t\t\theading,\n\t\t)\n\t}\n}\n"]}