{"version":3,"file":"SupportTopicPage.js","sourceRoot":"","sources":["../../../../../src/common/support/pages/SupportTopicPage.ts"],"names":[],"mappings":"AAAA,OAAO,CAAiC,MAAM,SAAS,CAAA;AACvD,OAAO,EAAE,IAAI,EAAE,MAAM,iCAAiC,CAAA;AACtD,OAAO,EAAE,aAAa,EAAE,MAAM,6BAA6B,CAAA;AAC3D,OAAO,EAAE,iBAAiB,EAAE,MAAM,yBAAyB,CAAA;AAC3D,OAAO,EAAE,sBAAsB,EAAsB,MAAM,qBAAqB,CAAA;AAGhF,OAAO,EAAE,IAAI,EAAE,MAAM,wBAAwB,CAAA;AAC7C,OAAO,EAAE,KAAK,EAAE,MAAM,oBAAoB,CAAA;AAC1C,OAAO,EAAE,aAAa,EAAE,MAAM,yCAAyC,CAAA;AAUvE,MAAM,OAAO,gBAAgB;IAC5B,IAAI,CAAC,EAAE,KAAK,EAAE,EAAE,IAAI,EAAE,sBAAsB,EAAE,0BAA0B,EAAE,EAAgB;QACzF,MAAM,KAAK,GAAG,IAAI,CAAC,aAAa,EAAE,CAAA;QAClC,IAAI,KAAK,IAAI,IAAI,EAAE,CAAC;YACnB,OAAM;QACP,CAAC;QAED,MAAM,WAAW,GAAG,IAAI,CAAC,WAAW,CAAA;QACpC,MAAM,QAAQ,GAAG,WAAW,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,cAAc,CAAC,CAAC,CAAC,KAAK,CAAC,cAAc,CAAA;QACzF,MAAM,iBAAiB,GAAG,aAAa,CAAC,YAAY,CAAC,iBAAiB,CAAC,QAAQ,CAAC,EAAE;YACjF,oBAAoB,EAAE,IAAI;SAC1B,CAAC,CAAC,IAAI,CAAA;QACP,MAAM,KAAK,GAAG,sBAAsB,CAAC,KAAK,EAAE,WAAW,CAAC,CAAA;QACxD,OAAO,CAAC,CACP,yBAAyB,EACzB;YACC,KAAK,EAAE;gBACN,YAAY,EAAE,MAAM;aACpB;YACD,KAAK,EAAE,aAAa;SACpB,EACD;YACC,CAAC,CACA,IAAI,EACJ;gBACC,eAAe,EAAE,KAAK;gBACtB,OAAO,EAAE,CAAC,QAAQ,EAAE,IAAI,CAAC;aACzB,EACD,CAAC,CAAC,YAAY,EAAE,KAAK,CAAC,EACtB,CAAC,CAAC,KAAK,CAAC,iBAAiB,CAAC,CAC1B;SACD,EACD,CAAC,CAAC,cAAc,EAAE,EAAE,sBAAsB,EAAE,0BAA0B,EAAE,CAAC,CACzE,CAAA;IACF,CAAC;CACD;AAOD,MAAM,cAAc;IACnB,IAAI,CAAC,EAAE,KAAK,EAAE,EAAE,sBAAsB,EAAE,0BAA0B,EAAE,EAA8B;QACjG,OAAO,CAAC,CACP,8BAA8B,EAC9B,CAAC,CAAC,iCAAiC,EAAE,EAAE,KAAK,EAAE,EAAE,KAAK,EAAE,KAAK,CAAC,iBAAiB,EAAE,EAAE,EAAE,IAAI,CAAC,GAAG,CAAC,oBAAoB,CAAC,CAAC,EACnH,CAAC,CAAC,IAAI,EAAE,EAAE,YAAY,EAAE,IAAI,EAAE,EAAE;YAC/B,CAAC,CAAC,aAAa,EAAE;gBAChB,IAAI,EAAE,WAAW;gBACjB,OAAO,EAAE,0BAA0B;gBACnC,SAAS,EAAE,EAAE,IAAI,mCAAiB,EAAE,KAAK,EAAE,WAAW,EAAE;aACxD,CAAC;YACF,CAAC,CAAC,aAAa,EAAE;gBAChB,IAAI,EAAE,UAAU;gBAChB,OAAO,EAAE,sBAAsB;aAC/B,CAAC;SACF,CAAC,CACF,CAAA;IACF,CAAC;CACD","sourcesContent":["import m, { Children, Component, Vnode } from \"mithril\"\nimport { lang } from \"../../misc/LanguageViewModel.js\"\nimport { htmlSanitizer } from \"../../misc/HtmlSanitizer.js\"\nimport { convertTextToHtml } from \"../../misc/Formatter.js\"\nimport { getLocalisedTopicIssue, SupportDialogState } from \"../SupportDialog.js\"\nimport { Dialog } from \"../../gui/base/Dialog.js\"\nimport { Thunk } from \"@tutao/tutanota-utils\"\nimport { Card } from \"../../gui/base/Card.js\"\nimport { theme } from \"../../gui/theme.js\"\nimport { SectionButton } from \"../../gui/base/buttons/SectionButton.js\"\nimport { Icons } from \"../../gui/base/icons/Icons.js\"\n\ntype Props = {\n\tdata: SupportDialogState\n\tdialog: Dialog\n\tgoToContactSupportPage: Thunk\n\tgoToSolutionWasHelpfulPage: Thunk\n}\n\nexport class SupportTopicPage implements Component<Props> {\n\tview({ attrs: { data, goToContactSupportPage, goToSolutionWasHelpfulPage } }: Vnode<Props>): Children {\n\t\tconst topic = data.selectedTopic()\n\t\tif (topic == null) {\n\t\t\treturn\n\t\t}\n\n\t\tconst languageTag = lang.languageTag\n\t\tconst solution = languageTag.includes(\"de\") ? topic.solutionHtmlDE : topic.solutionHtmlEN\n\t\tconst sanitisedSolution = htmlSanitizer.sanitizeHTML(convertTextToHtml(solution), {\n\t\t\tblockExternalContent: true,\n\t\t}).html\n\t\tconst issue = getLocalisedTopicIssue(topic, languageTag)\n\t\treturn m(\n\t\t\t\".flex.flex-column.pt.pb\",\n\t\t\t{\n\t\t\t\tstyle: {\n\t\t\t\t\t\"overflow-x\": \"auto\",\n\t\t\t\t},\n\t\t\t\tclass: \"height-100p\",\n\t\t\t},\n\t\t\t[\n\t\t\t\tm(\n\t\t\t\t\tCard,\n\t\t\t\t\t{\n\t\t\t\t\t\trootElementType: \"div\",\n\t\t\t\t\t\tclasses: [\"scroll\", \"mb\"],\n\t\t\t\t\t},\n\t\t\t\t\tm(\".h4.m-0.pb\", issue),\n\t\t\t\t\tm.trust(sanitisedSolution),\n\t\t\t\t),\n\t\t\t],\n\t\t\tm(WasThisHelpful, { goToContactSupportPage, goToSolutionWasHelpfulPage }),\n\t\t)\n\t}\n}\n\ninterface WasThisHelpfulAttrs {\n\tgoToContactSupportPage: VoidFunction\n\tgoToSolutionWasHelpfulPage: VoidFunction\n}\n\nclass WasThisHelpful implements Component<WasThisHelpfulAttrs> {\n\tview({ attrs: { goToContactSupportPage, goToSolutionWasHelpfulPage } }: Vnode<WasThisHelpfulAttrs>): Children {\n\t\treturn m(\n\t\t\t\".flex.flex-column.gap-vpad-s\",\n\t\t\tm(\"small.uppercase.b.text-ellipsis\", { style: { color: theme.navigation_button } }, lang.get(\"wasThisHelpful_msg\")),\n\t\t\tm(Card, { shouldDivide: true }, [\n\t\t\t\tm(SectionButton, {\n\t\t\t\t\ttext: \"yes_label\",\n\t\t\t\t\tonclick: goToSolutionWasHelpfulPage,\n\t\t\t\t\trightIcon: { icon: Icons.Checkmark, title: \"yes_label\" },\n\t\t\t\t}),\n\t\t\t\tm(SectionButton, {\n\t\t\t\t\ttext: \"no_label\",\n\t\t\t\t\tonclick: goToContactSupportPage,\n\t\t\t\t}),\n\t\t\t]),\n\t\t)\n\t}\n}\n"]}