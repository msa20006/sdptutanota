{"version":3,"file":"NewsDialog.js","sourceRoot":"","sources":["../../../../../src/common/misc/news/NewsDialog.ts"],"names":[],"mappings":"AACA,OAAO,CAAgB,MAAM,SAAS,CAAA;AACtC,OAAO,EAAE,eAAe,EAAwB,MAAM,mCAAmC,CAAA;AACzF,OAAO,EAAE,IAAI,EAAE,MAAM,yBAAyB,CAAA;AAC9C,OAAO,EAAE,MAAM,EAAc,MAAM,0BAA0B,CAAA;AAC7D,OAAO,EAAE,IAAI,EAAE,MAAM,uCAAuC,CAAA;AAC5D,OAAO,EAAE,QAAQ,EAAE,MAAM,eAAe,CAAA;AAExC,OAAO,EAAE,YAAY,EAAE,MAAM,wBAAwB,CAAA;AAErD,MAAM,UAAU,cAAc,CAAC,SAAoB;IAClD,MAAM,WAAW,GAAgB;QAChC,KAAK,EAAE,WAAW;QAClB,IAAI,wCAAsB;QAC1B,KAAK,EAAE,GAAG,EAAE;YACX,WAAW,EAAE,CAAA;QACd,CAAC;KACD,CAAA;IAED,MAAM,WAAW,GAAG,GAAG,EAAE;QACxB,MAAM,CAAC,KAAK,EAAE,CAAA;IACf,CAAC,CAAA;IACD,MAAM,MAAM,GAAyB;QACpC,IAAI,EAAE,CAAC,WAAW,CAAC;QACnB,MAAM,EAAE,YAAY;KACpB,CAAA;IAED,IAAI,MAAM,GAAG,KAAK,CAAA;IAClB,SAAS,CAAC,WAAW,EAAE,CAAC,IAAI,CAAC,GAAG,EAAE;QACjC,MAAM,GAAG,IAAI,CAAA;QACb,CAAC,CAAC,MAAM,EAAE,CAAA;IACX,CAAC,CAAC,CAAA;IAEF,MAAM,KAAK,GAAc;QACxB,IAAI,EAAE,GAAG,EAAE;YACV,OAAO;gBACN,CAAC,CAAC,EAAE,EAAE;oBACL,MAAM;wBACL,CAAC,CAAC,CAAC,CAAC,QAAQ,EAAE;4BACZ,WAAW,EAAE,SAAS,CAAC,WAAW;4BAClC,iBAAiB,EAAE,SAAS,CAAC,iBAAiB;yBAC7C,CAAC;wBACJ,CAAC,CAAC,CAAC,CACD,mBAAmB,EACnB,CAAC,CAAC,gBAAgB,EAAE,CAAC,CAAC,CAAC,yBAAyB,EAAE,YAAY,EAAE,CAAC,EAAE,CAAC,CAAC,GAAG,EAAE,IAAI,CAAC,kBAAkB,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC,CACrH;iBACJ,CAAC;aACF,CAAA;QACF,CAAC;KACD,CAAA;IAED,MAAM,MAAM,GAAG,IAAI,MAAM,yCAAuB;QAC/C,IAAI,EAAE,GAAG,EAAE;YACV,OAAO,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,eAAe,EAAE,MAAM,CAAC,EAAE,CAAC,CAAC,0BAA0B,EAAE,CAAC,CAAC,gBAAgB,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAA;QACzG,CAAC;KACD,CAAC,CAAC,WAAW,CAAC;QACd,GAAG,EAAE,IAAI,CAAC,GAAG;QACb,IAAI,EAAE,GAAG,EAAE;YACV,WAAW,EAAE,CAAA;QACd,CAAC;QACD,IAAI,EAAE,WAAW;KACjB,CAAC,CAAA;IACF,MAAM,CAAC,IAAI,EAAE,CAAA;AACd,CAAC","sourcesContent":["import { ButtonAttrs, ButtonType } from \"../../gui/base/Button.js\"\nimport m, { Component } from \"mithril\"\nimport { DialogHeaderBar, DialogHeaderBarAttrs } from \"../../gui/base/DialogHeaderBar.js\"\nimport { lang } from \"../LanguageViewModel.js\"\nimport { Dialog, DialogType } from \"../../gui/base/Dialog.js\"\nimport { Keys } from \"../../api/common/TutanotaConstants.js\"\nimport { NewsList } from \"./NewsList.js\"\nimport { NewsModel } from \"./NewsModel.js\"\nimport { progressIcon } from \"../../gui/base/Icon.js\"\n\nexport function showNewsDialog(newsModel: NewsModel) {\n\tconst closeButton: ButtonAttrs = {\n\t\tlabel: \"close_alt\",\n\t\ttype: ButtonType.Secondary,\n\t\tclick: () => {\n\t\t\tcloseAction()\n\t\t},\n\t}\n\n\tconst closeAction = () => {\n\t\tdialog.close()\n\t}\n\tconst header: DialogHeaderBarAttrs = {\n\t\tleft: [closeButton],\n\t\tmiddle: \"news_label\",\n\t}\n\n\tlet loaded = false\n\tnewsModel.loadNewsIds().then(() => {\n\t\tloaded = true\n\t\tm.redraw()\n\t})\n\n\tconst child: Component = {\n\t\tview: () => {\n\t\t\treturn [\n\t\t\t\tm(\"\", [\n\t\t\t\t\tloaded\n\t\t\t\t\t\t? m(NewsList, {\n\t\t\t\t\t\t\t\tliveNewsIds: newsModel.liveNewsIds,\n\t\t\t\t\t\t\t\tliveNewsListItems: newsModel.liveNewsListItems,\n\t\t\t\t\t\t  })\n\t\t\t\t\t\t: m(\n\t\t\t\t\t\t\t\t\".flex-center.mt-l\",\n\t\t\t\t\t\t\t\tm(\".flex-v-center\", [m(\".full-width.flex-center\", progressIcon()), m(\"p\", lang.getTranslationText(\"pleaseWait_msg\"))]),\n\t\t\t\t\t\t  ),\n\t\t\t\t]),\n\t\t\t]\n\t\t},\n\t}\n\n\tconst dialog = new Dialog(DialogType.EditLarge, {\n\t\tview: () => {\n\t\t\treturn m(\"\", [m(DialogHeaderBar, header), m(\".dialog-container.scroll\", m(\".fill-absolute\", m(child)))])\n\t\t},\n\t}).addShortcut({\n\t\tkey: Keys.ESC,\n\t\texec: () => {\n\t\t\tcloseAction()\n\t\t},\n\t\thelp: \"close_alt\",\n\t})\n\tdialog.show()\n}\n"]}