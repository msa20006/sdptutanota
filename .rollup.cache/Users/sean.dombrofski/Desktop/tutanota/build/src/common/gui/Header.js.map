{"version":3,"file":"Header.js","sourceRoot":"","sources":["../../../../src/common/gui/Header.ts"],"names":[],"mappings":"AAAA,OAAO,CAAsC,MAAM,SAAS,CAAA;AAC5D,OAAO,EAAE,MAAM,EAAE,MAAM,kBAAkB,CAAA;AACzC,OAAO,EAAE,gBAAgB,EAAE,SAAS,EAAkB,MAAM,qBAAqB,CAAA;AACjF,OAAO,EAAE,WAAW,EAAE,MAAM,oCAAoC,CAAA;AAEhE,OAAO,EAAE,eAAe,EAAE,kBAAkB,EAAE,eAAe,EAAE,WAAW,EAAE,MAAM,wBAAwB,CAAA;AAC1G,OAAO,EAAE,gBAAgB,EAAE,MAAM,sBAAsB,CAAA;AACvD,OAAO,EAAE,gBAAgB,EAAE,MAAM,4BAA4B,CAAA;AAG7D,OAAO,EAAE,OAAO,EAAE,MAAM,8BAA8B,CAAA;AACtD,OAAO,EAAE,WAAW,EAAE,MAAM,uBAAuB,CAAA;AACnD,OAAO,EAAE,iBAAiB,EAAE,MAAM,6BAA6B,CAAA;AAE/D,gBAAgB,EAAE,CAAA;AAiBlB,MAAM,OAAO,MAAM;IAClB,IAAI,CAAC,EAAE,KAAK,EAAsB;QACjC,OAAO,CAAC,CAAC,iBAAiB,EAAE,CAAC,CAAC,CAAC,WAAW,EAAE,EAAE,QAAQ,EAAE,KAAK,CAAC,qBAAqB,CAAC,WAAW,EAAE,EAAE,CAAC,EAAE,IAAI,CAAC,gBAAgB,CAAC,KAAK,CAAC,CAAC,CAAC,CAAA;IACrI,CAAC;IAED;;;OAGG;IACK,gBAAgB,CAAC,KAAkB;QAC1C,OAAO,CAAC,CAAC,0CAA0C,EAAE;YACpD,KAAK,CAAC,SAAS,CAAC,CAAC,CAAC,KAAK,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC,IAAI;YAC1C,CAAC,CAAC,gBAAgB,EAAE,KAAK,CAAC,qBAAqB,CAAC,eAAe,EAAE,CAAC;YAClE,CAAC,CAAC,iBAAiB,CAAC;YACpB,CAAC,CAAC,MAAM,EAAE,IAAI,CAAC,aAAa,EAAE,CAAC;SAC/B,CAAC,CAAA;IACH,CAAC;IAEO,aAAa;QACpB,2FAA2F;QAC3F,OAAO;YACN,CAAC,CAAC,SAAS,EAAE;gBACZ,KAAK,EAAE,cAAc;gBACrB,IAAI,EAAE,GAAG,EAAE,4BAAe;gBAC1B,IAAI,EAAE,WAAW;gBACjB,gBAAgB,EAAE,WAAW;gBAC7B,MAAM,sCAAuB;aAC7B,CAAC;YACF,uCAAuC;YACvC,OAAO,CAAC,MAAM,CAAC,sBAAsB,EAAE,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,SAAS,CAAC,WAAW,CAAC,eAAe,CAAC;gBAChG,CAAC,CAAC,CAAC,CAAC,SAAS,EAAE;oBACb,KAAK,EAAE,gBAAgB;oBACvB,IAAI,EAAE,GAAG,EAAE,oCAAmB;oBAC9B,IAAI,EAAE,eAAe;oBACrB,gBAAgB,EAAE,gBAAgB,CAAC,eAAe,CAAC,IAAI,gBAAgB,CAAC,kBAAkB,CAAC;oBAC3F,MAAM,sCAAuB;iBAC5B,CAAC;gBACJ,CAAC,CAAC,IAAI;YACP,uCAAuC;YACvC,OAAO,CAAC,MAAM,CAAC,sBAAsB,EAAE,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,SAAS,CAAC,WAAW,CAAC,eAAe,CAAC;gBAChG,CAAC,CAAC,CAAC,CAAC,SAAS,EAAE;oBACb,KAAK,EAAE,gBAAgB;oBACvB,IAAI,EAAE,GAAG,EAAE,oCAAmB;oBAC9B,IAAI,EAAE,eAAe;oBACrB,MAAM,sCAAuB;oBAC7B,KAAK,EAAE,GAAG,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC,UAAU,CAAC,eAAe,CAAC;iBACrD,CAAC;gBACJ,CAAC,CAAC,IAAI;SACP,CAAA;IACF,CAAC;CACD","sourcesContent":["import m, { Children, ClassComponent, Vnode } from \"mithril\"\nimport { NavBar } from \"./base/NavBar.js\"\nimport { isSelectedPrefix, NavButton, NavButtonColor } from \"./base/NavButton.js\"\nimport { FeatureType } from \"../api/common/TutanotaConstants.js\"\nimport { BootIcons } from \"./base/icons/BootIcons.js\"\nimport { CALENDAR_PREFIX, CONTACTLIST_PREFIX, CONTACTS_PREFIX, MAIL_PREFIX } from \"../misc/RouteChange.js\"\nimport { assertMainOrNode } from \"../api/common/Env.js\"\nimport { OfflineIndicator } from \"./base/OfflineIndicator.js\"\nimport { OfflineIndicatorViewModel } from \"./base/OfflineIndicatorViewModel.js\"\nimport { NewsModel } from \"../misc/news/NewsModel.js\"\nimport { locator } from \"../api/main/CommonLocator.js\"\nimport { ProgressBar } from \"./base/ProgressBar.js\"\nimport { DesktopBaseHeader } from \"./base/DesktopBaseHeader.js\"\n\nassertMainOrNode()\n\n/** Attrs that are used by different header components in the app.  */\nexport interface AppHeaderAttrs {\n\tnewsModel: NewsModel\n\tofflineIndicatorModel: OfflineIndicatorViewModel\n}\n\nexport interface HeaderAttrs extends AppHeaderAttrs {\n\trightView?: Children\n\thandleBackPress?: () => boolean\n\t/** search bar, only rendered when NOT using bottom navigation */\n\tsearchBar?: () => Children\n\t/** content in the center of the search bar, where title and offline status normally are */\n\tcenterContent?: () => Children\n}\n\nexport class Header implements ClassComponent<HeaderAttrs> {\n\tview({ attrs }: Vnode<HeaderAttrs>): Children {\n\t\treturn m(DesktopBaseHeader, [m(ProgressBar, { progress: attrs.offlineIndicatorModel.getProgress() }), this.renderNavigation(attrs)])\n\t}\n\n\t/**\n\t * render the search and navigation bar in three-column layouts. if there is a navigation, also render an offline indicator.\n\t * @private\n\t */\n\tprivate renderNavigation(attrs: HeaderAttrs): Children {\n\t\treturn m(\".flex-grow.flex.justify-end.items-center\", [\n\t\t\tattrs.searchBar ? attrs.searchBar() : null,\n\t\t\tm(OfflineIndicator, attrs.offlineIndicatorModel.getCurrentAttrs()),\n\t\t\tm(\".nav-bar-spacer\"),\n\t\t\tm(NavBar, this.renderButtons()),\n\t\t])\n\t}\n\n\tprivate renderButtons(): Children {\n\t\t// We assign click listeners to buttons to move focus correctly if the view is already open\n\t\treturn [\n\t\t\tm(NavButton, {\n\t\t\t\tlabel: \"emails_label\",\n\t\t\t\ticon: () => BootIcons.Mail,\n\t\t\t\thref: MAIL_PREFIX,\n\t\t\t\tisSelectedPrefix: MAIL_PREFIX,\n\t\t\t\tcolors: NavButtonColor.Header,\n\t\t\t}),\n\t\t\t// not available for external mailboxes\n\t\t\tlocator.logins.isInternalUserLoggedIn() && !locator.logins.isEnabled(FeatureType.DisableContacts)\n\t\t\t\t? m(NavButton, {\n\t\t\t\t\t\tlabel: \"contacts_label\",\n\t\t\t\t\t\ticon: () => BootIcons.Contacts,\n\t\t\t\t\t\thref: CONTACTS_PREFIX,\n\t\t\t\t\t\tisSelectedPrefix: isSelectedPrefix(CONTACTS_PREFIX) || isSelectedPrefix(CONTACTLIST_PREFIX),\n\t\t\t\t\t\tcolors: NavButtonColor.Header,\n\t\t\t\t  })\n\t\t\t\t: null,\n\t\t\t// not available for external mailboxes\n\t\t\tlocator.logins.isInternalUserLoggedIn() && !locator.logins.isEnabled(FeatureType.DisableCalendar)\n\t\t\t\t? m(NavButton, {\n\t\t\t\t\t\tlabel: \"calendar_label\",\n\t\t\t\t\t\ticon: () => BootIcons.Calendar,\n\t\t\t\t\t\thref: CALENDAR_PREFIX,\n\t\t\t\t\t\tcolors: NavButtonColor.Header,\n\t\t\t\t\t\tclick: () => m.route.get().startsWith(CALENDAR_PREFIX),\n\t\t\t\t  })\n\t\t\t\t: null,\n\t\t]\n\t}\n}\n"]}