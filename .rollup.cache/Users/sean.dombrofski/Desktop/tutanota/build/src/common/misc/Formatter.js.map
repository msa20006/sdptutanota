{"version":3,"file":"Formatter.js","sourceRoot":"","sources":["../../../../src/common/misc/Formatter.ts"],"names":[],"mappings":"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","sourcesContent":["import { lang } from \"./LanguageViewModel\"\nimport { isSameDayOfDate, pad } from \"@tutao/tutanota-utils\"\nimport type { UserSettingsGroupRoot } from \"../api/entities/tutanota/TypeRefs.js\"\nimport { TimeFormat } from \"../api/common/TutanotaConstants\"\nimport { assertMainOrNode } from \"../api/common/Env\"\nimport { cleanMailAddress } from \"../api/common/utils/CommonCalendarUtils.js\"\n\nassertMainOrNode()\n\nexport function formatMonthWithYear(date: Date): string {\n\treturn lang.formats.monthWithYear.format(date)\n}\n\n/**\n * Returns the given date formatted in mm/yy\n */\nexport function formatShortMonthYear2Digit(date: Date): string {\n\treturn lang.formats.shortMonthYear2Digit.format(date)\n}\n\nexport function formatMonthWithFullYear(date: Date): string {\n\treturn lang.formats.monthWithFullYear.format(date)\n}\n\nexport function formatDate(date: Date): string {\n\treturn lang.formats.simpleDate.format(date)\n}\n\nexport function formatDateWithMonth(date: Date): string {\n\treturn lang.formats.dateWithMonth.format(date)\n}\n\nexport function formatDateWithWeekday(date: Date): string {\n\tif (date.getFullYear() === new Date().getFullYear()) {\n\t\treturn lang.formats.dateWithWeekday.format(date)\n\t} else {\n\t\treturn lang.formats.dateWithWeekdayAndYear.format(date)\n\t}\n}\n\nexport function formatDateWithWeekdayAndYear(date: Date): string {\n\treturn lang.formats.dateWithWeekdayAndYear.format(date)\n}\n\nexport function formatDateWithWeekdayAndYearLong(date: Date): string {\n\treturn lang.formats.dateWithWeekdayAndYearLong.format(date)\n}\n\nexport function formatDateTimeFromYesterdayOn(date: Date): string {\n\tlet dateString\n\tlet startOfToday = new Date().setHours(0, 0, 0, 0)\n\tlet startOfYesterday = startOfToday - 1000 * 60 * 60 * 24\n\n\tif (date.getTime() >= startOfToday) {\n\t\tdateString = \"\"\n\t} else if (startOfToday > date.getTime() && date.getTime() >= startOfYesterday) {\n\t\tdateString = lang.get(\"yesterday_label\")\n\t} else {\n\t\tdateString = formatDateWithWeekday(date)\n\t}\n\n\treturn (dateString + \" \" + formatTime(date)).trim()\n}\n\nexport function formatTimeOrDateOrYesterday(date: Date): string {\n\tconst startOfToday = new Date().setHours(0, 0, 0, 0)\n\tif (date.getTime() >= startOfToday) {\n\t\treturn formatTime(date)\n\t}\n\tconst yesterday = new Date(startOfToday)\n\tyesterday.setDate(yesterday.getDate() - 1)\n\tif (isSameDayOfDate(date, yesterday)) {\n\t\treturn lang.get(\"yesterday_label\")\n\t} else if (date.getFullYear() === new Date().getFullYear()) {\n\t\treturn lang.formats.dateWithoutYear.format(date)\n\t} else {\n\t\treturn lang.formats.dateWithMonth.format(date)\n\t}\n}\n\nexport function formatTime(date: Date): string {\n\treturn lang.formats.time.format(date)\n}\n\nexport function formatShortTime(date: Date): string {\n\treturn lang.formats.shortTime.format(date)\n}\n\nexport function formatDateTime(date: Date): string {\n\treturn lang.formats.dateTime.format(date)\n}\n\nexport function formatDateTimeShort(date: Date): string {\n\treturn lang.formats.dateTimeShort.format(date)\n}\n\nexport function formatDateWithWeekdayAndTime(date: Date): string {\n\treturn lang.formats.dateWithWeekdayAndTime.format(date)\n}\n\nexport function formatDateWithTimeIfNotEven(date: Date): string {\n\tif (\n\t\t(date.getHours() === 0 && date.getMinutes() === 0) || // If it's beginning of the day\n\t\t(date.getHours() === 23 && date.getMinutes() === 59 && date.getSeconds() === 59)\n\t) {\n\t\t// or the end of the day\n\t\treturn formatDate(date)\n\t} else {\n\t\treturn formatDateTimeShort(date)\n\t}\n}\n\nexport function formatWeekdayShort(date: Date): string {\n\treturn lang.formats.weekdayShort.format(date)\n}\n\nexport function formatWeekdayNarrow(date: Date): string {\n\treturn lang.formats.weekdayNarrow.format(date)\n}\n\nexport function dateWithWeekdayWoMonth(date: Date): string {\n\treturn lang.formats.dateWithWeekdayWoMonth.format(date)\n}\n\nexport function formatMonthShortWithFullYear(date: Date): string {\n\treturn lang.formats.monthShortWithFullYear.format(date)\n}\n\n/**\n * Formats the given size in bytes to a better human readable string using B, KB, MB, GB, TB.\n */\nexport function formatStorageSize(sizeInBytes: number): string {\n\tconst units = [\"B\", \"kB\", \"MB\", \"GB\", \"TB\"]\n\tconst narrowNoBreakSpace = \" \" // this space is the special unicode narrow no-break character\n\n\tlet unitIndex = 0\n\n\twhile (sizeInBytes >= 1000) {\n\t\tsizeInBytes /= 1000 // we use 1000 instead of 1024\n\n\t\tunitIndex++\n\t}\n\n\t// round to 1 digit after comma\n\tsizeInBytes = Math.floor(sizeInBytes * 10) / 10\n\treturn sizeInBytes + narrowNoBreakSpace + units[unitIndex]\n}\n\nexport function urlEncodeHtmlTags(text: string): string {\n\treturn text.replace(/&/g, \"&amp;\").replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\").replace(/\"/g, \"&quot;\").replace(/'/g, \"&#039;\")\n}\n\nexport function convertTextToHtml(text: string) {\n\treturn text.replace(/(\\r)?\\n/g, \"<br>\")\n}\n\nexport function getHourCycle(userSettings: UserSettingsGroupRoot): \"h12\" | \"h23\" {\n\treturn userSettings.timeFormat === TimeFormat.TWELVE_HOURS ? \"h12\" : \"h23\"\n}\n\nexport function timeStringFromParts(hours: number, minutes: number, amPm: boolean): string {\n\tlet minutesString = pad(minutes, 2)\n\n\tif (amPm) {\n\t\tif (hours === 0) {\n\t\t\treturn `12:${minutesString} am`\n\t\t} else if (hours === 12) {\n\t\t\treturn `12:${minutesString} pm`\n\t\t} else if (hours > 12) {\n\t\t\treturn `${hours - 12}:${minutesString} pm`\n\t\t} else {\n\t\t\treturn `${hours}:${minutesString} am`\n\t\t}\n\t} else {\n\t\tlet hoursString = pad(hours, 2)\n\t\treturn hoursString + \":\" + minutesString\n\t}\n}\n\nexport function formatMailAddressFromParts(name: string, domain: string): string {\n\treturn cleanMailAddress(`${name}@${domain}`)\n}\n"]}