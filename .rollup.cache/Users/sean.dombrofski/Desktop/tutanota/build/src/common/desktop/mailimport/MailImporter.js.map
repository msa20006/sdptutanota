{"version":3,"file":"MailImporter.js","sourceRoot":"","sources":["../../../../../src/common/desktop/mailimport/MailImporter.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,MAAM,EAAc,MAAM,0BAA0B,CAAA;AAC7D,OAAO,EAAE,IAAI,EAAE,MAAM,iCAAiC,CAAA;AACtD,OAAO,EAAE,eAAe,EAAE,MAAM,mCAAmC,CAAA;AAEnE,OAAO,CAAC,MAAM,SAAS,CAAA;AACvB,OAAO,EAAE,gBAAgB,EAAyB,MAAM,oCAAoC,CAAA;AAI5F,OAAO,EAAE,MAAM,EAAE,MAAM,uBAAuB,CAAA;AAE9C;;;;GAIG;AACH,MAAM,UAAU,qBAAqB,CAAC,eAAiC,EAAE,QAAqE;IAC7I,IAAI,sBAAsB,GAAG,eAAe,CAAC,CAAC,CAAC,CAAA;IAE/C,MAAM,MAAM,GAAG,IAAI,MAAM,yCAAuB;QAC/C,IAAI,EAAE,GAAG,EAAE,CAAC;YACX,CAAC,CAAC,eAAe,EAAE;gBAClB,IAAI,EAAE;oBACL;wBACC,IAAI,wCAAsB;wBAC1B,KAAK,EAAE,eAAe;wBACtB,KAAK,EAAE,GAAG,EAAE;4BACX,MAAM,CAAC,KAAK,EAAE,CAAA;wBACf,CAAC;qBACD;iBACD;gBACD,MAAM,EAAE,kBAAkB;gBAC1B,KAAK,EAAE;oBACN;wBACC,IAAI,oCAAoB;wBACxB,KAAK,EAAE,uBAAuB;wBAC9B,KAAK,EAAE,GAAG,EAAE;4BACX,QAAQ,CAAC,MAAM,EAAE,sBAAsB,CAAC,MAAM,CAAC,CAAA;wBAChD,CAAC;qBACD;iBACD;aACD,CAAC;YAEF,CAAC,CAAC,kDAAkD,EAAE;gBACrD,CAAC,CAAC,wBAAwB,EAAE,IAAI,CAAC,GAAG,CAAC,2BAA2B,CAAC,CAAC;gBAClE,CAAC,CAAC,gBAAgB,EAAE;oBACnB,KAAK,EAAE,kBAAkB;oBACzB,KAAK,EAAE,eAAe,CAAC,GAAG,CAAC,CAAC,UAAU,EAAE,EAAE;wBACzC,OAAO;4BACN,IAAI,EAAE,MAAM,CAAC,GAAG,EAAE,UAAU,CAAC,KAAK,CAAC,GAAG,UAAU,CAAC,MAAM,CAAC,IAAI;4BAC5D,KAAK,EAAE,UAAU,CAAC,MAAM;yBACxB,CAAA;oBACF,CAAC,CAAC;oBACF,aAAa,EAAE,sBAAsB,CAAC,MAAM;oBAC5C,uBAAuB,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,sBAAsB,CAAC,MAAM,GAAG,CAAC,CAAC;oBACnE,IAAI,iCAAkB;iBACsB,CAAC;aAC9C,CAAC;SACF;KACD,CAAC,CAAC,IAAI,EAAE,CAAA;AACV,CAAC","sourcesContent":["import { Dialog, DialogType } from \"../../gui/base/Dialog.js\"\nimport { lang } from \"../../misc/LanguageViewModel.js\"\nimport { DialogHeaderBar } from \"../../gui/base/DialogHeaderBar.js\"\nimport { ButtonType } from \"../../gui/base/Button.js\"\nimport m from \"mithril\"\nimport { DropDownSelector, DropDownSelectorAttrs } from \"../../gui/base/DropDownSelector.js\"\nimport { BootIcons } from \"../../gui/base/icons/BootIcons.js\"\nimport { MailFolder } from \"../../api/entities/tutanota/TypeRefs\"\nimport { IndentedFolder } from \"../../api/common/mail/FolderSystem\"\nimport { repeat } from \"@tutao/tutanota-utils\"\n\n/**\n * Shows a dialog with the users folders that are able to import mails.\n * @param indentedFolders List of user's folders\n * @param okAction\n */\nexport function folderSelectionDialog(indentedFolders: IndentedFolder[], okAction: (dialog: Dialog, selectedMailFolder: MailFolder) => unknown) {\n\tlet selectedIndentedFolder = indentedFolders[0]\n\n\tconst dialog = new Dialog(DialogType.EditSmall, {\n\t\tview: () => [\n\t\t\tm(DialogHeaderBar, {\n\t\t\t\tleft: [\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: ButtonType.Secondary,\n\t\t\t\t\t\tlabel: \"cancel_action\",\n\t\t\t\t\t\tclick: () => {\n\t\t\t\t\t\t\tdialog.close()\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\tmiddle: \"mailFolder_label\",\n\t\t\t\tright: [\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: ButtonType.Primary,\n\t\t\t\t\t\tlabel: \"pricing.select_action\",\n\t\t\t\t\t\tclick: () => {\n\t\t\t\t\t\t\tokAction(dialog, selectedIndentedFolder.folder)\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t}),\n\n\t\t\tm(\".dialog-max-height.plr-l.pt.pb.text-break.scroll\", [\n\t\t\t\tm(\".text-break.selectable\", lang.get(\"mailImportSelection_label\")),\n\t\t\t\tm(DropDownSelector, {\n\t\t\t\t\tlabel: \"mailFolder_label\",\n\t\t\t\t\titems: indentedFolders.map((mailFolder) => {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tname: repeat(\".\", mailFolder.level) + mailFolder.folder.name,\n\t\t\t\t\t\t\tvalue: mailFolder.folder,\n\t\t\t\t\t\t}\n\t\t\t\t\t}),\n\t\t\t\t\tselectedValue: selectedIndentedFolder.folder,\n\t\t\t\t\tselectionChangedHandler: (v) => (selectedIndentedFolder.folder = v),\n\t\t\t\t\ticon: BootIcons.Expand,\n\t\t\t\t} satisfies DropDownSelectorAttrs<MailFolder>),\n\t\t\t]),\n\t\t],\n\t}).show()\n}\n"]}