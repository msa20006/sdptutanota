{"version":3,"file":"Label.js","sourceRoot":"","sources":["../../../../../src/common/gui/base/Label.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,aAAa,EAAE,MAAM,oBAAoB,CAAA;AAClD,OAAO,CAAC,MAAM,SAAS,CAAA;AACvB,OAAO,EAAE,UAAU,EAAE,MAAM,eAAe,CAAA;AAC1C,OAAO,EAAE,IAAI,EAAE,MAAM,YAAY,CAAA;AACjC,OAAO,EAAE,KAAK,EAAE,MAAM,aAAa,CAAA;AACnC,OAAO,EAAE,YAAY,EAAE,MAAM,YAAY,CAAA;AAEzC,MAAM,yBAAyB,GAAG,GAAG,CAAC,QAAQ,CAAC,OAAO,EAAE,qCAAqC,CAAC,CAAA;AAE9F,MAAM,UAAU,aAAa,CAAC,eAA8B;IAC3D,MAAM,UAAU,GAAG,eAAe,IAAI,KAAK,CAAC,cAAc,CAAA;IAC1D,MAAM,WAAW,GAAG,CAAC,YAAY,CAAC,KAAK,CAAC,UAAU,CAAC,CAAA;IACnD,4EAA4E;IAC5E,OAAO,WAAW,CAAC,CAAC,CAAC,sBAAsB,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,UAAU,CAAA;AACrE,CAAC;AAED,SAAS,sBAAsB,CAAC,KAAa;IAC5C,oHAAoH;IACpH,uCAAuC;IACvC,OAAO,yBAAyB,CAAC,CAAC,CAAC,YAAY,KAAK,wBAAwB,CAAC,CAAC,CAAC,YAAY,KAAK,yBAAyB,CAAA;AAC1H,CAAC;AAED;;GAEG;AACH,MAAM,CAAC,MAAM,KAAK,GAAG,aAAa,CAAC,SAAS,KAAK,CAAC,EAAE,IAAI,EAAE,KAAK,EAA0C;IACxG,MAAM,UAAU,GAAG,aAAa,CAAC,KAAK,CAAC,CAAA;IACvC,OAAO,CAAC,CACP,sDAAsD,EACtD;QACC,KAAK,EAAE;YACN,2HAA2H;YAC3H,eAAe,EAAE,UAAU;YAC3B,KAAK,EAAE,UAAU,CAAC,KAAK,IAAI,KAAK,CAAC,cAAc,CAAC;YAChD,OAAO,EAAE,OAAO,IAAI,CAAC,QAAQ,IAAI;SACjC;KACD,EACD,IAAI,CACJ,CAAA;AACF,CAAC,CAAC,CAAA","sourcesContent":["import { pureComponent } from \"./PureComponent.js\"\nimport m from \"mithril\"\nimport { colorForBg } from \"./GuiUtils.js\"\nimport { size } from \"../size.js\"\nimport { theme } from \"../theme.js\"\nimport { isColorLight } from \"./Color.js\"\n\nconst supportsRelativeHslColors = CSS.supports(\"color\", `hsl(from #ccc h calc(min(50, s)) l)`)\n\nexport function getLabelColor(backgroundColor: string | null): string {\n\tconst labelColor = backgroundColor ?? theme.content_accent\n\tconst isDarkTheme = !isColorLight(theme.content_bg)\n\t// make a color have the same hue and lightness with saturation capped to 50\n\treturn isDarkTheme ? limitedSaturationColor(labelColor) : labelColor\n}\n\nfunction limitedSaturationColor(color: string): string {\n\t// iOS only implements relative HSL colors from 16.4 on and only the legacy syntax (with percents) while FF does not\n\t// recognize the legacy syntax anymore.\n\treturn supportsRelativeHslColors ? `hsl(from ${color} h calc(min(50, s)) l)` : `hsl(from ${color} h calc(min(50%, s)) l)`\n}\n\n/**\n * Displays a mail label with color and name.\n */\nexport const Label = pureComponent(function Label({ text, color }: { text: string; color: string | null }) {\n\tconst labelColor = getLabelColor(color)\n\treturn m(\n\t\t\"span.small.text-center.text-ellipsis.border-radius-m\",\n\t\t{\n\t\t\tstyle: {\n\t\t\t\t// in dark theme override saturation to aid readability. This is not relative but absolute saturation. We preserve the hue.\n\t\t\t\tbackgroundColor: labelColor,\n\t\t\t\tcolor: colorForBg(color ?? theme.content_accent),\n\t\t\t\tpadding: `1px ${size.vpad_xsm}px`,\n\t\t\t},\n\t\t},\n\t\ttext,\n\t)\n})\n"]}