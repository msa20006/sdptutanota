{"version":3,"file":"MobileContactSuggestionProvider.js","sourceRoot":"","sources":["../../../../../src/common/native/main/MobileContactSuggestionProvider.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,eAAe,EAAE,MAAM,wCAAwC,CAAA;AAKxE,MAAM,OAAO,+BAA+B;IAGd;IAFrB,kBAAkB,GAAY,KAAK,CAAA;IAE3C,YAA6B,oBAA0C;QAA1C,yBAAoB,GAApB,oBAAoB,CAAsB;IAAG,CAAC;IAE3E,KAAK,CAAC,qBAAqB,CAAC,KAAa;QACxC,IAAI,IAAI,CAAC,kBAAkB,EAAE,CAAC;YAC7B,OAAO,EAAE,CAAA;QACV,CAAC;QACD,IAAI,CAAC;YACJ,OAAO,MAAM,IAAI,CAAC,oBAAoB,CAAC,eAAe,CAAC,KAAK,CAAC,CAAA;QAC9D,CAAC;QAAC,OAAO,CAAC,EAAE,CAAC;YACZ,IAAI,CAAC,YAAY,eAAe,EAAE,CAAC;gBAClC,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAA;gBAC9B,OAAO,EAAE,CAAA;YACV,CAAC;iBAAM,CAAC;gBACP,MAAM,CAAC,CAAA;YACR,CAAC;QACF,CAAC;IACF,CAAC;CACD","sourcesContent":["import { PermissionError } from \"../../api/common/error/PermissionError\"\nimport { MobileContactsFacade } from \"../common/generatedipc/MobileContactsFacade\"\nimport { ContactSuggestion } from \"../common/generatedipc/ContactSuggestion\"\nimport { ContactSuggestionProvider } from \"../../misc/RecipientsSearchModel\"\n\nexport class MobileContactSuggestionProvider implements ContactSuggestionProvider {\n\tprivate gotPermissionError: boolean = false\n\n\tconstructor(private readonly mobileContactsFacade: MobileContactsFacade) {}\n\n\tasync getContactSuggestions(query: string): Promise<readonly ContactSuggestion[]> {\n\t\tif (this.gotPermissionError) {\n\t\t\treturn []\n\t\t}\n\t\ttry {\n\t\t\treturn await this.mobileContactsFacade.findSuggestions(query)\n\t\t} catch (e) {\n\t\t\tif (e instanceof PermissionError) {\n\t\t\t\tthis.gotPermissionError = true\n\t\t\t\treturn []\n\t\t\t} else {\n\t\t\t\tthrow e\n\t\t\t}\n\t\t}\n\t}\n}\n"]}