{"version":3,"file":"CalendarViewerActions.js","sourceRoot":"","sources":["../../../../../src/mail-app/contacts/view/CalendarViewerActions.ts"],"names":[],"mappings":"AAAA,OAAO,CAA2C,MAAM,SAAS,CAAA;AAEjE,OAAO,EAAE,UAAU,EAAE,MAAM,wCAAwC,CAAA;AAEnE,OAAO,EAAE,UAAU,EAAY,MAAM,oCAAoC,CAAA;AACzE,OAAO,EAAE,IAAI,EAAE,MAAM,iDAAiD,CAAA;AAStE;;;GAGG;AACH,MAAM,OAAO,qBAAqB;IACzB,SAAS,GAAoB,EAAE,CAAA;IAEvC,IAAI,CAAC,EAAE,KAAK,EAAmC;QAC9C,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,MAAM,EAAE,QAAQ,EAAE,GAAG,KAAK,CAAA;QACnD,MAAM,aAAa,GAAe,EAAE,CAAA;QACpC,IAAI,KAAK,IAAI,IAAI,EAAE,CAAC;YACnB,IAAI,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE,CAAC;gBACzB,aAAa,CAAC,IAAI,CACjB,CAAC,CAAC,UAAU,EAAE;oBACb,KAAK,EAAE,aAAa;oBACpB,KAAK,EAAE,GAAG,EAAE,CAAC,MAAM,CAAC,KAAK,CAAC;oBAC1B,IAAI,yBAAY;iBAChB,CAAC,CACF,CAAA;YACF,CAAC;YAED,IAAI,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,EAAE,CAAC;gBAC3B,aAAa,CAAC,IAAI,CACjB,CAAC,CAAC,UAAU,EAAE;oBACb,KAAK,EAAE,eAAe;oBACtB,KAAK,EAAE,GAAG,EAAE,CAAC,QAAQ,CAAC,KAAK,CAAC;oBAC5B,IAAI,6BAAc;iBAClB,CAAC,CACF,CAAA;YACF,CAAC;YACD,IAAI,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,EAAE,CAAC;gBAC3B,aAAa,CAAC,IAAI,CACjB,CAAC,CAAC,UAAU,EAAE;oBACb,KAAK,EAAE,eAAe;oBACtB,KAAK,EAAE,GAAG,EAAE,CAAC,QAAQ,CAAC,KAAK,CAAC;oBAC5B,IAAI,2BAAa;iBACjB,CAAC,CACF,CAAA;YACF,CAAC;QACF,CAAC;QACD,OAAO,aAAa,CAAA;IACrB,CAAC;IAED,QAAQ,CAAC,KAAyC;QACjD,UAAU,CAAC,mBAAmB,CAAC,IAAI,CAAC,SAAS,CAAC,CAAA;QAC9C,IAAI,CAAC,SAAS,CAAC,MAAM,GAAG,CAAC,CAAA;QACzB,MAAM,EAAE,KAAK,EAAE,MAAM,EAAE,QAAQ,EAAE,QAAQ,EAAE,GAAG,KAAK,CAAC,KAAK,CAAA;QACzD,IAAI,KAAK,IAAI,IAAI;YAAE,OAAM;QACzB,IAAI,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE,CAAC;YACzB,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC;gBACnB,GAAG,EAAE,IAAI,CAAC,CAAC;gBACX,IAAI,EAAE,GAAG,EAAE;oBACV,MAAM,CAAC,KAAK,CAAC,CAAA;gBACd,CAAC;gBACD,IAAI,EAAE,aAAa;aACnB,CAAC,CAAA;QACH,CAAC;QACD,IAAI,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,EAAE,CAAC;YAC3B,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC;gBACnB,GAAG,EAAE,IAAI,CAAC,CAAC;gBACX,SAAS,EAAE,IAAI;gBACf,IAAI,EAAE,GAAG,EAAE;oBACV,QAAQ,CAAC,KAAK,CAAC,CAAA;gBAChB,CAAC;gBACD,IAAI,EAAE,eAAe;aACrB,CAAC,CAAA;QACH,CAAC;QAED,UAAU,CAAC,iBAAiB,CAAC,IAAI,CAAC,SAAS,CAAC,CAAA;IAC7C,CAAC;IAED,QAAQ;QACP,UAAU,CAAC,mBAAmB,CAAC,IAAI,CAAC,SAAS,CAAC,CAAA;IAC/C,CAAC;IAEO,SAAS,CAAC,KAAoB;QACrC,OAAO,IAAI,CAAA;IACZ,CAAC;IAEO,SAAS,CAAC,KAAoB;QACrC,OAAO,IAAI,CAAA;IACZ,CAAC;IAEO,OAAO,CAAC,KAAoB;QACnC,OAAO,IAAI,CAAA;IACZ,CAAC;CACD","sourcesContent":["import m, { Children, Component, Vnode, VnodeDOM } from \"mithril\"\nimport { CalendarEvent } from \"../../../common/api/entities/tutanota/TypeRefs.js\"\nimport { IconButton } from \"../../../common/gui/base/IconButton.js\"\nimport { Icons } from \"../../../common/gui/base/icons/Icons.js\"\nimport { keyManager, Shortcut } from \"../../../common/misc/KeyManager.js\"\nimport { Keys } from \"../../../common/api/common/TutanotaConstants.js\"\n\nexport interface CalendarViewToolbarAttrs {\n\tevent: CalendarEvent | null\n\tonEdit: (event: CalendarEvent) => unknown\n\tonDelete: (event: CalendarEvent) => unknown\n\tonExport: (event: CalendarEvent) => unknown\n}\n\n/**\n * Displays actions for calendar event in search view\n * Also registers shortcuts\n */\nexport class CalendarViewerActions implements Component<CalendarViewToolbarAttrs> {\n\tprivate shortcuts: Array<Shortcut> = []\n\n\tview({ attrs }: Vnode<CalendarViewToolbarAttrs>): Children {\n\t\tconst { event, onDelete, onEdit, onExport } = attrs\n\t\tconst actionButtons: Children[] = []\n\t\tif (event != null) {\n\t\t\tif (this.canEdit(event)) {\n\t\t\t\tactionButtons.push(\n\t\t\t\t\tm(IconButton, {\n\t\t\t\t\t\ttitle: \"edit_action\",\n\t\t\t\t\t\tclick: () => onEdit(event),\n\t\t\t\t\t\ticon: Icons.Edit,\n\t\t\t\t\t}),\n\t\t\t\t)\n\t\t\t}\n\n\t\t\tif (this.canExport(event)) {\n\t\t\t\tactionButtons.push(\n\t\t\t\t\tm(IconButton, {\n\t\t\t\t\t\ttitle: \"export_action\",\n\t\t\t\t\t\tclick: () => onExport(event),\n\t\t\t\t\t\ticon: Icons.Export,\n\t\t\t\t\t}),\n\t\t\t\t)\n\t\t\t}\n\t\t\tif (this.canDelete(event)) {\n\t\t\t\tactionButtons.push(\n\t\t\t\t\tm(IconButton, {\n\t\t\t\t\t\ttitle: \"delete_action\",\n\t\t\t\t\t\tclick: () => onDelete(event),\n\t\t\t\t\t\ticon: Icons.Trash,\n\t\t\t\t\t}),\n\t\t\t\t)\n\t\t\t}\n\t\t}\n\t\treturn actionButtons\n\t}\n\n\tonupdate(vnode: VnodeDOM<CalendarViewToolbarAttrs>) {\n\t\tkeyManager.unregisterShortcuts(this.shortcuts)\n\t\tthis.shortcuts.length = 0\n\t\tconst { event, onEdit, onDelete, onExport } = vnode.attrs\n\t\tif (event == null) return\n\t\tif (this.canEdit(event)) {\n\t\t\tthis.shortcuts.push({\n\t\t\t\tkey: Keys.E,\n\t\t\t\texec: () => {\n\t\t\t\t\tonEdit(event)\n\t\t\t\t},\n\t\t\t\thelp: \"edit_action\",\n\t\t\t})\n\t\t}\n\t\tif (this.canExport(event)) {\n\t\t\tthis.shortcuts.push({\n\t\t\t\tkey: Keys.E,\n\t\t\t\tctrlOrCmd: true,\n\t\t\t\texec: () => {\n\t\t\t\t\tonExport(event)\n\t\t\t\t},\n\t\t\t\thelp: \"export_action\",\n\t\t\t})\n\t\t}\n\n\t\tkeyManager.registerShortcuts(this.shortcuts)\n\t}\n\n\tonremove() {\n\t\tkeyManager.unregisterShortcuts(this.shortcuts)\n\t}\n\n\tprivate canExport(event: CalendarEvent) {\n\t\treturn true\n\t}\n\n\tprivate canDelete(event: CalendarEvent) {\n\t\treturn true\n\t}\n\n\tprivate canEdit(event: CalendarEvent) {\n\t\treturn true\n\t}\n}\n"]}