{"version":3,"file":"TemplatePopup.js","sourceRoot":"","sources":["../../../../../src/mail-app/templates/view/TemplatePopup.ts"],"names":[],"mappings":"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","sourcesContent":["import m, { Children } from \"mithril\"\nimport type { ModalComponent } from \"../../../common/gui/base/Modal\"\nimport { modal } from \"../../../common/gui/base/Modal\"\nimport { px } from \"../../../common/gui/size\"\nimport type { Shortcut } from \"../../../common/misc/KeyManager\"\nimport { isKeyPressed } from \"../../../common/misc/KeyManager\"\nimport stream from \"mithril/stream\"\nimport Stream from \"mithril/stream\"\nimport { Keys, ShareCapability } from \"../../../common/api/common/TutanotaConstants\"\nimport { TemplatePopupResultRow } from \"./TemplatePopupResultRow.js\"\nimport { Icons } from \"../../../common/gui/base/icons/Icons\"\nimport { TemplateExpander } from \"./TemplateExpander.js\"\nimport type { LanguageCode } from \"../../../common/misc/LanguageViewModel\"\nimport { lang, languageByCode } from \"../../../common/misc/LanguageViewModel\"\nimport type { windowSizeListener } from \"../../../common/misc/WindowFacade\"\nimport { windowFacade } from \"../../../common/misc/WindowFacade\"\nimport type { EmailTemplate, TemplateGroupRoot } from \"../../../common/api/entities/tutanota/TypeRefs.js\"\nimport { TemplateGroupRootTypeRef } from \"../../../common/api/entities/tutanota/TypeRefs.js\"\nimport type { ButtonAttrs } from \"../../../common/gui/base/Button.js\"\nimport { Button, ButtonColor, ButtonType } from \"../../../common/gui/base/Button.js\"\nimport { SELECT_NEXT_TEMPLATE, SELECT_PREV_TEMPLATE, TEMPLATE_SHORTCUT_PREFIX, TemplatePopupModel } from \"../model/TemplatePopupModel.js\"\nimport { attachDropdown, DomRectReadOnlyPolyfilled, PosRect } from \"../../../common/gui/base/Dropdown.js\"\nimport { debounce, downcast, neverNull } from \"@tutao/tutanota-utils\"\nimport { locator } from \"../../../common/api/main/CommonLocator\"\nimport { TemplateSearchBar } from \"./TemplateSearchBar.js\"\nimport { Editor } from \"../../../common/gui/editor/Editor\"\nimport { getSharedGroupName, hasCapabilityOnGroup } from \"../../../common/sharing/GroupUtils\"\nimport { createInitialTemplateListIfAllowed } from \"../TemplateGroupUtils.js\"\nimport { getConfirmation } from \"../../../common/gui/base/GuiUtils\"\nimport { ScrollSelectList } from \"../../../common/gui/ScrollSelectList\"\nimport { IconButton, IconButtonAttrs } from \"../../../common/gui/base/IconButton.js\"\nimport { TEMPLATE_LIST_ENTRY_WIDTH, TEMPLATE_POPUP_HEIGHT, TEMPLATE_POPUP_TWO_COLUMN_MIN_WIDTH } from \"./TemplateConstants.js\"\n\n/**\n *\tCreates a Modal/Popup that allows user to paste templates directly into the MailEditor.\n *\tAlso allows user to change desired language when pasting.\n */\nexport function showTemplatePopupInEditor(templateModel: TemplatePopupModel, editor: Editor, template: EmailTemplate | null, highlightedText: string) {\n\tconst initialSearchString = template ? TEMPLATE_SHORTCUT_PREFIX + template.tag : highlightedText\n\tconst cursorRect = editor.getCursorPosition()\n\tconst editorRect = editor.getDOM().getBoundingClientRect()\n\n\tconst onSelect = (text: string) => {\n\t\teditor.insertHTML(text)\n\t\teditor.focus()\n\t}\n\n\tlet rect\n\tconst availableHeightBelowCursor = window.innerHeight - cursorRect.bottom\n\tconst popUpHeight = TEMPLATE_POPUP_HEIGHT + 10 // height + 10px offset for space from the bottom of the screen\n\n\t// By default the popup is shown below the cursor. If there is not enough space move the popup above the cursor\n\tconst popUpWidth = editorRect.right - editorRect.left\n\n\tif (availableHeightBelowCursor < popUpHeight) {\n\t\tconst diff = popUpHeight - availableHeightBelowCursor\n\t\trect = new DomRectReadOnlyPolyfilled(editorRect.left, cursorRect.bottom - diff, popUpWidth, cursorRect.height)\n\t} else {\n\t\trect = new DomRectReadOnlyPolyfilled(editorRect.left, cursorRect.bottom, popUpWidth, cursorRect.height)\n\t}\n\n\tconst popup = new TemplatePopup(templateModel, rect, onSelect, initialSearchString, () => editor.focus())\n\ttemplateModel.search(initialSearchString)\n\tpopup.show()\n}\n\nexport class TemplatePopup implements ModalComponent {\n\tprivate _rect: PosRect\n\tprivate _shortcuts: Shortcut[]\n\tprivate _onSelect: (_: string) => void\n\tprivate _initialWindowWidth: number\n\tprivate _resizeListener: windowSizeListener\n\tprivate _redrawStream: Stream<any>\n\tprivate readonly _templateModel: TemplatePopupModel\n\tprivate readonly _searchBarValue: Stream<string>\n\tprivate _selectTemplateButtonAttrs: ButtonAttrs\n\tprivate _inputDom: HTMLElement | null = null\n\tprivate _debounceFilter: (_: string) => void\n\tprivate focusedBeforeShown: HTMLElement | null = null\n\n\tconstructor(\n\t\ttemplateModel: TemplatePopupModel,\n\t\trect: PosRect,\n\t\tonSelect: (arg0: string) => void,\n\t\tinitialSearchString: string,\n\t\tprivate readonly restoreEditorFocus?: () => void,\n\t) {\n\t\tthis._rect = rect\n\t\tthis._onSelect = onSelect\n\t\tthis._initialWindowWidth = window.innerWidth\n\n\t\tthis._resizeListener = () => {\n\t\t\tthis._close()\n\t\t}\n\n\t\tthis._searchBarValue = stream(initialSearchString)\n\t\tthis._templateModel = templateModel\n\t\tthis._shortcuts = [\n\t\t\t{\n\t\t\t\tkey: Keys.ESC,\n\t\t\t\tenabled: () => true,\n\t\t\t\texec: () => {\n\t\t\t\t\tthis.restoreEditorFocus?.()\n\n\t\t\t\t\tthis._close()\n\n\t\t\t\t\tm.redraw()\n\t\t\t\t},\n\t\t\t\thelp: \"closeTemplate_action\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: Keys.RETURN,\n\t\t\t\tenabled: () => true,\n\t\t\t\texec: () => {\n\t\t\t\t\tconst selectedContent = this._templateModel.getSelectedContent()\n\n\t\t\t\t\tif (selectedContent) {\n\t\t\t\t\t\tthis._onSelect(selectedContent.text)\n\n\t\t\t\t\t\tthis._close()\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\thelp: \"insertTemplate_action\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: Keys.UP,\n\t\t\t\tenabled: () => true,\n\t\t\t\texec: () => {\n\t\t\t\t\tthis._templateModel.selectNextTemplate(SELECT_PREV_TEMPLATE)\n\t\t\t\t},\n\t\t\t\thelp: \"selectPreviousTemplate_action\",\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: Keys.DOWN,\n\t\t\t\tenabled: () => true,\n\t\t\t\texec: () => {\n\t\t\t\t\tthis._templateModel.selectNextTemplate(SELECT_NEXT_TEMPLATE)\n\t\t\t\t},\n\t\t\t\thelp: \"selectNextTemplate_action\",\n\t\t\t},\n\t\t]\n\t\tthis._redrawStream = templateModel.searchResults.map((results) => {\n\t\t\tm.redraw()\n\t\t})\n\t\tthis._selectTemplateButtonAttrs = {\n\t\t\tlabel: \"selectTemplate_action\",\n\t\t\tclick: () => {\n\t\t\t\tconst selected = this._templateModel.getSelectedContent()\n\n\t\t\t\tif (selected) {\n\t\t\t\t\tthis._onSelect(selected.text)\n\n\t\t\t\t\tthis._close()\n\t\t\t\t}\n\t\t\t},\n\t\t\ttype: ButtonType.Primary,\n\t\t}\n\t\tthis._debounceFilter = debounce(200, (value: string) => {\n\t\t\ttemplateModel.search(value)\n\t\t})\n\n\t\tthis._debounceFilter(initialSearchString)\n\t}\n\n\tview: () => Children = () => {\n\t\tconst showTwoColumns = this._isScreenWideEnough()\n\n\t\treturn m(\n\t\t\t\".flex.flex-column.abs.elevated-bg.border-radius.dropdown-shadow\",\n\t\t\t{\n\t\t\t\t// Main Wrapper\n\t\t\t\tstyle: {\n\t\t\t\t\twidth: px(this._rect.width),\n\t\t\t\t\theight: px(TEMPLATE_POPUP_HEIGHT),\n\t\t\t\t\ttop: px(this._rect.top),\n\t\t\t\t\tleft: px(this._rect.left),\n\t\t\t\t},\n\t\t\t\tonclick: (e: MouseEvent) => {\n\t\t\t\t\tthis._inputDom?.focus()\n\n\t\t\t\t\te.stopPropagation()\n\t\t\t\t},\n\t\t\t\toncreate: () => {\n\t\t\t\t\twindowFacade.addResizeListener(this._resizeListener)\n\t\t\t\t},\n\t\t\t\tonremove: () => {\n\t\t\t\t\twindowFacade.removeResizeListener(this._resizeListener)\n\t\t\t\t},\n\t\t\t},\n\t\t\t[\n\t\t\t\tthis._renderHeader(),\n\t\t\t\tm(\".flex.flex-grow.scroll.mb-s\", [\n\t\t\t\t\tm(\n\t\t\t\t\t\t\".flex.flex-column.scroll\" + (showTwoColumns ? \".pr\" : \"\"),\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t\tflex: \"1 1 40%\",\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\tthis._renderList(),\n\t\t\t\t\t),\n\t\t\t\t\tshowTwoColumns\n\t\t\t\t\t\t? m(\n\t\t\t\t\t\t\t\t\".flex.flex-column.flex-grow-shrink-half\",\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t\t\t\tflex: \"1 1 60%\",\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tthis._renderRightColumn(),\n\t\t\t\t\t\t  )\n\t\t\t\t\t\t: null,\n\t\t\t\t]),\n\t\t\t],\n\t\t)\n\t}\n\n\t_renderHeader(): Children {\n\t\tconst selectedTemplate = this._templateModel.getSelectedTemplate()\n\n\t\treturn m(\".flex-space-between.center-vertically.pl.pr-s\", [\n\t\t\tm(\".flex-start\", [m(\".flex.center-vertically\", this._renderSearchBar()), this._renderAddButton()]),\n\t\t\tm(\".flex-end\", [\n\t\t\t\tselectedTemplate\n\t\t\t\t\t? this._renderEditButtons(selectedTemplate) // Right header wrapper\n\t\t\t\t\t: null,\n\t\t\t]),\n\t\t])\n\t}\n\n\t_renderSearchBar: () => Children = () => {\n\t\treturn m(TemplateSearchBar, {\n\t\t\tvalue: this._searchBarValue,\n\t\t\tplaceholder: \"filter_label\",\n\t\t\tkeyHandler: (keyPress) => {\n\t\t\t\tif (isKeyPressed(keyPress.key, Keys.DOWN, Keys.UP)) {\n\t\t\t\t\t// This duplicates the listener set in this._shortcuts\n\t\t\t\t\t// because the input consumes the event\n\t\t\t\t\tthis._templateModel.selectNextTemplate(isKeyPressed(keyPress.key, Keys.UP) ? SELECT_PREV_TEMPLATE : SELECT_NEXT_TEMPLATE)\n\n\t\t\t\t\treturn false\n\t\t\t\t} else {\n\t\t\t\t\treturn true\n\t\t\t\t}\n\t\t\t},\n\t\t\toninput: (value) => {\n\t\t\t\tthis._debounceFilter(value)\n\t\t\t},\n\t\t\toncreate: (vnode) => {\n\t\t\t\tthis._inputDom = vnode.dom.firstElementChild as HTMLElement // firstElementChild is the input field of the input wrapper\n\t\t\t},\n\t\t})\n\t}\n\n\t_renderAddButton(): Children {\n\t\tconst attrs = this._createAddButtonAttributes()\n\n\t\treturn m(\n\t\t\t\"\",\n\t\t\t{\n\t\t\t\tonkeydown: (e: KeyboardEvent) => {\n\t\t\t\t\t// prevents tabbing into the background of the modal\n\t\t\t\t\tif (isKeyPressed(e.key, Keys.TAB) && !this._templateModel.getSelectedTemplate()) {\n\t\t\t\t\t\tthis._inputDom?.focus()\n\n\t\t\t\t\t\te.preventDefault()\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t},\n\t\t\tattrs ? m(IconButton, attrs as IconButtonAttrs) : null,\n\t\t)\n\t}\n\n\t_createAddButtonAttributes(): IconButtonAttrs | null {\n\t\tconst templateGroupInstances = this._templateModel.getTemplateGroupInstances()\n\n\t\tconst writeableGroups = templateGroupInstances.filter((instance) =>\n\t\t\thasCapabilityOnGroup(locator.logins.getUserController().user, instance.group, ShareCapability.Write),\n\t\t)\n\n\t\tif (templateGroupInstances.length === 0) {\n\t\t\treturn {\n\t\t\t\ttitle: \"createTemplate_action\",\n\t\t\t\tclick: () => {\n\t\t\t\t\tcreateInitialTemplateListIfAllowed().then((groupRoot) => {\n\t\t\t\t\t\tif (groupRoot) {\n\t\t\t\t\t\t\tthis.showTemplateEditor(null, groupRoot)\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t},\n\t\t\t\ticon: Icons.Add,\n\t\t\t\tcolors: ButtonColor.DrawerNav,\n\t\t\t}\n\t\t} else if (writeableGroups.length === 1) {\n\t\t\treturn {\n\t\t\t\ttitle: \"createTemplate_action\",\n\t\t\t\tclick: () => this.showTemplateEditor(null, writeableGroups[0].groupRoot),\n\t\t\t\ticon: Icons.Add,\n\t\t\t\tcolors: ButtonColor.DrawerNav,\n\t\t\t}\n\t\t} else if (writeableGroups.length > 1) {\n\t\t\treturn attachDropdown({\n\t\t\t\tmainButtonAttrs: {\n\t\t\t\t\ttitle: \"createTemplate_action\",\n\t\t\t\t\ticon: Icons.Add,\n\t\t\t\t\tcolors: ButtonColor.DrawerNav,\n\t\t\t\t},\n\t\t\t\tchildAttrs: () =>\n\t\t\t\t\twriteableGroups.map((groupInstances) => {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tlabel: lang.makeTranslation(\"group_name\", getSharedGroupName(groupInstances.groupInfo, locator.logins.getUserController(), true)),\n\t\t\t\t\t\t\tclick: () => this.showTemplateEditor(null, groupInstances.groupRoot),\n\t\t\t\t\t\t}\n\t\t\t\t\t}),\n\t\t\t})\n\t\t} else {\n\t\t\treturn null\n\t\t}\n\t}\n\n\t_renderEditButtons(selectedTemplate: EmailTemplate): Children {\n\t\tconst selectedContent = this._templateModel.getSelectedContent()\n\n\t\tconst selectedGroup = this._templateModel.getSelectedTemplateGroupInstance()\n\n\t\tconst canEdit = !!selectedGroup && hasCapabilityOnGroup(locator.logins.getUserController().user, selectedGroup.group, ShareCapability.Write)\n\t\treturn [\n\t\t\tm(\".flex.flex-column.justify-center.mr-m\", selectedContent ? m(\"\", lang.get(languageByCode[selectedContent.languageCode].textId)) : \"\"),\n\t\t\tm(\n\t\t\t\tIconButton,\n\t\t\t\tattachDropdown({\n\t\t\t\t\tmainButtonAttrs: {\n\t\t\t\t\t\ttitle: \"chooseLanguage_action\",\n\t\t\t\t\t\ticon: Icons.Language,\n\t\t\t\t\t},\n\t\t\t\t\tchildAttrs: () =>\n\t\t\t\t\t\tselectedTemplate.contents.map((content) => {\n\t\t\t\t\t\t\tconst langCode: LanguageCode = downcast(content.languageCode)\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tlabel: languageByCode[langCode].textId,\n\t\t\t\t\t\t\t\tclick: (e: MouseEvent) => {\n\t\t\t\t\t\t\t\t\te.stopPropagation()\n\t\t\t\t\t\t\t\t\tthis._templateModel.setSelectedContentLanguage(langCode)\n\t\t\t\t\t\t\t\t\tthis._inputDom?.focus()\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}),\n\t\t\t\t}),\n\t\t\t),\n\t\t\tcanEdit\n\t\t\t\t? [\n\t\t\t\t\t\tm(IconButton, {\n\t\t\t\t\t\t\ttitle: \"editTemplate_action\",\n\t\t\t\t\t\t\tclick: () =>\n\t\t\t\t\t\t\t\tlocator.entityClient\n\t\t\t\t\t\t\t\t\t.load(TemplateGroupRootTypeRef, neverNull(selectedTemplate._ownerGroup))\n\t\t\t\t\t\t\t\t\t.then((groupRoot) => this.showTemplateEditor(selectedTemplate, groupRoot)),\n\t\t\t\t\t\t\ticon: Icons.Edit,\n\t\t\t\t\t\t\tcolors: ButtonColor.DrawerNav,\n\t\t\t\t\t\t}),\n\t\t\t\t\t\tm(IconButton, {\n\t\t\t\t\t\t\ttitle: \"remove_action\",\n\t\t\t\t\t\t\tclick: () => {\n\t\t\t\t\t\t\t\tgetConfirmation(\"deleteTemplate_msg\").confirmed(() => locator.entityClient.erase(selectedTemplate))\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\ticon: Icons.Trash,\n\t\t\t\t\t\t\tcolors: ButtonColor.DrawerNav,\n\t\t\t\t\t\t}),\n\t\t\t\t  ]\n\t\t\t\t: null,\n\t\t\tm(\".pr-s\", m(\".nav-bar-spacer\")),\n\t\t\tm(\n\t\t\t\t\"\",\n\t\t\t\t{\n\t\t\t\t\tonkeydown: (e: KeyboardEvent) => {\n\t\t\t\t\t\t// prevents tabbing into the background of the modal\n\t\t\t\t\t\tif (isKeyPressed(e.key, Keys.TAB)) {\n\t\t\t\t\t\t\tthis._inputDom?.focus()\n\n\t\t\t\t\t\t\te.preventDefault()\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tm(Button, this._selectTemplateButtonAttrs),\n\t\t\t),\n\t\t]\n\t}\n\n\t_renderList(): Children {\n\t\treturn m(ScrollSelectList, {\n\t\t\titems: this._templateModel.searchResults(),\n\t\t\tselectedItem: this._templateModel.selectedTemplate(),\n\t\t\tonItemSelected: this._templateModel.selectedTemplate,\n\t\t\temptyListMessage: () => (this._templateModel.isLoaded() ? \"nothingFound_label\" : \"loadingTemplates_label\"),\n\t\t\twidth: TEMPLATE_LIST_ENTRY_WIDTH,\n\t\t\trenderItem: (template: EmailTemplate) =>\n\t\t\t\tm(TemplatePopupResultRow, {\n\t\t\t\t\ttemplate: template,\n\t\t\t\t}),\n\t\t\tonItemDoubleClicked: (_: EmailTemplate) => {\n\t\t\t\tconst selected = this._templateModel.getSelectedContent()\n\n\t\t\t\tif (selected) {\n\t\t\t\t\tthis._onSelect(selected.text)\n\n\t\t\t\t\tthis._close()\n\t\t\t\t}\n\t\t\t},\n\t\t})\n\t}\n\n\t_renderRightColumn(): Children {\n\t\tconst template = this._templateModel.getSelectedTemplate()\n\n\t\tif (template) {\n\t\t\treturn [\n\t\t\t\tm(TemplateExpander, {\n\t\t\t\t\ttemplate: template,\n\t\t\t\t\tmodel: this._templateModel,\n\t\t\t\t}),\n\t\t\t]\n\t\t} else {\n\t\t\treturn null\n\t\t}\n\t}\n\n\t_isScreenWideEnough(): boolean {\n\t\treturn window.innerWidth > TEMPLATE_POPUP_TWO_COLUMN_MIN_WIDTH\n\t}\n\n\t_getWindowWidthChange(): number {\n\t\treturn window.innerWidth - this._initialWindowWidth\n\t}\n\n\tshow() {\n\t\tthis.focusedBeforeShown = document.activeElement as HTMLElement\n\t\tmodal.display(this, false)\n\t}\n\n\t_close(): void {\n\t\tmodal.remove(this)\n\t}\n\n\tbackgroundClick(e: MouseEvent): void {\n\t\tthis.restoreEditorFocus?.()\n\t\tthis._close()\n\t}\n\n\thideAnimation(): Promise<void> {\n\t\treturn Promise.resolve()\n\t}\n\n\tonClose(): void {\n\t\tthis._redrawStream.end(true)\n\t}\n\n\tshortcuts(): Shortcut[] {\n\t\treturn this._shortcuts\n\t}\n\n\tpopState(e: Event): boolean {\n\t\treturn true\n\t}\n\n\tcallingElement(): HTMLElement | null {\n\t\treturn this.focusedBeforeShown\n\t}\n\n\tshowTemplateEditor(templateToEdit: EmailTemplate | null, groupRoot: TemplateGroupRoot) {\n\t\timport(\"../../settings/TemplateEditor.js\").then((editor) => {\n\t\t\teditor.showTemplateEditor(templateToEdit, groupRoot)\n\t\t})\n\t}\n}\n"]}