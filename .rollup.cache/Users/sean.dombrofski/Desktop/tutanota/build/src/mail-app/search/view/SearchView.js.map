{"version":3,"file":"SearchView.js","sourceRoot":"","sources":["../../../../../src/mail-app/search/view/SearchView.ts"],"names":[],"mappings":"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","sourcesContent":["import m, { Children, Vnode } from \"mithril\"\nimport { ViewSlider } from \"../../../common/gui/nav/ViewSlider.js\"\nimport { ColumnType, ViewColumn } from \"../../../common/gui/base/ViewColumn\"\nimport type { TranslationKey, MaybeTranslation } from \"../../../common/misc/LanguageViewModel\"\nimport { lang } from \"../../../common/misc/LanguageViewModel\"\nimport { FeatureType, Keys, MailSetKind } from \"../../../common/api/common/TutanotaConstants\"\nimport { assertMainOrNode } from \"../../../common/api/common/Env\"\nimport { keyManager, Shortcut } from \"../../../common/misc/KeyManager\"\nimport { NavButton, NavButtonColor } from \"../../../common/gui/base/NavButton.js\"\nimport { BootIcons } from \"../../../common/gui/base/icons/BootIcons\"\nimport { CalendarEvent, CalendarEventTypeRef, Contact, ContactTypeRef, Mail, MailTypeRef } from \"../../../common/api/entities/tutanota/TypeRefs.js\"\nimport { SearchListView, SearchListViewAttrs } from \"./SearchListView\"\nimport { px, size } from \"../../../common/gui/size\"\nimport { SEARCH_MAIL_FIELDS, SearchCategoryTypes } from \"../model/SearchUtils\"\nimport { Dialog } from \"../../../common/gui/base/Dialog\"\nimport { locator } from \"../../../common/api/main/CommonLocator\"\nimport { assertNotNull, getFirstOrThrow, isSameTypeRef, last, LazyLoaded, lazyMemoized, memoized, noOp, ofClass, TypeRef } from \"@tutao/tutanota-utils\"\nimport { Icons } from \"../../../common/gui/base/icons/Icons\"\nimport { AppHeaderAttrs, Header } from \"../../../common/gui/Header.js\"\nimport { PermissionError } from \"../../../common/api/common/error/PermissionError\"\nimport { ContactEditor } from \"../../contacts/ContactEditor\"\nimport { styles } from \"../../../common/gui/styles\"\nimport { FolderColumnView } from \"../../../common/gui/FolderColumnView.js\"\nimport { getGroupInfoDisplayName } from \"../../../common/api/common/utils/GroupUtils\"\nimport { isNewMailActionAvailable } from \"../../../common/gui/nav/NavFunctions\"\nimport { SidebarSection } from \"../../../common/gui/SidebarSection\"\nimport type { ClickHandler } from \"../../../common/gui/base/GuiUtils\"\nimport { DropDownSelector, DropDownSelectorAttrs, SelectorItem } from \"../../../common/gui/base/DropDownSelector.js\"\nimport { IconButton } from \"../../../common/gui/base/IconButton.js\"\nimport { MobileMailActionBar } from \"../../mail/view/MobileMailActionBar.js\"\nimport { DrawerMenuAttrs } from \"../../../common/gui/nav/DrawerMenu.js\"\nimport { BaseTopLevelView } from \"../../../common/gui/BaseTopLevelView.js\"\nimport { TopLevelAttrs, TopLevelView } from \"../../../TopLevelView.js\"\nimport { getContactSelectionMessage, MultiContactViewer } from \"../../contacts/view/MultiContactViewer.js\"\nimport { ContactCardViewer } from \"../../contacts/view/ContactCardViewer.js\"\nimport { getMailSelectionMessage, MultiItemViewer } from \"../../mail/view/MultiItemViewer.js\"\nimport { ConversationViewer } from \"../../mail/view/ConversationViewer.js\"\nimport { ContactViewerActions } from \"../../contacts/view/ContactViewerActions.js\"\nimport { confirmMerge, deleteContacts, writeMail } from \"../../contacts/view/ContactView.js\"\nimport ColumnEmptyMessageBox from \"../../../common/gui/base/ColumnEmptyMessageBox.js\"\nimport { theme } from \"../../../common/gui/theme.js\"\nimport { searchBar } from \"../SearchBar.js\"\nimport { MobileMailMultiselectionActionBar } from \"../../mail/view/MobileMailMultiselectionActionBar.js\"\nimport { exportContacts } from \"../../contacts/VCardExporter.js\"\nimport { BackgroundColumnLayout } from \"../../../common/gui/BackgroundColumnLayout.js\"\nimport { DesktopListToolbar, DesktopViewerToolbar } from \"../../../common/gui/DesktopToolbars.js\"\nimport { MailViewerActions } from \"../../mail/view/MailViewerToolbar.js\"\nimport { BaseMobileHeader } from \"../../../common/gui/BaseMobileHeader.js\"\nimport { ProgressBar } from \"../../../common/gui/base/ProgressBar.js\"\nimport { EnterMultiselectIconButton } from \"../../../common/gui/EnterMultiselectIconButton.js\"\nimport { MobileHeader, MobileHeaderMenuButton } from \"../../../common/gui/MobileHeader.js\"\nimport { MobileActionAttrs, MobileActionBar } from \"../../../common/gui/MobileActionBar.js\"\nimport { MobileBottomActionBar } from \"../../../common/gui/MobileBottomActionBar.js\"\nimport {\n\tarchiveMails,\n\tgetConversationTitle,\n\tgetMoveMailBounds,\n\tmoveToInbox,\n\tshowDeleteConfirmationDialog,\n\tshowMoveMailsDropdown,\n} from \"../../mail/view/MailGuiUtils.js\"\nimport { SelectAllCheckbox } from \"../../../common/gui/SelectAllCheckbox.js\"\nimport { selectionAttrsForList } from \"../../../common/misc/ListModel.js\"\nimport { MultiselectMobileHeader } from \"../../../common/gui/MultiselectMobileHeader.js\"\nimport { MultiselectMode } from \"../../../common/gui/base/List.js\"\nimport { PaidFunctionResult, SearchViewModel } from \"./SearchViewModel.js\"\nimport { NotFoundError } from \"../../../common/api/common/error/RestError.js\"\nimport { showNotAvailableForFreeDialog } from \"../../../common/misc/SubscriptionDialogs.js\"\nimport { MailFilterButton } from \"../../mail/view/MailFilterButton.js\"\nimport { listSelectionKeyboardShortcuts } from \"../../../common/gui/base/ListUtils.js\"\nimport { getElementId, isSameId } from \"../../../common/api/common/utils/EntityUtils.js\"\nimport { CalendarInfo } from \"../../../calendar-app/calendar/model/CalendarModel.js\"\nimport { Checkbox, CheckboxAttrs } from \"../../../common/gui/base/Checkbox.js\"\nimport { CalendarEventPreviewViewModel } from \"../../../calendar-app/calendar/gui/eventpopup/CalendarEventPreviewViewModel.js\"\nimport {\n\tEventDetailsView,\n\tEventDetailsViewAttrs,\n\thandleEventDeleteButtonClick,\n\thandleEventEditButtonClick,\n\thandleSendUpdatesClick,\n} from \"../../../calendar-app/calendar/view/EventDetailsView.js\"\nimport { showProgressDialog } from \"../../../common/gui/dialogs/ProgressDialog.js\"\nimport { CalendarOperation } from \"../../../calendar-app/calendar/gui/eventeditor-model/CalendarEventModel.js\"\nimport { getEventWithDefaultTimes, setNextHalfHour } from \"../../../common/api/common/utils/CommonCalendarUtils.js\"\nimport { EventEditorDialog } from \"../../../calendar-app/calendar/gui/eventeditor-view/CalendarEventEditDialog.js\"\nimport { getSharedGroupName } from \"../../../common/sharing/GroupUtils.js\"\nimport { BottomNav } from \"../../gui/BottomNav.js\"\nimport { mailLocator } from \"../../mailLocator.js\"\nimport { getIndentedFolderNameForDropdown } from \"../../mail/model/MailUtils.js\"\nimport { ContactModel } from \"../../../common/contactsFunctionality/ContactModel.js\"\nimport { extractContactIdFromEvent, isBirthdayEvent } from \"../../../common/calendar/date/CalendarUtils.js\"\nimport { DatePicker, DatePickerAttrs } from \"../../../calendar-app/calendar/gui/pickers/DatePicker.js\"\n\nassertMainOrNode()\n\nexport interface SearchViewAttrs extends TopLevelAttrs {\n\tdrawerAttrs: DrawerMenuAttrs\n\theader: AppHeaderAttrs\n\tmakeViewModel: () => SearchViewModel\n\tcontactModel: ContactModel\n}\n\nexport class SearchView extends BaseTopLevelView implements TopLevelView<SearchViewAttrs> {\n\tprivate readonly resultListColumn: ViewColumn\n\tprivate readonly resultDetailsColumn: ViewColumn\n\tprivate readonly folderColumn: ViewColumn\n\tprivate readonly viewSlider: ViewSlider\n\tprivate readonly searchViewModel: SearchViewModel\n\tprivate readonly contactModel: ContactModel\n\tprivate readonly startOfTheWeekOffset: number\n\n\tprivate getSanitizedPreviewData: (event: CalendarEvent) => LazyLoaded<CalendarEventPreviewViewModel> = memoized((event: CalendarEvent) =>\n\t\tnew LazyLoaded(async () => {\n\t\t\tconst calendars = await this.searchViewModel.getLazyCalendarInfos().getAsync()\n\t\t\tconst eventPreviewModel = await locator.calendarEventPreviewModel(event, calendars)\n\t\t\teventPreviewModel.sanitizeDescription().then(() => m.redraw())\n\t\t\treturn eventPreviewModel\n\t\t}).load(),\n\t)\n\n\tprivate getContactPreviewData = memoized((id: string) =>\n\t\tnew LazyLoaded(async () => {\n\t\t\tconst idParts = id.split(\"/\")\n\t\t\tconst contact = await this.contactModel.loadContactFromId([idParts[0], idParts[1]])\n\t\t\tm.redraw()\n\t\t\treturn contact\n\t\t}).load(),\n\t)\n\n\tconstructor(vnode: Vnode<SearchViewAttrs>) {\n\t\tsuper()\n\t\tthis.searchViewModel = vnode.attrs.makeViewModel()\n\t\tthis.contactModel = vnode.attrs.contactModel\n\t\tthis.startOfTheWeekOffset = this.searchViewModel.getStartOfTheWeekOffset()\n\n\t\tthis.folderColumn = new ViewColumn(\n\t\t\t{\n\t\t\t\tview: () => {\n\t\t\t\t\tconst restriction = this.searchViewModel.getRestriction()\n\t\t\t\t\treturn m(FolderColumnView, {\n\t\t\t\t\t\tdrawer: vnode.attrs.drawerAttrs,\n\t\t\t\t\t\tbutton: this.getMainButton(restriction.type),\n\t\t\t\t\t\tcontent: [\n\t\t\t\t\t\t\tm(\n\t\t\t\t\t\t\t\tSidebarSection,\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tname: \"search_label\",\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t\tm(\n\t\t\t\t\t\t\t\t\t\t\".folder-row.flex-start.mlr-button\",\n\t\t\t\t\t\t\t\t\t\tm(NavButton, {\n\t\t\t\t\t\t\t\t\t\t\tlabel: \"emails_label\",\n\t\t\t\t\t\t\t\t\t\t\ticon: () => BootIcons.Mail,\n\t\t\t\t\t\t\t\t\t\t\t// Generate the current url instead of using '#' to avoid Electron reloading the page on click\n\t\t\t\t\t\t\t\t\t\t\thref: this.searchViewModel.getUrlFromSearchCategory(SearchCategoryTypes.mail),\n\t\t\t\t\t\t\t\t\t\t\tclick: () => {\n\t\t\t\t\t\t\t\t\t\t\t\tthis.viewSlider.focus(this.resultListColumn)\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\tisSelectedPrefix: \"/search/mail\",\n\t\t\t\t\t\t\t\t\t\t\tcolors: NavButtonColor.Nav,\n\t\t\t\t\t\t\t\t\t\t\tpersistentBackground: true,\n\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\tm(\n\t\t\t\t\t\t\t\t\t\t\".folder-row.flex-start.mlr-button\",\n\t\t\t\t\t\t\t\t\t\tm(NavButton, {\n\t\t\t\t\t\t\t\t\t\t\tlabel: \"contacts_label\",\n\t\t\t\t\t\t\t\t\t\t\ticon: () => BootIcons.Contacts,\n\t\t\t\t\t\t\t\t\t\t\thref: this.searchViewModel.getUrlFromSearchCategory(SearchCategoryTypes.contact),\n\t\t\t\t\t\t\t\t\t\t\tclick: () => {\n\t\t\t\t\t\t\t\t\t\t\t\tthis.viewSlider.focus(this.resultListColumn)\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\tisSelectedPrefix: \"/search/contact\",\n\t\t\t\t\t\t\t\t\t\t\tcolors: NavButtonColor.Nav,\n\t\t\t\t\t\t\t\t\t\t\tpersistentBackground: true,\n\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\tm(\n\t\t\t\t\t\t\t\t\t\t\".folder-row.flex-start.mlr-button\",\n\t\t\t\t\t\t\t\t\t\tm(NavButton, {\n\t\t\t\t\t\t\t\t\t\t\tlabel: \"calendar_label\",\n\t\t\t\t\t\t\t\t\t\t\ticon: () => BootIcons.Calendar,\n\t\t\t\t\t\t\t\t\t\t\thref: this.searchViewModel.getUrlFromSearchCategory(SearchCategoryTypes.calendar),\n\t\t\t\t\t\t\t\t\t\t\tclick: () => {\n\t\t\t\t\t\t\t\t\t\t\t\tthis.viewSlider.focus(this.resultListColumn)\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\tisSelectedPrefix: \"/search/calendar\",\n\t\t\t\t\t\t\t\t\t\t\tcolors: NavButtonColor.Nav,\n\t\t\t\t\t\t\t\t\t\t\tpersistentBackground: true,\n\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tthis.renderFilterSection(),\n\t\t\t\t\t\t],\n\t\t\t\t\t\tariaLabel: \"search_label\",\n\t\t\t\t\t})\n\t\t\t\t},\n\t\t\t},\n\t\t\tColumnType.Foreground,\n\t\t\t{\n\t\t\t\tminWidth: size.first_col_min_width,\n\t\t\t\tmaxWidth: size.first_col_max_width,\n\t\t\t\theaderCenter: \"search_label\",\n\t\t\t},\n\t\t)\n\n\t\tthis.resultListColumn = new ViewColumn(\n\t\t\t{\n\t\t\t\tview: () => {\n\t\t\t\t\treturn m(BackgroundColumnLayout, {\n\t\t\t\t\t\tbackgroundColor: theme.navigation_bg,\n\t\t\t\t\t\tdesktopToolbar: () =>\n\t\t\t\t\t\t\tm(DesktopListToolbar, [\n\t\t\t\t\t\t\t\tthis.searchViewModel.listModel && getCurrentSearchMode() !== SearchCategoryTypes.calendar\n\t\t\t\t\t\t\t\t\t? [\n\t\t\t\t\t\t\t\t\t\t\tm(SelectAllCheckbox, selectionAttrsForList(this.searchViewModel.listModel)),\n\t\t\t\t\t\t\t\t\t\t\tisSameTypeRef(this.searchViewModel.searchedType, MailTypeRef) ? this.renderFilterButton() : null,\n\t\t\t\t\t\t\t\t\t  ]\n\t\t\t\t\t\t\t\t\t: m(\".button-height\"),\n\t\t\t\t\t\t\t]),\n\t\t\t\t\t\tmobileHeader: () => this.renderMobileListHeader(vnode.attrs.header),\n\t\t\t\t\t\tcolumnLayout: this.getResultColumnLayout(),\n\t\t\t\t\t})\n\t\t\t\t},\n\t\t\t},\n\t\t\tColumnType.Background,\n\t\t\t{\n\t\t\t\tminWidth: size.second_col_min_width,\n\t\t\t\tmaxWidth: size.second_col_max_width,\n\t\t\t\theaderCenter: \"searchResult_label\",\n\t\t\t},\n\t\t)\n\t\tthis.resultDetailsColumn = new ViewColumn(\n\t\t\t{\n\t\t\t\tview: () => this.renderDetailsView(vnode.attrs.header),\n\t\t\t},\n\t\t\tColumnType.Background,\n\t\t\t{\n\t\t\t\tminWidth: size.third_col_min_width,\n\t\t\t\tmaxWidth: size.third_col_max_width,\n\t\t\t},\n\t\t)\n\t\tthis.viewSlider = new ViewSlider([this.folderColumn, this.resultListColumn, this.resultDetailsColumn])\n\t}\n\n\tprivate getResultColumnLayout() {\n\t\treturn m(SearchListView, {\n\t\t\tlistModel: this.searchViewModel.listModel,\n\t\t\tcurrentType: this.searchViewModel.searchedType,\n\t\t\tonSingleSelection: (item) => {\n\t\t\t\tthis.viewSlider.focus(this.resultDetailsColumn)\n\t\t\t\tif (isSameTypeRef(item.entry._type, MailTypeRef)) {\n\t\t\t\t\t// Make sure that we mark mail as read if you select the mail again, even if it was selected before.\n\t\t\t\t\t// Do it in the next even loop to not rely on what is called first, listModel or us. ListModel changes are\n\t\t\t\t\t// sync so this should be enough.\n\t\t\t\t\tPromise.resolve().then(() => {\n\t\t\t\t\t\tconst conversationViewModel = this.searchViewModel.conversationViewModel\n\t\t\t\t\t\tif (conversationViewModel && isSameId(item._id, conversationViewModel.primaryMail._id)) {\n\t\t\t\t\t\t\tconversationViewModel?.primaryViewModel().setUnread(false)\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t},\n\t\t\tcancelCallback: () => {\n\t\t\t\tthis.searchViewModel.sendStopLoadingSignal()\n\t\t\t},\n\t\t\tisFreeAccount: locator.logins.getUserController().isFreeAccount(),\n\t\t\tgetLabelsForMail: (mail) => this.searchViewModel.getLabelsForMail(mail),\n\t\t} satisfies SearchListViewAttrs)\n\t}\n\n\tprivate renderFilterSection(): Children {\n\t\tif (isSameTypeRef(this.searchViewModel.searchedType, MailTypeRef)) {\n\t\t\treturn m(\n\t\t\t\tSidebarSection,\n\t\t\t\t{\n\t\t\t\t\tname: \"filter_label\",\n\t\t\t\t},\n\t\t\t\tthis.renderMailFilterSection(),\n\t\t\t)\n\t\t} else if (isSameTypeRef(this.searchViewModel.searchedType, CalendarEventTypeRef)) {\n\t\t\treturn m(SidebarSection, { name: \"filter_label\" }, this.renderCalendarFilterSection())\n\t\t} else {\n\t\t\t// contacts don't have filters\n\t\t\treturn null\n\t\t}\n\t}\n\n\toncreate(): void {\n\t\tthis.searchViewModel.init(() => this.confirmMailSearch())\n\n\t\tkeyManager.registerShortcuts(this.shortcuts())\n\t}\n\n\tonremove(): void {\n\t\tthis.searchViewModel.dispose()\n\n\t\tkeyManager.unregisterShortcuts(this.shortcuts())\n\t}\n\n\tprivate renderMobileListHeader(header: AppHeaderAttrs) {\n\t\treturn this.searchViewModel.listModel && this.searchViewModel.listModel?.state.inMultiselect\n\t\t\t? this.renderMultiSelectMobileHeader()\n\t\t\t: this.renderMobileListActionsHeader(header)\n\t}\n\n\tprivate renderMobileListActionsHeader(header: AppHeaderAttrs) {\n\t\tconst rightActions = []\n\n\t\tif (isSameTypeRef(this.searchViewModel.searchedType, MailTypeRef)) {\n\t\t\trightActions.push(this.renderFilterButton())\n\t\t}\n\n\t\tif (!isSameTypeRef(this.searchViewModel.searchedType, CalendarEventTypeRef)) {\n\t\t\trightActions.push(\n\t\t\t\tm(EnterMultiselectIconButton, {\n\t\t\t\t\tclickAction: () => {\n\t\t\t\t\t\tthis.searchViewModel.listModel?.enterMultiselect()\n\t\t\t\t\t},\n\t\t\t\t}),\n\t\t\t)\n\t\t}\n\t\tif (styles.isSingleColumnLayout()) {\n\t\t\trightActions.push(this.renderHeaderRightView())\n\t\t}\n\n\t\treturn m(BaseMobileHeader, {\n\t\t\tleft: m(MobileHeaderMenuButton, { ...header, backAction: () => this.viewSlider.focusPreviousColumn() }),\n\t\t\tright: rightActions,\n\t\t\tcenter: m(\n\t\t\t\t\".flex-grow.flex.justify-center\",\n\t\t\t\t{\n\t\t\t\t\tclass: rightActions.length === 0 ? \"mr\" : \"\",\n\t\t\t\t},\n\t\t\t\tm(searchBar, {\n\t\t\t\t\tplaceholder: this.searchBarPlaceholder(),\n\t\t\t\t\treturnListener: () => this.resultListColumn.focus(),\n\t\t\t\t}),\n\t\t\t),\n\t\t\tinjections: m(ProgressBar, { progress: header.offlineIndicatorModel.getProgress() }),\n\t\t})\n\t}\n\n\tprivate renderMultiSelectMobileHeader() {\n\t\treturn m(MultiselectMobileHeader, {\n\t\t\t...selectionAttrsForList(this.searchViewModel.listModel),\n\t\t\tmessage:\n\t\t\t\tgetCurrentSearchMode() === SearchCategoryTypes.mail\n\t\t\t\t\t? getMailSelectionMessage(this.searchViewModel.getSelectedMails())\n\t\t\t\t\t: getContactSelectionMessage(this.searchViewModel.getSelectedContacts().length),\n\t\t})\n\t}\n\n\t/** depending on the search and selection state we want to render a\n\t * (multi) mail viewer or a (multi) contact viewer or an event preview\n\t */\n\tprivate renderDetailsView(header: AppHeaderAttrs): Children {\n\t\tif (this.searchViewModel.listModel.isSelectionEmpty() && this.viewSlider.focusedColumn === this.resultDetailsColumn) {\n\t\t\tthis.viewSlider.focus(this.resultListColumn)\n\t\t\treturn null\n\t\t}\n\n\t\tif (getCurrentSearchMode() === SearchCategoryTypes.contact) {\n\t\t\tconst selectedContacts = this.searchViewModel.getSelectedContacts()\n\n\t\t\tconst actions = m(ContactViewerActions, {\n\t\t\t\tcontacts: selectedContacts,\n\t\t\t\tonEdit: (c: Contact) => new ContactEditor(locator.entityClient, c).show(),\n\t\t\t\tonDelete: deleteContacts,\n\t\t\t\tonMerge: confirmMerge,\n\t\t\t\tonExport: exportContacts,\n\t\t\t})\n\t\t\tconst isMultiselect = this.searchViewModel.listModel?.state.inMultiselect || selectedContacts.length === 0\n\t\t\treturn m(BackgroundColumnLayout, {\n\t\t\t\tbackgroundColor: theme.navigation_bg,\n\t\t\t\tdesktopToolbar: () => m(DesktopViewerToolbar, actions),\n\t\t\t\tmobileHeader: () =>\n\t\t\t\t\tm(MobileHeader, {\n\t\t\t\t\t\t...header,\n\t\t\t\t\t\tbackAction: () => this.viewSlider.focusPreviousColumn(),\n\t\t\t\t\t\tcolumnType: \"other\",\n\t\t\t\t\t\ttitle: \"search_label\",\n\t\t\t\t\t\tactions: null,\n\t\t\t\t\t\tmulticolumnActions: () => actions,\n\t\t\t\t\t\tprimaryAction: () => this.renderHeaderRightView(),\n\t\t\t\t\t}),\n\t\t\t\tcolumnLayout:\n\t\t\t\t\t// see comment for .scrollbar-gutter-stable-or-fallback\n\t\t\t\t\tm(\n\t\t\t\t\t\t\".fill-absolute.flex.col.overflow-y-scroll\",\n\t\t\t\t\t\tisMultiselect\n\t\t\t\t\t\t\t? m(MultiContactViewer, {\n\t\t\t\t\t\t\t\t\tselectedEntities: selectedContacts,\n\t\t\t\t\t\t\t\t\tselectNone: () => this.searchViewModel.listModel.selectNone(),\n\t\t\t\t\t\t\t  })\n\t\t\t\t\t\t\t: m(ContactCardViewer, { contact: selectedContacts[0], onWriteMail: writeMail }),\n\t\t\t\t\t),\n\t\t\t})\n\t\t} else if (getCurrentSearchMode() === SearchCategoryTypes.mail) {\n\t\t\tconst selectedMails = this.searchViewModel.getSelectedMails()\n\n\t\t\tconst conversationViewModel = this.searchViewModel.conversationViewModel\n\t\t\tif (this.searchViewModel.listModel?.state.inMultiselect || !conversationViewModel) {\n\t\t\t\tconst actions = m(MailViewerActions, {\n\t\t\t\t\tmailboxModel: locator.mailboxModel,\n\t\t\t\t\tmailModel: mailLocator.mailModel,\n\t\t\t\t\tmails: selectedMails,\n\t\t\t\t\tselectNone: () => this.searchViewModel.listModel.selectNone(),\n\t\t\t\t})\n\t\t\t\treturn m(BackgroundColumnLayout, {\n\t\t\t\t\tbackgroundColor: theme.navigation_bg,\n\t\t\t\t\tdesktopToolbar: () => m(DesktopViewerToolbar, actions),\n\t\t\t\t\tmobileHeader: () =>\n\t\t\t\t\t\tm(MobileHeader, {\n\t\t\t\t\t\t\t...header,\n\t\t\t\t\t\t\tbackAction: () => this.viewSlider.focusPreviousColumn(),\n\t\t\t\t\t\t\tcolumnType: \"other\",\n\t\t\t\t\t\t\ttitle: getMailSelectionMessage(selectedMails),\n\t\t\t\t\t\t\tactions: null,\n\t\t\t\t\t\t\tmulticolumnActions: () => actions,\n\t\t\t\t\t\t\tprimaryAction: () => this.renderHeaderRightView(),\n\t\t\t\t\t\t}),\n\t\t\t\t\tcolumnLayout: m(MultiItemViewer, {\n\t\t\t\t\t\tselectedEntities: selectedMails,\n\t\t\t\t\t\tselectNone: () => this.searchViewModel.listModel.selectNone(),\n\t\t\t\t\t\tloadAll: () => this.searchViewModel.loadAll(),\n\t\t\t\t\t\tstopLoadAll: () => this.searchViewModel.stopLoadAll(),\n\t\t\t\t\t\tloadingAll:\n\t\t\t\t\t\t\tthis.searchViewModel.loadingAllForSearchResult != null\n\t\t\t\t\t\t\t\t? \"loading\"\n\t\t\t\t\t\t\t\t: this.searchViewModel.listModel?.isLoadedCompletely()\n\t\t\t\t\t\t\t\t? \"loaded\"\n\t\t\t\t\t\t\t\t: \"can_load\",\n\t\t\t\t\t\tgetSelectionMessage: (selected: ReadonlyArray<Mail>) => getMailSelectionMessage(selected),\n\t\t\t\t\t}),\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\tconst actions = m(MailViewerActions, {\n\t\t\t\t\tmailboxModel: conversationViewModel.primaryViewModel().mailboxModel,\n\t\t\t\t\tmailModel: conversationViewModel.primaryViewModel().mailModel,\n\t\t\t\t\tmailViewerViewModel: conversationViewModel.primaryViewModel(),\n\t\t\t\t\tmails: [conversationViewModel.primaryMail],\n\t\t\t\t})\n\t\t\t\treturn m(BackgroundColumnLayout, {\n\t\t\t\t\tbackgroundColor: theme.navigation_bg,\n\t\t\t\t\tdesktopToolbar: () => m(DesktopViewerToolbar, actions),\n\t\t\t\t\tmobileHeader: () =>\n\t\t\t\t\t\tm(MobileHeader, {\n\t\t\t\t\t\t\t...header,\n\t\t\t\t\t\t\tbackAction: () => this.viewSlider.focusPreviousColumn(),\n\t\t\t\t\t\t\tcolumnType: \"other\",\n\t\t\t\t\t\t\ttitle: getConversationTitle(conversationViewModel),\n\t\t\t\t\t\t\tactions: null,\n\t\t\t\t\t\t\tmulticolumnActions: () => actions,\n\t\t\t\t\t\t\tprimaryAction: () => this.renderHeaderRightView(),\n\t\t\t\t\t\t}),\n\t\t\t\t\tcolumnLayout: m(ConversationViewer, {\n\t\t\t\t\t\t// Re-create the whole viewer and its vnode tree if email has changed\n\t\t\t\t\t\tkey: getElementId(conversationViewModel.primaryMail),\n\t\t\t\t\t\tviewModel: conversationViewModel,\n\t\t\t\t\t\tdelayBodyRendering: Promise.resolve(),\n\t\t\t\t\t}),\n\t\t\t\t})\n\t\t\t}\n\t\t} else if (getCurrentSearchMode() === SearchCategoryTypes.calendar) {\n\t\t\tconst selectedEvent = this.searchViewModel.getSelectedEvents()[0]\n\t\t\treturn m(BackgroundColumnLayout, {\n\t\t\t\tbackgroundColor: theme.navigation_bg,\n\t\t\t\tdesktopToolbar: () => m(DesktopViewerToolbar, []),\n\t\t\t\tmobileHeader: () =>\n\t\t\t\t\tm(MobileHeader, {\n\t\t\t\t\t\t...header,\n\t\t\t\t\t\tbackAction: () => this.viewSlider.focusPreviousColumn(),\n\t\t\t\t\t\tcolumnType: \"other\",\n\t\t\t\t\t\ttitle: \"search_label\",\n\t\t\t\t\t\tactions: null,\n\t\t\t\t\t\tmulticolumnActions: () => [],\n\t\t\t\t\t\tprimaryAction: () => this.renderHeaderRightView(),\n\t\t\t\t\t}),\n\t\t\t\tcolumnLayout:\n\t\t\t\t\tselectedEvent == null\n\t\t\t\t\t\t? m(ColumnEmptyMessageBox, {\n\t\t\t\t\t\t\t\tmessage: \"noEventSelect_msg\",\n\t\t\t\t\t\t\t\ticon: BootIcons.Calendar,\n\t\t\t\t\t\t\t\tcolor: theme.content_message_bg,\n\t\t\t\t\t\t\t\tbackgroundColor: theme.navigation_bg,\n\t\t\t\t\t\t  })\n\t\t\t\t\t\t: this.renderEventPreview(selectedEvent),\n\t\t\t})\n\t\t} else {\n\t\t\treturn m(\n\t\t\t\t\".flex.col.fill-absolute\",\n\t\t\t\t// Using contactViewToolbar because it will display empty\n\t\t\t\tm(ContactViewerActions, { contacts: [], onExport: noOp, onMerge: noOp, onDelete: noOp, onEdit: noOp }),\n\t\t\t\tm(\n\t\t\t\t\t\".flex-grow.rel.overflow-hidden\",\n\t\t\t\t\tm(ColumnEmptyMessageBox, {\n\t\t\t\t\t\tmessage: \"noSelection_msg\",\n\t\t\t\t\t\tcolor: theme.content_message_bg,\n\t\t\t\t\t\tbackgroundColor: theme.navigation_bg,\n\t\t\t\t\t}),\n\t\t\t\t),\n\t\t\t)\n\t\t}\n\t}\n\n\tprivate invalidateBirthdayPreview() {\n\t\tif (getCurrentSearchMode() !== SearchCategoryTypes.calendar) {\n\t\t\treturn\n\t\t}\n\n\t\tconst selectedEvent = this.searchViewModel.getSelectedEvents()[0]\n\t\tif (!selectedEvent || !isBirthdayEvent(selectedEvent.uid)) {\n\t\t\treturn\n\t\t}\n\n\t\tconst idParts = selectedEvent._id[1].split(\"#\")\n\t\tconst contactId = extractContactIdFromEvent(last(idParts))\n\t\tif (!contactId) {\n\t\t\treturn\n\t\t}\n\n\t\tthis.getContactPreviewData(contactId).reload().then(m.redraw)\n\t}\n\n\tprivate renderEventPreview(event: CalendarEvent) {\n\t\tif (isBirthdayEvent(event.uid)) {\n\t\t\tconst idParts = event._id[1].split(\"#\")\n\n\t\t\tconst contactId = extractContactIdFromEvent(last(idParts))\n\t\t\tif (contactId != null && this.getContactPreviewData(contactId).isLoaded()) {\n\t\t\t\treturn this.renderContactPreview(this.getContactPreviewData(contactId).getSync()!)\n\t\t\t}\n\n\t\t\treturn null\n\t\t} else if (this.getSanitizedPreviewData(event).isLoaded()) {\n\t\t\treturn this.renderEventDetails(event)\n\t\t}\n\n\t\treturn null\n\t}\n\n\tprivate renderContactPreview(contact: Contact) {\n\t\treturn m(\n\t\t\t\".fill-absolute.flex.col.overflow-y-scroll\",\n\t\t\tm(ContactCardViewer, {\n\t\t\t\tcontact: contact,\n\t\t\t\teditAction: (contact) => {\n\t\t\t\t\tnew ContactEditor(locator.entityClient, contact).show()\n\t\t\t\t},\n\t\t\t\tonWriteMail: writeMail,\n\t\t\t\textendedActions: true,\n\t\t\t}),\n\t\t)\n\t}\n\n\tprivate renderEventDetails(selectedEvent: CalendarEvent) {\n\t\treturn m(\n\t\t\t\".height-100p.overflow-y-scroll.mb-l.fill-absolute.pb-l\",\n\t\t\tm(\n\t\t\t\t\".border-radius-big.flex.col.flex-grow.content-bg\",\n\t\t\t\t{\n\t\t\t\t\tclass: styles.isDesktopLayout() ? \"mlr-l\" : \"mlr\",\n\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\"min-width\": styles.isDesktopLayout() ? px(size.third_col_min_width) : null,\n\t\t\t\t\t\t\"max-width\": styles.isDesktopLayout() ? px(size.third_col_max_width) : null,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tm(EventDetailsView, {\n\t\t\t\t\teventPreviewModel: assertNotNull(this.getSanitizedPreviewData(selectedEvent).getSync()),\n\t\t\t\t} satisfies EventDetailsViewAttrs),\n\t\t\t),\n\t\t)\n\t}\n\n\tview({ attrs }: Vnode<SearchViewAttrs>): Children {\n\t\treturn m(\n\t\t\t\"#search.main-view\",\n\t\t\tm(this.viewSlider, {\n\t\t\t\theader: m(Header, {\n\t\t\t\t\tsearchBar: () =>\n\t\t\t\t\t\tm(searchBar, {\n\t\t\t\t\t\t\tplaceholder: this.searchBarPlaceholder(),\n\t\t\t\t\t\t\treturnListener: () => this.resultListColumn.focus(),\n\t\t\t\t\t\t}),\n\t\t\t\t\t...attrs.header,\n\t\t\t\t}),\n\t\t\t\tbottomNav: this.renderBottomNav(),\n\t\t\t}),\n\t\t)\n\t}\n\n\tprivate renderBottomNav() {\n\t\tif (!styles.isSingleColumnLayout()) return m(BottomNav)\n\n\t\tconst isInMultiselect = this.searchViewModel.listModel?.state.inMultiselect ?? false\n\n\t\tif (this.viewSlider.focusedColumn === this.resultDetailsColumn && this.searchViewModel.conversationViewModel) {\n\t\t\treturn m(MobileMailActionBar, { viewModel: this.searchViewModel.conversationViewModel?.primaryViewModel() })\n\t\t} else if (!isInMultiselect && this.viewSlider.focusedColumn === this.resultDetailsColumn) {\n\t\t\tif (getCurrentSearchMode() === SearchCategoryTypes.contact) {\n\t\t\t\treturn m(MobileActionBar, {\n\t\t\t\t\tactions: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ticon: Icons.Edit,\n\t\t\t\t\t\t\ttitle: \"edit_action\",\n\t\t\t\t\t\t\taction: () => new ContactEditor(locator.entityClient, this.searchViewModel.getSelectedContacts()[0]).show(),\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ticon: Icons.Trash,\n\t\t\t\t\t\t\ttitle: \"delete_action\",\n\t\t\t\t\t\t\taction: () => deleteContacts(this.searchViewModel.getSelectedContacts()),\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t})\n\t\t\t} else if (getCurrentSearchMode() === SearchCategoryTypes.calendar) {\n\t\t\t\tconst selectedEvent = this.searchViewModel.getSelectedEvents()[0]\n\t\t\t\tif (!selectedEvent) {\n\t\t\t\t\tthis.viewSlider.focus(this.resultListColumn)\n\t\t\t\t\treturn m(MobileActionBar, { actions: [] })\n\t\t\t\t}\n\t\t\t\tconst previewModel = this.getSanitizedPreviewData(selectedEvent).getSync()\n\t\t\t\tconst actions: Array<MobileActionAttrs> = []\n\t\t\t\tif (previewModel) {\n\t\t\t\t\tif (previewModel.canSendUpdates) {\n\t\t\t\t\t\tactions.push({\n\t\t\t\t\t\t\ticon: BootIcons.Mail,\n\t\t\t\t\t\t\ttitle: \"sendUpdates_label\",\n\t\t\t\t\t\t\taction: () => handleSendUpdatesClick(previewModel),\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t\tif (previewModel.canEdit) {\n\t\t\t\t\t\tactions.push({\n\t\t\t\t\t\t\ticon: Icons.Edit,\n\t\t\t\t\t\t\ttitle: \"edit_action\",\n\t\t\t\t\t\t\taction: (ev: MouseEvent, receiver: HTMLElement) => handleEventEditButtonClick(previewModel, ev, receiver),\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t\tif (previewModel.canDelete) {\n\t\t\t\t\t\tactions.push({\n\t\t\t\t\t\t\ticon: Icons.Trash,\n\t\t\t\t\t\t\ttitle: \"delete_action\",\n\t\t\t\t\t\t\taction: (ev: MouseEvent, receiver: HTMLElement) => handleEventDeleteButtonClick(previewModel, ev, receiver),\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis.getSanitizedPreviewData(selectedEvent).load()\n\t\t\t\t}\n\t\t\t\treturn m(MobileActionBar, { actions })\n\t\t\t}\n\t\t} else if (isInMultiselect) {\n\t\t\tif (getCurrentSearchMode() === SearchCategoryTypes.mail) {\n\t\t\t\treturn m(MobileMailMultiselectionActionBar, {\n\t\t\t\t\tmails: this.searchViewModel.getSelectedMails(),\n\t\t\t\t\tselectNone: () => this.searchViewModel.listModel.selectNone(),\n\t\t\t\t\tmailModel: mailLocator.mailModel,\n\t\t\t\t\tmailboxModel: locator.mailboxModel,\n\t\t\t\t})\n\t\t\t} else if (this.viewSlider.focusedColumn === this.resultListColumn) {\n\t\t\t\treturn m(\n\t\t\t\t\tMobileBottomActionBar,\n\t\t\t\t\tm(ContactViewerActions, {\n\t\t\t\t\t\tcontacts: this.searchViewModel.getSelectedContacts(),\n\t\t\t\t\t\tonEdit: () => new ContactEditor(locator.entityClient, getFirstOrThrow(this.searchViewModel.getSelectedContacts())).show(),\n\t\t\t\t\t\tonDelete: (contacts: Contact[]) => deleteContacts(contacts, () => this.searchViewModel.listModel.selectNone()),\n\t\t\t\t\t\tonMerge: confirmMerge,\n\t\t\t\t\t\tonExport: exportContacts,\n\t\t\t\t\t}),\n\t\t\t\t)\n\t\t\t}\n\t\t}\n\n\t\treturn m(BottomNav)\n\t}\n\n\tprivate searchBarPlaceholder() {\n\t\tconst route = m.route.get()\n\t\tif (route.startsWith(\"/search/calendar\")) {\n\t\t\treturn lang.get(\"searchCalendar_placeholder\")\n\t\t} else if (route.startsWith(\"/search/contact\")) {\n\t\t\treturn lang.get(\"searchContacts_placeholder\")\n\t\t} else {\n\t\t\treturn lang.get(\"searchEmails_placeholder\")\n\t\t}\n\t}\n\n\tprivate getAvailableMailFolders(): SelectorItem<Id | null>[] {\n\t\tconst mailboxes = this.searchViewModel.mailboxes\n\n\t\tconst availableMailFolders: SelectorItem<Id | null>[] = [\n\t\t\t{\n\t\t\t\tname: lang.get(\"all_label\"),\n\t\t\t\tvalue: null,\n\t\t\t\tindentationLevel: 0,\n\t\t\t},\n\t\t]\n\n\t\tfor (const mailbox of mailboxes) {\n\t\t\tconst mailboxIndex = mailboxes.indexOf(mailbox)\n\t\t\tconst mailFolders = mailLocator.mailModel.getFolderSystemByGroupId(mailbox.mailGroup._id)?.getIndentedList() ?? []\n\t\t\tfor (const folderInfo of mailFolders) {\n\t\t\t\tif (folderInfo.folder.folderType !== MailSetKind.SPAM) {\n\t\t\t\t\tconst mailboxLabel = mailboxIndex === 0 ? \"\" : ` (${getGroupInfoDisplayName(mailbox.mailGroupInfo)})`\n\t\t\t\t\tconst folderId = getElementId(folderInfo.folder)\n\t\t\t\t\tavailableMailFolders.push({\n\t\t\t\t\t\tname: getIndentedFolderNameForDropdown(folderInfo) + mailboxLabel,\n\t\t\t\t\t\tvalue: folderId,\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn availableMailFolders\n\t}\n\n\tprivate renderMailFilterSection(): Children {\n\t\tconst availableMailFolders = this.getAvailableMailFolders()\n\t\tconst availableMailFields = SEARCH_MAIL_FIELDS.map((f) => ({ name: lang.get(f.textId), value: f.field }))\n\t\treturn [\n\t\t\tthis.renderDateRangeSelection(),\n\t\t\tm(\"div.ml-button\", [\n\t\t\t\tm(DropDownSelector, {\n\t\t\t\t\tlabel: \"field_label\",\n\t\t\t\t\titems: availableMailFields,\n\t\t\t\t\tselectedValue: this.searchViewModel.selectedMailField,\n\t\t\t\t\tselectionChangedHandler: (newValue: string | null) => {\n\t\t\t\t\t\tconst result = this.searchViewModel.selectMailField(newValue)\n\t\t\t\t\t\tif (result === PaidFunctionResult.PaidSubscriptionNeeded) {\n\t\t\t\t\t\t\tshowNotAvailableForFreeDialog()\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tdropdownWidth: 250,\n\t\t\t\t}),\n\t\t\t\tavailableMailFolders.length > 0\n\t\t\t\t\t? m(DropDownSelector, {\n\t\t\t\t\t\t\tlabel: \"mailFolder_label\",\n\t\t\t\t\t\t\titems: availableMailFolders,\n\t\t\t\t\t\t\tselectedValue: this.searchViewModel.selectedMailFolder[0] ?? null,\n\t\t\t\t\t\t\tselectionChangedHandler: (newValue: string | null) => {\n\t\t\t\t\t\t\t\tconst result = this.searchViewModel.selectMailFolder(newValue ? [newValue] : [])\n\t\t\t\t\t\t\t\tif (result === PaidFunctionResult.PaidSubscriptionNeeded) {\n\t\t\t\t\t\t\t\t\tshowNotAvailableForFreeDialog()\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tdropdownWidth: 250,\n\t\t\t\t\t  })\n\t\t\t\t\t: null,\n\t\t\t]),\n\t\t].map((row) => m(\".folder-row.plr-button.content-fg\", row))\n\t}\n\n\tprivate renderCalendarFilterSection(): Children {\n\t\treturn [this.renderDateRangeSelection(), this.renderCalendarFilter(), this.renderRepeatingFilter()].map((row) =>\n\t\t\tm(\".folder-row.plr-button.content-fg\", row),\n\t\t)\n\t}\n\n\tgetViewSlider(): ViewSlider | null {\n\t\treturn this.viewSlider\n\t}\n\n\tprivate renderHeaderRightView(): Children {\n\t\tconst restriction = this.searchViewModel.getRestriction()\n\n\t\tif (styles.isUsingBottomNavigation()) {\n\t\t\tif (isSameTypeRef(restriction.type, MailTypeRef) && isNewMailActionAvailable()) {\n\t\t\t\treturn m(IconButton, {\n\t\t\t\t\tclick: () => {\n\t\t\t\t\t\tnewMailEditor()\n\t\t\t\t\t\t\t.then((editor) => editor.show())\n\t\t\t\t\t\t\t.catch(ofClass(PermissionError, noOp))\n\t\t\t\t\t},\n\t\t\t\t\ttitle: \"newMail_action\",\n\t\t\t\t\ticon: Icons.PencilSquare,\n\t\t\t\t})\n\t\t\t} else if (isSameTypeRef(restriction.type, ContactTypeRef)) {\n\t\t\t\treturn m(IconButton, {\n\t\t\t\t\tclick: () => {\n\t\t\t\t\t\tlocator.contactModel.getContactListId().then((contactListId) => {\n\t\t\t\t\t\t\tnew ContactEditor(locator.entityClient, null, assertNotNull(contactListId)).show()\n\t\t\t\t\t\t})\n\t\t\t\t\t},\n\t\t\t\t\ttitle: \"newContact_action\",\n\t\t\t\t\ticon: Icons.Add,\n\t\t\t\t})\n\t\t\t} else if (isSameTypeRef(restriction.type, CalendarEventTypeRef)) {\n\t\t\t\treturn m(IconButton, {\n\t\t\t\t\tclick: () => this.createNewEventDialog(),\n\t\t\t\t\ttitle: \"newEvent_action\",\n\t\t\t\t\ticon: Icons.Add,\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate renderDateRangeSelection(): Children {\n\t\tconst renderedHelpText: MaybeTranslation | undefined =\n\t\t\tthis.searchViewModel.warning === \"startafterend\"\n\t\t\t\t? \"startAfterEnd_label\"\n\t\t\t\t: this.searchViewModel.warning === \"long\"\n\t\t\t\t? \"longSearchRange_msg\"\n\t\t\t\t: this.searchViewModel.startDate == null\n\t\t\t\t? \"unlimited_label\"\n\t\t\t\t: undefined\n\t\treturn m(\n\t\t\t\".flex.col\",\n\t\t\tm(\n\t\t\t\t\".pl-s.flex-grow.flex-space-between.flex-column\",\n\t\t\t\tm(DatePicker, {\n\t\t\t\t\tdate: this.searchViewModel.startDate ?? undefined,\n\t\t\t\t\tonDateSelected: (date) => this.onStartDateSelected(date),\n\t\t\t\t\tstartOfTheWeekOffset: this.startOfTheWeekOffset,\n\t\t\t\t\tlabel: \"dateFrom_label\",\n\t\t\t\t\tnullSelectionText: renderedHelpText,\n\t\t\t\t\trightAlignDropdown: true,\n\t\t\t\t} satisfies DatePickerAttrs),\n\t\t\t),\n\t\t\tm(\n\t\t\t\t\".pl-s.flex-grow.flex-space-between.flex-column\",\n\t\t\t\tm(DatePicker, {\n\t\t\t\t\tdate: this.searchViewModel.endDate,\n\t\t\t\t\tonDateSelected: (date) => {\n\t\t\t\t\t\tif (this.searchViewModel.selectEndDate(date) != PaidFunctionResult.Success) {\n\t\t\t\t\t\t\tshowNotAvailableForFreeDialog()\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tstartOfTheWeekOffset: this.startOfTheWeekOffset,\n\t\t\t\t\tlabel: \"dateTo_label\",\n\t\t\t\t\trightAlignDropdown: true,\n\t\t\t\t} satisfies DatePickerAttrs),\n\t\t\t),\n\t\t)\n\t}\n\n\tprivate async onStartDateSelected(date: Date) {\n\t\tif ((await this.searchViewModel.selectStartDate(date)) != PaidFunctionResult.Success) {\n\t\t\tshowNotAvailableForFreeDialog()\n\t\t}\n\t}\n\n\tprivate confirmMailSearch() {\n\t\treturn Dialog.confirm(\"continueSearchMailbox_msg\", \"search_label\")\n\t}\n\n\tprivate readonly shortcuts = lazyMemoized<ReadonlyArray<Shortcut>>(() => [\n\t\t...listSelectionKeyboardShortcuts(MultiselectMode.Enabled, () => this.searchViewModel.listModel),\n\t\t{\n\t\t\tkey: Keys.N,\n\t\t\texec: () => {\n\t\t\t\tconst type = this.searchViewModel.searchedType\n\n\t\t\t\tif (isSameTypeRef(type, MailTypeRef)) {\n\t\t\t\t\tnewMailEditor()\n\t\t\t\t\t\t.then((editor) => editor.show())\n\t\t\t\t\t\t.catch(ofClass(PermissionError, noOp))\n\t\t\t\t} else if (isSameTypeRef(type, ContactTypeRef)) {\n\t\t\t\t\tlocator.contactModel.getContactListId().then((contactListId) => {\n\t\t\t\t\t\tnew ContactEditor(locator.entityClient, null, assertNotNull(contactListId)).show()\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t},\n\t\t\tenabled: () => locator.logins.isInternalUserLoggedIn() && !locator.logins.isEnabled(FeatureType.ReplyOnly),\n\t\t\thelp: \"newMail_action\",\n\t\t},\n\t\t{\n\t\t\tkey: Keys.DELETE,\n\t\t\texec: () => this.deleteSelected(),\n\t\t\thelp: \"delete_action\",\n\t\t},\n\t\t{\n\t\t\tkey: Keys.BACKSPACE,\n\t\t\texec: () => this.deleteSelected(),\n\t\t\thelp: \"delete_action\",\n\t\t},\n\t\t{\n\t\t\tkey: Keys.A,\n\t\t\texec: () => this.archiveSelected(),\n\t\t\thelp: \"archive_action\",\n\t\t\tenabled: () => getCurrentSearchMode() === SearchCategoryTypes.mail,\n\t\t},\n\t\t{\n\t\t\tkey: Keys.I,\n\t\t\texec: () => this.moveSelectedToInbox(),\n\t\t\thelp: \"moveToInbox_action\",\n\t\t\tenabled: () => getCurrentSearchMode() === SearchCategoryTypes.mail,\n\t\t},\n\t\t{\n\t\t\tkey: Keys.V,\n\t\t\texec: () => this.move(),\n\t\t\thelp: \"move_action\",\n\t\t\tenabled: () => getCurrentSearchMode() === SearchCategoryTypes.mail,\n\t\t},\n\t\t{\n\t\t\tkey: Keys.U,\n\t\t\texec: () => this.toggleUnreadStatus(),\n\t\t\thelp: \"toggleUnread_action\",\n\t\t\tenabled: () => getCurrentSearchMode() === SearchCategoryTypes.mail,\n\t\t},\n\t])\n\n\tasync onNewUrl(args: Record<string, any>, requestedPath: string) {\n\t\t// calling init here too because this is called very early in the lifecycle and onNewUrl won't work properly if init is called\n\t\t// afterwords\n\t\tawait this.searchViewModel.init(() => this.confirmMailSearch())\n\t\tthis.searchViewModel.onNewUrl(args, requestedPath)\n\t\tif (\n\t\t\tisSameTypeRef(this.searchViewModel.searchedType, MailTypeRef) &&\n\t\t\tstyles.isSingleColumnLayout() &&\n\t\t\t!args.id &&\n\t\t\tthis.viewSlider.focusedColumn === this.resultDetailsColumn\n\t\t) {\n\t\t\tthis.viewSlider.focusPreviousColumn()\n\t\t}\n\t\tthis.invalidateBirthdayPreview()\n\n\t\t// redraw because init() is async\n\t\tm.redraw()\n\t}\n\n\tprivate getMainButton(typeRef: TypeRef<unknown>): {\n\t\tlabel: TranslationKey\n\t\tclick: ClickHandler\n\t} | null {\n\t\tif (styles.isUsingBottomNavigation()) {\n\t\t\treturn null\n\t\t} else if (isSameTypeRef(typeRef, MailTypeRef) && isNewMailActionAvailable()) {\n\t\t\treturn {\n\t\t\t\tclick: () => {\n\t\t\t\t\tnewMailEditor()\n\t\t\t\t\t\t.then((editor) => editor.show())\n\t\t\t\t\t\t.catch(ofClass(PermissionError, noOp))\n\t\t\t\t},\n\t\t\t\tlabel: \"newMail_action\",\n\t\t\t}\n\t\t} else if (isSameTypeRef(typeRef, ContactTypeRef)) {\n\t\t\treturn {\n\t\t\t\tclick: () => {\n\t\t\t\t\tlocator.contactModel.getContactListId().then((contactListId) => {\n\t\t\t\t\t\tnew ContactEditor(locator.entityClient, null, assertNotNull(contactListId)).show()\n\t\t\t\t\t})\n\t\t\t\t},\n\t\t\t\tlabel: \"newContact_action\",\n\t\t\t}\n\t\t} else if (isSameTypeRef(typeRef, CalendarEventTypeRef)) {\n\t\t\treturn {\n\t\t\t\tclick: () => {\n\t\t\t\t\tthis.createNewEventDialog()\n\t\t\t\t},\n\t\t\t\tlabel: \"newEvent_action\",\n\t\t\t}\n\t\t} else {\n\t\t\treturn null\n\t\t}\n\t}\n\n\tprivate async createNewEventDialog(): Promise<void> {\n\t\tconst dateToUse = this.searchViewModel.startDate ? setNextHalfHour(new Date(this.searchViewModel.startDate)) : setNextHalfHour(new Date())\n\n\t\t// Disallow creation of events when there is no existing calendar\n\t\tconst lazyCalendarInfo = this.searchViewModel.getLazyCalendarInfos()\n\t\tconst calendarInfos = lazyCalendarInfo.isLoaded() ? lazyCalendarInfo.getSync() : lazyCalendarInfo.getAsync()\n\n\t\tif (calendarInfos instanceof Promise) {\n\t\t\tawait showProgressDialog(\"pleaseWait_msg\", calendarInfos)\n\t\t}\n\n\t\tconst mailboxDetails = await locator.mailboxModel.getUserMailboxDetails()\n\t\tconst mailboxProperties = await locator.mailboxModel.getMailboxProperties(mailboxDetails.mailboxGroupRoot)\n\t\tconst model = await locator.calendarEventModel(CalendarOperation.Create, getEventWithDefaultTimes(dateToUse), mailboxDetails, mailboxProperties, null)\n\n\t\tif (model) {\n\t\t\tconst eventEditor = new EventEditorDialog()\n\t\t\tawait eventEditor.showNewCalendarEventEditDialog(model)\n\t\t}\n\t}\n\n\tprivate archiveSelected(): void {\n\t\tconst selectedMails = this.searchViewModel.getSelectedMails()\n\n\t\tif (selectedMails.length > 0) {\n\t\t\tif (selectedMails.length > 1) {\n\t\t\t\tthis.searchViewModel.listModel.selectNone()\n\t\t\t}\n\n\t\t\tarchiveMails(selectedMails)\n\t\t}\n\t}\n\n\tprivate moveSelectedToInbox(): void {\n\t\tconst selectedMails = this.searchViewModel.getSelectedMails()\n\n\t\tif (selectedMails.length > 0) {\n\t\t\tif (selectedMails.length > 1) {\n\t\t\t\tthis.searchViewModel.listModel.selectNone()\n\t\t\t}\n\n\t\t\tmoveToInbox(selectedMails)\n\t\t}\n\t}\n\n\tprivate move() {\n\t\tconst selectedMails = this.searchViewModel.getSelectedMails()\n\n\t\tif (selectedMails.length > 0) {\n\t\t\tshowMoveMailsDropdown(locator.mailboxModel, mailLocator.mailModel, getMoveMailBounds(), selectedMails, {\n\t\t\t\tonSelected: () => {\n\t\t\t\t\tif (selectedMails.length > 1) {\n\t\t\t\t\t\tthis.searchViewModel.listModel.selectNone()\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t})\n\t\t}\n\t}\n\n\tprivate toggleUnreadStatus(): void {\n\t\tlet selectedMails = this.searchViewModel.getSelectedMails()\n\n\t\tif (selectedMails.length > 0) {\n\t\t\tmailLocator.mailModel.markMails(selectedMails, !selectedMails[0].unread)\n\t\t}\n\t}\n\n\t// return value: false means it has been handled\n\tprivate deleteSelected(): boolean {\n\t\tif (this.searchViewModel.listModel.state.selectedItems.size > 0) {\n\t\t\tif (isSameTypeRef(this.searchViewModel.searchedType, MailTypeRef)) {\n\t\t\t\tconst selected = this.searchViewModel.getSelectedMails()\n\t\t\t\tshowDeleteConfirmationDialog(selected).then((confirmed) => {\n\t\t\t\t\tif (confirmed) {\n\t\t\t\t\t\tif (selected.length > 1) {\n\t\t\t\t\t\t\t// is needed for correct selection behavior on mobile\n\t\t\t\t\t\t\tthis.searchViewModel.listModel.selectNone()\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tmailLocator.mailModel.deleteMails(selected)\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\treturn false\n\t\t\t} else if (isSameTypeRef(this.searchViewModel.searchedType, ContactTypeRef)) {\n\t\t\t\tDialog.confirm(\"deleteContacts_msg\").then((confirmed) => {\n\t\t\t\t\tconst selected = this.searchViewModel.getSelectedContacts()\n\t\t\t\t\tif (confirmed) {\n\t\t\t\t\t\tif (selected.length > 1) {\n\t\t\t\t\t\t\t// is needed for correct selection behavior on mobile\n\t\t\t\t\t\t\tthis.searchViewModel.listModel.selectNone()\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfor (const contact of selected) {\n\t\t\t\t\t\t\tlocator.entityClient.erase(contact).catch(\n\t\t\t\t\t\t\t\tofClass(NotFoundError, (_) => {\n\t\t\t\t\t\t\t\t\t// ignore because the delete key shortcut may be executed again while the contact is already deleted\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\treturn false\n\t\t\t}\n\t\t}\n\t\treturn true\n\t}\n\n\tprivate renderFilterButton(): Children {\n\t\treturn m(MailFilterButton, {\n\t\t\tfilter: this.searchViewModel.mailFilter,\n\t\t\tsetFilter: (filter) => this.searchViewModel.setMailFilter(filter),\n\t\t})\n\t}\n\n\tprivate renderCalendarFilter(): Children {\n\t\tif (this.searchViewModel.getLazyCalendarInfos().isLoaded() && this.searchViewModel.getUserHasNewPaidPlan().isLoaded()) {\n\t\t\tconst calendarInfos = this.searchViewModel.getLazyCalendarInfos().getSync() ?? []\n\n\t\t\t// Load user's calendar list\n\t\t\tconst items: {\n\t\t\t\tname: string\n\t\t\t\tvalue: CalendarInfo | string\n\t\t\t}[] = Array.from(calendarInfos.values()).map((ci) => ({\n\t\t\t\tname: getSharedGroupName(ci.groupInfo, locator.logins.getUserController(), true),\n\t\t\t\tvalue: ci,\n\t\t\t}))\n\n\t\t\tif (this.searchViewModel.getUserHasNewPaidPlan().getSync()) {\n\t\t\t\tconst localCalendars = this.searchViewModel.getLocalCalendars().map((cal) => ({\n\t\t\t\t\tname: cal.name,\n\t\t\t\t\tvalue: cal.id,\n\t\t\t\t}))\n\n\t\t\t\titems.push(...localCalendars)\n\t\t\t}\n\n\t\t\t// Find the selected value after loading the available calendars\n\t\t\tconst selectedValue =\n\t\t\t\titems.find((calendar) => {\n\t\t\t\t\tif (!calendar.value) {\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\n\t\t\t\t\tif (typeof calendar.value === \"string\") {\n\t\t\t\t\t\treturn calendar.value === this.searchViewModel.selectedCalendar\n\t\t\t\t\t}\n\n\t\t\t\t\t// It isn't a string, so it can be only a Calendar Info\n\t\t\t\t\tconst calendarValue = calendar.value\n\t\t\t\t\treturn isSameId([calendarValue.groupRoot.longEvents, calendarValue.groupRoot.shortEvents], this.searchViewModel.selectedCalendar)\n\t\t\t\t})?.value ?? null\n\n\t\t\treturn m(\n\t\t\t\t\".ml-button\",\n\t\t\t\tm(DropDownSelector, {\n\t\t\t\t\tlabel: \"calendar_label\",\n\t\t\t\t\titems: [{ name: lang.get(\"all_label\"), value: null }, ...items],\n\t\t\t\t\tselectedValue,\n\t\t\t\t\tselectionChangedHandler: (value: CalendarInfo | null) => {\n\t\t\t\t\t\t// value can be null if default option has been selected\n\t\t\t\t\t\tthis.searchViewModel.selectCalendar(value)\n\t\t\t\t\t},\n\t\t\t\t} satisfies DropDownSelectorAttrs<CalendarInfo | string | null>),\n\t\t\t)\n\t\t} else {\n\t\t\treturn null\n\t\t}\n\t}\n\n\tprivate renderRepeatingFilter(): Children {\n\t\treturn m(\n\t\t\t\".mlr-button\",\n\t\t\tm(Checkbox, {\n\t\t\t\tlabel: () => lang.get(\"includeRepeatingEvents_action\"),\n\t\t\t\tchecked: this.searchViewModel.includeRepeatingEvents,\n\t\t\t\tonChecked: (value: boolean) => {\n\t\t\t\t\tthis.searchViewModel.selectIncludeRepeatingEvents(value)\n\t\t\t\t},\n\t\t\t} satisfies CheckboxAttrs),\n\t\t)\n\t}\n}\n\nfunction getCurrentSearchMode(): SearchCategoryTypes {\n\tconst route = m.route.get()\n\tif (route.startsWith(\"/search/contact\")) {\n\t\treturn SearchCategoryTypes.contact\n\t} else if (route.startsWith(\"/search/calendar\")) {\n\t\treturn SearchCategoryTypes.calendar\n\t} else {\n\t\treturn SearchCategoryTypes.mail\n\t}\n}\n\nasync function newMailEditor(): Promise<Dialog> {\n\tconst [mailboxDetails, { newMailEditor }] = await Promise.all([locator.mailboxModel.getUserMailboxDetails(), import(\"../../mail/editor/MailEditor\")])\n\treturn newMailEditor(mailboxDetails)\n}\n"]}