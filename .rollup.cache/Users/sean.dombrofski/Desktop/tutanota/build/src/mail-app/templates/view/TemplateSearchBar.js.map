{"version":3,"file":"TemplateSearchBar.js","sourceRoot":"","sources":["../../../../../src/mail-app/templates/view/TemplateSearchBar.ts"],"names":[],"mappings":"AAAA,OAAO,CAAsC,MAAM,SAAS,CAAA;AAE5D,OAAO,EAAE,IAAI,EAAE,MAAM,wCAAwC,CAAA;AAC7D,OAAO,EAAE,eAAe,EAAE,EAAE,EAAE,MAAM,0BAA0B,CAAA;AAC9D,OAAO,EAAE,uBAAuB,EAAc,MAAM,iCAAiC,CAAA;AACrF,OAAO,EAAE,KAAK,EAAE,MAAM,2BAA2B,CAAA;AACjD,OAAO,EAAE,aAAa,EAAE,MAAM,uBAAuB,CAAA;AAUrD,MAAM,OAAO,iBAAiB;IAC7B,QAAQ,GAA4B,IAAI,CAAA;IAExC,IAAI,CAAC,KAAoC;QACxC,MAAM,CAAC,GAAG,KAAK,CAAC,KAAK,CAAA;QACrB,OAAO,CAAC,CACP,2BAA2B,EAC3B;YACC,KAAK,EAAE;gBACN,eAAe,EAAE,aAAa,KAAK,CAAC,cAAc,EAAE;aACpD;SACD,EACD,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC,CACtB,CAAA;IACF,CAAC;IAED,cAAc,CAAC,CAAyB;QACvC,OAAO,CAAC,CAAC,aAAa,EAAE;YACvB,WAAW,EAAE,CAAC,CAAC,WAAW,IAAI,IAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC,WAAW,CAAC;YACpE,QAAQ,EAAE,CAAC,KAAK,EAAE,EAAE;gBACnB,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC,GAAuB,CAAA;gBAC7C,IAAI,CAAC,QAAQ,CAAC,KAAK,GAAG,CAAC,CAAC,KAAK,EAAE,CAAA;gBAC/B,IAAI,CAAC,QAAQ,CAAC,KAAK,EAAE,CAAA;YACtB,CAAC;YACD,SAAS,EAAE,CAAC,CAAgB,EAAE,EAAE;gBAC/B,MAAM,GAAG,GAAG,uBAAuB,CAAC,CAAC,CAAC,CAAA;gBACtC,OAAO,CAAC,CAAC,UAAU,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAA;YACvD,CAAC;YACD,OAAO,EAAE,GAAG,EAAE;gBACb,MAAM,QAAQ,GAAG,aAAa,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAA;gBAC7C,CAAC,CAAC,KAAK,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAA;gBACvB,CAAC,CAAC,OAAO,EAAE,CAAC,QAAQ,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAA;YACtC,CAAC;YACD,KAAK,EAAE;gBACN,UAAU,EAAE,EAAE,CAAC,eAAe,CAAC;aAC/B;SACD,CAAC,CAAA;IACH,CAAC;CACD","sourcesContent":["import m, { Children, ClassComponent, Vnode } from \"mithril\"\nimport type { MaybeTranslation } from \"../../../common/misc/LanguageViewModel\"\nimport { lang } from \"../../../common/misc/LanguageViewModel\"\nimport { inputLineHeight, px } from \"../../../common/gui/size\"\nimport { keyboardEventToKeyPress, keyHandler } from \"../../../common/misc/KeyManager\"\nimport { theme } from \"../../../common/gui/theme\"\nimport { assertNotNull } from \"@tutao/tutanota-utils\"\nimport Stream from \"mithril/stream\"\n\nexport type TemplateSearchBarAttrs = {\n\tvalue: Stream<string>\n\tplaceholder?: MaybeTranslation\n\toninput?: (value: string, input: HTMLInputElement) => unknown\n\tkeyHandler?: keyHandler\n}\n\nexport class TemplateSearchBar implements ClassComponent<TemplateSearchBarAttrs> {\n\tdomInput: HTMLInputElement | null = null\n\n\tview(vnode: Vnode<TemplateSearchBarAttrs>): Children {\n\t\tconst a = vnode.attrs\n\t\treturn m(\n\t\t\t\".inputWrapper.pt-xs.pb-xs\",\n\t\t\t{\n\t\t\t\tstyle: {\n\t\t\t\t\t\"border-bottom\": `1px solid ${theme.content_border}`,\n\t\t\t\t},\n\t\t\t},\n\t\t\tthis._getInputField(a),\n\t\t)\n\t}\n\n\t_getInputField(a: TemplateSearchBarAttrs): Children {\n\t\treturn m(\"input.input\", {\n\t\t\tplaceholder: a.placeholder && lang.getTranslationText(a.placeholder),\n\t\t\toncreate: (vnode) => {\n\t\t\t\tthis.domInput = vnode.dom as HTMLInputElement\n\t\t\t\tthis.domInput.value = a.value()\n\t\t\t\tthis.domInput.focus()\n\t\t\t},\n\t\t\tonkeydown: (e: KeyboardEvent) => {\n\t\t\t\tconst key = keyboardEventToKeyPress(e)\n\t\t\t\treturn a.keyHandler != null ? a.keyHandler(key) : true\n\t\t\t},\n\t\t\toninput: () => {\n\t\t\t\tconst domInput = assertNotNull(this.domInput)\n\t\t\t\ta.value(domInput.value)\n\t\t\t\ta.oninput?.(domInput.value, domInput)\n\t\t\t},\n\t\t\tstyle: {\n\t\t\t\tlineHeight: px(inputLineHeight),\n\t\t\t},\n\t\t})\n\t}\n}\n"]}