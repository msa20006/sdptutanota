{"version":3,"file":"VCardImporter.js","sourceRoot":"","sources":["../../../../src/mail-app/contacts/VCardImporter.ts"],"names":[],"mappings":"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","sourcesContent":["import {\n\tBirthday,\n\tContact,\n\tContactAddress,\n\tContactMailAddress,\n\tContactMessengerHandle,\n\tContactPhoneNumber,\n\tContactPronouns,\n\tContactRelationship,\n\tContactWebsite,\n\tcreateBirthday,\n\tcreateContact,\n\tcreateContactAddress,\n\tcreateContactMailAddress,\n\tcreateContactMessengerHandle,\n\tcreateContactPhoneNumber,\n\tcreateContactPronouns,\n\tcreateContactRelationship,\n\tcreateContactWebsite,\n} from \"../../common/api/entities/tutanota/TypeRefs.js\"\nimport {\n\tContactAddressType,\n\tContactMessengerHandleType,\n\tContactPhoneNumberType,\n\tContactRelationshipType,\n\tContactWebsiteType,\n} from \"../../common/api/common/TutanotaConstants\"\nimport { decodeBase64, decodeQuotedPrintable } from \"@tutao/tutanota-utils\"\nimport { birthdayToIsoDate, isValidBirthday } from \"../../common/api/common/utils/BirthdayUtils\"\nimport { ParsingError } from \"../../common/api/common/error/ParsingError\"\nimport { assertMainOrNode } from \"../../common/api/common/Env\"\n\nassertMainOrNode()\n\n/**\n * split file content with multiple vCards into a list of vCard strings\n * @param vCardFileData\n */\nexport function vCardFileToVCards(vCardFileData: string): string[] | null {\n\tlet V4 = \"\\nVERSION:4.0\"\n\tlet V3 = \"\\nVERSION:3.0\"\n\tlet V2 = \"\\nVERSION:2.1\"\n\tlet B = \"BEGIN:VCARD\\n\"\n\tlet E = \"END:VCARD\"\n\tvCardFileData = vCardFileData.replace(/begin:vcard/g, \"BEGIN:VCARD\")\n\tvCardFileData = vCardFileData.replace(/end:vcard/g, \"END:VCARD\")\n\tvCardFileData = vCardFileData.replace(/version:2.1/g, \"VERSION:2.1\")\n\n\tif (\n\t\tvCardFileData.indexOf(\"BEGIN:VCARD\") > -1 &&\n\t\tvCardFileData.indexOf(E) > -1 &&\n\t\t(vCardFileData.indexOf(V4) > -1 || vCardFileData.indexOf(V3) > -1 || vCardFileData.indexOf(V2) > -1)\n\t) {\n\t\tvCardFileData = vCardFileData.replace(/\\r/g, \"\")\n\t\tvCardFileData = vCardFileData.replace(/\\n /g, \"\") //folding symbols removed\n\n\t\tvCardFileData = vCardFileData.replace(/\\nEND:VCARD\\n\\n/g, \"\")\n\t\tvCardFileData = vCardFileData.replace(/\\nEND:VCARD\\n/g, \"\")\n\t\tvCardFileData = vCardFileData.replace(/\\nEND:VCARD/g, \"\")\n\t\tvCardFileData = vCardFileData.substring(vCardFileData.indexOf(B) + B.length)\n\t\treturn vCardFileData.split(B)\n\t} else {\n\t\treturn null\n\t}\n}\n\nexport function vCardEscapingSplit(details: string): string[] {\n\tdetails = details.replace(/\\\\\\\\/g, \"--bslashbslash++\")\n\tdetails = details.replace(/\\\\;/g, \"--semiColonsemiColon++\")\n\tdetails = details.replace(/\\\\:/g, \"--dPunktdPunkt++\")\n\tlet array = details.split(\";\")\n\tarray = array.map((elem) => {\n\t\treturn elem.trim()\n\t})\n\treturn array\n}\n\nexport function vCardReescapingArray(details: string[]): string[] {\n\treturn details.map((a) => {\n\t\ta = a.replace(/--bslashbslash\\+\\+/g, \"\\\\\")\n\t\ta = a.replace(/--semiColonsemiColon\\+\\+/g, \";\")\n\t\ta = a.replace(/--dPunktdPunkt\\+\\+/g, \":\")\n\t\ta = a.replace(/\\\\n/g, \"\\n\")\n\t\ta = a.replace(/\\\\,/g, \",\")\n\t\treturn a\n\t})\n}\n\nexport function vCardEscapingSplitAdr(addressDetails: string): string[] {\n\taddressDetails = addressDetails.replace(/\\\\\\\\/g, \"--bslashbslash++\")\n\taddressDetails = addressDetails.replace(/\\\\;/g, \"--semiColonsemiColon++\")\n\tlet array = addressDetails.split(\";\")\n\treturn array.map((elem) => {\n\t\tif (elem.trim().length > 0) {\n\t\t\treturn elem.trim().concat(\"\\n\")\n\t\t} else {\n\t\t\t// needed for only Space elements in Address\n\t\t\treturn \"\"\n\t\t}\n\t})\n}\n\nfunction _decodeTag(encoding: string, charset: string, text: string): string {\n\tlet decoder = (cs: string, l: string) => l\n\n\tswitch (encoding.toLowerCase()) {\n\t\tcase \"quoted-printable:\":\n\t\t\tdecoder = decodeQuotedPrintable\n\t\t\tbreak\n\n\t\tcase \"base64:\":\n\t\t\tdecoder = decodeBase64\n\t}\n\n\treturn text\n\t\t.split(\";\")\n\t\t.map((line) => decoder(charset, line))\n\t\t.join(\";\")\n}\n\nexport function getPropertyValue(property: string, tagValue: string) {\n\tconst exp = new RegExp(property + \"=(.*?)[:;]\", \"gi\")\n\treturn (Array.from(tagValue.matchAll(exp), (m) => m[1])[0] ?? \"\").trim()\n}\n\n/**\n * @returns The list of created Contact instances (but not yet saved) or null if vCardFileData is not a valid vCard string.\n */\nexport function vCardListToContacts(vCardList: string[], ownerGroupId: Id): Contact[] {\n\tlet contacts: Contact[] = []\n\n\tfor (let i = 0; i < vCardList.length; i++) {\n\t\tlet lastName: string = \"\"\n\t\tlet firstName: string = \"\"\n\t\tlet title: string | null = null\n\t\tlet birthdayIso: string | null = null\n\t\tlet company: string = \"\"\n\t\tlet comment: string = \"\"\n\t\tlet nickname: string | null = null\n\t\tlet role = \"\"\n\t\tlet department = \"\"\n\t\tlet middleName = \"\"\n\t\tlet suffix = \"\"\n\t\tconst addresses: Array<ContactAddress> = []\n\t\tconst mailAddresses: Array<ContactMailAddress> = []\n\t\tconst phoneNumbers: Array<ContactPhoneNumber> = []\n\t\tconst websites: Array<ContactWebsite> = []\n\t\tconst relationships: Array<ContactRelationship> = []\n\t\tconst pronouns: Array<ContactPronouns> = []\n\t\tconst messengerHandles: Array<ContactMessengerHandle> = []\n\t\tlet vCardLines = vCardList[i].split(\"\\n\")\n\n\t\tfor (let j = 0; j < vCardLines.length; j++) {\n\t\t\tlet indexAfterTag = vCardLines[j].indexOf(\":\")\n\t\t\tlet tagAndTypeString = vCardLines[j].substring(0, indexAfterTag).toUpperCase()\n\t\t\tlet tagName = tagAndTypeString.split(\";\")[0]\n\t\t\tlet tagValue = vCardLines[j].substring(indexAfterTag + 1)\n\t\t\tlet encodingObj = vCardLines[j].split(\";\").find((line) => line.includes(\"ENCODING=\"))\n\t\t\tlet encoding = encodingObj ? encodingObj.split(\"=\")[1] : \"\"\n\t\t\tlet charsetObj = vCardLines[j].split(\";\").find((line) => line.includes(\"CHARSET=\"))\n\t\t\tlet charset = charsetObj ? charsetObj.split(\"=\")[1] : \"utf-8\"\n\t\t\ttagValue = _decodeTag(encoding, charset, tagValue)\n\n\t\t\tswitch (tagName) {\n\t\t\t\tcase \"N\": {\n\t\t\t\t\tlet nameDetails = vCardReescapingArray(vCardEscapingSplit(tagValue))\n\n\t\t\t\t\tfor (let i = nameDetails.length; nameDetails.length < 4; i++) {\n\t\t\t\t\t\tnameDetails.push(\"\")\n\t\t\t\t\t}\n\n\t\t\t\t\tlastName = nameDetails[0]\n\t\t\t\t\tfirstName = nameDetails[1]\n\t\t\t\t\tmiddleName = nameDetails[2]\n\t\t\t\t\ttitle = nameDetails[3]\n\t\t\t\t\tsuffix = nameDetails[4]\n\t\t\t\t\tbreak\n\t\t\t\t}\n\n\t\t\t\tcase \"FN\":\n\t\t\t\t\t//Thunderbird can export FULLNAME tag if that is given with the email address automatic contact creation. If there is no first name or second name the namestring will be saved as full name.\n\t\t\t\t\tif (firstName === \"\" && lastName === \"\" && title == null && middleName === \"\" && suffix === \"\") {\n\t\t\t\t\t\tlet fullName = vCardReescapingArray(vCardEscapingSplit(tagValue))\n\t\t\t\t\t\tfirstName = fullName.join(\" \").replace(/\"/g, \"\") //Thunderbird saves the Fullname in \"quoteations marks\" they are deleted here\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak\n\n\t\t\t\tcase \"BDAY\": {\n\t\t\t\t\tlet indexOfT = tagValue.indexOf(\"T\")\n\t\t\t\t\tlet bDayDetails: Birthday | null = null\n\n\t\t\t\t\tif (tagValue.match(/--\\d{4}/g)) {\n\t\t\t\t\t\tbDayDetails = createBirthday({\n\t\t\t\t\t\t\tmonth: tagValue.substring(2, 4),\n\t\t\t\t\t\t\tday: tagValue.substring(4, 6),\n\t\t\t\t\t\t\tyear: null,\n\t\t\t\t\t\t})\n\t\t\t\t\t} else if (tagValue.match(/\\d{4}-\\d{2}-\\d{2}/g)) {\n\t\t\t\t\t\tlet bDay = tagValue.substring(0, indexOfT !== -1 ? indexOfT : tagValue.length).split(\"-\")\n\t\t\t\t\t\tbDayDetails = createBirthday({\n\t\t\t\t\t\t\tyear: bDay[0].trim(),\n\t\t\t\t\t\t\tmonth: bDay[1].trim(),\n\t\t\t\t\t\t\tday: bDay[2].trim(),\n\t\t\t\t\t\t})\n\t\t\t\t\t} else if (tagValue.match(/\\d{8}/g)) {\n\t\t\t\t\t\tbDayDetails = createBirthday({\n\t\t\t\t\t\t\tyear: tagValue.substring(0, 4),\n\t\t\t\t\t\t\tmonth: tagValue.substring(4, 6),\n\t\t\t\t\t\t\tday: tagValue.substring(6, 8),\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\n\t\t\t\t\tif (bDayDetails && bDayDetails.year === \"1111\") {\n\t\t\t\t\t\t// we use 1111 as marker if no year has been defined as vcard 3.0 does not support dates without year\n\t\t\t\t\t\tbDayDetails.year = null\n\t\t\t\t\t}\n\n\t\t\t\t\ttry {\n\t\t\t\t\t\tbirthdayIso = bDayDetails && isValidBirthday(bDayDetails) ? birthdayToIsoDate(bDayDetails) : null\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tif (e instanceof ParsingError) {\n\t\t\t\t\t\t\tconsole.log(\"failed to parse birthday\", e)\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthrow e\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak\n\t\t\t\t}\n\n\t\t\t\tcase \"ORG\": {\n\t\t\t\t\tlet orgDetails = vCardReescapingArray(vCardEscapingSplit(tagValue))\n\t\t\t\t\tfor (let i = orgDetails.length; orgDetails.length < 2; i++) {\n\t\t\t\t\t\torgDetails.push(\"\")\n\t\t\t\t\t}\n\n\t\t\t\t\tdepartment = orgDetails.pop() ?? \"\"\n\t\t\t\t\tcompany = orgDetails.join(\" \")\n\t\t\t\t\tbreak\n\t\t\t\t}\n\n\t\t\t\tcase \"NOTE\": {\n\t\t\t\t\tlet note = vCardReescapingArray(vCardEscapingSplit(tagValue))\n\t\t\t\t\tcomment = note.join(\" \")\n\t\t\t\t\tbreak\n\t\t\t\t}\n\n\t\t\t\tcase \"ADR\":\n\t\t\t\tcase \"ITEM1.ADR\": // necessary for apple vcards\n\t\t\t\tcase \"ITEM2.ADR\":\n\t\t\t\t\t// necessary for apple vcards\n\t\t\t\t\tif (tagAndTypeString.indexOf(\"HOME\") > -1) {\n\t\t\t\t\t\t_addAddress(tagValue, addresses, ContactAddressType.PRIVATE)\n\t\t\t\t\t} else if (tagAndTypeString.indexOf(\"WORK\") > -1) {\n\t\t\t\t\t\t_addAddress(tagValue, addresses, ContactAddressType.WORK)\n\t\t\t\t\t} else {\n\t\t\t\t\t\t_addAddress(tagValue, addresses, ContactAddressType.OTHER)\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak\n\n\t\t\t\tcase \"EMAIL\":\n\t\t\t\tcase \"ITEM1.EMAIL\": // necessary for apple and protonmail vcards\n\t\t\t\tcase \"ITEM2.EMAIL\":\n\t\t\t\t\t// necessary for apple vcards\n\t\t\t\t\tif (tagAndTypeString.indexOf(\"HOME\") > -1) {\n\t\t\t\t\t\t_addMailAddress(tagValue, mailAddresses, ContactAddressType.PRIVATE)\n\t\t\t\t\t} else if (tagAndTypeString.indexOf(\"WORK\") > -1) {\n\t\t\t\t\t\t_addMailAddress(tagValue, mailAddresses, ContactAddressType.WORK)\n\t\t\t\t\t} else {\n\t\t\t\t\t\t_addMailAddress(tagValue, mailAddresses, ContactAddressType.OTHER)\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak\n\n\t\t\t\tcase \"TEL\":\n\t\t\t\tcase \"ITEM1.TEL\": // necessary for apple vcards\n\t\t\t\tcase \"ITEM2.TEL\":\n\t\t\t\t\t// necessary for apple vcards\n\t\t\t\t\ttagValue = tagValue.replace(/[\\u2000-\\u206F]/g, \"\")\n\n\t\t\t\t\tif (tagAndTypeString.indexOf(\"HOME\") > -1) {\n\t\t\t\t\t\t_addPhoneNumber(tagValue, phoneNumbers, ContactPhoneNumberType.PRIVATE)\n\t\t\t\t\t} else if (tagAndTypeString.indexOf(\"WORK\") > -1) {\n\t\t\t\t\t\t_addPhoneNumber(tagValue, phoneNumbers, ContactPhoneNumberType.WORK)\n\t\t\t\t\t} else if (tagAndTypeString.indexOf(\"FAX\") > -1) {\n\t\t\t\t\t\t_addPhoneNumber(tagValue, phoneNumbers, ContactPhoneNumberType.FAX)\n\t\t\t\t\t} else if (tagAndTypeString.indexOf(\"CELL\") > -1) {\n\t\t\t\t\t\t_addPhoneNumber(tagValue, phoneNumbers, ContactPhoneNumberType.MOBILE)\n\t\t\t\t\t} else {\n\t\t\t\t\t\t_addPhoneNumber(tagValue, phoneNumbers, ContactPhoneNumberType.OTHER)\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak\n\n\t\t\t\tcase \"URL\":\n\t\t\t\tcase \"ITEM1.URL\": // necessary for apple vcards\n\t\t\t\tcase \"ITEM2.URL\":\n\t\t\t\t\t// necessary for apple vcards\n\t\t\t\t\taddWebsite(tagValue, websites)\n\t\t\t\t\tbreak\n\n\t\t\t\tcase \"NICKNAME\": {\n\t\t\t\t\tlet nick = vCardReescapingArray(vCardEscapingSplit(tagValue))\n\t\t\t\t\tnickname = nick.join(\" \")\n\t\t\t\t\tbreak\n\t\t\t\t}\n\n\t\t\t\tcase \"PHOTO\":\n\t\t\t\t\t// if (indexAfterTag < tagValue.indexOf(\":\")) {\n\t\t\t\t\t// \tindexAfterTag = tagValue.indexOf(\":\")\n\t\t\t\t\t// }\n\t\t\t\t\t// /*Here will be the photo import*/\n\t\t\t\t\tbreak\n\n\t\t\t\tcase \"ROLE\":\n\t\t\t\tcase \"TITLE\": {\n\t\t\t\t\tlet vcardRole = vCardReescapingArray(vCardEscapingSplit(tagValue))\n\t\t\t\t\trole += (\" \" + vcardRole.join(\" \")).trim()\n\t\t\t\t\tbreak\n\t\t\t\t}\n\n\t\t\t\t// The content bellow this comment is present only on vCard 4.0+ - RFC 6350\n\t\t\t\tcase \"RELATED\": {\n\t\t\t\t\tlet type = ContactRelationshipType.OTHER\n\t\t\t\t\tconst vCardPropertyType = getPropertyValue(\"TYPE\", tagAndTypeString).toLowerCase()\n\t\t\t\t\tif (vCardPropertyType === \"friend\") {\n\t\t\t\t\t\ttype = ContactRelationshipType.FRIEND\n\t\t\t\t\t} else if (vCardPropertyType === \"child\") {\n\t\t\t\t\t\ttype = ContactRelationshipType.CHILD\n\t\t\t\t\t} else if (vCardPropertyType === \"parent\") {\n\t\t\t\t\t\ttype = ContactRelationshipType.PARENT\n\t\t\t\t\t} else if (vCardPropertyType === \"spouse\") {\n\t\t\t\t\t\ttype = ContactRelationshipType.SPOUSE\n\t\t\t\t\t}\n\n\t\t\t\t\taddRelationship(tagValue, relationships, type)\n\t\t\t\t\tbreak\n\t\t\t\t}\n\n\t\t\t\tcase \"PRONOUNS\": {\n\t\t\t\t\tconst lang = getPropertyValue(\"LANG\", tagAndTypeString)\n\t\t\t\t\taddPronouns(tagValue, pronouns, lang)\n\t\t\t\t\tbreak\n\t\t\t\t}\n\n\t\t\t\tcase \"IMPP\": {\n\t\t\t\t\tconst imRawType = getPropertyValue(\"TYPE\", tagAndTypeString)\n\t\t\t\t\tlet imType = ContactMessengerHandleType.OTHER\n\t\t\t\t\tlet customTypeName = \"\"\n\n\t\t\t\t\tif (imRawType.toLowerCase() === \"telegram\") {\n\t\t\t\t\t\timType = ContactMessengerHandleType.TELEGRAM\n\t\t\t\t\t} else if (imRawType.toLowerCase() === \"whatsapp\") {\n\t\t\t\t\t\timType = ContactMessengerHandleType.WHATSAPP\n\t\t\t\t\t} else if (imRawType.toLowerCase() === \"signal\") {\n\t\t\t\t\t\timType = ContactMessengerHandleType.SIGNAL\n\t\t\t\t\t} else if (imRawType.toLowerCase() === \"discord\") {\n\t\t\t\t\t\timType = ContactMessengerHandleType.DISCORD\n\t\t\t\t\t} else if (imRawType.trim() != \"\") {\n\t\t\t\t\t\timType = ContactMessengerHandleType.CUSTOM\n\t\t\t\t\t\tcustomTypeName = imRawType.trim()\n\t\t\t\t\t}\n\n\t\t\t\t\t// Remove the im:/xmpp: added by the vcard standard\n\t\t\t\t\tconst handleData = tagValue.indexOf(\":\") > -1 ? tagValue.substring(tagValue.indexOf(\":\") + 1) : tagValue\n\t\t\t\t\taddMessengerHandle(handleData, messengerHandles, imType, customTypeName)\n\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t\tdefault:\n\t\t\t}\n\t\t}\n\t\tcontacts[i] = createContact({\n\t\t\t_ownerGroup: ownerGroupId,\n\t\t\tlastName,\n\t\t\tfirstName,\n\t\t\ttitle,\n\t\t\tbirthdayIso,\n\t\t\tcompany,\n\t\t\tcomment,\n\t\t\tnickname,\n\t\t\trole,\n\t\t\taddresses,\n\t\t\tmailAddresses,\n\t\t\tphoneNumbers,\n\t\t\tdepartment,\n\t\t\tmiddleName,\n\t\t\twebsites,\n\t\t\trelationships,\n\t\t\tpronouns,\n\t\t\tmessengerHandles,\n\t\t\tnameSuffix: suffix,\n\t\t\tphoneticFirst: null,\n\t\t\tphoneticLast: null,\n\t\t\tphoneticMiddle: null,\n\t\t\tcustomDate: [],\n\t\t\tsocialIds: [],\n\t\t\tpresharedPassword: null,\n\t\t\tphoto: null,\n\t\t\toldBirthdayDate: null,\n\t\t\toldBirthdayAggregate: null,\n\t\t})\n\t}\n\n\tfunction _addAddress(vCardAddressValue: string, addresses: Array<ContactAddress>, type: ContactAddressType) {\n\t\tlet addressDetails = vCardReescapingArray(vCardEscapingSplitAdr(vCardAddressValue))\n\t\tlet address = createContactAddress({\n\t\t\ttype: type,\n\t\t\taddress: addressDetails.join(\"\").trim(),\n\t\t\tcustomTypeName: \"\",\n\t\t})\n\t\taddresses.push(address)\n\t}\n\n\tfunction _addPhoneNumber(vCardPhoneNumberValue: string, phoneNumbers: Array<ContactPhoneNumber>, type: ContactPhoneNumberType) {\n\t\tlet phoneNumber = createContactPhoneNumber({\n\t\t\ttype: type,\n\t\t\tnumber: vCardPhoneNumberValue,\n\t\t\tcustomTypeName: \"\",\n\t\t})\n\t\tphoneNumbers.push(phoneNumber)\n\t}\n\n\tfunction _addMailAddress(vCardMailAddressValue: string, mailAddresses: Array<ContactMailAddress>, type: ContactAddressType) {\n\t\tlet email = createContactMailAddress({\n\t\t\ttype: type,\n\t\t\taddress: vCardMailAddressValue,\n\t\t\tcustomTypeName: \"\",\n\t\t})\n\t\tmailAddresses.push(email)\n\t}\n\n\tfunction addRelationship(relationshipPerson: string, relationships: Array<ContactRelationship>, type: ContactRelationshipType) {\n\t\tconst relationship = createContactRelationship({\n\t\t\ttype: type,\n\t\t\tperson: relationshipPerson,\n\t\t\tcustomTypeName: \"\",\n\t\t})\n\t\trelationships.push(relationship)\n\t}\n\n\tfunction addPronouns(pronouns: string, pronounsArray: Array<ContactPronouns>, lang: string) {\n\t\tconst pronounsToAdd = createContactPronouns({\n\t\t\tlanguage: lang,\n\t\t\tpronouns,\n\t\t})\n\t\tpronounsArray.push(pronounsToAdd)\n\t}\n\n\tfunction addMessengerHandle(handle: string, messengerHandleArray: Array<ContactMessengerHandle>, type: ContactMessengerHandleType, customTypeName: string) {\n\t\tconst newHandle = createContactMessengerHandle({\n\t\t\thandle,\n\t\t\ttype,\n\t\t\tcustomTypeName,\n\t\t})\n\t\tmessengerHandleArray.push(newHandle)\n\t}\n\n\tfunction addWebsite(tagValue: string, websites: Array<ContactWebsite>) {\n\t\tlet website = createContactWebsite({\n\t\t\ttype: ContactWebsiteType.OTHER,\n\t\t\turl: vCardReescapingArray(vCardEscapingSplit(tagValue)).join(\"\"),\n\t\t\tcustomTypeName: \"\",\n\t\t})\n\t\twebsites.push(website)\n\t}\n\n\treturn contacts\n}\n"]}