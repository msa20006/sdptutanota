{"version":3,"file":"MailSettingsViewer.js","sourceRoot":"","sources":["../../../../src/mail-app/settings/MailSettingsViewer.ts"],"names":[],"mappings":"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","sourcesContent":["import m, { Children } from \"mithril\"\nimport { assertMainOrNode, isApp } from \"../../common/api/common/Env\"\nimport { lang } from \"../../common/misc/LanguageViewModel\"\nimport type { MailboxGroupRoot, MailboxProperties, OutOfOfficeNotification, TutanotaProperties } from \"../../common/api/entities/tutanota/TypeRefs.js\"\nimport {\n\tMailboxPropertiesTypeRef,\n\tMailFolderTypeRef,\n\tOutOfOfficeNotificationTypeRef,\n\tTutanotaPropertiesTypeRef,\n} from \"../../common/api/entities/tutanota/TypeRefs.js\"\nimport { Const, FeatureType, InboxRuleType, OperationType, ReportMovedMailsType } from \"../../common/api/common/TutanotaConstants\"\nimport { assertNotNull, capitalizeFirstLetter, defer, LazyLoaded, noOp, ofClass, promiseMap } from \"@tutao/tutanota-utils\"\nimport { getInboxRuleTypeName } from \"../mail/model/InboxRuleHandler\"\nimport { MailAddressTable } from \"../../common/settings/mailaddress/MailAddressTable.js\"\nimport { Dialog } from \"../../common/gui/base/Dialog\"\nimport { Icons } from \"../../common/gui/base/icons/Icons\"\nimport { showProgressDialog } from \"../../common/gui/dialogs/ProgressDialog\"\nimport type { MailboxDetail } from \"../../common/mailFunctionality/MailboxModel.js\"\nimport stream from \"mithril/stream\"\nimport Stream from \"mithril/stream\"\n\nimport type { DropDownSelectorAttrs } from \"../../common/gui/base/DropDownSelector.js\"\nimport { DropDownSelector } from \"../../common/gui/base/DropDownSelector.js\"\nimport type { TextFieldAttrs } from \"../../common/gui/base/TextField.js\"\nimport { TextField, TextFieldType } from \"../../common/gui/base/TextField.js\"\nimport type { TableAttrs, TableLineAttrs } from \"../../common/gui/base/Table.js\"\nimport { ColumnWidth, createRowActions, Table } from \"../../common/gui/base/Table.js\"\nimport * as AddInboxRuleDialog from \"./AddInboxRuleDialog\"\nimport { createInboxRuleTemplate } from \"./AddInboxRuleDialog\"\nimport { ExpanderButton, ExpanderPanel } from \"../../common/gui/base/Expander\"\nimport { IndexingNotSupportedError } from \"../../common/api/common/error/IndexingNotSupportedError\"\nimport { LockedError } from \"../../common/api/common/error/RestError\"\nimport { showEditOutOfOfficeNotificationDialog } from \"./EditOutOfOfficeNotificationDialog\"\nimport { formatActivateState, loadOutOfOfficeNotification } from \"../../common/misc/OutOfOfficeNotificationUtils\"\nimport { getSignatureType, show as showEditSignatureDialog } from \"./EditSignatureDialog\"\nimport { OfflineStorageSettingsModel } from \"./OfflineStorageSettings\"\nimport { showNotAvailableForFreeDialog } from \"../../common/misc/SubscriptionDialogs\"\nimport { deviceConfig, ListAutoSelectBehavior } from \"../../common/misc/DeviceConfig\"\nimport { IconButton, IconButtonAttrs } from \"../../common/gui/base/IconButton.js\"\nimport { ButtonSize } from \"../../common/gui/base/ButtonSize.js\"\nimport { getReportMovedMailsType } from \"../../common/misc/MailboxPropertiesUtils.js\"\nimport { MailAddressTableModel } from \"../../common/settings/mailaddress/MailAddressTableModel.js\"\nimport { getEnabledMailAddressesForGroupInfo } from \"../../common/api/common/utils/GroupUtils.js\"\nimport { formatStorageSize } from \"../../common/misc/Formatter.js\"\nimport { CustomerInfo } from \"../../common/api/entities/sys/TypeRefs.js\"\nimport { EntityUpdateData, isUpdateForTypeRef } from \"../../common/api/common/utils/EntityUpdateUtils.js\"\nimport { getMailAddressDisplayText } from \"../../common/mailFunctionality/SharedMailUtils.js\"\nimport { UpdatableSettingsViewer } from \"../../common/settings/Interfaces.js\"\nimport { mailLocator } from \"../mailLocator.js\"\nimport { getDefaultSenderFromUser, getFolderName } from \"../mail/model/MailUtils.js\"\nimport { elementIdPart } from \"../../common/api/common/utils/EntityUtils.js\"\n\nassertMainOrNode()\n\nexport class MailSettingsViewer implements UpdatableSettingsViewer {\n\t_signature: Stream<string>\n\t_mailboxProperties: LazyLoaded<MailboxProperties>\n\t_reportMovedMails: ReportMovedMailsType\n\t_defaultSender: string\n\t_defaultUnconfidential: boolean | null\n\t_sendPlaintext: boolean | null\n\t_noAutomaticContacts: boolean | null\n\t_enableMailIndexing: boolean | null\n\t_inboxRulesTableLines: Stream<Array<TableLineAttrs>>\n\t_inboxRulesExpanded: Stream<boolean>\n\t_indexStateWatch: Stream<any> | null\n\t_outOfOfficeNotification: LazyLoaded<OutOfOfficeNotification | null>\n\t_outOfOfficeStatus: Stream<string> // stores the status label, based on whether the notification is/ or will really be activated (checking start time/ end time)\n\tprivate _storageFieldValue: Stream<string>\n\tprivate customerInfo: CustomerInfo | null\n\tprivate mailAddressTableModel: MailAddressTableModel | null = null\n\tprivate mailAddressTableExpanded: boolean\n\tprivate offlineStorageSettings = new OfflineStorageSettingsModel(mailLocator.logins.getUserController(), deviceConfig)\n\n\tconstructor() {\n\t\tthis._defaultSender = getDefaultSenderFromUser(mailLocator.logins.getUserController())\n\t\tthis._signature = stream(getSignatureType(mailLocator.logins.getUserController().props).name)\n\t\tthis._reportMovedMails = getReportMovedMailsType(null) // loaded later\n\n\t\tthis._defaultUnconfidential = mailLocator.logins.getUserController().props.defaultUnconfidential\n\t\tthis._sendPlaintext = mailLocator.logins.getUserController().props.sendPlaintextOnly\n\t\tthis._noAutomaticContacts = mailLocator.logins.getUserController().props.noAutomaticContacts\n\t\tthis._enableMailIndexing = mailLocator.search.indexState().mailIndexEnabled\n\t\tthis._inboxRulesExpanded = stream<boolean>(false)\n\t\tthis.mailAddressTableExpanded = false\n\t\tthis._inboxRulesTableLines = stream<Array<TableLineAttrs>>([])\n\t\tthis._outOfOfficeStatus = stream(lang.get(\"deactivated_label\"))\n\t\tthis._indexStateWatch = null\n\t\t// normally we would maybe like to get it as an argument but these viewers are created in an odd way\n\t\tmailLocator.mailAddressTableModelForOwnMailbox().then((model) => {\n\t\t\tthis.mailAddressTableModel = model\n\t\t\tm.redraw()\n\t\t})\n\t\tm.redraw()\n\n\t\tthis._updateInboxRules(mailLocator.logins.getUserController().props)\n\n\t\tthis._mailboxProperties = new LazyLoaded(async () => {\n\t\t\tconst mailboxGroupRoot = await this.getMailboxGroupRoot()\n\t\t\treturn mailLocator.mailboxModel.getMailboxProperties(mailboxGroupRoot)\n\t\t})\n\n\t\tthis._updateMailboxPropertiesSettings()\n\n\t\tthis._outOfOfficeNotification = new LazyLoaded(() => loadOutOfOfficeNotification(), null)\n\n\t\tthis._outOfOfficeNotification.getAsync().then(() => this._updateOutOfOfficeNotification())\n\n\t\tthis.customerInfo = null\n\t\tthis._storageFieldValue = stream(\"\")\n\n\t\tthis.offlineStorageSettings.init().then(() => m.redraw())\n\t}\n\n\tasync oninit(): Promise<void> {\n\t\tthis.customerInfo = await mailLocator.logins.getUserController().loadCustomerInfo()\n\t\tthis.updateStorageField(this.customerInfo).then(() => m.redraw())\n\t}\n\n\tprivate async getMailboxGroupRoot(): Promise<MailboxGroupRoot> {\n\t\t// For now we assume user mailbox, in the future we should specify which mailbox we are configuring\n\t\tconst { mailboxGroupRoot } = await mailLocator.mailboxModel.getUserMailboxDetails()\n\t\treturn mailboxGroupRoot\n\t}\n\n\tprivate async updateStorageField(customerInfo: CustomerInfo): Promise<void> {\n\t\tconst user = mailLocator.logins.getUserController().user\n\t\tconst usedStorage = formatStorageSize(Number(await mailLocator.userManagementFacade.readUsedUserStorage(user)))\n\t\tconst totalStorage = formatStorageSize(Number(customerInfo.perUserStorageCapacity) * Const.MEMORY_GB_FACTOR)\n\t\tthis._storageFieldValue(\n\t\t\tlang.get(\"amountUsedOf_label\", {\n\t\t\t\t\"{amount}\": usedStorage,\n\t\t\t\t\"{totalAmount}\": totalStorage,\n\t\t\t}),\n\t\t)\n\t}\n\n\tview(): Children {\n\t\tthis._defaultSender = getDefaultSenderFromUser(mailLocator.logins.getUserController())\n\t\tconst defaultSenderAttrs: DropDownSelectorAttrs<string> = {\n\t\t\tlabel: \"defaultSenderMailAddress_label\",\n\t\t\titems: getEnabledMailAddressesForGroupInfo(mailLocator.logins.getUserController().userGroupInfo)\n\t\t\t\t.sort()\n\t\t\t\t.map((a) => ({\n\t\t\t\t\tname: a,\n\t\t\t\t\tvalue: a,\n\t\t\t\t})),\n\t\t\tselectedValue: this._defaultSender,\n\t\t\tselectedValueDisplay: getMailAddressDisplayText(\n\t\t\t\tthis.mailAddressTableModel?.addresses().find(({ address }) => address === this._defaultSender)?.name ?? \"\",\n\t\t\t\tthis._defaultSender,\n\t\t\t\tfalse,\n\t\t\t),\n\t\t\tselectionChangedHandler: (defaultSenderAddress) => {\n\t\t\t\tmailLocator.logins.getUserController().props.defaultSender = defaultSenderAddress\n\t\t\t\tmailLocator.entityClient.update(mailLocator.logins.getUserController().props)\n\t\t\t},\n\t\t\thelpLabel: () => lang.get(\"defaultSenderMailAddressInfo_msg\"),\n\t\t\tdropdownWidth: 300,\n\t\t}\n\n\t\tconst changeSignatureButtonAttrs: IconButtonAttrs = {\n\t\t\ttitle: \"userEmailSignature_label\",\n\t\t\tclick: () => showEditSignatureDialog(mailLocator.logins.getUserController().props),\n\t\t\ticon: Icons.Edit,\n\t\t\tsize: ButtonSize.Compact,\n\t\t}\n\t\tconst signatureAttrs: TextFieldAttrs = {\n\t\t\tlabel: \"userEmailSignature_label\",\n\t\t\tvalue: this._signature(),\n\t\t\toninput: this._signature,\n\t\t\tisReadOnly: true,\n\t\t\tinjectionsRight: () => [m(IconButton, changeSignatureButtonAttrs)],\n\t\t}\n\n\t\tconst editOutOfOfficeNotificationButtonAttrs: IconButtonAttrs = {\n\t\t\ttitle: \"outOfOfficeNotification_title\",\n\t\t\tclick: () => {\n\t\t\t\tthis._outOfOfficeNotification.getAsync().then((notification) => showEditOutOfOfficeNotificationDialog(notification))\n\t\t\t},\n\t\t\ticon: Icons.Edit,\n\t\t\tsize: ButtonSize.Compact,\n\t\t}\n\n\t\tconst outOfOfficeAttrs: TextFieldAttrs = {\n\t\t\tlabel: \"outOfOfficeNotification_title\",\n\t\t\tvalue: this._outOfOfficeStatus(),\n\t\t\toninput: this._outOfOfficeStatus,\n\t\t\tisReadOnly: true,\n\t\t\tinjectionsRight: () => [m(IconButton, editOutOfOfficeNotificationButtonAttrs)],\n\t\t}\n\n\t\tconst defaultUnconfidentialAttrs: DropDownSelectorAttrs<boolean> = {\n\t\t\tlabel: \"defaultExternalDelivery_label\",\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\tname: lang.get(\"confidential_action\"),\n\t\t\t\t\tvalue: false,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: lang.get(\"nonConfidential_action\"),\n\t\t\t\t\tvalue: true,\n\t\t\t\t},\n\t\t\t],\n\t\t\tselectedValue: this._defaultUnconfidential,\n\t\t\tselectionChangedHandler: (v) => {\n\t\t\t\tmailLocator.logins.getUserController().props.defaultUnconfidential = v\n\t\t\t\tmailLocator.entityClient.update(mailLocator.logins.getUserController().props)\n\t\t\t},\n\t\t\thelpLabel: () => lang.get(\"defaultExternalDeliveryInfo_msg\"),\n\t\t\tdropdownWidth: 250,\n\t\t}\n\t\tconst sendPlaintextAttrs: DropDownSelectorAttrs<boolean> = {\n\t\t\tlabel: \"externalFormatting_label\",\n\t\t\thelpLabel: () => lang.get(\"externalFormattingInfo_msg\"),\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\tname: lang.get(\"html_action\"),\n\t\t\t\t\tvalue: false,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: lang.get(\"plaintext_action\"),\n\t\t\t\t\tvalue: true,\n\t\t\t\t},\n\t\t\t],\n\t\t\tselectedValue: this._sendPlaintext,\n\t\t\tselectionChangedHandler: (v) => {\n\t\t\t\tmailLocator.logins.getUserController().props.sendPlaintextOnly = v\n\t\t\t\tmailLocator.entityClient.update(mailLocator.logins.getUserController().props)\n\t\t\t},\n\t\t\tdropdownWidth: 250,\n\t\t}\n\t\tconst enableMailIndexingAttrs: DropDownSelectorAttrs<boolean> = {\n\t\t\tlabel: \"searchMailbox_label\",\n\t\t\thelpLabel: () => lang.get(\"enableSearchMailbox_msg\"),\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\tname: lang.get(\"activated_label\"),\n\t\t\t\t\tvalue: true,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: lang.get(\"deactivated_label\"),\n\t\t\t\t\tvalue: false,\n\t\t\t\t},\n\t\t\t],\n\t\t\tselectedValue: this._enableMailIndexing,\n\t\t\tselectionChangedHandler: (mailIndexEnabled) => {\n\t\t\t\tif (mailIndexEnabled) {\n\t\t\t\t\tshowProgressDialog(\"pleaseWait_msg\", mailLocator.indexerFacade.enableMailIndexing()).catch(\n\t\t\t\t\t\tofClass(IndexingNotSupportedError, () => {\n\t\t\t\t\t\t\tDialog.message(isApp() ? \"searchDisabledApp_msg\" : \"searchDisabled_msg\")\n\t\t\t\t\t\t}),\n\t\t\t\t\t)\n\t\t\t\t} else {\n\t\t\t\t\tshowProgressDialog(\"pleaseWait_msg\", mailLocator.indexerFacade.disableMailIndexing())\n\t\t\t\t}\n\t\t\t},\n\t\t\tdropdownWidth: 250,\n\t\t}\n\t\tconst behaviorAfterMoveEmailAction: DropDownSelectorAttrs<ListAutoSelectBehavior> = {\n\t\t\tlabel: \"behaviorAfterMovingEmail_label\",\n\t\t\thelpLabel: () => \"\",\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\tname: lang.get(\"showOlder_label\"),\n\t\t\t\t\tvalue: ListAutoSelectBehavior.OLDER,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: lang.get(\"showNewer_label\"),\n\t\t\t\t\tvalue: ListAutoSelectBehavior.NEWER,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: lang.get(\"showNone_label\"),\n\t\t\t\t\tvalue: ListAutoSelectBehavior.NONE,\n\t\t\t\t},\n\t\t\t],\n\t\t\tselectedValue: deviceConfig.getMailAutoSelectBehavior(),\n\t\t\tselectionChangedHandler: (behavior) => deviceConfig.setMailAutoSelectBehavior(behavior),\n\t\t\tdropdownWidth: 250,\n\t\t}\n\t\tconst reportMovedMailsAttrs = this.makeReportMovedMailsDropdownAttrs()\n\t\tconst templateRule = createInboxRuleTemplate(InboxRuleType.RECIPIENT_TO_EQUALS, \"\")\n\t\tconst addInboxRuleButtonAttrs: IconButtonAttrs = {\n\t\t\ttitle: \"addInboxRule_action\",\n\t\t\tclick: () => mailLocator.mailboxModel.getUserMailboxDetails().then((mailboxDetails) => AddInboxRuleDialog.show(mailboxDetails, templateRule)),\n\t\t\ticon: Icons.Add,\n\t\t\tsize: ButtonSize.Compact,\n\t\t}\n\t\tconst inboxRulesTableAttrs: TableAttrs = {\n\t\t\tcolumnHeading: [\"inboxRuleField_label\", \"inboxRuleValue_label\", \"inboxRuleTargetFolder_label\"],\n\t\t\tcolumnWidths: [ColumnWidth.Small, ColumnWidth.Largest, ColumnWidth.Small],\n\t\t\tshowActionButtonColumn: true,\n\t\t\taddButtonAttrs: addInboxRuleButtonAttrs,\n\t\t\tlines: this._inboxRulesTableLines(),\n\t\t}\n\t\tconst conversationViewDropdownAttrs: DropDownSelectorAttrs<boolean> = {\n\t\t\tlabel: \"conversationViewPref_label\",\n\t\t\t// show all means \"false\" because the pref is to \"disable\" it, but\n\t\t\t// we disabled it as \"enabled\"\n\t\t\titems: [\n\t\t\t\t{ name: lang.get(\"showAllMailsInThread_label\"), value: false },\n\t\t\t\t{ name: lang.get(\"showOnlySelectedMail_label\"), value: true },\n\t\t\t],\n\t\t\tselectedValue: deviceConfig.getConversationViewShowOnlySelectedMail(),\n\t\t\tselectionChangedHandler: (arg: boolean) => {\n\t\t\t\tdeviceConfig.setConversationViewShowOnlySelectedMail(arg)\n\t\t\t},\n\t\t\tdropdownWidth: 350,\n\t\t}\n\t\treturn [\n\t\t\tm(\n\t\t\t\t\"#user-settings.fill-absolute.scroll.plr-l.pb-xl\",\n\t\t\t\t{\n\t\t\t\t\trole: \"group\",\n\t\t\t\t\toncreate: () => {\n\t\t\t\t\t\tthis._indexStateWatch = mailLocator.search.indexState.map((newValue) => {\n\t\t\t\t\t\t\tthis._enableMailIndexing = newValue.mailIndexEnabled\n\n\t\t\t\t\t\t\tm.redraw()\n\t\t\t\t\t\t})\n\t\t\t\t\t},\n\t\t\t\t\tonremove: () => {\n\t\t\t\t\t\tif (this._indexStateWatch) {\n\t\t\t\t\t\t\tthis._indexStateWatch.end(true)\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t[\n\t\t\t\t\tthis.customerInfo != null && Number(this.customerInfo.perUserStorageCapacity) > 0\n\t\t\t\t\t\t? [\n\t\t\t\t\t\t\t\tm(\".h4.mt-l\", lang.get(\"storageCapacity_label\")),\n\t\t\t\t\t\t\t\tm(TextField, {\n\t\t\t\t\t\t\t\t\tlabel: \"storageCapacity_label\",\n\t\t\t\t\t\t\t\t\tvalue: this._storageFieldValue(),\n\t\t\t\t\t\t\t\t\toninput: this._storageFieldValue,\n\t\t\t\t\t\t\t\t\tisReadOnly: true,\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t  ]\n\t\t\t\t\t\t: null,\n\t\t\t\t\tm(\".h4.mt-l\", lang.get(\"general_label\")),\n\t\t\t\t\tm(DropDownSelector, conversationViewDropdownAttrs),\n\t\t\t\t\tm(DropDownSelector, enableMailIndexingAttrs),\n\t\t\t\t\tm(DropDownSelector, behaviorAfterMoveEmailAction),\n\t\t\t\t\tm(\".h4.mt-l\", lang.get(\"emailSending_label\")),\n\t\t\t\t\tm(DropDownSelector, defaultSenderAttrs),\n\t\t\t\t\tm(TextField, signatureAttrs),\n\t\t\t\t\tmailLocator.logins.isEnabled(FeatureType.InternalCommunication) ? null : m(DropDownSelector, defaultUnconfidentialAttrs),\n\t\t\t\t\tmailLocator.logins.isEnabled(FeatureType.InternalCommunication) ? null : m(DropDownSelector, sendPlaintextAttrs),\n\t\t\t\t\tm(DropDownSelector, reportMovedMailsAttrs),\n\t\t\t\t\tm(TextField, outOfOfficeAttrs),\n\t\t\t\t\tthis.renderLocalDataSection(),\n\t\t\t\t\tthis.mailAddressTableModel\n\t\t\t\t\t\t? m(MailAddressTable, {\n\t\t\t\t\t\t\t\tmodel: this.mailAddressTableModel,\n\t\t\t\t\t\t\t\texpanded: this.mailAddressTableExpanded,\n\t\t\t\t\t\t\t\tonExpanded: (newExpanded) => (this.mailAddressTableExpanded = newExpanded),\n\t\t\t\t\t\t  })\n\t\t\t\t\t\t: null,\n\t\t\t\t\tmailLocator.logins.isEnabled(FeatureType.InternalCommunication)\n\t\t\t\t\t\t? null\n\t\t\t\t\t\t: [\n\t\t\t\t\t\t\t\tm(\".flex-space-between.items-center.mt-l.mb-s\", [\n\t\t\t\t\t\t\t\t\tm(\".h4\", lang.get(\"inboxRulesSettings_action\")),\n\t\t\t\t\t\t\t\t\tm(ExpanderButton, {\n\t\t\t\t\t\t\t\t\t\tlabel: \"showInboxRules_action\",\n\t\t\t\t\t\t\t\t\t\texpanded: this._inboxRulesExpanded(),\n\t\t\t\t\t\t\t\t\t\tonExpandedChange: this._inboxRulesExpanded,\n\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t]),\n\t\t\t\t\t\t\t\tm(\n\t\t\t\t\t\t\t\t\tExpanderPanel,\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\texpanded: this._inboxRulesExpanded(),\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tm(Table, inboxRulesTableAttrs),\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\tm(\n\t\t\t\t\t\t\t\t\t\".small\",\n\t\t\t\t\t\t\t\t\tlang.get(\"nbrOfInboxRules_msg\", {\n\t\t\t\t\t\t\t\t\t\t\"{1}\": mailLocator.logins.getUserController().props.inboxRules.length,\n\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t  ],\n\t\t\t\t],\n\t\t\t),\n\t\t]\n\t}\n\n\tprivate renderLocalDataSection(): Children {\n\t\tif (!this.offlineStorageSettings.available()) {\n\t\t\treturn null\n\t\t}\n\n\t\treturn [\n\t\t\tm(\".h4.mt-l\", lang.get(\"localDataSection_label\")),\n\t\t\tm(TextField, {\n\t\t\t\tlabel: \"emptyString_msg\",\n\t\t\t\t// Negative upper margin to make up for no label\n\t\t\t\tclass: \"mt-negative-s\",\n\t\t\t\tvalue: lang.get(\"storedDataTimeRange_label\", { \"{numDays}\": this.offlineStorageSettings.getTimeRange() }),\n\t\t\t\tisReadOnly: true,\n\t\t\t\tinjectionsRight: () => [\n\t\t\t\t\tm(IconButton, {\n\t\t\t\t\t\ttitle: \"edit_action\",\n\t\t\t\t\t\tclick: () => this.onEditStoredDataTimeRangeClicked(),\n\t\t\t\t\t\ticon: Icons.Edit,\n\t\t\t\t\t\tsize: ButtonSize.Compact,\n\t\t\t\t\t}),\n\t\t\t\t],\n\t\t\t}),\n\t\t]\n\t}\n\n\tprivate async onEditStoredDataTimeRangeClicked() {\n\t\tif (mailLocator.logins.getUserController().isFreeAccount()) {\n\t\t\tshowNotAvailableForFreeDialog()\n\t\t} else {\n\t\t\tawait showEditStoredDataTimeRangeDialog(this.offlineStorageSettings)\n\t\t\tm.redraw()\n\t\t}\n\t}\n\n\t_updateTutanotaPropertiesSettings(props: TutanotaProperties) {\n\t\tif (props.defaultSender) {\n\t\t\tthis._defaultSender = props.defaultSender\n\t\t}\n\n\t\tthis._defaultUnconfidential = props.defaultUnconfidential\n\n\t\tthis._noAutomaticContacts = props.noAutomaticContacts\n\n\t\tthis._sendPlaintext = props.sendPlaintextOnly\n\n\t\tthis._signature(getSignatureType(props).name)\n\t}\n\n\t_updateMailboxPropertiesSettings() {\n\t\tthis._mailboxProperties.getAsync().then((props) => {\n\t\t\tthis._reportMovedMails = getReportMovedMailsType(props)\n\n\t\t\tm.redraw()\n\t\t})\n\t}\n\n\t_updateInboxRules(props: TutanotaProperties): void {\n\t\tmailLocator.mailboxModel.getUserMailboxDetails().then(async (mailboxDetails) => {\n\t\t\tthis._inboxRulesTableLines(\n\t\t\t\tawait promiseMap(props.inboxRules, async (rule, index) => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tcells: [getInboxRuleTypeName(rule.type), rule.value, await this.getTextForTarget(mailboxDetails, rule.targetFolder)],\n\t\t\t\t\t\tactionButtonAttrs: createRowActions(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tgetArray: () => props.inboxRules,\n\t\t\t\t\t\t\t\tupdateInstance: () => mailLocator.entityClient.update(props).catch(ofClass(LockedError, noOp)),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\trule,\n\t\t\t\t\t\t\tindex,\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tlabel: \"edit_action\",\n\t\t\t\t\t\t\t\t\tclick: () => AddInboxRuleDialog.show(mailboxDetails, rule),\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t),\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t)\n\n\t\t\tm.redraw()\n\t\t})\n\t}\n\n\t_updateOutOfOfficeNotification(): void {\n\t\tconst notification = this._outOfOfficeNotification.getLoaded()\n\n\t\tthis._outOfOfficeStatus(formatActivateState(notification))\n\n\t\tm.redraw()\n\t}\n\n\tprivate async getTextForTarget(mailboxDetail: MailboxDetail, targetFolderId: IdTuple): Promise<string> {\n\t\tconst folders = await mailLocator.mailModel.getMailboxFoldersForId(assertNotNull(mailboxDetail.mailbox.folders)._id)\n\t\tlet folder = folders.getFolderById(elementIdPart(targetFolderId))\n\n\t\tif (folder) {\n\t\t\treturn getFolderName(folder)\n\t\t} else {\n\t\t\treturn lang.get(\"deletedFolder_label\")\n\t\t}\n\t}\n\n\tasync entityEventsReceived(updates: ReadonlyArray<EntityUpdateData>): Promise<void> {\n\t\tfor (const update of updates) {\n\t\t\tconst { operation } = update\n\t\t\tif (isUpdateForTypeRef(TutanotaPropertiesTypeRef, update) && operation === OperationType.UPDATE) {\n\t\t\t\tconst props = await mailLocator.entityClient.load(TutanotaPropertiesTypeRef, mailLocator.logins.getUserController().props._id)\n\t\t\t\tthis._updateTutanotaPropertiesSettings(props)\n\t\t\t\tthis._updateInboxRules(props)\n\t\t\t} else if (isUpdateForTypeRef(MailFolderTypeRef, update)) {\n\t\t\t\tthis._updateInboxRules(mailLocator.logins.getUserController().props)\n\t\t\t} else if (isUpdateForTypeRef(OutOfOfficeNotificationTypeRef, update)) {\n\t\t\t\tthis._outOfOfficeNotification.reload().then(() => this._updateOutOfOfficeNotification())\n\t\t\t} else if (isUpdateForTypeRef(MailboxPropertiesTypeRef, update)) {\n\t\t\t\tthis._mailboxProperties.reload().then(() => this._updateMailboxPropertiesSettings())\n\t\t\t}\n\t\t}\n\t\tm.redraw()\n\t}\n\n\tmakeReportMovedMailsDropdownAttrs(): DropDownSelectorAttrs<ReportMovedMailsType> {\n\t\treturn {\n\t\t\tlabel: \"spamReports_label\",\n\t\t\thelpLabel: () => lang.get(\"unencryptedTransmission_msg\"),\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\tname: lang.get(\"alwaysAsk_action\"),\n\t\t\t\t\tvalue: ReportMovedMailsType.ALWAYS_ASK,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: lang.get(\"alwaysReport_action\"),\n\t\t\t\t\tvalue: ReportMovedMailsType.AUTOMATICALLY_ONLY_SPAM,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: lang.get(\"neverReport_action\"),\n\t\t\t\t\tvalue: ReportMovedMailsType.NEVER,\n\t\t\t\t},\n\t\t\t],\n\t\t\tselectedValue: this._reportMovedMails,\n\t\t\tselectionChangedHandler: async (reportMovedMails) => {\n\t\t\t\tconst mailboxGroupRoot = await this.getMailboxGroupRoot()\n\t\t\t\tawait mailLocator.mailModel.saveReportMovedMails(mailboxGroupRoot, reportMovedMails)\n\t\t\t},\n\t\t\tdropdownWidth: 250,\n\t\t}\n\t}\n}\n\nasync function showEditStoredDataTimeRangeDialog(settings: OfflineStorageSettingsModel) {\n\tconst initialTimeRange = settings.getTimeRange()\n\tlet timeRange = initialTimeRange\n\n\tconst newTimeRangeDeferred = defer<number>()\n\tconst dialog = Dialog.showActionDialog({\n\t\ttitle: \"emptyString_msg\",\n\t\tchild: () =>\n\t\t\tm(TextField, {\n\t\t\t\tlabel: lang.makeTranslation(\"days_label\", capitalizeFirstLetter(lang.get(\"days_label\"))),\n\t\t\t\thelpLabel: () => lang.get(\"storedDataTimeRangeHelpText_msg\"),\n\t\t\t\ttype: TextFieldType.Number,\n\t\t\t\tvalue: `${timeRange}`,\n\t\t\t\toninput: (newValue) => {\n\t\t\t\t\ttimeRange = Math.max(0, Number(newValue))\n\t\t\t\t},\n\t\t\t}),\n\t\tokAction: async () => {\n\t\t\ttry {\n\t\t\t\tif (initialTimeRange !== timeRange) {\n\t\t\t\t\tawait settings.setTimeRange(timeRange)\n\t\t\t\t}\n\t\t\t} finally {\n\t\t\t\tdialog.close()\n\t\t\t}\n\t\t},\n\t})\n\n\treturn newTimeRangeDeferred.promise\n}\n"]}