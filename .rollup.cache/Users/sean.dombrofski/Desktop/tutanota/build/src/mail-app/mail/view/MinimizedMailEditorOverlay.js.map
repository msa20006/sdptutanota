{"version":3,"file":"MinimizedMailEditorOverlay.js","sourceRoot":"","sources":["../../../../../src/mail-app/mail/view/MinimizedMailEditorOverlay.ts"],"names":[],"mappings":"AAAA,OAAO,CAAC,MAAM,SAAS,CAAA;AACvB,OAAO,EAAE,EAAE,EAAE,IAAI,EAAE,MAAM,0BAA0B,CAAA;AACnD,OAAO,EAAE,cAAc,EAAE,MAAM,kCAAkC,CAAA;AACjE,OAAO,EAAE,oBAAoB,EAAE,MAAM,0CAA0C,CAAA;AAE/E,OAAO,EAAE,MAAM,EAAE,MAAM,4BAA4B,CAAA;AAMnD,OAAO,EAAE,sBAAsB,EAAE,MAAM,0BAA0B,CAAA;AACjE,OAAO,EAAE,gBAAgB,EAAE,MAAM,gCAAgC,CAAA;AAEjE,OAAO,EAAE,IAAI,EAAE,MAAM,uBAAuB,CAAA;AAE5C,gBAAgB,EAAE,CAAA;AAClB,MAAM,4BAA4B,GAAG,GAAG,CAAA;AACxC,MAAM,6BAA6B,GAAG,GAAG,CAAA;AAEzC,MAAM,UAAU,uBAAuB,CACtC,MAAc,EACd,aAA4B,EAC5B,SAAuC,EACvC,eAAgC,EAChC,OAAmB,EACnB,UAA8B;IAE9B,IAAI,oBAAoB,GAAe,IAAI,CAAA,CAAC,2EAA2E;IAEvH,MAAM,eAAe,GAAG,SAAS,CAAC,kBAAkB,CAAC,MAAM,EAAE,aAAa,EAAE,OAAO,EAAE,UAAU,EAAE,GAAG,EAAE,CAAC,oBAAoB,EAAE,CAAC,CAAA;IAC9H,wCAAwC;IACxC,UAAU,CAAC,GAAG,EAAE;QACf,oBAAoB,GAAG,0BAA0B,CAAC,SAAS,EAAE,eAAe,EAAE,eAAe,CAAC,CAAA;IAC/F,CAAC,EAAE,oBAAoB,CAAC,CAAA;AACzB,CAAC;AAED,SAAS,0BAA0B,CAAC,SAAuC,EAAE,eAAgC,EAAE,eAAgC;IAC9I,OAAO,cAAc,CACpB,GAAG,EAAE,CAAC,kBAAkB,EAAE,EAC1B;QACC,IAAI,EAAE,GAAG,EAAE,CACV,CAAC,CAAC,sBAAsB,EAAE;YACzB,SAAS;YACT,eAAe;YACf,eAAe;SACf,CAAC;KACH,EACD,cAAc,EACd,SAAS,EACT,kBAAkB,CAClB,CAAA;AACF,CAAC;AAED,SAAS,kBAAkB;IAC1B,OAAO;QACN,MAAM,EAAE,MAAM,CAAC,uBAAuB,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC;QACxE,uCAAuC;QACvC,KAAK,EAAE,MAAM,CAAC,uBAAuB,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,WAAW,CAAC;QAC9E,KAAK,EAAE,EAAE,CAAC,MAAM,CAAC,oBAAoB,EAAE,CAAC,CAAC,CAAC,6BAA6B,CAAC,CAAC,CAAC,4BAA4B,CAAC;QACvG,MAAM,wCAA8B;KACpC,CAAA;AACF,CAAC","sourcesContent":["import m from \"mithril\"\nimport { px, size } from \"../../../common/gui/size\"\nimport { displayOverlay } from \"../../../common/gui/base/Overlay\"\nimport { DefaultAnimationTime } from \"../../../common/gui/animation/Animations\"\nimport { EventController } from \"../../../common/api/main/EventController\"\nimport { styles } from \"../../../common/gui/styles\"\nimport { LayerType } from \"../../../RootView\"\nimport type { Dialog } from \"../../../common/gui/base/Dialog\"\nimport type { SendMailModel } from \"../../../common/mailFunctionality/SendMailModel.js\"\nimport type { MinimizedEditor, SaveStatus } from \"../model/MinimizedMailEditorViewModel\"\nimport { MinimizedMailEditorViewModel } from \"../model/MinimizedMailEditorViewModel\"\nimport { MinimizedEditorOverlay } from \"./MinimizedEditorOverlay\"\nimport { assertMainOrNode } from \"../../../common/api/common/Env\"\nimport Stream from \"mithril/stream\"\nimport { noOp } from \"@tutao/tutanota-utils\"\n\nassertMainOrNode()\nconst MINIMIZED_OVERLAY_WIDTH_WIDE = 350\nconst MINIMIZED_OVERLAY_WIDTH_SMALL = 220\n\nexport function showMinimizedMailEditor(\n\tdialog: Dialog,\n\tsendMailModel: SendMailModel,\n\tviewModel: MinimizedMailEditorViewModel,\n\teventController: EventController,\n\tdispose: () => void,\n\tsaveStatus: Stream<SaveStatus>,\n): void {\n\tlet closeOverlayFunction: () => void = noOp // will be assigned with the actual close function when overlay is visible.\n\n\tconst minimizedEditor = viewModel.minimizeMailEditor(dialog, sendMailModel, dispose, saveStatus, () => closeOverlayFunction())\n\t// only show overlay once editor is gone\n\tsetTimeout(() => {\n\t\tcloseOverlayFunction = showMinimizedEditorOverlay(viewModel, minimizedEditor, eventController)\n\t}, DefaultAnimationTime)\n}\n\nfunction showMinimizedEditorOverlay(viewModel: MinimizedMailEditorViewModel, minimizedEditor: MinimizedEditor, eventController: EventController): () => void {\n\treturn displayOverlay(\n\t\t() => getOverlayPosition(),\n\t\t{\n\t\t\tview: () =>\n\t\t\t\tm(MinimizedEditorOverlay, {\n\t\t\t\t\tviewModel,\n\t\t\t\t\tminimizedEditor,\n\t\t\t\t\teventController,\n\t\t\t\t}),\n\t\t},\n\t\t\"slide-bottom\",\n\t\tundefined,\n\t\t\"minimized-shadow\",\n\t)\n}\n\nfunction getOverlayPosition() {\n\treturn {\n\t\tbottom: styles.isUsingBottomNavigation() ? px(size.hpad) : px(size.vpad),\n\t\t// position will change with translateY\n\t\tright: styles.isUsingBottomNavigation() ? px(size.hpad) : px(size.hpad_medium),\n\t\twidth: px(styles.isSingleColumnLayout() ? MINIMIZED_OVERLAY_WIDTH_SMALL : MINIMIZED_OVERLAY_WIDTH_WIDE),\n\t\tzIndex: LayerType.LowPriorityOverlay,\n\t}\n}\n"]}