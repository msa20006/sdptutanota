{"version":3,"file":"MobileMailMultiselectionActionBar.js","sourceRoot":"","sources":["../../../../../src/mail-app/mail/view/MobileMailMultiselectionActionBar.ts"],"names":[],"mappings":"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","sourcesContent":["import { Mail } from \"../../../common/api/entities/tutanota/TypeRefs.js\"\nimport m, { Children, Vnode } from \"mithril\"\nimport { IconButton } from \"../../../common/gui/base/IconButton.js\"\nimport { Icons } from \"../../../common/gui/base/icons/Icons.js\"\nimport { promptAndDeleteMails, showMoveMailsDropdown } from \"./MailGuiUtils.js\"\nimport { DROPDOWN_MARGIN } from \"../../../common/gui/base/Dropdown.js\"\nimport { MobileBottomActionBar } from \"../../../common/gui/MobileBottomActionBar.js\"\nimport { MailboxModel } from \"../../../common/mailFunctionality/MailboxModel.js\"\nimport { MailModel } from \"../model/MailModel.js\"\nimport { LabelsPopup } from \"./LabelsPopup.js\"\nimport { allInSameMailbox } from \"../model/MailUtils\"\n\nexport interface MobileMailMultiselectionActionBarAttrs {\n\tmails: readonly Mail[]\n\tmailModel: MailModel\n\tmailboxModel: MailboxModel\n\tselectNone: () => unknown\n}\n\n// Note: The MailViewerToolbar is the counterpart for this on non-mobile views. Please update there too if needed\nexport class MobileMailMultiselectionActionBar {\n\tprivate dom: HTMLElement | null = null\n\n\tview({ attrs }: Vnode<MobileMailMultiselectionActionBarAttrs>): Children {\n\t\tconst { mails, selectNone, mailModel, mailboxModel } = attrs\n\t\treturn m(\n\t\t\tMobileBottomActionBar,\n\t\t\t{\n\t\t\t\toncreate: ({ dom }) => (this.dom = dom as HTMLElement),\n\t\t\t},\n\t\t\t[\n\t\t\t\tm(IconButton, {\n\t\t\t\t\ticon: Icons.Trash,\n\t\t\t\t\ttitle: \"delete_action\",\n\t\t\t\t\tclick: () => promptAndDeleteMails(mailModel, mails, selectNone),\n\t\t\t\t}),\n\t\t\t\tmailModel.isMovingMailsAllowed()\n\t\t\t\t\t? m(IconButton, {\n\t\t\t\t\t\t\ticon: Icons.Folder,\n\t\t\t\t\t\t\ttitle: \"move_action\",\n\t\t\t\t\t\t\tclick: (e, dom) => {\n\t\t\t\t\t\t\t\tconst referenceDom = this.dom ?? dom\n\t\t\t\t\t\t\t\tshowMoveMailsDropdown(mailboxModel, mailModel, referenceDom.getBoundingClientRect(), mails, {\n\t\t\t\t\t\t\t\t\tonSelected: () => selectNone,\n\t\t\t\t\t\t\t\t\twidth: referenceDom.offsetWidth - DROPDOWN_MARGIN * 2,\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t},\n\t\t\t\t\t  })\n\t\t\t\t\t: null,\n\t\t\t\tmailModel.canAssignLabels() && allInSameMailbox(mails)\n\t\t\t\t\t? m(IconButton, {\n\t\t\t\t\t\t\ticon: Icons.Label,\n\t\t\t\t\t\t\ttitle: \"assignLabel_action\",\n\t\t\t\t\t\t\tclick: (e, dom) => {\n\t\t\t\t\t\t\t\tconst referenceDom = this.dom ?? dom\n\t\t\t\t\t\t\t\tif (mails.length !== 0) {\n\t\t\t\t\t\t\t\t\tconst popup = new LabelsPopup(\n\t\t\t\t\t\t\t\t\t\treferenceDom,\n\t\t\t\t\t\t\t\t\t\treferenceDom.getBoundingClientRect(),\n\t\t\t\t\t\t\t\t\t\treferenceDom.offsetWidth - DROPDOWN_MARGIN * 2,\n\t\t\t\t\t\t\t\t\t\tmailModel.getLabelsForMails(mails),\n\t\t\t\t\t\t\t\t\t\tmailModel.getLabelStatesForMails(mails),\n\t\t\t\t\t\t\t\t\t\t(addedLabels, removedLabels) => mailModel.applyLabels(mails, addedLabels, removedLabels),\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\tpopup.show()\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t  })\n\t\t\t\t\t: null,\n\t\t\t\tm(IconButton, {\n\t\t\t\t\ticon: Icons.Eye,\n\t\t\t\t\ttitle: \"markRead_action\",\n\t\t\t\t\tclick: () => {\n\t\t\t\t\t\tmailModel.markMails(mails, false)\n\t\t\t\t\t},\n\t\t\t\t}),\n\t\t\t\tm(IconButton, {\n\t\t\t\t\ticon: Icons.NoEye,\n\t\t\t\t\ttitle: \"markUnread_action\",\n\t\t\t\t\tclick: () => {\n\t\t\t\t\t\tmailModel.markMails(mails, true)\n\t\t\t\t\t},\n\t\t\t\t}),\n\t\t\t],\n\t\t)\n\t}\n}\n"]}