{"version":3,"file":"CalendarSettingsView.js","sourceRoot":"","sources":["../../../../../src/calendar-app/calendar/settings/CalendarSettingsView.ts"],"names":[],"mappings":"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","sourcesContent":["import m, { Children, Vnode, VnodeDOM } from \"mithril\"\nimport stream from \"mithril/stream\"\nimport { assertMainOrNode, isApp, isIOSApp } from \"../../../common/api/common/Env.js\"\nimport { EntityUpdateData, isUpdateForTypeRef } from \"../../../common/api/common/utils/EntityUpdateUtils.js\"\nimport { TopLevelView } from \"../../../TopLevelView.js\"\nimport { Header } from \"../../../common/gui/Header.js\"\nimport { LoginController } from \"../../../common/api/main/LoginController.js\"\nimport { BaseTopLevelView } from \"../../../common/gui/BaseTopLevelView.js\"\nimport { ViewSlider } from \"../../../common/gui/nav/ViewSlider.js\"\nimport { ColumnType, ViewColumn } from \"../../../common/gui/base/ViewColumn.js\"\nimport { SettingsFolder } from \"../../../common/settings/SettingsFolder.js\"\nimport { LazyLoaded, lazyStringValue } from \"@tutao/tutanota-utils\"\nimport { FeatureType, GroupType } from \"../../../common/api/common/TutanotaConstants.js\"\nimport { BootIcons } from \"../../../common/gui/base/icons/BootIcons.js\"\nimport { LoginSettingsViewer } from \"../../../common/settings/login/LoginSettingsViewer.js\"\nimport { Icons } from \"../../../common/gui/base/icons/Icons.js\"\nimport { AppearanceSettingsViewer } from \"../../../common/settings/AppearanceSettingsViewer.js\"\nimport { px, size } from \"../../../common/gui/size.js\"\nimport { lang, MaybeTranslation } from \"../../../common/misc/LanguageViewModel.js\"\nimport { BackgroundColumnLayout } from \"../../../common/gui/BackgroundColumnLayout.js\"\nimport { theme } from \"../../../common/gui/theme.js\"\nimport { styles } from \"../../../common/gui/styles.js\"\nimport { MobileHeader } from \"../../../common/gui/MobileHeader.js\"\nimport { getAvailableDomains } from \"../../../common/settings/mailaddress/MailAddressesUtils.js\"\nimport { WhitelabelSettingsViewer } from \"../../../common/settings/whitelabel/WhitelabelSettingsViewer.js\"\nimport { SubscriptionViewer } from \"../../../common/subscription/SubscriptionViewer.js\"\nimport { PaymentViewer } from \"../../../common/subscription/PaymentViewer.js\"\nimport { ReferralSettingsViewer } from \"../../../common/settings/ReferralSettingsViewer.js\"\nimport { NavButtonAttrs, NavButtonColor } from \"../../../common/gui/base/NavButton.js\"\nimport { CustomerInfoTypeRef, CustomerTypeRef, User } from \"../../../common/api/entities/sys/TypeRefs.js\"\nimport { Dialog } from \"../../../common/gui/base/Dialog.js\"\nimport { AboutDialog } from \"../../../common/settings/AboutDialog.js\"\nimport { CalendarSettingsViewAttrs, UpdatableSettingsDetailsViewer, UpdatableSettingsViewer } from \"../../../common/settings/Interfaces.js\"\nimport { NotificationSettingsViewer } from \"./NotificationSettingsViewer.js\"\nimport { GlobalSettingsViewer } from \"./GlobalSettingsViewer.js\"\nimport { calendarLocator } from \"../../calendarLocator.js\"\nimport { locator } from \"../../../common/api/main/CommonLocator.js\"\nimport { CALENDAR_PREFIX, SETTINGS_PREFIX } from \"../../../common/misc/RouteChange.js\"\nimport { SettingsNavButton, SettingsNavButtonAttrs } from \"../../gui/SettingsNavButton.js\"\nimport { getSafeAreaInsetBottom } from \"../../../common/gui/HtmlUtils.js\"\nimport { BaseButton } from \"../../../common/gui/base/buttons/BaseButton.js\"\nimport { Icon, IconSize } from \"../../../common/gui/base/Icon.js\"\nimport { showSupportDialog } from \"../../../common/support/SupportDialog.js\"\n\nassertMainOrNode()\n\nexport class CalendarSettingsView extends BaseTopLevelView implements TopLevelView<CalendarSettingsViewAttrs> {\n\tviewSlider: ViewSlider\n\tprivate readonly settingsFoldersColumn: ViewColumn\n\tprivate readonly userFolders: SettingsFolder<unknown>[]\n\tprivate readonly adminFolders: SettingsFolder<unknown>[]\n\tprivate readonly subscriptionFolders: SettingsFolder<unknown>[]\n\tprivate readonly logins: LoginController\n\tprivate selectedFolder: SettingsFolder<unknown>\n\tprivate currentViewer: UpdatableSettingsViewer | null = null\n\tprivate showBusinessSettings: stream<boolean> = stream(false)\n\tprivate readonly targetFolder: string\n\tprivate readonly targetRoute: string\n\n\tprivate settingsColumn: ViewColumn\n\tdetailsViewer: UpdatableSettingsDetailsViewer | null = null // the component for the details column. can be set by settings views\n\n\tcustomDomains: LazyLoaded<string[]>\n\n\tconstructor(vnode: Vnode<CalendarSettingsViewAttrs>) {\n\t\tsuper()\n\t\tthis.logins = vnode.attrs.logins\n\t\tthis.userFolders = [\n\t\t\tnew SettingsFolder(\n\t\t\t\t() => \"login_label\",\n\t\t\t\t() => BootIcons.Contacts,\n\t\t\t\t\"login\",\n\t\t\t\t() => new LoginSettingsViewer(calendarLocator.credentialsProvider, isApp() ? calendarLocator.systemFacade : null),\n\t\t\t\tundefined,\n\t\t\t),\n\t\t\tnew SettingsFolder(\n\t\t\t\t() => \"appearanceSettings_label\",\n\t\t\t\t() => Icons.Palette,\n\t\t\t\t\"appearance\",\n\t\t\t\t() => new AppearanceSettingsViewer(),\n\t\t\t\tundefined,\n\t\t\t),\n\t\t\tnew SettingsFolder(\n\t\t\t\t() => \"notificationSettings_action\",\n\t\t\t\t() => Icons.Bell,\n\t\t\t\t\"notifications\",\n\t\t\t\t() => new NotificationSettingsViewer(),\n\t\t\t\tundefined,\n\t\t\t),\n\t\t]\n\n\t\tthis.adminFolders = []\n\t\tthis.subscriptionFolders = []\n\n\t\tthis.selectedFolder = this.userFolders[0]\n\n\t\tthis.settingsFoldersColumn = this.renderSettingsMainColumn(vnode)\n\t\tthis.settingsColumn = this.renderSettingsColumn(vnode)\n\t\tthis.viewSlider = new ViewSlider([this.settingsFoldersColumn, this.settingsColumn], false)\n\n\t\tthis.customDomains = new LazyLoaded(async () => {\n\t\t\tconst domainInfos = await getAvailableDomains(this.logins, true)\n\t\t\treturn domainInfos.map((info) => info.domain)\n\t\t})\n\n\t\tthis.customDomains.getAsync().then(() => m.redraw())\n\n\t\tthis.targetFolder = m.route.param(\"folder\")\n\t\tthis.targetRoute = m.route.get()\n\t}\n\n\tprivate isTabletView() {\n\t\treturn (styles.isSingleColumnLayout() && this.viewSlider && this.viewSlider.allColumnsVisible()) || !styles.isSingleColumnLayout()\n\t}\n\n\tprivate renderSettingsColumn(vnode: Vnode<CalendarSettingsViewAttrs>) {\n\t\treturn new ViewColumn(\n\t\t\t{\n\t\t\t\t// the CSS improves the situation on devices with notches (no control elements\n\t\t\t\t// are concealed), but there's still room for improvement for scrollbars\n\t\t\t\tview: () =>\n\t\t\t\t\tm(BackgroundColumnLayout, {\n\t\t\t\t\t\tbackgroundColor: theme.navigation_bg,\n\t\t\t\t\t\tclasses: this.isTabletView() ? \"pr-m pl-vpad-s\" : \"\",\n\t\t\t\t\t\tcolumnLayout: m(\n\t\t\t\t\t\t\t\".mlr-safe-inset.fill-absolute.content-bg.border-radius-top-left-m.border-radius-top-right-m\",\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tclass: this.isTabletView() ? \"border-radius-top-left-big\" : \"\",\n\t\t\t\t\t\t\t\tstyle: this.isTabletView()\n\t\t\t\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t\t\t\t\"margin-top\": px(size.navbar_height_mobile + size.vpad_small),\n\t\t\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t\t\t: {},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tm(this._getCurrentViewer()!),\n\t\t\t\t\t\t),\n\t\t\t\t\t\tmobileHeader: () =>\n\t\t\t\t\t\t\t!this.isTabletView()\n\t\t\t\t\t\t\t\t? m(MobileHeader, {\n\t\t\t\t\t\t\t\t\t\t...vnode.attrs.header,\n\t\t\t\t\t\t\t\t\t\tbackAction: () => {\n\t\t\t\t\t\t\t\t\t\t\tthis._setUrl(SETTINGS_PREFIX)\n\t\t\t\t\t\t\t\t\t\t\tthis.viewSlider.focusPreviousColumn()\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tcolumnType: \"first\",\n\t\t\t\t\t\t\t\t\t\ttitle: this.selectedFolder.name(),\n\t\t\t\t\t\t\t\t\t\tactions: [],\n\t\t\t\t\t\t\t\t\t\tuseBackButton: true,\n\t\t\t\t\t\t\t\t\t\tprimaryAction: () => null,\n\t\t\t\t\t\t\t\t  })\n\t\t\t\t\t\t\t\t: null,\n\t\t\t\t\t\tdesktopToolbar: () => null,\n\t\t\t\t\t}),\n\t\t\t},\n\t\t\tColumnType.Background,\n\t\t\t{\n\t\t\t\tminWidth: size.second_col_min_width,\n\t\t\t\tmaxWidth: size.third_col_max_width,\n\t\t\t\theaderCenter: this.selectedFolder.name,\n\t\t\t},\n\t\t)\n\t}\n\n\tprivate renderSettingsMainColumn(vnode: Vnode<CalendarSettingsViewAttrs>) {\n\t\treturn new ViewColumn(\n\t\t\t{\n\t\t\t\tview: () => {\n\t\t\t\t\treturn m(BackgroundColumnLayout, {\n\t\t\t\t\t\tbackgroundColor: theme.navigation_bg,\n\t\t\t\t\t\tcolumnLayout: m(\".flex.flex-grow.col.full-height\", [\n\t\t\t\t\t\t\tthis.renderSettingsNavigation(this.userFolders, \"userSettings_label\"),\n\t\t\t\t\t\t\tthis.renderLoggedInNavigationLinks(),\n\t\t\t\t\t\t\tthis.bottomSection(),\n\t\t\t\t\t\t]),\n\t\t\t\t\t\tmobileHeader: () =>\n\t\t\t\t\t\t\tm(MobileHeader, {\n\t\t\t\t\t\t\t\t...vnode.attrs.header,\n\t\t\t\t\t\t\t\tbackAction: () => m.route.set(CALENDAR_PREFIX),\n\t\t\t\t\t\t\t\tcolumnType: \"first\",\n\t\t\t\t\t\t\t\ttitle: \"settings_label\",\n\t\t\t\t\t\t\t\tactions: [],\n\t\t\t\t\t\t\t\tuseBackButton: true,\n\t\t\t\t\t\t\t\tprimaryAction: () => null,\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\tdesktopToolbar: () => null,\n\t\t\t\t\t})\n\t\t\t\t},\n\t\t\t},\n\t\t\tColumnType.Background,\n\t\t\t{\n\t\t\t\tminWidth: size.first_col_min_width,\n\t\t\t\tmaxWidth: size.first_col_max_width,\n\t\t\t\theaderCenter: \"settings_label\",\n\t\t\t},\n\t\t)\n\t}\n\n\tprivate bottomSection() {\n\t\tconst isFirstPartyDomain = locator.domainConfigProvider().getCurrentDomainConfig().firstPartyDomain\n\t\tconst safeArea = isIOSApp() ? getSafeAreaInsetBottom() : 0\n\n\t\treturn m(\n\t\t\t\".pb.pt-l.flex-no-shrink.flex.col.justify-end.items-center.gap-vpad\",\n\t\t\t{\n\t\t\t\tstyle: {\n\t\t\t\t\tpaddingBottom: safeArea > 0 ? px(safeArea) : px(size.vpad),\n\t\t\t\t},\n\t\t\t},\n\t\t\t[\n\t\t\t\t// Support button\n\t\t\t\tm(BaseButton, {\n\t\t\t\t\tclass: \"flash flex justify-center center-vertically pt-s pb-s plr-2l border-radius\",\n\t\t\t\t\tstyle: {\n\t\t\t\t\t\tmarginInline: \"auto\",\n\t\t\t\t\t\tborder: `1px solid ${theme.navigation_button}`,\n\t\t\t\t\t\tcolor: theme.navigation_button,\n\t\t\t\t\t},\n\t\t\t\t\tlabel: \"supportMenu_label\",\n\t\t\t\t\ttext: m(\".pl-m\", lang.getTranslation(\"supportMenu_label\").text),\n\t\t\t\t\ticon: m(Icon, {\n\t\t\t\t\t\ticon: Icons.SpeechBubbleFill,\n\t\t\t\t\t\tsize: IconSize.Medium,\n\t\t\t\t\t\tclass: \"center-h\",\n\t\t\t\t\t\tcontainer: \"div\",\n\t\t\t\t\t\tstyle: { fill: theme.navigation_button },\n\t\t\t\t\t}),\n\t\t\t\t\tonclick: () => void showSupportDialog(locator.logins),\n\t\t\t\t}),\n\t\t\t\t// About button\n\t\t\t\tisFirstPartyDomain ? this._aboutThisSoftwareLink() : null,\n\t\t\t],\n\t\t)\n\t}\n\n\tprivate renderLoggedInNavigationLinks() {\n\t\tif (!this.logins.isUserLoggedIn()) {\n\t\t\treturn m.fragment({}, [])\n\t\t}\n\n\t\treturn m.fragment({}, [\n\t\t\tthis.renderSettingsNavigation(this.adminFolders, \"adminSettings_label\"),\n\t\t\tthis.renderSettingsNavigation(this.subscriptionFolders, \"subscriptionSettings_label\"),\n\t\t])\n\t}\n\n\tprivate async populateSubscriptionFolders() {\n\t\tif (this.logins.isEnabled(FeatureType.WhitelabelChild) || !this.logins.getUserController().isGlobalAdmin()) {\n\t\t\treturn\n\t\t}\n\n\t\tconst currentPlanType = await this.logins.getUserController().getPlanType()\n\n\t\tthis.subscriptionFolders.push(\n\t\t\tnew SettingsFolder<void>(\n\t\t\t\t() => \"adminSubscription_action\",\n\t\t\t\t() => BootIcons.Premium,\n\t\t\t\t\"subscription\",\n\t\t\t\t() => new SubscriptionViewer(currentPlanType, isIOSApp() ? locator.mobilePaymentsFacade : null),\n\t\t\t\tundefined,\n\t\t\t),\n\t\t)\n\n\t\tthis.subscriptionFolders.push(\n\t\t\tnew SettingsFolder<void>(\n\t\t\t\t() => \"adminPayment_action\",\n\t\t\t\t() => Icons.CreditCard,\n\t\t\t\t\"invoice\",\n\t\t\t\t() => new PaymentViewer(),\n\t\t\t\tundefined,\n\t\t\t),\n\t\t)\n\n\t\tthis.subscriptionFolders.push(\n\t\t\tnew SettingsFolder(\n\t\t\t\t() => \"referralSettings_label\",\n\t\t\t\t() => BootIcons.Share,\n\t\t\t\t\"referral\",\n\t\t\t\t() => new ReferralSettingsViewer(),\n\t\t\t\tundefined,\n\t\t\t).setIsVisibleHandler(() => !this.showBusinessSettings()),\n\t\t)\n\n\t\tm.redraw()\n\t}\n\n\tprivate async populateAdminFolders() {\n\t\tawait this.updateShowBusinessSettings()\n\n\t\tif (!this.logins.getUserController().isGlobalAdmin()) {\n\t\t\treturn\n\t\t}\n\n\t\tthis.adminFolders.push(\n\t\t\tnew SettingsFolder(\n\t\t\t\t() => \"globalSettings_label\",\n\t\t\t\t() => BootIcons.Settings,\n\t\t\t\t\"global\",\n\t\t\t\t() => new GlobalSettingsViewer(),\n\t\t\t\tundefined,\n\t\t\t),\n\t\t)\n\n\t\tif (!this.logins.isEnabled(FeatureType.WhitelabelChild) && !isIOSApp()) {\n\t\t\tthis.adminFolders.push(\n\t\t\t\tnew SettingsFolder(\n\t\t\t\t\t() => \"whitelabel_label\",\n\t\t\t\t\t() => Icons.Wand,\n\t\t\t\t\t\"whitelabel\",\n\t\t\t\t\t() => new WhitelabelSettingsViewer(calendarLocator.entityClient, this.logins),\n\t\t\t\t\tundefined,\n\t\t\t\t),\n\t\t\t)\n\t\t}\n\t\tm.redraw()\n\t}\n\n\toncreate(vnode: Vnode<CalendarSettingsViewAttrs>) {\n\t\tcalendarLocator.eventController.addEntityListener(this.entityListener)\n\t\tPromise.all([this.populateAdminFolders(), this.populateSubscriptionFolders()]).then(() => {\n\t\t\t// We have to wait for the folders to be initialized before setting the URL,\n\t\t\t// otherwise we won't find the requested folder and will just pick the default folder\n\t\t\tconst stillAtDefaultUrl =\n\t\t\t\tm.route.get() === this.userFolders[0].url || (m.route.get() === this.targetRoute && this.selectedFolder.url !== this.targetRoute)\n\t\t\tif (stillAtDefaultUrl) {\n\t\t\t\tthis.onNewUrl({ folder: this.targetFolder }, this.targetRoute)\n\t\t\t}\n\t\t})\n\t}\n\n\tonremove(vnode: VnodeDOM<CalendarSettingsViewAttrs>) {\n\t\tcalendarLocator.eventController.removeEntityListener(this.entityListener)\n\t}\n\n\tprivate entityListener = (updates: EntityUpdateData[], eventOwnerGroupId: Id) => {\n\t\treturn this.entityEventsReceived(updates, eventOwnerGroupId)\n\t}\n\n\tview({ attrs }: Vnode<CalendarSettingsViewAttrs>): Children {\n\t\treturn m(\n\t\t\t\"#settings.main-view\",\n\t\t\tm(this.viewSlider, {\n\t\t\t\theader: m(Header, {\n\t\t\t\t\t...attrs.header,\n\t\t\t\t}),\n\t\t\t}),\n\t\t)\n\t}\n\n\t_createSettingsFolderNavButton(folder: SettingsFolder<unknown>): NavButtonAttrs {\n\t\treturn {\n\t\t\tlabel: folder.name(),\n\t\t\ticon: folder.icon,\n\t\t\thref: folder.url,\n\t\t\tcolors: NavButtonColor.Nav,\n\t\t\tclick: () => this.viewSlider.focus(this.settingsColumn),\n\t\t\tpersistentBackground: true,\n\t\t}\n\t}\n\n\trenderSettingsNavigation(folders: SettingsFolder<unknown>[], title: MaybeTranslation): Children {\n\t\tif (folders.length === 0) {\n\t\t\treturn null\n\t\t}\n\n\t\treturn m(\n\t\t\t\".flex.col.pl-vpad-m.pt-s.pb-s\",\n\t\t\t{\n\t\t\t\tclass: styles.isSingleColumnLayout() ? \"pr-m\" : \"pr-vpad-s\",\n\t\t\t},\n\t\t\t[\n\t\t\t\tm(\"small.uppercase.pb-s.b.text-ellipsis\", { style: { color: theme.navigation_button } }, lang.getTranslationText(title)),\n\t\t\t\tm(\n\t\t\t\t\t\".flex.col.border-radius-m.list-bg\",\n\t\t\t\t\tfolders\n\t\t\t\t\t\t.filter((folder) => folder.isVisible())\n\t\t\t\t\t\t.map((folder) => {\n\t\t\t\t\t\t\tconst buttonAttrs = this._createSettingsFolderNavButton(folder)\n\n\t\t\t\t\t\t\treturn m(SettingsNavButton, {\n\t\t\t\t\t\t\t\tlabel: buttonAttrs.label,\n\t\t\t\t\t\t\t\tclick: buttonAttrs.click ?? (() => null),\n\t\t\t\t\t\t\t\ticon: buttonAttrs.icon,\n\t\t\t\t\t\t\t\thref: lazyStringValue(buttonAttrs.href),\n\t\t\t\t\t\t\t\tclass: \"settings-item\",\n\t\t\t\t\t\t\t} satisfies SettingsNavButtonAttrs)\n\t\t\t\t\t\t}),\n\t\t\t\t),\n\t\t\t],\n\t\t)\n\t}\n\n\t_getCurrentViewer(): UpdatableSettingsViewer | null {\n\t\tif (!this.currentViewer) {\n\t\t\tthis.detailsViewer = null\n\t\t\tthis.currentViewer = this.selectedFolder.viewerCreator()\n\t\t}\n\n\t\treturn this.currentViewer\n\t}\n\n\t/**\n\t * Notifies the current view about changes of the url within its scope.\n\t */\n\tonNewUrl(args: Record<string, any>, requestedPath: string) {\n\t\tif (args.folder || !m.route.get().startsWith(SETTINGS_PREFIX)) {\n\t\t\t// ensure that current viewer will be reinitialized\n\t\t\tconst folder = this._allSettingsFolders().find((folder) => folder.url === requestedPath)\n\n\t\t\tif (folder && this.selectedFolder.path === folder.path) {\n\t\t\t\t// folder path has not changed\n\t\t\t\tthis.selectedFolder = folder // instance of SettingsFolder might have been changed in membership update, so replace this instance\n\n\t\t\t\tm.redraw()\n\t\t\t} else if (folder) {\n\t\t\t\t// folder path has changed\n\t\t\t\t// to avoid misleading information, set the url to the folder's url, so the browser url\n\t\t\t\t// is changed to correctly represents the displayed content\n\t\t\t\tthis._setUrl(folder.url)\n\t\t\t\tthis.selectedFolder = folder\n\t\t\t\tthis.currentViewer = null\n\t\t\t\tthis.detailsViewer = null\n\n\t\t\t\t// make sure the currentViewer is available\n\t\t\t\tthis._getCurrentViewer()\n\t\t\t\tthis.viewSlider.focus(this.settingsColumn)\n\n\t\t\t\tm.redraw()\n\t\t\t} else {\n\t\t\t\tthis.viewSlider.focus(this.settingsFoldersColumn)\n\t\t\t}\n\t\t}\n\t}\n\n\t_allSettingsFolders(): ReadonlyArray<SettingsFolder<unknown>> {\n\t\treturn [...this.userFolders, ...this.adminFolders, ...this.subscriptionFolders]\n\t}\n\n\t_setUrl(url: string) {\n\t\tm.route.set(url + location.hash)\n\t}\n\n\t_isGlobalAdmin(user: User): boolean {\n\t\treturn user.memberships.some((m) => m.groupType === GroupType.Admin)\n\t}\n\n\tprivate async updateShowBusinessSettings() {\n\t\tthis.showBusinessSettings((await this.logins.getUserController().loadCustomer()).businessUse)\n\t}\n\n\tasync entityEventsReceived<T>(updates: ReadonlyArray<EntityUpdateData>, eventOwnerGroupId: Id): Promise<void> {\n\t\tfor (const update of updates) {\n\t\t\tif (isUpdateForTypeRef(CustomerTypeRef, update)) {\n\t\t\t\tawait this.updateShowBusinessSettings()\n\t\t\t} else if (this.logins.getUserController().isUpdateForLoggedInUserInstance(update, eventOwnerGroupId)) {\n\t\t\t\tconst user = this.logins.getUserController().user\n\n\t\t\t\t// the user admin status might have changed\n\t\t\t\tif (\n\t\t\t\t\t!this._isGlobalAdmin(user) &&\n\t\t\t\t\tthis.currentViewer &&\n\t\t\t\t\t(this.adminFolders.some((f) => f.isActive()) || this.subscriptionFolders.some((f) => f.isActive()))\n\t\t\t\t) {\n\t\t\t\t\tthis._setUrl(this.userFolders[0].url)\n\t\t\t\t}\n\t\t\t\tm.redraw()\n\t\t\t} else if (isUpdateForTypeRef(CustomerInfoTypeRef, update)) {\n\t\t\t\tthis.customDomains.reset()\n\t\t\t\tthis.adminFolders.length = 0\n\t\t\t\tthis.subscriptionFolders.length = 0\n\t\t\t\t// When switching a plan we hide/show certain admin settings.\n\t\t\t\tawait Promise.all([this.populateAdminFolders(), this.populateSubscriptionFolders(), this.customDomains.getAsync()])\n\t\t\t\tm.redraw()\n\t\t\t}\n\t\t}\n\n\t\tawait this.currentViewer?.entityEventsReceived(updates)\n\n\t\tawait this.detailsViewer?.entityEventsReceived(updates)\n\t}\n\n\tgetViewSlider(): ViewSlider | null {\n\t\treturn this.viewSlider\n\t}\n\n\t_aboutThisSoftwareLink(): Children {\n\t\tconst label = lang.get(\"about_label\")\n\t\tconst versionLabel = `Tuta v${env.versionNumber}`\n\t\treturn m(\"\", [\n\t\t\tm(\n\t\t\t\t\"button.text-center.small.no-text-decoration\",\n\t\t\t\t{\n\t\t\t\t\tstyle: {\n\t\t\t\t\t\tbackgroundColor: \"transparent\",\n\t\t\t\t\t},\n\t\t\t\t\thref: \"#\",\n\t\t\t\t\t\"aria-label\": label,\n\t\t\t\t\t\"aria-description\": versionLabel,\n\t\t\t\t\t\"aria-haspopup\": \"dialog\",\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tconst dialog = Dialog.showActionDialog({\n\t\t\t\t\t\t\t\ttitle: \"about_label\",\n\t\t\t\t\t\t\t\tchild: () =>\n\t\t\t\t\t\t\t\t\tm(AboutDialog, {\n\t\t\t\t\t\t\t\t\t\tonShowSetupWizard: () => {\n\t\t\t\t\t\t\t\t\t\t\tdialog.close()\n\t\t\t\t\t\t\t\t\t\t\tcalendarLocator.showSetupWizard()\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\tallowOkWithReturn: true,\n\t\t\t\t\t\t\t\tokAction: (dialog: Dialog) => dialog.close(),\n\t\t\t\t\t\t\t\tallowCancel: false,\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}, 200)\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t[\n\t\t\t\t\tm(\"\", versionLabel),\n\t\t\t\t\tm(\n\t\t\t\t\t\t\".b\",\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t\tcolor: theme.navigation_button_selected,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\tlabel,\n\t\t\t\t\t),\n\t\t\t\t],\n\t\t\t),\n\t\t])\n\t}\n\n\thandleBackButton() {\n\t\tif (m.route.get().endsWith(SETTINGS_PREFIX)) {\n\t\t\tm.route.set(CALENDAR_PREFIX)\n\t\t} else {\n\t\t\tm.route.set(SETTINGS_PREFIX)\n\t\t\tthis.viewSlider.focus(this.settingsFoldersColumn)\n\t\t}\n\n\t\treturn true\n\t}\n}\n"]}