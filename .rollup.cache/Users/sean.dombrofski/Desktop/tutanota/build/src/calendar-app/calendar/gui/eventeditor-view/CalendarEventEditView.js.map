{"version":3,"file":"CalendarEventEditView.js","sourceRoot":"","sources":["../../../../../../src/calendar-app/calendar/gui/eventeditor-view/CalendarEventEditView.ts"],"names":[],"mappings":"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","sourcesContent":["import m, { Children, Component, Vnode, VnodeDOM } from \"mithril\"\nimport { AttendeeListEditor } from \"./AttendeeListEditor.js\"\nimport { locator } from \"../../../../common/api/main/CommonLocator.js\"\nimport { EventTimeEditor, EventTimeEditorAttrs } from \"./EventTimeEditor.js\"\nimport { defaultCalendarColor, TabIndex, TimeFormat } from \"../../../../common/api/common/TutanotaConstants.js\"\nimport { lang, TranslationKey } from \"../../../../common/misc/LanguageViewModel.js\"\nimport { RecipientsSearchModel } from \"../../../../common/misc/RecipientsSearchModel.js\"\nimport { CalendarInfo } from \"../../model/CalendarModel.js\"\nimport { AlarmInterval } from \"../../../../common/calendar/date/CalendarUtils.js\"\nimport { HtmlEditor } from \"../../../../common/gui/editor/HtmlEditor.js\"\nimport { BannerType, InfoBanner, InfoBannerAttrs } from \"../../../../common/gui/base/InfoBanner.js\"\nimport { CalendarEventModel, CalendarOperation, ReadonlyReason } from \"../eventeditor-model/CalendarEventModel.js\"\nimport { getSharedGroupName } from \"../../../../common/sharing/GroupUtils.js\"\nimport { RemindersEditor, RemindersEditorAttrs } from \"../RemindersEditor.js\"\nimport { SingleLineTextField } from \"../../../../common/gui/base/SingleLineTextField.js\"\nimport { px, size } from \"../../../../common/gui/size.js\"\nimport { Card } from \"../../../../common/gui/base/Card.js\"\nimport { Select, SelectAttributes, SelectOption } from \"../../../../common/gui/base/Select.js\"\nimport { Icon, IconSize } from \"../../../../common/gui/base/Icon.js\"\nimport { theme } from \"../../../../common/gui/theme.js\"\nimport { deepEqual } from \"@tutao/tutanota-utils\"\nimport { ButtonColor, getColors } from \"../../../../common/gui/base/Button.js\"\nimport stream from \"mithril/stream\"\nimport { RepeatRuleEditor, RepeatRuleEditorAttrs } from \"./RepeatRuleEditor.js\"\nimport type { CalendarRepeatRule } from \"../../../../common/api/entities/tutanota/TypeRefs.js\"\nimport { formatRepetitionEnd, formatRepetitionFrequency } from \"../eventpopup/EventPreviewView.js\"\nimport { TextFieldType } from \"../../../../common/gui/base/TextField.js\"\nimport { DefaultAnimationTime } from \"../../../../common/gui/animation/Animations.js\"\nimport { Icons } from \"../../../../common/gui/base/icons/Icons.js\"\nimport { SectionButton } from \"../../../../common/gui/base/buttons/SectionButton.js\"\n\nexport type CalendarEventEditViewAttrs = {\n\tmodel: CalendarEventModel\n\tgroupColors: Map<Id, string>\n\trecipientsSearch: RecipientsSearchModel\n\tdescriptionEditor: HtmlEditor\n\tstartOfTheWeekOffset: number\n\ttimeFormat: TimeFormat\n\tdefaultAlarms: Map<Id, AlarmInterval[]>\n\tnavigationCallback: (targetPage: EditorPages, callBack?: (...args: any) => unknown) => unknown\n\tcurrentPage: stream<EditorPages>\n}\n\nexport interface CalendarSelectItem extends SelectOption<CalendarInfo> {\n\tcolor: string\n\tname: string\n}\n\nexport interface OrganizerSelectItem extends SelectOption<string> {\n\tname: string\n\taddress: string\n}\n\nexport enum EditorPages {\n\tMAIN,\n\tREPEAT_RULES,\n\tGUESTS,\n}\n\n/**\n * combines several semi-related editor components into a full editor for editing calendar events\n * to be displayed in a dialog.\n *\n * controls the enabling/disabling of certain editor components and the display of additional info\n * in the dialog depending on the type of the event being edited.\n */\nexport class CalendarEventEditView implements Component<CalendarEventEditViewAttrs> {\n\tprivate readonly timeFormat: TimeFormat\n\tprivate readonly startOfTheWeekOffset: number\n\tprivate readonly defaultAlarms: Map<Id, AlarmInterval[]>\n\n\tprivate transitionPage: EditorPages | null = null\n\tprivate hasAnimationEnded = true\n\tprivate pages: Map<EditorPages, (...args: any) => Children> = new Map()\n\tprivate pagesWrapperDomElement!: HTMLElement\n\tprivate allowRenderMainPage: stream<boolean> = stream(true)\n\tprivate dialogHeight: number | null = null\n\tprivate pageWidth: number = -1\n\tprivate translate = 0\n\n\tconstructor(vnode: Vnode<CalendarEventEditViewAttrs>) {\n\t\tthis.timeFormat = vnode.attrs.timeFormat\n\t\tthis.startOfTheWeekOffset = vnode.attrs.startOfTheWeekOffset\n\t\tthis.defaultAlarms = vnode.attrs.defaultAlarms\n\n\t\tif (vnode.attrs.model.operation == CalendarOperation.Create) {\n\t\t\tconst initialAlarms = vnode.attrs.defaultAlarms.get(vnode.attrs.model.editModels.whoModel.selectedCalendar.group._id) ?? []\n\t\t\tvnode.attrs.model.editModels.alarmModel.addAll(initialAlarms)\n\t\t}\n\n\t\tthis.pages.set(EditorPages.REPEAT_RULES, this.renderRepeatRulesPage)\n\t\tthis.pages.set(EditorPages.GUESTS, this.renderGuestsPage)\n\n\t\tvnode.attrs.currentPage.map((page) => {\n\t\t\tthis.hasAnimationEnded = false\n\n\t\t\tif (page === EditorPages.MAIN) {\n\t\t\t\tthis.allowRenderMainPage(true)\n\t\t\t\tthis.translate = 0\n\t\t\t}\n\t\t})\n\n\t\tthis.allowRenderMainPage.map((allowRendering) => {\n\t\t\treturn this.handleEditorStatus(allowRendering, vnode)\n\t\t})\n\t}\n\n\tonremove(vnode: Vnode<CalendarEventEditViewAttrs>) {\n\t\tvnode.attrs.currentPage.end(true)\n\t\tthis.allowRenderMainPage.end(true)\n\t}\n\n\tprivate handleEditorStatus(allowRendering: boolean, vnode: Vnode<CalendarEventEditViewAttrs>) {\n\t\tif (allowRendering && vnode.attrs.currentPage() === EditorPages.MAIN) {\n\t\t\tif (vnode.attrs.descriptionEditor.editor.domElement) {\n\t\t\t\tvnode.attrs.descriptionEditor.editor.domElement.tabIndex = Number(TabIndex.Default)\n\t\t\t}\n\t\t\treturn vnode.attrs.descriptionEditor.setEnabled(true)\n\t\t}\n\t\tif (vnode.attrs.descriptionEditor.editor.domElement) {\n\t\t\tvnode.attrs.descriptionEditor.editor.domElement.tabIndex = Number(TabIndex.Programmatic)\n\t\t}\n\t\tvnode.attrs.descriptionEditor.setEnabled(false)\n\t}\n\n\toncreate(vnode: VnodeDOM<CalendarEventEditViewAttrs>): any {\n\t\tthis.pagesWrapperDomElement = vnode.dom as HTMLElement\n\n\t\tthis.pagesWrapperDomElement.addEventListener(\"transitionend\", () => {\n\t\t\tif (vnode.attrs.currentPage() !== EditorPages.MAIN) {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.allowRenderMainPage(false)\n\t\t\t\t}, DefaultAnimationTime)\n\t\t\t\tm.redraw()\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tthis.transitionPage = vnode.attrs.currentPage()\n\t\t\tthis.hasAnimationEnded = true\n\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.allowRenderMainPage(true)\n\t\t\t\tm.redraw()\n\t\t\t}, DefaultAnimationTime)\n\t\t})\n\t}\n\n\tonupdate(vnode: VnodeDOM<CalendarEventEditViewAttrs>): any {\n\t\tconst dom = vnode.dom as HTMLElement\n\t\tif (this.dialogHeight == null && dom.parentElement) {\n\t\t\tthis.dialogHeight = dom.parentElement.clientHeight\n\t\t\t;(vnode.dom as HTMLElement).style.height = px(this.dialogHeight)\n\t\t}\n\n\t\tif (this.pageWidth == -1 && dom.parentElement) {\n\t\t\tthis.pageWidth = dom.parentElement.clientWidth - size.hpad_large * 2\n\t\t\t// Twice the page width (Main Page + Guests/Repeat) plus the gap between pages (64px)\n\t\t\t;(vnode.dom as HTMLElement).style.width = px(this.pageWidth * 2 + size.vpad_xxl)\n\t\t\tm.redraw()\n\t\t}\n\t}\n\n\tview(vnode: Vnode<CalendarEventEditViewAttrs>): Children {\n\t\treturn m(\n\t\t\t\".flex.gap-vpad-xxl.fit-content.transition-transform\",\n\t\t\t{\n\t\t\t\tstyle: {\n\t\t\t\t\ttransform: `translateX(${this.translate}px)`,\n\t\t\t\t},\n\t\t\t},\n\t\t\t[this.renderMainPage(vnode), this.renderPage(vnode)],\n\t\t)\n\t}\n\n\tprivate renderPage(vnode: Vnode<CalendarEventEditViewAttrs>) {\n\t\tif (this.hasAnimationEnded || this.transitionPage == null) {\n\t\t\treturn this.pages.get(vnode.attrs.currentPage())?.apply(this, [vnode])\n\t\t}\n\n\t\treturn this.pages.get(this.transitionPage)?.apply(this, [vnode])\n\t}\n\n\tprivate renderGuestsPage({ attrs: { model, recipientsSearch } }: Vnode<CalendarEventEditViewAttrs>) {\n\t\treturn m(AttendeeListEditor, {\n\t\t\trecipientsSearch,\n\t\t\tlogins: locator.logins,\n\t\t\tmodel,\n\t\t\twidth: this.pageWidth,\n\t\t})\n\t}\n\n\tprivate renderTitle(attrs: CalendarEventEditViewAttrs): Children {\n\t\tconst { model } = attrs\n\t\treturn m(\n\t\t\tCard,\n\t\t\t{\n\t\t\t\tstyle: {\n\t\t\t\t\tpadding: \"0\",\n\t\t\t\t},\n\t\t\t},\n\t\t\tm(SingleLineTextField, {\n\t\t\t\tvalue: model.editModels.summary.content,\n\t\t\t\toninput: (newValue: any) => {\n\t\t\t\t\tmodel.editModels.summary.content = newValue\n\t\t\t\t},\n\t\t\t\tariaLabel: lang.get(\"title_placeholder\"),\n\t\t\t\tplaceholder: lang.get(\"title_placeholder\"),\n\t\t\t\tdisabled: !model.isFullyWritable(),\n\t\t\t\tstyle: {\n\t\t\t\t\tfontSize: px(size.font_size_base * 1.25), // Overriding the component style\n\t\t\t\t},\n\t\t\t\ttype: TextFieldType.Text,\n\t\t\t}),\n\t\t)\n\t}\n\n\tprivate renderReadonlyMessage(attrs: CalendarEventEditViewAttrs): Children {\n\t\tconst { model } = attrs\n\t\tconst makeMessage = (message: TranslationKey): Children =>\n\t\t\tm(InfoBanner, {\n\t\t\t\tmessage: () => m(\".small.selectable\", lang.get(message)),\n\t\t\t\ticon: Icons.People,\n\t\t\t\ttype: BannerType.Info,\n\t\t\t\tbuttons: [],\n\t\t\t} satisfies InfoBannerAttrs)\n\n\t\tswitch (model.getReadonlyReason()) {\n\t\t\tcase ReadonlyReason.SHARED:\n\t\t\t\treturn makeMessage(\"cannotEditFullEvent_msg\")\n\t\t\tcase ReadonlyReason.SINGLE_INSTANCE:\n\t\t\t\treturn makeMessage(\"cannotEditSingleInstance_msg\")\n\t\t\tcase ReadonlyReason.NOT_ORGANIZER:\n\t\t\t\treturn makeMessage(\"cannotEditNotOrganizer_msg\")\n\t\t\tcase ReadonlyReason.UNKNOWN:\n\t\t\t\treturn makeMessage(\"cannotEditEvent_msg\")\n\t\t\tcase ReadonlyReason.NONE:\n\t\t\t\treturn null\n\t\t}\n\t}\n\n\tprivate renderEventTimeEditor(attrs: CalendarEventEditViewAttrs): Children {\n\t\tconst padding = px(size.vpad_small)\n\t\treturn m(\n\t\t\tCard,\n\t\t\t{ style: { padding: `${padding} 0 ${padding} ${padding}` } },\n\t\t\tm(EventTimeEditor, {\n\t\t\t\teditModel: attrs.model.editModels.whenModel,\n\t\t\t\ttimeFormat: this.timeFormat,\n\t\t\t\tstartOfTheWeekOffset: this.startOfTheWeekOffset,\n\t\t\t\tdisabled: !attrs.model.isFullyWritable(),\n\t\t\t} satisfies EventTimeEditorAttrs),\n\t\t)\n\t}\n\n\tprivate renderRepeatRuleNavButton({ model, navigationCallback }: CalendarEventEditViewAttrs): Children {\n\t\tconst repeatRuleText = this.getTranslatedRepeatRule(model.editModels.whenModel.result.repeatRule, model.editModels.whenModel.isAllDay)\n\t\treturn m(SectionButton, {\n\t\t\tleftIcon: { icon: Icons.Sync, title: \"calendarRepeating_label\" },\n\t\t\ttext: lang.makeTranslation(repeatRuleText, repeatRuleText),\n\t\t\tisDisabled: !model.canEditSeries(),\n\t\t\tonclick: () => {\n\t\t\t\tthis.transitionTo(EditorPages.REPEAT_RULES, navigationCallback)\n\t\t\t},\n\t\t})\n\t}\n\n\tprivate transitionTo(target: EditorPages, navigationCallback: (targetPage: EditorPages) => unknown) {\n\t\tthis.hasAnimationEnded = false\n\t\tthis.transitionPage = target\n\t\tthis.translate = -(this.pageWidth + size.vpad_xxl)\n\t\tnavigationCallback(target)\n\t}\n\n\tprivate renderGuestsNavButton({ navigationCallback, model }: CalendarEventEditViewAttrs): Children {\n\t\treturn m(SectionButton, {\n\t\t\tleftIcon: { icon: Icons.People, title: \"calendarRepeating_label\" },\n\t\t\ttext: \"guests_label\",\n\t\t\tinjectionRight: model.editModels.whoModel.guests.length > 0 ? m(\"span\", model.editModels.whoModel.guests.length) : null,\n\t\t\tonclick: () => {\n\t\t\t\tthis.transitionTo(EditorPages.GUESTS, navigationCallback)\n\t\t\t},\n\t\t})\n\t}\n\n\tprivate renderCalendarPicker(vnode: Vnode<CalendarEventEditViewAttrs>): Children {\n\t\tconst { model, groupColors } = vnode.attrs\n\t\tconst availableCalendars = model.editModels.whoModel.getAvailableCalendars()\n\n\t\tconst options: CalendarSelectItem[] = availableCalendars.map((calendarInfo) => {\n\t\t\tconst name = getSharedGroupName(calendarInfo.groupInfo, model.userController, calendarInfo.shared)\n\t\t\treturn {\n\t\t\t\tname,\n\t\t\t\tcolor: \"#\" + (groupColors.get(calendarInfo.group._id) ?? defaultCalendarColor),\n\t\t\t\tvalue: calendarInfo,\n\t\t\t\tariaValue: name,\n\t\t\t}\n\t\t})\n\n\t\tconst selectedCalendarInfo = model.editModels.whoModel.selectedCalendar\n\t\tconst selectedCalendarName = getSharedGroupName(selectedCalendarInfo.groupInfo, model.userController, selectedCalendarInfo.shared)\n\t\tlet selected: CalendarSelectItem = {\n\t\t\tname: selectedCalendarName,\n\t\t\tcolor: \"#\" + (groupColors.get(selectedCalendarInfo.group._id) ?? defaultCalendarColor),\n\t\t\tvalue: model.editModels.whoModel.selectedCalendar,\n\t\t\tariaValue: selectedCalendarName,\n\t\t}\n\t\treturn m(\n\t\t\tCard,\n\t\t\t{ style: { padding: \"0\" } },\n\t\t\tm(Select<CalendarSelectItem, CalendarInfo>, {\n\t\t\t\tonchange: (val) => {\n\t\t\t\t\tmodel.editModels.alarmModel.removeAll()\n\t\t\t\t\tmodel.editModels.alarmModel.addAll(this.defaultAlarms.get(val.value.group._id) ?? [])\n\t\t\t\t\tmodel.editModels.whoModel.selectedCalendar = val.value\n\t\t\t\t},\n\t\t\t\toptions: stream(options),\n\t\t\t\texpanded: true,\n\t\t\t\tselected,\n\t\t\t\tclasses: [\"button-min-height\", \"pl-vpad-s\", \"pr-vpad-s\"],\n\t\t\t\trenderOption: (option) => this.renderCalendarOptions(option, deepEqual(option.value, selected.value), false),\n\t\t\t\trenderDisplay: (option) => this.renderCalendarOptions(option, false, true),\n\t\t\t\tariaLabel: lang.get(\"calendar_label\"),\n\t\t\t\tdisabled: !model.canChangeCalendar() || availableCalendars.length < 2,\n\t\t\t} satisfies SelectAttributes<CalendarSelectItem, CalendarInfo>),\n\t\t)\n\t}\n\n\tprivate renderCalendarOptions(option: CalendarSelectItem, isSelected: boolean, isDisplay: boolean) {\n\t\treturn m(\n\t\t\t\".flex.items-center.gap-vpad-s.flex-grow\",\n\t\t\t{ class: `${isDisplay ? \"\" : \"state-bg plr-button button-content dropdown-button pt-s pb-s button-min-height\"}` },\n\t\t\t[\n\t\t\t\tm(\"div\", {\n\t\t\t\t\tstyle: {\n\t\t\t\t\t\twidth: px(size.hpad_large),\n\t\t\t\t\t\theight: px(size.hpad_large),\n\t\t\t\t\t\tborderRadius: \"50%\",\n\t\t\t\t\t\tbackgroundColor: option.color,\n\t\t\t\t\t\tmarginInline: px(size.vpad_xsm / 2),\n\t\t\t\t\t},\n\t\t\t\t}),\n\t\t\t\tm(\"span\", { style: { color: isSelected ? theme.content_button_selected : undefined } }, option.name),\n\t\t\t],\n\t\t)\n\t}\n\n\tprivate renderRemindersEditor(vnode: Vnode<CalendarEventEditViewAttrs>): Children {\n\t\tif (!vnode.attrs.model.editModels.alarmModel.canEditReminders) return null\n\t\tconst { alarmModel } = vnode.attrs.model.editModels\n\n\t\treturn m(\n\t\t\tCard,\n\t\t\t{ classes: [\"button-min-height\", \"flex\", \"items-center\"] },\n\t\t\tm(\".flex.gap-vpad-s.items-start.flex-grow\", [\n\t\t\t\tm(\n\t\t\t\t\t\".flex\",\n\t\t\t\t\t{\n\t\t\t\t\t\tclass: alarmModel.alarms.length === 0 ? \"items-center\" : \"items-start\",\n\t\t\t\t\t},\n\t\t\t\t\t[\n\t\t\t\t\t\tm(Icon, {\n\t\t\t\t\t\t\ticon: Icons.Clock,\n\t\t\t\t\t\t\tstyle: { fill: getColors(ButtonColor.Content).button },\n\t\t\t\t\t\t\ttitle: lang.get(\"reminderBeforeEvent_label\"),\n\t\t\t\t\t\t\tsize: IconSize.Medium,\n\t\t\t\t\t\t}),\n\t\t\t\t\t],\n\t\t\t\t),\n\t\t\t\tm(RemindersEditor, {\n\t\t\t\t\talarms: alarmModel.alarms,\n\t\t\t\t\taddAlarm: alarmModel.addAlarm.bind(alarmModel),\n\t\t\t\t\tremoveAlarm: alarmModel.removeAlarm.bind(alarmModel),\n\t\t\t\t\tlabel: \"reminderBeforeEvent_label\",\n\t\t\t\t\tuseNewEditor: true,\n\t\t\t\t} satisfies RemindersEditorAttrs),\n\t\t\t]),\n\t\t)\n\t}\n\n\tprivate renderLocationField(vnode: Vnode<CalendarEventEditViewAttrs>): Children {\n\t\tconst { model } = vnode.attrs\n\t\treturn m(\n\t\t\tCard,\n\t\t\t{\n\t\t\t\tstyle: { padding: \"0\" },\n\t\t\t},\n\t\t\tm(\n\t\t\t\t\".flex.gap-vpad-s.items-center\",\n\t\t\t\tm(SingleLineTextField, {\n\t\t\t\t\tvalue: model.editModels.location.content,\n\t\t\t\t\toninput: (newValue: string) => {\n\t\t\t\t\t\tmodel.editModels.location.content = newValue\n\t\t\t\t\t},\n\t\t\t\t\tclasses: [\"button-min-height\"],\n\t\t\t\t\tariaLabel: lang.get(\"location_label\"),\n\t\t\t\t\tplaceholder: lang.get(\"location_label\"),\n\t\t\t\t\tdisabled: !model.isFullyWritable(),\n\t\t\t\t\tleadingIcon: {\n\t\t\t\t\t\ticon: Icons.Pin,\n\t\t\t\t\t\tcolor: getColors(ButtonColor.Content).button,\n\t\t\t\t\t},\n\t\t\t\t\ttype: TextFieldType.Text,\n\t\t\t\t}),\n\t\t\t),\n\t\t)\n\t}\n\n\tprivate renderDescriptionEditor(vnode: Vnode<CalendarEventEditViewAttrs>): Children {\n\t\treturn m(\n\t\t\tCard,\n\t\t\t{\n\t\t\t\tclasses: [\"child-text-editor\", \"rel\"],\n\t\t\t\tstyle: {\n\t\t\t\t\tpadding: \"0\",\n\t\t\t\t},\n\t\t\t},\n\t\t\t[\n\t\t\t\tvnode.attrs.descriptionEditor.isEmpty() && !vnode.attrs.descriptionEditor.isActive()\n\t\t\t\t\t? m(\"span.text-editor-placeholder\", lang.get(\"description_label\"))\n\t\t\t\t\t: null,\n\t\t\t\tm(vnode.attrs.descriptionEditor),\n\t\t\t],\n\t\t)\n\t}\n\n\tprivate renderMainPage(vnode: Vnode<CalendarEventEditViewAttrs>): Children {\n\t\treturn m(\n\t\t\t\".pb.pt.flex.col.gap-vpad.fit-height.box-content\",\n\t\t\t{\n\t\t\t\tstyle: {\n\t\t\t\t\t// The date picker dialogs have position: fixed, and they are fixed relative to the most recent ancestor with\n\t\t\t\t\t// a transform. So doing a no-op transform will make the dropdowns scroll with the dialog\n\t\t\t\t\t// without this, then the date picker dialogs will show at the same place on the screen regardless of whether the\n\t\t\t\t\t// editor has scrolled or not.\n\t\t\t\t\t// Ideally we could do this inside DatePicker itself, but the rendering breaks and the dialog appears below it's siblings\n\t\t\t\t\t// We also don't want to do this for all dialogs because it could potentially cause other issues\n\t\t\t\t\ttransform: \"translate(0)\",\n\t\t\t\t\tcolor: theme.button_bubble_fg,\n\t\t\t\t\t\"pointer-events\": `${this.allowRenderMainPage() ? \"auto\" : \"none\"}`,\n\t\t\t\t\twidth: px(this.pageWidth),\n\t\t\t\t},\n\t\t\t},\n\t\t\t[\n\t\t\t\tthis.allowRenderMainPage()\n\t\t\t\t\t? m.fragment({}, [\n\t\t\t\t\t\t\tthis.renderReadonlyMessage(vnode.attrs),\n\t\t\t\t\t\t\tthis.renderTitle(vnode.attrs),\n\t\t\t\t\t\t\tthis.renderEventTimeEditor(vnode.attrs),\n\t\t\t\t\t\t\tthis.renderCalendarPicker(vnode),\n\t\t\t\t\t\t\tthis.renderRepeatRuleNavButton(vnode.attrs),\n\t\t\t\t\t\t\tthis.renderRemindersEditor(vnode),\n\t\t\t\t\t\t\tthis.renderGuestsNavButton(vnode.attrs),\n\t\t\t\t\t\t\tthis.renderLocationField(vnode),\n\t\t\t\t\t  ])\n\t\t\t\t\t: null,\n\t\t\t\tthis.renderDescriptionEditor(vnode),\n\t\t\t],\n\t\t)\n\t}\n\n\tprivate renderRepeatRulesPage({ attrs: { model, navigationCallback } }: Vnode<CalendarEventEditViewAttrs>) {\n\t\tconst { whenModel } = model.editModels\n\n\t\treturn m(RepeatRuleEditor, {\n\t\t\tmodel: whenModel,\n\t\t\tstartOfTheWeekOffset: this.startOfTheWeekOffset,\n\t\t\twidth: this.pageWidth,\n\t\t\tbackAction: () => navigationCallback(EditorPages.MAIN),\n\t\t} satisfies RepeatRuleEditorAttrs)\n\t}\n\n\tprivate getTranslatedRepeatRule(rule: CalendarRepeatRule | null, isAllDay: boolean): string {\n\t\tif (rule == null) return lang.get(\"calendarRepeatIntervalNoRepeat_label\")\n\n\t\tconst frequency = formatRepetitionFrequency(rule)\n\t\treturn frequency ? frequency + formatRepetitionEnd(rule, isAllDay) : lang.get(\"unknownRepetition_msg\")\n\t}\n}\n"]}