{"version":3,"file":"RemindersEditor.js","sourceRoot":"","sources":["../../../../../src/calendar-app/calendar/gui/RemindersEditor.ts"],"names":[],"mappings":"AAAA,OAAO,CAAiC,MAAM,SAAS,CAAA;AACvD,OAAO,EAAE,SAAS,EAAiC,MAAM,uCAAuC,CAAA;AAChG,OAAO,EAAE,wBAAwB,EAAE,gCAAgC,EAAE,gCAAgC,EAAE,MAAM,uBAAuB,CAAA;AACpI,OAAO,EAAE,IAAI,EAAkB,MAAM,2CAA2C,CAAA;AAChF,OAAO,EAAE,UAAU,EAAE,MAAM,wCAAwC,CAAA;AAEnE,OAAO,EAAE,cAAc,EAAE,MAAM,sCAAsC,CAAA;AACrE,OAAO,EAAiB,iBAAiB,EAAE,MAAM,gDAAgD,CAAA;AACjG,OAAO,EAAE,MAAM,EAAE,MAAM,oCAAoC,CAAA;AAC3D,OAAO,EAAE,gBAAgB,EAAE,MAAM,8CAA8C,CAAA;AAC/E,OAAO,EAAE,SAAS,EAAE,MAAM,uBAAuB,CAAA;AACjD,OAAO,EAAE,MAAM,EAAkC,MAAM,oCAAoC,CAAA;AAC3F,OAAO,EAAE,IAAI,EAAE,QAAQ,EAAE,MAAM,kCAAkC,CAAA;AACjE,OAAO,EAAE,UAAU,EAAE,MAAM,gDAAgD,CAAA;AAC3E,OAAO,EAAe,SAAS,EAAE,MAAM,oCAAoC,CAAA;AAC3E,OAAO,MAAM,MAAM,gBAAgB,CAAA;AAenC,MAAM,OAAO,eAAe;IAC3B,IAAI,CAAC,KAAkC;QACtC,MAAM,EAAE,QAAQ,EAAE,WAAW,EAAE,MAAM,EAAE,YAAY,EAAE,GAAG,KAAK,CAAC,KAAK,CAAA;QACnE,MAAM,WAAW,GAAG,CAAC,QAAuB,EAAE,EAAE;YAC/C,MAAM,QAAQ,GAAG,MAAM,CAAC,IAAI,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,SAAS,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC,CAAA;YACnE,IAAI,QAAQ;gBAAE,OAAM;YACpB,QAAQ,CAAC,QAAQ,CAAC,CAAA;QACnB,CAAC,CAAA;QACD,OAAO,YAAY,CAAC,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,MAAM,EAAE,WAAW,EAAE,WAAW,EAAE,QAAQ,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,MAAM,EAAE,WAAW,EAAE,WAAW,EAAE,KAAK,CAAC,CAAA;IACvJ,CAAC;IAEO,eAAe,CACtB,MAAgC,EAChC,WAA8C,EAC9C,WAA8C,EAC9C,KAAkC;QAElC,MAAM,cAAc,GAA0B,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;YAChE,KAAK,EAAE,gCAAgC,CAAC,CAAC,EAAE,IAAI,CAAC,WAAW,CAAC;YAC5D,KAAK,EAAE,iBAAiB;YACxB,UAAU,EAAE,IAAI;YAChB,eAAe,EAAE,GAAG,EAAE,CACrB,CAAC,CAAC,UAAU,EAAE;gBACb,KAAK,EAAE,eAAe;gBACtB,IAAI,6BAAc;gBAClB,KAAK,EAAE,GAAG,EAAE,CAAC,WAAW,CAAC,CAAC,CAAC;aAC3B,CAAC;SACH,CAAC,CAAC,CAAA;QAEH,cAAc,CAAC,IAAI,CAAC;YACnB,KAAK,EAAE,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC;YAC7B,KAAK,EAAE,iBAAiB;YACxB,UAAU,EAAE,IAAI;YAChB,eAAe,EAAE,GAAG,EAAE,CACrB,CAAC,CACA,UAAU,EACV,cAAc,CAAC;gBACd,eAAe,EAAE;oBAChB,KAAK,EAAE,YAAY;oBACnB,IAAI,uBAAW;iBACf;gBACD,UAAU,EAAE,GAAG,EAAE,CAAC;oBACjB,GAAG,wBAAwB,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;wBACzD,KAAK,EAAE,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,IAAI,CAAC;wBAC3C,KAAK,EAAE,GAAG,EAAE,CAAC,WAAW,CAAC,CAAC,CAAC,KAAK,CAAC;qBACjC,CAAC,CAAC;oBACH;wBACC,KAAK,EAAE,kDAAkD;wBACzD,KAAK,EAAE,GAAG,EAAE;4BACX,IAAI,CAAC,gCAAgC,CAAC,CAAC,KAAK,EAAE,IAAI,EAAE,EAAE;gCACrD,WAAW,CAAC;oCACX,KAAK;oCACL,IAAI;iCACJ,CAAC,CAAA;4BACH,CAAC,CAAC,CAAA;wBACH,CAAC;qBACD;iBACD;aACD,CAAC,CACF;SACF,CAAC,CAAA;QAEF,cAAc,CAAC,CAAC,CAAC,CAAC,KAAK,GAAG,KAAK,CAAC,KAAK,CAAC,KAAK,CAAA;QAE3C,OAAO,CAAC,CACP,0BAA0B,EAC1B,cAAc,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC,CAC1C,CAAA;IACF,CAAC;IAEO,eAAe,CACtB,MAAgC,EAChC,WAA8C,EAC9C,WAA8C,EAC9C,QAA2C;QAE3C,MAAM,YAAY,GAAG,wBAAwB,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,GAAG,CAClE,CAAC,KAAK,EAAE,EAAE,CACT,CAAC;YACA,IAAI,EAAE,KAAK,CAAC,IAAI;YAChB,KAAK,EAAE,KAAK,CAAC,KAAK;YAClB,SAAS,EAAE,KAAK,CAAC,IAAI;SACW,CAAC,CACnC,CAAA;QAED,YAAY,CAAC,IAAI,CAAC;YACjB,IAAI,EAAE,IAAI,CAAC,GAAG,CAAC,kDAAkD,CAAC;YAClE,SAAS,EAAE,IAAI,CAAC,GAAG,CAAC,kDAAkD,CAAC;YACvE,KAAK,EAAE,EAAE,KAAK,EAAE,CAAC,CAAC,EAAE,IAAI,EAAE,iBAAiB,CAAC,MAAM,EAAE;SACpD,CAAC,CAAA;QAEF,MAAM,eAAe,GAAG;YACvB,IAAI,EAAE,IAAI,CAAC,GAAG,CAAC,mBAAmB,CAAC;YACnC,KAAK,EAAE,EAAE,KAAK,EAAE,CAAC,CAAC,EAAE,IAAI,EAAE,iBAAiB,CAAC,MAAM,EAAE;YACpD,SAAS,EAAE,IAAI,CAAC,GAAG,CAAC,mBAAmB,CAAC;SACxC,CAAA;QAED,OAAO,CAAC,CAAC,gDAAgD,EAAE;YAC1D,MAAM,CAAC,GAAG,CAAC,CAAC,KAAK,EAAE,EAAE,CACpB,CAAC,CAAC,2DAA2D,EAAE;gBAC9D,CAAC,CAAC,2BAA2B,EAAE,gCAAgC,CAAC,KAAK,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;gBACzF,CAAC,CACA,UAAU,EACV;oBACC,mFAAmF;oBACnF,KAAK,EAAE,IAAI,CAAC,eAAe,CAC1B,eAAe,EACf,GAAG,IAAI,CAAC,GAAG,CAAC,eAAe,CAAC,IAAI,gCAAgC,CAAC,KAAK,EAAE,IAAI,CAAC,WAAW,CAAC,EAAE,CAC3F;oBACD,OAAO,EAAE,GAAG,EAAE,CAAC,WAAW,CAAC,KAAK,CAAC;oBACjC,KAAK,EAAE,mBAAmB;iBAC1B,EACD,CAAC,CAAC,IAAI,EAAE;oBACP,IAAI,6BAAc;oBAClB,IAAI,EAAE,QAAQ,CAAC,MAAM;oBACrB,KAAK,EAAE;wBACN,IAAI,EAAE,SAAS,qCAAqB,CAAC,MAAM;qBAC3C;iBACD,CAAC,CACF;aACD,CAAC,CACF;YACD,CAAC,CACA,iBAAiB,EACjB,CAAC,CAAC,CAAA,MAA4C,CAAA,EAAE;gBAC/C,SAAS,EAAE,IAAI,CAAC,GAAG,CAAC,qCAAqC,CAAC;gBAC1D,QAAQ,EAAE,eAAe;gBACzB,OAAO,EAAE,MAAM,CAAC,YAAY,CAAC;gBAC7B,YAAY,EAAE,CAAC,MAAM,EAAE,EAAE,CAAC,IAAI,CAAC,qBAAqB,CAAC,MAAM,EAAE,KAAK,EAAE,KAAK,CAAC;gBAC1E,aAAa,EAAE,CAAC,MAAM,EAAE,EAAE,CAAC,IAAI,CAAC,qBAAqB,CAAC,MAAM,EAAE,MAAM,CAAC,MAAM,GAAG,CAAC,EAAE,IAAI,CAAC;gBACtF,QAAQ,EAAE,CAAC,QAAQ,EAAE,EAAE;oBACtB,IAAI,QAAQ,CAAC,KAAK,CAAC,KAAK,KAAK,CAAC,CAAC,EAAE,CAAC;wBACjC,2HAA2H;wBAC3H,OAAO,UAAU,CAAC,GAAG,EAAE;4BACtB,IAAI,CAAC,gCAAgC,CAAC,CAAC,KAAK,EAAE,IAAI,EAAE,EAAE;gCACrD,WAAW,CAAC;oCACX,KAAK;oCACL,IAAI;iCACJ,CAAC,CAAA;4BACH,CAAC,CAAC,CAAA;wBACH,CAAC,EAAE,CAAC,CAAC,CAAA;oBACN,CAAC;oBACD,QAAQ,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAA;gBACzB,CAAC;gBACD,QAAQ,EAAE,IAAI;gBACd,SAAS,EAAE,SAAS,qCAAqB,CAAC,MAAM;gBAChD,MAAM,EAAE,IAAI;aACqD,CAAC,CACnE;SACD,CAAC,CAAA;IACH,CAAC;IAEO,qBAAqB,CAAC,MAA6B,EAAE,SAAkB,EAAE,SAAkB;QAClG,OAAO,CAAC,CACP,+BAA+B,EAC/B;YACC,QAAQ,EAAE,SAAS,CAAC,CAAC,kCAAuB,CAAC,CAAC,SAAS;YACvD,KAAK,EAAE,SAAS,CAAC,CAAC,CAAC,QAAQ,SAAS,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,qEAAqE;SACjI,EACD,MAAM,CAAC,IAAI,CACX,CAAA;IACF,CAAC;IAEO,gCAAgC,CAAC,WAA6D;QACrG,IAAI,iBAAiB,GAAG,CAAC,CAAA;QACzB,IAAI,gBAAgB,GAAsB,iBAAiB,CAAC,MAAM,CAAA;QAElE,MAAM,CAAC,gBAAgB,CAAC;YACvB,KAAK,EAAE,4CAA4C;YACnD,iBAAiB,EAAE,IAAI;YACvB,KAAK,EAAE;gBACN,IAAI,EAAE,GAAG,EAAE;oBACV,MAAM,SAAS,GAAG,gCAAgC,EAAE,IAAI,EAAE,CAAA;oBAC1D,OAAO,CAAC,CAAC,uBAAuB,EAAE;wBACjC,CAAC,CAAC,SAAS,EAAE;4BACZ,IAAI,qCAAsB;4BAC1B,GAAG,EAAE,CAAC;4BACN,KAAK,EAAE,qCAAqC;4BAC5C,KAAK,EAAE,iBAAiB,CAAC,QAAQ,EAAE;4BACnC,OAAO,EAAE,CAAC,CAAC,EAAE,EAAE;gCACd,MAAM,IAAI,GAAG,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAA;gCAC/B,MAAM,OAAO,GAAG,CAAC,KAAK,EAAE,CAAA;gCACxB,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,OAAO;oCAAE,iBAAiB,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,CAAA;4BACrF,CAAC;4BACD,KAAK,EAAE,yBAAyB,EAAE,uFAAuF;yBACzH,CAAC;wBACF,CAAC,CAAC,gBAAgB,EAAE;4BACnB,KAAK,EAAE,iBAAiB;4BACxB,aAAa,EAAE,gBAAgB;4BAC/B,KAAK,EAAE,SAAS;4BAChB,KAAK,EAAE,gBAAgB;4BACvB,uBAAuB,EAAE,CAAC,aAAgC,EAAE,EAAE,CAAC,CAAC,gBAAgB,GAAG,aAAkC,CAAC;4BACtH,QAAQ,EAAE,KAAK;yBACf,CAAC;qBACF,CAAC,CAAA;gBACH,CAAC;aACD;YACD,cAAc,EAAE,YAAY;YAC5B,QAAQ,EAAE,CAAC,MAAc,EAAE,EAAE;gBAC5B,WAAW,CAAC,iBAAiB,EAAE,gBAAgB,CAAC,CAAA;gBAChD,MAAM,CAAC,KAAK,EAAE,CAAA;YACf,CAAC;SACD,CAAC,CAAA;IACH,CAAC;CACD","sourcesContent":["import m, { Children, Component, Vnode } from \"mithril\"\nimport { TextField, TextFieldAttrs, TextFieldType } from \"../../../common/gui/base/TextField.js\"\nimport { createAlarmIntervalItems, createCustomRepeatRuleUnitValues, humanDescriptionForAlarmInterval } from \"./CalendarGuiUtils.js\"\nimport { lang, TranslationKey } from \"../../../common/misc/LanguageViewModel.js\"\nimport { IconButton } from \"../../../common/gui/base/IconButton.js\"\nimport { Icons } from \"../../../common/gui/base/icons/Icons.js\"\nimport { attachDropdown } from \"../../../common/gui/base/Dropdown.js\"\nimport { AlarmInterval, AlarmIntervalUnit } from \"../../../common/calendar/date/CalendarUtils.js\"\nimport { Dialog } from \"../../../common/gui/base/Dialog.js\"\nimport { DropDownSelector } from \"../../../common/gui/base/DropDownSelector.js\"\nimport { deepEqual } from \"@tutao/tutanota-utils\"\nimport { Select, SelectAttributes, SelectOption } from \"../../../common/gui/base/Select.js\"\nimport { Icon, IconSize } from \"../../../common/gui/base/Icon.js\"\nimport { BaseButton } from \"../../../common/gui/base/buttons/BaseButton.js\"\nimport { ButtonColor, getColors } from \"../../../common/gui/base/Button.js\"\nimport stream from \"mithril/stream\"\nimport { TabIndex } from \"../../../common/api/common/TutanotaConstants.js\"\n\nexport type RemindersEditorAttrs = {\n\taddAlarm: (alarm: AlarmInterval) => unknown\n\tremoveAlarm: (alarm: AlarmInterval) => unknown\n\talarms: readonly AlarmInterval[]\n\tlabel: TranslationKey\n\tuseNewEditor: boolean\n}\n\nexport interface RemindersSelectOption extends SelectOption<AlarmInterval> {\n\ttext: string\n}\n\nexport class RemindersEditor implements Component<RemindersEditorAttrs> {\n\tview(vnode: Vnode<RemindersEditorAttrs>): Children {\n\t\tconst { addAlarm, removeAlarm, alarms, useNewEditor } = vnode.attrs\n\t\tconst addNewAlarm = (newAlarm: AlarmInterval) => {\n\t\t\tconst hasAlarm = alarms.find((alarm) => deepEqual(alarm, newAlarm))\n\t\t\tif (hasAlarm) return\n\t\t\taddAlarm(newAlarm)\n\t\t}\n\t\treturn useNewEditor ? this.renderNewEditor(alarms, removeAlarm, addNewAlarm, addAlarm) : this.renderOldEditor(alarms, removeAlarm, addNewAlarm, vnode)\n\t}\n\n\tprivate renderOldEditor(\n\t\talarms: readonly AlarmInterval[],\n\t\tremoveAlarm: (alarm: AlarmInterval) => unknown,\n\t\taddNewAlarm: (newAlarm: AlarmInterval) => void,\n\t\tvnode: Vnode<RemindersEditorAttrs>,\n\t) {\n\t\tconst textFieldAttrs: Array<TextFieldAttrs> = alarms.map((a) => ({\n\t\t\tvalue: humanDescriptionForAlarmInterval(a, lang.languageTag),\n\t\t\tlabel: \"emptyString_msg\",\n\t\t\tisReadOnly: true,\n\t\t\tinjectionsRight: () =>\n\t\t\t\tm(IconButton, {\n\t\t\t\t\ttitle: \"delete_action\",\n\t\t\t\t\ticon: Icons.Cancel,\n\t\t\t\t\tclick: () => removeAlarm(a),\n\t\t\t\t}),\n\t\t}))\n\n\t\ttextFieldAttrs.push({\n\t\t\tvalue: lang.get(\"add_action\"),\n\t\t\tlabel: \"emptyString_msg\",\n\t\t\tisReadOnly: true,\n\t\t\tinjectionsRight: () =>\n\t\t\t\tm(\n\t\t\t\t\tIconButton,\n\t\t\t\t\tattachDropdown({\n\t\t\t\t\t\tmainButtonAttrs: {\n\t\t\t\t\t\t\ttitle: \"add_action\",\n\t\t\t\t\t\t\ticon: Icons.Add,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tchildAttrs: () => [\n\t\t\t\t\t\t\t...createAlarmIntervalItems(lang.languageTag).map((i) => ({\n\t\t\t\t\t\t\t\tlabel: lang.makeTranslation(i.name, i.name),\n\t\t\t\t\t\t\t\tclick: () => addNewAlarm(i.value),\n\t\t\t\t\t\t\t})),\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlabel: \"calendarReminderIntervalDropdownCustomItem_label\",\n\t\t\t\t\t\t\t\tclick: () => {\n\t\t\t\t\t\t\t\t\tthis.showCustomReminderIntervalDialog((value, unit) => {\n\t\t\t\t\t\t\t\t\t\taddNewAlarm({\n\t\t\t\t\t\t\t\t\t\t\tvalue,\n\t\t\t\t\t\t\t\t\t\t\tunit,\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t}),\n\t\t\t\t),\n\t\t})\n\n\t\ttextFieldAttrs[0].label = vnode.attrs.label\n\n\t\treturn m(\n\t\t\t\".flex.col.flex-half.pl-s\",\n\t\t\ttextFieldAttrs.map((a) => m(TextField, a)),\n\t\t)\n\t}\n\n\tprivate renderNewEditor(\n\t\talarms: readonly AlarmInterval[],\n\t\tremoveAlarm: (alarm: AlarmInterval) => unknown,\n\t\taddNewAlarm: (newAlarm: AlarmInterval) => void,\n\t\taddAlarm: (alarm: AlarmInterval) => unknown,\n\t) {\n\t\tconst alarmOptions = createAlarmIntervalItems(lang.languageTag).map(\n\t\t\t(alarm) =>\n\t\t\t\t({\n\t\t\t\t\ttext: alarm.name,\n\t\t\t\t\tvalue: alarm.value,\n\t\t\t\t\tariaValue: alarm.name,\n\t\t\t\t} satisfies RemindersSelectOption),\n\t\t)\n\n\t\talarmOptions.push({\n\t\t\ttext: lang.get(\"calendarReminderIntervalDropdownCustomItem_label\"),\n\t\t\tariaValue: lang.get(\"calendarReminderIntervalDropdownCustomItem_label\"),\n\t\t\tvalue: { value: -1, unit: AlarmIntervalUnit.MINUTE },\n\t\t})\n\n\t\tconst defaultSelected = {\n\t\t\ttext: lang.get(\"addReminder_label\"),\n\t\t\tvalue: { value: -2, unit: AlarmIntervalUnit.MINUTE },\n\t\t\tariaValue: lang.get(\"addReminder_label\"),\n\t\t}\n\n\t\treturn m(\"ul.unstyled-list.flex.col.flex-grow.gap-vpad-s\", [\n\t\t\talarms.map((alarm) =>\n\t\t\t\tm(\"li.flex.justify-between.flew-grow.items-center.gap-vpad-s\", [\n\t\t\t\t\tm(\"span.flex.justify-between\", humanDescriptionForAlarmInterval(alarm, lang.languageTag)),\n\t\t\t\t\tm(\n\t\t\t\t\t\tBaseButton,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t//This might not make sense in other languages, but is better than what we have now\n\t\t\t\t\t\t\tlabel: lang.makeTranslation(\n\t\t\t\t\t\t\t\t\"delete_action\",\n\t\t\t\t\t\t\t\t`${lang.get(\"delete_action\")} ${humanDescriptionForAlarmInterval(alarm, lang.languageTag)}`,\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tonclick: () => removeAlarm(alarm),\n\t\t\t\t\t\t\tclass: \"flex items-center\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\tm(Icon, {\n\t\t\t\t\t\t\ticon: Icons.Cancel,\n\t\t\t\t\t\t\tsize: IconSize.Medium,\n\t\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t\tfill: getColors(ButtonColor.Content).button,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t}),\n\t\t\t\t\t),\n\t\t\t\t]),\n\t\t\t),\n\t\t\tm(\n\t\t\t\t\"li.items-center\",\n\t\t\t\tm(Select<RemindersSelectOption, AlarmInterval>, {\n\t\t\t\t\tariaLabel: lang.get(\"calendarReminderIntervalValue_label\"),\n\t\t\t\t\tselected: defaultSelected,\n\t\t\t\t\toptions: stream(alarmOptions),\n\t\t\t\t\trenderOption: (option) => this.renderReminderOptions(option, false, false),\n\t\t\t\t\trenderDisplay: (option) => this.renderReminderOptions(option, alarms.length > 0, true),\n\t\t\t\t\tonchange: (newValue) => {\n\t\t\t\t\t\tif (newValue.value.value === -1) {\n\t\t\t\t\t\t\t// timeout needed to prevent the custom interval dialog to be closed by the key event triggered inside the select component\n\t\t\t\t\t\t\treturn setTimeout(() => {\n\t\t\t\t\t\t\t\tthis.showCustomReminderIntervalDialog((value, unit) => {\n\t\t\t\t\t\t\t\t\taddNewAlarm({\n\t\t\t\t\t\t\t\t\t\tvalue,\n\t\t\t\t\t\t\t\t\t\tunit,\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}, 0)\n\t\t\t\t\t\t}\n\t\t\t\t\t\taddAlarm(newValue.value)\n\t\t\t\t\t},\n\t\t\t\t\texpanded: true,\n\t\t\t\t\ticonColor: getColors(ButtonColor.Content).button,\n\t\t\t\t\tnoIcon: true,\n\t\t\t\t} satisfies SelectAttributes<RemindersSelectOption, AlarmInterval>),\n\t\t\t),\n\t\t])\n\t}\n\n\tprivate renderReminderOptions(option: RemindersSelectOption, hasAlarms: boolean, isDisplay: boolean) {\n\t\treturn m(\n\t\t\t\"button.items-center.flex-grow\",\n\t\t\t{\n\t\t\t\ttabIndex: isDisplay ? TabIndex.Programmatic : undefined,\n\t\t\t\tclass: isDisplay ? `flex ${hasAlarms ? \"text-fade\" : \"\"}` : \"state-bg button-content button-min-height dropdown-button pt-s pb-s\",\n\t\t\t},\n\t\t\toption.text,\n\t\t)\n\t}\n\n\tprivate showCustomReminderIntervalDialog(onAddAction: (value: number, unit: AlarmIntervalUnit) => void) {\n\t\tlet timeReminderValue = 0\n\t\tlet timeReminderUnit: AlarmIntervalUnit = AlarmIntervalUnit.MINUTE\n\n\t\tDialog.showActionDialog({\n\t\t\ttitle: \"calendarReminderIntervalCustomDialog_title\",\n\t\t\tallowOkWithReturn: true,\n\t\t\tchild: {\n\t\t\t\tview: () => {\n\t\t\t\t\tconst unitItems = createCustomRepeatRuleUnitValues() ?? []\n\t\t\t\t\treturn m(\".flex full-width pt-s\", [\n\t\t\t\t\t\tm(TextField, {\n\t\t\t\t\t\t\ttype: TextFieldType.Number,\n\t\t\t\t\t\t\tmin: 0,\n\t\t\t\t\t\t\tlabel: \"calendarReminderIntervalValue_label\",\n\t\t\t\t\t\t\tvalue: timeReminderValue.toString(),\n\t\t\t\t\t\t\toninput: (v) => {\n\t\t\t\t\t\t\t\tconst time = Number.parseInt(v)\n\t\t\t\t\t\t\t\tconst isEmpty = v === \"\"\n\t\t\t\t\t\t\t\tif (!Number.isNaN(time) || isEmpty) timeReminderValue = isEmpty ? 0 : Math.abs(time)\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tclass: \"flex-half no-appearance\", //Removes the up/down arrow from input number. Pressing arrow up/down key still working\n\t\t\t\t\t\t}),\n\t\t\t\t\t\tm(DropDownSelector, {\n\t\t\t\t\t\t\tlabel: \"emptyString_msg\",\n\t\t\t\t\t\t\tselectedValue: timeReminderUnit,\n\t\t\t\t\t\t\titems: unitItems,\n\t\t\t\t\t\t\tclass: \"flex-half pl-s\",\n\t\t\t\t\t\t\tselectionChangedHandler: (selectedValue: AlarmIntervalUnit) => (timeReminderUnit = selectedValue as AlarmIntervalUnit),\n\t\t\t\t\t\t\tdisabled: false,\n\t\t\t\t\t\t}),\n\t\t\t\t\t])\n\t\t\t\t},\n\t\t\t},\n\t\t\tokActionTextId: \"add_action\",\n\t\t\tokAction: (dialog: Dialog) => {\n\t\t\t\tonAddAction(timeReminderValue, timeReminderUnit)\n\t\t\t\tdialog.close()\n\t\t\t},\n\t\t})\n\t}\n}\n"]}