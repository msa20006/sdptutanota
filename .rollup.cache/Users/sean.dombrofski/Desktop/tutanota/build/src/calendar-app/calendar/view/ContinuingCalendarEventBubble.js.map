{"version":3,"file":"ContinuingCalendarEventBubble.js","sourceRoot":"","sources":["../../../../../src/calendar-app/calendar/view/ContinuingCalendarEventBubble.ts"],"names":[],"mappings":"AAAA,OAAO,CAAiC,MAAM,SAAS,CAAA;AACvD,OAAO,EAAE,mBAAmB,EAAE,oBAAoB,EAAE,MAAM,6CAA6C,CAAA;AACvG,OAAO,EAAE,mBAAmB,EAAE,MAAM,uBAAuB,CAAA;AAK3D,OAAO,EAAE,eAAe,EAAE,oBAAoB,EAAE,MAAM,4BAA4B,CAAA;AAClF,OAAO,EAAE,UAAU,EAAE,MAAM,iDAAiD,CAAA;AAgB5E,MAAM,OAAO,6BAA6B;IACzC,IAAI,CAAC,EAAE,KAAK,EAA6C;QACxD,MAAM,UAAU,GAAG,oBAAoB,CAAC,KAAK,CAAC,KAAK,CAAC,OAAO,CAAC,CAAA;QAE5D,OAAO,CAAC,CAAC,6CAA6C,EAAE;YACvD,KAAK,CAAC,YAAY;gBACjB,CAAC,CAAC,CAAC,CAAC,8BAA8B,EAAE;oBAClC,KAAK,EAAE;wBACN,mBAAmB,EAAE,aAAa;wBAClC,kBAAkB,EAAE,GAAG,GAAG,KAAK,CAAC,KAAK;wBACrC,qBAAqB,EAAE,GAAG,GAAG,KAAK,CAAC,KAAK;wBACxC,OAAO,EAAE,KAAK,CAAC,OAAO;qBACtB;iBACA,CAAC;gBACJ,CAAC,CAAC,IAAI;YACP,CAAC,CACA,4BAA4B,EAC5B,CAAC,CAAC,mBAAmB,EAAE;gBACtB,IAAI,EAAE,CAAC,KAAK,CAAC,QAAQ,IAAI,IAAI,CAAC,CAAC,CAAC,eAAe,CAAC,KAAK,CAAC,KAAK,EAAE,KAAK,CAAC,QAAQ,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,UAAU;gBACrG,KAAK,EAAE,KAAK,CAAC,KAAK;gBAClB,KAAK,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,KAAK,CAAC,cAAc,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC,CAAC;gBAClD,OAAO,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,KAAK,CAAC,cAAc,CAAC,KAAK,CAAC,KAAK,EAAE,CAAC,CAAC;gBACpD,YAAY,EAAE,KAAK,CAAC,YAAY;gBAChC,aAAa,EAAE,KAAK,CAAC,SAAS;gBAC9B,QAAQ,EAAE,mBAAmB,CAAC,KAAK,CAAC,IAAI,EAAE,KAAK,CAAC,KAAK,CAAC;gBACtD,SAAS,EAAE,KAAK,CAAC,KAAK,CAAC,YAAY,IAAI,IAAI;gBAC3C,MAAM,EAAE,KAAK,CAAC,MAAM;gBACpB,OAAO,EAAE,KAAK,CAAC,OAAO;gBACtB,mBAAmB,EAAE,KAAK,CAAC,mBAAmB;gBAC9C,YAAY,EAAE,oBAAoB,CAAC,UAAU,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;aAC/D,CAAC,CACF;YACD,KAAK,CAAC,SAAS;gBACd,CAAC,CAAC,CAAC,CAAC,8BAA8B,EAAE;oBAClC,KAAK,EAAE;wBACN,mBAAmB,EAAE,GAAG,GAAG,KAAK,CAAC,KAAK;wBACtC,OAAO,EAAE,KAAK,CAAC,OAAO;qBACtB;iBACA,CAAC;gBACJ,CAAC,CAAC,IAAI;SACP,CAAC,CAAA;IACH,CAAC;CACD","sourcesContent":["import m, { Children, Component, Vnode } from \"mithril\"\nimport { hasAlarmsForTheUser, isClientOnlyCalendar } from \"../../../common/calendar/date/CalendarUtils\"\nimport { CalendarEventBubble } from \"./CalendarEventBubble\"\nimport type { CalendarEvent } from \"../../../common/api/entities/tutanota/TypeRefs.js\"\nimport type { User } from \"../../../common/api/entities/sys/TypeRefs.js\"\nimport type { EventTextTimeOption } from \"../../../common/api/common/TutanotaConstants\"\nimport type { CalendarEventBubbleClickHandler, CalendarEventBubbleKeyDownHandler } from \"./CalendarViewModel\"\nimport { formatEventTime, getDisplayEventTitle } from \"../gui/CalendarGuiUtils.js\"\nimport { listIdPart } from \"../../../common/api/common/utils/EntityUtils.js\"\n\ntype ContinuingCalendarEventBubbleAttrs = {\n\tevent: CalendarEvent\n\tstartsBefore: boolean\n\tendsAfter: boolean\n\tcolor: string\n\tonEventClicked: CalendarEventBubbleClickHandler\n\tonEventKeyDown: CalendarEventBubbleKeyDownHandler\n\tshowTime: EventTextTimeOption | null\n\tuser: User\n\tfadeIn: boolean\n\topacity: number\n\tenablePointerEvents: boolean\n}\n\nexport class ContinuingCalendarEventBubble implements Component<ContinuingCalendarEventBubbleAttrs> {\n\tview({ attrs }: Vnode<ContinuingCalendarEventBubbleAttrs>): Children {\n\t\tconst eventTitle = getDisplayEventTitle(attrs.event.summary)\n\n\t\treturn m(\".flex.calendar-event-container.darker-hover\", [\n\t\t\tattrs.startsBefore\n\t\t\t\t? m(\".event-continues-right-arrow\", {\n\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t\"border-left-color\": \"transparent\",\n\t\t\t\t\t\t\t\"border-top-color\": \"#\" + attrs.color,\n\t\t\t\t\t\t\t\"border-bottom-color\": \"#\" + attrs.color,\n\t\t\t\t\t\t\topacity: attrs.opacity,\n\t\t\t\t\t\t},\n\t\t\t\t  })\n\t\t\t\t: null,\n\t\t\tm(\n\t\t\t\t\".flex-grow.overflow-hidden\",\n\t\t\t\tm(CalendarEventBubble, {\n\t\t\t\t\ttext: (attrs.showTime != null ? formatEventTime(attrs.event, attrs.showTime) + \" \" : \"\") + eventTitle,\n\t\t\t\t\tcolor: attrs.color,\n\t\t\t\t\tclick: (e) => attrs.onEventClicked(attrs.event, e),\n\t\t\t\t\tkeyDown: (e) => attrs.onEventKeyDown(attrs.event, e),\n\t\t\t\t\tnoBorderLeft: attrs.startsBefore,\n\t\t\t\t\tnoBorderRight: attrs.endsAfter,\n\t\t\t\t\thasAlarm: hasAlarmsForTheUser(attrs.user, attrs.event),\n\t\t\t\t\tisAltered: attrs.event.recurrenceId != null,\n\t\t\t\t\tfadeIn: attrs.fadeIn,\n\t\t\t\t\topacity: attrs.opacity,\n\t\t\t\t\tenablePointerEvents: attrs.enablePointerEvents,\n\t\t\t\t\tisClientOnly: isClientOnlyCalendar(listIdPart(attrs.event._id)),\n\t\t\t\t}),\n\t\t\t),\n\t\t\tattrs.endsAfter\n\t\t\t\t? m(\".event-continues-right-arrow\", {\n\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t\"border-left-color\": \"#\" + attrs.color,\n\t\t\t\t\t\t\topacity: attrs.opacity,\n\t\t\t\t\t\t},\n\t\t\t\t  })\n\t\t\t\t: null,\n\t\t])\n\t}\n}\n"]}