{"version":3,"file":"CalendarAgendaItemView.js","sourceRoot":"","sources":["../../../../../src/calendar-app/calendar/view/CalendarAgendaItemView.ts"],"names":[],"mappings":"AAAA,OAAO,CAAiC,MAAM,SAAS,CAAA;AAEvD,OAAO,EAAE,YAAY,EAAE,YAAY,EAAE,MAAM,sCAAsC,CAAA;AACjF,OAAO,EAAE,KAAK,EAAE,MAAM,8BAA8B,CAAA;AACpD,OAAO,EAAE,MAAM,EAAE,MAAM,+BAA+B,CAAA;AACtD,OAAO,EAAE,oBAAoB,EAAE,MAAM,6CAA6C,CAAA;AAClF,OAAO,EAAE,EAAE,EAAE,MAAM,6BAA6B,CAAA;AAEhD,OAAO,EAAE,oBAAoB,EAAE,MAAM,4BAA4B,CAAA;AAejE,MAAM,OAAO,sBAAsB;IAC1B,SAAS,GAAY,KAAK,CAAA;IAElC,IAAI,CAAC,EAAE,KAAK,EAAsC;QACjD,MAAM,UAAU,GAAG,oBAAoB,CAAC,KAAK,CAAC,KAAK,CAAC,OAAO,CAAC,CAAA;QAE5D,OAAO,CAAC,CACP,iFAAiF,EACjF;YACC,gGAAgG;YAChG,KAAK,EAAE,MAAM,CAAC,eAAe,EAAE,CAAC,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC,UAAU;YAC7D,QAAQ,4BAAkB;YAC1B,OAAO,EAAE,KAAK,CAAC,KAAK;YACpB,SAAS,EAAE,CAAC,KAAoB,EAAE,EAAE,CAAC,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC;YACzD,OAAO,EAAE,GAAG,EAAE,CAAC,CAAC,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;YACtC,MAAM,EAAE,GAAG,EAAE,CAAC,CAAC,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;YACtC,KAAK,EAAE;gBACN,UAAU,EAAE,cAAc,oBAAoB,IAAI;gBAClD,UAAU,EAAE,sBAAsB,CAAC,aAAa,CAAC,KAAK,CAAC,QAAQ,IAAI,KAAK,EAAE,IAAI,CAAC,SAAS,CAAC;gBACzF,MAAM,EAAE,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,SAAS;aACnD;SACD,EACD;YACC,CAAC,CAAC,kBAAkB,EAAE;gBACrB,KAAK,EAAE;oBACN,eAAe,EAAE,IAAI,KAAK,CAAC,KAAK,EAAE;iBAClC;aACD,CAAC;YACF,CAAC,CAAC,iCAAiC,EAAE,CAAC,CAAC,CAAC,uBAAuB,EAAE,UAAU,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC;SACrG,CACD,CAAA;IACF,CAAC;IAEO,MAAM,CAAC,aAAa,CAAC,UAAmB,EAAE,SAAkB;QACnE,IAAI,MAAM,CAAC,eAAe,EAAE,EAAE,CAAC;YAC9B,IAAI,UAAU,EAAE,CAAC;gBAChB,OAAO,YAAY,CAAA;YACpB,CAAC;iBAAM,CAAC;gBACP,IAAI,SAAS,EAAE,CAAC;oBACf,OAAO,YAAY,CAAA;gBACpB,CAAC;qBAAM,CAAC;oBACP,OAAO,KAAK,CAAC,OAAO,CAAA;gBACrB,CAAC;YACF,CAAC;QACF,CAAC;aAAM,CAAC;YACP,OAAO,SAAS,CAAA;QACjB,CAAC;IACF,CAAC;CACD","sourcesContent":["import m, { Children, Component, Vnode } from \"mithril\"\nimport { CalendarEvent } from \"../../../common/api/entities/tutanota/TypeRefs.js\"\nimport { stateBgFocus, stateBgHover } from \"../../../common/gui/builtinThemes.js\"\nimport { theme } from \"../../../common/gui/theme.js\"\nimport { styles } from \"../../../common/gui/styles.js\"\nimport { DefaultAnimationTime } from \"../../../common/gui/animation/Animations.js\"\nimport { px } from \"../../../common/gui/size.js\"\nimport { TabIndex } from \"../../../common/api/common/TutanotaConstants.js\"\nimport { getDisplayEventTitle } from \"../gui/CalendarGuiUtils.js\"\nimport { isBirthdayEvent } from \"../../../common/calendar/date/CalendarUtils.js\"\n\nexport interface CalendarAgendaItemViewAttrs {\n\tday: Date\n\tzone: string\n\tevent: CalendarEvent\n\tcolor: string\n\tclick: (domEvent: MouseEvent) => unknown\n\tkeyDown: (event: KeyboardEvent) => unknown\n\ttimeText: string\n\tselected?: boolean\n\theight?: number\n}\n\nexport class CalendarAgendaItemView implements Component<CalendarAgendaItemViewAttrs> {\n\tprivate isFocused: boolean = false\n\n\tview({ attrs }: Vnode<CalendarAgendaItemViewAttrs>): Children {\n\t\tconst eventTitle = getDisplayEventTitle(attrs.event.summary)\n\n\t\treturn m(\n\t\t\t\".flex.items-center.click.plr.border-radius.pt-s.pb-s.rel.limit-width.full-width\",\n\t\t\t{\n\t\t\t\t// Implement the background color via JavaScript on Desktop, so we can react to `attrs.selected`\n\t\t\t\tclass: styles.isDesktopLayout() ? \"hide-outline\" : \"state-bg\",\n\t\t\t\ttabIndex: TabIndex.Default,\n\t\t\t\tonclick: attrs.click,\n\t\t\t\tonkeydown: (event: KeyboardEvent) => attrs.keyDown(event),\n\t\t\t\tonfocus: () => (this.isFocused = true),\n\t\t\t\tonblur: () => (this.isFocused = false),\n\t\t\t\tstyle: {\n\t\t\t\t\ttransition: `background ${DefaultAnimationTime}ms`,\n\t\t\t\t\tbackground: CalendarAgendaItemView.getBackground(attrs.selected ?? false, this.isFocused),\n\t\t\t\t\theight: attrs.height ? px(attrs.height) : undefined,\n\t\t\t\t},\n\t\t\t},\n\t\t\t[\n\t\t\t\tm(\".icon.circle.abs\", {\n\t\t\t\t\tstyle: {\n\t\t\t\t\t\tbackgroundColor: `#${attrs.color}`,\n\t\t\t\t\t},\n\t\t\t\t}),\n\t\t\t\tm(\".flex.col.min-width-0.pl-vpad-l\", [m(\"p.b.m-0.text-ellipsis\", eventTitle), m(\"\", attrs.timeText)]),\n\t\t\t],\n\t\t)\n\t}\n\n\tprivate static getBackground(isSelected: boolean, isFocused: boolean) {\n\t\tif (styles.isDesktopLayout()) {\n\t\t\tif (isSelected) {\n\t\t\t\treturn stateBgHover\n\t\t\t} else {\n\t\t\t\tif (isFocused) {\n\t\t\t\t\treturn stateBgFocus\n\t\t\t\t} else {\n\t\t\t\t\treturn theme.list_bg\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\treturn undefined\n\t\t}\n\t}\n}\n"]}