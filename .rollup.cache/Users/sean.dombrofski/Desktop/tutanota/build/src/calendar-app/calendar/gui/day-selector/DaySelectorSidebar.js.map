{"version":3,"file":"DaySelectorSidebar.js","sourceRoot":"","sources":["../../../../../../src/calendar-app/calendar/gui/day-selector/DaySelectorSidebar.ts"],"names":[],"mappings":"AAAA,OAAO,CAAiC,MAAM,SAAS,CAAA;AACvD,OAAO,EAAE,uBAAuB,EAAE,MAAM,sCAAsC,CAAA;AAC9E,OAAO,EAAE,cAAc,EAAE,SAAS,EAAE,MAAM,uBAAuB,CAAA;AACjE,OAAO,EAAE,WAAW,EAAE,MAAM,kBAAkB,CAAA;AAC9C,OAAO,0BAA0B,MAAM,oDAAoD,CAAA;AAY3F,MAAM,OAAO,kBAAkB;IACtB,WAAW,CAAM;IACjB,QAAQ,CAAM;IAEtB,YAAY,KAAqC;QAChD,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC,KAAK,CAAC,YAAY,CAAA;QAC3C,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC,KAAK,CAAC,YAAY,CAAA;IACzC,CAAC;IAED,IAAI,CAAC,KAAqC;QACzC,IAAI,KAAK,CAAC,KAAK,CAAC,YAAY,KAAK,IAAI,CAAC,QAAQ,EAAE,CAAC;YAChD,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC,KAAK,CAAC,YAAY,CAAA;YAC3C,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC,KAAK,CAAC,YAAY,CAAA;QACzC,CAAC;QAED,MAAM,gBAAgB,GAAG,CAAC,SAAS,CAAC,KAAK,CAAC,KAAK,CAAC,YAAY,EAAE,IAAI,CAAC,WAAW,CAAC,CAAA;QAE/E,OAAO,CAAC,CACP,gBAAgB,EAChB,CAAC,CAAC,uDAAuD,EAAE;YAC1D,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,WAAW,CAAC;YACzC,CAAC,CAAC,4BAA4B,EAAE;gBAC/B,CAAC,CAAC,WAAW,EAAE;oBACd,YAAY,EAAE,IAAI,CAAC,WAAW;oBAC9B,cAAc,EAAE,KAAK,CAAC,KAAK,CAAC,cAAc;oBAC1C,IAAI,EAAE,KAAK;oBACX,oBAAoB,EAAE,KAAK,CAAC,KAAK,CAAC,oBAAoB;oBACtD,qBAAqB,EAAE,IAAI;oBAC3B,oBAAoB,EAAE,CAAC,MAAM,EAAE,EAAE;wBAChC,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,CAAA;wBAC1B,CAAC,CAAC,MAAM,EAAE,CAAA;oBACX,CAAC;oBACD,gBAAgB,EAAE,KAAK,CAAC,KAAK,CAAC,gBAAgB,IAAI,CAAC,gBAAgB;oBACnE,cAAc,EAAE,KAAK,CAAC,KAAK,CAAC,cAAc;oBAC1C,qBAAqB,EAAE,KAAK,CAAC,KAAK,CAAC,qBAAqB,IAAI,CAAC,gBAAgB;oBAC7E,iBAAiB,EAAE,IAAI;oBACvB,UAAU,EAAE,KAAK,CAAC,KAAK,CAAC,WAAW;iBACnC,CAAC;aACF,CAAC;SACF,CAAC,CACF,CAAA;IACF,CAAC;IAEO,kBAAkB,CAAC,IAAU;QACpC,OAAO,CAAC,CAAC,iDAAiD,EAAE;YAC3D,0BAA0B,CAAC,KAAK,EAAE,EAAE,EAAE,GAAG,EAAE,CAAC,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;YACtE,CAAC,CACA,UAAU,EACV;gBACC,KAAK,EAAE;oBACN,QAAQ,EAAE,MAAM;iBAChB;aACD,EACD,uBAAuB,CAAC,IAAI,CAAC,CAC7B;YACD,0BAA0B,CAAC,IAAI,EAAE,EAAE,EAAE,GAAG,EAAE,CAAC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;SACpE,CAAC,CAAA;IACH,CAAC;IAEO,aAAa,CAAC,OAAgB;QACrC,IAAI,CAAC,WAAW,GAAG,cAAc,CAAC,IAAI,CAAC,WAAW,EAAE,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAA;IACtE,CAAC;CACD","sourcesContent":["import m, { Children, Component, Vnode } from \"mithril\"\nimport { formatMonthWithFullYear } from \"../../../../common/misc/Formatter.js\"\nimport { incrementMonth, isSameDay } from \"@tutao/tutanota-utils\"\nimport { DaySelector } from \"./DaySelector.js\"\nimport renderSwitchMonthArrowIcon from \"../../../../common/gui/base/buttons/ArrowButton.js\"\n\nexport interface DaySelectorSidebarAttrs {\n\tselectedDate: Date\n\tonDateSelected: (date: Date, dayClick: boolean) => unknown\n\tstartOfTheWeekOffset: number\n\tshowDaySelection: boolean\n\thighlightToday: boolean\n\thighlightSelectedWeek: boolean\n\thasEventsOn: (date: Date) => boolean\n}\n\nexport class DaySelectorSidebar implements Component<DaySelectorSidebarAttrs> {\n\tprivate currentDate: Date\n\tprivate openDate: Date\n\n\tconstructor(vnode: Vnode<DaySelectorSidebarAttrs>) {\n\t\tthis.currentDate = vnode.attrs.selectedDate\n\t\tthis.openDate = vnode.attrs.selectedDate\n\t}\n\n\tview(vnode: Vnode<DaySelectorSidebarAttrs>): Children {\n\t\tif (vnode.attrs.selectedDate !== this.openDate) {\n\t\t\tthis.currentDate = vnode.attrs.selectedDate\n\t\t\tthis.openDate = vnode.attrs.selectedDate\n\t\t}\n\n\t\tconst disableHighlight = !isSameDay(vnode.attrs.selectedDate, this.currentDate)\n\n\t\treturn m(\n\t\t\t\".plr-m.mt-form\",\n\t\t\tm(\".elevated-bg.pt-s.pb-m.border-radius.flex.flex-column\", [\n\t\t\t\tthis.renderPickerHeader(this.currentDate),\n\t\t\t\tm(\".flex-grow.overflow-hidden\", [\n\t\t\t\t\tm(DaySelector, {\n\t\t\t\t\t\tselectedDate: this.currentDate,\n\t\t\t\t\t\tonDateSelected: vnode.attrs.onDateSelected,\n\t\t\t\t\t\twide: false,\n\t\t\t\t\t\tstartOfTheWeekOffset: vnode.attrs.startOfTheWeekOffset,\n\t\t\t\t\t\tisDaySelectorExpanded: true,\n\t\t\t\t\t\thandleDayPickerSwipe: (isNext) => {\n\t\t\t\t\t\t\tthis.onMonthChange(isNext)\n\t\t\t\t\t\t\tm.redraw()\n\t\t\t\t\t\t},\n\t\t\t\t\t\tshowDaySelection: vnode.attrs.showDaySelection && !disableHighlight,\n\t\t\t\t\t\thighlightToday: vnode.attrs.highlightToday,\n\t\t\t\t\t\thighlightSelectedWeek: vnode.attrs.highlightSelectedWeek && !disableHighlight,\n\t\t\t\t\t\tuseNarrowWeekName: true,\n\t\t\t\t\t\thasEventOn: vnode.attrs.hasEventsOn,\n\t\t\t\t\t}),\n\t\t\t\t]),\n\t\t\t]),\n\t\t)\n\t}\n\n\tprivate renderPickerHeader(date: Date): Children {\n\t\treturn m(\".flex.flex-space-between.pb.items-center.mlr-xs\", [\n\t\t\trenderSwitchMonthArrowIcon(false, 24, () => this.onMonthChange(false)),\n\t\t\tm(\n\t\t\t\t\".b.mlr-s\",\n\t\t\t\t{\n\t\t\t\t\tstyle: {\n\t\t\t\t\t\tfontSize: \"14px\",\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tformatMonthWithFullYear(date),\n\t\t\t),\n\t\t\trenderSwitchMonthArrowIcon(true, 24, () => this.onMonthChange(true)),\n\t\t])\n\t}\n\n\tprivate onMonthChange(forward: boolean) {\n\t\tthis.currentDate = incrementMonth(this.currentDate, forward ? 1 : -1)\n\t}\n}\n"]}