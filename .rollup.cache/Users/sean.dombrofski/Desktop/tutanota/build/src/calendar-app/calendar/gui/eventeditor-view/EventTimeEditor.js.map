{"version":3,"file":"EventTimeEditor.js","sourceRoot":"","sources":["../../../../../../src/calendar-app/calendar/gui/eventeditor-view/EventTimeEditor.ts"],"names":[],"mappings":"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","sourcesContent":["import m, { Component, Vnode } from \"mithril\"\nimport { TimeFormat } from \"../../../../common/api/common/TutanotaConstants.js\"\nimport { lang } from \"../../../../common/misc/LanguageViewModel.js\"\nimport { CalendarEventWhenModel } from \"../eventeditor-model/CalendarEventWhenModel.js\"\nimport { Switch } from \"../../../../common/gui/base/Switch.js\"\nimport { Icon, IconSize } from \"../../../../common/gui/base/Icon.js\"\nimport { Icons } from \"../../../../common/gui/base/icons/Icons.js\"\nimport { theme } from \"../../../../common/gui/theme.js\"\nimport { isApp } from \"../../../../common/api/common/Env.js\"\nimport { DatePicker } from \"../pickers/DatePicker.js\"\nimport { TimePicker } from \"../pickers/TimePicker.js\"\nimport { px, size } from \"../../../../common/gui/size.js\"\nimport { Divider } from \"../../../../common/gui/Divider.js\"\n\nexport type EventTimeEditorAttrs = {\n\tstartOfTheWeekOffset: number\n\ttimeFormat: TimeFormat\n\teditModel: CalendarEventWhenModel\n\tdisabled: boolean\n}\n\n/**\n * an editor component to edit the start date and end date of a calendar event.\n * also allows to edit start time and end time for events where that makes sense (ie not all-day)\n */\nexport class EventTimeEditor implements Component<EventTimeEditorAttrs> {\n\tview(vnode: Vnode<EventTimeEditorAttrs>) {\n\t\tconst { attrs } = vnode\n\t\tconst { startOfTheWeekOffset, editModel, timeFormat, disabled } = attrs\n\n\t\tconst appClasses = isApp() ? [\"smaller\"] : []\n\n\t\treturn m(\".flex\", [\n\t\t\tm(\".flex.col.flex-grow.gap-vpad-s\", [\n\t\t\t\tm(\".flex.gap-vpad-s.items-center.pr-vpad-s\", [\n\t\t\t\t\tm(Icon, {\n\t\t\t\t\t\ticon: Icons.Time,\n\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\tfill: theme.content_fg,\n\t\t\t\t\t\t},\n\t\t\t\t\t\ttitle: lang.get(\"timeSection_label\"),\n\t\t\t\t\t\tsize: IconSize.Medium,\n\t\t\t\t\t}),\n\t\t\t\t\tm(\n\t\t\t\t\t\tSwitch,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tchecked: editModel.isAllDay,\n\t\t\t\t\t\t\tonclick: (value) => (editModel.isAllDay = value),\n\t\t\t\t\t\t\tariaLabel: lang.get(\"allDay_label\"),\n\t\t\t\t\t\t\tdisabled: disabled,\n\t\t\t\t\t\t\tvariant: \"expanded\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\tlang.get(\"allDay_label\"),\n\t\t\t\t\t),\n\t\t\t\t]),\n\t\t\t\tm(\".flex.col.full-width.flex-grow.gap-vpad-s\", { style: { paddingLeft: px(size.icon_size_large + size.vpad_small) } }, [\n\t\t\t\t\tm(Divider, { color: theme.button_bubble_bg }),\n\t\t\t\t\tm(\".time-selection-grid.pr-vpad-s\", [\n\t\t\t\t\t\tm(\"\", lang.get(\"dateFrom_label\")),\n\t\t\t\t\t\tm(\n\t\t\t\t\t\t\t`${isApp() ? \"\" : \".pl-vpad-l\"}`,\n\t\t\t\t\t\t\tm(DatePicker, {\n\t\t\t\t\t\t\t\tclasses: appClasses,\n\t\t\t\t\t\t\t\tdate: attrs.editModel.startDate,\n\t\t\t\t\t\t\t\tonDateSelected: (date) => date && (editModel.startDate = date),\n\t\t\t\t\t\t\t\tstartOfTheWeekOffset,\n\t\t\t\t\t\t\t\tlabel: \"dateFrom_label\",\n\t\t\t\t\t\t\t\tuseInputButton: true,\n\t\t\t\t\t\t\t\tdisabled: attrs.disabled,\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t),\n\t\t\t\t\t\tm(\n\t\t\t\t\t\t\t\"\",\n\t\t\t\t\t\t\tm(TimePicker, {\n\t\t\t\t\t\t\t\tclasses: appClasses,\n\t\t\t\t\t\t\t\ttime: editModel.startTime,\n\t\t\t\t\t\t\t\tonTimeSelected: (time) => (editModel.startTime = time),\n\t\t\t\t\t\t\t\ttimeFormat,\n\t\t\t\t\t\t\t\tdisabled: attrs.disabled || attrs.editModel.isAllDay,\n\t\t\t\t\t\t\t\tariaLabel: lang.get(\"startTime_label\"),\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t),\n\t\t\t\t\t\tm(\"\", lang.get(\"dateTo_label\")),\n\t\t\t\t\t\tm(\n\t\t\t\t\t\t\t`${isApp() ? \"\" : \".pl-vpad-l\"}`,\n\t\t\t\t\t\t\tm(DatePicker, {\n\t\t\t\t\t\t\t\tclasses: appClasses,\n\t\t\t\t\t\t\t\tdate: attrs.editModel.endDate,\n\t\t\t\t\t\t\t\tonDateSelected: (date) => date && (editModel.endDate = date),\n\t\t\t\t\t\t\t\tstartOfTheWeekOffset,\n\t\t\t\t\t\t\t\tlabel: \"dateTo_label\",\n\t\t\t\t\t\t\t\tuseInputButton: true,\n\t\t\t\t\t\t\t\tdisabled: attrs.disabled,\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t),\n\t\t\t\t\t\tm(\n\t\t\t\t\t\t\t\"\",\n\t\t\t\t\t\t\tm(TimePicker, {\n\t\t\t\t\t\t\t\tclasses: appClasses,\n\t\t\t\t\t\t\t\ttime: editModel.endTime,\n\t\t\t\t\t\t\t\tonTimeSelected: (time) => (editModel.endTime = time),\n\t\t\t\t\t\t\t\ttimeFormat,\n\t\t\t\t\t\t\t\tdisabled: attrs.disabled || attrs.editModel.isAllDay,\n\t\t\t\t\t\t\t\tariaLabel: lang.get(\"endTime_label\"),\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t),\n\t\t\t\t\t]),\n\t\t\t\t]),\n\t\t\t]),\n\t\t])\n\t}\n}\n"]}